!(function () {
  function e(e, t) {
    var n = Object.keys(e);
    if (Object.getOwnPropertySymbols) {
      var r = Object.getOwnPropertySymbols(e);
      (t &&
        (r = r.filter(function (t) {
          return Object.getOwnPropertyDescriptor(e, t).enumerable;
        })),
        n.push.apply(n, r));
    }
    return n;
  }
  function t(t) {
    for (var n = 1; n < arguments.length; n++) {
      var r = null != arguments[n] ? arguments[n] : {};
      n % 2
        ? e(Object(r), !0).forEach(function (e) {
            s(t, e, r[e]);
          })
        : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r))
          : e(Object(r)).forEach(function (e) {
              Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e));
            });
    }
    return t;
  }
  function n(e, t) {
    return (
      (function (e) {
        if (Array.isArray(e)) return e;
      })(e) ||
      (function (e, t) {
        var n = null == e ? null : ("undefined" != typeof Symbol && e[Symbol.iterator]) || e["@@iterator"];
        if (null != n) {
          var r,
            i,
            a,
            o,
            s = [],
            u = !0,
            l = !1;
          try {
            if (((a = (n = n.call(e)).next), 0 === t)) {
              if (Object(n) !== n) return;
              u = !1;
            } else for (; !(u = (r = a.call(n)).done) && (s.push(r.value), s.length !== t); u = !0);
          } catch (e) {
            ((l = !0), (i = e));
          } finally {
            try {
              if (!u && null != n.return && ((o = n.return()), Object(o) !== o)) return;
            } finally {
              if (l) throw i;
            }
          }
          return s;
        }
      })(e, t) ||
      l(e, t) ||
      (function () {
        throw new TypeError(
          "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.",
        );
      })()
    );
  }
  function r() {
    /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e,
      t,
      n = "function" == typeof Symbol ? Symbol : {},
      a = n.iterator || "@@iterator",
      o = n.toStringTag || "@@toStringTag";
    function s(n, r, a, o) {
      var s = r && r.prototype instanceof l ? r : l,
        d = Object.create(s.prototype);
      return (
        i(
          d,
          "_invoke",
          (function (n, r, i) {
            var a,
              o,
              s,
              l = 0,
              d = i || [],
              c = !1,
              h = {
                p: 0,
                n: 0,
                v: e,
                a: p,
                f: p.bind(e, 4),
                d: function (t, n) {
                  return ((a = t), (o = 0), (s = e), (h.n = n), u);
                },
              };
            function p(n, r) {
              for (o = n, s = r, t = 0; !c && l && !i && t < d.length; t++) {
                var i,
                  a = d[t],
                  p = h.p,
                  f = a[2];
                n > 3
                  ? (i = f === r) && ((s = a[(o = a[4]) ? 5 : ((o = 3), 3)]), (a[4] = a[5] = e))
                  : a[0] <= p &&
                    ((i = n < 2 && p < a[1])
                      ? ((o = 0), (h.v = r), (h.n = a[1]))
                      : p < f &&
                        (i = n < 3 || a[0] > r || r > f) &&
                        ((a[4] = n), (a[5] = r), (h.n = f), (o = 0)));
              }
              if (i || n > 1) return u;
              throw ((c = !0), r);
            }
            return function (i, d, f) {
              if (l > 1) throw TypeError("Generator is already running");
              for (c && 1 === d && p(d, f), o = d, s = f; (t = o < 2 ? e : s) || !c; ) {
                a || (o ? (o < 3 ? (o > 1 && (h.n = -1), p(o, s)) : (h.n = s)) : (h.v = s));
                try {
                  if (((l = 2), a)) {
                    if ((o || (i = "next"), (t = a[i]))) {
                      if (!(t = t.call(a, s))) throw TypeError("iterator result is not an object");
                      if (!t.done) return t;
                      ((s = t.value), o < 2 && (o = 0));
                    } else
                      (1 === o && (t = a.return) && t.call(a),
                        o < 2 &&
                          ((s = TypeError("The iterator does not provide a '" + i + "' method")), (o = 1)));
                    a = e;
                  } else if ((t = (c = h.n < 0) ? s : n.call(r, h)) !== u) break;
                } catch (t) {
                  ((a = e), (o = 1), (s = t));
                } finally {
                  l = 1;
                }
              }
              return { value: t, done: c };
            };
          })(n, a, o),
          !0,
        ),
        d
      );
    }
    var u = {};
    function l() {}
    function d() {}
    function c() {}
    t = Object.getPrototypeOf;
    var h = [][a]
        ? t(t([][a]()))
        : (i((t = {}), a, function () {
            return this;
          }),
          t),
      p = (c.prototype = l.prototype = Object.create(h));
    function f(e) {
      return (
        Object.setPrototypeOf
          ? Object.setPrototypeOf(e, c)
          : ((e.__proto__ = c), i(e, o, "GeneratorFunction")),
        (e.prototype = Object.create(p)),
        e
      );
    }
    return (
      (d.prototype = c),
      i(p, "constructor", c),
      i(c, "constructor", d),
      (d.displayName = "GeneratorFunction"),
      i(c, o, "GeneratorFunction"),
      i(p),
      i(p, o, "Generator"),
      i(p, a, function () {
        return this;
      }),
      i(p, "toString", function () {
        return "[object Generator]";
      }),
      (r = function () {
        return { w: s, m: f };
      })()
    );
  }
  function i(e, t, n, r) {
    var a = Object.defineProperty;
    try {
      a({}, "", {});
    } catch (e) {
      a = 0;
    }
    ((i = function (e, t, n, r) {
      function o(t, n) {
        i(e, t, function (e) {
          return this._invoke(t, n, e);
        });
      }
      t
        ? a
          ? a(e, t, { value: n, enumerable: !r, configurable: !r, writable: !r })
          : (e[t] = n)
        : (o("next", 0), o("throw", 1), o("return", 2));
    }),
      i(e, t, n, r));
  }
  function a(e, t, n, r, i, a, o) {
    try {
      var s = e[a](o),
        u = s.value;
    } catch (e) {
      return void n(e);
    }
    s.done ? t(u) : Promise.resolve(u).then(r, i);
  }
  function o(e) {
    return function () {
      var t = this,
        n = arguments;
      return new Promise(function (r, i) {
        var o = e.apply(t, n);
        function s(e) {
          a(o, r, i, s, u, "next", e);
        }
        function u(e) {
          a(o, r, i, s, u, "throw", e);
        }
        s(void 0);
      });
    };
  }
  function s(e, t, n) {
    return (
      (t = (function (e) {
        var t = (function (e, t) {
          if ("object" != typeof e || !e) return e;
          var n = e[Symbol.toPrimitive];
          if (void 0 !== n) {
            var r = n.call(e, t || "default");
            if ("object" != typeof r) return r;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return ("string" === t ? String : Number)(e);
        })(e, "string");
        return "symbol" == typeof t ? t : t + "";
      })(t)) in e
        ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 })
        : (e[t] = n),
      e
    );
  }
  function u(e, t) {
    var n = ("undefined" != typeof Symbol && e[Symbol.iterator]) || e["@@iterator"];
    if (!n) {
      if (Array.isArray(e) || (n = l(e)) || (t && e && "number" == typeof e.length)) {
        n && (e = n);
        var r = 0,
          i = function () {};
        return {
          s: i,
          n: function () {
            return r >= e.length ? { done: !0 } : { done: !1, value: e[r++] };
          },
          e: function (e) {
            throw e;
          },
          f: i,
        };
      }
      throw new TypeError(
        "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.",
      );
    }
    var a,
      o = !0,
      s = !1;
    return {
      s: function () {
        n = n.call(e);
      },
      n: function () {
        var e = n.next();
        return ((o = e.done), e);
      },
      e: function (e) {
        ((s = !0), (a = e));
      },
      f: function () {
        try {
          o || null == n.return || n.return();
        } finally {
          if (s) throw a;
        }
      },
    };
  }
  function l(e, t) {
    if (e) {
      if ("string" == typeof e) return d(e, t);
      var n = {}.toString.call(e).slice(8, -1);
      return (
        "Object" === n && e.constructor && (n = e.constructor.name),
        "Map" === n || "Set" === n
          ? Array.from(e)
          : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
            ? d(e, t)
            : void 0
      );
    }
  }
  function d(e, t) {
    (null == t || t > e.length) && (t = e.length);
    for (var n = 0, r = Array(t); n < t; n++) r[n] = e[n];
    return r;
  }
  System.register([], function (e, i) {
    "use strict";
    return {
      execute: function () {
        var a = r().m(eu);
        function l(e, t) {}
        function d(e, t, n) {
          var r = Math.trunc(e >>> 24),
            i = Math.trunc((e >>> 16) & 255),
            a = Math.trunc((e >>> 8) & 255),
            o = Math.trunc(255 & e),
            s = Math.trunc(t >>> 24),
            u = Math.trunc((t >>> 16) & 255),
            l = Math.trunc((t >>> 8) & 255),
            d = Math.trunc(255 & t);
          return (
            ((Math.round(s * n + r * (1 - n)) << 24) |
              (Math.round(u * n + i * (1 - n)) << 16) |
              (Math.round(l * n + a * (1 - n)) << 8) |
              Math.round(d * n + o * (1 - n))) >>>
            0
          );
        }
        function c(e, t) {
          return (
            (((e >>> 24) << 24) |
              (((e >>> 16) & 255) << 16) |
              (((e >>> 8) & 255) << 8) |
              Math.trunc((255 & e) * t)) >>>
            0
          );
        }
        var h = !0;
        function p(e, t, n = !1) {
          var r = ((255 & e) / 255) * t,
            i = h ? r : 1,
            a = Math.trunc((e >>> 24) * i),
            o = Math.trunc(((e >>> 16) & 255) * i),
            s = Math.trunc(((e >>> 8) & 255) * i),
            u = Math.trunc(255 * r);
          return n
            ? ((u << 24) | (s << 16) | (o << 8) | a) >>> 0
            : ((a << 24) | (o << 16) | (s << 8) | u) >>> 0;
        }
        function f(e, t) {
          return Object.prototype.hasOwnProperty.call(e, t);
        }
        var g,
          m = 1;
        class v {
          constructor() {
            s(this, "eventListeners", {});
          }
          on(e, t) {
            var n = this.eventListeners[e];
            (n || (n = []), n.push(t), (this.eventListeners[e] = n));
          }
          off(e, t) {
            var n = this.eventListeners[e];
            if (n)
              if (t) {
                var r = n.indexOf(t);
                r >= 0 && n.splice(r, 1);
              } else delete this.eventListeners[e];
          }
          once(e, t) {
            var n = (r, i) => {
              (this.off(e, n), t(r, i));
            };
            this.on(e, n);
          }
          emit(e, t) {
            var n = this.eventListeners[e];
            n &&
              [...n].forEach(e => {
                e(this, t);
              });
          }
          removeAllListeners() {
            this.eventListeners = {};
          }
        }
        !(function (e) {
          ((e[(e.generic = 0)] = "generic"),
            (e[(e.color = 1)] = "color"),
            (e[(e.image = 2)] = "image"),
            (e[(e.noise = 3)] = "noise"),
            (e[(e.renderToTexture = 4)] = "renderToTexture"),
            (e[(e.subTexture = 5)] = "subTexture"));
        })(g || (g = {}));
        class y extends v {
          constructor(e) {
            (super(),
              s(this, "txManager", void 0),
              s(this, "_dimensions", null),
              s(this, "_error", null),
              s(this, "state", "initial"),
              s(this, "renderableOwners", []),
              s(this, "renderable", !1),
              s(this, "type", g.generic),
              s(this, "preventCleanup", !1),
              s(this, "ctxTexture", void 0),
              s(this, "textureData", null),
              s(this, "memUsed", 0),
              s(this, "retryCount", 0),
              s(this, "maxRetryCount", void 0),
              s(this, "createdAt", Date.now()),
              s(this, "gracePeriodExpired", !1),
              (this.txManager = e),
              (this.maxRetryCount = e.maxRetryCount));
          }
          get dimensions() {
            return this._dimensions;
          }
          get error() {
            return this._error;
          }
          isWithinStartupGracePeriod() {
            return (
              !this.gracePeriodExpired &&
              (!(Date.now() - this.createdAt >= y.STARTUP_GRACE_PERIOD) ||
                ((this.gracePeriodExpired = !0), !1))
            );
          }
          canBeCleanedUp() {
            return (
              !this.preventCleanup &&
              !this.isWithinStartupGracePeriod() &&
              !0 !== this.renderable &&
              !(this.renderableOwners.length > 0)
            );
          }
          setRenderableOwner(e, t) {
            var n = this.renderableOwners.length,
              r = this.renderableOwners.indexOf(e);
            if (!0 === t) {
              -1 === r && this.renderableOwners.push(e);
              var i,
                a = this.renderableOwners.length;
              if (n !== a && 1 === a)
                ((this.renderable = !0),
                  null === (i = this.onChangeIsRenderable) || void 0 === i || i.call(this, !0),
                  this.load());
            } else {
              -1 !== r && this.renderableOwners.splice(r, 1);
              var o,
                s = this.renderableOwners.length;
              if (n !== s && 0 === s)
                ((this.renderable = !1),
                  null === (o = this.onChangeIsRenderable) || void 0 === o || o.call(this, !1));
            }
          }
          load() {
            this.retryCount > this.maxRetryCount || this.txManager.loadTexture(this);
          }
          loadCtxTexture() {
            return (
              void 0 === this.ctxTexture &&
                (this.ctxTexture = this.txManager.renderer.createCtxTexture(this)),
              this.ctxTexture
            );
          }
          free() {
            var e;
            null === (e = this.ctxTexture) || void 0 === e || e.free();
          }
          release() {
            var e;
            (null === (e = this.ctxTexture) || void 0 === e || e.release(),
              (this.ctxTexture = void 0),
              this.freeTextureData());
          }
          destroy() {
            ("loaded" === this.state && this.free(), this.freeTextureData());
          }
          freeTextureData() {
            queueMicrotask(() => {
              this.textureData = null;
            });
          }
          setState(e, t) {
            if (this.state !== e) {
              var n = null;
              ("loaded" === e
                ? ((this._error = null),
                  void 0 !== t &&
                    "width" in t == !0 &&
                    "height" in t == !0 &&
                    void 0 !== t.width &&
                    void 0 !== t.height &&
                    (this._dimensions = t),
                  (n = this._dimensions))
                : "failed" === e
                  ? ((this._error = t),
                    (n = this._error),
                    (this.retryCount += 1),
                    queueMicrotask(() => {
                      this.release();
                    }))
                  : "loading" === e
                    ? ((this._error = null), (this._dimensions = null))
                    : (this._error = null),
                (this.state = e),
                this.emit(e, n));
            }
          }
          getTextureData() {
            var e = this;
            return o(
              r().m(function t() {
                return r().w(function (t) {
                  for (;;)
                    switch (t.n) {
                      case 0:
                        if (null !== e.textureData) {
                          t.n = 2;
                          break;
                        }
                        return ((t.n = 1), e.getTextureSource());
                      case 1:
                        e.textureData = t.v;
                      case 2:
                        return t.a(2, e.textureData);
                    }
                }, t);
              }),
            )();
          }
          static makeCacheKey(e) {
            return !1;
          }
          static resolveDefaults(e) {
            return {};
          }
          retry() {
            (this.release(), (this.retryCount = 0), this.load());
          }
        }
        s(y, "STARTUP_GRACE_PERIOD", 2e3);
        var b = /^(data|ftps?|https?):/,
          x = e => [(e >>> 24) / 255, ((e >>> 16) & 255) / 255, ((e >>> 8) & 255) / 255, (255 & e) / 255];
        function T(e, t, n, r, i) {
          return i ? ((i.x1 = e), (i.y1 = t), (i.x2 = n), (i.y2 = r), i) : { x1: e, y1: t, x2: n, y2: r };
        }
        function w(e, t) {
          return e.x1 < t.x2 && e.x2 > t.x1 && e.y1 < t.y2 && e.y2 > t.y1;
        }
        function S(e, t, n) {
          var r = Math.max(e.x, t.x),
            i = Math.max(e.y, t.y),
            a = Math.min(e.x + e.width, t.x + t.width) - r,
            o = Math.min(e.y + e.height, t.y + t.height) - i;
          return a > 0 && o > 0
            ? n
              ? ((n.x = r), (n.y = i), (n.width = a), (n.height = o), n)
              : { x: r, y: i, width: a, height: o }
            : n
              ? ((n.x = 0), (n.y = 0), (n.width = 0), (n.height = 0), n)
              : { x: 0, y: 0, width: 0, height: 0 };
        }
        function A(e, t) {
          return t
            ? ((t.x = e.x), (t.y = e.y), (t.width = e.width), (t.height = e.height), t)
            : { x: e.x, y: e.y, width: e.width, height: e.height };
        }
        function E(e, t) {
          return e.x1 <= t.x2 && e.y1 <= t.y2 && e.x2 >= t.x1 && e.y2 >= t.y1;
        }
        function k(e, t, n) {
          return !(e < n.x1 || e > n.x2 || t < n.y1 || t > n.y2);
        }
        function I(e, t) {
          return T(e.x1 - t[3], e.y1 - t[0], e.x2 + t[1], e.y2 + t[2]);
        }
        function C(e) {
          return !0 === e.startsWith("data:");
        }
        function M(e) {
          for (
            var t,
              n =
                (null === (t = (e = e.replace(/^data:/, "")).match(/image\/[^;]+/)) || void 0 === t
                  ? void 0
                  : t[0]) || "",
              r = e.replace(/^[^,]+,/, ""),
              i = 1024,
              a = atob(r),
              o = a.length,
              s = Math.ceil(o / i),
              u = new Array(s),
              l = 0;
            l < s;
            ++l
          ) {
            for (var d = l * i, c = Math.min(d + i, o), h = new Array(c - d), p = d, f = 0; p < c; ++f, ++p) {
              var g;
              h[f] = null === (g = a[p]) || void 0 === g ? void 0 : g.charCodeAt(0);
            }
            u[l] = new Uint8Array(h);
          }
          return new Blob(u, { type: n });
        }
        class R {
          constructor() {
            (s(this, "ta", void 0),
              s(this, "tb", void 0),
              s(this, "tx", void 0),
              s(this, "tc", void 0),
              s(this, "td", void 0),
              s(this, "ty", void 0),
              s(this, "_floatArr", null),
              s(this, "mutation", void 0),
              (this.ta = 0),
              (this.tb = 0),
              (this.tx = 0),
              (this.tc = 0),
              (this.td = 0),
              (this.ty = 0),
              (this.mutation = !0));
          }
          static get temp() {
            return _;
          }
          static multiply(e, t, n) {
            var r = e.ta * t.ta + e.tb * t.tc,
              i = e.ta * t.tb + e.tb * t.td,
              a = e.ta * t.tx + e.tb * t.ty + e.tx,
              o = e.tc * t.ta + e.td * t.tc,
              s = e.tc * t.tb + e.td * t.td,
              u = e.tc * t.tx + e.td * t.ty + e.ty;
            return (
              n || (n = new R()),
              (n.ta = r),
              (n.tb = i),
              (n.tx = a),
              (n.tc = o),
              (n.td = s),
              (n.ty = u),
              (n.mutation = !0),
              n
            );
          }
          static identity(e) {
            return (
              e || (e = new R()),
              (e.ta = 1),
              (e.tb = 0),
              (e.tx = 0),
              (e.tc = 0),
              (e.td = 1),
              (e.ty = 0),
              (e.mutation = !0),
              e
            );
          }
          static translate(e, t, n) {
            return (
              n || (n = new R()),
              (n.ta = 1),
              (n.tb = 0),
              (n.tx = e),
              (n.tc = 0),
              (n.td = 1),
              (n.ty = t),
              (n.mutation = !0),
              n
            );
          }
          static scale(e, t, n) {
            return (
              n || (n = new R()),
              (n.ta = e),
              (n.tb = 0),
              (n.tx = 0),
              (n.tc = 0),
              (n.td = t),
              (n.ty = 0),
              (n.mutation = !0),
              n
            );
          }
          static rotate(e, t) {
            var n = Math.cos(e),
              r = Math.sin(e);
            return (
              t || (t = new R()),
              (t.ta = n),
              (t.tb = -r),
              (t.tx = 0),
              (t.tc = r),
              (t.td = n),
              (t.ty = 0),
              (t.mutation = !0),
              t
            );
          }
          static copy(e, t) {
            return (
              t || (t = new R()),
              (t.ta = e.ta),
              (t.tc = e.tc),
              (t.tb = e.tb),
              (t.td = e.td),
              (t.tx = e.tx),
              (t.ty = e.ty),
              (t.mutation = !0),
              t
            );
          }
          translate(e, t) {
            return (
              (this.tx = this.ta * e + this.tb * t + this.tx),
              (this.ty = this.tc * e + this.td * t + this.ty),
              (this.mutation = !0),
              this
            );
          }
          scale(e, t) {
            return (
              (this.ta = this.ta * e),
              (this.tb = this.tb * t),
              (this.tc = this.tc * e),
              (this.td = this.td * t),
              (this.mutation = !0),
              this
            );
          }
          rotate(e) {
            if (0 === e || !((e % Math.PI) * 2)) return this;
            var t = Math.cos(e),
              n = Math.sin(e),
              r = this.ta * t + this.tb * n,
              i = this.tb * t - this.ta * n,
              a = this.tc * t + this.td * n,
              o = this.td * t - this.tc * n;
            return ((this.ta = r), (this.tb = i), (this.tc = a), (this.td = o), (this.mutation = !0), this);
          }
          multiply(e) {
            return R.multiply(this, e, this);
          }
          getFloatArr() {
            return (
              this._floatArr || (this._floatArr = new Float32Array(9)),
              this.mutation &&
                ((this._floatArr[0] = this.ta),
                (this._floatArr[1] = this.tc),
                (this._floatArr[2] = 0),
                (this._floatArr[3] = this.tb),
                (this._floatArr[4] = this.td),
                (this._floatArr[5] = 0),
                (this._floatArr[6] = this.tx),
                (this._floatArr[7] = this.ty),
                (this._floatArr[8] = 1),
                (this.mutation = !1)),
              this._floatArr
            );
          }
        }
        var _ = new R();
        class D {
          constructor(e) {
            (s(this, "data", void 0),
              (this.data = new Float32Array(8)),
              e &&
                ((this.data[0] = e[0]),
                (this.data[2] = e[2]),
                (this.data[4] = e[4]),
                (this.data[6] = e[6]),
                (this.data[1] = e[1]),
                (this.data[3] = e[3]),
                (this.data[5] = e[5]),
                (this.data[7] = e[7])));
          }
          static translate(e, t, n, r, i, a, o, s, u) {
            return (
              u || (u = new D()),
              (u.data[0] = e),
              (u.data[2] = n),
              (u.data[4] = i),
              (u.data[6] = o),
              (u.data[1] = t),
              (u.data[3] = r),
              (u.data[5] = a),
              (u.data[7] = s),
              u
            );
          }
          get x1() {
            return this.data[0];
          }
          get x2() {
            return this.data[2];
          }
          get x3() {
            return this.data[4];
          }
          get x4() {
            return this.data[6];
          }
          get y1() {
            return this.data[1];
          }
          get y2() {
            return this.data[3];
          }
          get y3() {
            return this.data[5];
          }
          get y4() {
            return this.data[7];
          }
        }
        var P,
          L = (e, t, n, r) => {
            var i = 3 * e,
              a = 3 * (n - e) - i,
              o = 1 - i - a,
              s = 3 * t,
              u = 3 * (r - t) - s,
              l = 1 - s - u;
            return function (e) {
              if (e >= 1) return 1;
              if (e <= 0) return 0;
              for (var t, n, r = 0.5, d = 0; d < 20; d++) {
                if ((n = e - r * (r * (r * o + a) + i)) > -1e-8 && n < 1e-8) return r * (r * (r * l + u) + s);
                if ((t = r * (r * (3 * o) + 2 * a) + i) > 1e-10 && t < 1e-10) break;
                r += n / t;
              }
              for (var c = 0, h = 1, p = 0; p < 20; p++) {
                if ((n = e - (r = 0.5 * (c + h)) * (r * (r * o + a) + i)) > -1e-8 && n < 1e-8)
                  return r * (r * (r * l + u) + s);
                n < 0 ? (h = r) : (c = r);
              }
            };
          },
          N = {},
          O = {
            ease: [0.25, 0.1, 0.25, 1],
            "ease-in": [0.42, 0, 1, 1],
            "ease-out": [0, 0, 0.58, 1],
            "ease-in-out": [0.42, 0, 0.58, 1],
            "ease-in-sine": [0.12, 0, 0.39, 0],
            "ease-out-sine": [0.12, 0, 0.39, 0],
            "ease-in-out-sine": [0.37, 0, 0.63, 1],
            "ease-in-cubic": [0.32, 0, 0.67, 0],
            "ease-out-cubic": [0.33, 1, 0.68, 1],
            "ease-in-out-cubic": [0.65, 0, 0.35, 1],
            "ease-in-circ": [0.55, 0, 1, 0.45],
            "ease-out-circ": [0, 0.55, 0.45, 1],
            "ease-in-out-circ": [0.85, 0, 0.15, 1],
            "ease-in-back": [0.36, 0, 0.66, -0.56],
            "ease-out-back": [0.34, 1.56, 0.64, 1],
            "ease-in-out-back": [0.68, -0.6, 0.32, 1.6],
          },
          U = e => e,
          B = e => {
            if ("linear" === e) return U;
            if (void 0 !== N[e]) return N[e] || U;
            if ("step-start" === e) return () => 1;
            if ("step-end" === e) return e => (1 === e ? 1 : 0);
            var t = O[e];
            if (void 0 !== t) {
              var r = n(t, 4),
                i = r[0],
                a = r[1],
                o = r[2],
                s = r[3],
                u = L(i, a, o, s);
              return ((N[e] = u), u);
            }
            return e.startsWith("cubic-bezier")
              ? (e => {
                  var t = e.match(/-?\d*\.?\d+/g);
                  if (t) {
                    var r = n(t, 4),
                      i = r[0],
                      a = r[1],
                      o = r[2],
                      s = r[3],
                      u = parseFloat(i || "0.42"),
                      l = parseFloat(a || "0"),
                      d = parseFloat(o || "1"),
                      c = parseFloat(s || "1"),
                      h = L(u, l, d, c);
                    return ((N[e] = h), h);
                  }
                  return (console.warn("Unknown cubic-bezier timing: " + e), U);
                })(e)
              : (console.warn("Unknown timing function: " + e), U);
          };
        function j(e) {
          return (e / 1024 / 1024).toFixed(2);
        }
        class F extends v {
          constructor(e, t, r) {
            var i, a, o, u, l, d;
            for (var c in (super(),
            s(this, "node", void 0),
            s(this, "props", void 0),
            s(this, "settings", void 0),
            s(this, "progress", 0),
            s(this, "delayFor", 0),
            s(this, "delay", 0),
            s(this, "timingFunction", void 0),
            s(this, "propValuesMap", {}),
            s(this, "dynPropValuesMap", void 0),
            (this.node = e),
            (this.props = t),
            t))
              if ("shaderProps" !== c)
                (void 0 === this.propValuesMap.props && (this.propValuesMap.props = {}),
                  (this.propValuesMap.props[c] = { start: e[c] || 0, target: t[c] }));
              else if ("DynamicShader" !== e.shader.type)
                for (var h in ((this.propValuesMap.shaderProps = {}), t.shaderProps))
                  this.propValuesMap.shaderProps[h] = { start: e.shader.props[h], target: t.shaderProps[h] };
              else {
                var p = Object.keys(t.shaderProps),
                  f = p.length;
                this.dynPropValuesMap = {};
                for (var g = 0; g < f; g++) {
                  var m = p[g],
                    v = t.shaderProps[m];
                  this.dynPropValuesMap[m] = {};
                  for (var y = Object.entries(v), b = y.length, x = 0; x < b; x++) {
                    var T = n(y[x], 2),
                      w = T[0],
                      S = T[1];
                    this.dynPropValuesMap[m][w] = { start: e.shader.props[m][w], target: S };
                  }
                }
              }
            var A = r.easing || "linear",
              E = null !== (i = r.delay) && void 0 !== i ? i : 0;
            ((this.settings = {
              duration: null !== (a = r.duration) && void 0 !== a ? a : 0,
              delay: E,
              easing: A,
              loop: null !== (o = r.loop) && void 0 !== o && o,
              repeat: null !== (u = r.repeat) && void 0 !== u ? u : 0,
              repeatDelay: null !== (l = r.repeatDelay) && void 0 !== l ? l : 0,
              stopMethod: null !== (d = r.stopMethod) && void 0 !== d && d,
            }),
              (this.timingFunction = B(A)),
              (this.delayFor = E),
              (this.delay = E));
          }
          reset() {
            ((this.progress = 0), (this.delayFor = this.settings.delay || 0), this.update(0));
          }
          restoreValues(e, t) {
            for (var r = Object.entries(t), i = r.length, a = 0; a < i; a++) {
              var o = n(r[a], 2),
                s = o[0],
                u = o[1];
              e[s] = u.start;
            }
          }
          restore() {
            if (
              (this.reset(),
              void 0 !== this.propValuesMap.props && this.restoreValues(this.node, this.propValuesMap.props),
              void 0 !== this.propValuesMap.shaderProps &&
                this.restoreValues(this.node.shader.props, this.propValuesMap.shaderProps),
              void 0 !== this.dynPropValuesMap)
            ) {
              var e = Object.keys(this.dynPropValuesMap),
                t = e.length;
              if (t > 0)
                for (var n = 0; n < t; n++) {
                  var r = e[n];
                  this.restoreValues(this.node.shader.props[r], this.dynPropValuesMap[r]);
                }
            }
          }
          reverseValues(e) {
            for (var t = Object.entries(e), r = t.length, i = 0; i < r; i++) {
              var a = n(t[i], 2),
                o = a[0],
                s = a[1];
              e[o] = { start: s.target, target: s.start };
            }
          }
          reverse() {
            if (
              ((this.progress = 0),
              void 0 !== this.propValuesMap.props && this.reverseValues(this.propValuesMap.props),
              void 0 !== this.propValuesMap.shaderProps && this.reverseValues(this.propValuesMap.shaderProps),
              void 0 !== this.dynPropValuesMap)
            ) {
              var e = Object.keys(this.dynPropValuesMap),
                t = e.length;
              if (t > 0)
                for (var n = 0; n < t; n++) {
                  var r = e[n];
                  this.reverseValues(this.dynPropValuesMap[r]);
                }
            }
            this.settings.loop || (this.settings.stopMethod = !1);
          }
          applyEasing(e, t, n) {
            return (this.timingFunction(e) || e) * (n - t) + t;
          }
          updateValue(e, t, n, r) {
            if (1 === this.progress) return t;
            if (0 === this.progress) return n;
            var i = t;
            return -1 !== e.indexOf("color")
              ? n === i
                ? n
                : d(n, i, (r && this.timingFunction(this.progress)) || this.progress)
              : r
                ? this.applyEasing(this.progress, n, i)
                : n + (i - n) * this.progress;
          }
          updateValues(e, t, r) {
            for (var i = Object.entries(t), a = i.length, o = 0; o < a; o++) {
              var s = n(i[o], 2),
                u = s[0],
                l = s[1];
              e[u] = this.updateValue(u, l.target, l.start, r);
            }
          }
          update(e) {
            var t = this.settings,
              n = t.duration,
              r = t.loop,
              i = t.easing,
              a = t.stopMethod,
              o = this.delayFor;
            if (this.node.destroyed) this.emit("destroyed", {});
            else if (0 !== n || 0 !== o) {
              if (this.delayFor > 0) {
                if (((this.delayFor -= e), this.delayFor >= 0)) return;
                ((e = -this.delayFor), (this.delayFor = 0));
              }
              if (0 !== n)
                if (
                  (0 === this.progress && this.emit("animating", {}),
                  (this.progress += e / n),
                  this.progress > 1 && ((this.progress = r ? 0 : 1), (this.delayFor = this.delay), a))
                )
                  this.emit("finished", {});
                else {
                  if (
                    (void 0 !== this.propValuesMap.props &&
                      this.updateValues(this.node, this.propValuesMap.props, i),
                    void 0 !== this.propValuesMap.shaderProps &&
                      this.updateValues(this.node.shader.props, this.propValuesMap.shaderProps, i),
                    void 0 !== this.dynPropValuesMap)
                  ) {
                    var s = Object.keys(this.dynPropValuesMap),
                      u = s.length;
                    if (u > 0)
                      for (var l = 0; l < u; l++) {
                        var d = s[l];
                        this.updateValues(this.node.shader.props[d], this.dynPropValuesMap[d], i);
                      }
                  }
                  (this.progress < 1 && this.emit("tick", { progress: this.progress }),
                    1 === this.progress && this.emit("finished", {}));
                }
              else this.emit("finished", {});
            } else this.emit("finished", {});
          }
        }
        class V extends v {
          constructor(e, t) {
            (super(),
              s(this, "manager", void 0),
              s(this, "animation", void 0),
              s(this, "stoppedPromise", void 0),
              s(this, "stoppedResolve", null),
              s(this, "state", void 0),
              (this.manager = e),
              (this.animation = t),
              (this.state = "stopped"),
              (this.stoppedPromise = Promise.resolve()),
              (this.onAnimating = this.onAnimating.bind(this)),
              (this.onFinished = this.onFinished.bind(this)),
              (this.onTick = this.onTick.bind(this)),
              (this.onDestroy = this.onDestroy.bind(this)));
          }
          start() {
            return (
              "running" !== this.state &&
                "scheduled" !== this.state &&
                (this.makeStoppedPromise(), this.registerAnimation(), (this.state = "scheduled")),
              this
            );
          }
          stop() {
            return (
              this.unregisterAnimation(),
              null !== this.stoppedResolve &&
                (this.stoppedResolve(), (this.stoppedResolve = null), this.emit("stopped", this)),
              this.animation.reset(),
              (this.state = "stopped"),
              this
            );
          }
          pause() {
            return (this.unregisterAnimation(), (this.state = "paused"), this);
          }
          restore() {
            return ((this.stoppedResolve = null), this.animation.restore(), this);
          }
          waitUntilStopped() {
            return this.stoppedPromise;
          }
          registerAnimation() {
            (this.animation.once("finished", this.onFinished),
              this.animation.on("animating", this.onAnimating),
              this.animation.on("tick", this.onTick),
              this.animation.on("destroyed", this.onDestroy),
              this.manager.registerAnimation(this.animation));
          }
          unregisterAnimation() {
            (this.manager.unregisterAnimation(this.animation),
              this.animation.off("finished", this.onFinished),
              this.animation.off("animating", this.onAnimating),
              this.animation.off("tick", this.onTick),
              this.animation.off("destroy", this.onDestroy));
          }
          makeStoppedPromise() {
            null === this.stoppedResolve &&
              (this.stoppedPromise = new Promise(e => {
                this.stoppedResolve = e;
              }));
          }
          onDestroy() {
            (this.unregisterAnimation(), (this.state = "stopped"));
          }
          onFinished() {
            var e = this.animation.settings,
              t = e.loop;
            if ("reverse" === e.stopMethod)
              return (this.animation.once("finished", this.onFinished), void this.animation.reverse());
            t ||
              (this.unregisterAnimation(),
              null !== this.stoppedResolve && (this.stoppedResolve(), (this.stoppedResolve = null)),
              this.emit("stopped", this),
              (this.state = "stopped"));
          }
          onAnimating() {
            ((this.state = "running"), this.emit("animating", this));
          }
          onTick(e, t) {
            this.emit("tick", t);
          }
        }
        !(function (e) {
          ((e[(e.Init = 0)] = "Init"),
            (e[(e.OutOfBounds = 2)] = "OutOfBounds"),
            (e[(e.InBounds = 4)] = "InBounds"),
            (e[(e.InViewport = 8)] = "InViewport"));
        })(P || (P = {}));
        var H,
          G = new Map();
        (G.set(P.Init, "init"),
          G.set(P.OutOfBounds, "outOfBounds"),
          G.set(P.InBounds, "inBounds"),
          G.set(P.InViewport, "inViewport"),
          (function (e) {
            ((e[(e.Children = 1)] = "Children"),
              (e[(e.ScaleRotate = 2)] = "ScaleRotate"),
              (e[(e.Local = 4)] = "Local"),
              (e[(e.Global = 8)] = "Global"),
              (e[(e.Clipping = 16)] = "Clipping"),
              (e[(e.CalculatedZIndex = 32)] = "CalculatedZIndex"),
              (e[(e.ZIndexSortedChildren = 64)] = "ZIndexSortedChildren"),
              (e[(e.PremultipliedColors = 128)] = "PremultipliedColors"),
              (e[(e.WorldAlpha = 256)] = "WorldAlpha"),
              (e[(e.RenderState = 512)] = "RenderState"),
              (e[(e.IsRenderable = 1024)] = "IsRenderable"),
              (e[(e.RenderTexture = 2048)] = "RenderTexture"),
              (e[(e.ParentRenderTexture = 4096)] = "ParentRenderTexture"),
              (e[(e.RenderBounds = 8192)] = "RenderBounds"),
              (e[(e.None = 0)] = "None"),
              (e[(e.All = 14335)] = "All"));
          })(H || (H = {})));
        class z extends v {
          constructor(e, n) {
            (super(),
              s(this, "stage", void 0),
              s(this, "children", []),
              s(this, "_id", m++),
              s(this, "props", void 0),
              s(this, "updateType", H.All),
              s(this, "childUpdateType", H.None),
              s(this, "globalTransform", void 0),
              s(this, "scaleRotateTransform", void 0),
              s(this, "localTransform", void 0),
              s(this, "sceneGlobalTransform", void 0),
              s(this, "renderCoords", void 0),
              s(this, "sceneRenderCoords", void 0),
              s(this, "renderBound", void 0),
              s(this, "strictBound", void 0),
              s(this, "preloadBound", void 0),
              s(this, "clippingRect", { x: 0, y: 0, width: 0, height: 0, valid: !1 }),
              s(this, "isRenderable", !1),
              s(this, "renderState", P.Init),
              s(this, "worldAlpha", 1),
              s(this, "premultipliedColorTl", 0),
              s(this, "premultipliedColorTr", 0),
              s(this, "premultipliedColorBl", 0),
              s(this, "premultipliedColorBr", 0),
              s(this, "calcZIndex", 0),
              s(this, "hasRTTupdates", !1),
              s(this, "parentHasRenderTexture", !1),
              s(this, "rttParent", null),
              s(this, "destroyed", !1),
              s(this, "onTextureLoaded", (e, t) => {
                var n;
                (this.autosizeNode(t),
                  this.setUpdateType(H.IsRenderable),
                  this.stage.requestRender(),
                  this.parentHasRenderTexture && this.notifyParentRTTOfUpdate(),
                  t.width > 1 && t.height > 1 && this.emit("loaded", { type: "texture", dimensions: t }),
                  "contain" ===
                    (null === (n = this.props.textureOptions) ||
                    void 0 === n ||
                    null === (n = n.resizeMode) ||
                    void 0 === n
                      ? void 0
                      : n.type) && this.setUpdateType(H.Local));
              }),
              s(this, "onTextureFailed", (e, t) => {
                ((this.isRenderable = !1),
                  this.updateTextureOwnership(!1),
                  this.setUpdateType(H.IsRenderable),
                  this.parentHasRenderTexture && this.notifyParentRTTOfUpdate(),
                  null !== this.texture &&
                    this.texture.retryCount > this.texture.maxRetryCount &&
                    this.emit("failed", { type: "texture", error: t }));
              }),
              s(this, "onTextureFreed", () => {
                ((this.isRenderable = !1),
                  this.updateTextureOwnership(!1),
                  this.setUpdateType(H.IsRenderable),
                  this.parentHasRenderTexture && this.notifyParentRTTOfUpdate(),
                  this.emit("freed", { type: "texture" }));
              }),
              (this.stage = e),
              (this.props = t(t({}, n), {}, { parent: null, texture: null, src: null, rtt: !1 })),
              (this.parent = n.parent),
              (this.texture = n.texture),
              (this.src = n.src),
              (this.rtt = n.rtt),
              (this.interactive = n.interactive),
              n.boundsMargin &&
                (this.boundsMargin = Array.isArray(n.boundsMargin)
                  ? n.boundsMargin
                  : [n.boundsMargin, n.boundsMargin, n.boundsMargin, n.boundsMargin]),
              this.setUpdateType(H.ScaleRotate | H.Local | H.RenderBounds | H.RenderState),
              this.stage.defaultTexture &&
                "loaded" !== this.stage.defaultTexture.state &&
                this.stage.defaultTexture.once("loaded", () => {
                  this.setUpdateType(H.IsRenderable);
                }));
          }
          loadTexture() {
            var e = this.props.texture;
            queueMicrotask(() => {
              var t, n;
              (!0 === this.textureOptions.preload && this.stage.txManager.loadTexture(e),
                (e.preventCleanup =
                  null !==
                    (t =
                      null === (n = this.props.textureOptions) || void 0 === n ? void 0 : n.preventCleanup) &&
                  void 0 !== t &&
                  t),
                e.on("loaded", this.onTextureLoaded),
                e.on("failed", this.onTextureFailed),
                e.on("freed", this.onTextureFreed),
                "loaded" === e.state
                  ? (e.dimensions, this.onTextureLoaded(e, e.dimensions))
                  : "failed" === e.state
                    ? (e.error, this.onTextureFailed(e, e.error))
                    : "freed" === e.state && this.onTextureFreed(e),
                this.parentHasRenderTexture && this.notifyParentRTTOfUpdate());
            });
          }
          unloadTexture() {
            null !== this.texture &&
              (this.texture.off("loaded", this.onTextureLoaded),
              this.texture.off("failed", this.onTextureFailed),
              this.texture.off("freed", this.onTextureFreed),
              this.texture.setRenderableOwner(this._id, !1));
          }
          autosizeNode(e) {
            this.autosize && ((this.width = e.width), (this.height = e.height));
          }
          setUpdateType(e) {
            this.updateType |= e;
            var t = this.props.parent;
            t && 0 === (t.updateType & H.Children) && t.setUpdateType(H.Children);
          }
          sortChildren() {
            this.children.sort((e, t) => e.calcZIndex - t.calcZIndex);
          }
          updateScaleRotateTransform() {
            var e = this.props,
              t = e.rotation,
              n = e.scaleX,
              r = e.scaleY;
            this.scaleRotateTransform =
              0 !== t || 1 !== n || 1 !== r ? R.rotate(t, this.scaleRotateTransform).scale(n, r) : void 0;
          }
          updateLocalTransform() {
            var e,
              t = this.props,
              n = t.x,
              r = t.y,
              i = t.width,
              a = t.height,
              o = this.props.mountX * i,
              s = this.props.mountY * a;
            if (this.scaleRotateTransform) {
              var u = this.props.pivotX * i,
                l = this.props.pivotY * a;
              this.localTransform = R.translate(n - o + u, r - s + l, this.localTransform)
                .multiply(this.scaleRotateTransform)
                .translate(-u, -l);
            } else this.localTransform = R.translate(n - o, r - s, this.localTransform);
            var d = this.props.texture;
            if (
              d &&
              d.dimensions &&
              "contain" ===
                (null === (e = this.props.textureOptions) ||
                void 0 === e ||
                null === (e = e.resizeMode) ||
                void 0 === e
                  ? void 0
                  : e.type)
            ) {
              var c = 1,
                h = 1,
                p = 0,
                f = 0,
                g = d.dimensions,
                m = g.width,
                v = g.height;
              if (m / v > i / a) {
                var y = v * (i / m);
                ((f = (a - y) / 2), (h = y / a));
              } else {
                var b = m * (a / v);
                ((p = (i - b) / 2), (c = b / i));
              }
              this.localTransform.translate(p, f).scale(c, h);
            }
            this.setUpdateType(H.Global);
          }
          update(e, t) {
            (this.updateType & H.ScaleRotate &&
              (this.updateScaleRotateTransform(), this.setUpdateType(H.Local)),
              this.updateType & H.Local && (this.updateLocalTransform(), this.setUpdateType(H.Global)));
            var n = this.props.parent,
              r = null;
            if (
              (this.updateType & H.RenderTexture && this.rtt && (this.hasRTTupdates = !0),
              this.updateType & H.Global &&
                (this.localTransform,
                !0 === this.parentHasRenderTexture && !0 === (null == n ? void 0 : n.rtt)
                  ? ((this.globalTransform = R.identity()),
                    (this.sceneGlobalTransform = R.copy(
                      (null == n ? void 0 : n.globalTransform) || R.identity(),
                    ).multiply(this.localTransform)))
                  : !0 === this.parentHasRenderTexture && !1 === (null == n ? void 0 : n.rtt)
                    ? ((this.sceneGlobalTransform = R.copy(
                        (null == n ? void 0 : n.sceneGlobalTransform) || this.localTransform,
                      ).multiply(this.localTransform)),
                      (this.globalTransform = R.copy(
                        (null == n ? void 0 : n.globalTransform) || this.localTransform,
                        this.globalTransform,
                      )))
                    : (this.globalTransform = R.copy(
                        (null == n ? void 0 : n.globalTransform) || this.localTransform,
                        this.globalTransform,
                      )),
                null !== n && this.globalTransform.multiply(this.localTransform),
                this.calculateRenderCoords(),
                this.updateBoundingRect(),
                this.setUpdateType(H.RenderState | H.Children),
                (this.childUpdateType |= H.Global),
                !0 === this.clipping &&
                  (this.setUpdateType(H.Clipping | H.RenderBounds),
                  (this.childUpdateType |= H.RenderBounds))),
              this.updateType & H.RenderBounds &&
                (this.createRenderBounds(),
                this.setUpdateType(H.RenderState),
                this.setUpdateType(H.Children),
                (this.childUpdateType |= H.RenderBounds)),
              this.updateType & H.RenderState &&
                ((r = this.checkRenderBounds()),
                this.setUpdateType(H.IsRenderable),
                r !== P.OutOfBounds && this.updateRenderState(r)),
              this.updateType & H.WorldAlpha &&
                ((this.worldAlpha = n ? n.worldAlpha * this.props.alpha : this.props.alpha),
                this.setUpdateType(H.Children | H.PremultipliedColors | H.IsRenderable),
                (this.childUpdateType |= H.WorldAlpha)),
              this.updateType & H.IsRenderable && this.updateIsRenderable(),
              this.updateType & H.Clipping &&
                (this.calculateClippingRect(t),
                this.setUpdateType(H.Children),
                (this.childUpdateType |= H.Clipping),
                (this.childUpdateType |= H.RenderBounds)),
              this.updateType & H.PremultipliedColors &&
                ((this.premultipliedColorTl = p(this.props.colorTl, this.worldAlpha, !0)),
                this.props.colorTl === this.props.colorTr &&
                this.props.colorBl === this.props.colorBr &&
                this.props.colorTl === this.props.colorBl
                  ? (this.premultipliedColorTr =
                      this.premultipliedColorBl =
                      this.premultipliedColorBr =
                        this.premultipliedColorTl)
                  : ((this.premultipliedColorTr = p(this.props.colorTr, this.worldAlpha, !0)),
                    (this.premultipliedColorBl = p(this.props.colorBl, this.worldAlpha, !0)),
                    (this.premultipliedColorBr = p(this.props.colorBr, this.worldAlpha, !0)))),
              null !== n &&
                this.updateType & H.CalculatedZIndex &&
                (this.calculateZIndex(), n.setUpdateType(H.ZIndexSortedChildren)),
              !0 !== this.props.strictBounds || this.renderState !== P.OutOfBounds)
            ) {
              if (this.updateType & H.Children && this.children.length > 0)
                for (var i = 0, a = this.children.length; i < a; i++) {
                  var o = this.children[i];
                  if ((o.setUpdateType(this.childUpdateType), 0 !== o.updateType)) {
                    var s = this.clippingRect;
                    (!0 === this.rtt && (s = { x: 0, y: 0, width: 0, height: 0, valid: !1 }), o.update(e, s));
                  }
                }
              (this.parentHasRenderTexture && this.updateType > 0 && this.notifyParentRTTOfUpdate(),
                this.updateType & H.ZIndexSortedChildren && this.sortChildren(),
                r === P.OutOfBounds &&
                  (this.updateRenderState(r),
                  this.updateIsRenderable(),
                  !0 === this.rtt && r === P.OutOfBounds && this.notifyChildrenRTTOfUpdate(r)),
                (this.updateType = 0),
                (this.childUpdateType = 0));
            } else this.updateType &= ~H.RenderBounds;
          }
          findParentRTTNode() {
            for (var e = this.parent; e && !e.rtt; ) e = e.parent;
            return e;
          }
          getRTTParentRenderState() {
            var e = this.rttParent || this.findParentRTTNode();
            return e ? e.renderState : null;
          }
          notifyChildrenRTTOfUpdate(e) {
            var t,
              n = u(this.children);
            try {
              for (n.s(); !(t = n.n()).done; ) {
                var r = t.value;
                (r.updateRenderState(e), r.updateIsRenderable(), r.notifyChildrenRTTOfUpdate(e));
              }
            } catch (i) {
              n.e(i);
            } finally {
              n.f();
            }
          }
          notifyParentRTTOfUpdate() {
            if (null !== this.parent) {
              var e = this.rttParent || this.findParentRTTNode();
              e &&
                ((e.hasRTTupdates = !0),
                e.setUpdateType(H.RenderTexture),
                !0 === e.parentHasRenderTexture && e.notifyParentRTTOfUpdate());
            }
          }
          checkRenderBounds() {
            return (
              this.renderBound,
              this.strictBound,
              this.preloadBound,
              E(this.renderBound, this.strictBound)
                ? P.InViewport
                : E(this.renderBound, this.preloadBound)
                  ? P.InBounds
                  : ((e = this.renderBound),
                    (t = this.strictBound),
                    e.x1 < t.x1 && e.x2 > t.x2 && e.y1 < t.y1 && e.y2 > t.y2
                      ? P.InViewport
                      : null === this.parent || (0 !== this.props.width && 0 !== this.props.height)
                        ? P.OutOfBounds
                        : this.parent.renderState)
            );
            var e, t;
          }
          updateBoundingRect() {
            var e = this.sceneGlobalTransform || this.globalTransform,
              t = this.sceneRenderCoords || this.renderCoords,
              n = e.tb,
              r = e.tc,
              i = t.x1,
              a = t.y1,
              o = t.x3,
              s = t.y3;
            if (0 === n || 0 === r) this.renderBound = T(i, a, o, s, this.renderBound);
            else {
              var u = t.x2,
                l = t.x4,
                d = t.y2,
                c = t.y4;
              this.renderBound = T(
                Math.min(i, u, o, l),
                Math.min(a, d, s, c),
                Math.max(i, u, o, l),
                Math.max(a, d, s, c),
                this.renderBound,
              );
            }
          }
          createRenderBounds() {
            if ((this.stage, null !== this.parent && void 0 !== this.parent.strictBound)) {
              var e = this.parent.strictBound;
              ((this.strictBound = T(e.x1, e.y1, e.x2, e.y2)),
                (this.preloadBound = I(this.strictBound, this.boundsMargin)));
            } else
              ((this.strictBound = this.stage.strictBound), (this.preloadBound = this.stage.preloadBound));
            if (
              !1 !== this.props.clipping &&
              void 0 !== this.renderBound &&
              !1 !== E(this.renderBound, this.strictBound)
            ) {
              var t = this.props,
                n = t.x,
                r = t.y,
                i = t.width,
                a = t.height,
                o = this.sceneGlobalTransform || this.globalTransform || {},
                s = o.tx,
                u = o.ty,
                l = null != s ? s : n,
                d = null != u ? u : r;
              ((this.strictBound = T(l, d, l + i, d + a, this.strictBound)),
                (this.preloadBound = I(this.strictBound, this.boundsMargin)));
            }
          }
          updateRenderState(e) {
            if (e !== this.renderState) {
              var t = this.renderState;
              this.renderState = e;
              var n = G.get(e);
              this.emit(n, { previous: t, current: e });
            }
          }
          updateIsRenderable() {
            var e = !1,
              t = !1;
            if (!1 === this.checkBasicRenderability())
              return (this.updateTextureOwnership(!1), void this.setRenderable(!1));
            if (null !== this.texture) {
              if (this.texture.retryCount > this.texture.maxRetryCount)
                return (this.updateTextureOwnership(!1), void this.setRenderable(!1));
              ((t = !0), (e = "loaded" === this.texture.state));
            } else
              (!this.hasShader() && !0 !== this.hasColorProperties()) ||
                !0 !== this.hasDimensions() ||
                (this.stage.defaultTexture && "loaded" === this.stage.defaultTexture.state && (e = !0));
            (this.updateTextureOwnership(t), this.setRenderable(e));
          }
          checkBasicRenderability() {
            return 0 !== this.worldAlpha && !0 !== this.isOutOfBounds();
          }
          setRenderable(e) {
            this.isRenderable = e;
          }
          updateTextureOwnership(e) {
            var t;
            null === (t = this.texture) || void 0 === t || t.setRenderableOwner(this._id, e);
          }
          isOutOfBounds() {
            return this.renderState <= P.OutOfBounds;
          }
          hasDimensions() {
            return 0 !== this.props.width && 0 !== this.props.height;
          }
          hasColorProperties() {
            return (
              0 !== this.props.color ||
              0 !== this.props.colorTop ||
              0 !== this.props.colorBottom ||
              0 !== this.props.colorLeft ||
              0 !== this.props.colorRight ||
              0 !== this.props.colorTl ||
              0 !== this.props.colorTr ||
              0 !== this.props.colorBl ||
              0 !== this.props.colorBr
            );
          }
          hasShader() {
            return null !== this.props.shader;
          }
          calculateRenderCoords() {
            var e = this.width,
              t = this.height,
              n = this.globalTransform,
              r = n.tx,
              i = n.ty,
              a = n.ta,
              o = n.tb,
              s = n.tc,
              u = n.td;
            if (0 === o && 0 === s) {
              var l = r,
                d = r + e * a,
                c = i,
                h = i + t * u;
              this.renderCoords = D.translate(l, c, d, c, d, h, l, h, this.renderCoords);
            } else
              this.renderCoords = D.translate(
                r,
                i,
                r + e * a,
                i + e * s,
                r + e * a + t * o,
                i + e * s + t * u,
                r + t * o,
                i + t * u,
                this.renderCoords,
              );
            if (void 0 !== this.sceneGlobalTransform) {
              var p = this.sceneGlobalTransform,
                f = p.tx,
                g = p.ty,
                m = p.ta,
                v = p.tb,
                y = p.tc,
                b = p.td;
              if (0 === v && 0 === y) {
                var x = f,
                  T = f + e * m,
                  w = g,
                  S = g + t * b;
                this.sceneRenderCoords = D.translate(x, w, T, w, T, S, x, S, this.sceneRenderCoords);
              } else
                this.sceneRenderCoords = D.translate(
                  f,
                  g,
                  f + e * m,
                  g + e * y,
                  f + e * m + t * v,
                  g + e * y + t * b,
                  f + t * v,
                  g + t * b,
                  this.sceneRenderCoords,
                );
            }
          }
          calculateClippingRect(e) {
            this.globalTransform;
            var t = this.clippingRect,
              n = this.props,
              r = this.globalTransform,
              i = n.clipping,
              a = 0 !== r.tb || 0 !== r.tc;
            (!0 === i && !1 === a
              ? ((t.x = r.tx),
                (t.y = r.ty),
                (t.width = this.width * r.ta),
                (t.height = this.height * r.td),
                (t.valid = !0))
              : (t.valid = !1),
              !0 === e.valid && !0 === t.valid ? S(e, t, t) : !0 === e.valid && (A(e, t), (t.valid = !0)));
          }
          calculateZIndex() {
            var e,
              t,
              n = this.props,
              r = n.zIndex || 0,
              i = (null === (e = n.parent) || void 0 === e ? void 0 : e.zIndex) || 0,
              a = r;
            (null !== (t = n.parent) && void 0 !== t && t.zIndexLocked && (a = r < i ? r : i),
              (this.calcZIndex = a));
          }
          destroy() {
            if (!0 !== this.destroyed) {
              for (
                this.destroyed = !0,
                  this.unloadTexture(),
                  this.clippingRect.valid = !1,
                  this.isRenderable = !1,
                  this.renderCoords = void 0,
                  this.renderBound = void 0,
                  this.strictBound = void 0,
                  this.preloadBound = void 0,
                  this.globalTransform = void 0,
                  this.scaleRotateTransform = void 0,
                  this.localTransform = void 0,
                  this.props.texture = null,
                  this.props.shader = this.stage.defShaderCtr;
                this.children.length > 0;
              ) {
                var e;
                null === (e = this.children[0]) || void 0 === e || e.destroy();
              }
              ((this.parent = null),
                this.rtt && this.stage.renderer.removeRTTNode(this),
                this.removeAllListeners());
            }
          }
          renderQuads(e) {
            if (this.parentHasRenderTexture) {
              if (!e.renderToTextureActive) return;
              if (this.parentRenderTexture !== e.activeRttNode) return;
            }
            (this.globalTransform,
              this.renderCoords,
              e.addQuad({
                width: this.props.width,
                height: this.props.height,
                colorTl: this.premultipliedColorTl,
                colorTr: this.premultipliedColorTr,
                colorBl: this.premultipliedColorBl,
                colorBr: this.premultipliedColorBr,
                texture: this.texture || this.stage.defaultTexture,
                textureOptions: this.textureOptions,
                zIndex: this.zIndex,
                shader: this.shader.shader,
                shaderProps: this.shader.getResolvedProps(),
                alpha: this.worldAlpha,
                clippingRect: this.clippingRect,
                tx: this.globalTransform.tx,
                ty: this.globalTransform.ty,
                ta: this.globalTransform.ta,
                tb: this.globalTransform.tb,
                tc: this.globalTransform.tc,
                td: this.globalTransform.td,
                renderCoords: this.renderCoords,
                rtt: this.rtt,
                parentHasRenderTexture: this.parentHasRenderTexture,
                framebufferDimensions: this.framebufferDimensions,
              }));
          }
          get id() {
            return this._id;
          }
          get data() {
            return this.props.data;
          }
          set data(e) {
            this.props.data = e;
          }
          get x() {
            return this.props.x;
          }
          set x(e) {
            this.props.x !== e && ((this.props.x = e), this.setUpdateType(H.Local));
          }
          get absX() {
            var e, t;
            return (
              this.props.x +
              -this.props.width * this.props.mountX +
              ((null === (e = this.props.parent) || void 0 === e ? void 0 : e.absX) ||
                (null === (t = this.props.parent) ||
                void 0 === t ||
                null === (t = t.globalTransform) ||
                void 0 === t
                  ? void 0
                  : t.tx) ||
                0)
            );
          }
          get absY() {
            var e, t;
            return (
              this.props.y +
              -this.props.height * this.props.mountY +
              (null !== (e = null === (t = this.props.parent) || void 0 === t ? void 0 : t.absY) &&
              void 0 !== e
                ? e
                : 0)
            );
          }
          get y() {
            return this.props.y;
          }
          set y(e) {
            this.props.y !== e && ((this.props.y = e), this.setUpdateType(H.Local));
          }
          get width() {
            return this.props.width;
          }
          set width(e) {
            this.props.width !== e &&
              ((this.props.width = e),
              this.setUpdateType(H.Local),
              this.props.rtt &&
                ((this.texture = this.stage.txManager.createTexture("RenderTexture", {
                  width: this.width,
                  height: this.height,
                })),
                this.setUpdateType(H.RenderTexture)));
          }
          get height() {
            return this.props.height;
          }
          set height(e) {
            this.props.height !== e &&
              ((this.props.height = e),
              this.setUpdateType(H.Local),
              this.props.rtt &&
                ((this.texture = this.stage.txManager.createTexture("RenderTexture", {
                  width: this.width,
                  height: this.height,
                })),
                this.setUpdateType(H.RenderTexture)));
          }
          get scale() {
            return this.scaleX;
          }
          set scale(e) {
            ((this.scaleX = e), (this.scaleY = e));
          }
          get scaleX() {
            return this.props.scaleX;
          }
          set scaleX(e) {
            this.props.scaleX !== e && ((this.props.scaleX = e), this.setUpdateType(H.ScaleRotate));
          }
          get scaleY() {
            return this.props.scaleY;
          }
          set scaleY(e) {
            this.props.scaleY !== e && ((this.props.scaleY = e), this.setUpdateType(H.ScaleRotate));
          }
          get mount() {
            return this.props.mount;
          }
          set mount(e) {
            (this.props.mountX === e && this.props.mountY === e) ||
              ((this.props.mountX = e),
              (this.props.mountY = e),
              (this.props.mount = e),
              this.setUpdateType(H.Local));
          }
          get mountX() {
            return this.props.mountX;
          }
          set mountX(e) {
            this.props.mountX !== e && ((this.props.mountX = e), this.setUpdateType(H.Local));
          }
          get mountY() {
            return this.props.mountY;
          }
          set mountY(e) {
            this.props.mountY !== e && ((this.props.mountY = e), this.setUpdateType(H.Local));
          }
          get pivot() {
            return this.props.pivot;
          }
          set pivot(e) {
            (this.props.pivotX === e && this.props.pivotY === e) ||
              ((this.props.pivotX = e),
              (this.props.pivotY = e),
              (this.props.pivot = e),
              this.setUpdateType(H.Local));
          }
          get pivotX() {
            return this.props.pivotX;
          }
          set pivotX(e) {
            this.props.pivotX !== e && ((this.props.pivotX = e), this.setUpdateType(H.Local));
          }
          get pivotY() {
            return this.props.pivotY;
          }
          set pivotY(e) {
            this.props.pivotY !== e && ((this.props.pivotY = e), this.setUpdateType(H.Local));
          }
          get rotation() {
            return this.props.rotation;
          }
          set rotation(e) {
            this.props.rotation !== e && ((this.props.rotation = e), this.setUpdateType(H.ScaleRotate));
          }
          get alpha() {
            return this.props.alpha;
          }
          set alpha(e) {
            ((this.props.alpha = e),
              this.setUpdateType(H.PremultipliedColors | H.WorldAlpha | H.Children | H.IsRenderable),
              (this.childUpdateType |= H.WorldAlpha));
          }
          get autosize() {
            return this.props.autosize;
          }
          set autosize(e) {
            this.props.autosize = e;
          }
          get boundsMargin() {
            var e, t, n;
            return null !==
              (e =
                null !== (t = this.props.boundsMargin) && void 0 !== t
                  ? t
                  : null === (n = this.parent) || void 0 === n
                    ? void 0
                    : n.boundsMargin) && void 0 !== e
              ? e
              : this.stage.boundsMargin;
          }
          set boundsMargin(e) {
            if (e !== this.props.boundsMargin) {
              if (null === e) this.props.boundsMargin = e;
              else {
                var t = Array.isArray(e) ? e : [e, e, e, e];
                this.props.boundsMargin = t;
              }
              this.setUpdateType(H.RenderBounds);
            }
          }
          get clipping() {
            return this.props.clipping;
          }
          set clipping(e) {
            ((this.props.clipping = e),
              this.setUpdateType(H.Clipping | H.RenderBounds | H.Children),
              (this.childUpdateType |= H.Global | H.Clipping));
          }
          get color() {
            return this.props.color;
          }
          set color(e) {
            ((this.colorTop = e),
              (this.colorBottom = e),
              (this.colorLeft = e),
              (this.colorRight = e),
              (this.props.color = e),
              this.setUpdateType(H.PremultipliedColors));
          }
          get colorTop() {
            return this.props.colorTop;
          }
          set colorTop(e) {
            ((this.props.colorTl === e && this.props.colorTr === e) ||
              ((this.colorTl = e), (this.colorTr = e)),
              (this.props.colorTop = e),
              this.setUpdateType(H.PremultipliedColors));
          }
          get colorBottom() {
            return this.props.colorBottom;
          }
          set colorBottom(e) {
            ((this.props.colorBl === e && this.props.colorBr === e) ||
              ((this.colorBl = e), (this.colorBr = e)),
              (this.props.colorBottom = e),
              this.setUpdateType(H.PremultipliedColors));
          }
          get colorLeft() {
            return this.props.colorLeft;
          }
          set colorLeft(e) {
            ((this.props.colorTl === e && this.props.colorBl === e) ||
              ((this.colorTl = e), (this.colorBl = e)),
              (this.props.colorLeft = e),
              this.setUpdateType(H.PremultipliedColors));
          }
          get colorRight() {
            return this.props.colorRight;
          }
          set colorRight(e) {
            ((this.props.colorTr === e && this.props.colorBr === e) ||
              ((this.colorTr = e), (this.colorBr = e)),
              (this.props.colorRight = e),
              this.setUpdateType(H.PremultipliedColors));
          }
          get colorTl() {
            return this.props.colorTl;
          }
          set colorTl(e) {
            ((this.props.colorTl = e), this.setUpdateType(H.PremultipliedColors));
          }
          get colorTr() {
            return this.props.colorTr;
          }
          set colorTr(e) {
            ((this.props.colorTr = e), this.setUpdateType(H.PremultipliedColors));
          }
          get colorBl() {
            return this.props.colorBl;
          }
          set colorBl(e) {
            ((this.props.colorBl = e), this.setUpdateType(H.PremultipliedColors));
          }
          get colorBr() {
            return this.props.colorBr;
          }
          set colorBr(e) {
            ((this.props.colorBr = e), this.setUpdateType(H.PremultipliedColors));
          }
          get zIndexLocked() {
            return this.props.zIndexLocked || 0;
          }
          set zIndexLocked(e) {
            ((this.props.zIndexLocked = e), this.setUpdateType(H.CalculatedZIndex | H.Children));
            for (var t = 0, n = this.children.length; t < n; t++)
              this.children[t].setUpdateType(H.CalculatedZIndex);
          }
          get zIndex() {
            return this.props.zIndex;
          }
          set zIndex(e) {
            ((this.props.zIndex = e), this.setUpdateType(H.CalculatedZIndex | H.Children));
            for (var t = 0, n = this.children.length; t < n; t++)
              this.children[t].setUpdateType(H.CalculatedZIndex);
          }
          get parent() {
            return this.props.parent;
          }
          set parent(e) {
            var t = this.props.parent;
            if (t !== e) {
              if (((this.props.parent = e), t)) {
                var n = t.children.indexOf(this);
                (t.children.splice(n, 1), t.setUpdateType(H.Children | H.ZIndexSortedChildren));
              }
              (e &&
                (e.children.push(this),
                this.setUpdateType(H.All),
                e.setUpdateType(H.Children | H.ZIndexSortedChildren),
                (e.rtt || e.parentHasRenderTexture) && this.applyRTTInheritance(e)),
                this.updateScaleRotateTransform(),
                this.setUpdateType(H.RenderBounds | H.Children));
            }
          }
          get preventCleanup() {
            return this.props.textureOptions.preventCleanup || !1;
          }
          set preventCleanup(e) {
            this.props.textureOptions.preventCleanup = e;
          }
          get rtt() {
            return this.props.rtt;
          }
          set rtt(e) {
            this.props.rtt !== e &&
              ((this.props.rtt = e),
              !0 === e ? (this.initRenderTexture(), this.markChildrenWithRTT()) : this.cleanupRenderTexture(),
              this.setUpdateType(H.RenderTexture),
              !0 === this.parentHasRenderTexture && this.notifyParentRTTOfUpdate());
          }
          initRenderTexture() {
            ((this.texture = this.stage.txManager.createTexture("RenderTexture", {
              width: this.width,
              height: this.height,
            })),
              this.stage.renderer.renderToTexture(this));
          }
          cleanupRenderTexture() {
            (this.unloadTexture(),
              this.clearRTTInheritance(),
              (this.hasRTTupdates = !1),
              (this.texture = null));
          }
          markChildrenWithRTT(e = null) {
            var t,
              n = u((e || this).children);
            try {
              for (n.s(); !(t = n.n()).done; ) {
                var r = t.value;
                (r.setUpdateType(H.All), (r.parentHasRenderTexture = !0), r.markChildrenWithRTT());
              }
            } catch (i) {
              n.e(i);
            } finally {
              n.f();
            }
          }
          applyRTTInheritance(e) {
            (e.rtt && e.setUpdateType(H.RenderTexture), this.markChildrenWithRTT(e));
          }
          clearRTTInheritance() {
            if (!this.rtt) {
              var e,
                t = u(this.children);
              try {
                for (t.s(); !(e = t.n()).done; ) {
                  var n = e.value;
                  ((n.parentHasRenderTexture = !1),
                    (n.rttParent = null),
                    n.setUpdateType(H.All),
                    n.clearRTTInheritance());
                }
              } catch (r) {
                t.e(r);
              } finally {
                t.f();
              }
            }
          }
          get shader() {
            return this.props.shader;
          }
          set shader(e) {
            this.props.shader !== e && ((this.props.shader = e), this.setUpdateType(H.IsRenderable));
          }
          get src() {
            return this.props.src;
          }
          set src(e) {
            this.props.src !== e &&
              ((this.props.src = e),
              (this.texture = e
                ? this.stage.txManager.createTexture("ImageTexture", {
                    src: e,
                    width: this.props.width,
                    height: this.props.height,
                    type: this.props.imageType,
                    sx: this.props.srcX,
                    sy: this.props.srcY,
                    sw: this.props.srcWidth,
                    sh: this.props.srcHeight,
                    maxRetryCount: this.props.textureOptions.maxRetryCount,
                  })
                : null));
          }
          set imageType(e) {
            this.props.imageType !== e && (this.props.imageType = e);
          }
          get imageType() {
            return this.props.imageType || null;
          }
          get srcHeight() {
            return this.props.srcHeight;
          }
          set srcHeight(e) {
            this.props.srcHeight = e;
          }
          get srcWidth() {
            return this.props.srcWidth;
          }
          set srcWidth(e) {
            this.props.srcWidth = e;
          }
          get srcX() {
            return this.props.srcX;
          }
          set srcX(e) {
            this.props.srcX = e;
          }
          get srcY() {
            return this.props.srcY;
          }
          set srcY(e) {
            this.props.srcY = e;
          }
          get framebufferDimensions() {
            return this.parentHasRenderTexture && !this.rtt && this.parent
              ? this.parent.framebufferDimensions
              : { width: this.width, height: this.height };
          }
          get parentRenderTexture() {
            for (var e = this.parent; e; ) {
              if (e.rtt) return e;
              e = e.parent;
            }
            return null;
          }
          get texture() {
            return this.props.texture;
          }
          set texture(e) {
            this.props.texture !== e &&
              (this.props.texture && this.unloadTexture(),
              (this.props.texture = e),
              null !== e && (e.setRenderableOwner(this._id, this.isRenderable), this.loadTexture()),
              this.setUpdateType(H.IsRenderable));
          }
          set textureOptions(e) {
            this.props.textureOptions = e;
          }
          get textureOptions() {
            return this.props.textureOptions;
          }
          get strictBounds() {
            return this.props.strictBounds;
          }
          set strictBounds(e) {
            e !== this.props.strictBounds &&
              ((this.props.strictBounds = e),
              this.setUpdateType(H.RenderBounds | H.Children),
              (this.childUpdateType |= H.RenderBounds | H.Children));
          }
          set interactive(e) {
            ((this.props.interactive = e), !0 === e && this.stage.interactiveNodes.add(this));
          }
          get interactive() {
            return this.props.interactive;
          }
          animate(e, t) {
            var n = new F(this, e, t);
            return new V(this.stage.animationManager, n);
          }
          flush() {}
        }
        var X = () => (performance ? performance.now() : Date.now());
        class W {
          constructor() {
            s(this, "activeAnimations", new Set());
          }
          registerAnimation(e) {
            this.activeAnimations.add(e);
          }
          unregisterAnimation(e) {
            this.activeAnimations.delete(e);
          }
          update(e) {
            this.activeAnimations.forEach(t => {
              t.update(e);
            });
          }
        }
        function K() {
          self.onmessage = e => {
            var t = e.data.src,
              n = e.data.id,
              r = e.data.premultiplyAlpha;
            (e.data.sx,
              e.data.sy,
              e.data.sw,
              e.data.sh,
              (function (e, t) {
                return new Promise(function (n, r) {
                  var i = new XMLHttpRequest();
                  (i.open("GET", e, !0),
                    (i.responseType = "blob"),
                    (i.onload = function () {
                      if (200 !== i.status && 0 !== i.status)
                        return r(new Error("Failed to load image: " + i.statusText));
                      var e = i.response;
                      (void 0 !== t || e.type.indexOf("image/png"),
                        createImageBitmap(e)
                          .then(function (e) {
                            n({ data: e, premultiplyAlpha: t });
                          })
                          .catch(function (e) {
                            r(e);
                          }));
                    }),
                    (i.onerror = function () {
                      r(new Error("Network error occurred while trying to fetch the image."));
                    }),
                    i.send());
                });
              })(t, r)
                .then(function (e) {
                  self.postMessage({ id: n, src: t, data: e }, [e.data]);
                })
                .catch(function (e) {
                  self.postMessage({ id: n, src: t, error: e.message });
                }));
          };
        }
        class q {
          constructor(e, t) {
            (s(this, "imageWorkersEnabled", !0),
              s(this, "messageManager", {}),
              s(this, "workers", []),
              s(this, "workerIndex", 0),
              s(this, "nextId", 0),
              (this.workers = this.createWorkers(e, t)),
              this.workers.forEach(e => {
                e.onmessage = this.handleMessage.bind(this);
              }));
          }
          handleMessage(e) {
            var t = e.data,
              r = t.id,
              i = t.data,
              a = t.error,
              o = this.messageManager[r];
            if (o) {
              var s = n(o, 2),
                u = s[0],
                l = s[1];
              (delete this.messageManager[r], a ? l(new Error(a)) : u(i));
            }
          }
          createWorkers(e = 1, t) {
            var n = `(${K.toString()})()`;
            (!0 === t.options &&
              (n = n.replace(
                "var supportsOptionsCreateImageBitmap = false;",
                "var supportsOptionsCreateImageBitmap = true;",
              )),
              !0 === t.full &&
                (n = (n = n.replace(
                  "var supportsOptionsCreateImageBitmap = false;",
                  "var supportsOptionsCreateImageBitmap = true;",
                )).replace(
                  "var supportsFullCreateImageBitmap = false;",
                  "var supportsFullCreateImageBitmap = true;",
                )),
              (n = n.replace('"use strict";', "")));
            for (
              var r = new Blob([n], { type: "application/javascript" }),
                i = (self.URL ? URL : webkitURL).createObjectURL(r),
                a = [],
                o = 0;
              o < e;
              o++
            )
              a.push(new Worker(i));
            return a;
          }
          getNextWorker() {
            var e = this.workers[this.workerIndex];
            return ((this.workerIndex = (this.workerIndex + 1) % this.workers.length), e);
          }
          getImage(e, t, n, r, i, a) {
            return new Promise((o, s) => {
              try {
                if (this.workers) {
                  var u = this.nextId++;
                  this.messageManager[u] = [o, s];
                  var l = this.getNextWorker();
                  l && l.postMessage({ id: u, src: e, premultiplyAlpha: t, sx: n, sy: r, sw: i, sh: a });
                }
              } catch (d) {
                s(d);
              }
            });
          }
        }
        class Y extends y {
          constructor(e, t) {
            (super(e),
              s(this, "type", g.color),
              s(this, "props", void 0),
              (this.props = Y.resolveDefaults(t)));
          }
          get color() {
            return this.props.color;
          }
          set color(e) {
            this.props.color = e;
          }
          getTextureSource() {
            var e = this;
            return o(
              r().m(function t() {
                var n;
                return r().w(function (t) {
                  for (;;)
                    if (0 === t.n)
                      return (
                        (n = new Uint8Array(4)),
                        4294967295 === e.color
                          ? ((n[0] = 255), (n[1] = 255), (n[2] = 255), (n[3] = 255))
                          : ((n[0] = (e.color >> 16) & 255),
                            (n[1] = (e.color >> 8) & 255),
                            (n[2] = 255 & e.color),
                            (n[3] = (e.color >>> 24) & 255)),
                        t.a(2, { data: n, premultiplyAlpha: !0 })
                      );
                }, t);
              }),
            )();
          }
          static makeCacheKey(e) {
            return `ColorTexture,${Y.resolveDefaults(e).color}`;
          }
          static resolveDefaults(e) {
            return { color: e.color || 4294967295 };
          }
        }
        s(Y, "z$__type__Props", void 0);
        var $ = {
            0: 35841,
            1: 35843,
            2: 35840,
            3: 35842,
            6: 36196,
            7: 33776,
            8: 33778,
            9: 33778,
            10: 33779,
            11: 33779,
          },
          J = { "4x4": 37808, "5x5": 37809, "6x6": 37810, "8x8": 37811, "10x10": 37812, "12x12": 37813 },
          Q = [171, 75, 84, 88, 32, 49, 49, 187, 13, 10, 26, 10],
          Z = (function () {
            var e = o(
              r().m(function e(t) {
                var n, i, a, o, s, u, l;
                return r().w(
                  function (e) {
                    for (;;)
                      switch ((e.p = e.n)) {
                        case 0:
                          return ((e.p = 0), (e.n = 1), fetch(t));
                        case 1:
                          if ((n = e.v).ok) {
                            e.n = 2;
                            break;
                          }
                          throw new Error(`Failed to fetch compressed texture: ${n.status} ${n.statusText}`);
                        case 2:
                          return ((e.n = 3), n.arrayBuffer());
                        case 3:
                          if (!((i = e.v).byteLength < 16)) {
                            e.n = 4;
                            break;
                          }
                          throw new Error(
                            `File too small to be a valid compressed texture (${i.byteLength} bytes). Expected at least 16 bytes for header inspection.`,
                          );
                        case 4:
                          if (((a = new DataView(i)), 55727696 !== (o = a.getUint32(0, !0)))) {
                            e.n = 5;
                            break;
                          }
                          return e.a(2, ie(a));
                        case 5:
                          if (1554098963 !== o) {
                            e.n = 6;
                            break;
                          }
                          return e.a(2, te(a));
                        case 6:
                          ((s = !0), (u = 0));
                        case 7:
                          if (!(u < Q.length)) {
                            e.n = 9;
                            break;
                          }
                          if (a.getUint8(u) === Q[u]) {
                            e.n = 8;
                            break;
                          }
                          return ((s = !1), e.a(3, 9));
                        case 8:
                          (u++, (e.n = 7));
                          break;
                        case 9:
                          if (!0 !== s) {
                            e.n = 10;
                            break;
                          }
                          return e.a(2, ne(a));
                        case 10:
                          throw new Error("Unrecognized compressed texture format");
                        case 11:
                          e.n = 13;
                          break;
                        case 12:
                          throw (
                            (e.p = 12),
                            (l = e.v),
                            new Error(`Failed to load compressed texture from ${t}: ${l}`)
                          );
                        case 13:
                          return e.a(2);
                      }
                  },
                  e,
                  null,
                  [[0, 12]],
                );
              }),
            );
            return function (t) {
              return e.apply(this, arguments);
            };
          })();
        function ee(e, t) {
          return e.getUint8(t) + (e.getUint8(t + 1) << 8) + (e.getUint8(t + 2) << 16);
        }
        var te = (function () {
            var e = o(
              r().m(function e(t) {
                var n, i, a, o, s, u, l, d, c;
                return r().w(function (e) {
                  for (;;)
                    switch (e.n) {
                      case 0:
                        if (
                          ((n = t.getUint8(4)),
                          (i = t.getUint8(5)),
                          (a = ee(t, 7)),
                          (o = ee(t, 10)),
                          0 !== a && 0 !== o)
                        ) {
                          e.n = 1;
                          break;
                        }
                        throw new Error(`Invalid ASTC texture dimensions: ${a}x${o}`);
                      case 1:
                        if (
                          ((s = Math.ceil(a / n) * Math.ceil(o / i) * 16), (u = t.byteLength - 16), s === u)
                        ) {
                          e.n = 2;
                          break;
                        }
                        throw new Error(`Invalid ASTC texture data size: expected ${s}, got ${u}`);
                      case 2:
                        if (void 0 !== (l = J[`${n}x${i}`])) {
                          e.n = 3;
                          break;
                        }
                        throw new Error(`Unsupported ASTC block size: ${n}x${i}`);
                      case 3:
                        return (
                          (d = t.buffer),
                          (c = []).push(d.slice(16)),
                          e.a(2, {
                            data: {
                              blockInfo: pe[l],
                              glInternalFormat: l,
                              mipmaps: c,
                              width: a,
                              height: o,
                              type: "astc",
                            },
                            premultiplyAlpha: !1,
                          })
                        );
                    }
                }, e);
              }),
            );
            return function (t) {
              return e.apply(this, arguments);
            };
          })(),
          ne = (function () {
            var e = o(
              r().m(function e(t) {
                var n, i, a, o, s, u, l, d, c, h, p, f, g, m, v;
                return r().w(function (e) {
                  for (;;)
                    switch (e.n) {
                      case 0:
                        if (((n = t.getUint32(12, !0)), !1 !== (i = 67305985 === n) || 16909060 === n)) {
                          e.n = 1;
                          break;
                        }
                        throw new Error("Invalid KTX endianness value");
                      case 1:
                        if (((a = t.getUint32(16, i)), (o = t.getUint32(24, i)), 0 === a && 0 === o)) {
                          e.n = 2;
                          break;
                        }
                        throw new Error(`KTX texture is not compressed (glType: ${a}, glFormat: ${o})`);
                      case 2:
                        if (((s = t.getUint32(28, i)), void 0 !== pe[s])) {
                          e.n = 3;
                          break;
                        }
                        throw new Error(`Unsupported KTX compressed texture format: 0x${s.toString(16)}`);
                      case 3:
                        if (((u = t.getUint32(36, i)), (l = t.getUint32(40, i)), 0 !== u && 0 !== l)) {
                          e.n = 4;
                          break;
                        }
                        throw new Error(`Invalid KTX texture dimensions: ${u}x${l}`);
                      case 4:
                        if (0 !== (d = t.getUint32(56, i))) {
                          e.n = 5;
                          break;
                        }
                        throw new Error("KTX texture has no mipmap levels");
                      case 5:
                        if (
                          ((c = t.getUint32(60, i)), (h = []), (p = t.buffer), !((f = 64 + c) > t.byteLength))
                        ) {
                          e.n = 6;
                          break;
                        }
                        throw new Error("Invalid KTX file: key/value data exceeds file size");
                      case 6:
                        for (g = 0; g < d; g++)
                          ((m = t.getUint32(f, i)),
                            (v = (f += 4) + m),
                            h.push(p.slice(f, v)),
                            (f = v) % 4 != 0 && (f += 4 - (f % 4)));
                        return e.a(2, {
                          data: {
                            blockInfo: pe[s],
                            glInternalFormat: s,
                            mipmaps: h,
                            width: u,
                            height: l,
                            type: "ktx",
                          },
                          premultiplyAlpha: !1,
                        });
                    }
                }, e);
              }),
            );
            return function (t) {
              return e.apply(this, arguments);
            };
          })();
        function re(e, t, n) {
          var r = 2 === n ? 16 : 8;
          return (Math.max(e, r) * Math.max(t, 8) * n) / 8;
        }
        var ie = (function () {
            var e = o(
              r().m(function e(t) {
                var n, i, a, o, s, u, l, d, c, h, p, f, g, m, v, y, b, x, T;
                return r().w(function (e) {
                  for (;;)
                    switch (e.n) {
                      case 0:
                        if (((n = t.getUint32(8, !0)), void 0 !== (i = $[n]))) {
                          e.n = 1;
                          break;
                        }
                        throw new Error(`Unsupported PVR pixel format: 0x${n.toString(16)}`);
                      case 1:
                        if (((a = t.getInt32(24, !0)), 0 !== (o = t.getInt32(28, !0)) && 0 !== a)) {
                          e.n = 2;
                          break;
                        }
                        throw new Error(`Invalid PVR texture dimensions: ${o}x${a}`);
                      case 2:
                        if (
                          ((s = t.getInt32(44, !0)),
                          (u = t.getUint32(48, !0)),
                          (l = t.buffer),
                          !((d = 52 + u) > l.byteLength))
                        ) {
                          e.n = 3;
                          break;
                        }
                        throw new Error("Invalid PVR file: metadata exceeds file size");
                      case 3:
                        ((c = []), (h = pe[i]), (p = 0));
                      case 4:
                        if (!(p < s)) {
                          e.n = 8;
                          break;
                        }
                        if (((f = t.getUint32(d, !0)), (g = l.byteLength - (d + 4)), !(f > 0 && f <= g))) {
                          e.n = 5;
                          break;
                        }
                        return (
                          (m = d += 4),
                          (v = d + f),
                          c.push(l.slice(m, v)),
                          (d = ((d = v) + 3) & -4),
                          e.a(3, 7)
                        );
                      case 5:
                        if (0 !== n && 1 !== n && 2 !== n && 3 !== n) {
                          e.n = 6;
                          break;
                        }
                        return (
                          (y = re(o >> p, a >> p, 0 === n || 1 === n ? 2 : 4)),
                          c.push(l.slice(d, d + y)),
                          (d = ((d += y) + 3) & -4),
                          e.a(3, 7)
                        );
                      case 6:
                        void 0 !== h &&
                          ((b = Math.ceil((o >> p) / h.width)),
                          (x = Math.ceil((a >> p) / h.height)),
                          (T = b * x * h.bytes),
                          c.push(l.slice(d, d + T)),
                          (d = ((d += T) + 3) & -4));
                      case 7:
                        (p++, (e.n = 4));
                        break;
                      case 8:
                        return e.a(2, {
                          data: {
                            blockInfo: pe[i],
                            glInternalFormat: i,
                            mipmaps: c,
                            width: o,
                            height: a,
                            type: "pvr",
                          },
                          premultiplyAlpha: !1,
                        });
                    }
                }, e);
              }),
            );
            return function (t) {
              return e.apply(this, arguments);
            };
          })(),
          ae = { width: 4, height: 4, bytes: 8 },
          oe = { width: 4, height: 4, bytes: 16 },
          se = { width: 5, height: 5, bytes: 16 },
          ue = { width: 6, height: 6, bytes: 16 },
          le = { width: 8, height: 4, bytes: 8 },
          de = { width: 8, height: 8, bytes: 16 },
          ce = { width: 10, height: 10, bytes: 16 },
          he = { width: 12, height: 12, bytes: 16 },
          pe = {
            33776: ae,
            33777: ae,
            33778: oe,
            33779: oe,
            36196: ae,
            37492: ae,
            37493: ae,
            37496: oe,
            37497: oe,
            35840: ae,
            35842: ae,
            35841: le,
            35843: le,
            37808: oe,
            37840: oe,
            37809: se,
            37841: se,
            37810: ue,
            37842: ue,
            37811: de,
            37843: de,
            37812: ce,
            37844: ce,
            37813: he,
            37845: he,
          },
          fe = {
            ktx: function (e, t, n) {
              var r = n.glInternalFormat,
                i = n.mipmaps,
                a = n.width,
                o = n.height,
                s = n.blockInfo;
              e.bindTexture(t);
              for (var u = s.width, l = s.height, d = a, c = o, h = 0; h < i.length; h++) {
                var p = new Uint8Array(i[h]),
                  f = Math.ceil(d / u) * u,
                  g = Math.ceil(c / l) * l,
                  m = Math.ceil(d / u) * Math.ceil(c / l) * s.bytes;
                if (p.byteLength < m) {
                  var v = new Uint8Array(m);
                  (v.set(p), (p = v));
                }
                (e.compressedTexImage2D(h, r, f, g, 0, p),
                  (d = Math.max(1, d >> 1)),
                  (c = Math.max(1, c >> 1)));
              }
              (e.texParameteri(e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE),
                e.texParameteri(e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE),
                e.texParameteri(e.TEXTURE_MAG_FILTER, e.LINEAR),
                e.texParameteri(e.TEXTURE_MIN_FILTER, i.length > 1 ? e.LINEAR_MIPMAP_LINEAR : e.LINEAR));
            },
            pvr: function (e, t, n) {
              var r = n.glInternalFormat,
                i = n.mipmaps,
                a = n.width,
                o = n.height;
              e.bindTexture(t);
              for (var s = a, u = o, l = 0; l < i.length; l++)
                (e.compressedTexImage2D(l, r, s, u, 0, new Uint8Array(i[l])),
                  (s = Math.max(1, s >> 1)),
                  (u = Math.max(1, u >> 1)));
              (e.texParameteri(e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE),
                e.texParameteri(e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE),
                e.texParameteri(e.TEXTURE_MAG_FILTER, e.LINEAR),
                e.texParameteri(e.TEXTURE_MIN_FILTER, i.length > 1 ? e.LINEAR_MIPMAP_LINEAR : e.LINEAR));
            },
            astc: function (e, t, n) {
              if (null === e.getExtension("WEBGL_compressed_texture_astc"))
                throw new Error("ASTC compressed textures not supported by this device");
              e.bindTexture(t);
              var r = n.glInternalFormat,
                i = n.mipmaps,
                a = n.width,
                o = n.height,
                s = new Uint8Array(i[0]);
              (e.compressedTexImage2D(0, r, a, o, 0, s),
                e.texParameteri(e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE),
                e.texParameteri(e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE),
                e.texParameteri(e.TEXTURE_MAG_FILTER, e.LINEAR),
                e.texParameteri(e.TEXTURE_MIN_FILTER, e.LINEAR));
            },
          };
        var ge = (e, t, n, r, i, a, o) =>
          new Promise((s, u) => {
            var l = document.createElement("canvas"),
              d = l.getContext("2d");
            d.imageSmoothingEnabled = !0;
            var c = new Image();
            ((c.onload = () => {
              var e = null != r ? r : 0,
                u = null != i ? i : 0,
                h = t || c.width,
                p = n || c.height;
              ((l.width = h),
                (l.height = p),
                d.drawImage(c, 0, 0, h, p),
                s({
                  data: d.getImageData(e, u, null != a ? a : h, null != o ? o : p),
                  premultiplyAlpha: !1,
                }));
            }),
              (c.onerror = e => {
                u(e);
              }),
              (c.src = e));
          });
        function me(e, t = "") {
          return new Promise((n, r) => {
            var i = new XMLHttpRequest();
            ((i.responseType = t),
              (i.onreadystatechange = function () {
                i.readyState == XMLHttpRequest.DONE &&
                  (0 === i.status || 200 === i.status ? n(i.response) : r(i.statusText));
              }),
              i.open("GET", e, !0),
              i.send(null));
          });
        }
        class ve extends y {
          constructor(e, t) {
            var n,
              r = ve.resolveDefaults(t);
            (super(e),
              s(this, "type", g.image),
              s(this, "props", void 0),
              (this.props = r),
              (this.maxRetryCount =
                null !== (n = r.maxRetryCount) && void 0 !== n ? n : this.txManager.maxRetryCount));
          }
          hasAlphaChannel(e) {
            return -1 !== e.indexOf("image/png");
          }
          loadImageFallback(e, t) {
            return o(
              r().m(function n() {
                var i;
                return r().w(function (n) {
                  for (;;)
                    if (0 === n.n)
                      return (
                        (i = new Image()),
                        "string" == typeof e && !1 === C(e) && (i.crossOrigin = "anonymous"),
                        n.a(
                          2,
                          new Promise((n, r) => {
                            ((i.onload = () => {
                              n({ data: i, premultiplyAlpha: t });
                            }),
                              (i.onerror = e => {
                                var t =
                                  e instanceof Error
                                    ? e.message
                                    : e instanceof Event
                                      ? `Image loading failed for ${i.src}`
                                      : "Unknown image loading error";
                                r(new Error(`Image loading failed: ${t}`));
                              }),
                              e instanceof Blob ? (i.src = URL.createObjectURL(e)) : (i.src = e));
                          }),
                        )
                      );
                }, n);
              }),
            )();
          }
          createImageBitmap(e, t, n, i, a, s) {
            var u = this;
            return o(
              r().m(function o() {
                var l, d, c, h, p, f, g, m, v;
                return r().w(
                  function (r) {
                    for (;;)
                      switch ((r.p = r.n)) {
                        case 0:
                          if (
                            ((l = null != t ? t : e.type.includes("image/png")),
                            !0 !== (d = u.txManager.imageBitmapSupported).full || null === a || null === s)
                          ) {
                            r.n = 4;
                            break;
                          }
                          return (
                            (r.p = 1),
                            (r.n = 2),
                            createImageBitmap(e, n || 0, i || 0, a, s, {
                              premultiplyAlpha: l ? "premultiply" : "none",
                              colorSpaceConversion: "none",
                              imageOrientation: "none",
                            })
                          );
                        case 2:
                          return ((c = r.v), r.a(2, { data: c, premultiplyAlpha: l }));
                        case 3:
                          throw (
                            (r.p = 3),
                            (p = r.v),
                            new Error(`Failed to create image bitmap with crop: ${p}`)
                          );
                        case 4:
                          if (!0 !== d.basic) {
                            r.n = 8;
                            break;
                          }
                          return ((r.p = 5), (r.n = 6), createImageBitmap(e));
                        case 6:
                          return ((f = r.v), (g = l), r.a(2, { data: f, premultiplyAlpha: g }));
                        case 7:
                          throw (
                            (r.p = 7),
                            (m = r.v),
                            new Error(`Failed to create basic image bitmap: ${m}`)
                          );
                        case 8:
                          return (
                            (r.p = 8),
                            (r.n = 9),
                            createImageBitmap(e, {
                              premultiplyAlpha: l ? "premultiply" : "none",
                              colorSpaceConversion: "none",
                              imageOrientation: "none",
                            })
                          );
                        case 9:
                          return ((h = r.v), r.a(2, { data: h, premultiplyAlpha: l }));
                        case 10:
                          throw (
                            (r.p = 10),
                            (v = r.v),
                            new Error(`Failed to create image bitmap with options: ${v}`)
                          );
                        case 11:
                          return r.a(2);
                      }
                  },
                  o,
                  null,
                  [
                    [8, 10],
                    [5, 7],
                    [1, 3],
                  ],
                );
              }),
            )();
          }
          loadImage(e) {
            var t = this;
            return o(
              r().m(function n() {
                var i, a, o, s, u, l, d, c, h;
                return r().w(
                  function (n) {
                    for (;;)
                      switch ((n.p = n.n)) {
                        case 0:
                          if (
                            ((i = t.props),
                            (a = i.premultiplyAlpha),
                            (o = i.sx),
                            (s = i.sy),
                            (u = i.sw),
                            (l = i.sh),
                            !0 !== t.txManager.hasCreateImageBitmap)
                          ) {
                            n.n = 8;
                            break;
                          }
                          if (
                            !1 !== C(e) ||
                            !0 !== t.txManager.hasWorker ||
                            null === t.txManager.imageWorkerManager
                          ) {
                            n.n = 3;
                            break;
                          }
                          return (
                            (n.p = 1),
                            n.a(2, t.txManager.imageWorkerManager.getImage(e, a, o, s, u, l))
                          );
                        case 2:
                          throw ((n.p = 2), (c = n.v), new Error(`Failed to load image via worker: ${c}`));
                        case 3:
                          if (!0 !== C(e)) {
                            n.n = 4;
                            break;
                          }
                          ((d = M(e)), (n.n = 7));
                          break;
                        case 4:
                          return ((n.p = 4), (n.n = 5), me(e, "blob"));
                        case 5:
                          ((d = n.v), (n.n = 7));
                          break;
                        case 6:
                          throw (
                            (n.p = 6),
                            (h = n.v),
                            new Error(`Failed to fetch image blob from ${e}: ${h}`)
                          );
                        case 7:
                          return n.a(2, t.createImageBitmap(d, a, o, s, u, l));
                        case 8:
                          return n.a(2, t.loadImageFallback(e, null == a || a));
                      }
                  },
                  n,
                  null,
                  [
                    [4, 6],
                    [1, 2],
                  ],
                );
              }),
            )();
          }
          getTextureSource() {
            var e = this;
            return o(
              r().m(function t() {
                var n, i, a;
                return r().w(
                  function (t) {
                    for (;;)
                      switch ((t.p = t.n)) {
                        case 0:
                          return ((t.p = 0), (t.n = 1), e.determineImageTypeAndLoadImage());
                        case 1:
                          ((i = t.v), (t.n = 3));
                          break;
                        case 2:
                          return ((t.p = 2), (a = t.v), e.setState("failed", a), t.a(2, { data: null }));
                        case 3:
                          if (null !== i.data) {
                            t.n = 4;
                            break;
                          }
                          return (
                            e.setState("failed", Error("ImageTexture: No image data")),
                            t.a(2, { data: null })
                          );
                        case 4:
                          return t.a(2, {
                            data: i.data,
                            premultiplyAlpha: null === (n = e.props.premultiplyAlpha) || void 0 === n || n,
                          });
                      }
                  },
                  t,
                  null,
                  [[0, 2]],
                );
              }),
            )();
          }
          determineImageTypeAndLoadImage() {
            var e = this.props,
              t = e.src,
              n = e.premultiplyAlpha,
              r = e.type;
            if (null === t) return { data: null };
            if ("string" != typeof t) {
              if (t instanceof Blob) {
                if (!0 === this.txManager.hasCreateImageBitmap) {
                  var i = this.props,
                    a = i.sx,
                    o = i.sy,
                    s = i.sw,
                    u = i.sh;
                  return this.createImageBitmap(t, n, a, o, s, u);
                }
                return this.loadImageFallback(t, null == n || n);
              }
              return t instanceof ImageData
                ? { data: t, premultiplyAlpha: n }
                : { data: t(), premultiplyAlpha: n };
            }
            var l = (function (e) {
              if ("file:" === self.location.protocol && !b.test(e)) {
                var t = self.location.pathname.split("/");
                t.pop();
                var n = t.join("/"),
                  r = self.location.protocol + "//" + n;
                return (
                  "." === e.charAt(0) && (e = e.slice(1)),
                  "/" === e.charAt(0) && (e = e.slice(1)),
                  r + "/" + e
                );
              }
              return new URL(e, self.location.href).href;
            })(t);
            return "regular" === r
              ? this.loadImage(l)
              : "svg" === r || !0 === /\.(svg)(\?.*)?$/.test(t)
                ? ge(
                    l,
                    this.props.width,
                    this.props.height,
                    this.props.sx,
                    this.props.sy,
                    this.props.sw,
                    this.props.sh,
                  )
                : "compressed" === r ||
                    !0 ===
                      (function (e) {
                        return /\.(ktx|pvr)$/.test(e);
                      })(t)
                  ? Z(l)
                  : this.loadImage(l);
          }
          static makeCacheKey(e) {
            var t,
              n = ve.resolveDefaults(e),
              r = n.key || n.src;
            if ("string" != typeof r) return !1;
            var i,
              a,
              o = "";
            null !== n.sh &&
              null !== n.sw &&
              ((o += ","),
              (o += null !== (i = n.sx) && void 0 !== i ? i : ""),
              (o += null !== (a = n.sy) && void 0 !== a ? a : ""),
              (o += n.sw || ""),
              (o += n.sh || ""));
            return `ImageTexture,${r},${null !== (t = n.premultiplyAlpha) && void 0 !== t ? t : "true"}${o}`;
          }
          static resolveDefaults(e) {
            var t, n, r, i, a, o, s, u, l, d, c;
            return {
              src: null !== (t = e.src) && void 0 !== t ? t : "",
              premultiplyAlpha: null === (n = e.premultiplyAlpha) || void 0 === n || n,
              key: null !== (r = e.key) && void 0 !== r ? r : null,
              type: null !== (i = e.type) && void 0 !== i ? i : null,
              width: null !== (a = e.width) && void 0 !== a ? a : null,
              height: null !== (o = e.height) && void 0 !== o ? o : null,
              sx: null !== (s = e.sx) && void 0 !== s ? s : null,
              sy: null !== (u = e.sy) && void 0 !== u ? u : null,
              sw: null !== (l = e.sw) && void 0 !== l ? l : null,
              sh: null !== (d = e.sh) && void 0 !== d ? d : null,
              maxRetryCount: null !== (c = e.maxRetryCount) && void 0 !== c ? c : null,
            };
          }
        }
        s(ve, "z$__type__Props", void 0);
        class ye extends y {
          constructor(e, t) {
            (super(e),
              s(this, "props", void 0),
              s(this, "type", g.noise),
              (this.props = ye.resolveDefaults(t)));
          }
          getTextureSource() {
            var e = this;
            return o(
              r().m(function t() {
                var n, i, a, o, s, u, l;
                return r().w(function (t) {
                  for (;;)
                    if (0 === t.n) {
                      for (
                        n = e.props,
                          i = n.width,
                          a = n.height,
                          o = i * a * 4,
                          s = new Uint8ClampedArray(o),
                          u = 0;
                        u < o;
                        u += 4
                      )
                        ((l = Math.floor(256 * Math.random())),
                          (s[u] = l),
                          (s[u + 1] = l),
                          (s[u + 2] = l),
                          (s[u + 3] = 255));
                      return t.a(2, { data: new ImageData(s, i, a) });
                    }
                }, t);
              }),
            )();
          }
          static makeCacheKey(e) {
            if (void 0 === e.cacheId) return !1;
            var t = ye.resolveDefaults(e);
            return `NoiseTexture,${t.width},${t.height},${t.cacheId}`;
          }
          static resolveDefaults(e) {
            var t, n, r;
            return {
              width: null !== (t = e.width) && void 0 !== t ? t : 128,
              height: null !== (n = e.height) && void 0 !== n ? n : 128,
              cacheId: null !== (r = e.cacheId) && void 0 !== r ? r : 0,
            };
          }
        }
        s(ye, "z$__type__Props", void 0);
        var be,
          xe = 0;
        class Te extends y {
          constructor(e, t) {
            (super(e),
              s(this, "props", void 0),
              s(this, "parentTexture", void 0),
              s(this, "type", g.subTexture),
              s(this, "subtextureId", "subtexture-" + xe++),
              s(this, "onParentTxLoaded", () => {
                this.forwardParentTxState("loaded", { width: this.props.width, height: this.props.height });
              }),
              s(this, "onParentTxFailed", (e, t) => {
                ((this.retryCount = this.parentTexture.retryCount - 1),
                  this.forwardParentTxState("failed", t));
              }),
              s(this, "onParentTxLoading", () => {
                this.forwardParentTxState("loading");
              }),
              s(this, "onParentTxFreed", () => {
                this.forwardParentTxState("freed");
              }),
              (this.props = Te.resolveDefaults(t || {})),
              this.props.texture,
              this.props.texture,
              (this.parentTexture = e.resolveParentTexture(this.props.texture)),
              this.renderableOwners.length > 0 &&
                this.parentTexture.setRenderableOwner(this.subtextureId, !0),
              queueMicrotask(() => {
                var e = this.parentTexture;
                ("loaded" === e.state && e.dimensions
                  ? this.onParentTxLoaded(e, e.dimensions)
                  : "loading" === e.state
                    ? this.onParentTxLoading()
                    : "failed" === e.state && e.error
                      ? this.onParentTxFailed(e, e.error)
                      : "freed" === e.state && this.onParentTxFreed(),
                  e.on("loading", this.onParentTxLoading),
                  e.on("loaded", this.onParentTxLoaded),
                  e.on("failed", this.onParentTxFailed),
                  e.on("freed", this.onParentTxFreed));
              }));
          }
          forwardParentTxState(e, t) {
            this.setState(e, t);
          }
          onChangeIsRenderable(e) {
            this.parentTexture.setRenderableOwner(this.subtextureId, e);
          }
          getTextureSource() {
            var e = this;
            return o(
              r().m(function t() {
                return r().w(function (t) {
                  for (;;) if (0 === t.n) return t.a(2, { data: e.props });
                }, t);
              }),
            )();
          }
          static makeCacheKey(e) {
            return !1;
          }
          static resolveDefaults(e) {
            return {
              texture: e.texture,
              x: e.x || 0,
              y: e.y || 0,
              width: e.width || 0,
              height: e.height || 0,
            };
          }
        }
        s(Te, "z$__type__Props", void 0);
        class we extends y {
          constructor(e, t) {
            (super(e),
              s(this, "props", void 0),
              s(this, "type", g.renderToTexture),
              (this.props = we.resolveDefaults(t || {})));
          }
          get width() {
            return this.props.width;
          }
          set width(e) {
            this.props.width = e;
          }
          get height() {
            return this.props.height;
          }
          set height(e) {
            this.props.height = e;
          }
          getTextureSource() {
            return o(
              r().m(function e() {
                return r().w(function (e) {
                  for (;;) if (0 === e.n) return e.a(2, { data: null, premultiplyAlpha: null });
                }, e);
              }),
            )();
          }
          static resolveDefaults(e) {
            return { width: e.width || 256, height: e.height || 256 };
          }
        }
        function Se() {
          return (Se = o(
            r().m(function e() {
              var t, n, i, a, o, s, u, l, d, c;
              return r().w(
                function (e) {
                  for (;;)
                    switch ((e.p = e.n)) {
                      case 0:
                        return (
                          (n = new Uint8Array([
                            137, 80, 78, 71, 13, 10, 26, 10, 0, 0, 0, 13, 73, 72, 68, 82, 0, 0, 0, 1, 0, 0, 0,
                            1, 1, 3, 0, 0, 0, 37, 219, 86, 202, 0, 0, 0, 3, 80, 76, 84, 69, 0, 0, 0, 167, 122,
                            61, 218, 0, 0, 0, 1, 116, 82, 78, 83, 0, 64, 230, 216, 102, 0, 0, 0, 10, 73, 68,
                            65, 84, 8, 215, 99, 96, 0, 0, 0, 2, 0, 1, 226, 33, 188, 51, 0, 0, 0, 0, 73, 69,
                            78, 68, 174, 66, 96, 130,
                          ])),
                          (i = { basic: !1, options: !1, full: !1 }),
                          (a = new Blob([n], { type: "image/png" })),
                          (e.n = 1),
                          createImageBitmap(a)
                        );
                      case 1:
                        return (
                          (o = e.v),
                          null === (t = o.close) || void 0 === t || t.call(o),
                          (i.basic = !0),
                          (e.p = 2),
                          (u = { premultiplyAlpha: "none" }),
                          (e.n = 3),
                          createImageBitmap(a, u)
                        );
                      case 3:
                        ((l = e.v),
                          null === (s = l.close) || void 0 === s || s.call(l),
                          (i.options = !0),
                          (e.n = 5));
                        break;
                      case 4:
                        ((e.p = 4), e.v);
                      case 5:
                        return (
                          (e.p = 5),
                          (e.n = 6),
                          createImageBitmap(a, 0, 0, 1, 1, { premultiplyAlpha: "none" })
                        );
                      case 6:
                        ((c = e.v),
                          null === (d = c.close) || void 0 === d || d.call(c),
                          (i.full = !0),
                          (e.n = 8));
                        break;
                      case 7:
                        ((e.p = 7), e.v);
                      case 8:
                        return e.a(2, i);
                    }
                },
                e,
                null,
                [
                  [5, 7],
                  [2, 4],
                ],
              );
            }),
          )).apply(this, arguments);
        }
        (s(we, "z$__type__Props", void 0),
          (function (e) {
            ((e.MEMORY_THRESHOLD_EXCEEDED = "MEMORY_THRESHOLD_EXCEEDED"),
              (e.TEXTURE_DATA_NULL = "TEXTURE_DATA_NULL"),
              (e.TEXTURE_TYPE_NOT_REGISTERED = "TEXTURE_TYPE_NOT_REGISTERED"));
          })(be || (be = {})));
        var Ae = {
          [be.MEMORY_THRESHOLD_EXCEEDED]: "Memory threshold exceeded",
          [be.TEXTURE_DATA_NULL]: "Texture data is null",
          [be.TEXTURE_TYPE_NOT_REGISTERED]: "Texture type is not registered",
        };
        class Ee extends Error {
          constructor(e, t) {
            var n = Object.values(be).includes(e),
              r = n ? e : void 0;
            (super(n && r ? (null != t ? t : Ae[r]) : String(e)),
              s(this, "code", void 0),
              (this.name = new.target.name),
              r && (this.code = r));
          }
        }
        class ke extends v {
          constructor(e, t) {
            (super(),
              s(this, "keyCache", new Map()),
              s(this, "inverseKeyCache", new WeakMap()),
              s(this, "txConstructors", {}),
              s(this, "maxRetryCount", void 0),
              s(this, "priorityQueue", []),
              s(this, "uploadTextureQueue", []),
              s(this, "initialized", !1),
              s(this, "stage", void 0),
              s(this, "numImageWorkers", void 0),
              s(this, "imageWorkerManager", null),
              s(this, "hasCreateImageBitmap", !!self.createImageBitmap),
              s(this, "imageBitmapSupported", { basic: !1, options: !1, full: !1 }),
              s(this, "hasWorker", !!self.Worker),
              s(this, "renderer", void 0),
              s(this, "frameTime", 0));
            var n = t.numImageWorkers,
              r = t.createImageBitmapSupport,
              i = t.maxRetryCount;
            ((this.stage = e),
              (this.numImageWorkers = n),
              (this.maxRetryCount = i),
              "auto" === r
                ? (function () {
                    return Se.apply(this, arguments);
                  })()
                    .then(e => {
                      this.initialize(e);
                    })
                    .catch(() => {
                      (console.warn(
                        "[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower.",
                      ),
                        (this.initialized = !0),
                        this.emit("initialized"));
                    })
                : this.initialize({ basic: "basic" === r, options: "options" === r, full: "full" === r }),
              this.registerTextureType("ImageTexture", ve),
              this.registerTextureType("ColorTexture", Y),
              this.registerTextureType("NoiseTexture", ye),
              this.registerTextureType("SubTexture", Te),
              this.registerTextureType("RenderTexture", we));
          }
          registerTextureType(e, t) {
            this.txConstructors[e] = t;
          }
          initialize(e) {
            ((this.hasCreateImageBitmap = e.basic || e.options || e.full),
              (this.imageBitmapSupported = e),
              this.hasCreateImageBitmap ||
                console.warn(
                  "[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower.",
                ),
              this.hasCreateImageBitmap && this.hasWorker && this.numImageWorkers > 0
                ? (this.imageWorkerManager = new q(this.numImageWorkers, e))
                : console.warn(
                    "[Lightning] Imageworker is 0 or not supported on this browser. Image loading will be slower.",
                  ),
              (this.initialized = !0),
              this.emit("initialized"));
          }
          enqueueUploadTexture(e) {
            !1 === this.uploadTextureQueue.includes(e) && this.uploadTextureQueue.push(e);
          }
          createTexture(e, t) {
            var n,
              r = this.txConstructors[e];
            if (!r) throw new Ee(be.TEXTURE_TYPE_NOT_REGISTERED, `Texture type "${e}" is not registered`);
            var i = r.makeCacheKey(t);
            return (
              i && this.keyCache.has(i)
                ? (n = this.keyCache.get(i))
                : ((n = new r(this, t)), i && this.initTextureToCache(n, i)),
              n
            );
          }
          loadTexture(e, t) {
            var n = this;
            return o(
              r().m(function i() {
                return r().w(function (r) {
                  for (;;)
                    switch (r.n) {
                      case 0:
                        if (e.type !== g.subTexture) {
                          r.n = 1;
                          break;
                        }
                        return r.a(2);
                      case 1:
                        if ("loaded" !== e.state) {
                          r.n = 2;
                          break;
                        }
                        return r.a(2);
                      case 2:
                        if ("loading" !== e.state) {
                          r.n = 3;
                          break;
                        }
                        return r.a(2);
                      case 3:
                        if (!1 !== n.initialized) {
                          r.n = 4;
                          break;
                        }
                        return (n.priorityQueue.push(e), r.a(2));
                      case 4:
                        return (
                          e.setState("loading"),
                          (r.n = 5),
                          e.getTextureData().catch(t => (console.error(t), e.setState("failed"), null))
                        );
                      case 5:
                        if (null !== r.v && "failed" !== e.state) {
                          r.n = 6;
                          break;
                        }
                        return r.a(2);
                      case 6:
                        if (!0 !== (e.type !== g.image || !0 === t)) {
                          r.n = 8;
                          break;
                        }
                        return (
                          (r.n = 7),
                          n.uploadTexture(e).catch(t => {
                            (console.error("Failed to upload texture:", t), e.setState("failed"));
                          })
                        );
                      case 7:
                        return r.a(2);
                      case 8:
                        n.enqueueUploadTexture(e);
                      case 9:
                        return r.a(2);
                    }
                }, i);
              }),
            )();
          }
          uploadTexture(e) {
            var t = this;
            return o(
              r().m(function n() {
                var i;
                return r().w(function (n) {
                  for (;;)
                    switch (n.n) {
                      case 0:
                        if (
                          !0 !== t.stage.txMemManager.doNotExceedCriticalThreshold ||
                          !0 !== t.stage.txMemManager.criticalCleanupRequested
                        ) {
                          n.n = 1;
                          break;
                        }
                        return (e.setState("failed", new Ee(be.MEMORY_THRESHOLD_EXCEEDED)), n.a(2));
                      case 1:
                        if ("failed" !== e.state && "freed" !== e.state) {
                          n.n = 2;
                          break;
                        }
                        return n.a(2);
                      case 2:
                        if ("loaded" !== e.state) {
                          n.n = 3;
                          break;
                        }
                        return n.a(2);
                      case 3:
                        if (null !== e.textureData) {
                          n.n = 4;
                          break;
                        }
                        return (
                          e.setState(
                            "failed",
                            new Ee(be.TEXTURE_DATA_NULL, "Texture data is null, cannot upload texture"),
                          ),
                          n.a(2)
                        );
                      case 4:
                        if (null === (i = e.loadCtxTexture()) || "loaded" !== i.state) {
                          n.n = 5;
                          break;
                        }
                        return (e.setState("loaded"), n.a(2));
                      case 5:
                        return ((n.n = 6), i.load());
                      case 6:
                        return n.a(2);
                    }
                }, n);
              }),
            )();
          }
          isProcessingTexture(e) {
            return !0 === this.uploadTextureQueue.includes(e);
          }
          processSome(e) {
            var t = this;
            return o(
              r().m(function n() {
                var i, a, o, s, u;
                return r().w(
                  function (n) {
                    for (;;)
                      switch ((n.p = n.n)) {
                        case 0:
                          if (!1 !== t.initialized) {
                            n.n = 1;
                            break;
                          }
                          return n.a(2);
                        case 1:
                          i = X();
                        case 2:
                          if (!(t.priorityQueue.length > 0 && X() - i < e)) {
                            n.n = 8;
                            break;
                          }
                          return ((a = t.priorityQueue.pop()), (n.p = 3), (n.n = 4), a.getTextureData());
                        case 4:
                          return ((n.n = 5), t.uploadTexture(a));
                        case 5:
                          n.n = 7;
                          break;
                        case 6:
                          ((n.p = 6), (s = n.v), console.error("Failed to process priority texture:", s));
                        case 7:
                          n.n = 2;
                          break;
                        case 8:
                          if (!(t.uploadTextureQueue.length > 0 && X() - i < e)) {
                            n.n = 13;
                            break;
                          }
                          return (
                            (o = t.uploadTextureQueue.shift()),
                            (n.p = 9),
                            (n.n = 10),
                            t.uploadTexture(o)
                          );
                        case 10:
                          n.n = 12;
                          break;
                        case 11:
                          ((n.p = 11), (u = n.v), console.error("Failed to upload texture:", u));
                        case 12:
                          n.n = 8;
                          break;
                        case 13:
                          return n.a(2);
                      }
                  },
                  n,
                  null,
                  [
                    [9, 11],
                    [3, 6],
                  ],
                );
              }),
            )();
          }
          hasUpdates() {
            return this.uploadTextureQueue.length > 0;
          }
          initTextureToCache(e, t) {
            var n = this.keyCache,
              r = this.inverseKeyCache;
            (n.set(t, e), r.set(e, t));
          }
          getTextureFromCache(e) {
            return this.keyCache.get(e);
          }
          removeTextureFromCache(e) {
            var t = this.inverseKeyCache,
              n = this.keyCache,
              r = t.get(e);
            r && n.delete(r);
          }
          resolveParentTexture(e) {
            if (null == e || !e.props) return e;
            var t = ve.makeCacheKey(e.props),
              n = t ? this.getTextureFromCache(t) : void 0;
            return null != n ? n : e;
          }
        }
        var Ie = { normal: 400, bold: 700, bolder: 900, lighter: 100 },
          Ce = e => ("number" == typeof e ? e : Ie[e] || 400);
        class Me {
          constructor(e) {
            (s(this, "textRenderers", void 0), s(this, "fontCache", new Map()), (this.textRenderers = e));
          }
          addFontFace(e) {
            for (var t in this.textRenderers) {
              var n = this.textRenderers[t];
              n && n.isFontFaceSupported(e) && n.addFontFace(e);
            }
          }
          resolveFontFace(e, t, n) {
            var r = t.fontFamily,
              i = t.fontWeight,
              a = t.fontStyle,
              o = t.fontStretch,
              s = `${n}_${r}_${a}_${i}_${o}`;
            if (!0 === this.fontCache.has(s)) return this.fontCache.get(s);
            var l = (function (e, t, n, r, i) {
              var a,
                o = Ce(n),
                s = u(e);
              try {
                for (s.s(); !(a = s.n()).done; ) {
                  var l = a.value[t];
                  if (l) {
                    if (1 === l.size)
                      return (
                        console.warn(
                          `TrFontManager: Only one font face found for family: '${t}' - will be used for all weights and styles`,
                        ),
                        l.values().next().value
                      );
                    var d,
                      c = new Map(),
                      h = u(l);
                    try {
                      for (h.s(); !(d = h.n()).done; ) {
                        var p = d.value,
                          f = Ce(p.descriptors.weight);
                        if (f === o && p.descriptors.style === r && p.descriptors.stretch === i) return p;
                        c.set(f, p);
                      }
                    } catch (m) {
                      h.e(m);
                    } finally {
                      h.f();
                    }
                    var g = `TrFontManager: No exact match: '${t} Weight: ${o} Style: ${r} Stretch: ${i}'`;
                    if ((console.error(g), 400 === o && c.has(500))) return c.get(500);
                    if (500 === o && c.has(400)) return c.get(400);
                    if (o < 400) {
                      for (; o > 0; ) {
                        if (c.has(o)) return c.get(o);
                        o -= 100;
                      }
                      o = 600;
                    }
                    for (; o < 1e3; ) {
                      if (c.has(o)) return c.get(o);
                      o += 100;
                    }
                    for (o = 500; o > 0; ) {
                      if (c.has(o)) return c.get(o);
                      o -= 100;
                    }
                  }
                }
              } catch (m) {
                s.e(m);
              } finally {
                s.f();
              }
            })(e, r, i, a, o);
            return (void 0 !== l && this.fontCache.set(s, l), l);
          }
        }
        class Re {
          static makeCacheKey(e) {
            return !1;
          }
          static resolveDefaults(e) {
            return {};
          }
        }
        function _e(e, t, n) {
          var r = e.createShader(t);
          if (!r) {
            var i = e.getError();
            throw new Error(
              `Unable to create the shader: ${t === e.VERTEX_SHADER ? "VERTEX_SHADER" : "FRAGMENT_SHADER"}.${i ? ` WebGlContext Error: ${i}` : ""}`,
            );
          }
          if ((e.shaderSource(r, n), e.compileShader(r), !!e.getShaderParameter(r, e.COMPILE_STATUS)))
            return r;
          (console.error(e.getShaderInfoLog(r)), e.deleteShader(r));
        }
        class De extends Re {
          constructor(e) {
            (super(),
              s(this, "buffersBound", !1),
              s(this, "program", void 0),
              s(this, "vao", void 0),
              s(this, "renderer", void 0),
              s(this, "glw", void 0),
              s(this, "attributeLocations", void 0),
              s(this, "uniformLocations", void 0),
              s(this, "supportsIndexedTextures", void 0));
            var t = (this.renderer = e.renderer),
              n = (this.glw = this.renderer.glw);
            this.supportsIndexedTextures = e.supportsIndexedTextures || !1;
            var r = n.isWebGl2(),
              i = (r && e.webgl2Extensions) || (!r && e.webgl1Extensions) || [],
              a = r ? "2.0" : "1.0";
            i.forEach(e => {
              if (!n.getExtension(e))
                throw new Error(
                  `Shader "${this.constructor.name}" requires extension "${e}" for WebGL ${a} but wasn't found`,
                );
            });
            var o = e.shaderSources || this.constructor.shaderSources;
            if (!o) throw new Error(`Shader "${this.constructor.name}" is missing shaderSources.`);
            r &&
              null != o &&
              o.webGl2 &&
              ((o.fragment = o.webGl2.fragment), (o.vertex = o.webGl2.vertex), delete o.webGl2);
            var u = t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,
              l = o.vertex instanceof Function ? o.vertex(u) : o.vertex,
              d = o.fragment instanceof Function ? o.fragment(u) : o.fragment,
              c = _e(n, n.VERTEX_SHADER, l),
              h = _e(n, n.FRAGMENT_SHADER, d);
            if (!c || !h)
              throw new Error(
                `Unable to create the following shader(s): ${[!c && "VERTEX_SHADER", !h && "FRAGMENT_SHADER"].filter(Boolean).join(" and ")}`,
              );
            var p = (function (e, t, n) {
              var r = e.createProgram();
              if (!r) throw new Error("Unable to create program");
              if (
                (e.attachShader(r, t),
                e.attachShader(r, n),
                e.linkProgram(r),
                e.getProgramParameter(r, e.LINK_STATUS))
              )
                return r;
              (console.warn(e.getProgramInfoLog(r)), e.deleteProgram(r));
            })(n, c, h);
            if (!p) throw new Error("Unable to create program");
            ((this.program = p),
              (this.attributeLocations = n.getAttributeLocations(this.program)),
              (this.uniformLocations = n.getUniformLocations(this.program)));
          }
          disableAttribute(e) {
            this.glw.disableVertexAttribArray(e);
          }
          disableAttributes() {
            for (var e = this.glw, t = this.attributeLocations.length, n = 0; n < t; n++)
              e.disableVertexAttribArray(n);
          }
          canBatchShaderProps(e, t) {
            return !1;
          }
          bindRenderOp(e, t) {
            var n;
            (this.bindBufferCollection(e.buffers),
              e.textures.length > 0 &&
                null !== (n = e.textures[0]) &&
                void 0 !== n &&
                n.ctxTexture &&
                this.bindTextures(e.textures));
            var r = e.glw,
              i = e.parentHasRenderTexture;
            if (!e.renderToTexture || !i) {
              if (i) {
                var a = e.framebufferDimensions || {},
                  o = a.width,
                  s = a.height;
                (r.uniform1f(this.getUniformLocation("u_pixelRatio"), 1),
                  r.uniform2f(this.getUniformLocation("u_resolution"), null != o ? o : 0, null != s ? s : 0));
              } else
                (r.uniform1f(this.getUniformLocation("u_pixelRatio"), e.options.pixelRatio),
                  r.uniform2f(this.getUniformLocation("u_resolution"), r.canvas.width, r.canvas.height));
              if (t) {
                if (f(t, "$dimensions")) {
                  var u = t.$dimensions;
                  (u || (u = e.dimensions),
                    r.uniform2f(this.getUniformLocation("u_dimensions"), u.width, u.height));
                }
                if (f(t, "$alpha")) {
                  var l = t.$alpha;
                  (l || (l = e.alpha), r.uniform1f(this.getUniformLocation("u_alpha"), l));
                }
                this.bindProps(t);
              }
            }
          }
          getUniformLocation(e) {
            return this.uniformLocations[e] || null;
          }
          bindBufferCollection(e) {
            for (var t = this.glw, n = this.attributeLocations, r = n.length, i = 0; i < r; i++) {
              var a = n[i],
                o = e.getBuffer(a),
                s = e.getAttributeInfo(a);
              void 0 !== o &&
                void 0 !== s &&
                (t.enableVertexAttribArray(i),
                t.vertexAttribPointer(o, i, s.size, s.type, s.normalized, s.stride, s.offset));
            }
          }
          bindProps(e) {}
          bindTextures(e) {}
          attach() {
            (this.glw.useProgram(this.program),
              this.glw.isWebGl2() && this.vao && this.glw.bindVertexArray(this.vao));
          }
          detach() {
            this.disableAttributes();
          }
        }
        s(De, "shaderSources", void 0);
        class Pe extends De {
          constructor(e) {
            super({ renderer: e });
          }
          bindTextures(e) {
            var t = this.glw;
            (t.activeTexture(0), t.bindTexture(e[0].ctxTexture));
          }
        }
        s(Pe, "shaderSources", {
          vertex:
            "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_nodeCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying vec2 v_nodeCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio;\n        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);\n\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_nodeCoordinate = a_nodeCoordinate;\n\n        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);\n        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;\n      }\n    ",
          fragment:
            "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    ",
        });
        class Le extends De {
          constructor(e) {
            (super({ renderer: e }), s(this, "supportsIndexedTextures", !0));
          }
          bindTextures(e) {
            var t = this.renderer,
              n = this.glw;
            if (e.length > t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)
              throw new Error(
                `DefaultShaderBatched: Cannot bind more than ${t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`,
              );
            e.forEach((e, t) => {
              (n.activeTexture(t), n.bindTexture(e.ctxTexture));
            });
            var r = Array.from(Array(e.length).keys());
            this.glw.uniform1iv(this.getUniformLocation("u_textures[0]"), r);
          }
        }
        s(Le, "shaderSources", {
          vertex:
            "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",
          fragment: e =>
            `\n      #define txUnits ${e}\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[${e}], int idx, vec2 uv) {\n        ${Array.from(
              Array(e).keys(),
            )
              .map(
                e =>
                  `\n          ${0 !== e ? "else " : ""}if (idx == ${e}) {\n            return texture2D(textures[${e}], uv);\n          }\n        `,
              )
              .join(
                "",
              )}\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    `,
        });
        class Ne {
          static getEffectKey(e) {
            return "";
          }
          static getMethodParameters(e, t) {
            var n = [];
            for (var r in e) {
              var i = e[r],
                a = "";
              (i.size && (a = `[${i.size(t)}]`), n.push(`${i.type} ${r}${a}`));
            }
            return n.join(",");
          }
          constructor(e) {
            (s(this, "priority", 1),
              s(this, "name", ""),
              s(this, "ref", void 0),
              s(this, "target", void 0),
              s(this, "passParameters", ""),
              s(this, "declaredUniforms", ""),
              s(this, "uniformInfo", {}));
            var t = e.ref,
              n = e.target,
              r = e.props,
              i = void 0 === r ? {} : r;
            ((this.ref = t), (this.target = n));
            var a = {},
              o = [],
              u = "",
              l = this.constructor.uniforms || {};
            for (var d in l) {
              var c = l[d],
                h = c.type,
                p = `${t}_${d}`,
                f = "";
              (c.size && (f = `[${c.size(i)}]`),
                o.push(p),
                (u += `uniform ${h} ${p}${f};`),
                (a[d] = { name: p, uniform: l[d].method }));
            }
            ((this.passParameters = o.join(",")), (this.declaredUniforms = u), (this.uniformInfo = a));
          }
          static resolveDefaults(e) {
            return {};
          }
          static makeEffectKey(e) {
            return !1;
          }
        }
        (s(Ne, "uniforms", {}),
          s(Ne, "methods", void 0),
          s(Ne, "onShaderMask", void 0),
          s(Ne, "onColorize", void 0),
          s(Ne, "onEffectMask", void 0));
        var Oe = new Map(),
          Ue = (e, t) => {
            var n = JSON.stringify(e);
            if (Oe.has(n)) return Oe.get(n);
            for (var r = [], i = (e = null != e ? e : []).length, a = 0; a < i; a++) {
              for (
                var o = e[a],
                  s = o.name,
                  u = o.type,
                  l = o.props,
                  d = { name: s, type: u, props: {} },
                  c = t[u],
                  h = c.resolveDefaults(l),
                  p = c.uniforms,
                  f = Object.keys(p),
                  g = f.length,
                  m = 0;
                m < g;
                m++
              ) {
                var v = f[m],
                  y = p[v],
                  b = {
                    value: h[v],
                    programValue: void 0,
                    method: y.method,
                    updateOnBind: y.updateOnBind || !1,
                    hasValidator: void 0 !== y.validator,
                    hasProgramValueUpdater: void 0 !== y.updateProgramValue,
                  },
                  x = (b.hasValidator && y.validator(h[v], h)) || h[v];
                (h[v] !== x && (b.validatedValue = x),
                  b.hasProgramValueUpdater && y.updateProgramValue(b),
                  void 0 === b.programValue && (b.programValue = b.value),
                  (d.props[v] = b));
              }
              r.push(d);
            }
            return (Oe.set(n, r), r);
          };
        class Be extends De {
          constructor(e, t, n) {
            var r = Be.createShader(t, n);
            (super({ renderer: e, shaderSources: { vertex: r.vertex, fragment: r.fragment } }),
              s(this, "effects", []),
              (this.effects = r.effects));
          }
          bindTextures(e) {
            var t = this.glw;
            (t.activeTexture(0), t.bindTexture(e[0].ctxTexture));
          }
          bindUniformMethods(e) {
            for (var t = this, n = this.glw, r = e.effects, i = r.length, a = 0; a < i; a++)
              for (
                var o = this.effects[a].uniformInfo,
                  s = r[a],
                  u = Object.keys(s.props),
                  l = u.length,
                  d = function () {
                    var e = u[c],
                      r = s.props[e].method,
                      i = t.getUniformLocation(o[e].name);
                    return "uniform2fv" === r ||
                      "uniform2iv" === r ||
                      "uniform3iv" === r ||
                      "uniform4fv" === r ||
                      "uniform4iv" === r ||
                      "uniformMatrix2fv" === r ||
                      "uniformMatrix3fv" === r ||
                      "uniformMatrix4fv" === r ||
                      "uniform1f" === r ||
                      "uniform1fv" === r ||
                      "uniform1i" === r ||
                      "uniform1iv" === r
                      ? ((s.props[e].setUniformValue = function () {
                          n[r](i, this.programValue);
                        }),
                        0)
                      : "uniform2f" === r || "uniform2i" === r
                        ? ((s.props[e].setUniformValue = function () {
                            n[r](i, this.programValue[0], this.programValue[1]);
                          }),
                          0)
                        : "uniform3f" === r || "uniform3i" === r
                          ? ((s.props[e].setUniformValue = function () {
                              n[r](i, this.programValue[0], this.programValue[1], this.programValue[2]);
                            }),
                            0)
                          : "uniform4f" === r || "uniform4i" === r
                            ? ((s.props[e].setUniformValue = function () {
                                n[r](
                                  i,
                                  this.programValue[0],
                                  this.programValue[1],
                                  this.programValue[2],
                                  this.programValue[3],
                                );
                              }),
                              0)
                            : void 0;
                  },
                  c = 0;
                c < l;
                c++
              )
                d();
          }
          bindProps(e) {
            for (var t = e.effects, n = t.length, r = 0; r < n; r++)
              for (var i = t[r], a = Object.keys(i.props), o = a.length, s = 0; s < o; s++) {
                var u = a[s],
                  l = i.props[u];
                if (!0 === l.updateOnBind) {
                  var d,
                    c =
                      null === (d = this.renderer.shManager.getRegisteredEffects()[i.type]) || void 0 === d
                        ? void 0
                        : d.uniforms[u];
                  null == c || c.updateProgramValue(i.props[u], e);
                }
                l.setUniformValue();
              }
          }
          canBatchShaderProps(e, t) {
            if (
              e.$alpha !== t.$alpha ||
              e.$dimensions.width !== t.$dimensions.width ||
              e.$dimensions.height !== t.$dimensions.height ||
              e.effects.length !== t.effects.length
            )
              return !1;
            for (var n = e.effects.length, r = 0; r < n; r++) {
              var i = e.effects[r],
                a = t.effects[r];
              if (i.type !== a.type) return !1;
              for (var o in i.props)
                if ((a.props && !a.props[o]) || i.props[o].value !== a.props[o].value) return !1;
            }
            return !0;
          }
          static createShader(e, t) {
            var n = {},
              r = {},
              i = "",
              a = [],
              o = [],
              s = e.effects.map(e => {
                var r = t[e.type],
                  s = r.getEffectKey(e.props || {});
                n[s] = n[s] ? ++n[s] : 1;
                var u = n[s];
                1 === u && o.push({ key: s, type: e.type, props: e.props });
                var l = new r({ ref: `${s}${1 === u ? "" : u}`, target: s, props: e.props });
                return ((i += l.declaredUniforms), a.push(...Object.values(l.uniformInfo)), l);
              }),
              u = "";
            null == o ||
              o.forEach(e => {
                var n,
                  i = t[e.type],
                  a = i.resolveDefaults(null !== (n = e.props) && void 0 !== n ? n : {}),
                  o = [];
                for (var s in i.methods) {
                  var l = s,
                    d = i.methods[s];
                  (r[s] && r[s] !== d && (l = Be.resolveMethodDuplicate(s, d, r)),
                    (r[l] = d.replace("function", l)),
                    o.push({ m: s, cm: l }));
                }
                var c = i.onShaderMask instanceof Function ? i.onShaderMask(a) : i.onShaderMask,
                  h = i.onColorize instanceof Function ? i.onColorize(a) : i.onColorize,
                  p = i.onEffectMask instanceof Function ? i.onEffectMask(a) : i.onEffectMask;
                o.forEach(e => {
                  var t = e.m,
                    n = e.cm,
                    r = new RegExp(`\\$${t}`, "g");
                  (c && (c = c.replace(r, n)), h && (h = h.replace(r, n)), p && (p = p.replace(r, n)));
                });
                var f = i.getMethodParameters(i.uniforms, a),
                  g = f.length > 0 ? `, ${f}` : "";
                (c &&
                  (u += `\n        float fx_${e.key}_onShaderMask(float shaderMask ${g}) {\n          ${c}\n        }\n        `),
                  h &&
                    (u += `\n          vec4 fx_${e.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${g}) {\n            ${h}\n          }\n        `),
                  p &&
                    (u += `\n          vec4 fx_${e.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${g}) {\n            ${p}\n          }\n        `));
              });
            var l = "";
            for (var d in r) l += r[d];
            for (
              var c = "mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",
                h = "\n\n    ",
                p = 0;
              p < s.length;
              p++
            ) {
              var f = s[p],
                g = f.passParameters.length > 0 ? `, ${f.passParameters}` : "",
                m = t[f.name];
              (m.onShaderMask &&
                (h += `\n        shaderMask = fx_${f.target}_onShaderMask(shaderMask ${g});\n        `),
                m.onColorize &&
                  (h += `\n        maskColor = fx_${f.target}_onColorize(shaderMask, maskColor, shaderColor${g});\n        `),
                m.onEffectMask &&
                  (c = `fx_${f.target}_onEffectMask(shaderMask, maskColor, shaderColor${g})`));
              var v = s[p + 1];
              (void 0 === v || t[v.name].onEffectMask) && (h += `\n          shaderColor = ${c};\n        `);
            }
            return { effects: s, uniforms: a, fragment: Be.fragment(i, l, u, h), vertex: Be.vertex() };
          }
          static resolveMethodDuplicate(e, t, n, r = 0) {
            var i = e + (r > 0 ? r : "");
            return n[i] && n[i] !== t ? this.resolveMethodDuplicate(e, t, n, ++r) : i;
          }
          static resolveDefaults(e, t) {
            var n;
            return {
              effects: Ue(null !== (n = e.effects) && void 0 !== n ? n : [], t),
              $dimensions: { width: 0, height: 0 },
              $alpha: 0,
            };
          }
          static makeCacheKey(e, t) {
            var n,
              r = "";
            return (
              null === (n = e.effects) ||
                void 0 === n ||
                n.forEach(e => {
                  var n = t[e.type].getEffectKey(e.props || {});
                  r += `,${n}`;
                }),
              `DynamicShader${r}`
            );
          }
        }
        (s(Be, "z$__type__Props", void 0),
          s(
            Be,
            "vertex",
            () =>
              "\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_nodeCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n    varying vec2 v_nodeCoordinate;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n      v_nodeCoordinate = a_nodeCoordinate;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  ",
          ),
          s(
            Be,
            "fragment",
            (e, t, n, r) =>
              `\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ${e}\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying vec2 v_nodeCoordinate;\n\n    ${t}\n\n    ${n}\n\n    void main() {\n      vec2 p = v_nodeCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ${r}\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  `,
          ));
        class je extends De {
          constructor(e) {
            super({ renderer: e });
          }
          static resolveDefaults(e) {
            return { radius: e.radius || 10, $dimensions: { width: 0, height: 0 } };
          }
          bindTextures(e) {
            var t = this.glw;
            (t.activeTexture(0), t.bindTexture(e[0].ctxTexture));
          }
          bindProps(e) {
            var t = Math.min(e.$dimensions.width, e.$dimensions.height) / (2 * e.radius);
            this.glw.uniform1f(this.getUniformLocation("u_radius"), e.radius * Math.min(t, 1));
          }
          canBatchShaderProps(e, t) {
            return (
              e.radius === t.radius &&
              e.$dimensions.width === t.$dimensions.width &&
              e.$dimensions.height === t.$dimensions.height
            );
          }
        }
        (s(je, "z$__type__Props", void 0),
          s(je, "shaderSources", {
            vertex:
              "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute vec2 a_nodeCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying vec2 v_nodeCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_nodeCoordinate = a_nodeCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",
            fragment:
              "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying vec2 v_nodeCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_nodeCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    ",
          }));
        var Fe = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);
        class Ve extends De {
          constructor(e) {
            super({ renderer: e });
          }
          bindTextures(e) {
            var t = this.glw;
            (t.activeTexture(0), t.bindTexture(e[0].ctxTexture));
          }
          bindProps(e) {
            var t = Ve.resolveDefaults(e);
            for (var n in t)
              if ("transform" === n) this.glw.uniformMatrix3fv(this.getUniformLocation("u_transform"), t[n]);
              else if ("scrollY" === n) this.glw.uniform1f(this.getUniformLocation("u_scrollY"), t[n]);
              else if ("color" === n) {
                var r = x(t.color);
                this.glw.uniform4fv(this.getUniformLocation("u_color"), r);
              } else
                "size" === n
                  ? this.glw.uniform1f(this.getUniformLocation("u_size"), t[n])
                  : "distanceRange" === n
                    ? this.glw.uniform1f(this.getUniformLocation("u_distanceRange"), t[n])
                    : "debug" === n && this.glw.uniform1i(this.getUniformLocation("u_debug"), t[n] ? 1 : 0);
          }
          static resolveDefaults(e = {}) {
            var t, n, r, i, a, o;
            return {
              transform: null !== (t = e.transform) && void 0 !== t ? t : Fe,
              scrollY: null !== (n = e.scrollY) && void 0 !== n ? n : 0,
              color: null !== (r = e.color) && void 0 !== r ? r : 4294967295,
              size: null !== (i = e.size) && void 0 !== i ? i : 16,
              distanceRange: null !== (a = e.distanceRange) && void 0 !== a ? a : 1,
              debug: null !== (o = e.debug) && void 0 !== o && o,
            };
          }
        }
        (s(Ve, "z$__type__Props", void 0),
          s(Ve, "shaderSources", {
            vertex:
              "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n\n        // Calculate screen space with pixel ratio\n        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n\n        gl_Position = vec4(screenSpace, 0.0, 1.0);\n        v_texcoord = a_textureCoordinate;\n\n      }\n    ",
            fragment:
              "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    ",
          }));
        var He = e => {
            void 0 === e.programValue && (e.programValue = new Float32Array(4));
            var t = e.value,
              n = e.programValue;
            ((n[0] = (t >>> 24) / 255),
              (n[1] = ((t >>> 16) & 255) / 255),
              (n[2] = ((t >>> 8) & 255) / 255),
              (n[3] = (255 & t) / 255));
          },
          Ge = e => {
            var t = e.validatedValue || e.value;
            if (e.programValue instanceof Float32Array)
              for (var n = t.length, r = e.programValue, i = 0; i < n; i++) r[i] = t[i];
            else e.programValue = new Float32Array(t);
          },
          ze = e => {
            var t = Array.isArray(e);
            return t
              ? t && 4 === e.length
                ? e
                : t && 2 === e.length
                  ? [e[0], e[1], e[0], e[1]]
                  : t && 3 === e.length
                    ? [e[0], e[1], e[2], e[0]]
                    : [e[0], e[0], e[0], e[0]]
              : [e, e, e, e];
          },
          Xe = (e, t) => {
            void 0 === e.programValue && (e.programValue = new Float32Array(4));
            var r = e.programValue,
              i = e.validatedValue || e.value;
            if (void 0 === t && void 0 === e.$dimensions)
              return ((r[0] = i[0]), (r[1] = i[1]), (r[2] = i[2]), void (r[3] = i[3]));
            var a = e.$dimensions;
            if (void 0 !== t) {
              var o = t.$dimensions;
              if (void 0 !== a && (a.width === o.width || a.height === o.height)) return;
              void 0 === a &&
                ((a = { width: null == o ? void 0 : o.width, height: null == o ? void 0 : o.height }),
                (e.$dimensions = a));
            }
            var s = a,
              u = s.width,
              l = s.height,
              d = n(i, 4),
              c = d[0],
              h = d[1],
              p = d[2],
              f = d[3],
              g = Math.min(
                Math.min(
                  Math.min(u / Math.max(u, c + h), u / Math.max(u, p + f)),
                  Math.min(l / Math.max(l, c + p), l / Math.max(l, h + f)),
                ),
                1,
              );
            ((r[0] = c * g), (r[1] = h * g), (r[2] = p * g), (r[3] = f * g));
          };
        class We extends Ne {
          constructor(...e) {
            (super(...e), s(this, "name", "radius"));
          }
          static getEffectKey() {
            return "radius";
          }
          static resolveDefaults(e) {
            var t;
            return { radius: null !== (t = e.radius) && void 0 !== t ? t : 10 };
          }
        }
        (s(We, "z$__type__Props", void 0),
          s(We, "uniforms", {
            radius: {
              value: 0,
              method: "uniform4fv",
              type: "vec4",
              updateOnBind: !0,
              validator: ze,
              updateProgramValue: Xe,
            },
          }),
          s(We, "methods", {
            fillMask:
              "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
            boxDist:
              "\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    ",
          }),
          s(
            We,
            "onShaderMask",
            "\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_nodeCoordinate.x, 0.5) * step(v_nodeCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_nodeCoordinate.x) * step(v_nodeCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_nodeCoordinate.x) * step(0.5, v_nodeCoordinate.y);\n  r = r + radius[3] * step(v_nodeCoordinate.x, 0.5) * step(0.5, v_nodeCoordinate.y);\n  return $boxDist(v_nodeCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  ",
          ),
          s(We, "onEffectMask", "\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  "));
        class Ke extends Ne {
          constructor(...e) {
            (super(...e), s(this, "name", "border"));
          }
          static getEffectKey() {
            return "border";
          }
          static resolveDefaults(e) {
            var t, n;
            return {
              width: null !== (t = e.width) && void 0 !== t ? t : 10,
              color: null !== (n = e.color) && void 0 !== n ? n : 4294967295,
            };
          }
        }
        (s(Ke, "z$__type__Props", void 0),
          s(Ke, "uniforms", {
            width: { value: 0, method: "uniform1f", type: "float" },
            color: { value: 4294967295, updateProgramValue: He, method: "uniform4fv", type: "vec4" },
          }),
          s(
            Ke,
            "onEffectMask",
            "\n  float intR = shaderMask + 1.0;\n  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);\n  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);\n  ",
          ),
          s(Ke, "onColorize", "\n    return color;\n  "));
        class qe extends Ne {
          constructor(...e) {
            (super(...e), s(this, "name", "linearGradient"));
          }
          static getEffectKey(e) {
            return e.colors.value
              ? `linearGradient${e.colors.value.length}`
              : `linearGradient${e.colors.length}`;
          }
          static resolveDefaults(e) {
            var t,
              n,
              r = null !== (t = e.colors) && void 0 !== t ? t : [4278190080, 4294967295],
              i = e.stops || [];
            if (0 === i.length || i.length !== r.length) {
              for (var a = r.length, o = 0, s = i; o < a; o++)
                i[o]
                  ? ((s[o] = i[o]),
                    void 0 === i[o - 1] &&
                      void 0 !== s[o - 2] &&
                      (s[o - 1] = s[o - 2] + (i[o] - s[o - 2]) / 2))
                  : (s[o] = o * (1 / (r.length - 1)));
              i = s;
            }
            return { colors: r, stops: i, angle: null !== (n = e.angle) && void 0 !== n ? n : 0 };
          }
        }
        (s(qe, "z$__type__Props", void 0),
          s(qe, "uniforms", {
            angle: { value: 0, method: "uniform1f", type: "float" },
            colors: {
              value: 4294967295,
              validator: e => e.reduce((e, t) => e.concat(x(t)), []),
              updateProgramValue: Ge,
              size: e => e.colors.length,
              method: "uniform4fv",
              type: "vec4",
            },
            stops: { value: [], size: e => e.colors.length, method: "uniform1fv", type: "float" },
          }),
          s(qe, "methods", {
            calcPoint:
              "\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    ",
          }),
          s(qe, "ColorLoop", e => {
            for (var t = "", n = 2; n < e; n++)
              t += `colorOut = mix(colorOut, colors[${n}], clamp((dist - stops[${n - 1}]) / (stops[${n}] - stops[${n - 1}]), 0.0, 1.0));`;
            return t;
          }),
          s(
            qe,
            "onColorize",
            e =>
              `\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_nodeCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      //return early if dist is lower or equal to first stop\n      if(dist <= stops[0]) {\n        return mix(maskColor, colors[0], clamp(colors[0].a, 0.0, 1.0));\n      }\n      const int amount = ${e.colors.length || 1};\n      const int last = amount - 1;\n\n      if(dist >= stops[last]) {\n        return mix(maskColor, colors[last], clamp(colors[last].a, 0.0, 1.0));\n      }\n\n      for(int i = 0; i < last; i++) {\n        float left = stops[i];\n        float right = stops[i + 1];\n        if(dist >= left && dist <= right) {\n          float localDist = smoothstep(left, right, dist);\n          vec4 colorOut = mix(colors[i], colors[i + 1], localDist);\n          return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n        }\n      }\n\n      //final fallback\n      return mix(maskColor, colors[last], clamp(colors[last].a, 0.0, 1.0));\n    `,
          ));
        class Ye extends Ne {
          constructor(...e) {
            (super(...e), s(this, "name", "grayscale"));
          }
          static getEffectKey() {
            return "grayscale";
          }
          static resolveDefaults(e) {
            var t;
            return { amount: null !== (t = e.amount) && void 0 !== t ? t : 1 };
          }
        }
        (s(Ye, "uniforms", { amount: { value: 1, method: "uniform1f", type: "float" } }),
          s(
            Ye,
            "onColorize",
            "\n    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;\n    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);\n  ",
          ));
        class $e extends Ne {
          constructor(...e) {
            (super(...e), s(this, "name", "borderRight"));
          }
          static getEffectKey() {
            return "borderRight";
          }
          static resolveDefaults(e) {
            var t, n;
            return {
              width: null !== (t = e.width) && void 0 !== t ? t : 10,
              color: null !== (n = e.color) && void 0 !== n ? n : 4294967295,
            };
          }
        }
        (s($e, "z$__type__Props", void 0),
          s($e, "uniforms", {
            width: { value: 0, method: "uniform1f", type: "float" },
            color: { value: 4294967295, updateProgramValue: He, method: "uniform4fv", type: "vec4" },
          }),
          s($e, "methods", {
            fillMask:
              "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
            rectDist:
              "\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    ",
          }),
          s(
            $e,
            "onEffectMask",
            "\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_nodeCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  ",
          ),
          s($e, "onColorize", "\n    return color;\n  "));
        class Je extends Ne {
          constructor(...e) {
            (super(...e), s(this, "name", "borderTop"));
          }
          static getEffectKey() {
            return "borderTop";
          }
          static resolveDefaults(e) {
            var t, n;
            return {
              width: null !== (t = e.width) && void 0 !== t ? t : 10,
              color: null !== (n = e.color) && void 0 !== n ? n : 4294967295,
            };
          }
        }
        (s(Je, "z$__type__Props", void 0),
          s(Je, "uniforms", {
            width: { value: 0, method: "uniform1f", type: "float" },
            color: { value: 4294967295, updateProgramValue: He, method: "uniform4fv", type: "vec4" },
          }),
          s(Je, "methods", {
            fillMask:
              "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
            rectDist:
              "\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    ",
          }),
          s(
            Je,
            "onEffectMask",
            "\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_nodeCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  ",
          ),
          s(Je, "onColorize", "\n    return color;\n  "));
        class Qe extends Ne {
          constructor(...e) {
            (super(...e), s(this, "name", "borderBottom"));
          }
          static getEffectKey() {
            return "borderBottom";
          }
          static resolveDefaults(e) {
            var t, n;
            return {
              width: null !== (t = e.width) && void 0 !== t ? t : 10,
              color: null !== (n = e.color) && void 0 !== n ? n : 4294967295,
            };
          }
        }
        (s(Qe, "z$__type__Props", void 0),
          s(Qe, "uniforms", {
            width: { value: 0, method: "uniform1f", type: "float" },
            color: { value: 4294967295, updateProgramValue: He, method: "uniform4fv", type: "vec4" },
          }),
          s(Qe, "methods", {
            fillMask:
              "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
            rectDist:
              "\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    ",
          }),
          s(
            Qe,
            "onEffectMask",
            "\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_nodeCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  ",
          ),
          s(Qe, "onColorize", "\n    return color;\n  "));
        class Ze extends Ne {
          constructor(...e) {
            (super(...e), s(this, "name", "borderLeft"));
          }
          static getEffectKey() {
            return "borderLeft";
          }
          static resolveDefaults(e) {
            var t, n;
            return {
              width: null !== (t = e.width) && void 0 !== t ? t : 10,
              color: null !== (n = e.color) && void 0 !== n ? n : 4294967295,
            };
          }
        }
        (s(Ze, "z$__type__Props", void 0),
          s(Ze, "uniforms", {
            width: { value: 0, method: "uniform1f", type: "float" },
            color: { value: 4294967295, updateProgramValue: He, method: "uniform4fv", type: "vec4" },
          }),
          s(Ze, "methods", {
            fillMask:
              "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
            rectDist:
              "\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    ",
          }),
          s(
            Ze,
            "onEffectMask",
            "\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_nodeCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  ",
          ),
          s(Ze, "onColorize", "\n    return color;\n  "));
        class et extends Ne {
          constructor(...e) {
            (super(...e), s(this, "name", "glitch"));
          }
          static getEffectKey(e) {
            return "glitch";
          }
          static resolveDefaults(e) {
            var t, n, r, i, a;
            return {
              amplitude: null !== (t = e.amplitude) && void 0 !== t ? t : 0.2,
              narrowness: null !== (n = e.narrowness) && void 0 !== n ? n : 4,
              blockiness: null !== (r = e.blockiness) && void 0 !== r ? r : 2,
              minimizer: null !== (i = e.minimizer) && void 0 !== i ? i : 8,
              time: null !== (a = e.time) && void 0 !== a ? a : Date.now(),
            };
          }
        }
        (s(et, "z$__type__Props", void 0),
          s(et, "uniforms", {
            amplitude: { value: 0, method: "uniform1f", type: "float" },
            narrowness: { value: 0, method: "uniform1f", type: "float" },
            blockiness: { value: 0, method: "uniform1f", type: "float" },
            minimizer: { value: 0, method: "uniform1f", type: "float" },
            time: {
              value: 0,
              method: "uniform1f",
              updateOnBind: !0,
              updateProgramValue: e => {
                var t = (e.value = (Date.now() - e.value) % 1e3);
                e.programValue = t;
              },
              type: "float",
            },
          }),
          s(et, "methods", {
            rand: "\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",
            noise:
              "\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",
            fbm: "\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    ",
          }),
          s(
            et,
            "onColorize",
            "\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ",
          ));
        class tt extends Ne {
          constructor(...e) {
            (super(...e), s(this, "name", "fadeOut"));
          }
          static getEffectKey() {
            return "fadeOut";
          }
          static resolveDefaults(e) {
            var t;
            return { fade: null !== (t = e.fade) && void 0 !== t ? t : 10 };
          }
        }
        (s(tt, "z$__type__Props", void 0),
          s(tt, "uniforms", {
            fade: {
              value: 0,
              method: "uniform4fv",
              type: "vec4",
              validator: ze,
              updateProgramValue: e => {
                var t = e.validatedValue || e.value;
                if (e.programValue instanceof Float32Array) {
                  var n = e.programValue;
                  ((n[0] = t[0]), (n[1] = t[1]), (n[2] = t[2]), (n[3] = t[3]));
                } else e.programValue = new Float32Array(t);
              },
            },
          }),
          s(
            tt,
            "onColorize",
            "\n  vec2 point = v_nodeCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_nodeCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_nodeCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_nodeCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_nodeCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ",
          ));
        class nt extends Ne {
          constructor(...e) {
            (super(...e), s(this, "name", "radialGradient"));
          }
          static getEffectKey(e) {
            return e.colors.value
              ? `radialGradient${e.colors.value.length}`
              : `radialGradient${e.colors.length}`;
          }
          static resolveDefaults(e) {
            var t,
              n,
              r,
              i,
              a,
              o = null !== (t = e.colors) && void 0 !== t ? t : [4278190080, 4294967295],
              s = e.stops || [];
            if (0 === s.length || s.length !== o.length) {
              for (var u = o.length, l = 0, d = s; l < u; l++)
                s[l]
                  ? ((d[l] = s[l]),
                    void 0 === s[l - 1] &&
                      void 0 !== d[l - 2] &&
                      (d[l - 1] = d[l - 2] + (s[l] - d[l - 2]) / 2))
                  : (d[l] = l * (1 / (o.length - 1)));
              s = d;
            }
            return {
              colors: o,
              stops: s,
              width: null !== (n = e.width) && void 0 !== n ? n : 0,
              height:
                null !== (r = null !== (i = e.height) && void 0 !== i ? i : e.width) && void 0 !== r ? r : 0,
              pivot: null !== (a = e.pivot) && void 0 !== a ? a : [0.5, 0.5],
            };
          }
        }
        (s(nt, "z$__type__Props", void 0),
          s(nt, "uniforms", {
            width: { value: 0, method: "uniform1f", type: "float" },
            height: { value: 0, method: "uniform1f", type: "float" },
            pivot: {
              value: [0.5, 0.5],
              updateProgramValue: e => {
                var t = e.validatedValue || e.value;
                if (e.programValue instanceof Float32Array) {
                  var n = e.programValue;
                  ((n[0] = t[0]), (n[1] = t[1]));
                } else e.programValue = new Float32Array(t);
              },
              method: "uniform2fv",
              type: "vec2",
            },
            colors: {
              value: 4294967295,
              validator: e => e.reduce((e, t) => e.concat(x(t)), []),
              updateProgramValue: Ge,
              size: e => e.colors.length,
              method: "uniform4fv",
              type: "vec4",
            },
            stops: { value: [], size: e => e.colors.length, method: "uniform1fv", type: "float" },
          }),
          s(nt, "methods", {
            getGradientColor:
              "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
          }),
          s(nt, "ColorLoop", e => {
            for (var t = "", n = 2; n < e; n++)
              t += `colorOut = mix(colorOut, colors[${n}], clamp((dist - stops[${n - 1}]) / (stops[${n}] - stops[${n - 1}]), 0.0, 1.0));`;
            return t;
          }),
          s(
            nt,
            "onColorize",
            e =>
              `\n      vec2 point = v_nodeCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      dist = clamp(dist, 0.0, 1.0);\n      //return early if dist is lower or equal to first stop\n      if(dist <= stops[0]) {\n        return mix(maskColor, colors[0], clamp(colors[0].a, 0.0, 1.0));\n      }\n      const int amount = ${e.colors.length || 1};\n      const int last = amount - 1;\n\n      if(dist >= stops[last]) {\n        return mix(maskColor, colors[last], clamp(colors[last].a, 0.0, 1.0));\n      }\n\n      for(int i = 0; i < last; i++) {\n        float left = stops[i];\n        float right = stops[i + 1];\n        if(dist >= left && dist <= right) {\n          float localDist = smoothstep(left, right, dist);\n          vec4 colorOut = mix(colors[i], colors[i + 1], localDist);\n          return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n        }\n      }\n\n      //final fallback\n      return mix(maskColor, colors[last], clamp(colors[last].a, 0.0, 1.0));\n    `,
          ));
        class rt extends Ne {
          constructor(...e) {
            (super(...e), s(this, "name", "radialProgress"));
          }
          static getEffectKey() {
            return "radialProgress";
          }
          static resolveDefaults(e) {
            var t, n, r, i, a, o, s;
            return {
              width: null !== (t = e.width) && void 0 !== t ? t : 10,
              progress: null !== (n = e.progress) && void 0 !== n ? n : 0.5,
              offset: null !== (r = e.offset) && void 0 !== r ? r : 0,
              range: null !== (i = e.range) && void 0 !== i ? i : 2 * Math.PI,
              rounded: null !== (a = e.rounded) && void 0 !== a && a,
              radius: null !== (o = e.radius) && void 0 !== o ? o : 1,
              color: null !== (s = e.color) && void 0 !== s ? s : 4294967295,
            };
          }
        }
        (s(rt, "z$__type__Props", void 0),
          s(rt, "uniforms", {
            width: { value: 0, method: "uniform1f", type: "float" },
            progress: { value: 0.5, method: "uniform1f", type: "float" },
            offset: { value: 0, method: "uniform1f", type: "float" },
            range: { value: 0, method: "uniform1f", type: "float" },
            rounded: { value: 0, method: "uniform1f", type: "float", validator: e => (e ? 1 : 0) },
            radius: { value: 1, method: "uniform1f", type: "float" },
            color: { value: 4294967295, updateProgramValue: He, method: "uniform4fv", type: "vec4" },
          }),
          s(rt, "methods", {
            rotateUV:
              "\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",
            drawDot:
              "\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    ",
          }),
          s(
            rt,
            "onEffectMask",
            "\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_nodeCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  ",
          ),
          s(rt, "onColorize", "\n    return color;\n  "));
        class it extends Ne {
          constructor(...e) {
            (super(...e), s(this, "name", "holePunch"));
          }
          static getEffectKey() {
            return "holePunch";
          }
          static resolveDefaults(e) {
            var t;
            return {
              x: e.x || 0,
              y: e.y || 0,
              width: e.width || 50,
              height: e.height || 50,
              radius: null !== (t = e.radius) && void 0 !== t ? t : 0,
            };
          }
        }
        (s(it, "z$__type__Props", void 0),
          s(it, "uniforms", {
            x: { value: 0, method: "uniform1f", type: "float" },
            y: { value: 0, method: "uniform1f", type: "float" },
            width: { value: 0, method: "uniform1f", type: "float" },
            height: { value: 0, method: "uniform1f", type: "float" },
            radius: {
              value: 0,
              method: "uniform4fv",
              type: "vec4",
              updateOnBind: !0,
              validator: ze,
              updateProgramValue: Xe,
            },
          }),
          s(it, "methods", {
            fillMask:
              "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
            boxDist:
              "\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    ",
          }),
          s(
            it,
            "onShaderMask",
            "\n  vec2 halfDimensions = u_dimensions * 0.5;\n  vec2 size = vec2(width, height) * 0.5;\n  vec2 basePos = v_nodeCoordinate.xy * u_dimensions.xy - vec2(x, y);\n  vec2 pos = basePos - size;\n  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);\n  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);\n  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);\n  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);\n  return $boxDist(pos, size, r);\n  ",
          ),
          s(it, "onEffectMask", "\n  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));\n  "));
        class at extends Re {
          constructor(e) {
            (super(), s(this, "shType", void 0), (this.shType = e));
          }
          bindRenderOp() {}
          bindProps() {}
          attach() {}
          detach() {}
        }
        class ot {
          constructor(e, t, n, r) {
            var i = this;
            (s(this, "type", void 0),
              s(this, "shader", void 0),
              s(this, "resolvedProps", void 0),
              s(this, "props", void 0),
              (this.type = e),
              (this.shader = t),
              (this.resolvedProps = n));
            for (
              var a = Object.keys(n),
                o = a.length,
                u = {},
                l = function () {
                  var e = a[d];
                  Object.defineProperty(u, e, {
                    get: () => i.resolvedProps[e],
                    set: t => {
                      ((i.resolvedProps[e] = t), r.requestRender());
                    },
                  });
                },
                d = 0;
              d < o;
              d++
            )
              l();
            this.props = u;
          }
          getResolvedProps() {
            return this.resolvedProps;
          }
        }
        class st {
          constructor(e, t, n) {
            var r = this;
            (s(this, "shader", void 0),
              s(this, "resolvedProps", void 0),
              s(this, "props", void 0),
              s(this, "type", void 0),
              (this.shader = e),
              (this.type = "DynamicShader"),
              (this.resolvedProps = t));
            for (
              var i = n.getRegisteredEffects(),
                a = {},
                o = t.effects,
                u = o.length,
                l = function (e) {
                  var t = o[e],
                    s = t.name,
                    u = t.props,
                    l = t.type;
                  if (void 0 === s) return 1;
                  for (
                    var d = {},
                      c = Object.keys(u),
                      h = c.length,
                      p = function () {
                        var t = c[f];
                        Object.defineProperty(d, t, {
                          get: () => r.resolvedProps.effects[e].props[t].value,
                          set: a => {
                            var o,
                              s,
                              d = r.resolvedProps.effects[e].props[t];
                            ((d.value = a), d.hasValidator) &&
                              (a = d.validatedValue =
                                null === (o = i[l].uniforms[t]) || void 0 === o ? void 0 : o.validator(a, u));
                            d.hasProgramValueUpdater
                              ? null === (s = i[l].uniforms[t]) || void 0 === s || s.updateProgramValue(d)
                              : (d.programValue = a);
                            n.renderer.stage.requestRender();
                          },
                        });
                      },
                      f = 0;
                    f < h;
                    f++
                  )
                    p();
                  Object.defineProperty(a, s, { get: () => d });
                },
                d = 0;
              d < u;
              d++
            )
              l(d);
            this.props = a;
          }
          getResolvedProps() {
            return this.resolvedProps;
          }
        }
        class ut {
          constructor() {
            (s(this, "shCache", new Map()),
              s(this, "shConstructors", {}),
              s(this, "attachedShader", null),
              s(this, "effectConstructors", {}),
              s(this, "renderer", void 0),
              this.registerShaderType("DefaultShader", Pe),
              this.registerShaderType("DefaultShaderBatched", Le),
              this.registerShaderType("RoundedRectangle", je),
              this.registerShaderType("DynamicShader", Be),
              this.registerShaderType("SdfShader", Ve),
              this.registerEffectType("border", Ke),
              this.registerEffectType("borderBottom", Qe),
              this.registerEffectType("borderLeft", Ze),
              this.registerEffectType("borderRight", $e),
              this.registerEffectType("borderTop", Je),
              this.registerEffectType("fadeOut", tt),
              this.registerEffectType("linearGradient", qe),
              this.registerEffectType("radialGradient", nt),
              this.registerEffectType("grayscale", Ye),
              this.registerEffectType("glitch", et),
              this.registerEffectType("radius", We),
              this.registerEffectType("radialProgress", rt),
              this.registerEffectType("holePunch", it));
          }
          registerShaderType(e, t) {
            this.shConstructors[e] = t;
          }
          registerEffectType(e, t) {
            this.effectConstructors[e] = t;
          }
          getRegisteredEffects() {
            return this.effectConstructors;
          }
          getRegisteredShaders() {
            return this.shConstructors;
          }
          loadShader(e, t) {
            if (!this.renderer) throw new Error("Renderer is not been defined");
            var n = this.shConstructors[e];
            if (!n) throw new Error(`Shader type "${e}" is not registered`);
            if ("canvas" === this.renderer.mode && n.prototype instanceof De)
              return this._createShaderCtr(e, new at(e), t);
            if ("DynamicShader" === e) return this.loadDynamicShader(t);
            var r = n.resolveDefaults(t),
              i = n.makeCacheKey(r) || n.name;
            if (i && this.shCache.has(i)) return this._createShaderCtr(e, this.shCache.get(i), r);
            var a = new n(this.renderer, t);
            return (i && this.shCache.set(i, a), this._createShaderCtr(e, a, r));
          }
          loadDynamicShader(e) {
            if (!this.renderer) throw new Error("Renderer is not been defined");
            var t = Be.resolveDefaults(e, this.effectConstructors),
              n = Be.makeCacheKey(t, this.effectConstructors);
            if (n && this.shCache.has(n)) return this._createDynShaderCtr(this.shCache.get(n), t);
            var r = new Be(this.renderer, e, this.effectConstructors);
            return (n && this.shCache.set(n, r), this._createDynShaderCtr(r, t));
          }
          _createShaderCtr(e, t, n) {
            return new ot(e, t, n, this.renderer.stage);
          }
          _createDynShaderCtr(e, t) {
            return (e.bindUniformMethods(t), new st(e, t, this));
          }
          useShader(e) {
            this.attachedShader !== e &&
              (this.attachedShader && this.attachedShader.detach(), e.attach(), (this.attachedShader = e));
          }
        }
        var lt = {
          x: (e, t) => {
            e.props.x = t;
          },
          y: (e, t) => {
            e.props.y = t;
          },
          width: (e, t) => {
            e.props.width = t;
          },
          height: (e, t) => {
            e.props.height = t;
          },
          color: (e, t) => {
            e.props.color = t;
          },
          zIndex: (e, t) => {
            e.props.zIndex = t;
          },
          fontFamily: (e, t) => {
            e.props.fontFamily = t;
          },
          fontWeight: (e, t) => {
            e.props.fontWeight = t;
          },
          fontStyle: (e, t) => {
            e.props.fontStyle = t;
          },
          fontStretch: (e, t) => {
            e.props.fontStretch = t;
          },
          fontSize: (e, t) => {
            e.props.fontSize = t;
          },
          text: (e, t) => {
            e.props.text = t;
          },
          textAlign: (e, t) => {
            e.props.textAlign = t;
          },
          contain: (e, t) => {
            e.props.contain = t;
          },
          offsetY: (e, t) => {
            e.props.offsetY = t;
          },
          scrollable: (e, t) => {
            e.props.scrollable = t;
          },
          scrollY: (e, t) => {
            e.props.scrollY = t;
          },
          letterSpacing: (e, t) => {
            e.props.letterSpacing = t;
          },
          lineHeight: (e, t) => {
            e.props.lineHeight = t;
          },
          maxLines: (e, t) => {
            e.props.maxLines = t;
          },
          textBaseline: (e, t) => {
            e.props.textBaseline = t;
          },
          verticalAlign: (e, t) => {
            e.props.verticalAlign = t;
          },
          overflowSuffix: (e, t) => {
            e.props.overflowSuffix = t;
          },
          debug: (e, t) => {
            e.props.debug = t;
          },
        };
        class dt {
          constructor(e) {
            (s(this, "stage", void 0), s(this, "set", void 0), (this.stage = e));
            var n = t(t({}, lt), this.getPropertySetters()),
              r = {};
            (Object.keys(n).forEach(e => {
              Object.defineProperty(r, e, {
                value: (t, r) => {
                  t.props[e] !== r && (n[e](t, r), this.stage.requestRender());
                },
                writable: !1,
                configurable: !1,
              });
            }),
              (this.set = r));
          }
          setStatus(e, t, n) {
            e.status !== t && ((e.status = t), e.emitter.emit(t, n));
          }
          setIsRenderable(e, t) {
            e.isRenderable = t;
          }
          destroyState(e) {
            (this.setStatus(e, "destroyed"), e.emitter.removeAllListeners());
          }
          scheduleUpdateState(e) {
            e.updateScheduled ||
              ((e.updateScheduled = !0),
              queueMicrotask(() => {
                "destroyed" !== e.status && ((e.updateScheduled = !1), this.updateState(e));
              }));
          }
        }
        class ct {
          constructor() {
            s(this, "data", {});
          }
          reset() {
            this.data = {};
          }
          increment(e) {
            (this.data[e] || (this.data[e] = 0), this.data[e]++);
          }
          getData() {
            return t({}, this.data);
          }
        }
        class ht {
          constructor(e, t) {
            (s(this, "stage", void 0),
              s(this, "memUsed", 0),
              s(this, "loadedTextures", []),
              s(this, "criticalThreshold", void 0),
              s(this, "targetThreshold", void 0),
              s(this, "cleanupInterval", void 0),
              s(this, "debugLogging", void 0),
              s(this, "lastCleanupTime", 0),
              s(this, "baselineMemoryAllocation", void 0),
              s(this, "hasWarnedAboveCritical", !1),
              s(this, "criticalCleanupRequested", !1),
              s(this, "doNotExceedCriticalThreshold", void 0),
              s(this, "frameTime", 0),
              (this.stage = e));
            var n = t.criticalThreshold,
              r = t.doNotExceedCriticalThreshold;
            ((this.doNotExceedCriticalThreshold = r || !1), (this.criticalThreshold = Math.round(n)));
            var i = Math.max(0, Math.min(1, t.targetThresholdLevel));
            if (
              ((this.cleanupInterval = t.cleanupInterval),
              (this.debugLogging = t.debugLogging),
              (this.baselineMemoryAllocation = Math.round(t.baselineMemoryAllocation)),
              (this.targetThreshold = Math.max(Math.round(n * i), this.baselineMemoryAllocation)),
              (this.memUsed = Math.round(t.baselineMemoryAllocation)),
              t.debugLogging)
            ) {
              var a = 0;
              setInterval(() => {
                a !== this.memUsed &&
                  ((a = this.memUsed),
                  console.log(
                    `[TextureMemoryManager] Memory used: ${j(this.memUsed)} mb / ${j(this.criticalThreshold)} mb (${((this.memUsed / this.criticalThreshold) * 100).toFixed(1)}%)`,
                  ));
              }, 1e3);
            }
            0 === n && (this.setTextureMemUse = () => {});
          }
          setTextureMemUse(e, t) {
            if (((this.memUsed -= e.memUsed), 0 === t)) {
              var n = this.loadedTextures.indexOf(e);
              return (-1 !== n && (this.loadedTextures[n] = null), void (e.memUsed = 0));
            }
            if (((e.memUsed = t), (this.memUsed += t), -1 === this.loadedTextures.indexOf(e))) {
              var r = this.loadedTextures.indexOf(null);
              -1 !== r ? (this.loadedTextures[r] = e) : this.loadedTextures.push(e);
            }
            this.memUsed > this.criticalThreshold && (this.criticalCleanupRequested = !0);
          }
          checkCleanup() {
            return (
              this.criticalCleanupRequested ||
              (this.memUsed > this.targetThreshold &&
                this.frameTime - this.lastCleanupTime >= this.cleanupInterval)
            );
          }
          checkCriticalCleanup() {
            return this.memUsed > this.criticalThreshold;
          }
          destroyTexture(e) {
            !0 === this.debugLogging &&
              console.log(`[TextureMemoryManager] Destroying texture. State: ${e.state}`);
            var t = this.loadedTextures.indexOf(e);
            (-1 !== t && (this.loadedTextures[t] = null),
              this.stage.txManager.removeTextureFromCache(e),
              e.destroy(),
              (this.memUsed -= e.memUsed),
              (e.memUsed = 0));
          }
          cleanup() {
            var e = this.criticalCleanupRequested;
            ((this.lastCleanupTime = this.frameTime),
              !0 === e &&
                this.stage.queueFrameEvent("criticalCleanup", {
                  memUsed: this.memUsed,
                  criticalThreshold: this.criticalThreshold,
                }),
              !0 === this.debugLogging &&
                console.log(`[TextureMemoryManager] Cleaning up textures. Critical: ${e}.`));
            for (
              var t = e ? this.criticalThreshold : this.targetThreshold, n = this.memUsed, r = 0;
              r < this.loadedTextures.length && !(n < t);
              r++
            ) {
              var i = this.loadedTextures[r];
              if (
                i &&
                (i.type === g.image || i.type === g.noise || i.type === g.renderToTexture) &&
                !0 === i.canBeCleanedUp()
              ) {
                var a = i.memUsed;
                (this.destroyTexture(i), (n -= a));
              }
            }
            this.memUsed >= this.criticalThreshold
              ? (this.stage.queueFrameEvent("criticalCleanupFailed", {
                  memUsed: this.memUsed,
                  criticalThreshold: this.criticalThreshold,
                }),
                this.hasWarnedAboveCritical ||
                  !0 !== this.debugLogging ||
                  (console.warn(
                    `[TextureMemoryManager] Memory usage above critical threshold after cleanup: ${this.memUsed}`,
                  ),
                  (this.hasWarnedAboveCritical = !0)))
              : ((this.criticalCleanupRequested = !1), (this.hasWarnedAboveCritical = !1));
          }
          getMemoryInfo() {
            var e,
              t = 0,
              n = this.baselineMemoryAllocation,
              r = u(this.loadedTextures);
            try {
              for (r.s(); !(e = r.n()).done; ) {
                var i = e.value;
                i && i.renderable && ((t += 1), (n += i.memUsed));
              }
            } catch (o) {
              r.e(o);
            } finally {
              r.f();
            }
            var a = this.loadedTextures.filter(e => null !== e).length;
            return {
              criticalThreshold: this.criticalThreshold,
              targetThreshold: this.targetThreshold,
              renderableMemUsed: n,
              memUsed: this.memUsed,
              renderableTexturesLoaded: t,
              loadedTextures: a,
              baselineMemoryAllocation: this.baselineMemoryAllocation,
            };
          }
        }
        class pt {
          constructor(e, t) {
            (s(this, "textureSource", void 0),
              s(this, "memManager", void 0),
              s(this, "state", "freed"),
              (this.memManager = e),
              (this.textureSource = t));
          }
          setTextureMemUse(e) {
            this.memManager.setTextureMemUse(this.textureSource, e);
          }
          get renderable() {
            return this.textureSource.renderable;
          }
        }
        class ft {
          constructor(e) {
            (s(this, "options", void 0),
              s(this, "mode", void 0),
              s(this, "stage", void 0),
              s(this, "txManager", void 0),
              s(this, "txMemManager", void 0),
              s(this, "shManager", void 0),
              s(this, "rttNodes", []),
              (this.options = e),
              (this.stage = e.stage),
              (this.txManager = e.txManager),
              (this.txMemManager = e.txMemManager),
              (this.shManager = e.shManager));
          }
        }
        class gt extends z {
          constructor(e, t, n) {
            (super(e, t),
              s(this, "textRenderer", void 0),
              s(this, "trState", void 0),
              s(this, "_textRendererOverride", null),
              s(this, "onTextLoaded", () => {
                var e = this.contain,
                  t = this.trState.props.width,
                  n = this.trState.props.height,
                  r = this.trState.textW || 0,
                  i = this.trState.textH || 0;
                ("both" === e
                  ? ((this.props.width = t), (this.props.height = n))
                  : "width" === e
                    ? ((this.props.width = t), (this.props.height = i))
                    : "none" === e && ((this.props.width = r), (this.props.height = i)),
                  this.updateLocalTransform(),
                  this.stage.requestRender(),
                  this.emit("loaded", {
                    type: "text",
                    dimensions: { width: this.trState.textW || 0, height: this.trState.textH || 0 },
                  }));
              }),
              s(this, "onTextFailed", (e, t) => {
                this.emit("failed", { type: "text", error: t });
              }),
              (this._textRendererOverride = t.textRendererOverride),
              (this.textRenderer = n));
            var r = this.createState({
              x: 0,
              y: 0,
              width: t.width,
              height: t.height,
              textAlign: t.textAlign,
              color: t.color,
              zIndex: t.zIndex,
              contain: t.contain,
              scrollable: t.scrollable,
              scrollY: t.scrollY,
              offsetY: t.offsetY,
              letterSpacing: t.letterSpacing,
              debug: t.debug,
              fontFamily: t.fontFamily,
              fontSize: t.fontSize,
              fontStretch: t.fontStretch,
              fontStyle: t.fontStyle,
              fontWeight: t.fontWeight,
              text: t.text,
              lineHeight: t.lineHeight,
              maxLines: t.maxLines,
              textBaseline: t.textBaseline,
              verticalAlign: t.verticalAlign,
              overflowSuffix: t.overflowSuffix,
            });
            this.trState = r;
          }
          get width() {
            return this.props.width;
          }
          set width(e) {
            ((this.props.width = e),
              this.textRenderer.set.width(this.trState, e),
              "none" === this.contain && this.setUpdateType(H.Local));
          }
          get height() {
            return this.props.height;
          }
          set height(e) {
            ((this.props.height = e),
              this.textRenderer.set.height(this.trState, e),
              "both" !== this.contain && this.setUpdateType(H.Local));
          }
          get color() {
            return this.trState.props.color;
          }
          set color(e) {
            this.textRenderer.set.color(this.trState, e);
          }
          get text() {
            return this.trState.props.text;
          }
          set text(e) {
            this.textRenderer.set.text(this.trState, e);
          }
          get textRendererOverride() {
            return this._textRendererOverride;
          }
          set textRendererOverride(e) {
            ((this._textRendererOverride = e), this.textRenderer.destroyState(this.trState));
            var t = this.stage.resolveTextRenderer(this.trState.props, this._textRendererOverride);
            t
              ? ((this.textRenderer = t), (this.trState = this.createState(this.trState.props)))
              : console.warn("Text Renderer not found for font", this.trState.props.fontFamily);
          }
          get fontSize() {
            return this.trState.props.fontSize;
          }
          set fontSize(e) {
            this.textRenderer.set.fontSize(this.trState, e);
          }
          get fontFamily() {
            return this.trState.props.fontFamily;
          }
          set fontFamily(e) {
            this.textRenderer.set.fontFamily(this.trState, e);
          }
          get fontStretch() {
            return this.trState.props.fontStretch;
          }
          set fontStretch(e) {
            this.textRenderer.set.fontStretch(this.trState, e);
          }
          get fontStyle() {
            return this.trState.props.fontStyle;
          }
          set fontStyle(e) {
            this.textRenderer.set.fontStyle(this.trState, e);
          }
          get fontWeight() {
            return this.trState.props.fontWeight;
          }
          set fontWeight(e) {
            this.textRenderer.set.fontWeight(this.trState, e);
          }
          get textAlign() {
            return this.trState.props.textAlign;
          }
          set textAlign(e) {
            this.textRenderer.set.textAlign(this.trState, e);
          }
          get contain() {
            return this.trState.props.contain;
          }
          set contain(e) {
            this.textRenderer.set.contain(this.trState, e);
          }
          get scrollable() {
            return this.trState.props.scrollable;
          }
          set scrollable(e) {
            this.textRenderer.set.scrollable(this.trState, e);
          }
          get scrollY() {
            return this.trState.props.scrollY;
          }
          set scrollY(e) {
            this.textRenderer.set.scrollY(this.trState, e);
          }
          get offsetY() {
            return this.trState.props.offsetY;
          }
          set offsetY(e) {
            this.textRenderer.set.offsetY(this.trState, e);
          }
          get letterSpacing() {
            return this.trState.props.letterSpacing;
          }
          set letterSpacing(e) {
            this.textRenderer.set.letterSpacing(this.trState, e);
          }
          get lineHeight() {
            return this.trState.props.lineHeight;
          }
          set lineHeight(e) {
            this.textRenderer.set.lineHeight(this.trState, e);
          }
          get maxLines() {
            return this.trState.props.maxLines;
          }
          set maxLines(e) {
            this.textRenderer.set.maxLines(this.trState, e);
          }
          get textBaseline() {
            return this.trState.props.textBaseline;
          }
          set textBaseline(e) {
            this.textRenderer.set.textBaseline(this.trState, e);
          }
          get verticalAlign() {
            return this.trState.props.verticalAlign;
          }
          set verticalAlign(e) {
            this.textRenderer.set.verticalAlign(this.trState, e);
          }
          get overflowSuffix() {
            return this.trState.props.overflowSuffix;
          }
          set overflowSuffix(e) {
            this.textRenderer.set.overflowSuffix(this.trState, e);
          }
          get debug() {
            return this.trState.props.debug;
          }
          set debug(e) {
            this.textRenderer.set.debug(this.trState, e);
          }
          update(e, t) {
            (super.update(e, t),
              this.globalTransform,
              this.textRenderer.set.x(this.trState, this.globalTransform.tx),
              this.textRenderer.set.y(this.trState, this.globalTransform.ty));
          }
          checkBasicRenderability() {
            return (
              0 !== this.worldAlpha &&
              !0 !== this.isOutOfBounds() &&
              !(!this.trState || "" === this.trState.props.text)
            );
          }
          setRenderable(e) {
            (super.setRenderable(e), this.textRenderer.setIsRenderable(this.trState, e));
          }
          renderQuads(e) {
            var t;
            if ((this.globalTransform, this.textRenderer.renderQuads)) {
              if (this.parentHasRenderTexture) {
                if (!e.renderToTextureActive) return;
                if (this.parentRenderTexture !== e.activeRttNode) return;
              }
              (this.parentHasRenderTexture &&
                null !== (t = this.props.parent) &&
                void 0 !== t &&
                t.rtt &&
                ((this.globalTransform = R.identity()),
                this.localTransform && this.globalTransform.multiply(this.localTransform)),
                this.globalTransform,
                this.textRenderer.renderQuads(
                  this.trState,
                  this.globalTransform,
                  this.clippingRect,
                  this.worldAlpha,
                  this.parentHasRenderTexture,
                  this.framebufferDimensions,
                ));
            } else super.renderQuads(e);
          }
          destroy() {
            (super.destroy(), this.textRenderer.destroyState(this.trState));
          }
          createState(e) {
            var t = this.textRenderer.createState(e, this);
            return (
              t.emitter.on("loaded", this.onTextLoaded),
              t.emitter.on("failed", this.onTextFailed),
              this.textRenderer.scheduleUpdateState(t),
              t
            );
          }
        }
        class mt {
          constructor(e) {
            (s(this, "options", void 0),
              s(this, "animationManager", void 0),
              s(this, "txManager", void 0),
              s(this, "txMemManager", void 0),
              s(this, "fontManager", void 0),
              s(this, "textRenderers", void 0),
              s(this, "shManager", void 0),
              s(this, "renderer", void 0),
              s(this, "root", void 0),
              s(this, "interactiveNodes", new Set()),
              s(this, "boundsMargin", void 0),
              s(this, "defShaderCtr", void 0),
              s(this, "strictBound", void 0),
              s(this, "preloadBound", void 0),
              s(this, "strictBounds", void 0),
              s(this, "defaultTexture", null),
              s(this, "targetFrameTime", 0),
              s(this, "eventBus", void 0),
              s(this, "deltaTime", 0),
              s(this, "lastFrameTime", 0),
              s(this, "currentFrameTime", 0),
              s(this, "fpsNumFrames", 0),
              s(this, "fpsElapsedTime", 0),
              s(this, "numQuadsRendered", 0),
              s(this, "renderRequested", !1),
              s(this, "frameEventQueue", []),
              s(this, "fontResolveMap", {}),
              s(this, "contextSpy", null),
              (this.options = e));
            var t = e.canvas,
              n = e.clearColor,
              r = e.appWidth,
              i = e.appHeight,
              a = e.boundsMargin,
              o = e.enableContextSpy,
              u = e.forceWebGL2,
              l = e.numImageWorkers,
              d = e.textureMemory,
              c = e.renderEngine,
              p = e.fontEngines,
              f = e.createImageBitmapSupport,
              g = e.maxRetryCount;
            ((this.eventBus = e.eventBus),
              (this.targetFrameTime = e.targetFPS > 0 ? 1e3 / e.targetFPS : 0),
              (this.txManager = new ke(this, {
                numImageWorkers: l,
                createImageBitmapSupport: f,
                maxRetryCount: g,
              })),
              this.txManager.on("initialized", () => {
                this.requestRender();
              }),
              (this.txMemManager = new ht(this, d)),
              (this.shManager = new ut()),
              (this.animationManager = new W()),
              (this.contextSpy = o ? new ct() : null),
              (this.strictBounds = e.strictBounds));
            var m = [0, 0, 0, 0];
            (a && (m = Array.isArray(a) ? a : [a, a, a, a]),
              (this.boundsMargin = m),
              (this.strictBound = T(0, 0, r, i)),
              (this.preloadBound = I(this.strictBound, m)));
            var v = {
              stage: this,
              canvas: t,
              pixelRatio: e.devicePhysicalPixelRatio * e.deviceLogicalPixelRatio,
              clearColor: null != n ? n : 4278190080,
              bufferMemory: 2e6,
              txManager: this.txManager,
              txMemManager: this.txMemManager,
              shManager: this.shManager,
              contextSpy: this.contextSpy,
              forceWebGL2: u,
            };
            this.renderer = new c(v);
            var y = this.renderer.mode || "webgl";
            (this.createDefaultTexture(),
              (this.defShaderCtr = this.renderer.getDefShaderCtr()),
              (h = "webgl" === y),
              (this.txManager.renderer = this.renderer),
              (this.textRenderers = {}),
              p.forEach(e => {
                var t = new e(this),
                  n = t.type;
                "sdf" !== n || "canvas" !== y
                  ? t instanceof dt &&
                    ("canvas" === n
                      ? (this.textRenderers.canvas = t)
                      : "sdf" === n && (this.textRenderers.sdf = t))
                  : console.warn("SdfTextRenderer is not compatible with Canvas renderer. Skipping...");
              }),
              0 === Object.keys(this.textRenderers).length &&
                console.warn("No text renderers available. Your text will not render."),
              (this.fontManager = new Me(this.textRenderers)));
            var b,
              x,
              w,
              S,
              A = new z(this, {
                x: 0,
                y: 0,
                width: r,
                height: i,
                alpha: 1,
                autosize: !1,
                boundsMargin: null,
                clipping: !1,
                color: 0,
                colorTop: 0,
                colorBottom: 0,
                colorLeft: 0,
                colorRight: 0,
                colorTl: 0,
                colorTr: 0,
                colorBl: 0,
                colorBr: 0,
                zIndex: 0,
                zIndexLocked: 0,
                scaleX: 1,
                scaleY: 1,
                mountX: 0,
                mountY: 0,
                mount: 0,
                pivot: 0.5,
                pivotX: 0.5,
                pivotY: 0.5,
                rotation: 0,
                parent: null,
                texture: null,
                textureOptions: {},
                shader: this.defShaderCtr,
                rtt: !1,
                src: null,
                scale: 1,
                preventCleanup: !1,
                strictBounds: this.strictBounds,
              });
            ((this.root = A),
              (b = this),
              (x = !1),
              (w = 0),
              (S = (e = 0) => {
                var t = b.targetFrameTime;
                if (t > 0 && e - w < t) setTimeout(() => requestAnimationFrame(S), t - (e - w));
                else {
                  if (((w = e), b.updateFrameTime(), b.updateAnimations(), !b.hasSceneUpdates()))
                    return (
                      b.calculateFps(),
                      t > 0
                        ? setTimeout(() => requestAnimationFrame(S), Math.max(t, 16.666666666666668))
                        : setTimeout(() => requestAnimationFrame(S), 16.666666666666668),
                      x || (b.eventBus.emit("idle"), (x = !0)),
                      !0 === b.txMemManager.checkCleanup() && b.txMemManager.cleanup(),
                      void b.flushFrameEvents()
                    );
                  if (((x = !1), b.drawFrame(), b.flushFrameEvents(), t > 0)) {
                    var n = Math.max(0, t - (performance.now() - e));
                    setTimeout(() => requestAnimationFrame(S), n);
                  } else requestAnimationFrame(S);
                }
              }),
              requestAnimationFrame(S));
          }
          setClearColor(e) {
            (this.renderer.updateClearColor(e), (this.renderRequested = !0));
          }
          updateTargetFrameTime() {
            this.targetFrameTime = this.options.targetFPS > 0 ? 1e3 / this.options.targetFPS : 0;
          }
          updateFrameTime() {
            var e = X();
            ((this.lastFrameTime = this.currentFrameTime),
              (this.currentFrameTime = e),
              (this.deltaTime = this.lastFrameTime ? e - this.lastFrameTime : 100 / 6),
              (this.txManager.frameTime = e),
              (this.txMemManager.frameTime = e),
              this.eventBus.emit("frameTick", { time: this.currentFrameTime, delta: this.deltaTime }));
          }
          createDefaultTexture() {
            ((this.defaultTexture = this.txManager.createTexture("ColorTexture", { color: 4294967295 })),
              this.defaultTexture,
              this.txManager.loadTexture(this.defaultTexture, !0),
              this.defaultTexture.setRenderableOwner("stage", !0),
              this.defaultTexture.once("loaded", () => {
                this.requestRender();
              }));
          }
          updateAnimations() {
            var e = this.animationManager;
            this.root && e.update(this.deltaTime);
          }
          hasSceneUpdates() {
            return !!this.root.updateType || this.renderRequested || this.txManager.hasUpdates();
          }
          drawFrame() {
            var e = this.renderer,
              t = this.renderRequested;
            (0 !== this.root.updateType && this.root.update(this.deltaTime, this.root.clippingRect),
              this.txManager.processSome(this.options.textureProcessingTimeLimit).catch(e => {
                console.error("Error processing textures:", e);
              }),
              e.reset(),
              e.rttNodes.length > 0 && e.renderRTTNodes(),
              this.addQuads(this.root),
              null == e || e.render(),
              this.calculateFps(),
              this.calculateQuads(),
              t && (this.renderRequested = !1),
              !0 === this.txMemManager.criticalCleanupRequested && this.txMemManager.cleanup());
          }
          queueFrameEvent(e, t) {
            this.frameEventQueue.push([e, t]);
          }
          flushFrameEvents() {
            var e,
              t = u(this.frameEventQueue);
            try {
              for (t.s(); !(e = t.n()).done; ) {
                var r = n(e.value, 2),
                  i = r[0],
                  a = r[1];
                this.eventBus.emit(i, a);
              }
            } catch (o) {
              t.e(o);
            } finally {
              t.f();
            }
            this.frameEventQueue = [];
          }
          calculateFps() {
            var e = this.options.fpsUpdateInterval;
            if (
              e &&
              (this.fpsNumFrames++, (this.fpsElapsedTime += this.deltaTime), this.fpsElapsedTime >= e)
            ) {
              var t,
                n,
                r,
                i = Math.round((1e3 * this.fpsNumFrames) / this.fpsElapsedTime);
              ((this.fpsNumFrames = 0),
                (this.fpsElapsedTime = 0),
                this.queueFrameEvent("fpsUpdate", {
                  fps: i,
                  contextSpyData:
                    null !== (t = null === (n = this.contextSpy) || void 0 === n ? void 0 : n.getData()) &&
                    void 0 !== t
                      ? t
                      : null,
                }),
                null === (r = this.contextSpy) || void 0 === r || r.reset());
            }
          }
          calculateQuads() {
            var e = this.renderer.getQuadCount();
            e &&
              e !== this.numQuadsRendered &&
              ((this.numQuadsRendered = e), this.queueFrameEvent("quadsUpdate", { quads: e }));
          }
          addQuads(e) {
            (this.renderer, !0 === e.isRenderable && e.renderQuads(this.renderer));
            for (var t = 0; t < e.children.length; t++) {
              var n = e.children[t];
              void 0 !== n &&
                (0 === n.worldAlpha ||
                  (!0 === n.strictBounds && n.renderState === P.OutOfBounds) ||
                  this.addQuads(n));
            }
          }
          requestRender() {
            this.renderRequested = !0;
          }
          findNodesAtPoint(e) {
            var t,
              n = e.x / this.options.deviceLogicalPixelRatio,
              r = e.y / this.options.deviceLogicalPixelRatio,
              i = [],
              a = u(this.interactiveNodes);
            try {
              for (a.s(); !(t = a.n()).done; ) {
                var o = t.value;
                !1 !== o.isRenderable && !0 === k(n, r, o.renderBound) && i.push(o);
              }
            } catch (s) {
              a.e(s);
            } finally {
              a.f();
            }
            return i;
          }
          getNodeFromPosition(e) {
            var t = this.findNodesAtPoint(e);
            if (0 === t.length) return null;
            for (var n = t[0], r = 0; r < t.length; r++) t[r].zIndex > n.zIndex && (n = t[r]);
            return n || null;
          }
          resolveTextRenderer(e, t = null) {
            var r = `${e.fontFamily}${e.fontStyle}${e.fontWeight}${e.fontStretch}${t || ""}`;
            if (void 0 !== this.fontResolveMap[r]) return this.fontResolveMap[r];
            var i = t,
              a = !1;
            if (i) {
              var o = this.textRenderers[i];
              o
                ? o.canRenderFont(e) ||
                  (console.warn(`Cannot use override text renderer '${i}' for font`, e), (i = null), (a = !0))
                : (console.warn(`Text renderer override '${i}' not found.`), (i = null), (a = !0));
            }
            if (!i) {
              for (var s = 0, u = Object.entries(this.textRenderers); s < u.length; s++) {
                var l = n(u[s], 2),
                  d = l[0];
                if (l[1].canRenderFont(e)) {
                  i = d;
                  break;
                }
              }
              i || void 0 === this.textRenderers.canvas || (i = "canvas");
            }
            if ((a && console.warn(`Falling back to text renderer ${String(i)}`), !i)) return null;
            var c = this.textRenderers[i];
            return ((this.fontResolveMap[r] = c), c);
          }
          createShaderCtr(e, t) {
            return this.shManager.loadShader(e, t);
          }
          createNode(e) {
            var t = this.resolveNodeDefaults(e);
            return new z(this, t);
          }
          createTextNode(e) {
            var n,
              r,
              i,
              a,
              o,
              s,
              u,
              l,
              d,
              c,
              h,
              p,
              f,
              g,
              m,
              v,
              y,
              b,
              x = null !== (n = e.fontSize) && void 0 !== n ? n : 16,
              T = t(
                t({}, this.resolveNodeDefaults(e)),
                {},
                {
                  text: null !== (r = e.text) && void 0 !== r ? r : "",
                  textRendererOverride: null !== (i = e.textRendererOverride) && void 0 !== i ? i : null,
                  fontSize: x,
                  fontFamily: null !== (a = e.fontFamily) && void 0 !== a ? a : "sans-serif",
                  fontStyle: null !== (o = e.fontStyle) && void 0 !== o ? o : "normal",
                  fontWeight: null !== (s = e.fontWeight) && void 0 !== s ? s : "normal",
                  fontStretch: null !== (u = e.fontStretch) && void 0 !== u ? u : "normal",
                  textAlign: null !== (l = e.textAlign) && void 0 !== l ? l : "left",
                  contain: null !== (d = e.contain) && void 0 !== d ? d : "none",
                  scrollable: null !== (c = e.scrollable) && void 0 !== c && c,
                  scrollY: null !== (h = e.scrollY) && void 0 !== h ? h : 0,
                  offsetY: null !== (p = e.offsetY) && void 0 !== p ? p : 0,
                  letterSpacing: null !== (f = e.letterSpacing) && void 0 !== f ? f : 0,
                  lineHeight: e.lineHeight,
                  maxLines: null !== (g = e.maxLines) && void 0 !== g ? g : 0,
                  textBaseline: null !== (m = e.textBaseline) && void 0 !== m ? m : "alphabetic",
                  verticalAlign: null !== (v = e.verticalAlign) && void 0 !== v ? v : "middle",
                  overflowSuffix: null !== (y = e.overflowSuffix) && void 0 !== y ? y : "...",
                  debug: null !== (b = e.debug) && void 0 !== b ? b : {},
                  shaderProps: null,
                },
              ),
              w = this.resolveTextRenderer(T, e.textRendererOverride);
            if (!w) throw new Error(`No compatible text renderer found for ${T.fontFamily}`);
            return new gt(this, T, w);
          }
          setBoundsMargin(e) {
            ((this.boundsMargin = Array.isArray(e) ? e : [e, e, e, e]),
              this.root.setUpdateType(H.RenderBounds));
          }
          resolveNodeDefaults(e) {
            var t,
              n,
              r,
              i,
              a,
              o,
              s,
              u,
              l,
              d,
              c,
              h,
              p,
              f,
              g,
              m,
              v,
              y,
              b,
              x,
              T,
              w,
              S,
              A,
              E,
              k,
              I,
              C,
              M,
              R,
              _,
              D,
              P,
              L,
              N,
              O,
              U,
              B,
              j,
              F,
              V,
              H,
              G,
              z,
              X,
              W,
              K,
              q,
              Y,
              $,
              J,
              Q,
              Z,
              ee = null !== (t = e.color) && void 0 !== t ? t : 4294967295,
              te =
                null !==
                  (n =
                    null !== (r = null !== (i = e.colorTl) && void 0 !== i ? i : e.colorTop) && void 0 !== r
                      ? r
                      : e.colorLeft) && void 0 !== n
                  ? n
                  : ee,
              ne =
                null !==
                  (a =
                    null !== (o = null !== (s = e.colorTr) && void 0 !== s ? s : e.colorTop) && void 0 !== o
                      ? o
                      : e.colorRight) && void 0 !== a
                  ? a
                  : ee,
              re =
                null !==
                  (u =
                    null !== (l = null !== (d = e.colorBl) && void 0 !== d ? d : e.colorBottom) &&
                    void 0 !== l
                      ? l
                      : e.colorLeft) && void 0 !== u
                  ? u
                  : ee,
              ie =
                null !==
                  (c =
                    null !== (h = null !== (p = e.colorBr) && void 0 !== p ? p : e.colorBottom) &&
                    void 0 !== h
                      ? h
                      : e.colorRight) && void 0 !== c
                  ? c
                  : ee,
              ae = {};
            !0 === this.options.inspector &&
              (ae = (function (e) {
                for (
                  var t = { boolean: !0, string: !0, number: !0, undefined: !0 }, n = Object.keys(e), r = 0;
                  r < n.length;
                  r++
                ) {
                  var i = n[r];
                  if (i) {
                    var a = e[i],
                      o = typeof a;
                    ("string" === o &&
                      a.length > 2048 &&
                      (console.warn(
                        `Custom Data value for ${i} is too long, it will be truncated to 2048 characters`,
                      ),
                      (e[i] = a.substring(0, 2048))),
                      t[o] ||
                        (console.warn(
                          `Custom Data value for ${i} is not a boolean, string, or number, it will be ignored`,
                        ),
                        delete e[i]));
                  }
                }
                return e;
              })(null !== (Z = e.data) && void 0 !== Z ? Z : {}));
            return {
              x: null !== (f = e.x) && void 0 !== f ? f : 0,
              y: null !== (g = e.y) && void 0 !== g ? g : 0,
              width: null !== (m = e.width) && void 0 !== m ? m : 0,
              height: null !== (v = e.height) && void 0 !== v ? v : 0,
              alpha: null !== (y = e.alpha) && void 0 !== y ? y : 1,
              autosize: null !== (b = e.autosize) && void 0 !== b && b,
              boundsMargin: null !== (x = e.boundsMargin) && void 0 !== x ? x : null,
              clipping: null !== (T = e.clipping) && void 0 !== T && T,
              color: ee,
              colorTop: null !== (w = e.colorTop) && void 0 !== w ? w : ee,
              colorBottom: null !== (S = e.colorBottom) && void 0 !== S ? S : ee,
              colorLeft: null !== (A = e.colorLeft) && void 0 !== A ? A : ee,
              colorRight: null !== (E = e.colorRight) && void 0 !== E ? E : ee,
              colorBl: re,
              colorBr: ie,
              colorTl: te,
              colorTr: ne,
              zIndex: null !== (k = e.zIndex) && void 0 !== k ? k : 0,
              zIndexLocked: null !== (I = e.zIndexLocked) && void 0 !== I ? I : 0,
              parent: null !== (C = e.parent) && void 0 !== C ? C : null,
              texture: null !== (M = e.texture) && void 0 !== M ? M : null,
              textureOptions: null !== (R = e.textureOptions) && void 0 !== R ? R : {},
              shader: null !== (_ = e.shader) && void 0 !== _ ? _ : this.defShaderCtr,
              src: null !== (D = e.src) && void 0 !== D ? D : null,
              srcHeight: e.srcHeight,
              srcWidth: e.srcWidth,
              srcX: e.srcX,
              srcY: e.srcY,
              scale: null !== (P = e.scale) && void 0 !== P ? P : null,
              scaleX:
                null !== (L = null !== (N = e.scaleX) && void 0 !== N ? N : e.scale) && void 0 !== L ? L : 1,
              scaleY:
                null !== (O = null !== (U = e.scaleY) && void 0 !== U ? U : e.scale) && void 0 !== O ? O : 1,
              mount: null !== (B = e.mount) && void 0 !== B ? B : 0,
              mountX:
                null !== (j = null !== (F = e.mountX) && void 0 !== F ? F : e.mount) && void 0 !== j ? j : 0,
              mountY:
                null !== (V = null !== (H = e.mountY) && void 0 !== H ? H : e.mount) && void 0 !== V ? V : 0,
              pivot: null !== (G = e.pivot) && void 0 !== G ? G : 0.5,
              pivotX:
                null !== (z = null !== (X = e.pivotX) && void 0 !== X ? X : e.pivot) && void 0 !== z
                  ? z
                  : 0.5,
              pivotY:
                null !== (W = null !== (K = e.pivotY) && void 0 !== K ? K : e.pivot) && void 0 !== W
                  ? W
                  : 0.5,
              rotation: null !== (q = e.rotation) && void 0 !== q ? q : 0,
              rtt: null !== (Y = e.rtt) && void 0 !== Y && Y,
              data: ae,
              preventCleanup: null !== ($ = e.preventCleanup) && void 0 !== $ && $,
              imageType: e.imageType,
              interactive: null !== (J = e.interactive) && void 0 !== J && J,
              strictBounds: null !== (Q = e.strictBounds) && void 0 !== Q ? Q : this.strictBounds,
            };
          }
          cleanup() {
            this.txMemManager.cleanup();
          }
        }
        class vt extends v {
          constructor(e, t) {
            var n, r, i, a, o, u, l, d, c, h, p, f, g;
            (super(),
              s(this, "root", void 0),
              s(this, "canvas", void 0),
              s(this, "settings", void 0),
              s(this, "stage", void 0),
              s(this, "inspector", null));
            var m = {
                criticalThreshold:
                  (null === (n = e.textureMemory) || void 0 === n ? void 0 : n.criticalThreshold) || 124e6,
                targetThresholdLevel:
                  (null === (r = e.textureMemory) || void 0 === r ? void 0 : r.targetThresholdLevel) || 0.5,
                cleanupInterval:
                  (null === (i = e.textureMemory) || void 0 === i ? void 0 : i.cleanupInterval) || 5e3,
                debugLogging:
                  (null === (a = e.textureMemory) || void 0 === a ? void 0 : a.debugLogging) || !1,
                baselineMemoryAllocation:
                  (null === (o = e.textureMemory) || void 0 === o ? void 0 : o.baselineMemoryAllocation) ||
                  26e6,
                doNotExceedCriticalThreshold:
                  (null === (u = e.textureMemory) || void 0 === u
                    ? void 0
                    : u.doNotExceedCriticalThreshold) || !1,
              },
              v = {
                appWidth: e.appWidth || 1920,
                appHeight: e.appHeight || 1080,
                textureMemory: m,
                boundsMargin: e.boundsMargin || 0,
                deviceLogicalPixelRatio: e.deviceLogicalPixelRatio || 1,
                devicePhysicalPixelRatio: e.devicePhysicalPixelRatio || window.devicePixelRatio,
                clearColor: null !== (l = e.clearColor) && void 0 !== l ? l : 0,
                fpsUpdateInterval: e.fpsUpdateInterval || 0,
                targetFPS: e.targetFPS || 0,
                numImageWorkers: void 0 !== e.numImageWorkers ? e.numImageWorkers : 2,
                enableContextSpy: null !== (d = e.enableContextSpy) && void 0 !== d && d,
                forceWebGL2: null !== (c = e.forceWebGL2) && void 0 !== c && c,
                inspector: null !== (h = e.inspector) && void 0 !== h && h,
                renderEngine: e.renderEngine,
                quadBufferSize: null !== (p = e.quadBufferSize) && void 0 !== p ? p : 4194304,
                fontEngines: e.fontEngines,
                strictBounds: null === (f = e.strictBounds) || void 0 === f || f,
                textureProcessingTimeLimit: e.textureProcessingTimeLimit || 42,
                canvas: e.canvas || document.createElement("canvas"),
                createImageBitmapSupport: e.createImageBitmapSupport || "full",
                maxRetryCount: null !== (g = e.maxRetryCount) && void 0 !== g ? g : 5,
              };
            this.settings = v;
            var y,
              b = v.deviceLogicalPixelRatio,
              x = v.devicePhysicalPixelRatio,
              T = v.canvas,
              w = v.appWidth * b,
              S = v.appHeight * b;
            if (
              ((this.canvas = T),
              (T.width = w * x),
              (T.height = S * x),
              (T.style.width = `${w}px`),
              (T.style.height = `${S}px`),
              (this.stage = new mt({
                appWidth: this.settings.appWidth,
                appHeight: this.settings.appHeight,
                boundsMargin: this.settings.boundsMargin,
                clearColor: this.settings.clearColor,
                canvas: this.canvas,
                deviceLogicalPixelRatio: this.settings.deviceLogicalPixelRatio,
                devicePhysicalPixelRatio: this.settings.devicePhysicalPixelRatio,
                enableContextSpy: this.settings.enableContextSpy,
                forceWebGL2: this.settings.forceWebGL2,
                fpsUpdateInterval: this.settings.fpsUpdateInterval,
                targetFPS: this.settings.targetFPS,
                numImageWorkers: this.settings.numImageWorkers,
                renderEngine: this.settings.renderEngine,
                textureMemory: m,
                eventBus: this,
                quadBufferSize: this.settings.quadBufferSize,
                fontEngines: this.settings.fontEngines,
                inspector: null !== this.settings.inspector,
                strictBounds: this.settings.strictBounds,
                textureProcessingTimeLimit: this.settings.textureProcessingTimeLimit,
                createImageBitmapSupport: this.settings.createImageBitmapSupport,
                maxRetryCount: this.settings.maxRetryCount,
              })),
              (this.root = this.stage.root),
              !(y = "string" == typeof t ? document.getElementById(t) : t))
            )
              throw new Error("Could not find target element");
            y.appendChild(T);
          }
          createNode(e) {
            var t = this.stage.createNode(e);
            return this.inspector ? this.inspector.createNode(t) : t;
          }
          createTextNode(e) {
            var t = this.stage.createTextNode(e);
            return this.inspector ? this.inspector.createTextNode(t) : t;
          }
          destroyNode(e) {
            return (this.inspector && this.inspector.destroyNode(e.id), e.destroy());
          }
          createTexture(e, t) {
            return this.stage.txManager.createTexture(e, t);
          }
          createShader(e, t) {
            return this.stage.shManager.loadShader(e, t);
          }
          createDynamicShader(e) {
            return this.stage.shManager.loadDynamicShader({ effects: e });
          }
          createEffect(e, t, n) {
            return { name: n, type: e, props: t };
          }
          getNodeById(e) {
            var t,
              n = null === (t = this.stage) || void 0 === t ? void 0 : t.root;
            if (!n) return null;
            var r = t => {
              if (t.id === e) return t;
              var n,
                i = u(t.children);
              try {
                for (i.s(); !(n = i.n()).done; ) {
                  var a = n.value,
                    o = r(a);
                  if (o) return o;
                }
              } catch (s) {
                i.e(s);
              } finally {
                i.f();
              }
              return null;
            };
            return r(n);
          }
          toggleFreeze() {
            throw new Error("Not implemented");
          }
          advanceFrame() {
            throw new Error("Not implemented");
          }
          getBufferInfo() {
            return this.stage.renderer.getBufferInfo();
          }
          rerender() {
            this.stage.requestRender();
          }
          cleanup() {
            this.stage.cleanup();
          }
          setClearColor(e) {
            this.stage.setClearColor(e);
          }
          get targetFPS() {
            return this.stage.options.targetFPS;
          }
          set targetFPS(e) {
            ((this.stage.options.targetFPS = e > 0 ? e : 0), this.stage.updateTargetFrameTime());
          }
        }
        class yt extends v {
          constructor(e) {
            (super(),
              s(this, "fontFamily", void 0),
              s(this, "descriptors", void 0),
              s(this, "loaded", !1),
              s(this, "metrics", null));
            var n = e.fontFamily,
              r = e.descriptors,
              i = e.metrics;
            (i &&
              (this.metrics = {
                ascender: i.ascender / i.unitsPerEm,
                descender: i.descender / i.unitsPerEm,
                lineGap: i.lineGap / i.unitsPerEm,
              }),
              (this.fontFamily = n),
              (this.descriptors = t({ style: "normal", weight: "normal", stretch: "normal" }, r)));
          }
          static convertToCssFontFaceDescriptors(e) {
            return {
              style: e.style,
              weight: "number" == typeof e.weight ? `${e.weight}` : e.weight,
              stretch: e.stretch,
              unicodeRange: e.unicodeRange,
              featureSettings: e.featureSettings,
              display: e.display,
            };
          }
        }
        class bt extends yt {
          constructor(e) {
            (super(e), s(this, "fontFace", void 0), s(this, "fontUrl", void 0));
            var t = e.fontFamily,
              n = e.fontUrl,
              r = n.replace(/\(|\)/g, ""),
              i = this.descriptors,
              a = {
                style: i.style,
                weight: "number" == typeof i.weight ? `${i.weight}` : i.weight,
                stretch: i.stretch,
                unicodeRange: i.unicodeRange,
                featureSettings: i.featureSettings,
                display: i.display,
              };
            for (var o in a) {
              var u = o;
              void 0 === a[u] && delete a[u];
            }
            var l = new FontFace(t, `url(${r})`, a);
            (r.length > 0
              ? l
                  .load()
                  .then(() => {
                    ((this.loaded = !0), this.emit("loaded"));
                  })
                  .catch(console.error)
              : ((this.loaded = !0), this.emit("loaded")),
              (this.fontFace = l),
              (this.fontUrl = n));
          }
        }
        class xt {}
        class Tt extends xt {
          constructor(e, t, n, r, i, a, o, u, l, d, c, h, p) {
            (super(),
              s(this, "glw", void 0),
              s(this, "options", void 0),
              s(this, "buffers", void 0),
              s(this, "shader", void 0),
              s(this, "shaderProps", void 0),
              s(this, "alpha", void 0),
              s(this, "clippingRect", void 0),
              s(this, "dimensions", void 0),
              s(this, "bufferIdx", void 0),
              s(this, "zIndex", void 0),
              s(this, "renderToTexture", void 0),
              s(this, "parentHasRenderTexture", void 0),
              s(this, "framebufferDimensions", void 0),
              s(this, "length", 0),
              s(this, "numQuads", 0),
              s(this, "textures", []),
              s(this, "maxTextures", void 0),
              (this.glw = e),
              (this.options = t),
              (this.buffers = n),
              (this.shader = r),
              (this.shaderProps = i),
              (this.alpha = a),
              (this.clippingRect = o),
              (this.dimensions = u),
              (this.bufferIdx = l),
              (this.zIndex = d),
              (this.renderToTexture = c),
              (this.parentHasRenderTexture = h),
              (this.framebufferDimensions = p),
              (this.maxTextures = r.supportsIndexedTextures
                ? e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)
                : 1));
          }
          addTexture(e) {
            for (var t = this.textures, n = this.maxTextures, r = -1, i = t.length, a = 0; a < i; a++) {
              if (t[a] === e) {
                r = a;
                break;
              }
            }
            return -1 !== r ? r : i >= n ? 4294967295 : (this.textures.push(e), i);
          }
          draw() {
            var e = this.glw,
              t = this.shader,
              n = this.shaderProps,
              r = this.options;
            (r.shManager.useShader(t), t.bindRenderOp(this, n));
            var i = (this.bufferIdx / 32) * 6 * 2;
            if (this.clippingRect.valid) {
              var a = this.clippingRect,
                o = a.x,
                s = a.y,
                u = a.width,
                l = a.height,
                d = this.parentHasRenderTexture ? 1 : r.pixelRatio,
                c = r.canvas.height,
                h = Math.round(o * d),
                p = Math.round(u * d),
                f = Math.round(l * d),
                g = Math.round(c - f - s * d);
              (this.parentHasRenderTexture &&
                (g = this.framebufferDimensions
                  ? this.framebufferDimensions.height - this.dimensions.height
                  : 0),
                e.setScissorTest(!0),
                e.scissor(h, g, p, f));
            } else e.setScissorTest(!1);
            e.drawElements(e.TRIANGLES, 6 * this.numQuads, e.UNSIGNED_SHORT, i);
          }
        }
        function wt(e) {
          var t = {
            MAX_RENDERBUFFER_SIZE: 0,
            MAX_TEXTURE_SIZE: 0,
            MAX_VIEWPORT_DIMS: 0,
            MAX_VERTEX_TEXTURE_IMAGE_UNITS: 0,
            MAX_TEXTURE_IMAGE_UNITS: 0,
            MAX_COMBINED_TEXTURE_IMAGE_UNITS: 0,
            MAX_VERTEX_ATTRIBS: 0,
            MAX_VARYING_VECTORS: 0,
            MAX_VERTEX_UNIFORM_VECTORS: 0,
            MAX_FRAGMENT_UNIFORM_VECTORS: 0,
          };
          return (
            Object.keys(t).forEach(n => {
              t[n] = e.getParameter(e[n]);
            }),
            t
          );
        }
        function St(e) {
          var t = {
            ANGLE_instanced_arrays: null,
            WEBGL_compressed_texture_s3tc: null,
            WEBGL_compressed_texture_astc: null,
            WEBGL_compressed_texture_etc: null,
            WEBGL_compressed_texture_etc1: null,
            WEBGL_compressed_texture_pvrtc: null,
            WEBKIT_WEBGL_compressed_texture_pvrtc: null,
            WEBGL_compressed_texture_s3tc_srgb: null,
            OES_vertex_array_object: null,
          };
          return (
            Object.keys(t).forEach(n => {
              t[n] = e.getExtension(n);
            }),
            t
          );
        }
        function At(e) {
          return (
            null !== e &&
            (("object" == typeof e && e.constructor && "HTMLImageElement" === e.constructor.name) ||
              ("undefined" != typeof HTMLImageElement && e instanceof HTMLImageElement))
          );
        }
        var Et = new Uint8Array([0, 0, 0, 0]);
        class kt extends pt {
          constructor(e, t, n) {
            (super(t, n),
              s(this, "glw", void 0),
              s(this, "_nativeCtxTexture", null),
              s(this, "_w", 0),
              s(this, "_h", 0),
              s(this, "txCoordX1", 0),
              s(this, "txCoordY1", 0),
              s(this, "txCoordX2", 1),
              s(this, "txCoordY2", 1),
              (this.glw = e));
          }
          checkGLError() {
            if ("failed" === this.state) return !0;
            var e = this.glw.getError();
            return (
              0 !== e &&
              ((this.state = "failed"),
              this.textureSource.setState("failed", new Error(`WebGL Error: ${e}`)),
              !0)
            );
          }
          get ctxTexture() {
            return "freed" === this.state
              ? (this.load(), null)
              : (this._nativeCtxTexture, this._nativeCtxTexture);
          }
          get w() {
            return this._w;
          }
          get h() {
            return this._h;
          }
          load() {
            var e = this;
            return o(
              r().m(function t() {
                var n, i, a;
                return r().w(
                  function (t) {
                    for (;;)
                      switch ((t.p = t.n)) {
                        case 0:
                          if ("loading" !== e.state && "loaded" !== e.state) {
                            t.n = 1;
                            break;
                          }
                          return t.a(2, Promise.resolve());
                        case 1:
                          if (
                            ((e.state = "loading"),
                            e.textureSource.setState("loading"),
                            (e._nativeCtxTexture = e.createNativeCtxTexture()),
                            null !== e._nativeCtxTexture)
                          ) {
                            t.n = 2;
                            break;
                          }
                          return (
                            (e.state = "failed"),
                            e.textureSource.setState("failed", new Error("WebGL Texture creation failed")),
                            t.a(2)
                          );
                        case 2:
                          return ((t.p = 2), (t.n = 3), e.onLoadRequest());
                        case 3:
                          if (((n = t.v), (i = n.width), (a = n.height), "freed" !== e.state)) {
                            t.n = 4;
                            break;
                          }
                          return t.a(2);
                        case 4:
                          ((e.state = "loaded"),
                            (e._w = i),
                            (e._h = a),
                            e.textureSource.setState("loaded", { width: i, height: a }),
                            e.textureSource.freeTextureData(),
                            (t.n = 7));
                          break;
                        case 5:
                          if (((t.p = 5), t.v, "freed" !== e.state)) {
                            t.n = 6;
                            break;
                          }
                          return t.a(2);
                        case 6:
                          ((e.state = "failed"), e.textureSource.setState("failed"));
                        case 7:
                          return t.a(2);
                      }
                  },
                  t,
                  null,
                  [[2, 5]],
                );
              }),
            )();
          }
          onLoadRequest() {
            var e = this;
            return o(
              r().m(function t() {
                var n, i, a, o, s, u, l, d, c, h, p, f, g;
                return r().w(function (t) {
                  for (;;)
                    switch (t.n) {
                      case 0:
                        if (((n = e.glw), (i = e.textureSource.textureData), "failed" !== e.state)) {
                          t.n = 1;
                          break;
                        }
                        return t.a(2, { width: 0, height: 0 });
                      case 1:
                        if (null !== i && null !== e._nativeCtxTexture) {
                          t.n = 2;
                          break;
                        }
                        return (
                          (e.state = "failed"),
                          e.textureSource.setState("failed", new Error("No texture data available")),
                          t.a(2, { width: 0, height: 0 })
                        );
                      case 2:
                        if (
                          (n.texImage2D(0, n.RGBA, 1, 1, 0, n.RGBA, n.UNSIGNED_BYTE, null),
                          e.setTextureMemUse(Et.byteLength),
                          (a = 0),
                          (o = 0),
                          n.activeTexture(0),
                          !0 !== e.checkGLError())
                        ) {
                          t.n = 3;
                          break;
                        }
                        return t.a(2, { width: 0, height: 0 });
                      case 3:
                        if (
                          ((s = i.data),
                          (u = n.RGBA),
                          (l = 4),
                          (d = 1.1),
                          !(
                            ("undefined" != typeof ImageBitmap && s instanceof ImageBitmap) ||
                            s instanceof ImageData ||
                            At(s)
                          ))
                        ) {
                          t.n = 5;
                          break;
                        }
                        if (
                          ((a = s.width),
                          (o = s.height),
                          n.bindTexture(e._nativeCtxTexture),
                          n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !!i.premultiplyAlpha),
                          n.texImage2D(0, u, u, n.UNSIGNED_BYTE, s),
                          !0 !== e.checkGLError())
                        ) {
                          t.n = 4;
                          break;
                        }
                        return t.a(2, { width: 0, height: 0 });
                      case 4:
                        (e.setTextureMemUse(o * a * l * d), (t.n = 10));
                        break;
                      case 5:
                        if (!(s && "mipmaps" in s && s.mipmaps)) {
                          t.n = 7;
                          break;
                        }
                        if (
                          ((p = s.mipmaps),
                          (f = s.type),
                          (g = s.blockInfo),
                          fe[f](n, e._nativeCtxTexture, s),
                          !0 !== e.checkGLError())
                        ) {
                          t.n = 6;
                          break;
                        }
                        return t.a(2, { width: 0, height: 0 });
                      case 6:
                        ((a = s.width),
                          (o = s.height),
                          (e.txCoordX2 = a / (Math.ceil(a / g.width) * g.width)),
                          (e.txCoordY2 = o / (Math.ceil(o / g.height) * g.height)),
                          e.setTextureMemUse(
                            null !== (c = null === (h = p[0]) || void 0 === h ? void 0 : h.byteLength) &&
                              void 0 !== c
                              ? c
                              : 0,
                          ),
                          (t.n = 10));
                        break;
                      case 7:
                        if (!(s && s instanceof Uint8Array)) {
                          t.n = 9;
                          break;
                        }
                        if (
                          ((a = 1),
                          (o = 1),
                          n.bindTexture(e._nativeCtxTexture),
                          n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !!i.premultiplyAlpha),
                          n.texImage2D(0, u, a, o, 0, u, n.UNSIGNED_BYTE, s),
                          !0 !== e.checkGLError())
                        ) {
                          t.n = 8;
                          break;
                        }
                        return t.a(2, { width: 0, height: 0 });
                      case 8:
                        (e.setTextureMemUse(a * o * l), (t.n = 10));
                        break;
                      case 9:
                        return (
                          console.error(
                            "WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",
                            i,
                          ),
                          (e.state = "failed"),
                          e.textureSource.setState("failed", new Error("Unexpected texture data")),
                          t.a(2, { width: 0, height: 0 })
                        );
                      case 10:
                        return t.a(2, { width: a, height: o });
                    }
                }, t);
              }),
            )();
          }
          free() {
            "freed" !== this.state &&
              ((this.state = "freed"), this.textureSource.setState("freed"), this.release());
          }
          release() {
            ((this._w = 0),
              (this._h = 0),
              null !== this._nativeCtxTexture &&
                (this.glw.deleteTexture(this._nativeCtxTexture),
                this.setTextureMemUse(0),
                (this._nativeCtxTexture = null)),
              this.textureSource.freeTextureData());
          }
          createNativeCtxTexture() {
            var e = this.glw,
              t = e.createTexture();
            return t
              ? (e.activeTexture(0),
                e.bindTexture(t),
                e.texParameteri(e.TEXTURE_MAG_FILTER, e.LINEAR),
                e.texParameteri(e.TEXTURE_MIN_FILTER, e.LINEAR),
                e.texParameteri(e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE),
                e.texParameteri(e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE),
                0 !== e.getError() ? null : t)
              : null;
          }
        }
        class It extends kt {
          constructor(e, t, n) {
            super(e, t, n);
          }
          onLoadRequest() {
            var e = this;
            return o(
              r().m(function t() {
                var n, i, a;
                return r().w(function (t) {
                  for (;;)
                    switch (t.n) {
                      case 0:
                        if (!((a = e.textureSource.textureData).data instanceof Uint8Array)) {
                          t.n = 1;
                          break;
                        }
                        return t.a(2, { width: 1, height: 1 });
                      case 1:
                        return t.a(2, {
                          width: (null === (n = a.data) || void 0 === n ? void 0 : n.width) || 0,
                          height: (null === (i = a.data) || void 0 === i ? void 0 : i.height) || 0,
                        });
                    }
                }, t);
              }),
            )();
          }
        }
        class Ct {
          constructor(e) {
            (s(this, "config", void 0), (this.config = e));
          }
          getBuffer(e) {
            var t;
            return null === (t = this.config.find(t => t.attributes[e])) || void 0 === t ? void 0 : t.buffer;
          }
          getAttributeInfo(e) {
            var t;
            return null === (t = this.config.find(t => t.attributes[e])) || void 0 === t
              ? void 0
              : t.attributes[e];
          }
        }
        class Mt {
          constructor(e) {
            (s(this, "gl", void 0),
              s(this, "activeTextureUnit", 0),
              s(this, "texture2dUnits", void 0),
              s(this, "texture2dParams", new WeakMap()),
              s(this, "scissorEnabled", void 0),
              s(this, "scissorX", void 0),
              s(this, "scissorY", void 0),
              s(this, "scissorWidth", void 0),
              s(this, "scissorHeight", void 0),
              s(this, "blendEnabled", void 0),
              s(this, "blendSrcRgb", void 0),
              s(this, "blendDstRgb", void 0),
              s(this, "blendSrcAlpha", void 0),
              s(this, "blendDstAlpha", void 0),
              s(this, "boundArrayBuffer", void 0),
              s(this, "boundElementArrayBuffer", void 0),
              s(this, "curProgram", void 0),
              s(this, "canvas", void 0),
              s(this, "MAX_RENDERBUFFER_SIZE", void 0),
              s(this, "MAX_TEXTURE_SIZE", void 0),
              s(this, "MAX_VIEWPORT_DIMS", void 0),
              s(this, "MAX_VERTEX_TEXTURE_IMAGE_UNITS", void 0),
              s(this, "MAX_TEXTURE_IMAGE_UNITS", void 0),
              s(this, "MAX_COMBINED_TEXTURE_IMAGE_UNITS", void 0),
              s(this, "MAX_VERTEX_ATTRIBS", void 0),
              s(this, "MAX_VARYING_VECTORS", void 0),
              s(this, "MAX_VERTEX_UNIFORM_VECTORS", void 0),
              s(this, "MAX_FRAGMENT_UNIFORM_VECTORS", void 0),
              s(this, "TEXTURE_MAG_FILTER", void 0),
              s(this, "TEXTURE_MIN_FILTER", void 0),
              s(this, "TEXTURE_WRAP_S", void 0),
              s(this, "TEXTURE_WRAP_T", void 0),
              s(this, "LINEAR", void 0),
              s(this, "LINEAR_MIPMAP_LINEAR", void 0),
              s(this, "CLAMP_TO_EDGE", void 0),
              s(this, "RGB", void 0),
              s(this, "RGBA", void 0),
              s(this, "UNSIGNED_BYTE", void 0),
              s(this, "UNPACK_PREMULTIPLY_ALPHA_WEBGL", void 0),
              s(this, "UNPACK_FLIP_Y_WEBGL", void 0),
              s(this, "FLOAT", void 0),
              s(this, "TRIANGLES", void 0),
              s(this, "UNSIGNED_SHORT", void 0),
              s(this, "ONE", void 0),
              s(this, "ONE_MINUS_SRC_ALPHA", void 0),
              s(this, "VERTEX_SHADER", void 0),
              s(this, "FRAGMENT_SHADER", void 0),
              s(this, "STATIC_DRAW", void 0),
              s(this, "COMPILE_STATUS", void 0),
              s(this, "LINK_STATUS", void 0),
              s(this, "DYNAMIC_DRAW", void 0),
              s(this, "COLOR_ATTACHMENT0", void 0),
              s(this, "INVALID_ENUM", void 0),
              s(this, "INVALID_OPERATION", void 0),
              (this.gl = e),
              (this.activeTextureUnit = e.getParameter(e.ACTIVE_TEXTURE) - e.TEXTURE0));
            var t = e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);
            ((this.texture2dUnits = new Array(t)
              .fill(void 0)
              .map((t, n) => (this.activeTexture(n), e.getParameter(e.TEXTURE_BINDING_2D)))),
              this.activeTexture(this.activeTextureUnit),
              (this.scissorEnabled = e.isEnabled(e.SCISSOR_TEST)));
            var n = e.getParameter(e.SCISSOR_BOX);
            ((this.scissorX = n[0]),
              (this.scissorY = n[1]),
              (this.scissorWidth = n[2]),
              (this.scissorHeight = n[3]),
              (this.blendEnabled = e.isEnabled(e.BLEND)),
              (this.blendSrcRgb = e.getParameter(e.BLEND_SRC_RGB)),
              (this.blendDstRgb = e.getParameter(e.BLEND_DST_RGB)),
              (this.blendSrcAlpha = e.getParameter(e.BLEND_SRC_ALPHA)),
              (this.blendDstAlpha = e.getParameter(e.BLEND_DST_ALPHA)),
              (this.boundArrayBuffer = e.getParameter(e.ARRAY_BUFFER_BINDING)),
              (this.boundElementArrayBuffer = e.getParameter(e.ELEMENT_ARRAY_BUFFER_BINDING)),
              (this.curProgram = e.getParameter(e.CURRENT_PROGRAM)),
              (this.canvas = e.canvas),
              (this.MAX_RENDERBUFFER_SIZE = e.MAX_RENDERBUFFER_SIZE),
              (this.MAX_TEXTURE_SIZE = e.MAX_TEXTURE_SIZE),
              (this.MAX_VIEWPORT_DIMS = e.MAX_VIEWPORT_DIMS),
              (this.MAX_VERTEX_TEXTURE_IMAGE_UNITS = e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
              (this.MAX_TEXTURE_IMAGE_UNITS = e.MAX_TEXTURE_IMAGE_UNITS),
              (this.MAX_COMBINED_TEXTURE_IMAGE_UNITS = e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),
              (this.MAX_VERTEX_ATTRIBS = e.MAX_VERTEX_ATTRIBS),
              (this.MAX_VARYING_VECTORS = e.MAX_VARYING_VECTORS),
              (this.MAX_VERTEX_UNIFORM_VECTORS = e.MAX_VERTEX_UNIFORM_VECTORS),
              (this.MAX_FRAGMENT_UNIFORM_VECTORS = e.MAX_FRAGMENT_UNIFORM_VECTORS),
              (this.TEXTURE_MAG_FILTER = e.TEXTURE_MAG_FILTER),
              (this.TEXTURE_MIN_FILTER = e.TEXTURE_MIN_FILTER),
              (this.TEXTURE_WRAP_S = e.TEXTURE_WRAP_S),
              (this.TEXTURE_WRAP_T = e.TEXTURE_WRAP_T),
              (this.LINEAR = e.LINEAR),
              (this.LINEAR_MIPMAP_LINEAR = e.LINEAR_MIPMAP_LINEAR),
              (this.CLAMP_TO_EDGE = e.CLAMP_TO_EDGE),
              (this.RGB = e.RGB),
              (this.RGBA = e.RGBA),
              (this.UNSIGNED_BYTE = e.UNSIGNED_BYTE),
              (this.UNPACK_PREMULTIPLY_ALPHA_WEBGL = e.UNPACK_PREMULTIPLY_ALPHA_WEBGL),
              (this.UNPACK_FLIP_Y_WEBGL = e.UNPACK_FLIP_Y_WEBGL),
              (this.FLOAT = e.FLOAT),
              (this.TRIANGLES = e.TRIANGLES),
              (this.UNSIGNED_SHORT = e.UNSIGNED_SHORT),
              (this.ONE = e.ONE),
              (this.ONE_MINUS_SRC_ALPHA = e.ONE_MINUS_SRC_ALPHA),
              (this.MAX_VERTEX_TEXTURE_IMAGE_UNITS = e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
              (this.TRIANGLES = e.TRIANGLES),
              (this.UNSIGNED_SHORT = e.UNSIGNED_SHORT),
              (this.VERTEX_SHADER = e.VERTEX_SHADER),
              (this.FRAGMENT_SHADER = e.FRAGMENT_SHADER),
              (this.STATIC_DRAW = e.STATIC_DRAW),
              (this.COMPILE_STATUS = e.COMPILE_STATUS),
              (this.LINK_STATUS = e.LINK_STATUS),
              (this.DYNAMIC_DRAW = e.DYNAMIC_DRAW),
              (this.COLOR_ATTACHMENT0 = e.COLOR_ATTACHMENT0),
              (this.INVALID_ENUM = e.INVALID_ENUM),
              (this.INVALID_OPERATION = e.INVALID_OPERATION));
          }
          isWebGl2() {
            return ((e = this.gl), self.WebGL2RenderingContext && e instanceof self.WebGL2RenderingContext);
            var e;
          }
          activeTexture(e) {
            var t = this.gl;
            this.activeTextureUnit !== e && (t.activeTexture(e + t.TEXTURE0), (this.activeTextureUnit = e));
          }
          bindTexture(e) {
            var t = this.gl,
              n = this.activeTextureUnit,
              r = this.texture2dUnits;
            r[n] !== e && ((r[n] = e), t.bindTexture(this.gl.TEXTURE_2D, e));
          }
          _getActiveTexture() {
            var e = this.activeTextureUnit;
            return this.texture2dUnits[e];
          }
          texParameteri(e, t) {
            var n = this.gl,
              r = this.texture2dParams,
              i = this._getActiveTexture();
            if (!i) throw new Error("No active texture");
            var a = r.get(i);
            (a || ((a = {}), r.set(i, a)), a[e] !== t && ((a[e] = t), n.texParameteri(n.TEXTURE_2D, e, t)));
          }
          texImage2D(e, t, n, r, i, a, o, s) {
            var u = this.gl;
            a
              ? u.texImage2D(u.TEXTURE_2D, e, t, n, r, i, a, o, s)
              : u.texImage2D(u.TEXTURE_2D, e, t, n, r, i);
          }
          compressedTexImage2D(e, t, n, r, i, a) {
            var o = this.gl;
            o.compressedTexImage2D(o.TEXTURE_2D, e, t, n, r, i, a);
          }
          pixelStorei(e, t) {
            this.gl.pixelStorei(e, t);
          }
          generateMipmap() {
            var e = this.gl;
            e.generateMipmap(e.TEXTURE_2D);
          }
          createTexture() {
            return this.gl.createTexture();
          }
          deleteTexture(e) {
            var t = this.gl;
            (e && this.texture2dParams.delete(e), t.deleteTexture(e));
          }
          deleteFramebuffer(e) {
            this.gl.deleteFramebuffer(e);
          }
          viewport(e, t, n, r) {
            this.gl.viewport(e, t, n, r);
          }
          clearColor(e, t, n, r) {
            this.gl.clearColor(e, t, n, r);
          }
          setScissorTest(e) {
            var t = this.gl;
            e !== this.scissorEnabled &&
              (e ? t.enable(t.SCISSOR_TEST) : t.disable(t.SCISSOR_TEST), (this.scissorEnabled = e));
          }
          scissor(e, t, n, r) {
            var i = this.gl,
              a = this.scissorX,
              o = this.scissorY,
              s = this.scissorWidth,
              u = this.scissorHeight;
            (e === a && t === o && n === s && r === u) ||
              (i.scissor(e, t, n, r),
              (this.scissorX = e),
              (this.scissorY = t),
              (this.scissorWidth = n),
              (this.scissorHeight = r));
          }
          setBlend(e) {
            var t = this.gl;
            e !== this.blendEnabled && (e ? t.enable(t.BLEND) : t.disable(t.BLEND), (this.blendEnabled = e));
          }
          blendFunc(e, t) {
            var n = this.gl,
              r = this.blendSrcRgb,
              i = this.blendDstRgb,
              a = this.blendSrcAlpha,
              o = this.blendDstAlpha;
            (e === r && t === i && e === a && t === o) ||
              (n.blendFunc(e, t),
              (this.blendSrcRgb = e),
              (this.blendDstRgb = t),
              (this.blendSrcAlpha = e),
              (this.blendDstAlpha = t));
          }
          createBuffer() {
            return this.gl.createBuffer();
          }
          createFramebuffer() {
            return this.gl.createFramebuffer();
          }
          bindFramebuffer(e) {
            var t = this.gl;
            t.bindFramebuffer(t.FRAMEBUFFER, e);
          }
          framebufferTexture2D(e, t, n) {
            var r = this.gl;
            r.framebufferTexture2D(r.FRAMEBUFFER, e, r.TEXTURE_2D, t, n);
          }
          clear() {
            var e = this.gl;
            e.clear(e.COLOR_BUFFER_BIT);
          }
          arrayBufferData(e, t, n) {
            var r = this.gl;
            (this.boundArrayBuffer !== e && (r.bindBuffer(r.ARRAY_BUFFER, e), (this.boundArrayBuffer = e)),
              r.bufferData(r.ARRAY_BUFFER, t, n));
          }
          elementArrayBufferData(e, t, n) {
            var r = this.gl;
            (this.boundElementArrayBuffer !== e &&
              (r.bindBuffer(r.ELEMENT_ARRAY_BUFFER, e), (this.boundElementArrayBuffer = e)),
              r.bufferData(r.ELEMENT_ARRAY_BUFFER, t, n));
          }
          vertexAttribPointer(e, t, n, r, i, a, o) {
            var s = this.gl;
            (this.boundArrayBuffer !== e && (s.bindBuffer(s.ARRAY_BUFFER, e), (this.boundArrayBuffer = e)),
              s.vertexAttribPointer(t, n, r, i, a, o));
          }
          getUniformLocations(e) {
            for (
              var t = this.gl, n = t.getProgramParameter(e, t.ACTIVE_UNIFORMS), r = {}, i = 0;
              i < n;
              i++
            ) {
              var a = t.getActiveUniform(e, i).name.replace(/\[.*?\]/g, "");
              r[a] = t.getUniformLocation(e, a);
            }
            return r;
          }
          getAttributeLocations(e) {
            for (
              var t = this.gl, n = t.getProgramParameter(e, t.ACTIVE_ATTRIBUTES), r = [], i = 0;
              i < n;
              i++
            ) {
              var a = t.getActiveAttrib(e, i).name;
              r[t.getAttribLocation(e, a)] = a;
            }
            return r;
          }
          useProgram(e) {
            var t = this.gl;
            this.curProgram !== e && (t.useProgram(e), (this.curProgram = e));
          }
          uniform1f(e, t) {
            this.gl.uniform1f(e, t);
          }
          uniform1fv(e, t) {
            this.gl.uniform1fv(e, t);
          }
          uniform1i(e, t) {
            this.gl.uniform1i(e, t);
          }
          uniform1iv(e, t) {
            this.gl.uniform1iv(e, t);
          }
          uniform2f(e, t, n) {
            this.gl.uniform2f(e, t, n);
          }
          uniform2fv(e, t) {
            this.gl.uniform2fv(e, t);
          }
          uniform2i(e, t, n) {
            this.gl.uniform2i(e, t, n);
          }
          uniform2iv(e, t) {
            this.gl.uniform2iv(e, t);
          }
          uniform3f(e, t, n, r) {
            this.gl.uniform3f(e, t, n, r);
          }
          uniform3fv(e, t) {
            this.gl.uniform3fv(e, t);
          }
          uniform3i(e, t, n, r) {
            this.gl.uniform3i(e, t, n, r);
          }
          uniform3iv(e, t) {
            this.gl.uniform3iv(e, t);
          }
          uniform4f(e, t, n, r, i) {
            this.gl.uniform4f(e, t, n, r, i);
          }
          uniform4fv(e, t) {
            this.gl.uniform4fv(e, t);
          }
          uniform4i(e, t, n, r, i) {
            this.gl.uniform4i(e, t, n, r, i);
          }
          uniform4iv(e, t) {
            this.gl.uniform4iv(e, t);
          }
          uniformMatrix2fv(e, t) {
            this.gl.uniformMatrix2fv(e, !1, t);
          }
          uniformMatrix3fv(e, t) {
            this.gl.uniformMatrix3fv(e, !1, t);
          }
          uniformMatrix4fv(e, t) {
            this.gl.uniformMatrix4fv(e, !1, t);
          }
          getParameter(e) {
            return this.gl.getParameter(e);
          }
          drawElements(e, t, n, r) {
            this.gl.drawElements(e, t, n, r);
          }
          getExtension(e) {
            return this.gl.getExtension(e);
          }
          getError() {
            return this.gl.getError();
          }
          createVertexArray() {
            return this.gl.createVertexArray();
          }
          bindVertexArray(e) {
            this.gl.bindVertexArray(e);
          }
          getAttribLocation(e, t) {
            return this.gl.getAttribLocation(e, t);
          }
          getUniformLocation(e, t) {
            return this.gl.getUniformLocation(e, t);
          }
          enableVertexAttribArray(e) {
            this.gl.enableVertexAttribArray(e);
          }
          disableVertexAttribArray(e) {
            this.gl.disableVertexAttribArray(e);
          }
          createShader(e) {
            return this.gl.createShader(e);
          }
          compileShader(e) {
            this.gl.compileShader(e);
          }
          attachShader(e, t) {
            this.gl.attachShader(e, t);
          }
          linkProgram(e) {
            this.gl.linkProgram(e);
          }
          deleteProgram(e) {
            this.gl.deleteProgram(e);
          }
          getShaderParameter(e, t) {
            return this.gl.getShaderParameter(e, t);
          }
          getShaderInfoLog(e) {
            return this.gl.getShaderInfoLog(e);
          }
          createProgram() {
            return this.gl.createProgram();
          }
          getProgramParameter(e, t) {
            return this.gl.getProgramParameter(e, t);
          }
          getProgramInfoLog(e) {
            return this.gl.getProgramInfoLog(e);
          }
          shaderSource(e, t) {
            this.gl.shaderSource(e, t);
          }
          deleteShader(e) {
            this.gl.deleteShader(e);
          }
          checkError(e) {
            var t = this.getError();
            if (0 !== t) {
              var n = "UNKNOWN_ERROR";
              switch (t) {
                case this.INVALID_ENUM:
                  n = "INVALID_ENUM";
                  break;
                case 1281:
                  n = "INVALID_VALUE";
                  break;
                case this.INVALID_OPERATION:
                  n = "INVALID_OPERATION";
                  break;
                case 1285:
                  n = "OUT_OF_MEMORY";
                  break;
                case 37442:
                  n = "CONTEXT_LOST_WEBGL";
              }
              var r = `WebGL ${n} (0x${t.toString(16)}) during ${e}`;
              return { error: t, errorName: n, message: r };
            }
            return null;
          }
        }
        class Rt extends kt {
          constructor(e, t, n) {
            (super(e, t, n), s(this, "framebuffer", null));
          }
          onLoadRequest() {
            var e = this;
            return o(
              r().m(function t() {
                var n, i, a, o, s;
                return r().w(function (t) {
                  for (;;)
                    switch (t.n) {
                      case 0:
                        if (((n = e.glw), (i = e._nativeCtxTexture = e.createNativeCtxTexture()))) {
                          t.n = 1;
                          break;
                        }
                        throw new Error("Failed to create native texture for RenderTexture");
                      case 1:
                        return (
                          (a = e.textureSource),
                          (o = a.width),
                          (s = a.height),
                          (e.framebuffer = n.createFramebuffer()),
                          n.texImage2D(0, n.RGBA, o, s, 0, n.RGBA, n.UNSIGNED_BYTE, null),
                          e.setTextureMemUse(o * s * 4),
                          n.bindFramebuffer(e.framebuffer),
                          n.framebufferTexture2D(n.COLOR_ATTACHMENT0, i, 0),
                          n.bindFramebuffer(null),
                          t.a(2, { width: o, height: s })
                        );
                    }
                }, t);
              }),
            )();
          }
          free() {
            (super.free(), this.glw.deleteFramebuffer(this.framebuffer), (this.framebuffer = null));
          }
        }
        var _t = 10;
        class Dt {}
        class Pt extends Dt {
          constructor(e, t) {
            (super(),
              s(this, "data", void 0),
              s(this, "glyphMap", void 0),
              s(this, "kernings", void 0),
              (this.data = e),
              (this.glyphMap = t));
            var n = (this.kernings = {});
            (e.kernings.forEach(e => {
              var t = e.second;
              (n[t] = n[t] || {})[e.first] = e.amount;
            }),
              (this.kernings = n));
          }
          shapeText(e, t) {
            var n = this;
            return r().m(function i() {
              var a, o, s, u, l, d;
              return r().w(function (r) {
                for (;;)
                  switch (r.n) {
                    case 0:
                      o = void 0;
                    case 1:
                      if (!(a = t.peek()) || a.done) {
                        r.n = 5;
                        break;
                      }
                      if (((s = a.value), (u = n.glyphMap.get(s)), t.next(), void 0 === u)) {
                        r.n = 3;
                        break;
                      }
                      return (
                        (d =
                          void 0 !== o
                            ? ((null === (l = n.kernings[u.id]) || void 0 === l ? void 0 : l[o]) || 0) +
                              e.letterSpacing
                            : 0),
                        (o = u.id),
                        (r.n = 2),
                        {
                          mapped: !0,
                          glyphId: u.id,
                          codepoint: s,
                          cluster: t.lastIndex,
                          xAdvance: u.xadvance + d,
                          yAdvance: 0,
                          xOffset: u.xoffset + d,
                          yOffset: u.yoffset,
                          xBearing: 0,
                          yBearing: 0,
                          width: u.width,
                          height: u.height,
                        }
                      );
                    case 2:
                      r.n = 4;
                      break;
                    case 3:
                      return (
                        s === _t && (o = void 0),
                        (r.n = 4),
                        { mapped: !1, codepoint: s, cluster: t.lastIndex }
                      );
                    case 4:
                      r.n = 1;
                      break;
                    case 5:
                      return r.a(2);
                  }
              }, i);
            })();
          }
        }
        class Lt extends yt {
          constructor(e, t) {
            (super(t),
              s(this, "type", void 0),
              s(this, "texture", void 0),
              s(this, "maxCharHeight", 0),
              s(this, "shaper", void 0),
              s(this, "glyphMap", new Map()),
              s(this, "data", void 0));
            var n = t.atlasUrl,
              r = t.atlasDataUrl,
              i = t.stage;
            ((this.type = e),
              i.renderer,
              (this.texture = i.txManager.createTexture("ImageTexture", { src: n, premultiplyAlpha: !1 })),
              i.txManager.loadTexture(this.texture, !0),
              (this.texture.preventCleanup = !0),
              this.texture.on("loaded", () => {
                (this.checkLoaded(), i.requestRender());
              }),
              me(r)
                .then(e => {
                  ((this.data = JSON.parse(e)), this.data);
                  var t = 0;
                  if (
                    (this.data.chars.forEach(e => {
                      this.glyphMap.set(e.id, e);
                      var n = e.yoffset + e.height;
                      n > t && (t = n);
                    }),
                    (this.maxCharHeight = t),
                    (this.shaper = new Pt(this.data, this.glyphMap)),
                    !this.metrics)
                  ) {
                    var n;
                    if (null === (n = this.data) || void 0 === n || !n.lightningMetrics)
                      throw new Error(
                        `Font metrics not found in ${this.type} font ${this.fontFamily}. Make sure you are using the latest version of the Lightning 3 \`msdf-generator\` tool to generate your SDF fonts.`,
                      );
                    var r = this.data.lightningMetrics,
                      i = r.ascender,
                      a = r.descender,
                      o = r.lineGap,
                      s = r.unitsPerEm;
                    this.metrics = { ascender: i / s, descender: a / s, lineGap: o / s };
                  }
                  this.checkLoaded();
                })
                .catch(console.error));
          }
          getAtlasEntry(e) {
            var t = this.glyphMap.get(e);
            if (void 0 === t) throw new Error(`Glyph ${e} not found in font ${this.fontFamily}`);
            return { x: t.x, y: t.y, width: t.width, height: t.height };
          }
          checkLoaded() {
            this.loaded ||
              ("loaded" === this.texture.state && this.data && ((this.loaded = !0), this.emit("loaded")));
          }
        }
        var Nt,
          Ot = !!{ LEGACY: !0 },
          Ut = {
            debug: !1,
            focusDebug: !1,
            keyDebug: !1,
            animationsEnabled: !0,
            animationSettings: { duration: 250, easing: "ease-in-out" },
            fontSettings: { fontFamily: "Ubuntu", fontSize: 100 },
            setActiveElement: () => {},
            focusStateKey: "$focus",
            lockStyles: !0,
          };
        var Bt = "element",
          jt = "textNode",
          Ft = "text";
        var Vt = e => e instanceof Function,
          Ht = e => "function" == typeof e;
        function Gt(e) {
          return Array.isArray(e);
        }
        function zt(e) {
          return "string" == typeof e;
        }
        function Xt(e) {
          return "destroy" in e && "function" == typeof e.destroy;
        }
        function Wt(e) {
          return e instanceof bn;
        }
        function Kt(e) {
          return e._type === jt;
        }
        function qt(e) {
          return e._type === Ft;
        }
        function Yt(e) {
          var t;
          return null == e || null === (t = e.states) || void 0 === t ? void 0 : t.has(Ut.focusStateKey);
        }
        class $t extends Array {
          constructor(e, t = {}) {
            return (
              Gt(t)
                ? (super(...t), s(this, "onChange", void 0))
                : zt(t)
                  ? (super(t), s(this, "onChange", void 0))
                  : (super(
                      ...Object.entries(t)
                        .filter(([e, t]) => t)
                        .map(([e]) => e),
                    ),
                    s(this, "onChange", void 0)),
              (this.onChange = e),
              this
            );
          }
          has(e) {
            return this.indexOf(e) >= 0 || this.indexOf(`$${e}`) >= 0;
          }
          is(e) {
            return this.indexOf(e) >= 0;
          }
          add(e) {
            this.has(e) || (this.push(e), this.onChange());
          }
          toggle(e, t) {
            !0 === t ? this.add(e) : !1 === t || this.has(e) ? this.remove(e) : this.add(e);
          }
          merge(e) {
            if (Gt(e)) ((this.length = 0), this.push(...e));
            else if (zt(e)) ((this.length = 0), this.push(e));
            else
              for (var t in e) {
                if (e[t]) this.has(t) || this.push(t);
                else {
                  var n = this.indexOf(t);
                  n >= 0 && this.splice(n, 1);
                }
              }
            return this;
          }
          remove(e) {
            var t = this.indexOf(e);
            t >= 0 && (this.splice(t, 1), this.onChange());
          }
        }
        function Jt(e) {
          for (
            var t = "row" === (e.flexDirection || "row"),
              n = t ? "width" : "height",
              r = t ? "height" : "width",
              i = t ? "marginLeft" : "marginTop",
              a = t ? "marginTop" : "marginLeft",
              o = t ? "marginRight" : "marginBottom",
              s = t ? "marginBottom" : "marginRight",
              l = [],
              d = !1,
              c = 0,
              h = 0;
            h < e.children.length;
            h++
          ) {
            var p = e.children[h];
            if (Kt(p) && p.text && !p.width && !p.height) return !1;
            if (!qt(p) && !1 !== p.flexItem) {
              var f = p.flexOrder;
              void 0 !== f && (d = !0);
              var g = p.flexGrow,
                m = void 0 !== g && g >= 0;
              m && (c += g);
              var v = p[n] || 0,
                y = p[i] || 0,
                b = p[o] || 0;
              l.push({
                node: p,
                mainSize: v,
                marginStart: y,
                marginEnd: b,
                totalMainSizeOnAxis: v + y + b,
                isGrowItem: m,
                flexGrowValue: m ? g : 0,
                flexOrder: f || 0,
                crossSize: p[r] || 0,
                crossMarginStart: p[a] || 0,
                crossMarginEnd: p[s] || 0,
              });
            }
          }
          d ? l.sort((e, t) => e.flexOrder - t.flexOrder) : "rtl" === e.direction && l.reverse();
          var x = l.length;
          if (0 === x) return !1;
          var T = t ? "x" : "y",
            w = t ? "y" : "x",
            S = e[n] || 0,
            A = e[r] || 0,
            E = e.gap || 0,
            k = e.justifyContent || "flexStart",
            I = !1;
          if (c > 0 && x > 1) {
            e.flexBoundary = e.flexBoundary || "fixed";
            var C,
              M = 0,
              R = u(l);
            try {
              for (R.s(); !(C = R.n()).done; ) {
                var _ = C.value;
                M += _.mainSize + _.marginStart + _.marginEnd;
              }
            } catch (Se) {
              R.e(Se);
            } finally {
              R.f();
            }
            var D = S - M - (x > 0 ? E * (x - 1) : 0);
            if (D > 0) {
              var P,
                L = u(l);
              try {
                for (L.s(); !(P = L.n()).done; ) {
                  var N = P.value;
                  if (N.isGrowItem && N.flexGrowValue > 0) {
                    var O = (N.flexGrowValue / c) * D,
                      U = N.mainSize + O;
                    ((N.node[n] = U),
                      (N.mainSize = U),
                      (N.totalMainSizeOnAxis = U + N.marginStart + N.marginEnd));
                  }
                }
              } catch (Se) {
                L.e(Se);
              } finally {
                L.f();
              }
              e._containsFlexGrow = !e._containsFlexGrow || null;
            } else
              e._containsFlexGrow
                ? (e._containsFlexGrow = null)
                : console.warn("No available space for flex-grow items to expand, or items overflow.");
          }
          var B = 0;
          if ("center" === k || "spaceBetween" === k || "spaceEvenly" === k || "spaceAround" === k) {
            var j,
              F = u(l);
            try {
              for (F.s(); !(j = F.n()).done; ) {
                B += j.value.totalMainSizeOnAxis;
              }
            } catch (Se) {
              F.e(Se);
            } finally {
              F.f();
            }
          }
          var V = e.alignItems || (e.flexWrap ? "flexStart" : void 0),
            H = A
              ? (e, t = 0) => {
                  var n = e.node.alignSelf || V;
                  n &&
                    ("flexStart" === n
                      ? (e.node[w] = t + e.crossMarginStart)
                      : "center" === n
                        ? (e.node[w] = t + (A - e.crossSize) / 2 + e.crossMarginStart)
                        : "flexEnd" === n && (e.node[w] = t + A - e.crossSize - e.crossMarginEnd));
                }
              : (e, t = 0) => {};
          if (t && e._calcHeight && !e.flexCrossBoundary) {
            var G = l.reduce((e, t) => Math.max(e, t.crossSize), 0),
              z = G || e.height;
            z !== e.height && ((I = !0), (e.height = A = z));
          }
          var X = e.padding || 0;
          if ("flexStart" === k) {
            if ("wrap" === e.flexWrap) {
              var W,
                K,
                q,
                Y,
                $ = 0,
                J = (null === (W = l[0]) || void 0 === W ? void 0 : W.crossSize) || A,
                Q = t
                  ? null !== (K = e.columnGap) && void 0 !== K
                    ? K
                    : E
                  : null !== (q = e.rowGap) && void 0 !== q
                    ? q
                    : E,
                Z = u(l);
              try {
                for (Z.s(); !(Y = Z.n()).done; ) {
                  var ee = Y.value;
                  (X + ee.totalMainSizeOnAxis > S &&
                    X > (e.padding || 0) &&
                    ((X = e.padding || 0), ($ += J + Q)),
                    (ee.node[T] = X + ee.marginStart),
                    (X += ee.totalMainSizeOnAxis + E),
                    H(ee, $));
                }
              } catch (Se) {
                Z.e(Se);
              } finally {
                Z.f();
              }
              var te = $ + J;
              e[r] !== te && ((e[`preFlex${r}`] = e[r]), (e[r] = te), (I = !0));
            } else {
              var ne,
                re = u(l);
              try {
                for (re.s(); !(ne = re.n()).done; ) {
                  var ie = ne.value;
                  ((ie.node[T] = X + ie.marginStart), (X += ie.totalMainSizeOnAxis + E), H(ie));
                }
              } catch (Se) {
                re.e(Se);
              } finally {
                re.f();
              }
            }
            if ("fixed" !== e.flexBoundary && "wrap" !== e.flexWrap) {
              var ae = X - E + (e.padding || 0);
              if (ae !== S) return ((e[`preFlex${n}`] = S), (e[n] = ae), !0);
            }
          } else if ("flexEnd" === k) {
            X = S - (e.padding || 0);
            for (var oe = x - 1; oe >= 0; oe--) {
              var se = l[oe];
              ((se.node[T] = X - se.mainSize - se.marginEnd), (X -= se.totalMainSizeOnAxis + E), H(se));
            }
          } else if ("center" === k) {
            X = (S - (B + E * (x - 1))) / 2 + (e.padding || 0);
            var ue,
              le = u(l);
            try {
              for (le.s(); !(ue = le.n()).done; ) {
                var de = ue.value;
                ((de.node[T] = X + de.marginStart), (X += de.totalMainSizeOnAxis + E), H(de));
              }
            } catch (Se) {
              le.e(Se);
            } finally {
              le.f();
            }
          } else if ("spaceBetween" === k) {
            var ce = x > 1 ? (S - B - 2 * (e.padding || 0)) / (x - 1) : 0;
            X = e.padding || 0;
            var he,
              pe = u(l);
            try {
              for (pe.s(); !(he = pe.n()).done; ) {
                var fe = he.value;
                ((fe.node[T] = X + fe.marginStart), (X += fe.totalMainSizeOnAxis + ce), H(fe));
              }
            } catch (Se) {
              pe.e(Se);
            } finally {
              pe.f();
            }
          } else if ("spaceAround" === k) {
            var ge = x > 0 ? (S - B - 2 * (e.padding || 0)) / x : 0;
            X = (e.padding || 0) + ge / 2;
            var me,
              ve = u(l);
            try {
              for (ve.s(); !(me = ve.n()).done; ) {
                var ye = me.value;
                ((ye.node[T] = X + ye.marginStart), (X += ye.totalMainSizeOnAxis + ge), H(ye));
              }
            } catch (Se) {
              ve.e(Se);
            } finally {
              ve.f();
            }
          } else if ("spaceEvenly" === k) {
            var be = (S - B - 2 * (e.padding || 0)) / (x + 1);
            X = be + (e.padding || 0);
            var xe,
              Te = u(l);
            try {
              for (Te.s(); !(xe = Te.n()).done; ) {
                var we = xe.value;
                ((we.node[T] = X + we.marginStart), (X += we.totalMainSizeOnAxis + be), H(we));
              }
            } catch (Se) {
              Te.e(Se);
            } finally {
              Te.f();
            }
          }
          return I;
        }
        var Qt,
          Zt,
          en = {
            ArrowLeft: "Left",
            ArrowRight: "Right",
            ArrowUp: "Up",
            ArrowDown: "Down",
            Enter: "Enter",
            l: "Last",
            " ": "Space",
            Backspace: "Back",
            Escape: "Escape",
          },
          tn = {},
          nn = (e, t) => {
            for (
              var r = function () {
                  var e = n(a[i], 2),
                    r = e[0],
                    o = e[1];
                  Array.isArray(o)
                    ? o.forEach(e => {
                        t[e] = r;
                      })
                    : null === o
                      ? delete t[r]
                      : (t[o] = r);
                },
                i = 0,
                a = Object.entries(e);
              i < a.length;
              i++
            )
              r();
          },
          rn = !0,
          an = [],
          on = (e, n) => {
            for (var r = e, i = []; r; ) {
              var a, o;
              if (!r.states.has(Ut.focusStateKey) || r === e)
                (r.states.add(Ut.focusStateKey),
                  null === (a = r.onFocus) || void 0 === a || a.call(r, e, n),
                  null === (o = r.onFocusChanged) || void 0 === o || o.call(r, !0, e, n));
              (i.push(r), (r = r.parent));
            }
            return (
              an.forEach(t => {
                var r, a;
                i.includes(t) ||
                  (t.states.remove(Ut.focusStateKey),
                  null === (r = t.onBlur) || void 0 === r || r.call(t, e, n),
                  null === (a = t.onFocusChanged) || void 0 === a || a.call(t, !1, e, n));
              }),
              Ut.focusDebug &&
                ((e, n) => {
                  if (rn) {
                    var r = document.createElement("style");
                    ((r.type = "text/css"),
                      (r.innerHTML =
                        '\n      [data-focus="3"] {\n        border: 2px solid rgba(255, 33, 33, 0.2);\n        border-radius: 5px;\n        transition: border-color 0.3s ease;\n      }\n\n      [data-focus="2"] {\n        border: 2px solid rgba(255, 33, 33, 0.4);\n        border-radius: 5px;\n        transition: border-color 0.3s ease;\n      }\n\n      [data-focus="1"] {\n        border: 4px solid rgba(255, 33, 33, 0.9);\n        border-radius: 5px;\n        transition: border-color 0.5s ease;\n      }\n    '),
                      document.head.appendChild(r),
                      (rn = !1));
                  }
                  (e.forEach(e => {
                    e.data = t(t({}, e.data), {}, { focus: void 0 });
                  }),
                    n.forEach((e, n) => {
                      e.data = t(t({}, e.data), {}, { focus: n + 1 });
                    }));
                })(an, i),
              (an = i),
              i
            );
          },
          sn = 0,
          un = (e, t, n = !1, r = !1) => {
            var i,
              a = performance.now(),
              o = e.key || e.keyCode,
              s = Zt === o;
            if (((Zt = o), !r && Ut.throttleInput)) {
              if (s && a - sn < Ut.throttleInput) return !1;
              sn = a;
            }
            for (
              var u,
                l,
                d,
                c = an.length,
                h = `onCapture${t || e.key}` + r ? "Release" : "",
                p = r ? "onCaptureKeyRelease" : "onCaptureKey",
                f = c - 1;
              f >= 0;
              f--
            ) {
              var g = an[f];
              if (
                g.throttleInput &&
                s &&
                void 0 !== g._lastAnyKeyPressTime &&
                a - g._lastAnyKeyPressTime < g.throttleInput
              )
                return !0;
              var m = g[h] || g[p];
              if (Ht(m) && !0 === m.call(g, e, g, i, t)) return ((g._lastAnyKeyPressTime = a), !0);
            }
            (t && ((u = `on${t}`), (l = `on${t}Release`)), r || (d = n ? "onKeyHold" : "onKeyPress"));
            for (var v = 0; v < c; v++) {
              var y = an[v];
              if (
                (i || (i = y),
                y.throttleInput &&
                  s &&
                  void 0 !== y._lastAnyKeyPressTime &&
                  a - y._lastAnyKeyPressTime < y.throttleInput)
              )
                return !0;
              var b = !1;
              if (r && l) {
                var x = y[l];
                Ht(x) && !0 === x.call(y, e, y, i) && (b = !0);
              } else if (!r && u) {
                var T = y[u];
                Ht(T) && !0 === T.call(y, e, y, i) && (b = !0);
              }
              if (!b && d) {
                var w = y[d];
                Ht(w) && !0 === w.call(y, e, t, y, i) && (b = !0);
              }
              if (b) return ((y._lastAnyKeyPressTime = a), !0);
            }
            return !1;
          },
          ln = {},
          dn = (e, t, n) => {
            if (t) {
              var r = t.key || t.keyCode,
                i = tn[t.key] || tn[t.keyCode],
                a = en[t.key] || en[t.keyCode];
              if (i)
                return void (
                  ln[r] ||
                  (ln[r] = window.setTimeout(() => {
                    ((ln[r] = !0), un(t, i, !0));
                  }, e))
                );
              un(t, a, !1);
            } else if (n) {
              var o = n.key || n.keyCode,
                s = en[n.key] || en[n.keyCode];
              (!0 === ln[o] ? delete ln[o] : ln[o] && (clearTimeout(ln[o]), delete ln[o], un(n, s, !1)),
                un(n, s, !1, !0));
            }
          },
          cn = ({
            userKeyMap: e,
            keyHoldOptions: t,
            ownerContext: r = e => {
              e();
            },
          } = {}) => {
            (e && nn(e, en), null != t && t.userKeyHoldMap && nn(t.userKeyHoldMap, tn));
            var i = (null == t ? void 0 : t.holdThreshold) || 500,
              a = dn.bind(null, i),
              o = e =>
                r(() => {
                  a(e, void 0);
                }),
              s = e =>
                r(() => {
                  a(void 0, e);
                });
            return (
              document.addEventListener("keyup", s),
              document.addEventListener("keydown", o),
              {
                cleanup: () => {
                  (document.removeEventListener("keydown", o), document.removeEventListener("keyup", s));
                  for (var e = 0, t = Object.entries(ln); e < t.length; e++) {
                    var r = n(t[e], 2),
                      i = (r[0], r[1]);
                    i && !0 !== i && clearTimeout(i);
                  }
                },
                focusPath: () => an,
              }
            );
          };
        var hn = new (class {
            constructor() {
              (s(this, "nodeConfigs", []), s(this, "isRegistered", !1), s(this, "stage", void 0));
            }
            register(e) {
              this.isRegistered ||
                ((this.isRegistered = !0), (this.stage = e), e.animationManager.registerAnimation(this));
            }
            add(e, t, n, r) {
              var i,
                a,
                o = this.nodeConfigs.find(n => n.node === e && n.propName === t),
                s = null !== (i = r.duration) && void 0 !== i ? i : 0,
                u = null !== (a = r.delay) && void 0 !== a ? a : 0,
                l = r.easing || "linear",
                d = B(l),
                c = n,
                h = e[t];
              o
                ? ((o.duration = s),
                  (o.delay = u),
                  (o.easing = l),
                  (o.timingFunction = d),
                  (o.targetValue = c),
                  (o.startValue = h),
                  (o.progress = 0),
                  (o.delayFor = u))
                : this.nodeConfigs.push({
                    node: e,
                    duration: s,
                    delay: u,
                    easing: l,
                    progress: 0,
                    delayFor: u,
                    timingFunction: d,
                    propName: t,
                    startValue: h,
                    targetValue: c,
                  });
            }
            update(e) {
              for (var t = this.nodeConfigs.length - 1; t >= 0; t--) {
                var n = this.nodeConfigs[t],
                  r = n.node,
                  i = n.duration,
                  a = n.timingFunction,
                  o = n.propName,
                  s = n.startValue,
                  u = n.targetValue,
                  l = e;
                if (n.delayFor > 0) {
                  if (((n.delayFor -= l), n.delayFor >= 0)) continue;
                  ((l = -n.delayFor), (n.delayFor = 0));
                }
                i > 0
                  ? ((n.progress += l / i), (n.progress = Math.max(0, Math.min(1, n.progress))))
                  : 0 === i && n.delayFor <= 0 && (n.progress = 1);
                var c,
                  h = a(n.progress) || n.progress,
                  p = void 0;
                if (
                  ((p = 1 === n.progress ? u : o.includes("color") ? d(s, u, h) : s + (u - s) * h),
                  (r.lng[o] = p),
                  1 === n.progress && this.nodeConfigs.splice(t, 1),
                  0 === this.nodeConfigs.length)
                )
                  (null === (c = this.stage) || void 0 === c || c.animationManager.unregisterAnimation(this),
                    (this.isRegistered = !1));
              }
            }
          })(),
          pn = !1,
          fn = new Set();
        function gn() {
          pn = !1;
          var e = [...fn];
          fn.clear();
          for (var t = e.length - 1; t >= 0; t--) {
            e[t].updateLayout();
          }
        }
        function mn(e) {
          (fn.add(e), pn || ((pn = !0), queueMicrotask(gn)));
        }
        function vn(e, t) {
          var n = [];
          for (var r in t) {
            var i = t[r];
            ("rounded" === r && (r = "radius"), "object" == typeof i && n.push(Nt.createEffect(r, i, r)));
          }
          return Nt.createShader("DynamicShader", { effects: n });
        }
        function yn(e = "") {
          return {
            set(n) {
              ("number" == typeof n && (n = { width: n, color: 255 }),
                (this.effects = this.effects
                  ? t(t({}, this.effects || {}), { [`border${e}`]: n })
                  : { [`border${e}`]: n }));
            },
            get() {
              var t;
              return null === (t = this.effects) || void 0 === t ? void 0 : t[`border${e}`];
            },
          };
        }
        class bn extends Object {
          constructor(e) {
            (super(),
              (this._type = "text" === e ? jt : Bt),
              (this.rendered = !1),
              (this.lng = {}),
              (this.children = []));
          }
          get effects() {
            return this._effects;
          }
          set effects(e) {
            ((this._effects = e), Ot && this.rendered && (this.lng.shader = vn(0, e)));
          }
          set id(e) {
            var n;
            ((this._id = e),
              null !== (n = Ut.rendererOptions) &&
                void 0 !== n &&
                n.inspector &&
                (this.data = t(t({}, this.data), {}, { testId: e })));
          }
          get id() {
            return this._id;
          }
          get parent() {
            return this._parent;
          }
          set parent(e) {
            var t;
            ((this._parent = e), this.rendered && null != e && e.rendered) &&
              (this.lng.parent = null !== (t = e.lng) && void 0 !== t ? t : null);
          }
          insertChild(e, t) {
            if (
              (e.parent && (e.parent.removeChild(e), this.rendered || (this._hasRenderedChildren = !0)),
              (e.parent = this),
              t)
            ) {
              this.removeChild(e);
              var n = this.children.indexOf(t);
              if (n >= 0) return void this.children.splice(n, 0, e);
            }
            this.children.push(e);
          }
          removeChild(e) {
            var t,
              n = this.children.indexOf(e);
            n >= 0 && (this.children.splice(n, 1), null === (t = e.onRemove) || void 0 === t || t.call(e, e));
          }
          get selectedNode() {
            for (var e = this.selected || 0; e < this.children.length; e++) {
              var t = this.children[e];
              if (Wt(t)) return ((this.selected = e), t);
            }
          }
          set shader(e) {
            this.lng.shader = Gt(e) ? Nt.createShader(...e) : e;
          }
          _sendToLightningAnimatable(e, t) {
            var n = this;
            if (
              this.transition &&
              this.rendered &&
              Ut.animationsEnabled &&
              (!0 === this.transition || this.transition[e])
            ) {
              var r = !0 === this.transition || !0 === this.transition[e] ? void 0 : this.transition[e];
              if (Ut.simpleAnimationsEnabled)
                return (hn.add(this, e, t, r || this.animationSettings), void hn.register(Nt.stage));
              var i = this.animate({ [e]: t }, r);
              if (this.onAnimation)
                for (
                  var a = Object.keys(this.onAnimation),
                    o = function () {
                      var r = u[s],
                        a = n.onAnimation[r];
                      i.on(r, (r, i) => {
                        a.call(n, r, e, t, i);
                      });
                    },
                    s = 0,
                    u = a;
                  s < u.length;
                  s++
                )
                  o();
              return i.start();
            }
            this.lng[e] = t;
          }
          animate(e, t) {
            return this.lng.animate(e, t || this.animationSettings || {});
          }
          chain(e, t) {
            return (
              this._animationRunning && ((this._animationQueue = []), (this._animationRunning = !1)),
              t
                ? (this._animationQueueSettings = t)
                : this._animationQueueSettings ||
                  (this._animationQueueSettings = t || this.animationSettings),
              (t = t || this._animationQueueSettings),
              (this._animationQueue = this._animationQueue || []),
              this._animationQueue.push({ props: e, animationSettings: t }),
              this
            );
          }
          start() {
            var e = this;
            return o(
              r().m(function t() {
                var n;
                return r().w(function (t) {
                  for (;;)
                    switch (t.n) {
                      case 0:
                        n = e._animationQueue.shift();
                      case 1:
                        if (!n) {
                          t.n = 3;
                          break;
                        }
                        return (
                          (e._animationRunning = !0),
                          (t.n = 2),
                          e.animate(n.props, n.animationSettings).start().waitUntilStopped()
                        );
                      case 2:
                        ((n = e._animationQueue.shift()), (t.n = 1));
                        break;
                      case 3:
                        ((e._animationRunning = !1), (e._animationQueueSettings = void 0));
                      case 4:
                        return t.a(2);
                    }
                }, t);
              }),
            )();
          }
          emit(e, ...t) {
            for (var n = this, r = `on${e.charAt(0).toUpperCase()}${e.slice(1)}`; n; ) {
              var i = n[r];
              if (Ht(i) && !0 === i.call(n, this, ...t)) return !0;
              n = n.parent;
            }
            return !1;
          }
          setFocus() {
            if (this.rendered) {
              if (void 0 !== this.forwardFocus)
                if (Vt(this.forwardFocus)) {
                  if (!1 !== this.forwardFocus.call(this, this)) return;
                } else {
                  var e = "number" == typeof this.forwardFocus ? this.forwardFocus : null,
                    t = this.children;
                  if (null !== e && e < t.length) {
                    var n = t[e];
                    return void (Wt(n) && n.setFocus());
                  }
                }
              queueMicrotask(() => {
                return (on((e = this), Qt), (Qt = e), void Ut.setActiveElement(e));
                var e;
              });
            } else this._autofocus = !0;
          }
          _layoutOnLoad() {
            this.lng.on("loaded", () => {
              this.parent.updateLayout();
            });
          }
          getText() {
            for (var e = "", t = 0; t < this.children.length; t++) e += this.children[t].text;
            return e;
          }
          destroy() {
            if (this.onDestroy) {
              var e = this.onDestroy(this);
              e instanceof Promise ? e.then(() => this._destroy()) : this._destroy();
            } else this._destroy();
          }
          _destroy() {
            var e;
            Xt(this.lng) &&
              (this.lng.destroy(),
              null !== (e = this.parent) && void 0 !== e && e.requiresLayout() && this.parent.updateLayout());
          }
          set style(e) {
            if ((!Ut.lockStyles || !this._style) && e)
              for (var t in ((this._style = e), this._style))
                void 0 === this[t] && (this[t] = this._style[t]);
          }
          get style() {
            return this._style;
          }
          get hasChildren() {
            return this.children.length > 0;
          }
          set src(e) {
            "string" == typeof e
              ? ((this.lng.src = e), !this.color && this.rendered && (this.color = 4294967295))
              : (this.color = 0);
          }
          get src() {
            return this.lng.src;
          }
          getChildById(e) {
            return this.children.find(t => t.id === e);
          }
          searchChildrenById(e) {
            for (var t = 0; t < this.children.length; t++) {
              var n = this.children[t];
              if (Wt(n)) {
                if (n.id === e) return n;
                var r = n.searchChildrenById(e);
                if (r) return r;
              }
            }
          }
          set states(e) {
            ((this._states = this._states ? this._states.merge(e) : new $t(this._stateChanged.bind(this), e)),
              this.rendered && this._stateChanged());
          }
          get states() {
            return ((this._states = this._states || new $t(this._stateChanged.bind(this))), this._states);
          }
          get animationSettings() {
            return this._animationSettings || Ut.animationSettings;
          }
          set animationSettings(e) {
            this._animationSettings = e;
          }
          set hidden(e) {
            this.alpha = e ? 0 : 1;
          }
          get hidden() {
            return 0 === this.alpha;
          }
          get h() {
            return this.height;
          }
          set h(e) {
            this.height = e;
          }
          get w() {
            return this.width;
          }
          set w(e) {
            this.width = e;
          }
          set autofocus(e) {
            ((this._autofocus = e), e && queueMicrotask(() => this.setFocus()));
          }
          get autofocus() {
            return this._autofocus;
          }
          requiresLayout() {
            return "flex" === this.display || this.onLayout;
          }
          set updateLayoutOn(e) {
            this.updateLayout();
          }
          get updateLayoutOn() {
            return null;
          }
          updateLayout() {
            if (this.hasChildren) {
              if ("flex" === this.display && this.flexGrow && 0 === this.width) return;
              var e = "flex" === this.display && Jt(this);
              fn.delete(this);
              var t = Vt(this.onLayout) && this.onLayout.call(this, this);
              ((e || t) && this.parent && mn(this.parent),
                !0 === this._containsFlexGrow &&
                  this.children.forEach(e => {
                    "flex" === e.display &&
                      Wt(e) &&
                      (Jt(e), Vt(e.onLayout) && e.onLayout.call(e, e), mn(this));
                  }));
            }
          }
          _stateChanged() {
            if (this.forwardStates) {
              var e = this.states.slice();
              this.children.forEach(t => {
                t.states = e;
              });
            }
            var n = this.states;
            if (
              this._undoStyles ||
              (function (e, t) {
                var n,
                  r = u(t);
                try {
                  for (r.s(); !(n = r.n()).done; ) if (n.value in e) return !0;
                } catch (i) {
                  r.e(i);
                } finally {
                  r.f();
                }
                return !1;
              })(this, n)
            ) {
              var r;
              this._undoStyles &&
                this._undoStyles.length &&
                ((r = {}),
                this._undoStyles.forEach(e => {
                  r[e] = this.style[e];
                }));
              var i,
                a = n.length;
              if (0 === a) return (Object.assign(this, r), void (this._undoStyles = []));
              (1 === a
                ? ((i = this[n[0]]), (i = r ? t(t({}, r), i) : i))
                : (i = n.reduce((e, n) => {
                    var r = this[n];
                    return r ? t(t({}, e), r) : e;
                  }, r || {})),
                i
                  ? ((this._undoStyles = Object.keys(i)),
                    void 0 !== i.transition && (this.transition = i.transition),
                    Object.assign(this, i))
                  : (this._undoStyles = []));
            }
          }
          render(e) {
            var t,
              r,
              i,
              a = this,
              o = this.parent;
            if (o)
              if (o.rendered)
                if ((o.requiresLayout() && fn.add(o), this.rendered)) {
                  var s;
                  null === (s = this.onRender) || void 0 === s || s.call(this, this);
                } else {
                  this._states && this._stateChanged();
                  var l = a.lng,
                    d = o.width || 0,
                    c = o.height || 0;
                  if (
                    ((l.x = l.x || 0),
                    (l.y = l.y || 0),
                    (l.parent = o.lng),
                    (this.right || 0 === this.right) && ((l.x = d - this.right), (l.mountX = 1)),
                    (this.bottom || 0 === this.bottom) && ((l.y = c - this.bottom), (l.mountY = 1)),
                    this.center && (this.centerX = this.centerY = !0),
                    this.centerX && ((l.x += d / 2), (l.mountX = 0.5)),
                    this.centerY && ((l.y += c / 2), (l.mountY = 0.5)),
                    Kt(a))
                  ) {
                    var h = l;
                    if (Ut.fontSettings)
                      for (var p in Ut.fontSettings) void 0 === h[p] && (h[p] = Ut.fontSettings[p]);
                    ((h.text = h.text || a.getText()),
                      h.textAlign && !h.contain && console.warn("Text align requires contain: ", a.getText()),
                      h.contain &&
                        (h.width || (h.width = d - h.x - (h.marginRight || 0)),
                        "both" !== h.contain || h.height || h.maxLines
                          ? 1 === h.maxLines && (h.height = h.height || h.lineHeight || h.fontSize)
                          : (h.height = c - h.y - (h.marginBottom || 0))),
                      Ot && a._effects && (l.shader = vn(0, a._effects)),
                      (a.lng = Nt.createTextNode(l)),
                      o.requiresLayout() && ((l.width && l.height) || a._layoutOnLoad()));
                  } else if (
                    (l.texture ||
                      (isNaN(l.width) && ((l.width = a.flexGrow ? 0 : d - l.x), (a._calcWidth = !0)),
                      isNaN(l.height) && ((l.height = c - l.y), (a._calcHeight = !0)),
                      l.rtt && !l.color && (l.color = 4294967295),
                      l.color || l.src || (l.color = 0)),
                    Ot && a._effects && (l.shader = vn(0, a._effects)),
                    (a.lng = Nt.createNode(l)),
                    a._hasRenderedChildren)
                  ) {
                    a._hasRenderedChildren = !1;
                    var f,
                      g = u(a.children);
                    try {
                      for (g.s(); !(f = g.n()).done; ) {
                        var m = f.value;
                        Wt(m) && Xt(m.lng) && (m.lng.parent = a.lng);
                      }
                    } catch (S) {
                      g.e(S);
                    } finally {
                      g.f();
                    }
                  }
                  if (
                    ((a.rendered = !0),
                    a.autosize && o.requiresLayout() && a._layoutOnLoad(),
                    null === (t = this.onCreate) || void 0 === t || t.call(this, this),
                    null === (r = this.onRender) || void 0 === r || r.call(this, this),
                    a.onEvent)
                  )
                    for (
                      var v = function () {
                          var e = n(b[y], 2),
                            t = e[0],
                            r = e[1];
                          a.lng.on(t, (e, t) => r.call(a, a, t));
                        },
                        y = 0,
                        b = Object.entries(a.onEvent);
                      y < b.length;
                      y++
                    )
                      v();
                  if (
                    (null !== (i = a.lng) && void 0 !== i && i.div && (a.lng.div.element = a), a._type === Bt)
                  )
                    for (var x = a.children.length, T = 0; T < x; T++) {
                      var w = a.children[T];
                      Wt(w) && w.render();
                    }
                  (e && !pn && ((pn = !0), queueMicrotask(gn)), a._autofocus && a.setFocus());
                }
              else console.warn("Parent not rendered yet: ", this);
            else console.warn("Parent not set - no node created for: ", this);
          }
        }
        for (
          var xn = function () {
              var e = wn[Tn];
              Object.defineProperty(bn.prototype, e, {
                get() {
                  return this.lng[e];
                },
                set(t) {
                  this._sendToLightningAnimatable(e, t);
                },
              });
            },
            Tn = 0,
            wn = [
              "alpha",
              "color",
              "colorTop",
              "colorRight",
              "colorLeft",
              "colorBottom",
              "colorTl",
              "colorTr",
              "colorBl",
              "colorBr",
              "height",
              "fontSize",
              "lineHeight",
              "mount",
              "mountX",
              "mountY",
              "pivot",
              "pivotX",
              "pivotY",
              "rotation",
              "scale",
              "scaleX",
              "scaleY",
              "width",
              "worldX",
              "worldY",
              "x",
              "y",
              "zIndex",
              "zIndexLocked",
            ];
          Tn < wn.length;
          Tn++
        )
          xn();
        for (
          var Sn = function () {
              var e = En[An];
              Object.defineProperty(bn.prototype, e, {
                get() {
                  return this.lng[e];
                },
                set(t) {
                  this.lng[e] = t;
                },
              });
            },
            An = 0,
            En = [
              "absX",
              "absY",
              "autosize",
              "clipping",
              "contain",
              "data",
              "destroyed",
              "fontFamily",
              "fontStretch",
              "fontStyle",
              "fontWeight",
              "imageType",
              "letterSpacing",
              "maxLines",
              "offsetY",
              "overflowSuffix",
              "preventCleanup",
              "rtt",
              "scrollable",
              "scrollY",
              "srcHeight",
              "srcWidth",
              "srcX",
              "srcY",
              "strictBounds",
              "text",
              "textAlign",
              "textBaseline",
              "textOverflow",
              "texture",
              "textureOptions",
              "verticalAlign",
              "wordWrap",
            ];
          An < En.length;
          An++
        )
          Sn();
        function kn(e) {
          return {
            set(n) {
              this.effects = this.effects ? t(t({}, this.effects), {}, { [e]: n }) : { [e]: n };
            },
            get() {
              var t;
              return null === (t = this.effects) || void 0 === t ? void 0 : t[e];
            },
          };
        }
        Object.defineProperties(bn.prototype, {
          border: yn(),
          borderLeft: yn("Left"),
          borderRight: yn("Right"),
          borderTop: yn("Top"),
          borderBottom: yn("Bottom"),
          linearGradient: kn("linearGradient"),
          radialGradient: kn("radialGradient"),
          radialProgress: kn("radialProgressGradient"),
          rounded: {
            set(e) {
              this.effects = this.effects
                ? t(t({}, this.effects), {}, { radius: { radius: e } })
                : { radius: { radius: e } };
            },
            get() {
              var e;
              return null === (e = this.effects) || void 0 === e || null === (e = e.radius) || void 0 === e
                ? void 0
                : e.radius;
            },
          },
          borderRadius: {
            set(e) {
              this.effects = this.effects
                ? t(t({}, this.effects), {}, { radius: { radius: e } })
                : { radius: { radius: e } };
            },
            get() {
              var e;
              return null === (e = this.effects) || void 0 === e || null === (e = e.radius) || void 0 === e
                ? void 0
                : e.radius;
            },
          },
        });
        var In = Symbol("solid-proxy"),
          Cn = "function" == typeof Proxy,
          Mn = Symbol("solid-track"),
          Rn = { equals: (e, t) => e === t },
          _n = dr,
          Dn = 1,
          Pn = 2,
          Ln = { owned: null, cleanups: null, context: null, owner: null },
          Nn = {},
          On = null,
          Un = null,
          Bn = null,
          jn = null,
          Fn = null,
          Vn = 0;
        function Hn(e, t) {
          var n = Bn,
            r = On,
            i = 0 === e.length,
            a = r,
            o = i ? Ln : { owned: null, cleanups: null, context: a ? a.context : null, owner: a },
            s = i ? e : () => e(() => qn(() => fr(o)));
          ((On = o), (Bn = null));
          try {
            return lr(s, !0);
          } finally {
            ((Bn = n), (On = r));
          }
        }
        function Gn(e, t) {
          var n = {
            value: e,
            observers: null,
            observerSlots: null,
            comparator: (t = t ? Object.assign({}, Rn, t) : Rn).equals || void 0,
          };
          return [ir.bind(n), e => ("function" == typeof e && (e = e(n.value)), ar(n, e))];
        }
        function zn(e, t, n) {
          or(sr(e, t, !1, Dn));
        }
        function Xn(e, t, n) {
          _n = cr;
          var r = sr(e, t, !1, Dn);
          ((r.user = !0), Fn ? Fn.push(r) : or(r));
        }
        function Wn(e, t, n) {
          n = n ? Object.assign({}, Rn, n) : Rn;
          var r = sr(e, t, !0, 0);
          return (
            (r.observers = null),
            (r.observerSlots = null),
            (r.comparator = n.equals || void 0),
            or(r),
            ir.bind(r)
          );
        }
        function Kn(e, t, r) {
          var i, a, o;
          "function" == typeof t ? ((i = e), (a = t), (o = {})) : ((i = !0), (a = e), (o = t || {}));
          var s = null,
            l = Nn,
            d = !1,
            c = "initialValue" in o,
            h = "function" == typeof i && Wn(i),
            p = new Set(),
            f = n((o.storage || Gn)(o.initialValue), 2),
            g = f[0],
            m = f[1],
            v = n(Gn(void 0), 2),
            y = v[0],
            b = v[1],
            x = n(Gn(void 0, { equals: !1 }), 2),
            T = (x[0], x[1]),
            w = n(Gn(c ? "ready" : "unresolved"), 2),
            S = w[0],
            A = w[1];
          function E(e, t, n, r) {
            return (
              s === e &&
                ((s = null),
                void 0 !== r && (c = !0),
                (e !== l && t !== l) || !o.onHydrated || queueMicrotask(() => o.onHydrated(r, { value: t })),
                (l = Nn),
                (function (e, t) {
                  lr(() => {
                    (void 0 === t && m(() => e),
                      A(void 0 !== t ? "errored" : c ? "ready" : "unresolved"),
                      b(t));
                    var n,
                      r = u(p.keys());
                    try {
                      for (r.s(); !(n = r.n()).done; ) {
                        n.value.decrement();
                      }
                    } catch (t) {
                      r.e(t);
                    } finally {
                      r.f();
                    }
                    p.clear();
                  }, !1);
                })(t, n)),
              t
            );
          }
          function k() {
            var e = g(),
              t = y();
            if (void 0 !== t && !s) throw t;
            return (Bn && Bn.user, e);
          }
          function I(e = !0) {
            if (!1 === e || !d) {
              d = !1;
              var t = h ? h() : i;
              if (null != t && !1 !== t) {
                var n,
                  r,
                  o =
                    l !== Nn
                      ? l
                      : qn(() => {
                          try {
                            return a(t, { value: g(), refetching: e });
                          } catch (r) {
                            n = r;
                          }
                        });
                if (void 0 === n)
                  return (r = o) && "object" == typeof r && "then" in r
                    ? ((s = o),
                      "v" in o
                        ? (1 === o.s ? E(s, o.v, void 0, t) : E(s, void 0, gr(o.v), t), o)
                        : ((d = !0),
                          queueMicrotask(() => (d = !1)),
                          lr(() => {
                            (A(c ? "refreshing" : "pending"), T());
                          }, !1),
                          o.then(
                            e => E(o, e, void 0, t),
                            e => E(o, void 0, gr(e), t),
                          )))
                    : (E(s, o, void 0, t), o);
                E(s, void 0, gr(n), t);
              } else E(s, qn(g));
            }
          }
          Object.defineProperties(k, {
            state: { get: () => S() },
            error: { get: () => y() },
            loading: {
              get() {
                var e = S();
                return "pending" === e || "refreshing" === e;
              },
            },
            latest: {
              get() {
                if (!c) return k();
                var e = y();
                if (e && !s) throw e;
                return g();
              },
            },
          });
          var C = On;
          return (
            h
              ? (function (e, t) {
                  or(sr(e, t, !0, Dn));
                })(() => ((C = On), I(!1)))
              : I(!1),
            [k, { refetch: e => Zn(C, () => I(e)), mutate: m }]
          );
        }
        function qn(e) {
          if (null === Bn) return e();
          var t = Bn;
          Bn = null;
          try {
            return e();
          } finally {
            Bn = t;
          }
        }
        function Yn(e, t, n) {
          var r,
            i = Array.isArray(e),
            a = n && n.defer;
          return n => {
            var o;
            if (i) {
              o = Array(e.length);
              for (var s = 0; s < e.length; s++) o[s] = e[s]();
            } else o = e();
            if (a) return ((a = !1), n);
            var u = qn(() => t(o, r, n));
            return ((r = o), u);
          };
        }
        function $n(e) {
          Xn(() => qn(e));
        }
        function Jn(e) {
          return (null === On || (null === On.cleanups ? (On.cleanups = [e]) : On.cleanups.push(e)), e);
        }
        function Qn() {
          return On;
        }
        function Zn(e, t) {
          var n = On,
            r = Bn;
          ((On = e), (Bn = null));
          try {
            return lr(t, !0);
          } catch (i) {
            mr(i);
          } finally {
            ((On = n), (Bn = r));
          }
        }
        var er = n(Gn(!1), 2);
        (er[0], er[1]);
        function tr(e, t) {
          var n = Symbol("context");
          return { id: n, Provider: yr(n), defaultValue: e };
        }
        function nr(e) {
          var t;
          return On && On.context && void 0 !== (t = On.context[e.id]) ? t : e.defaultValue;
        }
        function rr(e) {
          var t = Wn(e),
            n = Wn(() => vr(t()));
          return (
            (n.toArray = () => {
              var e = n();
              return Array.isArray(e) ? e : null != e ? [e] : [];
            }),
            n
          );
        }
        function ir() {
          if (this.sources && this.state)
            if (this.state === Dn) or(this);
            else {
              var e = jn;
              ((jn = null), lr(() => hr(this), !1), (jn = e));
            }
          if (Bn) {
            var t = this.observers ? this.observers.length : 0;
            (Bn.sources
              ? (Bn.sources.push(this), Bn.sourceSlots.push(t))
              : ((Bn.sources = [this]), (Bn.sourceSlots = [t])),
              this.observers
                ? (this.observers.push(Bn), this.observerSlots.push(Bn.sources.length - 1))
                : ((this.observers = [Bn]), (this.observerSlots = [Bn.sources.length - 1])));
          }
          return this.value;
        }
        function ar(e, t, n) {
          var r = e.value;
          return (
            (e.comparator && e.comparator(r, t)) ||
              ((e.value = t),
              e.observers &&
                e.observers.length &&
                lr(() => {
                  for (var t = 0; t < e.observers.length; t += 1) {
                    var n = e.observers[t],
                      r = Un && Un.running;
                    (r && Un.disposed.has(n),
                      (r ? n.tState : n.state) || (n.pure ? jn.push(n) : Fn.push(n), n.observers && pr(n)),
                      r || (n.state = Dn));
                  }
                  if (jn.length > 1e6) throw ((jn = []), new Error());
                }, !1)),
            t
          );
        }
        function or(e) {
          if (e.fn) {
            fr(e);
            var t = Vn;
            !(function (e, t, n) {
              var r,
                i = On,
                a = Bn;
              Bn = On = e;
              try {
                r = e.fn(t);
              } catch (o) {
                return (
                  e.pure && ((e.state = Dn), e.owned && e.owned.forEach(fr), (e.owned = null)),
                  (e.updatedAt = n + 1),
                  mr(o)
                );
              } finally {
                ((Bn = a), (On = i));
              }
              (!e.updatedAt || e.updatedAt <= n) &&
                (null != e.updatedAt && "observers" in e ? ar(e, r) : (e.value = r), (e.updatedAt = n));
            })(e, e.value, t);
          }
        }
        function sr(e, t, n, r = Dn, i) {
          var a = {
            fn: e,
            state: r,
            updatedAt: null,
            owned: null,
            sources: null,
            sourceSlots: null,
            cleanups: null,
            value: t,
            owner: On,
            context: On ? On.context : null,
            pure: n,
          };
          return (null === On || (On !== Ln && (On.owned ? On.owned.push(a) : (On.owned = [a]))), a);
        }
        function ur(e) {
          if (0 !== e.state) {
            if (e.state === Pn) return hr(e);
            if (e.suspense && qn(e.suspense.inFallback)) return e.suspense.effects.push(e);
            for (var t = [e]; (e = e.owner) && (!e.updatedAt || e.updatedAt < Vn); ) e.state && t.push(e);
            for (var n = t.length - 1; n >= 0; n--)
              if ((e = t[n]).state === Dn) or(e);
              else if (e.state === Pn) {
                var r = jn;
                ((jn = null), lr(() => hr(e, t[0]), !1), (jn = r));
              }
          }
        }
        function lr(e, t) {
          if (jn) return e();
          var n = !1;
          (t || (jn = []), Fn ? (n = !0) : (Fn = []), Vn++);
          try {
            var r = e();
            return (
              (function (e) {
                jn && (dr(jn), (jn = null));
                if (e) return;
                var t = Fn;
                ((Fn = null), t.length && lr(() => _n(t), !1));
              })(n),
              r
            );
          } catch (i) {
            (n || (Fn = null), (jn = null), mr(i));
          }
        }
        function dr(e) {
          for (var t = 0; t < e.length; t++) ur(e[t]);
        }
        function cr(e) {
          var t,
            n = 0;
          for (t = 0; t < e.length; t++) {
            var r = e[t];
            r.user ? (e[n++] = r) : ur(r);
          }
          for (t = 0; t < n; t++) ur(e[t]);
        }
        function hr(e, t) {
          e.state = 0;
          for (var n = 0; n < e.sources.length; n += 1) {
            var r = e.sources[n];
            if (r.sources) {
              var i = r.state;
              i === Dn ? r !== t && (!r.updatedAt || r.updatedAt < Vn) && ur(r) : i === Pn && hr(r, t);
            }
          }
        }
        function pr(e) {
          for (var t = 0; t < e.observers.length; t += 1) {
            var n = e.observers[t];
            n.state || ((n.state = Pn), n.pure ? jn.push(n) : Fn.push(n), n.observers && pr(n));
          }
        }
        function fr(e) {
          var t;
          if (e.sources)
            for (; e.sources.length; ) {
              var n = e.sources.pop(),
                r = e.sourceSlots.pop(),
                i = n.observers;
              if (i && i.length) {
                var a = i.pop(),
                  o = n.observerSlots.pop();
                r < i.length && ((a.sourceSlots[o] = r), (i[r] = a), (n.observerSlots[r] = o));
              }
            }
          if (e.tOwned) {
            for (t = e.tOwned.length - 1; t >= 0; t--) fr(e.tOwned[t]);
            delete e.tOwned;
          }
          if (e.owned) {
            for (t = e.owned.length - 1; t >= 0; t--) fr(e.owned[t]);
            e.owned = null;
          }
          if (e.cleanups) {
            for (t = e.cleanups.length - 1; t >= 0; t--) e.cleanups[t]();
            e.cleanups = null;
          }
          e.state = 0;
        }
        function gr(e) {
          return e instanceof Error ? e : new Error("string" == typeof e ? e : "Unknown error", { cause: e });
        }
        function mr(e, t = On) {
          throw gr(e);
        }
        function vr(e) {
          if ("function" == typeof e && !e.length) return vr(e());
          if (Array.isArray(e)) {
            for (var t = [], n = 0; n < e.length; n++) {
              var r = vr(e[n]);
              Array.isArray(r) ? t.push.apply(t, r) : t.push(r);
            }
            return t;
          }
          return e;
        }
        function yr(e, n) {
          return function (n) {
            var r;
            return (
              zn(
                () =>
                  (r = qn(
                    () => ((On.context = t(t({}, On.context), {}, { [e]: n.value })), rr(() => n.children)),
                  )),
                void 0,
              ),
              r
            );
          };
        }
        var br = Symbol("fallback");
        function xr(e) {
          for (var t = 0; t < e.length; t++) e[t]();
        }
        function Tr(e, t) {
          return qn(() => e(t || {}));
        }
        function wr() {
          return !0;
        }
        var Sr = {
          get: (e, t, n) => (t === In ? n : e.get(t)),
          has: (e, t) => t === In || e.has(t),
          set: wr,
          deleteProperty: wr,
          getOwnPropertyDescriptor: (e, t) => ({
            configurable: !0,
            enumerable: !0,
            get: () => e.get(t),
            set: wr,
            deleteProperty: wr,
          }),
          ownKeys: e => e.keys(),
        };
        function Ar(e) {
          return (e = "function" == typeof e ? e() : e) ? e : {};
        }
        function Er() {
          for (var e = 0, t = this.length; e < t; ++e) {
            var n = this[e]();
            if (void 0 !== n) return n;
          }
        }
        function kr(...e) {
          for (var t = !1, n = 0; n < e.length; n++) {
            var r = e[n];
            ((t = t || (!!r && In in r)), (e[n] = "function" == typeof r ? ((t = !0), Wn(r)) : r));
          }
          if (Cn && t)
            return new Proxy(
              {
                get(t) {
                  for (var n = e.length - 1; n >= 0; n--) {
                    var r = Ar(e[n])[t];
                    if (void 0 !== r) return r;
                  }
                },
                has(t) {
                  for (var n = e.length - 1; n >= 0; n--) if (t in Ar(e[n])) return !0;
                  return !1;
                },
                keys() {
                  for (var t = [], n = 0; n < e.length; n++) t.push(...Object.keys(Ar(e[n])));
                  return [...new Set(t)];
                },
              },
              Sr,
            );
          for (var i = {}, a = Object.create(null), o = e.length - 1; o >= 0; o--) {
            var s = e[o];
            if (s)
              for (
                var u = Object.getOwnPropertyNames(s),
                  l = function () {
                    var e = u[d];
                    if ("__proto__" === e || "constructor" === e) return 1;
                    var t = Object.getOwnPropertyDescriptor(s, e);
                    if (a[e]) {
                      var n = i[e];
                      n && (t.get ? n.push(t.get.bind(s)) : void 0 !== t.value && n.push(() => t.value));
                    } else
                      a[e] = t.get
                        ? { enumerable: !0, configurable: !0, get: Er.bind((i[e] = [t.get.bind(s)])) }
                        : void 0 !== t.value
                          ? t
                          : void 0;
                  },
                  d = u.length - 1;
                d >= 0;
                d--
              )
                l();
          }
          for (var c = {}, h = Object.keys(a), p = h.length - 1; p >= 0; p--) {
            var f = h[p],
              g = a[f];
            g && g.get ? Object.defineProperty(c, f, g) : (c[f] = g ? g.value : void 0);
          }
          return c;
        }
        function Ir(e) {
          var t = "fallback" in e && { fallback: () => e.fallback };
          return Wn(
            (function (e, t, r = {}) {
              var i = [],
                a = [],
                o = [],
                s = 0,
                u = t.length > 1 ? [] : null;
              return (
                Jn(() => xr(o)),
                () => {
                  var l,
                    d,
                    c = e() || [],
                    h = c.length;
                  return (
                    c[Mn],
                    qn(() => {
                      var e, t, n, f, g, m, v, y, b;
                      if (0 === h)
                        (0 !== s && (xr(o), (o = []), (i = []), (a = []), (s = 0), u && (u = [])),
                          r.fallback && ((i = [br]), (a[0] = Hn(e => ((o[0] = e), r.fallback()))), (s = 1)));
                      else if (0 === s) {
                        for (a = new Array(h), d = 0; d < h; d++) ((i[d] = c[d]), (a[d] = Hn(p)));
                        s = h;
                      } else {
                        for (
                          n = new Array(h),
                            f = new Array(h),
                            u && (g = new Array(h)),
                            m = 0,
                            v = Math.min(s, h);
                          m < v && i[m] === c[m];
                          m++
                        );
                        for (v = s - 1, y = h - 1; v >= m && y >= m && i[v] === c[y]; v--, y--)
                          ((n[y] = a[v]), (f[y] = o[v]), u && (g[y] = u[v]));
                        for (e = new Map(), t = new Array(y + 1), d = y; d >= m; d--)
                          ((b = c[d]), (l = e.get(b)), (t[d] = void 0 === l ? -1 : l), e.set(b, d));
                        for (l = m; l <= v; l++)
                          ((b = i[l]),
                            void 0 !== (d = e.get(b)) && -1 !== d
                              ? ((n[d] = a[l]), (f[d] = o[l]), u && (g[d] = u[l]), (d = t[d]), e.set(b, d))
                              : o[l]());
                        for (d = m; d < h; d++)
                          d in n
                            ? ((a[d] = n[d]), (o[d] = f[d]), u && ((u[d] = g[d]), u[d](d)))
                            : (a[d] = Hn(p));
                        ((a = a.slice(0, (s = h))), (i = c.slice(0)));
                      }
                      return a;
                    })
                  );
                  function p(e) {
                    if (((o[d] = e), u)) {
                      var r = n(Gn(d), 2),
                        i = r[0],
                        a = r[1];
                      return ((u[d] = a), t(c[d], i));
                    }
                    return t(c[d]);
                  }
                }
              );
            })(() => e.each, e.children, t || void 0),
          );
        }
        function Cr(e) {
          var t = e.keyed,
            n = Wn(() => e.when, void 0, void 0),
            r = t ? n : Wn(n, void 0, { equals: (e, t) => !e == !t });
          return Wn(
            () => {
              var i = r();
              if (i) {
                var a = e.children;
                return "function" == typeof a && a.length > 0
                  ? qn(() =>
                      a(
                        t
                          ? i
                          : () => {
                              if (!qn(r)) throw `Stale read from <${"Show"}>.`;
                              return n();
                            },
                      ),
                    )
                  : a;
              }
              return e.fallback;
            },
            void 0,
            void 0,
          );
        }
        var Mr = n(Gn(void 0), 2),
          Rr = Mr[0],
          _r = Mr[1];
        function Dr(e, n) {
          return e ? (n ? t(t({}, n), e) : e) : n;
        }
        var Pr = e => Wn(() => e());
        function Lr({
          createElement: e,
          createTextNode: t,
          isTextNode: n,
          replaceText: r,
          insertNode: i,
          removeNode: a,
          setProperty: o,
          getParentNode: s,
          getFirstChild: u,
          getNextSibling: l,
        }) {
          function d(e, t, n, r) {
            if ((void 0 === n || r || (r = []), "function" != typeof t)) return c(e, t, r, n);
            zn(r => c(e, t(), r, n), r);
          }
          function c(e, a, o, s, l) {
            for (; "function" == typeof o; ) o = o();
            if (a === o) return o;
            var d = typeof a,
              v = void 0 !== s;
            if ("string" === d || "number" === d)
              if (("number" === d && (a = a.toString()), v)) {
                var y = o[0];
                (y && n(y) ? r(y, a) : (y = t(a)), (o = f(e, o, s, y)));
              } else "" !== o && "string" == typeof o ? r(u(e), (o = a)) : (f(e, o, s, t(a)), (o = a));
            else if (null == a || "boolean" === d) o = f(e, o, s);
            else {
              if ("function" === d)
                return (
                  zn(() => {
                    for (var t = a(); "function" == typeof t; ) t = t();
                    o = c(e, t, o, s);
                  }),
                  () => o
                );
              if (Array.isArray(a)) {
                var b = [];
                if (h(b, a, l)) return (zn(() => (o = c(e, b, o, s, !0))), () => o);
                if (0 === b.length) {
                  var x = f(e, o, s);
                  if (v) return (o = x);
                } else
                  Array.isArray(o)
                    ? 0 === o.length
                      ? g(e, b, s)
                      : p(e, o, b)
                    : null == o || "" === o
                      ? g(e, b)
                      : p(e, (v && o) || [u(e)], b);
                o = b;
              } else {
                if (Array.isArray(o)) {
                  if (v) return (o = f(e, o, s, a));
                  f(e, o, null, a);
                } else null != o && "" !== o && u(e) ? m(e, a, u(e)) : i(e, a);
                o = a;
              }
            }
            return o;
          }
          function h(e, n, r) {
            for (var i = !1, a = 0, o = n.length; a < o; a++) {
              var s = n[a],
                u = void 0;
              if (null == s || !0 === s || !1 === s);
              else if (Array.isArray(s)) i = h(e, s) || i;
              else if ("string" == (u = typeof s) || "number" === u) e.push(t(s));
              else if ("function" === u)
                if (r) {
                  for (; "function" == typeof s; ) s = s();
                  i = h(e, Array.isArray(s) ? s : [s]) || i;
                } else (e.push(s), (i = !0));
              else e.push(s);
            }
            return i;
          }
          function p(e, t, n) {
            for (
              var r = n.length, o = t.length, s = r, u = 0, d = 0, c = l(t[o - 1]), h = null;
              u < o || d < s;
            )
              if (t[u] !== n[d]) {
                for (; t[o - 1] === n[s - 1]; ) (o--, s--);
                if (o === u) for (var p = s < r ? (d ? l(n[d - 1]) : n[s - d]) : c; d < s; ) i(e, n[d++], p);
                else if (s === d) for (; u < o; ) ((h && h.has(t[u])) || a(e, t[u]), u++);
                else if (t[u] === n[s - 1] && n[d] === t[o - 1]) {
                  var f = l(t[--o]);
                  (i(e, n[d++], l(t[u++])), i(e, n[--s], f), (t[o] = n[s]));
                } else {
                  if (!h) {
                    h = new Map();
                    for (var g = d; g < s; ) h.set(n[g], g++);
                  }
                  var v = h.get(t[u]);
                  if (null != v)
                    if (d < v && v < s) {
                      for (
                        var y = u, b = 1, x = void 0;
                        ++y < o && y < s && null != (x = h.get(t[y])) && x === v + b;
                      )
                        b++;
                      if (b > v - d) for (var T = t[u]; d < v; ) i(e, n[d++], T);
                      else m(e, n[d++], t[u++]);
                    } else u++;
                  else a(e, t[u++]);
                }
              } else (u++, d++);
          }
          function f(e, n, r, o) {
            if (void 0 === r) {
              for (var l; (l = u(e)); ) a(e, l);
              return (o && i(e, o), "");
            }
            var d = o || t("");
            if (n.length)
              for (var c = !1, h = n.length - 1; h >= 0; h--) {
                var p = n[h];
                if (d !== p) {
                  var f = s(p) === e;
                  c || h ? f && a(e, p) : f ? m(e, d, p) : i(e, d, r);
                } else c = !0;
              }
            else i(e, d, r);
            return [d];
          }
          function g(e, t, n) {
            for (var r = 0, a = t.length; r < a; r++) i(e, t[r], n);
          }
          function m(e, t, n) {
            (i(e, t, n), a(e, n));
          }
          function v(e, t, n = {}, r) {
            return (
              t || (t = {}),
              r || zn(() => (n.children = c(e, t.children, n.children))),
              zn(() => t.ref && t.ref(e)),
              zn(() => {
                for (var r in t)
                  if ("children" !== r && "ref" !== r) {
                    var i = t[r];
                    i !== n[r] && (o(e, r, i, n[r]), (n[r] = i));
                  }
              }),
              n
            );
          }
          return {
            render(e, t) {
              var n;
              return (
                Hn(r => {
                  ((n = r), d(t, e()));
                }),
                n
              );
            },
            insert: d,
            spread(e, t, n) {
              "function" == typeof t ? zn(r => v(e, t(), r, n)) : v(e, t, void 0, n);
            },
            createElement: e,
            createTextNode: t,
            insertNode: i,
            setProp: (e, t, n, r) => (o(e, t, n, r), n),
            mergeProps: kr,
            effect: zn,
            memo: Pr,
            createComponent: Tr,
            use: (e, t, n) => qn(() => e(t, n)),
          };
        }
        Object.defineProperty(bn.prototype, "preserve", {
          get() {
            return 0 === this._queueDelete;
          },
          set(e) {
            this._queueDelete = e ? 0 : void 0;
          },
        });
        var Nr = [];
        function Or() {
          var e,
            t = u(Nr);
          try {
            for (t.s(); !(e = t.n()).done; ) {
              var n = e.value;
              (Number(n._queueDelete) < 0 && n.destroy(), (n._queueDelete = void 0));
            }
          } catch (r) {
            t.e(r);
          } finally {
            t.f();
          }
          Nr.length = 0;
        }
        function Ur(e, t) {
          void 0 === e._queueDelete
            ? ((e._queueDelete = t), 1 === Nr.push(e) && queueMicrotask(Or))
            : (e._queueDelete += t);
        }
        var Br,
          jr = {
            createElement: e => new bn(e),
            createTextNode: e => ({ _type: Ft, text: e }),
            replaceText(e, t) {
              e.text = t;
              var n = e.parent;
              n.text = n.getText();
            },
            setProperty(e, t, n = !0) {
              e[t] = n;
            },
            insertNode(e, t, n) {
              var r = t.parent;
              (e.insertChild(t, n),
                t instanceof bn
                  ? (t.parent.rendered && t.render(!0), void 0 !== r && Ur(t, 1))
                  : Kt(e) && (e.text = e.getText()));
            },
            isTextNode: e => Kt(e),
            removeNode(e, t) {
              (e.removeChild(t), t instanceof bn ? Ur(t, -1) : Kt(e) && (e.text = e.getText()));
            },
            getParentNode: e => e.parent,
            getFirstChild: e => e.children[0],
            getNextSibling(e) {
              var t = e.parent.children || [],
                n = t.indexOf(e) + 1;
              if (n < t.length) return t[n];
            },
          },
          Fr = (function (e) {
            var t = Lr(e);
            return ((t.mergeProps = kr), t);
          })(jr),
          Vr = jr.createElement("App"),
          Hr = function (e) {
            return Fr.render(e, Vr);
          };
        var Gr = Fr.memo,
          zr = Fr.createComponent,
          Xr = Fr.createElement,
          Wr = Fr.spread,
          Kr = Fr.setProp,
          qr = Fr.mergeProps,
          Yr = [],
          $r = !1;
        function Jr() {
          $r &&
            Yr.length &&
            setTimeout(() => {
              var e = Yr.shift();
              e && (e(), Jr());
            }, Ut.taskDelay || 50);
        }
        Hn(() => {
          zn(() => {
            (Rr(), ($r = !1));
          });
        });
        var Qr,
          Zr = e => {
            var t = Xr("node");
            return (Wr(t, e, !1), t);
          },
          ei = e => {
            var t = Xr("text");
            return (Wr(t, e, !1), t);
          };
        function ti() {
          var e = new Set();
          var n = !1;
          return {
            subscribe: function (t) {
              return (e.add(t), () => e.delete(t));
            },
            confirm: function (r, i) {
              if (n) return !(n = !1);
              var a,
                o = {
                  to: r,
                  options: i,
                  defaultPrevented: !1,
                  preventDefault: () => (o.defaultPrevented = !0),
                },
                s = u(e);
              try {
                var l = function () {
                  var e = a.value;
                  e.listener(
                    t(
                      t({}, o),
                      {},
                      {
                        from: e.location,
                        retry: a => {
                          (a && (n = !0), e.navigate(r, t(t({}, i), {}, { resolve: !1 })));
                        },
                      },
                    ),
                  );
                };
                for (s.s(); !(a = s.n()).done; ) l();
              } catch (d) {
                s.e(d);
              } finally {
                s.f();
              }
              return !o.defaultPrevented;
            },
          };
        }
        function ni() {
          ((window.history.state && null != window.history.state._depth) ||
            window.history.replaceState(
              t(t({}, window.history.state), {}, { _depth: window.history.length - 1 }),
              "",
            ),
            (Qr = window.history.state._depth));
        }
        ni();
        var ri = /^(?:[a-z0-9]+:)?\/\//i,
          ii = /^\/+|(\/)\/+$/g;
        function ai(e, t = !1) {
          var n = e.replace(ii, "$1");
          return n ? (t || /^[?#]/.test(n) ? n : "/" + n) : "";
        }
        function oi(e, t, n) {
          if (!ri.test(t)) {
            var r = ai(e),
              i = n && ai(n),
              a = "";
            return (
              ((a =
                !i || t.startsWith("/") ? r : 0 !== i.toLowerCase().indexOf(r.toLowerCase()) ? r + i : i) ||
                "/") + ai(t, !a)
            );
          }
        }
        function si(e, t) {
          return ai(e).replace(/\/*(\*.*)?$/g, "") + ai(t);
        }
        function ui(e) {
          var t = {};
          return (
            e.searchParams.forEach((e, n) => {
              n in t ? (Array.isArray(t[n]) ? t[n].push(e) : (t[n] = [t[n], e])) : (t[n] = e);
            }),
            t
          );
        }
        function li(e, t, r) {
          var i = n(e.split("/*", 2), 2),
            a = i[0],
            o = i[1],
            s = a.split("/").filter(Boolean),
            u = s.length;
          return e => {
            var n = e.split("/").filter(Boolean),
              i = n.length - u;
            if (i < 0 || (i > 0 && void 0 === o && !t)) return null;
            for (
              var a = { path: u ? "" : "/", params: {} }, l = e => (void 0 === r ? void 0 : r[e]), d = 0;
              d < u;
              d++
            ) {
              var c = s[d],
                h = ":" === c[0],
                p = h ? n[d] : n[d].toLowerCase(),
                f = h ? c.slice(1) : c.toLowerCase();
              if (h && di(p, l(f))) a.params[f] = p;
              else if (h || !di(p, f)) return null;
              a.path += `/${p}`;
            }
            if (o) {
              var g = i ? n.slice(-i).join("/") : "";
              if (!di(g, l(o))) return null;
              a.params[o] = g;
            }
            return a;
          };
        }
        function di(e, t) {
          var n = t => t === e;
          return (
            void 0 === t ||
            ("string" == typeof t
              ? n(t)
              : "function" == typeof t
                ? t(e)
                : Array.isArray(t)
                  ? t.some(n)
                  : t instanceof RegExp && t.test(e))
          );
        }
        function ci(e) {
          var t = new Map(),
            n = Qn();
          return new Proxy(
            {},
            {
              get: (r, i) => (
                t.has(i) ||
                  Zn(n, () =>
                    t.set(
                      i,
                      Wn(() => e()[i]),
                    ),
                  ),
                t.get(i)()
              ),
              getOwnPropertyDescriptor: () => ({ enumerable: !0, configurable: !0 }),
              ownKeys: () => Reflect.ownKeys(e()),
              has: (t, n) => n in e(),
            },
          );
        }
        function hi(e) {
          var t = /(\/?\:[^\/]+)\?/.exec(e);
          if (!t) return [e];
          for (
            var n = e.slice(0, t.index), r = e.slice(t.index + t[0].length), i = [n, (n += t[1])];
            (t = /^(\/\:[^\/]+)\?/.exec(r));
          )
            (i.push((n += t[1])), (r = r.slice(t[0].length)));
          return hi(r).reduce((e, t) => [...e, ...i.map(e => e + t)], []);
        }
        var pi,
          fi = tr(),
          gi = tr(),
          mi = () =>
            (function (e, t) {
              if (null == e) throw new Error(t);
              return e;
            })(nr(fi), "<A> and 'use' router primitives can be only used inside a Route."),
          vi = () => mi().navigatorFactory();
        function yi(e, n = "") {
          var r = e.component,
            i = e.preload,
            a = e.load,
            o = e.children,
            s = e.info,
            l = !o || (Array.isArray(o) && !o.length),
            d = { key: e, component: r, preload: i || a, info: s };
          return xi(e.path).reduce((r, i) => {
            var a,
              o = u(hi(i));
            try {
              for (o.s(); !(a = o.n()).done; ) {
                var s = a.value,
                  c = si(n, s),
                  h = l ? c : c.split("/*", 1)[0];
                ((h = h
                  .split("/")
                  .map(e => (e.startsWith(":") || e.startsWith("*") ? e : encodeURIComponent(e)))
                  .join("/")),
                  r.push(
                    t(t({}, d), {}, { originalPath: i, pattern: h, matcher: li(h, !l, e.matchFilters) }),
                  ));
              }
            } catch (p) {
              o.e(p);
            } finally {
              o.f();
            }
            return r;
          }, []);
        }
        function bi(e, r = 0) {
          return {
            routes: e,
            score:
              1e4 *
                ((i = e[e.length - 1]),
                (a = n(i.pattern.split("/*", 2), 2)),
                (o = a[0]),
                (s = a[1]),
                (u = o.split("/").filter(Boolean)),
                u.reduce((e, t) => e + (t.startsWith(":") ? 2 : 3), u.length - (void 0 === s ? 0 : 1))) -
              r,
            matcher(n) {
              for (var r = [], i = e.length - 1; i >= 0; i--) {
                var a = e[i],
                  o = a.matcher(n);
                if (!o) return null;
                r.unshift(t(t({}, o), {}, { route: a }));
              }
              return r;
            },
          };
          var i, a, o, s, u;
        }
        function xi(e) {
          return Array.isArray(e) ? e : [e];
        }
        function Ti(e, t = "", n = [], r = []) {
          for (var i = xi(e), a = 0, o = i.length; a < o; a++) {
            var s = i[a];
            if (s && "object" == typeof s) {
              s.hasOwnProperty("path") || (s.path = "");
              var l,
                d = u(yi(s, t));
              try {
                for (d.s(); !(l = d.n()).done; ) {
                  var c = l.value;
                  n.push(c);
                  var h = Array.isArray(s.children) && 0 === s.children.length;
                  if (s.children && !h) Ti(s.children, c.pattern, n, r);
                  else {
                    var p = bi([...n], r.length);
                    r.push(p);
                  }
                  n.pop();
                }
              } catch (f) {
                d.e(f);
              } finally {
                d.f();
              }
            }
          }
          return n.length ? r : r.sort((e, t) => t.score - e.score);
        }
        function wi(e, t) {
          for (var n = 0, r = e.length; n < r; n++) {
            var i = e[n].matcher(t);
            if (i) return i;
          }
          return [];
        }
        function Si(e, r, i, a = {}) {
          var o = n(e.signal, 2),
            s = o[0],
            u = o[1],
            l = e.utils,
            d = void 0 === l ? {} : l,
            c = d.parsePath || (e => e),
            h = d.renderPath || (e => e),
            p = d.beforeLeave || ti(),
            f = oi("", a.base || "");
          if (void 0 === f) throw new Error(`${f} is not a valid base path`);
          f && !s().value && u({ value: f, replace: !0, scroll: !1 });
          var g,
            m = n(Gn(!1), 2),
            v = m[0],
            y = m[1],
            b = (e, n) => {
              var r, i, a;
              (n.value === T() && n.state === A()) ||
                (void 0 === g && y(!0),
                (pi = e),
                (g = n),
                ((r = () => {
                  g === n && (w(g.value), E(g.state), C[1](e => e.filter(e => e.pending)));
                }),
                (i = Bn),
                (a = On),
                Promise.resolve().then(() => {
                  ((Bn = i), (On = a), lr(r, !1), (Bn = On = null));
                })).finally(() => {
                  g === n &&
                    (function (e) {
                      lr(e, !1);
                    })(() => {
                      var n, r;
                      ((pi = void 0),
                        "navigate" === e &&
                          ((n = g),
                          (r = I[0]) &&
                            (u(t(t({}, n), {}, { replace: r.replace, scroll: r.scroll })), (I.length = 0))),
                        y(!1),
                        (g = void 0));
                    });
                }));
            },
            x = n(Gn(s().value), 2),
            T = x[0],
            w = x[1],
            S = n(Gn(s().state), 2),
            A = S[0],
            E = S[1],
            k = (function (e, t, n) {
              var r = new URL("http://sr"),
                i = Wn(
                  t => {
                    var n = e();
                    try {
                      return new URL(n, r);
                    } catch (i) {
                      return (console.error(`Invalid path ${n}`), t);
                    }
                  },
                  r,
                  { equals: (e, t) => e.href === t.href },
                ),
                a = Wn(() => i().pathname),
                o = Wn(() => i().search, !0),
                s = Wn(() => i().hash),
                u = Yn(o, () => ui(i()));
              return {
                get pathname() {
                  return a();
                },
                get search() {
                  return o();
                },
                get hash() {
                  return s();
                },
                get state() {
                  return t();
                },
                get key() {
                  return "";
                },
                query: n ? n(u) : ci(u),
              };
            })(T, A, d.queryWrapper),
            I = [],
            C = Gn([]),
            M = Wn(() =>
              "function" == typeof a.transformUrl ? wi(r(), a.transformUrl(k.pathname)) : wi(r(), k.pathname),
            ),
            R = () => {
              for (var e = M(), t = {}, n = 0; n < e.length; n++) Object.assign(t, e[n].params);
              return t;
            },
            _ = d.paramsWrapper ? d.paramsWrapper(R, r) : ci(R),
            D = { pattern: f, path: () => f, outlet: () => null, resolvePath: e => oi(f, e) };
          return (
            zn(Yn(s, e => b("native", e), { defer: !0 })),
            {
              base: D,
              location: k,
              params: _,
              isRouting: v,
              renderPath: h,
              parsePath: c,
              navigatorFactory: function (e) {
                return (
                  (e = e || nr(gi) || D),
                  (n, r) =>
                    (function (e, n, r) {
                      qn(() => {
                        if ("number" != typeof n) {
                          var i = !n || "?" === n[0],
                            a = t({ replace: !1, resolve: !i, scroll: !0 }, r),
                            o = a.replace,
                            s = a.resolve,
                            u = a.scroll,
                            l = a.state,
                            c = s ? e.resolvePath(n) : oi((i && k.pathname) || "", n);
                          if (void 0 === c) throw new Error(`Path '${n}' is not a routable path`);
                          if (I.length >= 100) throw new Error("Too many redirects");
                          var h = T();
                          (c === h && l === A()) ||
                            (p.confirm(c, r) &&
                              (I.push({ value: h, replace: o, scroll: u, state: A() }),
                              b("navigate", { value: c, state: l })));
                        } else
                          n &&
                            (d.go
                              ? d.go(n)
                              : console.warn("Router integration does not support relative routing"));
                      });
                    })(e, n, r)
                );
              },
              matches: M,
              beforeLeave: p,
              preloadRoute: function (e, t) {
                var n = wi(r(), e.pathname),
                  a = pi;
                pi = "preload";
                var o = function () {
                  var r = n[s],
                    a = r.route,
                    o = r.params;
                  a.component && a.component.preload && a.component.preload();
                  var u = a.preload;
                  t &&
                    u &&
                    Zn(i(), () =>
                      u({
                        params: o,
                        location: {
                          pathname: e.pathname,
                          search: e.search,
                          hash: e.hash,
                          query: ui(e),
                          state: null,
                          key: "",
                        },
                        intent: "preload",
                      }),
                    );
                };
                for (var s in n) o();
                pi = a;
              },
              singleFlight: void 0 === a.singleFlight || a.singleFlight,
              submissions: C,
            }
          );
        }
        var Ai = e => t => {
          var n,
            r = t.base,
            i = rr(() => t.children),
            a = Wn(() => Ti(i(), t.base || "")),
            o = Si(e, a, () => n, { base: r, singleFlight: t.singleFlight, transformUrl: t.transformUrl });
          return (
            e.create && e.create(o),
            zr(fi.Provider, {
              value: o,
              get children() {
                return zr(Ei, {
                  routerState: o,
                  get root() {
                    return t.root;
                  },
                  get preload() {
                    return t.rootPreload || t.rootLoad;
                  },
                  get children() {
                    return [
                      Gr(() => (n = Qn()) && null),
                      zr(ki, {
                        routerState: o,
                        get branches() {
                          return a();
                        },
                      }),
                    ];
                  },
                });
              },
            })
          );
        };
        function Ei(e) {
          var t = e.routerState.location,
            n = e.routerState.params,
            r = Wn(
              () =>
                e.preload &&
                qn(() => {
                  e.preload({ params: n, location: t, intent: pi || "initial" });
                }),
            );
          return zr(Cr, {
            get when() {
              return e.root;
            },
            keyed: !0,
            get fallback() {
              return e.children;
            },
            children: i =>
              zr(i, {
                params: n,
                location: t,
                get data() {
                  return r();
                },
                get children() {
                  return e.children;
                },
              }),
          });
        }
        function ki(e) {
          var t,
            n = [],
            r = Wn(
              Yn(e.routerState.matches, (i, a, o) => {
                for (
                  var s = a && i.length === a.length,
                    u = [],
                    l = function (t) {
                      var l = a && a[t],
                        d = i[t];
                      o && l && d.route.key === l.route.key
                        ? (u[t] = o[t])
                        : ((s = !1),
                          n[t] && n[t](),
                          Hn(i => {
                            ((n[t] = i),
                              (u[t] = (function (e, t, n, r) {
                                var i = e.base,
                                  a = e.location,
                                  o = e.params,
                                  s = r().route,
                                  u = s.pattern,
                                  l = s.component,
                                  d = s.preload,
                                  c = Wn(() => r().path);
                                l && l.preload && l.preload();
                                var h = d ? d({ params: o, location: a, intent: pi || "initial" }) : void 0;
                                return {
                                  parent: t,
                                  pattern: u,
                                  path: c,
                                  outlet: () =>
                                    l
                                      ? Tr(l, {
                                          params: o,
                                          location: a,
                                          data: h,
                                          get children() {
                                            return n();
                                          },
                                        })
                                      : n(),
                                  resolvePath: e => oi(i.path(), e, c()),
                                };
                              })(
                                e.routerState,
                                u[t - 1] || e.routerState.base,
                                Ii(() => r()[t + 1]),
                                () => {
                                  var n,
                                    r = e.routerState.matches();
                                  return null !== (n = r[t]) && void 0 !== n ? n : r[0];
                                },
                              )));
                          }));
                    },
                    d = 0,
                    c = i.length;
                  d < c;
                  d++
                )
                  l(d);
                return (n.splice(i.length).forEach(e => e()), o && s ? o : ((t = u[0]), u));
              }),
            );
          return Ii(() => r() && t)();
        }
        var Ii = e => () =>
            zr(Cr, {
              get when() {
                return e();
              },
              keyed: !0,
              children: e =>
                zr(gi.Provider, {
                  value: e,
                  get children() {
                    return e.outlet();
                  },
                }),
            }),
          Ci = e => {
            var t = rr(() => e.children);
            return kr(e, {
              get children() {
                return t();
              },
            });
          };
        var Mi,
          Ri = n(Gn([]), 2),
          _i = Ri[0],
          Di = Ri[1],
          Pi = "aria-parent",
          Li = [];
        function Ni(e) {
          return new Promise(t => {
            setTimeout(t, e);
          });
        }
        function Oi(e) {
          var t;
          0 !== (null == e || null === (t = e.text) || void 0 === t ? void 0 : t.trim().length) && Li.push(e);
        }
        function Ui() {
          var e = Fi();
          if (e) {
            for (var t = 0, n = Li; t < n.length; t++) {
              var r = n[t],
                i = document.createElement("span");
              (i.setAttribute("lang", r.lang), i.setAttribute("aria-label", r.text), e.appendChild(i));
            }
            setTimeout(() => {
              ((Li = []), Bi(), ji());
            }, 100);
          } else console.error(`ARIA div not found: ${Pi}`);
        }
        function Bi() {
          var e = document.getElementById(Pi);
          if (e) for (; e.firstChild; ) e.removeChild(e.firstChild);
        }
        function ji() {
          var e,
            t = null === (e = document.getElementById("app")) || void 0 === e ? void 0 : e.firstChild;
          null == t || t.focus();
        }
        function Fi() {
          var e = document.getElementById(Pi);
          if (!e) {
            var t = document.createElement("div");
            return (
              t.setAttribute("id", Pi),
              t.setAttribute("aria-live", "assertive"),
              t.setAttribute("tabindex", "0"),
              document.body.appendChild(t),
              t
            );
          }
          return e;
        }
        function Vi(e, t, n = "en-US", r) {
          var i = window.speechSynthesis;
          return new Promise((a, o) => {
            var s;
            if (r) {
              var u = i.getVoices();
              s = u.find(e => e.name === r) || u[0];
            }
            var l = new SpeechSynthesisUtterance(e);
            ((l.lang = n),
              s && (l.voice = s),
              (l.onend = () => {
                a();
              }),
              (l.onerror = e => {
                o(e);
              }),
              t.push(l),
              i.speak(l));
          });
        }
        function Hi(e, t, n, i, a = !0) {
          var s = window.speechSynthesis,
            u = (function (e = []) {
              var t,
                n = [];
              for (t = 0; t < e.length; t++) {
                var r = e[t];
                if ("string" != typeof r || r.includes("PAUSE-")) break;
                n.push(e[t]);
              }
              return [n.join(",\b ")].concat(e.slice(t));
            })(Array.isArray(e) ? e : [e]),
            l = [],
            d = [],
            c = !0;
          return {
            series: o(
              r().m(function e() {
                var o, s, h, p, f, g, m, v, y, b, x, T, w;
                return r().w(
                  function (e) {
                    for (;;)
                      switch ((e.p = e.n)) {
                        case 0:
                          e.p = 0;
                        case 1:
                          if (!c || !u.length) {
                            e.n = 37;
                            break;
                          }
                          return ((e.n = 2), Promise.resolve(u.shift()));
                        case 2:
                          if (((o = e.v), c)) {
                            e.n = 3;
                            break;
                          }
                          return e.a(3, 37);
                        case 3:
                          if ("string" != typeof o || !o.includes("PAUSE-")) {
                            e.n = 5;
                            break;
                          }
                          if (((s = 1e3 * Number(o.split("PAUSE-")[1])), isNaN(s))) {
                            e.n = 4;
                            break;
                          }
                          return ((e.n = 4), Ni(s));
                        case 4:
                          e.n = 36;
                          break;
                        case 5:
                          if ("string" != typeof o) {
                            e.n = 19;
                            break;
                          }
                          if (o) {
                            e.n = 6;
                            break;
                          }
                          return e.a(3, 1);
                        case 6:
                          p = h = 3;
                        case 7:
                          if (!(c && p > 0)) {
                            e.n = 18;
                            break;
                          }
                          if (((e.p = 8), !t)) {
                            e.n = 9;
                            break;
                          }
                          (Oi({ text: o, lang: n }), (e.n = 10));
                          break;
                        case 9:
                          return ((e.n = 10), Vi(o, d, n, i));
                        case 10:
                          ((p = 0), (e.n = 17));
                          break;
                        case 11:
                          if (((e.p = 11), !((T = e.v) instanceof SpeechSynthesisErrorEvent))) {
                            e.n = 16;
                            break;
                          }
                          if ("network" !== T.error) {
                            e.n = 13;
                            break;
                          }
                          return (
                            p--,
                            console.warn(`Speech synthesis network error. Retries left: ${p}`),
                            (e.n = 12),
                            Ni(500 * (h - p))
                          );
                        case 12:
                          e.n = 15;
                          break;
                        case 13:
                          if ("canceled" !== T.error && "interrupted" !== T.error) {
                            e.n = 14;
                            break;
                          }
                          ((p = 0), (e.n = 15));
                          break;
                        case 14:
                          throw new Error(`SpeechSynthesisErrorEvent: ${T.error}`);
                        case 15:
                          e.n = 17;
                          break;
                        case 16:
                          throw T;
                        case 17:
                          e.n = 7;
                          break;
                        case 18:
                          e.n = 36;
                          break;
                        case 19:
                          if (!(o instanceof SpeechSynthesisUtterance)) {
                            e.n = 33;
                            break;
                          }
                          ((g = f = 3),
                            (m = o.text),
                            (v = null == o ? void 0 : o.lang),
                            (y = null == o ? void 0 : o.voice));
                        case 20:
                          if (!(c && g > 0)) {
                            e.n = 32;
                            break;
                          }
                          if (((e.p = 21), !m)) {
                            e.n = 24;
                            break;
                          }
                          if (!t) {
                            e.n = 22;
                            break;
                          }
                          (Oi({ text: m, lang: v }), (e.n = 23));
                          break;
                        case 22:
                          return ((e.n = 23), Vi(m, d, v, null == y ? void 0 : y.name));
                        case 23:
                          g = 0;
                        case 24:
                          e.n = 31;
                          break;
                        case 25:
                          if (((e.p = 25), !((w = e.v) instanceof SpeechSynthesisErrorEvent))) {
                            e.n = 30;
                            break;
                          }
                          if ("network" !== w.error) {
                            e.n = 27;
                            break;
                          }
                          return (
                            g--,
                            console.warn(`Speech synthesis network error. Retries left: ${g}`),
                            (e.n = 26),
                            Ni(500 * (f - g))
                          );
                        case 26:
                          e.n = 29;
                          break;
                        case 27:
                          if ("canceled" !== w.error && "interrupted" !== w.error) {
                            e.n = 28;
                            break;
                          }
                          ((g = 0), (e.n = 29));
                          break;
                        case 28:
                          throw new Error(`SpeechSynthesisErrorEvent: ${w.error}`);
                        case 29:
                          e.n = 31;
                          break;
                        case 30:
                          throw w;
                        case 31:
                          e.n = 20;
                          break;
                        case 32:
                          e.n = 36;
                          break;
                        case 33:
                          if ("function" != typeof o) {
                            e.n = 35;
                            break;
                          }
                          return ((b = Hi(o(), t, n, i, !1)), l.push(b), (e.n = 34), b.series);
                        case 34:
                          e.n = 36;
                          break;
                        case 35:
                          if (!Array.isArray(o)) {
                            e.n = 36;
                            break;
                          }
                          return ((x = Hi(o, t, n, i, !1)), l.push(x), (e.n = 36), x.series);
                        case 36:
                          e.n = 1;
                          break;
                        case 37:
                          return ((e.p = 37), (c = !1), a && t && Ui(), e.f(37));
                        case 38:
                          return e.a(2);
                      }
                  },
                  e,
                  null,
                  [
                    [21, 25],
                    [8, 11],
                    [0, , 37, 38],
                  ],
                );
              }),
            )(),
            get active() {
              return c;
            },
            append: e => {
              u.push(e);
            },
            cancel: () => {
              if (c) {
                if (a) {
                  if (t) {
                    var e = Fi();
                    return void (e && ((Li = []), Bi(), e.focus(), ji()));
                  }
                  s.cancel();
                }
                (l.forEach(e => {
                  e.cancel();
                }),
                  (c = !1));
              }
            },
          };
        }
        function Gi(e, t, n = "en-US", r) {
          return (Mi && Mi.cancel(), (Mi = Hi(e, t, n, r)));
        }
        var zi,
          Xi,
          Wi = (e, t) => {
            var n,
              r = () => clearTimeout(n);
            Qn() && Jn(r);
            return Object.assign(
              (...i) => {
                (void 0 !== n && r(), (n = setTimeout(() => e(...i), t)));
              },
              { clear: r },
            );
          },
          Ki = [],
          qi = !1;
        function Yi(e, t) {
          var n,
            r = Wi(e, t),
            i = e => {
              ((n = e), r(e));
            };
          return (
            (i.flush = () => {
              (r.clear(), e(n));
            }),
            (i.clear = r.clear),
            i
          );
        }
        function $i(e) {
          return e.id || e.name;
        }
        function Ji(e = []) {
          if (Qi.onFocusChange && Qi.enabled) {
            var t = e.every(e => !e.loading),
              n = e.filter(e => !Ki.includes(e));
            if ((zi(), t || !Qi.onFocusChange)) {
              Ki = e.slice(0);
              var r = [],
                i = n
                  .reverse()
                  .reduce(
                    (e, t) => (
                      t.announce
                        ? (e.push([$i(t), "Announce", t.announce]), r.push(t.announce))
                        : t.title
                          ? (e.push([$i(t), "Title", t.title]), r.push(t.title))
                          : e.push([$i(t), "No Announce", ""]),
                      e
                    ),
                    [],
                  );
              return (
                n
                  .reverse()
                  .reduce(
                    (e, t) => (
                      t.announceContext
                        ? (e.push([$i(t), "Context", t.announceContext]), r.push(t.announceContext))
                        : e.push([$i(t), "No Context", ""]),
                      e
                    ),
                    i,
                  ),
                Qi.debug && console.table(i),
                r.length ? Qi.speak(r.reduce((e, t) => e.concat(t), [])) : void 0
              );
            }
            Qi.onFocusChange([]);
          }
        }
        var Qi = {
            debug: !1,
            enabled: !0,
            lang: "en-US",
            aria: !1,
            cancel: function () {
              Xi && Xi.cancel();
            },
            clearPrevFocus: function (e = 0) {
              ((Ki = Ki.slice(0, e)), zi());
            },
            speak: function (e, { append: t = !1, notification: n = !1 } = {}) {
              var r;
              Qi.onFocusChange &&
                Qi.enabled &&
                (t && Xi && Xi.active
                  ? Xi.append(e)
                  : (Qi.cancel(),
                    (function (e, t, n, r) {
                      if (!qi) Xi = Gi(e, t, n, r);
                    })(e, Qi.aria, Qi.lang, Qi.voice)),
                n &&
                  ((qi = !0),
                  null === (r = Xi) ||
                    void 0 === r ||
                    r.series
                      .finally(() => {
                        ((qi = !1), Qi.refresh());
                      })
                      .catch(console.error)));
              return Xi;
            },
            refresh: function (e = 0) {
              (Qi.clearPrevFocus(e), Qi.onFocusChange && Qi.onFocusChange(qn(() => _i())));
            },
            setupTimers: function ({ focusDebounce: e = 400, focusChangeTimeout: t = 3e5 } = {}) {
              ((Qi.onFocusChange = Yi(Ji, e)),
                (zi = Yi(() => {
                  Ki = [];
                }, t)));
            },
          },
          Zi = !1;
        function ea(e) {
          var t = e.replace(/^.*?#/, "");
          if (!t.startsWith("/")) {
            var r = n(window.location.hash.split("#", 2), 2)[1];
            return `${void 0 === r ? "/" : r}#${t}`;
          }
          return t;
        }
        function ta(e) {
          var n = () => window.location.hash.slice(1),
            r = ti();
          return (function (e) {
            var t = !1,
              n = e => ("string" == typeof e ? { value: e } : e),
              r = (function ([e, t], n, r) {
                return [e, r ? e => t(r(e)) : t];
              })(
                Gn(n(e.get()), { equals: (e, t) => e.value === t.value && e.state === t.state }),
                0,
                n => (!t && e.set(n), n),
              );
            return (
              e.init &&
                Jn(
                  e.init((i = e.get()) => {
                    ((t = !0), r[1](n(i)), (t = !1));
                  }),
                ),
              Ai({ signal: r, create: e.create, utils: e.utils })
            );
          })({
            get: n,
            set({ value: e, replace: n, state: r }) {
              (n
                ? window.history.replaceState(
                    (function (e) {
                      return t(t({}, e), {}, { _depth: window.history.state && window.history.state._depth });
                    })(r),
                    "",
                    "#" + e,
                  )
                : window.history.pushState(r, "", "#" + e),
                ni());
            },
            init: e => {
              return (
                (t = window),
                (i = "hashchange"),
                (a = (function (e, t) {
                  var n = !1;
                  return () => {
                    var r = Qr;
                    ni();
                    var i = null == r ? null : Qr - r;
                    n ? (n = !1) : i && t(i) ? ((n = !0), window.history.go(-i)) : e();
                  };
                })(e, e => !r.confirm(e && e < 0 ? e : n()))),
                t.addEventListener(i, a),
                () => t.removeEventListener(i, a)
              );
              var t, i, a;
            },
            utils: {
              go: e => window.history.go(e),
              renderPath: e => `#${e}`,
              parsePath: ea,
              beforeLeave: r,
              queryWrapper: e.forceProxy || !na ? t => ra(t, e.queryParams) : void 0,
              paramsWrapper: e.forceProxy || !na ? (e, t) => ra(e, ia(t())) : void 0,
            },
          })(e);
        }
        var na = "function" == typeof Proxy;
        function ra(e, t) {
          var n = new Map(),
            r = Qn(),
            i = {};
          return (
            (t || Object.keys(e())).forEach(t => {
              Object.defineProperty(i, t, {
                get: () => {
                  return (
                    (i = t),
                    n.has(i) ||
                      Zn(r, () =>
                        n.set(
                          i,
                          Wn(() => e()[i]),
                        ),
                      ),
                    n.get(i)()
                  );
                  var i;
                },
                enumerable: !0,
                configurable: !0,
              });
            }),
            i
          );
        }
        var ia = e => {
          var t = [];
          return (
            e.forEach(e => {
              e.routes.forEach(e => {
                if (e.pattern) {
                  var n = e.pattern.match(/:(\w+)/g);
                  n &&
                    n.forEach(e => {
                      var n = e.slice(1);
                      t.includes(n) || t.push(n);
                    });
                }
              });
            }),
            t
          );
        };
        function aa(e, t) {
          return 0 === e || (e >= 0 && e < t.length);
        }
        function oa(e, t = 0, n = 1) {
          for (var r = t; ; r += n) {
            var i;
            if (!aa(r, e.children)) {
              if (!e.wrap) break;
              r = (r + e.children.length) % e.children.length;
            }
            if (null === (i = e.children[r]) || void 0 === i || !i.skipFocus) return r;
          }
          return -1;
        }
        function sa(e, t) {
          var n,
            r = e.children[t];
          if (null == r || r.skipFocus) return ((e.selected = -1), !1);
          var i = e.selected;
          return (
            (e.selected = t),
            Yt(r) || r.setFocus(),
            null === (n = e.onSelectedChanged) || void 0 === n || n.call(e, t, e, r, i),
            !0
          );
        }
        var ua = function () {
          var e,
            t,
            n,
            r = this,
            i = r.selected;
          if (0 !== i)
            for (
              e = i,
                t = 0,
                n = this.children.length - 1,
                i = t < n ? Math.min(Math.max(e, t), n) : Math.min(Math.max(e, n), t);
              !aa(i, this.children);
            )
              i--;
          return ((i = oa(r, i)), (r.selected = i), sa(r, i));
        };
        function la(e) {
          return function () {
            return (function (e, t) {
              var n = oa(e, e.selected + t, t);
              if (-1 === n) {
                var r;
                if (
                  !aa(e.selected, e.children) ||
                  (null !== (r = e.children[e.selected]) && void 0 !== r && r.skipFocus) ||
                  Yt(e.children[e.selected])
                )
                  return !1;
                n = e.selected;
              }
              var i = e.children[n];
              if (e.plinko) {
                var a = e.children[e.selected].selected || 0;
                i.selected = a < i.children.length ? a : i.children.length - 1;
              }
              return sa(e, n);
            })(this, "up" === e || "left" === e ? -1 : 1);
          };
        }
        var da = e => 8 !== e.lng.renderState;
        function ca(e) {
          var t = e ? "width" : "height",
            n = e ? "x" : "y";
          return (r, i, a, o) => {
            var s,
              u,
              l,
              d,
              c,
              h,
              p,
              f,
              g,
              m = i;
            if (
              ("number" != typeof r && (r = (m = r).selected || 0),
              m && "none" !== m.scroll && r !== o && m.children.length)
            ) {
              void 0 === m._initialPosition && (m._initialPosition = m[n]);
              var v = m.lng,
                y = e ? v.stage.root.width : v.stage.root.height,
                b = void 0 === o || o - 1 !== r;
              if (void 0 === m._screenOffset) {
                var x;
                if (m.parent.clipping) {
                  var T,
                    w = m.parent;
                  m.endOffset =
                    null !== (T = m.endOffset) && void 0 !== T ? T : y - ((e ? w.absX : w.absY) || 0) - w[t];
                }
                m._screenOffset = null !== (x = m.offset) && void 0 !== x ? x : (e ? v.absX : v.absY) - m[n];
              }
              var S = m._screenOffset,
                A = m.gap || 0,
                E = m.scroll || (void 0 === o ? (m.scrollIndex ? "center" : "always") : "auto"),
                k = null !== (s = m._targetPosition) && void 0 !== s ? s : m[n],
                I = b ? Math.min(k, m[n]) : Math.max(k, m[n]);
              m.offset = null !== (u = m.offset) && void 0 !== u ? u : I;
              var C = m.offset;
              if ((a = a || m.children[r])) {
                var M = null !== (l = a[n]) && void 0 !== l ? l : 0,
                  R = null !== (d = a[t]) && void 0 !== d ? d : 0,
                  _ =
                    R *
                    (null !==
                      (c =
                        null !== (h = a.scale) && void 0 !== h
                          ? h
                          : null === (p = a.style) || void 0 === p || null === (p = p.focus) || void 0 === p
                            ? void 0
                            : p.scale) && void 0 !== c
                      ? c
                      : 1),
                  D = null !== (f = m[t]) && void 0 !== f ? f : 0,
                  P = Math.min(y - D - S - (null !== (g = m.endOffset) && void 0 !== g ? g : 2 * A), C),
                  L = b ? r + 1 : r - 1,
                  N = m.children[L] || null,
                  O = I;
                if (a.centerScroll) O = (y - _) / 2 - M;
                else if ("always" === E) O = -M + C;
                else if ("bounded" === E) {
                  var U = m.children.length,
                    B = m.upCount || 6,
                    j = Math.max(0, U - B),
                    F = r === j;
                  if (r >= j)
                    if (b)
                      if (F && void 0 !== o && o < j) {
                        var V,
                          H = m.children[j],
                          G = null !== (V = null == H ? void 0 : H[n]) && void 0 !== V ? V : 0;
                        O = H ? -G + C : I;
                      } else O = I;
                    else O = F ? -M + C : I;
                  else O = -M + C;
                } else if ("center" === E) {
                  var z = (y - _) / 2 - M - S;
                  O = Math.min(Math.max(z, P), C);
                } else if (N)
                  if ("auto" === E)
                    if (m.scrollIndex && m.scrollIndex > 0) {
                      var X = m.children.length - m.scrollIndex;
                      b && m.selected >= m.scrollIndex
                        ? (O = I - R - A)
                        : !b && m.selected < X && (O = I + R + A);
                    } else O = b ? I - R - A : I + R + A;
                  else b && da(N) ? (O = I - R - A) : da(N) && (O = -M + C);
                else O = b ? P : C;
                if (
                  ((O = b && "always" !== E && "bounded" !== E ? Math.max(O, P) : Math.min(O, C)), m[n] !== O)
                ) {
                  if (m.onScrolled) {
                    var W = O === m._initialPosition;
                    m.onScrolled(m, O, W);
                  }
                  ((m[n] = O), (m._targetPosition = O));
                }
              }
            }
          };
        }
        var ha = ca(!0),
          pa = ca(!1);
        function fa(...e) {
          var t = e.filter(e => "function" == typeof e);
          if (0 !== t.length)
            return 1 === t.length
              ? t[0]
              : function (...e) {
                  var n,
                    r,
                    i = u(t);
                  try {
                    for (i.s(); !(r = i.n()).done; ) {
                      if (!0 === (n = r.value.apply(this, e))) return n;
                    }
                  } catch (a) {
                    i.e(a);
                  } finally {
                    i.f();
                  }
                  return n;
                };
        }
        var ga = {
          display: "flex",
          flexDirection: "column",
          gap: 30,
          transition: { y: { duration: 250, easing: "ease-in-out" } },
        };
        function ma(e) {
          var t;
          ((this.selected = e), pa(e, this), null === (t = this.children[e]) || void 0 === t || t.setFocus());
        }
        var va = la("up"),
          ya = la("down"),
          ba = e => {
            return (
              (t = Xr("view")),
              Wr(
                t,
                qr(e, {
                  onUp: fa(e.onUp, va),
                  onDown: fa(e.onDown, ya),
                  get selected() {
                    return e.selected || 0;
                  },
                  scrollToIndex: ma,
                  forwardFocus: ua,
                  onLayout: e.selected ? fa(e.onLayout, pa) : e.onLayout,
                  onSelectedChanged: fa(e.onSelectedChanged, "none" !== e.scroll ? pa : void 0),
                  style: Dr(e.style, ga),
                }),
                !1,
              ),
              t
            );
            var t;
          },
          xa = { display: "flex", gap: 30, transition: { x: { duration: 250, easing: "ease-in-out" } } };
        function Ta(e) {
          var t;
          ((this.selected = e), ha(e, this), null === (t = this.children[e]) || void 0 === t || t.setFocus());
        }
        var wa = la("left"),
          Sa = la("right"),
          Aa = e => {
            return (
              (t = Xr("view")),
              Wr(
                t,
                qr(e, {
                  get selected() {
                    return e.selected || 0;
                  },
                  onLeft: fa(e.onLeft, wa),
                  onRight: fa(e.onRight, Sa),
                  forwardFocus: ua,
                  scrollToIndex: Ta,
                  onLayout: e.selected ? fa(e.onLayout, ha) : e.onLayout,
                  onSelectedChanged: fa(e.onSelectedChanged, "none" !== e.scroll ? ha : void 0),
                  style: Dr(e.style, xa),
                }),
                !1,
              ),
              t
            );
            var t;
          },
          Ea = tr(void 0);
        function ka(e) {
          var t = n(Gn([]), 2),
            r = (t[0], t[1]);
          return zr(Ea.Provider, {
            value: {
              storeFocus: function (e, t) {
                var n = t || e;
                n && r(e => [...e, n]);
              },
              restoreFocus: function () {
                var e = !1;
                return (
                  r(t => {
                    var n = t.pop();
                    return (n && "function" == typeof n.setFocus && (n.setFocus(), (e = !0)), [...t]);
                  }),
                  e
                );
              },
              clearFocusStack: function () {
                r([]);
              },
            },
            get children() {
              return e.children;
            },
          });
        }
        var Ia = new Map(),
          Ca = e =>
            Ia.has(e.id)
              ? (console.warn(`[KeepAlive] Element with id "${e.id}" already in cache. Recreating.`), e)
              : (Ia.set(e.id, e), e);
        function Ma(e) {
          var t,
            n =
              e.onRemove ||
              (e => {
                e.alpha = 0;
              }),
            r =
              e.onRender ||
              (e => {
                e.alpha = 1;
              }),
            i = e.transition || { alpha: !0 };
          return (
            (t = Xr("view")),
            Kr(t, "preserve", !0),
            Kr(t, "onRemove", n),
            Kr(t, "onRender", r),
            Kr(t, "forwardFocus", 0),
            Kr(t, "transition", i),
            Wr(t, e, !1),
            t
          );
        }
        var Ra = e => {
            var t,
              n = Ia.get(e.id);
            return (
              n &&
                null !== (t = e.shouldDispose) &&
                void 0 !== t &&
                t.call(e, e.id) &&
                (n.dispose(), Ia.delete(e.id), (n = void 0)),
              n
                ? (n && !n.children && (n.children = Zn(n.owner, () => Ma(e))), n.children)
                : Hn(t => {
                    var n = Ma(e);
                    return (Ca({ id: e.id, owner: Qn(), children: n, dispose: t }), n);
                  })
            );
          },
          _a = e => {
            var t = e.id || e.path,
              n = e.preload
                ? n => {
                    var r,
                      i,
                      a = Ia.get(t);
                    if (
                      (a &&
                        null !== (r = e.shouldDispose) &&
                        void 0 !== r &&
                        r.call(e, t) &&
                        (a.dispose(), Ia.delete(t), (a = void 0)),
                      !a)
                    )
                      return Hn(r => (Ca({ id: t, owner: Qn(), dispose: r, children: null }), e.preload(n)));
                    a.children && (null === (i = a.children) || void 0 === i || i.setFocus());
                  }
                : void 0;
            return zr(
              Ci,
              qr(e, {
                preload: n,
                component: n =>
                  zr(Ra, {
                    id: t,
                    get onRemove() {
                      return e.onRemove;
                    },
                    get onRender() {
                      return e.onRender;
                    },
                    get transition() {
                      return e.transition;
                    },
                    get children() {
                      return e.component(n);
                    },
                  }),
              }),
            );
          },
          Da = n(Gn(""), 2),
          Pa = Da[0],
          La = Da[1],
          Na = n(Gn(""), 2),
          Oa = Na[0],
          Ua = Na[1],
          Ba = n(Gn(""), 2),
          ja = Ba[0],
          Fa = Ba[1],
          Va = n(Gn(1920), 2),
          Ha = Va[0],
          Ga = Va[1],
          za = n(Gn(1080), 2),
          Xa = za[0],
          Wa = za[1],
          Ka = n(Gn(!1), 2),
          qa = (Ka[0], Ka[1], n(Gn(null), 2)),
          Ya = qa[0],
          $a = qa[1],
          Ja = n(Gn(null), 2),
          Qa = Ja[0],
          Za = Ja[1],
          eo = n(Gn(0), 2),
          to = eo[0],
          no = eo[1],
          ro = () => {
            var e,
              t,
              n = 0,
              r = null,
              i = { duration: 600, easing: "ease-in-out" },
              a = null,
              o = null;
            return (
              Xn(() => {
                var s = Pa();
                if (s && s !== r) {
                  r = s;
                  var u = 1 === n ? t : e,
                    l = 1 === n ? e : t;
                  ((l.src = s),
                    (l.alpha = 0.01),
                    a && a.stop(),
                    o && o.stop(),
                    (o = l.animate({ alpha: 1 }, i)).start(),
                    (a = u.animate({ alpha: 0 }, i)).start(),
                    (n = 1 === n ? 2 : 1));
                }
              }),
              Jn(() => {
                (a.stop(), o.stop());
              }),
              zr(Zr, {
                get width() {
                  return Ha();
                },
                get height() {
                  return Xa();
                },
                get children() {
                  return [
                    zr(Zr, {
                      get width() {
                        return Ha();
                      },
                      get height() {
                        return Xa();
                      },
                      color: 336730111,
                    }),
                    zr(Zr, {
                      ref(t) {
                        "function" == typeof e ? e(t) : (e = t);
                      },
                      get width() {
                        return Ha();
                      },
                      get height() {
                        return Xa();
                      },
                      alpha: 0,
                    }),
                    zr(Zr, {
                      ref(e) {
                        "function" == typeof t ? t(e) : (t = e);
                      },
                      get width() {
                        return Ha();
                      },
                      get height() {
                        return Xa();
                      },
                      alpha: 0,
                    }),
                  ];
                },
              })
            );
          },
          io = e => {
            var t,
              n = vi(),
              r = mi().location,
              i = (Zi || ((Zi = !0), Qi.setupTimers(t), Xn(Yn(_i, Qi.onFocusChange, { defer: !0 }))), Qi);
            return (
              (i.debug = !1),
              (i.enabled = !1),
              Xn(() => {
                ($a(Qa()), Za(r.pathname));
              }),
              zr(Zr, {
                ref(e) {
                  var t = window.APP;
                  "function" == typeof t ? t(e) : (window.APP = e);
                },
                onAnnouncer: () => (i.enabled = !i.enabled),
                onLast: () => history.back(),
                onLeft: () => console.log("LEFT"),
                onRight: () => console.log("RIGHT"),
                onUp: () => console.log("UP"),
                onDown: () => console.log("DOWN"),
                onEnter: () => console.log("ENTER"),
                onBack: () => (n(-1), !0),
                get children() {
                  return [zr(ro, {}), Gr(() => e.children)];
                },
              })
            );
          },
          ao = "static/",
          oo = [
            {
              type: "msdf",
              fontFamily: "Inter",
              descriptors: { weight: 400 },
              atlasDataUrl: ao + "fonts/Inter_18pt-Regular.msdf.json",
              atlasUrl: ao + "fonts/Inter_18pt-Regular.msdf.png",
            },
            {
              type: "msdf",
              fontFamily: "Inter",
              descriptors: { weight: 600 },
              atlasDataUrl: ao + "fonts/Inter_18pt-SemiBold.msdf.json",
              atlasUrl: ao + "fonts/Inter_18pt-SemiBold.msdf.png",
            },
            {
              type: "msdf",
              fontFamily: "Inter",
              descriptors: { weight: 700 },
              atlasDataUrl: ao + "fonts/Inter_18pt-Bold.msdf.json",
              atlasUrl: ao + "fonts/Inter_18pt-Bold.msdf.png",
            },
            {
              type: "msdf",
              fontFamily: "Roboto",
              descriptors: { weight: 700 },
              atlasDataUrl: ao + "fonts/Roboto-Bold.msdf.json",
              atlasUrl: ao + "fonts/Roboto-Bold.msdf.png",
            },
            {
              type: "msdf",
              fontFamily: "Roboto",
              descriptors: { weight: 400 },
              atlasDataUrl: ao + "fonts/Roboto-Regular.msdf.json",
              atlasUrl: ao + "fonts/Roboto-Regular.msdf.png",
            },
            {
              type: "msdf",
              fontFamily: "Arial",
              descriptors: { weight: 500 },
              atlasDataUrl: ao + "fonts/Roboto-Regular.msdf.json",
              atlasUrl: ao + "fonts/Roboto-Regular.msdf.png",
            },
          ],
          so = "object" == typeof global && global && global.Object === Object && global,
          uo = "object" == typeof self && self && self.Object === Object && self,
          lo = so || uo || Function("return this")(),
          co = lo.Symbol,
          ho = Object.prototype,
          po = ho.hasOwnProperty,
          fo = ho.toString,
          go = co ? co.toStringTag : void 0;
        var mo = Object.prototype.toString;
        var vo = co ? co.toStringTag : void 0;
        function yo(e) {
          return null == e
            ? void 0 === e
              ? "[object Undefined]"
              : "[object Null]"
            : vo && vo in Object(e)
              ? (function (e) {
                  var t = po.call(e, go),
                    n = e[go];
                  try {
                    e[go] = void 0;
                    var r = !0;
                  } catch (a) {}
                  var i = fo.call(e);
                  return (r && (t ? (e[go] = n) : delete e[go]), i);
                })(e)
              : (function (e) {
                  return mo.call(e);
                })(e);
        }
        function bo(e) {
          return null != e && "object" == typeof e;
        }
        var xo = Array.isArray;
        function To(e) {
          var t = typeof e;
          return null != e && ("object" == t || "function" == t);
        }
        function wo(e) {
          return e;
        }
        function So(e) {
          if (!To(e)) return !1;
          var t = yo(e);
          return (
            "[object Function]" == t ||
            "[object GeneratorFunction]" == t ||
            "[object AsyncFunction]" == t ||
            "[object Proxy]" == t
          );
        }
        var Ao,
          Eo = lo["__core-js_shared__"],
          ko = (Ao = /[^.]+$/.exec((Eo && Eo.keys && Eo.keys.IE_PROTO) || "")) ? "Symbol(src)_1." + Ao : "";
        var Io = Function.prototype.toString;
        var Co = /^\[object .+?Constructor\]$/,
          Mo = Function.prototype,
          Ro = Object.prototype,
          _o = Mo.toString,
          Do = Ro.hasOwnProperty,
          Po = RegExp(
            "^" +
              _o
                .call(Do)
                .replace(/[\\^$.*+?()[\]{}|]/g, "\\$&")
                .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") +
              "$",
          );
        function Lo(e) {
          return (
            !(!To(e) || ((t = e), ko && ko in t)) &&
            (So(e) ? Po : Co).test(
              (function (e) {
                if (null != e) {
                  try {
                    return Io.call(e);
                  } catch (t) {}
                  try {
                    return e + "";
                  } catch (t) {}
                }
                return "";
              })(e),
            )
          );
          var t;
        }
        function No(e, t) {
          var n = (function (e, t) {
            return null == e ? void 0 : e[t];
          })(e, t);
          return Lo(n) ? n : void 0;
        }
        var Oo = Object.create,
          Uo = (function () {
            function e() {}
            return function (t) {
              if (!To(t)) return {};
              if (Oo) return Oo(t);
              e.prototype = t;
              var n = new e();
              return ((e.prototype = void 0), n);
            };
          })();
        var Bo = Date.now;
        var jo,
          Fo,
          Vo,
          Ho = (function () {
            try {
              var e = No(Object, "defineProperty");
              return (e({}, "", {}), e);
            } catch (t) {}
          })(),
          Go = Ho
            ? function (e, t) {
                return Ho(e, "toString", {
                  configurable: !0,
                  enumerable: !1,
                  value:
                    ((n = t),
                    function () {
                      return n;
                    }),
                  writable: !0,
                });
                var n;
              }
            : wo,
          zo =
            ((jo = Go),
            (Fo = 0),
            (Vo = 0),
            function () {
              var e = Bo(),
                t = 16 - (e - Vo);
              if (((Vo = e), t > 0)) {
                if (++Fo >= 800) return arguments[0];
              } else Fo = 0;
              return jo.apply(void 0, arguments);
            }),
          Xo = /^(?:0|[1-9]\d*)$/;
        function Wo(e, t) {
          var n = typeof e;
          return (
            !!(t = null == t ? 9007199254740991 : t) &&
            ("number" == n || ("symbol" != n && Xo.test(e))) &&
            e > -1 &&
            e % 1 == 0 &&
            e < t
          );
        }
        function Ko(e, t, n) {
          "__proto__" == t && Ho
            ? Ho(e, t, { configurable: !0, enumerable: !0, value: n, writable: !0 })
            : (e[t] = n);
        }
        function qo(e, t) {
          return e === t || (e != e && t != t);
        }
        var Yo = Object.prototype.hasOwnProperty;
        function $o(e, t, n) {
          var r = e[t];
          (Yo.call(e, t) && qo(r, n) && (void 0 !== n || t in e)) || Ko(e, t, n);
        }
        var Jo = Math.max;
        function Qo(e, t) {
          return zo(
            (function (e, t, n) {
              return (
                (t = Jo(void 0 === t ? e.length - 1 : t, 0)),
                function () {
                  for (var r = arguments, i = -1, a = Jo(r.length - t, 0), o = Array(a); ++i < a; )
                    o[i] = r[t + i];
                  i = -1;
                  for (var s = Array(t + 1); ++i < t; ) s[i] = r[i];
                  return (
                    (s[t] = n(o)),
                    (function (e, t, n) {
                      switch (n.length) {
                        case 0:
                          return e.call(t);
                        case 1:
                          return e.call(t, n[0]);
                        case 2:
                          return e.call(t, n[0], n[1]);
                        case 3:
                          return e.call(t, n[0], n[1], n[2]);
                      }
                      return e.apply(t, n);
                    })(e, this, s)
                  );
                }
              );
            })(e, t, wo),
            e + "",
          );
        }
        function Zo(e) {
          return "number" == typeof e && e > -1 && e % 1 == 0 && e <= 9007199254740991;
        }
        function es(e) {
          return null != e && Zo(e.length) && !So(e);
        }
        var ts = Object.prototype;
        function ns(e) {
          var t = e && e.constructor;
          return e === (("function" == typeof t && t.prototype) || ts);
        }
        function rs(e) {
          return bo(e) && "[object Arguments]" == yo(e);
        }
        var is = Object.prototype,
          as = is.hasOwnProperty,
          os = is.propertyIsEnumerable,
          ss = rs(
            (function () {
              return arguments;
            })(),
          )
            ? rs
            : function (e) {
                return bo(e) && as.call(e, "callee") && !os.call(e, "callee");
              };
        var us = "object" == typeof e && e && !e.nodeType && e,
          ls = us && "object" == typeof i && i && !i.nodeType && i,
          ds = ls && ls.exports === us ? lo.Buffer : void 0,
          cs =
            (ds ? ds.isBuffer : void 0) ||
            function () {
              return !1;
            },
          hs = {};
        ((hs["[object Float32Array]"] =
          hs["[object Float64Array]"] =
          hs["[object Int8Array]"] =
          hs["[object Int16Array]"] =
          hs["[object Int32Array]"] =
          hs["[object Uint8Array]"] =
          hs["[object Uint8ClampedArray]"] =
          hs["[object Uint16Array]"] =
          hs["[object Uint32Array]"] =
            !0),
          (hs["[object Arguments]"] =
            hs["[object Array]"] =
            hs["[object ArrayBuffer]"] =
            hs["[object Boolean]"] =
            hs["[object DataView]"] =
            hs["[object Date]"] =
            hs["[object Error]"] =
            hs["[object Function]"] =
            hs["[object Map]"] =
            hs["[object Number]"] =
            hs["[object Object]"] =
            hs["[object RegExp]"] =
            hs["[object Set]"] =
            hs["[object String]"] =
            hs["[object WeakMap]"] =
              !1));
        var ps = "object" == typeof e && e && !e.nodeType && e,
          fs = ps && "object" == typeof i && i && !i.nodeType && i,
          gs = fs && fs.exports === ps && so.process,
          ms = (function () {
            try {
              var e = fs && fs.require && fs.require("util").types;
              return e || (gs && gs.binding && gs.binding("util"));
            } catch (t) {}
          })(),
          vs = ms && ms.isTypedArray,
          ys = vs
            ? (function (e) {
                return function (t) {
                  return e(t);
                };
              })(vs)
            : function (e) {
                return bo(e) && Zo(e.length) && !!hs[yo(e)];
              };
        function bs(e, t) {
          var n = xo(e),
            r = !n && ss(e),
            i = !n && !r && cs(e),
            a = !n && !r && !i && ys(e),
            o = n || r || i || a,
            s = o
              ? (function (e, t) {
                  for (var n = -1, r = Array(e); ++n < e; ) r[n] = t(n);
                  return r;
                })(e.length, String)
              : [],
            u = s.length;
          for (var l in e)
            (o &&
              ("length" == l ||
                (i && ("offset" == l || "parent" == l)) ||
                (a && ("buffer" == l || "byteLength" == l || "byteOffset" == l)) ||
                Wo(l, u))) ||
              s.push(l);
          return s;
        }
        var xs = Object.prototype.hasOwnProperty;
        function Ts(e) {
          if (!To(e))
            return (function (e) {
              var t = [];
              if (null != e) for (var n in Object(e)) t.push(n);
              return t;
            })(e);
          var t = ns(e),
            n = [];
          for (var r in e) ("constructor" != r || (!t && xs.call(e, r))) && n.push(r);
          return n;
        }
        function ws(e) {
          return es(e) ? bs(e) : Ts(e);
        }
        var Ss = No(Object, "create");
        var As = Object.prototype.hasOwnProperty;
        var Es = Object.prototype.hasOwnProperty;
        function ks(e) {
          var t = -1,
            n = null == e ? 0 : e.length;
          for (this.clear(); ++t < n; ) {
            var r = e[t];
            this.set(r[0], r[1]);
          }
        }
        function Is(e, t) {
          for (var n = e.length; n--; ) if (qo(e[n][0], t)) return n;
          return -1;
        }
        ((ks.prototype.clear = function () {
          ((this.__data__ = Ss ? Ss(null) : {}), (this.size = 0));
        }),
          (ks.prototype.delete = function (e) {
            var t = this.has(e) && delete this.__data__[e];
            return ((this.size -= t ? 1 : 0), t);
          }),
          (ks.prototype.get = function (e) {
            var t = this.__data__;
            if (Ss) {
              var n = t[e];
              return "__lodash_hash_undefined__" === n ? void 0 : n;
            }
            return As.call(t, e) ? t[e] : void 0;
          }),
          (ks.prototype.has = function (e) {
            var t = this.__data__;
            return Ss ? void 0 !== t[e] : Es.call(t, e);
          }),
          (ks.prototype.set = function (e, t) {
            var n = this.__data__;
            return (
              (this.size += this.has(e) ? 0 : 1),
              (n[e] = Ss && void 0 === t ? "__lodash_hash_undefined__" : t),
              this
            );
          }));
        var Cs = Array.prototype.splice;
        function Ms(e) {
          var t = -1,
            n = null == e ? 0 : e.length;
          for (this.clear(); ++t < n; ) {
            var r = e[t];
            this.set(r[0], r[1]);
          }
        }
        ((Ms.prototype.clear = function () {
          ((this.__data__ = []), (this.size = 0));
        }),
          (Ms.prototype.delete = function (e) {
            var t = this.__data__,
              n = Is(t, e);
            return !(n < 0) && (n == t.length - 1 ? t.pop() : Cs.call(t, n, 1), --this.size, !0);
          }),
          (Ms.prototype.get = function (e) {
            var t = this.__data__,
              n = Is(t, e);
            return n < 0 ? void 0 : t[n][1];
          }),
          (Ms.prototype.has = function (e) {
            return Is(this.__data__, e) > -1;
          }),
          (Ms.prototype.set = function (e, t) {
            var n = this.__data__,
              r = Is(n, e);
            return (r < 0 ? (++this.size, n.push([e, t])) : (n[r][1] = t), this);
          }));
        var Rs = No(lo, "Map");
        function _s(e, t) {
          var n,
            r,
            i = e.__data__;
          return (
            "string" == (r = typeof (n = t)) || "number" == r || "symbol" == r || "boolean" == r
              ? "__proto__" !== n
              : null === n
          )
            ? i["string" == typeof t ? "string" : "hash"]
            : i.map;
        }
        function Ds(e) {
          var t = -1,
            n = null == e ? 0 : e.length;
          for (this.clear(); ++t < n; ) {
            var r = e[t];
            this.set(r[0], r[1]);
          }
        }
        ((Ds.prototype.clear = function () {
          ((this.size = 0), (this.__data__ = { hash: new ks(), map: new (Rs || Ms)(), string: new ks() }));
        }),
          (Ds.prototype.delete = function (e) {
            var t = _s(this, e).delete(e);
            return ((this.size -= t ? 1 : 0), t);
          }),
          (Ds.prototype.get = function (e) {
            return _s(this, e).get(e);
          }),
          (Ds.prototype.has = function (e) {
            return _s(this, e).has(e);
          }),
          (Ds.prototype.set = function (e, t) {
            var n = _s(this, e),
              r = n.size;
            return (n.set(e, t), (this.size += n.size == r ? 0 : 1), this);
          }));
        var Ps = (function (e, t) {
            return function (n) {
              return e(t(n));
            };
          })(Object.getPrototypeOf, Object),
          Ls = Function.prototype,
          Ns = Object.prototype,
          Os = Ls.toString,
          Us = Ns.hasOwnProperty,
          Bs = Os.call(Object);
        function js(e) {
          var t = (this.__data__ = new Ms(e));
          this.size = t.size;
        }
        ((js.prototype.clear = function () {
          ((this.__data__ = new Ms()), (this.size = 0));
        }),
          (js.prototype.delete = function (e) {
            var t = this.__data__,
              n = t.delete(e);
            return ((this.size = t.size), n);
          }),
          (js.prototype.get = function (e) {
            return this.__data__.get(e);
          }),
          (js.prototype.has = function (e) {
            return this.__data__.has(e);
          }),
          (js.prototype.set = function (e, t) {
            var n = this.__data__;
            if (n instanceof Ms) {
              var r = n.__data__;
              if (!Rs || r.length < 199) return (r.push([e, t]), (this.size = ++n.size), this);
              n = this.__data__ = new Ds(r);
            }
            return (n.set(e, t), (this.size = n.size), this);
          }));
        var Fs = "object" == typeof e && e && !e.nodeType && e,
          Vs = Fs && "object" == typeof i && i && !i.nodeType && i,
          Hs = Vs && Vs.exports === Fs ? lo.Buffer : void 0;
        Hs && Hs.allocUnsafe;
        var Gs = lo.Uint8Array;
        function zs(e, t) {
          var n,
            r,
            i = ((n = e.buffer), (r = new n.constructor(n.byteLength)), new Gs(r).set(new Gs(n)), r);
          return new e.constructor(i, e.byteOffset, e.length);
        }
        var Xs = function (e, t, n) {
          for (var r = -1, i = Object(e), a = n(e), o = a.length; o--; ) {
            var s = a[++r];
            if (!1 === t(i[s], s, i)) break;
          }
          return e;
        };
        function Ws(e, t, n) {
          ((void 0 !== n && !qo(e[t], n)) || (void 0 === n && !(t in e))) && Ko(e, t, n);
        }
        function Ks(e, t) {
          if (("constructor" !== t || "function" != typeof e[t]) && "__proto__" != t) return e[t];
        }
        function qs(e) {
          return (function (e, t, n) {
            var r = !n;
            n || (n = {});
            for (var i = -1, a = t.length; ++i < a; ) {
              var o = t[i],
                s = void 0;
              (void 0 === s && (s = e[o]), r ? Ko(n, o, s) : $o(n, o, s));
            }
            return n;
          })(e, ws(e));
        }
        function Ys(e, t, n, r, i, a, o) {
          var s = Ks(e, n),
            u = Ks(t, n),
            l = o.get(u);
          if (l) Ws(e, n, l);
          else {
            var d,
              c = a ? a(s, u, n + "", e, t, o) : void 0,
              h = void 0 === c;
            if (h) {
              var p = xo(u),
                f = !p && cs(u),
                g = !p && !f && ys(u);
              ((c = u),
                p || f || g
                  ? xo(s)
                    ? (c = s)
                    : bo((d = s)) && es(d)
                      ? (c = (function (e, t) {
                          var n = -1,
                            r = e.length;
                          for (t || (t = Array(r)); ++n < r; ) t[n] = e[n];
                          return t;
                        })(s))
                      : f
                        ? ((h = !1), (c = u.slice()))
                        : g
                          ? ((h = !1), (c = zs(u)))
                          : (c = [])
                  : (function (e) {
                        if (!bo(e) || "[object Object]" != yo(e)) return !1;
                        var t = Ps(e);
                        if (null === t) return !0;
                        var n = Us.call(t, "constructor") && t.constructor;
                        return "function" == typeof n && n instanceof n && Os.call(n) == Bs;
                      })(u) || ss(u)
                    ? ((c = s),
                      ss(s)
                        ? (c = qs(s))
                        : (To(s) && !So(s)) ||
                          (c = (function (e) {
                            return "function" != typeof e.constructor || ns(e) ? {} : Uo(Ps(e));
                          })(u)))
                    : (h = !1));
            }
            (h && (o.set(u, c), i(c, u, r, a, o), o.delete(u)), Ws(e, n, c));
          }
        }
        function $s(e, t, n, r, i) {
          e !== t &&
            Xs(
              t,
              function (a, o) {
                if ((i || (i = new js()), To(a))) Ys(e, t, o, n, $s, r, i);
                else {
                  var s = r ? r(Ks(e, o), a, o + "", e, t, i) : void 0;
                  (void 0 === s && (s = a), Ws(e, o, s));
                }
              },
              ws,
            );
        }
        var Js,
          Qs =
            ((Js = function (e, t, n) {
              $s(e, t, n);
            }),
            Qo(function (e, t) {
              var n = -1,
                r = t.length,
                i = r > 1 ? t[r - 1] : void 0,
                a = r > 2 ? t[2] : void 0;
              for (
                i = Js.length > 3 && "function" == typeof i ? (r--, i) : void 0,
                  a &&
                    (function (e, t, n) {
                      if (!To(n)) return !1;
                      var r = typeof t;
                      return (
                        !!("number" == r ? es(n) && Wo(t, n.length) : "string" == r && (t in n)) &&
                        qo(n[t], e)
                      );
                    })(t[0], t[1], a) &&
                    ((i = r < 3 ? void 0 : i), (r = 1)),
                  e = Object(e);
                ++n < r;
              ) {
                var o = t[n];
                o && Js(e, o, n, i);
              }
              return e;
            }));
        class Zs {
          constructor(e, t = 0) {
            (s(this, "iterator", void 0),
              s(this, "peekBuffer", []),
              s(this, "_lastIndex", void 0),
              (this.iterator = e),
              (this.iterator = e),
              (this._lastIndex = t - 1),
              (this.peekBuffer = []));
          }
          next() {
            var e = this.peekBuffer.length > 0 ? this.peekBuffer.pop() : this.iterator.next();
            return (e.done ? (this._lastIndex = -1) : this._lastIndex++, e);
          }
          peek() {
            if (this.peekBuffer.length > 0) return this.peekBuffer[0];
            var e = this.iterator.next();
            return (this.peekBuffer.push(e), e);
          }
          get lastIndex() {
            return this._lastIndex;
          }
        }
        function eu(e, t = 0) {
          var n, i;
          return r().w(function (r) {
            for (;;)
              switch (r.n) {
                case 0:
                  n = t;
                case 1:
                  if (!(n < e.length)) {
                    r.n = 4;
                    break;
                  }
                  if (void 0 !== (i = e.codePointAt(n))) {
                    r.n = 2;
                    break;
                  }
                  throw new Error("Invalid Unicode code point");
                case 2:
                  return ((r.n = 3), i);
                case 3:
                  ((n += i <= 65535 ? 1 : 2), (r.n = 1));
                  break;
                case 4:
                  return r.a(2);
              }
          }, a);
        }
        function tu(e, t, n, r, i, a, o, s, l, d, c, h, p, f, g, m, v, y, b) {
          (g.loaded, g.data, g.shaper);
          var x = s / g.data.info.size,
            T = l / x,
            w = a / x,
            S = d / x,
            A = p[e],
            E = (null == A ? void 0 : A.codepointIndex) || 0,
            k = (null == A ? void 0 : A.maxX) || 0,
            I = (null == A ? void 0 : A.maxY) || 0,
            C = t,
            M = n,
            R = 0,
            _ = { codepointIndex: -1, bufferOffset: -1, xStart: -1 },
            D = g.shaper,
            P = { letterSpacing: S };
          r.endsWith(" ") && (r += " ");
          for (
            var L,
              N = D.shapeText(P, new Zs(eu(r, E), E)),
              O = -1,
              U = [],
              B = o / x,
              j = (function (e, t, n) {
                var r,
                  i = 0,
                  a = u(n.shapeText(t, new Zs(eu(e, 0), 0)));
                try {
                  for (a.s(); !(r = a.n()).done; ) {
                    var o = r.value;
                    o.mapped && 8203 !== o.codepoint && (i += o.xAdvance);
                  }
                } catch (s) {
                  a.e(s);
                } finally {
                  a.f();
                }
                return i;
              })(y, P, D),
              F = !0;
            F;
          ) {
            for (
              var V = (0 === b || e + 1 < b) && ("both" !== h || v || M + T + g.maxCharHeight <= B),
                H = V ? w : w - j,
                G = 0,
                z = M + g.maxCharHeight >= f.y1,
                X = M <= f.y2,
                W = z && X;
              (L = N.next()) && !L.done;
            ) {
              var K = L.value;
              if (e === p.length) p.push({ codepointIndex: K.cluster, maxY: I, maxX: k });
              else if (e > p.length) throw new Error("Unexpected lineCache length");
              if (
                (32 === K.codepoint || 10 === K.codepoint || 8203 === K.codepoint
                  ? -1 !== _.codepointIndex && ((_.codepointIndex = -1), (G = C))
                  : -1 === _.codepointIndex &&
                    ((_.codepointIndex = K.cluster), (_.bufferOffset = R), (_.xStart = G)),
                K.mapped)
              ) {
                var q = C + K.xOffset + K.width;
                if ("none" !== h && q >= H && -1 !== _.codepointIndex && _.xStart > 0) {
                  if (V) {
                    ((N = D.shapeText(P, new Zs(eu(r, _.codepointIndex), _.codepointIndex))),
                      (R = _.bufferOffset));
                    break;
                  }
                  ((N = D.shapeText(P, new Zs(eu(y, 0), 0))),
                    (C = _.xStart),
                    (R = _.bufferOffset),
                    (h = "none"));
                } else {
                  var Y = C + K.xOffset,
                    $ = M + K.yOffset;
                  if (W) {
                    -1 === O && (O = R);
                    var J = g.getAtlasEntry(K.glyphId),
                      Q = J.x / g.data.common.scaleW,
                      Z = J.y / g.data.common.scaleH,
                      ee = J.width / g.data.common.scaleW,
                      te = J.height / g.data.common.scaleH;
                    ((c[R++] = Y),
                      (c[R++] = $),
                      (c[R++] = Q),
                      (c[R++] = Z),
                      (c[R++] = Y + K.width),
                      (c[R++] = $),
                      (c[R++] = Q + ee),
                      (c[R++] = Z),
                      (c[R++] = Y),
                      (c[R++] = $ + K.height),
                      (c[R++] = Q),
                      (c[R++] = Z + te),
                      (c[R++] = Y + K.width),
                      (c[R++] = $ + K.height),
                      (c[R++] = Q + ee),
                      (c[R++] = Z + te));
                  }
                  ((I = Math.max(I, $ + K.height)), (k = Math.max(k, Y + K.width)), (C += K.xAdvance));
                }
              } else if (10 === K.codepoint) {
                if (V) break;
                ((N = D.shapeText(P, new Zs(eu(y, 0), 0))), (h = "none"));
              }
            }
            (-1 !== O && (U.push({ bufferStart: O, bufferEnd: R }), (O = -1)),
              (C = 0),
              (M += T),
              e++,
              (_.codepointIndex = -1),
              (G = 0),
              (!m && "both" === h && M > f.y2) || (L && L.done) ? (F = !1) : V || (F = !1));
          }
          if ("center" === i)
            for (var ne = "none" === h ? k : w, re = 0; re < U.length; re++)
              for (
                var ie = U[re],
                  ae = (ne - (c[ie.bufferEnd - 4] - c[ie.bufferStart])) / 2,
                  oe = ie.bufferStart;
                oe < ie.bufferEnd;
                oe += 4
              )
                c[oe] += ae;
          else if ("right" === i)
            for (var se = "none" === h ? k : w, ue = 0; ue < U.length; ue++)
              for (
                var le = U[ue],
                  de = se - (le.bufferEnd === le.bufferStart ? 0 : c[le.bufferEnd - 4] - c[le.bufferStart]),
                  ce = le.bufferStart;
                ce < le.bufferEnd;
                ce += 4
              )
                c[ce] += de;
          return {
            bufferNumFloats: R,
            bufferNumQuads: R / 16,
            layoutNumCharacters: L.done ? r.length - E : L.value.cluster - E + 1,
            fullyProcessed: !!L.done,
            maxX: k,
            maxY: I,
            numLines: p.length,
          };
        }
        function nu(e, t, n, r, i, a, o, s) {
          var u,
            l,
            d,
            c = e.screen,
            h = e.sdf;
          if ((d = o).x1 < d.x2 && d.y1 < d.y2) {
            var p = o.x1 - t,
              f = p + (o.x2 - o.x1),
              g = o.y1 - n + r,
              m = ((u = g - a), (l = i || 1), Math.floor(u / l) * l),
              v = (function (e, t) {
                return Math.ceil(e / t) * t;
              })(g + (o.y2 - o.y1) + a, i || 1);
            ((c.x1 = p),
              (c.y1 = m),
              (c.x2 = f),
              (c.y2 = v),
              (h.x1 = p / s),
              (h.y1 = m / s),
              (h.x2 = f / s),
              (h.y2 = v / s),
              (e.numLines = Math.ceil((v - m) / i)),
              (e.firstLineIdx = i ? Math.floor(m / i) : 0));
          } else
            ((c.x1 = 0),
              (c.y1 = 0),
              (c.x2 = 0),
              (c.y2 = 0),
              (h.x1 = 0),
              (h.y1 = 0),
              (h.x2 = 0),
              (h.y2 = 0),
              (e.numLines = 0),
              (e.firstLineIdx = 0));
          e.valid = !0;
        }
        var ru = { x: 0, y: 0, width: 0, height: 0 };
        var iu,
          au,
          ou =
            "undefined" != typeof globalThis
              ? globalThis
              : "undefined" != typeof window
                ? window
                : "undefined" != typeof global
                  ? global
                  : "undefined" != typeof self
                    ? self
                    : {},
          su = {};
        iu ||
          ((iu = 1),
          (au = su),
          (function () {
            var e = "undefined" != typeof window ? window : ou,
              t = {};
            for (var n in (function (e, t, r) {
              var i,
                a,
                o =
                  "function" == typeof Object.create
                    ? Object.create
                    : function (e) {
                        function t() {}
                        return ((t.prototype = e), new t());
                      },
                s =
                  "function" == typeof Object.defineProperties
                    ? Object.defineProperty
                    : function (e, t, n) {
                        return (e == Array.prototype || e == Object.prototype || (e[t] = n.value), e);
                      },
                u = (function (n) {
                  n = [
                    "object" == typeof globalThis && globalThis,
                    n,
                    "object" == typeof e && e,
                    "object" == typeof self && self,
                    "object" == typeof t && t,
                  ];
                  for (var r = 0; r < n.length; ++r) {
                    var i = n[r];
                    if (i && i.Math == Math) return i;
                  }
                  throw Error("Cannot find global object");
                })(this);
              function l(e, t) {
                if (t)
                  e: {
                    var n = u;
                    e = e.split(".");
                    for (var r = 0; r < e.length - 1; r++) {
                      var i = e[r];
                      if (!(i in n)) break e;
                      n = n[i];
                    }
                    (t = t((r = n[(e = e[e.length - 1])]))) != r &&
                      null != t &&
                      s(n, e, { configurable: !0, writable: !0, value: t });
                  }
              }
              if ("function" == typeof Object.setPrototypeOf) a = Object.setPrototypeOf;
              else {
                var d;
                e: {
                  var c = {};
                  try {
                    ((c.__proto__ = { a: !0 }), (d = c.a));
                    break e;
                  } catch (fA) {}
                  d = !1;
                }
                a = d
                  ? function (e, t) {
                      if (((e.__proto__ = t), e.__proto__ !== t))
                        throw new TypeError(e + " is not extensible");
                      return e;
                    }
                  : null;
              }
              var h = a;
              function p(e, t) {
                if (((e.prototype = o(t.prototype)), (e.prototype.constructor = e), h)) h(e, t);
                else
                  for (var n in t)
                    if ("prototype" != n)
                      if (Object.defineProperties) {
                        var r = Object.getOwnPropertyDescriptor(t, n);
                        r && Object.defineProperty(e, n, r);
                      } else e[n] = t[n];
                e.Im = t.prototype;
              }
              function f(e) {
                var t = 0;
                return function () {
                  return t < e.length ? { done: !1, value: e[t++] } : { done: !0 };
                };
              }
              function g(e) {
                var t = "undefined" != typeof Symbol && Symbol.iterator && e[Symbol.iterator];
                if (t) return t.call(e);
                if ("number" == typeof e.length) return { next: f(e) };
                throw Error(String(e) + " is not an iterable or ArrayLike");
              }
              function m(e) {
                if (!(e instanceof Array)) {
                  e = g(e);
                  for (var t, n = []; !(t = e.next()).done; ) n.push(t.value);
                  e = n;
                }
                return e;
              }
              function v() {
                ((this.o = !1),
                  (this.l = null),
                  (this.h = void 0),
                  (this.g = 1),
                  (this.j = this.m = 0),
                  (this.B = this.i = null));
              }
              function y(e) {
                if (e.o) throw new TypeError("Generator is already running");
                e.o = !0;
              }
              function b(e, t) {
                ((e.i = { bi: t, si: !0 }), (e.g = e.m || e.j));
              }
              function x(e, t, n) {
                return ((e.g = n), { value: t });
              }
              function T(e) {
                e.g = 0;
              }
              function w(e, t, n) {
                ((e.m = t), null != n && (e.j = n));
              }
              function S(e, t) {
                ((e.m = 0), (e.j = t || 0));
              }
              function A(e, t, n) {
                ((e.g = t), (e.m = n || 0));
              }
              function E(e, t) {
                return ((e.m = t || 0), (t = e.i.bi), (e.i = null), t);
              }
              function k(e) {
                ((e.B = [e.i]), (e.m = 0), (e.j = 0));
              }
              function I(e, t) {
                var n = e.B.splice(0)[0];
                (n = e.i = e.i || n)
                  ? n.si
                    ? (e.g = e.m || e.j)
                    : null != n.A && e.j < n.A
                      ? ((e.g = n.A), (e.i = null))
                      : (e.g = e.j)
                  : (e.g = t);
              }
              function C(e) {
                ((this.g = new v()), (this.h = e));
              }
              function M(e, t, n, r) {
                try {
                  var i = t.call(e.g.l, n);
                  if (!(i instanceof Object))
                    throw new TypeError("Iterator result " + i + " is not an object");
                  if (!i.done) return ((e.g.o = !1), i);
                  var a = i.value;
                } catch (o) {
                  return ((e.g.l = null), b(e.g, o), R(e));
                }
                return ((e.g.l = null), r.call(e.g, a), R(e));
              }
              function R(e) {
                for (; e.g.g; )
                  try {
                    var t = e.h(e.g);
                    if (t) return ((e.g.o = !1), { value: t.value, done: !1 });
                  } catch (n) {
                    ((e.g.h = void 0), b(e.g, n));
                  }
                if (((e.g.o = !1), e.g.i)) {
                  if (((t = e.g.i), (e.g.i = null), t.si)) throw t.bi;
                  return { value: t.return, done: !0 };
                }
                return { value: void 0, done: !0 };
              }
              function _(e) {
                ((this.next = function (t) {
                  return (y(e.g), e.g.l ? (t = M(e, e.g.l.next, t, e.g.u)) : (e.g.u(t), (t = R(e))), t);
                }),
                  (this.throw = function (t) {
                    return (y(e.g), e.g.l ? (t = M(e, e.g.l.throw, t, e.g.u)) : (b(e.g, t), (t = R(e))), t);
                  }),
                  (this.return = function (t) {
                    return (function (e, t) {
                      y(e.g);
                      var n = e.g.l;
                      return n
                        ? M(
                            e,
                            "return" in n
                              ? n.return
                              : function (e) {
                                  return { value: e, done: !0 };
                                },
                            t,
                            e.g.return,
                          )
                        : (e.g.return(t), R(e));
                    })(e, t);
                  }),
                  (this[Symbol.iterator] = function () {
                    return this;
                  }));
              }
              function D(e) {
                return (function (e) {
                  function t(t) {
                    return e.next(t);
                  }
                  function n(t) {
                    return e.throw(t);
                  }
                  return new Promise(function (r, i) {
                    !(function e(a) {
                      a.done ? r(a.value) : Promise.resolve(a.value).then(t, n).then(e, i);
                    })(e.next());
                  });
                })(new _(new C(e)));
              }
              function P() {
                for (var e = Number(this), t = [], n = e; n < arguments.length; n++) t[n - e] = arguments[n];
                return t;
              }
              function L(e) {
                return (
                  ((e = { next: e })[Symbol.iterator] = function () {
                    return this;
                  }),
                  e
                );
              }
              function N(e, t) {
                return Object.prototype.hasOwnProperty.call(e, t);
              }
              function O(e, t, n) {
                e instanceof String && (e = String(e));
                for (var r = e.length, i = 0; i < r; i++) {
                  var a = e[i];
                  if (t.call(n, a, i, e)) return { ni: i, v: a };
                }
                return { ni: -1, v: void 0 };
              }
              function U(e, t) {
                e instanceof String && (e += "");
                var n = 0,
                  r = !1,
                  i = {
                    next: function () {
                      if (!r && n < e.length) {
                        var i = n++;
                        return { value: t(i, e[i]), done: !1 };
                      }
                      return ((r = !0), { done: !0, value: void 0 });
                    },
                  };
                return (
                  (i[Symbol.iterator] = function () {
                    return i;
                  }),
                  i
                );
              }
              function B(e, t, n) {
                if (null == e)
                  throw new TypeError(
                    "The 'this' value for String.prototype." + n + " must not be null or undefined",
                  );
                if (t instanceof RegExp)
                  throw new TypeError(
                    "First argument to String.prototype." + n + " must not be a regular expression",
                  );
                return e + "";
              }
              ((v.prototype.u = function (e) {
                this.h = e;
              }),
                (v.prototype.return = function (e) {
                  ((this.i = { return: e }), (this.g = this.j));
                }),
                (v.prototype.A = function (e) {
                  this.g = e;
                }),
                l("Symbol", function (e) {
                  function t(e, t) {
                    ((this.g = e), s(this, "description", { configurable: !0, writable: !0, value: t }));
                  }
                  if (e) return e;
                  t.prototype.toString = function () {
                    return this.g;
                  };
                  var n = "jscomp_symbol_" + ((1e9 * Math.random()) >>> 0) + "_",
                    r = 0;
                  return function e(i) {
                    if (this instanceof e) throw new TypeError("Symbol is not a constructor");
                    return new t(n + (i || "") + "_" + r++, i);
                  };
                }),
                l("Symbol.iterator", function (e) {
                  return (
                    e ||
                    ((e = Symbol("Symbol.iterator")),
                    s(Array.prototype, e, {
                      configurable: !0,
                      writable: !0,
                      value: function () {
                        return L(f(this));
                      },
                    }),
                    e)
                  );
                }),
                l("Promise", function (e) {
                  function t(e) {
                    ((this.h = 0), (this.i = void 0), (this.g = []), (this.o = !1));
                    var t = this.j();
                    try {
                      e(t.resolve, t.reject);
                    } catch (n) {
                      t.reject(n);
                    }
                  }
                  function r() {
                    this.g = null;
                  }
                  function i(e) {
                    return e instanceof t
                      ? e
                      : new t(function (t) {
                          t(e);
                        });
                  }
                  if (e) return e;
                  r.prototype.h = function (e) {
                    if (null == this.g) {
                      this.g = [];
                      var t = this;
                      this.i(function () {
                        t.l();
                      });
                    }
                    this.g.push(e);
                  };
                  var a = u.setTimeout;
                  ((r.prototype.i = function (e) {
                    a(e, 0);
                  }),
                    (r.prototype.l = function () {
                      for (; this.g && this.g.length; ) {
                        var e = this.g;
                        this.g = [];
                        for (var t = 0; t < e.length; ++t) {
                          var n = e[t];
                          e[t] = null;
                          try {
                            n();
                          } catch (r) {
                            this.j(r);
                          }
                        }
                      }
                      this.g = null;
                    }),
                    (r.prototype.j = function (e) {
                      this.i(function () {
                        throw e;
                      });
                    }),
                    (t.prototype.j = function () {
                      function e(e) {
                        return function (r) {
                          n || ((n = !0), e.call(t, r));
                        };
                      }
                      var t = this,
                        n = !1;
                      return { resolve: e(this.G), reject: e(this.l) };
                    }),
                    (t.prototype.G = function (e) {
                      if (e === this) this.l(new TypeError("A Promise cannot resolve to itself"));
                      else if (e instanceof t) this.I(e);
                      else {
                        e: switch (typeof e) {
                          case "object":
                            var n = null != e;
                            break e;
                          case "function":
                            n = !0;
                            break e;
                          default:
                            n = !1;
                        }
                        n ? this.F(e) : this.m(e);
                      }
                    }),
                    (t.prototype.F = function (e) {
                      var t = void 0;
                      try {
                        t = e.then;
                      } catch (n) {
                        return void this.l(n);
                      }
                      "function" == typeof t ? this.J(t, e) : this.m(e);
                    }),
                    (t.prototype.l = function (e) {
                      this.u(2, e);
                    }),
                    (t.prototype.m = function (e) {
                      this.u(1, e);
                    }),
                    (t.prototype.u = function (e, t) {
                      if (0 != this.h)
                        throw Error(
                          "Cannot settle(" + e + ", " + t + "): Promise already settled in state" + this.h,
                        );
                      ((this.h = e), (this.i = t), 2 === this.h && this.H(), this.B());
                    }),
                    (t.prototype.H = function () {
                      var e = this;
                      a(function () {
                        if (e.C()) {
                          var t = u.console;
                          void 0 !== t && t.error(e.i);
                        }
                      }, 1);
                    }),
                    (t.prototype.C = function () {
                      if (this.o) return !1;
                      var e = u.CustomEvent,
                        t = u.Event,
                        n = u.dispatchEvent;
                      return (
                        void 0 === n ||
                        ("function" == typeof e
                          ? (e = new e("unhandledrejection", { cancelable: !0 }))
                          : "function" == typeof t
                            ? (e = new t("unhandledrejection", { cancelable: !0 }))
                            : (e = u.document.createEvent("CustomEvent")).initCustomEvent(
                                "unhandledrejection",
                                !1,
                                !0,
                                e,
                              ),
                        (e.promise = this),
                        (e.reason = this.i),
                        n(e))
                      );
                    }),
                    (t.prototype.B = function () {
                      if (null != this.g) {
                        for (var e = 0; e < this.g.length; ++e) o.h(this.g[e]);
                        this.g = null;
                      }
                    }));
                  var o = new r();
                  return (
                    (t.prototype.I = function (e) {
                      var t = this.j();
                      e.Te(t.resolve, t.reject);
                    }),
                    (t.prototype.J = function (e, t) {
                      var n = this.j();
                      try {
                        e.call(t, n.resolve, n.reject);
                      } catch (r) {
                        n.reject(r);
                      }
                    }),
                    (t.prototype.then = function (e, n) {
                      function r(e, t) {
                        return "function" == typeof e
                          ? function (t) {
                              try {
                                i(e(t));
                              } catch (n) {
                                a(n);
                              }
                            }
                          : t;
                      }
                      var i,
                        a,
                        o = new t(function (e, t) {
                          ((i = e), (a = t));
                        });
                      return (this.Te(r(e, i), r(n, a)), o);
                    }),
                    (t.prototype.catch = function (e) {
                      return this.then(void 0, e);
                    }),
                    (t.prototype.Te = function (e, t) {
                      function n() {
                        switch (r.h) {
                          case 1:
                            e(r.i);
                            break;
                          case 2:
                            t(r.i);
                            break;
                          default:
                            throw Error("Unexpected state: " + r.h);
                        }
                      }
                      var r = this;
                      (null == this.g ? o.h(n) : this.g.push(n), (this.o = !0));
                    }),
                    (t.resolve = i),
                    (t.reject = function (e) {
                      return new t(function (t, n) {
                        n(e);
                      });
                    }),
                    (t.race = function (e) {
                      return new t(function (t, n) {
                        for (var r = g(e), a = r.next(); !a.done; a = r.next()) i(a.value).Te(t, n);
                      });
                    }),
                    (t.all = function (e) {
                      var n = g(e),
                        r = n.next();
                      return r.done
                        ? i([])
                        : new t(function (e, t) {
                            function a(t) {
                              return function (n) {
                                ((o[t] = n), 0 == --s && e(o));
                              };
                            }
                            var o = [],
                              s = 0;
                            do {
                              (o.push(void 0), s++, i(r.value).Te(a(o.length - 1), t), (r = n.next()));
                            } while (!r.done);
                          });
                    }),
                    t
                  );
                }),
                l("WeakMap", function (e) {
                  function t(e) {
                    if (((this.g = (u += Math.random() + 1).toString()), e)) {
                      e = g(e);
                      for (var t; !(t = e.next()).done; ) ((t = t.value), this.set(t[0], t[1]));
                    }
                  }
                  function n() {}
                  function r(e) {
                    var t = typeof e;
                    return ("object" === t && null !== e) || "function" === t;
                  }
                  function i(e) {
                    if (!N(e, o)) {
                      var t = new n();
                      s(e, o, { value: t });
                    }
                  }
                  function a(e) {
                    var t = Object[e];
                    t &&
                      (Object[e] = function (e) {
                        return e instanceof n ? e : (Object.isExtensible(e) && i(e), t(e));
                      });
                  }
                  if (
                    (function () {
                      if (!e || !Object.seal) return !1;
                      try {
                        var t = Object.seal({}),
                          n = Object.seal({}),
                          r = new e([
                            [t, 2],
                            [n, 3],
                          ]);
                        return (
                          2 == r.get(t) &&
                          3 == r.get(n) &&
                          (r.delete(t), r.set(n, 4), !r.has(t) && 4 == r.get(n))
                        );
                      } catch (i) {
                        return !1;
                      }
                    })()
                  )
                    return e;
                  var o = "$jscomp_hidden_" + Math.random();
                  (a("freeze"), a("preventExtensions"), a("seal"));
                  var u = 0;
                  return (
                    (t.prototype.set = function (e, t) {
                      if (!r(e)) throw Error("Invalid WeakMap key");
                      if ((i(e), !N(e, o))) throw Error("WeakMap key fail: " + e);
                      return ((e[o][this.g] = t), this);
                    }),
                    (t.prototype.get = function (e) {
                      return r(e) && N(e, o) ? e[o][this.g] : void 0;
                    }),
                    (t.prototype.has = function (e) {
                      return r(e) && N(e, o) && N(e[o], this.g);
                    }),
                    (t.prototype.delete = function (e) {
                      return !!(r(e) && N(e, o) && N(e[o], this.g)) && delete e[o][this.g];
                    }),
                    t
                  );
                }),
                l("Map", function (e) {
                  function t() {
                    var e = {};
                    return (e.xc = e.next = e.head = e);
                  }
                  function n(e, t) {
                    var n = e[1];
                    return L(function () {
                      if (n) {
                        for (; n.head != e[1]; ) n = n.xc;
                        for (; n.next != n.head; ) return ((n = n.next), { done: !1, value: t(n) });
                        n = null;
                      }
                      return { done: !0, value: void 0 };
                    });
                  }
                  function r(e, t) {
                    var n = t && typeof t;
                    "object" == n || "function" == n
                      ? a.has(t)
                        ? (n = a.get(t))
                        : ((n = "" + ++o), a.set(t, n))
                      : (n = "p_" + t);
                    var r = e[0][n];
                    if (r && N(e[0], n))
                      for (e = 0; e < r.length; e++) {
                        var i = r[e];
                        if ((t != t && i.key != i.key) || t === i.key)
                          return { id: n, list: r, index: e, entry: i };
                      }
                    return { id: n, list: r, index: -1, entry: void 0 };
                  }
                  function i(e) {
                    if (((this[0] = {}), (this[1] = t()), (this.size = 0), e)) {
                      e = g(e);
                      for (var n; !(n = e.next()).done; ) ((n = n.value), this.set(n[0], n[1]));
                    }
                  }
                  if (
                    (function () {
                      if (
                        !e ||
                        "function" != typeof e ||
                        !e.prototype.entries ||
                        "function" != typeof Object.seal
                      )
                        return !1;
                      try {
                        var t = Object.seal({ x: 4 }),
                          n = new e(g([[t, "s"]]));
                        if (
                          "s" != n.get(t) ||
                          1 != n.size ||
                          n.get({ x: 4 }) ||
                          n.set({ x: 4 }, "t") != n ||
                          2 != n.size
                        )
                          return !1;
                        var r = n.entries(),
                          i = r.next();
                        return (
                          !i.done &&
                          i.value[0] == t &&
                          "s" == i.value[1] &&
                          !((i = r.next()).done || 4 != i.value[0].x || "t" != i.value[1] || !r.next().done)
                        );
                      } catch (a) {
                        return !1;
                      }
                    })()
                  )
                    return e;
                  var a = new WeakMap();
                  ((i.prototype.set = function (e, t) {
                    var n = r(this, (e = 0 === e ? 0 : e));
                    return (
                      n.list || (n.list = this[0][n.id] = []),
                      n.entry
                        ? (n.entry.value = t)
                        : ((n.entry = { next: this[1], xc: this[1].xc, head: this[1], key: e, value: t }),
                          n.list.push(n.entry),
                          (this[1].xc.next = n.entry),
                          (this[1].xc = n.entry),
                          this.size++),
                      this
                    );
                  }),
                    (i.prototype.delete = function (e) {
                      return !(
                        !(e = r(this, e)).entry ||
                        !e.list ||
                        (e.list.splice(e.index, 1),
                        e.list.length || delete this[0][e.id],
                        (e.entry.xc.next = e.entry.next),
                        (e.entry.next.xc = e.entry.xc),
                        (e.entry.head = null),
                        this.size--,
                        0)
                      );
                    }),
                    (i.prototype.clear = function () {
                      ((this[0] = {}), (this[1] = this[1].xc = t()), (this.size = 0));
                    }),
                    (i.prototype.has = function (e) {
                      return !!r(this, e).entry;
                    }),
                    (i.prototype.get = function (e) {
                      return (e = r(this, e).entry) && e.value;
                    }),
                    (i.prototype.entries = function () {
                      return n(this, function (e) {
                        return [e.key, e.value];
                      });
                    }),
                    (i.prototype.keys = function () {
                      return n(this, function (e) {
                        return e.key;
                      });
                    }),
                    (i.prototype.values = function () {
                      return n(this, function (e) {
                        return e.value;
                      });
                    }),
                    (i.prototype.forEach = function (e, t) {
                      for (var n, r = this.entries(); !(n = r.next()).done; )
                        ((n = n.value), e.call(t, n[1], n[0], this));
                    }),
                    (i.prototype[Symbol.iterator] = i.prototype.entries));
                  var o = 0;
                  return i;
                }),
                l("Set", function (e) {
                  function t(e) {
                    if (((this.g = new Map()), e)) {
                      e = g(e);
                      for (var t; !(t = e.next()).done; ) this.add(t.value);
                    }
                    this.size = this.g.size;
                  }
                  return (function () {
                    if (
                      !e ||
                      "function" != typeof e ||
                      !e.prototype.entries ||
                      "function" != typeof Object.seal
                    )
                      return !1;
                    try {
                      var t = Object.seal({ x: 4 }),
                        n = new e(g([t]));
                      if (
                        !n.has(t) ||
                        1 != n.size ||
                        n.add(t) != n ||
                        1 != n.size ||
                        n.add({ x: 4 }) != n ||
                        2 != n.size
                      )
                        return !1;
                      var r = n.entries(),
                        i = r.next();
                      return (
                        !i.done &&
                        i.value[0] == t &&
                        i.value[1] == t &&
                        !(i = r.next()).done &&
                        i.value[0] != t &&
                        4 == i.value[0].x &&
                        i.value[1] == i.value[0] &&
                        r.next().done
                      );
                    } catch (a) {
                      return !1;
                    }
                  })()
                    ? e
                    : ((t.prototype.add = function (e) {
                        return ((e = 0 === e ? 0 : e), this.g.set(e, e), (this.size = this.g.size), this);
                      }),
                      (t.prototype.delete = function (e) {
                        return ((e = this.g.delete(e)), (this.size = this.g.size), e);
                      }),
                      (t.prototype.clear = function () {
                        (this.g.clear(), (this.size = 0));
                      }),
                      (t.prototype.has = function (e) {
                        return this.g.has(e);
                      }),
                      (t.prototype.entries = function () {
                        return this.g.entries();
                      }),
                      (t.prototype.values = function () {
                        return this.g.values();
                      }),
                      (t.prototype.keys = t.prototype.values),
                      (t.prototype[Symbol.iterator] = t.prototype.values),
                      (t.prototype.forEach = function (e, t) {
                        var n = this;
                        this.g.forEach(function (r) {
                          return e.call(t, r, r, n);
                        });
                      }),
                      t);
                }),
                l("Array.prototype.findIndex", function (e) {
                  return (
                    e ||
                    function (e, t) {
                      return O(this, e, t).ni;
                    }
                  );
                }),
                l("Array.prototype.values", function (e) {
                  return (
                    e ||
                    function () {
                      return U(this, function (e, t) {
                        return t;
                      });
                    }
                  );
                }),
                l("Array.from", function (e) {
                  return (
                    e ||
                    function (e, t, n) {
                      t =
                        null != t
                          ? t
                          : function (e) {
                              return e;
                            };
                      var r = [],
                        i = "undefined" != typeof Symbol && Symbol.iterator && e[Symbol.iterator];
                      if ("function" == typeof i) {
                        e = i.call(e);
                        for (var a = 0; !(i = e.next()).done; ) r.push(t.call(n, i.value, a++));
                      } else for (i = e.length, a = 0; a < i; a++) r.push(t.call(n, e[a], a));
                      return r;
                    }
                  );
                }),
                l("Array.prototype.keys", function (e) {
                  return (
                    e ||
                    function () {
                      return U(this, function (e) {
                        return e;
                      });
                    }
                  );
                }),
                l("String.prototype.startsWith", function (e) {
                  return (
                    e ||
                    function (e, t) {
                      var n = B(this, e, "startsWith"),
                        r = n.length,
                        i = e.length;
                      t = Math.max(0, Math.min(0 | t, n.length));
                      for (var a = 0; a < i && t < r; ) if (n[t++] != e[a++]) return !1;
                      return a >= i;
                    }
                  );
                }),
                l("Object.is", function (e) {
                  return (
                    e ||
                    function (e, t) {
                      return e === t ? 0 !== e || 1 / e == 1 / t : e != e && t != t;
                    }
                  );
                }),
                l("Array.prototype.includes", function (e) {
                  return (
                    e ||
                    function (e, t) {
                      var n = this;
                      n instanceof String && (n = String(n));
                      var r = n.length;
                      for ((t = t || 0) < 0 && (t = Math.max(t + r, 0)); t < r; t++) {
                        var i = n[t];
                        if (i === e || Object.is(i, e)) return !0;
                      }
                      return !1;
                    }
                  );
                }),
                l("String.prototype.includes", function (e) {
                  return (
                    e ||
                    function (e, t) {
                      return -1 !== B(this, e, "includes").indexOf(e, t || 0);
                    }
                  );
                }),
                l("String.fromCodePoint", function (e) {
                  return (
                    e ||
                    function (e) {
                      for (var t = "", n = 0; n < arguments.length; n++) {
                        var r = Number(arguments[n]);
                        if (r < 0 || r > 1114111 || r !== Math.floor(r))
                          throw new RangeError("invalid_code_point " + r);
                        r <= 65535
                          ? (t += String.fromCharCode(r))
                          : ((r -= 65536),
                            (t += String.fromCharCode(((r >>> 10) & 1023) | 55296)),
                            (t += String.fromCharCode((1023 & r) | 56320)));
                      }
                      return t;
                    }
                  );
                }),
                l("WeakSet", function (e) {
                  function t(e) {
                    if (((this.g = new WeakMap()), e)) {
                      e = g(e);
                      for (var t; !(t = e.next()).done; ) this.add(t.value);
                    }
                  }
                  return (function () {
                    if (!e || !Object.seal) return !1;
                    try {
                      var t = Object.seal({}),
                        n = Object.seal({}),
                        r = new e([t]);
                      return !(!r.has(t) || r.has(n)) && (r.delete(t), r.add(n), !r.has(t) && r.has(n));
                    } catch (i) {
                      return !1;
                    }
                  })()
                    ? e
                    : ((t.prototype.add = function (e) {
                        return (this.g.set(e, !0), this);
                      }),
                      (t.prototype.has = function (e) {
                        return this.g.has(e);
                      }),
                      (t.prototype.delete = function (e) {
                        return this.g.delete(e);
                      }),
                      t);
                }),
                l("Array.prototype.find", function (e) {
                  return (
                    e ||
                    function (e, t) {
                      return O(this, e, t).v;
                    }
                  );
                }),
                l("Object.entries", function (e) {
                  return (
                    e ||
                    function (e) {
                      var t,
                        n = [];
                      for (t in e) N(e, t) && n.push([t, e[t]]);
                      return n;
                    }
                  );
                }));
              var j =
                "function" == typeof Object.assign
                  ? Object.assign
                  : function (e, t) {
                      if (null == e) throw new TypeError("No nullish arg");
                      e = Object(e);
                      for (var n = 1; n < arguments.length; n++) {
                        var r = arguments[n];
                        if (r) for (var i in r) N(r, i) && (e[i] = r[i]);
                      }
                      return e;
                    };
              (l("Object.assign", function (e) {
                return e || j;
              }),
                l("Promise.prototype.finally", function (e) {
                  return (
                    e ||
                    function (e) {
                      return this.then(
                        function (t) {
                          return Promise.resolve(e()).then(function () {
                            return t;
                          });
                        },
                        function (t) {
                          return Promise.resolve(e()).then(function () {
                            throw t;
                          });
                        },
                      );
                    }
                  );
                }),
                l("Array.prototype.entries", function (e) {
                  return (
                    e ||
                    function () {
                      return U(this, function (e, t) {
                        return [e, t];
                      });
                    }
                  );
                }),
                l("Number.isNaN", function (e) {
                  return (
                    e ||
                    function (e) {
                      return "number" == typeof e && isNaN(e);
                    }
                  );
                }),
                l("String.prototype.repeat", function (e) {
                  return (
                    e ||
                    function (e) {
                      var t = B(this, null, "repeat");
                      if (e < 0 || e > 1342177279) throw new RangeError("Invalid count value");
                      e |= 0;
                      for (var n = ""; e; ) (1 & e && (n += t), (e >>>= 1) && (t += t));
                      return n;
                    }
                  );
                }),
                l("Number.EPSILON", function () {
                  return 2220446049250313e-31;
                }),
                l("Number.MAX_SAFE_INTEGER", function () {
                  return 9007199254740991;
                }),
                l("Number.isFinite", function (e) {
                  return (
                    e ||
                    function (e) {
                      return "number" == typeof e && !isNaN(e) && e !== 1 / 0 && e !== -1 / 0;
                    }
                  );
                }),
                l("Object.values", function (e) {
                  return (
                    e ||
                    function (e) {
                      var t,
                        n = [];
                      for (t in e) N(e, t) && n.push(e[t]);
                      return n;
                    }
                  );
                }),
                l("Math.log2", function (e) {
                  return (
                    e ||
                    function (e) {
                      return Math.log(e) / Math.LN2;
                    }
                  );
                }),
                l("String.prototype.endsWith", function (e) {
                  return (
                    e ||
                    function (e, t) {
                      var n = B(this, e, "endsWith");
                      (void 0 === t && (t = n.length), (t = Math.max(0, Math.min(0 | t, n.length))));
                      for (var r = e.length; r > 0 && t > 0; ) if (n[--t] != e[--r]) return !1;
                      return r <= 0;
                    }
                  );
                }),
                l("Math.trunc", function (e) {
                  return (
                    e ||
                    function (e) {
                      if (((e = Number(e)), isNaN(e) || e === 1 / 0 || e === -1 / 0 || 0 === e)) return e;
                      var t = Math.floor(Math.abs(e));
                      return e < 0 ? -t : t;
                    }
                  );
                }));
              var F = this || self;
              function V(e, t) {
                e = e.split(".");
                var n,
                  r = F;
                e[0] in r || void 0 === r.execScript || r.execScript("var " + e[0]);
                for (; e.length && (n = e.shift()); )
                  e.length || void 0 === t
                    ? (r = r[n] && r[n] !== Object.prototype[n] ? r[n] : (r[n] = {}))
                    : (r[n] = t);
              }
              function H(e) {
                ((this.g = Math.exp(Math.log(0.5) / e)), (this.i = this.h = 0));
              }
              function G(e) {
                return e.h / (1 - Math.pow(e.g, e.i));
              }
              function z() {
                ((this.h = new H(2)), (this.j = new H(5)), (this.g = 0), (this.i = 128e3), (this.l = 16e3));
              }
              function X() {}
              function W() {}
              function K() {}
              function q(e) {
                var t = P.apply(1, arguments);
                $.has(e) || ($.add(e), K.apply(X, m(t)));
              }
              function Y() {}
              ((H.prototype.sample = function (e, t) {
                var n = Math.pow(this.g, e);
                ((t = t * (1 - n) + n * this.h), isNaN(t) || ((this.h = t), (this.i += e)));
              }),
                (z.prototype.configure = function (e) {
                  ((this.i = e.minTotalBytes),
                    (this.l = e.minBytes),
                    (this.h.g = Math.exp(Math.log(0.5) / e.fastHalfLife)),
                    (this.j.g = Math.exp(Math.log(0.5) / e.slowHalfLife)));
                }),
                (z.prototype.sample = function (e, t) {
                  if (!(t < this.l)) {
                    var n = (8e3 * t) / e;
                    ((e /= 1e3), (this.g += t), this.h.sample(e, n), this.j.sample(e, n));
                  }
                }),
                (z.prototype.getBandwidthEstimate = function (e) {
                  return this.g < this.i ? e : Math.min(G(this.h), G(this.j));
                }));
              var $ = new Set();
              function J(e, t) {
                return !("number" != typeof e || "number" != typeof t || !isNaN(e) || !isNaN(t)) || e === t;
              }
              function Q(e, t) {
                (t = e.indexOf(t)) > -1 && e.splice(t, 1);
              }
              function Z(e, t, n) {
                if ((n || (n = J), e.length != t.length)) return !1;
                t = t.slice();
                for (var r = (e = g(e)).next(), i = {}; !r.done; i = { ui: void 0 }, r = e.next()) {
                  if (
                    ((i.ui = r.value),
                    -1 ==
                      (r = t.findIndex(
                        (function (e) {
                          return function (t) {
                            return n(e.ui, t);
                          };
                        })(i),
                      )))
                  )
                    return !1;
                  ((t[r] = t[t.length - 1]), t.pop());
                }
                return 0 == t.length;
              }
              function ee(e, t, n) {
                if (e === t) return !0;
                if (!e || !t) return e == t;
                if ((n || (n = J), e.length != t.length)) return !1;
                for (var r = 0; r < e.length; r++) if (!n(e[r], t[r])) return !1;
                return !0;
              }
              function te() {
                this.g = new Map();
              }
              function ne() {
                this.g = new te();
              }
              function re(e, t, n, r) {
                ((this.target = e),
                  (this.type = t),
                  (this.listener = n),
                  (this.g = (function (e, t) {
                    if (null == t) return !1;
                    if ("boolean" == typeof t) return t;
                    var n = new Set(["passive", "capture"]);
                    return (
                      Object.keys(t).filter(function (e) {
                        return !n.has(e);
                      }),
                      (function (e) {
                        var t = ie;
                        if (null == t) {
                          t = !1;
                          try {
                            var n = {},
                              r = {
                                get: function () {
                                  return ((t = !0), !1);
                                },
                              };
                            (Object.defineProperty(n, "passive", r),
                              Object.defineProperty(n, "capture", r),
                              (r = function () {}),
                              e.addEventListener("test", r, n),
                              e.removeEventListener("test", r, n));
                          } catch (i) {
                            t = !1;
                          }
                          ie = t;
                        }
                        return t || !1;
                      })(e)
                        ? t
                        : t.capture || !1
                    );
                  })(e, r)),
                  this.target.addEventListener(t, n, this.g));
              }
              (e.console &&
                (new Map()
                  .set(1, function () {
                    return console.error.apply(console, m(P.apply(0, arguments)));
                  })
                  .set(2, function () {
                    return console.warn.apply(console, m(P.apply(0, arguments)));
                  })
                  .set(3, function () {
                    return console.info.apply(console, m(P.apply(0, arguments)));
                  })
                  .set(4, function () {
                    return console.log.apply(console, m(P.apply(0, arguments)));
                  })
                  .set(5, function () {
                    return console.debug.apply(console, m(P.apply(0, arguments)));
                  })
                  .set(6, function () {
                    return console.debug.apply(console, m(P.apply(0, arguments)));
                  }),
                (K = function () {
                  return console.warn.apply(console, m(P.apply(0, arguments)));
                }),
                (W = function () {
                  console.error.apply(console, m(P.apply(0, arguments)));
                })),
                ((i = te.prototype).push = function (e, t) {
                  this.g.has(e) ? this.g.get(e).push(t) : this.g.set(e, [t]);
                }),
                (i.get = function (e) {
                  return this.g.has(e) ? this.g.get(e).slice() : null;
                }),
                (i.remove = function (e, t) {
                  if (this.g.has(e)) {
                    var n = this.g.get(e).filter(function (e) {
                      return e != t;
                    });
                    (this.g.set(e, n), n.length || this.g.delete(e));
                  }
                }),
                (i.forEach = function (e) {
                  this.g.forEach(function (t, n) {
                    e(n, t);
                  });
                }),
                (i.size = function () {
                  return this.g.size;
                }),
                (i.keys = function () {
                  return Array.from(this.g.keys());
                }),
                ((i = ne.prototype).release = function () {
                  (this.Qa(), (this.g = null));
                }),
                (i.D = function (e, t, n, r) {
                  this.g && ((e = new re(e, t, n, r)), this.g.push(t, e));
                }),
                (i.Aa = function (e, t, n, r) {
                  var i = this;
                  this.D(
                    e,
                    t,
                    function r(a) {
                      (i.Ma(e, t, r), n(a));
                    },
                    r,
                  );
                }),
                (i.Ma = function (e, t, n) {
                  if (this.g)
                    for (var r = this.g.get(t) || [], i = (r = g(r)).next(); !i.done; i = r.next())
                      (i = i.value).target != e || (n != i.listener && n) || (i.Ma(), this.g.remove(t, i));
                }),
                (i.Qa = function () {
                  if (this.g) {
                    for (var e = [], t = g(this.g.g.values()), n = t.next(); !n.done; n = t.next())
                      e.push.apply(e, m(n.value));
                    for (t = (e = g(e)).next(); !t.done; t = e.next()) t.value.Ma();
                    this.g.g.clear();
                  }
                }),
                V("shaka.util.EventManager", ne),
                (ne.prototype.removeAll = ne.prototype.Qa),
                (ne.prototype.unlisten = ne.prototype.Ma),
                (ne.prototype.listenOnce = ne.prototype.Aa),
                (ne.prototype.listen = ne.prototype.D),
                (ne.prototype.release = ne.prototype.release),
                (re.prototype.Ma = function () {
                  (this.target.removeEventListener(this.type, this.listener, this.g),
                    (this.listener = this.target = null),
                    (this.g = !1));
                }));
              var ie = void 0;
              function ae(e) {
                ((this.h = e), (this.g = void 0));
              }
              /*
      		 @license
      		 Shaka Player
      		 Copyright 2025 Google LLC
      		 SPDX-License-Identifier: Apache-2.0
      		*/
              function oe() {
                return le.value();
              }
              (V("shaka.config.AutoShowText", {
                NEVER: 0,
                ALWAYS: 1,
                IF_PREFERRED_TEXT_LANGUAGE: 2,
                IF_SUBTITLES_MAY_BE_NEEDED: 3,
              }),
                (ae.prototype.value = function () {
                  return (void 0 === this.g && (this.g = this.h()), this.g);
                }));
              var se = null,
                ue = null,
                le = new ae(function () {
                  var e = void 0;
                  return (se && (e = se()), !e && ue && (e = ue()), e);
                });
              function de(e, t) {
                ((this.g = e), (this.h = t));
              }
              function ce(e, t) {
                var n = new de(5, 0),
                  r = fe,
                  i = r.g,
                  a = n.h - i.h;
                ((n.g - i.g || a) > 0 ? r.i : r.h)(r.g, n, e, t);
              }
              function he(e, t, n, r) {
                K(
                  [
                    n,
                    "has been deprecated and will be removed in",
                    t,
                    ". We are currently at version",
                    e,
                    ". Additional information:",
                    r,
                  ].join(" "),
                );
              }
              function pe(e, t, n, r) {
                W(
                  [
                    n,
                    "has been deprecated and has been removed in",
                    t,
                    ". We are now at version",
                    e,
                    ". Additional information:",
                    r,
                  ].join(" "),
                );
              }
              de.prototype.toString = function () {
                return "v" + this.g + "." + this.h;
              };
              var fe = null,
                ge = RegExp(
                  "^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$",
                );
              /*
      		 @license
      		 Copyright 2008 The Closure Library Authors
      		 SPDX-License-Identifier: Apache-2.0
      		*/
              /*
      		 @license
      		 Copyright 2006 The Closure Library Authors
      		 SPDX-License-Identifier: Apache-2.0
      		*/
              function me(e) {
                var t;
                e instanceof me
                  ? (ve(this, e.fc),
                    (this.hd = e.hd),
                    ye(this, e.Db),
                    be(this, e.Dd),
                    (this.Sb = e.Sb),
                    xe(this, e.g.clone()),
                    (this.Rc = e.Rc))
                  : e && (t = String(e).match(ge))
                    ? (ve(this, t[1] || "", !0),
                      (this.hd = Te(t[2] || "")),
                      ye(this, t[3] || "", !0),
                      be(this, t[4]),
                      (this.Sb = Te(t[5] || "", !0)),
                      xe(this, t[6] || "", !0),
                      (this.Rc = Te(t[7] || "")))
                    : (this.g = new Me(null));
              }
              function ve(e, t, n) {
                ((e.fc = n ? Te(t, !0) : t), e.fc && (e.fc = e.fc.replace(/:$/, "")));
              }
              function ye(e, t, n) {
                e.Db = n ? Te(t, !0) : t;
              }
              function be(e, t) {
                if (t) {
                  if (((t = Number(t)), isNaN(t) || t < 0)) throw Error("Bad port number " + t);
                  e.Dd = t;
                } else e.Dd = null;
              }
              function xe(e, t, n) {
                t instanceof Me ? (e.g = t) : (n || (t = we(t, Ie)), (e.g = new Me(t)));
              }
              function Te(e, t) {
                return e ? (t ? decodeURI(e) : decodeURIComponent(e)) : "";
              }
              function we(e, t, n) {
                return null != e
                  ? ((e = encodeURI(e).replace(t, Se)),
                    n && (e = e.replace(/%25([0-9a-fA-F]{2})/g, "%$1")),
                    e)
                  : null;
              }
              function Se(e) {
                return "%" + (((e = e.charCodeAt(0)) >> 4) & 15).toString(16) + (15 & e).toString(16);
              }
              (((i = me.prototype).fc = ""),
                (i.hd = ""),
                (i.Db = ""),
                (i.Dd = null),
                (i.Sb = ""),
                (i.Rc = ""),
                (i.toString = function () {
                  var e = [],
                    t = this.fc;
                  if ((t && e.push(we(t, Ae, !0), ":"), (t = this.Db))) {
                    e.push("//");
                    var n = this.hd;
                    (n && e.push(we(n, Ae, !0), "@"),
                      e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g, "%$1")),
                      null != (t = this.Dd) && e.push(":", String(t)));
                  }
                  return (
                    (t = this.Sb) &&
                      (this.Db && "/" != t.charAt(0) && e.push("/"),
                      e.push(we(t, "/" == t.charAt(0) ? ke : Ee, !0))),
                    (t = this.g.toString()) && e.push("?", t),
                    (t = this.Rc) && e.push("#", we(t, Ce)),
                    e.join("")
                  );
                }),
                (i.resolve = function (e) {
                  var t = this.clone();
                  "data" === t.fc && (t = new me());
                  var n = !!e.fc;
                  (n ? ve(t, e.fc) : (n = !!e.hd),
                    n ? (t.hd = e.hd) : (n = !!e.Db),
                    n ? ye(t, e.Db) : (n = null != e.Dd));
                  var r = e.Sb;
                  if (n) be(t, e.Dd);
                  else if ((n = !!e.Sb)) {
                    if ("/" != r.charAt(0))
                      if (this.Db && !this.Sb) r = "/" + r;
                      else {
                        var i = t.Sb.lastIndexOf("/");
                        -1 != i && (r = t.Sb.substr(0, i + 1) + r);
                      }
                    if (".." == r || "." == r) r = "";
                    else if (-1 != r.indexOf("./") || -1 != r.indexOf("/.")) {
                      ((i = 0 == r.lastIndexOf("/", 0)), (r = r.split("/")));
                      for (var a = [], o = 0; o < r.length; ) {
                        var s = r[o++];
                        "." == s
                          ? i && o == r.length && a.push("")
                          : ".." == s
                            ? ((a.length > 1 || (1 == a.length && "" != a[0])) && a.pop(),
                              i && o == r.length && a.push(""))
                            : (a.push(s), (i = !0));
                      }
                      r = a.join("/");
                    }
                  }
                  return (
                    n ? (t.Sb = r) : (n = "" !== e.g.toString()),
                    n ? xe(t, e.g.clone()) : (n = !!e.Rc),
                    n && (t.Rc = e.Rc),
                    t
                  );
                }),
                (i.clone = function () {
                  return new me(this);
                }));
              var Ae = /[#\/\?@]/g,
                Ee = /[#\?:]/g,
                ke = /[#\?]/g,
                Ie = /[#\?@]/g,
                Ce = /#/g;
              function Me(e) {
                this.g = e || null;
              }
              function Re(e) {
                if (!e.fb && ((e.fb = new Map()), (e.Vd = 0), e.g))
                  for (var t = e.g.split("&"), n = 0; n < t.length; n++) {
                    var r = t[n].indexOf("="),
                      i = null;
                    if (r >= 0) {
                      var a = t[n].substring(0, r);
                      i = t[n].substring(r + 1);
                    } else a = t[n];
                    ((a = decodeURIComponent(a)), (i = i || ""), e.add(a, decodeURIComponent(i)));
                  }
              }
              function _e(e) {
                return (Re(e), e.Vd);
              }
              function De() {}
              function Pe(e, t) {
                if (!e && !t) return !0;
                if (!e || !t || e.byteLength != t.byteLength) return !1;
                if (
                  (ArrayBuffer.isView(e) ? e.buffer : e) == (ArrayBuffer.isView(t) ? t.buffer : t) &&
                  (e.byteOffset || 0) == (t.byteOffset || 0)
                )
                  return !0;
                var n = Ne(e);
                t = Ne(t);
                for (var r = 0; r < e.byteLength; r++) if (n[r] != t[r]) return !1;
                return !0;
              }
              function Le(e) {
                return ArrayBuffer.isView(e)
                  ? 0 == e.byteOffset && e.byteLength == e.buffer.byteLength
                    ? e.buffer
                    : new Uint8Array(e).buffer
                  : e;
              }
              function Ne(e, t, n) {
                return Be(e, void 0 === t ? 0 : t, (n = void 0 === n ? 1 / 0 : n), Uint8Array);
              }
              function Oe(e, t, n) {
                return Be(e, void 0 === t ? 0 : t, (n = void 0 === n ? 1 / 0 : n), Uint16Array);
              }
              function Ue(e, t, n) {
                return Be(e, void 0 === t ? 0 : t, (n = void 0 === n ? 1 / 0 : n), DataView);
              }
              function Be(e, t, n, r) {
                var i = ArrayBuffer.isView(e) ? e.buffer : e,
                  a = 1;
                "BYTES_PER_ELEMENT" in r && (a = r.BYTES_PER_ELEMENT);
                var o = ((e.byteOffset || 0) + e.byteLength) / a;
                return new r(
                  i,
                  (e = Math.floor(Math.max(0, Math.min(((e.byteOffset || 0) + t) / a, o)))),
                  Math.floor(Math.min(e + Math.max(n, 0), o)) - e,
                );
              }
              function je(e, t) {
                if (e === t || !e.length || !t.length) return !0;
                for (var n = (e = g(e)).next(); !n.done; n = e.next()) {
                  if (Ge((n = n.value))) return !0;
                  for (var r = g(t), i = r.next(); !i.done; i = r.next())
                    if (((i = i.value), n.keySystem === i.keySystem || Ge(i))) return !0;
                }
                return !1;
              }
              function Fe(e, t) {
                if (!e.length) return t;
                if (!t.length) return e;
                for (var n = [], r = (e = g(e)).next(); !r.done; r = e.next()) {
                  r = r.value;
                  for (var i = g(t), a = i.next(); !a.done; a = i.next()) {
                    if (((a = a.value), r.keySystem == a.keySystem)) {
                      i = new Map();
                      for (
                        var o = g((r.initData || []).concat(a.initData || [])), s = o.next();
                        !s.done;
                        s = o.next()
                      )
                        ((s = s.value), i.set(s.keyId, s));
                      ((i = Array.from(i.values())),
                        (o =
                          r.keyIds && a.keyIds
                            ? new Set([].concat(m(r.keyIds), m(a.keyIds)))
                            : r.keyIds || a.keyIds),
                        n.push({
                          keySystem: r.keySystem,
                          licenseServerUri: r.licenseServerUri || a.licenseServerUri,
                          distinctiveIdentifierRequired:
                            r.distinctiveIdentifierRequired || a.distinctiveIdentifierRequired,
                          persistentStateRequired: r.persistentStateRequired || a.persistentStateRequired,
                          videoRobustness: r.videoRobustness || a.videoRobustness,
                          audioRobustness: r.audioRobustness || a.audioRobustness,
                          serverCertificate: r.serverCertificate || a.serverCertificate,
                          serverCertificateUri: r.serverCertificateUri || a.serverCertificateUri,
                          initData: i,
                          keyIds: o,
                        }));
                      break;
                    }
                    Ge(r) ? n.push(r) : Ge(a) && n.push(a);
                  }
                }
                return n;
              }
              function Ve(e) {
                return !!e && !!e.match(/^com\.(microsoft|chromecast)\.playready/);
              }
              function He(e) {
                return !!e && !!e.match(/^com\.apple\.fps/);
              }
              function Ge(e) {
                return !!(e = e.licenseServerUri) && e.startsWith("data:application/json;base64,");
              }
              function ze(e, t, n, r) {
                return (
                  e +
                  "#" +
                  t +
                  "#" +
                  n +
                  "#" +
                  (r = []
                    .concat(m(new Set(r)))
                    .sort()
                    .join("#"))
                );
              }
              (((i = Me.prototype).fb = null),
                (i.Vd = null),
                (i.add = function (e, t) {
                  (Re(this), (this.g = null));
                  var n = this.fb.has(e) ? this.fb.get(e) : null;
                  return (n || this.fb.set(e, (n = [])), n.push(t), this.Vd++, this);
                }),
                (i.set = function (e, t) {
                  return (
                    Re(this),
                    (this.g = null),
                    this.fb.has(e) ? this.fb.set(e, [t]) : this.add(e, t),
                    this
                  );
                }),
                (i.get = function (e) {
                  return (Re(this), this.fb.get(e) || []);
                }),
                (i.toString = function () {
                  if (this.g) return this.g;
                  if (!this.fb || !this.fb.size) return "";
                  for (var e = [], t = g(this.fb.keys()), n = t.next(); !n.done; n = t.next()) {
                    var r = n.value;
                    ((n = encodeURIComponent(r)), (r = this.fb.get(r)));
                    for (var i = 0; i < r.length; i++) {
                      var a = n;
                      ("" !== r[i] && (a += "=" + encodeURIComponent(r[i])), e.push(a));
                    }
                  }
                  return (this.g = e.join("&"));
                }),
                (i.clone = function () {
                  var e = new Me();
                  if (((e.g = this.g), this.fb)) {
                    for (var t = new Map(), n = g(this.fb), r = n.next(); !r.done; r = n.next()) {
                      var i = g(r.value);
                      ((r = i.next().value), (i = i.next().value), t.set(r, i.concat()));
                    }
                    ((e.fb = t), (e.Vd = this.Vd));
                  }
                  return e;
                }),
                V("shaka.util.BufferUtils", De),
                (De.toDataView = Ue),
                (De.toUint16 = Oe),
                (De.toUint8 = Ne),
                (De.toArrayBuffer = Le),
                (De.equal = Pe));
              var Xe = new ae(function () {
                  return Le(new Uint8Array([0]));
                }),
                We = new Map();
              function Ke(e, t, n) {
                var r = P.apply(3, arguments);
                ((this.severity = e),
                  (this.category = t),
                  (this.code = n),
                  (this.data = r),
                  (this.handled = !1),
                  (this.message = "Shaka Error " + this.code));
                try {
                  throw Error(this.message || "Shaka Error");
                } catch (i) {
                  this.stack = i.stack;
                }
              }
              function qe() {}
              function Ye(t) {
                if (!t) return "";
                if (
                  (239 == (t = Ne(t))[0] && 187 == t[1] && 191 == t[2] && (t = t.subarray(3)),
                  e.TextDecoder && !oe().xh())
                )
                  return (
                    (t = new TextDecoder().decode(t)).includes("") &&
                      W(
                        'Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!',
                      ),
                    t
                  );
                for (var n = "", r = 0; r < t.length; ++r) {
                  var i = 65533;
                  if (
                    (128 & t[r]
                      ? t.length >= r + 2 && 192 == (224 & t[r]) && 128 == (192 & t[r + 1])
                        ? ((i = ((31 & t[r]) << 6) | (63 & t[r + 1])), (r += 1))
                        : t.length >= r + 3 &&
                            224 == (240 & t[r]) &&
                            128 == (192 & t[r + 1]) &&
                            128 == (192 & t[r + 2])
                          ? ((i = ((15 & t[r]) << 12) | ((63 & t[r + 1]) << 6) | (63 & t[r + 2])), (r += 2))
                          : t.length >= r + 4 &&
                            240 == (241 & t[r]) &&
                            128 == (192 & t[r + 1]) &&
                            128 == (192 & t[r + 2]) &&
                            128 == (192 & t[r + 3]) &&
                            ((i =
                              ((7 & t[r]) << 18) |
                              ((63 & t[r + 1]) << 12) |
                              ((63 & t[r + 2]) << 6) |
                              (63 & t[r + 3])),
                            (r += 3))
                      : (i = t[r]),
                    i <= 65535)
                  )
                    n += String.fromCharCode(i);
                  else {
                    var a = 1023 & (i -= 65536);
                    ((n += String.fromCharCode(55296 + (i >> 10))), (n += String.fromCharCode(56320 + a)));
                  }
                }
                return n;
              }
              function $e(e, t, n) {
                if (!e) return "";
                if (!n && e.byteLength % 2 != 0) throw new Ke(2, 2, 2004);
                n = Math.floor(e.byteLength / 2);
                var r = new Uint16Array(n);
                e = Ue(e);
                for (var i = 0; i < n; i++) r[i] = e.getUint16(2 * i, t);
                return tt.value()(r);
              }
              function Je(e) {
                function t(e) {
                  return n.byteLength <= e || (n[e] >= 9 && n[e] <= 126);
                }
                if (!e) return "";
                var n = Ne(e);
                if (239 == n[0] && 187 == n[1] && 191 == n[2]) return Ye(n);
                if (254 == n[0] && 255 == n[1]) return $e(n.subarray(2), !1);
                if (255 == n[0] && 254 == n[1]) return $e(n.subarray(2), !0);
                if (0 == n[0] && 0 == n[2]) return $e(e, !1);
                if (0 == n[1] && 0 == n[3]) return $e(e, !0);
                if (t(0) && t(1) && t(2) && t(3)) return Ye(e);
                throw new Ke(2, 2, 2003);
              }
              function Qe(t) {
                if (e.TextEncoder && !oe().xh()) {
                  var n = new TextEncoder();
                  return Le(n.encode(t));
                }
                ((t = encodeURIComponent(t)), (t = unescape(t)), (n = new Uint8Array(t.length)));
                for (var r = 0; r < t.length; r++) n[r] = t[r].charCodeAt(0);
                return Le(n);
              }
              function Ze(e, t) {
                for (var n = new ArrayBuffer(2 * e.length), r = new DataView(n), i = 0; i < e.length; ++i)
                  r.setUint16(2 * i, e.charCodeAt(i), t);
                return n;
              }
              function et(e) {
                var t = {
                    "&amp;": "&",
                    "&lt;": "<",
                    "&gt;": ">",
                    "&quot;": '"',
                    "&apos;": "'",
                    "&nbsp;": "",
                    "&lrm;": "",
                    "&rlm;": "",
                  },
                  n = /&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,
                  r = RegExp(n.source);
                return e && r.test(e)
                  ? e.replace(n, function (e) {
                      return "#" == e[1]
                        ? (e =
                            "x" == e[2] || "X" == e[2]
                              ? parseInt(e.substring(3), 16)
                              : parseInt(e.substring(2), 10)) >= 0 && e <= 1114111
                          ? String.fromCodePoint(e)
                          : ""
                        : t[e] || "'";
                    })
                  : e || "";
              }
              ((Ke.prototype.toString = function () {
                return "shaka.util.Error " + JSON.stringify(this, null, "  ");
              }),
                V("shaka.util.Error", Ke),
                (Ke.Severity = { RECOVERABLE: 1, CRITICAL: 2 }),
                (Ke.Category = {
                  NETWORK: 1,
                  TEXT: 2,
                  MEDIA: 3,
                  MANIFEST: 4,
                  STREAMING: 5,
                  DRM: 6,
                  PLAYER: 7,
                  CAST: 8,
                  STORAGE: 9,
                  ADS: 10,
                }),
                (Ke.Code = {
                  UNSUPPORTED_SCHEME: 1e3,
                  BAD_HTTP_STATUS: 1001,
                  HTTP_ERROR: 1002,
                  TIMEOUT: 1003,
                  MALFORMED_DATA_URI: 1004,
                  REQUEST_FILTER_ERROR: 1006,
                  RESPONSE_FILTER_ERROR: 1007,
                  MALFORMED_TEST_URI: 1008,
                  UNEXPECTED_TEST_REQUEST: 1009,
                  ATTEMPTS_EXHAUSTED: 1010,
                  SEGMENT_MISSING: 1011,
                  INVALID_TEXT_HEADER: 2e3,
                  INVALID_TEXT_CUE: 2001,
                  UNABLE_TO_DETECT_ENCODING: 2003,
                  BAD_ENCODING: 2004,
                  INVALID_XML: 2005,
                  INVALID_MP4_TTML: 2007,
                  INVALID_MP4_VTT: 2008,
                  UNABLE_TO_EXTRACT_CUE_START_TIME: 2009,
                  INVALID_MP4_CEA: 2010,
                  TEXT_COULD_NOT_GUESS_MIME_TYPE: 2011,
                  CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS: 2012,
                  TEXT_ONLY_WEBVTT_SRC_EQUALS: 2013,
                  MISSING_TEXT_PLUGIN: 2014,
                  UNSUPPORTED_EXTERNAL_THUMBNAILS_URI: 2017,
                  BUFFER_READ_OUT_OF_BOUNDS: 3e3,
                  JS_INTEGER_OVERFLOW: 3001,
                  EBML_OVERFLOW: 3002,
                  EBML_BAD_FLOATING_POINT_SIZE: 3003,
                  MP4_SIDX_WRONG_BOX_TYPE: 3004,
                  MP4_SIDX_INVALID_TIMESCALE: 3005,
                  MP4_SIDX_TYPE_NOT_SUPPORTED: 3006,
                  WEBM_CUES_ELEMENT_MISSING: 3007,
                  WEBM_EBML_HEADER_ELEMENT_MISSING: 3008,
                  WEBM_SEGMENT_ELEMENT_MISSING: 3009,
                  WEBM_INFO_ELEMENT_MISSING: 3010,
                  WEBM_DURATION_ELEMENT_MISSING: 3011,
                  WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING: 3012,
                  WEBM_CUE_TIME_ELEMENT_MISSING: 3013,
                  MEDIA_SOURCE_OPERATION_FAILED: 3014,
                  MEDIA_SOURCE_OPERATION_THREW: 3015,
                  VIDEO_ERROR: 3016,
                  QUOTA_EXCEEDED_ERROR: 3017,
                  TRANSMUXING_FAILED: 3018,
                  CONTENT_TRANSFORMATION_FAILED: 3019,
                  MSS_MISSING_DATA_FOR_TRANSMUXING: 3020,
                  MSS_TRANSMUXING_FAILED: 3022,
                  TRANSMUXING_NO_VIDEO_DATA: 3023,
                  STREAMING_NOT_ALLOWED: 3024,
                  UNABLE_TO_GUESS_MANIFEST_TYPE: 4e3,
                  DASH_INVALID_XML: 4001,
                  DASH_NO_SEGMENT_INFO: 4002,
                  DASH_EMPTY_ADAPTATION_SET: 4003,
                  DASH_EMPTY_PERIOD: 4004,
                  DASH_WEBM_MISSING_INIT: 4005,
                  DASH_UNSUPPORTED_CONTAINER: 4006,
                  DASH_PSSH_BAD_ENCODING: 4007,
                  DASH_NO_COMMON_KEY_SYSTEM: 4008,
                  DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED: 4009,
                  DASH_CONFLICTING_KEY_IDS: 4010,
                  RESTRICTIONS_CANNOT_BE_MET: 4012,
                  HLS_PLAYLIST_HEADER_MISSING: 4015,
                  INVALID_HLS_TAG: 4016,
                  HLS_INVALID_PLAYLIST_HIERARCHY: 4017,
                  DASH_DUPLICATE_REPRESENTATION_ID: 4018,
                  HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND: 4020,
                  HLS_REQUIRED_ATTRIBUTE_MISSING: 4023,
                  HLS_REQUIRED_TAG_MISSING: 4024,
                  HLS_COULD_NOT_GUESS_CODECS: 4025,
                  HLS_KEYFORMATS_NOT_SUPPORTED: 4026,
                  DASH_UNSUPPORTED_XLINK_ACTUATE: 4027,
                  DASH_XLINK_DEPTH_LIMIT: 4028,
                  CONTENT_UNSUPPORTED_BY_BROWSER: 4032,
                  CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM: 4033,
                  NO_VARIANTS: 4036,
                  PERIOD_FLATTENING_FAILED: 4037,
                  INCONSISTENT_DRM_ACROSS_PERIODS: 4038,
                  HLS_VARIABLE_NOT_FOUND: 4039,
                  HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED: 4040,
                  HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED: 4041,
                  NO_WEB_CRYPTO_API: 4042,
                  CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM: 4045,
                  MSS_INVALID_XML: 4046,
                  MSS_LIVE_CONTENT_NOT_SUPPORTED: 4047,
                  AES_128_INVALID_IV_LENGTH: 4048,
                  AES_128_INVALID_KEY_LENGTH: 4049,
                  DASH_CONFLICTING_AES_128: 4050,
                  DASH_UNSUPPORTED_AES_128: 4051,
                  DASH_INVALID_PATCH: 4052,
                  HLS_EMPTY_MEDIA_PLAYLIST: 4053,
                  DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED: 4054,
                  CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM: 4055,
                  STREAMING_ENGINE_STARTUP_INVALID_STATE: 5006,
                  NO_RECOGNIZED_KEY_SYSTEMS: 6e3,
                  REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE: 6001,
                  FAILED_TO_CREATE_CDM: 6002,
                  FAILED_TO_ATTACH_TO_VIDEO: 6003,
                  INVALID_SERVER_CERTIFICATE: 6004,
                  FAILED_TO_CREATE_SESSION: 6005,
                  FAILED_TO_GENERATE_LICENSE_REQUEST: 6006,
                  LICENSE_REQUEST_FAILED: 6007,
                  LICENSE_RESPONSE_REJECTED: 6008,
                  ENCRYPTED_CONTENT_WITHOUT_DRM_INFO: 6010,
                  NO_LICENSE_SERVER_GIVEN: 6012,
                  OFFLINE_SESSION_REMOVED: 6013,
                  EXPIRED: 6014,
                  SERVER_CERTIFICATE_REQUIRED: 6015,
                  INIT_DATA_TRANSFORM_ERROR: 6016,
                  SERVER_CERTIFICATE_REQUEST_FAILED: 6017,
                  MIN_HDCP_VERSION_NOT_MATCH: 6018,
                  ERROR_CHECKING_HDCP_VERSION: 6019,
                  MISSING_EME_SUPPORT: 6020,
                  LOAD_INTERRUPTED: 7e3,
                  OPERATION_ABORTED: 7001,
                  NO_VIDEO_ELEMENT: 7002,
                  OBJECT_DESTROYED: 7003,
                  CONTENT_NOT_LOADED: 7004,
                  SRC_EQUALS_PRELOAD_NOT_SUPPORTED: 7005,
                  PRELOAD_DESTROYED: 7006,
                  QUEUE_INDEX_OUT_OF_BOUNDS: 7007,
                  CAST_API_UNAVAILABLE: 8e3,
                  NO_CAST_RECEIVERS: 8001,
                  ALREADY_CASTING: 8002,
                  UNEXPECTED_CAST_ERROR: 8003,
                  CAST_CANCELED_BY_USER: 8004,
                  CAST_CONNECTION_TIMED_OUT: 8005,
                  CAST_RECEIVER_APP_UNAVAILABLE: 8006,
                  STORAGE_NOT_SUPPORTED: 9e3,
                  INDEXED_DB_ERROR: 9001,
                  DEPRECATED_OPERATION_ABORTED: 9002,
                  REQUESTED_ITEM_NOT_FOUND: 9003,
                  MALFORMED_OFFLINE_URI: 9004,
                  CANNOT_STORE_LIVE_OFFLINE: 9005,
                  NO_INIT_DATA_FOR_OFFLINE: 9007,
                  LOCAL_PLAYER_INSTANCE_REQUIRED: 9008,
                  NEW_KEY_OPERATION_NOT_SUPPORTED: 9011,
                  KEY_NOT_FOUND: 9012,
                  MISSING_STORAGE_CELL: 9013,
                  STORAGE_LIMIT_REACHED: 9014,
                  DOWNLOAD_SIZE_CALLBACK_ERROR: 9015,
                  MODIFY_OPERATION_NOT_SUPPORTED: 9016,
                  INDEXED_DB_INIT_TIMED_OUT: 9017,
                  CS_IMA_SDK_MISSING: 1e4,
                  CS_AD_MANAGER_NOT_INITIALIZED: 10001,
                  SS_IMA_SDK_MISSING: 10002,
                  SS_AD_MANAGER_NOT_INITIALIZED: 10003,
                  CURRENT_DAI_REQUEST_NOT_FINISHED: 10004,
                  MT_AD_MANAGER_NOT_INITIALIZED: 10005,
                  INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED: 10006,
                  VAST_INVALID_XML: 10007,
                }),
                V("shaka.util.StringUtils", qe),
                (qe.resetFromCharCode = function () {
                  tt.g = void 0;
                }),
                (qe.toUTF16 = Ze),
                (qe.toUTF8 = Qe),
                (qe.fromBytesAutoDetect = Je),
                (qe.fromUTF16 = $e),
                (qe.fromUTF8 = Ye));
              var tt = new ae(function () {
                function e(e) {
                  try {
                    var t = new Uint8Array(e);
                    return String.fromCharCode.apply(null, t).length > 0;
                  } catch (n) {
                    return !1;
                  }
                }
                for (var t = { Pc: 65536 }; t.Pc > 0; (t = { Pc: t.Pc }).Pc /= 2)
                  if (e(t.Pc))
                    return (function (e) {
                      return function (t) {
                        for (var n = "", r = 0; r < t.length; r += e.Pc)
                          n += String.fromCharCode.apply(null, t.subarray(r, r + e.Pc));
                        return n;
                      };
                    })(t);
                return null;
              });
              function nt() {}
              function rt(e) {
                return (
                  (e = Ne(e)),
                  Uint8Array.prototype.toBase64
                    ? e.toBase64({ alphabet: "base64", omitPadding: !1 })
                    : ((e = tt.value()(e)), btoa(e))
                );
              }
              function it(e, t) {
                return (
                  (t = null == t || t),
                  Uint8Array.prototype.toBase64
                    ? Ne(e).toBase64({ alphabet: "base64url", omitPadding: !t })
                    : ((e = rt(e).replace(/\+/g, "-").replace(/\//g, "_")), t ? e : e.replace(/[=]*$/, ""))
                );
              }
              function at(t) {
                if (!("fromBase64" in Uint8Array)) {
                  t = e.atob(t.replace(/-/g, "+").replace(/_/g, "/"));
                  for (var n = new Uint8Array(t.length), r = 0; r < t.length; ++r) n[r] = t.charCodeAt(r);
                  return n;
                }
                return (
                  (t = t.replace(/\s+/g, "")),
                  Uint8Array.fromBase64(t, { alphabet: /[-_]/.test(t) ? "base64url" : "base64" })
                );
              }
              function ot(t) {
                if (!("fromHex" in Uint8Array)) {
                  for (var n = t.length / 2, r = new Uint8Array(n), i = 0; i < n; i++)
                    r[i] = e.parseInt(t.substr(2 * i, 2), 16);
                  return r;
                }
                return Uint8Array.fromHex(t);
              }
              function st(e) {
                var t = Ne(e);
                if (!Uint8Array.prototype.toHex) {
                  e = "";
                  for (var n = (t = g(t)).next(); !n.done; n = t.next())
                    (1 == (n = (n = n.value).toString(16)).length && (n = "0" + n), (e += n));
                  return e;
                }
                return t.toHex();
              }
              function ut() {
                for (var e = P.apply(0, arguments), t = 0, n = 0; n < e.length; ++n) t += e[n].byteLength;
                t = new Uint8Array(t);
                for (var r = (n = 0); r < e.length; ++r) {
                  var i = e[r];
                  (ArrayBuffer.isView(i) && 1 === i.BYTES_PER_ELEMENT ? t.set(i, n) : t.set(Ne(i), n),
                    (n += i.byteLength));
                }
                return t;
              }
              function lt(e, t, n) {
                if (((n = void 0 === n ? "" : n), 0 == t.length)) return e;
                if (1 == e.length && 1 == t.length) {
                  var r = new me(e[0]);
                  return ((t = new me(t[0])), (t = r.resolve(t)), n && xe(t, n), [t.toString()]);
                }
                ((t = t.map(function (e) {
                  return new me(e);
                })),
                  (r = []));
                for (var i = (e = g(e)).next(); !i.done; i = e.next()) {
                  i = new me(i.value);
                  for (var a = g(t), o = a.next(); !o.done; o = a.next())
                    ((o = i.resolve(o.value)), n && xe(o, n), r.push(o.toString()));
                }
                return r;
              }
              function dt(e, t, n, r, i) {
                return (
                  (t = {
                    keySystem: e,
                    encryptionScheme: t,
                    licenseServerUri: "",
                    distinctiveIdentifierRequired: !1,
                    persistentStateRequired: !1,
                    audioRobustness: "",
                    videoRobustness: "",
                    serverCertificate: null,
                    serverCertificateUri: "",
                    sessionType: "",
                    initData: n || [],
                    keyIds: new Set(),
                    mediaTypes: i,
                  }),
                  r && (t.keySystemUris = new Set([r])),
                  !n &&
                    He(e) &&
                    t.initData.push({ initDataType: "sinf", initData: new Uint8Array(0), keyId: null }),
                  t
                );
              }
              function ct(t, n) {
                n = void 0 === n ? "cenc" : n;
                var r = [],
                  i = [],
                  a = [];
                (t.forEach(function (e, t) {
                  var n = t;
                  22 != n.length && (n = it(ot(t), !1));
                  var o = e;
                  (22 != o.length && (o = it(ot(e), !1)),
                    (e = { kty: "oct", kid: n, k: o }),
                    r.push(e),
                    i.push(e.kid),
                    a.push(t));
                }),
                  (t = JSON.stringify({ keys: r })));
                var o = JSON.stringify({ kids: i });
                return (
                  (o = [{ initData: Ne(Qe(o)), initDataType: "keyids" }]),
                  {
                    keySystem: "org.w3.clearkey",
                    encryptionScheme: n,
                    licenseServerUri: "data:application/json;base64," + e.btoa(t),
                    distinctiveIdentifierRequired: !1,
                    persistentStateRequired: !1,
                    audioRobustness: "",
                    videoRobustness: "",
                    serverCertificate: null,
                    serverCertificateUri: "",
                    sessionType: "",
                    initData: o,
                    keyIds: new Set(a),
                  }
                );
              }
              function ht(e, t) {
                if (1 == t.length) return t[0];
                if (null != (e = pt(e, t))) return e;
                throw new Ke(2, 4, 4025, t);
              }
              function pt(e, t) {
                for (var n = yt.get(e), r = (n = g(n)).next(); !r.done; r = n.next()) {
                  r = r.value;
                  for (var i = g(t), a = i.next(); !a.done; a = i.next())
                    if (((a = a.value), r.test(a.trim()))) return a.trim();
                }
                return e == gt ? "" : null;
              }
              function ft(e, t) {
                for (var n = [], r = (e = g((e = yt.get(e)))).next(); !r.done; r = e.next()) {
                  r = r.value;
                  for (var i = g(t), a = i.next(); !a.done; a = i.next())
                    ((a = a.value), r.test(a.trim()) && n.push(a.trim()));
                }
                return n;
              }
              (V("shaka.util.Uint8ArrayUtils", nt),
                (nt.concat = ut),
                (nt.toHex = st),
                (nt.fromHex = ot),
                (nt.fromBase64 = at),
                (nt.toBase64 = it),
                (nt.toStandardBase64 = rt));
              var gt = "text",
                mt = { wa: "video", aa: "audio", Na: gt, Yf: "image", ul: "application" },
                vt = 1 / 15,
                yt = new Map()
                  .set("audio", [
                    /^vorbis$/,
                    /^Opus$/,
                    /^opus$/,
                    /^fLaC$/,
                    /^flac$/,
                    /^mp4a/,
                    /^[ae]c-3$/,
                    /^ac-4/,
                    /^dts[cex]$/,
                    /^iamf/,
                    /^mhm[12]/,
                    /^ac3$/,
                    /^eac3$/,
                    /^apac$/,
                  ])
                  .set("video", [
                    /^avc/,
                    /^hev/,
                    /^hvc/,
                    /^vvc/,
                    /^vvi/,
                    /^vp0?[89]/,
                    /^av01/,
                    /^dvh/,
                    /^dva/,
                    /^dav/,
                  ])
                  .set("text", [/^vtt$/, /^wvtt/, /^stpp/]);
              function bt(e, t, n, r) {
                ((this.g = null), (this.l = e), (this.i = t), (this.m = n), (this.o = r), (this.j = !1));
                e: {
                  if (
                    ("undefined" == typeof libDPIModule &&
                      K("Could not find LCEVC Library dependencies on this page"),
                    "undefined" != typeof LCEVCdec)
                  )
                    this.h = LCEVCdec;
                  else {
                    if ("undefined" == typeof LcevcDil) {
                      (K("Could not find LCEVC Library on this page"), (e = !1));
                      break e;
                    }
                    ((this.h = LcevcDil),
                      (this.j = !0),
                      ce("LcevcDil", "lcevc_dil.js is deprecated, please use lcevc_dec.js instead"));
                  }
                  void 0 === this.h.SupportObject
                    ? (K("Could not find LCEVC Library on this page"), (e = !1))
                    : (this.h.SupportObject.SupportStatus || K(this.h.SupportObject.SupportError),
                      (e =
                        void 0 !== this.h &&
                        "undefined" != typeof libDPIModule &&
                        this.i instanceof HTMLCanvasElement &&
                        this.h.SupportObject.SupportStatus));
                }
                e &&
                  !this.g &&
                  this.h.SupportObject.webGLSupport(this.i) &&
                  (this.i.classList.remove("shaka-hidden"),
                  (this.g = this.j
                    ? new this.h.LcevcDil(this.l, this.i, this.m)
                    : new this.h.LCEVCdec(this.l, this.i, this.m)));
              }
              function xt(e, t, n, r) {
                "video" !== r.type ||
                  (e.o && !r.baseOriginalId) ||
                  (e.g && e.g.appendBuffer(t, "video", r.id, -n, !e.o));
              }
              function Tt(e) {
                e.g && e.i.classList.add("shaka-hidden");
              }
              function wt(e) {
                return !(!e || "undefined" == typeof LCEVCdec) && "lvc1" == e.codecs;
              }
              function St() {}
              function At(e, t) {
                kt.set(e, t);
              }
              function Et(e, t) {
                if (t) {
                  var n = kt.get(t.toLowerCase());
                  if (n) return n;
                }
                throw new Ke(2, 4, 4e3, e, t);
              }
              ((bt.prototype.release = function () {
                this.g && (this.g.close(), (this.g = null));
              }),
                V("shaka.lcevc.Dec", bt),
                (bt.prototype.release = bt.prototype.release),
                V("shaka.media.ManifestParser", St),
                (St.unregisterParserByMime = function (e) {
                  kt.delete(e);
                }),
                (St.registerParserByMime = At),
                (St.registerParserByExtension = function () {
                  ce(
                    "ManifestParser.registerParserByExtension",
                    "Please use an ManifestParser with registerParserByMime function.",
                  );
                }),
                (St.AccessibilityPurpose = {
                  Cm: "visually impaired",
                  Nl: "hard of hearing",
                  jm: "spoken subtitles",
                }));
              var kt = new Map();
              function It() {}
              function Ct() {}
              function Mt() {}
              function Rt(e) {
                ((this.h = new Map()),
                  (this.i = 0),
                  (this.j = new Ct()),
                  (e = Dt(e.toLowerCase())) && (this.j = e()),
                  (this.g = new It()),
                  (e = Lt) && ((this.g = e()), this.h.set(this.i, this.g)));
              }
              function _t(e, t) {
                Pt.set(e, t);
              }
              function Dt(e) {
                return Pt.get(e);
              }
              ((It.prototype.extract = function () {}),
                (It.prototype.decode = function () {
                  return [];
                }),
                (It.prototype.clear = function () {}),
                (It.prototype.getStreams = function () {
                  return [];
                }),
                (Ct.prototype.init = function () {}),
                (Ct.prototype.parse = function () {
                  return [];
                }),
                ((i = Mt.prototype).init = function () {}),
                (i.Af = function () {}),
                (i.Pd = function () {}),
                (i.remove = function () {}),
                (i.Zf = function () {}),
                V("shaka.media.IClosedCaptionParser", Mt),
                ((i = Rt.prototype).init = function (e, t, n) {
                  if (((t = void 0 !== t && t), -1 != (n = void 0 === n ? -1 : n) && this.i != n)) {
                    t = n;
                    var r = this.h.get(t);
                    (this.h.set(this.i, this.g),
                      r ? (this.g = r) : ((r = Lt) && (this.g = r()), this.h.set(t, this.g)));
                  } else t || this.Pd();
                  (this.j.init(e), -1 != n && (this.i = n));
                }),
                (i.Af = function (e) {
                  for (var t = (e = g((e = this.j.parse(e)))).next(); !t.done; t = e.next()) {
                    var n = Ne((t = t.value).packet);
                    n.length > 0 && this.g.extract(n, t.pts);
                  }
                  return this.g.decode();
                }),
                (i.Pd = function () {
                  this.g.clear();
                }),
                (i.remove = function (e) {
                  ((e = void 0 === e ? [] : e), (e = new Set(e)));
                  for (var t = g(this.h.keys()), n = t.next(); !n.done; n = t.next())
                    if (((n = n.value), !e.has(n))) {
                      var r = this.h.get(n);
                      (r && r.clear(), this.h.delete(n));
                    }
                }),
                (i.Zf = function () {
                  return this.g.getStreams();
                }),
                V("shaka.media.ClosedCaptionParser", Rt),
                (Rt.findDecoder = function () {
                  return Lt;
                }),
                (Rt.unregisterDecoder = function () {
                  Lt = null;
                }),
                (Rt.registerDecoder = function (e) {
                  Lt = e;
                }),
                (Rt.findParser = Dt),
                (Rt.unregisterParser = function (e) {
                  Pt.delete(e);
                }),
                (Rt.registerParser = _t));
              var Pt = new Map(),
                Lt = null;
              function Nt() {
                ((this.id = ""),
                  (this.regionAnchorY = this.regionAnchorX = this.viewportAnchorY = this.viewportAnchorX = 0),
                  (this.height = this.width = 100),
                  (this.viewportAnchorUnits = this.widthUnits = this.heightUnits = Ot),
                  (this.scroll = Ut));
              }
              V("shaka.text.CueRegion", Nt);
              var Ot = 1;
              Nt.units = { PX: 0, PERCENTAGE: Ot, LINES: 2 };
              var Ut = "";
              function Bt(e) {
                ((this.h = e || ""), (this.g = 0));
              }
              function jt(e) {
                Ft(e, /[ \t]+/gm);
              }
              function Ft(e, t) {
                return (
                  (t.lastIndex = e.g),
                  (t =
                    null == (t = t.exec(e.h))
                      ? null
                      : { position: t.index, length: t[0].length, results: t }),
                  e.g == e.h.length || null == t || t.position != e.g ? null : ((e.g += t.length), t.results)
                );
              }
              function Vt(e) {
                return e.g == e.h.length ? null : (e = Ft(e, /[^ \t\n]*/gm)) ? e[0] : null;
              }
              function Ht(e) {
                if (null == (e = Ft(e, zt))) return null;
                var t = Number(e[2]),
                  n = Number(e[3]);
                return t > 59 || n > 59
                  ? null
                  : (Number(e[6]) || 0) / 1e3 + n + 60 * t + 3600 * (Number(e[1]) || 0);
              }
              function Gt(e) {
                return e ? Ht(new Bt(e)) : null;
              }
              Nt.scrollMode = { NONE: Ut, UP: "up" };
              var zt = /(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;
              function Xt() {}
              function Wt(e) {
                var t = new WeakSet();
                return (function e(n) {
                  switch (typeof n) {
                    case "undefined":
                    case "boolean":
                    case "number":
                    case "string":
                    case "symbol":
                    case "function":
                      return n;
                    default:
                      if (!n || ArrayBuffer.isView(n)) return n;
                      if (t.has(n)) return null;
                      var r = Array.isArray(n);
                      if (n.constructor != Object && !r) return null;
                      t.add(n);
                      var i,
                        a = r ? [] : {};
                      for (i in n) a[i] = e(n[i]);
                      return (r && (a.length = n.length), a);
                  }
                })(e);
              }
              function Kt(e) {
                var t,
                  n = {};
                for (t in e) n[t] = e[t];
                return n;
              }
              function qt(e) {
                if (Array.isArray(e)) {
                  for (var t = [], n = 0; n < e.length; n++) {
                    var r = n.toString(),
                      i = e[n];
                    void 0 !== i && (i = qt(i)) && t.push(r + ":" + i);
                  }
                  e = "[" + t.join(",") + "]";
                } else if ("function" == typeof e) e = "";
                else if (e instanceof Object) {
                  for ((n = Object.keys(e)).sort(), t = [], r = (n = g(n)).next(); !r.done; r = n.next())
                    ((i = r.value),
                      (r = JSON.stringify(i)),
                      void 0 !== (i = e[i]) && (i = qt(i)) && t.push(r + ":" + i));
                  e = "{" + t.join(",") + "}";
                } else e = JSON.stringify(e);
                return e;
              }
              /*
      		 @license
      		 tXml
      		 Copyright 2015 Tobias Nickel
      		 SPDX-License-Identifier: MIT
      		*/
              function Yt(e, t) {
                var n = void 0 !== n && n;
                return $t((e = Je(e)), t, n);
              }
              function $t(e, t, n) {
                return (
                  (e = (function (e, t) {
                    function n(a, o) {
                      o = void 0 !== o && o;
                      for (var s = []; e[i]; )
                        if (60 == e.charCodeAt(i)) {
                          if (47 === e.charCodeAt(i + 1)) {
                            ((o = i + 2), (i = e.indexOf(">", i)));
                            var u = (o = e.substring(o, i)).indexOf(a);
                            if (-1 == u) {
                              var l = a.indexOf(".");
                              l > 0 && (u = o.indexOf(a.substring(0, l)));
                            }
                            if (-1 == u)
                              throw (
                                (a = e.substring(0, i).split("\n")),
                                Error(
                                  "Unexpected close tag\nLine: " +
                                    (a.length - 1) +
                                    "\nColumn: " +
                                    (a[a.length - 1].length + 1) +
                                    "\nChar: " +
                                    e[i],
                                )
                              );
                            i + 1 && (i += 1);
                            break;
                          }
                          if (33 === e.charCodeAt(i + 1)) {
                            if (45 == e.charCodeAt(i + 2)) {
                              for (
                                ;
                                -1 !== i &&
                                (62 !== e.charCodeAt(i) ||
                                  45 != e.charCodeAt(i - 1) ||
                                  45 != e.charCodeAt(i - 2) ||
                                  -1 == i);
                              )
                                i = e.indexOf(">", i + 1);
                              -1 === i && (i = e.length);
                            } else if (
                              91 === e.charCodeAt(i + 2) &&
                              91 === e.charCodeAt(i + 8) &&
                              "cdata" === e.substr(i + 3, 5).toLowerCase()
                            ) {
                              -1 == (u = e.indexOf("]]>", i))
                                ? (s.push(e.substr(i + 9)), (i = e.length))
                                : (s.push(e.substring(i + 9, u)), (i = u + 3));
                              continue;
                            }
                            i++;
                            continue;
                          }
                          e: {
                            ((l = o), i++);
                            var d = r(),
                              c = {};
                            for (u = []; 62 !== e.charCodeAt(i) && e[i]; ) {
                              var h = e.charCodeAt(i);
                              if ((h > 64 && h < 91) || (h > 96 && h < 123)) {
                                h = r();
                                for (
                                  var p = e.charCodeAt(i);
                                  p &&
                                  39 !== p &&
                                  34 !== p &&
                                  !((p > 64 && p < 91) || (p > 96 && p < 123)) &&
                                  62 !== p;
                                )
                                  (i++, (p = e.charCodeAt(i)));
                                var f = i + 1;
                                if (
                                  ((i = e.indexOf(e[i], f)),
                                  (f = (" " + e.slice(f, i)).slice(1)),
                                  39 === p || 34 === p)
                                ) {
                                  if (-1 === i) {
                                    if (((l = { tagName: d, attributes: c, children: u, parent: null }), t))
                                      for (d = 0; d < u.length; d++)
                                        "string" != typeof u[d] && (u[d].parent = l);
                                    u = l;
                                    break e;
                                  }
                                } else ((f = null), i--);
                                if (h.startsWith("xmlns:")) {
                                  p = f;
                                  var g = h.split(":")[1];
                                  (kn.set(p, g), In.set(g, p));
                                }
                                ("tt" === d && "xml:space" === h && "preserve" === f && (l = !0), (c[h] = f));
                              }
                              i++;
                            }
                            for (
                              47 !== e.charCodeAt(i - 1) ? (i++, (u = n(d, l))) : i++,
                                l = { tagName: d, attributes: c, children: u, parent: null },
                                d = u.length,
                                c = 0;
                              c < d;
                              c++
                            )
                              "string" != typeof (h = u[c])
                                ? t && (h.parent = l)
                                : c == d - 1 && "\n" == h && u.pop();
                            u = l;
                          }
                          if ((s.push(u), "string" == typeof u)) break;
                          "?" === u.tagName[0] &&
                            u.children &&
                            (s.push.apply(s, m(u.children)), (u.children = []));
                        } else
                          ((u = i),
                            -2 == (i = e.indexOf("<", i) - 1) && (i = e.length),
                            (u = (" " + e.slice(u, i + 1)).slice(1)),
                            o
                              ? u.length > 0 && s.push(u)
                              : ((s.length && 1 == u.length && "\n" == u[0]) || u.trim().length > 0) &&
                                s.push(u),
                            i++);
                      return s;
                    }
                    function r() {
                      for (var t = i; -1 === "\r\n\t>/= ".indexOf(e[i]) && e[i]; ) i++;
                      return (" " + e.slice(t, i)).slice(1);
                    }
                    var i = 0;
                    return n("");
                  })(e, void 0 !== n && n)),
                  !t && e.length
                    ? e[0]
                    : (e = e.find(function (e) {
                          return t.split(",").includes(e.tagName);
                        }))
                      ? e
                      : null
                );
              }
              function Jt(e) {
                return kn.has(e) ? kn.get(e) : "";
              }
              function Qt(e) {
                return "string" == typeof e;
              }
              function Zt(e) {
                var t = [];
                if (!e.children) return [];
                for (var n = (e = g(e.children)).next(); !n.done; n = e.next())
                  "string" != typeof (n = n.value) && t.push(n);
                return t;
              }
              function en(e, t) {
                var n = [];
                if (!e.children) return [];
                for (var r = (e = g(e.children)).next(); !r.done; r = e.next())
                  (r = r.value).tagName === t && n.push(r);
                return n;
              }
              function tn(e) {
                return "string" == typeof e
                  ? et(e)
                  : "" ===
                      (e = e.children.reduce(function (e, t) {
                        return "string" == typeof t ? e + t : e;
                      }, ""))
                    ? null
                    : et(e);
              }
              function nn(e) {
                return Array.from(e.children).every(function (e) {
                  return "string" == typeof e;
                })
                  ? ((e = tn(e)) && (e = e.trim()), e)
                  : null;
              }
              function rn(e, t, n) {
                if (((n = void 0 === n ? [] : n), e.tagName === t && n.push(e), e.children))
                  for (var r = (e = g(e.children)).next(); !r.done; r = e.next()) rn(r.value, t, n);
                return n;
              }
              function an(e, t) {
                return 1 != (e = en(e, t)).length ? null : e[0];
              }
              function on(e, t, n) {
                return 1 != (e = ln(e, t, n)).length ? null : e[0];
              }
              function sn(e, t, n, r) {
                r = void 0 === r ? null : r;
                var i = null;
                return (null != (e = e.attributes[t]) && (i = n(e)), null == i ? r : i);
              }
              function un(e, t, n) {
                return ((t = Jt(t)), e.attributes[t + ":" + n] || null);
              }
              function ln(e, t, n) {
                var r = Jt(t);
                if (((t = []), e.children))
                  for (n = r ? r + ":" + n : n, r = (e = g(e.children)).next(); !r.done; r = e.next())
                    (r = r.value) && r.tagName === n && t.push(r);
                return t;
              }
              function dn(e, t, n) {
                for (var r = (t = g(t)).next(); !r.done; r = t.next()) if ((r = un(e, r.value, n))) return r;
                return null;
              }
              function cn(e) {
                return e
                  ? (/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e) && (e += "Z"),
                    (e = Date.parse(e)),
                    isNaN(e) ? null : e / 1e3)
                  : null;
              }
              function hn(e) {
                return e &&
                  (e = RegExp(
                    "^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$",
                    "i",
                  ).exec(e))
                  ? ((e =
                      31536e3 * Number(e[1] || null) +
                      2592e3 * Number(e[2] || null) +
                      86400 * Number(e[3] || null) +
                      3600 * Number(e[4] || null) +
                      60 * Number(e[5] || null) +
                      Number(e[6] || null)),
                    isFinite(e) ? e : null)
                  : null;
              }
              function pn(e) {
                var t = /([0-9]+)-([0-9]+)/.exec(e);
                return t
                  ? ((e = Number(t[1])),
                    isFinite(e) ? ((t = Number(t[2])), isFinite(t) ? { start: e, end: t } : null) : null)
                  : null;
              }
              function fn(e) {
                return (e = Number(e)) % 1 == 0 ? e : null;
              }
              function gn(e) {
                return (e = Number(e)) % 1 == 0 && e > 0 ? e : null;
              }
              function mn(e) {
                return (e = Number(e)) % 1 == 0 && e >= 0 ? e : null;
              }
              function vn(e) {
                return ((e = Number(e)), isNaN(e) ? null : e);
              }
              function yn(e) {
                return !!e && "true" === e.toLowerCase();
              }
              function bn(e) {
                var t,
                  n = (t = e.match(/^(\d+)\/(\d+)$/)) ? Number(t[1]) / Number(t[2]) : Number(e);
                return isNaN(n) ? null : n;
              }
              function xn(e) {
                for (
                  var t = [],
                    n = (e = g((e = et(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/)))).next();
                  !n.done;
                  n = e.next()
                ) {
                  var r = (n = n.value).match(/^([\w]+)/);
                  if (r) {
                    var i = n.match(/(@id='(.*?)')/),
                      a = n.match(/(@t='(\d+)')/),
                      o = n.match(/(@n='(\d+)')/),
                      s = n.match(/\[(\d+)\]/);
                    t.push({
                      name: r[0],
                      id: i ? i[0].match(/'(.*?)'/)[0].replace(/'/gm, "") : null,
                      t: a ? Number(a[0].match(/'(.*?)'/)[0].replace(/'/gm, "")) : null,
                      n: o ? Number(o[0].match(/'(.*?)'/)[0].replace(/'/gm, "")) : null,
                      position: s ? Number(s[1]) - 1 : null,
                      Dc: n.split("/@")[1] || null,
                    });
                  } else n.startsWith("@") && t.length && (t[t.length - 1].Dc = n.slice(1));
                }
                return t;
              }
              function Tn(e, t) {
                var n = xn(t.attributes.sel || "");
                if (n.length) {
                  var r = n[n.length - 1],
                    i = t.attributes.pos || null;
                  (null == (n = r.position) &&
                    (null !== r.t && (n = wn(e, "t", r.t)), null !== r.n && (n = wn(e, "n", r.n))),
                    null === n
                      ? (n = "prepend" === i ? 0 : e.length)
                      : "prepend" === i
                        ? --n
                        : "after" === i && ++n,
                    (i = t.tagName),
                    (r = r.Dc) && e[n]
                      ? Sn(e[n], i, r, nn(t) || "")
                      : (("remove" !== i && "replace" !== i) || e.splice(n, 1),
                        ("add" !== i && "replace" !== i) || e.splice.apply(e, [n, 0].concat(m(t.children)))));
                }
              }
              function wn(e, t, n) {
                for (var r = 0, i = (e = g(e)).next(); !i.done; i = e.next()) {
                  if (Number(i.value.attributes[t]) === n) return r;
                  r++;
                }
                return null;
              }
              function Sn(e, t, n, r) {
                "remove" === t
                  ? delete e.attributes[n]
                  : ("add" !== t && "replace" !== t) || (e.attributes[n] = r);
              }
              function An(e) {
                var t = "",
                  n = e.tagName.split(":");
                for (var r in (n.length > 0 && ((t = n[0]), (t = In.has(t) ? In.get(t) : "")),
                (t = document.createElementNS(t, e.tagName)),
                e.attributes))
                  t.setAttribute(r, e.attributes[r]);
                for (r = (e = g(e.children)).next(); !r.done; r = e.next())
                  ((n = void 0),
                    (n = "string" == typeof (r = r.value) ? new Text(r) : An(r)),
                    t.appendChild(n));
                return t;
              }
              function En(e) {
                if (!e) return null;
                for (
                  var t = { tagName: e.tagName, attributes: Kt(e.attributes), children: [], parent: null },
                    n = (e = g(e.children)).next();
                  !n.done;
                  n = e.next()
                )
                  ("string" == typeof (n = n.value) || ((n = En(n)).parent = t), t.children.push(n));
                return t;
              }
              (V("shaka.util.ObjectUtils", Xt),
                (Xt.alphabeticalKeyOrderStringify = qt),
                (Xt.shallowCloneObject = Kt),
                (Xt.cloneObject = Wt));
              var kn = new Map(),
                In = new Map();
              function Cn(e, t, n) {
                ((this.startTime = e),
                  (this.endTime = t),
                  (this.payload = n),
                  (this.region = new Nt()),
                  (this.position = null),
                  (this.positionAlign = Nn),
                  (this.size = 0),
                  (this.textAlign = On),
                  (this.direction = Fn),
                  (this.writingMode = Vn),
                  (this.lineInterpretation = Hn),
                  (this.line = null),
                  (this.lineHeight = ""),
                  (this.lineAlign = Gn),
                  (this.displayAlign = Bn),
                  (this.fontSize =
                    this.border =
                    this.backgroundImage =
                    this.backgroundColor =
                    this.color =
                      ""),
                  (this.fontWeight = Kn),
                  (this.fontStyle = Yn),
                  (this.linePadding = this.letterSpacing = this.fontFamily = ""),
                  (this.opacity = 1),
                  (this.textCombineUpright = ""),
                  (this.textDecoration = []),
                  (this.textStrokeWidth = this.textStrokeColor = this.textShadow = ""),
                  (this.wrapLine = !0),
                  (this.id = ""),
                  (this.nestedCues = []),
                  (this.lineBreak = this.isContainer = !1),
                  (this.rubyTag = null),
                  (this.cellResolution = { columns: 32, rows: 15 }));
              }
              function Mn(e, t) {
                return (((e = new Cn(e, t, "")).lineBreak = !0), e);
              }
              function Rn(e, t) {
                if (
                  e.payload != t.payload ||
                  !(Math.abs(e.startTime - t.startTime) < 0.001 && Math.abs(e.endTime - t.endTime) < 0.001)
                )
                  return !1;
                for (var n in e)
                  if ("startTime" != n && "endTime" != n && "payload" != n)
                    if ("nestedCues" == n) {
                      if (!ee(e.nestedCues, t.nestedCues, Rn)) return !1;
                    } else if ("region" == n || "cellResolution" == n) {
                      for (var r in e[n]) if (e[n][r] != t[n][r]) return !1;
                    } else if (Array.isArray(e[n])) {
                      if (!ee(e[n], t[n])) return !1;
                    } else if (e[n] != t[n]) return !1;
                return !0;
              }
              function _n(e, t) {
                t = void 0 === t ? new Map() : t;
                var n = e.payload;
                if (n.includes("<")) {
                  0 === t.size && Dn(t);
                  var r = n;
                  n = [];
                  for (var i = -1, a = 0; a < r.length; a++)
                    "<" === r[a]
                      ? (i = a + 1)
                      : ">" === r[a] && i > 0 && ((i = r.substr(i, a - i)).match(Zn) && n.push(i), (i = -1));
                  for (a = (n = g(n)).next(); !a.done; a = n.next())
                    ((a = a.value),
                      (r = r.replace("<" + a + ">", '<div time="' + a + '">')),
                      (r += "</div>"));
                  e: {
                    ((a = r), (i = []));
                    var o = -1;
                    ((n = ""), (r = !1));
                    for (var s = 0; s < a.length; s++)
                      if ("/" === a[s]) {
                        var u = a.indexOf(">", s);
                        if (-1 === u) {
                          n = a;
                          break e;
                        }
                        if ((u = a.substring(s + 1, u)) && "v" == u) {
                          r = !0;
                          var l = null;
                          if ((i.length && (l = i[i.length - 1]), l)) {
                            if (l === u) n += "/" + u + ">";
                            else {
                              if (!l.startsWith("v")) {
                                n += a[s];
                                continue;
                              }
                              n += "/" + l + ">";
                            }
                            s += u.length + 1;
                          } else n += a[s];
                        } else n += a[s];
                      } else
                        ("<" === a[s]
                          ? "v" != a[(o = s + 1)] && (o = -1)
                          : ">" === a[s] && o > 0 && (i.push(a.substr(o, s - o)), (o = -1)),
                          (n += a[s]));
                    for (i = (a = g(i)).next(); !i.done; i = a.next())
                      ((o = (i = i.value).replace(" ", ".voice-")),
                        (n = (n = n.replace("<" + i + ">", "<" + o + ">")).replace(
                          "</" + i + ">",
                          "</" + o + ">",
                        )),
                        r || (n += "</" + o + ">"));
                  }
                  ((n = (function (e) {
                    var t = { "< ": "", " >": " &gt;" },
                      n = /(< +>|<\s|\s>)/g,
                      r = RegExp(n.source);
                    return e && r.test(e)
                      ? e.replace(n, function (e) {
                          return t[e] || "";
                        })
                      : e || "";
                  })(n)),
                    (e.payload = ""),
                    (r = "<span>" + n.replace(/\n/g, "<br />") + "</span>"));
                  try {
                    var d = $t(r, "span");
                  } catch (c) {}
                  if (d)
                    if (1 != (d = d.children).length || d[0].tagName)
                      for (n = (d = g(d)).next(); !n.done; n = d.next()) Pn(n.value, e, t);
                    else e.payload = et(n);
                  else e.payload = et(n);
                } else e.payload = et(n);
              }
              function Dn(e) {
                for (var t = g(Object.entries(Xn)), n = t.next(); !n.done; n = t.next()) {
                  var r = g(n.value);
                  ((n = r.next().value), (r = r.next().value));
                  var i = new Cn(0, 0, "");
                  ((i.color = r), e.set("." + n, i));
                }
                for (n = (t = g(Object.entries(Wn))).next(); !n.done; n = t.next())
                  ((n = (r = g(n.value)).next().value),
                    (r = r.next().value),
                    ((i = new Cn(0, 0, "")).backgroundColor = r),
                    e.set("." + n, i));
              }
              function Pn(e, t, n) {
                var r = t.clone();
                if (
                  ((r.nestedCues = []),
                  (r.payload = ""),
                  (r.rubyTag = ""),
                  (r.line = null),
                  (r.region = new Nt()),
                  (r.position = null),
                  (r.size = 0),
                  (r.textAlign = On),
                  e.tagName)
                )
                  for (var i = g(e.tagName.split(/(?=[ .])+/g)), a = i.next(); !a.done; a = i.next()) {
                    var o = (a = a.value);
                    if (o.startsWith(".voice-")) {
                      var s = o.split("-").pop();
                      ((o = 'v[voice="' + s + '"]'), n.has(o) || (o = "v[voice=" + s + "]"));
                    }
                    switch (
                      (n.has(o) &&
                        ((s = r), (o = n.get(o))) &&
                        ((s.backgroundColor = Ln(o.backgroundColor, s.backgroundColor)),
                        (s.color = Ln(o.color, s.color)),
                        (s.fontFamily = Ln(o.fontFamily, s.fontFamily)),
                        (s.fontSize = Ln(o.fontSize, s.fontSize)),
                        (s.textShadow = Ln(o.textShadow, s.textShadow)),
                        (s.fontWeight = o.fontWeight),
                        (s.fontStyle = o.fontStyle),
                        (s.opacity = o.opacity),
                        (s.rubyTag = o.rubyTag),
                        (s.textCombineUpright = o.textCombineUpright),
                        (s.wrapLine = o.wrapLine)),
                      a)
                    ) {
                      case "br":
                        return ((r = Mn(r.startTime, r.endTime)), void t.nestedCues.push(r));
                      case "b":
                        r.fontWeight = qn;
                        break;
                      case "i":
                        r.fontStyle = $n;
                        break;
                      case "u":
                        r.textDecoration.push(Qn);
                        break;
                      case "font":
                        (a = e.attributes.color) && (r.color = a);
                        break;
                      case "div":
                        if (!(a = e.attributes.time)) break;
                        (a = Gt(a)) && (r.startTime = a);
                        break;
                      case "ruby":
                      case "rp":
                      case "rt":
                        r.rubyTag = a;
                    }
                  }
                if (((i = e.children), Qt(e) || (1 == i.length && Qt(i[0]))))
                  for (n = tn(e).split("\n"), e = !0, i = (n = g(n)).next(); !i.done; i = n.next())
                    ((i = i.value),
                      e || ((e = Mn(r.startTime, r.endTime)), t.nestedCues.push(e)),
                      i.length > 0 && (((e = r.clone()).payload = et(i)), t.nestedCues.push(e)),
                      (e = !1));
                else
                  for (t.nestedCues.push(r), e = (t = g(i)).next(); !e.done; e = t.next()) Pn(e.value, r, n);
              }
              function Ln(e, t) {
                return e && e.length > 0 ? e : t;
              }
              ((Cn.prototype.clone = function () {
                var e,
                  t = new Cn(0, 0, "");
                for (e in this) ((t[e] = this[e]), Array.isArray(t[e]) && (t[e] = t[e].slice()));
                return t;
              }),
                V("shaka.text.Cue", Cn),
                (Cn.parseCuePayload = _n),
                (Cn.equal = Rn),
                (Cn.prototype.clone = Cn.prototype.clone));
              var Nn = "auto";
              Cn.positionAlign = { LEFT: "line-left", RIGHT: "line-right", CENTER: "center", AUTO: Nn };
              var On = "center",
                Un = { LEFT: "left", RIGHT: "right", CENTER: On, START: "start", END: "end" };
              Cn.textAlign = Un;
              var Bn = "after",
                jn = { BEFORE: "before", CENTER: "center", AFTER: Bn };
              Cn.displayAlign = jn;
              var Fn = "ltr";
              Cn.direction = { HORIZONTAL_LEFT_TO_RIGHT: Fn, HORIZONTAL_RIGHT_TO_LEFT: "rtl" };
              var Vn = "horizontal-tb";
              Cn.writingMode = {
                HORIZONTAL_TOP_TO_BOTTOM: Vn,
                VERTICAL_LEFT_TO_RIGHT: "vertical-lr",
                VERTICAL_RIGHT_TO_LEFT: "vertical-rl",
              };
              var Hn = 0;
              Cn.lineInterpretation = { LINE_NUMBER: Hn, PERCENTAGE: 1 };
              var Gn = "start",
                zn = { CENTER: "center", START: Gn, END: "end" };
              Cn.lineAlign = zn;
              var Xn = {
                white: "white",
                lime: "lime",
                cyan: "cyan",
                red: "red",
                yellow: "yellow",
                magenta: "magenta",
                blue: "blue",
                black: "black",
              };
              Cn.defaultTextColor = Xn;
              var Wn = {
                bg_white: "white",
                bg_lime: "lime",
                bg_cyan: "cyan",
                bg_red: "red",
                bg_yellow: "yellow",
                bg_magenta: "magenta",
                bg_blue: "blue",
                bg_black: "black",
              };
              Cn.defaultTextBackgroundColor = Wn;
              var Kn = 400,
                qn = 700;
              Cn.fontWeight = { NORMAL: Kn, BOLD: qn };
              var Yn = "normal",
                $n = "italic",
                Jn = { NORMAL: Yn, ITALIC: $n, OBLIQUE: "oblique" };
              Cn.fontStyle = Jn;
              var Qn = "underline";
              Cn.textDecoration = { UNDERLINE: Qn, LINE_THROUGH: "lineThrough", OVERLINE: "overline" };
              var Zn = /(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;
              function er() {}
              function tr(e, t, n) {
                rr.set(e.toLowerCase().split(";")[0] + "-" + n, { priority: n, Bf: t });
              }
              function nr(e, t) {
                for (
                  var n = e.toLowerCase().split(";")[0], r = g([sr, or, ar, ir]), i = r.next();
                  !i.done;
                  i = r.next()
                )
                  if ((i = rr.get(n + "-" + i.value))) {
                    var a = i.Bf(),
                      o = a.isSupported(e, t);
                    if ((a.destroy(), o)) return i.Bf;
                  }
                return null;
              }
              ((er.prototype.destroy = function () {}),
                V("shaka.transmuxer.TransmuxerEngine", er),
                (er.findTransmuxer = nr),
                (er.unregisterTransmuxer = function (e, t) {
                  rr.delete(e.toLowerCase().split(";")[0] + "-" + t);
                }),
                (er.registerTransmuxer = tr),
                (er.prototype.destroy = er.prototype.destroy));
              var rr = new Map(),
                ir = 1,
                ar = 2,
                or = 3,
                sr = 4;
              function ur() {}
              function lr(e, t) {
                var n = e;
                return (t && !br.includes(e) && (n += '; codecs="' + t + '"'), n);
              }
              function dr(e, t) {
                return (t && (e += '; codecs="' + t + '"'), e);
              }
              function cr(e, t, n) {
                var r = lr(e, t);
                return (
                  nr((t = dr(e, t)))
                    ? (e = nr(t))
                      ? ((n = (e = e()).convertCodecs(n, t)), e.destroy())
                      : (n = t)
                    : (n = "video/mp2t" != e && "audio" == n ? r.replace("video", "audio") : r),
                  n
                );
              }
              function hr(e) {
                return e.split(";")[0].split("/")[1];
              }
              function pr(e) {
                var t = yr(e);
                switch (((e = t[0].toLowerCase()), (t = t[1].toLowerCase()), !0)) {
                  case "mp4a" === e && "69" === t:
                  case "mp4a" === e && "6b" === t:
                  case "mp4a" === e && "40.34" === t:
                    return "mp3";
                  case "mp4a" === e && "66" === t:
                  case "mp4a" === e && "67" === t:
                  case "mp4a" === e && "68" === t:
                  case "mp4a" === e && "40.2" === t:
                  case "mp4a" === e && "40.02" === t:
                  case "mp4a" === e && "40.5" === t:
                  case "mp4a" === e && "40.05" === t:
                  case "mp4a" === e && "40.29" === t:
                  case "mp4a" === e && "40.42" === t:
                    return "aac";
                  case "mp4a" === e && "a5" === t:
                  case "ac3" === e:
                  case "ac-3" === e:
                    return "ac-3";
                  case "mp4a" === e && "a6" === t:
                  case "eac3" === e:
                  case "ec-3" === e:
                    return "ec-3";
                  case "ac-4" === e:
                    return "ac-4";
                  case "mp4a" === e && "b2" === t:
                    return "dtsx";
                  case "mp4a" === e && "a9" === t:
                    return "dtsc";
                  case "vp09" === e:
                  case "vp9" === e:
                    return "vp9";
                  case "avc1" === e:
                  case "avc3" === e:
                    return "avc";
                  case "hvc1" === e:
                  case "hev1" === e:
                    return "hevc";
                  case "vvc1" === e:
                  case "vvi1" === e:
                    return "vvc";
                  case "dvh1" === e:
                  case "dvhe" === e:
                    return t && t.startsWith("05") ? "dovi-p5" : "dovi-hevc";
                  case "dvav" === e:
                  case "dva1" === e:
                    return "dovi-avc";
                  case "dav1" === e:
                    return "dovi-av1";
                  case "dvc1" === e:
                  case "dvi1" === e:
                    return "dovi-vvc";
                  case "lvc1" === e:
                    return "lcevc";
                }
                return e;
              }
              function fr(e) {
                for (var t = [], n = (e = g(e.split(","))).next(); !n.done; n = e.next())
                  ((n = yr(n.value)), t.push(n[0]));
                return t.sort().join(",");
              }
              function gr(e) {
                return e.split(";")[0];
              }
              function mr(e) {
                return (
                  (e = e.split(/ *; */)).shift(),
                  (e = e.find(function (e) {
                    return e.startsWith("codecs=");
                  }))
                    ? e.split("=")[1].replace(/^"|"$/g, "")
                    : ""
                );
              }
              function vr(e) {
                return "application/x-mpegurl" === e || "application/vnd.apple.mpegurl" === e;
              }
              function yr(e) {
                var t = (e = e.split("."))[0];
                return (e.shift(), [t, e.join(".")]);
              }
              ((er.PluginPriority = {
                FALLBACK: ir,
                PREFERRED_SECONDARY: ar,
                PREFERRED: or,
                APPLICATION: sr,
              }),
                V("shaka.util.MimeUtils", ur),
                (ur.getFullTypeWithAllCodecs = dr),
                (ur.getFullType = lr),
                new Map()
                  .set("codecs", "codecs")
                  .set("frameRate", "framerate")
                  .set("bandwidth", "bitrate")
                  .set("width", "width")
                  .set("height", "height")
                  .set("channelsCount", "channels"));
              var br = ["audio/aac", "audio/ac3", "audio/ec3", "audio/mpeg"];
              function xr(e) {
                ((this.i = null),
                  (this.l = e),
                  (this.C = !1),
                  (this.m = this.u = 0),
                  (this.o = 1 / 0),
                  (this.h = this.g = null),
                  (this.F = ""),
                  (this.B = function () {}),
                  (this.j = new Map()));
              }
              function Tr(e, t) {
                Ir.set(e, t);
              }
              function wr(e) {
                return Ir.get(e);
              }
              function Sr(e) {
                return !!Ir.has(e) || (("application/cea-608" == e || "application/cea-708" == e) && !!Lt);
              }
              function Ar(e, t, n) {
                ((e.F = t),
                  (t = e.j.get(t)) &&
                    (t = t.filter(function (e) {
                      return e.endTime <= n;
                    })).length &&
                    e.l.append(t));
              }
              function Er(e, t, n) {
                ((t.startTime += n), (t.endTime += n));
                for (var r = (t = g(t.nestedCues)).next(); !r.done; r = t.next()) Er(e, r.value, n);
              }
              function kr(e) {
                for (var t = 1 / 0, n = -1 / 0, r = g(e.j.values()), i = r.next(); !i.done; i = r.next())
                  for (var a = (i = g(i.value)).next(); !a.done; a = i.next())
                    ((a = a.value), (t = Math.min(t, a.startTime)), (n = Math.max(n, a.endTime)));
                t !== 1 / 0 &&
                  n !== -1 / 0 &&
                  ((e.g = null == e.g ? Math.max(t, e.m) : Math.min(e.g, Math.max(t, e.m))),
                  (e.h = Math.max(e.h, Math.min(n, e.o))));
              }
              ((xr.prototype.destroy = function () {
                return ((this.l = this.i = null), this.j.clear(), Promise.resolve());
              }),
                (xr.prototype.remove = function (e, t, n) {
                  n = void 0 !== n && n;
                  var r = this;
                  return D(function (i) {
                    return 1 == i.g
                      ? x(i, Promise.resolve(), 2)
                      : e >= t
                        ? i.return()
                        : (n &&
                            (function (e, t, n) {
                              for (var r = g(e.j.keys()), i = r.next(); !i.done; i = r.next()) {
                                i = i.value;
                                var a = e.j.get(i);
                                ((a = a.filter(function (e) {
                                  return e.startTime < t || e.endTime >= n;
                                })),
                                  e.j.set(i, a));
                              }
                            })(r, e, t),
                          r.l &&
                            r.l.remove(e, t) &&
                            null != r.g &&
                            (t <= r.g ||
                              e >= r.h ||
                              (e <= r.g && t >= r.h
                                ? (r.g = r.h = null)
                                : e <= r.g && t < r.h
                                  ? (r.g = t)
                                  : e > r.g && t >= r.h && (r.h = e)),
                            kr(r)),
                          void T(i));
                  });
                }),
                V("shaka.text.TextEngine", xr),
                (xr.prototype.destroy = xr.prototype.destroy),
                (xr.findParser = wr),
                (xr.unregisterParser = function (e) {
                  Ir.delete(e);
                }),
                (xr.registerParser = Tr));
              var Ir = new Map();
              function Cr(e) {
                ((this.h = e), (this.g = null));
              }
              function Mr(e) {
                ((this.h = e), (this.g = null));
              }
              function Rr(e, t) {
                return e.concat(t);
              }
              function _r() {}
              function Dr(e) {
                return null != e;
              }
              function Pr(e, t) {
                return Promise.race([
                  t,
                  new Promise(function (t, n) {
                    new Mr(n).ka(e);
                  }),
                ]);
              }
              function Lr() {}
              function Nr(e, t) {
                return ((e = Br(e)), (t = Br(t)), e.split("-")[0] == t.split("-")[0]);
              }
              function Or(e, t) {
                return (
                  (e = Br(e)),
                  (t = Br(t)),
                  (e = e.split("-")),
                  (t = t.split("-")),
                  e[0] == t[0] && 1 == e.length && 2 == t.length
                );
              }
              function Ur(e, t) {
                return (
                  (e = Br(e)),
                  (t = Br(t)),
                  (e = e.split("-")),
                  (t = t.split("-")),
                  2 == e.length && 2 == t.length && e[0] == t[0]
                );
              }
              function Br(e) {
                var t = (e = g(e.split("-x-"))).next().value;
                ((t = void 0 === t ? "" : t), (e = void 0 === (e = e.next().value) ? "" : e));
                var n = g(t.split("-"));
                return (
                  (t = void 0 === (t = n.next().value) ? "" : t),
                  (n = void 0 === (n = n.next().value) ? "" : n),
                  (e = e ? "x-" + e : ""),
                  (t = t.toLowerCase()),
                  (t = Gr.get(t) || t),
                  ((n = n.toUpperCase()) ? t + "-" + n : t) + (e ? "-" + e : "")
                );
              }
              function jr(e, t) {
                return ((e = Br(e)), (t = Br(t)) == e ? 4 : Or(t, e) ? 3 : Ur(t, e) ? 2 : Or(e, t) ? 1 : 0);
              }
              function Fr(e) {
                var t = e.indexOf("-");
                return ((e = (e = t >= 0 ? e.substring(0, t) : e).toLowerCase()), Gr.get(e) || e);
              }
              function Vr(e) {
                return e.language
                  ? Br(e.language)
                  : e.audio && e.audio.language
                    ? Br(e.audio.language)
                    : e.video && e.video.language
                      ? Br(e.video.language)
                      : "und";
              }
              function Hr(e, t) {
                e = Br(e);
                for (var n = new Set(), r = (t = g(t)).next(); !r.done; r = t.next()) n.add(Br(r.value));
                for (r = (t = g(n)).next(); !r.done; r = t.next()) if ((r = r.value) == e) return r;
                for (r = (t = g(n)).next(); !r.done; r = t.next()) if (Or((r = r.value), e)) return r;
                for (r = (t = g(n)).next(); !r.done; r = t.next()) if (Ur((r = r.value), e)) return r;
                for (t = (n = g(n)).next(); !t.done; t = n.next()) if (Or(e, (t = t.value))) return t;
                return null;
              }
              ((Cr.prototype.ka = function (t) {
                var n = this;
                this.stop();
                var r = !0,
                  i = null;
                return (
                  (this.g = function () {
                    (e.clearTimeout(i), (r = !1));
                  }),
                  (i = e.setTimeout(function () {
                    r && n.h();
                  }, 1e3 * t)),
                  this
                );
              }),
                (Cr.prototype.stop = function () {
                  this.g && (this.g(), (this.g = null));
                }),
                (Mr.prototype.Jb = function () {
                  return (this.stop(), this.h(), this);
                }),
                (Mr.prototype.ka = function (e) {
                  var t = this;
                  return (
                    this.stop(),
                    (this.g = new Cr(function () {
                      t.h();
                    }).ka(e)),
                    this
                  );
                }),
                (Mr.prototype.Ea = function (e) {
                  var t = this;
                  return (
                    this.stop(),
                    (this.g = new Cr(function () {
                      (t.g.ka(e), t.h());
                    }).ka(e)),
                    this
                  );
                }),
                (Mr.prototype.stop = function () {
                  this.g && (this.g.stop(), (this.g = null));
                }),
                V("shaka.util.Timer", Mr),
                (Mr.prototype.stop = Mr.prototype.stop),
                (Mr.prototype.tickEvery = Mr.prototype.Ea),
                (Mr.prototype.tickAfter = Mr.prototype.ka),
                (Mr.prototype.tickNow = Mr.prototype.Jb),
                V("shaka.util.LanguageUtils", Lr),
                (Lr.findClosestLocale = Hr),
                (Lr.getLocaleForVariant = Vr),
                (Lr.getLocaleForText = function (e) {
                  return Br(e.language || "und");
                }),
                (Lr.getBase = Fr),
                (Lr.relatedness = jr),
                (Lr.areSiblings = function (e, t) {
                  var n = Fr(e),
                    r = Fr(t);
                  return e != n && t != r && n == r;
                }),
                (Lr.normalize = Br),
                (Lr.isSiblingOf = Ur),
                (Lr.isParentOf = Or),
                (Lr.areLanguageCompatible = Nr),
                (Lr.areLocaleCompatible = function (e, t) {
                  return (e = Br(e)) == (t = Br(t));
                }));
              var Gr = new Map([
                ["aar", "aa"],
                ["abk", "ab"],
                ["afr", "af"],
                ["aka", "ak"],
                ["alb", "sq"],
                ["amh", "am"],
                ["ara", "ar"],
                ["arg", "an"],
                ["arm", "hy"],
                ["asm", "as"],
                ["ava", "av"],
                ["ave", "ae"],
                ["aym", "ay"],
                ["aze", "az"],
                ["bak", "ba"],
                ["bam", "bm"],
                ["baq", "eu"],
                ["bel", "be"],
                ["ben", "bn"],
                ["bih", "bh"],
                ["bis", "bi"],
                ["bod", "bo"],
                ["bos", "bs"],
                ["bre", "br"],
                ["bul", "bg"],
                ["bur", "my"],
                ["cat", "ca"],
                ["ces", "cs"],
                ["cha", "ch"],
                ["che", "ce"],
                ["chi", "zh"],
                ["chu", "cu"],
                ["chv", "cv"],
                ["cor", "kw"],
                ["cos", "co"],
                ["cre", "cr"],
                ["cym", "cy"],
                ["cze", "cs"],
                ["dan", "da"],
                ["deu", "de"],
                ["div", "dv"],
                ["dut", "nl"],
                ["dzo", "dz"],
                ["ell", "el"],
                ["eng", "en"],
                ["epo", "eo"],
                ["est", "et"],
                ["eus", "eu"],
                ["ewe", "ee"],
                ["fao", "fo"],
                ["fas", "fa"],
                ["fij", "fj"],
                ["fin", "fi"],
                ["fra", "fr"],
                ["fre", "fr"],
                ["fry", "fy"],
                ["ful", "ff"],
                ["geo", "ka"],
                ["ger", "de"],
                ["gla", "gd"],
                ["gle", "ga"],
                ["glg", "gl"],
                ["glv", "gv"],
                ["gre", "el"],
                ["grn", "gn"],
                ["guj", "gu"],
                ["hat", "ht"],
                ["hau", "ha"],
                ["heb", "he"],
                ["her", "hz"],
                ["hin", "hi"],
                ["hmo", "ho"],
                ["hrv", "hr"],
                ["hun", "hu"],
                ["hye", "hy"],
                ["ibo", "ig"],
                ["ice", "is"],
                ["ido", "io"],
                ["iii", "ii"],
                ["iku", "iu"],
                ["ile", "ie"],
                ["ina", "ia"],
                ["ind", "id"],
                ["ipk", "ik"],
                ["isl", "is"],
                ["ita", "it"],
                ["jav", "jv"],
                ["jpn", "ja"],
                ["kal", "kl"],
                ["kan", "kn"],
                ["kas", "ks"],
                ["kat", "ka"],
                ["kau", "kr"],
                ["kaz", "kk"],
                ["khm", "km"],
                ["kik", "ki"],
                ["kin", "rw"],
                ["kir", "ky"],
                ["kom", "kv"],
                ["kon", "kg"],
                ["kor", "ko"],
                ["kua", "kj"],
                ["kur", "ku"],
                ["lao", "lo"],
                ["lat", "la"],
                ["lav", "lv"],
                ["lim", "li"],
                ["lin", "ln"],
                ["lit", "lt"],
                ["ltz", "lb"],
                ["lub", "lu"],
                ["lug", "lg"],
                ["mac", "mk"],
                ["mah", "mh"],
                ["mal", "ml"],
                ["mao", "mi"],
                ["mar", "mr"],
                ["may", "ms"],
                ["mkd", "mk"],
                ["mlg", "mg"],
                ["mlt", "mt"],
                ["mon", "mn"],
                ["mri", "mi"],
                ["msa", "ms"],
                ["mya", "my"],
                ["nau", "na"],
                ["nav", "nv"],
                ["nbl", "nr"],
                ["nde", "nd"],
                ["ndo", "ng"],
                ["nep", "ne"],
                ["nld", "nl"],
                ["nno", "nn"],
                ["nob", "nb"],
                ["nor", "no"],
                ["nya", "ny"],
                ["oci", "oc"],
                ["oji", "oj"],
                ["ori", "or"],
                ["orm", "om"],
                ["oss", "os"],
                ["pan", "pa"],
                ["per", "fa"],
                ["pli", "pi"],
                ["pol", "pl"],
                ["por", "pt"],
                ["pus", "ps"],
                ["que", "qu"],
                ["roh", "rm"],
                ["ron", "ro"],
                ["rum", "ro"],
                ["run", "rn"],
                ["rus", "ru"],
                ["sag", "sg"],
                ["san", "sa"],
                ["sin", "si"],
                ["slk", "sk"],
                ["slo", "sk"],
                ["slv", "sl"],
                ["sme", "se"],
                ["smo", "sm"],
                ["sna", "sn"],
                ["snd", "sd"],
                ["som", "so"],
                ["sot", "st"],
                ["spa", "es"],
                ["sqi", "sq"],
                ["srd", "sc"],
                ["srp", "sr"],
                ["ssw", "ss"],
                ["sun", "su"],
                ["swa", "sw"],
                ["swe", "sv"],
                ["tah", "ty"],
                ["tam", "ta"],
                ["tat", "tt"],
                ["tel", "te"],
                ["tgk", "tg"],
                ["tgl", "tl"],
                ["tha", "th"],
                ["tib", "bo"],
                ["tir", "ti"],
                ["ton", "to"],
                ["tsn", "tn"],
                ["tso", "ts"],
                ["tuk", "tk"],
                ["tur", "tr"],
                ["twi", "tw"],
                ["uig", "ug"],
                ["ukr", "uk"],
                ["urd", "ur"],
                ["uzb", "uz"],
                ["ven", "ve"],
                ["vie", "vi"],
                ["vol", "vo"],
                ["wel", "cy"],
                ["wln", "wa"],
                ["wol", "wo"],
                ["xho", "xh"],
                ["yid", "yi"],
                ["yor", "yo"],
                ["zha", "za"],
                ["zho", "zh"],
                ["zul", "zu"],
              ]);
              function zr() {}
              function Xr(e, t, n, r, i) {
                if (i.length) {
                  for (
                    var a = e.textStreams, o = (i = g(i)).next(), s = {};
                    !o.done;
                    s = { Fh: void 0 }, o = i.next()
                  )
                    if (
                      ((s.Fh = o.value),
                      (o = a.filter(
                        (function (e) {
                          return function (t) {
                            return !(!t.codecs.startsWith(e.Fh) && !t.mimeType.startsWith(e.Fh));
                          };
                        })(s),
                      )).length)
                    ) {
                      a = o;
                      break;
                    }
                  e.textStreams = a;
                }
                if (
                  ((a = e.variants),
                  (t.length || n.length) &&
                    (a = (function (e, t, n) {
                      for (var r = (t = g(t)).next(), i = {}; !r.done; i = { lj: void 0 }, r = t.next())
                        if (
                          ((i.lj = r.value),
                          (r = e.filter(
                            (function (e) {
                              return function (t) {
                                return t.video && t.video.codecs.startsWith(e.lj);
                              };
                            })(i),
                          )),
                          r.length)
                        ) {
                          e = r;
                          break;
                        }
                      for (n = g(n), t = n.next(), r = {}; !t.done; r = { Rh: void 0 }, t = n.next())
                        if (
                          ((r.Rh = t.value),
                          (t = e.filter(
                            (function (e) {
                              return function (t) {
                                return t.audio && t.audio.codecs.startsWith(e.Rh);
                              };
                            })(r),
                          )),
                          t.length)
                        ) {
                          e = t;
                          break;
                        }
                      return e;
                    })(a, t, n)),
                  r.length)
                ) {
                  for (t = new te(), n = (a = g(a)).next(); !n.done; n = a.next())
                    ((n = n.value), t.push(String(n.video.width || 0), n));
                  var u = [];
                  (t.forEach(function (e, t) {
                    e = 0;
                    for (var n = [], i = (t = g(t)).next(), a = {}; !i.done; a = { Xf: void 0 }, i = t.next())
                      ((a.Xf = i.value),
                        (i = r.filter(
                          (function (e) {
                            return function (t) {
                              return e.Xf.decodingInfos[0][t];
                            };
                          })(a),
                        ).length) > e
                          ? ((e = i), (n = [a.Xf]))
                          : i == e && n.push(a.Xf));
                    u.push.apply(u, m(n));
                  }),
                    (a = u));
                }
                for (t = new Set(), i = (n = g(a)).next(); !i.done; i = n.next())
                  (i = i.value).video && t.add(i.video);
                if (t.size) {
                  var l = {
                    vp8: 1,
                    avc: 1,
                    "dovi-avc": 0.95,
                    vp9: 0.9,
                    vp09: 0.9,
                    hevc: 0.85,
                    "dovi-hevc": 0.8,
                    "dovi-p5": 0.75,
                    av01: 0.7,
                    "dovi-av1": 0.65,
                    vvc: 0.6,
                  };
                  i = Array.from(t).sort(function (e, t) {
                    return e.bandwidth && t.bandwidth && e.bandwidth != t.bandwidth
                      ? e.bandwidth - t.bandwidth
                      : e.width != t.width
                        ? e.width - t.width
                        : e.codecs && t.codecs
                          ? ((e = pr(e.codecs)), (t = pr(t.codecs)), (l[e] || 1) - (l[t] || 1))
                          : 0;
                  });
                  var d = [];
                  for (
                    t = new Map(),
                      n = function (e) {
                        var t = [
                          String(e.width || ""),
                          String(e.height || ""),
                          String(Math.round(e.frameRate || 0)),
                          e.hdr || "",
                          e.fastSwitching,
                        ];
                        return (
                          e.dependencyStream && t.push(e.dependencyStream.baseOriginalId || ""),
                          e.roles && t.push(e.roles.sort().join("_")),
                          t.join(";")
                        );
                      },
                      o = (i = g(i)).next();
                    !o.done;
                    o = i.next()
                  ) {
                    s = n((o = o.value));
                    var c = t.get(s) || [];
                    (c.length
                      ? pr(c[c.length - 1].codecs) == pr(o.codecs) && (c.push(o), d.push(o.id))
                      : (c.push(o), d.push(o.id)),
                      t.set(s, c));
                  }
                  e.variants = a.filter(function (e) {
                    return !((e = e.video) && !d.includes(e.id));
                  });
                } else e.variants = a;
              }
              function Wr(e, t, n) {
                function r(e, t, n) {
                  return e >= t && e <= n;
                }
                if (e && e.video && e.video.width && e.video.height) {
                  var i = e.video.width,
                    a = e.video.height;
                  if (
                    (a > i && ((i = (a = g([a, i])).next().value), (a = a.next().value)),
                    !r(i, t.minWidth, Math.min(t.maxWidth, n.width)) ||
                      !r(a, t.minHeight, Math.min(t.maxHeight, n.height)) ||
                      !r(i * a, t.minPixels, t.maxPixels))
                  )
                    return !1;
                }
                return !(
                  (e &&
                    e.video &&
                    e.video.frameRate &&
                    !r(e.video.frameRate, t.minFrameRate, t.maxFrameRate)) ||
                  (e &&
                    e.audio &&
                    e.audio.channelsCount &&
                    !r(e.audio.channelsCount, t.minChannelsCount, t.maxChannelsCount)) ||
                  !r(e.bandwidth, t.minBandwidth, t.maxBandwidth)
                );
              }
              function Kr(e, t, n, r) {
                return (
                  (n = void 0 === n ? [] : n),
                  (r = void 0 === r ? {} : r),
                  D(function (i) {
                    return 1 == i.g
                      ? x(i, qr(e, t, t.offlineSessionIds.length > 0, n, r), 2)
                      : ((function (e) {
                          e.textStreams = e.textStreams.filter(function (e) {
                            return Sr((e = lr(e.mimeType, e.codecs)));
                          });
                        })(t),
                        x(
                          i,
                          (function (e) {
                            var t, n, r, i, a, o, s;
                            return D(function (u) {
                              switch (u.g) {
                                case 1:
                                  ((t = []), (n = g(e.imageStreams)), (r = n.next()));
                                case 2:
                                  if (r.done) {
                                    u.A(4);
                                    break;
                                  }
                                  if (
                                    ((i = r.value),
                                    "application/mp4" == (a = i.mimeType) &&
                                      "mjpg" == i.codecs &&
                                      (a = "image/jpg"),
                                    yi.has(a))
                                  ) {
                                    u.A(5);
                                    break;
                                  }
                                  if (!(o = bi.get(a))) {
                                    (yi.set(a, !1), u.A(5));
                                    break;
                                  }
                                  return x(
                                    u,
                                    (function (e) {
                                      return new Promise(function (t) {
                                        var n = new Image();
                                        ((n.src = e),
                                          "decode" in n
                                            ? n
                                                .decode()
                                                .then(function () {
                                                  t(!0);
                                                })
                                                .catch(function () {
                                                  t(!1);
                                                })
                                            : (n.onload = n.onerror =
                                                function () {
                                                  t(2 === n.height);
                                                }));
                                      });
                                    })(o),
                                    7,
                                  );
                                case 7:
                                  ((s = u.h), yi.set(a, s));
                                case 5:
                                  (yi.get(a) && t.push(i), (r = n.next()), u.A(2));
                                  break;
                                case 4:
                                  ((e.imageStreams = t), T(u));
                              }
                            });
                          })(t),
                          0,
                        ));
                  })
                );
              }
              function qr(e, t, n, r, i) {
                var a, o;
                return D(function (s) {
                  if (1 == s.g)
                    return (
                      oe().$i() &&
                        (function (e) {
                          for (
                            var t = new Map()
                                .set("dvav", "avc3")
                                .set("dva1", "avc1")
                                .set("dvhe", "hev1")
                                .set("dvh1", "hvc1")
                                .set("dvc1", "vvc1")
                                .set("dvi1", "vvi1"),
                              n = new Set(),
                              r = (e = g(e)).next();
                            !r.done;
                            r = e.next()
                          )
                            (r = r.value).video && n.add(r.video);
                          for (n = g(n), e = n.next(); !e.done; e = n.next()) {
                            e = e.value;
                            for (var i = (r = g(t)).next(); !i.done; i = r.next()) {
                              var a = g(i.value);
                              if (((i = a.next().value), (a = a.next().value), e.codecs.includes(i))) {
                                e.codecs = e.codecs.replace(i, a);
                                break;
                              }
                            }
                          }
                        })(t.variants),
                      x(s, Jr(t.variants, n, !1, r), 2)
                    );
                  ((a = null),
                    e && (o = e.g) && (a = o.keySystem),
                    (t.variants = t.variants.filter(function (e) {
                      var t = (function (e, t, n) {
                        if (
                          !e.decodingInfos.some(function (e) {
                            return !(
                              !e.supported ||
                              (t && (e = e.keySystemAccess) && (n[e.keySystem] || e.keySystem) != t)
                            );
                          })
                        )
                          return !1;
                        var r = oe(),
                          i = "Xbox" === r.Nb();
                        r = "MOBILE" === r.Oa() && "GECKO" === r.Ha();
                        var a = e.video,
                          o = (a && a.width) || 0,
                          s = (a && a.height) || 0;
                        return !(
                          (i &&
                            a &&
                            (o > 1920 || s > 1080) &&
                            (a.codecs.includes("avc1.") || a.codecs.includes("avc3."))) ||
                          ((i = a && a.dependencyStream) && !wt(i)) ||
                          ((e = e.audio),
                          (r && e && e.encrypted && e.codecs.toLowerCase().includes("opus")) ||
                            (e && e.dependencyStream))
                        );
                      })(e, a, i);
                      if (!t) {
                        var n = [];
                        (e.audio && n.push(pi(e.audio)), e.video && n.push(pi(e.video)));
                      }
                      return t;
                    })),
                    T(s));
                });
              }
              function Yr(e, t) {
                var n, r, i, a, o, s, u;
                return D(function (l) {
                  if (1 == l.g) {
                    for (
                      n = function (e, t) {
                        if (e) {
                          var n = Kt(e);
                          return (
                            (n.supported = e.supported && t.supported),
                            (n.powerEfficient = e.powerEfficient && t.powerEfficient),
                            (n.smooth = e.smooth && t.smooth),
                            t.keySystemAccess &&
                              !n.keySystemAccess &&
                              (n.keySystemAccess = t.keySystemAccess),
                            n
                          );
                        }
                        return t;
                      },
                        r = null,
                        i = [],
                        a = g(t),
                        o = a.next(),
                        s = {};
                      !o.done;
                      s = { cache: void 0, Se: void 0 }, o = a.next()
                    )
                      ((u = o.value),
                        (s.Se = qt(u)),
                        (s.cache = mi),
                        s.cache.has(s.Se)
                          ? (r = n(r, s.cache.get(s.Se)))
                          : i.push(
                              $r(u).then(
                                (function (e) {
                                  return function (t) {
                                    for (var i = null, a = (t = g(t || [])).next(); !a.done; a = t.next())
                                      i = n(i, a.value);
                                    i && (e.cache.set(e.Se, i), (r = n(r, i)));
                                  };
                                })(s),
                              ),
                            ));
                    return x(l, Promise.all(i), 2);
                  }
                  (r && e.decodingInfos.push(r), T(l));
                });
              }
              function $r(e) {
                var t = [""];
                e.video && (t = mr(e.video.contentType).split(","));
                var n = [""];
                e.audio && (n = mr(e.audio.contentType).split(","));
                for (var r = [], i = (t = g(t)).next(); !i.done; i = t.next()) {
                  i = i.value;
                  for (var a = g(n), o = a.next(), s = {}; !o.done; s = { Qc: void 0 }, o = a.next())
                    ((o = o.value),
                      (s.Qc = Wt(e)),
                      e.video && (s.Qc.video.contentType = lr(gr(s.Qc.video.contentType), i)),
                      e.audio && (s.Qc.audio.contentType = lr(gr(s.Qc.audio.contentType), o)),
                      r.push(
                        new Promise(
                          (function (e) {
                            return function (t, n) {
                              ("MOBILE" == oe().Oa()
                                ? Pr(5, navigator.mediaCapabilities.decodingInfo(e.Qc))
                                : navigator.mediaCapabilities.decodingInfo(e.Qc)
                              )
                                .then(function (e) {
                                  t(e);
                                })
                                .catch(n);
                            };
                          })(s),
                        ),
                      ));
                }
                return Promise.all(r).catch(function () {
                  return (JSON.stringify(e), null);
                });
              }
              function Jr(e, t, n, r) {
                var i, a, o, s, u, l, d, c, h, p, f, m, v, y, b, T, w, S;
                return D(function (A) {
                  switch (A.g) {
                    case 1:
                      if (
                        e.some(function (e) {
                          return e.decodingInfos.length;
                        })
                      )
                        return A.return();
                      ((i = g(r)), (a = i.next()), (o = {}));
                    case 2:
                      if (a.done) {
                        A.A(4);
                        break;
                      }
                      ((o.Ji = a.value), (s = !1), (u = g(e)), (l = u.next()));
                    case 5:
                      if (l.done) {
                        A.A(7);
                        break;
                      }
                      ((d = l.value),
                        (c = Qr(d, t, n).filter(
                          ((E = o),
                          function (e) {
                            return (
                              ((e = e[0]).keySystemConfiguration && e.keySystemConfiguration.keySystem) ===
                              E.Ji
                            );
                          }),
                        )),
                        (h = g(c)),
                        (p = h.next()));
                    case 8:
                      if (p.done) {
                        A.A(10);
                        break;
                      }
                      return ((f = p.value), x(A, Yr(d, f), 9));
                    case 9:
                      ((p = h.next()), A.A(8));
                      break;
                    case 10:
                      (d.decodingInfos.some(function (e) {
                        return e.supported;
                      }) && (s = !0),
                        (l = u.next()),
                        A.A(5));
                      break;
                    case 7:
                      if (s) return A.return();
                      ((o = { Ji: void 0 }), (a = i.next()), A.A(2));
                      break;
                    case 4:
                      ((m = g(e)), (v = m.next()));
                    case 12:
                      if (v.done) {
                        A.A(0);
                        break;
                      }
                      ((y = v.value),
                        (b = Qr(y, t, n).filter(function (e) {
                          return (
                            !(e = (e = e[0]).keySystemConfiguration && e.keySystemConfiguration.keySystem) ||
                            !r.includes(e)
                          );
                        })),
                        (T = g(b)),
                        (w = T.next()));
                    case 15:
                      if (w.done) {
                        ((v = m.next()), A.A(12));
                        break;
                      }
                      return ((S = w.value), x(A, Yr(y, S), 16));
                    case 16:
                      ((w = T.next()), A.A(15));
                  }
                  var E;
                });
              }
              function Qr(e, t, n) {
                var r = e.audio,
                  i = e.video,
                  a = [],
                  o = [];
                if (i)
                  for (var s = g(i.fullMimeTypes), u = s.next(); !u.done; u = s.next()) {
                    var l = mr((u = u.value));
                    if (l.includes(",") && !r) {
                      var d = l.split(","),
                        c = gr(u);
                      ((l = ht("video", d)),
                        (c = cr(c, (d = Zr((d = ht("audio", d)), c)), "audio")),
                        o.push({
                          contentType: c,
                          channels: 2,
                          bitrate: e.bandwidth || 1,
                          samplerate: 1,
                          spatialRendering: !1,
                        }));
                    }
                    if (
                      ((l = ei(l)),
                      (u = {
                        contentType: cr(gr(u), l, "video"),
                        width: i.width || 64,
                        height: i.height || 64,
                        bitrate: i.bandwidth || e.bandwidth || 1,
                        framerate: i.frameRate || 30,
                      }),
                      i.hdr)
                    )
                      switch (i.hdr) {
                        case "PQ":
                          u.transferFunction = "pq";
                          break;
                        case "HLG":
                          u.transferFunction = "hlg";
                      }
                    (i.colorGamut && (u.colorGamut = i.colorGamut), a.push(u));
                  }
                if (r)
                  for (u = (s = g(r.fullMimeTypes)).next(); !u.done; u = s.next())
                    ((u = cr((u = gr((l = u.value))), (l = Zr(mr(l), u)), "audio")),
                      o.push({
                        contentType: u,
                        channels: r.channelsCount || 2,
                        bitrate: r.bandwidth || e.bandwidth || 1,
                        samplerate: r.audioSamplingRate || 1,
                        spatialRendering: r.spatialAudio,
                      }));
                for (
                  s = [], 0 == a.length && a.push(null), 0 == o.length && o.push(null), u = (a = g(a)).next();
                  !u.done;
                  u = a.next()
                )
                  for (u = u.value, c = (l = g(o)).next(); !c.done; c = l.next())
                    ((c = c.value),
                      (d = { type: n ? "file" : "media-source" }),
                      u && (d.video = u),
                      c && (d.audio = c),
                      s.push(d));
                if (!(o = (e.video ? e.video.drmInfos : []).concat(e.audio ? e.audio.drmInfos : [])).length)
                  return [s];
                for (e = [], n = new Map(), a = (o = g(o)).next(); !a.done; a = o.next())
                  ((a = a.value), n.get(a.keySystem) || n.set(a.keySystem, []), n.get(a.keySystem).push(a));
                for (
                  o = t ? "required" : "optional",
                    t = t ? ["persistent-license"] : ["temporary"],
                    u = (a = g(n.keys())).next();
                  !u.done;
                  u = a.next()
                ) {
                  for (
                    u = u.value, c = n.get(u), l = new Map(), d = (c = g(c)).next();
                    !d.done;
                    d = c.next()
                  ) {
                    var h = (d = d.value).videoRobustness + "," + d.audioRobustness;
                    (l.get(h) || l.set(h, []), l.get(h).push(d));
                  }
                  for (c = (l = g(l.values())).next(); !c.done; c = l.next()) {
                    ((c = c.value), (d = []));
                    for (var p = (h = g(s)).next(); !p.done; p = h.next()) {
                      p = Object.assign({}, p.value);
                      for (
                        var f = {
                            keySystem: u,
                            initDataType: "cenc",
                            persistentState: o,
                            distinctiveIdentifier: "optional",
                            sessionTypes: t,
                          },
                          m = g(c),
                          v = m.next();
                        !v.done;
                        v = m.next()
                      ) {
                        if ((v = v.value).initData && v.initData.length) {
                          for (var y = new Set(), b = g(v.initData), x = b.next(); !x.done; x = b.next())
                            y.add(x.value.initDataType);
                          f.initDataType = v.initData[0].initDataType;
                        }
                        (v.distinctiveIdentifierRequired && (f.distinctiveIdentifier = "required"),
                          v.persistentStateRequired && (f.persistentState = "required"),
                          v.sessionType && (f.sessionTypes = [v.sessionType]),
                          r &&
                            (f.audio
                              ? (v.encryptionScheme &&
                                  (f.audio.encryptionScheme = f.audio.encryptionScheme || v.encryptionScheme),
                                (f.audio.robustness = f.audio.robustness || v.audioRobustness))
                              : ((f.audio = { robustness: v.audioRobustness }),
                                v.encryptionScheme && (f.audio.encryptionScheme = v.encryptionScheme)),
                            "" == f.audio.robustness && delete f.audio.robustness),
                          i &&
                            (f.video
                              ? (v.encryptionScheme &&
                                  (f.video.encryptionScheme = f.video.encryptionScheme || v.encryptionScheme),
                                (f.video.robustness = f.video.robustness || v.videoRobustness))
                              : ((f.video = { robustness: v.videoRobustness }),
                                v.encryptionScheme && (f.video.encryptionScheme = v.encryptionScheme)),
                            "" == f.video.robustness && delete f.video.robustness));
                      }
                      ((p.keySystemConfiguration = f), d.push(p));
                    }
                    e.push(d);
                  }
                }
                return e;
              }
              function Zr(e, t) {
                var n = oe();
                return "flac" == e.toLowerCase()
                  ? "WEBKIT" != n.Ha()
                    ? "flac"
                    : "fLaC"
                  : "opus" === e.toLowerCase()
                    ? "WEBKIT" != n.Ha()
                      ? "opus"
                      : "mp4" == hr(t)
                        ? "Opus"
                        : "opus"
                    : "ac-3" == e.toLowerCase() && n.se()
                      ? "ec-3"
                      : e;
              }
              function ei(e) {
                if (e.includes("avc1")) {
                  var t = e.split(".");
                  if (3 == t.length)
                    return (
                      (e = t.shift() + "."),
                      (e += parseInt(t.shift(), 10).toString(16)) +
                        ("000" + parseInt(t.shift(), 10).toString(16)).slice(-4)
                    );
                } else if ("vp9" == e) return "vp09.00.41.08";
                return e;
              }
              function ti(e) {
                var t = e.audio,
                  n = e.video,
                  r = t ? t.mimeType : null,
                  i = n ? n.mimeType : null,
                  a = t ? t.codecs : null,
                  o = n ? n.codecs : null,
                  s = t ? t.groupId : null,
                  u = [];
                (n && u.push(n.mimeType), t && u.push(t.mimeType), (u = u[0] || null));
                var l = [];
                (t && l.push(t.kind), n && l.push(n.kind), (l = l[0] || null));
                var d = new Set();
                if (t) for (var c = g(t.roles), h = c.next(); !h.done; h = c.next()) d.add(h.value);
                if (n) for (h = (c = g(n.roles)).next(); !h.done; h = c.next()) d.add(h.value);
                if (
                  ((e = {
                    id: e.id,
                    active: !1,
                    type: "variant",
                    bandwidth: e.bandwidth,
                    language: e.language,
                    label: null,
                    videoLabel: null,
                    kind: l,
                    width: null,
                    height: null,
                    frameRate: null,
                    pixelAspectRatio: null,
                    hdr: null,
                    colorGamut: null,
                    videoLayout: null,
                    mimeType: u,
                    audioMimeType: r,
                    videoMimeType: i,
                    codecs: "",
                    audioCodec: a,
                    videoCodec: o,
                    primary: e.primary,
                    roles: Array.from(d),
                    audioRoles: null,
                    videoRoles: null,
                    forced: !1,
                    videoId: null,
                    audioId: null,
                    audioGroupId: s,
                    channelsCount: null,
                    audioSamplingRate: null,
                    spatialAudio: !1,
                    tilesLayout: null,
                    audioBandwidth: null,
                    videoBandwidth: null,
                    originalVideoId: null,
                    originalAudioId: null,
                    originalTextId: null,
                    originalImageId: null,
                    accessibilityPurpose: null,
                    originalLanguage: null,
                  }),
                  n &&
                    ((e.videoId = n.id),
                    (e.originalVideoId = n.originalId),
                    (e.width = n.width || null),
                    (e.height = n.height || null),
                    (e.frameRate = n.frameRate || null),
                    (e.pixelAspectRatio = n.pixelAspectRatio || null),
                    (e.videoBandwidth = n.bandwidth || null),
                    (e.hdr = n.hdr || null),
                    (e.colorGamut = n.colorGamut || null),
                    (e.videoLayout = n.videoLayout || null),
                    (e.videoRoles = n.roles),
                    (e.videoLabel = n.label),
                    (r = n.dependencyStream) &&
                      ((e.width = r.width || e.width),
                      (e.height = r.height || e.height),
                      (e.videoCodec = r.codecs || e.videoCodec),
                      (e.pixelAspectRatio = r.pixelAspectRatio || e.pixelAspectRatio),
                      e.videoBandwidth && r.bandwidth && (e.videoBandwidth += r.bandwidth)),
                    o.includes(",")))
                ) {
                  ((e.channelsCount = n.channelsCount),
                    (e.audioSamplingRate = n.audioSamplingRate),
                    (e.spatialAudio = n.spatialAudio),
                    (e.originalLanguage = n.originalLanguage),
                    (e.audioMimeType = i),
                    (i = o.split(",")));
                  try {
                    ((e.videoCodec = ht("video", i)), (e.audioCodec = ht("audio", i)));
                  } catch (p) {}
                }
                return (
                  t &&
                    ((e.audioId = t.id),
                    (e.originalAudioId = t.originalId),
                    (e.channelsCount = t.channelsCount),
                    (e.audioSamplingRate = t.audioSamplingRate),
                    (e.audioBandwidth = t.bandwidth || null),
                    (e.spatialAudio = t.spatialAudio),
                    (e.label = t.label),
                    (e.audioRoles = t.roles),
                    (e.accessibilityPurpose = t.accessibilityPurpose),
                    (e.originalLanguage = t.originalLanguage),
                    (i = t.dependencyStream)) &&
                    ((e.audioCodec = i.codecs || e.audioCodec),
                    e.audioBandwidth && i.bandwidth && (e.audioBandwidth += i.bandwidth)),
                  n &&
                    !e.videoBandwidth &&
                    (t
                      ? e.audioBandwidth && (e.videoBandwidth = e.bandwidth - e.audioBandwidth)
                      : (e.videoBandwidth = e.bandwidth)),
                  t &&
                    !e.audioBandwidth &&
                    (n
                      ? e.videoBandwidth && (e.audioBandwidth = e.bandwidth - e.videoBandwidth)
                      : (e.audioBandwidth = e.bandwidth)),
                  (t = []),
                  e.videoCodec && t.push(e.videoCodec),
                  e.audioCodec && t.push(e.audioCodec),
                  (e.codecs = t.join(", ")),
                  e
                );
              }
              function ni(e) {
                return {
                  id: e.id,
                  active: !1,
                  type: gt,
                  bandwidth: e.bandwidth || 0,
                  language: e.language,
                  label: e.label,
                  kind: e.kind || null,
                  mimeType: e.mimeType,
                  codecs: e.codecs || null,
                  primary: e.primary,
                  roles: e.roles,
                  accessibilityPurpose: e.accessibilityPurpose,
                  forced: e.forced,
                  originalTextId: e.originalId,
                  originalLanguage: e.originalLanguage,
                };
              }
              function ri(e) {
                var t = e.width || null,
                  n = e.height || null,
                  r = null;
                e.segmentIndex && (r = Du(e.segmentIndex));
                var i = e.tilesLayout;
                return (
                  r && (i = r.tilesLayout || i),
                  i && null != t && (t /= Number(i.split("x")[0])),
                  i && null != n && (n /= Number(i.split("x")[1])),
                  {
                    id: e.id,
                    type: "image",
                    bandwidth: e.bandwidth || 0,
                    width: t,
                    height: n,
                    mimeType: e.mimeType,
                    codecs: e.codecs || null,
                    tilesLayout: i || null,
                    originalImageId: e.originalId,
                  }
                );
              }
              function ii(e) {
                return (e.__shaka_id || (e.__shaka_id = vi++), e.__shaka_id);
              }
              function ai(e) {
                var t = {
                  id: ii(e),
                  active: "disabled" != e.mode,
                  type: gt,
                  bandwidth: 0,
                  language: Br(e.language || "und"),
                  label: e.label,
                  kind: e.kind,
                  mimeType: null,
                  codecs: null,
                  primary: !1,
                  roles: [],
                  accessibilityPurpose: null,
                  forced: "forced" == e.kind,
                  originalTextId: e.id,
                  originalLanguage: e.language,
                };
                return (
                  "captions" == e.kind && (t.mimeType = "unknown"),
                  "subtitles" == e.kind && (t.mimeType = "text/vtt"),
                  e.kind && (t.roles = [e.kind]),
                  t
                );
              }
              function oi(e, t) {
                var n = e ? e.language : null;
                if (
                  ((n = {
                    id: ii(e || t),
                    active: e ? e.enabled : t.selected,
                    type: "variant",
                    bandwidth: 0,
                    language: Br(n || "und"),
                    label: e ? e.label : null,
                    videoLabel: null,
                    kind: e ? e.kind : null,
                    width: null,
                    height: null,
                    frameRate: null,
                    pixelAspectRatio: null,
                    hdr: null,
                    colorGamut: null,
                    videoLayout: null,
                    mimeType: null,
                    audioMimeType: null,
                    videoMimeType: null,
                    codecs: null,
                    audioCodec: null,
                    videoCodec: null,
                    primary: !!e && "main" == e.kind,
                    roles: [],
                    forced: !1,
                    audioRoles: null,
                    videoRoles: null,
                    videoId: null,
                    audioId: null,
                    audioGroupId: null,
                    channelsCount: null,
                    audioSamplingRate: null,
                    spatialAudio: !1,
                    tilesLayout: null,
                    audioBandwidth: null,
                    videoBandwidth: null,
                    originalVideoId: t ? t.id : null,
                    originalAudioId: e ? e.id : null,
                    originalTextId: null,
                    originalImageId: null,
                    accessibilityPurpose: null,
                    originalLanguage: n,
                  }),
                  e && e.kind && ((n.roles = [e.kind]), (n.audioRoles = [e.kind])),
                  e &&
                    e.configuration &&
                    (e.configuration.codec &&
                      ((n.audioCodec = e.configuration.codec), (n.codecs = n.audioCodec)),
                    e.configuration.bitrate &&
                      ((n.audioBandwidth = e.configuration.bitrate), (n.bandwidth += n.audioBandwidth)),
                    e.configuration.sampleRate && (n.audioSamplingRate = e.configuration.sampleRate),
                    e.configuration.numberOfChannels && (n.channelsCount = e.configuration.numberOfChannels)),
                  t &&
                    t.configuration &&
                    (t.configuration.codec &&
                      ((n.videoCodec = t.configuration.codec),
                      (n.codecs = n.codecs ? n.codecs + "," + n.videoCodec : n.videoCodec)),
                    t.configuration.bitrate &&
                      ((n.videoBandwidth = t.configuration.bitrate), (n.bandwidth += n.videoBandwidth)),
                    t.configuration.framerate && (n.frameRate = t.configuration.framerate),
                    t.configuration.width && (n.width = t.configuration.width),
                    t.configuration.height && (n.height = t.configuration.height),
                    t.configuration.colorSpace && t.configuration.colorSpace.transfer))
                )
                  switch (t.configuration.colorSpace.transfer) {
                    case "pq":
                      n.hdr = "PQ";
                      break;
                    case "hlg":
                      n.hdr = "HLG";
                      break;
                    case "bt709":
                      n.hdr = "SDR";
                  }
                return n;
              }
              function si(e) {
                return e.allowedByApplication && e.allowedByKeySystem && 0 == e.disabledUntilTime;
              }
              function ui(e) {
                return e.filter(function (e) {
                  return si(e);
                });
              }
              function li(e, t, n, r) {
                var i = e,
                  a = e.filter(function (e) {
                    return e.primary;
                  });
                a.length && (i = a);
                var o = i.length ? i[0].language : "";
                if (
                  ((i = i.filter(function (e) {
                    return e.language == o;
                  })),
                  t)
                ) {
                  var s = Hr(
                    Br(t),
                    e.map(function (e) {
                      return e.language;
                    }),
                  );
                  s &&
                    (i = e.filter(function (e) {
                      return Br(e.language) == s;
                    }));
                }
                if (
                  ((i = i.filter(function (e) {
                    return e.forced == r;
                  })),
                  n)
                ) {
                  if ((e = di(i, n)).length) return e;
                } else if (
                  ((e = i.filter(function (e) {
                    return 0 == e.roles.length;
                  })),
                  e.length)
                )
                  return e;
                return (
                  (e = i
                    .map(function (e) {
                      return e.roles;
                    })
                    .reduce(Rr, [])),
                  e.length ? di(i, e[0]) : i
                );
              }
              function di(e, t) {
                return e.filter(function (e) {
                  return e.roles.includes(t);
                });
              }
              function ci(e) {
                var t = [];
                return (e.audio && t.push(e.audio), e.video && t.push(e.video), t);
              }
              function hi(e, t) {
                t.length &&
                  ((t = t
                    .filter(function (t) {
                      return pr(e.codecs) == pr(t.codecs);
                    })
                    .sort(function (e, t) {
                      return e.bandwidth && t.bandwidth && e.bandwidth != t.bandwidth
                        ? e.bandwidth - t.bandwidth
                        : (e.width || 0) - (t.width || 0);
                    })),
                  (e.trickModeVideo = t[0]),
                  t.length > 1 &&
                    (t = t.find(function (t) {
                      return e.width == t.width && e.height == t.height;
                    }))) &&
                  (e.trickModeVideo = t);
              }
              function pi(e) {
                return "audio" == e.type
                  ? "type=audio codecs=" +
                      e.codecs +
                      " bandwidth=" +
                      e.bandwidth +
                      " channelsCount=" +
                      e.channelsCount +
                      " audioSamplingRate=" +
                      e.audioSamplingRate
                  : "video" == e.type
                    ? "type=video codecs=" +
                      e.codecs +
                      " bandwidth=" +
                      e.bandwidth +
                      " frameRate=" +
                      e.frameRate +
                      " width=" +
                      e.width +
                      " height=" +
                      e.height
                    : "unexpected stream type";
              }
              function fi(e, t, n) {
                if (0 == n.autoShowText) return !1;
                if (1 == n.autoShowText) return !0;
                var r = Br(n.preferredTextLanguage);
                return (
                  (t = Br(t.language)),
                  2 == n.autoShowText
                    ? Nr(t, r)
                    : 3 == n.autoShowText
                      ? !!e && ((e = Br(e.language)), Nr(t, r) && !Nr(e, t))
                      : (K("Invalid autoShowText setting!"), !1)
                );
              }
              function gi(e) {
                for (
                  var t = {
                      id: 0,
                      language: "und",
                      disabledUntilTime: 0,
                      primary: !1,
                      audio: null,
                      video: null,
                      bandwidth: 100,
                      allowedByApplication: !0,
                      allowedByKeySystem: !0,
                      decodingInfos: [],
                    },
                    n = (e = g(e)).next();
                  !n.done;
                  n = e.next()
                ) {
                  var r = {
                    id: 0,
                    originalId: null,
                    groupId: null,
                    createSegmentIndex: function () {
                      return Promise.resolve();
                    },
                    segmentIndex: null,
                    mimeType: (n = n.value) ? gr(n) : "",
                    codecs: n ? mr(n) : "",
                    encrypted: !0,
                    drmInfos: [],
                    keyIds: new Set(),
                    language: "und",
                    originalLanguage: null,
                    label: null,
                    type: "video",
                    primary: !1,
                    trickModeVideo: null,
                    dependencyStream: null,
                    emsgSchemeIdUris: null,
                    roles: [],
                    forced: !1,
                    channelsCount: null,
                    audioSamplingRate: null,
                    spatialAudio: !1,
                    closedCaptions: null,
                    accessibilityPurpose: null,
                    external: !1,
                    fastSwitching: !1,
                    fullMimeTypes: new Set(),
                    isAudioMuxedInVideo: !1,
                    baseOriginalId: null,
                  };
                  (r.fullMimeTypes.add(lr(r.mimeType, r.codecs)),
                    n.startsWith("audio/") ? ((r.type = "audio"), (t.audio = r)) : (t.video = r));
                }
                return t;
              }
              (V("shaka.util.StreamUtils", zr), (zr.meetsRestrictions = Wr));
              var mi = new Map(),
                vi = 0,
                yi = new Map()
                  .set("image/svg+xml", !0)
                  .set("image/png", !0)
                  .set("image/jpeg", !0)
                  .set("image/jpg", !0),
                bi = new Map()
                  .set(
                    "image/webp",
                    "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",
                  )
                  .set(
                    "image/avif",
                    "data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",
                  );
              function xi() {
                var t = this;
                ((this.H = null),
                  (this.G = !1),
                  (this.u = new z()),
                  (this.j = new ne()),
                  navigator.connection &&
                    navigator.connection.addEventListener &&
                    this.j.D(navigator.connection, "change", function () {
                      t.g.useNetworkInformation &&
                        navigator.onLine &&
                        ((t.u = new z()), t.g && t.u.configure(t.g.advanced), t.trySuggestStreams());
                    }),
                  (this.l = []),
                  (this.I = 1),
                  (this.J = !1),
                  (this.h = this.o = this.g = this.B = null),
                  (this.m = new Mr(function () {
                    if (t.G && (t.g.restrictToElementSize || t.g.restrictToScreenSize)) {
                      var e = t.chooseVariant();
                      e && t.H(e, t.g.clearBufferSwitch, t.g.safeMarginSwitch);
                    }
                  })),
                  (this.C = e),
                  "documentPictureInPicture" in e &&
                    this.j.D(e.documentPictureInPicture, "enter", function () {
                      ((t.C = e.documentPictureInPicture.window),
                        t.m && t.m.Jb(),
                        t.j.Aa(t.C, "pagehide", function () {
                          ((t.C = e), t.m && t.m.Jb());
                        }));
                    }),
                  (this.F = this.i = null));
              }
              function Ti(e, t) {
                if (void 0 === t || !t) {
                  if (!e.J) {
                    if (!((t = e.u).g >= t.i)) return;
                    ((e.J = !0), (e.B -= 1e3 * (e.g.switchInterval - e.g.minTimeToSwitch)));
                  }
                  if (Date.now() - e.B < 1e3 * e.g.switchInterval) return;
                }
                ((t = e.chooseVariant()),
                  e.getBandwidthEstimate(),
                  t && e.H(t, e.g.clearBufferSwitch, e.g.safeMarginSwitch));
              }
              function wi(e, t, n, r, i) {
                if (e.F) {
                  var a = e.F.ji();
                  a &&
                    (n = n.filter(function (e) {
                      return !e.bandwidth || !a || e.bandwidth <= a;
                    }));
                }
                return (
                  t &&
                    (n = n.filter(function (e) {
                      return Wr(e, t, { width: i, height: r });
                    })),
                  n.sort(function (e, t) {
                    return e.bandwidth - t.bandwidth;
                  })
                );
              }
              (((i = xi.prototype).stop = function () {
                ((this.H = null),
                  (this.G = !1),
                  (this.l = []),
                  (this.I = 1),
                  (this.o = this.B = null),
                  this.h && (this.h.disconnect(), (this.h = null)),
                  this.m && this.m.stop(),
                  (this.F = this.i = null));
              }),
                (i.release = function () {
                  (this.stop(), this.j.release(), (this.m = null));
                }),
                (i.init = function (e) {
                  this.H = e;
                }),
                (i.chooseVariant = function (e) {
                  e = void 0 !== e && e;
                  var t = 1 / 0,
                    n = 1 / 0;
                  if (
                    (this.g.restrictToScreenSize &&
                      ((n = this.g.ignoreDevicePixelRatio ? 1 : this.C.devicePixelRatio),
                      (t = this.C.screen.height * n),
                      (n *= this.C.screen.width)),
                    this.h && this.g.restrictToElementSize)
                  ) {
                    var r = this.g.ignoreDevicePixelRatio ? 1 : this.C.devicePixelRatio,
                      i = this.o.clientHeight,
                      a = this.o.clientWidth;
                    (this.i &&
                      document.pictureInPictureElement &&
                      document.pictureInPictureElement == this.o &&
                      ((i = this.i.height), (a = this.i.width)),
                      (t = Math.min(t, i * r)),
                      (n = Math.min(n, a * r)));
                  }
                  if (
                    ((i = this.l.filter(function (e) {
                      return e && !((e.audio && e.audio.fastSwitching) || (e.video && e.video.fastSwitching));
                    })).length || (i = this.l),
                    (r = i),
                    e &&
                      i.length != this.l.length &&
                      (r = this.l.filter(function (e) {
                        return (
                          e && !!((e.audio && e.audio.fastSwitching) || (e.video && e.video.fastSwitching))
                        );
                      })),
                    (e = wi(this, this.g.restrictions, r, 1 / 0, 1 / 0)),
                    t != 1 / 0 || n != 1 / 0)
                  ) {
                    for (
                      e = (function (e) {
                        for (var t = [], n = (e = g(e)).next(); !n.done; n = e.next())
                          (n = n.value) &&
                            (n = n.video) &&
                            n.height &&
                            n.width &&
                            t.push({ height: n.height, width: n.width });
                        return t.sort(function (e, t) {
                          return e.width - t.width;
                        });
                      })(e),
                        i = (e = g(e)).next();
                      !i.done;
                      i = e.next()
                    )
                      if ((i = i.value).height >= t && i.width >= n) {
                        ((t = i.height), (n = i.width));
                        break;
                      }
                    e = wi(this, this.g.restrictions, r, t, n);
                  }
                  for (
                    t = this.getBandwidthEstimate(),
                      r.length && !e.length && (e = [(e = wi(this, null, r, 1 / 0, 1 / 0))[0]]),
                      n = e[0] || null,
                      r = 0;
                    r < e.length;
                    r++
                  ) {
                    i = e[r];
                    var o = isNaN(this.I) ? 1 : Math.abs(this.I);
                    a = (o * i.bandwidth) / this.g.bandwidthDowngradeTarget;
                    for (var s = { bandwidth: 1 / 0 }, u = r + 1; u < e.length; u++)
                      if (i.bandwidth != e[u].bandwidth) {
                        s = e[u];
                        break;
                      }
                    ((o = (o * s.bandwidth) / this.g.bandwidthUpgradeTarget),
                      n &&
                        i &&
                        t >= a &&
                        t <= o &&
                        (n.bandwidth != i.bandwidth ||
                          (n.bandwidth == i.bandwidth &&
                            n.video &&
                            i.video &&
                            (n.video.width < i.video.width || n.video.height < i.video.height))) &&
                        (n = i));
                  }
                  return ((this.B = Date.now()), n);
                }),
                (i.enable = function () {
                  ((this.G = !0), this.l.length && this.trySuggestStreams());
                }),
                (i.disable = function () {
                  this.G = !1;
                }),
                (i.segmentDownloaded = function (e, t, n, r) {
                  var i = e;
                  (this.g.removeLatencyFromFirstPacketTime &&
                    r &&
                    1 === r.packetNumber &&
                    r.timeToFirstByte &&
                    (i = e - r.timeToFirstByte),
                    i >= this.g.cacheLoadThreshold && this.u.sample(i, t),
                    n && null != this.B && this.G && Ti(this));
                }),
                (i.trySuggestStreams = function () {
                  this.G && ((this.B = Date.now()), Ti(this, !0));
                }),
                (i.getBandwidthEstimate = function () {
                  var e = this.g.defaultBandwidthEstimate;
                  return (
                    navigator.connection &&
                      navigator.connection.downlink &&
                      this.g.useNetworkInformation &&
                      (e = 1e6 * navigator.connection.downlink),
                    navigator.connection &&
                    navigator.connection.downlink &&
                    this.g.useNetworkInformation &&
                    this.g.preferNetworkInformationBandwidth
                      ? e
                      : ((e = this.u.getBandwidthEstimate(e)), this.F ? this.F.getBandwidthEstimate(e) : e)
                  );
                }),
                (i.setVariants = function (e) {
                  return !Z(e, this.l) && ((this.l = e), !0);
                }),
                (i.playbackRateChanged = function (e) {
                  this.I = e;
                }),
                (i.setMediaElement = function (t) {
                  function n() {
                    r.m.ka(Si);
                  }
                  var r = this;
                  ((this.o = t),
                    this.h && (this.h.disconnect(), (this.h = null)),
                    this.o &&
                      "ResizeObserver" in e &&
                      ((this.h = new ResizeObserver(n)), this.h.observe(this.o)),
                    this.j.D(t, "enterpictureinpicture", function (e) {
                      e.pictureInPictureWindow && ((r.i = e.pictureInPictureWindow), r.j.D(r.i, "resize", n));
                    }),
                    this.j.D(t, "leavepictureinpicture", function () {
                      (r.i && r.j.Ma(r.i, "resize", n), (r.i = null));
                    }));
                }),
                (i.setCmsdManager = function (e) {
                  this.F = e;
                }),
                (i.configure = function (e) {
                  ((this.g = e), this.u && this.g && this.u.configure(this.g.advanced));
                }),
                V("shaka.abr.SimpleAbrManager", xi),
                (xi.prototype.configure = xi.prototype.configure),
                (xi.prototype.setCmsdManager = xi.prototype.setCmsdManager),
                (xi.prototype.setMediaElement = xi.prototype.setMediaElement),
                (xi.prototype.playbackRateChanged = xi.prototype.playbackRateChanged),
                (xi.prototype.setVariants = xi.prototype.setVariants),
                (xi.prototype.getBandwidthEstimate = xi.prototype.getBandwidthEstimate),
                (xi.prototype.trySuggestStreams = xi.prototype.trySuggestStreams),
                (xi.prototype.segmentDownloaded = xi.prototype.segmentDownloaded),
                (xi.prototype.disable = xi.prototype.disable),
                (xi.prototype.enable = xi.prototype.enable),
                (xi.prototype.chooseVariant = xi.prototype.chooseVariant),
                (xi.prototype.init = xi.prototype.init),
                (xi.prototype.release = xi.prototype.release),
                (xi.prototype.stop = xi.prototype.stop));
              var Si = 1;
              function Ai(e, t) {
                var n = {
                  maxAttempts: 2,
                  baseDelay: 1e3,
                  backoffFactor: 2,
                  fuzzFactor: 0.5,
                  timeout: 3e4,
                  stallTimeout: 5e3,
                  connectionTimeout: 1e4,
                };
                ((this.l = null == e.maxAttempts ? n.maxAttempts : e.maxAttempts),
                  (this.j = null == e.baseDelay ? n.baseDelay : e.baseDelay),
                  (this.o = null == e.fuzzFactor ? n.fuzzFactor : e.fuzzFactor),
                  (this.m = null == e.backoffFactor ? n.backoffFactor : e.backoffFactor),
                  (this.g = 0),
                  (this.h = this.j),
                  (this.i = void 0 !== t && t) && (this.g = 1));
              }
              function Ei(e) {
                var t, n;
                return D(function (r) {
                  if (1 == r.g) {
                    if (e.g >= e.l) {
                      if (!e.i) throw new Ke(2, 7, 1010);
                      ((e.g = 1), (e.h = e.j));
                    }
                    return (
                      (t = e.g),
                      e.g++,
                      0 == t
                        ? r.return()
                        : ((n = e.h * (1 + (2 * Math.random() - 1) * e.o)),
                          x(
                            r,
                            new Promise(function (e) {
                              new Mr(e).ka(n / 1e3);
                            }),
                            2,
                          ))
                    );
                  }
                  ((e.h *= e.m), T(r));
                });
              }
              function ki() {
                return {
                  maxAttempts: 2,
                  baseDelay: 1e3,
                  backoffFactor: 2,
                  fuzzFactor: 0.5,
                  timeout: 3e4,
                  stallTimeout: 5e3,
                  connectionTimeout: 1e4,
                };
              }
              function Ii() {
                var e,
                  t,
                  n = new Promise(function (n, r) {
                    ((e = n), (t = r));
                  });
                return ((n.resolve = e), (n.reject = t), n);
              }
              function Ci(e, t) {
                ((this.promise = e), (this.i = t), (this.g = null));
              }
              function Mi(e) {
                return new Ci(Promise.reject(e), function () {
                  return Promise.resolve();
                });
              }
              function Ri() {
                var e = Promise.reject(new Ke(2, 7, 7001));
                return (
                  e.catch(function () {}),
                  new Ci(e, function () {
                    return Promise.resolve();
                  })
                );
              }
              function _i(e) {
                return new Ci(Promise.resolve(e), function () {
                  return Promise.resolve();
                });
              }
              function Di(e) {
                return new Ci(e, function () {
                  return e.catch(function () {});
                });
              }
              function Pi(e) {
                return new Ci(
                  Promise.all(
                    e.map(function (e) {
                      return e.promise;
                    }),
                  ),
                  function () {
                    return Promise.all(
                      e.map(function (e) {
                        return e.abort();
                      }),
                    );
                  },
                );
              }
              function Li(t, n) {
                if (n)
                  if (n instanceof Map)
                    for (var r = g(n.keys()), i = r.next(); !i.done; i = r.next())
                      ((i = i.value),
                        Object.defineProperty(this, i, { value: n.get(i), writable: !0, enumerable: !0 }));
                  else
                    for (r in n)
                      Object.defineProperty(this, r, { value: n[r], writable: !0, enumerable: !0 });
                ((this.defaultPrevented = this.cancelable = this.bubbles = !1),
                  (this.timeStamp = e.performance && e.performance.now ? e.performance.now() : Date.now()),
                  (this.type = t),
                  (this.isTrusted = !1),
                  (this.target = this.currentTarget = null),
                  (this.g = !1));
              }
              function Ni(e) {
                var t,
                  n = new Li(e.type);
                for (t in e) Object.defineProperty(n, t, { value: e[t], writable: !0, enumerable: !0 });
                return n;
              }
              ((Ii.prototype.resolve = function () {}),
                (Ii.prototype.reject = function () {}),
                (Ci.prototype.abort = function () {
                  return (this.g || (this.g = this.i()), this.g);
                }),
                (Ci.prototype.finally = function (e) {
                  return (
                    this.promise.then(
                      function () {
                        return e(!0);
                      },
                      function () {
                        return e(!1);
                      },
                    ),
                    this
                  );
                }),
                (Ci.prototype.Xa = function (e, t) {
                  function n(n) {
                    return function (s) {
                      if (i.g && n) a.reject(o);
                      else {
                        var u = n ? e : t;
                        u
                          ? (r = (function (e, t, n) {
                              try {
                                var r = e(t);
                                return r && r.promise && r.abort
                                  ? (n.resolve(r.promise),
                                    function () {
                                      return r.abort();
                                    })
                                  : (n.resolve(r),
                                    function () {
                                      return Promise.resolve(r).then(
                                        function () {},
                                        function () {},
                                      );
                                    });
                              } catch (i) {
                                return (
                                  n.reject(i),
                                  function () {
                                    return Promise.resolve();
                                  }
                                );
                              }
                            })(u, s, a))
                          : (n ? a.resolve : a.reject)(s);
                      }
                    };
                  }
                  function r() {
                    return (a.reject(o), i.abort());
                  }
                  var i = this,
                    a = new Ii();
                  a.catch(function () {});
                  var o = new Ke(2, 7, 7001);
                  return (
                    this.promise.then(n(!0), n(!1)),
                    new Ci(a, function () {
                      return r();
                    })
                  );
                }),
                u.Object.defineProperties(Ci.prototype, {
                  aborted: {
                    configurable: !0,
                    enumerable: !0,
                    get: function () {
                      return null !== this.g;
                    },
                  },
                }),
                V("shaka.util.AbortableOperation", Ci),
                (Ci.prototype.chain = Ci.prototype.Xa),
                (Ci.prototype.finally = Ci.prototype.finally),
                (Ci.all = Pi),
                (Ci.prototype.abort = Ci.prototype.abort),
                (Ci.notAbortable = Di),
                (Ci.completed = _i),
                (Ci.aborted = Ri),
                (Ci.failed = Mi),
                (Li.prototype.preventDefault = function () {
                  this.cancelable && (this.defaultPrevented = !0);
                }),
                (Li.prototype.stopImmediatePropagation = function () {
                  this.g = !0;
                }),
                (Li.prototype.stopPropagation = function () {}),
                V("shaka.util.FakeEvent", Li));
              var Oi = {
                wl: "abrstatuschanged",
                xl: "adaptation",
                yl: "audiotrackchanged",
                zl: "audiotrackschanged",
                Al: "boundarycrossed",
                Bl: "buffering",
                Cl: "canupdatestarttime",
                Dl: "complete",
                El: "currentitemchanged",
                Fl: "downloadcompleted",
                Gl: "downloadfailed",
                Hl: "downloadheadersreceived",
                Il: "drmsessionupdate",
                Jl: "emsg",
                Pl: "itemsinserted",
                Ql: "itemsremoved",
                gm: "prft",
                Error: "error",
                Kl: "expirationupdated",
                Ll: "firstquartile",
                Ml: "gapjumped",
                Rl: "keystatuschanged",
                Ul: "loaded",
                Vl: "loading",
                Xl: "manifestparsed",
                Yl: "manifestupdated",
                Zl: "mediaqualitychanged",
                $l: "mediasourcerecovered",
                am: "metadataadded",
                Metadata: "metadata",
                bm: "midpoint",
                dm: "nospatialvideoinfo",
                fm: "onstatechange",
                hm: "ratechange",
                lm: "segmentappended",
                nm: "sessiondata",
                om: "spatialvideoinfo",
                pm: "stalldetected",
                qm: "started",
                rm: "statechanged",
                sm: "streaming",
                tm: "textchanged",
                um: "texttrackvisibility",
                vm: "thirdquartile",
                wm: "timelineregionadded",
                xm: "timelineregionenter",
                ym: "timelineregionexit",
                zm: "trackschanged",
                Bm: "unloading",
                Dm: "variantchanged",
              };
              function Ui() {
                ((this.ab = new te()), (this.Je = this));
              }
              function Bi() {
                this.g = [];
              }
              function ji(e, t) {
                e.g.push(
                  t.finally(function () {
                    Q(e.g, t);
                  }),
                );
              }
              function Fi(e, t, n, r, i, a, o) {
                (Ui.call(this),
                  (this.i = null),
                  (this.j = !1),
                  (this.u = new Bi()),
                  (this.g = new Set()),
                  (this.h = new Set()),
                  (this.o = e || null),
                  (this.m = t || null),
                  (this.B = n || null),
                  (this.C = r || null),
                  (this.F = i || null),
                  (this.H = a || null),
                  (this.G = o || null),
                  (this.l = new Map()));
              }
              function Vi(e, t, n, r) {
                ((r = void 0 !== r && r), (n = n || Yi));
                var i = $i.get(e);
                (!i || n >= i.priority) && $i.set(e, { priority: n, Bf: t, Ik: r });
              }
              function Hi(e, t) {
                for (var n = g(e.g), r = n.next(); !r.done; r = n.next()) t.g.add(r.value);
                for (n = (e = g(e.h)).next(); !n.done; n = e.next()) t.h.add(n.value);
              }
              function Gi(e, t, n) {
                return {
                  uris: e,
                  method: "GET",
                  body: null,
                  headers: {},
                  allowCrossSiteCredentials: !1,
                  retryParameters: t,
                  licenseRequestType: null,
                  sessionId: null,
                  drmInfo: null,
                  initData: null,
                  initDataType: null,
                  streamDataCallback: void 0 === n ? null : n,
                };
              }
              function zi(e, t, n, r, i, a, o, s) {
                (e.i.forceHTTP && (n.uris[a] = n.uris[a].replace("https://", "http://")),
                  e.i.forceHTTPS && (n.uris[a] = n.uris[a].replace("http://", "https://")),
                  a > 0 && e.H && e.H(t, r, n.uris[a], n.uris[a - 1]));
                var u = new me(n.uris[a]),
                  l = u.fc,
                  d = !1;
                (l || (ve(u, (l = (l = location.protocol).slice(0, -1))), (n.uris[a] = u.toString())),
                  (l = l.toLowerCase()));
                var c = (l = $i.get(l)) ? l.Bf : null;
                if (!c) return Mi(new Ke(2, 1, 1e3, u));
                var h = l.Ik;
                (u = e.l.get(u.Db)) && (n.headers["common-access-token"] = u);
                var p,
                  f = null,
                  g = null,
                  m = !1,
                  v = !1;
                return Di(Ei(i))
                  .Xa(function () {
                    if (e.j) return Ri();
                    p = Date.now();
                    var i = 0;
                    n.requestStartTime = Date.now();
                    var o = c(
                      n.uris[a],
                      n,
                      t,
                      function (a, o, u) {
                        (f && f.stop(),
                          g && g.ka(l / 1e3),
                          e.o &&
                            t == qi &&
                            (i++, (n.packetNumber = i), e.o(a, o, Xi(r), n, r), (d = !0), (s.g = u)));
                      },
                      function (r) {
                        ((v = !0),
                          (n.timeToFirstByte = Date.now() - n.requestStartTime),
                          e.m && e.m(r, n, t));
                      },
                      { minBytesForProgressEvents: e.i.minBytesForProgressEvents },
                    );
                    if (!h) return o;
                    var u = n.retryParameters.connectionTimeout;
                    u &&
                      (f = new Mr(function () {
                        ((m = !0), o.abort());
                      })).ka(u / 1e3);
                    var l = n.retryParameters.stallTimeout;
                    return (
                      l &&
                        (g = new Mr(function () {
                          ((m = !0), o.abort());
                        })),
                      o
                    );
                  })
                  .Xa(
                    function (r) {
                      (f && f.stop(), g && g.stop(), null == r.timeMs && (r.timeMs = Date.now() - p));
                      var i = r.headers["common-access-token"];
                      if (i) {
                        var a = new me(r.uri);
                        e.l.set(a.Db, i);
                      }
                      return (
                        (i = { response: r, jk: d }),
                        !v && e.m && e.m(r.headers, n, t),
                        e.B && e.B(n, r),
                        i
                      );
                    },
                    function (u) {
                      if ((f && f.stop(), g && g.stop(), e.C)) {
                        var l = null,
                          d = 0;
                        (u instanceof Ke && ((l = u), 1001 == u.code && (d = u.data[1])), e.C(n, l, d, m));
                      }
                      if (e.j) return Ri();
                      if ((m && (u = new Ke(1, 1, 1003, n.uris[a], t)), u instanceof Ke)) {
                        if (7001 == u.code) throw u;
                        if (1010 == u.code) throw o;
                        if (1 == u.severity) {
                          if (
                            (((l = new Li("retry", (l = new Map().set("error", u)))).cancelable = !0),
                            e.dispatchEvent(l),
                            l.defaultPrevented)
                          )
                            throw u;
                          return ((a = (a + 1) % n.uris.length), zi(e, t, n, r, i, a, u, s));
                        }
                      }
                      throw u;
                    },
                  );
              }
              function Xi(e) {
                if (e) {
                  var t = e.segment;
                  if (((e = e.stream), t && e && e.fastSwitching && t.Xc)) return !1;
                }
                return !0;
              }
              function Wi() {
                this.g = 0;
              }
              function Ki(e, t, n) {
                (Ci.call(this, e, t), (this.h = n));
              }
              ((Ui.prototype.addEventListener = function (e, t) {
                this.ab && this.ab.push(e, t);
              }),
                (Ui.prototype.removeEventListener = function (e, t) {
                  this.ab && this.ab.remove(e, t);
                }),
                (Ui.prototype.dispatchEvent = function (e) {
                  if (!this.ab) return !0;
                  var t = this.ab.get(e.type) || [],
                    n = this.ab.get("All");
                  for (n && (t = t.concat(n)), n = (t = g(t)).next(); !n.done; n = t.next()) {
                    ((n = n.value), (e.target = this.Je), (e.currentTarget = this.Je));
                    try {
                      n.handleEvent ? n.handleEvent(e) : n.call(this, e);
                    } catch (r) {}
                    if (e.g) break;
                  }
                  return e.defaultPrevented;
                }),
                (Ui.prototype.release = function () {
                  this.ab = null;
                }),
                (Bi.prototype.destroy = function () {
                  for (var e = [], t = g(this.g), n = t.next(); !n.done; n = t.next())
                    ((n = n.value).promise.catch(function () {}), e.push(n.abort()));
                  return ((this.g = []), Promise.all(e));
                }),
                p(Fi, Ui),
                ((i = Fi.prototype).configure = function (e) {
                  this.i = e;
                }),
                (i.Lk = function (e) {
                  this.g.add(e);
                }),
                (i.kl = function (e) {
                  this.g.delete(e);
                }),
                (i.vj = function () {
                  this.g.clear();
                }),
                (i.Mk = function (e) {
                  this.h.add(e);
                }),
                (i.ll = function (e) {
                  this.h.delete(e);
                }),
                (i.wj = function () {
                  this.h.clear();
                }),
                (i.Wh = function () {
                  this.l.clear();
                }),
                (i.destroy = function () {
                  return (
                    (this.j = !0),
                    this.g.clear(),
                    this.h.clear(),
                    this.l.clear(),
                    Ui.prototype.release.call(this),
                    this.u.destroy()
                  );
                }),
                (i.request = function (e, t, n) {
                  var r = this,
                    i = new Wi();
                  if (this.j) {
                    var a = Promise.reject(new Ke(2, 7, 7001));
                    return (
                      a.catch(function () {}),
                      new Ki(
                        a,
                        function () {
                          return Promise.resolve();
                        },
                        i,
                      )
                    );
                  }
                  ((t.method = t.method || "GET"),
                    (t.headers = t.headers || {}),
                    (t.retryParameters = t.retryParameters
                      ? Wt(t.retryParameters)
                      : {
                          maxAttempts: 2,
                          baseDelay: 1e3,
                          backoffFactor: 2,
                          fuzzFactor: 0.5,
                          timeout: 3e4,
                          stallTimeout: 5e3,
                          connectionTimeout: 1e4,
                        }),
                    (t.uris = Wt(t.uris)),
                    (a = (function (e, t, n, r) {
                      function i(e) {
                        a = a.Xa(function () {
                          return (n.body && (n.body = Le(n.body)), e(t, n, r));
                        });
                      }
                      var a = _i(void 0);
                      e.F && i(e.F);
                      for (var o = (e = g(e.g)).next(); !o.done; o = e.next()) i(o.value);
                      return a.Xa(void 0, function (e) {
                        if (e instanceof Ke && 7001 == e.code) throw e;
                        throw new Ke(2, 1, 1006, e);
                      });
                    })(this, e, t, n)));
                  var o = a.Xa(function () {
                      return zi(r, e, t, n, new Ai(t.retryParameters, !1), 0, null, i);
                    }),
                    s = o.Xa(function (t) {
                      return (function (e, t, n, r) {
                        for (
                          var i = _i(void 0), a = (e = g(e.h)).next(), o = {};
                          !a.done;
                          o = { Pi: void 0 }, a = e.next()
                        )
                          ((o.Pi = a.value),
                            (i = i.Xa(
                              (function (e) {
                                return function () {
                                  var i = n.response;
                                  return (i.data && (i.data = Le(i.data)), (0, e.Pi)(t, i, r));
                                };
                              })(o),
                            )));
                        return i.Xa(
                          function () {
                            return n;
                          },
                          function (e) {
                            var t = 2;
                            if (e instanceof Ke) {
                              if (7001 == e.code) throw e;
                              t = e.severity;
                            }
                            throw new Ke(t, 1, 1007, e);
                          },
                        );
                      })(r, e, t, n);
                    }),
                    u = Date.now(),
                    l = 0;
                  a.promise.then(
                    function () {
                      l = Date.now() - u;
                    },
                    function () {},
                  );
                  var d = 0;
                  o.promise.then(
                    function () {
                      d = Date.now();
                    },
                    function () {},
                  );
                  var c = s.Xa(
                    function (i) {
                      var a = Date.now() - d,
                        o = i.response;
                      return (
                        (o.timeMs += l),
                        (o.timeMs += a),
                        i.jk ||
                          !r.o ||
                          o.fromCache ||
                          "HEAD" == t.method ||
                          e != qi ||
                          r.o(o.timeMs, o.data.byteLength, Xi(n), t, n),
                        r.G && r.G(e, o, n),
                        o
                      );
                    },
                    function (e) {
                      throw (e && (e.severity = 2), e);
                    },
                  );
                  return (
                    (a = new Ki(
                      c.promise,
                      function () {
                        return c.abort();
                      },
                      i,
                    )),
                    ji(this.u, a),
                    a
                  );
                }),
                V("shaka.net.NetworkingEngine", Fi),
                (Fi.prototype.request = Fi.prototype.request),
                (Fi.prototype.destroy = Fi.prototype.destroy),
                (Fi.makeRequest = Gi),
                (Fi.defaultRetryParameters = function () {
                  return {
                    maxAttempts: 2,
                    baseDelay: 1e3,
                    backoffFactor: 2,
                    fuzzFactor: 0.5,
                    timeout: 3e4,
                    stallTimeout: 5e3,
                    connectionTimeout: 1e4,
                  };
                }),
                (Fi.prototype.clearCommonAccessTokenMap = Fi.prototype.Wh),
                (Fi.prototype.clearAllResponseFilters = Fi.prototype.wj),
                (Fi.prototype.unregisterResponseFilter = Fi.prototype.ll),
                (Fi.prototype.registerResponseFilter = Fi.prototype.Mk),
                (Fi.prototype.clearAllRequestFilters = Fi.prototype.vj),
                (Fi.prototype.unregisterRequestFilter = Fi.prototype.kl),
                (Fi.prototype.registerRequestFilter = Fi.prototype.Lk),
                (Fi.unregisterScheme = function (e) {
                  $i.delete(e);
                }),
                (Fi.registerScheme = Vi),
                (Fi.prototype.configure = Fi.prototype.configure),
                (Fi.NumBytesRemainingClass = Wi),
                p(Ki, Ci),
                (Fi.PendingRequest = Ki));
              var qi = 1;
              ((Fi.RequestType = {
                MANIFEST: 0,
                SEGMENT: qi,
                LICENSE: 2,
                APP: 3,
                TIMING: 4,
                SERVER_CERTIFICATE: 5,
                KEY: 6,
                ADS: 7,
                CONTENT_STEERING: 8,
                CMCD: 9,
              }),
                (Fi.AdvancedRequestType = {
                  INIT_SEGMENT: 0,
                  MEDIA_SEGMENT: 1,
                  MEDIA_PLAYLIST: 2,
                  MASTER_PLAYLIST: 3,
                  MPD: 4,
                  MSS: 5,
                  MPD_PATCH: 6,
                  MEDIATAILOR_SESSION_INFO: 7,
                  MEDIATAILOR_TRACKING_INFO: 8,
                  MEDIATAILOR_STATIC_RESOURCE: 9,
                  MEDIATAILOR_TRACKING_EVENT: 10,
                  INTERSTITIAL_ASSET_LIST: 11,
                  INTERSTITIAL_AD_URL: 12,
                }));
              var Yi = 3;
              Fi.PluginPriority = { FALLBACK: 1, PREFERRED: 2, APPLICATION: Yi };
              var $i = new Map();
              function Ji(e) {
                ((this.g = !1), (this.h = new Ii()), (this.i = e));
              }
              function Qi(e, t) {
                if (e.g) {
                  if (t instanceof Ke && 7003 == t.code) throw t;
                  throw new Ke(2, 7, 7003, t);
                }
              }
              function Zi(e, t) {
                for (var n = [], r = (e = g(e)).next(); !r.done; r = e.next()) n.push(t(r.value));
                return n;
              }
              function ea(e) {
                for (var t = new Map(), n = g(Object.keys(e)), r = n.next(); !r.done; r = n.next())
                  ((r = r.value), t.set(r, e[r]));
                return t;
              }
              function ta(e) {
                var t = {};
                return (
                  e.forEach(function (e, n) {
                    t[n] = e;
                  }),
                  t
                );
              }
              function na(e, t) {
                ((this.h = Ue(e)), (this.i = t == ia), (this.g = 0));
              }
              function ra() {
                return new Ke(2, 3, 3e3);
              }
              ((Ji.prototype.destroy = function () {
                var e = this;
                return this.g
                  ? this.h
                  : ((this.g = !0),
                    this.i().then(
                      function () {
                        e.h.resolve();
                      },
                      function () {
                        e.h.resolve();
                      },
                    ));
              }),
                ((i = na.prototype).Ia = function () {
                  return this.g < this.h.byteLength;
                }),
                (i.Pa = function () {
                  return this.g;
                }),
                (i.getLength = function () {
                  return this.h.byteLength;
                }),
                (i.Y = function () {
                  try {
                    var e = this.h.getUint8(this.g);
                    return ((this.g += 1), e);
                  } catch (t) {
                    throw ra();
                  }
                }),
                (i.Ca = function () {
                  try {
                    var e = this.h.getUint16(this.g, this.i);
                    return ((this.g += 2), e);
                  } catch (t) {
                    throw ra();
                  }
                }),
                (i.U = function () {
                  try {
                    var e = this.h.getUint32(this.g, this.i);
                    return ((this.g += 4), e);
                  } catch (t) {
                    throw ra();
                  }
                }),
                (i.dh = function () {
                  try {
                    var e = this.h.getInt32(this.g, this.i);
                    return ((this.g += 4), e);
                  } catch (t) {
                    throw ra();
                  }
                }),
                (i.Ed = function () {
                  try {
                    if (this.i)
                      var e = this.h.getUint32(this.g, !0),
                        t = this.h.getUint32(this.g + 4, !0);
                    else ((t = this.h.getUint32(this.g, !1)), (e = this.h.getUint32(this.g + 4, !1)));
                  } catch (n) {
                    throw ra();
                  }
                  if (t > 2097151) throw new Ke(2, 3, 3001);
                  return ((this.g += 8), 4294967296 * t + e);
                }),
                (i.Tb = function (e, t) {
                  if (this.g + e > this.h.byteLength) throw ra();
                  var n = Ne(this.h, this.g, e);
                  return ((this.g += e), t ? new Uint8Array(n) : n);
                }),
                (i.skip = function (e) {
                  if (this.g + e > this.h.byteLength) throw ra();
                  this.g += e;
                }),
                (i.Qi = function (e) {
                  if (this.g < e) throw ra();
                  this.g -= e;
                }),
                (i.seek = function (e) {
                  if (e < 0 || e > this.h.byteLength) throw ra();
                  this.g = e;
                }),
                (i.Yc = function () {
                  for (var e = this.g; this.Ia() && 0 != this.h.getUint8(this.g); ) this.g += 1;
                  return ((e = Ne(this.h, e, this.g - e)), (this.g += 1), Ye(e));
                }),
                V("shaka.util.DataViewReader", na),
                (na.prototype.readTerminatedString = na.prototype.Yc),
                (na.prototype.seek = na.prototype.seek),
                (na.prototype.rewind = na.prototype.Qi),
                (na.prototype.skip = na.prototype.skip),
                (na.prototype.readBytes = na.prototype.Tb),
                (na.prototype.readUint64 = na.prototype.Ed),
                (na.prototype.readInt32 = na.prototype.dh),
                (na.prototype.readUint32 = na.prototype.U),
                (na.prototype.readUint16 = na.prototype.Ca),
                (na.prototype.readUint8 = na.prototype.Y),
                (na.prototype.getLength = na.prototype.getLength),
                (na.prototype.getPosition = na.prototype.Pa),
                (na.prototype.hasMoreData = na.prototype.Ia));
              var ia = 1;
              function aa() {
                ((this.i = new Map()), (this.h = new Map()), (this.g = !1));
              }
              function oa(e) {
                for (var t = pa(e); e.reader.Ia() && !e.parser.g; )
                  e.parser.Bd(e.start + t, e.reader, e.partialOkay, e.stopOnPartial);
              }
              function sa(e) {
                for (
                  var t = pa(e), n = e.reader.U(), r = 0;
                  r < n && (e.parser.Bd(e.start + t, e.reader, e.partialOkay, e.stopOnPartial), !e.parser.g);
                  r++
                );
              }
              function ua(e) {
                var t = pa(e);
                for (e.reader.skip(78); e.reader.Ia() && !e.parser.g; )
                  e.parser.Bd(e.start + t, e.reader, e.partialOkay, e.stopOnPartial);
              }
              function la(e) {
                var t = pa(e);
                e.reader.skip(8);
                var n = e.reader.Ca();
                for (
                  e.reader.skip(6),
                    2 == n ? e.reader.skip(48) : e.reader.skip(12),
                    1 == n && e.reader.skip(16);
                  e.reader.Ia() && !e.parser.g;
                )
                  e.parser.Bd(e.start + t, e.reader, e.partialOkay, e.stopOnPartial);
              }
              function da(e, t) {
                return function (n) {
                  e(n.reader.Tb(n.reader.getLength() - n.reader.Pa(), t));
                };
              }
              function ca(e) {
                for (var t = 0, n = (e = g(e)).next(); !n.done; n = e.next())
                  t = (t << 8) | n.value.charCodeAt(0);
                return t;
              }
              function ha(e) {
                return String.fromCharCode((e >> 24) & 255, (e >> 16) & 255, (e >> 8) & 255, 255 & e);
              }
              function pa(e) {
                return 8 + (e.has64BitSize ? 8 : 0) + (null != e.flags ? 4 : 0);
              }
              ((na.Endianness = { BIG_ENDIAN: 0, LITTLE_ENDIAN: ia }),
                ((i = aa.prototype).box = function (e, t) {
                  return ((e = ca(e)), this.i.set(e, fa), this.h.set(e, t), this);
                }),
                (i.S = function (e, t) {
                  return ((e = ca(e)), this.i.set(e, ga), this.h.set(e, t), this);
                }),
                (i.stop = function () {
                  this.g = !0;
                }),
                (i.parse = function (e, t, n) {
                  for (e = new na(e, 0), this.g = !1; e.Ia() && !this.g; ) this.Bd(0, e, t, n);
                }),
                (i.Bd = function (e, t, n, r) {
                  var i = t.Pa();
                  if (r && i + 8 > t.getLength()) this.g = !0;
                  else {
                    var a = t.U(),
                      o = t.U(),
                      s = ha(o),
                      u = !1;
                    switch (a) {
                      case 0:
                        a = t.getLength() - i;
                        break;
                      case 1:
                        if (r && t.Pa() + 8 > t.getLength()) return void (this.g = !0);
                        ((a = t.Ed()), (u = !0));
                    }
                    var l = this.h.get(o);
                    if (l) {
                      var d = null,
                        c = null;
                      if (this.i.get(o) == ga) {
                        if (r && t.Pa() + 4 > t.getLength()) return void (this.g = !0);
                        ((d = (c = t.U()) >>> 24), (c &= 16777215));
                      }
                      ((o = i + a),
                        n && o > t.getLength() && (o = t.getLength()),
                        r && o > t.getLength()
                          ? (this.g = !0)
                          : ((o -= t.Pa()),
                            l({
                              name: s,
                              parser: this,
                              partialOkay: n || !1,
                              stopOnPartial: r || !1,
                              version: d,
                              flags: c,
                              reader: (t = new na((t = o > 0 ? t.Tb(o, !1) : new Uint8Array(0)), 0)),
                              size: a,
                              start: i + e,
                              has64BitSize: u,
                            })));
                    } else t.skip(Math.min(i + a - t.Pa(), t.getLength() - t.Pa()));
                  }
                }),
                V("shaka.util.Mp4Parser", aa),
                (aa.headerSize = pa),
                (aa.typeToString = ha),
                (aa.allData = da),
                (aa.audioSampleEntry = la),
                (aa.visualSampleEntry = ua),
                (aa.sampleDescription = sa),
                (aa.children = oa),
                (aa.prototype.parseNext = aa.prototype.Bd),
                (aa.prototype.parse = aa.prototype.parse),
                (aa.prototype.stop = aa.prototype.stop),
                (aa.prototype.fullBox = aa.prototype.S),
                (aa.prototype.box = aa.prototype.box));
              var fa = 0,
                ga = 1;
              function ma(e) {
                var t = this;
                ((this.g = []),
                  (this.h = []),
                  (this.data = []),
                  new aa()
                    .box("moov", oa)
                    .box("moof", oa)
                    .S("pssh", function (e) {
                      if (!(e.version > 1)) {
                        var n = Ne(e.reader.h, -12, e.size);
                        if ((t.data.push(n), (n = e.reader.Tb(16, !1)), t.g.push(st(n)), e.version > 0)) {
                          n = e.reader.U();
                          for (var r = 0; r < n; r++) {
                            var i = e.reader.Tb(16, !1);
                            ((i = st(i)), t.h.push(i));
                          }
                        }
                      }
                    })
                    .parse(e));
              }
              function va(e, t, n, r) {
                var i = e.length,
                  a = 12 + t.length + 4 + i;
                r > 0 && (a += 4 + 16 * n.size);
                var o = new Uint8Array(a),
                  s = Ue(o),
                  u = 0;
                if (
                  (s.setUint32(u, a),
                  (u += 4),
                  s.setUint32(u, 1886614376),
                  (u += 4),
                  r < 1 ? s.setUint32(u, 0) : s.setUint32(u, 16777216),
                  (u += 4),
                  o.set(t, u),
                  (u += t.length),
                  r > 0)
                )
                  for (s.setUint32(u, n.size), u += 4, n = (t = g(n)).next(); !n.done; n = t.next())
                    ((n = ot(n.value)), o.set(n, u), (u += n.length));
                return (s.setUint32(u, i), o.set(e, u + 4), o);
              }
              function ya(e) {
                var t = this;
                ((this.F = e),
                  (this.l = this.B = null),
                  (this.$ = this.T = !1),
                  (this.J = 0),
                  (this.g = null),
                  (this.o = new ne()),
                  (this.i = new Map()),
                  (this.X = []),
                  (this.C = new Map()),
                  (this.K = !1),
                  (this.m = new Ii()),
                  (this.h = null),
                  (this.u = function (n) {
                    (2 == n.severity && t.m.reject(n), e.onError(n));
                  }),
                  (this.ba = new Map()),
                  (this.ma = new Map()),
                  (this.M = new Mr(function () {
                    return (function (e) {
                      var t = e.ba,
                        n = e.ma;
                      (n.clear(),
                        t.forEach(function (e, t) {
                          return n.set(t, e);
                        }),
                        (t = Array.from(n.values())).length &&
                          t.every(function (e) {
                            return "expired" == e;
                          }) &&
                          e.u(new Ke(2, 6, 6014)),
                        e.F.zf(ta(n)));
                    })(t);
                  })),
                  (this.R = !1),
                  (this.N = []),
                  (this.oa = !1),
                  (this.G = new Mr(function () {
                    !(function (e) {
                      e.i.forEach(function (t, n) {
                        var r = t.Yg,
                          i = n.expiration;
                        (isNaN(i) && (i = 1 / 0),
                          i != r && (e.F.onExpirationUpdated(n.sessionId, i), (t.Yg = i)));
                      });
                    })(t);
                  })),
                  this.m.catch(function () {}),
                  (this.j = new Ji(function () {
                    return (function (e) {
                      return D(function (t) {
                        switch (t.g) {
                          case 1:
                            return (
                              e.o.release(),
                              (e.o = null),
                              e.m.reject(),
                              e.G.stop(),
                              (e.G = null),
                              e.M.stop(),
                              (e.M = null),
                              x(t, Pa(e), 2)
                            );
                          case 2:
                            if (!e.l) {
                              t.A(3);
                              break;
                            }
                            return (w(t, 4), x(t, e.l.setMediaKeys(null), 6));
                          case 6:
                            A(t, 5);
                            break;
                          case 4:
                            E(t);
                          case 5:
                            e.l = null;
                          case 3:
                            ((e.g = null),
                              (e.B = null),
                              (e.C = new Map()),
                              (e.h = null),
                              (e.u = function () {}),
                              (e.F = null),
                              (e.O = !1),
                              (e.I = null),
                              T(t));
                        }
                      });
                    })(t);
                  })),
                  (this.O = !1),
                  (this.H = this.I = null),
                  (this.V = function () {
                    return !1;
                  }));
              }
              function ba(e, t, n, r) {
                ((r = void 0 === r || r), (e.C = new Map()));
                for (var i = (n = g(n)).next(); !i.done; i = n.next())
                  e.C.set(i.value, { initData: null, initDataType: null });
                for (i = (n = g(e.h.persistentSessionsMetadata)).next(); !i.done; i = n.next())
                  ((i = i.value),
                    e.C.set(i.sessionId, { initData: i.initData, initDataType: i.initDataType }));
                return ((e.R = e.C.size > 0), xa(e, t, r));
              }
              function xa(e, t, n) {
                var r, i, a, o, s, u, l, d, c, h, p, f, m, v, y, b, T;
                return D(function (w) {
                  if (1 == w.g) {
                    for (
                      Ua(e.h.clearKeys, t),
                        r = t.some(function (e) {
                          return !!(
                            (e.video && e.video.drmInfos.length) ||
                            (e.audio && e.audio.drmInfos.length)
                          );
                        }),
                        i = ea(e.h.servers),
                        a = ea(e.h.advanced || {}),
                        !r &&
                          n &&
                          (function (e, t) {
                            var n = [];
                            for (
                              t.forEach(function (e, t) {
                                n.push({
                                  keySystem: t,
                                  licenseServerUri: e,
                                  distinctiveIdentifierRequired: !1,
                                  persistentStateRequired: !1,
                                  audioRobustness: "",
                                  videoRobustness: "",
                                  serverCertificate: null,
                                  serverCertificateUri: "",
                                  initData: [],
                                  keyIds: new Set(),
                                });
                              }),
                                e = g(e),
                                t = e.next();
                              !t.done;
                              t = e.next()
                            )
                              ((t = t.value).video && (t.video.drmInfos = n),
                                t.audio && (t.audio.drmInfos = n));
                          })(t, i),
                        o = new WeakSet(),
                        s = g(t),
                        u = s.next();
                      !u.done;
                      u = s.next()
                    )
                      for (l = u.value, d = La(l), c = g(d), h = c.next(); !h.done; h = c.next())
                        ((p = h.value), o.has(p) || (o.add(p), Oa(p, i, a, e.h.keySystemsMapping)));
                    for (
                      f = function (t, n) {
                        for (var r = [], i = (t = g(t)).next(); !i.done; i = t.next()) {
                          var o,
                            s = (i = i.value)[n] || (a.has(i.keySystem) && a.get(i.keySystem)[n]) || "";
                          if (
                            ((o = "" == s) && (o = !!(o = i.keySystem) && !!o.match(/^com\.widevine\.alpha/)),
                            o &&
                              ("audioRobustness" == n
                                ? (s = [e.h.defaultAudioRobustnessForWidevine])
                                : "videoRobustness" == n && (s = [e.h.defaultVideoRobustnessForWidevine])),
                            "string" == typeof s)
                          )
                            r.push(i);
                          else if (Array.isArray(s))
                            for (0 === s.length && (s = [""]), o = (s = g(s)).next(); !o.done; o = s.next()) {
                              var u = {};
                              r.push(Object.assign({}, i, ((u[n] = o.value), u)));
                            }
                        }
                        return r;
                      },
                        m = new WeakSet(),
                        v = g(t),
                        y = v.next();
                      !y.done;
                      y = v.next()
                    )
                      ((b = y.value).video &&
                        !m.has(b.video) &&
                        ((b.video.drmInfos = f(b.video.drmInfos, "videoRobustness")),
                        (b.video.drmInfos = f(b.video.drmInfos, "audioRobustness")),
                        m.add(b.video)),
                        b.audio &&
                          !m.has(b.audio) &&
                          ((b.audio.drmInfos = f(b.audio.drmInfos, "videoRobustness")),
                          (b.audio.drmInfos = f(b.audio.drmInfos, "audioRobustness")),
                          m.add(b.audio)));
                    return x(w, Jr(t, e.R, e.O, e.h.preferredKeySystems), 2);
                  }
                  return (
                    Qi(e.j),
                    r || i.size > 0
                      ? ((T = Ea(e, t)), w.return(r ? T : T.catch(function () {})))
                      : ((e.T = !0), w.return(Promise.resolve()))
                  );
                });
              }
              function Ta(e) {
                var t;
                return D(function (n) {
                  switch (n.g) {
                    case 1:
                      if (e.l.mediaKeys) return n.return();
                      if (!e.I) {
                        n.A(2);
                        break;
                      }
                      return x(n, e.I, 3);
                    case 3:
                      return (Qi(e.j), n.return());
                    case 2:
                      return (w(n, 4), (e.I = e.l.setMediaKeys(e.B)), x(n, e.I, 6));
                    case 6:
                      A(n, 5);
                      break;
                    case 4:
                      ((t = E(n)), e.u(new Ke(2, 6, 6003, t.message)));
                    case 5:
                      (Qi(e.j), T(n));
                  }
                });
              }
              function wa(e) {
                var t, n, r, i;
                return D(function (a) {
                  if (1 == a.g)
                    return e.C.size
                      ? (e.C.forEach(function (t, n) {
                          Ca(e, n, t);
                        }),
                        x(a, e.m, 3))
                      : a.A(2);
                  if (2 != a.g) {
                    if (
                      ((e.g && e.g.keyIds) || new Set([])).size > 0 &&
                      (function (e) {
                        for (
                          var t = g((e.g && e.g.keyIds) || new Set([])), n = t.next();
                          !n.done;
                          n = t.next()
                        )
                          if ("usable" !== e.ba.get(n.value)) return !1;
                        return !0;
                      })(e)
                    )
                      return a.return(e.m);
                    ((e.K = !1), (e.m = new Ii()), e.m.catch(function () {}));
                  }
                  for (t = (e.g ? e.g.initData : []) || [], n = g(t), r = n.next(); !r.done; r = n.next())
                    ((i = r.value), Sa(e, i.initDataType, i.initData));
                  return (Na(e) && e.m.resolve(), a.return(e.m));
                });
              }
              function Sa(e, t, n) {
                if (n.length) {
                  try {
                    n = e.h.initDataTransform(n, t, e.g);
                  } catch (o) {
                    return ((t = o), o instanceof Ke || (t = new Ke(2, 6, 6016, o)), void e.u(t));
                  }
                  if (e.h.ignoreDuplicateInitData) {
                    for (var r = e.i.values(), i = (r = g(r)).next(); !i.done; i = r.next())
                      if (Pe(n, i.value.initData)) return;
                    var a = !1;
                    if (
                      (e.C.forEach(function (e) {
                        !a && Pe(n, e.initData) && (a = !0);
                      }),
                      a)
                    )
                      return;
                  }
                  ((e.K = !0),
                    e.i.size > 0 &&
                      Na(e) &&
                      (e.m.resolve(), (e.K = !1), (e.m = new Ii()), e.m.catch(function () {})),
                    (function (e, t, n, r) {
                      try {
                        var i = e.B.createSession(r);
                      } catch (a) {
                        return void e.u(new Ke(2, 6, 6005, a.message));
                      }
                      (e.o.D(i, "message", function (t) {
                        Ma(e) ? e.N.push(t) : Ra(e, t);
                      }),
                        e.o.D(i, "keystatuseschange", function (t) {
                          return _a(e, t);
                        }),
                        e.i.set(i, {
                          initData: n,
                          initDataType: t,
                          loaded: !1,
                          Yg: 1 / 0,
                          Kb: null,
                          type: r,
                        }),
                        e.h.logLicenseExchange && it(n),
                        i.generateRequest(t, n).catch(function (t) {
                          if (!e.j.g) {
                            e.i.delete(i);
                            var n = t.errorCode;
                            if (n && n.systemCode) {
                              var r = n.systemCode;
                              (r < 0 && (r += 4294967296), (r = "0x" + r.toString(16)));
                            }
                            e.u(new Ke(2, 6, 6006, t.message, t, r));
                          }
                        }));
                    })(e, t, n, e.g.sessionType));
                }
              }
              function Aa(e) {
                return (
                  (e = Zi((e = e.i.keys()), function (e) {
                    return e.sessionId;
                  })),
                  Array.from(e)
                );
              }
              function Ea(t, n) {
                var r, i, a, o, s, u;
                return D(function (l) {
                  switch (l.g) {
                    case 1:
                      if (
                        ((r = new Map()),
                        (i = (function (e, t, n) {
                          for (var r = g(t), i = r.next(); !i.done; i = r.next())
                            for (var a = (i = g(La(i.value))).next(); !a.done; a = i.next())
                              ((a = a.value),
                                n.has(a.keySystem) || n.set(a.keySystem, []),
                                n.get(a.keySystem).push(a));
                          if (1 == n.size && n.has("")) throw new Ke(2, 6, 6e3);
                          (r = e.h.preferredKeySystems).length ||
                            (1 == (i = ea(e.h.servers)).size && (r = Array.from(i.keys())));
                          var o = (i = g(r)).next();
                          for (a = {}; !o.done; a = { Ki: void 0 }, o = i.next()) {
                            a.Ki = o.value;
                            for (var s = (o = g(t)).next(); !s.done; s = o.next())
                              if (
                                (s = s.value.decodingInfos.find(
                                  (function (e) {
                                    return function (t) {
                                      return (
                                        t.supported &&
                                        null != t.keySystemAccess &&
                                        t.keySystemAccess.keySystem == e.Ki
                                      );
                                    };
                                  })(a),
                                ))
                              )
                                return s.keySystemAccess;
                          }
                          for (i = g([!0, !1]), a = i.next(); !a.done; a = i.next())
                            for (a = a.value, o = g(t), s = o.next(); !s.done; s = o.next())
                              for (var u = (s = g(s.value.decodingInfos)).next(); !u.done; u = s.next())
                                if ((u = u.value).supported && u.keySystemAccess) {
                                  var l = u.keySystemAccess.keySystem;
                                  if (!r.includes(l)) {
                                    var d = n.get(l);
                                    for (
                                      !d && e.h.keySystemsMapping[l] && (d = n.get(e.h.keySystemsMapping[l])),
                                        d = (l = g(d)).next();
                                      !d.done;
                                      d = l.next()
                                    )
                                      if (!!d.value.licenseServerUri == a) return u.keySystemAccess;
                                  }
                                }
                          return null;
                        })(t, n, r)),
                        !i)
                      ) {
                        if (!navigator.requestMediaKeySystemAccess) throw new Ke(2, 6, 6020);
                        throw new Ke(2, 6, 6001);
                      }
                      (Qi(t.j), w(l, 2), i.getConfiguration());
                      var d = (a = t.h.keySystemsMapping[i.keySystem] || i.keySystem),
                        c = r.get(a),
                        h = [],
                        p = [],
                        f = [],
                        v = [],
                        y = [],
                        b = new Set(),
                        T = new Set();
                      !(function (t, n, r, i, a, o, s, u) {
                        for (
                          var l = [], d = (t = g(t)).next(), c = {};
                          !d.done;
                          c = { La: void 0 }, d = t.next()
                        ) {
                          if (
                            ((c.La = d.value),
                            n.includes(c.La.encryptionScheme) || n.push(c.La.encryptionScheme),
                            "org.w3.clearkey" == c.La.keySystem &&
                            c.La.licenseServerUri.startsWith("data:application/json;base64,")
                              ? l.includes(c.La.licenseServerUri) || l.push(c.La.licenseServerUri)
                              : r.includes(c.La.licenseServerUri) || r.push(c.La.licenseServerUri),
                            a.includes(c.La.serverCertificateUri) || a.push(c.La.serverCertificateUri),
                            c.La.serverCertificate &&
                              (i.some(
                                (function (e) {
                                  return function (t) {
                                    return Pe(t, e.La.serverCertificate);
                                  };
                                })(c),
                              ) ||
                                i.push(c.La.serverCertificate)),
                            c.La.initData)
                          )
                            for (
                              var h = (d = g(c.La.initData)).next(), p = {};
                              !h.done;
                              p = { Pg: void 0 }, h = d.next()
                            )
                              ((p.Pg = h.value),
                                o.some(
                                  (function (e) {
                                    return function (t) {
                                      var n = e.Pg;
                                      return (
                                        !(!t.keyId || t.keyId != n.keyId) ||
                                        (t.initDataType == n.initDataType && Pe(t.initData, n.initData))
                                      );
                                    };
                                  })(p),
                                ) || o.push(p.Pg));
                          if (c.La.keyIds)
                            for (h = (d = g(c.La.keyIds)).next(); !h.done; h = d.next()) s.add(h.value);
                          if (c.La.keySystemUris && u)
                            for (d = (c = g(c.La.keySystemUris)).next(); !d.done; d = c.next())
                              u.add(d.value);
                        }
                        if (1 == l.length) r.push(l[0]);
                        else if (l.length > 0) {
                          for (n = [], i = (l = g(l)).next(); !i.done; i = l.next())
                            ((i = e.atob(i.value.split("data:application/json;base64,").pop())),
                              (i = JSON.parse(i)),
                              n.push.apply(n, m(i.keys)));
                          ((l = JSON.stringify({ keys: n })),
                            r.push("data:application/json;base64," + e.btoa(l)));
                        }
                      })(c, h, p, v, f, y, b, T);
                      var S = t.R ? "persistent-license" : "temporary";
                      for (
                        d = {
                          keySystem: d,
                          encryptionScheme: h[0],
                          licenseServerUri: p[0],
                          distinctiveIdentifierRequired: c[0].distinctiveIdentifierRequired,
                          persistentStateRequired: c[0].persistentStateRequired,
                          sessionType: c[0].sessionType || S,
                          audioRobustness: c[0].audioRobustness || "",
                          videoRobustness: c[0].videoRobustness || "",
                          serverCertificate: v[0],
                          serverCertificateUri: f[0],
                          initData: y,
                          keyIds: b,
                          mediaTypes: c[0].mediaTypes,
                        },
                          T.size > 0 && (d.keySystemUris = T),
                          T = (c = g(c)).next();
                        !T.done;
                        T = c.next()
                      )
                        ((T = T.value).distinctiveIdentifierRequired &&
                          (d.distinctiveIdentifierRequired = T.distinctiveIdentifierRequired),
                          T.persistentStateRequired &&
                            (d.persistentStateRequired = T.persistentStateRequired));
                      if (((t.g = d), !t.g.licenseServerUri)) throw new Ke(2, 6, 6012, t.g.keySystem);
                      return x(l, i.createMediaKeys(), 4);
                    case 4:
                      if (
                        ((o = l.h),
                        Qi(t.j),
                        (t.B = o),
                        "" == t.h.minHdcpVersion || !("getStatusForPolicy" in t.B))
                      ) {
                        l.A(5);
                        break;
                      }
                      return (
                        w(l, 6),
                        x(l, t.B.getStatusForPolicy({ minHdcpVersion: t.h.minHdcpVersion }), 8)
                      );
                    case 8:
                      if ("usable" != l.h) throw new Ke(2, 6, 6018);
                      (Qi(t.j), A(l, 5, 2));
                      break;
                    case 6:
                      if ((s = E(l, 2)) instanceof Ke) throw s;
                      throw new Ke(2, 6, 6019, s.message);
                    case 5:
                      return (
                        (t.T = !0),
                        t.G.Ea(t.h.updateExpirationTime),
                        x(
                          l,
                          (function (e) {
                            var t, n;
                            return D(function (r) {
                              switch (r.g) {
                                case 1:
                                  if (!e.B || !e.g) return r.return();
                                  if (
                                    !e.g.serverCertificateUri ||
                                    (e.g.serverCertificate && e.g.serverCertificate.length)
                                  ) {
                                    r.A(2);
                                    break;
                                  }
                                  return (
                                    (t = Gi([e.g.serverCertificateUri], e.h.retryParameters)),
                                    w(r, 3),
                                    x(r, e.F.vc.request(5, t, { isPreload: e.V() }).promise, 5)
                                  );
                                case 5:
                                  ((n = r.h), (e.g.serverCertificate = Ne(n.data)), A(r, 4));
                                  break;
                                case 3:
                                  throw new Ke(2, 6, 6017, E(r));
                                case 4:
                                  if (e.j.g) return r.return();
                                case 2:
                                  return e.g.serverCertificate && e.g.serverCertificate.length
                                    ? (w(r, 6), x(r, e.B.setServerCertificate(e.g.serverCertificate), 8))
                                    : r.return();
                                case 8:
                                  A(r, 0);
                                  break;
                                case 6:
                                  throw new Ke(2, 6, 6004, E(r).message);
                              }
                            });
                          })(t),
                          9,
                        )
                      );
                    case 9:
                      (Qi(t.j), A(l, 0));
                      break;
                    case 2:
                      if (((u = E(l)), Qi(t.j, u), (t.g = null), u instanceof Ke)) throw u;
                      throw new Ke(2, 6, 6002, u.message);
                  }
                });
              }
              function ka(e) {
                Na(e) && e.m.resolve();
              }
              function Ia(e, t) {
                new Mr(function () {
                  ((t.loaded = !0), ka(e));
                }).ka(ja);
              }
              function Ca(e, t, n) {
                var r, i, a, o, s, u, l;
                return D(function (d) {
                  switch (d.g) {
                    case 1:
                      try {
                        r = e.B.createSession("persistent-license");
                      } catch (c) {
                        return ((i = new Ke(2, 6, 6005, c.message)), e.u(i), d.return(Promise.reject(i)));
                      }
                      return (
                        e.o.D(r, "message", function (t) {
                          Ma(e) ? e.N.push(t) : Ra(e, t);
                        }),
                        e.o.D(r, "keystatuseschange", function (t) {
                          return _a(e, t);
                        }),
                        (a = {
                          initData: n.initData,
                          initDataType: n.initDataType,
                          loaded: !1,
                          Yg: 1 / 0,
                          Kb: null,
                          type: "persistent-license",
                        }),
                        e.i.set(r, a),
                        w(d, 2),
                        x(d, r.load(t), 4)
                      );
                    case 4:
                      return (
                        (o = d.h),
                        Qi(e.j),
                        o ||
                          (e.i.delete(r),
                          (s = e.h.persistentSessionOnlinePlayback ? 1 : 2),
                          e.u(new Ke(s, 6, 6013)),
                          (a.loaded = !0)),
                        Ia(e, a),
                        ka(e),
                        d.return(r)
                      );
                    case 2:
                      ((u = E(d)),
                        Qi(e.j, u),
                        e.i.delete(r),
                        (l = e.h.persistentSessionOnlinePlayback ? 1 : 2),
                        e.u(new Ke(l, 6, 6005, u.message)),
                        (a.loaded = !0),
                        ka(e));
                    case 3:
                      return d.return(Promise.resolve());
                  }
                });
              }
              function Ma(e) {
                return e.l
                  ? e.h.delayLicenseRequestUntilPlayed && e.l.paused && !e.oa
                  : !e.$ && e.h.delayLicenseRequestUntilPlayed;
              }
              function Ra(e, t) {
                var n, r, i, a, o, s, u, l, d, c, h, p, f, m, v, y;
                D(function (b) {
                  switch (b.g) {
                    case 1:
                      if (
                        ((n = t.target),
                        e.h.logLicenseExchange && it(t.message),
                        (r = e.i.get(n)),
                        (i = e.g.licenseServerUri),
                        (a = e.h.advanced[e.g.keySystem]),
                        "individualization-request" == t.messageType &&
                          a &&
                          a.individualizationServer &&
                          (i = a.individualizationServer),
                        ((o = Gi([i], e.h.retryParameters)).body = t.message),
                        (o.method = "POST"),
                        (o.licenseRequestType = t.messageType),
                        (o.sessionId = n.sessionId),
                        (o.drmInfo = e.g),
                        r && ((o.initData = r.initData), (o.initDataType = r.initDataType)),
                        a && a.headers)
                      )
                        for (s in a.headers) o.headers[s] = a.headers[s];
                      if ("org.w3.clearkey" === e.g.keySystem) {
                        var S = o,
                          k = e.g;
                        try {
                          var I = Je(S.body);
                          if (I) {
                            var C = JSON.parse(I);
                            C.type || ((C.type = k.sessionType), (S.body = Qe(JSON.stringify(C))));
                          }
                        } catch (M) {}
                      }
                      if (Ve(e.g.keySystem))
                        if ((S = $e(o.body, !0, !0)).includes("PlayReadyKeyMessage")) {
                          for (
                            I = (k = g((k = rn((S = $t(S, "PlayReadyKeyMessage")), "HttpHeader")))).next();
                            !I.done;
                            I = k.next()
                          )
                            ((I = rn((C = I.value), "name")[0]),
                              (C = rn(C, "value")[0]),
                              (o.headers[tn(I)] = tn(C)));
                          ((S = rn(S, "Challenge")[0]), (o.body = at(tn(S))));
                        } else o.headers["Content-Type"] = "text/xml; charset=utf-8";
                      return (
                        (u = Date.now()),
                        w(b, 2),
                        (d = e.F.vc.request(2, o, { isPreload: e.V() })),
                        e.X.push(d),
                        x(b, d.promise, 4)
                      );
                    case 4:
                      ((l = b.h), Q(e.X, d), A(b, 3));
                      break;
                    case 2:
                      return (
                        (c = E(b)),
                        e.j.g ||
                          ((h = {
                            sessionId: n.sessionId,
                            sessionType: r.type,
                            initData: r.initData,
                            initDataType: r.initDataType,
                          }),
                          (p = new Ke(2, 6, 6007, c, h)),
                          1 == e.i.size
                            ? (e.u(p), r && r.Kb && r.Kb.reject(p))
                            : (r && r.Kb && r.Kb.reject(p),
                              e.i.delete(n),
                              Na(e) && (e.m.resolve(), e.M.ka(0.1)))),
                        b.return()
                      );
                    case 3:
                      return e.j.g
                        ? b.return()
                        : ((e.J += (Date.now() - u) / 1e3),
                          e.h.logLicenseExchange && it(l.data),
                          w(b, 5),
                          x(b, n.update(l.data), 7));
                    case 7:
                      A(b, 6);
                      break;
                    case 5:
                      return (
                        (m = ((f = E(b)) && f.message) || String(f)),
                        (v = new Ke(2, 6, 6008, m)),
                        e.u(v),
                        r && r.Kb && r.Kb.reject(v),
                        b.return()
                      );
                    case 6:
                      if (e.j.g) return b.return();
                      ((y = new Li("drmsessionupdate")),
                        e.F.onEvent(y),
                        r && (r.Kb && r.Kb.resolve(), Ia(e, r)),
                        T(b));
                  }
                });
              }
              function _a(e, t) {
                t = t.target;
                var n = e.i.get(t),
                  r = !1;
                t.keyStatuses.forEach(function (t, i) {
                  if ("string" == typeof i) {
                    var a = i;
                    ((i = t), (t = a));
                  }
                  if (((a = oe()), Ve(e.g.keySystem) && 16 == i.byteLength && a.Ff())) {
                    var o = (a = Ue(i)).getUint32(0, !0),
                      s = a.getUint16(4, !0),
                      u = a.getUint16(6, !0);
                    (a.setUint32(0, o, !1), a.setUint16(4, s, !1), a.setUint16(6, u, !1));
                  }
                  ("status-pending" != t && (n.loaded = !0),
                    "expired" == t && (r = !0),
                    (i = st(i).slice(0, 32)),
                    e.ba.set(i, t));
                });
                var i = t.expiration - Date.now();
                ((i < 0 || (r && i < 1e3)) && n && !n.Kb && (e.i.delete(t), Da(t)),
                  Na(e) && (e.m.resolve(), e.M.ka(Fa)));
              }
              function Da(e) {
                return D(function (t) {
                  return 1 == t.g
                    ? (w(t, 2), x(t, Pr(Ba, Promise.all([e.close().catch(function () {}), e.closed])), 4))
                    : 2 != t.g
                      ? A(t, 0)
                      : (E(t), void T(t));
                });
              }
              function Pa(e) {
                var t;
                return D(function (n) {
                  return (
                    (t = Array.from(e.i.entries())),
                    e.i.clear(),
                    x(
                      n,
                      Promise.all(
                        t.map(function (t) {
                          var n = (t = g(t)).next().value,
                            r = t.next().value;
                          return D(function (t) {
                            return 1 == t.g
                              ? (w(t, 2),
                                e.$ ||
                                e.C.has(n.sessionId) ||
                                "persistent-license" !== r.type ||
                                e.h.persistentSessionOnlinePlayback
                                  ? x(t, Da(n), 5)
                                  : x(t, n.remove(), 5))
                              : 2 != t.g
                                ? A(t, 0)
                                : (E(t), void T(t));
                          });
                        }),
                      ),
                      0,
                    )
                  );
                });
              }
              function La(e) {
                return (e.video ? e.video.drmInfos : []).concat(e.audio ? e.audio.drmInfos : []);
              }
              function Na(e) {
                return (function (e, t) {
                  for (var n = (e = g(e)).next(); !n.done; n = e.next()) if (!t(n.value)) return !1;
                  return !0;
                })((e = e.i.values()), function (e) {
                  return e.loaded;
                });
              }
              function Oa(t, n, r, i) {
                var a = t.keySystem;
                !a ||
                  ("org.w3.clearkey" == a && t.licenseServerUri) ||
                  (n.size && n.get(a) && ((n = n.get(a)), (t.licenseServerUri = n)),
                  t.keyIds || (t.keyIds = new Set()),
                  (r = r.get(a)) &&
                    (t.distinctiveIdentifierRequired ||
                      (t.distinctiveIdentifierRequired = r.distinctiveIdentifierRequired),
                    t.persistentStateRequired || (t.persistentStateRequired = r.persistentStateRequired),
                    t.serverCertificate || (t.serverCertificate = r.serverCertificate),
                    r.sessionType && (t.sessionType = r.sessionType),
                    t.serverCertificateUri || (t.serverCertificateUri = r.serverCertificateUri)),
                  i[a] && (t.keySystem = i[a]),
                  e.cast &&
                    e.cast.__platform__ &&
                    "com.microsoft.playready" == a &&
                    (t.keySystem = "com.chromecast.playready"));
              }
              function Ua(e, t) {
                if (0 != (e = ea(e)).size) {
                  e = ct(e);
                  for (var n = (t = g(t)).next(); !n.done; n = t.next())
                    ((n = n.value).video && (n.video.drmInfos = [e]), n.audio && (n.audio.drmInfos = [e]));
                }
              }
              (((i = ya.prototype).destroy = function () {
                return this.j.destroy();
              }),
                (i.configure = function (e, t) {
                  ((this.h = e),
                    t && (this.V = t),
                    this.G && this.T && this.g && this.G.Ea(this.h.updateExpirationTime));
                }),
                (i.Vb = function (e) {
                  var t,
                    n,
                    r = this;
                  return D(function (i) {
                    if (1 == i.g)
                      return r.l === e
                        ? i.return()
                        : r.B
                          ? ((r.l = e),
                            r.h.delayLicenseRequestUntilPlayed &&
                              r.o.Aa(r.l, "play", function () {
                                for (var e = g(r.N), t = e.next(); !t.done; t = e.next()) Ra(r, t.value);
                                ((r.oa = !0), (r.N = []));
                              }),
                            r.l.remote
                              ? (r.o.D(r.l.remote, "connect", function () {
                                  return Pa(r);
                                }),
                                r.o.D(r.l.remote, "connecting", function () {
                                  return Pa(r);
                                }),
                                r.o.D(r.l.remote, "disconnect", function () {
                                  return Pa(r);
                                }))
                              : "webkitCurrentPlaybackTargetIsWireless" in r.l &&
                                r.o.D(r.l, "webkitcurrentplaybacktargetiswirelesschanged", function () {
                                  return Pa(r);
                                }),
                            (r.H =
                              (r.g &&
                                r.g.initData.find(function (e) {
                                  return e.initData.length > 0;
                                })) ||
                              null),
                            (t = r.g.keySystem),
                            (n = oe().Vg(t)) || (!r.H && "com.apple.fps" === r.g.keySystem && !r.C.size)
                              ? i.A(2)
                              : x(i, Ta(r), 2))
                          : (r.o.Aa(e, "encrypted", function () {
                              r.u(new Ke(2, 6, 6010));
                            }),
                            i.return());
                    (wa(r).catch(function () {}),
                      (!n && (r.H || r.C.size || r.h.parseInbandPsshEnabled)) ||
                        r.o.D(r.l, "encrypted", function (e) {
                          return (function (e, t) {
                            return D(function (n) {
                              if (1 == n.g) return x(n, Ta(e), 2);
                              (Sa(e, t.initDataType, Ne(t.initData)), T(n));
                            });
                          })(r, e);
                        }),
                      T(i));
                  });
                }),
                (i.Kg = function () {
                  var e = this,
                    t = this.i.keys();
                  return (
                    (t = Zi(t, function (t) {
                      var n = e.i.get(t);
                      return {
                        sessionId: t.sessionId,
                        sessionType: n.type,
                        initData: n.initData,
                        initDataType: n.initDataType,
                      };
                    })),
                    Array.from(t)
                  );
                }),
                (i.Zd = function () {
                  for (var e = 1 / 0, t = this.i.keys(), n = (t = g(t)).next(); !n.done; n = t.next())
                    ((n = n.value), isNaN(n.expiration) || (e = Math.min(e, n.expiration)));
                  return e;
                }),
                (i.$e = function () {
                  return ta(this.ma);
                }));
              var Ba = 1,
                ja = 5,
                Fa = 0.5;
              function Va() {
                ((this.g = za), (this.j = new Map().set(za, 2).set(Ga, 1)), (this.i = 0), (this.h = -1));
              }
              function Ha(e, t) {
                var n = e.g !== t;
                return ((e.g = t), n && t === za && (e.i = Date.now()), n);
              }
              var Ga = 0,
                za = 1;
              /*
      		 @license
      		 Shaka Player
      		 Copyright 2023 Google LLC
      		 SPDX-License-Identifier: Apache-2.0
      		*/ function Xa(e, t, n) {
                ((this.h = e), (this.i = t), (this.g = n));
              }
              function Wa(e, t) {
                return D(function (n) {
                  if (1 == n.g)
                    return x(n, Kr(e.g, t, e.h.drm.preferredKeySystems, e.h.drm.keySystemsMapping), 2);
                  if (
                    (e.h.streaming.dontChooseCodecs ||
                      Xr(
                        t,
                        e.h.preferredVideoCodecs,
                        e.h.preferredAudioCodecs,
                        e.h.preferredDecodingAttributes,
                        e.h.preferredTextFormats,
                      ),
                    !t.variants.some(si))
                  )
                    throw new Ke(2, 4, 4032);
                  return n.return(qa(e, t));
                });
              }
              function Ka(e, t) {
                var n = e.h.restrictions;
                e = e.i;
                for (var r = !1, i = (t = g(t.variants)).next(); !i.done; i = t.next()) {
                  var a = (i = i.value).allowedByApplication;
                  ((i.allowedByApplication = Wr(i, n, e)), a != i.allowedByApplication && (r = !0));
                }
                return r;
              }
              function qa(e, t) {
                var n = Ka(e, t);
                if (t) {
                  var r = e.g ? e.g.g : null;
                  if (r && e.g.B) {
                    for (var i = new Set(), a = g(t.variants), o = a.next(); !o.done; o = a.next())
                      ((o = o.value).audio && i.add(o.audio), o.video && i.add(o.video));
                    for (a = (i = g(i)).next(); !a.done; a = i.next()) Ya(e, r.keySystem, a.value);
                  }
                  $a(e, t);
                }
                return n;
              }
              function Ya(e, t, n) {
                for (var r = (n = g(n.drmInfos)).next(); !r.done; r = n.next())
                  if ((r = r.value).keySystem == t) {
                    for (var i = g(r.initData || []), a = i.next(); !a.done; a = i.next())
                      ((a = a.value), Sa(e.g, a.initDataType, a.initData));
                    (i = e.g).g && i.g.mediaTypes !== r.mediaTypes && (i.g.mediaTypes = r.mediaTypes);
                  }
              }
              function $a(e, t) {
                function n(e) {
                  if (e && !s.has(e) && (s.add(e), e.keyIds.size))
                    for (var t = (e = g(e.keyIds)).next(); !t.done; t = e.next()) {
                      t = t.value;
                      var n = r[i ? "00" : t];
                      n ? Ja.includes(n) && o.add(n) : a.add(t);
                    }
                }
                var r = e.g ? e.g.$e() : {},
                  i = (e = Object.keys(r)).length && "00" == e[0];
                e = !1;
                for (
                  var a = new Set(), o = new Set(), s = new WeakSet(), u = (t = g(t.variants)).next();
                  !u.done;
                  u = t.next()
                ) {
                  if ((u = u.value).allowedByApplication) {
                    if (u.allowedByKeySystem) return;
                  } else e = !0;
                  (n(u.audio), n(u.video));
                }
                throw new Ke(
                  2,
                  4,
                  4012,
                  (e = {
                    hasAppRestrictions: e,
                    missingKeys: Array.from(a),
                    restrictedKeyStatuses: Array.from(o),
                  }),
                );
              }
              var Ja = ["output-restricted", "internal-error"];
              function Qa(t) {
                if (eo.has(t)) return eo.get(t);
                var n = e.ManagedMediaSource || e.MediaSource;
                return !!n && ((n = n.isTypeSupported(t)), eo.set(t, n), n);
              }
              function Za() {
                var t = e.ManagedMediaSource || e.MediaSource;
                return !!(
                  t &&
                  t.prototype &&
                  t.prototype.setLiveSeekableRange &&
                  t.prototype.clearLiveSeekableRange
                );
              }
              V("shaka.config.CodecSwitchingStrategy", { RELOAD: "reload", SMOOTH: "smooth" });
              var eo = new Map();
              function to(e, t) {
                var n = null,
                  r = null,
                  i = null,
                  a = null,
                  o = e.U();
                return (
                  1 & t && (i = e.Ed()),
                  2 & t && (a = e.U()),
                  8 & t && (n = e.U()),
                  16 & t && (r = e.U()),
                  { trackId: o, Wd: n, Xd: r, rj: i, Ri: a }
                );
              }
              function no(e, t) {
                return 1 == t
                  ? { baseMediaDecodeTime: 4294967296 * (t = e.U()) + (e = e.U()) }
                  : { baseMediaDecodeTime: e.U() };
              }
              function ro(e, t) {
                return (
                  1 == t ? (e.skip(8), e.skip(8)) : (e.skip(4), e.skip(4)),
                  (t = e.U()),
                  e.skip(4),
                  (e = e.Ca()),
                  {
                    timescale: t,
                    language:
                      String.fromCharCode(96 + (e >> 10)) +
                      String.fromCharCode(96 + ((960 & e) >> 5)) +
                      String.fromCharCode(96 + (31 & e)),
                  }
                );
              }
              function io(e, t, n) {
                var r = e.U(),
                  i = [],
                  a = null;
                (1 & n && (a = e.dh()), 4 & n && e.skip(4));
                for (var o = 0; o < r; o++) {
                  var s = { nh: null, sampleSize: null, Gf: null };
                  (256 & n && (s.nh = e.U()),
                    512 & n && (s.sampleSize = e.U()),
                    1024 & n && e.skip(4),
                    2048 & n && (s.Gf = 0 == t ? e.U() : e.dh()),
                    i.push(s));
                }
                return { Hm: r, mh: i, qg: a };
              }
              function ao(e) {
                (e.skip(6), e.skip(2), e.skip(8));
                var t = e.Ca();
                return (
                  e.skip(2),
                  e.skip(2),
                  e.skip(2),
                  { channelCount: t, sampleRate: (e = e.Ca() + e.Ca() / 65536) }
                );
              }
              function oo(e) {
                return { codec: ha((e = e.U())) };
              }
              function so(e, t) {
                return (
                  (t = void 0 !== t && t),
                  (e = e.toString(16).toUpperCase()),
                  t ? e : ("0" + e).slice(-2)
                );
              }
              function uo(e) {
                return (e < 10 ? "0" : "") + e;
              }
              function lo(e) {
                this.g = e;
              }
              function co(e) {
                for (var t = [], n = g(e.g), r = n.next(); !r.done; r = n.next()) {
                  var i = t,
                    a = i.push,
                    o = r.value;
                  r = To;
                  var s = o.id + 1,
                    u = o.stream.width || 0,
                    l = o.stream.height || 0;
                  "audio" == o.type && (l = u = 0);
                  var d = o.duration * o.timescale,
                    c = Math.floor(d / (wo + 1));
                  switch (
                    ((d = Math.floor(d % (wo + 1))),
                    (s = To(
                      "tkhd",
                      (s = new Uint8Array(
                        [1, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(
                          m(yo(s, 4)),
                          [0, 0, 0, 0],
                          m(yo(c, 4)),
                          m(yo(d, 4)),
                          [
                            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                            0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0,
                          ],
                          m(yo(u, 2)),
                          [0, 0],
                          m(yo(l, 2)),
                          [0, 0],
                        ),
                      )),
                    )),
                    (u = To),
                    (c = o.duration * o.timescale),
                    (l = Math.floor(c / (wo + 1))),
                    (c = Math.floor(c % (wo + 1))),
                    (d =
                      (((d = o.stream.language).charCodeAt(0) - 96) << 10) |
                      ((d.charCodeAt(1) - 96) << 5) |
                      (d.charCodeAt(2) - 96)),
                    (l = To(
                      "mdhd",
                      (l = new Uint8Array(
                        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(
                          m(yo(o.timescale, 4)),
                          m(yo(l, 4)),
                          m(yo(c, 4)),
                          m(yo(d, 2)),
                          [0, 0],
                        ),
                      )),
                    )),
                    (c = o),
                    (d = new Uint8Array([])),
                    c.type)
                  ) {
                    case "video":
                      d = Ao.value();
                      break;
                    case "audio":
                      d = Eo.value();
                  }
                  c = To("hdlr", d);
                  e: {
                    switch (o.type) {
                      case "video":
                        o = To("minf", To("vmhd", Ro.value()), Lo.value(), ho(o));
                        break e;
                      case "audio":
                        o = To("minf", To("smhd", _o.value()), Lo.value(), ho(o));
                        break e;
                    }
                    o = new Uint8Array([]);
                  }
                  ((r = r("trak", s, (o = u("mdia", l, c, o)))), a.call(i, r));
                }
                for (
                  t = ut.apply(nt, m(t)),
                    n = To,
                    r = (a = e.g[0]).duration * a.timescale,
                    i = Math.floor(r / (wo + 1)),
                    r = Math.floor(r % (wo + 1)),
                    i = To(
                      "mvhd",
                      (i = new Uint8Array(
                        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(
                          m(yo(a.timescale, 4)),
                          m(yo(i, 4)),
                          m(yo(r, 4)),
                          [
                            0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                            0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0,
                            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255,
                            255,
                          ],
                        ),
                      )),
                    ),
                    r = [],
                    u = (e = g(e.g)).next();
                  !u.done;
                  u = e.next()
                )
                  ((s = (o = r).push),
                    (u = To(
                      "trex",
                      (u = new Uint8Array(
                        [0, 0, 0, 0].concat(
                          m(yo(u.value.id + 1, 4)),
                          [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                        ),
                      )),
                    )),
                    s.call(o, u));
                if (((e = To("mvex", (e = ut.apply(nt, m(r))))), (r = []), a.encrypted)) {
                  for (o = (a = g(a.stream.drmInfos)).next(); !o.done; o = a.next())
                    if ((o = o.value).initData)
                      for (s = (o = g(o.initData)).next(); !s.done; s = o.next()) r.push(s.value.initData);
                  a = ut.apply(nt, m(r));
                } else a = new Uint8Array([]);
                return (
                  (e = n("moov", i, t, e, a)),
                  (t = Po.value()),
                  (n = new Uint8Array(t.byteLength + e.byteLength)).set(t),
                  n.set(e, t.byteLength),
                  n
                );
              }
              function ho(e) {
                var t = To,
                  n = "aac";
                e.codecs.includes("mp3")
                  ? (n = "mp3")
                  : e.codecs.includes("ac-3")
                    ? (n = oe().se() ? "ec-3" : "ac-3")
                    : e.codecs.includes("ec-3")
                      ? (n = "ec-3")
                      : e.codecs.includes("opus") && (n = "opus");
                var r = new Uint8Array([]);
                switch (e.type) {
                  case "video":
                    if (e.codecs.includes("avc1")) {
                      if (((n = e.stream.width || 0), (r = e.stream.height || 0), e.Sa.byteLength > 0))
                        var i = To("avcC", e.Sa);
                      else {
                        i = To;
                        for (var a = 7, o = [], s = [], u = 0, l = 0, d = 0, c = 0; c < e.Bb.length; c++) {
                          var h = bo(e.Bb[c]);
                          switch (31 & h[0]) {
                            case 7:
                              (o.push(h), (a += h.length + 2));
                              break;
                            case 8:
                              (s.push(h), (a += h.length + 2));
                          }
                        }
                        for (
                          o.length > 0 && ((u = o[0][1]), (d = o[0][2]), (l = o[0][3])),
                            c = 0,
                            (a = new Uint8Array(a))[c++] = 1,
                            a[c++] = u,
                            a[c++] = d,
                            a[c++] = l,
                            a[c++] = 255,
                            a[c++] = 224 | o.length,
                            u = 0;
                          u < o.length;
                          u++
                        )
                          ((a[c++] = (65280 & o[u].length) >> 8),
                            (a[c++] = 255 & o[u].length),
                            a.set(o[u], c),
                            (c += o[u].length));
                        for (a[c++] = s.length, o = 0; o < s.length; o++)
                          ((a[c++] = (65280 & s[o].length) >> 8),
                            (a[c++] = 255 & s[o].length),
                            a.set(s[o], c),
                            (c += s[o].length));
                        i = i("avcC", a);
                      }
                      ((n = new Uint8Array(
                        [0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0].concat(
                          m(yo(n, 2)),
                          m(yo(r, 2)),
                          [
                            0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 19, 118, 105, 100, 101, 111, 106, 115,
                            45, 99, 111, 110, 116, 114, 105, 98, 45, 104, 108, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                            0, 0, 0, 0, 24, 17, 17,
                          ],
                        ),
                      )),
                        (r = "avc1"),
                        (s = po(e)),
                        (o = new Uint8Array([])),
                        e.encrypted && ((o = go(e.stream, e.codecs)), (r = "encv")),
                        (r = To(r, n, i, s, o)));
                    } else
                      e.codecs.includes("hvc1") &&
                        ((r = e.stream.width || 0),
                        (i = e.stream.height || 0),
                        (n = new Uint8Array([])),
                        e.Sa.byteLength > 0 && (n = To("hvcC", e.Sa)),
                        (r = new Uint8Array(
                          [0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0].concat(
                            m(yo(r, 2)),
                            m(yo(i, 2)),
                            [
                              0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 19, 118, 105, 100, 101, 111, 106,
                              115, 45, 99, 111, 110, 116, 114, 105, 98, 45, 104, 108, 115, 0, 0, 0, 0, 0, 0,
                              0, 0, 0, 0, 0, 0, 0, 24, 17, 17,
                            ],
                          ),
                        )),
                        (i = "hvc1"),
                        (s = po(e)),
                        (o = new Uint8Array([])),
                        e.encrypted && ((o = go(e.stream, e.codecs)), (i = "encv")),
                        (r = To(i, r, n, s, o)));
                    break;
                  case "audio":
                    ("mp3" == n
                      ? (e = To(".mp3", fo(e)))
                      : "ac-3" == n
                        ? ((n = To("dac3", e.Ga)),
                          (r = "ac-3"),
                          (i = new Uint8Array([])),
                          e.encrypted && ((i = go(e.stream, e.codecs)), (r = "enca")),
                          (e = To(r, fo(e), n, i)))
                        : "ec-3" == n
                          ? ((n = To("dec3", e.Ga)),
                            (r = "ec-3"),
                            (i = new Uint8Array([])),
                            e.encrypted && ((i = go(e.stream, e.codecs)), (r = "enca")),
                            (e = To(r, fo(e), n, i)))
                          : "opus" == n
                            ? ((n = To("dOps", e.Ga)),
                              (r = "Opus"),
                              (i = new Uint8Array([])),
                              e.encrypted && ((i = go(e.stream, e.codecs)), (r = "enca")),
                              (e = To(r, fo(e), n, i)))
                            : (e.Ga.byteLength > 0
                                ? (n = To("esds", e.Ga))
                                : ((n = To),
                                  (r = e.id + 1),
                                  (i = e.stream.channelsCount || 2),
                                  (o = e.stream.audioSamplingRate || 44100),
                                  (u = ht("audio", e.codecs.split(","))),
                                  (s = (l = {
                                    96e3: 0,
                                    88200: 1,
                                    64e3: 2,
                                    48e3: 3,
                                    44100: 4,
                                    32e3: 5,
                                    24e3: 6,
                                    22050: 7,
                                    16e3: 8,
                                    12e3: 9,
                                    11025: 10,
                                    8e3: 11,
                                    7350: 12,
                                  })[o]),
                                  ("mp4a.40.5" !== u && "mp4a.40.29" !== u) || (s = l[2 * o]),
                                  (o = parseInt(u.split(".").pop(), 10)),
                                  (n = n(
                                    "esds",
                                    (r = new Uint8Array(
                                      [0, 0, 0, 0, 3, 25].concat(m(yo(r, 2)), [
                                        0,
                                        4,
                                        17,
                                        64,
                                        21,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        5,
                                        2,
                                        (o << 3) | (s >>> 1),
                                        (s << 7) | (i << 3),
                                        6,
                                        1,
                                        2,
                                      ]),
                                    )),
                                  ))),
                              (r = "mp4a"),
                              (i = new Uint8Array([])),
                              e.encrypted && ((i = go(e.stream, e.codecs)), (r = "enca")),
                              (e = To(r, fo(e), n, i))),
                      (r = e));
                }
                return t(
                  "stbl",
                  (e = To("stsd", Do.value(), r)),
                  To("stts", ko.value()),
                  To("stsc", Io.value()),
                  To("stsz", Mo.value()),
                  To("stco", Co.value()),
                );
              }
              function po(e) {
                if (!e.Za && !e.$a) return new Uint8Array([]);
                var t = e.$a;
                return To("pasp", (e = new Uint8Array([].concat(m(yo(e.Za, 4)), m(yo(t, 4))))));
              }
              function fo(e) {
                return new Uint8Array(
                  [
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    e.stream.channelsCount || 2,
                    0,
                    16,
                    0,
                    0,
                    0,
                    0,
                  ].concat(m(yo(e.stream.audioSamplingRate || 44100, 2)), [0, 0]),
                );
              }
              function go(e, t) {
                var n = To;
                t = To("frma", (t = new Uint8Array([].concat(m(yo(xo(t.split(".")[0]), 4))))));
                var r = "cenc",
                  i = e.drmInfos[0];
                (i && i.encryptionScheme && (r = i.encryptionScheme),
                  (r = To("schm", (r = new Uint8Array([0, 0, 0, 0].concat(m(yo(xo(r), 4)), [0, 1, 0, 0]))))),
                  (i = To));
                for (
                  var a = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]),
                    o = (e = g(e.drmInfos)).next();
                  !o.done;
                  o = e.next()
                )
                  if ((o = o.value) && o.keyIds && o.keyIds.size)
                    for (var s = (o = g(o.keyIds)).next(); !s.done; s = o.next()) a = bo(s.value);
                return n(
                  "sinf",
                  t,
                  r,
                  i("schi", (a = To("tenc", (e = new Uint8Array([0, 0, 0, 0, 0, 0, 1, 8])), a))),
                );
              }
              function mo(e) {
                for (var t = [], n = (e = g(e.g)).next(); !n.done; n = e.next()) {
                  n = n.value;
                  var r,
                    i = t.push,
                    a = i.apply,
                    o = To,
                    s = new Uint8Array([0, 0, 0, 0].concat(m(yo(n.data ? n.data.sequenceNumber : 0, 4))));
                  s = To("mfhd", s);
                  var u = n.data ? n.data.zb : [],
                    l = new Uint8Array(4 + u.length);
                  for (r = 0; r < u.length; r++) {
                    var d = u[r].flags;
                    l[r + 4] = (d.ib << 4) | (d.mb << 2) | d.jb;
                  }
                  var c = (u = To("sdtp", l)).length + 32 + 20 + 8 + 16 + 8 + 8;
                  ((l = To),
                    (r = To(
                      "tfhd",
                      (r = new Uint8Array(
                        [0, 0, 0, 58].concat(
                          m(yo(n.id + 1, 4)),
                          [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                        ),
                      )),
                    )),
                    (d = n.data ? n.data.baseMediaDecodeTime : 0));
                  var h = Math.floor(d % (wo + 1));
                  d = To(
                    "tfdt",
                    (d = new Uint8Array(
                      [1, 0, 0, 0].concat(m(yo(Math.floor(d / (wo + 1)), 4)), m(yo(h, 4))),
                    )),
                  );
                  var p = c,
                    f = 12 + 16 * (h = (c = n.data ? n.data.zb : []).length),
                    v = new Uint8Array(f);
                  for (
                    p += 8 + f,
                      v.set(["video" === n.type ? 1 : 0, 0, 15, 1].concat(m(yo(h, 4)), m(yo(p, 4))), 0),
                      p = 0;
                    p < h;
                    p++
                  ) {
                    var y = c[p];
                    f = yo(y.duration, 4);
                    var b = yo(y.size, 4),
                      x = y.flags;
                    ((y = yo(y.sb, 4)),
                      v.set(
                        [].concat(
                          m(f),
                          m(b),
                          [(x.xb << 2) | x.ib, (x.mb << 6) | (x.jb << 4) | x.yb, 61440 & x.hb, 15 & x.hb],
                          m(y),
                        ),
                        12 + 16 * p,
                      ));
                  }
                  ((o = o("moof", s, (u = l("traf", r, d, (c = To("trun", v)), u)))),
                    a.call(i, t, [o, vo(n)]));
                }
                return ut.apply(nt, m(t));
              }
              function vo(e) {
                return (
                  (e = (e.data ? e.data.zb : []).map(function (e) {
                    return e.data;
                  })),
                  To("mdat", (e = ut.apply(nt, m(e))))
                );
              }
              function yo(e, t) {
                var n = [];
                for (--t; t >= 0; t--) n.push((e >> (8 * t)) & 255);
                return n;
              }
              function bo(e) {
                for (var t = new Uint8Array(e.length / 2), n = 0; n < e.length / 2; n += 1)
                  t[n] = parseInt(String(e[2 * n] + e[2 * n + 1]), 16);
                return t;
              }
              function xo(e) {
                for (var t = 0, n = 0; n < e.length; n += 1) t |= e.charCodeAt(n) << (8 * (e.length - n - 1));
                return t;
              }
              function To(e) {
                var t = P.apply(1, arguments),
                  n = So.get(e);
                n ||
                  ((n = [e.charCodeAt(0), e.charCodeAt(1), e.charCodeAt(2), e.charCodeAt(3)]), So.set(e, n));
                for (var r = 8, i = t.length - 1; i >= 0; i--) r += t[i].byteLength;
                for (
                  (i = new Uint8Array(r))[0] = (r >> 24) & 255,
                    i[1] = (r >> 16) & 255,
                    i[2] = (r >> 8) & 255,
                    i[3] = 255 & r,
                    i.set(n, 4),
                    n = 0,
                    r = 8;
                  n < t.length;
                  n++
                )
                  (i.set(t[n], r), (r += t[n].byteLength));
                return i;
              }
              var wo = 4294967295,
                So = new Map(),
                Ao = new ae(function () {
                  return new Uint8Array([
                    0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 86, 105,
                    100, 101, 111, 72, 97, 110, 100, 108, 101, 114, 0,
                  ]);
                }),
                Eo = new ae(function () {
                  return new Uint8Array([
                    0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111,
                    117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0,
                  ]);
                }),
                ko = new ae(function () {
                  return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
                }),
                Io = new ae(function () {
                  return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
                }),
                Co = new ae(function () {
                  return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
                }),
                Mo = new ae(function () {
                  return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);
                }),
                Ro = new ae(function () {
                  return new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]);
                }),
                _o = new ae(function () {
                  return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
                }),
                Do = new ae(function () {
                  return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]);
                }),
                Po = new ae(function () {
                  var e = new Uint8Array([105, 115, 111, 109]),
                    t = new Uint8Array([97, 118, 99, 49]);
                  return To("ftyp", e, new Uint8Array([0, 0, 0, 1]), e, t);
                }),
                Lo = new ae(function () {
                  var e = new Uint8Array([
                    0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1,
                  ]);
                  return ((e = To("dref", e)), To("dinf", e));
                });
              function No(e) {
                function t(e) {
                  (o.push(e), oa(e));
                }
                var n,
                  r,
                  i,
                  a,
                  o = [];
                if (
                  (new aa()
                    .box("moof", t)
                    .box("traf", t)
                    .S("tfhd", function (e) {
                      ((n = e), (i = to(e.reader, e.flags)));
                    })
                    .S("trun", function (e) {
                      ((r = e), (a = io(e.reader, e.version, e.flags)));
                    })
                    .parse(e),
                  i && 2 !== i.Ri)
                ) {
                  var s = n.start + pa(n) + 4 + (null !== i.rj ? 8 : 0),
                    u = Ue(e);
                  if (null !== i.Ri) u.setUint32(s, 2);
                  else {
                    Uo(e, n.start, n.size + 4);
                    var l = u.getUint32(n.start + 8);
                    (u.setUint32(n.start + 8, 2 | l),
                      a && null !== a.qg && u.setInt32(r.start + pa(r) + 4, a.qg + 4),
                      (l = e.subarray(0, s)),
                      (u = e.subarray(s)),
                      (e = new Uint8Array(e.byteLength + 4)).set(l),
                      (l = []));
                    for (var d = 3; d >= 0; d--) l.push((2 >> (8 * d)) & 255);
                    for (
                      e.set(new Uint8Array(l), s), e.set(u, s + 4), u = (s = g(o)).next();
                      !u.done;
                      u = s.next()
                    )
                      Uo(e, (u = u.value).start, u.size + 4);
                  }
                }
                return e;
              }
              function Oo(e, t, n, r, i, a) {
                var o = go(e, r.name),
                  s = t.subarray(r.start, r.start + r.size);
                for (
                  (e = new Uint8Array(r.size + o.byteLength)).set(s, 0),
                    Ue(e).setUint32(4, a),
                    e.set(o, r.size),
                    Uo(e, 0, e.byteLength),
                    a = new Uint8Array(t.byteLength + e.byteLength),
                    r = oe().jf() ? r.start : r.start + r.size,
                    o = t.subarray(r),
                    a.set(t.subarray(0, r)),
                    a.set(e, r),
                    a.set(o, r + e.byteLength),
                    i = (t = g(i)).next();
                  !i.done;
                  i = t.next()
                )
                  Uo(a, (i = i.value).start, i.size + e.byteLength);
                return ((e = Ue(a, n.start)), (n = pa(n)), (t = e.getUint32(n)), e.setUint32(n, t + 1), a);
              }
              function Uo(e, t, n) {
                0 != (t = (e = Ue(e, t)).getUint32(0)) &&
                  (1 == t ? (e.setUint32(8, n >> 32), e.setUint32(12, 4294967295 & n)) : e.setUint32(0, n));
              }
              function Bo(e, t, n, r, i, a, o, s) {
                ((this.P = e),
                  (this.startByte = t),
                  (this.endByte = n),
                  (this.xd = void 0 === r ? null : r),
                  (this.timescale = void 0 === i ? null : i),
                  (this.h = void 0 === a ? null : a),
                  (this.aesKey = void 0 === o ? null : o),
                  (this.g = this.mimeType = this.codecs = null),
                  (this.encrypted = void 0 !== s && s));
              }
              function jo(e, t) {
                return (
                  e === t ||
                  (e && t
                    ? e.Jc() == t.Jc() &&
                      e.Hc() == t.Hc() &&
                      ee(e.P().sort(), t.P().sort()) &&
                      Pe(e.$b(), t.$b())
                    : e == t)
                );
              }
              function Fo(e, t, n, r, i, a, o, s, u, l, d, c, h, p, f, m) {
                for (
                  l = void 0 === l ? [] : l,
                    p = void 0 === p ? Go : p,
                    this.startTime = e,
                    this.j = this.endTime = t,
                    this.C = n,
                    this.startByte = r,
                    this.endByte = i,
                    this.ea = a,
                    this.timestampOffset = o,
                    this.appendWindowStart = s,
                    this.appendWindowEnd = u,
                    this.g = l,
                    this.tilesLayout = void 0 === d ? "" : d,
                    this.B = void 0 === c ? null : c,
                    this.h = void 0 === h ? null : h,
                    this.status = p,
                    this.preload = !1,
                    this.l = !0,
                    this.o = !1,
                    this.aesKey = void 0 === f ? null : f,
                    this.thumbnailSprite = null,
                    this.i = -1,
                    this.m = void 0 !== m && m,
                    this.je = this.Xc = !1,
                    t = (e = g(this.g)).next();
                  !t.done;
                  t = e.next()
                )
                  t.value.Ai();
                (this.m && this.g.length && this.g[this.g.length - 1].zi(),
                  (this.u = this.bandwidth = this.mimeType = this.codecs = null),
                  (this.F = !1));
              }
              function Vo(e) {
                if (e.endByte) return e.endByte + 1 - e.startByte;
                if (e.bandwidth) {
                  var t = e.bandwidth * (e.endTime - e.startTime);
                  if (!isNaN(t) && t > 0) return t;
                }
                if (e.g.length > 0 && e.m)
                  for (e = (e = g(e.g)).next(); !e.done; e = e.next()) {
                    Vo(e.value);
                    break;
                  }
                return null;
              }
              function Ho(e, t) {
                e.ea = t;
                for (var n = (e = g(e.g)).next(); !n.done; n = e.next()) Ho(n.value, t);
              }
              ((Bo.prototype.Jc = function () {
                return this.startByte;
              }),
                (Bo.prototype.Hc = function () {
                  return this.endByte;
                }),
                (Bo.prototype.ue = function (e) {
                  this.h = e;
                }),
                (Bo.prototype.$b = function () {
                  return this.h;
                }),
                V("shaka.media.InitSegmentReference", Bo),
                (Bo.prototype.getEndByte = Bo.prototype.Hc),
                (Bo.prototype.getStartByte = Bo.prototype.Jc),
                ((i = Fo.prototype).P = function () {
                  return this.C();
                }),
                (i.getStartTime = function () {
                  return this.startTime;
                }),
                (i.Kj = function () {
                  return this.endTime;
                }),
                (i.Jc = function () {
                  return this.startByte;
                }),
                (i.Hc = function () {
                  return this.endByte;
                }),
                (i.ek = function () {
                  return this.tilesLayout;
                }),
                (i.dk = function () {
                  return this.B;
                }),
                (i.Kc = function () {
                  return this.status;
                }),
                (i.Ak = function () {
                  this.status = zo;
                }),
                (i.Ug = function () {
                  this.preload = !0;
                }),
                (i.isPreload = function () {
                  return this.preload;
                }),
                (i.wd = function () {
                  this.l = !1;
                }),
                (i.qk = function () {
                  return this.l;
                }),
                (i.Ai = function () {
                  this.Xc = !0;
                }),
                (i.tk = function () {
                  return this.Xc;
                }),
                (i.zi = function () {
                  this.je = !0;
                }),
                (i.rk = function () {
                  return this.je;
                }),
                (i.xi = function () {
                  this.o = !0;
                }),
                (i.kk = function () {
                  return this.o;
                }),
                (i.Mf = function (e) {
                  this.thumbnailSprite = e;
                }),
                (i.bk = function () {
                  return this.thumbnailSprite;
                }),
                (i.offset = function (e) {
                  ((this.startTime += e), (this.endTime += e), (this.j += e));
                  for (var t = g(this.g), n = t.next(); !n.done; n = t.next())
                    (((n = n.value).startTime += e), (n.endTime += e), (n.j += e));
                }),
                (i.Dh = function (e) {
                  null == this.h
                    ? W("Sync attempted without sync time!")
                    : ((e = this.h - e - this.startTime), Math.abs(e) >= 0.001 && this.offset(e));
                }),
                (i.ue = function (e, t) {
                  ((this.u = e), (this.F = void 0 !== t && t));
                }),
                (i.$b = function (e) {
                  var t = this.u;
                  return ((void 0 === e || e) && this.F && (this.u = null), t);
                }),
                V("shaka.media.SegmentReference", Fo),
                (Fo.prototype.getSegmentData = Fo.prototype.$b),
                (Fo.prototype.setSegmentData = Fo.prototype.ue),
                (Fo.prototype.syncAgainst = Fo.prototype.Dh),
                (Fo.prototype.offset = Fo.prototype.offset),
                (Fo.prototype.getThumbnailSprite = Fo.prototype.bk),
                (Fo.prototype.setThumbnailSprite = Fo.prototype.Mf),
                (Fo.prototype.hasByterangeOptimization = Fo.prototype.kk),
                (Fo.prototype.markAsByterangeOptimization = Fo.prototype.xi),
                (Fo.prototype.isLastPartial = Fo.prototype.rk),
                (Fo.prototype.markAsLastPartial = Fo.prototype.zi),
                (Fo.prototype.isPartial = Fo.prototype.tk),
                (Fo.prototype.markAsPartial = Fo.prototype.Ai),
                (Fo.prototype.isIndependent = Fo.prototype.qk),
                (Fo.prototype.markAsNonIndependent = Fo.prototype.wd),
                (Fo.prototype.isPreload = Fo.prototype.isPreload),
                (Fo.prototype.markAsPreload = Fo.prototype.Ug),
                (Fo.prototype.markAsUnavailable = Fo.prototype.Ak),
                (Fo.prototype.getStatus = Fo.prototype.Kc),
                (Fo.prototype.getTileDuration = Fo.prototype.dk),
                (Fo.prototype.getTilesLayout = Fo.prototype.ek),
                (Fo.prototype.getEndByte = Fo.prototype.Hc),
                (Fo.prototype.getStartByte = Fo.prototype.Jc),
                (Fo.prototype.getEndTime = Fo.prototype.Kj),
                (Fo.prototype.getStartTime = Fo.prototype.getStartTime),
                (Fo.prototype.getUris = Fo.prototype.P));
              var Go = 0,
                zo = 1;
              function Xo(e) {
                return 1 == e.length && e.end(0) - e.start(0) < 1e-4;
              }
              function Wo(e) {
                return !e || Xo(e)
                  ? null
                  : 1 == e.length && e.start(0) < 0
                    ? 0
                    : e.length
                      ? e.start(0)
                      : null;
              }
              function Ko(e) {
                return !e || Xo(e) ? null : e.length ? e.end(e.length - 1) : null;
              }
              function qo(e, t) {
                return !(!e || !e.length || Xo(e) || t > e.end(e.length - 1)) && t >= e.start(0);
              }
              function Yo(e, t) {
                if (!e || !e.length || Xo(e)) return 0;
                for (var n = 0, r = (e = g($o(e))).next(); !r.done; r = e.next()) {
                  var i = r.value;
                  ((r = i.start), (i = i.end) > t && (n += i - Math.max(r, t)));
                }
                return n;
              }
              function $o(e) {
                if (!e) return [];
                for (var t = [], n = 0; n < e.length; n++) t.push({ start: e.start(n), end: e.end(n) });
                return t;
              }
              function Jo() {}
              function Qo(e, t) {
                var n = document.createElement("source");
                return ((n.src = e), (n.type = void 0 === t ? "" : t), n);
              }
              function Zo(e) {
                for (var t = !1, n = e.getElementsByTagName("source"), r = n.length - 1; r >= 0; --r)
                  (e.removeChild(n[r]), (t = !0));
                return (e.src && (e.removeAttribute("src"), (t = !0)), t);
              }
              function es(e) {
                for (; e.firstChild; ) e.removeChild(e.firstChild);
              }
              function ts() {
                return (
                  rs ||
                  (ns ||
                    (ns = new Mr(function () {
                      rs = null;
                    })),
                  (rs =
                    document.getElementsByTagName("video")[0] || document.getElementsByTagName("audio")[0]) ||
                    (rs = document.createElement("video")),
                  ns.ka(1),
                  rs)
                );
              }
              ((Fo.Status = { vl: Go, Am: zo, Wl: 2 }),
                V("shaka.util.Dom", Jo),
                (Jo.removeAllChildren = es),
                (Jo.clearSourceFromVideo = Zo));
              var ns = null,
                rs = null;
              /*
      		 @license
      		 Shaka Player
      		 Copyright 2022 Google LLC
      		 SPDX-License-Identifier: Apache-2.0
      		*/ function is() {}
              function as(e, t) {
                return (
                  t + 10 <= e.length &&
                  73 === e[t] &&
                  68 === e[t + 1] &&
                  51 === e[t + 2] &&
                  e[t + 3] < 255 &&
                  e[t + 4] < 255 &&
                  e[t + 6] < 128 &&
                  e[t + 7] < 128 &&
                  e[t + 8] < 128 &&
                  e[t + 9] < 128
                );
              }
              function os(e, t) {
                return (
                  t + 10 <= e.length &&
                  51 === e[t] &&
                  68 === e[t + 1] &&
                  73 === e[t + 2] &&
                  e[t + 3] < 255 &&
                  e[t + 4] < 255 &&
                  e[t + 6] < 128 &&
                  e[t + 7] < 128 &&
                  e[t + 8] < 128 &&
                  e[t + 9] < 128
                );
              }
              function ss(e, t) {
                var n = (127 & e[t]) << 21;
                return ((n |= (127 & e[t + 1]) << 14), (n |= (127 & e[t + 2]) << 7) | (127 & e[t + 3]));
              }
              function us(e) {
                var t = { key: e.type, description: "", data: "", mimeType: null, pictureType: null };
                if ("APIC" === e.type) {
                  if (e.size < 2 || 3 !== e.data[0]) return null;
                  var n = e.data.subarray(1).indexOf(0);
                  if (-1 === n) return null;
                  var r = Ye(Ne(e.data, 1, n)),
                    i = e.data[2 + n],
                    a = e.data.subarray(3 + n).indexOf(0);
                  if (-1 === a) return null;
                  var o,
                    s = Ye(Ne(e.data, 3 + n, a));
                  return (
                    (o = "--\x3e" === r ? Ye(Ne(e.data, 4 + n + a)) : Le(e.data.subarray(4 + n + a))),
                    (t.mimeType = r),
                    (t.pictureType = i),
                    (t.description = s),
                    (t.data = o),
                    t
                  );
                }
                return "TXXX" === e.type || "WXXX" === e.type
                  ? e.size < 2 || 3 !== e.data[0] || -1 === (r = e.data.subarray(1).indexOf(0))
                    ? null
                    : ((n = Ye(Ne(e.data, 1, r))),
                      (e = Ye(Ne(e.data, 2 + r)).replace(/\0*$/, "")),
                      (t.description = n),
                      (t.data = e),
                      t)
                  : "PRIV" === e.type
                    ? e.size < 2 || -1 === (n = e.data.indexOf(0))
                      ? null
                      : ((n = Ye(Ne(e.data, 0, n))),
                        (t.description = n),
                        "com.apple.streaming.transportStreamTimestamp" == n
                          ? ((n = e.data.subarray(n.length + 1)),
                            (e = 1 & n[3]),
                            (n = (n[4] << 23) + (n[5] << 15) + (n[6] << 7) + n[7]),
                            (n /= 45),
                            e && (n += 47721858.84),
                            (t.data = n))
                          : ((e = Le(e.data.subarray(n.length + 1))), (t.data = e)),
                        t)
                    : "T" === e.type[0]
                      ? e.size < 2 || 3 !== e.data[0]
                        ? null
                        : ((e = Ye(e.data.subarray(1)).replace(/\0*$/, "")), (t.data = e), t)
                      : "W" === e.type[0]
                        ? ((e = Ye(e.data).replace(/\0*$/, "")), (t.data = e), t)
                        : e.data
                          ? ((t.data = Le(e.data)), t)
                          : null;
              }
              function ls(e) {
                for (var t = 0, n = []; as(e, t); ) {
                  var r = ss(e, t + 6);
                  for ((e[t + 5] >> 6) & 1 && (t += 10), r = (t += 10) + r; t + 10 < r; ) {
                    var i = e.subarray(t),
                      a = ss(i, 4);
                    ((a = us(
                      (i = {
                        type: String.fromCharCode(i[0], i[1], i[2], i[3]),
                        size: a,
                        data: i.subarray(10, 10 + a),
                      }),
                    )) && n.push(a),
                      (t += i.size + 10));
                  }
                  os(e, t) && (t += 10);
                }
                return n;
              }
              function ds(e, t) {
                for (var n = (t = void 0 === t ? 0 : t), r = 0; as(e, t); )
                  ((e[t + 5] >> 6) & 1 && (r += 10),
                    (r += 10),
                    (r += ss(e, t + 6)),
                    os(e, t + 10) && (r += 10),
                    (t += r));
                return r > 0 ? e.subarray(n, n + r) : new Uint8Array([]);
              }
              function cs(e) {
                return new Date(Date.UTC(1900, 0, 1, 0, 0, 0, 0) + e).getTime();
              }
              function hs(e, t) {
                if (((this.j = e), void 0 !== t && t)) {
                  t = new Uint8Array(e.byteLength);
                  for (var n = 0, r = 0; r < e.byteLength; r++)
                    (r >= 2 && 3 == e[r] && 0 == e[r - 1] && 0 == e[r - 2]) || ((t[n] = e[r]), n++);
                  this.j = Ne(t, 0, n);
                }
                ((this.i = this.j.byteLength), (this.g = this.h = 0));
              }
              function ps(e) {
                var t = e.j.byteLength - e.i,
                  n = new Uint8Array(4),
                  r = Math.min(4, e.i);
                0 !== r &&
                  (n.set(e.j.subarray(t, t + r)), (e.h = new na(n, 0).U()), (e.g = 8 * r), (e.i -= r));
              }
              function fs(e, t) {
                if (e.g <= t) {
                  t -= e.g;
                  var n = Math.floor(t / 8);
                  ((t -= 8 * n), (e.g -= n), ps(e));
                }
                ((e.h <<= t), (e.g -= t));
              }
              function gs(e, t) {
                var n = Math.min(e.g, t),
                  r = e.h >>> (32 - n);
                return (
                  (e.g -= n),
                  e.g > 0 ? (e.h <<= n) : e.i > 0 && ps(e),
                  (n = t - n) > 0 ? (r << n) | gs(e, n) : r
                );
              }
              function ms(e) {
                var t;
                for (t = 0; t < e.g; ++t) if (e.h & (2147483648 >>> t)) return ((e.h <<= t), (e.g -= t), t);
                return (ps(e), t + ms(e));
              }
              function vs(e) {
                fs(e, 1 + ms(e));
              }
              function ys(e) {
                return gs(e, ms(e) + 1) - 1;
              }
              function bs(e) {
                return 1 & (e = ys(e)) ? (1 + e) >>> 1 : -1 * (e >>> 1);
              }
              function xs(e) {
                return 1 === gs(e, 1);
              }
              function Ts(e) {
                return gs(e, 8);
              }
              function ws(e, t) {
                for (var n = 8, r = 8, i = 0; i < t; i++)
                  (0 !== r && (r = (n + (r = bs(e)) + 256) % 256), (n = 0 === r ? n : r));
              }
              function Ss(e) {
                return (Ts(e), ys(e), ys(e));
              }
              function As() {
                ((this.I = null),
                  (this.J = !1),
                  (this.m = this.K = null),
                  (this.j = []),
                  (this.g = []),
                  (this.C = this.F = null),
                  (this.i = []),
                  (this.h = []),
                  (this.G = null),
                  (this.l = []),
                  (this.B = this.H = this.o = this.u = null));
              }
              function Es(e, t) {
                if (1 != ((t[0] << 16) | (t[1] << 8) | t[2])) return null;
                var n = {
                  data: new Uint8Array(0),
                  packetLength: (t[4] << 8) | t[5],
                  pts: null,
                  dts: null,
                  nalus: [],
                };
                if (n.packetLength && n.packetLength > t.byteLength - 6) return null;
                var r = t[7];
                if (192 & r) {
                  var i =
                    536870912 * (14 & t[9]) +
                    4194304 * (255 & t[10]) +
                    16384 * (254 & t[11]) +
                    128 * (255 & t[12]) +
                    (254 & t[13]) / 2;
                  (null == e.u && (e.u = i),
                    (n.pts = Is(i, e.u)),
                    (e.u = n.pts),
                    (n.dts = n.pts),
                    64 & r &&
                      ((r =
                        536870912 * (14 & t[14]) +
                        4194304 * (255 & t[15]) +
                        16384 * (254 & t[16]) +
                        128 * (255 & t[17]) +
                        (254 & t[18]) / 2),
                      null == e.o && (e.o = r),
                      (n.dts = n.pts != i ? Is(r, e.o) : r)),
                    (e.o = n.dts));
                }
                return ((e = t[8] + 9), t.byteLength <= e ? null : ((n.data = t.subarray(e)), n));
              }
              function ks(e) {
                var t = e.ud();
                return t.length > 1 && ((e = t[0].pts), (t = t[1].pts), !isNaN(t - e))
                  ? String(Math.abs((1 / (t - e)) * 9e4))
                  : null;
              }
              function Is(e, t) {
                var n = 1;
                for (e > t && (n = -1); Math.abs(t - e) > 4294967296; ) e += 8589934592 * n;
                return e;
              }
              function Cs(e) {
                return !(Ms(e) < 0);
              }
              function Ms(e) {
                for (var t = Math.min(1e3, e.length - 564), n = 0; n < t; ) {
                  if (71 == e[n] && 71 == e[n + 188] && 71 == e[n + 376]) return n;
                  n++;
                }
                return -1;
              }
              (V("shaka.util.Id3Utils", is),
                (is.getID3Data = ds),
                (is.getID3Frames = ls),
                V("shaka.util.ExpGolomb", hs),
                ((i = As.prototype).clearData = function () {
                  ((this.j = []), (this.g = []), (this.i = []), (this.h = []), (this.l = []));
                }),
                (i.Kf = function (e) {
                  (null != this.B && this.B != e && (this.o = this.u = null), (this.B = e));
                }),
                (i.parse = function (e) {
                  if (e.length < 564) return this;
                  for (
                    var t = Math.max(0, Ms(e)), n = e.length - ((e.length + t) % 188), r = !1, i = t;
                    i < n;
                    i += 188
                  )
                    if (71 == e[i]) {
                      var a = !!(64 & e[i + 1]),
                        o = ((31 & e[i + 1]) << 8) + e[i + 2];
                      if ((48 & e[i + 3]) >> 4 > 1) {
                        var s = i + 5 + e[i + 4];
                        if (s == i + 188) continue;
                      } else s = i + 4;
                      switch (o) {
                        case 0:
                          (a && (s += e[s] + 1), (this.I = ((31 & e[s + 10]) << 8) | e[s + 11]));
                          break;
                        case 17:
                        case 8191:
                          break;
                        case this.I:
                          (a && (s += e[s] + 1),
                            (o = { audio: -1, video: -1, gf: -1, audioCodec: "", videoCodec: "" }));
                          var u = s + 3 + (((15 & (a = e)[s + 1]) << 8) | a[s + 2]) - 4;
                          for (s += 12 + (((15 & a[s + 10]) << 8) | a[s + 11]); s < u; ) {
                            var l = ((31 & a[s + 1]) << 8) | a[s + 2],
                              d = ((15 & a[s + 3]) << 8) | a[s + 4];
                            switch (a[s]) {
                              case 6:
                                if (d > 0)
                                  for (var c = s + 5, h = d; h > 2; ) {
                                    var p = a[c + 1] + 2;
                                    switch (a[c]) {
                                      case 5:
                                        var f = a.subarray(c + 2, c + p);
                                        ((f = tt.value()(f)),
                                          -1 == o.audio && "Opus" === f
                                            ? ((o.audio = l), (o.audioCodec = "opus"))
                                            : -1 == o.video &&
                                              "AV01" === f &&
                                              ((o.video = l), (o.videoCodec = "av1")));
                                        break;
                                      case 106:
                                        -1 == o.audio && ((o.audio = l), (o.audioCodec = "ac3"));
                                        break;
                                      case 122:
                                        -1 == o.audio && ((o.audio = l), (o.audioCodec = "ec3"));
                                        break;
                                      case 124:
                                        -1 == o.audio && ((o.audio = l), (o.audioCodec = "aac"));
                                        break;
                                      case 127:
                                        "opus" == o.audioCodec &&
                                          ((f = null),
                                          128 === a[c + 2] && (f = a[c + 3]),
                                          null != f &&
                                            (this.H = {
                                              channelCount: 15 & f ? 15 & f : 2,
                                              uj: f,
                                              sampleRate: 48e3,
                                            }));
                                    }
                                    ((c += p), (h -= p));
                                  }
                                break;
                              case 15:
                                -1 == o.audio && ((o.audio = l), (o.audioCodec = "aac"));
                                break;
                              case 17:
                                -1 == o.audio && ((o.audio = l), (o.audioCodec = "aac-loas"));
                                break;
                              case 21:
                                -1 == o.gf && (o.gf = l);
                                break;
                              case 27:
                                -1 == o.video && ((o.video = l), (o.videoCodec = "avc"));
                                break;
                              case 3:
                              case 4:
                                -1 == o.audio && ((o.audio = l), (o.audioCodec = "mp3"));
                                break;
                              case 36:
                                -1 == o.video && ((o.video = l), (o.videoCodec = "hvc"));
                                break;
                              case 129:
                                -1 == o.audio && ((o.audio = l), (o.audioCodec = "ac3"));
                                break;
                              case 132:
                              case 135:
                                -1 == o.audio && ((o.audio = l), (o.audioCodec = "ec3"));
                            }
                            s += d + 5;
                          }
                          (-1 != (a = o).video && ((this.K = a.video), (this.m = a.videoCodec)),
                            -1 != a.audio && ((this.F = a.audio), (this.C = a.audioCodec)),
                            -1 != a.gf && (this.G = a.gf),
                            r && !this.J && ((r = !1), (i = t - 188)),
                            (this.J = !0));
                          break;
                        case this.K:
                          ((s = e.subarray(s, i + 188)),
                            a
                              ? this.j.push([s])
                              : this.j.length &&
                                this.j[this.j.length - 1] &&
                                this.j[this.j.length - 1].push(s));
                          break;
                        case this.F:
                          ((s = e.subarray(s, i + 188)),
                            a
                              ? this.i.push([s])
                              : this.i.length &&
                                this.i[this.i.length - 1] &&
                                this.i[this.i.length - 1].push(s));
                          break;
                        case this.G:
                          ((s = e.subarray(s, i + 188)),
                            a
                              ? this.l.push([s])
                              : this.l.length &&
                                this.l[this.l.length - 1] &&
                                this.l[this.l.length - 1].push(s));
                          break;
                        default:
                          r = !0;
                      }
                    }
                  return this;
                }),
                (i.Hk = function (e) {
                  return (
                    ce("TsParser.parseAvcNalus", "Please use parseNalus function instead."),
                    this.$g(e, { le: null, state: null })
                  );
                }),
                (i.$g = function (e, t) {
                  var n = e.pts ? e.pts / 9e4 : null,
                    r = (e = e.data).byteLength,
                    i = 1;
                  "hvc" == this.m && (i = 2);
                  var a = t.state || 0,
                    o = a,
                    s = 0,
                    u = [],
                    l = -1,
                    d = 0;
                  for (
                    -1 == a &&
                    ((l = 0), (d = "hvc" == this.m ? (e[0] >> 1) & 63 : 31 & e[0]), (a = 0), (s = 1));
                    s < r;
                  ) {
                    var c = e[s++];
                    a
                      ? 1 === a
                        ? (a = c ? 0 : 2)
                        : c
                          ? 1 == c
                            ? ((c = s - a - 1),
                              l >= 0
                                ? u.push({
                                    data: e.subarray(l + i, c),
                                    fullData: e.subarray(l, c),
                                    type: d,
                                    time: n,
                                    state: null,
                                  })
                                : (a = u.length ? u[u.length - 1] : t.le) &&
                                  (o &&
                                    s <= 4 - o &&
                                    a.state &&
                                    ((a.data = a.data.subarray(0, a.data.byteLength - o)),
                                    (a.fullData = a.fullData.subarray(0, a.fullData.byteLength - o))),
                                  c > 0 &&
                                    ((c = e.subarray(0, c)),
                                    (a.data = ut(a.data, c)),
                                    (a.fullData = ut(a.fullData, c)),
                                    (a.state = 0))),
                              s < r
                                ? ((d = "hvc" == this.m ? (e[s] >> 1) & 63 : 31 & e[s]), (l = s), (a = 0))
                                : (a = -1))
                            : (a = 0)
                          : (a = 3)
                      : (a = c ? 0 : 1);
                  }
                  return (
                    l >= 0 &&
                      a >= 0 &&
                      u.push({
                        data: e.subarray(l + i, r),
                        fullData: e.subarray(l, r),
                        type: d,
                        time: n,
                        state: a,
                      }),
                    !u.length &&
                      t.le &&
                      (n = u.length ? u[u.length - 1] : t.le) &&
                      ((n.data = ut(n.data, e)), (n.fullData = ut(n.fullData, e))),
                    (t.state = a),
                    u
                  );
                }),
                (i.getMetadata = function () {
                  for (var e = [], t = g(this.l), n = t.next(); !n.done; n = t.next())
                    (n = Es(this, (n = ut.apply(nt, m(n.value))))) &&
                      e.push({
                        cueTime: n.pts ? n.pts / 9e4 : null,
                        data: n.data,
                        frames: ls(n.data),
                        dts: n.dts,
                        pts: n.pts,
                      });
                  return e;
                }),
                (i.ub = function () {
                  if (this.i.length && !this.h.length)
                    for (var e = g(this.i), t = e.next(); !t.done; t = e.next()) {
                      var n = ut.apply(nt, m(t.value)),
                        r = Es(this, n);
                      ((t = this.h.length ? this.h[this.h.length - 1] : null),
                        r && null != r.pts && null != r.dts && (!t || (t.pts != r.pts && t.dts != r.dts))
                          ? this.h.push(r)
                          : this.h.length &&
                            (n = r ? r.data : n) &&
                            (((t = this.h.pop()).data = ut(t.data, n)), this.h.push(t)));
                    }
                  return this.h;
                }),
                (i.ud = function (e) {
                  if (((e = void 0 === e || e), this.j.length && !this.g.length)) {
                    for (var t = g(this.j), n = t.next(); !n.done; n = t.next()) {
                      var r = ut.apply(nt, m(n.value)),
                        i = Es(this, r);
                      ((n = this.g.length ? this.g[this.g.length - 1] : null),
                        i && null != i.pts && null != i.dts && (!n || (n.pts != i.pts && n.dts != i.dts))
                          ? this.g.push(i)
                          : this.g.length &&
                            (r = i ? i.data : r) &&
                            (((n = this.g.pop()).data = ut(n.data, r)), this.g.push(n)));
                    }
                    if (e) {
                      for (
                        t = { le: null, state: null }, n = [], i = (r = g(this.g)).next();
                        !i.done;
                        i = r.next()
                      )
                        (((i = i.value).nalus = this.$g(i, t)),
                          i.nalus.length && (n.push(i), (t.le = i.nalus[i.nalus.length - 1])));
                      this.g = n;
                    }
                  }
                  return e ? this.g : ((e = this.g), (this.g = []), e);
                }),
                (i.getStartTime = function (e) {
                  if ("audio" == e) {
                    e = null;
                    var t = this.ub();
                    return (t.length && ((e = t[0]), (e = Math.min(e.dts, e.pts) / 9e4)), e);
                  }
                  return "video" == e
                    ? ((e = null),
                      (t = this.ud(!1)).length && ((e = t[0]), (e = Math.min(e.dts, e.pts) / 9e4)),
                      e)
                    : null;
                }),
                (i.Yd = function () {
                  return { audio: this.C, video: this.m };
                }),
                (i.ef = function () {
                  for (var e = [], t = g(this.ud()), n = t.next(); !n.done; n = t.next())
                    e.push.apply(e, m(n.value.nalus));
                  return e;
                }),
                (i.hk = function () {
                  ce("TsParser.getVideoResolution", "Please use getVideoInfo function instead.");
                  var e = this.Ng();
                  return { height: e.height, width: e.width };
                }),
                (i.Ng = function () {
                  return "hvc" == this.m
                    ? (function (e) {
                        var t = { height: null, width: null, codec: null, frameRate: null },
                          n = e.ef();
                        if (!n.length) return t;
                        if (
                          !(n = n.find(function (e) {
                            return 33 == e.type;
                          }))
                        )
                          return t;
                        var r = new hs(n.fullData, !0);
                        (Ts(r), Ts(r), gs(r, 4));
                        var i = gs(r, 3);
                        xs(r);
                        var a = gs(r, 2),
                          o = gs(r, 1),
                          s = gs(r, 5),
                          u = gs(r, 32);
                        n = Ts(r);
                        for (
                          var l = Ts(r),
                            d = Ts(r),
                            c = Ts(r),
                            h = Ts(r),
                            p = Ts(r),
                            f = Ts(r),
                            g = [],
                            m = [],
                            v = 0;
                          v < i;
                          v++
                        )
                          (g.push(xs(r)), m.push(xs(r)));
                        if (i > 0) for (v = i; v < 8; v++) gs(r, 2);
                        for (v = 0; v < i; v++) (g[v] && gs(r, 88), m[v] && Ts(r));
                        (ys(r), 3 == (i = ys(r)) && gs(r, 1), (g = ys(r)), (m = ys(r)));
                        var y = (v = 0),
                          b = 0,
                          x = 0;
                        return (
                          xs(r) && ((v += ys(r)), (y += ys(r)), (b += ys(r)), (x += ys(r))),
                          (t.width = String(g - (v + y) * (1 === i || 2 === i ? 2 : 1))),
                          (t.height = String(m - (b + x) * (1 === i ? 2 : 1))),
                          (r = (function (e) {
                            for (var t = 0, n = 0; n < 32; n++) t |= ((e >> n) & 1) << (31 - n);
                            return t >>> 0;
                          })(u)),
                          (o = 1 == o ? "H" : "L"),
                          (a = "hvc1." + ["", "A", "B", "C"][a] + s),
                          (a += "." + r.toString(16).toUpperCase()),
                          (a += "." + o + f),
                          p && (a += "." + p.toString(16).toUpperCase()),
                          h && (a += "." + h.toString(16).toUpperCase()),
                          c && (a += "." + c.toString(16).toUpperCase()),
                          d && (a += "." + d.toString(16).toUpperCase()),
                          l && (a += "." + l.toString(16).toUpperCase()),
                          n && (a += "." + n.toString(16).toUpperCase()),
                          (t.codec = a),
                          (t.frameRate = ks(e)),
                          t
                        );
                      })(this)
                    : (function (e) {
                        var t = { height: null, width: null, codec: null, frameRate: null },
                          n = e.ef();
                        if (!n.length) return t;
                        if (
                          !(n = n.find(function (e) {
                            return 7 == e.type;
                          }))
                        )
                          return t;
                        var r = Ts((n = new hs(n.data))),
                          i = Ts(n),
                          a = Ts(n);
                        if ((vs(n), Rs.includes(r))) {
                          var o = ys(n);
                          if ((3 === o && fs(n, 1), vs(n), vs(n), fs(n, 1), xs(n))) {
                            o = 3 !== o ? 8 : 12;
                            for (var s = 0; s < o; s++) xs(n) && ws(n, s < 6 ? 16 : 64);
                          }
                        }
                        if ((vs(n), 0 === (o = ys(n)))) ys(n);
                        else if (1 === o) for (fs(n, 1), vs(n), vs(n), o = ys(n), s = 0; s < o; s++) vs(n);
                        (vs(n), fs(n, 1), (o = ys(n)), (s = ys(n)));
                        var u = gs(n, 1);
                        (0 === u && fs(n, 1), fs(n, 1));
                        var l = 0,
                          d = 0,
                          c = 0,
                          h = 0;
                        return (
                          xs(n) && ((l = ys(n)), (d = ys(n)), (c = ys(n)), (h = ys(n))),
                          (t.height = String((2 - u) * (s + 1) * 16 - 2 * c - 2 * h)),
                          (t.width = String(16 * (o + 1) - 2 * l - 2 * d)),
                          (t.codec =
                            "avc1." +
                            ("0" + r.toString(16).toUpperCase()).slice(-2) +
                            ("0" + i.toString(16).toUpperCase()).slice(-2) +
                            ("0" + a.toString(16).toUpperCase()).slice(-2)),
                          (t.frameRate = ks(e)),
                          t
                        );
                      })(this);
                }),
                V("shaka.util.TsParser", As),
                (As.syncOffset = Ms),
                (As.probe = Cs),
                (As.prototype.getVideoInfo = As.prototype.Ng),
                (As.prototype.getVideoResolution = As.prototype.hk),
                (As.prototype.getVideoNalus = As.prototype.ef),
                (As.prototype.getCodecs = As.prototype.Yd),
                (As.prototype.getStartTime = As.prototype.getStartTime),
                (As.prototype.getVideoData = As.prototype.ud),
                (As.prototype.getAudioData = As.prototype.ub),
                (As.prototype.getMetadata = As.prototype.getMetadata),
                (As.prototype.parseNalus = As.prototype.$g),
                (As.prototype.parseAvcNalus = As.prototype.Hk),
                (As.prototype.parse = As.prototype.parse),
                (As.prototype.setDiscontinuitySequence = As.prototype.Kf),
                (As.prototype.clearData = As.prototype.clearData),
                (As.Timescale = 9e4));
              var Rs = [100, 110, 122, 244, 44, 83, 86, 118, 128, 138, 139, 134];
              function _s(e, t, n, r, i) {
                var a = this;
                ((this.g = e),
                  (this.O = n),
                  (this.B = r),
                  (this.ba = t),
                  (this.l = new Map()),
                  (this.G = new Map()),
                  (this.Ta = new Map()),
                  (this.h = null),
                  (this.Fa = !1),
                  (this.C = i || null),
                  (this.o = new Map()),
                  (this.u = new ne()),
                  (this.j = new Map()),
                  (this.K = null),
                  (this.M = new Ii()),
                  (this.Da = ""),
                  (this.ob = !1),
                  (this.za = !0),
                  (this.N = !1),
                  (this.F = this.R = null),
                  (this.i = Ds(this, this.M)),
                  (this.Ua = this.H = !1),
                  (this.I = new Ji(function () {
                    return (function (e) {
                      var t, n, r, i, a, o, s, u, l, d, c, h, p;
                      return D(function (f) {
                        if (1 == f.g) {
                          for (t = [], n = g(e.o), r = n.next(); !r.done; r = n.next())
                            for (
                              i = r.value,
                                a = g(i),
                                o = a.next().value,
                                s = a.next().value,
                                u = s[0],
                                l = o,
                                e.o.set(l, s.slice(0, 1)),
                                u && t.push(u.p.catch(_r)),
                                d = g(s.slice(1)),
                                c = d.next();
                              !c.done;
                              c = d.next()
                            )
                              c.value.p.reject(new Ke(2, 7, 7003, void 0));
                          return (e.h && t.push(e.h.destroy()), x(f, Promise.all(t), 2));
                        }
                        for (h = g(e.j.values()), p = h.next(); !p.done; p = h.next()) p.value.destroy();
                        (e.u && (e.u.release(), (e.u = null)),
                          e.g && e.F && e.g.removeChild(e.F),
                          e.g && e.R && (e.g.removeChild(e.R), e.g.load(), (e.g.disableRemotePlayback = !1)),
                          (e.g = null),
                          (e.R = null),
                          (e.F = null),
                          (e.B = null),
                          (e.i = null),
                          (e.h = null),
                          (e.ba = null),
                          e.l.clear(),
                          e.Ta.clear(),
                          e.j.clear(),
                          (e.K = null),
                          e.o.clear(),
                          (e.C = null),
                          e.$.clear(),
                          (e.O = null),
                          T(f));
                      });
                    })(a);
                  })),
                  (this.J = !1),
                  (this.X = "UNKNOWN"),
                  (this.eb = this.kb = !1),
                  (this.ab = new Ii()),
                  (this.m = !1),
                  (this.ya = null),
                  (this.$ = new Map()),
                  (this.oa = this.T = this.va = this.V = null),
                  (this.ma = new Ii()),
                  this.g.remote &&
                    ((this.N = "disconnected" != this.g.remote.state),
                    this.u.D(this.g.remote, "connect", function () {
                      a.N = "disconnected" != a.g.remote.state;
                    }),
                    this.u.D(this.g.remote, "connecting", function () {
                      a.N = "disconnected" != a.g.remote.state;
                    }),
                    this.u.D(this.g.remote, "disconnect", function () {
                      a.N = "disconnected" != a.g.remote.state;
                    })));
              }
              function Ds(t, n) {
                if (((t.za = !0), e.ManagedMediaSource)) {
                  t.F || (t.g.disableRemotePlayback = !0);
                  var r = new ManagedMediaSource();
                  (t.u.D(r, "startstreaming", function () {
                    t.za = !0;
                  }),
                    t.u.D(r, "endstreaming", function () {
                      t.za = !1;
                    }));
                } else r = new MediaSource();
                return (
                  t.u.Aa(r, "sourceopen", function () {
                    (URL.revokeObjectURL(t.Da), n.resolve());
                  }),
                  t.u.Aa(t.g, "playing", function () {
                    t.ob = !0;
                  }),
                  (t.Da = ru(r)),
                  t.B.useSourceElements
                    ? (t.g.removeAttribute("src"),
                      t.R && t.g.removeChild(t.R),
                      t.F && t.g.removeChild(t.F),
                      (t.R = Qo(t.Da)),
                      t.g.appendChild(t.R),
                      t.F && t.g.appendChild(t.F),
                      t.g.load())
                    : (t.g.src = t.Da),
                  r
                );
              }
              function Ps(e, t, r, i) {
                "audio" == t && i && (i = Zr(i, r.mimeType));
                var a = lr(r.mimeType, i);
                if (t == gt) Ns(e, a, e.J, r.external);
                else {
                  var o = e.B.forceTransmux;
                  (!Qa(a) || (!e.J && br.includes(a))) && (o = !0);
                  var s = dr(r.mimeType, i);
                  if (o) {
                    if (
                      ((o = pt("audio", (i || "").split(","))),
                      (i = pt("video", (i || "").split(","))),
                      o && i)
                    )
                      return ((e.m = !0), Ps(e, "audio", r, o), void Ps(e, "video", r, i));
                    (i = nr(s)) && ((a = i()), e.j.set(t, a), (a = a.convertCodecs(t, s)));
                  }
                  ((s = a + e.B.addExtraFeaturesToSourceBuffer(a)), Qi(e.I));
                  try {
                    var u = e.i.addSourceBuffer(s);
                  } catch (n) {
                    throw new Ke(
                      2,
                      3,
                      3015,
                      n,
                      "The mediaSource_ status was " + e.i.readyState + " expected 'open'",
                      null,
                    );
                  }
                  (e.J && (u.mode = iu),
                    e.u.D(u, "error", function () {
                      var n = e.o.get(t)[0];
                      n.p.reject(new Ke(2, 3, 3014, e.g.error ? e.g.error.code : 0, n.uri));
                    }),
                    e.u.D(u, "updateend", function () {
                      return Ys(e, t);
                    }),
                    e.l.set(t, u),
                    e.G.set(t, a),
                    e.Ta.set(t, !!r.drmInfos.length));
                }
              }
              function Ls(e) {
                return e.za && !e.N && !e.H;
              }
              function Ns(e, t, n, r) {
                e.h || ((e.h = new xr(e.ba)), e.h && (e.h.B = e.B.modifyCueCallback));
                var i = e.h;
                ((r = r || e.Fa),
                  (e = e.X),
                  "application/cea-608" == t || "application/cea-708" == t
                    ? (i.i = null)
                    : ((i.i = Ir.get(t)()),
                      i.i.setSequenceMode
                        ? i.i.setSequenceMode(n)
                        : ce(
                            "Text parsers w/ setSequenceMode",
                            'Text parsers should have a "setSequenceMode" method!',
                          ),
                      i.i.setManifestType
                        ? i.i.setManifestType(e)
                        : ce(
                            "Text parsers w/ setManifestType",
                            'Text parsers should have a "setManifestType" method!',
                          ),
                      (i.C = r)));
              }
              function Os(e) {
                return !(e.H || (e.i && "ended" != e.i.readyState));
              }
              function Us(e) {
                return !(e.H || (e.i && "closed" != e.i.readyState));
              }
              function Bs(e, t) {
                return e.l.size ? (t == gt ? e.h.g : Wo(Fs(e, t))) : null;
              }
              function js(e, t) {
                return e.l.size ? (t == gt ? e.h.h : Ko(Fs(e, t))) : null;
              }
              function Fs(e, t) {
                if (e.H || e.N || Us(e)) return null;
                try {
                  return e.l.get(t).buffered;
                } catch (n) {
                  return (e.l.has(t), null);
                }
              }
              function Vs(e, t, n, r, i, a, o, s, u, l, d) {
                var c, h, p, f, v, y, b, w, S, A, E, k, I, C, M, R, _, P, L;
                return (
                  (o = void 0 !== o && o),
                  (s = void 0 !== s && s),
                  (u = void 0 !== u && u),
                  (l = void 0 !== l && l),
                  D(function (N) {
                    switch (N.g) {
                      case 1:
                        if (t != (c = mt).Na) {
                          N.A(2);
                          break;
                        }
                        if ("HLS" != e.X) {
                          N.A(3);
                          break;
                        }
                        return x(N, e.ab, 4);
                      case 4:
                        ((h = N.h), (e.h.u = h));
                      case 3:
                        return x(
                          N,
                          (function (e, t, n, r, i) {
                            var a, o, s, u, l, d, c;
                            return D(function (h) {
                              if (1 == h.g) return x(h, Promise.resolve(), 2);
                              if (!e.i || !e.l) return h.return();
                              if (null == n || null == r) return (e.i.parseInit(Ne(t)), h.return());
                              for (
                                a = e.C ? n : e.u,
                                  o = { periodStart: e.u, segmentStart: n, segmentEnd: r, vttOffset: a },
                                  s = e.i.parseMedia(Ne(t), o, i, []),
                                  u = g(s),
                                  l = u.next();
                                !l.done;
                                l = u.next()
                              )
                                ((d = l.value), e.B(d, i || null, o));
                              ((c = s.filter(function (t) {
                                return t.startTime >= e.m && t.startTime < e.o;
                              })),
                                e.l.append(c),
                                null == e.g && (e.g = Math.max(n, e.m)),
                                (e.h = Math.min(r, e.o)),
                                T(h));
                            });
                          })(e.h, n, r ? r.startTime : null, r ? r.endTime : null, r ? r.P()[0] : null),
                          5,
                        );
                      case 5:
                        return N.return();
                      case 2:
                        if (l || !e.m) {
                          N.A(6);
                          break;
                        }
                        return x(N, Vs(e, c.aa, n, r, i, a, o, s, u, !0), 7);
                      case 7:
                        return x(N, Vs(e, c.wa, n, r, i, a, o, s, u, !0), 8);
                      case 8:
                        return N.return();
                      case 6:
                        if (!e.l.has(t)) return N.return();
                        if (
                          ((p = e.l.get(t).timestampOffset),
                          (f = e.G.get(t)),
                          e.j.has(t) && (f = e.j.get(t).getOriginalMimeType()),
                          r &&
                            ((v = (function (e, t, n, r, i, a, o) {
                              o = void 0 !== o && o;
                              var s = null,
                                u = [],
                                l = Ne(n);
                              if (br.includes(a))
                                (n = ls(l)).length &&
                                  r &&
                                  ((o = n.find(function (e) {
                                    return "com.apple.streaming.transportStreamTimestamp" === e.description;
                                  })) &&
                                    "number" == typeof o.data &&
                                    (s = Math.round(o.data) / 1e3),
                                  e.O.onMetadata(
                                    [
                                      {
                                        cueTime: r.startTime,
                                        data: l,
                                        frames: n,
                                        dts: r.startTime,
                                        pts: r.startTime,
                                      },
                                    ],
                                    0,
                                    r.endTime,
                                  ));
                              else if (a.includes("/mp4") && r && r.ea) {
                                l = new aa();
                                var d =
                                  (null != i.emsgSchemeIdUris && i.emsgSchemeIdUris.length > 0) ||
                                  e.B.dispatchAllEmsgBoxes;
                                d &&
                                  l.S("emsg", function (t) {
                                    var n = i.emsgSchemeIdUris;
                                    if (0 === t.version)
                                      var a = t.reader.Yc(),
                                        o = t.reader.Yc(),
                                        s = t.reader.U(),
                                        u = t.reader.U(),
                                        l = t.reader.U(),
                                        d = t.reader.U(),
                                        c = r.startTime + u / s;
                                    else
                                      ((s = t.reader.U()),
                                        (u = (c = t.reader.Ed() / s + r.timestampOffset) - r.startTime),
                                        (l = t.reader.U()),
                                        (d = t.reader.U()),
                                        (a = t.reader.Yc()),
                                        (o = t.reader.Yc()));
                                    ((t = t.reader.Tb(t.reader.getLength() - t.reader.Pa(), !0)),
                                      ((n && n.includes(a)) || e.B.dispatchAllEmsgBoxes) &&
                                        ("urn:mpeg:dash:event:2012" == a
                                          ? e.O.Gk()
                                          : ((n = c + l / s),
                                            e.O.Ek({
                                              startTime: c,
                                              endTime: n,
                                              schemeIdUri: a,
                                              value: o,
                                              timescale: s,
                                              presentationTimeDelta: u,
                                              eventDuration: l,
                                              id: d,
                                              messageData: t,
                                            }),
                                            ("https://aomedia.org/emsg/ID3" == a ||
                                              "https://developer.apple.com/streaming/emsg-id3" == a) &&
                                              (s = ls(t)).length &&
                                              e.O.onMetadata(
                                                [{ cueTime: c, data: t, frames: s, dts: c, pts: c }],
                                                0,
                                                n,
                                              ))));
                                  });
                                var c = r.ea.timescale;
                                t = c && !isNaN(c);
                                var h = 0,
                                  p = !1;
                                (t &&
                                  l
                                    .S("prft", function (t) {
                                      var n = t.reader,
                                        r = t.version;
                                      (n.U(),
                                        (t = 1e3 * (t = n.U()) + (n.U() / 4294967296) * 1e3),
                                        0 === r
                                          ? (n = n.U())
                                          : ((r = n.U()), (n = 4294967296 * r + (n = n.U()))),
                                        (t = cs(t)),
                                        (n = new Li(
                                          "prft",
                                          (n = new Map().set("detail", {
                                            wallClockTime: t,
                                            programStartDate: new Date(t - (n / c) * 1e3),
                                          })),
                                        )),
                                        e.O.onEvent(n));
                                    })
                                    .box("moof", oa)
                                    .box("traf", oa)
                                    .S("tfdt", function (e) {
                                      p ||
                                        ((h = no(e.reader, e.version).baseMediaDecodeTime / c),
                                        (p = !0),
                                        d || e.parser.stop());
                                    }),
                                  (d || t) && l.parse(n, !1, o),
                                  p && 0 == r.timestampOffset && (s = h));
                              } else
                                a.includes("/mp4") ||
                                  a.includes("/webm") ||
                                  !Cs(l) ||
                                  (e.$.has(t) || e.$.set(t, new As()),
                                  (u = e.$.get(t)).clearData(),
                                  u.Kf(r.i),
                                  u.parse(l),
                                  null != (l = u.getStartTime(t)) && (s = l),
                                  (u = u.getMetadata()));
                              return { timestamp: s, metadata: u };
                            })(e, t, n, r, i, f, u)),
                            (y = v.timestamp),
                            (b = v.metadata),
                            null != y &&
                              (null == e.V &&
                                t == c.wa &&
                                ((e.V = y),
                                (e.va = r.startTime),
                                null != e.T && ((w = 0), e.va == e.oa && (w = e.V - e.T), e.ma.resolve(w))),
                              null == e.T &&
                                t == c.aa &&
                                ((e.T = y),
                                (e.oa = r.startTime),
                                null != e.V && ((S = 0), e.va == e.oa && (S = e.V - e.T), e.ma.resolve(S))),
                              (A = y),
                              (E = br),
                              !e.J && E.includes(e.G.get(t)) && (A = 0),
                              (k = r.startTime - A),
                              (Math.abs(p - k) >= 0.001 || o || s) &&
                                (!u || k > 0 || !p) &&
                                ((p = k),
                                e.eb &&
                                  ($s(
                                    e,
                                    t,
                                    function () {
                                      return Ws(e, t);
                                    },
                                    null,
                                  ),
                                  $s(
                                    e,
                                    t,
                                    function () {
                                      return Ks(e, t, p);
                                    },
                                    null,
                                  ))),
                              (t == c.wa || !e.l.has(c.wa)) && e.ab.resolve(p)),
                            b.length) &&
                            e.O.onMetadata(b, p, r ? r.endTime : null),
                          a &&
                            t == c.wa &&
                            (e.h || Ns(e, "application/cea-608", e.J, !1),
                            e.K || ((I = f.split(";", 1)[0]), (e.K = new Rt(I))),
                            r
                              ? (C = e.K.Af(n)).length &&
                                (function (e, t, n) {
                                  for (var r = new Map(), i = (t = g(t)).next(); !i.done; i = t.next()) {
                                    var a = i.value;
                                    ((i = a.stream),
                                      (a = a.cue),
                                      r.has(i) || r.set(i, []),
                                      Er(e, a, n),
                                      a.startTime >= e.m &&
                                        a.startTime < e.o &&
                                        (r.get(i).push(a), i == e.F && e.l.append([a])));
                                  }
                                  for (t = (n = g(r.keys())).next(); !t.done; t = n.next())
                                    for (
                                      t = t.value, e.j.has(t) || e.j.set(t, []), a = (i = g(r.get(t))).next();
                                      !a.done;
                                      a = i.next()
                                    )
                                      ((a = a.value), e.j.get(t).push(a));
                                  kr(e);
                                })(e.h, C, p)
                              : e.K.init(n, s, d)),
                          !e.j.has(t))
                        ) {
                          N.A(9);
                          break;
                        }
                        return x(N, e.j.get(t).transmux(n, i, r, e.i.duration, t), 10);
                      case 10:
                        ((M = N.h),
                          ArrayBuffer.isView(M)
                            ? (n = M)
                            : (null != (R = M).init &&
                                ((_ = R.init),
                                $s(
                                  e,
                                  t,
                                  function () {
                                    (e.C && xt(e.C, _, p, i), e.l.get(t).appendBuffer(_));
                                  },
                                  r ? r.P()[0] : null,
                                )),
                              (n = R.data)));
                      case 9:
                        if (
                          ((n = (function (e, t, n, r, i) {
                            if ("mp4" != hr(e.G.get(i))) return n;
                            var a = null === r,
                              o = e.Ta.get(i),
                              s = e.O.Pj(),
                              u = !1;
                            (r && r.ea && (u = r.ea.encrypted), (r = r ? r.P()[0] : null));
                            var l = oe();
                            return (
                              e.B.correctEc3Enca &&
                                a &&
                                "audio" === i &&
                                (n = (function (e) {
                                  e = Ne(e);
                                  var t = null;
                                  return (
                                    new aa()
                                      .box("moov", oa)
                                      .box("trak", oa)
                                      .box("mdia", oa)
                                      .box("minf", oa)
                                      .box("stbl", oa)
                                      .S("stsd", sa)
                                      .box("enca", function (e) {
                                        return ((t = e.reader.h), la(e));
                                      })
                                      .box("sinf", oa)
                                      .box("frma", function (e) {
                                        (e.parser.stop(),
                                          "ec-3" === oo(e.reader).codec &&
                                            t &&
                                            2 !== t.getUint16(16) &&
                                            t.setUint16(16, 2));
                                      })
                                      .parse(e),
                                    e
                                  );
                                })(n)),
                              e.B.insertFakeEncryptionInInit &&
                                o &&
                                l.Fd(s, i) &&
                                (a
                                  ? (n = (function (e, t, n) {
                                      function r(e) {
                                        c.push({ box: e, Ei: 1701733217 });
                                      }
                                      function i(e) {
                                        c.push({ box: e, Ei: 1701733238 });
                                      }
                                      function a(e) {
                                        ((l = !0), e.parser.stop());
                                      }
                                      function o(e) {
                                        (d.push(e), oa(e));
                                      }
                                      var s,
                                        u = (t = Ne(t)),
                                        l = !1,
                                        d = [],
                                        c = [];
                                      if (
                                        (new aa()
                                          .box("moov", o)
                                          .box("trak", o)
                                          .box("mdia", o)
                                          .box("minf", o)
                                          .box("stbl", o)
                                          .S("stsd", function (e) {
                                            ((s = e), d.push(e), sa(e));
                                          })
                                          .S("encv", a)
                                          .S("enca", a)
                                          .S("dvav", i)
                                          .S("dva1", i)
                                          .S("dvh1", i)
                                          .S("dvhe", i)
                                          .S("dvc1", i)
                                          .S("dvi1", i)
                                          .S("hev1", i)
                                          .S("hvc1", i)
                                          .S("avc1", i)
                                          .S("avc3", i)
                                          .S("ac-3", r)
                                          .S("ec-3", r)
                                          .S("ac-4", r)
                                          .S("Opus", r)
                                          .S("fLaC", r)
                                          .S("mp4a", r)
                                          .parse(t),
                                        l)
                                      )
                                        return t;
                                      if (0 == c.length || !s) throw (st(t), new Ke(2, 3, 3019, n));
                                      c.reverse();
                                      for (var h = (n = g(c)).next(); !h.done; h = n.next())
                                        ((h = h.value), (u = Oo(e, u, s, h.box, d, h.Ei)));
                                      return oe().ih()
                                        ? ((e = new Uint8Array(t.byteLength + u.byteLength)).set(u),
                                          e.set(t, u.byteLength),
                                          e)
                                        : u;
                                    })(t, n, r))
                                  : !u &&
                                    l.Ni(i) &&
                                    (n = (function (e) {
                                      e = Ne(e);
                                      var t = [];
                                      new aa()
                                        .box("mdat", function (e) {
                                          t.push(e);
                                        })
                                        .parse(e);
                                      for (var n = [], r = 0; r < t.length; r++) {
                                        var i = t[r - 1],
                                          a = t[r];
                                        n.push(No(e.subarray(i ? i.start + i.size : 0, a.start + a.size)));
                                      }
                                      return ut.apply(nt, m(n));
                                    })(n))),
                              a &&
                                l.se() &&
                                (n = (function (e) {
                                  function t(e) {
                                    (r.push({ start: e.start, size: e.size }), oa(e));
                                  }
                                  var n = Ne(e),
                                    r = [];
                                  return (
                                    new aa()
                                      .box("moov", t)
                                      .box("trak", t)
                                      .box("mdia", t)
                                      .box("minf", t)
                                      .box("stbl", t)
                                      .box("stsd", function (e) {
                                        r.push({ start: e.start, size: e.size });
                                        for (var t = Ue(n, e.start), i = 0; i < e.size - 3; i++) {
                                          var a = t.getUint32(i);
                                          1633889587 == a
                                            ? t.setUint32(i, 1700998451)
                                            : 1684103987 == a && t.setUint32(i, 1684366131);
                                        }
                                      })
                                      .parse(n),
                                    n
                                  );
                                })(n)),
                              n
                            );
                          })(e, i, n, r, t)),
                          !r || !e.J || t == c.Na)
                        ) {
                          N.A(11);
                          break;
                        }
                        if (!o && !s) {
                          N.A(11);
                          break;
                        }
                        if (((P = r.startTime), "HLS" != e.X || e.m || t != c.aa || !e.l.has(c.wa))) {
                          N.A(13);
                          break;
                        }
                        return x(N, e.ma, 14);
                      case 14:
                        ((L = N.h), Math.abs(L) > 0.15 && (P -= L));
                      case 13:
                        ($s(
                          e,
                          t,
                          function () {
                            return Ws(e, t);
                          },
                          null,
                        ),
                          $s(
                            e,
                            t,
                            function () {
                              return Ks(e, t, P);
                            },
                            null,
                          ));
                      case 11:
                        return x(
                          N,
                          $s(
                            e,
                            t,
                            function () {
                              var r = n;
                              (e.C && xt(e.C, r, p, i), e.l.get(t).appendBuffer(r));
                            },
                            r ? r.P()[0] : null,
                          ),
                          15,
                        );
                      case 15:
                        T(N);
                    }
                  })
                );
              }
              function Hs(e, t) {
                var n;
                return D(function (r) {
                  return 1 == r.g
                    ? t == (n = mt).Na
                      ? e.h
                        ? x(r, e.h.remove(0, 1 / 0), 0)
                        : r.return()
                      : t === n.wa && e.K && e.h
                        ? x(r, e.h.remove(0, 1 / 0, !0), 4)
                        : r.A(4)
                    : 6 != r.g
                      ? x(
                          r,
                          $s(
                            e,
                            t,
                            function () {
                              return Xs(e, t, 0, e.i.duration);
                            },
                            null,
                          ),
                          6,
                        )
                      : e.m
                        ? x(
                            r,
                            $s(
                              e,
                              n.aa,
                              function () {
                                return Xs(e, n.aa, 0, e.i.duration);
                              },
                              null,
                            ),
                            0,
                          )
                        : r.A(0);
                });
              }
              function Gs(e, t, n, r, i, a, o, s, u) {
                var l, d;
                return D(function (c) {
                  return 1 == c.g
                    ? t == (l = mt).Na
                      ? (a || (e.h.u = n),
                        (function (e, t, n) {
                          ((e.m = t), (e.o = n));
                        })(e.h, r, i),
                        c.return())
                      : ((d = []),
                        x(
                          c,
                          (function (e, t, n, r, i) {
                            var a, o, s, u, l, d;
                            return D(function (c) {
                              return 1 == c.g
                                ? ((a = mt),
                                  (o = nu(e, t, n, r, i)),
                                  (s = o.type),
                                  (u = o.jc),
                                  (l = o.wf),
                                  (d = i.get(a.aa)) && (e.m = d.isAudioMuxedInVideo),
                                  s == au
                                    ? (e.j.has(t) && !u
                                        ? (e.j.get(t).destroy(), e.j.delete(t))
                                        : !e.j.has(t) && u
                                          ? e.j.set(t, u)
                                          : u &&
                                            (e.j.has(t) && e.j.get(t).transmux !== u.transmux
                                              ? (e.j.get(t).destroy(), e.j.set(t, u))
                                              : u.destroy()),
                                      c.return(!1))
                                    : s == su
                                      ? x(
                                          c,
                                          (function (e, t, n, r) {
                                            return $s(
                                              e,
                                              t,
                                              function () {
                                                if (t !== gt) {
                                                  if ((e.G.get(t), oe().Ib())) {
                                                    (e.j.has(t) && (e.j.get(t).destroy(), e.j.delete(t)),
                                                      r && e.j.set(t, r));
                                                    var i = n + e.B.addExtraFeaturesToSourceBuffer(n);
                                                    (e.l.get(t).changeType(i), e.G.set(t, n));
                                                  }
                                                  Ys(e, t);
                                                }
                                              },
                                              null,
                                            );
                                          })(e, t, l, u),
                                          3,
                                        )
                                      : s != ou
                                        ? c.A(3)
                                        : (u && u.destroy(), x(c, eu(e, i), 3)))
                                : c.return(!0);
                            });
                          })(e, t, o, s, u),
                          2,
                        ))
                    : (c.h ||
                        (d.push(
                          $s(
                            e,
                            t,
                            function () {
                              return Ws(e, t);
                            },
                            null,
                          ),
                        ),
                        e.m &&
                          d.push(
                            $s(
                              e,
                              l.aa,
                              function () {
                                return Ws(e, l.aa);
                              },
                              null,
                            ),
                          )),
                      a ||
                        (d.push(
                          $s(
                            e,
                            t,
                            function () {
                              return Ks(e, t, n);
                            },
                            null,
                          ),
                        ),
                        e.m &&
                          d.push(
                            $s(
                              e,
                              l.aa,
                              function () {
                                return Ks(e, l.aa, n);
                              },
                              null,
                            ),
                          )),
                      (0 == r && i == 1 / 0) ||
                        (d.push(
                          $s(
                            e,
                            t,
                            function () {
                              return qs(e, t, r, i);
                            },
                            null,
                          ),
                        ),
                        e.m &&
                          d.push(
                            $s(
                              e,
                              l.aa,
                              function () {
                                return qs(e, l.aa, r, i);
                              },
                              null,
                            ),
                          )),
                      d.length ? x(c, Promise.all(d), 0) : c.A(0));
                });
              }
              function zs(e) {
                D(function (t) {
                  return e.I.g || e.g.error || e.N || e.H || Os(e) || Us(e)
                    ? t.return()
                    : x(
                        t,
                        Js(e, function () {
                          Os(e) || Us(e) || e.i.clearLiveSeekableRange();
                        }),
                        0,
                      );
                });
              }
              function Xs(e, t, n, r) {
                if (r <= n) Ys(e, t);
                else {
                  if (e.C) {
                    var i = e.C;
                    "video" === t && i.g && i.g.flushBuffer(n, r);
                  }
                  e.l.get(t).remove(n, r);
                }
              }
              function Ws(e, t) {
                var n = e.l.get(t),
                  r = n.appendWindowStart,
                  i = n.appendWindowEnd;
                (n.abort(), (n.appendWindowStart = r), (n.appendWindowEnd = i), Ys(e, t));
              }
              function Ks(e, t, n) {
                (n < 0 && (n += 0.001), (e.l.get(t).timestampOffset = n), Ys(e, t));
              }
              function qs(e, t, n, r) {
                var i = e.l.get(t);
                ((i.appendWindowEnd === r && i.appendWindowStart === n) ||
                  ((i.appendWindowStart = 0), (i.appendWindowEnd = r), (i.appendWindowStart = n)),
                  Ys(e, t));
              }
              function Ys(e, t) {
                if (e.H || e.I.g) {
                  var n = e.o.get(t);
                  n && n.length && ((n = n[0]) && n.p && n.p.resolve(), e.o.set(t, []));
                } else (n = e.o.get(t)[0]) && (n.p.resolve(), Qs(e, t));
              }
              function $s(e, t, n, r) {
                return (
                  Qi(e.I),
                  (n = { start: n, p: new Ii(), uri: r }),
                  e.o.get(t).push(n),
                  1 == e.o.get(t).length && Zs(e, t),
                  n.p
                );
              }
              function Js(e, t) {
                var n, r, i, a, o, s, u, l, d, c, h;
                return D(function (p) {
                  switch (p.g) {
                    case 1:
                      for (
                        Qi(e.I), n = [], r = Array.from(e.l.keys()), i = g(r), a = i.next(), o = {};
                        !a.done;
                        o = { ready: void 0 }, a = i.next()
                      )
                        ((s = a.value),
                          (o.ready = new Ii()),
                          (u = {
                            start: (function (e) {
                              return function () {
                                return e.ready.resolve();
                              };
                            })(o),
                            p: o.ready,
                            uri: null,
                          }),
                          (l = e.o.get(s)).push(u),
                          n.push(o.ready),
                          1 == l.length && u.start());
                      return (w(p, 2), x(p, Promise.all(n), 4));
                    case 4:
                      A(p, 3);
                      break;
                    case 2:
                      throw E(p);
                    case 3:
                      return (w(p, 5, 6), x(p, t(), 6));
                    case 6:
                      for (k(p), d = g(r), c = d.next(); !c.done; c = d.next()) ((h = c.value), Qs(e, h));
                      I(p, 0);
                      break;
                    case 5:
                      throw new Ke(2, 3, 3015, E(p), e.g.error || "No error in the media element", null);
                  }
                });
              }
              function Qs(e, t) {
                (e.o.get(t).shift(), Zs(e, t));
              }
              function Zs(e, t) {
                var n = e.o.get(t)[0];
                if (n)
                  try {
                    n.start();
                  } catch (r) {
                    ("QuotaExceededError" == r.name
                      ? n.p.reject(new Ke(2, 3, 3017, t))
                      : Ls(e)
                        ? n.p.reject(
                            new Ke(2, 3, 3015, r, e.g.error || "No error in the media element", n.uri),
                          )
                        : n.p.reject(new Ke(2, 3, 3024, t)),
                      Qs(e, t));
                  }
              }
              function eu(e, t) {
                return Js(e, function () {
                  return (function (e, t) {
                    var n, r, i, a, o, s, u, l, d, c, h, p, f, m, v, y, b, T, w;
                    return D(function (A) {
                      if (1 == A.g) {
                        if (e.H || e.N) return A.return();
                        for (
                          n = mt,
                            e.H = !0,
                            e.m = !1,
                            r = e.g.currentTime,
                            i = e.g.autoplay,
                            e.g.paused || (e.Ua = !0),
                            e.ob && (e.g.autoplay = !1),
                            S(A, 2),
                            e.u.Qa(),
                            a = g(e.j.values()),
                            o = a.next();
                          !o.done;
                          o = a.next()
                        )
                          o.value.destroy();
                        for (s = g(e.l.values()), u = s.next(); !u.done; u = s.next()) {
                          l = u.value;
                          try {
                            e.i.removeSourceBuffer(l);
                          } catch (E) {}
                        }
                        return (
                          e.j.clear(),
                          e.l.clear(),
                          (d = e.i.duration),
                          (e.M = new Ii()),
                          (e.i = Ds(e, e.M)),
                          x(A, e.M, 4)
                        );
                      }
                      if (2 != A.g) {
                        for (
                          !isNaN(d) && d ? (e.i.duration = d) : !isNaN(e.ya) && e.ya && (e.i.duration = e.ya),
                            c = new Ii(),
                            h = e.i.sourceBuffers,
                            p = t.size,
                            f = 0,
                            m = function () {
                              ++f === p && (c.resolve(), e.u.Ma(h, "addsourcebuffer", m));
                            },
                            e.u.D(h, "addsourcebuffer", m),
                            v = g(t.keys()),
                            y = v.next();
                          !y.done;
                          y = v.next()
                        )
                          ((b = y.value), (T = t.get(b)), Ps(e, b, T, T.codecs));
                        return (
                          (w = t.get(n.aa)) && w.isAudioMuxedInVideo && (e.m = !0),
                          e.m && !e.o.has(n.aa) && e.o.set(n.aa, []),
                          x(A, c, 2)
                        );
                      }
                      return (
                        k(A),
                        (e.H = !1),
                        Qi(e.I),
                        e.u.Aa(e.g, "loadedmetadata", function () {
                          e.I.g || (e.g.currentTime = r);
                        }),
                        e.u.Aa(e.g, "canplaythrough", function () {
                          e.I.g || ((e.g.autoplay = i), e.Ua && ((e.Ua = !1), e.g.play()));
                        }),
                        I(A, 0)
                      );
                    });
                  })(e, t);
                });
              }
              function tu(e, t, n, r) {
                var i = !1,
                  a = pt("audio", (r || "").split(",")),
                  o = pt("video", (r || "").split(",")),
                  s = o;
                ("audio" == t && (s = a), s || (s = r));
                var u = lr(n, s),
                  l = gr(e.G.get(t)),
                  d = e.B.forceTransmux;
                if (
                  (!Qa(u) || (!e.J && br.includes(u))
                    ? (d = !0)
                    : d || n == l || (d = !oe().Nf() && br.includes(n)),
                  d && (s = nr((e = dr(n, s)))))
                ) {
                  var c = s();
                  (a && o && (i = !0), (u = c.convertCodecs(t, e)));
                }
                return (
                  !c && "video" === t && a && (u = lr(n, r)),
                  (t = pr(mr(u))),
                  { jc: c, jl: i, Th: gr(u), codec: t, mimeType: u }
                );
              }
              function nu(e, t, n, r, i) {
                if (t == gt) return { type: au, wf: n, jc: null };
                var a = pr(mr(e.G.get(t))),
                  o = gr(e.G.get(t)),
                  s = tu(e, t, n, r),
                  u = s.jc,
                  l = s.jl,
                  d = s.Th,
                  c = s.codec;
                s = s.mimeType;
                var h = !0;
                return (
                  l &&
                    e.G.has("audio") &&
                    ((n = tu(e, "audio", n, r)),
                    (r = pr(mr(e.G.get("audio")))),
                    (h = gr(e.G.get("audio"))),
                    (h = r == n.codec && h == n.Th),
                    n.jc && n.jc.destroy()),
                  a === c && o === d && h
                    ? { type: au, wf: s, jc: u }
                    : ((a = !0),
                      ((e.m && !i.has("audio")) || (l && u && !e.j.has(t))) && (a = !1),
                      (t = oe()),
                      a && "smooth" === e.B.codecSwitchingStrategy && t.Ib()
                        ? { type: su, wf: s, jc: u }
                        : (u && u.destroy(), { type: ou, wf: s, jc: null }))
                );
              }
              (((i = _s.prototype).destroy = function () {
                return this.I.destroy();
              }),
                (i.init = function (e, t, n, r) {
                  ((t = void 0 !== t && t), (n = void 0 === n ? "UNKNOWN" : n), (r = void 0 !== r && r));
                  var i,
                    a,
                    o,
                    s,
                    u,
                    l,
                    d = this;
                  return D(function (c) {
                    if (1 == c.g) return ((i = mt), x(c, d.M, 2));
                    if (3 != c.g)
                      return Os(d) || Us(d)
                        ? (W("Expected MediaSource to be open during init(); reopening the media source."),
                          (d.M = new Ii()),
                          (d.i = Ds(d, d.M)),
                          x(c, d.M, 3))
                        : c.A(3);
                    for (
                      d.J = t,
                        d.X = n,
                        d.kb = r,
                        d.eb = !d.J && "HLS" == d.X && !d.kb,
                        d.$.clear(),
                        d.V = null,
                        d.va = null,
                        d.T = null,
                        d.oa = null,
                        d.ma = new Ii(),
                        a = g(e.keys()),
                        o = a.next();
                      !o.done;
                      o = a.next()
                    )
                      ((s = o.value),
                        (u = e.get(s)),
                        Ps(d, s, u, u.codecs),
                        d.m ? (d.o.set(i.aa, []), d.o.set(i.wa, [])) : d.o.set(s, []));
                    ((l = e.get(i.aa)) && l.isAudioMuxedInVideo && (d.m = !0), T(c));
                  });
                }),
                (i.configure = function (e) {
                  ((this.B = e), this.h && (this.h.B = e.modifyCueCallback));
                }),
                (i.Gc = function () {
                  var e = {
                    total: this.H ? [] : $o(this.g.buffered),
                    audio: $o(Fs(this, "audio")),
                    video: $o(Fs(this, "video")),
                    text: [],
                  };
                  if (this.h) {
                    var t = this.h.g,
                      n = this.h.h;
                    null != t && null != n && e.text.push({ start: t, end: n });
                  }
                  return e;
                }),
                (i.remove = function (e, t, n, r) {
                  var i,
                    a,
                    o = this;
                  return D(function (s) {
                    return 1 == s.g
                      ? (e == (i = mt).wa && o.K && (o.K.remove(r), (a = o.h.g || 0), o.h.remove(a, n, !0)),
                        e == i.Na
                          ? x(s, o.h.remove(t, n), 0)
                          : n > t
                            ? x(
                                s,
                                $s(
                                  o,
                                  e,
                                  function () {
                                    return Xs(o, e, t, n);
                                  },
                                  null,
                                ),
                                5,
                              )
                            : s.A(0))
                      : o.m
                        ? x(
                            s,
                            $s(
                              o,
                              i.aa,
                              function () {
                                return Xs(o, i.aa, t, n);
                              },
                              null,
                            ),
                            0,
                          )
                        : s.A(0);
                  });
                }),
                (i.flush = function (e) {
                  var t,
                    n = this;
                  return D(function (r) {
                    return 1 == r.g
                      ? e == (t = mt).Na
                        ? r.return()
                        : x(
                            r,
                            $s(
                              n,
                              e,
                              function () {
                                ((n.g.currentTime -= 0.001), Ys(n, e));
                              },
                              null,
                            ),
                            2,
                          )
                      : n.m
                        ? x(
                            r,
                            $s(
                              n,
                              t.aa,
                              function () {
                                var e = t.aa;
                                ((n.g.currentTime -= 0.001), Ys(n, e));
                              },
                              null,
                            ),
                            0,
                          )
                        : r.A(0);
                  });
                }),
                (i.endOfStream = function (e) {
                  var t = this;
                  return D(function (n) {
                    return x(
                      n,
                      Js(t, function () {
                        Os(t) || Us(t) || (e ? t.i.endOfStream(e) : t.i.endOfStream());
                      }),
                      0,
                    );
                  });
                }),
                (i.Ab = function (e) {
                  var t = this;
                  return D(function (n) {
                    return x(
                      n,
                      Js(t, function () {
                        if (t.B.durationReductionEmitsUpdateEnd && e < t.i.duration)
                          for (var n = g(t.l.keys()), r = n.next(); !r.done; r = n.next()) {
                            r = r.value;
                            var i = { start: function () {}, p: new Ii(), uri: null };
                            t.o.get(r).unshift(i);
                          }
                        ((t.i.duration = e), (t.ya = e));
                      }),
                      0,
                    );
                  });
                }),
                (i.getDuration = function () {
                  return this.i.duration;
                }));
              var ru = e.URL.createObjectURL,
                iu = "sequence",
                au = "none",
                ou = "reset",
                su = "changeType";
              function uu(e, t, n) {
                ((this.i = e),
                  (this.F = t),
                  (this.u = this.l = 1 / 0),
                  (this.h = 1),
                  (this.g = this.j = null),
                  (this.B = 0),
                  (this.C = !0),
                  (this.J = !1),
                  (this.I = 0),
                  (this.G = void 0 === n || n),
                  (this.H = 0),
                  (this.o = !1),
                  (this.m = e));
              }
              function lu(e, t, n, r) {
                var i = this;
                ((this.u = r),
                  (this.g = e),
                  (this.F = t),
                  (this.h = n),
                  (this.j = new ne()),
                  (this.m = !1),
                  (this.l = 0),
                  (this.C = !1),
                  (this.H = this.G = 0),
                  (this.o = (function (e) {
                    if (!e.h.stallEnabled) return null;
                    var t = e.h.stallThreshold,
                      n = e.h.stallSkip;
                    return new cu(new hu(e.g), t, function () {
                      return D(function (t) {
                        if (1 == t.g)
                          return $o(e.g.buffered).length
                            ? n
                              ? ((e.g.currentTime += n), t.A(2))
                              : x(t, e.g.play(), 3)
                            : t.return();
                        if (2 != t.g) {
                          if (!e.g) return t.return();
                          (e.g.pause(), e.g.play());
                        }
                        (e.H++, e.u(new Li("stalldetected")), T(t));
                      });
                    });
                  })(this)),
                  (this.B = !1),
                  this.j.D(e, "waiting", function () {
                    return du(i);
                  }),
                  (this.i = new Mr(function () {
                    du(i);
                  }).Ea(this.h.gapJumpTimerTime)));
              }
              function du(e) {
                if (0 != e.g.readyState) {
                  if (e.g.seeking) {
                    if (!e.m) return;
                  } else e.m = !1;
                  if (!e.g.paused || (e.g.currentTime == e.l && (e.g.autoplay || e.g.currentTime != e.l))) {
                    var t;
                    if (!(t = !e.o)) {
                      var n = (t = e.o).h,
                        r = pu(n),
                        i = n.g.currentTime,
                        a = Date.now() / 1e3;
                      ((t.g == i && t.m == r) || ((t.l = a), (t.g = i), (t.m = r), (t.i = !1)),
                        (r = (i = a - t.l) >= t.o && r && !t.i) &&
                          (t.j && t.j(t.g, i), (t.i = !0), (t.g = n.g.currentTime)),
                        (t = !r));
                    }
                    t &&
                      ((t = e.g.currentTime),
                      (r = (function (e, t, n) {
                        return e &&
                          e.length &&
                          !Xo(e) &&
                          (e = $o(e).findIndex(function (e, r, i) {
                            return e.start > t && (0 == r || i[r - 1].end - t <= n);
                          })) >= 0
                          ? e
                          : null;
                      })((n = e.g.buffered), t, e.h.gapDetectionThreshold)),
                      null == r ||
                        (0 == r && !e.B) ||
                        ((i = n.start(r)),
                        (a = e.h.gapPadding) && (i = Math.ceil(100 * (i + a)) / 100),
                        i >= e.F.Gb() ||
                          i - t < 0.001 ||
                          (0 != r && n.end(r - 1),
                          (function (e, t) {
                            ((e.C = !0),
                              e.j.Aa(e.g, "seeked", function () {
                                e.C = !1;
                              }),
                              (e.g.currentTime = t));
                          })(e, i),
                          t == e.l && (e.l = i),
                          e.G++,
                          e.u(new Li("gapjumped")))));
                  }
                }
              }
              function cu(e, t, n) {
                ((this.h = e),
                  (this.m = pu(e)),
                  (this.g = e.g.currentTime),
                  (this.l = Date.now() / 1e3),
                  (this.i = !1),
                  (this.o = t),
                  (this.j = n));
              }
              function hu(e) {
                var t = this;
                ((this.g = e),
                  (this.h = new ne()),
                  (this.i = !1),
                  this.h.D(this.g, "audiofocuspaused", function () {
                    t.i = !0;
                  }),
                  this.h.D(this.g, "audiofocusgranted", function () {
                    t.i = !1;
                  }),
                  this.h.D(this.g, "audiofocuslost", function () {
                    t.i = !0;
                  }));
              }
              function pu(e) {
                if (e.g.paused || 0 == e.g.playbackRate || e.i || 0 == e.g.buffered.length) var t = !1;
                else
                  e: {
                    t = e.g.currentTime;
                    for (var n = (e = g($o(e.g.buffered))).next(); !n.done; n = e.next())
                      if (!(t < (n = n.value).start - 0.1 || t > n.end - 0.5)) {
                        t = !0;
                        break e;
                      }
                    t = !1;
                  }
                return t;
              }
              function fu(e, t, n, r) {
                t == HTMLMediaElement.HAVE_NOTHING || e.readyState >= t
                  ? r()
                  : ((t = gu.value().get(t)), n.Aa(e, t, r));
              }
              (((i = uu.prototype).getDuration = function () {
                return this.l;
              }),
                (i.Rj = function () {
                  return this.h;
                }),
                (i.Wi = function (e) {
                  this.i = e;
                }),
                (i.Ab = function (e) {
                  this.l = e;
                }),
                (i.Wj = function () {
                  return this.i;
                }),
                (i.Vi = function (e) {
                  this.B = e;
                }),
                (i.cd = function (e) {
                  (e && !this.C && (this.J = !0), (this.C = e));
                }),
                (i.Lf = function (e) {
                  this.u = e;
                }),
                (i.df = function () {
                  return this.u;
                }),
                (i.rh = function (e) {
                  this.F = e;
                }),
                (i.Jj = function () {
                  return this.F;
                }),
                (i.Hi = function (e, t) {
                  if (0 != e.length) {
                    var n = (Date.now() + this.B) / 1e3;
                    if (
                      0 !=
                      (e = e.filter(function (e) {
                        return e.start + t < n;
                      })).length
                    ) {
                      var r = e[e.length - 1].end + t;
                      (this.xf(e[0].start + t),
                        (this.h = e.reduce(function (e, t) {
                          return Math.max(e, t.end - t.start);
                        }, this.h)),
                        (this.g = Math.max(this.g, r)),
                        null != this.i && this.G && !this.o && (this.i = n - this.g - this.h));
                    }
                  }
                }),
                (i.me = function (e) {
                  if (0 != e.length) {
                    for (
                      var t = e[0].startTime,
                        n = e[0].endTime,
                        r = (Date.now() + this.B) / 1e3,
                        i = (e = g(e)).next();
                      !i.done;
                      i = e.next()
                    )
                      r < (i = i.value).startTime ||
                        ((t = Math.min(t, i.startTime)),
                        (n = Math.max(n, i.endTime)),
                        (this.h = Math.max(this.h, i.endTime - i.startTime)));
                    (this.xf(t),
                      (this.g = Math.max(this.g, n)),
                      null != this.i && this.G && !this.o && (this.i = r - this.g - this.h));
                  }
                }),
                (i.Gi = function (e, t) {
                  (this.xf(e), t == 1 / 0 || this.W() || (this.g = Math.max(this.g, t)));
                }),
                (i.Sj = function () {
                  return this.g;
                }),
                (i.qf = function () {
                  this.o = !0;
                }),
                (i.vk = function () {
                  return this.o;
                }),
                (i.sh = function (e) {
                  this.m = e;
                }),
                (i.Oj = function () {
                  return this.m;
                }),
                (i.xf = function (e) {
                  null == this.j ? (this.j = e) : this.J || (this.j = Math.min(this.j, e));
                }),
                (i.Wg = function (e) {
                  this.h = Math.max(this.h, e);
                }),
                (i.offset = function (e) {
                  (null != this.j && (this.j += e), null != this.g && (this.g += e));
                }),
                (i.W = function () {
                  return this.l == 1 / 0 && !this.C;
                }),
                (i.Vc = function () {
                  return this.l != 1 / 0 && !this.C;
                }),
                (i.Hb = function () {
                  return Math.max(this.I, this.Ic() - this.u);
                }),
                (i.Yi = function (e) {
                  this.I = e;
                }),
                (i.Ic = function () {
                  return this.W() || this.Vc()
                    ? Math.min(Math.max(0, (Date.now() + this.B) / 1e3 - this.h - this.i) + this.H, this.l)
                    : this.g
                      ? Math.min(this.g, this.l)
                      : this.l;
                }),
                (i.ae = function (e) {
                  var t = Math.max(this.j, this.I);
                  return this.u == 1 / 0
                    ? Math.ceil(1e3 * t) / 1e3
                    : Math.max(t, Math.min(this.Ic() - this.u + e, this.Gb()));
                }),
                (i.Zb = function () {
                  return this.ae(0);
                }),
                (i.Gb = function () {
                  return Math.max(0, this.Ic() - (this.W() || this.Vc() ? this.F : 0));
                }),
                (i.kj = function () {
                  return !(null == this.i || (null != this.g && this.G));
                }),
                (i.Ui = function (e) {
                  this.H = e;
                }),
                (i.Ej = function () {
                  return this.H;
                }),
                V("shaka.media.PresentationTimeline", uu),
                (uu.prototype.getAvailabilityTimeOffset = uu.prototype.Ej),
                (uu.prototype.setAvailabilityTimeOffset = uu.prototype.Ui),
                (uu.prototype.usingPresentationStartTime = uu.prototype.kj),
                (uu.prototype.getSeekRangeEnd = uu.prototype.Gb),
                (uu.prototype.getSeekRangeStart = uu.prototype.Zb),
                (uu.prototype.getSafeSeekRangeStart = uu.prototype.ae),
                (uu.prototype.getSegmentAvailabilityEnd = uu.prototype.Ic),
                (uu.prototype.setUserSeekStart = uu.prototype.Yi),
                (uu.prototype.getSegmentAvailabilityStart = uu.prototype.Hb),
                (uu.prototype.isInProgress = uu.prototype.Vc),
                (uu.prototype.isLive = uu.prototype.W),
                (uu.prototype.offset = uu.prototype.offset),
                (uu.prototype.notifyMaxSegmentDuration = uu.prototype.Wg),
                (uu.prototype.notifyMinSegmentStartTime = uu.prototype.xf),
                (uu.prototype.getInitialProgramDateTime = uu.prototype.Oj),
                (uu.prototype.setInitialProgramDateTime = uu.prototype.sh),
                (uu.prototype.isStartTimeLocked = uu.prototype.vk),
                (uu.prototype.lockStartTime = uu.prototype.qf),
                (uu.prototype.getMaxSegmentEndTime = uu.prototype.Sj),
                (uu.prototype.notifyPeriodDuration = uu.prototype.Gi),
                (uu.prototype.notifySegments = uu.prototype.me),
                (uu.prototype.notifyTimeRange = uu.prototype.Hi),
                (uu.prototype.getDelay = uu.prototype.Jj),
                (uu.prototype.setDelay = uu.prototype.rh),
                (uu.prototype.getSegmentAvailabilityDuration = uu.prototype.df),
                (uu.prototype.setSegmentAvailabilityDuration = uu.prototype.Lf),
                (uu.prototype.setStatic = uu.prototype.cd),
                (uu.prototype.setClockOffset = uu.prototype.Vi),
                (uu.prototype.getPresentationStartTime = uu.prototype.Wj),
                (uu.prototype.setDuration = uu.prototype.Ab),
                (uu.prototype.setPresentationStartTime = uu.prototype.Wi),
                (uu.prototype.getMaxSegmentDuration = uu.prototype.Rj),
                (uu.prototype.getDuration = uu.prototype.getDuration),
                (lu.prototype.release = function () {
                  (this.j && (this.j.release(), (this.j = null)),
                    null != this.i && (this.i.stop(), (this.i = null)),
                    this.o && (this.o.release(), (this.o = null)),
                    (this.g = this.F = this.u = null));
                }),
                (lu.prototype.zd = function () {
                  ((this.B = !0), this.i && this.i.Ea(this.h.gapJumpTimerTime), du(this));
                }),
                (cu.prototype.release = function () {
                  (this.h && this.h.release(), (this.j = this.h = null));
                }),
                (hu.prototype.release = function () {
                  (this.h && this.h.release(), (this.h = null));
                }));
              var gu = new ae(function () {
                return new Map([
                  [HTMLMediaElement.HAVE_METADATA, "loadedmetadata"],
                  [HTMLMediaElement.HAVE_CURRENT_DATA, "loadeddata"],
                  [HTMLMediaElement.HAVE_FUTURE_DATA, "canplay"],
                  [HTMLMediaElement.HAVE_ENOUGH_DATA, "canplaythrough"],
                ]);
              });
              function mu(e, t, n, r) {
                var i = this;
                ((this.g = e),
                  (this.m = t),
                  (this.u = n),
                  (this.l = null),
                  (this.j = function () {
                    return (null == i.l && (i.l = r()), i.l);
                  }),
                  (this.o = !1),
                  (this.h = new ne()),
                  (this.i = new Tu(e)),
                  fu(this.g, HTMLMediaElement.HAVE_METADATA, this.h, function () {
                    bu(i, i.j());
                  }));
              }
              function vu(e) {
                return e.o ? e.g.currentTime : e.j();
              }
              function yu(e, t) {
                e.g.readyState > 0
                  ? wu(e.i, t)
                  : fu(e.g, HTMLMediaElement.HAVE_METADATA, e.h, function () {
                      bu(e, e.j());
                    });
              }
              function bu(e, t) {
                Math.abs(e.g.currentTime - t) < 0.001
                  ? xu(e)
                  : (e.h.Aa(e.g, "seeking", function () {
                      xu(e);
                    }),
                    wu(e.i, e.g.currentTime && 0 != e.g.currentTime ? e.g.currentTime : t));
              }
              function xu(e) {
                ((e.o = !0),
                  e.h.D(e.g, "seeking", function () {
                    return e.m();
                  }),
                  e.u(e.g.currentTime));
              }
              function Tu(e) {
                var t = this;
                ((this.g = e),
                  (this.m = 10),
                  (this.j = this.l = this.i = 0),
                  (this.h = new Mr(function () {
                    t.i <= 0 || t.g.currentTime != t.l || t.g.currentTime === t.j
                      ? t.h.stop()
                      : ((t.g.currentTime = t.j), t.i--);
                  })));
              }
              function wu(e, t) {
                ((e.l = e.g.currentTime), (e.j = t), (e.i = e.m), (e.g.currentTime = t), e.h.Ea(0.1));
              }
              function Su(e) {
                ((this.g = e), (this.i = !1), (this.h = null), (this.j = new ne()));
              }
              function Au(e) {
                return e.g.getStartDate && ((e = e.g.getStartDate().getTime()), !isNaN(e)) ? e / 1e3 : null;
              }
              function Eu(e, t) {
                return (
                  (e = e.g.seekable).length > 0 &&
                    ((t = Math.max(e.start(0), t)), (t = Math.min(e.end(e.length - 1), t))),
                  t
                );
              }
              function ku(e, t, n, r, i, a) {
                var o = this;
                ((this.h = e),
                  (this.g = t.presentationTimeline),
                  (this.l = n),
                  (this.u = i),
                  (this.o = null),
                  (this.i = new lu(e, t.presentationTimeline, n, a)),
                  (this.j = new mu(
                    e,
                    function () {
                      e: {
                        var e = o.i;
                        ((e.m = !0), (e.B = !1), e.i && e.i.Ea(e.h.gapJumpTimerTime), du(e));
                        var t = vu(o.j);
                        if (((e = Mu(o, t)), !Za() && Math.abs(e - t) > 0.001)) {
                          t = !1;
                          var n = oe().Si();
                          if (n) {
                            var r = Date.now() / 1e3;
                            (!o.o || o.o < r - n) && ((o.o = r), (t = !0));
                          } else t = !0;
                          if (t) {
                            (yu(o.j, e), (e = void 0));
                            break e;
                          }
                        }
                        (o.u(), (e = void 0));
                      }
                      return e;
                    },
                    function (e) {
                      var t = o.i;
                      (t.g.seeking && !t.m && ((t.m = !0), (t.l = e)),
                        t.i && t.i.Ea(t.h.gapJumpTimerTime),
                        du(t));
                    },
                    function () {
                      return Iu(o, r);
                    },
                  )),
                  (this.m = new Mr(function () {
                    if (0 != o.h.readyState && !o.h.paused) {
                      var e = vu(o.j),
                        t = o.g.Zb(),
                        n = o.g.Gb();
                      (n - t < 3 && (t = n - 3), e < t && ((e = Mu(o, e)), (o.h.currentTime = e)));
                    }
                  })));
              }
              function Iu(e, t) {
                return (
                  null == t
                    ? (t = e.g.getDuration() < 1 / 0 ? e.g.Zb() : e.g.Gb())
                    : t instanceof Date
                      ? (t = t.getTime() / 1e3 - (e.g.m || e.g.i))
                      : t < 0 && (t = e.g.Gb() + t),
                  Cu(e, Ru(e, t))
                );
              }
              function Cu(e, t) {
                var n = e.g.getDuration();
                return t >= n ? n - e.l.durationBackoff : t;
              }
              function Mu(e, t) {
                var n = e.l.rebufferingGoal,
                  r = e.l.safeSeekOffset,
                  i = e.g.Zb(),
                  a = e.g.Gb(),
                  o = e.g.getDuration();
                a - i < 3 && (i = a - 3);
                var s = e.g.ae(n),
                  u = e.g.ae(r);
                return (
                  (n = e.g.ae(n + r)),
                  t >= o
                    ? Cu(e, t)
                    : t > a
                      ? a - e.l.safeSeekEndOffset
                      : t < i
                        ? e.g.W() && e.l.returnToEndOfLiveWindowWhenOutside
                          ? a - e.l.safeSeekEndOffset
                          : qo(e.h.buffered, u)
                            ? u
                            : n
                        : t >= s || qo(e.h.buffered, t)
                          ? t
                          : n
                );
              }
              function Ru(e, t) {
                var n = e.g.Zb();
                return t < n ? n : t > (e = e.g.Gb()) ? e : t;
              }
              function _u(e) {
                ((this.g = e), (this.m = null), (this.i = 0), (this.o = !1));
              }
              function Du(e) {
                return e.g[0] || null;
              }
              function Pu(e, t, n) {
                return new _u([
                  (e = new Fo(
                    e,
                    e + t,
                    function () {
                      return n;
                    },
                    0,
                    null,
                    null,
                    e,
                    e,
                    e + t,
                  )),
                ]);
              }
              function Lu(e, t, n, r) {
                ((this.i = e), (this.h = t), (this.g = n), (this.reverse = r));
              }
              function Nu() {
                (_u.call(this, []), (this.h = []));
              }
              function Ou(e) {
                var t = this;
                ((this.g = e),
                  (this.j = !1),
                  (this.i = this.g.cf()),
                  (this.h = new Mr(function () {
                    t.g.Di(0.25 * t.i);
                  })));
              }
              function Uu(e) {
                e.h.stop();
                var t = e.j ? 0 : e.i;
                if (t >= 0)
                  try {
                    return void (e.g.cf() != t && e.g.uh(t));
                  } catch (n) {}
                (e.h.Ea(0.25), 0 != e.g.cf() && e.g.uh(0));
              }
              function Bu(e) {
                var t = this;
                ((this.j = e),
                  (this.h = new ne()),
                  (this.g = new Set()),
                  (this.i = new Mr(function () {
                    ju(t, !1);
                  }).Jb()),
                  e.paused || this.i.Ea(0.25),
                  this.h.D(e, "playing", function () {
                    t.i.Jb().Ea(0.25);
                  }),
                  this.h.D(e, "pause", function () {
                    t.i.stop();
                  }));
              }
              function ju(e, t) {
                for (var n = e.j.currentTime, r = (e = g(e.g)).next(); !r.done; r = e.next()) r.value.j(n, t);
              }
              function Fu(e) {
                (Ui.call(this), (this.g = new Map()), (this.h = e));
              }
              function Vu(e, t, n) {
                return !!(
                  (e = e.h()[n]) &&
                  e.length > 0 &&
                  ((n = e[e.length - 1].end), t >= e[0].start && t < n)
                );
              }
              function Hu(e) {
                var t = {
                  bandwidth: e.bandwidth || 0,
                  audioSamplingRate: null,
                  codecs: e.codecs,
                  contentType: e.type,
                  frameRate: null,
                  height: null,
                  mimeType: e.mimeType,
                  channelsCount: null,
                  pixelAspectRatio: null,
                  width: null,
                  label: null,
                  roles: e.roles,
                  language: null,
                };
                return (
                  "video" == e.type &&
                    ((t.frameRate = e.frameRate || null),
                    (t.height = e.height || null),
                    (t.pixelAspectRatio = e.pixelAspectRatio || null),
                    (t.width = e.width || null)),
                  "audio" == e.type &&
                    ((t.audioSamplingRate = e.audioSamplingRate),
                    (t.channelsCount = e.channelsCount),
                    (t.label = e.label || null),
                    (t.language = e.language)),
                  t
                );
              }
              function Gu(e) {
                (Ui.call(this), (this.h = new Map()), (this.i = e), (this.g = null));
              }
              function zu(e, t) {
                var n =
                  t.schemeIdUri + "_" + t.id + "_" + t.startTime.toFixed(1) + "_" + t.endTime.toFixed(1);
                e.h.has(n) ||
                  (e.h.set(n, t),
                  (t = new Li("regionadd", new Map([["region", t]]))),
                  e.dispatchEvent(t),
                  (function (e) {
                    e.g ||
                      (e.g = new Mr(function () {
                        for (var t = e.i(), n = g(e.h), r = n.next(); !r.done; r = n.next()) {
                          var i = g(r.value);
                          ((r = i.next().value),
                            (i = i.next().value).endTime < t.start &&
                              (e.h.delete(r),
                              (r = new Li("regionremove", new Map([["region", i]]))),
                              e.dispatchEvent(r)));
                        }
                        !e.h.size && e.g && (e.g.stop(), (e.g = null));
                      }).Ea(2));
                  })(e));
              }
              function Xu(e, t, n, r, i) {
                ((this.m = e),
                  (this.i = t),
                  (this.l = n),
                  (this.g = new Map()),
                  (this.j = new Map()),
                  (this.h = null),
                  (this.o = r),
                  (this.u =
                    i ||
                    function (e, t) {
                      return !(t.fastSwitching && e.Xc && e.je);
                    }));
              }
              function Wu(e, t) {
                e.l = t;
                for (var n = (e = g(e.g.values())).next(); !n.done; n = e.next()) n.value.g = t;
              }
              function Ku(e, t, n) {
                if (((n = void 0 !== n && n), !e.i.segmentIndex)) return Promise.resolve();
                if ((e.h || (e.h = e.i.segmentIndex.Xb(t, !0, e.o)), !e.h)) return Promise.resolve();
                for (n && e.h.next(), t = []; e.g.size < e.m && (n = e.h.next().value); ) {
                  var r = !0;
                  if (
                    (n.isPreload() && null != n.endByte && (r = !1),
                    2 == n.Kc() && (r = !1),
                    n.$b(!1) && (r = !1),
                    r && n.ea && t.push(qu(e, n.ea)),
                    r && !e.g.has(n) && ((r = new el(e.l)), t.push(tl(r, n, e.i)), e.g.set(n, r)),
                    !e.u(n, e.i))
                  )
                    break;
                }
                return (Ju(e), Promise.all(t));
              }
              function qu(e, t) {
                if (
                  !e.i.segmentIndex ||
                  t.$b() ||
                  Array.from(e.j.keys()).some(function (e) {
                    return jo(e, t);
                  })
                )
                  return Promise.resolve();
                var n = new el(e.l),
                  r = tl(n, t, e.i);
                return (e.j.set(t, n), r);
              }
              function Yu(e, t) {
                for (var n = (t = g(t.keys())).next(); !n.done; n = t.next()) (n = n.value) && Zu(e, n);
              }
              function $u(e) {
                (Yu(e, e.g), Yu(e, e.j), (e.h = null));
              }
              function Ju(e) {
                if (e.g.size)
                  for (
                    var t = Array.from(e.g.keys()), n = g(e.j.keys()), r = n.next(), i = {};
                    !r.done;
                    i = { Qg: void 0 }, r = n.next()
                  )
                    ((i.Qg = r.value),
                      t.some(
                        (function (e) {
                          return function (t) {
                            return jo(t.ea, e.Qg);
                          };
                        })(i),
                      ) || Zu(e, i.Qg));
              }
              function Qu(e, t) {
                e.m = t;
                for (var n = Array.from(e.g.keys()); n.length > t; ) {
                  var r = n.pop();
                  r && Zu(e, r);
                }
                Ju(e);
              }
              function Zu(e, t) {
                var n = e.g;
                (t instanceof Bo && (n = e.j), (e = n.get(t)), n.delete(t), e && e.abort());
              }
              function el(e) {
                ((this.g = e), (this.oe = this.Bh = null));
              }
              function tl(e, t, n) {
                var r = new Uint8Array(0);
                return (
                  (e.oe = e.g(t, n, function (t) {
                    return D(function (n) {
                      if (1 == n.g)
                        return ((r = r.byteLength > 0 ? ut(r, t) : t), e.Bh ? x(n, e.Bh(r), 3) : n.A(0));
                      ((r = new Uint8Array(0)), T(n));
                    });
                  })),
                  e.oe.promise.catch(function (e) {
                    return e instanceof Ke && 7001 == e.code ? Promise.resolve() : Promise.reject(e);
                  })
                );
              }
              function nl(e) {
                var t = gr(e);
                return {
                  type: t.split("/")[0],
                  mimeType: t,
                  codecs: (e = mr(e)),
                  language: null,
                  height: null,
                  width: null,
                  channelCount: null,
                  sampleRate: null,
                  closedCaptions: new Map(),
                  ze: null,
                  colorGamut: null,
                  frameRate: null,
                  timescale: null,
                };
              }
              function rl(e, t, n) {
                function r(e) {
                  o = e.name;
                  var t = e.reader;
                  t.skip(24);
                  var n = t.Ca(),
                    r = t.Ca();
                  (t.skip(50), (p = String(n)), (h = String(r)), e.reader.Ia() && oa(e));
                }
                function i(e) {
                  var t = ao(e.reader);
                  ((f = t.channelCount), (m = t.sampleRate), a(e.name));
                }
                function a(e) {
                  switch ((e = e.toLowerCase())) {
                    case "avc1":
                    case "avc3":
                      (u.push(e + ".42E01E"), (d = !0));
                      break;
                    case "hev1":
                    case "hvc1":
                      (u.push(e + ".1.6.L93.90"), (d = !0));
                      break;
                    case "dvh1":
                    case "dvhe":
                      (u.push(e + ".05.04"), (d = !0));
                      break;
                    case "vp09":
                      (u.push(e + ".00.10.08"), (d = !0));
                      break;
                    case "av01":
                      (u.push(e + ".0.01M.08"), (d = !0));
                      break;
                    case "mp4a":
                      (s.push("mp4a.40.2"), (l = !0));
                      break;
                    case "ac-3":
                    case "ec-3":
                    case "ac-4":
                    case "opus":
                    case "flac":
                      (s.push(e), (l = !0));
                      break;
                    case "apac":
                      (s.push("apac.31.00"), (l = !0));
                  }
                }
                var o,
                  s = [],
                  u = [],
                  l = !1,
                  d = !1,
                  c = null,
                  h = null,
                  p = null,
                  f = null,
                  m = null,
                  v = null,
                  y = null,
                  b = null;
                if (
                  (new aa()
                    .box("moov", oa)
                    .box("trak", oa)
                    .box("mdia", oa)
                    .S("mdhd", function (e) {
                      ((e = ro(e.reader, e.version)), (c = e.language), (b = e.timescale));
                    })
                    .box("minf", oa)
                    .box("stbl", oa)
                    .S("stsd", sa)
                    .box("mp4a", function (e) {
                      var t = ao(e.reader);
                      ((f = t.channelCount), (m = t.sampleRate), e.reader.Ia() ? oa(e) : a(e.name));
                    })
                    .box("esds", function (e) {
                      e = e.reader;
                      for (var t, n, r = "mp4a"; e.Ia(); ) {
                        t = e.Y();
                        for (var i = e.Y(); 128 & i; ) i = e.Y();
                        if (3 == t)
                          (e.Ca(), 128 & (i = e.Y()) && e.Ca(), 64 & i && e.skip(e.Y()), 32 & i && e.Ca());
                        else if (4 == t) ((n = e.Y()), e.skip(12));
                        else if (5 == t) break;
                      }
                      (n &&
                        ((r += "." + so(n)),
                        5 == t &&
                          e.Ia() &&
                          (31 == (n = (248 & (t = e.Y())) >> 3) &&
                            e.Ia() &&
                            (n = 32 + ((7 & t) << 3) + ((224 & e.Y()) >> 5)),
                          (r += "." + n))),
                        s.push(r),
                        (l = !0));
                    })
                    .box("ac-3", i)
                    .box("ec-3", i)
                    .box("ac-4", i)
                    .box("Opus", i)
                    .box("fLaC", i)
                    .box("apac", i)
                    .box("avc1", r)
                    .box("avc3", r)
                    .box("hev1", r)
                    .box("hvc1", r)
                    .box("dva1", r)
                    .box("dvav", r)
                    .box("dvh1", r)
                    .box("dvhe", r)
                    .box("vp09", r)
                    .box("av01", r)
                    .box("avcC", function (e) {
                      var t = o || "";
                      switch (o) {
                        case "dvav":
                          t = "avc3";
                          break;
                        case "dva1":
                          t = "avc1";
                      }
                      ((e = e.reader).skip(1),
                        (e = t + "." + so(e.Y()) + so(e.Y()) + so(e.Y())),
                        u.push(e),
                        (d = !0));
                    })
                    .box("hvcC", function (e) {
                      var t = o || "";
                      switch (o) {
                        case "dvh1":
                          t = "hvc1";
                          break;
                        case "dvhe":
                          t = "hev1";
                      }
                      var n = e.reader;
                      n.skip(1);
                      var r = ["", "A", "B", "C"][(e = n.Y()) >> 6],
                        i = 31 & e,
                        a = n.U(),
                        s = (32 & e) >> 5 ? "H" : "L";
                      ((e = [n.Y(), n.Y(), n.Y(), n.Y(), n.Y(), n.Y()]), (n = n.Y()));
                      for (var l = 0, c = 0; c < 32 && ((l |= 1 & a), 31 != c); c++) ((l <<= 1), (a >>= 1));
                      for (
                        t = t + "." + r + i + "." + so(l, !0), t += "." + s + n, r = "", i = e.length;
                        i--;
                      )
                        ((s = e[i]) || r) && (r = "." + s.toString(16).toUpperCase() + r);
                      ((t += r), u.push(t), (d = !0));
                    })
                    .box("dvcC", function (e) {
                      var t = o || "";
                      switch (o) {
                        case "hvc1":
                          t = "dvh1";
                          break;
                        case "hev1":
                          t = "dvhe";
                          break;
                        case "avc1":
                          t = "dva1";
                          break;
                        case "avc3":
                          t = "dvav";
                          break;
                        case "av01":
                          t = "dav1";
                      }
                      var n = e.reader;
                      (n.skip(2),
                        (e = n.Y()),
                        (n = n.Y()),
                        u.push(t + "." + uo((e >> 1) & 127) + "." + uo(((e << 5) & 32) | ((n >> 3) & 31))),
                        (d = !0));
                    })
                    .box("dvvC", function (e) {
                      var t = o || "";
                      switch (o) {
                        case "hvc1":
                          t = "dvh1";
                          break;
                        case "hev1":
                          t = "dvhe";
                          break;
                        case "avc1":
                          t = "dva1";
                          break;
                        case "avc3":
                          t = "dvav";
                          break;
                        case "av01":
                          t = "dav1";
                      }
                      var n = e.reader;
                      (n.skip(2),
                        (e = n.Y()),
                        (n = n.Y()),
                        u.push(t + "." + uo((e >> 1) & 127) + "." + uo(((e << 5) & 32) | ((n >> 3) & 31))),
                        (d = !0));
                    })
                    .S("vpcC", function (e) {
                      var t = o || "",
                        n = e.reader;
                      e = n.Y();
                      var r = n.Y();
                      ((n = (n.Y() >> 4) & 15),
                        u.push(t + "." + uo(e) + "." + uo(r) + "." + uo(n)),
                        (d = !0));
                    })
                    .box("av1C", function (e) {
                      var t = o || "";
                      "dav1" === o && (t = "av01");
                      var n = e.reader;
                      n.skip(1);
                      var r = (e = n.Y()) >>> 5,
                        i = (64 & (n = n.Y())) >> 6;
                      (u.push(
                        t +
                          "." +
                          r +
                          "." +
                          uo(31 & e) +
                          (n >>> 7 ? "H" : "M") +
                          "." +
                          uo(2 === r && i ? ((32 & n) >> 5 ? 12 : 10) : i ? 10 : 8) +
                          "." +
                          ((16 & n) >> 4) +
                          "." +
                          ((8 & n) >> 3) +
                          ((4 & n) >> 2) +
                          (3 & n) +
                          "." +
                          uo(1) +
                          "." +
                          uo(1) +
                          "." +
                          uo(1) +
                          ".0",
                      ),
                        (d = !0));
                    })
                    .box("enca", la)
                    .box("encv", ua)
                    .box("sinf", oa)
                    .box("frma", function (e) {
                      a((e = oo(e.reader).codec));
                    })
                    .box("colr", function (e) {
                      u = u.map(function (t) {
                        if (t.startsWith("av01.")) {
                          var n = e.reader,
                            r = n.Pa(),
                            i = n.Tb(4, !1),
                            a = String.fromCharCode(i[0]);
                          if (
                            ((a += String.fromCharCode(i[1])),
                            (a += String.fromCharCode(i[2])),
                            "nclx" === (a += String.fromCharCode(i[3])))
                          ) {
                            ((i = n.Ca()), (a = n.Ca()));
                            var o = n.Ca(),
                              s = n.Y() >> 7,
                              u = t.split(".");
                            10 == u.length &&
                              ((u[6] = uo(i)),
                              (u[7] = uo(a)),
                              (u[8] = uo(o)),
                              (u[9] = String(s)),
                              (t = u.join(".")));
                          }
                          n.seek(r);
                        }
                        return t;
                      });
                      var t = (function (e) {
                          var t = null,
                            n = null,
                            r = e.Tb(4, !1),
                            i = String.fromCharCode(r[0]);
                          if (
                            ((i += String.fromCharCode(r[1])),
                            (i += String.fromCharCode(r[2])),
                            "nclx" === (i += String.fromCharCode(r[3])))
                          ) {
                            switch (e.Ca()) {
                              case 1:
                              case 5:
                              case 6:
                              case 7:
                                t = "srgb";
                                break;
                              case 9:
                                t = "rec2020";
                                break;
                              case 11:
                              case 12:
                                t = "p3";
                            }
                            switch (((r = e.Ca()), e.Ca(), r)) {
                              case 1:
                              case 6:
                              case 13:
                              case 14:
                              case 15:
                                n = "SDR";
                                break;
                              case 16:
                                n = "PQ";
                                break;
                              case 18:
                                n = "HLG";
                            }
                          }
                          return { colorGamut: t, ze: n };
                        })(e.reader),
                        n = t.colorGamut;
                      ((v = t.ze), (y = n));
                    })
                    .parse(e || t, !0, !0),
                  !s.length && !u.length)
                )
                  return null;
                var x = l && !d,
                  T = new Map();
                if (d && !n) {
                  ((n = new Rt("video/mp4")), e && n.init(e));
                  try {
                    n.Af(t);
                    for (var w = g(n.Zf()), S = w.next(); !S.done; S = w.next()) {
                      var A = S.value;
                      T.set(A, A);
                    }
                  } catch (E) {}
                  n.Pd();
                }
                return {
                  type: x ? "audio" : "video",
                  mimeType: x ? "audio/mp4" : "video/mp4",
                  codecs: il(s.concat(u)).join(", "),
                  language: c,
                  height: h,
                  width: p,
                  channelCount: f,
                  sampleRate: m,
                  closedCaptions: T,
                  ze: v,
                  colorGamut: y,
                  frameRate: null,
                  timescale: b,
                };
              }
              function il(e) {
                for (var t = new Set(), n = [], r = (e = g(e)).next(); !r.done; r = e.next()) {
                  var i = fr((r = r.value));
                  t.has(i) || (n.push(r), t.add(i));
                }
                return (
                  (t = ft("audio", n)),
                  (r = ft("video", n)),
                  (e = ft(gt, n)),
                  (r = (function (e) {
                    if (e.length <= 1) return e;
                    var t = e.find(function (e) {
                      return (
                        e.startsWith("dvav.") ||
                        e.startsWith("dva1.") ||
                        e.startsWith("dvh1.") ||
                        e.startsWith("dvhe.") ||
                        e.startsWith("dav1.") ||
                        e.startsWith("dvc1.") ||
                        e.startsWith("dvi1.")
                      );
                    });
                    return t
                      ? Qa('video/mp4; codecs="' + t + '"')
                        ? [t]
                        : e.filter(function (e) {
                            return e != t;
                          })
                      : e;
                  })(r)),
                  (t = t.concat(r).concat(e)),
                  n.length && !t.length ? n : t
                );
              }
              function al(t, n, r) {
                var i, a, o, s, u;
                return D(function (l) {
                  if (1 == l.g) return (i = n).cryptoKey ? l.A(2) : x(l, i.fetchKey(), 3);
                  if (!(a = i.iv))
                    for (
                      a = Ne(new ArrayBuffer(16)), o = i.firstMediaSequenceNumber + r, s = a.byteLength - 1;
                      s >= 0;
                      s--
                    )
                      ((a[s] = 255 & o), (o >>= 8));
                  return (
                    (u =
                      "CBC" == n.blockCipherMode
                        ? { name: "AES-CBC", iv: a }
                        : { name: "AES-CTR", counter: a, length: 64 }),
                    l.return(e.crypto.subtle.decrypt(u, i.cryptoKey, t))
                  );
                });
              }
              function ol(e, t, n) {
                var r, i, a, o, s, u, l;
                return D(function (d) {
                  switch (d.g) {
                    case 1:
                      return (
                        (r = sl(e)),
                        (i = ll.get(r))
                          ? d.return(i)
                          : ((a = 0),
                            (o = Gi([e], n)),
                            w(d, 2),
                            (o.method = "HEAD"),
                            x(d, t.request(a, o).promise, 4))
                      );
                    case 4:
                      ((s = d.h), (i = s.headers["content-type"]), A(d, 3));
                      break;
                    case 2:
                      if (!(u = E(d)) || (1002 != u.code && 1001 != u.code)) {
                        d.A(3);
                        break;
                      }
                      return ((o.method = "GET"), x(d, t.request(a, o).promise, 6));
                    case 6:
                      ((l = d.h), (i = l.headers["content-type"]));
                    case 3:
                      return d.return(i ? i.toLowerCase().split(";").shift() : "");
                  }
                });
              }
              function sl(e) {
                return 1 == (e = new me(e).Sb.split("/").pop().split(".")).length
                  ? ""
                  : e.pop().toLowerCase();
              }
              function ul(e, t, n, r, i) {
                return (
                  (e = Gi(e, r, i)),
                  (0 == t && null == n) ||
                    (e.headers.Range = n ? "bytes=" + t + "-" + n : "bytes=" + t + "-"),
                  e
                );
              }
              ((mu.prototype.release = function () {
                (this.h && (this.h.release(), (this.h = null)),
                  null != this.i && (this.i.release(), (this.i = null)),
                  (this.m = function () {}),
                  (this.g = null));
              }),
                (Tu.prototype.release = function () {
                  (this.h && (this.h.stop(), (this.h = null)), (this.g = null));
                }),
                ((i = Su.prototype).ready = function () {
                  var e = this;
                  fu(this.g, HTMLMediaElement.HAVE_FUTURE_DATA, this.j, function () {
                    !(function () {
                      if (null == e.h || (0 == e.h && e.g.duration != 1 / 0)) e.i = !0;
                      else {
                        var t = e.g.currentTime,
                          n = null;
                        if ("number" == typeof e.h) n = e.h;
                        else if (e.h instanceof Date) {
                          var r = Au(e);
                          null !== r && ((n = e.h.getTime() / 1e3 - r), (n = Eu(e, n)));
                        }
                        null == n
                          ? (e.i = !0)
                          : (n < 0 && (n = Math.max(0, t + n)),
                            t != n
                              ? (e.j.Aa(e.g, "seeking", function () {
                                  e.i = !0;
                                }),
                                (e.g.currentTime = n))
                              : (e.i = !0));
                      }
                    })();
                  });
                }),
                (i.release = function () {
                  (this.j && (this.j.release(), (this.j = null)), (this.g = null));
                }),
                (i.$f = function (e) {
                  this.h = this.i ? this.h : e;
                }),
                (i.Qd = function () {
                  var e = this.i ? this.g.currentTime : this.h;
                  return (
                    e instanceof Date && (e = Eu(this, (e = e.getTime() / 1e3 - (Au(this) || 0)))),
                    e || 0
                  );
                }),
                (i.Nh = function () {
                  return 0;
                }),
                (i.Lh = function () {
                  return 0;
                }),
                (i.Mh = function () {
                  return !1;
                }),
                (i.Fi = function () {}),
                (i.ri = function () {
                  var e = Ko(this.g.buffered);
                  return null != e && e >= this.g.duration - 1;
                }),
                ((i = ku.prototype).ready = function () {
                  this.m.Ea(0.25);
                }),
                (i.release = function () {
                  (this.j && (this.j.release(), (this.j = null)),
                    this.i && (this.i.release(), (this.i = null)),
                    this.m && (this.m.stop(), (this.m = null)),
                    (this.h = this.j = this.g = this.l = null),
                    (this.u = function () {}));
                }),
                (i.$f = function (e) {
                  yu(this.j, Iu(this, e));
                }),
                (i.Qd = function () {
                  var e = vu(this.j);
                  return this.h.readyState > 0 && !this.h.paused ? Ru(this, e) : e;
                }),
                (i.Nh = function () {
                  return this.i.H;
                }),
                (i.Lh = function () {
                  return this.i.G;
                }),
                (i.Mh = function () {
                  return this.i.C;
                }),
                (i.Fi = function () {
                  this.i.zd();
                }),
                (i.ri = function () {
                  if (this.g.W()) {
                    var e = this.g.Ic(),
                      t = Ko(this.h.buffered);
                    if (null != t && t >= e) return !0;
                  }
                  return !1;
                }),
                ((i = _u.prototype).getNumReferences = function () {
                  return this.g.length;
                }),
                (i.getNumEvicted = function () {
                  return this.i;
                }),
                (i.release = function () {
                  this.o || ((this.g = []), this.m && this.m.stop(), (this.m = null));
                }),
                (i.Bk = function () {
                  this.o = !0;
                }),
                (i.Fb = function (e) {
                  for (var t = g(this.g), n = t.next(); !n.done; n = t.next()) e(n.value);
                }),
                (i.find = function (e) {
                  for (var t = this.g.length - 1, n = t; n >= 0; --n) {
                    var r = this.g[n],
                      i = n < t ? this.g[n + 1].startTime : r.endTime;
                    if (e >= r.startTime && e < i) return n + this.i;
                  }
                  return this.g.length && e < this.g[0].startTime ? this.i : null;
                }),
                (i.get = function (e) {
                  return 0 == this.g.length || (e -= this.i) < 0 || e >= this.g.length ? null : this.g[e];
                }),
                (i.offset = function (e) {
                  if (!this.o) for (var t = g(this.g), n = t.next(); !n.done; n = t.next()) n.value.offset(e);
                }),
                (i.tf = function (e) {
                  if (!this.o && e.length) {
                    var t = Math.round(1e3 * e[0].startTime) / 1e3;
                    ((this.g = this.g.filter(function (e) {
                      return Math.round(1e3 * e.startTime) / 1e3 < t;
                    })),
                      this.g.push.apply(this.g, m(e)));
                  }
                }),
                (i.ke = function (e, t) {
                  var n = this;
                  ((e = e.filter(function (e) {
                    return e.endTime > t && (0 == n.g.length || e.endTime > n.g[0].startTime);
                  })),
                    this.tf(e),
                    this.Ya(t));
                }),
                (i.Ya = function (e) {
                  if (!this.o) {
                    var t = this.g.length;
                    ((this.g = this.g.filter(function (t) {
                      return t.endTime > e;
                    })),
                      (this.i += t - this.g.length));
                  }
                }),
                (i.pd = function (e, t, n) {
                  if (((n = void 0 !== n && n), !this.o)) {
                    for (; this.g.length && this.g[this.g.length - 1].startTime >= t; ) this.g.pop();
                    for (; this.g.length && this.g[0].endTime <= e; ) (this.g.shift(), n || this.i++);
                    0 != this.g.length &&
                      (((t = new Fo(
                        (e = this.g[this.g.length - 1]).startTime,
                        t,
                        e.C,
                        e.startByte,
                        e.endByte,
                        e.ea,
                        e.timestampOffset,
                        e.appendWindowStart,
                        e.appendWindowEnd,
                        e.g,
                        e.tilesLayout,
                        e.B,
                        e.h,
                        e.status,
                        e.aesKey,
                      )).mimeType = e.mimeType),
                      (t.codecs = e.codecs),
                      (t.i = e.i),
                      (this.g[this.g.length - 1] = t));
                  }
                }),
                (i.Rf = function (e, t) {
                  var n = this;
                  this.o ||
                    (this.m && this.m.stop(),
                    (this.m = new Mr(function () {
                      var e = t();
                      e ? n.g.push.apply(n.g, m(e)) : (n.m.stop(), (n.m = null));
                    })),
                    this.m.Ea(e));
                }),
                (_u.prototype[Symbol.iterator] = function () {
                  return this.Xb(0);
                }),
                (_u.prototype.Xb = function (e, t, n) {
                  ((t = void 0 !== t && t), (n = void 0 !== n && n));
                  var r = this.find(e);
                  if (null == r) return null;
                  var i = this.get(r);
                  n ? r++ : r--;
                  var a = -1;
                  if (i && i.g.length > 0)
                    for (var o = i.g.length - 1; o >= 0; --o) {
                      var s = i.g[o];
                      if (e >= s.startTime && e < s.endTime) {
                        if (!t) {
                          for (; o && !s.l; ) (o--, (s = i.g[o]));
                          if (!s.l) return (W("No independent partial segment found!"), null);
                        }
                        (n ? r-- : r++, (a = o - 1));
                        break;
                      }
                    }
                  return new Lu(this, r, a, n);
                }),
                (_u.prototype.We = function () {
                  return -1;
                }),
                V("shaka.media.SegmentIndex", _u),
                (_u.forSingleSegment = Pu),
                (_u.prototype.getIteratorForTime = _u.prototype.Xb),
                (_u.prototype.updateEvery = _u.prototype.Rf),
                (_u.prototype.fit = _u.prototype.pd),
                (_u.prototype.evict = _u.prototype.Ya),
                (_u.prototype.mergeAndEvict = _u.prototype.ke),
                (_u.prototype.offset = _u.prototype.offset),
                (_u.prototype.get = _u.prototype.get),
                (_u.prototype.find = _u.prototype.find),
                (_u.prototype.markImmutable = _u.prototype.Bk),
                (_u.prototype.release = _u.prototype.release),
                (_u.prototype.getNumEvicted = _u.prototype.getNumEvicted),
                (_u.prototype.getNumReferences = _u.prototype.getNumReferences),
                ((i = Lu.prototype).Jd = function (e) {
                  this.reverse = e;
                }),
                (i.zj = function () {
                  return this.h;
                }),
                (i.current = function () {
                  var e = this.i.get(this.h);
                  return (
                    e &&
                      e.g.length > 0 &&
                      e.m &&
                      this.g >= e.g.length &&
                      (this.h++, (this.g = 0), (e = this.i.get(this.h))),
                    e && e.g.length > 0 ? e.g[this.g] : e
                  );
                }),
                (i.next = function () {
                  var e = this.i.get(this.h);
                  return (
                    this.reverse
                      ? e && e.g.length > 0
                        ? (this.g--,
                          this.g < 0 &&
                            (this.h--,
                            (this.g = (e = this.i.get(this.h)) && e.g.length > 0 ? e.g.length - 1 : 0)))
                        : (this.h--, (this.g = 0))
                      : e && e.g.length > 0
                        ? (this.g++, e.m && this.g == e.g.length && (this.h++, (this.g = 0)))
                        : (this.h++, (this.g = 0)),
                    { value: (e = this.current()), done: !e }
                  );
                }),
                (i.jh = function () {
                  var e = this.current();
                  if (e && e.Xc && !e.l && (e = this.i.get(this.h)) && e.g.length > 0)
                    for (var t = e.g[this.g]; t.l && !(this.g <= 0); ) (this.g--, (t = e.g[this.g]));
                }),
                V("shaka.media.SegmentIterator", Lu),
                (Lu.prototype.resetToLastIndependent = Lu.prototype.jh),
                (Lu.prototype.next = Lu.prototype.next),
                (Lu.prototype.current = Lu.prototype.current),
                (Lu.prototype.currentPosition = Lu.prototype.zj),
                (Lu.prototype.setReverse = Lu.prototype.Jd),
                p(Nu, _u),
                ((i = Nu.prototype).clone = function () {
                  var e = new Nu();
                  return ((e.h = this.h.slice()), (e.i = this.i), e);
                }),
                (i.release = function () {
                  this.h = [];
                }),
                (i.Fb = function (e) {
                  for (var t = g(this.h), n = t.next(); !n.done; n = t.next()) n.value.Fb(e);
                }),
                (i.find = function (e) {
                  for (var t = this.i, n = g(this.h), r = n.next(); !r.done; r = n.next()) {
                    var i = (r = r.value).find(e);
                    if (null != i) return i + t;
                    t += r.getNumEvicted() + r.getNumReferences();
                  }
                  return null;
                }),
                (i.get = function (e) {
                  for (var t = this.i, n = g(this.h), r = n.next(); !r.done; r = n.next()) {
                    var i = (r = r.value).get(e - t);
                    if (i) return i;
                    ((i = r.getNumReferences()), (t += r.getNumEvicted() + i));
                  }
                  return null;
                }),
                (i.offset = function () {}),
                (i.tf = function () {}),
                (i.Ya = function (e) {
                  if (this.h.length) {
                    var t = this.h[0];
                    (t.Ya(e),
                      0 == t.getNumReferences() &&
                        (this.h.shift(), (this.i += t.getNumEvicted()), t.release(), this.Ya(e)));
                  }
                }),
                (i.ke = function () {}),
                (i.pd = function () {}),
                (i.Rf = function () {}),
                V("shaka.media.MetaSegmentIndex", Nu),
                (Nu.prototype.updateEvery = Nu.prototype.Rf),
                (Nu.prototype.fit = Nu.prototype.pd),
                (Nu.prototype.mergeAndEvict = Nu.prototype.ke),
                (Nu.prototype.evict = Nu.prototype.Ya),
                (Nu.prototype.merge = Nu.prototype.tf),
                (Nu.prototype.offset = Nu.prototype.offset),
                (Nu.prototype.get = Nu.prototype.get),
                (Nu.prototype.find = Nu.prototype.find),
                (Nu.prototype.forEachTopLevelReference = Nu.prototype.Fb),
                (Nu.prototype.release = Nu.prototype.release),
                (Ou.prototype.release = function () {
                  (this.set(this.Tc()), this.h && (this.h.stop(), (this.h = null)), (this.g = null));
                }),
                (Ou.prototype.set = function (e) {
                  ((this.i = e), Uu(this));
                }),
                (Ou.prototype.Tc = function () {
                  return this.g.Tc();
                }),
                (Bu.prototype.release = function () {
                  (this.h && (this.h.release(), (this.h = null)), this.i.stop());
                  for (var e = g(this.g), t = e.next(); !t.done; t = e.next()) t.value.release();
                  this.g.clear();
                }),
                p(Fu, Ui),
                (Fu.prototype.release = function () {
                  (this.g.clear(), Ui.prototype.release.call(this));
                }),
                (Fu.prototype.j = function (e) {
                  for (var t = g(this.g.values()), n = t.next(); !n.done; n = t.next()) {
                    var r = (n = n.value).pg;
                    e: {
                      for (var i = n.re, a = i.length - 1; a >= 0; a--) {
                        var o = i[a];
                        if (o.position <= e) {
                          i = o.xd;
                          break e;
                        }
                      }
                      i = null;
                    }
                    ((a =
                      i &&
                      !(
                        r === i ||
                        (r &&
                          i &&
                          r.bandwidth == i.bandwidth &&
                          r.audioSamplingRate == i.audioSamplingRate &&
                          r.codecs == i.codecs &&
                          r.contentType == i.contentType &&
                          r.frameRate == i.frameRate &&
                          r.height == i.height &&
                          r.mimeType == i.mimeType &&
                          r.channelsCount == i.channelsCount &&
                          r.pixelAspectRatio == i.pixelAspectRatio &&
                          r.width == i.width)
                      )),
                      (o = i && r && i.label && r.label && r.label !== i.label));
                    var s = i && r && i.language && r.language && r.language !== i.language;
                    ((r = i && r && i.roles && r.roles && !ee(r.roles, i.roles)),
                      (o || s || r) &&
                        Vu(this, e, i.contentType) &&
                        ((n.pg = i),
                        (r = new Li(
                          "audiotrackchange",
                          new Map([
                            ["quality", i],
                            ["position", e],
                          ]),
                        )),
                        this.dispatchEvent(r)),
                      a &&
                        Vu(this, e, i.contentType) &&
                        ((n.pg = i),
                        JSON.stringify(i),
                        (n = new Li(
                          "qualitychange",
                          new Map([
                            ["quality", i],
                            ["position", e],
                          ]),
                        )),
                        this.dispatchEvent(n)));
                  }
                }),
                p(Gu, Ui),
                (Gu.prototype.release = function () {
                  (this.h.clear(),
                    this.g && (this.g.stop(), (this.g = null)),
                    Ui.prototype.release.call(this));
                }),
                (Xu.prototype.Ya = function (e, t) {
                  t = void 0 !== t && t;
                  for (var n = g(this.g.keys()), r = n.next(); !r.done; r = n.next())
                    e > (r = r.value).endTime && Zu(this, r);
                  t && Ju(this);
                }),
                (Xu.prototype.Jd = function (e) {
                  ((this.o = e), this.h && this.h.Jd(e));
                }),
                (el.prototype.abort = function () {
                  this.oe && this.oe.abort();
                }),
                V("shaka.config.CrossBoundaryStrategy", {
                  KEEP: "keep",
                  RESET: "reset",
                  RESET_TO_ENCRYPTED: "reset_to_encrypted",
                  RESET_ON_ENCRYPTION_CHANGE: "RESET_ON_ENCRYPTION_CHANGE",
                }));
              var ll = new Map()
                .set("mp4", "video/mp4")
                .set("m4v", "video/mp4")
                .set("m4a", "audio/mp4")
                .set("webm", "video/webm")
                .set("weba", "audio/webm")
                .set("mkv", "video/webm")
                .set("ts", "video/mp2t")
                .set("ogv", "video/ogg")
                .set("ogg", "audio/ogg")
                .set("mpg", "video/mpeg")
                .set("mpeg", "video/mpeg")
                .set("mov", "video/quicktime")
                .set("m3u8", "application/x-mpegurl")
                .set("mpd", "application/dash+xml")
                .set("ism", "application/vnd.ms-sstr+xml")
                .set("mp3", "audio/mpeg")
                .set("aac", "audio/aac")
                .set("flac", "audio/flac")
                .set("wav", "audio/wav")
                .set("sbv", "text/x-subviewer")
                .set("srt", "text/srt")
                .set("vtt", "text/vtt")
                .set("webvtt", "text/vtt")
                .set("ttml", "application/ttml+xml")
                .set("lrc", "application/x-subtitle-lrc")
                .set("ssa", "text/x-ssa")
                .set("ass", "text/x-ssa")
                .set("jpeg", "image/jpeg")
                .set("jpg", "image/jpeg")
                .set("png", "image/png")
                .set("svg", "image/svg+xml")
                .set("webp", "image/webp")
                .set("avif", "image/avif")
                .set("html", "text/html")
                .set("htm", "text/html");
              function dl(e, t) {
                var n = this;
                ((this.g = t),
                  (this.j = e),
                  (this.i = null),
                  (this.M = new Map()),
                  (this.C = 1),
                  (this.B = this.o = null),
                  (this.V = 0),
                  (this.h = new Map()),
                  (this.N = !1),
                  (this.X = null),
                  (this.F = !1),
                  (this.l = new Ji(function () {
                    return (function (e) {
                      var t, n, r, i, a, o;
                      return D(function (s) {
                        if (1 == s.g) {
                          for (
                            e.u && e.u.stop(),
                              e.u = null,
                              e.K && e.K.stop(),
                              e.K = null,
                              e.G && (e.G.release(), (e.G = null)),
                              t = [],
                              n = g(e.h.values()),
                              r = n.next();
                            !r.done;
                            r = n.next()
                          )
                            (Rl((i = r.value)), t.push(_l(i)), i.ia && ($u(i.ia), (i.ia = null)));
                          for (a = g(e.m.values()), o = a.next(); !o.done; o = a.next()) $u(o.value);
                          return x(s, Promise.all(t), 2);
                        }
                        (e.h.clear(),
                          e.m.clear(),
                          (e.g = null),
                          (e.j = null),
                          (e.i = null),
                          (e.I = null),
                          T(s));
                      });
                    })(n);
                  })),
                  (this.R = Date.now() / 1e3),
                  (this.m = new Map()),
                  (this.T = { projection: null, hfov: null }),
                  (this.ba = 0),
                  (this.$ = 1 / 0),
                  (this.H = null),
                  (this.O = []),
                  (this.u = new Mr(function () {
                    if (n.j && n.g)
                      if (n.j.presentationTimeline.W()) {
                        var e = n.j.presentationTimeline.Zb(),
                          t = n.j.presentationTimeline.Gb();
                        t - e > 1
                          ? (function (e, t, n) {
                              D(function (r) {
                                return e.I.g || e.g.error || e.N || e.H || Os(e) || Us(e)
                                  ? r.return()
                                  : x(
                                      r,
                                      Js(e, function () {
                                        Os(e) || Us(e) || e.i.setLiveSeekableRange(t, n);
                                      }),
                                      0,
                                    );
                              });
                            })(n.g.Z, e, t)
                          : zs(n.g.Z);
                      } else (zs(n.g.Z), n.u && n.u.stop());
                    else n.u && n.u.stop();
                  })),
                  (this.I = null),
                  (this.J = !1),
                  (this.K = new Mr(function () {
                    var e = n.g.video;
                    !e.ended && n.I && ((n.J = !0), (e.currentTime = n.I), (n.I = null));
                  })),
                  (this.G = new ne()));
              }
              function cl(e, t) {
                for (var n = e.g.Ob() < 0, r = g(e.h.values()), i = r.next(); !i.done; i = r.next())
                  ((i = i.value).ua && i.ua.Jd(n), i.ia && i.ia.Jd(n));
                for (i = (r = g(e.m.values())).next(); !i.done; i = r.next()) i.value.Jd(n);
                (n = e.h.get("video")) &&
                  (r = n.stream) &&
                  (t
                    ? (t = r.trickModeVideo) && !n.Nc && (fl(e, t, !1, 0, !1), (n.Nc = r))
                    : (t = n.Nc) && ((n.Nc = null), fl(e, t, !0, 0, !1)));
              }
              function hl(e, t, n, r, i, a) {
                ((n = void 0 !== n && n),
                  (r = void 0 === r ? 0 : r),
                  (i = void 0 !== i && i),
                  (a = void 0 !== a && a),
                  (e.o = t),
                  e.N && (t.video && fl(e, t.video, n, r, i, a), t.audio && fl(e, t.audio, n, r, i, a)));
              }
              function pl(e, t) {
                D(function (n) {
                  if (1 == n.g)
                    return (
                      (e.H = null),
                      (e.B = t),
                      e.N ? (t.segmentIndex ? n.A(2) : x(n, t.createSegmentIndex(), 2)) : n.return()
                    );
                  (fl(e, t, !0, 0, !1), T(n));
                });
              }
              function fl(e, t, n, r, i, a) {
                var o = e.h.get(t.type);
                o || t.type != gt
                  ? o &&
                    (o.Nc && (t.trickModeVideo ? ((o.Nc = t), (t = t.trickModeVideo)) : (o.Nc = null)),
                    o.stream != t || i) &&
                    (e.m.has(t)
                      ? (o.ia = e.m.get(t))
                      : o.ia &&
                        (function (e, t) {
                          t && t !== e.i && ($u(e), (e.i = t));
                        })(o.ia, t),
                    t.type == gt &&
                      o.stream != t &&
                      ((i = lr(t.mimeType, t.codecs)), Ns(e.g.Z, i, e.j.sequenceMode, t.external)),
                    !e.m.has(o.stream) &&
                      o.stream.closeSegmentIndex &&
                      (o.Ka
                        ? ((i = "(" + o.type + ":" + o.stream.id + ")"),
                          e.M.has(i) || e.M.set(i, o.stream.closeSegmentIndex))
                        : o.stream.closeSegmentIndex()),
                    (i = o.stream.isAudioMuxedInVideo != t.isAudioMuxedInVideo),
                    (o.stream = t),
                    (o.ua = null),
                    (o.gg = !!a),
                    t.dependencyStream ? (o.Fc = vl(e, t.dependencyStream)) : (o.Fc = null),
                    Ol(e),
                    i &&
                      ((o.pb = null),
                      (o.tc = null),
                      (o.sc = null),
                      t.isAudioMuxedInVideo &&
                        ((t = null),
                        "video" === o.type
                          ? (t = e.h.get("audio"))
                          : "audio" === o.type && (t = e.h.get("video")),
                        t &&
                          (_l(t).catch(function () {}),
                          (t.pb = null),
                          (t.tc = null),
                          (t.sc = null),
                          ml(e, t),
                          gl(e, t).catch(function (t) {
                            e.g && e.g.onError(t);
                          })))),
                    n
                      ? o.Wb
                        ? (o.Md = !0)
                        : o.Ka
                          ? ((o.Ub = !0), (o.ld = r), (o.Md = !0))
                          : (Rl(o),
                            Cl(e, o, !0, r).catch(function (t) {
                              e.g && e.g.onError(t);
                            }))
                      : o.Ka || o.qb || Ml(e, o, 0),
                    gl(e, o).catch(function (t) {
                      e.g && e.g.onError(t);
                    }))
                  : (function (e, t) {
                      var n, r, i, a, o;
                      D(function (s) {
                        switch (s.g) {
                          case 1:
                            return ((n = mt), e.V++, (r = e.V), w(s, 2), x(s, Hs(e.g.Z, n.Na), 4));
                          case 4:
                            A(s, 3);
                            break;
                          case 2:
                            ((i = E(s)), e.g && e.g.onError(i));
                          case 3:
                            ((a = lr(t.mimeType, t.codecs)),
                              Ns(e.g.Z, a, e.j.sequenceMode, t.external),
                              (e.g.Z.ba.isTextVisible() || e.i.alwaysStreamText) &&
                                e.V == r &&
                                ((o = vl(e, t)), e.h.set(n.Na, o), Ml(e, o, 0)),
                              T(s));
                        }
                      });
                    })(e, t);
              }
              function gl(e, t) {
                var n, r, i;
                return D(function (a) {
                  if (1 == a.g)
                    return t.Va
                      ? ((n = t.stream),
                        (r = t.Va),
                        n.segmentIndex ? a.A(2) : x(a, n.createSegmentIndex(), 2))
                      : a.return();
                  if (4 != a.g)
                    return !(i = n.dependencyStream) || i.segmentIndex
                      ? a.A(4)
                      : x(a, i.createSegmentIndex(), 4);
                  if (t.Va != r || t.stream != n) return a.return();
                  var o = e.g.nc(),
                    s = js(e.g.Z, t.type),
                    u = t.stream.segmentIndex.find(t.Ja ? t.Ja.endTime : o),
                    l = null == u ? null : t.stream.segmentIndex.get(u);
                  ((u = l ? Vo(l) : null),
                    l &&
                      !u &&
                      (u = ((l.endTime - l.getStartTime()) * (t.stream.bandwidth || e.o.bandwidth)) / 8),
                    u
                      ? ((l = l.ea) && (u += (l.endByte ? l.endByte + 1 - l.startByte : null) || 0),
                        (o =
                          (8 * u) / (l = e.g.getBandwidthEstimate()) < (s || 0) - o - e.i.rebufferingGoal ||
                          t.Va.h.g > u))
                      : (o = !0),
                    o && t.Va.abort(),
                    T(a));
                });
              }
              function ml(e, t) {
                t.Wb ||
                  t.Ub ||
                  (t.Ka
                    ? ((t.Ub = !0), (t.ld = 0))
                    : null == Bs(e.g.Z, t.type)
                      ? null == t.qb && Ml(e, t, 0)
                      : (Rl(t),
                        Cl(e, t, !1, 0).catch(function (t) {
                          e.g && e.g.onError(t);
                        })));
              }
              function vl(e, t) {
                var n = {
                  stream: t,
                  type: t.type,
                  ua: null,
                  ia: yl(e, t),
                  Ja: null,
                  pb: null,
                  pf: null,
                  tc: null,
                  sc: null,
                  mf: null,
                  nf: null,
                  Nc: null,
                  endOfStream: !1,
                  Ka: !1,
                  qb: null,
                  Ub: !1,
                  ld: 0,
                  Md: !1,
                  Wb: !1,
                  bd: !0,
                  gg: !1,
                  fh: !1,
                  ce: !1,
                  Va: null,
                  Fc: null,
                };
                return (t.dependencyStream && (n.Fc = vl(e, t.dependencyStream)), n);
              }
              function yl(e, t) {
                if (
                  ("video" === t.type && e.i.disableVideoPrefetch) ||
                  ("audio" === t.type && e.i.disableAudioPrefetch) ||
                  (t.type === gt &&
                    ("application/cea-608" == t.mimeType || "application/cea-708" == t.mimeType)) ||
                  (t.type === gt && e.i.disableTextPrefetch)
                )
                  return null;
                if (e.m.has(t)) return e.m.get(t);
                var n = e.h.get(t.type);
                return (n = n && n.ia) && t === n.i
                  ? n
                  : e.i.segmentPrefetchLimit > 0
                    ? new Xu(
                        e.i.segmentPrefetchLimit,
                        t,
                        function (t, n, r) {
                          return Il(t, n, r || null, e.i.retryParameters, e.g.vc);
                        },
                        e.g.Ob() < 0,
                        e.g.hl,
                      )
                    : null;
              }
              function bl(t, n) {
                var r, i, a, o, s, u, l, d, c;
                return D(function (h) {
                  switch (h.g) {
                    case 1:
                      if ((Qi(t.l), (r = mt), n.Ka || null == n.qb || n.Wb)) return h.return();
                      if (((n.qb = null), !n.Ub)) {
                        h.A(2);
                        break;
                      }
                      return x(h, Cl(t, n, n.Md, n.ld), 3);
                    case 3:
                      return h.return();
                    case 2:
                      if (
                        ((function (e, t) {
                          for (var n = g(e.M.entries()), r = n.next(); !r.done; r = n.next()) {
                            var i = g(r.value);
                            ((r = i.next().value),
                              (i = i.next().value),
                              r.includes(t.type) && (i(), e.M.delete(r)));
                          }
                        })(t, n),
                        n.stream.segmentIndex)
                      ) {
                        h.A(4);
                        break;
                      }
                      return ((i = n.stream), w(h, 5), x(h, n.stream.createSegmentIndex(), 7));
                    case 7:
                      A(h, 6);
                      break;
                    case 5:
                      return ((a = E(h)), x(h, Dl(t, n, a), 8));
                    case 8:
                      return h.return();
                    case 6:
                      if (i != n.stream)
                        return (
                          i.closeSegmentIndex && i.closeSegmentIndex(),
                          n.Ka || n.qb || Ml(t, n, 0),
                          h.return()
                        );
                    case 4:
                      if (!n.Fc) {
                        h.A(9);
                        break;
                      }
                      if (n.Fc.stream.segmentIndex) {
                        h.A(9);
                        break;
                      }
                      return (w(h, 11), x(h, n.Fc.stream.createSegmentIndex(), 13));
                    case 13:
                      A(h, 9);
                      break;
                    case 11:
                      E(h);
                    case 9:
                      (w(h, 14),
                        (o = (function (t, n) {
                          if (El(n))
                            return (
                              (function (e, t) {
                                var n = js(e, "video") || 0;
                                Ar(e.h, t, n);
                              })(t.g.Z, n.stream.originalId || ""),
                              null
                            );
                          if (
                            (n.type == gt &&
                              (function (e) {
                                e.h && Ar(e.h, "", 0);
                              })(t.g.Z),
                            n.stream.isAudioMuxedInVideo && "audio" == n.type)
                          )
                            return null;
                          if (n.type != gt && Us(t.g.Z)) return (Ll(t, !0), null);
                          var r = t.i.updateIntervalSeconds / Math.max(1, Math.abs(t.g.Ob()));
                          if (!Ls(t.g.Z) && n.type != gt) return r / 2;
                          var i = t.g.nc();
                          if ("audio" === n.type)
                            for (var a = g(t.m.keys()), o = a.next(); !o.done; o = a.next())
                              ((o = t.m.get(o.value)).Ya(i, !0), Ku(o, i));
                          a = n.Ja ? n.Ja.endTime : i;
                          var s = (function (e, t, n) {
                            return t == gt
                              ? null == (e = e.h).h || e.h < n
                                ? 0
                                : e.h - Math.max(n, e.g)
                              : Yo((e = Fs(e, t)), n);
                          })(t.g.Z, n.type, i);
                          o = Math.max(1, Math.max(t.i.rebufferingGoal, t.i.bufferingGoal) * t.C);
                          var u = t.j.presentationTimeline.getDuration() - a,
                            l = js(t.g.Z, n.type);
                          if (u < 1e-6 && l)
                            return (
                              (n.endOfStream = !0),
                              "video" == n.type && (r = t.h.get(gt)) && El(r) && (r.endOfStream = !0),
                              null
                            );
                          if (((n.endOfStream = !1), s >= o)) return r / 2;
                          if (((u = !n.ua), !(l = xl(t, n, i, l))))
                            return (
                              (t = 1 / 0),
                              (n = n.Ja) && (t = n.endTime - n.startTime),
                              Math.min(t / 2, r)
                            );
                          s = n.pb;
                          var d = l.ea;
                          (s && d && jo(d, s) && (s.g = d.g),
                            (s = !1),
                            u && n.gg && ((s = !0), (n.gg = !1)),
                            (u = 1 / 0));
                          for (var c = (d = g((d = Array.from(t.h.values())))).next(); !c.done; c = d.next())
                            El((c = c.value)) ||
                              (c.ua && !c.ua.current()) ||
                              (u = Math.min(u, c.Ja ? c.Ja.endTime : i));
                          return a >= u + t.j.presentationTimeline.h
                            ? r
                            : (n.ia &&
                                n.ua &&
                                !t.m.has(n.stream) &&
                                (n.ia.Ya(l.startTime + 0.001), Ku(n.ia, l.startTime).catch(function () {})),
                              (Nl(t) &&
                                (function (e, t, n) {
                                  if (t.type === gt) return !1;
                                  var r = t.pb;
                                  if (!r) return !1;
                                  var i = n.ea;
                                  if (
                                    ((n = r.g !== i.g),
                                    "reset_to_encrypted" === e.i.crossBoundaryStrategy &&
                                      (r.encrypted || i.encrypted || (n = !1),
                                      r.encrypted && (e.i.crossBoundaryStrategy = "keep")),
                                    "RESET_ON_ENCRYPTION_CHANGE" === e.i.crossBoundaryStrategy &&
                                      r.encrypted == i.encrypted &&
                                      (n = !1),
                                    "keep" === e.i.crossBoundaryStrategy && r.mimeType && i.mimeType)
                                  ) {
                                    var a = pr(mr(r.mimeType)),
                                      o = pr(mr(r.mimeType));
                                    r.mimeType == i.mimeType && a == o && (n = !1);
                                  }
                                  return (
                                    n &&
                                      (e.J || t.bd) &&
                                      ((e.J = !1),
                                      Ll(e, !0).then(function () {
                                        var t = new Map()
                                          .set("oldEncrypted", r.encrypted)
                                          .set("newEncrypted", i.encrypted);
                                        e.g.onEvent(new Li("boundarycrossed", t));
                                      })),
                                    n
                                  );
                                })(t, n, l)) ||
                                ((function (t, n, r, i, a) {
                                  var o, s, u, l, d, c, h, p, f, m, v, y, b, S, k, I;
                                  return D(function (C) {
                                    switch (C.g) {
                                      case 1:
                                        if (
                                          ((o = mt),
                                          (s = n.stream),
                                          (u = n.ua),
                                          (n.Ka = !0),
                                          w(C, 2),
                                          2 == i.Kc())
                                        )
                                          throw new Ke(1, 1, 1011);
                                        return x(
                                          C,
                                          (function (e, t, n, r) {
                                            var i, a, o, s, u, l, d, c, h, p, f, m, v, y, b, T;
                                            return D(function (S) {
                                              switch (S.g) {
                                                case 1:
                                                  if (
                                                    ((i = mt),
                                                    (a = null == t.Ja),
                                                    (o = []),
                                                    (s = Math.max(
                                                      0,
                                                      Math.max(n.appendWindowStart, e.ba) - 0.1,
                                                    )),
                                                    (u = Math.min(n.appendWindowEnd, e.$) + 0.1),
                                                    (l = n.codecs || t.stream.codecs),
                                                    (d = fr(l)),
                                                    (c = gr(n.mimeType || t.stream.mimeType)),
                                                    (h = n.timestampOffset) == t.pf &&
                                                      s == t.tc &&
                                                      u == t.sc &&
                                                      d == t.mf &&
                                                      c == t.nf)
                                                  ) {
                                                    S.A(2);
                                                    break;
                                                  }
                                                  if (
                                                    ((p =
                                                      t.mf &&
                                                      t.nf &&
                                                      (function (e, t, n, r, i) {
                                                        return (
                                                          (e = nu(e, t, n, r, i)).jc && e.jc.destroy(),
                                                          e.type == ou
                                                        );
                                                      })(e.g.Z, t.type, c, l, Bl(e))),
                                                    !p)
                                                  ) {
                                                    S.A(3);
                                                    break;
                                                  }
                                                  if (
                                                    ((f = null),
                                                    t.type === i.wa
                                                      ? (f = e.h.get(i.aa))
                                                      : t.type === i.aa && (f = e.h.get(i.wa)),
                                                    !f)
                                                  ) {
                                                    S.A(3);
                                                    break;
                                                  }
                                                  return x(
                                                    S,
                                                    _l(f).catch(function () {}),
                                                    5,
                                                  );
                                                case 5:
                                                  ((f.pb = null), (f.tc = null), (f.sc = null), ml(e, f));
                                                case 3:
                                                  return x(S, wl(e, t, h, s, u, n, d, c), 2);
                                                case 2:
                                                  return (
                                                    jo(n.ea, t.pb) ||
                                                      ((t.pb = n.ea),
                                                      n.l &&
                                                        n.ea &&
                                                        ((m = kl(e, t, n.ea)),
                                                        (v = function () {
                                                          var a, o, s, u, l, d, c, h, p, f, v;
                                                          return D(function (y) {
                                                            switch (y.g) {
                                                              case 1:
                                                                return (w(y, 2), x(y, m, 4));
                                                              case 4:
                                                                return (
                                                                  (a = y.h),
                                                                  Qi(e.l),
                                                                  (o = null),
                                                                  (s = new Map()),
                                                                  (u = { projection: null, hfov: null }),
                                                                  t.stream &&
                                                                    (l = t.stream.videoLayout) &&
                                                                    ((d = l.split("/")).includes("PROJ-RECT")
                                                                      ? (u.projection = "rect")
                                                                      : d.includes("PROJ-EQUI")
                                                                        ? (u.projection = "equi")
                                                                        : d.includes("PROJ-HEQU")
                                                                          ? (u.projection = "hequ")
                                                                          : d.includes("PROJ-PRIM")
                                                                            ? (u.projection = "prim")
                                                                            : d.includes("PROJ-AIV") &&
                                                                              (u.projection = "hequ")),
                                                                  (c = new aa())
                                                                    .box("moov", oa)
                                                                    .box("trak", oa)
                                                                    .box("mdia", oa)
                                                                    .S("mdhd", function (e) {
                                                                      o = ro(e.reader, e.version).timescale;
                                                                    })
                                                                    .box("hdlr", function (e) {
                                                                      switch (
                                                                        ((e = e.reader).skip(8), e.Yc())
                                                                      ) {
                                                                        case "soun":
                                                                          s.set(i.aa, o);
                                                                          break;
                                                                        case "vide":
                                                                          s.set(i.wa, o);
                                                                      }
                                                                      o = null;
                                                                    }),
                                                                  t.type !== i.wa ||
                                                                    u.projection ||
                                                                    c
                                                                      .box("minf", oa)
                                                                      .box("stbl", oa)
                                                                      .S("stsd", sa)
                                                                      .box("encv", ua)
                                                                      .box("avc1", ua)
                                                                      .box("avc3", ua)
                                                                      .box("hev1", ua)
                                                                      .box("hvc1", ua)
                                                                      .box("dvav", ua)
                                                                      .box("dva1", ua)
                                                                      .box("dvh1", ua)
                                                                      .box("dvhe", ua)
                                                                      .box("dvc1", ua)
                                                                      .box("dvi1", ua)
                                                                      .box("vexu", oa)
                                                                      .box("proj", oa)
                                                                      .S("prji", function (e) {
                                                                        ((e = e.reader.Yc()),
                                                                          (u.projection = e));
                                                                      })
                                                                      .box("hfov", function (e) {
                                                                        ((e = e.reader.U() / 1e3),
                                                                          (u.hfov = e));
                                                                      }),
                                                                  c.parse(a, !0, !0),
                                                                  t.type === i.wa &&
                                                                    (function (e, t) {
                                                                      if (
                                                                        e.T.projection != t.projection ||
                                                                        e.T.hfov != t.hfov
                                                                      ) {
                                                                        if (
                                                                          null != t.projection ||
                                                                          null != t.hfov
                                                                        ) {
                                                                          var n = new Map().set("detail", t);
                                                                          n = new Li("spatialvideoinfo", n);
                                                                        } else
                                                                          n = new Li("nospatialvideoinfo");
                                                                        ((n.cancelable = !0),
                                                                          e.g.onEvent(n),
                                                                          (e.T = t));
                                                                      }
                                                                    })(e, u),
                                                                  s.has(t.type)
                                                                    ? (n.ea.timescale = s.get(t.type))
                                                                    : null != o && (n.ea.timescale = o),
                                                                  (h = t.stream.segmentIndex) instanceof Nu &&
                                                                    (p = (function (e, t) {
                                                                      for (
                                                                        var n = (e = g(e.h)).next();
                                                                        !n.done;
                                                                        n = e.next()
                                                                      )
                                                                        if (null != (n = n.value).find(t))
                                                                          return n.We();
                                                                      return -1;
                                                                    })(h, n.startTime)),
                                                                  (f =
                                                                    t.stream.closedCaptions &&
                                                                    t.stream.closedCaptions.size > 0),
                                                                  x(y, e.g.Uh(t.type, a), 5)
                                                                );
                                                              case 5:
                                                                return x(
                                                                  y,
                                                                  Vs(
                                                                    e.g.Z,
                                                                    t.type,
                                                                    a,
                                                                    null,
                                                                    t.stream,
                                                                    f,
                                                                    t.bd,
                                                                    r,
                                                                    !1,
                                                                    !1,
                                                                    p,
                                                                  ),
                                                                  6,
                                                                );
                                                              case 6:
                                                                A(y, 0);
                                                                break;
                                                              case 2:
                                                                throw ((v = E(y)), (t.pb = null), v);
                                                            }
                                                          });
                                                        }),
                                                        (y = n.startTime),
                                                        a && null != (b = js(e.g.Z, t.type)) && (y = b),
                                                        e.g.Fk(y, n.ea),
                                                        o.push(v()))),
                                                    (T = t.Ja ? t.Ja.i : -1),
                                                    n.i != T &&
                                                      o.push(
                                                        (function (e, t, n) {
                                                          var r, i;
                                                          return D(function (a) {
                                                            return 1 == a.g
                                                              ? t == (r = mt).Na
                                                                ? a.return()
                                                                : (t == r.wa && (e.ab = new Ii()),
                                                                  !e.J ||
                                                                  ((i = js(e, t)) && Math.abs(i - n) < 0.15)
                                                                    ? a.return()
                                                                    : ($s(
                                                                        e,
                                                                        t,
                                                                        function () {
                                                                          return Ws(e, t);
                                                                        },
                                                                        null,
                                                                      ),
                                                                      e.m &&
                                                                        $s(
                                                                          e,
                                                                          r.aa,
                                                                          function () {
                                                                            return Ws(e, r.aa);
                                                                          },
                                                                          null,
                                                                        ),
                                                                      x(
                                                                        a,
                                                                        $s(
                                                                          e,
                                                                          t,
                                                                          function () {
                                                                            return Ks(e, t, n);
                                                                          },
                                                                          null,
                                                                        ),
                                                                        2,
                                                                      )))
                                                              : e.m
                                                                ? x(
                                                                    a,
                                                                    $s(
                                                                      e,
                                                                      r.aa,
                                                                      function () {
                                                                        return Ks(e, r.aa, n);
                                                                      },
                                                                      null,
                                                                    ),
                                                                    0,
                                                                  )
                                                                : a.A(0);
                                                          });
                                                        })(e.g.Z, t.type, n.startTime),
                                                      ),
                                                    x(S, Promise.all(o), 0)
                                                  );
                                              }
                                            });
                                          })(t, n, i, a),
                                          4,
                                        );
                                      case 4:
                                        return (
                                          Qi(t.l),
                                          t.F
                                            ? C.return()
                                            : ((l = "video/mp4" == s.mimeType || "audio/mp4" == s.mimeType),
                                              (d = e.ReadableStream),
                                              t.i.lowLatencyMode &&
                                              t.j.isLowLatency &&
                                              d &&
                                              l &&
                                              ("HLS" != t.j.type || i.o)
                                                ? ((h = new Uint8Array(0)),
                                                  (f = p = !1),
                                                  (v = function (e) {
                                                    var o, u, l;
                                                    return D(function (d) {
                                                      switch (d.g) {
                                                        case 1:
                                                          if (p) return d.return();
                                                          if (((f = !0), Qi(t.l), t.F)) return d.return();
                                                          if (
                                                            (w(d, 2),
                                                            (h = ut(h, e)),
                                                            (o = !1),
                                                            (u = 0),
                                                            new aa()
                                                              .box("mdat", function (e) {
                                                                ((u = e.size + e.start), (o = !0));
                                                              })
                                                              .parse(h, !1, !0),
                                                            !o)
                                                          ) {
                                                            d.A(4);
                                                            break;
                                                          }
                                                          return (
                                                            (l = h.subarray(0, u)),
                                                            (h = h.subarray(u)),
                                                            x(d, Sl(t, n, r, s, i, l, !0, a), 5)
                                                          );
                                                        case 5:
                                                          n.ia && n.ua && Ku(n.ia, i.startTime, !0);
                                                        case 4:
                                                          A(d, 0);
                                                          break;
                                                        case 2:
                                                          ((m = E(d)), T(d));
                                                      }
                                                    });
                                                  }),
                                                  x(C, kl(t, n, i, v), 9))
                                                : x(C, kl(t, n, i), 7))
                                        );
                                      case 7:
                                        return (
                                          (c = C.h),
                                          Qi(t.l),
                                          t.F
                                            ? C.return()
                                            : (Qi(t.l),
                                              n.Ub
                                                ? ((n.Ka = !1), Ml(t, n, 0), C.return())
                                                : x(C, Sl(t, n, r, s, i, c, !1, a), 6))
                                        );
                                      case 9:
                                        if (((y = C.h), m)) throw m;
                                        if (f) {
                                          C.A(10);
                                          break;
                                        }
                                        return (
                                          (p = !0),
                                          Qi(t.l),
                                          t.F
                                            ? C.return()
                                            : n.Ub
                                              ? ((n.Ka = !1), Ml(t, n, 0), C.return())
                                              : x(C, Sl(t, n, r, s, i, y, !1, a), 10)
                                        );
                                      case 10:
                                        n.ia && n.ua && Ku(n.ia, i.startTime, !0);
                                      case 6:
                                        if ((Qi(t.l), t.F)) return C.return();
                                        ((n.Ja = i),
                                          u.next(),
                                          (n.Ka = !1),
                                          (n.fh = !1),
                                          (b = t.g.Z.Gc()),
                                          (S = b[n.type]),
                                          JSON.stringify(S),
                                          n.Ub ||
                                            ((k = null),
                                            n.type === o.wa
                                              ? (k = t.h.get(o.aa))
                                              : n.type === o.aa && (k = t.h.get(o.wa)),
                                            k && k.type == o.aa
                                              ? t.g.zd(i, n.stream, k.stream.isAudioMuxedInVideo, !1)
                                              : t.g.zd(i, n.stream, n.stream.codecs.includes(","), !1)),
                                          Rl(n),
                                          Ml(t, n, 0),
                                          A(C, 0));
                                        break;
                                      case 2:
                                        if (((I = E(C)), Qi(t.l, I), t.F)) return C.return();
                                        if (((n.Ka = !1), 7001 == I.code))
                                          ((n.Ka = !1), Rl(n), Ml(t, n, 0), C.A(0));
                                        else {
                                          if (n.type != o.Na || !t.i.ignoreTextStreamFailures)
                                            return 3017 == I.code
                                              ? x(
                                                  C,
                                                  (function (e, t, n) {
                                                    var r, i, a, o, s;
                                                    return D(function (u) {
                                                      switch (u.g) {
                                                        case 1:
                                                          if (
                                                            Array.from(e.h.values()).some(function (e) {
                                                              return e != t && e.fh;
                                                            })
                                                          ) {
                                                            u.A(2);
                                                            break;
                                                          }
                                                          if (e.i.avoidEvictionOnQuotaExceededError)
                                                            return (
                                                              (r = Pl(e, n)),
                                                              e.g.disableStream(t.stream, r) || Ml(e, t, 4),
                                                              u.return()
                                                            );
                                                          if ((i = Math.round(100 * e.C)) > 20) {
                                                            ((e.C -= 0.2), u.A(3));
                                                            break;
                                                          }
                                                          if (i > 4) {
                                                            ((e.C -= 0.04), u.A(3));
                                                            break;
                                                          }
                                                          if (
                                                            ((a = Pl(e, n)), !e.g.disableStream(t.stream, a))
                                                          ) {
                                                            ((t.ce = !0), (e.F = !0), e.g.onError(n), u.A(5));
                                                            break;
                                                          }
                                                          return (
                                                            (e.C = 1),
                                                            (o = e.g.nc()),
                                                            x(u, Al(e, t, o), 5)
                                                          );
                                                        case 5:
                                                          return u.return();
                                                        case 3:
                                                          return (
                                                            (t.fh = !0),
                                                            (s = e.g.nc()),
                                                            x(u, Al(e, t, s), 2)
                                                          );
                                                        case 2:
                                                          (Ml(e, t, 4), T(u));
                                                      }
                                                    });
                                                  })(t, n, I),
                                                  0,
                                                )
                                              : ((n.ce = !0),
                                                1 == I.category && n.ia && Zu(n.ia, i),
                                                (I.severity = 2),
                                                x(C, Dl(t, n, I), 0));
                                          (t.h.delete(o.Na), C.A(0));
                                        }
                                    }
                                  });
                                })(t, n, i, l, s).catch(function () {}),
                                n.Fc && Tl(t, n.Fc, i, o)),
                              null);
                        })(t, n)),
                        null != o && (Ml(t, n, o), (n.ce = !1)),
                        A(h, 15));
                      break;
                    case 14:
                      return ((s = E(h)), x(h, Dl(t, n, s), 16));
                    case 16:
                      return h.return();
                    case 15:
                      if (n.type === r.Na) return h.return();
                      if (
                        ((u = []),
                        n.stream && !n.stream.isAudioMuxedInVideo && u.push(n),
                        (l = n.type === r.aa ? r.wa : r.aa),
                        (d = t.h.get(l)) && d.stream && !d.stream.isAudioMuxedInVideo && u.push(d),
                        !t.N ||
                          !u.every(function (e) {
                            return e.endOfStream;
                          }))
                      ) {
                        h.A(0);
                        break;
                      }
                      return x(h, t.g.Z.endOfStream(), 18);
                    case 18:
                      (Qi(t.l),
                        0 != (c = t.g.Z.getDuration()) &&
                          c < t.j.presentationTimeline.getDuration() &&
                          t.j.presentationTimeline.Ab(c),
                        T(h));
                  }
                });
              }
              function xl(e, t, n, r) {
                if (t.ua)
                  return (
                    (n = t.ua.current()) &&
                      t.Ja &&
                      Math.abs(t.Ja.startTime - n.startTime) < 0.001 &&
                      (n = t.ua.next().value),
                    n
                  );
                if (t.Ja || r)
                  return (
                    (n = t.Ja ? t.Ja.endTime : r),
                    (e = e.g.Ob() < 0),
                    t.stream.segmentIndex && (t.ua = t.stream.segmentIndex.Xb(n, !1, e)),
                    t.ua && t.ua.next().value
                  );
                r = e.j.sequenceMode || Nl(e) ? 0 : e.i.inaccurateManifestTolerance;
                var i = Math.max(n - r, 0);
                e = e.g.Ob() < 0;
                var a = null;
                return (
                  r &&
                    (t.stream.segmentIndex && (t.ua = t.stream.segmentIndex.Xb(i, !1, e)),
                    (a = t.ua && t.ua.next().value)),
                  a ||
                    (t.stream.segmentIndex && (t.ua = t.stream.segmentIndex.Xb(n, !1, e)),
                    (a = t.ua && t.ua.next().value)),
                  a
                );
              }
              function Tl(e, t, n, r) {
                var i, a, o, s, u, l, d, c, h, p, f, g;
                return D(function (v) {
                  switch (v.g) {
                    case 1:
                      for (
                        i = mt, a = t.stream, u = (s = (o = a.segmentIndex) && o.Xb(n)) && s.next().value;
                        u && e.O.includes(u.startTime);
                      )
                        u = s && s.next().value;
                      if (!u) {
                        v.A(0);
                        break;
                      }
                      if (!(l = u.ea) || jo(l, t.pb)) {
                        v.A(3);
                        break;
                      }
                      return ((t.pb = l), w(v, 4), x(v, kl(e, t, l), 6));
                    case 6:
                      d = v.h;
                      var y = e.g.Z;
                      (y.C && xt(y.C, d, 0, a), (e.O = []), A(v, 3));
                      break;
                    case 4:
                      throw ((c = E(v)), (t.pb = null), c);
                    case 3:
                      if (t.Ja && t.Ja == u) {
                        v.A(0);
                        break;
                      }
                      return ((t.Ja = u), w(v, 8), x(v, kl(e, t, u), 10));
                    case 10:
                      ((h = v.h), (y = e.g.Z).C && xt(y.C, h, 0, a), e.O.push(u.startTime), A(v, 9));
                      break;
                    case 8:
                      throw ((p = E(v)), (t.Ja = null), p);
                    case 9:
                      if (
                        (t.Ub ||
                          ((f = null),
                          t.type === i.wa ? (f = e.h.get(i.aa)) : t.type === i.aa && (f = e.h.get(i.wa)),
                          f && f.type == i.aa
                            ? e.g.zd(u, t.stream, f.stream.isAudioMuxedInVideo, !0)
                            : e.g.zd(u, t.stream, t.stream.codecs.includes(","), !0)),
                        (g = Math.max.apply(Math, [0].concat(m(e.O)))),
                        e.g.nc() + r > g)
                      )
                        return x(v, Tl(e, t, u.startTime, r), 0);
                      v.A(0);
                  }
                });
              }
              function wl(e, t, n, r, i, a, o, s) {
                var u, l, d, c, h;
                return D(function (p) {
                  switch (p.g) {
                    case 1:
                      if (
                        ((u = mt),
                        (l = Bl(e)),
                        w(p, 2),
                        (t.tc = r),
                        (t.sc = i),
                        o && (t.mf = o),
                        s && (t.nf = s),
                        (t.pf = n),
                        (d = e.j.sequenceMode || "HLS" == e.j.type),
                        (c = null),
                        t.type === u.wa ? (c = e.h.get(u.aa)) : t.type === u.aa && (c = e.h.get(u.wa)),
                        !(c && c.stream && c.stream.isAudioMuxedInVideo))
                      ) {
                        p.A(4);
                        break;
                      }
                      return x(p, Gs(e.g.Z, c.type, n, r, i, d, c.stream.mimeType, c.stream.codecs, l), 4);
                    case 4:
                      return x(
                        p,
                        Gs(
                          e.g.Z,
                          t.type,
                          n,
                          r,
                          i,
                          d,
                          a.mimeType || t.stream.mimeType,
                          a.codecs || t.stream.codecs,
                          l,
                        ),
                        6,
                      );
                    case 6:
                      A(p, 0);
                      break;
                    case 2:
                      throw (
                        (h = E(p)),
                        (t.tc = null),
                        (t.sc = null),
                        (t.mf = null),
                        (t.nf = null),
                        (t.pf = null),
                        h
                      );
                  }
                });
              }
              function Sl(e, t, n, r, i, a, o, s) {
                var u, l, d, c;
                return (
                  (o = void 0 !== o && o),
                  (s = void 0 !== s && s),
                  D(function (h) {
                    switch (h.g) {
                      case 1:
                        return (
                          (u = r.closedCaptions && r.closedCaptions.size > 0),
                          e.i.shouldFixTimestampOffset &&
                            ((l = "video/mp4" == r.mimeType || "audio/mp4" == r.mimeType),
                            (d = null),
                            i.ea && (d = i.ea.timescale),
                            l &&
                              d &&
                              "video" === r.type &&
                              "DASH" == e.j.type &&
                              new aa()
                                .box("moof", oa)
                                .box("traf", oa)
                                .S("tfdt", function (n) {
                                  var r, a, o, s, u;
                                  return D(function (l) {
                                    return (
                                      (r = no(n.reader, n.version)),
                                      (a = r.baseMediaDecodeTime)
                                        ? ((o = -a / d),
                                          (Number(t.pf) || 0) < o
                                            ? ((s = t.tc), (u = t.sc), x(l, wl(e, t, o, s, u, i), 0))
                                            : l.A(0))
                                        : l.return()
                                    );
                                  });
                                })
                                .parse(a, !1, o)),
                          x(h, Al(e, t, n), 2)
                        );
                      case 2:
                        return (Qi(e.l), (c = t.bd), (t.bd = !1), x(h, e.g.Uh(t.type, a), 3));
                      case 3:
                        return x(h, Vs(e.g.Z, t.type, a, i, r, u, c, s, o), 4);
                      case 4:
                        (Qi(e.l), T(h));
                    }
                  })
                );
              }
              function Al(e, t, n) {
                var r, i, a, o, s, u, l, d, c;
                return D(function (h) {
                  return 1 == h.g
                    ? (e.H == t && (e.H = null),
                      (r = t.stream.segmentIndex) instanceof Nu &&
                        (r.Ya(e.j.presentationTimeline.Hb()),
                        (i = []),
                        (function (e, t) {
                          for (var n = (e = g(e.h)).next(); !n.done; n = e.next()) t(n.value);
                        })(r, function (e) {
                          i.push(e.We());
                        })),
                      (a = Math.max(e.i.bufferBehind * e.C, e.j.presentationTimeline.h)),
                      null == (o = Bs(e.g.Z, t.type))
                        ? h.return()
                        : ((s = n - o),
                          (u = e.i.evictionGoal),
                          (l = e.j.presentationTimeline.Zb()),
                          (d = e.j.presentationTimeline.Gb()),
                          (c = s - a),
                          d - l > u && (c = Math.max(s - a, l - u - o)),
                          c <= u ? h.return() : x(h, e.g.Z.remove(t.type, o, o + c, i), 2)))
                    : 4 != h.g
                      ? (Qi(e.l), e.H ? x(h, Al(e, e.H, n), 4) : h.A(0))
                      : (Qi(e.l), void T(h));
                });
              }
              function El(e) {
                return (
                  e &&
                  e.type == gt &&
                  ("application/cea-608" == e.stream.mimeType || "application/cea-708" == e.stream.mimeType)
                );
              }
              function kl(e, t, n, r) {
                var i, a, o, s, u;
                return D(function (l) {
                  switch (l.g) {
                    case 1:
                      if ((i = n.$b())) return l.return(i);
                      if (((a = null), t.ia)) {
                        var d = t.ia,
                          c = d.g;
                        (n instanceof Bo && (c = d.j),
                          c.has(n) ? ((d = c.get(n)), r && (d.Bh = r), (a = d.oe)) : (a = null));
                      }
                      return (
                        a || (a = Il(n, t.stream, r || null, e.i.retryParameters, e.g.vc)),
                        (o = 0),
                        t.ua && (o = t.ua.h),
                        (t.Va = a),
                        x(l, a.promise, 2)
                      );
                    case 2:
                      if (((s = l.h), (t.Va = null), (u = s.data), !n.aesKey)) {
                        l.A(3);
                        break;
                      }
                      return x(l, al(u, n.aesKey, o), 4);
                    case 4:
                      u = l.h;
                    case 3:
                      return l.return(u);
                  }
                });
              }
              function Il(e, t, n, r, i, a) {
                a = void 0 !== a && a;
                var o = e instanceof Fo ? e : void 0,
                  s = o ? 1 : 0;
                return (
                  ((e = ul(e.P(), e.startByte, e.endByte, r, n)).contentType = t.type),
                  i.request(qi, e, { type: s, stream: t, segment: o, isPreload: a })
                );
              }
              function Cl(e, t, n, r) {
                var i, a;
                return D(function (o) {
                  return 1 == o.g
                    ? ((t.Ub = !1),
                      (t.Md = !1),
                      (t.ld = 0),
                      (t.Wb = !0),
                      (t.Ja = null),
                      (t.ua = null),
                      t.ia && !e.m.has(t.stream) && $u(t.ia),
                      r
                        ? ((i = e.g.nc()), (a = e.g.Z.getDuration()), x(o, e.g.Z.remove(t.type, i + r, a), 3))
                        : x(o, Hs(e.g.Z, t.type), 4))
                    : 3 != o.g
                      ? (Qi(e.l), n ? x(o, e.g.Z.flush(t.type), 3) : o.A(3))
                      : (Qi(e.l), (t.Wb = !1), (t.endOfStream = !1), t.Ka || t.qb || Ml(e, t, 0), void T(o));
                });
              }
              function Ml(e, t, n) {
                var r = t.type;
                (r != gt || e.h.has(r)) &&
                  (t.qb = new Cr(function () {
                    var n;
                    return D(function (r) {
                      return 1 == r.g
                        ? (w(r, 2), x(r, bl(e, t), 4))
                        : 2 != r.g
                          ? A(r, 0)
                          : ((n = E(r)), e.g && e.g.onError(n), void T(r));
                    });
                  }).ka(n));
              }
              function Rl(e) {
                null != e.qb && (e.qb.stop(), (e.qb = null));
              }
              function _l(e) {
                return D(function (t) {
                  return e.Va ? x(t, e.Va.abort(), 0) : t.A(0);
                });
              }
              function Dl(e, t, n) {
                var r;
                return D(function (i) {
                  if (1 == i.g)
                    return 3024 == n.code ? ((t.Ka = !1), Rl(t), Ml(e, t, 0), i.return()) : x(i, Ei(e.X), 2);
                  if ((Qi(e.l), 1 === n.category && 1003 != n.code)) {
                    if (t.Nc) return (cl(e, !1), i.return());
                    ((r = Pl(e, n)),
                      (n.handled = e.g.disableStream(t.stream, r)),
                      n.handled && (n.severity = 1));
                  }
                  ((n.handled && 1011 == n.code) || e.g.onError(n),
                    n.handled || e.i.failureCallback(n),
                    T(i));
                });
              }
              function Pl(e, t) {
                return 0 === e.i.maxDisabledTime && 1011 == t.code ? 1 : e.i.maxDisabledTime;
              }
              function Ll(e, t) {
                var n, r, i, a, o, s;
                return (
                  (t = void 0 !== t && t),
                  D(function (u) {
                    if (1 == u.g) {
                      if (((n = Date.now() / 1e3), (r = e.i.minTimeBetweenRecoveries), !t)) {
                        if (!e.i.allowMediaSourceRecoveries || n - e.R < r) return u.return(!1);
                        e.R = n;
                      }
                      return (
                        (i = mt),
                        (a = e.h.get(i.aa)) &&
                          (Rl(a),
                          a.Va && (a.Va.abort(), (a.Va = null)),
                          (a.pb = null),
                          (a.tc = null),
                          (a.sc = null),
                          (a.Ka = !1),
                          (a.Ub = !1),
                          (a.ld = 0),
                          (a.Md = !1),
                          (a.Wb = !1),
                          a.ua && a.ua.jh()),
                        (o = e.h.get(i.wa)) &&
                          (Rl(o),
                          o.Va && (o.Va.abort(), (o.Va = null)),
                          (o.pb = null),
                          (o.tc = null),
                          (o.sc = null),
                          (o.Ka = !1),
                          (o.Ub = !1),
                          (o.ld = 0),
                          (o.Md = !1),
                          (o.Wb = !1),
                          o.ua && o.ua.jh()),
                        (s = e.g.video.paused),
                        x(u, eu(e.g.Z, Bl(e)), 2)
                      );
                    }
                    return (
                      !o || o.Wb || o.Ka || o.qb || Ml(e, o, 0),
                      !a || a.Wb || a.Ka || a.qb || Ml(e, a, 0),
                      s || e.g.video.play(),
                      u.return(!0)
                    );
                  })
                );
              }
              function Nl(e) {
                if ("keep" !== e.i.crossBoundaryStrategy) return !0;
                var t = oe();
                if (t.Ib()) {
                  if (!t.Nf())
                    for (n = (t = g(e.h.keys())).next(); !n.done; n = t.next())
                      if (
                        (n = e.h.get(n.value)).type !== mt.Na &&
                        (n = n.stream) &&
                        n.fullMimeTypes &&
                        n.fullMimeTypes.size > 1
                      ) {
                        for (e = new Set(), n = (t = g(n.fullMimeTypes)).next(); !n.done; n = t.next())
                          e.add(hr(n.value));
                        return e.size > 1;
                      }
                } else
                  for (var n = (t = g(e.h.keys())).next(); !n.done; n = t.next())
                    if (
                      (n = e.h.get(n.value)).type !== mt.Na &&
                      (n = n.stream) &&
                      n.fullMimeTypes &&
                      n.fullMimeTypes.size > 1
                    )
                      return !0;
                return !1;
              }
              function Ol(e) {
                (e.G.Qa(),
                  Nl(e) &&
                    (e.G.D(e.g.video, "waiting", function () {
                      return Ul(e);
                    }),
                    e.G.D(e.g.video, "timeupdate", function () {
                      return Ul(e);
                    })));
              }
              function Ul(e) {
                if (Nl(e)) {
                  e.K.stop();
                  var t = e.g.nc(),
                    n = e.h.get("video") || e.h.get("audio");
                  n &&
                    (n = n.pb) &&
                    null !== n.g &&
                    ((t = n.g - t) < 0 || t > 1 || ((e.I = n.g + 0.1), e.K.ka(t)));
                }
              }
              function Bl(e, t) {
                function n(t) {
                  if (t.fullMimeTypes && t.fullMimeTypes.size > 1 && e.h.has(t.type)) {
                    var n = e.h.get(t.type),
                      r = js(e.g.Z, n.type),
                      i = e.g.nc();
                    (n = xl(e, n, i, r)) &&
                      n.codecs &&
                      n.mimeType &&
                      ((t.codecs = n.codecs), (t.mimeType = n.mimeType));
                  }
                }
                t = void 0 !== t && t;
                var r = new Map(),
                  i = e.o.audio;
                return (
                  i && (n(i), r.set("audio", i)),
                  (i = e.o.video) && (n(i), r.set("video", i)),
                  t && e.B && r.set(gt, e.B),
                  r
                );
              }
              function jl() {}
              function Fl(e, t, n, r, i) {
                var a,
                  o = i in r,
                  s = o
                    ? n.constructor == Object && 0 == Object.keys(r).length
                    : n.constructor == Object && 0 == Object.keys(n).length,
                  u = o || s,
                  l = !0;
                for (a in t) {
                  var d = i + "." + a,
                    c = o ? r[i] : n[a];
                  u || a in n
                    ? void 0 === t[a]
                      ? void 0 === c || u
                        ? delete e[a]
                        : (e[a] = Wt(c))
                      : s
                        ? (e[a] = t[a])
                        : c.constructor == Object && t[a] && t[a].constructor == Object
                          ? (e[a] || (e[a] = Wt(c)), (d = Fl(e[a], t[a], c, r, d)), (l = l && d))
                          : typeof t[a] != typeof c ||
                              null == t[a] ||
                              ("function" != typeof t[a] && t[a].constructor != c.constructor)
                            ? (W("Invalid config, wrong type for " + d), (l = !1))
                            : "function" == typeof n[a] && n[a].length != t[a].length
                              ? (K("Unexpected number of arguments for " + d), (e[a] = t[a]))
                              : (e[a] = Array.isArray(e[a]) ? t[a].slice() : t[a])
                    : (W("Invalid config, unrecognized key " + d), (l = !1));
                }
                return l;
              }
              function Vl(e, t) {
                for (var n = {}, r = n, i = 0, a = 0; !((i = e.indexOf(".", i)) < 0); )
                  ((0 != i && "\\" == e[i - 1]) ||
                    ((r[(a = e.substring(a, i).replace(/\\\./g, "."))] = {}), (r = r[a]), (a = i + 1)),
                    (i += 1));
                return ((r[e.substring(a).replace(/\\\./g, ".")] = t), n);
              }
              function Hl(e, t) {
                return e && t;
              }
              function Gl(e, t) {
                function n(e) {
                  return e && "object" == typeof e && !Array.isArray(e);
                }
                return (
                  (e = (function e(t, r) {
                    return Object.keys(t).reduce(function (i, a) {
                      var o = t[a];
                      return (
                        r.hasOwnProperty(a)
                          ? o instanceof HTMLElement && r[a] instanceof HTMLElement
                            ? o.isEqualNode(r[a]) || (i[a] = o)
                            : n(o) && n(r[a])
                              ? ((o = e(o, r[a])), (Object.keys(o).length > 0 || !n(o)) && (i[a] = o))
                              : Array.isArray(o) && Array.isArray(r[a])
                                ? Z(o, r[a]) || (i[a] = o)
                                : (Number.isNaN(o) && Number.isNaN(r[a])) || (o !== r[a] && (i[a] = o))
                          : (i[a] = o),
                        i
                      );
                    }, {});
                  })(e, t)),
                  (function e(t) {
                    for (var r = g(Object.keys(t)), i = r.next(); !i.done; i = r.next())
                      if (!(t[(i = i.value)] instanceof HTMLElement))
                        if (n(t[i]) && 0 === Object.keys(t[i]).length) delete t[i];
                        else {
                          var a = t[i];
                          (Array.isArray(a) && 0 === a.length) || "function" == typeof t[i]
                            ? delete t[i]
                            : n(t[i]) && (e(t[i]), 0 === Object.keys(t[i]).length && delete t[i]);
                        }
                  })(e),
                  e
                );
              }
              function zl() {}
              function Xl(e) {
                return new me((e = Je(e))).Db;
              }
              function Wl(e, t, n) {
                function r(e) {
                  (Ue(a).setUint32(o, e.byteLength, !0), (o += 4), a.set(Ne(e), o), (o += e.byteLength));
                }
                if (!n || !n.byteLength) throw new Ke(2, 6, 6015);
                var i;
                ((i = "string" == typeof t ? Ze(t, !0) : t), (e = Ze((e = Je(e)), !0)));
                var a = new Uint8Array(12 + e.byteLength + i.byteLength + n.byteLength),
                  o = 0;
                return (r(e), r(i), r(n), a);
              }
              function Kl(e, t, n) {
                return "skd" !== t
                  ? e
                  : ((t = n.serverCertificate), Wl(e, (n = Je(e).split("skd://").pop()), t));
              }
              function ql(e, t) {
                2 === e &&
                  (e = t.drmInfo) &&
                  He(e.keySystem) &&
                  (t.headers["Content-Type"] = "application/octet-stream");
              }
              function Yl(e, t, n) {
                for (
                  n = void 0 === n || n, this.h = e, this.g = new Set([e]), t = (e = g((t = t || []))).next();
                  !t.done;
                  t = e.next()
                )
                  this.add(t.value, n);
              }
              function $l(e, t) {
                return (
                  e.mimeType == t.mimeType &&
                  Z(
                    (e = e.codecs.split(",").map(function (e) {
                      return fr(e);
                    })),
                    (t = t.codecs.split(",").map(function (e) {
                      return fr(e);
                    })),
                  )
                );
              }
              function Jl() {
                this.h = this.g = null;
              }
              function Ql(e, t) {
                return e
                  .filter(function (e) {
                    return !(e.audio && e.audio.channelsCount && e.audio.channelsCount > t);
                  })
                  .sort(function (e, t) {
                    return e.audio || t.audio
                      ? e.audio
                        ? t.audio
                          ? (t.audio.channelsCount || 0) - (e.audio.channelsCount || 0)
                          : 1
                        : -1
                      : 0;
                  });
              }
              function Zl(e, t) {
                return e.filter(function (e) {
                  return !e.audio || e.audio.codecs == t;
                });
              }
              function ed() {}
              function td() {
                var t = 1 / 0,
                  n = oe();
                navigator.connection && navigator.connection.saveData && (t = 360);
                var r = {
                    retryParameters: {
                      maxAttempts: 2,
                      baseDelay: 1e3,
                      backoffFactor: 2,
                      fuzzFactor: 0.5,
                      timeout: 3e4,
                      stallTimeout: 5e3,
                      connectionTimeout: 1e4,
                    },
                    servers: {},
                    clearKeys: {},
                    advanced: {},
                    delayLicenseRequestUntilPlayed: !1,
                    persistentSessionOnlinePlayback: !1,
                    persistentSessionsMetadata: [],
                    initDataTransform: function (t, n, r) {
                      return (
                        "apple" === e.shakaMediaKeysPolyfill &&
                          "skd" == n &&
                          ((n = r.serverCertificate), (t = Wl(t, (r = Xl(t)), n))),
                        t
                      );
                    },
                    logLicenseExchange: !1,
                    updateExpirationTime: 1,
                    preferredKeySystems: [],
                    keySystemsMapping: {},
                    parseInbandPsshEnabled: !1,
                    minHdcpVersion: "",
                    ignoreDuplicateInitData: !0,
                    defaultAudioRobustnessForWidevine: "SW_SECURE_CRYPTO",
                    defaultVideoRobustnessForWidevine: "SW_SECURE_DECODE",
                  },
                  i = "reload";
                n.Ib() && (i = "smooth");
                var a = {
                    trackSelectionCallback: function (e) {
                      return D(function (t) {
                        return t.return(e);
                      });
                    },
                    downloadSizeCallback: function (e) {
                      var t;
                      return D(function (n) {
                        return 1 == n.g
                          ? navigator.storage && navigator.storage.estimate
                            ? x(n, navigator.storage.estimate(), 3)
                            : n.return(!0)
                          : ((t = n.h), n.return(t.usage + e < 0.95 * t.quota));
                      });
                    },
                    progressCallback: function (e, t) {
                      return Hl([e, t]);
                    },
                    usePersistentLicense: !0,
                    numberOfParallelDownloads: 5,
                  },
                  o = {
                    drm: r,
                    manifest: {
                      retryParameters: {
                        maxAttempts: 2,
                        baseDelay: 1e3,
                        backoffFactor: 2,
                        fuzzFactor: 0.5,
                        timeout: 3e4,
                        stallTimeout: 5e3,
                        connectionTimeout: 1e4,
                      },
                      availabilityWindowOverride: NaN,
                      disableAudio: !1,
                      disableVideo: !1,
                      disableText: !1,
                      disableThumbnails: !1,
                      disableIFrames: !1,
                      defaultPresentationDelay: 0,
                      segmentRelativeVttTiming: !1,
                      raiseFatalErrorOnManifestUpdateRequestFailure: !1,
                      continueLoadingWhenPaused: !0,
                      ignoreSupplementalCodecs: !1,
                      updatePeriod: -1,
                      ignoreDrmInfo: !1,
                      enableAudioGroups: !0,
                      dash: {
                        clockSyncUri: "",
                        disableXlinkProcessing: !0,
                        xlinkFailGracefully: !1,
                        ignoreMinBufferTime: !1,
                        autoCorrectDrift: !0,
                        initialSegmentLimit: 1e3,
                        ignoreSuggestedPresentationDelay: !1,
                        ignoreEmptyAdaptationSet: !1,
                        ignoreMaxSegmentDuration: !1,
                        keySystemsByURI: {
                          "urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b": "org.w3.clearkey",
                          "urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e": "org.w3.clearkey",
                          "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed": "com.widevine.alpha",
                          "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95": "com.microsoft.playready",
                          "urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95": "com.microsoft.playready",
                          "urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2": "com.apple.fps",
                          "urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c": "com.huawei.wiseplay",
                        },
                        manifestPreprocessor: id,
                        manifestPreprocessorTXml: ad,
                        sequenceMode: !1,
                        useStreamOnceInPeriodFlattening: !1,
                        enableFastSwitching: !0,
                      },
                      hls: {
                        ignoreTextStreamFailures: !1,
                        ignoreImageStreamFailures: !1,
                        defaultAudioCodec: "mp4a.40.2",
                        defaultVideoCodec: "avc1.42E01E",
                        ignoreManifestProgramDateTime: !1,
                        ignoreManifestProgramDateTimeForTypes: [],
                        mediaPlaylistFullMimeType: 'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',
                        liveSegmentsDelay: 3,
                        sequenceMode: n.fd(),
                        ignoreManifestTimestampsInSegmentsMode: !1,
                        disableCodecGuessing: !1,
                        disableClosedCaptionsDetection: !1,
                        allowLowLatencyByteRangeOptimization: !0,
                        allowRangeRequestsToGuessMimeType: !1,
                      },
                      mss: {
                        manifestPreprocessor: id,
                        manifestPreprocessorTXml: ad,
                        sequenceMode: !1,
                        keySystemsBySystemId: {
                          "9a04f079-9840-4286-ab92-e65be0885f95": "com.microsoft.playready",
                          "79f0049a-4098-8642-ab92-e65be0885f95": "com.microsoft.playready",
                        },
                      },
                    },
                    streaming: {
                      retryParameters: {
                        maxAttempts: 2,
                        baseDelay: 1e3,
                        backoffFactor: 2,
                        fuzzFactor: 0.5,
                        timeout: 3e4,
                        stallTimeout: 5e3,
                        connectionTimeout: 1e4,
                      },
                      failureCallback: function (e) {
                        return Hl([e]);
                      },
                      rebufferingGoal: 0,
                      bufferingGoal: 10,
                      bufferBehind: 30,
                      evictionGoal: 1,
                      ignoreTextStreamFailures: !1,
                      alwaysStreamText: !1,
                      startAtSegmentBoundary: !1,
                      gapDetectionThreshold: 0.5,
                      gapPadding: 0,
                      gapJumpTimerTime: 0.25,
                      durationBackoff: 1,
                      safeSeekOffset: 5,
                      safeSeekEndOffset: 0,
                      stallEnabled: !0,
                      stallThreshold: 1,
                      stallSkip: 0.1,
                      useNativeHlsForFairPlay: !0,
                      inaccurateManifestTolerance: 2,
                      lowLatencyMode: !0,
                      preferNativeDash: !1,
                      preferNativeHls: !1,
                      updateIntervalSeconds: 1,
                      observeQualityChanges: !1,
                      maxDisabledTime: 30,
                      segmentPrefetchLimit: 1,
                      prefetchAudioLanguages: [],
                      disableAudioPrefetch: !1,
                      disableTextPrefetch: !1,
                      disableVideoPrefetch: !1,
                      liveSync: {
                        enabled: !1,
                        targetLatency: 0.5,
                        targetLatencyTolerance: 0.5,
                        maxPlaybackRate: 1.1,
                        minPlaybackRate: 0.95,
                        panicMode: !1,
                        panicThreshold: 60,
                        dynamicTargetLatency: {
                          enabled: !1,
                          stabilityThreshold: 60,
                          rebufferIncrement: 0.5,
                          maxAttempts: 10,
                          maxLatency: 4,
                          minLatency: 1,
                        },
                      },
                      allowMediaSourceRecoveries: !0,
                      minTimeBetweenRecoveries: 5,
                      vodDynamicPlaybackRate: !1,
                      vodDynamicPlaybackRateLowBufferRate: 0.95,
                      vodDynamicPlaybackRateBufferRatio: 0.5,
                      preloadNextUrlWindow: 30,
                      loadTimeout: 30,
                      clearDecodingCache: !1,
                      dontChooseCodecs: !1,
                      shouldFixTimestampOffset: !1,
                      avoidEvictionOnQuotaExceededError: !1,
                      crossBoundaryStrategy: "keep",
                      returnToEndOfLiveWindowWhenOutside: !1,
                    },
                    networking: { forceHTTP: !1, forceHTTPS: !1, minBytesForProgressEvents: 16e3 },
                    mediaSource: {
                      codecSwitchingStrategy: i,
                      addExtraFeaturesToSourceBuffer: function (e) {
                        return Hl([e], "");
                      },
                      forceTransmux: !1,
                      insertFakeEncryptionInInit: !0,
                      correctEc3Enca: !1,
                      modifyCueCallback: function (e, t, n) {
                        return Hl([e, t, n]);
                      },
                      dispatchAllEmsgBoxes: !1,
                      useSourceElements: !0,
                      durationReductionEmitsUpdateEnd: !0,
                    },
                    offline: a,
                    abrFactory: function () {
                      return new xi();
                    },
                    adaptationSetCriteriaFactory: function () {
                      return new (Function.prototype.bind.apply(
                        Jl,
                        [null].concat(m(P.apply(0, arguments))),
                      ))();
                    },
                    abr: {
                      enabled: !0,
                      useNetworkInformation: !0,
                      defaultBandwidthEstimate: 1e6,
                      switchInterval: 8,
                      bandwidthUpgradeTarget: 0.85,
                      bandwidthDowngradeTarget: 0.95,
                      restrictions: {
                        minWidth: 0,
                        maxWidth: 1 / 0,
                        minHeight: 0,
                        maxHeight: t,
                        minPixels: 0,
                        maxPixels: 1 / 0,
                        minFrameRate: 0,
                        maxFrameRate: 1 / 0,
                        minBandwidth: 0,
                        maxBandwidth: 1 / 0,
                        minChannelsCount: 0,
                        maxChannelsCount: 1 / 0,
                      },
                      advanced: { minTotalBytes: 128e3, minBytes: 16e3, fastHalfLife: 2, slowHalfLife: 5 },
                      restrictToElementSize: !1,
                      restrictToScreenSize: !1,
                      ignoreDevicePixelRatio: !1,
                      clearBufferSwitch: !1,
                      safeMarginSwitch: 0,
                      cacheLoadThreshold: 5,
                      minTimeToSwitch: 0,
                      preferNetworkInformationBandwidth: !1,
                      removeLatencyFromFirstPacketTime: !1,
                    },
                    autoShowText: 3,
                    preferredAudioLanguage: "",
                    preferredAudioLabel: "",
                    preferredTextLanguage: "",
                    preferredAudioRole: "",
                    preferredVideoRole: "",
                    preferredTextRole: "",
                    preferredAudioChannelCount: 2,
                    preferredVideoHdrLevel: "AUTO",
                    preferredVideoLayout: "",
                    preferredVideoLabel: "",
                    preferredVideoCodecs: [],
                    preferredAudioCodecs: [],
                    preferredTextFormats: [],
                    preferForcedSubs: !1,
                    preferSpatialAudio: !1,
                    preferredDecodingAttributes: [],
                    restrictions: {
                      minWidth: 0,
                      maxWidth: 1 / 0,
                      minHeight: 0,
                      maxHeight: 1 / 0,
                      minPixels: 0,
                      maxPixels: 1 / 0,
                      minFrameRate: 0,
                      maxFrameRate: 1 / 0,
                      minBandwidth: 0,
                      maxBandwidth: 1 / 0,
                      minChannelsCount: 0,
                      maxChannelsCount: 1 / 0,
                    },
                    playRangeStart: 0,
                    playRangeEnd: 1 / 0,
                    textDisplayer: { captionsUpdatePeriod: 0.25, fontScaleFactor: 1 },
                    textDisplayFactory: function () {
                      return null;
                    },
                    cmcd: {
                      enabled: !1,
                      sessionId: "",
                      contentId: "",
                      rtpSafetyFactor: 5,
                      useHeaders: !1,
                      includeKeys: [],
                      version: 1,
                      targets: [],
                    },
                    cmsd: {
                      enabled: !0,
                      applyMaximumSuggestedBitrate: !0,
                      estimatedThroughputWeightRatio: 0.5,
                    },
                    lcevc: {
                      enabled: !1,
                      dynamicPerformanceScaling: !0,
                      logLevel: 0,
                      drawLogo: !1,
                      poster: !0,
                    },
                    ads: {
                      customPlayheadTracker: !1,
                      skipPlayDetection: !1,
                      supportsMultipleMediaElements: !0,
                      disableHLSInterstitial: !1,
                      disableDASHInterstitial: !1,
                      allowPreloadOnDomElements: !0,
                      allowStartInMiddleOfInterstitial: !0,
                    },
                    ignoreHardwareResolution: !1,
                    queue: { preloadNextUrlWindow: 1 / 0, preloadPrevItem: !0, repeatMode: 0 },
                  };
                return (
                  (a.trackSelectionCallback = function (e) {
                    return D(function (t) {
                      return t.return(
                        (function (e, t, n) {
                          var r = n;
                          "AUTO" == r &&
                            ((n = e.some(function (e) {
                              return !(!e.hdr || "HLG" != e.hdr);
                            })),
                            (r = oe().sd(n)));
                          var i = e.filter(function (e) {
                            return !("variant" != e.type || (e.hdr && e.hdr != r));
                          });
                          n = [];
                          var a = Hr(
                            t,
                            i.map(function (e) {
                              return e.language;
                            }),
                          );
                          (a &&
                            (n = i.filter(function (e) {
                              return Br(e.language) == a;
                            })),
                            0 == n.length &&
                              (n = i.filter(function (e) {
                                return e.primary;
                              })),
                            0 == n.length &&
                              (i.map(function (e) {
                                return e.language;
                              }),
                              (n = i)));
                          var o = n.filter(function (e) {
                            return e.height && e.height <= 480;
                          });
                          for (
                            o.length &&
                              (o.sort(function (e, t) {
                                return t.height - e.height;
                              }),
                              (n = o.filter(function (e) {
                                return e.height == o[0].height;
                              }))),
                              t = [],
                              n.length &&
                                ((i = Math.floor(n.length / 2)),
                                n.sort(function (e, t) {
                                  return e.bandwidth - t.bandwidth;
                                }),
                                t.push(n[i])),
                              e = g(e),
                              n = e.next();
                            !n.done;
                            n = e.next()
                          )
                            ((n = n.value).type != gt && "image" != n.type) || t.push(n);
                          return t;
                        })(e, o.preferredAudioLanguage, o.preferredVideoHdrLevel),
                      );
                    });
                  }),
                  n.Wa(o)
                );
              }
              function nd() {
                return {
                  streaming: {
                    inaccurateManifestTolerance: 0,
                    segmentPrefetchLimit: 2,
                    updateIntervalSeconds: 0.1,
                    maxDisabledTime: 1,
                    retryParameters: { baseDelay: 100 },
                  },
                  manifest: { dash: { autoCorrectDrift: !1 }, retryParameters: { baseDelay: 100 } },
                  drm: { retryParameters: { baseDelay: 100 } },
                };
              }
              function rd(e, t, n) {
                var r = {
                  ".drm.keySystemsMapping": "",
                  ".drm.servers": "",
                  ".drm.clearKeys": "",
                  ".drm.advanced": {
                    distinctiveIdentifierRequired: !1,
                    persistentStateRequired: !1,
                    videoRobustness: [],
                    audioRobustness: [],
                    sessionType: "",
                    serverCertificate: new Uint8Array(0),
                    serverCertificateUri: "",
                    individualizationServer: "",
                    headers: {},
                  },
                };
                return Fl(e, t, n || td(), r, "");
              }
              function id(e) {
                return Hl([e], e);
              }
              function ad(e) {
                return Hl([e], e);
              }
              function od() {
                ((this.g = null), (this.h = []));
              }
              function sd(e, t) {
                var n = 0;
                e.g && e.g.state == t && (n += e.g.duration);
                for (var r = (e = g(e.h)).next(); !r.done; r = e.next())
                  n += (r = r.value).state == t ? r.duration : 0;
                return n;
              }
              function ud() {
                ((this.i = this.h = null), (this.g = []));
              }
              function ld(e, t, n) {
                e.i != t &&
                  ((e.i = t),
                  e.g.push({
                    timestamp: Date.now() / 1e3,
                    id: t.id,
                    type: "text",
                    fromAdaptation: n,
                    bandwidth: null,
                  }));
              }
              function dd() {
                ((this.C = this.X = NaN),
                  (this.l = ""),
                  (this.j =
                    this.wi =
                    this.u =
                    this.B =
                    this.K =
                    this.F =
                    this.o =
                    this.m =
                    this.J =
                    this.G =
                    this.i =
                    this.T =
                    this.V =
                    this.N =
                    this.O =
                    this.R =
                      NaN),
                  (this.M = 0),
                  (this.H = this.I = NaN),
                  (this.g = new od()),
                  (this.h = new ud()));
              }
              function cd(e, t, n) {
                ((e.X = t), (e.C = n));
              }
              function hd(e, t) {
                e.j = isNaN(e.j) ? t : e.j + t;
              }
              function pd(e) {
                for (
                  var t = e.X,
                    n = e.C,
                    r = e.l,
                    i = e.B,
                    a = e.O,
                    o = e.R,
                    s = e.N,
                    u = e.V,
                    l = e.T,
                    d = e.u,
                    c = e.i,
                    h = e.G,
                    p = e.J,
                    f = e.m,
                    m = sd(e.g, "playing"),
                    v = sd(e.g, "paused"),
                    y = sd(e.g, "buffering"),
                    b = e.o,
                    x = e.F,
                    T = e.K,
                    w = e.wi,
                    S = e.j,
                    A = e.M,
                    E = e.I,
                    k = e.H,
                    I = (function (e) {
                      function t(e) {
                        return { timestamp: e.timestamp, state: e.state, duration: e.duration };
                      }
                      for (var n = [], r = g(e.h), i = r.next(); !i.done; i = r.next()) n.push(t(i.value));
                      return (e.g && n.push(t(e.g)), n);
                    })(e.g),
                    C = [],
                    M = (e = g(e.h.g)).next();
                  !M.done;
                  M = e.next()
                )
                  ((M = M.value),
                    C.push({
                      timestamp: M.timestamp,
                      id: M.id,
                      type: M.type,
                      fromAdaptation: M.fromAdaptation,
                      bandwidth: M.bandwidth,
                    }));
                return {
                  width: t,
                  height: n,
                  currentCodecs: r,
                  streamBandwidth: i,
                  decodedFrames: a,
                  droppedFrames: o,
                  corruptedFrames: s,
                  stallsDetected: u,
                  gapsJumped: l,
                  estimatedBandwidth: d,
                  completionPercent: c,
                  loadLatency: h,
                  manifestTimeSeconds: p,
                  drmTimeSeconds: f,
                  playTime: m,
                  pauseTime: v,
                  bufferingTime: y,
                  licenseTime: b,
                  liveLatency: x,
                  maxSegmentDuration: T,
                  manifestSizeBytes: w,
                  bytesDownloaded: S,
                  nonFatalErrorCount: A,
                  manifestPeriodCount: E,
                  manifestGapCount: k,
                  stateHistory: I,
                  switchHistory: C,
                };
              }
              function fd(e, t, n, r) {
                (Ui.call(this),
                  (this.N = e),
                  (this.V = t),
                  (this.Da = r.networkingEngine),
                  (this.o = n),
                  (this.C = null),
                  (this.za = 0),
                  (this.Ta = r.md),
                  (this.G = r.yk),
                  (this.Ua = r.zk),
                  (this.g = r.config),
                  (this.m = this.H = this.h = null),
                  (this.oa = !1),
                  (this.I = r.Kk),
                  (this.va = !1),
                  (this.j = null),
                  (this.ba = !1),
                  (this.u = null),
                  (this.M = new Map()),
                  (this.ya = !1),
                  (this.Fa = r.Jk),
                  (this.X = new dd()),
                  (this.ma = new Ii()),
                  (this.B = new Ii()),
                  (this.O = null),
                  (this.l = !1),
                  (this.$ = r.pj),
                  (this.T = this.i = null),
                  (this.R = !1),
                  (this.K = []),
                  (this.J = []),
                  (this.F = !0));
              }
              function gd(e, t, n) {
                (e = t ? e.J : e.K) ? e.push(n) : n();
              }
              function md(e, t) {
                if (((e.O = t), (e.R = !0), e.K))
                  for (var n = (t = g(e.K)).next(); !n.done; n = t.next()) (n = n.value)();
                e.K = null;
              }
              function vd(e) {
                if (e.l) throw new Ke(2, 7, 7003);
              }
              function yd(e, t) {
                e.dispatchEvent(new Li("onstatechange", new Map().set("state", t)));
              }
              function bd(e, t) {
                var n, r, i;
                return D(function (a) {
                  switch (a.g) {
                    case 1:
                      return !e.h || e.j
                        ? a.return()
                        : (yd(e, "drm-engine"),
                          (e.za = Date.now() / 1e3),
                          (e.j = e.Ta()),
                          (e.G.g = e.j),
                          e.j.configure(e.g.drm, function () {
                            return e.F;
                          }),
                          (n = ui(e.h.variants)),
                          (r = !0),
                          e.h && e.h.presentationTimeline && (r = e.h.presentationTimeline.W()),
                          x(a, ba(e.j, n, e.h.offlineSessionIds, r), 2));
                    case 2:
                      if ((vd(e), !t)) {
                        a.A(3);
                        break;
                      }
                      return x(a, e.j.Vb(t), 4);
                    case 4:
                      vd(e);
                    case 3:
                      return x(a, Wa(e.G, e.h), 5);
                    case 5:
                      if (!a.h) {
                        a.A(0);
                        break;
                      }
                      return ((i = new Li("trackschanged", void 0)), x(a, Promise.resolve(), 7));
                    case 7:
                      (e.dispatchEvent(i), T(a));
                  }
                });
              }
              function xd(e) {
                if (!e.u) {
                  var t = e.g.abrFactory;
                  ((e.u = t()), e.u.configure(e.g.abr));
                }
                return (
                  (t = ui(e.h.variants)),
                  (t = e.C.create(t)),
                  e.u.setVariants(Array.from(t.values())),
                  e.u.chooseVariant(!0)
                );
              }
              function Td(e, t, n) {
                var r, i, a, o, s;
                return D(function (u) {
                  return 1 == u.g
                    ? ((r = e.g.streaming.segmentPrefetchLimit || 2),
                      (i = new Xu(
                        r,
                        t,
                        function (t, n, r) {
                          return Il(t, n, r || null, e.g.streaming.retryParameters, e.Da, e.F);
                        },
                        !1,
                      )),
                      e.M.set(t.id, i),
                      t.segmentIndex ? u.A(2) : x(u, t.createSegmentIndex(), 2))
                    : ((a = "number" == typeof e.o ? e.o : 0),
                      (o = t.segmentIndex.Xb(a)),
                      (s = null),
                      o && ((s = o.current()) || (s = o.next().value)),
                      s || (s = Du(t.segmentIndex)),
                      s
                        ? n
                          ? s.ea
                            ? x(u, qu(i, s.ea), 0)
                            : u.A(0)
                          : x(u, Ku(i, s.startTime), 0)
                        : u.A(0));
                });
              }
              function wd(e) {
                var t, n, r, i;
                return D(function (a) {
                  for (t = [], n = g([e.video, e.audio]), r = n.next(); !r.done; r = n.next())
                    (i = r.value) && !i.segmentIndex && t.push(i.createSegmentIndex());
                  return t.length > 0 ? x(a, Promise.all(t), 0) : a.A(0);
                });
              }
              function Sd(e) {
                function t(e) {
                  return (e.video && e.audio) || (e.video && e.video.codecs.includes(","));
                }
                e.variants.some(t) && (e.variants = e.variants.filter(t));
              }
              function Ad(e, t) {
                Ui.call(this);
                var n = this;
                ((this.i = e),
                  (this.l = t),
                  (this.g = new Map()),
                  (this.m = [
                    {
                      kd: null,
                      jd: Id,
                      Uc: function (e, t) {
                        return Ed(n, "enter", e, t);
                      },
                    },
                    {
                      kd: kd,
                      jd: Id,
                      Uc: function (e, t) {
                        return Ed(n, "enter", e, t);
                      },
                    },
                    {
                      kd: Cd,
                      jd: Id,
                      Uc: function (e, t) {
                        return Ed(n, "enter", e, t);
                      },
                    },
                    {
                      kd: Id,
                      jd: kd,
                      Uc: function (e, t) {
                        return Ed(n, "exit", e, t);
                      },
                    },
                    {
                      kd: Id,
                      jd: Cd,
                      Uc: function (e, t) {
                        return Ed(n, "exit", e, t);
                      },
                    },
                    {
                      kd: kd,
                      jd: Cd,
                      Uc: function (e, t) {
                        t ? Ed(n, "skip", e, t) : (Ed(n, "enter", e, t), Ed(n, "exit", e, t));
                      },
                    },
                    {
                      kd: Cd,
                      jd: kd,
                      Uc: function (e, t) {
                        return Ed(n, "skip", e, t);
                      },
                    },
                  ]),
                  (this.h = new ne()),
                  this.h.D(this.i, "regionremove", function (e) {
                    n.g.delete(e.region);
                  }));
              }
              function Ed(e, t, n, r) {
                ((t = new Li(
                  t,
                  new Map([
                    ["region", n],
                    ["seeking", r],
                  ]),
                )),
                  e.dispatchEvent(t));
              }
              (((i = dl.prototype).destroy = function () {
                return this.l.destroy();
              }),
                (i.configure = function (e) {
                  if (
                    ((this.i = e),
                    (this.X = new Ai(
                      {
                        maxAttempts: Math.max(e.retryParameters.maxAttempts, 2),
                        baseDelay: e.retryParameters.baseDelay,
                        backoffFactor: e.retryParameters.backoffFactor,
                        fuzzFactor: e.retryParameters.fuzzFactor,
                      },
                      !0,
                    )),
                    e.disableAudioPrefetch)
                  ) {
                    var t = this.h.get("audio");
                    t && t.ia && ($u(t.ia), (t.ia = null));
                    for (var n = (t = g(this.m.keys())).next(); !n.done; n = t.next())
                      ((n = n.value), $u(this.m.get(n)), this.m.delete(n));
                  }
                  for (
                    e.disableTextPrefetch && (t = this.h.get(gt)) && t.ia && ($u(t.ia), (t.ia = null)),
                      e.disableVideoPrefetch &&
                        (t = this.h.get("video")) &&
                        t.ia &&
                        ($u(t.ia), (t.ia = null)),
                      n = (t = g(this.h.keys())).next();
                    !n.done;
                    n = t.next()
                  )
                    (n = this.h.get(n.value)).ia
                      ? (Qu(n.ia, e.segmentPrefetchLimit),
                        e.segmentPrefetchLimit > 0 || ($u(n.ia), (n.ia = null)))
                      : e.segmentPrefetchLimit > 0 && (n.ia = yl(this, n.stream));
                  e.disableAudioPrefetch ||
                    (function (e) {
                      for (
                        var t = e.i.segmentPrefetchLimit,
                          n = e.i.prefetchAudioLanguages,
                          r = g(e.j.variants),
                          i = r.next(),
                          a = {};
                        !i.done;
                        a = { Mb: void 0 }, i = r.next()
                      )
                        if (((a.Mb = i.value), a.Mb.audio))
                          if (e.m.has(a.Mb.audio)) {
                            if (
                              (Qu((i = e.m.get(a.Mb.audio)), t),
                              !(
                                t > 0 &&
                                n.some(
                                  (function (e) {
                                    return function (t) {
                                      return Nr(e.Mb.audio.language, t);
                                    };
                                  })(a),
                                )
                              ))
                            ) {
                              var o = e.h.get(a.Mb.audio.type);
                              (i !== (o && o.ia) && $u(i), e.m.delete(a.Mb.audio));
                            }
                          } else
                            t <= 0 ||
                              !n.some(
                                (function (e) {
                                  return function (t) {
                                    return Nr(e.Mb.audio.language, t);
                                  };
                                })(a),
                              ) ||
                              !(i = yl(e, a.Mb.audio)) ||
                              (a.Mb.audio.segmentIndex || a.Mb.audio.createSegmentIndex(),
                              e.m.set(a.Mb.audio, i));
                    })(this);
                }),
                (i.start = function (e) {
                  var t = this;
                  return D(function (n) {
                    if (1 == n.g)
                      return x(
                        n,
                        (function (e, t) {
                          var n, r, i, a, o, s, u;
                          return D(function (l) {
                            if (1 == l.g) {
                              if (!e.o) throw new Ke(2, 5, 5006);
                              return (
                                (n = Bl(e, !0)),
                                x(
                                  l,
                                  e.g.Z.init(
                                    n,
                                    e.j.sequenceMode,
                                    e.j.type,
                                    e.j.ignoreManifestTimestampsInSegmentsMode,
                                  ),
                                  2,
                                )
                              );
                            }
                            for (
                              Qi(e.l), e.updateDuration(), r = g(n.keys()), i = r.next();
                              !i.done;
                              i = r.next()
                            )
                              ((a = i.value),
                                (o = n.get(a)),
                                e.h.has(a) ||
                                  ((s = vl(e, o)),
                                  t.has(o.id) &&
                                    (Wu((u = t.get(o.id)), function (t, n, r) {
                                      return Il(t, n, r || null, e.i.retryParameters, e.g.vc);
                                    }),
                                    (s.ia = u)),
                                  e.h.set(a, s),
                                  Ml(e, s, 0)));
                            (Ol(e), T(l));
                          });
                        })(t, e || new Map()),
                        2,
                      );
                    (Qi(t.l), (t.N = !0), T(n));
                  });
                }),
                (i.bd = function () {
                  if (this.g) {
                    for (var e = this.g.nc(), t = g(this.h.keys()), n = t.next(); !n.done; n = t.next()) {
                      var r,
                        i = n.value;
                      if (
                        ((n = this.h.get(i)),
                        (r = !this.J) &&
                          ((r = this.g.Z),
                          (r = !(r =
                            i == gt
                              ? null != (r = r.h).g && null != r.h && e >= r.g && e < r.h
                              : qo((r = Fs(r, i)), e)))),
                        r)
                      ) {
                        if (((this.R = 0), n.ia && (n.ia.h = null), "audio" === n.type))
                          for (var a = (r = g(this.m.values())).next(); !a.done; a = r.next())
                            a.value.h = null;
                        ((n.ua = null),
                          (null != js(this.g.Z, i) || n.Ka) && ml(this, n),
                          n.Va && (n.Va.abort(), (n.Va = null)),
                          i === gt && (i = this.g.Z).K && i.K.Pd(),
                          (n.bd = !0));
                      }
                      !this.J || n.Wb || n.Ka || n.qb || Ml(this, n, 0);
                    }
                    Nl(this) && Ul(this);
                  }
                }),
                (i.updateDuration = function () {
                  var e = Za(),
                    t = this.j.presentationTimeline.getDuration();
                  t < 1 / 0
                    ? (e && (this.u && this.u.stop(), zs(this.g.Z)), this.g.Z.Ab(t))
                    : e
                      ? (this.u && this.u.Ea(0.5), this.g.Z.Ab(1 / 0))
                      : this.g.Z.Ab(4294967296);
                }),
                V("shaka.util.ConfigUtils", jl),
                (jl.getDifferenceFromConfigObjects = Gl),
                (jl.convertToConfigObject = Vl),
                (jl.mergeConfigObjects = Fl),
                V("shaka.config.RepeatMode", { OFF: 0, ALL: 1, SINGLE: 2 }),
                V("shaka.drm.FairPlay", zl),
                (zl.commonFairPlayResponse = function (e, t) {
                  if (2 === e && (e = t.originalRequest.drmInfo) && He(e.keySystem)) {
                    try {
                      var n = Ye(t.data);
                    } catch (i) {
                      return;
                    }
                    if (
                      ((e = !1),
                      "<ckc>" === (n = n.trim()).substr(0, 5) &&
                        "</ckc>" === n.substr(-6) &&
                        ((n = n.slice(5, -6)), (e = !0)),
                      !e)
                    )
                      try {
                        var r = JSON.parse(n);
                        (r.ckc && ((n = r.ckc), (e = !0)),
                          r.CkcMessage && ((n = r.CkcMessage), (e = !0)),
                          r.License && ((n = r.License), (e = !0)));
                      } catch (i) {}
                    e && (t.data = Le(at(n)));
                  }
                }),
                (zl.muxFairPlayRequest = function (e, t) {
                  ql(e, t);
                }),
                (zl.expressplayFairPlayRequest = function (e, t) {
                  if (2 === e) {
                    var n = t.drmInfo;
                    n && He(n.keySystem) && ql(e, t);
                  }
                }),
                (zl.conaxFairPlayRequest = function (e, t) {
                  ql(e, t);
                }),
                (zl.ezdrmFairPlayRequest = function (e, t) {
                  ql(e, t);
                }),
                (zl.verimatrixFairPlayRequest = function (e, t) {
                  2 === e &&
                    (e = t.drmInfo) &&
                    He(e.keySystem) &&
                    ((e = it((e = Ne(t.body)))),
                    (t.headers["Content-Type"] = "application/x-www-form-urlencoded"),
                    (t.body = Qe("spc=" + e)));
                }),
                (zl.muxInitDataTransform = function (e, t, n) {
                  return Kl(e, t, n);
                }),
                (zl.expressplayInitDataTransform = function (e, t, n) {
                  return Kl(e, t, n);
                }),
                (zl.conaxInitDataTransform = function (t, n, r) {
                  if ("skd" !== n) return t;
                  ((n = r.serverCertificate),
                    (r = Je(t).split("skd://").pop().split("?").shift()),
                    (r = e.atob(r)));
                  var i = new ArrayBuffer(2 * r.length);
                  i = Oe(i);
                  for (var a = 0, o = r.length; a < o; a++) i[a] = r.charCodeAt(a);
                  return Wl(t, i, n);
                }),
                (zl.ezdrmInitDataTransform = function (e, t, n) {
                  return "skd" !== t
                    ? e
                    : ((t = n.serverCertificate), Wl(e, (n = Je(e).split(";").pop()), t));
                }),
                (zl.verimatrixInitDataTransform = function (e, t, n) {
                  return Kl(e, t, n);
                }),
                (zl.initDataTransform = Wl),
                (zl.defaultGetContentId = Xl),
                (zl.isFairPlaySupported = function () {
                  var e;
                  return D(function (t) {
                    return 1 == t.g
                      ? ((e = {
                          initDataTypes: ["cenc", "sinf", "skd"],
                          videoCapabilities: [{ contentType: 'video/mp4; codecs="avc1.42E01E"' }],
                        }),
                        w(t, 2),
                        x(t, navigator.requestMediaKeySystemAccess("com.apple.fps", [e]), 4))
                      : 2 != t.g
                        ? t.return(!0)
                        : (E(t), t.return(!1));
                  });
                }),
                (Yl.prototype.add = function (e, t) {
                  var n,
                    r = this.h;
                  if (
                    ((t = void 0 === t || t),
                    !(n = !!r.audio != !!e.audio || !!r.video != !!e.video || r.language != e.language) &&
                      (n = r.audio && e.audio))
                  ) {
                    n = r.audio;
                    var i = e.audio;
                    n = !(
                      !(
                        ((!n.channelsCount ||
                          !i.channelsCount ||
                          n.channelsCount > 2 ||
                          i.channelsCount > 2) &&
                          n.channelsCount != i.channelsCount) ||
                        n.spatialAudio !== i.spatialAudio ||
                        (t && !$l(n, i))
                      ) &&
                      Z(n.roles, i.roles) &&
                      n.groupId === i.groupId
                    );
                  }
                  return (
                    !n &&
                      (n = r.video && e.video) &&
                      ((r = r.video), (n = e.video), (n = !((!t || $l(r, n)) && Z(r.roles, n.roles)))),
                    !n && (this.g.add(e), !0)
                  );
                }),
                (Yl.prototype.values = function () {
                  return this.g.values();
                }),
                V("shaka.media.AdaptationSet", Yl),
                (Jl.prototype.configure = function (e) {
                  this.g = e;
                }),
                (Jl.prototype.getConfiguration = function () {
                  return this.g;
                }),
                (Jl.prototype.create = function (e) {
                  var t;
                  if (this.g.language) {
                    var n = (function (e, t) {
                      var n = Hr(
                        (t = Br(t)),
                        e.map(function (e) {
                          return Vr(e);
                        }),
                      );
                      return n
                        ? e.filter(function (e) {
                            return n == Vr(e);
                          })
                        : [];
                    })(e, this.g.language);
                    n.length && (t = n);
                  }
                  (t ||
                    (t = (t = e.filter(function (e) {
                      return e.primary;
                    })).length
                      ? t
                      : e),
                    (e = (function (e, t) {
                      return e.filter(function (e) {
                        return !!e.audio && (t ? e.audio.roles.includes(t) : 0 == e.audio.roles.length);
                      });
                    })(t, this.g.role)),
                    e.length && (t = e),
                    (e = (function (e, t) {
                      return e.filter(function (e) {
                        return !!e.video && (t ? e.video.roles.includes(t) : 0 == e.video.roles.length);
                      });
                    })(t, this.g.videoRole)),
                    e.length && (t = e),
                    this.g.videoLayout &&
                      ((e = (function (e, t) {
                        return e.filter(function (e) {
                          return !e.video || !e.video.videoLayout || e.video.videoLayout == t;
                        });
                      })(t, this.g.videoLayout)),
                      e.length && (t = e)),
                    this.g.hdrLevel &&
                      ((e = (function (e, t) {
                        if ("AUTO" == t) {
                          var n = e.some(function (e) {
                            return !(!e.video || !e.video.hdr || "HLG" != e.video.hdr);
                          });
                          t = oe().sd(n);
                        }
                        return e.filter(function (e) {
                          return !e.video || !e.video.hdr || e.video.hdr == t;
                        });
                      })(t, this.g.hdrLevel)),
                      e.length && (t = e)));
                  var r = [this.g.channelCount, this.g.preferredAudioChannelCount];
                  if (
                    (e = r.filter(function (e, t) {
                      return e && r.indexOf(e) === t;
                    })).length
                  )
                    for (n = (e = g(e)).next(); !n.done; n = e.next())
                      if ((n = Ql(t, n.value)).length) {
                        t = n;
                        break;
                      }
                  (this.g.audioLabel &&
                    ((e = (function (e, t) {
                      return e.filter(function (e) {
                        return (
                          !(!e.audio || !e.audio.label) && e.audio.label.toLowerCase() == t.toLowerCase()
                        );
                      });
                    })(t, this.g.audioLabel)),
                    e.length && (t = e)),
                    this.g.videoLabel &&
                      ((e = (function (e, t) {
                        return e.filter(function (e) {
                          return (
                            !(!e.video || !e.video.label) && e.video.label.toLowerCase() == t.toLowerCase()
                          );
                        });
                      })(t, this.g.videoLabel)),
                      e.length && (t = e)),
                    (e = (function (e, t) {
                      return e.filter(function (e) {
                        return !e.audio || e.audio.spatialAudio == t;
                      });
                    })(t, this.g.spatialAudio)),
                    e.length && (t = e));
                  var i = [this.g.audioCodec, this.g.activeAudioCodec].concat(m(this.g.preferredAudioCodecs));
                  if (
                    (e = i.filter(function (e, t) {
                      return e && i.indexOf(e) === t;
                    })).length
                  )
                    for (n = (e = g(e)).next(); !n.done; n = e.next())
                      if ((n = Zl(t, n.value)).length) {
                        t = n;
                        break;
                      }
                  return (
                    (e = oe()),
                    (e = "smooth" == this.g.codecSwitchingStrategy && e.Ib()),
                    (this.h = new Yl(t[0], t, !e))
                  );
                }),
                (Jl.prototype.getLastAdaptationSet = function () {
                  return this.h;
                }),
                V("shaka.util.PlayerConfiguration", ed),
                (ed.mergeConfigObjects = rd),
                (ed.createDefaultForLL = nd),
                (ed.createDefault = td),
                p(fd, Ui),
                ((i = fd.prototype).getStartTime = function () {
                  return this.o;
                }),
                (i.rd = function () {
                  return this.N;
                }),
                (i.Lg = function () {
                  return this.h;
                }),
                (i.getStats = function () {
                  return this.X;
                }),
                (i.Vj = function () {
                  return this.i ? ti(this.i) : null;
                }),
                (i.Uj = function () {
                  return this.T ? ni(this.T) : null;
                }),
                (i.start = function () {
                  var t,
                    n = this;
                  D(function (r) {
                    switch (r.g) {
                      case 1:
                        return x(r, Promise.resolve(), 2);
                      case 2:
                        return (
                          w(r, 3),
                          x(
                            r,
                            (function (e) {
                              var t, n, r, i, a;
                              return D(function (o) {
                                switch (o.g) {
                                  case 1:
                                    if (
                                      (yd(e, "manifest-parser"),
                                      e.m ||
                                        ((e.H = Et(e.N, e.V)),
                                        (e.m = e.H()),
                                        e.m.configure(e.g.manifest, function () {
                                          return e.F;
                                        })),
                                      (t = Date.now() / 1e3),
                                      yd(e, "manifest"),
                                      e.h)
                                    ) {
                                      o.A(2);
                                      break;
                                    }
                                    return x(o, e.m.start(e.N, e.Ua), 3);
                                  case 3:
                                    return (
                                      (e.h = o.h),
                                      Sd(e.h),
                                      x(
                                        o,
                                        (function (e) {
                                          return D(function (t) {
                                            return (
                                              e.C ||
                                                ((e.C = e.g.adaptationSetCriteriaFactory()),
                                                e.C.configure({
                                                  language: e.g.preferredAudioLanguage,
                                                  role: e.g.preferredAudioRole,
                                                  videoRole: e.g.preferredVideoRole,
                                                  channelCount: 0,
                                                  hdrLevel: e.g.preferredVideoHdrLevel,
                                                  spatialAudio: e.g.preferSpatialAudio,
                                                  videoLayout: e.g.preferredVideoLayout,
                                                  audioLabel: e.g.preferredAudioLabel,
                                                  videoLabel: e.g.preferredVideoLabel,
                                                  codecSwitchingStrategy:
                                                    e.g.mediaSource.codecSwitchingStrategy,
                                                  audioCodec: "",
                                                  activeAudioCodec: "",
                                                  activeAudioChannelCount: 0,
                                                  preferredAudioCodecs: e.g.preferredAudioCodecs,
                                                  preferredAudioChannelCount: e.g.preferredAudioChannelCount,
                                                })),
                                              e.i ||
                                              !e.h.variants.length ||
                                              (1 != e.h.variants.length && "HLS" != e.h.type)
                                                ? t.A(0)
                                                : ((e.i = xd(e)), e.i ? x(t, wd(e.i), 0) : t.A(0))
                                            );
                                          });
                                        })(e),
                                        2,
                                      )
                                    );
                                  case 2:
                                    return (
                                      e.ma.resolve(),
                                      (n = new Li("manifestparsed", void 0)),
                                      x(o, Promise.resolve(), 5)
                                    );
                                  case 5:
                                    if ((e.dispatchEvent(n), 0 == e.h.variants.length))
                                      throw new Ke(2, 4, 4036);
                                    if ((Sd(e.h), !Ka(e.G, e.h))) {
                                      o.A(6);
                                      break;
                                    }
                                    return (
                                      (r = new Li("trackschanged", void 0)),
                                      x(o, Promise.resolve(), 7)
                                    );
                                  case 7:
                                    (vd(e), e.dispatchEvent(r));
                                  case 6:
                                    ((i = Date.now() / 1e3), (a = i - t), (e.X.J = a), T(o));
                                }
                              });
                            })(n),
                            5,
                          )
                        );
                      case 5:
                        if ((vd(n), "webkit" === e.shakaMediaKeysPolyfill)) {
                          r.A(6);
                          break;
                        }
                        return x(r, bd(n), 7);
                      case 7:
                        vd(n);
                      case 6:
                        return x(
                          r,
                          (function (e) {
                            return D(function (t) {
                              return 1 == t.g
                                ? !e.i || e.h.variants.includes(e.i)
                                  ? t.A(0)
                                  : x(
                                      t,
                                      (function (e) {
                                        var t, n, r, i;
                                        return D(function (a) {
                                          for (
                                            t = [], n = g([e.video, e.audio]), r = n.next();
                                            !r.done;
                                            r = n.next()
                                          )
                                            (i = r.value) &&
                                              i.segmentIndex &&
                                              i.closeSegmentIndex &&
                                              t.push(i.closeSegmentIndex());
                                          return t.length > 0 ? x(a, Promise.all(t), 0) : a.A(0);
                                        });
                                      })(e.i),
                                      3,
                                    )
                                : ((e.i = xd(e)), e.i ? x(t, wd(e.i), 0) : t.A(0));
                            });
                          })(n),
                          8,
                        );
                      case 8:
                        if ((vd(n), !n.$)) {
                          r.A(9);
                          break;
                        }
                        return x(
                          r,
                          (function (e) {
                            var t, n, r, i, a;
                            return D(function (o) {
                              return (
                                !e.i && (t = xd(e)) && (e.i = t),
                                e.i
                                  ? ((n = e.h.presentationTimeline.W()),
                                    (r = []),
                                    (i = e.i).video && r.push(Td(e, i.video, n)),
                                    i.audio && r.push(Td(e, i.audio, n)),
                                    (a =
                                      li(
                                        e.h.textStreams,
                                        e.g.preferredTextLanguage,
                                        e.g.preferredTextRole,
                                        e.g.preferForcedSubs,
                                      )[0] || null) &&
                                      fi(i.audio, a, e.g) &&
                                      (r.push(Td(e, a, n)), (e.T = a)),
                                    x(o, Promise.all(r), 0))
                                  : o.A(0)
                              );
                            });
                          })(n),
                          10,
                        );
                      case 10:
                        vd(n);
                      case 9:
                        if (!n.$ || !n.j) {
                          r.A(11);
                          break;
                        }
                        return x(
                          r,
                          (function (e) {
                            return D(function (t) {
                              return 1 == t.g
                                ? !e.K || Ma(e)
                                  ? t.A(0)
                                  : x(t, e.m, 3)
                                : x(
                                    t,
                                    Promise.all(
                                      e.X.map(function (e) {
                                        return e.promise;
                                      }),
                                    ),
                                    0,
                                  );
                            });
                          })(n.j),
                          12,
                        );
                      case 12:
                        vd(n);
                      case 11:
                        (n.B.resolve(), A(r, 0));
                        break;
                      case 3:
                        (((t = E(r)) instanceof Ke && (7001 == t.code || 7003 == t.code)) || n.B.reject(t),
                          T(r));
                    }
                  });
                }),
                (i.dispatchEvent = function (e) {
                  return this.O ? this.O.dispatchEvent(e) : Ui.prototype.dispatchEvent.call(this, e);
                }),
                (i.onError = function (e) {
                  2 === e.severity && (this.B.reject(e), this.destroy());
                  var t = new Map().set("detail", e);
                  ((t = new Li("error", t)), this.dispatchEvent(t), t.defaultPrevented && (e.handled = !0));
                }),
                (i.configure = function (e, t) {
                  ((e = Vl(e, t)), rd(this.g, e));
                }),
                (i.getConfiguration = function () {
                  return Wt(this.g);
                }),
                (i.rl = function () {
                  return this.B;
                }),
                (i.destroy = function () {
                  var e,
                    t,
                    n = this;
                  return D(function (r) {
                    if (1 == r.g) return ((n.l = !0), !n.m || n.oa ? r.A(2) : x(r, n.m.stop(), 2));
                    if (4 != r.g)
                      return (
                        n.u && n.u.release(),
                        n.I && !n.va && n.I.release(),
                        !n.j || n.ba ? r.A(4) : x(r, n.j.destroy(), 4)
                      );
                    if (n.M.size > 0 && !n.ya)
                      for (e = g(n.M.values()), t = e.next(); !t.done; t = e.next()) $u(t.value);
                    T(r);
                  });
                }),
                V("shaka.media.PreloadManager", fd),
                (fd.prototype.destroy = fd.prototype.destroy),
                (fd.prototype.waitForFinish = fd.prototype.rl),
                (fd.prototype.getPrefetchedTextTrack = fd.prototype.Uj),
                (fd.prototype.getPrefetchedVariantTrack = fd.prototype.Vj),
                p(Ad, Ui),
                (Ad.prototype.release = function () {
                  ((this.i = null),
                    this.g.clear(),
                    this.h.release(),
                    (this.h = null),
                    Ui.prototype.release.call(this));
                }),
                (Ad.prototype.j = function (e, t) {
                  if (!this.l || 0 != e) {
                    this.l = !1;
                    for (var n = g(this.i.h.values()), r = n.next(); !r.done; r = n.next()) {
                      r = r.value;
                      var i = this.g.get(r),
                        a = e < r.startTime ? kd : e > r.endTime ? Cd : Id;
                      this.g.set(r, a);
                      for (var o = g(this.m), s = o.next(); !s.done; s = o.next())
                        (s = s.value).kd == i && s.jd == a && s.Uc(r, t);
                    }
                  }
                }));
              /*
      		 @license
      		 Copyright 2013 Ali Al Dallal

      		 Licensed under the MIT license.

      		 Permission is hereby granted, free of charge, to any person obtaining a copy
      		 of this software and associated documentation files (the "Software"), to deal
      		 in the Software without restriction, including without limitation the rights
      		 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
      		 copies of the Software, and to permit persons to whom the Software is
      		 furnished to do so, subject to the following conditions:

      		 The above copyright notice and this permission notice shall be included in
      		 all copies or substantial portions of the Software.

      		 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
      		 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
      		 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
      		 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
      		 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
      		 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
      		 SOFTWARE.
      		*/
              for (
                var kd = 1,
                  Id = 2,
                  Cd = 3,
                  Md = {
                    ach: "Lwo",
                    ady: "",
                    af: "Afrikaans",
                    "af-NA": "Afrikaans (Namibia)",
                    "af-ZA": "Afrikaans (South Africa)",
                    ak: "Ti",
                    ar: "",
                    "ar-AR": "",
                    "ar-MA": "",
                    "ar-SA": " ()",
                    "ay-BO": "Aymar aru",
                    az: "Azrbaycan dili",
                    "az-AZ": "Azrbaycan dili",
                    "be-BY": "",
                    bg: "",
                    "bg-BG": "",
                    bn: "",
                    "bn-IN": " ()",
                    "bn-BD": "()",
                    "bs-BA": "Bosanski",
                    ca: "Catal",
                    "ca-ES": "Catal",
                    cak: "Maya Kaqchikel",
                    "ck-US": " (tsalagi)",
                    cs: "etina",
                    "cs-CZ": "etina",
                    cy: "Cymraeg",
                    "cy-GB": "Cymraeg",
                    da: "Dansk",
                    "da-DK": "Dansk",
                    de: "Deutsch",
                    "de-AT": "Deutsch (sterreich)",
                    "de-DE": "Deutsch (Deutschland)",
                    "de-CH": "Deutsch (Schweiz)",
                    dsb: "Dolnoserbina",
                    el: "",
                    "el-GR": "",
                    en: "English",
                    "en-GB": "English (UK)",
                    "en-AU": "English (Australia)",
                    "en-CA": "English (Canada)",
                    "en-IE": "English (Ireland)",
                    "en-IN": "English (India)",
                    "en-PI": "English (Pirate)",
                    "en-UD": "English (Upside Down)",
                    "en-US": "English (US)",
                    "en-ZA": "English (South Africa)",
                    "en@pirate": "English (Pirate)",
                    eo: "Esperanto",
                    "eo-EO": "Esperanto",
                    es: "Espaol",
                    "es-AR": "Espaol (Argentine)",
                    "es-419": "Espaol (Latinoamrica)",
                    "es-CL": "Espaol (Chile)",
                    "es-CO": "Espaol (Colombia)",
                    "es-EC": "Espaol (Ecuador)",
                    "es-ES": "Espaol (Espaa)",
                    "es-LA": "Espaol (Latinoamrica)",
                    "es-NI": "Espaol (Nicaragua)",
                    "es-MX": "Espaol (Mxico)",
                    "es-US": "Espaol (Estados Unidos)",
                    "es-VE": "Espaol (Venezuela)",
                    et: "eesti keel",
                    "et-EE": "Eesti (Estonia)",
                    eu: "Euskara",
                    "eu-ES": "Euskara",
                    fa: "",
                    "fa-IR": "",
                    "fb-LT": "Leet Speak",
                    ff: "Fulah",
                    fi: "Suomi",
                    "fi-FI": "Suomi",
                    "fo-FO": "Froyskt",
                    fr: "Franais",
                    "fr-CA": "Franais (Canada)",
                    "fr-FR": "Franais (France)",
                    "fr-BE": "Franais (Belgique)",
                    "fr-CH": "Franais (Suisse)",
                    "fy-NL": "Frysk",
                    ga: "Gaeilge",
                    "ga-IE": "Gaeilge (Gaelic)",
                    gl: "Galego",
                    "gl-ES": "Galego",
                    "gn-PY": "Avae'",
                    "gu-IN": "",
                    "gx-GR": " ",
                    he: "",
                    "he-IL": "",
                    hi: "",
                    "hi-IN": "",
                    hr: "Hrvatski",
                    "hr-HR": "Hrvatski",
                    hsb: "Hornjoserbina",
                    ht: "Kreyl",
                    hu: "Magyar",
                    "hu-HU": "Magyar",
                    "hy-AM": "",
                    id: "Bahasa Indonesia",
                    "id-ID": "Bahasa Indonesia",
                    is: "slenska",
                    "is-IS": "slenska (Iceland)",
                    it: "Italiano",
                    "it-IT": "Italiano",
                    ja: "",
                    "ja-JP": "",
                    "jv-ID": "Basa Jawa",
                    "ka-GE": "",
                    "kk-KZ": "",
                    km: "",
                    "km-KH": "",
                    kab: "Taqbaylit",
                    kn: "",
                    "kn-IN": " (India)",
                    ko: "",
                    "ko-KR": " ()",
                    ku: "Kurd",
                    "ku-TR": "Kurd",
                    la: "Latin",
                    "la-VA": "Latin",
                    lb: "Ltzebuergesch",
                    "li-NL": "Lmbrgs",
                    lt: "Lietuvi",
                    "lt-LT": "Lietuvi",
                    lv: "Latvieu",
                    "lv-LV": "Latvieu",
                    mai: ", ",
                    "mg-MG": "Malagasy",
                    mk: "",
                    "mk-MK": " ()",
                    ml: "",
                    "ml-IN": "",
                    "mn-MN": "",
                    mr: "",
                    "mr-IN": "",
                    ms: "Bahasa Melayu",
                    "ms-MY": "Bahasa Melayu",
                    mt: "Malti",
                    "mt-MT": "Malti",
                    my: "",
                    nb: "Norsk (bokml)",
                    "nb-NO": "Norsk (bokml)",
                    ne: "",
                    "ne-NP": "",
                    nl: "Nederlands",
                    "nl-BE": "Nederlands (Belgi)",
                    "nl-NL": "Nederlands (Nederland)",
                    "nn-NO": "Norsk (nynorsk)",
                    no: "Norsk",
                    oc: "Occitan",
                    "or-IN": "",
                    pa: "",
                    "pa-IN": " ( )",
                    pl: "Polski",
                    "pl-PL": "Polski",
                    "ps-AF": "",
                    pt: "Portugus",
                    "pt-BR": "Portugus (Brasil)",
                    "pt-PT": "Portugus (Portugal)",
                    "qu-PE": "Qhichwa",
                    "rm-CH": "Rumantsch",
                    ro: "Romn",
                    "ro-RO": "Romn",
                    ru: "",
                    "ru-RU": "",
                    "sa-IN": "",
                    "se-NO": "Davvismegiella",
                    "si-LK": "",
                    sk: "Slovenina",
                    "sk-SK": "Slovenina (Slovakia)",
                    sl: "Slovenina",
                    "sl-SI": "Slovenina",
                    "so-SO": "Soomaaliga",
                    sq: "Shqip",
                    "sq-AL": "Shqip",
                    sr: "",
                    "sr-RS": " (Serbia)",
                    su: "Basa Sunda",
                    sv: "Svenska",
                    "sv-SE": "Svenska",
                    sw: "Kiswahili",
                    "sw-KE": "Kiswahili",
                    ta: "",
                    "ta-IN": "",
                    te: "",
                    "te-IN": "",
                    tg: " ",
                    "tg-TJ": "",
                    th: "",
                    "th-TH": " ()",
                    tl: "Filipino",
                    "tl-PH": "Filipino",
                    tlh: "tlhIngan-Hol",
                    tr: "Trke",
                    "tr-TR": "Trke",
                    "tt-RU": "",
                    uk: "",
                    "uk-UA": "",
                    ur: "",
                    "ur-PK": "",
                    uz: "O'zbek",
                    "uz-UZ": "O'zbek",
                    vi: "Ting Vit",
                    "vi-VN": "Ting Vit",
                    "xh-ZA": "isiXhosa",
                    yi: "",
                    "yi-DE": " (German)",
                    zh: "",
                    "zh-HANS": "",
                    "zh-HANT": "",
                    "zh-CN": "",
                    "zh-HK": "",
                    "zh-SG": "",
                    "zh-TW": "",
                    "zu-ZA": "isiZulu",
                  },
                  Rd = g(Object.keys(Md)),
                  _d = Rd.next();
                !_d.done;
                _d = Rd.next()
              ) {
                var Dd = _d.value;
                Md[Dd.toLowerCase()] = Md[Dd];
              }
              function Pd(e, t) {
                if (e.lineBreak) return "\n";
                if (e.nestedCues.length)
                  return e.nestedCues
                    .map(function (t) {
                      return Pd(t, e);
                    })
                    .join("");
                if (!e.payload) return e.payload;
                var n = [],
                  r = e.fontWeight >= qn,
                  i = e.fontStyle == $n,
                  a = e.textDecoration.includes(Qn);
                return (
                  r && n.push(["b"]),
                  i && n.push(["i"]),
                  a && n.push(["u"]),
                  "" == (i = e.color) && t && (i = t.color),
                  (r = ""),
                  (i = Ld(i)) && (r += "." + i),
                  "" == (i = e.backgroundColor) && t && (i = t.backgroundColor),
                  (t = Ld(i)) && (r += ".bg_" + t),
                  r && n.push(["c", r]),
                  n.reduceRight(function (e, t) {
                    var n = g(t);
                    return (
                      "<" +
                      (t = n.next().value) +
                      (void 0 === (n = n.next().value) ? "" : n) +
                      ">" +
                      e +
                      "</" +
                      t +
                      ">"
                    );
                  }, e.payload)
                );
              }
              function Ld(e) {
                var t = (e = e.toLowerCase())
                  .replace(/\s/g, "")
                  .match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);
                switch (
                  (t
                    ? (e =
                        "#" +
                        (256 | parseInt(t[1], 10)).toString(16).slice(1) +
                        (256 | parseInt(t[2], 10)).toString(16).slice(1) +
                        (256 | parseInt(t[3], 10)).toString(16).slice(1))
                    : e.startsWith("#") && e.length > 7 && (e = e.slice(0, 7)),
                  e)
                ) {
                  case "white":
                  case "#fff":
                  case "#ffffff":
                    return "white";
                  case "lime":
                  case "#0f0":
                  case "#00ff00":
                    return "lime";
                  case "cyan":
                  case "#0ff":
                  case "#00ffff":
                    return "cyan";
                  case "red":
                  case "#f00":
                  case "#ff0000":
                    return "red";
                  case "yellow":
                  case "#ff0":
                  case "#ffff00":
                    return "yellow";
                  case "magenta":
                  case "#f0f":
                  case "#ff00ff":
                    return "magenta";
                  case "blue":
                  case "#00f":
                  case "#0000ff":
                    return "blue";
                  case "black":
                  case "#000":
                  case "#000000":
                    return "black";
                }
                return null;
              }
              function Nd(e, t) {
                for (var n = [], r = (e = g(Od(e))).next(); !r.done; r = e.next())
                  if ((r = r.value).isContainer) n.push.apply(n, m(Nd(r.nestedCues, r)));
                  else {
                    var i = r.clone();
                    ((i.nestedCues = []), (i.payload = Pd(r, t)), n.push(i));
                  }
                return n;
              }
              function Od(e) {
                for (var t = [], n = (e = g(e)).next(), r = {}; !n.done; r = { mg: void 0 }, n = e.next())
                  ((r.mg = n.value),
                    t.some(
                      (function (e) {
                        return function (t) {
                          return Rn(e.mg, t);
                        };
                      })(r),
                    ) || t.push(r.mg));
                return t;
              }
              function Ud(e) {
                function t(e) {
                  for (var t = 5381, n = e.length; n; ) t = (33 * t) ^ e.charCodeAt(--n);
                  return (t >>> 0).toString();
                }
                if (e.startTime >= e.endTime) return null;
                var n = new VTTCue(e.startTime, e.endTime, e.payload);
                ((n.id = t(e.startTime.toString()) + t(e.endTime.toString()) + t(e.payload)),
                  (n.lineAlign = e.lineAlign),
                  (n.positionAlign = e.positionAlign),
                  e.size && (n.size = e.size));
                try {
                  n.align = e.textAlign;
                } catch (r) {}
                return (
                  "center" == e.textAlign && "center" != n.align && (n.align = "middle"),
                  "vertical-lr" == e.writingMode
                    ? (n.vertical = "lr")
                    : "vertical-rl" == e.writingMode && (n.vertical = "rl"),
                  1 == e.lineInterpretation && (n.snapToLines = !1),
                  null != e.line && (n.line = e.line),
                  null != e.position && (n.position = e.position),
                  n
                );
              }
              function Bd(e, t) {
                var n = Nd(t),
                  r = [];
                t = e.cues ? Array.from(e.cues) : [];
                for (var i = (n = g(n)).next(), a = {}; !i.done; a = { vd: void 0 }, i = n.next())
                  ((a.vd = i.value),
                    !t.some(
                      (function (e) {
                        return function (t) {
                          return (
                            t.startTime == e.vd.startTime &&
                            t.endTime == e.vd.endTime &&
                            t.text == e.vd.payload
                          );
                        };
                      })(a),
                    ) &&
                      a.vd.payload &&
                      (i = Ud(a.vd)) &&
                      r.push(i));
                for (
                  n = (t = g(
                    (t = r.slice().sort(function (e, t) {
                      return e.startTime != t.startTime
                        ? e.startTime - t.startTime
                        : e.endTime != t.endTime
                          ? e.endTime - t.startTime
                          : ("line" in VTTCue.prototype)
                            ? r.indexOf(t) - r.indexOf(e)
                            : r.indexOf(e) - r.indexOf(t);
                    })),
                  )).next();
                  !n.done;
                  n = t.next()
                )
                  e.addCue(n.value);
              }
              function jd(e, t) {
                var n = !1;
                "disabled" === e.mode && ((n = !0), (e.mode = "hidden"));
                for (var r = 0; r < e.cues.length; ) {
                  var i = e.cues[r];
                  t(i) ? e.removeCue(i) : r++;
                }
                n && (e.mode = "disabled");
              }
              function Fd(e) {
                var t = this;
                ((this.i = e),
                  (this.l = new ne()),
                  (this.j = null),
                  (this.h = new Map()),
                  (this.g = -1),
                  (this.u = !1),
                  (this.o = null),
                  (this.C = function () {
                    (t.l.Ma(t.i, "textchanged", t.m), t.l.Ma(t.j.textTracks, "change", t.B));
                    for (var e = g(t.h.values()), n = e.next(); !n.done; n = e.next()) n.value.remove();
                    (t.h.clear(), (t.g = -1), (t.j = null));
                  }),
                  (this.m = function () {
                    for (var e = new Map(), n = t.i.Lc(), r = (n = g(n)).next(); !r.done; r = n.next()) {
                      if (((r = r.value), t.h.has(r.id))) {
                        var i = t.h.get(r.id);
                        (r.active || "disabled" === i.track.mode || (i.track.mode = "disabled"),
                          t.h.delete(r.id));
                      } else {
                        (i = t.j.ownerDocument.createElement("track")).kind = Vd(r);
                        var a = i,
                          o = void 0;
                        if (r.label) o = r.label;
                        else if (r.language)
                          if (r.language in Md) o = Md[r.language];
                          else {
                            var s = Fr(r.language);
                            s in Md && (o = Md[s] + " (" + r.language + ")");
                          }
                        (o ||
                          ((o = r.originalTextId),
                          r.language && r.language !== r.originalTextId && (o += " (" + r.language + ")")),
                          (a.label = o),
                          r.language in Md && (i.srclang = r.language),
                          (i.src = "data:,WEBVTT"),
                          (i.track.mode = "disabled"),
                          t.j.appendChild(i));
                      }
                      (e.set(r.id, i), r.active && (t.g = r.id));
                    }
                    for (r = (n = g(t.h.values())).next(); !r.done; r = n.next()) r.value.remove();
                    (t.g > -1 &&
                      (e.has(t.g)
                        ? "disabled" === (n = e.get(t.g).track).mode && (n.mode = t.u ? "showing" : "hidden")
                        : (t.g = -1)),
                      (t.h = e));
                  }),
                  (this.B = function () {
                    if (!t.o) {
                      var e = t.j;
                      t.o = new Mr(function () {
                        if (((t.o = null), t.j === e)) {
                          var n = -1,
                            r = !1;
                          if (t.h.has(t.g)) {
                            var i = t.h.get(t.g);
                            "showing" === i.track.mode
                              ? ((n = t.g), (r = !0))
                              : "hidden" === i.track.mode && (n = t.g);
                          }
                          if (!r)
                            for (i = (r = g(t.h)).next(); !i.done; i = r.next()) {
                              var a = g(i.value);
                              if (((i = a.next().value), "showing" === (a = a.next().value).track.mode)) {
                                n = i;
                                break;
                              }
                              n < 0 && "hidden" === a.track.mode && (n = i);
                            }
                          for (i = (r = g(t.h)).next(); !i.done; i = r.next())
                            ((i = (a = g(i.value)).next().value),
                              (a = a.next().value),
                              i !== n && "disabled" !== a.track.mode && (a.track.mode = "disabled"));
                          (t.g !== n && ((t.g = n), n > -1 && t.i.ph({ id: n })),
                            t.i.wh(n > -1 && "showing" === t.h.get(n).track.mode));
                        }
                      }).ka(0);
                    }
                  }),
                  this.l.D(e, "loaded", function () {
                    return t.enableTextDisplayer();
                  }),
                  this.enableTextDisplayer());
              }
              function Vd(e) {
                var t = oe();
                return e.forced && "WEBKIT" === t.Ha()
                  ? "forced"
                  : "caption" === e.kind ||
                      (e.roles &&
                        e.roles.some(function (e) {
                          return e.includes("transcribes-spoken-dialog");
                        }) &&
                        e.roles.some(function (e) {
                          return e.includes("describes-music-and-sound");
                        }))
                    ? "captions"
                    : "subtitles";
              }
              function Hd(e, t) {
                for (
                  ce("SimpleTextDisplayer", "Please migrate to NativeTextDisplayer"),
                    this.h = e,
                    this.i = t,
                    this.g = null,
                    t = (e = g(Array.from(this.h.textTracks))).next();
                  !t.done;
                  t = e.next()
                )
                  "metadata" !== (t = t.value).kind &&
                    "chapters" !== t.kind &&
                    ((t.mode = "disabled"), t.label == this.i && (this.g = t));
                this.g && (this.g.mode = "hidden");
              }
              function Gd(e) {
                e.h && !e.g && ((e.g = e.h.addTextTrack("subtitles", e.i)), (e.g.mode = "hidden"));
              }
              function zd() {}
              function Xd(t, n) {
                var r = this;
                ((this.m = !1),
                  (this.h = []),
                  (this.j = t),
                  (this.o = n),
                  (this.C = this.u = null),
                  (this.g = document.createElement("div")),
                  this.g.classList.add("shaka-text-container"),
                  (this.g.style.textAlign = "center"),
                  (this.g.style.display = "flex"),
                  (this.g.style.flexDirection = "column"),
                  (this.g.style.alignItems = "center"),
                  (this.g.style.justifyContent = "flex-end"),
                  (this.B = new Mr(function () {
                    r.j.paused || Yd(r);
                  })),
                  Wd(this),
                  (this.l = new Map()),
                  (this.i = new ne()),
                  this.i.D(document, "fullscreenchange", function () {
                    Yd(r, !0);
                  }),
                  this.i.D(this.j, "seeking", function () {
                    Yd(r, !0);
                  }),
                  this.i.D(this.j, "ratechange", function () {
                    Wd(r);
                  }),
                  this.i.D(this.j, "resize", function () {
                    var e = r.j,
                      t = e.videoWidth;
                    ((e = e.videoHeight), (r.u = t && e ? t / e : null));
                  }),
                  (this.F = null),
                  "ResizeObserver" in e &&
                    ((this.F = new ResizeObserver(function () {
                      Yd(r, !0);
                    })),
                    this.F.observe(this.g)),
                  (this.G = new Map()));
              }
              function Wd(e) {
                e.B &&
                  (e.h.length
                    ? e.B.Ea(
                        (e.C ? e.C.captionsUpdatePeriod : 0.25) / Math.max(1, Math.abs(e.j.playbackRate)),
                      )
                    : e.B.stop());
              }
              function Kd(e, t) {
                for (; null != t; ) {
                  if (t == e.g) return !0;
                  t = t.parentElement;
                }
                return !1;
              }
              function qd(e, t, n, r, i) {
                for (var a = !1, o = [], s = [], u = (t = g(t)).next(); !u.done; u = t.next()) {
                  ((u = u.value), i.push(u));
                  var l = e.l.get(u),
                    d = u.startTime <= r && u.endTime > r,
                    c = l ? l.nj : null;
                  (l && (o.push(l.og), l.$c && o.push(l.$c), d || ((a = !0), e.l.delete(u), (l = null))),
                    d &&
                      (s.push(u),
                      l ? Kd(e, c) || (a = !0) : ($d(e, u, i), (c = (l = e.l.get(u)).nj), (a = !0))),
                    u.nestedCues.length > 0 && c && qd(e, u.nestedCues, c, r, i),
                    i.pop());
                }
                if (a) {
                  for (i = (r = g(o)).next(); !i.done; i = r.next())
                    (i = i.value).parentElement && i.parentElement.removeChild(i);
                  for (
                    s.sort(function (e, t) {
                      return e.startTime != t.startTime ? e.startTime - t.startTime : e.endTime - t.endTime;
                    }),
                      r = (s = g(s)).next();
                    !r.done;
                    r = s.next()
                  )
                    (r = e.l.get(r.value)).$c
                      ? (r.$c.contains(n) && r.$c.removeChild(n), n.appendChild(r.$c), r.$c.appendChild(r.og))
                      : n.appendChild(r.og);
                }
              }
              function Yd(e, t) {
                if (e.g) {
                  var n = e.j.currentTime;
                  if (!e.m || (void 0 !== t && t)) {
                    for (var r = (t = g(e.G.values())).next(); !r.done; r = t.next()) es(r.value);
                    (es(e.g), e.l.clear(), e.G.clear());
                  }
                  e.m && qd(e, e.h, e.g, n, []);
                }
              }
              function $d(e, t, n) {
                var r = n.length > 1,
                  i = r ? "span" : "div";
                (t.lineBreak && (i = "br"),
                  t.rubyTag && (i = t.rubyTag),
                  (r = !r && t.nestedCues.length > 0));
                var a = document.createElement(i);
                if (
                  ("br" != i &&
                    (function (e, t, n, r, i) {
                      var a = t.style,
                        o = 0 == n.nestedCues.length,
                        s = r.length > 1;
                      a.whiteSpace = "pre-wrap";
                      var u = n.payload.replace(/\s+$/g, function (e) {
                        return "".repeat(e.length);
                      });
                      if (
                        ((a.webkitTextStrokeColor = n.textStrokeColor),
                        (a.webkitTextStrokeWidth = n.textStrokeWidth),
                        (a.color = n.color),
                        (a.direction = n.direction),
                        (a.opacity = n.opacity),
                        (a.paddingLeft = Jd(n.linePadding, n, e.o)),
                        (a.paddingRight = Jd(n.linePadding, n, e.o)),
                        (a.textCombineUpright = n.textCombineUpright),
                        (a.textShadow = n.textShadow),
                        n.backgroundImage)
                      )
                        ((a.backgroundImage = "url('" + n.backgroundImage + "')"),
                          (a.backgroundRepeat = "no-repeat"),
                          (a.backgroundSize = "contain"),
                          (a.backgroundPosition = "center"),
                          n.backgroundColor && (a.backgroundColor = n.backgroundColor),
                          (a.width = "100%"),
                          (a.height = "100%"));
                      else {
                        if (n.nestedCues.length) var l = t;
                        else ((l = document.createElement("span")), t.appendChild(l));
                        (n.border && (l.style.border = n.border),
                          i ||
                            ((t = (function (e, t) {
                              for (var n = e.length - 1; n >= 0; n--) {
                                var r = t(e[n]);
                                if (r || 0 === r) return r;
                              }
                              return null;
                            })(r, function (e) {
                              return e.backgroundColor;
                            }))
                              ? (l.style.backgroundColor = t)
                              : u && (l.style.backgroundColor = "rgba(0, 0, 0, 0.8)")),
                          u && (l.setAttribute("translate", "no"), (l.textContent = u)));
                      }
                      (s && !r[r.length - 1].isContainer
                        ? (a.display = "inline")
                        : ((a.display = "flex"),
                          (a.flexDirection = "column"),
                          (a.alignItems = "center"),
                          "left" == n.textAlign || "start" == n.textAlign
                            ? ((a.width = "100%"), (a.alignItems = "start"))
                            : ("right" != n.textAlign && "end" != n.textAlign) ||
                              ((a.width = "100%"), (a.alignItems = "end")),
                          (a.justifyContent =
                            "before" == n.displayAlign
                              ? "flex-start"
                              : "center" == n.displayAlign
                                ? "center"
                                : "flex-end")),
                        o || (a.margin = "0"),
                        (a.fontFamily = n.fontFamily),
                        (a.fontWeight = n.fontWeight.toString()),
                        (a.fontStyle = n.fontStyle),
                        (a.letterSpacing = n.letterSpacing),
                        (1 !== (r = e.C ? e.C.fontScaleFactor : 1) || n.fontSize) &&
                          (a.fontSize = Jd(n.fontSize || "1em", n, e.o, r)),
                        null != (r = n.line) &&
                          ((o = n.lineInterpretation) == Hn &&
                            ((o = 1),
                            (s = 16),
                            e.u && e.u < 1 && (s = 32),
                            (r = r < 0 ? 100 + (r / s) * 100 : (r / s) * 100)),
                          1 == o &&
                            ((a.position = "absolute"),
                            n.writingMode == Vn
                              ? ((a.width = "100%"),
                                n.lineAlign == Gn
                                  ? (a.top = r + "%")
                                  : "end" == n.lineAlign && (a.bottom = 100 - r + "%"))
                              : "vertical-lr" == n.writingMode
                                ? ((a.height = "100%"),
                                  n.lineAlign == Gn
                                    ? (a.left = r + "%")
                                    : "end" == n.lineAlign && (a.right = 100 - r + "%"))
                                : ((a.height = "100%"),
                                  n.lineAlign == Gn
                                    ? (a.right = r + "%")
                                    : "end" == n.lineAlign && (a.left = 100 - r + "%")))),
                        (a.lineHeight = n.lineHeight),
                        (e = (function (e) {
                          var t = e.direction,
                            n = e.positionAlign;
                          return (
                            (e = e.textAlign),
                            n !== Nn
                              ? n
                              : "left" === e || ("start" === e && t === Fn) || ("end" === e && "rtl" === t)
                                ? "line-left"
                                : "right" === e || ("start" === e && "rtl" === t) || ("end" === e && t === Fn)
                                  ? "line-right"
                                  : "center"
                          );
                        })(n)),
                        "line-left" == e
                          ? ((a.cssFloat = "left"),
                            null !== n.position &&
                              ((a.position = "absolute"),
                              n.writingMode == Vn
                                ? ((a.left = n.position + "%"), (a.width = "auto"))
                                : (a.top = n.position + "%")))
                          : "line-right" == e
                            ? ((a.cssFloat = "right"),
                              null !== n.position &&
                                ((a.position = "absolute"),
                                n.writingMode == Vn
                                  ? ((a.right = 100 - n.position + "%"), (a.width = "auto"))
                                  : (a.bottom = n.position + "%")))
                            : null !== n.position &&
                              50 != n.position &&
                              ((a.position = "absolute"),
                              n.writingMode == Vn
                                ? ((a.left = n.position + "%"), (a.width = "auto"))
                                : (a.top = n.position + "%"),
                              n.size && (a.transform = "translateX(-50%)")),
                        (a.textAlign = n.textAlign),
                        (a.textDecoration = n.textDecoration.join(" ")),
                        (a.writingMode = n.writingMode),
                        ("writingMode" in document.documentElement.style && a.writingMode == n.writingMode) ||
                          (a.webkitWritingMode = n.writingMode),
                        n.size &&
                          (n.writingMode == Vn ? (a.width = n.size + "%") : (a.height = n.size + "%")));
                    })(e, a, t, n, r),
                  (n = null),
                  t.region && t.region.id)
                ) {
                  var o = t.region,
                    s = e.u === 4 / 3 ? 2.5 : 1.9;
                  if (
                    ((n =
                      o.id +
                      "_" +
                      o.width +
                      "x" +
                      o.height +
                      (o.heightUnits == Ot ? "%" : "px") +
                      "-" +
                      o.viewportAnchorX +
                      "x" +
                      o.viewportAnchorY +
                      (o.viewportAnchorUnits == Ot ? "%" : "px")),
                    e.G.has(n))
                  )
                    n = e.G.get(n);
                  else {
                    i = document.createElement("span");
                    var u = o.heightUnits == Ot ? "%" : "px",
                      l = o.widthUnits == Ot ? "%" : "px",
                      d = o.viewportAnchorUnits == Ot ? "%" : "px";
                    ((i.id = "shaka-text-region---" + n),
                      i.classList.add("shaka-text-region"),
                      (i.style.position = "absolute"));
                    var c = o.height,
                      h = o.width;
                    (2 === o.heightUnits && ((c = 5.33 * o.height), (u = "%")),
                      2 === o.widthUnits && ((h = o.width * s), (l = "%")),
                      (i.style.height = c + u),
                      (i.style.width = h + l),
                      2 === o.viewportAnchorUnits
                        ? ((s = (o.viewportAnchorY / 75) * 100),
                          (u = (o.viewportAnchorX / (e.u === 4 / 3 ? 160 : 210)) * 100),
                          (s -= (o.regionAnchorY * c) / 100),
                          (u -= (o.regionAnchorX * h) / 100),
                          (i.style.top = s + "%"),
                          (i.style.left = u + "%"))
                        : ((i.style.top = o.viewportAnchorY - (o.regionAnchorY * c) / 100 + d),
                          (i.style.left = o.viewportAnchorX - (o.regionAnchorX * h) / 100 + d)),
                      0 !== o.heightUnits &&
                        0 !== o.widthUnits &&
                        0 !== o.viewportAnchorUnits &&
                        ((o = Math.max(
                          0,
                          Math.min(
                            100 - (parseInt(i.style.width.slice(0, -1), 10) || 0),
                            parseInt(i.style.left.slice(0, -1), 10) || 0,
                          ),
                        )),
                        (i.style.top =
                          Math.max(
                            0,
                            Math.min(
                              100 - (parseInt(i.style.height.slice(0, -1), 10) || 0),
                              parseInt(i.style.top.slice(0, -1), 10) || 0,
                            ),
                          ) + "%"),
                        (i.style.left = o + "%")),
                      (i.style.display = "flex"),
                      (i.style.flexDirection = "column"),
                      (i.style.alignItems = "center"),
                      (i.style.justifyContent =
                        "before" == t.displayAlign
                          ? "flex-start"
                          : "center" == t.displayAlign
                            ? "center"
                            : "flex-end"),
                      e.G.set(n, i),
                      (n = i));
                  }
                }
                ((i = a),
                  r &&
                    ((i = document.createElement("span")).classList.add("shaka-text-wrapper"),
                    (i.style.backgroundColor = t.backgroundColor),
                    (i.style.lineHeight = "normal"),
                    a.appendChild(i)),
                  e.l.set(t, { og: a, nj: i, $c: n }));
              }
              function Jd(e, t, n, r) {
                r = void 0 === r ? 1 : r;
                var i = (i = new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))
                  ? { value: Number(i[1]), unit: i[2] }
                  : null;
                if (!i) return e;
                switch (((e = i.unit), (r *= i.value), e)) {
                  case "%":
                    return ((r / 100) * n.clientHeight) / t.cellResolution.rows + "px";
                  case "c":
                    return (n.clientHeight * r) / t.cellResolution.rows + "px";
                  default:
                    return r + e;
                }
              }
              function Qd(e, t) {
                ((this.g = t),
                  (this.j = e),
                  (this.m = new Map()),
                  (this.l = void 0),
                  (this.F = !1),
                  (this.J = !0),
                  (this.u = this.I = !1),
                  (this.C = this.B = void 0),
                  (this.H = 0),
                  (this.K = { request: !1, response: !1, event: !1 }),
                  (this.o = {}),
                  (this.i = new ne()),
                  (this.G = []),
                  (this.h = null));
              }
              function Zd(e) {
                if (e.G) for (var t = g(e.G), n = t.next(); !n.done; n = t.next()) n.value.stop();
                e.G = [];
              }
              function ec(e) {
                return (e = e.g.targets)
                  ? e.filter(function (e) {
                      return e.mode === Vc && e.enabled;
                    })
                  : [];
              }
              function tc(e) {
                return (e = e.g.targets)
                  ? e.filter(function (e) {
                      return e.mode === Fc && !0 === e.enabled;
                    })
                  : [];
              }
              function nc(t) {
                return (
                  t.g.sessionId || (t.g.sessionId = e.crypto.randomUUID()),
                  {
                    v: t.g.version,
                    sf: t.l,
                    sid: t.g.sessionId,
                    cid: t.g.contentId,
                    mtp: t.j.getBandwidthEstimate() / 1e3,
                  }
                );
              }
              function rc(e, t, n) {
                if (
                  ((n = void 0 === n ? {} : n),
                  (t = cc(e, (t = Object.assign({ e: t, ts: Date.now() }, n)), Vc)),
                  (n = e.g.targets),
                  !(e.g.version < wc) && n)
                ) {
                  var r = ec(e);
                  n = Array.from(new Set([].concat(m(Rc), m(Pc))));
                  for (var i = (r = g(r)).next(); !i.done; i = r.next()) {
                    var a = oc((i = i.value).includeKeys || [], n);
                    (a.includes(Uc) || a.push(Uc), (a = sc(t, a)));
                    var o = i.events || [],
                      s = a.e,
                      u = a.sta;
                    (s &&
                      (!Lc.includes(s) ||
                        !("ps" !== s || (u && Nc.includes(u))) ||
                        (o && o.length > 0 && !o.includes(s)))) ||
                      ac(e, a, i);
                  }
                }
              }
              function ic(e, t, n) {
                if (e.g.enabled) {
                  n = cc(e, n, jc);
                  var r = uc({ mode: jc, useHeaders: e.g.useHeaders, includeKeys: e.g.includeKeys || [] });
                  (e.o[r] || (e.o[r] = { request: 1, response: 1 }),
                    (n.sn = e.o[r].request++),
                    (function (e, t, n, r) {
                      if (r) {
                        if (((t = pc(t)), !Object.keys(t).length)) return;
                        Object.assign(n.headers, t);
                      } else {
                        var i = hc(t);
                        if (!i) return;
                        n.uris = n.uris.map(function (e) {
                          return fc(e, i);
                        });
                      }
                      tc(e).length > 0 || !e.m.has(n) || e.m.delete(n);
                    })(
                      e,
                      (n = sc(
                        n,
                        (r = oc(
                          (r = e.g.includeKeys || []),
                          e.g.version == wc ? Array.from(new Set([].concat(m(Rc), m(_c)))) : Mc,
                        )),
                      )),
                      t,
                      e.g.useHeaders,
                    ));
                }
              }
              function ac(e, t, n, r) {
                var i = {
                    maxAttempts: 2,
                    baseDelay: 1e3,
                    backoffFactor: 2,
                    fuzzFactor: 0.5,
                    timeout: 3e4,
                    stallTimeout: 5e3,
                    connectionTimeout: 1e4,
                  },
                  a = n.url;
                if (n.useHeaders) {
                  if (((t = pc(t)), !Object.keys(t).length)) return;
                  (r && Object.assign(r.headers, t), (r = Gi([a], i)), Object.assign(r.headers, t));
                } else {
                  if (!(t = hc(t))) return;
                  ((a = fc(a, t)), r && (r.uri = a), (r = Gi([a], i)));
                }
                e.j.Yb().request(9, r);
              }
              function oc(e, t) {
                if (!e || 0 === e.length) return t;
                for (var n = g(e), r = n.next(); !r.done; r = n.next()) t.includes(r.value);
                return e.filter(function (e) {
                  return t.includes(e);
                });
              }
              function sc(e, t) {
                return Object.keys(e).reduce(function (n, r) {
                  return (t.includes(r) && (n[r] = e[r]), n);
                }, {});
              }
              function uc(e) {
                var t = Object.keys(e)
                  .sort()
                  .reduce(function (t, n) {
                    return ("enabled" !== n && (t[n] = e[n]), t);
                  }, {});
                return JSON.stringify(t);
              }
              function lc(e, t) {
                if (!(t = e.j.Gc()[t]).length) return 0;
                var n = e.h ? e.h.currentTime : 0;
                return (e = t.find(function (e) {
                  return e.start <= n && e.end >= n;
                }))
                  ? 1e3 * (e.end - n)
                  : 0;
              }
              function dc(e, t, n) {
                var r = t.segment,
                  i = 0;
                (r && (i = r.endTime - r.startTime),
                  ((i = { d: 1e3 * i, st: e.j.W() ? Ac : Sc }).ot = (function (e) {
                    if (0 === e.type) return bc;
                    if ((e = e.stream)) {
                      var t = e.type;
                      if ("video" == t) return e.codecs && e.codecs.includes(",") ? yc : vc;
                      if ("audio" == t) return mc;
                      if ("text" == t) return "application/mp4" === e.mimeType ? Tc : xc;
                    }
                  })(t)));
                var a = i.ot === vc || i.ot === mc || i.ot === yc || i.ot === Tc;
                if ((t = t.stream)) {
                  var o = e.j.Ob();
                  if (
                    a &&
                    ((i.bl = (function (e, t) {
                      if (!(t = e.j.Gc()[t]).length) return NaN;
                      var n = e.h ? e.h.currentTime : 0;
                      return (e = t.find(function (e) {
                        return e.start <= n && e.end >= n;
                      }))
                        ? 1e3 * (e.end - n)
                        : NaN;
                    })(e, t.type)),
                    i.ot !== Tc)
                  ) {
                    var s = lc(e, t.type);
                    i.dl = o ? s / Math.abs(o) : s;
                  }
                  if ((t.bandwidth && (i.br = t.bandwidth / 1e3), t.segmentIndex && r)) {
                    if ((o = t.segmentIndex.Xb(r.endTime, !0, o < 0)) && (o = o.next().value) && o != r) {
                      if (n && !ee(r.P(), o.P())) {
                        var u = o.P()[0];
                        s = new URL(u);
                        var l = new URL(n);
                        if (s.origin !== l.origin) n = u;
                        else {
                          ((n = s.pathname.split("/").slice(1)),
                            (u = l.pathname.split("/").slice(1, -1)),
                            (l = Math.min(n.length, u.length)));
                          for (var d = 0; d < l && n[d] === u[d]; d++) (n.shift(), u.shift());
                          for (; u.length; ) (u.shift(), n.unshift(".."));
                          n = n.join("/") + s.search + s.hash;
                        }
                        i.nor = n;
                      }
                      (!o.startByte && !o.endByte) ||
                        (r.startByte == o.startByte && r.endByte == o.endByte) ||
                        ((n = o.startByte + "-"), o.endByte && (n += o.endByte), (i.nrr = n));
                    }
                    ((o = e.j.Ob() || 1),
                      (n = lc(e, t.type) || 500),
                      (r = (t = t.bandwidth)
                        ? ((t * (r.endTime - r.startTime)) / 1e3 / (n / o / 1e3)) * e.g.rtpSafetyFactor
                        : NaN),
                      isNaN(r) || (i.rtp = r));
                  }
                }
                return (
                  a &&
                    i.ot !== Tc &&
                    (i.tb =
                      (function (e, t) {
                        var n = e.j.qc();
                        if (!n.length) return NaN;
                        e = n[0];
                        for (var r = (n = g(n)).next(); !r.done; r = n.next())
                          "variant" === (r = r.value).type && r.bandwidth > e.bandwidth && (e = r);
                        switch (t) {
                          case vc:
                            return e.videoBandwidth || NaN;
                          case mc:
                            return e.audioBandwidth || NaN;
                          default:
                            return e.bandwidth;
                        }
                      })(e, i.ot) / 1e3),
                  i
                );
              }
              function cc(e, t, n) {
                (Object.assign(t, nc(e)), (t.pr = e.j.Ob()));
                var r = t.ot === vc || t.ot === yc;
                return (
                  e.I && r && ((t.bs = !0), (t.su = !0), (e.I = !1)),
                  null == t.su && (t.su = e.J),
                  e.j.W() && ((r = wh(e.j)), (t.ltc = r || void 0)),
                  document.hidden && (t.bg = !0),
                  null == (r = e.C && e.B ? e.C - (e.H || e.B) : void 0) ||
                    e.K[n] ||
                    ((t.msd = r), (e.K[n] = !0)),
                  t
                );
              }
              function hc(e) {
                function t(e) {
                  return 100 * n(e / 100);
                }
                function n(e) {
                  return Math.round(e);
                }
                function r(e) {
                  return !Number.isNaN(e) && null != e && "" !== e && !1 !== e;
                }
                for (
                  var i = [],
                    a = {
                      br: n,
                      d: n,
                      bl: t,
                      dl: t,
                      mtp: t,
                      nor: function (e) {
                        return encodeURIComponent(e);
                      },
                      rtp: t,
                      tb: n,
                      ttfb: n,
                      ttlb: n,
                    },
                    o = Object.keys(e || {}).sort(),
                    s = (o = g(o)).next();
                  !s.done;
                  s = o.next()
                ) {
                  var u = e[(s = s.value)];
                  if (r(u) && ("v" !== s || 1 !== u) && ("pr" != s || 1 !== u)) {
                    var l,
                      d = a[s];
                    (d && (u = d(u)),
                      (l =
                        "string" == (d = typeof u) && "ot" !== s && "sf" !== s && "st" !== s
                          ? s + "=" + JSON.stringify(u)
                          : "boolean" === d
                            ? s
                            : "symbol" === d
                              ? s + "=" + u.description
                              : s + "=" + u),
                      i.push(l));
                  }
                }
                return i.join(",");
              }
              function pc(e) {
                for (
                  var t = Object.keys(e),
                    n = {},
                    r = ["Object", "Request", "Session", "Status"],
                    i = [{}, {}, {}, {}],
                    a = {
                      br: 0,
                      d: 0,
                      ot: 0,
                      tb: 0,
                      url: 0,
                      bl: 1,
                      dl: 1,
                      mtp: 1,
                      nor: 1,
                      nrr: 1,
                      su: 1,
                      ltc: 1,
                      ttfb: 1,
                      ttlb: 1,
                      ts: 1,
                      rc: 1,
                      cmsdd: 1,
                      cmsds: 1,
                      sn: 1,
                      cid: 2,
                      pr: 2,
                      sf: 2,
                      sid: 2,
                      st: 2,
                      v: 2,
                      msd: 2,
                      bs: 3,
                      rtp: 3,
                      bg: 3,
                    },
                    o = (t = g(t)).next();
                  !o.done;
                  o = t.next()
                )
                  i[null != a[(o = o.value)] ? a[o] : 1][o] = e[o];
                for (e = 0; e < i.length; e++) (a = hc(i[e])) && (n["CMCD-" + r[e]] = a);
                return n;
              }
              function fc(e, t) {
                return !t || e.includes("offline:") ? e : ((e = new me(e)).g.set("CMCD", t), e.toString());
              }
              (((i = Fd.prototype).configure = function () {}),
                (i.remove = function (e, t) {
                  return (
                    !!this.i &&
                    (this.h.has(this.g) &&
                      jd(this.h.get(this.g).track, function (n) {
                        return n.startTime < t && n.endTime > e;
                      }),
                    !0)
                  );
                }),
                (i.append = function (e) {
                  this.h.has(this.g) && Bd(this.h.get(this.g).track, e);
                }),
                (i.destroy = function () {
                  return (
                    this.i && (this.j && this.C(), (this.i = null)),
                    this.l && (this.l.release(), (this.l = null)),
                    Promise.resolve()
                  );
                }),
                (i.isTextVisible = function () {
                  return this.u;
                }),
                (i.setTextVisibility = function (e) {
                  if (((this.u = e), this.h.has(this.g))) {
                    var t = this.h.get(this.g).track;
                    "disabled" !== t.mode && ((e = e ? "showing" : "hidden"), t.mode !== e && (t.mode = e));
                  } else if (this.i && 3 === this.i.$d())
                    if (
                      ((t = Array.from(this.i.bf().textTracks).filter(function (e) {
                        return ["captions", "subtitles", "forced"].includes(e.kind);
                      })),
                      e)
                    ) {
                      e = null;
                      for (var n = (t = g(t)).next(); !n.done; n = t.next()) {
                        if ("showing" === (n = n.value).mode) {
                          e = null;
                          break;
                        }
                        e || "hidden" !== n.mode || (e = n);
                      }
                      e && (e.mode = "showing");
                    } else
                      for (t = (e = g(t)).next(); !t.done; t = e.next())
                        "showing" === (t = t.value).mode && (t.mode = "hidden");
                }),
                (i.setTextLanguage = function () {}),
                (i.enableTextDisplayer = function () {
                  !this.j &&
                    this.i &&
                    2 === this.i.$d() &&
                    ((this.j = this.i.bf()),
                    this.l.Aa(this.i, "unloading", this.C),
                    this.l.D(this.i, "textchanged", this.m),
                    this.l.D(this.j.textTracks, "change", this.B),
                    this.m());
                }),
                V("shaka.text.NativeTextDisplayer", Fd),
                (Fd.prototype.enableTextDisplayer = Fd.prototype.enableTextDisplayer),
                (Fd.prototype.setTextLanguage = Fd.prototype.setTextLanguage),
                (Fd.prototype.setTextVisibility = Fd.prototype.setTextVisibility),
                (Fd.prototype.isTextVisible = Fd.prototype.isTextVisible),
                (Fd.prototype.destroy = Fd.prototype.destroy),
                (Fd.prototype.append = Fd.prototype.append),
                (Fd.prototype.remove = Fd.prototype.remove),
                (Fd.prototype.configure = Fd.prototype.configure),
                ((i = Hd.prototype).configure = function () {}),
                (i.remove = function (e, t) {
                  return (
                    !!this.g &&
                    (jd(this.g, function (n) {
                      return n.startTime < t && n.endTime > e;
                    }),
                    !0)
                  );
                }),
                (i.append = function (e) {
                  this.g && Bd(this.g, e);
                }),
                (i.destroy = function () {
                  return (
                    this.g &&
                      (jd(this.g, function () {
                        return !0;
                      }),
                      (this.g.mode = "disabled")),
                    (this.g = this.h = null),
                    Promise.resolve()
                  );
                }),
                (i.isTextVisible = function () {
                  return !!this.g && "showing" == this.g.mode;
                }),
                (i.setTextVisibility = function (e) {
                  (e && !this.g && Gd(this), this.g && (this.g.mode = e ? "showing" : "hidden"));
                }),
                (i.setTextLanguage = function () {}),
                (i.enableTextDisplayer = function () {
                  Gd(this);
                }),
                V("shaka.text.SimpleTextDisplayer", Hd),
                (Hd.prototype.enableTextDisplayer = Hd.prototype.enableTextDisplayer),
                (Hd.prototype.setTextLanguage = Hd.prototype.setTextLanguage),
                (Hd.prototype.setTextVisibility = Hd.prototype.setTextVisibility),
                (Hd.prototype.isTextVisible = Hd.prototype.isTextVisible),
                (Hd.prototype.destroy = Hd.prototype.destroy),
                (Hd.prototype.append = Hd.prototype.append),
                (Hd.prototype.remove = Hd.prototype.remove),
                (Hd.prototype.configure = Hd.prototype.configure),
                ((i = zd.prototype).configure = function () {}),
                (i.remove = function () {}),
                (i.append = function () {}),
                (i.destroy = function () {}),
                (i.isTextVisible = function () {
                  return !1;
                }),
                (i.setTextVisibility = function () {}),
                (i.setTextLanguage = function () {}),
                (i.enableTextDisplayer = function () {}),
                V("shaka.text.StubTextDisplayer", zd),
                (zd.prototype.enableTextDisplayer = zd.prototype.enableTextDisplayer),
                (zd.prototype.setTextLanguage = zd.prototype.setTextLanguage),
                (zd.prototype.setTextVisibility = zd.prototype.setTextVisibility),
                (zd.prototype.isTextVisible = zd.prototype.isTextVisible),
                (zd.prototype.destroy = zd.prototype.destroy),
                (zd.prototype.append = zd.prototype.append),
                (zd.prototype.remove = zd.prototype.remove),
                (zd.prototype.configure = zd.prototype.configure),
                ((i = Xd.prototype).configure = function (e) {
                  ((this.C = e), Wd(this), Yd(this, !0));
                }),
                (i.append = function (e) {
                  for (
                    var t = [].concat(m(this.h)), n = (e = g(Od(e))).next(), r = {};
                    !n.done;
                    r = { ng: void 0 }, n = e.next()
                  )
                    ((r.ng = n.value),
                      t.some(
                        (function (e) {
                          return function (t) {
                            return Rn(t, e.ng);
                          };
                        })(r),
                      ) || this.h.push(r.ng));
                  (this.h.length && Wd(this), Yd(this));
                }),
                (i.destroy = function () {
                  return this.g
                    ? (this.g.parentElement && this.o.removeChild(this.g),
                      (this.g = null),
                      (this.m = !1),
                      (this.h = []),
                      this.B && (this.B.stop(), (this.B = null)),
                      this.l.clear(),
                      this.i && (this.i.release(), (this.i = null)),
                      this.F && (this.F.disconnect(), (this.F = null)),
                      Promise.resolve())
                    : Promise.resolve();
                }),
                (i.remove = function (e, t) {
                  if (!this.g) return !1;
                  var n = this.h.length;
                  return (
                    (this.h = this.h.filter(function (n) {
                      return n.startTime < e || n.endTime >= t;
                    })),
                    Yd(this, n > this.h.length),
                    this.h.length || Wd(this),
                    !0
                  );
                }),
                (i.isTextVisible = function () {
                  return this.m;
                }),
                (i.setTextVisibility = function (e) {
                  (this.m = e)
                    ? (this.g.parentElement || this.o.appendChild(this.g), Yd(this, !0))
                    : this.g.parentElement && this.o.removeChild(this.g);
                }),
                (i.setTextLanguage = function (e) {
                  e && "und" != e ? this.g.setAttribute("lang", e) : this.g.setAttribute("lang", "");
                }),
                (i.enableTextDisplayer = function () {}),
                V("shaka.text.UITextDisplayer", Xd),
                (Xd.prototype.enableTextDisplayer = Xd.prototype.enableTextDisplayer),
                (Xd.prototype.setTextLanguage = Xd.prototype.setTextLanguage),
                (Xd.prototype.setTextVisibility = Xd.prototype.setTextVisibility),
                (Xd.prototype.isTextVisible = Xd.prototype.isTextVisible),
                (Xd.prototype.remove = Xd.prototype.remove),
                (Xd.prototype.destroy = Xd.prototype.destroy),
                (Xd.prototype.append = Xd.prototype.append),
                (Xd.prototype.configure = Xd.prototype.configure),
                V("shaka.text.WebVttGenerator", function () {}),
                (Qd.prototype.setMediaElement = function (t) {
                  ((this.h = t),
                    (function (t) {
                      (t.i.D(t.h, "playing", function () {
                        (t.C || (t.C = Date.now()), rc(t, "ps", { dd: "p" }));
                      }),
                        t.i.D(t.h, "volumechange", function () {
                          rc(t, t.h.muted ? "m" : "um");
                        }),
                        t.i.D(t.h, "play", function () {
                          t.B || ((t.B = Date.now()), rc(t, "ps", { dd: "s" }));
                        }),
                        t.i.D(t.h, "pause", function () {
                          rc(t, "ps", { dd: "a" });
                        }),
                        t.i.D(t.j, "buffering", function () {
                          rc(t, "ps", { dd: "w" });
                        }),
                        t.i.D(t.h, "seeking", function () {
                          return rc(t, "ps", { dd: "k" });
                        }),
                        t.i.D(document, "fullscreenchange", function () {
                          rc(t, document.fullscreenElement ? "pe" : "pc");
                        }));
                      var n = t.h;
                      ((n.webkitPresentationMode || n.webkitSupportsFullscreen) &&
                        t.i.D(n, "webkitpresentationmodechanged", function () {
                          n.webkitPresentationMode
                            ? rc(t, "inline" !== n.webkitPresentationMode ? "pe" : "pc")
                            : n.webkitSupportsFullscreen && rc(t, n.webkitDisplayingFullscreen ? "pe" : "pc");
                        }),
                        t.i.D(t.h, "enterpictureinpicture", function () {
                          rc(t, "pe");
                        }),
                        t.i.D(t.h, "leavepictureinpicture", function () {
                          rc(t, "pc");
                        }),
                        "documentPictureInPicture" in e &&
                          t.i.D(e.documentPictureInPicture, "enter", function (e) {
                            (rc(t, "pe"),
                              t.i.Aa(e.window, "pagehide", function () {
                                rc(t, "pc");
                              }));
                          }),
                        t.i.D(document, "visibilitychange", function () {
                          document.hidden ? rc(t, "b", { bg: !0 }) : rc(t, "b");
                        }),
                        t.i.D(t.j, "complete", function () {
                          rc(t, "ps", { dd: "e" });
                        }));
                    })(this));
                }),
                (Qd.prototype.configure = function (e) {
                  ((this.g = e),
                    (function (e) {
                      Zd(e);
                      for (var t = ec(e), n = (t = g(t)).next(); !n.done; n = t.next())
                        if ((void 0 === (n = n.value.timeInterval) && (n = Oc), n >= 1)) {
                          var r = new Mr(function () {
                            return rc(e, Bc);
                          });
                          (r.Ea(n), e.G.push(r));
                        }
                    })(this));
                }));
              var gc = "m",
                mc = "a",
                vc = "v",
                yc = "av",
                bc = "i",
                xc = "c",
                Tc = "tt",
                wc = 2,
                Sc = "v",
                Ac = "l",
                Ec = "d",
                kc = "ld",
                Ic = "h",
                Cc = "lh";
              V("shaka.util.CmcdManager.StreamingFormat", {
                DASH: Ec,
                Sl: kc,
                HLS: Ic,
                Tl: Cc,
                im: "s",
                OTHER: "o",
              });
              var Mc = "br bl bs cid d dl mtp nor nrr ot pr rtp sf sid st su tb v".split(" "),
                Rc =
                  "br ab bl tbl bs cdn cid ltc mtp pr sf sid bg sta st ts tpb tb lb tab lab pt ec msd v sn".split(
                    " ",
                  ),
                _c =
                  "ab bl tbl bs cdn cid d dl ltc mtp nor ot pr rtp sf sid bg sta st su ts tpb tb lb tab lab pt ec msd v".split(
                    " ",
                  ),
                Dc = "d dl nor ot rtp rc su ttfb ttfbb ttlb url cmsdd cmsds".split(" "),
                Pc = ["e", "sta"],
                Lc = "ps e t c b m um pe pc".split(" "),
                Nc = "spawkrfeqd".split(""),
                Oc = 10,
                Uc = "ts",
                Bc = "t",
                jc = "request",
                Fc = "response",
                Vc = "event";
              function Hc(e) {
                ((this.h = e), (this.g = null));
              }
              function Gc(e) {
                return (
                  !e ||
                  ("false" !== e.toLowerCase() &&
                    (/^[-0-9]/.test(e) ? parseInt(e, 10) : e.replace(/["]+/g, "")))
                );
              }
              (((i = Hc.prototype).configure = function (e) {
                this.h = e;
              }),
                (i.ji = function () {
                  return this.h.enabled && this.h.applyMaximumSuggestedBitrate && this.g && this.g.has(Xc)
                    ? 1e3 * this.g.get(Xc)
                    : null;
                }),
                (i.gi = function () {
                  return this.h.enabled && this.g && this.g.has(zc) ? 1e3 * this.g.get(zc) : null;
                }),
                (i.Xj = function () {
                  return this.h.enabled && this.g && this.g.has(Wc) ? this.g.get(Wc) : null;
                }),
                (i.Yj = function () {
                  return this.h.enabled && this.g && this.g.has(Kc) ? this.g.get(Kc) : null;
                }),
                (i.getBandwidthEstimate = function (e) {
                  var t = this.gi();
                  if (!t) return e;
                  var n = this.h.estimatedThroughputWeightRatio;
                  return n > 0 && n <= 1 ? e * (1 - n) + t * n : e;
                }),
                V("shaka.util.CmsdManager", Hc),
                (Hc.prototype.getBandwidthEstimate = Hc.prototype.getBandwidthEstimate),
                (Hc.prototype.getRoundTripTime = Hc.prototype.Yj),
                (Hc.prototype.getResponseDelay = Hc.prototype.Xj),
                (Hc.prototype.getEstimatedThroughput = Hc.prototype.gi),
                (Hc.prototype.getMaxBitrate = Hc.prototype.ji));
              var zc = "etp",
                Xc = "mb",
                Wc = "rd",
                Kc = "rtt";
              function qc() {
                ((this.g = null), (this.h = []));
              }
              function Yc(e, t) {
                return D(function (n) {
                  if (1 == n.g)
                    return e.g
                      ? x(
                          n,
                          new Promise(function (t) {
                            return e.h.push(t);
                          }),
                          2,
                        )
                      : n.A(2);
                  ((e.g = t), T(n));
                });
              }
              function $c(e, t, n) {
                return (
                  (n = void 0 === n ? Number.EPSILON : n),
                  e === t ||
                    (e = Math.abs(e - t)) <= n ||
                    (n !== Number.EPSILON && Math.abs(e - n) <= Number.EPSILON)
                );
              }
              function Jc(t, n, r) {
                ((n = void 0 === n ? null : n), Ui.call(this));
                var i = this;
                ((this.m = np),
                  (this.h = null),
                  (this.Be = n),
                  (this.$ = !1),
                  (this.Le = new ne()),
                  (this.Ce = new ne()),
                  (this.j = new ne()),
                  (this.dc = new ne()),
                  (this.Gd = new ne()),
                  (this.G = this.H = this.F = this.N = null),
                  (this.Me = 0),
                  (this.ba = new qc()),
                  (this.O =
                    this.Fa =
                    this.X =
                    this.i =
                    this.zc =
                    this.I =
                    this.l =
                    this.ye =
                    this.T =
                    this.Ph =
                    this.va =
                    this.K =
                    this.kb =
                    this.za =
                    this.Ae =
                    this.R =
                    this.Ta =
                    this.M =
                    this.ac =
                      null),
                  (this.Ua = !1),
                  (this.Ge = this.o = null),
                  (this.Fe = 1e9),
                  (this.Ke = []),
                  (this.yc = new Map()),
                  (this.ob = []),
                  (this.ag = -1),
                  (this.g = kh(this)),
                  (this.dg = {
                    streaming: {
                      inaccurateManifestTolerance: 0,
                      segmentPrefetchLimit: 2,
                      updateIntervalSeconds: 0.1,
                      maxDisabledTime: 1,
                      retryParameters: { baseDelay: 100 },
                    },
                    manifest: { dash: { autoCorrectDrift: !1 }, retryParameters: { baseDelay: 100 } },
                    drm: { retryParameters: { baseDelay: 100 } },
                  }),
                  (this.V = null),
                  (this.Ne = -1),
                  (this.cc = null),
                  (this.ya = { width: 1 / 0, height: 1 / 0 }),
                  (this.Ee = new Xa(this.g, this.ya, null)),
                  (this.Ie = []),
                  (this.B = null),
                  (this.J = this.g.adaptationSetCriteriaFactory()),
                  this.J.configure({
                    language: this.g.preferredAudioLanguage,
                    role: this.g.preferredAudioRole,
                    videoRole: this.g.preferredVideoRole,
                    channelCount: 0,
                    hdrLevel: this.g.preferredVideoHdrLevel,
                    spatialAudio: this.g.preferSpatialAudio,
                    videoLayout: this.g.preferredVideoLayout,
                    audioLabel: this.g.preferredAudioLabel,
                    videoLabel: this.g.preferredVideoLabel,
                    codecSwitchingStrategy: this.g.mediaSource.codecSwitchingStrategy,
                    audioCodec: "",
                    activeAudioCodec: "",
                    activeAudioChannelCount: 0,
                    preferredAudioCodecs: this.g.preferredAudioCodecs,
                    preferredAudioChannelCount: this.g.preferredAudioChannelCount,
                  }),
                  (this.Kd = this.g.preferredTextLanguage),
                  (this.Od = this.g.preferredTextRole),
                  (this.Nd = this.g.preferForcedSubs),
                  (this.De = []),
                  r && r(this),
                  (this.K = new Qd(this, this.g.cmcd)),
                  (this.va = new Hc(this.g.cmsd)),
                  (this.N = hh(this)),
                  (this.ma = this.oa = this.Da = this.C = null),
                  (this.fg = !1),
                  (this.cg = []),
                  (this.eg = new Mr(function () {
                    return D(function (e) {
                      return 1 == e.g
                        ? i.oa
                          ? x(e, i.Vb(i.ma, !0), 3)
                          : e.A(0)
                        : 4 != e.g
                          ? x(e, i.load(i.oa), 4)
                          : (i.fg ? i.ma.pause() : i.ma.play(), (i.oa = null), (i.fg = !1), void T(e));
                    });
                  })),
                  sp &&
                    ((this.C = sp()),
                    this.C.configure(this.g.ads),
                    this.Gd.D(this.C, "ad-content-pause-requested", function (e) {
                      var t, n;
                      return D(function (r) {
                        if (1 == r.g)
                          return (
                            i.eg.stop(),
                            i.oa
                              ? r.A(0)
                              : ((i.ma = i.h),
                                (i.fg = i.ge()),
                                (t = e.saveLivePosition || !1),
                                (n = !0),
                                i.W() && (n = t),
                                x(r, i.$h(!0, n), 3))
                          );
                        ((i.oa = r.h), T(r));
                      });
                    }),
                    this.Gd.D(this.C, "ad-content-resume-requested", function (e) {
                      if (((e = e.offset || 0), i.oa)) {
                        var t = i.oa;
                        t.o &&
                          e &&
                          ("number" == typeof t.o ? (t.o += e) : t.o.setTime(t.o.getTime() + 1e3 * e));
                      }
                      i.eg.ka(0.1);
                    }),
                    this.Gd.D(this.C, "ad-content-attach-requested", function () {
                      return D(function (e) {
                        if (1 == e.g) return i.h || !i.ma ? e.A(0) : x(e, i.Vb(i.ma, !0), 3);
                        ((i.ma = null), T(e));
                      });
                    })),
                  up && ((this.Da = up(this)), this.Da.configure(this.g.queue)),
                  this.Le.D(e, "online", function () {
                    (Wh(i), i.kh());
                  }),
                  (this.He = new Mr(function () {
                    for (
                      var e = Date.now() / 1e3, t = !1, n = !0, r = g(i.i.variants), a = r.next();
                      !a.done;
                      a = r.next()
                    )
                      ((a = a.value).disabledUntilTime > 0 &&
                        a.disabledUntilTime <= e &&
                        ((a.disabledUntilTime = 0), (t = !0)),
                        a.disabledUntilTime > 0 && (n = !1));
                    (n && i.He.stop(), t && Lh(i, !1, void 0, !1, !1));
                  })),
                  (this.eb = null),
                  t &&
                    (ce(
                      "Player w/ mediaElement",
                      "Please migrate from initializing Player with a mediaElement; use the attach method instead.",
                    ),
                    this.Vb(t, !0)),
                  (this.u = null));
              }
              function Qc(e) {
                null != e.T && (Tt(e.T), e.T.release(), (e.T = null));
              }
              function Zc(e, t) {
                return new Li(e, t);
              }
              function eh(e, t) {
                op.set(e, t);
              }
              function th(e, t) {
                e.dispatchEvent(Zc("onstatechange", new Map().set("state", t)));
              }
              function nh(e, t) {
                var n;
                return D(function (r) {
                  return 1 == r.g
                    ? ((n = ++e.Me), x(r, Yc(e.ba, t), 2))
                    : n != e.Me
                      ? (e.ba.release(), r.return(!0))
                      : r.return(!1);
                });
              }
              function rh(e, t) {
                var n, r, i;
                return (
                  (t = void 0 !== t && t),
                  D(function (a) {
                    if (1 == a.g)
                      return (
                        (n = null),
                        e.i && e.I && e.zc && e.X && e.g
                          ? ((r = e.h.currentTime),
                            t || (r = null),
                            x(a, ah(e, e.X, r, e.Fa, e.g, !0, !1), 3))
                          : a.A(2)
                      );
                    if (2 != a.g) {
                      ((n = a.h),
                        e.Ie.push(n),
                        e.I && e.I.setMediaElement && e.I.setMediaElement(null),
                        (i = e.l ? e.l.o : null) && (n.i = i));
                      var o = n,
                        s = e.I,
                        u = e.zc;
                      ((o.h = e.i),
                        (o.m = s),
                        (o.H = u),
                        (n.C = e.J),
                        n.start(),
                        (e.i = null),
                        (e.I = null),
                        (e.zc = null),
                        (e.o = null),
                        (e.Ge = null));
                    }
                    return a.return(n);
                  })
                );
              }
              function ih(e, t, n, r, i, a) {
                var o, s, u;
                return (
                  (i = void 0 !== i && i),
                  D(function (l) {
                    return 1 == l.g
                      ? r
                        ? l.A(2)
                        : x(l, oh(e, t), 3)
                      : (2 != l.g && (r = l.h),
                        (function (e, t) {
                          if (!Jv(oe())) return !0;
                          if (t) {
                            if ("" == (e.h || ts()).canPlayType(t)) return !1;
                            if (!Jv(oe()) || !kt.has(t.toLowerCase())) return !0;
                            if (vr(t))
                              return "WEBKIT" === oe().Ha() &&
                                (e.g.drm.servers["com.apple.fps"] || e.g.drm.servers["com.apple.fps.1_0"])
                                ? e.g.streaming.useNativeHlsForFairPlay
                                : e.g.streaming.preferNativeHls;
                            if ("application/dash+xml" === t || "video/vnd.mpeg.dash.mpd" === t)
                              return e.g.streaming.preferNativeDash;
                          }
                          return !1;
                        })(e, r)
                          ? l.return(null)
                          : ((o = a || e.g),
                            (s = !1),
                            i && e.h && "AUDIO" === e.h.nodeName && (s = !0),
                            (u = ah(e, t, n, r || null, o, !i, s)),
                            (u = i
                              ? u.then(function (e) {
                                  return ((e.F = !1), e);
                                })
                              : u.then(function (t) {
                                  return (e.Ie.push(t), t);
                                })),
                            l.return(u)));
                  })
                );
              }
              function ah(e, t, n, r, i, a, o) {
                var s, u, l, d, c, h, p, f, m, v, y, b;
                return (
                  (a = void 0 === a || a),
                  (o = void 0 !== o && o),
                  D(function (w) {
                    return 1 == w.g
                      ? ((s = null),
                        (u = Wt(i)),
                        o && (u.manifest.disableVideo = !0),
                        (l = function () {
                          return s.R && s.l ? null : s;
                        }),
                        (d = function () {
                          return l() ? l().getConfiguration() : e.g;
                        }),
                        e.ya.width != 1 / 0 || e.ya.height != 1 / 0 || e.g.ignoreHardwareResolution
                          ? w.A(2)
                          : x(w, oe().lc(), 3))
                      : (2 != w.g && ((c = w.h), (e.ya.width = c.width), (e.ya.height = c.height)),
                        (h = new Xa(u, e.ya, null)),
                        (p = {
                          networkingEngine: e.N,
                          filter: function (e) {
                            var t;
                            return D(function (n) {
                              return 1 == n.g
                                ? x(n, Wa(h, e), 2)
                                : 4 != n.g
                                  ? n.h
                                    ? ((t = Zc("trackschanged")), x(n, Promise.resolve(), 4))
                                    : n.A(0)
                                  : (s.dispatchEvent(t), void T(n));
                            });
                          },
                          makeTextStreamsForClosedCaptions: function (t) {
                            return (function (e, t) {
                              for (
                                var n = new Set(), r = g(t.textStreams), i = r.next();
                                !i.done;
                                i = r.next()
                              )
                                ("application/cea-608" != (i = i.value).mimeType &&
                                  "application/cea-708" != i.mimeType) ||
                                  n.add(i.originalId);
                              for (r = g(t.variants), i = r.next(); !i.done; i = r.next())
                                if ((i = i.value.video) && i.closedCaptions)
                                  for (
                                    var a = g(i.closedCaptions.keys()), o = a.next();
                                    !o.done;
                                    o = a.next()
                                  )
                                    if (((o = o.value), !n.has(o))) {
                                      var s = o.startsWith("CC")
                                          ? "application/cea-608"
                                          : "application/cea-708",
                                        u = new Nu(),
                                        l = i.closedCaptions.get(o);
                                      ((s = {
                                        id: e.Fe++,
                                        originalId: o,
                                        groupId: null,
                                        createSegmentIndex: function () {
                                          return Promise.resolve();
                                        },
                                        segmentIndex: u,
                                        mimeType: s,
                                        codecs: "",
                                        kind: "caption",
                                        encrypted: !1,
                                        drmInfos: [],
                                        keyIds: new Set(),
                                        language: l,
                                        originalLanguage: l,
                                        label: null,
                                        type: gt,
                                        primary: !1,
                                        trickModeVideo: null,
                                        dependencyStream: null,
                                        emsgSchemeIdUris: null,
                                        roles: i.roles,
                                        forced: !1,
                                        channelsCount: null,
                                        audioSamplingRate: null,
                                        spatialAudio: !1,
                                        closedCaptions: null,
                                        accessibilityPurpose: null,
                                        external: !1,
                                        fastSwitching: !1,
                                        fullMimeTypes: new Set([lr(s, "")]),
                                        isAudioMuxedInVideo: !1,
                                        baseOriginalId: null,
                                      }),
                                        t.textStreams.push(s),
                                        n.add(o));
                                    }
                            })(e, t);
                          },
                          onTimelineRegionAdded: function (e) {
                            zu(s.I, e);
                          },
                          onEvent: function (e) {
                            return s.dispatchEvent(e);
                          },
                          onError: function (e) {
                            return s.onError(e);
                          },
                          isLowLatencyMode: function () {
                            return d().streaming.lowLatencyMode;
                          },
                          updateDuration: function () {
                            e.l && s.R && e.l.updateDuration();
                          },
                          newDrmInfo: function (e) {
                            var t = s.j,
                              n = t ? t.g : null;
                            n && t.B && Ya(h, n.keySystem, e);
                          },
                          onManifestUpdated: function () {
                            var t = new Map().set("isLive", e.W());
                            (s.dispatchEvent(Zc("manifestupdated", t)),
                              gd(s, !1, function () {
                                e.C && e.C.onManifestUpdated(e.W());
                              }));
                          },
                          getBandwidthEstimate: function () {
                            return e.o.getBandwidthEstimate();
                          },
                          onMetadata: function (t, n, r, i) {
                            var a = t;
                            (("com.apple.hls.interstitial" != t && "com.apple.hls.overlay" != t) ||
                              ((a = "com.apple.quicktime.HLS"),
                              (t = { startTime: n, endTime: r, values: i }),
                              e.C && e.C.onHLSInterstitialMetadata(e, e.h, t)),
                              (t = (i = g(i)).next()));
                            for (var o = {}; !t.done; o = { bh: void 0 }, t = i.next())
                              ((o.bh = t.value),
                                "ID" != o.bh.name &&
                                  gd(
                                    s,
                                    !1,
                                    (function (t) {
                                      return function () {
                                        ch(e, n, r, a, t.bh);
                                      };
                                    })(o),
                                  ));
                          },
                          disableStream: function (t) {
                            return e.disableStream(t, e.g.streaming.maxDisabledTime);
                          },
                          addFont: function (t, n) {
                            return e.addFont(t, n);
                          },
                        }),
                        (f = new Gu(function () {
                          return e.Ra();
                        })).addEventListener("regionadd", function (t) {
                          var n = t.region;
                          (qh(e, "timelineregionadded", n, s),
                            gd(s, !1, function () {
                              e.C && (e.C.onDashTimedMetadata(n), e.C.onDASHInterstitialMetadata(e, e.h, n));
                            }));
                        }),
                        (m = null),
                        u.streaming.observeQualityChanges &&
                          ((m = new Fu(function () {
                            return e.Gc();
                          })).addEventListener("qualitychange", function (t) {
                            Yh(e, t.quality, t.position);
                          }),
                          m.addEventListener("audiotrackchange", function (t) {
                            Yh(e, t.quality, t.position, !0);
                          })),
                        (v = !0),
                        (y = {
                          vc: e.N,
                          onError: function (e) {
                            return s.onError(e);
                          },
                          zf: function (t) {
                            gd(s, !0, function () {
                              e.F &&
                                (function (e, t) {
                                  var n = Zc("keystatuschanged");
                                  e.dispatchEvent(n);
                                  var r = Object.keys(t);
                                  1 == r.length && "" == r[0] && ((r = ["00"]), (t = { "00": t[""] }));
                                  var i = 1 == r.length && "00" == r[0];
                                  if (((n = !1), r.length)) {
                                    r = e.keySystem();
                                    for (
                                      var a = ea(e.g.drm.clearKeys),
                                        o = function (n, r) {
                                          n.allowedByKeySystem = !0;
                                          for (var a = (r = g(r)).next(); !a.done; a = r.next())
                                            ((a = a.value),
                                              ((a = t[i ? "00" : a]) || e.F.H) &&
                                                (n.allowedByKeySystem =
                                                  n.allowedByKeySystem && !!a && !Ja.includes(a)));
                                        },
                                        s = g(e.i.variants),
                                        u = s.next();
                                      !u.done;
                                      u = s.next()
                                    )
                                      for (
                                        var l = ci((u = u.value)), d = (l = g(l)).next();
                                        !d.done;
                                        d = l.next()
                                      ) {
                                        d = d.value;
                                        var c = u.allowedByKeySystem;
                                        if (d.keyIds.size)
                                          if (d.drmInfos.length && !a.size && "HLS" == e.i.type)
                                            for (var h = g(d.drmInfos), p = h.next(); !p.done; p = h.next())
                                              (p = p.value).keySystem == r &&
                                                (p.keyIds.size ? o(u, p.keyIds) : o(u, d.keyIds));
                                          else o(u, d.keyIds);
                                        c != u.allowedByKeySystem && (n = !0);
                                      }
                                  }
                                  n && (Bh(e), (n = e.l.o) && !n.allowedByKeySystem ? Lh(e) : Dh(e));
                                })(e, t);
                            });
                          },
                          onExpirationUpdated: function (e, t) {
                            var n = Zc("expirationupdated");
                            (s.dispatchEvent(n),
                              (n = s.m) && n.onExpirationUpdated && n.onExpirationUpdated(e, t));
                          },
                          onEvent: function (t) {
                            (s.dispatchEvent(t),
                              "drmsessionupdate" == t.type &&
                                v &&
                                ((v = !1),
                                (t = Date.now() / 1e3 - s.za),
                                ((e.B || s.getStats()).m = t),
                                e.T && Tt(e.T)));
                          },
                        }),
                        (b = hh(e, l)),
                        Hi(e.N, b),
                        (s = new fd(t, r, n, {
                          config: u,
                          zk: p,
                          Kk: f,
                          Jk: m,
                          md: function () {
                            return e.md(y);
                          },
                          yk: h,
                          networkingEngine: b,
                          pj: a,
                        })),
                        w.return(s));
                  })
                );
              }
              function oh(e, t) {
                var n, r;
                return D(function (i) {
                  return 1 == i.g
                    ? ((n = e.g.manifest.retryParameters), x(i, ol(t, e.N, n), 2))
                    : ("application/x-mpegurl" == (r = i.h) &&
                        "WEBKIT" === oe().Ha() &&
                        (r = "application/vnd.apple.mpegurl"),
                      "video/quicktime" == r && "CHROMIUM" === oe().Ha() && (r = "video/mp4"),
                      i.return(r));
                });
              }
              function sh(e, t) {
                var n = e.g.textDisplayFactory;
                e.Oh !== n || (void 0 !== t && t)
                  ? ((t = e.u),
                    (e.u = n()),
                    e.u.configure
                      ? e.u.configure(e.g.textDisplayer)
                      : ce("Text displayer w/ configure", 'Text displayer should have a "configure" method!'),
                    e.u.setTextLanguage ||
                      ce(
                        "Text displayer w/ setTextLanguage",
                        'Text displayer should have a "setTextLanguage" method!',
                      ),
                    t
                      ? (e.u.setTextVisibility(t.isTextVisible()), t.destroy().catch(function () {}))
                      : e.u.setTextVisibility(e.$),
                    e.H &&
                      (function (e, t) {
                        ((e.ba = t), e.h && (e.h.l = t));
                      })(e.H, e.u),
                    (e.Oh = n),
                    e.l &&
                      (function (e) {
                        var t = e.h.get(gt);
                        t && fl(e, t.stream, !0, 0, !0);
                      })(e.l))
                  : e.u && e.u.configure && e.u.configure(e.g.textDisplayer);
              }
              function uh(e) {
                var t, n, r;
                return D(function (i) {
                  if (1 == i.g)
                    return (
                      oe(),
                      th(e, "media-source"),
                      e.g.mediaSource.useSourceElements && Zo(e.h),
                      sh(e),
                      (t = (function (e, t, n, r, i) {
                        return new _s(e, t, n, i, r);
                      })(
                        e.h,
                        e.u,
                        {
                          Pj: function () {
                            return e.keySystem();
                          },
                          onMetadata: function (t, n, r) {
                            for (var i = (t = g(t)).next(); !i.done; i = t.next())
                              if ((i = i.value).data && "number" == typeof i.cueTime && i.frames) {
                                var a = i.cueTime + n,
                                  o = r;
                                o && a > o && (o = a);
                                for (var s = g(i.frames), u = s.next(); !u.done; u = s.next())
                                  ch(e, a, o, "org.id3", u.value);
                                e.C && e.C.onHlsTimedMetadata(i, a);
                              }
                          },
                          Ek: function (t) {
                            e.kb &&
                              zu(e.kb, {
                                schemeIdUri: t.schemeIdUri,
                                startTime: t.startTime,
                                endTime: t.endTime,
                                id: String(t.id),
                                emsg: t,
                              });
                          },
                          onEvent: function (t) {
                            return e.dispatchEvent(t);
                          },
                          Gk: function () {
                            e.I && e.I.update && e.I.update();
                          },
                        },
                        e.T,
                        e.g.mediaSource,
                      )),
                      (n = e.g.manifest),
                      (r = n.segmentRelativeVttTiming),
                      (t.Fa = r),
                      x(i, t.M, 2)
                    );
                  ((e.H = t), T(i));
                });
              }
              function lh(e, t, n) {
                function r() {
                  return Mh(e);
                }
                if (
                  (e.j.D(t, "playing", r),
                  e.j.D(t, "pause", r),
                  e.j.D(t, "ended", r),
                  e.j.D(t, "ratechange", function () {
                    var t = e.h.playbackRate;
                    0 != t &&
                      (e.M && (e.M.set(t), e.m == rp && e.o.playbackRateChanged(t), Ch(e, t)),
                      (t = Zc("ratechange")),
                      e.dispatchEvent(t));
                  }),
                  t.remote &&
                    (e.j.D(t.remote, "connect", function () {
                      (e.l && "connected" == t.remote.state && Hh(e), Bh(e));
                    }),
                    e.j.D(t.remote, "connecting", function () {
                      return Bh(e);
                    }),
                    e.j.D(t.remote, "disconnect", function () {
                      return D(function (n) {
                        if (1 == n.g)
                          return e.l && "disconnected" == t.remote.state ? x(n, Ll(e.l), 3) : n.A(2);
                        (2 != n.g && Hh(e), Bh(e), T(n));
                      });
                    })),
                  t.audioTracks &&
                    (e.j.D(t.audioTracks, "addtrack", function () {
                      return Bh(e);
                    }),
                    e.j.D(t.audioTracks, "removetrack", function () {
                      return Bh(e);
                    }),
                    e.j.D(t.audioTracks, "change", function () {
                      return Bh(e);
                    })),
                  t.videoTracks &&
                    (e.j.D(t.videoTracks, "addtrack", function () {
                      return Bh(e);
                    }),
                    e.j.D(t.videoTracks, "removetrack", function () {
                      return Bh(e);
                    }),
                    e.j.D(t.videoTracks, "change", function () {
                      return Bh(e);
                    })),
                  (t.webkitPresentationMode || t.webkitSupportsFullscreen) &&
                    e.j.D(t, "webkitpresentationmodechanged", function () {
                      e.Be && sh(e, !0);
                    }),
                  t.textTracks)
                ) {
                  var i = function () {
                    (e.m === ip && e.u instanceof Fd && Hh(e), Bh(e));
                  };
                  (e.j.D(t.textTracks, "addtrack", function (t) {
                    if (t.track)
                      switch (((t = t.track), t.kind)) {
                        case "metadata":
                          !(function (e, t) {
                            if ("metadata" == t.kind) {
                              ((t.mode = "hidden"),
                                e.j.D(t, "cuechange", function () {
                                  if (t.activeCues)
                                    for (var n = g(t.activeCues), r = n.next(); !r.done; r = n.next())
                                      ((r = r.value),
                                        ch(e, r.startTime, r.endTime, r.type, r.value),
                                        e.C && e.C.onCueMetadataChange(r.value));
                                  if (t.cues) {
                                    n = [];
                                    for (
                                      var i = (r = g(t.cues)).next(), a = {};
                                      !i.done;
                                      a = { Ec: void 0 }, i = r.next()
                                    )
                                      ((a.Ec = i.value),
                                        "com.apple.quicktime.HLS" == a.Ec.type &&
                                          null != a.Ec.startTime &&
                                          ((i = n.find(
                                            (function (e) {
                                              return function (t) {
                                                return (
                                                  t.startTime == e.Ec.startTime && t.endTime == e.Ec.endTime
                                                );
                                              };
                                            })(a),
                                          )),
                                          i ||
                                            ((i = {
                                              startTime: a.Ec.startTime,
                                              endTime: a.Ec.endTime,
                                              values: [],
                                            }),
                                            n.push(i)),
                                          i.values.push(a.Ec.value)));
                                    for (r = (n = g(n)).next(); !r.done; r = n.next())
                                      (r = r.value).values.some(function (e) {
                                        return "X-ASSET-URI" == e.key || "X-ASSET-LIST" == e.key;
                                      }) &&
                                        e.C &&
                                        (r.values.push({
                                          key: "CUE",
                                          description: "",
                                          data: 0 != r.startTime || e.W() ? "ONCE" : "ONCE,PRE",
                                          mimeType: null,
                                          pictureType: null,
                                        }),
                                        e.C.onHLSInterstitialMetadata(e, e.h, r));
                                  }
                                }));
                              var n = new Mr(function () {
                                for (
                                  var t = (function (e) {
                                      return Array.from(e.h.textTracks).filter(function (e) {
                                        return "metadata" == e.kind;
                                      });
                                    })(e),
                                    n = (t = g(t)).next();
                                  !n.done;
                                  n = t.next()
                                )
                                  n.value.mode = "hidden";
                              })
                                .Jb()
                                .ka(0.5);
                              e.De.push(function () {
                                n.stop();
                              });
                            }
                          })(e, t);
                          break;
                        case "chapters":
                          !(function (e, t) {
                            if (t && "chapters" == t.kind) {
                              t.mode = "hidden";
                              var n = new Mr(function () {
                                t.mode = "hidden";
                              })
                                .Jb()
                                .ka(0.5);
                              e.De.push(function () {
                                n.stop();
                              });
                            }
                          })(e, t);
                          break;
                        default:
                          i();
                      }
                  }),
                    e.j.D(t.textTracks, "removetrack", i),
                    e.j.D(t.textTracks, "change", i));
                }
                "none" != t.preload &&
                  e.j.Aa(t, "loadedmetadata", function () {
                    e.B.G = Date.now() / 1e3 - n;
                  });
              }
              function dh(e, t, n) {
                ((t = new Map()
                  .set("startTime", t.startTime)
                  .set("endTime", t.endTime)
                  .set("metadataType", t.schemeIdUri)
                  .set("payload", t.payload)),
                  e.dispatchEvent(Zc(n, t)));
              }
              function ch(e, t, n, r, i) {
                e.za &&
                  (((t = { schemeIdUri: r, startTime: t, endTime: n || 1 / 0, id: "", payload: i }).id =
                    JSON.stringify(t)),
                  zu(e.za, t));
              }
              function hh(e, t) {
                function n(n) {
                  t() ? t().dispatchEvent(n) : e.dispatchEvent(n);
                }
                function r(e) {
                  t() ? gd(t(), !0, e) : e();
                }
                t ||
                  (t = function () {
                    return null;
                  });
                var i = new Fi(
                  function (t, n, i, a, o) {
                    r(function () {
                      e.o && e.o.segmentDownloaded(t, n, i, a, o);
                    });
                  },
                  function (t, i, a) {
                    (n(
                      Zc(
                        "downloadheadersreceived",
                        (i = new Map().set("headers", t).set("request", i).set("requestType", a)),
                      ),
                    ),
                      r(function () {
                        if (e.va) {
                          var n = e.va;
                          if (n.h.enabled) {
                            var r = t["cmsd-static"];
                            if (r)
                              try {
                                var i = new Map(),
                                  a = r.split(",");
                                for (r = 0; r < a.length; r++) {
                                  var o = a[r].split("=");
                                  i.set(o[0], Gc(o[1]));
                                }
                              } catch (c) {}
                            if ((i = t["cmsd-dynamic"])) {
                              e: {
                                try {
                                  var s = new Map(),
                                    u = i.split(";");
                                  for (i = 1; i < u.length; i++) {
                                    var l = u[i].split("=");
                                    s.set(l[0], Gc(l[1]));
                                  }
                                  var d = s;
                                  break e;
                                } catch (c) {
                                  d = null;
                                  break e;
                                }
                                d = void 0;
                              }
                              d && (n.g = d);
                            }
                          }
                        }
                      }));
                  },
                  function (e, t) {
                    n(Zc("downloadcompleted", (e = new Map().set("request", e).set("response", t))));
                  },
                  function (e, t, r, i) {
                    n(
                      Zc(
                        "downloadfailed",
                        (e = new Map()
                          .set("request", e)
                          .set("error", t)
                          .set("httpResponseCode", r)
                          .set("aborted", i)),
                      ),
                    );
                  },
                  function (t, n, i) {
                    r(function () {
                      if (e.K) {
                        var r = e.K,
                          a = i;
                        if (((a = void 0 === a ? {} : a), r.g.enabled))
                          if ("HEAD" === n.method) ic(r, n, {});
                          else
                            switch (t) {
                              case 0:
                                try {
                                  if (r.g.enabled) {
                                    if (a.type) {
                                      e: {
                                        switch (a.type) {
                                          case 4:
                                            var o = r.u ? kc : Ec;
                                            break e;
                                          case 3:
                                          case 2:
                                            o = r.u ? Cc : Ic;
                                            break e;
                                          case 5:
                                            o = "s";
                                            break e;
                                        }
                                        o = void 0;
                                      }
                                      r.l = o;
                                    }
                                    ic(r, n, { ot: gc, su: !r.F });
                                  }
                                } catch (u) {
                                  q("CMCD_MANIFEST_ERROR", "Could not generate manifest CMCD data.", u);
                                }
                                break;
                              case qi:
                                try {
                                  if (r.g.enabled) {
                                    var s = dc(r, a, n.uris[0]);
                                    ((s.ts = Date.now()),
                                      r.m.has(n) && r.m.delete(n),
                                      r.m.set(n, s.ts),
                                      ic(r, n, s));
                                  }
                                } catch (u) {
                                  q("CMCD_SEGMENT_ERROR", "Could not generate segment CMCD data.", u);
                                }
                                break;
                              case 2:
                              case 5:
                              case 6:
                                ic(r, n, { ot: "k" });
                                break;
                              case 4:
                                ic(r, n, { ot: "o" });
                            }
                      }
                    });
                  },
                  function (n, r, i, a) {
                    (n = t() ? t().m : e.I) && n.banLocation && n.banLocation(a);
                  },
                  function (n, r, i) {
                    if (r.data) {
                      var a = r.data.byteLength,
                        o = t() ? t().getStats() : e.B;
                      if (
                        (o && (hd(o, a), 0 === n && (o.wi = a)),
                        (i = void 0 === i ? {} : i),
                        0 !== tc((a = e.K)).length && n === qi)
                      )
                        try {
                          var s = dc(a, i, r.uri);
                          (r.originalRequest &&
                            null != r.originalRequest.timeToFirstByte &&
                            (s.ttfb = r.originalRequest.timeToFirstByte),
                            null != r.timeMs && (s.ttlb = r.timeMs));
                          var u = r.originalUri || r.uri;
                          if (u.includes("CMCD="))
                            try {
                              var l = new URL(u);
                              l.searchParams.delete("CMCD");
                              var d = l.toString();
                            } catch (T) {
                              d = u;
                            }
                          else d = u;
                          ((s.url = d),
                            a.m.has(r.originalRequest)
                              ? ((s.ts = a.m.get(r.originalRequest)), a.m.delete(r.originalRequest))
                              : s.ts || (s.ts = Date.now()));
                          var c = tc(a);
                          if (0 !== c.length) {
                            var h = a.g.version == wc ? Array.from(new Set([].concat(m(Rc), m(Dc)))) : Mc;
                            s.rc = r.status || 0;
                            var p = cc(a, s, Fc);
                            (r.headers &&
                              r.headers["CMSD-Static"] &&
                              (p.cmsds = btoa(r.headers["CMSD-Static"])),
                              r.headers &&
                                r.headers["CMSD-Dynamic"] &&
                                (p.cmsdd = btoa(r.headers["CMSD-Dynamic"])));
                            for (var f = g(c), v = f.next(); !v.done; v = f.next()) {
                              var y = v.value,
                                b = oc(y.includeKeys || [], h),
                                x = uc(y);
                              (a.o[x] || (a.o[x] = { request: 1, response: 1 }),
                                (p.sn = a.o[x].response++),
                                ac(a, sc(p, b), y, r));
                            }
                          }
                        } catch (T) {
                          q("CMCD_SEGMENT_ERROR", "Could not generate response segment CMCD data.", T);
                        }
                    }
                  },
                );
                return (i.configure(e.g.networking), i);
              }
              function ph(e, t, n) {
                ((e.R = new Va()),
                  Ha(e.R, Ga),
                  fh(e),
                  Ih(e),
                  (e.Ta = new Mr(function () {
                    gh(e);
                  })),
                  e.g.streaming.rebufferingGoal && e.Ta.Ea(0.25),
                  e.j.D(t, "waiting", function () {
                    return gh(e, "waiting");
                  }),
                  e.j.D(t, "canplaythrough", function () {
                    return gh(e, "canplaythrough");
                  }),
                  e.j.D(t, "playing", function () {
                    return gh(e, "playing");
                  }),
                  e.j.D(t, "seeked", function () {
                    return gh(e, "seeked");
                  }),
                  e.j.D(t, "timeupdate", function () {
                    return gh(e, "timeupdate");
                  }),
                  n &&
                    (e.j.D(t, "progress", function () {
                      return gh(e, "progress");
                    }),
                    e.j.D(t, "stalled", function () {
                      return gh(e, "stalled");
                    })));
              }
              function fh(e) {
                var t = e.g.streaming.rebufferingGoal;
                e.R.j.set(za, Math.min(0.5, t / 2)).set(Ga, t);
              }
              function gh(e, t) {
                if (e.g.streaming.rebufferingGoal) {
                  ((t = !!e.H && Os(e.H)), (t = e.ge() || t || e.G.ri()));
                  var n = Yo(e.h.buffered, e.h.currentTime),
                    r = e.R,
                    i = r.j.get(r.g);
                  Ha(r, t || (n >= i && n > 0) ? za : Ga) && Ih(e);
                } else if (t) {
                  ((n = e.R), (r = e.h.currentTime), (i = n.h), (n.h = r));
                  var a = void 0;
                  switch (t) {
                    case "seeking":
                    case "waiting":
                      ((n.h = -1), (a = Ga));
                      break;
                    case "canplaythrough":
                    case "playing":
                    case "seeked":
                      a = za;
                      break;
                    case "timeupdate":
                      i >= 0 && r - i > 0.01 && (a = za);
                  }
                  void 0 !== a && Ha(n, a) && Ih(e);
                }
              }
              function mh(e, t) {
                if (((e.Ee = new Xa(e.g, e.ya, e.F)), e.I)) {
                  var n = Wt(e.g.manifest);
                  (e.h && "AUDIO" === e.h.nodeName && (n.disableVideo = !0), e.I.configure(n));
                }
                if ((e.F && e.F.configure(e.g.drm), e.l)) {
                  e.l.configure(e.g.streaming);
                  try {
                    e.m != tp && qa(e.Ee, e.i) && Bh(e);
                  } catch (i) {
                    Kh(e, i);
                  }
                  (e.o && Dh(e), !(n = e.l.o) || (n.allowedByApplication && n.allowedByKeySystem) || Lh(e));
                }
                if (
                  (e.N && e.N.configure(e.g.networking),
                  e.H && (e.H.configure(e.g.mediaSource), (e.H.Fa = e.g.manifest.segmentRelativeVttTiming)),
                  e.u && sh(e),
                  e.o && (e.o.configure(e.g.abr), e.g.abr.enabled ? e.o.enable() : e.o.disable(), zh(e)),
                  e.R && fh(e),
                  e.Ta && (e.g.streaming.rebufferingGoal ? e.Ta.Ea(0.25) : e.Ta.stop()),
                  e.i && Jh(e.i.presentationTimeline, e.g.playRangeStart, e.g.playRangeEnd),
                  e.C && e.C.configure(e.g.ads),
                  e.K && e.K.configure(e.g.cmcd),
                  e.va && e.va.configure(e.g.cmsd),
                  e.Da && e.Da.configure(e.g.queue),
                  e.m == rp && e.J.getConfiguration)
                ) {
                  n = e.J.getConfiguration();
                  var r = !1;
                  (t.preferredVideoHdrLevel != e.g.preferredVideoHdrLevel &&
                    n.hdrLevel != e.g.preferredVideoHdrLevel &&
                    ((n.hdrLevel = e.g.preferredVideoHdrLevel), (r = !0)),
                    t.preferredVideoLayout != e.g.preferredVideoLayout &&
                      n.videoLayout != e.g.preferredVideoLayout &&
                      ((n.videoLayout = e.g.preferredVideoLayout), (r = !0)),
                    t.preferSpatialAudio != e.g.preferSpatialAudio &&
                      n.spatialAudio != e.g.preferSpatialAudio &&
                      ((n.spatialAudio = e.g.preferSpatialAudio), (r = !0)),
                    t.preferredVideoRole != e.g.preferredVideoRole &&
                      n.videoRole != e.g.preferredVideoRole &&
                      ((n.videoRole = e.g.preferredVideoRole), (r = !0)),
                    r && (e.J.configure(n), Lh(e)));
                }
              }
              function vh(e) {
                return e && (e = /(\d+)x(\d+)/.exec(e))
                  ? { columns: parseInt(e[1], 10), rows: parseInt(e[2], 10) }
                  : null;
              }
              function yh(e, t) {
                var n, r;
                return D(function (i) {
                  return 1 == i.g
                    ? e.m != rp && e.m != ip
                      ? i.return(null)
                      : ((n = e.Ke),
                        e.i && (n = e.i.imageStreams),
                        (r = n[0])
                          ? (null != t &&
                              (r = n.find(function (e) {
                                return e.id == t;
                              })),
                            r ? (r.segmentIndex ? i.A(2) : x(i, r.createSegmentIndex(), 2)) : i.return(null))
                          : i.return(null))
                    : i.return(r);
                });
              }
              function bh(e, t, n, r) {
                var i = t.width || 0,
                  a = t.height || 0,
                  o = i / r.columns,
                  s = a / r.rows,
                  u = r.columns * r.rows,
                  l = e.j - e.startTime;
                l = e.B || l / u;
                var d = e.startTime,
                  c = 0,
                  h = 0;
                return (
                  u > 1 &&
                    ((h = Math.floor((n - e.startTime) / l)),
                    (d = e.startTime + h * l),
                    (c = (h % r.columns) * o),
                    (h = Math.floor(h / r.columns) * s)),
                  (r = !1),
                  (n = e.thumbnailSprite) &&
                    ((r = !0), (s = n.height), (c = n.positionX), (h = n.positionY), (o = n.width)),
                  {
                    segment: e,
                    imageHeight: a,
                    imageWidth: i,
                    height: s,
                    positionX: c,
                    positionY: h,
                    startTime: d,
                    duration: l,
                    uris: e.P(),
                    startByte: e.Jc(),
                    endByte: e.Hc(),
                    width: o,
                    sprite: r,
                    mimeType: e.mimeType || t.mimeType,
                    codecs: e.codecs || t.codecs,
                  }
                );
              }
              function xh(e, t) {
                (e.j.D(t, "cuechange", function () {
                  e.u.remove(0, Math.max(0, e.h.currentTime - e.g.streaming.bufferBehind));
                  for (
                    var n = { periodStart: 0, segmentStart: 0, segmentEnd: e.h.duration, vttOffset: 0 },
                      r = [],
                      i = Array.from(t.activeCues || []),
                      a = (i = g(i)).next();
                    !a.done;
                    a = i.next()
                  ) {
                    if ((a = a.value).endTime === 1 / 0 || a.endTime < a.startTime) a = null;
                    else {
                      var o = new Cn(a.startTime, a.endTime, a.text);
                      ((o.line = "number" == typeof a.line ? a.line : null),
                        a.lineAlign && (o.lineAlign = a.lineAlign),
                        (o.lineInterpretation = a.snapToLines ? Hn : 1),
                        (o.position = "number" == typeof a.position ? a.position : null),
                        a.positionAlign && (o.positionAlign = a.positionAlign),
                        (o.size = a.size),
                        (o.textAlign = a.align),
                        "lr" === a.vertical
                          ? (o.writingMode = "vertical-lr")
                          : "rl" === a.vertical && (o.writingMode = "vertical-rl"),
                        a.region &&
                          ((o.region.id = a.region.id),
                          (o.region.height = a.region.lines),
                          (o.region.heightUnits = 2),
                          (o.region.regionAnchorX = a.region.regionAnchorX),
                          (o.region.regionAnchorY = a.region.regionAnchorY),
                          (o.region.scroll = a.region.scroll),
                          (o.region.viewportAnchorX = a.region.viewportAnchorX),
                          (o.region.viewportAnchorY = a.region.viewportAnchorY),
                          (o.region.viewportAnchorUnits = Ot),
                          (o.region.width = a.region.width),
                          (o.region.widthUnits = Ot)),
                        _n(o),
                        (a = o));
                    }
                    a && ((o = e.g.mediaSource.modifyCueCallback) && o(a, null, n), r.push(a));
                  }
                  e.u.append(r);
                }),
                  (t.mode = document.pictureInPictureElement ? "showing" : "hidden"));
              }
              function Th(e) {
                return Array.from(e.h.textTracks).filter(function (e) {
                  return "metadata" != e.kind && "chapters" != e.kind && "Shaka Player TextTrack" != e.label;
                });
              }
              function wh(e) {
                if (!e.h || !e.h.currentTime) return null;
                var t = e.li();
                return t ? Math.floor(Date.now() - (t.getTime() + 1e3 * e.h.currentTime)) : null;
              }
              function Sh(e, t) {
                var n;
                return D(function (r) {
                  switch (r.g) {
                    case 1:
                      return (w(r, 2), x(r, ol(t, e.N, e.g.streaming.retryParameters), 4));
                    case 4:
                      ((n = r.h), A(r, 3));
                      break;
                    case 2:
                      E(r);
                    case 3:
                      if (n) return r.return(n);
                      throw new Ke(1, 2, 2011, t);
                  }
                });
              }
              function Ah(e, t) {
                var r, i, a, o;
                return D(function (s) {
                  if (1 == s.g) {
                    ((r = qi), (i = e.g.streaming.retryParameters), ((a = Gi([t], i)).method = "GET"));
                    var u = e.K;
                    try {
                      u.g.enabled && ic(u, a, { ot: xc, su: !0 });
                    } catch (n) {
                      q("CMCD_TEXT_ERROR", "Could not generate text CMCD data.", n);
                    }
                    return x(s, e.N.request(r, a).promise, 2);
                  }
                  return ((o = s.h), s.return(o.data));
                });
              }
              function Eh(e, t, n, r) {
                var i = wr(n);
                if (i)
                  return (
                    (n = i()),
                    (e = { periodStart: 0, segmentStart: 0, segmentEnd: e.h.duration, vttOffset: 0 }),
                    (t = Ne(t)),
                    (function (e, t) {
                      function n(e) {
                        for (var n = e, r = g(t), i = r.next(); !i.done; i = r.next())
                          (i = i.value).end && i.start < e && (n += i.end - i.start);
                        return (
                          ((e = Math.floor(n / 3600)) < 10 ? "0" : "") +
                          e +
                          ":" +
                          ((r = Math.floor((n / 60) % 60)) < 10 ? "0" : "") +
                          r +
                          ":" +
                          ((i = Math.floor(n % 60)) < 10 ? "0" : "") +
                          i +
                          "." +
                          ((n = Math.floor((1e3 * n) % 1e3)) < 100 ? (n < 10 ? "00" : "0") : "") +
                          n
                        );
                      }
                      var r = Nd(e);
                      e = "WEBVTT\n\n";
                      for (var i = (r = g(r)).next(); !i.done; i = r.next())
                        ((e +=
                          n((i = i.value).startTime) +
                          " --\x3e " +
                          n(i.endTime) +
                          (function (e) {
                            var t = [];
                            switch (e.textAlign) {
                              case "left":
                                t.push("align:left");
                                break;
                              case "right":
                                t.push("align:right");
                                break;
                              case On:
                                t.push("align:middle");
                                break;
                              case "start":
                                t.push("align:start");
                                break;
                              case "end":
                                t.push("align:end");
                            }
                            switch (e.writingMode) {
                              case "vertical-lr":
                                t.push("vertical:lr");
                                break;
                              case "vertical-rl":
                                t.push("vertical:rl");
                            }
                            return t.length ? " " + t.join(" ") : "";
                          })(i) +
                          "\n"),
                          (e += i.payload + "\n\n"));
                      return e;
                    })((t = n.parseMedia(t, e, null, [])), r)
                  );
                throw new Ke(2, 2, 2014, n);
              }
              function kh(e) {
                var t = td();
                return (
                  (t.streaming.failureCallback = function (t) {
                    if (e.W()) {
                      var n = null;
                      (1001 == t.code || 1002 == t.code
                        ? ((n = 1), e.g.streaming.lowLatencyMode && (n = 0.1))
                        : 1003 == t.code && (n = 0.1),
                        null != n && ((t.severity = 1), e.kh(n)));
                    }
                  }),
                  (t.textDisplayFactory = function () {
                    if (e.Be) {
                      var t = e.h;
                      t = !(
                        t.webkitDisplayingFullscreen ||
                        (t.webkitPresentationMode && "inline" != t.webkitPresentationMode)
                      );
                    } else t = !1;
                    return t
                      ? new Xd(e.h, e.Be)
                      : "track" in document.createElement("track")
                        ? new Fd(e)
                        : new zd();
                  }),
                  t
                );
              }
              function Ih(e) {
                var t = e.Rg();
                if (e.B && e.R && e.G) {
                  if (0 == e.g.streaming.rebufferingGoal) {
                    var n = e.M;
                    ((n.j = !1), Uu(n));
                  } else (((n = e.M).j = t), Uu(n));
                  if (
                    (e.K &&
                      ((n = e.K),
                      t || n.F || (n.F = !0),
                      n.F && t && ((n.I = !0), rc(n, "ps", { dd: "r" })),
                      (n.J = t)),
                    Mh(e),
                    (n = e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts),
                    e.g.streaming.liveSync.dynamicTargetLatency.enabled && t && e.Ne < n)
                  ) {
                    n = e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;
                    var r = e.g.streaming.liveSync.targetLatencyTolerance,
                      i = e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;
                    e.V && (e.V = Math.min(e.V + ++e.Ne * i, n - r));
                  }
                }
                ((t = new Map().set("buffering", t)), e.dispatchEvent(Zc("buffering", t)));
              }
              function Ch(e, t) {
                (e.dc.Qa(),
                  e.dc.D(e.h, "timeupdate", function () {
                    var n = e.h.currentTime,
                      r = e.Ra(),
                      i = e.W(),
                      a = i ? e.g.streaming.safeSeekOffset : 0;
                    t > 0
                      ? i && t > 1 && Math.floor(n) >= Math.floor(r.end) && e.Sd()
                      : Math.floor(n) <= Math.floor(r.start + a) && e.Sd();
                  }));
              }
              function Mh(e) {
                if (e.B && e.R) {
                  var t = e.B.g,
                    n = "playing";
                  e.R.g == Ga ? (n = "buffering") : e.ge() ? (n = "ended") : e.h.paused && (n = "paused");
                  var r = n;
                  if (null == t.g) ((t.g = { timestamp: Date.now() / 1e3, state: r, duration: 0 }), (t = !0));
                  else {
                    var i = Date.now() / 1e3;
                    ((t.g.duration = i - t.g.timestamp),
                      t.g.state == r
                        ? (t = !1)
                        : (t.h.push(t.g), (t.g = { timestamp: i, state: r, duration: 0 }), (t = !0)));
                  }
                  t && ((n = new Map().set("newstate", n)), e.dispatchEvent(Zc("statechanged", n)));
                }
              }
              function Rh(e) {
                var t = e.h.playbackRate,
                  n = e.W();
                if (e.g.streaming.vodDynamicPlaybackRate && !n) {
                  var r = e.g.streaming.vodDynamicPlaybackRateLowBufferRate,
                    i = e.ei();
                  i <= e.g.streaming.vodDynamicPlaybackRateBufferRatio
                    ? t != r && e.xe(r, !1)
                    : 1 == i && t !== e.M.Tc() && e.Sd();
                }
                if (
                  n &&
                  ((n = e.Ra()), Number.isFinite(n.end) && !(e.h.currentTime < n.start || e.h.paused))
                ) {
                  ((r = e.g.streaming.liveSync.targetLatencyTolerance),
                    (i = e.g.streaming.liveSync.dynamicTargetLatency.enabled));
                  var a = e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;
                  if (e.g.streaming.liveSync && e.g.streaming.liveSync.enabled)
                    var o = e.g.streaming.liveSync.targetLatency,
                      s = o + r,
                      u = Math.max(0, o - r),
                      l = e.g.streaming.liveSync.maxPlaybackRate,
                      d = e.g.streaming.liveSync.minPlaybackRate;
                  else
                    e.i &&
                      e.i.serviceDescription &&
                      ((o = e.i.serviceDescription.targetLatency),
                      null != e.i.serviceDescription.targetLatency
                        ? (s = e.i.serviceDescription.targetLatency + r)
                        : null != e.i.serviceDescription.maxLatency &&
                          (s = e.i.serviceDescription.maxLatency),
                      null != e.i.serviceDescription.targetLatency
                        ? (u = Math.max(0, e.i.serviceDescription.targetLatency - r))
                        : null != e.i.serviceDescription.minLatency &&
                          (u = e.i.serviceDescription.minLatency),
                      (l = e.i.serviceDescription.maxPlaybackRate || e.g.streaming.liveSync.maxPlaybackRate),
                      (d = e.i.serviceDescription.minPlaybackRate || e.g.streaming.liveSync.minPlaybackRate));
                  e.V || "number" != typeof o || (e.V = o);
                  var c = e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;
                  (i &&
                    e.cc &&
                    null !== e.V &&
                    "number" == typeof o &&
                    e.Ne < c &&
                    Date.now() - e.cc > 1e3 * a &&
                    ((a = e.g.streaming.liveSync.dynamicTargetLatency.minLatency),
                    (e.V = Math.max(e.V - (o - a) / 2, a + r)),
                    (e.cc = Date.now())),
                    i && null !== e.V && ((s = e.V + r), (u = e.V - r)),
                    (o = n.end - e.h.currentTime),
                    (r = 0),
                    e.m == ip &&
                      (i = e.h.buffered).length > 0 &&
                      ((r = i.end(i.length - 1)), (r = Math.max(l, r - n.end))),
                    (n = e.g.streaming.liveSync.panicMode),
                    (i = 1e3 * e.g.streaming.liveSync.panicThreshold),
                    (a = Date.now() - e.R.i),
                    n && !d && (d = e.g.streaming.liveSync.minPlaybackRate),
                    n && d && a <= i
                      ? t != d && e.xe(d, !1)
                      : null != s && l && o - r > s
                        ? (t != l && e.xe(l, !1), (e.cc = null))
                        : null != u && d && o - r < u
                          ? (t != d && e.xe(d, !1), (e.cc = null))
                          : t !== e.M.Tc() && (e.Sd(), (e.cc = Date.now())));
                }
              }
              function _h(e) {
                if (e.h) {
                  var t = function (t, n) {
                      return !!(($c(t, n, 0.01) || n > t) && e.ag < t) && ((e.ag = t), !0);
                    },
                    n = e.Ra();
                  if (((n = (n = n.end - n.start) > 0 ? e.h.currentTime / n : 0), !isNaN(n))) {
                    if (t(0, (n *= 100))) var r = Zc("started");
                    else
                      t(25, n)
                        ? (r = Zc("firstquartile"))
                        : t(50, n)
                          ? (r = Zc("midpoint"))
                          : t(75, n)
                            ? (r = Zc("thirdquartile"))
                            : ((t(100, n) || n > 100) && (r = Zc("complete")),
                              e.g && e.g.playRangeEnd != 1 / 0 && e.ge() && e.h.pause());
                    r && e.dispatchEvent(r);
                  }
                }
              }
              function Dh(e) {
                try {
                  $a(e.Ee, e.i);
                } catch (n) {
                  return (Kh(e, n), !1);
                }
                var t = ui(e.i.variants);
                return (
                  (t = e.J.create(t)),
                  "boolean" != typeof (e = e.o.setVariants(Array.from(t.values()))) || e
                );
              }
              function Ph(e, t) {
                if (((t = void 0 !== t && t), Dh(e))) {
                  if (!e.g.abr.enabled) {
                    var n = e.J;
                    if (
                      ("function" != typeof n.getLastAdaptationSet &&
                        (ce(
                          "AdaptationSetCriteria w/o getLastAdaptationSet",
                          "Please use an AdaptationSetCriteria with getLastAdaptationSet.",
                        ),
                        (n.getLastAdaptationSet = function () {
                          return null;
                        })),
                      (n = n.getLastAdaptationSet()) && (n = Array.from(n.values())).length)
                    ) {
                      var r = e.l.o;
                      if (
                        r &&
                        r.video &&
                        (n = n.find(function (e) {
                          return e.video == r.video;
                        }))
                      )
                        return n;
                    }
                  }
                  return e.o.chooseVariant(t);
                }
                return null;
              }
              function Lh(e, t, n, r, i) {
                ((t = void 0 === t || t),
                  (n = void 0 === n ? 0 : n),
                  (r = void 0 !== r && r),
                  (i = void 0 === i || i));
                var a = Ph(e);
                a && Nh(e, a, i, t, n, r);
              }
              function Nh(e, t, n, r, i, a) {
                a = void 0 !== a && a;
                var o = e.l.o;
                if (t == o) r && hl(e.l, t, r, i, !0);
                else {
                  var s = e.B.h;
                  if (
                    (s.h != t &&
                      ((s.h = t),
                      s.g.push({
                        timestamp: Date.now() / 1e3,
                        id: t.id,
                        type: "variant",
                        fromAdaptation: n,
                        bandwidth: t.bandwidth,
                      })),
                    hl(e.l, t, r, i, a, n),
                    (r = null),
                    o && (r = ti(o)),
                    ((o = ti(t)).active = !0),
                    e.T && ((i = e.T), (t = t.video)))
                  ) {
                    switch ((t.dependencyStream && (t = t.dependencyStream), (a = 0), (s = -1), t.mimeType)) {
                      case "video/webm":
                        a = 1;
                        break;
                      case "video/mp4":
                        a = 2;
                    }
                    switch (e.ii()) {
                      case "DASH":
                        s = 1;
                        break;
                      case "HLS":
                        s = 0;
                    }
                    i.g &&
                      (i.g.setLevelSwitching(t.id, !0),
                      i.g.setContainerFormat(a),
                      i.j || i.g.setStreamingFormat(s));
                  }
                  (n
                    ? Qh(e, (n = Zc("adaptation", (n = new Map().set("oldTrack", r).set("newTrack", o)))))
                    : jh(e, r, o),
                    Fh(e, r, o));
                }
              }
              function Oh(e, t) {
                var n = Array.from(e.h.audioTracks).find(function (e) {
                  return e.enabled;
                });
                if (((t.enabled = !0), n)) {
                  t.id !== n.id && (n.enabled = !1);
                  var r = Uh(e);
                  (jh(e, (n = oi(n, r)), (t = oi(t, r))), Fh(e, n, t));
                }
              }
              function Uh(e) {
                return e.h && e.h.videoTracks
                  ? Array.from(e.h.videoTracks).find(function (e) {
                      return e.selected;
                    })
                  : null;
              }
              function Bh(e) {
                (Qh(e, Zc("trackschanged")), Vh(e));
              }
              function jh(e, t, n) {
                Qh(e, (t = Zc("variantchanged", (t = new Map().set("oldTrack", t).set("newTrack", n)))));
              }
              function Fh(e, t, n) {
                var r = !1;
                ((t && t.audioId == n.audioId && t.audioGroupId == n.audioGroupId) || (r = !0), r && Vh(e));
              }
              function Vh(e) {
                Qh(e, Zc("audiotrackschanged"));
              }
              function Hh(e) {
                Qh(e, Zc("textchanged"));
              }
              function Gh(e) {
                Qh(e, Zc("texttrackvisibility"));
              }
              function zh(e) {
                (e.g.abr.enabled || Wh(e),
                  Qh(e, Zc("abrstatuschanged", new Map().set("newStatus", e.g.abr.enabled))));
              }
              function Xh(e) {
                var t = e.Lc().find(function (e) {
                  return e.active;
                });
                t && e.u && e.u.setTextLanguage && e.u.setTextLanguage(t.language);
              }
              function Wh(e, t) {
                if (((t = void 0 === t || t), e.m == rp)) {
                  e.He.stop();
                  for (var n = g(e.i.variants), r = n.next(); !r.done; r = n.next())
                    r.value.disabledUntilTime = 0;
                  t && Dh(e);
                }
              }
              function Kh(e, t) {
                var n, r, i, a;
                return D(function (o) {
                  switch (o.g) {
                    case 1:
                      if (e.m == tp) return o.return();
                      if (
                        (1 === t.severity && e.B.M++,
                        (n = !0),
                        !(e.Ua && e.i && e.l) ||
                          (3016 != t.code &&
                            3014 != t.code &&
                            3015 != t.code &&
                            3024 != t.code &&
                            3018 != t.code))
                      ) {
                        o.A(2);
                        break;
                      }
                      return "WEBKIT" === oe().Ha() && 3016 == t.code
                        ? o.return()
                        : (w(o, 3), x(o, Ll(e.l), 5));
                    case 5:
                      ((r = o.h),
                        (n = !r),
                        r && ((i = Zc("mediasourcerecovered")), e.dispatchEvent(i)),
                        A(o, 2));
                      break;
                    case 3:
                      (E(o), (n = !0));
                    case 2:
                      if (!n) return o.return();
                      (2 === t.severity && Wh(e, !1),
                        (a = Zc("error", new Map().set("detail", t))),
                        e.dispatchEvent(a),
                        a.defaultPrevented && (t.handled = !0),
                        T(o));
                  }
                });
              }
              function qh(e, t, n, r) {
                ((r = void 0 === r ? e : r),
                  (e = new Map().set("detail", {
                    schemeIdUri: n.schemeIdUri,
                    value: n.value,
                    startTime: n.startTime,
                    endTime: n.endTime,
                    id: n.id,
                    timescale: n.timescale,
                    eventElement: n.eventElement,
                    eventNode: n.eventNode,
                  })),
                  r.dispatchEvent(Zc(t, e)));
              }
              function Yh(e, t, n, r) {
                ((r = void 0 !== r && r),
                  (t = new Map()
                    .set("mediaQuality", {
                      bandwidth: t.bandwidth,
                      audioSamplingRate: t.audioSamplingRate,
                      codecs: t.codecs,
                      contentType: t.contentType,
                      frameRate: t.frameRate,
                      height: t.height,
                      mimeType: t.mimeType,
                      channelsCount: t.channelsCount,
                      pixelAspectRatio: t.pixelAspectRatio,
                      width: t.width,
                      label: t.label,
                      roles: t.roles,
                      language: t.language,
                    })
                    .set("position", n)),
                  e.dispatchEvent(Zc(r ? "audiotrackchanged" : "mediaqualitychanged", t)));
              }
              function $h(e, t) {
                if (((t = void 0 === t || t), !e.h.error)) return t ? new Ke(2, 3, 3016) : null;
                var n = e.h.error.code;
                return t || 1 != n
                  ? ((t = e.h.error.msExtendedCode) && (t < 0 && (t += 4294967296), (t = t.toString(16))),
                    new Ke(2, 3, 3016, n, t, e.h.error.message))
                  : null;
              }
              function Jh(e, t, n) {
                (t > 0 && (e.W() || e.Yi(t)), n < (t = e.getDuration()) && (e.W() || e.Ab(n)));
              }
              function Qh(e, t) {
                D(function (n) {
                  if (1 == n.g) return x(n, Promise.resolve(), 2);
                  (e.m != tp && e.dispatchEvent(t), T(n));
                });
              }
              function Zh(e) {
                for (var t = new Set(), n = (e = g(e)).next(); !n.done; n = e.next())
                  (n = n.value).language ? t.add(Br(n.language)) : t.add("und");
                return t;
              }
              function ep(e) {
                for (var t = new Map(), n = new Map(), r = 0; r < e.length; r++) {
                  var i = e[r],
                    a = "und",
                    o = [];
                  (i.language && (a = Br(i.language)),
                    ((o = "variant" == i.type ? i.audioRoles : i.roles) && o.length) || (o = [""]),
                    t.has(a) || t.set(a, new Set()));
                  for (var s = (o = g(o)).next(); !s.done; s = o.next())
                    ((s = s.value),
                      t.get(a).add(s),
                      i.label && (n.has(a) || n.set(a, new Map()), n.get(a).set(s, i.label)));
                }
                var u = [];
                return (
                  t.forEach(function (e, t) {
                    for (var r = (e = g(e)).next(); !r.done; r = e.next()) {
                      r = r.value;
                      var i = null;
                      (n.has(t) && n.get(t).has(r) && (i = n.get(t).get(r)),
                        u.push({ language: t, role: r, label: i }));
                    }
                  }),
                  u
                );
              }
              ((qc.prototype.release = function () {
                this.h.length > 0 ? this.h.shift()() : (this.g = null);
              }),
                p(Jc, Ui),
                ((i = Jc.prototype).destroy = function () {
                  var e,
                    t = this;
                  return D(function (n) {
                    switch (n.g) {
                      case 1:
                        return t.m == tp ? n.return() : (Qc(t), (e = t.detach()), (t.m = tp), x(n, e, 2));
                      case 2:
                        return x(n, t.rg(), 3);
                      case 3:
                        if (
                          (t.Le && (t.Le.release(), (t.Le = null)),
                          t.Ce && (t.Ce.release(), (t.Ce = null)),
                          t.j && (t.j.release(), (t.j = null)),
                          t.dc && (t.dc.release(), (t.dc = null)),
                          t.Gd && (t.Gd.release(), (t.Gd = null)),
                          (t.Ge = null),
                          (t.g = null),
                          (t.B = null),
                          (t.Be = null),
                          (t.K = null),
                          (t.va = null),
                          !t.N)
                        ) {
                          n.A(4);
                          break;
                        }
                        return x(n, t.N.destroy(), 5);
                      case 5:
                        t.N = null;
                      case 4:
                        (t.o && (t.o.release(), (t.o = null)),
                          t.Da && (t.Da.destroy(), (t.Da = null)),
                          Ui.prototype.release.call(t),
                          T(n));
                    }
                  });
                }),
                (i.Vb = function (e, t) {
                  t = void 0 === t || t;
                  var n,
                    r,
                    i,
                    a = this;
                  return D(function (o) {
                    switch (o.g) {
                      case 1:
                        if (a.m == tp) throw new Ke(2, 7, 7e3);
                        if (((n = a.h && a.h == e), !a.h || a.h == e)) {
                          o.A(2);
                          break;
                        }
                        return x(o, a.detach(), 2);
                      case 2:
                        return x(o, nh(a, "attach"), 4);
                      case 4:
                        if (o.h) return o.return();
                        if (
                          (w(o, 5, 6),
                          n ||
                            (th(a, "attach"),
                            (r = function () {
                              var e = $h(a, !1);
                              e && Kh(a, e);
                            }),
                            a.Ce.D(e, "error", r),
                            (a.h = e),
                            a.K && a.K.setMediaElement(e)),
                          oe(),
                          !t || !Jv() || a.H)
                        ) {
                          o.A(6);
                          break;
                        }
                        return x(o, uh(a), 6);
                      case 6:
                        (k(o), a.ba.release(), I(o, 0));
                        break;
                      case 5:
                        return ((i = E(o)), x(o, a.detach(), 10));
                      case 10:
                        throw i;
                    }
                  });
                }),
                (i.qj = function (e) {
                  this.Ph = e;
                }),
                (i.detach = function (e) {
                  e = void 0 !== e && e;
                  var t = this;
                  return D(function (n) {
                    if (1 == n.g) {
                      if (t.m == tp) throw new Ke(2, 7, 7e3);
                      return x(n, t.Cc(!1, e), 2);
                    }
                    if (3 != n.g) return x(n, nh(t, "detach"), 3);
                    if (n.h) return n.return();
                    try {
                      (t.h && (t.Ce.Qa(), (t.h = null)), th(t, "detach"), t.C && !e && t.C.release());
                    } finally {
                      t.ba.release();
                    }
                    T(n);
                  });
                }),
                (i.Cc = function (t, n) {
                  ((t = void 0 === t || t), (n = void 0 !== n && n));
                  var r,
                    i,
                    a,
                    o,
                    s,
                    u,
                    l,
                    d,
                    c,
                    h,
                    p,
                    f,
                    m,
                    v,
                    y,
                    b = this;
                  return D(function (T) {
                    switch (T.g) {
                      case 1:
                        return (b.m != tp && (b.m = np), x(T, nh(b, "unload"), 2));
                      case 2:
                        return T.h
                          ? T.return()
                          : (S(T, 3),
                            (b.Ua = !1),
                            th(b, "unload"),
                            Qc(b),
                            (r = b.De.map(function (e) {
                              return e();
                            })),
                            (b.De = []),
                            x(T, Promise.all(r), 5));
                      case 5:
                        if (
                          (b.dispatchEvent(Zc("unloading")),
                          b.Ae && (b.Ae.release(), (b.Ae = null)),
                          b.za && (b.za.release(), (b.za = null)),
                          b.kb && (b.kb.release(), (b.kb = null)),
                          b.h && (b.j.Qa(), b.dc.Qa()),
                          b.He.stop(),
                          b.ac && (b.ac.release(), (b.ac = null)),
                          b.Ta && (b.Ta.stop(), (b.Ta = null)),
                          !b.I)
                        ) {
                          T.A(6);
                          break;
                        }
                        return x(T, b.I.stop(), 7);
                      case 7:
                        ((b.I = null), (b.zc = null));
                      case 6:
                        if ((b.o && b.o.stop(), !b.l)) {
                          T.A(8);
                          break;
                        }
                        return x(T, b.l.destroy(), 9);
                      case 9:
                        b.l = null;
                      case 8:
                        if (
                          (b.M && (b.M.release(), (b.M = null)),
                          b.G && (b.G.release(), (b.G = null)),
                          "webkit" !== e.shakaMediaKeysPolyfill || !b.F)
                        ) {
                          T.A(10);
                          break;
                        }
                        return x(T, b.F.destroy(), 11);
                      case 11:
                        b.F = null;
                      case 10:
                        if (!b.H) {
                          T.A(12);
                          break;
                        }
                        return x(T, b.H.destroy(), 13);
                      case 13:
                        b.H = null;
                      case 12:
                        if (
                          (b.C && !n && b.C.onAssetUnload(),
                          b.oa && !n && (b.oa.destroy(), (b.oa = null)),
                          n || b.eg.stop(),
                          b.K &&
                            (function (e) {
                              (e.m.clear(),
                                (e.F = !1),
                                (e.J = !0),
                                (e.I = !1),
                                (e.u = !1),
                                (e.B = 0),
                                (e.C = 0),
                                (e.H = 0),
                                (e.K = { request: !1, response: !1, event: !1 }),
                                Zd(e),
                                (e.o = {}),
                                (e.h = null),
                                e.i.Qa());
                            })(b.K),
                          b.va && (b.va.g = null),
                          !b.u)
                        ) {
                          T.A(14);
                          break;
                        }
                        return x(T, b.u.destroy(), 15);
                      case 15:
                        b.u = null;
                      case 14:
                        if (((b.$ = !1), b.h)) {
                          for (i = g(b.cg), a = i.next(); !a.done; a = i.next())
                            ((o = a.value).src.startsWith("blob:") && URL.revokeObjectURL(o.src), o.remove());
                          ((b.cg = []), Zo(b.h) && b.h.load());
                        }
                        if (!b.F) {
                          T.A(16);
                          break;
                        }
                        return x(T, b.F.destroy(), 17);
                      case 17:
                        b.F = null;
                      case 16:
                        if (
                          (b.eb && b.X != b.eb.rd() && (b.eb.l || b.eb.destroy(), (b.eb = null)),
                          (b.X = null),
                          (b.Fa = null),
                          (b.R = null),
                          b.i)
                        ) {
                          for (s = g(b.i.variants), u = s.next(); !u.done; u = s.next())
                            for (l = u.value, d = g([l.audio, l.video]), c = d.next(); !c.done; c = d.next())
                              (h = c.value) && h.segmentIndex && h.segmentIndex.release();
                          for (p = g(b.i.textStreams), f = p.next(); !f.done; f = p.next())
                            (m = f.value).segmentIndex && m.segmentIndex.release();
                        }
                        for (
                          b.g && b.g.streaming.clearDecodingCache && (mi.clear(), We.clear()),
                            b.i = null,
                            b.B = new dd(),
                            b.Oh = null,
                            b.cc = null,
                            b.V = null,
                            b.Ne = -1,
                            b.Ke = [],
                            v = g(b.yc.values()),
                            y = v.next();
                          !y.done;
                          y = v.next()
                        )
                          y.value.stop();
                        (b.yc.clear(), (b.ob = []), (b.ag = -1), b.N && b.N.Wh(), Ih(b));
                      case 3:
                        (k(T), b.ba.release(), I(T, 4));
                        break;
                      case 4:
                        if ((oe(), t && Jv() && !b.H && b.h)) return x(T, uh(b), 0);
                        T.A(0);
                    }
                  });
                }),
                (i.ql = function (e) {
                  this.O = e;
                }),
                (i.load = function (t, n, r) {
                  n = void 0 === n ? null : n;
                  var i,
                    a,
                    o,
                    s,
                    u,
                    l,
                    d,
                    c,
                    h,
                    p,
                    f,
                    m,
                    v,
                    y,
                    b = this;
                  return D(function (A) {
                    switch (A.g) {
                      case 1:
                        if (b.m == tp) throw new Ke(2, 7, 7e3);
                        if (b.h || !b.ma) {
                          A.A(2);
                          break;
                        }
                        return x(A, b.Vb(b.ma, !0), 3);
                      case 3:
                        b.ma = null;
                      case 2:
                        if (((i = null), (a = ""), t instanceof fd)) {
                          if (t.l) throw new Ke(2, 7, 7006);
                          a = (i = t).rd() || "";
                        } else a = t || "";
                        return x(A, Yc(b.ba, "load"), 4);
                      case 4:
                        if ((b.ba.release(), !b.h)) throw new Ke(2, 7, 7002);
                        if (!b.X) {
                          A.A(5);
                          break;
                        }
                        return ((b.X = a), x(A, b.Cc(!1), 5));
                      case 5:
                        if (
                          ((o = ++b.Me),
                          (s = function () {
                            return D(function (e) {
                              if (1 == e.g) return b.Me == o ? e.A(0) : i ? x(e, i.destroy(), 3) : e.A(3);
                              throw new Ke(2, 7, 7e3);
                            });
                          }),
                          (u = function (e, t) {
                            return D(function (n) {
                              switch (n.g) {
                                case 1:
                                  return (S(n, 2), x(n, Yc(b.ba, t), 4));
                                case 4:
                                  return x(n, s(), 5);
                                case 5:
                                  return x(n, e(), 6);
                                case 6:
                                  return x(n, s(), 7);
                                case 7:
                                  i && b.g && (i.g = b.g);
                                case 2:
                                  (k(n), b.ba.release(), I(n, 0));
                              }
                            });
                          }),
                          w(A, 7, 8),
                          null == n && i && (n = i.getStartTime()),
                          (b.O = n),
                          (b.Ua = !1),
                          b.dispatchEvent(Zc("loading")),
                          i)
                        ) {
                          ((r = i.V), A.A(10));
                          break;
                        }
                        if (r) {
                          A.A(10);
                          break;
                        }
                        return x(
                          A,
                          u(function () {
                            return D(function (e) {
                              if (1 == e.g) return x(e, oh(b, a), 2);
                              ((r = e.h), T(e));
                            });
                          }, "guessMimeType_"),
                          10,
                        );
                      case 10:
                        if (((l = !!i), i)) {
                          (md(i, b), (b.B = i.getStats()), A.A(13));
                          break;
                        }
                        return x(A, ih(b, a, n, r, !0, b.g), 14);
                      case 14:
                        (i = A.h)
                          ? ((i.F = !1), md(i, b), (b.B = i.getStats()), i.start(), i.B.catch(function () {}))
                          : (b.B = new dd());
                      case 13:
                        return (
                          (d = !i),
                          (c = Date.now() / 1e3),
                          (b.B = i ? i.getStats() : new dd()),
                          (b.X = a),
                          (b.Fa = r || null),
                          Ih(b),
                          (h = function () {
                            var e = b.h ? b.h.buffered : null;
                            return { start: Wo(e) || 0, end: Ko(e) || 0 };
                          }),
                          (b.za = new Gu(h)),
                          b.za.addEventListener("regionadd", function (e) {
                            dh(b, e.region, "metadataadded");
                          }),
                          d
                            ? x(
                                A,
                                u(function () {
                                  return D(function (e) {
                                    return x(
                                      e,
                                      (function (e, t) {
                                        var n, r, i;
                                        return D(function (a) {
                                          return 1 == a.g
                                            ? ((n = Date.now() / 1e3),
                                              (r = !0),
                                              (e.F = e.md({
                                                vc: e.N,
                                                onError: function (t) {
                                                  Kh(e, t);
                                                },
                                                zf: function () {},
                                                onExpirationUpdated: function () {
                                                  var t = Zc("expirationupdated");
                                                  e.dispatchEvent(t);
                                                },
                                                onEvent: function (t) {
                                                  (e.dispatchEvent(t),
                                                    "drmsessionupdate" == t.type &&
                                                      r &&
                                                      ((r = !1), (e.B.m = Date.now() / 1e3 - n)));
                                                },
                                              })),
                                              e.F.configure(e.g.drm),
                                              (i = gi([t])),
                                              (e.F.O = !0),
                                              x(a, ba(e.F, [i], []), 2))
                                            : x(a, e.F.Vb(e.h), 0);
                                        });
                                      })(b, r),
                                      0,
                                    );
                                  });
                                }, "initializeSrcEqualsDrmInner_"),
                                25,
                              )
                            : ((b.kb = new Gu(h)),
                              x(
                                A,
                                u(function () {
                                  return D(function (e) {
                                    if (1 == e.g) return x(e, Promise.race([i.ma, i.B]), 2);
                                    b.zc = i.H;
                                    var t = i;
                                    ((t.oa = !0), (b.I = t.m), (b.i = i.Lg()), T(e));
                                  });
                                }, "waitForFinish"),
                                17,
                              ))
                        );
                      case 17:
                        if (b.H) {
                          A.A(18);
                          break;
                        }
                        return x(
                          A,
                          u(function () {
                            return D(function (e) {
                              return x(e, uh(b), 0);
                            });
                          }, "initializeMediaSourceEngineInner_"),
                          18,
                        );
                      case 18:
                        return (
                          b.i &&
                            b.i.textStreams.length &&
                            (b.u.enableTextDisplayer
                              ? b.u.enableTextDisplayer()
                              : ce(
                                  "Text displayer w/ enableTextDisplayer",
                                  'Text displayer should have a "enableTextDisplayer" method!',
                                )),
                          x(
                            A,
                            u(function () {
                              return D(function (e) {
                                return x(e, i.B, 0);
                              });
                            }, "waitForFinish"),
                            20,
                          )
                        );
                      case 20:
                        if (
                          ((b.g = i.getConfiguration()),
                          (b.Ee = i.G),
                          b.I && b.I.setMediaElement && b.h && b.I.setMediaElement(b.h),
                          (b.Ae = (function (e) {
                            return ((e.va = !0), e.I);
                          })(i)),
                          (b.ye = i.Fa),
                          (p = i.C) && (b.J = p),
                          l &&
                            b.h &&
                            "AUDIO" === b.h.nodeName &&
                            ((function (e) {
                              for (var t = g(e.i.variants), n = t.next(); !n.done; n = t.next())
                                ((n = n.value).video && (n.video.closeSegmentIndex(), (n.video = null)),
                                  (n.bandwidth = n.audio && n.audio.bandwidth ? n.audio.bandwidth : 0));
                              e.i.variants = e.i.variants.filter(function (e) {
                                return e.audio;
                              });
                            })(b),
                            b.configure("manifest.disableVideo", !0)),
                          i.j)
                        ) {
                          A.A(21);
                          break;
                        }
                        return x(
                          A,
                          u(function () {
                            return D(function (e) {
                              return x(e, bd(i, b.h), 0);
                            });
                          }, "drmEngine_.init"),
                          21,
                        );
                      case 21:
                        return (
                          (b.F = (function (e) {
                            return ((e.ba = !0), e.j);
                          })(i)),
                          x(
                            A,
                            u(function () {
                              return D(function (e) {
                                return x(e, b.F.Vb(b.h), 0);
                              });
                            }, "drmEngine_.attach"),
                            23,
                          )
                        );
                      case 23:
                        return (
                          (f = b.g.abrFactory),
                          (b.o && b.Ge == f) ||
                            ((b.Ge = f),
                            b.o && b.o.release(),
                            (b.o = f()),
                            "function" != typeof b.o.setMediaElement &&
                              (ce(
                                "AbrManager w/o setMediaElement",
                                "Please use an AbrManager with setMediaElement function.",
                              ),
                              (b.o.setMediaElement = function () {})),
                            "function" != typeof b.o.setCmsdManager &&
                              (ce(
                                "AbrManager w/o setCmsdManager",
                                "Please use an AbrManager with setCmsdManager function.",
                              ),
                              (b.o.setCmsdManager = function () {})),
                            "function" != typeof b.o.trySuggestStreams &&
                              (ce(
                                "AbrManager w/o trySuggestStreams",
                                "Please use an AbrManager with trySuggestStreams function.",
                              ),
                              (b.o.trySuggestStreams = function () {})),
                            b.o.configure(b.g.abr)),
                          (m = (function (e) {
                            return ((e.ya = !0), e.M);
                          })(i)),
                          (v = i.i),
                          x(
                            A,
                            u(function () {
                              return D(function (t) {
                                return x(
                                  t,
                                  (function (t, n, r, i) {
                                    var a,
                                      o,
                                      s,
                                      u,
                                      l,
                                      d,
                                      c,
                                      h,
                                      p,
                                      f,
                                      m,
                                      v,
                                      y,
                                      b,
                                      w,
                                      S,
                                      A,
                                      E,
                                      k,
                                      I,
                                      C,
                                      M,
                                      R,
                                      _,
                                      P,
                                      L,
                                      N;
                                    return D(function (O) {
                                      switch (O.g) {
                                        case 1:
                                          (th(t, "load"),
                                            (a = t.h),
                                            (t.M = new Ou({
                                              cf: function () {
                                                return a.playbackRate;
                                              },
                                              Tc: function () {
                                                return a.defaultPlaybackRate;
                                              },
                                              uh: function (e) {
                                                a.playbackRate = e;
                                              },
                                              Di: function (e) {
                                                a.currentTime += e;
                                              },
                                            })),
                                            lh(t, a, n),
                                            "onchange" in e.screen &&
                                              t.j.D(e.screen, "change", function () {
                                                if (t.J.getConfiguration) {
                                                  var e = t.J.getConfiguration();
                                                  "AUTO" == e.hdrLevel
                                                    ? Dh(t)
                                                    : "AUTO" == t.g.preferredVideoHdrLevel &&
                                                      t.g.abr.enabled &&
                                                      ((e.hdrLevel = "AUTO"), t.J.configure(e), Dh(t));
                                                }
                                              }),
                                            (o = !1),
                                            (s = g(t.i.variants)));
                                          for (u = s.next(); !u.done; u = s.next())
                                            ((l = u.value),
                                              (d = l.video && l.video.dependencyStream) && (o = wt(d)));
                                          (!(function (e, t, n) {
                                            n || t.lcevc.enabled
                                              ? (Qc(e),
                                                null == e.T &&
                                                  ((e.T = new bt(e.h, e.Ph, t.lcevc, n)),
                                                  e.H && (e.H.C = e.T)))
                                              : Qc(e);
                                          })(t, t.g, o),
                                            (t.Kd = t.g.preferredTextLanguage),
                                            (t.Od = t.g.preferredTextRole),
                                            (t.Nd = t.g.preferForcedSubs),
                                            Jh(
                                              t.i.presentationTimeline,
                                              t.g.playRangeStart,
                                              t.g.playRangeEnd,
                                            ),
                                            t.o.init(function (e, n, r) {
                                              t.i &&
                                                t.l &&
                                                e != t.l.o &&
                                                Nh(t, e, !0, void 0 !== n && n, void 0 === r ? 0 : r);
                                            }),
                                            t.o.setMediaElement(a),
                                            t.o.setCmsdManager(t.va),
                                            (t.l = (function (e) {
                                              return new dl(e.i, {
                                                nc: function () {
                                                  return e.G ? e.G.Qd() : 0;
                                                },
                                                getBandwidthEstimate: function () {
                                                  return e.o.getBandwidthEstimate();
                                                },
                                                Ob: function () {
                                                  return e.Ob();
                                                },
                                                video: e.h,
                                                Z: e.H,
                                                vc: e.N,
                                                onError: function (t) {
                                                  return Kh(e, t);
                                                },
                                                onEvent: function (t) {
                                                  return e.dispatchEvent(t);
                                                },
                                                zd: function (t, n, r, i) {
                                                  var a = t.startTime,
                                                    o = t.endTime,
                                                    s = n.type;
                                                  if (s != gt) {
                                                    if (e.G) {
                                                      e.G.Fi();
                                                      var u = Bs(e.H, s);
                                                      !e.W() &&
                                                        e.h.paused &&
                                                        !e.h.seeking &&
                                                        null != u &&
                                                        u > 0 &&
                                                        e.G.Qd() < u &&
                                                        !$c(e.G.Qd(), u, 0.001) &&
                                                        e.G.$f(u);
                                                    }
                                                    gh(e);
                                                  }
                                                  ((r = new Map()
                                                    .set("start", a)
                                                    .set("end", o)
                                                    .set("contentType", s)
                                                    .set("isMuxed", r)
                                                    .set("isDependency", i)),
                                                    e.dispatchEvent(Zc("segmentappended", r)),
                                                    e.o &&
                                                      n.fastSwitching &&
                                                      t.Xc &&
                                                      t.je &&
                                                      e.o.trySuggestStreams());
                                                },
                                                Fk: function (t, n) {
                                                  (n = n.xd) &&
                                                    e.ye &&
                                                    (function (e, t, n) {
                                                      var r = (function (e, t) {
                                                        var n = e.g.get(t);
                                                        return (
                                                          n ||
                                                            ((n = { re: [], pg: null, contentType: t }),
                                                            e.g.set(t, n)),
                                                          n
                                                        );
                                                      })(e, t.contentType);
                                                      (!(function (e, t) {
                                                        if ((e = e.h()[t.contentType]) && e.length > 0) {
                                                          var n = e[0].start,
                                                            r = e[e.length - 1].end,
                                                            i = t.re;
                                                          t.re = i.filter(function (e, t) {
                                                            return !(
                                                              (e.position <= n &&
                                                                t + 1 < i.length &&
                                                                i[t + 1].position <= n) ||
                                                              e.position >= r
                                                            );
                                                          });
                                                        } else t.re = [];
                                                      })(e, r),
                                                        (e = { xd: t, position: n }),
                                                        (t = (r = r.re).findIndex(function (e) {
                                                          return e.position >= n;
                                                        })) >= 0
                                                          ? r.splice(t, r[t].position == n ? 1 : 0, e)
                                                          : r.push(e));
                                                    })(e.ye, n, t);
                                                },
                                                Uh: function (t, n) {
                                                  var r = e.F;
                                                  if (
                                                    r.h.parseInbandPsshEnabled &&
                                                    !r.H &&
                                                    ["audio", "video"].includes(t)
                                                  ) {
                                                    ((t = new ma(Ne(n))), (n = 0));
                                                    for (
                                                      var i = g(t.data), a = i.next();
                                                      !a.done;
                                                      a = i.next()
                                                    )
                                                      n += a.value.length;
                                                    if (0 == n) r = Promise.resolve();
                                                    else {
                                                      for (
                                                        n = new Uint8Array(n),
                                                          i = 0,
                                                          a = (t = g(t.data)).next();
                                                        !a.done;
                                                        a = t.next()
                                                      )
                                                        ((a = a.value), n.set(a, i), (i += a.length));
                                                      (Sa(r, "cenc", n), (r = r.m));
                                                    }
                                                  } else r = Promise.resolve();
                                                  return r;
                                                },
                                                disableStream: function (t, n) {
                                                  return e.disableStream(t, n);
                                                },
                                                hl: function (t, n) {
                                                  return !(
                                                    e.g.abr.enabled &&
                                                    n.fastSwitching &&
                                                    t.Xc &&
                                                    t.je
                                                  );
                                                },
                                              });
                                            })(t)),
                                            t.l.configure(t.g.streaming),
                                            (t.m = rp),
                                            t.dispatchEvent(Zc("streaming")),
                                            (c = r));
                                        case 2:
                                          for (
                                            (p = t.l.o) || c || (c = Ph(t, !0)),
                                              f = [],
                                              m = g([(h = p || c).video, h.audio]),
                                              v = m.next();
                                            !v.done;
                                            v = m.next()
                                          )
                                            (y = v.value) &&
                                              !y.segmentIndex &&
                                              (f.push(y.createSegmentIndex()),
                                              y.dependencyStream &&
                                                f.push(y.dependencyStream.createSegmentIndex()));
                                          if (!(f.length > 0)) {
                                            O.A(4);
                                            break;
                                          }
                                          return x(O, Promise.all(f), 4);
                                        case 4:
                                          if (!h || 0 != h.disabledUntilTime) {
                                            O.A(2);
                                            break;
                                          }
                                          if (
                                            (Dh(t),
                                            t.I &&
                                              t.I.onInitialVariantChosen &&
                                              t.I.onInitialVariantChosen(h),
                                            t.i.isLowLatency &&
                                              (t.g.streaming.lowLatencyMode
                                                ? t.configure(t.dg)
                                                : K(
                                                    "Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.",
                                                  )),
                                            t.K &&
                                              ((function (e, t) {
                                                ((e.u = t),
                                                  e.u
                                                    ? e.l == Ec
                                                      ? (e.l = kc)
                                                      : e.l == Ic && (e.l = Cc)
                                                    : e.l == kc
                                                      ? (e.l = Ec)
                                                      : e.l == Cc && (e.l = Ic));
                                              })(t.K, t.i.isLowLatency && t.g.streaming.lowLatencyMode),
                                              (function (e, t) {
                                                if (
                                                  e.g &&
                                                  e.g.enabled &&
                                                  (rc(e, "ps", { dd: "d" }), e.h && e.h.autoplay)
                                                ) {
                                                  var n = e.h.play();
                                                  n &&
                                                    n
                                                      .then(function () {
                                                        e.H = t;
                                                      })
                                                      .catch(function () {
                                                        e.H = 0;
                                                      });
                                                }
                                              })(t.K, 1e3 * n)),
                                            Jh(
                                              t.i.presentationTimeline,
                                              t.g.playRangeStart,
                                              t.g.playRangeEnd,
                                            ),
                                            (function (e, t, n) {
                                              e.j.presentationTimeline.W() || ((e.ba = t), (e.$ = n));
                                            })(t.l, t.g.playRangeStart, t.g.playRangeEnd),
                                            (t.Ua = !0),
                                            t.dispatchEvent(Zc("canupdatestarttime")),
                                            (b = function (e) {
                                              ((t.G = (function (e, t) {
                                                return new ku(
                                                  e.h,
                                                  e.i,
                                                  e.g.streaming,
                                                  t,
                                                  function () {
                                                    (e.ac && ju(e.ac, !e.G.Mh()),
                                                      e.l && e.l.bd(),
                                                      e.R && gh(e, "seeking"));
                                                  },
                                                  function (t) {
                                                    return e.dispatchEvent(t);
                                                  },
                                                );
                                              })(t, e)),
                                                (t.ac = (function (e, t) {
                                                  var n = e.W() || ("number" == typeof t && t > 0);
                                                  ((t = new Ad(e.Ae, n)).addEventListener(
                                                    "enter",
                                                    function (t) {
                                                      qh(e, "timelineregionenter", t.region);
                                                    },
                                                  ),
                                                    t.addEventListener("exit", function (t) {
                                                      qh(e, "timelineregionexit", t.region);
                                                    }),
                                                    t.addEventListener("skip", function (t) {
                                                      var n = t.region;
                                                      t.seeking ||
                                                        (qh(e, "timelineregionenter", n),
                                                        qh(e, "timelineregionexit", n));
                                                    }));
                                                  var r = new Ad(e.za, n);
                                                  (r.addEventListener("enter", function (t) {
                                                    dh(e, t.region, "metadata");
                                                  }),
                                                    (n = new Ad(e.kb, n)).addEventListener(
                                                      "enter",
                                                      function (t) {
                                                        ((t = new Map().set("detail", t.region.emsg)),
                                                          e.dispatchEvent(Zc("emsg", t)));
                                                      },
                                                    ));
                                                  var i = new Bu(e.h);
                                                  return (
                                                    i.g.add(t),
                                                    i.g.add(r),
                                                    i.g.add(n),
                                                    e.ye && i.g.add(e.ye),
                                                    i
                                                  );
                                                })(t, e)),
                                                ph(t, a, !1));
                                            }),
                                            t.g.streaming.startAtSegmentBoundary ||
                                              (null == (w = t.O) && t.i.startTime && (w = t.i.startTime),
                                              b(w)),
                                            p)
                                          ) {
                                            O.A(7);
                                            break;
                                          }
                                          if (!t.g.streaming.startAtSegmentBoundary) {
                                            O.A(8);
                                            break;
                                          }
                                          return (
                                            (S = t.i.presentationTimeline),
                                            t.O instanceof Date &&
                                              ((E = S.m || S.i),
                                              null != (k = t.O.getTime() / 1e3 - E) && (A = k)),
                                            null == A && (A = "number" == typeof t.O ? t.O : t.h.currentTime),
                                            null == t.O && t.i.startTime && (A = t.i.startTime),
                                            (I = S.Zb()),
                                            (C = S.Gb()),
                                            A < I ? (A = I) : A > C && (A = C),
                                            x(
                                              O,
                                              (function (e, t) {
                                                var n, r, i, a, o;
                                                return D(function (s) {
                                                  return 1 == s.g
                                                    ? ((n = e.audio),
                                                      (r = e.video),
                                                      (i = function (e, t) {
                                                        var n, r, i;
                                                        return D(function (a) {
                                                          return 1 == a.g
                                                            ? e
                                                              ? e.segmentIndex
                                                                ? a.A(2)
                                                                : x(a, e.createSegmentIndex(), 2)
                                                              : a.return(null)
                                                            : (r = (n = e.segmentIndex.Xb(t))
                                                                  ? n.next().value
                                                                  : null)
                                                              ? ((i = r.startTime), a.return(i))
                                                              : a.return(null);
                                                        });
                                                      }),
                                                      x(s, i(n, t), 2))
                                                    : 3 != s.g
                                                      ? ((a = s.h), x(s, i(r, t), 3))
                                                      : null != (o = s.h) && null != a
                                                        ? s.return(Math.max(o, a))
                                                        : null != o
                                                          ? s.return(o)
                                                          : null != a
                                                            ? s.return(a)
                                                            : s.return(t);
                                                });
                                              })(c, A),
                                              9,
                                            )
                                          );
                                        case 9:
                                          ((M = O.h), b(M));
                                        case 8:
                                          Nh(t, c, !0, !1, 0);
                                        case 7:
                                          return (
                                            t.G.ready(),
                                            t.Lc().find(function (e) {
                                              return e.active;
                                            }) ||
                                              ((R = li(t.i.textStreams, t.Kd, t.Od, t.Nd)[0] || null) &&
                                                ld(t.B.h, R, !0),
                                              c &&
                                                (R
                                                  ? (fi(c.audio, R, t.g) && (t.$ = !0),
                                                    t.$ && t.u.setTextVisibility(!0))
                                                  : ((t.$ = !1), t.u.setTextVisibility(!1)),
                                                Gh(t)),
                                              R &&
                                                (t.g.streaming.alwaysStreamText || t.Sg()) &&
                                                (pl(t.l, R), Xh(t))),
                                            x(O, t.l.start(i), 10)
                                          );
                                        case 10:
                                          (t.g.abr.enabled && (t.o.enable(), zh(t)),
                                            Bh(t),
                                            t.i.variants.some(function (e) {
                                              return e.primary;
                                            }),
                                            (((_ = t.W()) &&
                                              ((t.g.streaming.liveSync && t.g.streaming.liveSync.enabled) ||
                                                t.i.serviceDescription ||
                                                t.g.streaming.liveSync.panicMode)) ||
                                              t.g.streaming.vodDynamicPlaybackRate) &&
                                              ((P = function () {
                                                return Rh(t);
                                              }),
                                              t.j.D(a, "timeupdate", P)),
                                            _ ||
                                              ((L = function () {
                                                return _h(t);
                                              }),
                                              t.j.D(a, "timeupdate", L),
                                              _h(t),
                                              t.i.nextUrl &&
                                                (t.g.streaming.preloadNextUrlWindow > 0 &&
                                                  ((N = function () {
                                                    var e;
                                                    return D(function (n) {
                                                      if (1 == n.g)
                                                        return (
                                                          (e = t.Ra().end - t.h.currentTime),
                                                          !isNaN(e) && e <= t.g.streaming.preloadNextUrlWindow
                                                            ? (t.j.Ma(a, "timeupdate", N),
                                                              x(n, t.preload(t.i.nextUrl), 4))
                                                            : n.A(0)
                                                        );
                                                      ((t.eb = n.h), T(n));
                                                    });
                                                  }),
                                                  t.j.D(a, "timeupdate", N)),
                                                t.j.D(a, "ended", function () {
                                                  t.load(t.eb || t.i.nextUrl);
                                                }))),
                                            t.C && t.C.onManifestUpdated(_),
                                            T(O));
                                      }
                                    });
                                  })(b, c, v, m),
                                  0,
                                );
                              });
                            }, "loadInner_"),
                            24,
                          )
                        );
                      case 24:
                        (!(function (e) {
                          if (e.J) for (var t = g(e.J), n = t.next(); !n.done; n = t.next()) (n = n.value)();
                          e.J = null;
                        })(i),
                          b.Fa &&
                            oe().gj() &&
                            vr(b.Fa) &&
                            (function (t, n, r) {
                              t.g &&
                                e.ManagedMediaSource &&
                                t.i &&
                                t.B.useSourceElements &&
                                (t.F && t.g.removeChild(t.F),
                                (t.F = Qo(n, r)),
                                t.g.appendChild(t.F),
                                (t.g.disableRemotePlayback = !1));
                            })(b.H, b.X, b.Fa),
                          A.A(16));
                        break;
                      case 25:
                        return x(
                          A,
                          u(function () {
                            return D(function (e) {
                              return x(
                                e,
                                (function (e, t, n) {
                                  var r, i, a, o, s, u, l, d, c, h, p, f;
                                  return D(function (m) {
                                    switch (m.g) {
                                      case 1:
                                        if (
                                          (th(e, "src-equals"),
                                          (r = e.h),
                                          (e.G = new Su(r)),
                                          (i = !1),
                                          e.De.push(function () {
                                            i = !0;
                                          }),
                                          e.dispatchEvent(Zc("canupdatestarttime")),
                                          null != e.O && e.G.$f(e.O),
                                          (e.ac = (function (e, t) {
                                            (t = new Ad(e.za, t instanceof Date || t > 0)).addEventListener(
                                              "enter",
                                              function (t) {
                                                dh(e, t.region, "metadata");
                                              },
                                            );
                                            var n = new Bu(e.h);
                                            return (n.g.add(t), n);
                                          })(e, e.O || 0)),
                                          (e.M = new Ou({
                                            cf: function () {
                                              return r.playbackRate;
                                            },
                                            Tc: function () {
                                              return r.defaultPlaybackRate;
                                            },
                                            uh: function (e) {
                                              r.playbackRate = e;
                                            },
                                            Di: function (e) {
                                              r.currentTime += e;
                                            },
                                          })),
                                          ph(e, r, !0),
                                          r.textTracks &&
                                            (sh(e),
                                            (a = function (t) {
                                              if (!(e.u instanceof Fd)) {
                                                var n = Th(e).find(function (e) {
                                                  return "disabled" !== e.mode;
                                                });
                                                (n && (n.mode = t ? "showing" : "hidden"),
                                                  e.u instanceof Hd &&
                                                    (n = (function (e) {
                                                      return Array.from(e.h.textTracks).find(function (e) {
                                                        return "Shaka Player TextTrack" == e.label;
                                                      });
                                                    })(e)) &&
                                                    (n.mode =
                                                      !t && e.u.isTextVisible() ? "showing" : "hidden"));
                                              }
                                            }),
                                            e.j.D(r, "enterpictureinpicture", function () {
                                              return a(!0);
                                            }),
                                            e.j.D(r, "leavepictureinpicture", function () {
                                              return a(!1);
                                            }),
                                            r.remote
                                              ? (e.j.D(r.remote, "connect", function () {
                                                  return a(!1);
                                                }),
                                                e.j.D(r.remote, "connecting", function () {
                                                  return a(!1);
                                                }),
                                                e.j.D(r.remote, "disconnect", function () {
                                                  return a(!1);
                                                }))
                                              : "webkitCurrentPlaybackTargetIsWireless" in r &&
                                                e.j.D(
                                                  r,
                                                  "webkitcurrentplaybacktargetiswirelesschanged",
                                                  function () {
                                                    return a(!1);
                                                  },
                                                ),
                                            ((o = r).webkitPresentationMode || o.webkitSupportsFullscreen) &&
                                              e.j.D(o, "webkitpresentationmodechanged", function () {
                                                o.webkitPresentationMode
                                                  ? a("inline" !== o.webkitPresentationMode)
                                                  : o.webkitSupportsFullscreen &&
                                                    a(o.webkitDisplayingFullscreen);
                                              })),
                                          lh(e, r, t),
                                          (s = (function (e, t, n) {
                                            try {
                                              if (!e.g.enabled) return t;
                                              var r = nc(e);
                                              e: {
                                                switch (n.toLowerCase()) {
                                                  case "audio/mp4":
                                                  case "audio/webm":
                                                  case "audio/ogg":
                                                  case "audio/mpeg":
                                                  case "audio/aac":
                                                  case "audio/flac":
                                                  case "audio/wav":
                                                    var i = mc;
                                                    break e;
                                                  case "video/webm":
                                                  case "video/mp4":
                                                  case "video/mpeg":
                                                  case "video/mp2t":
                                                    i = yc;
                                                    break e;
                                                  case "application/x-mpegurl":
                                                  case "application/vnd.apple.mpegurl":
                                                  case "application/dash+xml":
                                                  case "video/vnd.mpeg.dash.mpd":
                                                  case "application/vnd.ms-sstr+xml":
                                                    i = gc;
                                                    break e;
                                                }
                                                i = void 0;
                                              }
                                              return ((r.ot = i), (r.su = !0), fc(t, hc(r)));
                                            } catch (o) {
                                              return (
                                                q("CMCD_SRC_ERROR", "Could not generate src CMCD data.", o),
                                                t
                                              );
                                            }
                                          })(e.K, e.X, n)),
                                          !s.includes("#t=") &&
                                            (e.g.playRangeStart > 0 || isFinite(e.g.playRangeEnd)) &&
                                            ((s += "#t="),
                                            e.g.playRangeStart > 0 && (s += e.g.playRangeStart),
                                            isFinite(e.g.playRangeEnd) && (s += "," + e.g.playRangeEnd)),
                                          !e.H)
                                        ) {
                                          m.A(2);
                                          break;
                                        }
                                        return x(m, e.H.destroy(), 3);
                                      case 3:
                                        e.H = null;
                                      case 2:
                                        return (
                                          Zo(r),
                                          (r.src = s),
                                          "TV" == (u = oe()).Oa() && r.load(),
                                          "none" != r.preload &&
                                            !r.autoplay &&
                                            vr(n) &&
                                            "WEBKIT" === u.Ha() &&
                                            r.load(),
                                          (e.m = ip),
                                          e.dispatchEvent(Zc("streaming")),
                                          (l = function () {
                                            return new Promise(function (t) {
                                              var n = new Mr(t);
                                              (e.j.D(r.textTracks, "change", function () {
                                                return n.ka(0.5);
                                              }),
                                                n.ka(0.5));
                                            });
                                          }),
                                          (d = new Ii()),
                                          fu(r, HTMLMediaElement.HAVE_METADATA, e.j, function () {
                                            return D(function (t) {
                                              if (1 == t.g)
                                                return (
                                                  e.G.ready(),
                                                  e.Fa && vr(e.Fa) ? x(t, l(), 3) : (d.resolve(), t.A(0))
                                                );
                                              (d.resolve(), T(t));
                                            });
                                          }),
                                          fu(r, HTMLMediaElement.HAVE_CURRENT_DATA, e.j, function () {
                                            var t, n, r, a, o;
                                            return D(function (s) {
                                              if (1 == s.g) return x(s, l(), 2);
                                              if (i) return s.return();
                                              if (
                                                ((function (e) {
                                                  var t = e.g.preferredAudioLanguage;
                                                  "" != t && e.Ti(t, e.g.preferredAudioRole);
                                                })(e),
                                                (t = Th(e)).some(function (e) {
                                                  return "showing" === e.mode;
                                                }) && ((e.$ = !0), e.u.setTextVisibility(!0)),
                                                !(e.u instanceof Fd))
                                              )
                                                for (
                                                  t.length &&
                                                    (e.u.enableTextDisplayer
                                                      ? e.u.enableTextDisplayer()
                                                      : ce(
                                                          "Text displayer w/ enableTextDisplayer",
                                                          'Text displayer should have a "enableTextDisplayer" method',
                                                        )),
                                                    n = !1,
                                                    r = g(t),
                                                    a = r.next();
                                                  !a.done;
                                                  a = r.next()
                                                )
                                                  "disabled" !== (o = a.value).mode &&
                                                    (n
                                                      ? ((o.mode = "disabled"),
                                                        K(
                                                          "Found more than one enabled text track, disabling it",
                                                          o,
                                                        ))
                                                      : (xh(e, o), (n = !0)));
                                              (!(function (e) {
                                                var t = e.g.preferredTextLanguage;
                                                "" != t &&
                                                  e.oh(t, e.g.preferredTextRole, e.g.preferForcedSubs);
                                              })(e),
                                                T(s));
                                            });
                                          }),
                                          r.error
                                            ? d.reject($h(e))
                                            : "none" == r.preload &&
                                              (K(
                                                'With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.',
                                              ),
                                              d.resolve()),
                                          e.j.Aa(r, "error", function () {
                                            d.reject($h(e));
                                          }),
                                          x(m, Pr(e.g.streaming.loadTimeout, d), 4)
                                        );
                                      case 4:
                                        ((((c = e.W()) &&
                                          ((e.g.streaming.liveSync && e.g.streaming.liveSync.enabled) ||
                                            e.g.streaming.liveSync.panicMode)) ||
                                          e.g.streaming.vodDynamicPlaybackRate) &&
                                          ((h = function () {
                                            return Rh(e);
                                          }),
                                          e.j.D(r, "timeupdate", h)),
                                          c ||
                                            ((p = function () {
                                              return _h(e);
                                            }),
                                            e.j.D(r, "timeupdate", p),
                                            _h(e)),
                                          e.C &&
                                            (e.C.onManifestUpdated(c),
                                            c &&
                                              ((f = e.Ra().end),
                                              e.j.D(r, "progress", function () {
                                                var t = e.Ra().end;
                                                f != t && (e.C.onManifestUpdated(e.W()), (f = t));
                                              }))),
                                          (e.Ua = !0),
                                          T(m));
                                    }
                                  });
                                })(b, c, r),
                                0,
                              );
                            });
                          }, "srcEqualsInner_"),
                          16,
                        );
                      case 16:
                        b.dispatchEvent(Zc("loaded"));
                      case 8:
                        if ((k(A), !i)) {
                          A.A(27);
                          break;
                        }
                        return x(A, i.destroy(), 27);
                      case 27:
                        ((b.eb = null), I(A, 0));
                        break;
                      case 7:
                        if (!(y = E(A)) || 7e3 == y.code) {
                          A.A(29);
                          break;
                        }
                        return x(A, b.Cc(!1), 29);
                      case 29:
                        throw y;
                    }
                  });
                }),
                (i.jj = function (e, t, n) {
                  ((e = void 0 === e || e), (t = void 0 !== t && t), (n = void 0 !== n && n));
                  var r,
                    i = this;
                  return D(function (a) {
                    return 1 == a.g
                      ? x(a, rh(i, n), 2)
                      : 3 != a.g
                        ? ((r = a.h), x(a, i.Cc(e, t), 3))
                        : a.return(r);
                  });
                }),
                (i.$h = function (e, t) {
                  ((e = void 0 !== e && e), (t = void 0 !== t && t));
                  var n,
                    r = this;
                  return D(function (i) {
                    return 1 == i.g
                      ? x(i, rh(r, t), 2)
                      : 3 != i.g
                        ? ((n = i.h), x(i, r.detach(e), 3))
                        : i.return(n);
                  });
                }),
                (i.preload = function (e, t, n, r) {
                  t = void 0 === t ? null : t;
                  var i,
                    a,
                    o = this;
                  return D(function (s) {
                    return 1 == s.g
                      ? (rd((i = kh(o)), r || o.g, kh(o)), x(s, ih(o, e, t, n, !1, i), 2))
                      : ((a = s.h) ? a.start() : Kh(o, new Ke(2, 7, 7005)), s.return(a));
                  });
                }),
                (i.rg = function () {
                  var e,
                    t,
                    n,
                    r,
                    i = this;
                  return D(function (a) {
                    for (e = [], t = g(i.Ie), n = t.next(); !n.done; n = t.next())
                      (r = n.value).l || e.push(r.destroy());
                    return ((i.Ie = []), x(a, Promise.all(e), 0));
                  });
                }),
                (i.Ok = function () {
                  for (var e = this.ba; e.g; ) e.release();
                }),
                (i.md = function (e) {
                  return new ya(e);
                }),
                (i.configure = function (e, t) {
                  var n = this.getConfiguration();
                  if (
                    (2 == arguments.length && "string" == typeof e && (e = Vl(e, t)),
                    "preferredVariantRole" in e &&
                      (ce("preferredVariantRole configuration", "Please Use preferredAudioRole instead."),
                      (e.preferredAudioRole = e.preferredVariantRole),
                      delete e.preferredVariantRole),
                    e.streaming &&
                      "forceTransmuxTS" in e.streaming &&
                      (ce(
                        "streaming.forceTransmuxTS configuration",
                        "Please Use mediaSource.forceTransmux instead.",
                      ),
                      (e.mediaSource = e.mediaSource || {}),
                      (e.mediaSource.mediaSource = e.streaming.forceTransmuxTS),
                      delete e.streaming.forceTransmuxTS),
                    e.streaming &&
                      "forceTransmux" in e.streaming &&
                      (ce(
                        "streaming.forceTransmux configuration",
                        "Please Use mediaSource.forceTransmux instead.",
                      ),
                      (e.mediaSource = e.mediaSource || {}),
                      (e.mediaSource.mediaSource = e.streaming.forceTransmux),
                      delete e.streaming.forceTransmux),
                    e.streaming && "useNativeHlsOnSafari" in e.streaming)
                  ) {
                    ce(
                      "streaming.useNativeHlsOnSafari configuration",
                      "Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead.",
                    );
                    var r = oe();
                    ((e.streaming.preferNativeHls = e.streaming.useNativeHlsOnSafari && "WEBKIT" === r.Ha()),
                      delete e.streaming.useNativeHlsOnSafari);
                  }
                  if (
                    (e.streaming &&
                      "boolean" == typeof e.streaming.liveSync &&
                      (ce("streaming.liveSync", "Please Use streaming.liveSync.enabled instead."),
                      (r = e.streaming.liveSync),
                      (e.streaming.liveSync = {}),
                      (e.streaming.liveSync.enabled = r)),
                    e.streaming &&
                      (!e.streaming.liveSync || !("targetLatency" in e.streaming.liveSync)) &&
                      ("liveSyncMinLatency" in e.streaming || "liveSyncMaxLatency" in e.streaming))
                  ) {
                    r = e.streaming.liveSyncMinLatency || 0;
                    var i = Math.abs((e.streaming.liveSyncMaxLatency || 1) - r) / 2;
                    ((e.streaming.liveSync = e.streaming.liveSync || {}),
                      (e.streaming.liveSync.targetLatency = r + i),
                      (e.streaming.liveSync.targetLatencyTolerance = i));
                  }
                  if (
                    (e.streaming &&
                      "liveSyncMaxLatency" in e.streaming &&
                      (ce(
                        "streaming.liveSyncMaxLatency",
                        "Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest",
                      ),
                      delete e.streaming.liveSyncMaxLatency),
                    e.streaming &&
                      "liveSyncMinLatency" in e.streaming &&
                      (ce(
                        "streaming.liveSyncMinLatency",
                        "Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest",
                      ),
                      delete e.streaming.liveSyncMinLatency),
                    e.streaming &&
                      "liveSyncTargetLatency" in e.streaming &&
                      (ce(
                        "streaming.liveSyncTargetLatency",
                        "Please Use streaming.liveSync.targetLatency instead.",
                      ),
                      (e.streaming.liveSync = e.streaming.liveSync || {}),
                      (e.streaming.liveSync.targetLatency = e.streaming.liveSyncTargetLatency),
                      delete e.streaming.liveSyncTargetLatency),
                    e.streaming &&
                      "liveSyncTargetLatencyTolerance" in e.streaming &&
                      (ce(
                        "streaming.liveSyncTargetLatencyTolerance",
                        "Please Use streaming.liveSync.targetLatencyTolerance instead.",
                      ),
                      (e.streaming.liveSync = e.streaming.liveSync || {}),
                      (e.streaming.liveSync.targetLatencyTolerance =
                        e.streaming.liveSyncTargetLatencyTolerance),
                      delete e.streaming.liveSyncTargetLatencyTolerance),
                    e.streaming &&
                      "liveSyncPlaybackRate" in e.streaming &&
                      (ce(
                        "streaming.liveSyncPlaybackRate",
                        "Please Use streaming.liveSync.maxPlaybackRate instead.",
                      ),
                      (e.streaming.liveSync = e.streaming.liveSync || {}),
                      (e.streaming.liveSync.maxPlaybackRate = e.streaming.liveSyncPlaybackRate),
                      delete e.streaming.liveSyncPlaybackRate),
                    e.streaming &&
                      "liveSyncMinPlaybackRate" in e.streaming &&
                      (ce(
                        "streaming.liveSyncMinPlaybackRate",
                        "Please Use streaming.liveSync.minPlaybackRate instead.",
                      ),
                      (e.streaming.liveSync = e.streaming.liveSync || {}),
                      (e.streaming.liveSync.minPlaybackRate = e.streaming.liveSyncMinPlaybackRate),
                      delete e.streaming.liveSyncMinPlaybackRate),
                    e.streaming &&
                      "liveSyncPanicMode" in e.streaming &&
                      (ce("streaming.liveSyncPanicMode", "Please Use streaming.liveSync.panicMode instead."),
                      (e.streaming.liveSync = e.streaming.liveSync || {}),
                      (e.streaming.liveSync.panicMode = e.streaming.liveSyncPanicMode),
                      delete e.streaming.liveSyncPanicMode),
                    e.streaming &&
                      "liveSyncPanicThreshold" in e.streaming &&
                      (ce(
                        "streaming.liveSyncPanicThreshold",
                        "Please Use streaming.liveSync.panicThreshold instead.",
                      ),
                      (e.streaming.liveSync = e.streaming.liveSync || {}),
                      (e.streaming.liveSync.panicThreshold = e.streaming.liveSyncPanicThreshold),
                      delete e.streaming.liveSyncPanicThreshold),
                    e.mediaSource && "sourceBufferExtraFeatures" in e.mediaSource)
                  ) {
                    ce(
                      "mediaSource.sourceBufferExtraFeatures configuration",
                      "Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.",
                    );
                    var a = e.mediaSource.sourceBufferExtraFeatures;
                    ((e.mediaSource.addExtraFeaturesToSourceBuffer = function () {
                      return a;
                    }),
                      delete e.mediaSource.sourceBufferExtraFeatures);
                  }
                  if (
                    (e.manifest &&
                      e.manifest.hls &&
                      "useSafariBehaviorForLive" in e.manifest.hls &&
                      (ce(
                        "manifest.hls.useSafariBehaviorForLive configuration",
                        "Please Use liveSync config to keep on live Edge instead.",
                      ),
                      delete e.manifest.hls.useSafariBehaviorForLive),
                    e.streaming &&
                      "parsePrftBox" in e.streaming &&
                      (ce(
                        "streaming.parsePrftBox configuration",
                        "Now fired without needing a configuration.",
                      ),
                      delete e.streaming.parsePrftBox),
                    e.manifest &&
                      e.manifest.dash &&
                      "enableAudioGroups" in e.manifest.dash &&
                      (ce(
                        "manifest.dash.enableAudioGroups configuration",
                        "Please Use manifest.enableAudioGroups instead.",
                      ),
                      (e.manifest.enableAudioGroups = e.manifest.dash.enableAudioGroups),
                      delete e.manifest.dash.enableAudioGroups),
                    e.streaming &&
                      "dispatchAllEmsgBoxes" in e.streaming &&
                      (ce(
                        "streaming.dispatchAllEmsgBoxes configuration",
                        "Please Use mediaSource.dispatchAllEmsgBoxes instead.",
                      ),
                      (e.mediaSource = e.mediaSource || {}),
                      (e.mediaSource.dispatchAllEmsgBoxes = e.streaming.dispatchAllEmsgBoxes),
                      delete e.streaming.dispatchAllEmsgBoxes),
                    e.streaming &&
                      "autoLowLatencyMode" in e.streaming &&
                      (ce(
                        "streaming.autoLowLatencyMode configuration",
                        "Please Use streaming.lowLatencyMode instead.",
                      ),
                      (e.streaming.lowLatencyMode = e.streaming.autoLowLatencyMode),
                      delete e.streaming.autoLowLatencyMode),
                    e.manifest &&
                      e.manifest.dash &&
                      "ignoreSupplementalCodecs" in e.manifest.dash &&
                      (ce(
                        "manifest.dash.ignoreSupplementalCodecs configuration",
                        "Please Use manifest.ignoreSupplementalCodecs instead.",
                      ),
                      (e.manifest.ignoreSupplementalCodecs = e.manifest.dash.ignoreSupplementalCodecs),
                      delete e.manifest.dash.ignoreSupplementalCodecs),
                    e.manifest &&
                      e.manifest.hls &&
                      "ignoreSupplementalCodecs" in e.manifest.hls &&
                      (ce(
                        "manifest.hls.ignoreSupplementalCodecs configuration",
                        "Please Use manifest.ignoreSupplementalCodecs instead.",
                      ),
                      (e.manifest.ignoreSupplementalCodecs = e.manifest.hls.ignoreSupplementalCodecs),
                      delete e.manifest.hls.ignoreSupplementalCodecs),
                    e.manifest &&
                      e.manifest.dash &&
                      "updatePeriod" in e.manifest.dash &&
                      (ce(
                        "manifest.dash.updatePeriod configuration",
                        "Please Use manifest.updatePeriod instead.",
                      ),
                      (e.manifest.updatePeriod = e.manifest.dash.updatePeriod),
                      delete e.manifest.dash.updatePeriod),
                    e.manifest &&
                      e.manifest.hls &&
                      "updatePeriod" in e.manifest.hls &&
                      (ce(
                        "manifest.hls.updatePeriod configuration",
                        "Please Use manifest.updatePeriod instead.",
                      ),
                      (e.manifest.updatePeriod = e.manifest.hls.updatePeriod),
                      delete e.manifest.hls.updatePeriod),
                    e.manifest &&
                      e.manifest.dash &&
                      "ignoreDrmInfo" in e.manifest.dash &&
                      (ce(
                        "manifest.dash.ignoreDrmInfo configuration",
                        "Please Use manifest.ignoreDrmInfo instead.",
                      ),
                      (e.manifest.ignoreDrmInfo = e.manifest.dash.ignoreDrmInfo),
                      delete e.manifest.dash.ignoreDrmInfo),
                    e.drm && e.drm.advanced)
                  ) {
                    for (var o in ((r = !1), e.drm.advanced)) {
                      var s = e.drm.advanced[o];
                      ((i = s.videoRobustness),
                        (s = s.audioRobustness),
                        "videoRobustness" in e.drm.advanced[o] &&
                          !Array.isArray(e.drm.advanced[o].videoRobustness) &&
                          ((e.drm.advanced[o].videoRobustness = [i]), (r = !0)),
                        "audioRobustness" in e.drm.advanced[o] &&
                          !Array.isArray(e.drm.advanced[o].audioRobustness) &&
                          ((e.drm.advanced[o].audioRobustness = [s]), (r = !0)));
                    }
                    r &&
                      ce(
                        "AdvancedDrmConfiguration's videoRobustness and audioRobustness",
                        "These properties are no longer strings but array of strings, please update your usage of these properties.",
                      );
                  }
                  return (
                    e.streaming &&
                      "forceHTTP" in e.streaming &&
                      (ce("streaming.forceHTTP configuration", "Please Use networking.forceHTTP instead."),
                      (e.networking = e.networking || {}),
                      (e.networking.forceHTTP = e.streaming.forceHTTP),
                      delete e.streaming.forceHTTP),
                    e.streaming &&
                      "forceHTTPS" in e.streaming &&
                      (ce("streaming.forceHTTPS configuration", "Please Use networking.forceHTTP instead."),
                      (e.networking = e.networking || {}),
                      (e.networking.forceHTTPS = e.streaming.forceHTTPS),
                      delete e.streaming.forceHTTPS),
                    e.streaming &&
                      "minBytesForProgressEvents" in e.streaming &&
                      (ce(
                        "streaming.minBytesForProgressEvents configuration",
                        "Please Use networking.minBytesForProgressEvents instead.",
                      ),
                      (e.networking = e.networking || {}),
                      (e.networking.minBytesForProgressEvents = e.streaming.minBytesForProgressEvents),
                      delete e.streaming.minBytesForProgressEvents),
                    (o = rd(this.g, e, kh(this))),
                    mh(this, n),
                    o
                  );
                }),
                (i.yj = function (e) {
                  this.dg = e;
                }),
                (i.getConfiguration = function () {
                  var e = kh(this);
                  return (rd(e, this.g, kh(this)), e);
                }),
                (i.Ij = function () {
                  return this.dg;
                }),
                (i.ki = function () {
                  return (rd(kh(this), this.g, kh(this)), Gl(this.g, kh(this)));
                }),
                (i.ei = function () {
                  if (this.h) {
                    var e = this.h.buffered.length;
                    e = e ? this.h.buffered.end(e - 1) : 0;
                    var t = this.getConfiguration().streaming.bufferingGoal;
                    if (e >= (t = Math.min(this.h.currentTime + t, this.Ra().end))) return 1;
                    if (!(e <= this.h.currentTime) && e < t)
                      return (e - this.h.currentTime) / (t - this.h.currentTime);
                  }
                  return 0;
                }),
                (i.Oi = function () {
                  var e,
                    t = this.getConfiguration();
                  for (e in this.g) delete this.g[e];
                  (rd(this.g, kh(this), kh(this)), mh(this, t));
                }),
                (i.$d = function () {
                  return this.m;
                }),
                (i.ii = function () {
                  return this.i ? this.i.type : null;
                }),
                (i.bf = function () {
                  return this.h;
                }),
                (i.Yb = function () {
                  return this.N;
                }),
                (i.rd = function () {
                  return this.X;
                }),
                (i.di = function () {
                  return this.C ? this.C : null;
                }),
                (i.mi = function () {
                  return this.Da ? this.Da : null;
                }),
                (i.W = function () {
                  return this.i && !this.xa()
                    ? this.i.presentationTimeline.W()
                    : !(!this.h || (!this.h.src && !this.xa())) && this.h.duration == 1 / 0;
                }),
                (i.Vc = function () {
                  return !!this.i && this.i.presentationTimeline.Vc();
                }),
                (i.lk = function () {
                  if (this.i && !this.xa()) {
                    var e = this.i.variants;
                    return !!e.length && !e[0].video;
                  }
                  return (
                    !(!this.h || (!this.h.src && !this.xa())) &&
                    (this.h.videoTracks ? 0 == this.h.videoTracks.length : 0 == this.h.videoHeight)
                  );
                }),
                (i.ti = function () {
                  if (this.i && !this.xa()) {
                    var e = this.i.variants;
                    return !(!e.length || (e = e[0]).audio || !e.video || e.video.codecs.includes(","));
                  }
                  return (
                    !(!this.h || (!this.h.src && !this.xa()) || !this.h.audioTracks) &&
                    0 == this.h.audioTracks.length
                  );
                }),
                (i.Ra = function () {
                  if (this.i && !this.xa()) {
                    if (!this.Ua && "HLS" == this.i.type) return { start: 0, end: 0 };
                    var e = this.i.presentationTimeline;
                    return { start: e.Zb(), end: e.Gb() };
                  }
                  if (this.h && (this.h.src || this.xa()) && (e = this.h.seekable) && e.length) {
                    var t = this.g ? this.g.playRangeStart : 0;
                    t = Math.max(e.start(0), t);
                    var n = this.g ? this.g.playRangeEnd : 1 / 0;
                    return { start: t, end: (e = Math.min(e.end(e.length - 1), n)) };
                  }
                  return { start: 0, end: 0 };
                }),
                (i.ik = function () {
                  this.W() && (this.h.currentTime = this.Ra().end);
                }),
                (i.nk = function () {
                  return this.Ua;
                }),
                (i.keySystem = function () {
                  var e = this.drmInfo();
                  return e ? e.keySystem : "";
                }),
                (i.drmInfo = function () {
                  return this.F ? this.F.g : null;
                }),
                (i.Zd = function () {
                  return this.F ? this.F.Zd() : 1 / 0;
                }),
                (i.Kg = function () {
                  return this.F ? this.F.Kg() : [];
                }),
                (i.$e = function () {
                  return this.F ? this.F.$e() : {};
                }),
                (i.Rg = function () {
                  return this.R ? this.R.g == Ga : !!this.X;
                }),
                (i.Ob = function () {
                  return this.h ? (this.M ? this.M.i : 1) : 0;
                }),
                (i.Kh = function (e) {
                  this.m == rp && this.l && cl(this.l, e);
                }),
                (i.xe = function (e, t) {
                  ((t = void 0 === t || t),
                    0 == e
                      ? K("A trick play rate of 0 is unsupported!")
                      : (this.M.set(e),
                        this.m == rp && (this.o.playbackRateChanged(e), this.Kh(t && 1 != e)),
                        Ch(this, e)));
                }),
                (i.Sd = function () {
                  var e = this.M.Tc();
                  (this.m == ip && this.M.set(e),
                    this.m == rp && (this.M.set(e), this.o.playbackRateChanged(e), this.Kh(!1)),
                    this.dc.Qa());
                }),
                (i.qc = function () {
                  if (this.i && !this.xa()) {
                    for (
                      var e = this.l ? this.l.o : null, t = [], n = 0, r = g(this.i.variants), i = r.next();
                      !i.done;
                      i = r.next()
                    )
                      if (si((i = i.value))) {
                        var a = ti(i);
                        ((a.active = i == e),
                          a.active ||
                            1 == n ||
                            null == e ||
                            i.video != e.video ||
                            i.audio != e.audio ||
                            (a.active = !0),
                          a.active && n++,
                          t.push(a));
                      }
                    return t;
                  }
                  if (this.h && this.h.audioTracks) {
                    var o = Uh(this);
                    return (e = Array.from(this.h.audioTracks)).length
                      ? e.map(function (e) {
                          return oi(e, o);
                        })
                      : o
                        ? [oi(null, o)]
                        : [];
                  }
                  return [];
                }),
                (i.Lc = function () {
                  if (this.i) {
                    if (this.xa()) return [];
                    for (
                      var e = this.l ? this.l.B : null, t = [], n = g(this.i.textStreams), r = n.next();
                      !r.done;
                      r = n.next()
                    ) {
                      var i = ni((r = r.value));
                      ((i.active = r == e), t.push(i));
                    }
                    return t;
                  }
                  return this.h && this.h.src && this.h.textTracks
                    ? Th(this).map(function (e) {
                        return ai(e);
                      })
                    : [];
                }),
                (i.Nj = function () {
                  var e = this.Ke;
                  return (
                    this.i && (e = this.i.imageStreams),
                    e.map(function (e) {
                      return ri(e);
                    })
                  );
                }),
                (i.Bj = function (e) {
                  var t,
                    n,
                    r = this;
                  return D(function (i) {
                    return 1 == i.g
                      ? x(i, yh(r, e), 2)
                      : (t = i.h)
                        ? ((n = []),
                          t.segmentIndex.Fb(function (e) {
                            var r = vh(e.tilesLayout || t.tilesLayout);
                            if (r)
                              for (var i = r.rows * r.columns, a = e.j - e.startTime, o = 0; o < i; o++) {
                                var s = bh(e, t, e.startTime + (a * o) / i, r);
                                n.push(s);
                              }
                          }),
                          t.closeSegmentIndex && t.closeSegmentIndex(),
                          i.return(n))
                        : i.return(null);
                  });
                }),
                (i.ck = function (e, t) {
                  var n,
                    r,
                    i,
                    a,
                    o,
                    s = this;
                  return D(function (u) {
                    return 1 == u.g
                      ? x(u, yh(s, e), 2)
                      : (n = u.h)
                        ? (n.closeSegmentIndex &&
                            (s.yc.has(n) ||
                              ((r = new Mr(function () {
                                (n.closeSegmentIndex(), s.yc.delete(n));
                              })),
                              s.yc.set(n, r)),
                            s.yc.get(n).ka(5)),
                          null == (i = n.segmentIndex.find(t))
                            ? u.return(null)
                            : ((a = n.segmentIndex.get(i)),
                              (o = vh(a.tilesLayout || n.tilesLayout))
                                ? u.return(bh(a, n, t, o))
                                : u.return(null)))
                        : u.return(null);
                  });
                }),
                (i.ph = function (e) {
                  var t,
                    n = this;
                  (this.i &&
                    this.G &&
                    ((t = n.i.textStreams.find(function (t) {
                      return t.id == e.id;
                    })) &&
                      t != n.l.B &&
                      (ld(n.B.h, t, !1), pl(n.l, t), Hh(n), Xh(n), (n.Kd = t.language)),
                    !this.xa())) ||
                    (function () {
                      if (n.h && n.h.textTracks) {
                        var t = Th(n),
                          r = t.find(function (t) {
                            return ii(t) === e.id;
                          });
                        if (r) {
                          if (n.u instanceof Fd)
                            for (var i = (t = g(t)).next(); !i.done; i = t.next()) {
                              var a = (i = i.value) === r ? (n.$ ? "showing" : "hidden") : "disabled";
                              i.mode !== a && (i.mode = a);
                            }
                          else
                            (t = t.find(function (e) {
                              return "disabled" !== e.mode;
                            })) !== r &&
                              (t && ((t.mode = "disabled"), n.j.Ma(t, "cuechange"), n.u.remove(0, 1 / 0)),
                              r && xh(n, r));
                          (Hh(n), Xh(n));
                        }
                      }
                    })();
                }),
                (i.Jf = function (e, t, n) {
                  var r = this;
                  ((t = void 0 !== t && t),
                    (n = void 0 === n ? 0 : n),
                    (this.i &&
                      this.G &&
                      ((function () {
                        var i = r.i.variants.find(function (t) {
                          return t.id == e.id;
                        });
                        if (i && si(i)) {
                          var a = r.l.o;
                          (r.g.abr.enabled &&
                            (a.video != i.video ||
                              (a.audio &&
                                i.audio &&
                                a.audio.language == i.audio.language &&
                                a.audio.channelsCount == i.audio.channelsCount &&
                                a.audio.label == i.audio.label)) &&
                            K(
                              "Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack().",
                            ),
                            r.xa() ? Nh(r, i, !1, !1, 0) : Nh(r, i, !1, t || !1, n || 0),
                            r.J.configure({
                              language: i.language,
                              role: (i.audio && i.audio.roles && i.audio.roles[0]) || "",
                              videoRole: (i.video && i.video.roles && i.video.roles[0]) || "",
                              channelCount: i.audio && i.audio.channelsCount ? i.audio.channelsCount : 0,
                              hdrLevel: i.video && i.video.hdr ? i.video.hdr : "",
                              spatialAudio: !(!i.audio || !i.audio.spatialAudio) && i.audio.spatialAudio,
                              videoLayout: i.video && i.video.videoLayout ? i.video.videoLayout : "",
                              audioLabel: i.audio && i.audio.label ? i.audio.label : "",
                              videoLabel: i.video && i.video.label ? i.video.label : "",
                              codecSwitchingStrategy: r.g.mediaSource.codecSwitchingStrategy,
                              audioCodec: i.audio && i.audio.codecs ? i.audio.codecs : "",
                              activeAudioCodec: a.audio && a.audio.codecs ? a.audio.codecs : "",
                              activeAudioChannelCount:
                                a.audio && a.audio.channelsCount ? a.audio.channelsCount : 0,
                              preferredAudioCodecs: r.g.preferredAudioCodecs,
                              preferredAudioChannelCount: r.g.preferredAudioChannelCount,
                            }),
                            Dh(r));
                        }
                      })(),
                      !this.xa())) ||
                      (function () {
                        if (e.originalAudioId && r.h && r.h.audioTracks)
                          for (
                            var t = Array.from(r.h.audioTracks), n = (t = g(t)).next();
                            !n.done;
                            n = t.next()
                          )
                            if (ii((n = n.value)) == e.id) {
                              Oh(r, n);
                              break;
                            }
                      })());
                }),
                (i.Wk = function (e, t) {
                  var n = this;
                  ((t = void 0 === t ? 0 : t),
                    (this.i &&
                      this.G &&
                      ((function () {
                        var r = n.J.getConfiguration();
                        ((r.audioCodec = e.codecs || ""),
                          (r.audioLabel = e.label || ""),
                          (r.channelCount = e.channelsCount || 0),
                          (r.language = e.language),
                          (r.role = e.roles[0] || ""),
                          (r.spatialAudio = e.spatialAudio));
                        var i = n.l.o;
                        ((i = i && i.audio) &&
                          ((r.activeAudioCodec = i.codecs || ""),
                          (r.activeAudioChannelCount = i.channelsCount || 0)),
                          n.J.configure(r),
                          Lh(n, !0, t, !1, !1));
                      })(),
                      !this.xa())) ||
                      (function () {
                        if (n.h && n.h.audioTracks) {
                          for (
                            var t = Br(e.language),
                              r = Array.from(n.h.audioTracks),
                              i = null,
                              a = (r = g(r)).next();
                            !a.done;
                            a = r.next()
                          ) {
                            var o = (a = a.value).language || "und";
                            if (a.label == e.label && Br(o) == t && a.kind == e.roles[0]) {
                              i = a;
                              break;
                            }
                          }
                          i && Oh(n, i);
                        }
                      })());
                }),
                (i.getAudioTracks = function () {
                  if (this.i && !this.xa()) {
                    var e = this.qc();
                    if (!e.length) return [];
                    var t = e.find(function (e) {
                      return e.active;
                    });
                    if (!t) return [];
                    var n = e;
                    if (
                      (this.m != rp ||
                        this.xa() ||
                        (n = e.filter(function (e) {
                          return (
                            e.originalVideoId === t.originalVideoId &&
                            (e.audioCodec || br.includes(e.audioMimeType || ""))
                          );
                        })),
                      !n.length)
                    )
                      return [];
                    e = new Map();
                    for (var r = (n = g(n)).next(); !r.done; r = n.next()) {
                      var i = (r = r.value).originalAudioId;
                      (i || null == r.audioId || (i = String(r.audioId)),
                        !i && r.codecs.includes(",") && r.audioCodec && (i = "muxed-in-video"),
                        i &&
                          ((i += [
                            r.language,
                            r.label,
                            r.channelsCount,
                            r.spatialAudio,
                            r.audioCodec || "",
                          ].join("_")),
                          e.set(i, {
                            active: r.active,
                            language: r.language,
                            label: r.label,
                            mimeType: r.audioMimeType,
                            codecs: r.audioCodec,
                            primary: r.primary,
                            roles: r.audioRoles || [],
                            accessibilityPurpose: r.accessibilityPurpose,
                            channelsCount: r.channelsCount,
                            audioSamplingRate: r.audioSamplingRate,
                            spatialAudio: r.spatialAudio,
                            originalLanguage: r.originalLanguage,
                          })));
                    }
                    return Array.from(e.values());
                  }
                  return this.h && this.h.audioTracks
                    ? Array.from(this.h.audioTracks).map(function (e) {
                        var t = e.language;
                        return (
                          (t = {
                            active: e.enabled,
                            language: Br(t || "und"),
                            label: e.label,
                            mimeType: null,
                            codecs: null,
                            primary: "main" == e.kind,
                            roles: [],
                            accessibilityPurpose: null,
                            channelsCount: null,
                            audioSamplingRate: null,
                            spatialAudio: !1,
                            originalLanguage: t,
                          }),
                          e.kind &&
                            ("description" == e.kind && (t.accessibilityPurpose = "visually impaired"),
                            t.roles.push(e.kind)),
                          e.configuration &&
                            (e.configuration.codec && (t.codecs = e.configuration.codec),
                            e.configuration.sampleRate && (t.audioSamplingRate = e.configuration.sampleRate),
                            e.configuration.numberOfChannels &&
                              (t.channelsCount = e.configuration.numberOfChannels)),
                          t
                        );
                      })
                    : [];
                }),
                (i.Yk = function (e, t, n) {
                  ((t = void 0 !== t && t), (n = void 0 === n ? 0 : n));
                  var r = this.qc();
                  if (r.length) {
                    var i,
                      a = r.find(function (e) {
                        return e.active;
                      });
                    a &&
                      ((i =
                        1 ==
                        (r = r.filter(function (t) {
                          return (
                            (t.videoBandwidth || t.bandwidth) == e.bandwidth &&
                            t.width == e.width &&
                            t.height == e.height &&
                            t.frameRate == e.frameRate &&
                            t.pixelAspectRatio == e.pixelAspectRatio &&
                            t.hdr == e.hdr &&
                            t.colorGamut == e.colorGamut &&
                            t.videoLayout == e.videoLayout &&
                            t.videoMimeType == e.mimeType &&
                            t.videoCodec == e.codecs &&
                            ee(t.videoRoles, e.roles) &&
                            t.videoLabel == e.label
                          );
                        })).length
                          ? r[0]
                          : r.find(function (e) {
                              return e.audioId === a.audioId;
                            })) ||
                        (i = r.find(function (e) {
                          return (
                            e.language == a.language &&
                            e.label === a.label &&
                            e.channelsCount === a.channelsCount &&
                            e.spatialAudio === a.spatialAudio &&
                            e.audioMimeType === a.audioMimeType &&
                            pr(e.audioCodec || "") === pr(a.audioCodec || "") &&
                            ee(e.audioRoles, a.audioRoles)
                          );
                        })),
                      i && !i.active && this.Jf(i, t, n));
                  }
                }),
                (i.getVideoTracks = function () {
                  if (this.m == ip || this.xa()) return [];
                  var e = this.qc();
                  if (!e.length) return [];
                  var t = e.find(function (e) {
                    return e.active;
                  });
                  if (!t) return [];
                  var n = e;
                  if (
                    (this.ti() ||
                      (n = e.filter(function (e) {
                        return (
                          !(
                            !e.videoCodec ||
                            e.audioGroupId !== t.audioGroupId ||
                            e.originalAudioId !== t.originalAudioId
                          ) &&
                          (e.audioId === t.audioId ||
                            (e.language === t.language &&
                              e.label === t.label &&
                              e.channelsCount === t.channelsCount &&
                              e.spatialAudio === t.spatialAudio &&
                              e.audioMimeType === t.audioMimeType &&
                              pr(e.audioCodec || "") === pr(t.audioCodec || "") &&
                              ee(e.audioRoles, t.audioRoles)))
                        );
                      })),
                    !n.length)
                  )
                    return [];
                  e = new Map();
                  for (var r = (n = g(n)).next(); !r.done; r = n.next()) {
                    var i = (r = r.value).originalVideoId;
                    (i || null == r.videoId || (i = String(r.videoId)),
                      i &&
                        e.set(i, {
                          active: r.active,
                          bandwidth: r.videoBandwidth || r.bandwidth,
                          width: r.width,
                          height: r.height,
                          frameRate: r.frameRate,
                          pixelAspectRatio: r.pixelAspectRatio,
                          hdr: r.hdr,
                          colorGamut: r.colorGamut,
                          videoLayout: r.videoLayout,
                          mimeType: r.videoMimeType,
                          codecs: r.videoCodec,
                          roles: r.videoRoles || [],
                          label: r.videoLabel,
                        }));
                  }
                  return Array.from(e.values());
                }),
                (i.Dj = function () {
                  return ep(this.qc());
                }),
                (i.$j = function () {
                  return ep(this.Lc());
                }),
                (i.Cj = function () {
                  return Array.from(Zh(this.qc()));
                }),
                (i.Zj = function () {
                  return Array.from(Zh(this.Lc()));
                }),
                (i.Ti = function (e, t, n, r, i, a, o) {
                  var s = this;
                  ((n = void 0 === n ? 0 : n),
                    (r = void 0 === r ? 0 : r),
                    (i = void 0 === i ? "" : i),
                    (a = void 0 !== a && a),
                    (o = void 0 === o ? "" : o),
                    (this.i &&
                      this.G &&
                      ((function () {
                        function u(e, t) {
                          return e.video || t.video
                            ? e.video && t.video
                              ? Math.abs((e.video.height || 0) - (t.video.height || 0)) +
                                Math.abs((e.video.width || 0) - (t.video.width || 0))
                              : 1 / 0
                            : 0;
                        }
                        var l = s.l.o;
                        ((s.J = s.g.adaptationSetCriteriaFactory()),
                          s.J.configure({
                            language: e,
                            role: t || "",
                            videoRole: (l.video && l.video.roles && l.video.roles[0]) || "",
                            channelCount: n || 0,
                            hdrLevel: "",
                            spatialAudio: a || !1,
                            videoLayout: "",
                            audioLabel: o || "",
                            videoLabel: "",
                            codecSwitchingStrategy: s.g.mediaSource.codecSwitchingStrategy,
                            audioCodec: i || "",
                            activeAudioCodec: l.audio && l.audio.codecs ? l.audio.codecs : "",
                            activeAudioChannelCount:
                              l.audio && l.audio.channelsCount ? l.audio.channelsCount : 0,
                            preferredAudioCodecs: s.g.preferredAudioCodecs,
                            preferredAudioChannelCount: s.g.preferredAudioChannelCount,
                          }));
                        for (
                          var d = s.J.create(s.i.variants), c = null, h = (d = g(d.values())).next();
                          !h.done;
                          h = d.next()
                        )
                          si((h = h.value)) && (!c || u(c, l) > u(h, l)) && (c = h);
                        c != l && (c ? ((l = ti(c)), s.Jf(l, !0, r || 0)) : Lh(s));
                      })(),
                      !this.xa())) ||
                      (function () {
                        if (s.h && s.h.audioTracks) {
                          var n = li(s.qc(), e, t || "", !1)[0];
                          n && s.Jf(n);
                        }
                      })());
                }),
                (i.oh = function (e, t, n) {
                  var r,
                    i = this;
                  ((n = void 0 !== n && n),
                    (this.i &&
                      this.G &&
                      ((function () {
                        ((i.Kd = e), (i.Od = t || ""), (i.Nd = n || !1));
                        var r = li(i.i.textStreams, i.Kd, i.Od, i.Nd)[0] || null;
                        r &&
                          r != i.l.B &&
                          (ld(i.B.h, r, !1), i.g.streaming.alwaysStreamText || i.Sg()) &&
                          (pl(i.l, r), Hh(i), Xh(i));
                      })(),
                      !this.xa())) ||
                      ((r = li(i.Lc(), e, t || "", n || !1)[0]) && i.ph(r)));
                }),
                (i.Xk = function (e, t, n) {
                  var r = this;
                  ((t = void 0 === t || t),
                    (n = void 0 === n ? 0 : n),
                    (this.i &&
                      this.G &&
                      ((function () {
                        for (var i = null, a = g(r.i.variants), o = a.next(); !o.done; o = a.next())
                          if ((o = o.value).audio.label == e) {
                            i = o;
                            break;
                          }
                        null != i &&
                          ((r.J = r.g.adaptationSetCriteriaFactory()),
                          r.J.configure({
                            language: i.language,
                            role: "",
                            videoRole: "",
                            channelCount: 0,
                            hdrLevel: "",
                            spatialAudio: !1,
                            videoLayout: "",
                            videoLabel: "",
                            audioLabel: e,
                            codecSwitchingStrategy: r.g.mediaSource.codecSwitchingStrategy,
                            audioCodec: "",
                            activeAudioCodec: "",
                            activeAudioChannelCount: 0,
                            preferredAudioCodecs: r.g.preferredAudioCodecs,
                            preferredAudioChannelCount: r.g.preferredAudioChannelCount,
                          }),
                          Lh(r, t, n));
                      })(),
                      !this.xa())) ||
                      (function () {
                        if (r.h && r.h.audioTracks) {
                          for (
                            var t = Array.from(r.h.audioTracks), n = null, i = (t = g(t)).next();
                            !i.done;
                            i = t.next()
                          )
                            (i = i.value).label == e && (n = i);
                          n && Oh(r, n);
                        }
                      })());
                }),
                (i.Sg = function () {
                  var e = this.$;
                  return this.u ? this.u.isTextVisible() : e;
                }),
                (i.Hj = function () {
                  return this.ob.map(function (e) {
                    return ni(e);
                  });
                }),
                (i.Fj = function (e) {
                  if ((ce("getChapters", "Please use an getChaptersAsync."), !this.ob.length)) return [];
                  var t = Br(e);
                  if (
                    !(e = this.ob.filter(function (e) {
                      return Br(e.language) == t;
                    })).length
                  )
                    return [];
                  for (var n = [], r = new Set(), i = (e = g(e)).next(); !i.done; i = e.next())
                    (i = i.value).segmentIndex &&
                      i.segmentIndex.Fb(function (e) {
                        var t = e.P()[0],
                          i = e.startTime + "-" + e.endTime + "-" + t;
                        ((e = { id: i, title: t, startTime: e.startTime, endTime: e.endTime }),
                          r.has(i) || (n.push(e), r.add(i)));
                      });
                  return n;
                }),
                (i.Gj = function (e) {
                  var t,
                    n,
                    r,
                    i,
                    a,
                    o,
                    s,
                    u = this;
                  return D(function (l) {
                    switch (l.g) {
                      case 1:
                        if (!u.ob.length) return l.return([]);
                        if (
                          ((t = Br(e)),
                          !(n = u.ob.filter(function (e) {
                            return Br(e.language) == t;
                          })).length)
                        )
                          return l.return([]);
                        ((r = []), (i = new Set()), (a = g(n)), (o = a.next()));
                      case 2:
                        if (o.done) {
                          l.A(4);
                          break;
                        }
                        if ((s = o.value).segmentIndex) {
                          l.A(5);
                          break;
                        }
                        return x(l, s.createSegmentIndex(), 5);
                      case 5:
                        (s.segmentIndex.Fb(function (e) {
                          var t = e.P()[0],
                            n = e.startTime + "-" + e.endTime + "-" + t;
                          ((e = { id: n, title: t, startTime: e.startTime, endTime: e.endTime }),
                            i.has(n) || (r.push(e), i.add(n)));
                        }),
                          (o = a.next()),
                          l.A(2));
                        break;
                      case 4:
                        return l.return(r);
                    }
                  });
                }),
                (i.wh = function (e) {
                  ((e = !!e),
                    this.$ != e &&
                      ((this.$ = e),
                      this.m == rp
                        ? (this.u.setTextVisibility(e),
                          this.g.streaming.alwaysStreamText ||
                            (e
                              ? this.l.B ||
                                ((e = li(this.i.textStreams, this.Kd, this.Od, this.Nd)).length > 0 &&
                                  (pl(this.l, e[0]), Hh(this), Xh(this)))
                              : (function (e) {
                                  var t = e.h.get(gt);
                                  (t &&
                                    (Rl(t),
                                    _l(t).catch(function () {}),
                                    (e.H = e.h.get(gt)),
                                    e.h.delete(gt),
                                    t.stream && t.stream.closeSegmentIndex && t.stream.closeSegmentIndex()),
                                    (e.B = null));
                                })(this.l)))
                        : this.h && this.h.src && this.h.textTracks && this.u.setTextVisibility(e),
                      Gh(this)));
                }),
                (i.Tj = function () {
                  if (this.G) var e = this.G.Qd();
                  else {
                    if (null == this.O) return new Date();
                    if (this.O instanceof Date) return this.O;
                    e = this.O;
                  }
                  if (this.i && !this.xa()) {
                    var t = this.i.presentationTimeline;
                    return new Date(1e3 * ((t.m || t.i) + e));
                  }
                  return this.h && this.h.getStartDate
                    ? ((t = this.h.getStartDate()),
                      isNaN(t.getTime()) ? null : new Date(t.getTime() + 1e3 * e))
                    : null;
                }),
                (i.li = function () {
                  if (this.i && !this.xa()) {
                    var e = this.i.presentationTimeline;
                    return null === (e = e.m || e.i) ? null : new Date(1e3 * e);
                  }
                  return this.h && this.h.getStartDate
                    ? ((e = this.h.getStartDate()), isNaN(e.getTime()) ? null : e)
                    : null;
                }),
                (i.df = function () {
                  return this.W() && this.i ? this.i.presentationTimeline.df() : null;
                }),
                (i.Gc = function () {
                  if (this.m == rp) return this.H.Gc();
                  var e = { total: [], audio: [], video: [], text: [] };
                  return (this.m == ip && (e.total = $o(this.h.buffered)), e);
                }),
                (i.getBandwidthEstimate = function () {
                  return this.o ? this.o.getBandwidthEstimate() : NaN;
                }),
                (i.getStats = function () {
                  if (this.m != rp && this.m != ip)
                    return {
                      width: NaN,
                      height: NaN,
                      currentCodecs: "",
                      streamBandwidth: NaN,
                      decodedFrames: NaN,
                      droppedFrames: NaN,
                      corruptedFrames: NaN,
                      stallsDetected: NaN,
                      gapsJumped: NaN,
                      estimatedBandwidth: NaN,
                      completionPercent: NaN,
                      loadLatency: NaN,
                      manifestTimeSeconds: NaN,
                      drmTimeSeconds: NaN,
                      playTime: NaN,
                      pauseTime: NaN,
                      bufferingTime: NaN,
                      licenseTime: NaN,
                      liveLatency: NaN,
                      maxSegmentDuration: NaN,
                      manifestSizeBytes: NaN,
                      bytesDownloaded: NaN,
                      nonFatalErrorCount: NaN,
                      manifestPeriodCount: NaN,
                      manifestGapCount: NaN,
                      switchHistory: [],
                      stateHistory: [],
                    };
                  Mh(this);
                  var e = this.h,
                    t = e.currentTime / e.duration;
                  if (
                    (isNaN(t) ||
                      this.W() ||
                      (function (e, t) {
                        e.i = isNaN(e.i) ? t : Math.max(e.i, t);
                      })(this.B, Math.round(100 * t)),
                    this.G && ((this.B.T = this.G.Lh()), (this.B.V = this.G.Nh())),
                    e.getVideoPlaybackQuality &&
                      ((t = e.getVideoPlaybackQuality()),
                      (function (e, t, n) {
                        ((e.R = t), (e.O = n));
                      })(this.B, Number(t.droppedVideoFrames), Number(t.totalVideoFrames)),
                      (this.B.N = Number(t.corruptedVideoFrames))),
                    (this.B.o = this.F
                      ? (function (e) {
                          return e.J ? e.J : NaN;
                        })(this.F)
                      : NaN),
                    cd(this.B, e.videoWidth || NaN, e.videoHeight || NaN),
                    (this.B.l = ""),
                    this.W() && null != (e = wh(this)) && (this.B.F = e / 1e3),
                    (t = this.qc().find(function (e) {
                      return e.active;
                    })),
                    (e = this.Lc().find(function (e) {
                      return e.active;
                    })),
                    t)
                  ) {
                    if (t.bandwidth) {
                      var n = this.M ? this.M.i : 1,
                        r = n * t.bandwidth;
                      (e && e.bandwidth && (r += n * e.bandwidth), (this.B.B = r));
                    }
                    (t.width && t.height && cd(this.B, t.width || NaN, t.height || NaN),
                      (t = t.codecs),
                      e && (t += "," + (e.codecs || e.mimeType)),
                      t && (this.B.l = t));
                  }
                  return (
                    this.m != rp ||
                      this.xa() ||
                      (this.i &&
                        ((this.B.I = this.i.periodCount),
                        (this.B.H = this.i.gapCount),
                        this.i.presentationTimeline && (this.B.K = this.i.presentationTimeline.h)),
                      (e = this.o.getBandwidthEstimate()),
                      (this.B.u = e)),
                    this.m == ip && hd(this.B, NaN),
                    pd(this.B)
                  );
                }),
                (i.Rd = function (e, t, n, r, i, a, o) {
                  o = void 0 !== o && o;
                  var s,
                    u,
                    l,
                    d,
                    c,
                    h,
                    p,
                    f,
                    g,
                    m,
                    v = this;
                  return D(function (y) {
                    switch (y.g) {
                      case 1:
                        if (v.m != rp && v.m != ip) throw new Ke(1, 7, 7004);
                        if (
                          ("subtitles" != n &&
                            "captions" != n &&
                            K(
                              "Using a kind value different of `subtitles` or `captions` can cause unwanted issues.",
                            ),
                          r)
                        ) {
                          y.A(2);
                          break;
                        }
                        return x(y, Sh(v, e), 3);
                      case 3:
                        r = y.h;
                      case 2:
                        if (((s = []), v.C && (s = v.C.getCuePoints()), v.m != ip)) {
                          y.A(4);
                          break;
                        }
                        return (
                          (u = oe()),
                          o && "WEBKIT" === u.Ha() && (n = "forced"),
                          x(
                            y,
                            (function (e, t, n, r, i, a, o) {
                              var s, u, l, d;
                              return D(function (c) {
                                if (1 == c.g) return "text/vtt" != i || o.length ? x(c, Ah(e, t), 3) : c.A(2);
                                (2 != c.g &&
                                  ((s = c.h),
                                  (u = Eh(e, s, i, o)),
                                  (l = new Blob([u], { type: "text/vtt" })),
                                  (t = ru(l)),
                                  (i = "text/vtt")),
                                  (d = document.createElement("track")));
                                e: {
                                  var h = e.K,
                                    p = t;
                                  try {
                                    if (!h.g.enabled) {
                                      var f = p;
                                      break e;
                                    }
                                    var g = nc(h);
                                    ((g.ot = xc), (g.su = !0), (f = fc(p, hc(g))));
                                    break e;
                                  } catch (m) {
                                    (q(
                                      "CMCD_TEXT_TRACK_ERROR",
                                      "Could not generate text track CMCD data.",
                                      m,
                                    ),
                                      (f = p));
                                    break e;
                                  }
                                  f = void 0;
                                }
                                return (
                                  (d.src = f),
                                  (d.label = a),
                                  (d.kind = r),
                                  (d.srclang = n),
                                  e.h.getAttribute("crossorigin") ||
                                    e.h.setAttribute("crossorigin", "anonymous"),
                                  e.h.appendChild(d),
                                  e.cg.push(d),
                                  c.return(d)
                                );
                              });
                            })(v, e, t, n, r, a || "", s),
                            5,
                          )
                        );
                      case 5:
                        if ((l = y.h).track) return (Bh(v), Hh(v), y.return(ai(l.track)));
                        throw new Ke(1, 2, 2012);
                      case 4:
                        if (
                          ((d = mt),
                          (c = v.Ra()),
                          (h = c.end - c.start),
                          v.i && (h = v.i.presentationTimeline.getDuration()),
                          h == 1 / 0)
                        )
                          throw new Ke(1, 4, 4033);
                        if (!s.length) {
                          y.A(6);
                          break;
                        }
                        return x(y, Ah(v, e), 7);
                      case 7:
                        ((p = y.h),
                          (f = Eh(v, p, r, s)),
                          (g = new Blob([f], { type: "text/vtt" })),
                          (e = ru(g)),
                          (r = "text/vtt"));
                      case 6:
                        if (
                          ((m = {
                            id: v.Fe++,
                            originalId: null,
                            groupId: null,
                            createSegmentIndex: function () {
                              return Promise.resolve();
                            },
                            segmentIndex: Pu(0, h, [e]),
                            mimeType: r || "",
                            codecs: i || "",
                            kind: n,
                            encrypted: !1,
                            drmInfos: [],
                            keyIds: new Set(),
                            language: t,
                            originalLanguage: t,
                            label: a || null,
                            type: d.Na,
                            primary: !1,
                            trickModeVideo: null,
                            dependencyStream: null,
                            emsgSchemeIdUris: null,
                            roles: [],
                            forced: !!o,
                            channelsCount: null,
                            audioSamplingRate: null,
                            spatialAudio: !1,
                            closedCaptions: null,
                            accessibilityPurpose: null,
                            external: !0,
                            fastSwitching: !1,
                            fullMimeTypes: new Set([lr(r || "", i || "")]),
                            isAudioMuxedInVideo: !1,
                            baseOriginalId: null,
                          }),
                          !Sr(lr(m.mimeType, m.codecs)))
                        )
                          throw new Ke(2, 2, 2014, r);
                        return (v.i.textStreams.push(m), Bh(v), Hh(v), y.return(ni(m)));
                    }
                  });
                }),
                (i.Pe = function (e, t) {
                  var n,
                    r,
                    i,
                    a,
                    o,
                    s,
                    u,
                    l,
                    d,
                    c,
                    h,
                    p,
                    f,
                    m,
                    v,
                    y,
                    b,
                    T,
                    w = this;
                  return D(function (S) {
                    switch (S.g) {
                      case 1:
                        if (w.m != rp && w.m != ip) throw new Ke(1, 7, 7004);
                        if (t) {
                          S.A(2);
                          break;
                        }
                        return x(S, Sh(w, e), 3);
                      case 3:
                        t = S.h;
                      case 2:
                        if ("text/vtt" != t) throw new Ke(1, 2, 2017, e);
                        if (
                          ((n = mt),
                          (r = w.Ra()),
                          (i = r.end - r.start),
                          w.i && (i = w.i.presentationTimeline.getDuration()),
                          i == 1 / 0)
                        )
                          throw new Ke(1, 4, 4045);
                        return x(S, Ah(w, e), 4);
                      case 4:
                        if (((a = S.h), !(o = wr(t)))) throw new Ke(2, 2, 2014, t);
                        for (
                          s = o(),
                            u = { periodStart: 0, segmentStart: 0, segmentEnd: i, vttOffset: 0 },
                            l = Ne(a),
                            d = s.parseMedia(l, u, e, []),
                            c = [],
                            h = g(d),
                            p = h.next(),
                            f = {};
                          !p.done;
                          f = { Wf: void 0, nd: void 0 }, p = h.next()
                        )
                          ((f.nd = p.value),
                            (f.Wf = null),
                            (m = (function (t) {
                              return function () {
                                return (null == t.Wf && (t.Wf = lt([e], [t.nd.payload])), t.Wf || []);
                              };
                            })(f)),
                            (v = new Fo(f.nd.startTime, f.nd.endTime, m, 0, null, null, 0, 0, 1 / 0)),
                            f.nd.payload.includes("#xywh") &&
                              4 === (y = f.nd.payload.split("#xywh=")[1].split(",")).length &&
                              v.Mf({
                                height: parseInt(y[3], 10),
                                positionX: parseInt(y[0], 10),
                                positionY: parseInt(y[1], 10),
                                width: parseInt(y[2], 10),
                              }),
                            c.push(v));
                        if (((b = t), !c.length)) {
                          S.A(5);
                          break;
                        }
                        return x(S, Sh(w, c[0].P()[0]), 6);
                      case 6:
                        b = S.h;
                      case 5:
                        return (
                          (T = {
                            id: w.Fe++,
                            originalId: null,
                            groupId: null,
                            createSegmentIndex: function () {
                              return Promise.resolve();
                            },
                            segmentIndex: new _u(c),
                            mimeType: b || "",
                            codecs: "",
                            kind: "",
                            encrypted: !1,
                            drmInfos: [],
                            keyIds: new Set(),
                            language: "und",
                            originalLanguage: null,
                            label: null,
                            type: n.Yf,
                            primary: !1,
                            trickModeVideo: null,
                            dependencyStream: null,
                            emsgSchemeIdUris: null,
                            roles: [],
                            forced: !1,
                            channelsCount: null,
                            audioSamplingRate: null,
                            spatialAudio: !1,
                            closedCaptions: null,
                            tilesLayout: "1x1",
                            accessibilityPurpose: null,
                            external: !0,
                            fastSwitching: !1,
                            fullMimeTypes: new Set([lr(b || "", "")]),
                            isAudioMuxedInVideo: !1,
                            baseOriginalId: null,
                          }),
                          w.m == ip ? w.Ke.push(T) : w.i.imageStreams.push(T),
                          Bh(w),
                          S.return(ri(T))
                        );
                    }
                  });
                }),
                (i.Oe = function (e, t, n) {
                  var r,
                    i,
                    a,
                    o,
                    s,
                    u,
                    l,
                    d,
                    c,
                    h,
                    p,
                    f,
                    m,
                    v,
                    y,
                    b = this;
                  return D(function (T) {
                    switch (T.g) {
                      case 1:
                        if (b.m != rp && b.m != ip) throw new Ke(1, 7, 7004);
                        if (n) {
                          T.A(2);
                          break;
                        }
                        return x(T, Sh(b, e), 3);
                      case 3:
                        n = T.h;
                      case 2:
                        if (
                          ((r = mt),
                          (i = b.Ra()),
                          (a = i.end - i.start),
                          b.i && (a = b.i.presentationTimeline.getDuration()),
                          a == 1 / 0)
                        )
                          throw new Ke(1, 4, 4055);
                        if (!(o = wr(n))) throw new Ke(2, 2, 2014, n);
                        return x(T, Ah(b, e), 4);
                      case 4:
                        for (
                          s = T.h,
                            u = o(),
                            l = { periodStart: 0, segmentStart: 0, segmentEnd: a, vttOffset: 0 },
                            d = Ne(s),
                            c = u.parseMedia(d, l, e, []),
                            h = [],
                            p = g(c),
                            f = p.next(),
                            m = {};
                          !f.done;
                          m = { Xe: void 0 }, f = p.next()
                        )
                          ((m.Xe = f.value),
                            (v = new Fo(
                              m.Xe.startTime,
                              m.Xe.endTime,
                              (function (e) {
                                return function () {
                                  return [e.Xe.payload];
                                };
                              })(m),
                              0,
                              null,
                              null,
                              0,
                              0,
                              1 / 0,
                            )),
                            h.push(v));
                        return (
                          (y = {
                            id: b.Fe++,
                            originalId: null,
                            groupId: null,
                            createSegmentIndex: function () {
                              return Promise.resolve();
                            },
                            segmentIndex: new _u(h),
                            mimeType: "text/plain",
                            codecs: "",
                            kind: "",
                            encrypted: !1,
                            drmInfos: [],
                            keyIds: new Set(),
                            language: t,
                            originalLanguage: t,
                            label: null,
                            type: r.Na,
                            primary: !1,
                            trickModeVideo: null,
                            dependencyStream: null,
                            emsgSchemeIdUris: null,
                            roles: [],
                            forced: !1,
                            channelsCount: null,
                            audioSamplingRate: null,
                            spatialAudio: !1,
                            closedCaptions: null,
                            accessibilityPurpose: null,
                            external: !0,
                            fastSwitching: !1,
                            fullMimeTypes: new Set([lr("text/plain", "")]),
                            isAudioMuxedInVideo: !1,
                            baseOriginalId: null,
                          }),
                          b.ob.push(y),
                          Bh(b),
                          T.return(ni(y))
                        );
                    }
                  });
                }),
                (i.fl = function (e, t) {
                  ((this.ya.width = e), (this.ya.height = t));
                }),
                (i.kh = function (e) {
                  if (this.m == rp) {
                    var t = this.l;
                    if (((e = void 0 === e ? 0.1 : e), t.l.g)) t = !1;
                    else if (t.F) t = !1;
                    else {
                      for (var n = g(t.h.values()), r = n.next(); !r.done; r = n.next())
                        !(r = r.value).ce || r.Ka || r.qb || ((r.ce = !1), Ml(t, r, e));
                      t = !0;
                    }
                  } else t = !1;
                  return t;
                }),
                (i.Lg = function () {
                  return (
                    K(
                      "Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for.",
                    ),
                    this.i
                  );
                }),
                (i.Qj = function () {
                  return this.zc;
                }),
                (i.Lj = function () {
                  var e = { video: null, audio: null, text: null };
                  if (this.m != rp) return e;
                  for (
                    var t = this.l.o,
                      n = this.h.currentTime,
                      r = (t = g([t.video, t.audio, this.l.B])).next();
                    !r.done;
                    r = t.next()
                  )
                    if ((r = r.value) && r.segmentIndex) {
                      var i = r.segmentIndex.find(n);
                      ((i = {
                        codecs: (i = r.segmentIndex.get(i)).codecs || r.codecs,
                        mimeType: i.mimeType || r.mimeType,
                        bandwidth: i.bandwidth || r.bandwidth,
                      }),
                        "video" == r.type
                          ? ((i.width = r.width), (i.height = r.height), (e.video = i))
                          : "audio" == r.type
                            ? (e.audio = i)
                            : r.type == gt && (e.text = i));
                    }
                  return e;
                }),
                (i.Zi = function (e) {
                  this.Be = e;
                }),
                (i.disableStream = function (e, t) {
                  if (!this.g.abr.enabled || this.m === tp || !navigator.onLine || 0 == t || !this.i)
                    return !1;
                  if (
                    this.i.variants.some(function (t) {
                      var n = t[e.type];
                      return !(
                        !n ||
                        n.id === e.id ||
                        t.disabledUntilTime ||
                        ("audio" == e.type && e.language !== n.language)
                      );
                    })
                  ) {
                    for (var n = !1, r = !1, i = g(this.i.variants), a = i.next(); !a.done; a = i.next()) {
                      var o = (a = a.value)[e.type];
                      o &&
                        (o.id === e.id
                          ? ((a.disabledUntilTime = Date.now() / 1e3 + t), (n = !0))
                          : o.trickModeVideo && o.trickModeVideo.id == e.id && (r = !0));
                    }
                    return !(
                      (!n && r) ||
                      (this.He.Ea(1),
                      (t = this.Gc().video.reduce(function (e, t) {
                        return e + t.end - t.start;
                      }, 0)),
                      Lh(this, !1, t, !0, !1),
                      0)
                    );
                  }
                  return !1;
                }),
                (i.addFont = function (t, n) {
                  return (function (t, n) {
                    var r, i, a, o, s;
                    return D(function (u) {
                      if (1 == u.g)
                        return "fonts" in document && "FontFace" in e
                          ? x(u, document.fonts.ready, 2)
                          : u.return();
                      if (!("entries" in document.fonts)) return u.return();
                      for (
                        r = function (e) {
                          for (var t = [], n = (e = e.entries()).next(); !1 === n.done; )
                            (t.push(n.value), (n = e.next()));
                          return t;
                        },
                          i = g(r(document.fonts)),
                          a = i.next();
                        !a.done;
                        a = i.next()
                      )
                        if ((o = a.value).family === t && "swap" === o.display) return u.return();
                      ((s = new FontFace(t, "url(" + n + ")", { display: "swap" })),
                        document.fonts.add(s),
                        T(u));
                    });
                  })(t, n);
                }),
                (i.xa = function () {
                  return !(!this.h || !this.h.remote) && "disconnected" != this.h.remote.state;
                }),
                (i.ge = function () {
                  return (
                    !(this.h && !this.h.ended) ||
                    (this.Ua && !this.W() && this.h.currentTime >= this.Ra().end)
                  );
                }),
                V("shaka.Player", Jc),
                (Jc.prototype.isEnded = Jc.prototype.ge),
                (Jc.prototype.isRemotePlayback = Jc.prototype.xa),
                (Jc.prototype.addFont = Jc.prototype.addFont),
                (Jc.prototype.setVideoContainer = Jc.prototype.Zi),
                (Jc.prototype.getFetchedPlaybackInfo = Jc.prototype.Lj),
                (Jc.prototype.getManifestParserFactory = Jc.prototype.Qj),
                (Jc.prototype.getManifest = Jc.prototype.Lg),
                (Jc.prototype.retryStreaming = Jc.prototype.kh),
                (Jc.prototype.setMaxHardwareResolution = Jc.prototype.fl),
                (Jc.prototype.addChaptersTrack = Jc.prototype.Oe),
                (Jc.prototype.addThumbnailsTrack = Jc.prototype.Pe),
                (Jc.prototype.addTextTrackAsync = Jc.prototype.Rd),
                (Jc.prototype.getStats = Jc.prototype.getStats),
                (Jc.prototype.getBufferedInfo = Jc.prototype.Gc),
                (Jc.prototype.getSegmentAvailabilityDuration = Jc.prototype.df),
                (Jc.prototype.getPresentationStartTimeAsDate = Jc.prototype.li),
                (Jc.prototype.getPlayheadTimeAsDate = Jc.prototype.Tj),
                (Jc.prototype.setTextTrackVisibility = Jc.prototype.wh),
                (Jc.prototype.getChaptersAsync = Jc.prototype.Gj),
                (Jc.prototype.getChapters = Jc.prototype.Fj),
                (Jc.prototype.getChaptersTracks = Jc.prototype.Hj),
                (Jc.prototype.isTextTrackVisible = Jc.prototype.Sg),
                (Jc.prototype.selectVariantsByLabel = Jc.prototype.Xk),
                (Jc.prototype.selectTextLanguage = Jc.prototype.oh),
                (Jc.prototype.selectAudioLanguage = Jc.prototype.Ti),
                (Jc.prototype.getTextLanguages = Jc.prototype.Zj),
                (Jc.prototype.getAudioLanguages = Jc.prototype.Cj),
                (Jc.prototype.getTextLanguagesAndRoles = Jc.prototype.$j),
                (Jc.prototype.getAudioLanguagesAndRoles = Jc.prototype.Dj),
                (Jc.prototype.getVideoTracks = Jc.prototype.getVideoTracks),
                (Jc.prototype.selectVideoTrack = Jc.prototype.Yk),
                (Jc.prototype.getAudioTracks = Jc.prototype.getAudioTracks),
                (Jc.prototype.selectAudioTrack = Jc.prototype.Wk),
                (Jc.prototype.selectVariantTrack = Jc.prototype.Jf),
                (Jc.prototype.selectTextTrack = Jc.prototype.ph),
                (Jc.prototype.getThumbnails = Jc.prototype.ck),
                (Jc.prototype.getAllThumbnails = Jc.prototype.Bj),
                (Jc.prototype.getImageTracks = Jc.prototype.Nj),
                (Jc.prototype.getTextTracks = Jc.prototype.Lc),
                (Jc.prototype.getVariantTracks = Jc.prototype.qc),
                (Jc.prototype.cancelTrickPlay = Jc.prototype.Sd),
                (Jc.prototype.trickPlay = Jc.prototype.xe),
                (Jc.prototype.useTrickPlayTrackIfAvailable = Jc.prototype.Kh),
                (Jc.prototype.getPlaybackRate = Jc.prototype.Ob),
                (Jc.prototype.isBuffering = Jc.prototype.Rg),
                (Jc.prototype.getKeyStatuses = Jc.prototype.$e),
                (Jc.prototype.getActiveSessionsMetadata = Jc.prototype.Kg),
                (Jc.prototype.getExpiration = Jc.prototype.Zd),
                (Jc.prototype.drmInfo = Jc.prototype.drmInfo),
                (Jc.prototype.keySystem = Jc.prototype.keySystem),
                (Jc.prototype.isFullyLoaded = Jc.prototype.nk),
                (Jc.prototype.goToLive = Jc.prototype.ik),
                (Jc.prototype.seekRange = Jc.prototype.Ra),
                (Jc.prototype.isVideoOnly = Jc.prototype.ti),
                (Jc.prototype.isAudioOnly = Jc.prototype.lk),
                (Jc.prototype.isInProgress = Jc.prototype.Vc),
                (Jc.prototype.isLive = Jc.prototype.W),
                (Jc.prototype.getQueueManager = Jc.prototype.mi),
                (Jc.prototype.getAdManager = Jc.prototype.di),
                (Jc.prototype.getAssetUri = Jc.prototype.rd),
                (Jc.prototype.getNetworkingEngine = Jc.prototype.Yb),
                (Jc.prototype.getMediaElement = Jc.prototype.bf),
                (Jc.prototype.getManifestType = Jc.prototype.ii),
                (Jc.prototype.getLoadMode = Jc.prototype.$d),
                (Jc.prototype.resetConfiguration = Jc.prototype.Oi),
                (Jc.prototype.getBufferFullness = Jc.prototype.ei),
                (Jc.prototype.getNonDefaultConfiguration = Jc.prototype.ki),
                (Jc.prototype.getConfigurationForLowLatency = Jc.prototype.Ij),
                (Jc.prototype.getConfiguration = Jc.prototype.getConfiguration),
                (Jc.prototype.configurationForLowLatency = Jc.prototype.yj),
                (Jc.prototype.configure = Jc.prototype.configure),
                (Jc.prototype.releaseAllMutexes = Jc.prototype.Ok),
                (Jc.prototype.destroyAllPreloads = Jc.prototype.rg),
                (Jc.prototype.preload = Jc.prototype.preload),
                (Jc.prototype.detachAndSavePreload = Jc.prototype.$h),
                (Jc.prototype.unloadAndSavePreload = Jc.prototype.jj),
                (Jc.prototype.load = Jc.prototype.load),
                (Jc.prototype.updateStartTime = Jc.prototype.ql),
                (Jc.prototype.unload = Jc.prototype.Cc),
                (Jc.prototype.detach = Jc.prototype.detach),
                (Jc.prototype.attachCanvas = Jc.prototype.qj),
                (Jc.prototype.attach = Jc.prototype.Vb),
                (Jc.probeSupport = function (t) {
                  var n, r, i, a, o;
                  return (
                    (t = void 0 === t || t),
                    D(function (s) {
                      switch (s.g) {
                        case 1:
                          if (((n = {}), !t)) {
                            s.A(2);
                            break;
                          }
                          return x(
                            s,
                            (function () {
                              var t,
                                n,
                                r,
                                i,
                                a,
                                o,
                                s,
                                u,
                                l,
                                d,
                                c,
                                h,
                                p,
                                f,
                                m,
                                v,
                                y,
                                b,
                                S,
                                k,
                                I,
                                C,
                                M,
                                R,
                                _,
                                P;
                              return D(function (L) {
                                if (1 == L.g) {
                                  if (
                                    ((t =
                                      "org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(
                                        " ",
                                      )),
                                    !(
                                      e.MediaKeys &&
                                      e.navigator &&
                                      e.navigator.requestMediaKeySystemAccess &&
                                      e.MediaKeySystemAccess &&
                                      e.MediaKeySystemAccess.prototype.getConfiguration
                                    ))
                                  ) {
                                    for (n = {}, r = g(t), i = r.next(); !i.done; i = r.next())
                                      ((a = i.value), (n[a] = null));
                                    return L.return(n);
                                  }
                                  for (
                                    o = "1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),
                                      u = {
                                        "com.widevine.alpha": (s = [
                                          "SW_SECURE_CRYPTO",
                                          "SW_SECURE_DECODE",
                                          "HW_SECURE_CRYPTO",
                                          "HW_SECURE_DECODE",
                                          "HW_SECURE_ALL",
                                        ]),
                                        "com.widevine.alpha.experiment": s,
                                        "com.microsoft.playready.recommendation": ["150", "2000", "3000"],
                                      },
                                      l = {
                                        videoCapabilities: [
                                          { contentType: 'video/mp4; codecs="avc1.42E01E"' },
                                          { contentType: 'video/webm; codecs="vp8"' },
                                        ],
                                        audioCapabilities: [
                                          { contentType: 'audio/mp4; codecs="mp4a.40.2"' },
                                          { contentType: 'audio/webm; codecs="opus"' },
                                        ],
                                        initDataTypes: ["cenc", "sinf", "skd", "keyids"],
                                      },
                                      d = [null, "cenc", "cbcs"],
                                      c = new Map(),
                                      h = oe(),
                                      p = function (e, t, n) {
                                        var r, i, a, s, u, l, d, p, f, m, v, y;
                                        return D(function (b) {
                                          switch (b.g) {
                                            case 1:
                                              return (w(b, 2), x(b, t.createMediaKeys(), 5));
                                            case 5:
                                              r = b.h;
                                            case 4:
                                              A(b, 3);
                                              break;
                                            case 2:
                                              return (E(b), b.return());
                                            case 3:
                                              if (
                                                ((a =
                                                  !!(i = t.getConfiguration().sessionTypes) &&
                                                  i.includes("persistent-license")),
                                                h.Ci() && (a = !1),
                                                (s = t.getConfiguration().videoCapabilities),
                                                (u = t.getConfiguration().audioCapabilities),
                                                (l = {
                                                  persistentState: a,
                                                  encryptionSchemes: [],
                                                  videoRobustnessLevels: [],
                                                  audioRobustnessLevels: [],
                                                  minHdcpVersions: [],
                                                }),
                                                c.get(e) ? (l = c.get(e)) : c.set(e, l),
                                                (d = s[0].encryptionScheme) &&
                                                  !l.encryptionSchemes.includes(d) &&
                                                  l.encryptionSchemes.push(d),
                                                (p = s[0].robustness) &&
                                                  !l.videoRobustnessLevels.includes(p) &&
                                                  l.videoRobustnessLevels.push(p),
                                                (f = u[0].robustness) &&
                                                  !l.audioRobustnessLevels.includes(f) &&
                                                  l.audioRobustnessLevels.push(f),
                                                !n || !("getStatusForPolicy" in r))
                                              ) {
                                                b.A(0);
                                                break;
                                              }
                                              ((m = g(o)), (v = m.next()));
                                            case 7:
                                              if (v.done) {
                                                b.A(0);
                                                break;
                                              }
                                              if (((y = v.value), l.minHdcpVersions.includes(y))) {
                                                b.A(8);
                                                break;
                                              }
                                              return x(b, r.getStatusForPolicy({ minHdcpVersion: y }), 10);
                                            case 10:
                                              if ("usable" != b.h) {
                                                b.A(0);
                                                break;
                                              }
                                              l.minHdcpVersions.includes(y) || l.minHdcpVersions.push(y);
                                            case 8:
                                              ((v = m.next()), b.A(7));
                                          }
                                        });
                                      },
                                      f = function (e, t, n, r, i) {
                                        var a, o, s, u, d, c, h, f, m, v;
                                        return (
                                          (i = void 0 !== i && i),
                                          D(function (y) {
                                            switch (y.g) {
                                              case 1:
                                                for (
                                                  w(y, 2),
                                                    a = Wt(l),
                                                    o = g(a.videoCapabilities),
                                                    s = o.next();
                                                  !s.done;
                                                  s = o.next()
                                                )
                                                  (((u = s.value).encryptionScheme = t), (u.robustness = n));
                                                for (
                                                  d = g(a.audioCapabilities), c = d.next();
                                                  !c.done;
                                                  c = d.next()
                                                )
                                                  (((h = c.value).encryptionScheme = t), (h.robustness = r));
                                                return (
                                                  ((f = Wt(a)).persistentState = "required"),
                                                  (f.sessionTypes = ["persistent-license"]),
                                                  (m = [f, a]),
                                                  "MOBILE" == oe().Oa()
                                                    ? x(
                                                        y,
                                                        Pr(5, navigator.requestMediaKeySystemAccess(e, m)),
                                                        7,
                                                      )
                                                    : x(y, navigator.requestMediaKeySystemAccess(e, m), 6)
                                                );
                                              case 6:
                                                ((v = y.h), y.A(5));
                                                break;
                                              case 7:
                                                v = y.h;
                                              case 5:
                                                return x(y, p(e, v, i), 8);
                                              case 8:
                                                A(y, 0);
                                                break;
                                              case 2:
                                                (E(y), T(y));
                                            }
                                          })
                                        );
                                      },
                                      m = function (e) {
                                        return "WEBKIT" !== oe().Ha() || "org.w3.clearkey" !== e;
                                      },
                                      v = [],
                                      y = g(t),
                                      b = y.next();
                                    !b.done;
                                    b = y.next()
                                  )
                                    if (((S = b.value), c.set(S, null), m(S))) {
                                      for (k = !0, I = g(d), C = I.next(); !C.done; C = I.next())
                                        ((M = C.value), v.push(f(S, M, "", "", k)), (k = !1));
                                      for (R = g(u[S] || []), _ = R.next(); !_.done; _ = R.next())
                                        ((P = _.value), v.push(f(S, null, P, "")), v.push(f(S, null, "", P)));
                                    }
                                  return x(L, Promise.all(v), 2);
                                }
                                return L.return(ta(c));
                              });
                            })(),
                            3,
                          );
                        case 3:
                          n = s.h;
                        case 2:
                          return (
                            (r = (function () {
                              var e = {};
                              if ((oe(), Jv()))
                                for (var t = g(kt.keys()), n = t.next(); !n.done; n = t.next())
                                  e[n.value] = !0;
                              for (
                                n = (t = g([
                                  "application/dash+xml",
                                  "application/x-mpegurl",
                                  "application/vnd.apple.mpegurl",
                                  "application/vnd.ms-sstr+xml",
                                ])).next();
                                !n.done;
                                n = t.next()
                              )
                                e[(n = n.value)] = Jv() ? kt.has(n) : "" != ts().canPlayType(n);
                              return e;
                            })()),
                            (i = (function () {
                              var e =
                                  'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.20000000.L153.B0",video/mp4; codecs="hvc1.2.4.L120.b0",video/mp4; codecs="hvc1.2.4.L123.b0",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="av01.0.31M.10.0.111.09.16.09.0",video/mp4; codecs="av01.0.31M.10.0.112.09.18.09.0",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.08.01",video/mp4; codecs="dav1.10.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.03",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",audio/mp4; codecs="apac.31.00",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'
                                    .split(",")
                                    .concat(m(br)),
                                t = {};
                              oe();
                              for (var n = (e = g(e)).next(); !n.done; n = e.next()) {
                                if (Sr((n = n.value))) t[n] = !0;
                                else if (Jv()) {
                                  var r = gr(n);
                                  ((r = lr(r, Zr(mr(n), r))), (t[n] = Qa(r) || !!nr(r)));
                                } else t[n] = "" != ts().canPlayType(n);
                                t[(r = n.split(";")[0])] = t[r] || t[n];
                              }
                              return t;
                            })()),
                            x(s, oe().lc(), 4)
                          );
                        case 4:
                          return (
                            (a = s.h),
                            (o = { manifest: r, media: i, drm: n, hardwareResolution: a }),
                            op.forEach(function (e, t) {
                              o[t] = e();
                            }),
                            s.return(o)
                          );
                      }
                    })
                  );
                }),
                (Jc.isBrowserSupported = function () {
                  return (
                    e.Promise || K("A Promise implementation or polyfill is required"),
                    !(
                      !(e.Promise && e.Uint8Array && Array.prototype.forEach) ||
                      (navigator.userAgent || "").includes("Trident/") ||
                      (oe(), !Jv() && "" == ts().canPlayType("application/x-mpegurl"))
                    )
                  );
                }),
                (Jc.setQueueManagerFactory = function (e) {
                  up = e;
                }),
                (Jc.setAdManagerFactory = function (e) {
                  sp = e;
                }),
                (Jc.registerSupportPlugin = eh),
                (Jc.prototype.destroy = Jc.prototype.destroy));
              var tp = 0,
                np = 1,
                rp = 2,
                ip = 3;
              ((Jc.LoadMode = { DESTROYED: tp, NOT_LOADED: np, MEDIA_SOURCE: rp, SRC_EQUALS: ip }),
                (Jc.version = "v4.16.12"));
              var ap = ["4", "16"];
              fe = new (function (e) {
                ((this.g = e), (this.i = he), (this.h = pe));
              })(new de(Number(ap[0]), Number(ap[1])));
              var op = new Map(),
                sp = null,
                up = null;
              function lp() {
                ((this.g = []), (this.i = this.m = this.l = this.j = this.h = 0));
              }
              function dp(e) {
                return e.g.length
                  ? e.g.reduce(function (e, t) {
                      return e + t;
                    }, 0) / e.g.length
                  : 0;
              }
              function cp(e, t, n) {
                var r = this;
                ((this.g = e),
                  (this.h = t),
                  (this.m = n),
                  (this.i = !1),
                  (this.j = this.h.getVolume()),
                  (this.l = new ne()),
                  this.l.D(this.h, google.ima.AdEvent.Type.PAUSED, function () {
                    r.i = !0;
                  }),
                  this.l.D(this.h, google.ima.AdEvent.Type.RESUMED, function () {
                    r.i = !1;
                  }));
              }
              function hp() {}
              function pp(e, t) {
                for (var n = [], r = (e = g(en(e, "Ad"))).next(); !r.done; r = e.next())
                  if ((r = an(r.value, "InLine")) && (r = an(r, "Creatives")))
                    for (var i = (r = g(en(r, "Creative"))).next(); !i.done; i = r.next()) {
                      var a = an((i = i.value), "Linear");
                      if ((a && fp(n, t, a), (i = an(i, "NonLinearAds"))))
                        for (var o = (i = g((i = en(i, "NonLinear")))).next(); !o.done; o = i.next())
                          e: {
                            a = n;
                            var s = t,
                              u = o.value,
                              l = an(u, "StaticResource");
                            if (l) o = l.attributes.creativeType;
                            else {
                              if (!(l = an(u, "HTMLResource"))) break e;
                              o = "text/html";
                            }
                            if ((l = nn(l))) {
                              "text/html" === o &&
                                (l = "data:text/html;charset=UTF-8," + encodeURIComponent(l));
                              var d = sn(u, "width", fn) || sn(u, "expandedWidth", fn),
                                c = sn(u, "height", fn) || sn(u, "expandedHeight", fn);
                              if (d || c) {
                                var h = null,
                                  p = an(u, "NonLinearClickThrough");
                                (p && (p = nn(p)) && (h = p),
                                  (p = null),
                                  (u = u.attributes.minSuggestedDuration) && (p = Gt(u)),
                                  (u = 0),
                                  null != s && (u = s),
                                  a.push({
                                    id: null,
                                    groupId: null,
                                    startTime: u,
                                    endTime: null,
                                    uri: l,
                                    mimeType: o,
                                    isSkippable: !1,
                                    skipOffset: null,
                                    skipFor: null,
                                    canJump: !1,
                                    resumeOffset: 0,
                                    playoutLimit: p,
                                    once: !0,
                                    pre: null == s,
                                    post: s == 1 / 0,
                                    timelineRange: !1,
                                    loop: !1,
                                    overlay: {
                                      viewport: { x: 0, y: 0 },
                                      topLeft: { x: 0, y: 0 },
                                      size: { x: d || 0, y: c || 0 },
                                    },
                                    displayOnBackground: !1,
                                    currentVideo: null,
                                    background: null,
                                    clickThroughUrl: h,
                                  }));
                              }
                            }
                          }
                    }
                return n;
              }
              function fp(e, t, n) {
                var r = 0;
                null != t && (r = t);
                var i = null;
                n.attributes.skipoffset && ((i = Gt(n.attributes.skipoffset)), isNaN(i) && (i = null));
                var a = an(n, "MediaFiles");
                if (a) {
                  var o = null;
                  for (
                    (n = an(n, "VideoClicks")) && (n = an(n, "ClickThrough")) && (n = nn(n)) && (o = n),
                      a = n = en(a, "MediaFile"),
                      n = n.filter(function (e) {
                        return "streaming" == e.attributes.delivery;
                      }),
                      n.length && (a = n),
                      a = a.sort(function (e, t) {
                        return (
                          (parseInt(t.attributes.height, 10) || 0) - (parseInt(e.attributes.height, 10) || 0)
                        );
                      }),
                      n = (a = g(a)).next();
                    !n.done;
                    n = a.next()
                  )
                    if (!(n = n.value).attributes.apiFramework) {
                      var s = nn(n);
                      if (s) {
                        e.push({
                          id: null,
                          groupId: null,
                          startTime: r,
                          endTime: null,
                          uri: s,
                          mimeType: n.attributes.type || null,
                          isSkippable: null != i,
                          skipOffset: i,
                          skipFor: null,
                          canJump: !1,
                          resumeOffset: 0,
                          playoutLimit: null,
                          once: !0,
                          pre: null == t,
                          post: t == 1 / 0,
                          timelineRange: !1,
                          loop: !1,
                          overlay: null,
                          displayOnBackground: !1,
                          currentVideo: null,
                          background: null,
                          clickThroughUrl: o,
                        });
                        break;
                      }
                    }
                }
              }
              function gp(t, n, r, i, a) {
                var o = this;
                ((this.u = t),
                  (this.i = n),
                  (this.G = !1),
                  (this.B = this.o = null),
                  (this.H = NaN),
                  (this.l = a),
                  (this.j = null),
                  (this.h = new ne()),
                  google.ima.settings.setLocale(r),
                  google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),
                  (this.F = new google.ima.AdDisplayContainer(this.u, this.i)),
                  this.F.initialize(),
                  (this.m = new google.ima.AdsLoader(this.F)),
                  this.m.getSettings().setPlayerType("shaka-player"),
                  this.m.getSettings().setPlayerVersion("v4.16.12"),
                  (this.g = null),
                  (this.C = i || new google.ima.AdsRenderingSettings()),
                  this.h.D(this.m, google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, function (t) {
                    !(function (t, n) {
                      if (
                        (t.l(new Li("ads-loaded", new Map().set("loadTime", Date.now() / 1e3 - t.H))),
                        t.o.customPlayheadTracker)
                      ) {
                        var r = { currentTime: t.i.currentTime };
                        ((t.g = n.getAdsManager(r, t.C)),
                          t.i.muted ? t.g.setVolume(0) : t.g.setVolume(t.i.volume),
                          t.h.D(t.i, "timeupdate", function () {
                            t.i.duration && (r.currentTime = t.i.currentTime);
                          }),
                          t.h.D(t.i, "volumechange", function () {
                            t.j && (t.j.setVolume(t.i.volume), t.i.muted && t.j.setMuted(!0));
                          }));
                      } else t.g = n.getAdsManager(t.i, t.C);
                      t.l(new Li("ima-ad-manager-loaded", new Map().set("imaAdManager", t.g)));
                      var i = t.g.getCuePoints();
                      if (i.length) {
                        n = [];
                        for (var a = (i = g(i)).next(); !a.done; a = i.next())
                          n.push({ start: a.value, end: null });
                        t.l(new Li("ad-cue-points-changed", new Map().set("cuepoints", n)));
                      }
                      !(function (e) {
                        function t(t, n) {
                          ((t = new Map().set("originalEvent", t)), e.l(new Li(n, t)));
                        }
                        (e.h.D(e.g, google.ima.AdErrorEvent.Type.AD_ERROR, function (t) {
                          mp(e, t);
                        }),
                          e.h.D(e.g, google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED, function (t) {
                            vp(e, t);
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.STARTED, function (t) {
                            vp(e, t);
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.FIRST_QUARTILE, function (e) {
                            t(e, "ad-first-quartile");
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.MIDPOINT, function (e) {
                            t(e, "ad-midpoint");
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.THIRD_QUARTILE, function (e) {
                            t(e, "ad-third-quartile");
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.COMPLETE, function (e) {
                            t(e, "ad-complete");
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, function (t) {
                            yp(e, t);
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.ALL_ADS_COMPLETED, function (n) {
                            (t(n, "all-ads-completed"), yp(e, n));
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.SKIPPED, function (e) {
                            t(e, "ad-skipped");
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.VOLUME_CHANGED, function (e) {
                            t(e, "ad-volume-changed");
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.VOLUME_MUTED, function (e) {
                            t(e, "ad-muted");
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.PAUSED, function (n) {
                            e.j && ((e.j.i = !0), t(n, "ad-paused"));
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.RESUMED, function (n) {
                            e.j && ((e.j.i = !1), t(n, "ad-resumed"));
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED, function (n) {
                            e.j && t(n, "ad-skip-state-changed");
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.CLICK, function (e) {
                            t(e, "ad-clicked");
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.AD_PROGRESS, function (e) {
                            t(e, "ad-progress");
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.AD_BUFFERING, function (e) {
                            t(e, "ad-buffering");
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.IMPRESSION, function (e) {
                            t(e, "ad-impression");
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.DURATION_CHANGE, function (e) {
                            t(e, "ad-duration-changed");
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.USER_CLOSE, function (e) {
                            t(e, "ad-closed");
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.LOADED, function (e) {
                            t(e, "ad-loaded");
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.LINEAR_CHANGED, function (e) {
                            t(e, "ad-linear-changed");
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.AD_METADATA, function (e) {
                            t(e, "ad-metadata");
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.LOG, function (e) {
                            t(e, "ad-recoverable-error");
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.AD_BREAK_READY, function (e) {
                            t(e, "ad-break-ready");
                          }),
                          e.h.D(e.g, google.ima.AdEvent.Type.INTERACTION, function (e) {
                            t(e, "ad-interaction");
                          }));
                      })(t);
                      try {
                        (t.g.init(t.i.offsetWidth, t.i.offsetHeight),
                          t.h.D(t.i, "loadeddata", function () {
                            t.g.resize(t.i.offsetWidth, t.i.offsetHeight);
                          }),
                          "ResizeObserver" in e
                            ? ((t.B = new ResizeObserver(function () {
                                t.g.resize(t.i.offsetWidth, t.i.offsetHeight);
                              })),
                              t.B.observe(t.i))
                            : t.h.D(document, "fullscreenchange", function () {
                                t.g.resize(t.i.offsetWidth, t.i.offsetHeight);
                              }),
                          t.G || t.o.skipPlayDetection
                            ? t.g.start()
                            : t.h.Aa(t.i, "play", function () {
                                ((t.G = !0), t.g.start());
                              }));
                      } catch (o) {
                        yp(t, null);
                      }
                    })(o, t);
                  }),
                  this.h.D(this.m, google.ima.AdErrorEvent.Type.AD_ERROR, function (e) {
                    mp(o, e);
                  }),
                  this.h.D(this.i, "ended", function () {
                    o.m.contentComplete();
                  }),
                  this.h.Aa(this.i, "play", function () {
                    o.G = !0;
                  }));
              }
              function mp(e, t) {
                (t.getError(),
                  (t = new Map().set("originalEvent", t)),
                  e.l(new Li("ad-error", t)),
                  yp(e, null),
                  e.l(new Li("ad-cue-points-changed", new Map().set("cuepoints", []))));
              }
              function vp(e, t) {
                var n = t.getAd();
                n
                  ? ((e.j = new cp(n, e.g, e.i)),
                    t.type != google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED ||
                      e.o.supportsMultipleMediaElements ||
                      e.l(new Li("ad-content-pause-requested")),
                    (t = new Map().set("ad", e.j).set("sdkAdObject", n).set("originalEvent", t)),
                    e.l(new Li("ad-started", t)),
                    e.j.isLinear() &&
                      (e.u.setAttribute("ad-active", "true"),
                      e.o.customPlayheadTracker || e.i.pause(),
                      e.i.muted ? (((t = e.j).j = e.i.volume), t.h.setVolume(0)) : e.j.setVolume(e.i.volume)))
                  : K("The IMA SDK fired a " + t.type + " event with no associated ad. Unable to play ad!");
              }
              function yp(e, t) {
                (t &&
                  t.type == google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED &&
                  !e.o.supportsMultipleMediaElements &&
                  e.l(new Li("ad-content-resume-requested")),
                  e.l(new Li("ad-stopped", new Map().set("originalEvent", t))),
                  e.j &&
                    e.j.isLinear() &&
                    (e.u.removeAttribute("ad-active"), e.o.customPlayheadTracker || e.i.ended || e.i.play()));
              }
              function bp(e, t, n, r, i, a) {
                ((this.g = e),
                  (this.h = t),
                  (this.j = (this.i = t.isSkippable) ? t.skipOffset || 0 : t.skipOffset),
                  (this.l = t.skipFor),
                  (this.B = n),
                  (this.o = r),
                  (this.m = i),
                  (this.u = a),
                  (this.C = t.overlay));
              }
              function xp(e, t, n) {
                ((this.g = e), (this.j = t), (this.h = n), (this.i = null == e.overlay));
              }
              function Tp(e, t, n, r) {
                function i(e) {
                  return !!e && (!!e.overlay || (a.g.ended ? e.post : !a.g.paused));
                }
                var a = this;
                ((this.M = null),
                  (this.m = e),
                  (this.C = t),
                  (this.g = n),
                  (this.G = null),
                  (this.u = !0),
                  (this.h = this.g),
                  (this.va = r),
                  (this.ma = new Set()),
                  (this.T = new Set()),
                  (this.H = new Set()),
                  (this.F = new Map()),
                  (this.K = new Map()),
                  (this.i = new Jc()),
                  _p(this),
                  (this.I = new ne()),
                  (this.j = new ne()),
                  (this.J = !1),
                  (this.$ = this.o = this.B = this.l = null),
                  (this.ba = !1),
                  (this.O = -1),
                  (this.X = function () {
                    if (!a.J && a.l && !a.C.xa()) {
                      a.l = a.g.currentTime;
                      var e = kp(a);
                      e && i(e) && Ip(a, e, 1, 1, Date.now());
                    }
                  }),
                  (this.V = function () {
                    if (!(a.J || a.l || a.C.xa())) {
                      a.g.paused || (a.l = a.g.currentTime);
                      var e = kp(a, !0);
                      (e || (e = kp(a)), e && i(e) && Ip(a, e, 1, 1, Date.now()));
                    }
                  }),
                  (this.oa = function () {
                    if (!a.J && a.l && !a.C.xa()) {
                      var e = a.g.currentTime;
                      a.B && !a.B.pre && !a.B.post && e < (a.B.endTime || a.B.startTime) && (a.B = null);
                    }
                  }),
                  (this.R = new Mr(this.X)),
                  (this.N = new Mr(function () {
                    var e, t, n, r, i, o, s, u, l, d, c;
                    return D(function (h) {
                      switch (h.g) {
                        case 1:
                          if (!a.H.size || null == a.l) {
                            h.A(0);
                            break;
                          }
                          if ((e = a.C.$d()) == tp || e == np) return h.return();
                          ((t = !1), (n = Array.from(a.H)), (r = a.C.Ra()), (i = g(n)), (o = i.next()));
                        case 3:
                          if (o.done) {
                            h.A(5);
                            break;
                          }
                          if ((s = o.value) == a.B) {
                            h.A(4);
                            break;
                          }
                          if (((u = s.endTime || s.startTime), !(r.start - u >= 1))) {
                            ((l = s.startTime - a.l) > 0 &&
                              l <= 10 &&
                              (!a.F.has(s) &&
                                Pp(s) &&
                                a.F.set(s, a.i.preload(s.uri, null, s.mimeType || void 0)),
                              Np(a, s)),
                              h.A(4));
                            break;
                          }
                          if (!a.F.has(s)) {
                            h.A(7);
                            break;
                          }
                          return x(h, a.F.get(s), 8);
                        case 8:
                          ((d = h.h) && d.destroy(), a.F.delete(s));
                        case 7:
                          (Op(a, s),
                            (c = s.id || JSON.stringify(s)),
                            a.T.has(c) && a.T.delete(c),
                            a.H.delete(s),
                            wp(a),
                            s.overlay || (t = !0));
                        case 4:
                          ((o = i.next()), h.A(3));
                          break;
                        case 5:
                          (t && Rp(a), T(h));
                      }
                    });
                  })),
                  this.configure(this.C.getConfiguration().ads));
              }
              function wp(e) {
                e.ba &&
                  !e.H.size &&
                  (e.I.Ma(e.g, "playing", e.V),
                  e.I.Ma(e.g, "timeupdate", e.V),
                  e.I.Ma(e.g, "seeked", e.oa),
                  e.I.Ma(e.g, "ended", e.X),
                  -1 != e.O && (e.g.cancelVideoFrameCallback(e.O), (e.O = -1)),
                  e.R && e.R.stop(),
                  e.N && e.N.stop(),
                  (e.ba = !1));
              }
              function Sp(e) {
                if (e.m && e.M) {
                  var t = e.M.supportsMultipleMediaElements,
                    n = e.g;
                  ((n.controls ||
                    (n.webkitPresentationMode && "inline" !== n.webkitPresentationMode) ||
                    n.webkitDisplayingFullscreen) &&
                    (t = !1),
                    e.u == t &&
                      ((e.u = !t),
                      e.u
                        ? ((e.h = e.g), e.G && (e.G.parentElement && e.m.removeChild(e.G), (e.G = null)))
                        : (e.G ||
                            (((t = document.createElement(e.g.tagName)).autoplay = !0),
                            (t.style.position = "absolute"),
                            (t.style.top = "0"),
                            (t.style.left = "0"),
                            (t.style.width = "100%"),
                            (t.style.height = "100%"),
                            (t.style.display = "none"),
                            t.setAttribute("playsinline", ""),
                            (e.G = t)),
                          (e.h = e.G))));
                } else e.u = !0;
              }
              function Ap(e, t) {
                var n, r, i;
                D(function (a) {
                  if (1 == a.g) {
                    if (
                      ((n = null),
                      (r = t.values.find(function (e) {
                        return "ID" == e.key;
                      })) && (n = r.data),
                      n)
                    ) {
                      if (e.ma.has(n)) return a.return();
                      e.ma.add(n);
                    }
                    return (
                      _p(e),
                      (i = []),
                      t &&
                      t.values.find(function (e) {
                        return "X-OVERLAY-ID" == e.key;
                      })
                        ? ((i = (function (e) {
                            var t = [];
                            if (!e) return t;
                            var n = e.values.find(function (e) {
                              return "X-ASSET-URI" == e.key;
                            });
                            if (!n) return t;
                            if (!(n = n.data)) return t;
                            var r = null,
                              i = e.values.find(function (e) {
                                return "X-OVERLAY-ID" == e.key;
                              });
                            (i && (r = i.data),
                              (i = null == r ? Math.floor(10 * e.startTime) / 10 : e.startTime));
                            var a = e.endTime;
                            e.endTime &&
                              e.endTime != 1 / 0 &&
                              "number" == typeof e.endTime &&
                              (a = null == r ? Math.floor(10 * e.endTime) / 10 : e.endTime);
                            var o = !1,
                              s = !1,
                              u = !1,
                              l = e.values.find(function (e) {
                                return "CUE" == e.key;
                              });
                            (l &&
                              ((u = l.data),
                              (o = u.includes("ONCE")),
                              (s = u.includes("PRE")),
                              (u = u.includes("POST"))),
                              (l = null));
                            var d = e.values.find(function (e) {
                              return "X-ASSET-MIMETYPE" == e.key;
                            });
                            (d && (l = d.data), (d = !1));
                            var c = e.values.find(function (e) {
                              return "X-LOOP" == e.key;
                            });
                            (c && (d = "YES" == c.data), (c = 1));
                            var h = e.values.find(function (e) {
                              return "X-DEPTH" == e.key;
                            });
                            (h && ((c = parseFloat(h.data)), isNaN(c) && (c = 1)), (h = null));
                            var p = e.values.find(function (e) {
                              return "X-BACKGROUND" == e.key;
                            });
                            (p && (h = p.data), (p = 1920));
                            var f = 1080,
                              g = e.values.find(function (e) {
                                return "X-VIEWPORT" == e.key;
                              });
                            if (g) {
                              if (2 != (f = g.data.split("x")).length) return t;
                              ((p = parseFloat(f[0])), (f = parseFloat(f[1])));
                            }
                            if (
                              ((p = {
                                viewport: { x: p, y: f },
                                topLeft: { x: 0, y: 0 },
                                size: { x: p, y: f },
                              }),
                              (f = e.values.find(function (e) {
                                return "X-OVERLAY-POSITION" == e.key;
                              })))
                            ) {
                              if (2 != (f = f.data.split("x")).length) return t;
                              ((p.topLeft.x = parseFloat(f[0])), (p.topLeft.y = parseFloat(f[1])));
                            }
                            if (
                              (f = e.values.find(function (e) {
                                return "X-OVERLAY-SIZE" == e.key;
                              }))
                            ) {
                              if (2 != (f = f.data.split("x")).length) return t;
                              ((p.size.x = parseFloat(f[0])), (p.size.y = parseFloat(f[1])));
                            }
                            if (
                              ((f = null),
                              (g = e.values.find(function (e) {
                                return "X-SQUEEZECURRENT" == e.key;
                              })) &&
                                ((f = parseFloat(g.data)),
                                isNaN(f) && (f = 1),
                                (f = {
                                  viewport: { x: 1920, y: 1080 },
                                  topLeft: { x: 0, y: 0 },
                                  size: { x: 1920 * f, y: 1080 * f },
                                }),
                                (e = e.values.find(function (e) {
                                  return "X-SQUEEZECURRENT-POSITION" == e.key;
                                }))))
                            ) {
                              if (2 != (e = e.data.split("x")).length) return t;
                              ((f.topLeft.x = parseFloat(e[0])), (f.topLeft.y = parseFloat(e[1])));
                            }
                            return (
                              t.push({
                                id: r,
                                groupId: null,
                                startTime: i,
                                endTime: a,
                                uri: n,
                                mimeType: l,
                                isSkippable: !1,
                                skipOffset: null,
                                skipFor: null,
                                canJump: !0,
                                resumeOffset: null,
                                playoutLimit: null,
                                once: o,
                                pre: s,
                                post: u,
                                timelineRange: !0,
                                loop: d,
                                overlay: p,
                                displayOnBackground: -1 == c,
                                currentVideo: f,
                                background: h,
                                clickThroughUrl: null,
                              }),
                              t
                            );
                          })(t)),
                          a.A(2))
                        : x(
                            a,
                            (function (e, t) {
                              var n,
                                r,
                                i,
                                a,
                                o,
                                s,
                                u,
                                l,
                                d,
                                c,
                                h,
                                p,
                                f,
                                g,
                                m,
                                v,
                                y,
                                b,
                                T,
                                S,
                                k,
                                I,
                                C,
                                M,
                                R,
                                _,
                                P,
                                L,
                                N,
                                O,
                                U,
                                B,
                                j,
                                F,
                                V,
                                H,
                                G,
                                z,
                                X,
                                W,
                                K;
                              return D(function (D) {
                                switch (D.g) {
                                  case 1:
                                    if (((n = []), !t)) return D.return(n);
                                    if (
                                      ((r = t.values.find(function (e) {
                                        return "X-ASSET-URI" == e.key;
                                      })),
                                      (i = t.values.find(function (e) {
                                        return "X-ASSET-LIST" == e.key;
                                      })),
                                      !r && !i)
                                    )
                                      return D.return(n);
                                    if (
                                      ((a = null),
                                      (o = t.values.find(function (e) {
                                        return "ID" == e.key;
                                      })) && (a = o.data),
                                      (s = null == a ? Math.floor(10 * t.startTime) / 10 : t.startTime),
                                      (u = t.endTime) &&
                                        t.endTime != 1 / 0 &&
                                        "number" == typeof t.endTime &&
                                        (u = null == a ? Math.floor(10 * t.endTime) / 10 : t.endTime),
                                      (l = t.values.find(function (e) {
                                        return "X-RESTRICT" == e.key;
                                      })),
                                      (c = d = !0),
                                      l &&
                                        l.data &&
                                        ((h = l.data), (d = !h.includes("SKIP")), (c = !h.includes("JUMP"))),
                                      (p = d ? 0 : null),
                                      (f = t.values.find(function (e) {
                                        return "X-ENABLE-SKIP-AFTER" == e.key;
                                      })) &&
                                        ((g = f.data), (p = parseFloat(g)), isNaN(p) && (p = d ? 0 : null)),
                                      (m = null),
                                      (v = t.values.find(function (e) {
                                        return "X-ENABLE-SKIP-FOR" == e.key;
                                      })) && ((y = v.data), (m = parseFloat(y)), isNaN(p) && (m = null)),
                                      (b = null),
                                      (T = t.values.find(function (e) {
                                        return "X-RESUME-OFFSET" == e.key;
                                      })) && ((S = T.data), (b = parseFloat(S)), isNaN(b) && (b = null)),
                                      (k = null),
                                      (I = t.values.find(function (e) {
                                        return "X-PLAYOUT-LIMIT" == e.key;
                                      })) && ((C = I.data), (k = parseFloat(C)), isNaN(k) && (k = null)),
                                      (_ = R = M = !1),
                                      (P = t.values.find(function (e) {
                                        return "CUE" == e.key;
                                      })) &&
                                        ((L = P.data),
                                        (M = L.includes("ONCE")),
                                        (R = L.includes("PRE")),
                                        (_ = L.includes("POST"))),
                                      (N = !1),
                                      (O = t.values.find(function (e) {
                                        return "X-TIMELINE-OCCUPIES" == e.key;
                                      }))
                                        ? ((U = O.data), (N = U.includes("RANGE")))
                                        : !T && e.C.W() && (N = !R && !_),
                                      r)
                                    ) {
                                      if (!(B = r.data)) return D.return(n);
                                      (n.push({
                                        id: a,
                                        groupId: null,
                                        startTime: s,
                                        endTime: u,
                                        uri: B,
                                        mimeType: null,
                                        isSkippable: d,
                                        skipOffset: p,
                                        skipFor: m,
                                        canJump: c,
                                        resumeOffset: b,
                                        playoutLimit: k,
                                        once: M,
                                        pre: R,
                                        post: _,
                                        timelineRange: N,
                                        loop: !1,
                                        overlay: null,
                                        displayOnBackground: !1,
                                        currentVideo: null,
                                        background: null,
                                        clickThroughUrl: null,
                                      }),
                                        D.A(2));
                                      break;
                                    }
                                    if (!i) {
                                      D.A(2);
                                      break;
                                    }
                                    return (j = i.data)
                                      ? (w(D, 4), x(D, Dp(e, j, { type: 11 }), 6))
                                      : D.return(n);
                                  case 6:
                                    for (
                                      F = D.h,
                                        V = Ye(F),
                                        H = JSON.parse(V),
                                        (G = H["SKIP-CONTROL"]) &&
                                          ("number" == typeof (z = G["ENABLE-SKIP-AFTER"]) &&
                                            ((p = parseFloat(z)), isNaN(z) && (p = d ? 0 : null)),
                                          "number" == typeof (X = G["ENABLE-SKIP-FOR"]) &&
                                            ((m = parseFloat(X)), isNaN(X) && (m = null))),
                                        W = 0;
                                      W < H.ASSETS.length;
                                      W++
                                    )
                                      (K = H.ASSETS[W]).URI &&
                                        n.push({
                                          id: a + "_shaka_asset_" + W,
                                          groupId: a,
                                          startTime: s,
                                          endTime: u,
                                          uri: K.URI,
                                          mimeType: null,
                                          isSkippable: d,
                                          skipOffset: p,
                                          skipFor: m,
                                          canJump: c,
                                          resumeOffset: b,
                                          playoutLimit: k,
                                          once: M,
                                          pre: R,
                                          post: _,
                                          timelineRange: N,
                                          loop: !1,
                                          overlay: null,
                                          displayOnBackground: !1,
                                          currentVideo: null,
                                          background: null,
                                          clickThroughUrl: null,
                                        });
                                    A(D, 2);
                                    break;
                                  case 4:
                                    E(D);
                                  case 2:
                                    return D.return(n);
                                }
                              });
                            })(e, t),
                            3,
                          )
                    );
                  }
                  (2 != a.g && (i = a.h), i.length ? Ep(e, i) : K("Unsupported HLS interstitial", t), T(a));
                });
              }
              function Ep(e, t) {
                var n, r, i, a, o, s, u, l;
                D(function (d) {
                  switch (d.g) {
                    case 1:
                      ((n = !1), (r = g(t)), (i = r.next()));
                    case 2:
                      if (i.done) {
                        d.A(4);
                        break;
                      }
                      if (!(a = i.value).uri) {
                        (K("Missing URL in interstitial", a), d.A(3));
                        break;
                      }
                      if (a.mimeType) {
                        d.A(5);
                        break;
                      }
                      return (
                        w(d, 6),
                        (o = e.i.Yb()),
                        x(d, ol(a.uri, o, e.C.getConfiguration().streaming.retryParameters), 8)
                      );
                    case 8:
                      ((a.mimeType = d.h), A(d, 5));
                      break;
                    case 6:
                      E(d);
                    case 5:
                      if (((s = a.id || JSON.stringify(a)), e.T.has(s))) {
                        d.A(3);
                        break;
                      }
                      (a.loop && !a.overlay && K("Loop is only supported in overlay interstitials", a),
                        a.overlay || (n = !0),
                        e.T.add(s),
                        e.H.add(a),
                        (u = !1),
                        a.pre && null == e.l
                          ? (u = !0)
                          : 0 != a.startTime || a.canJump
                            ? null != e.l && (l = a.startTime - e.l) > 0 && l <= 10 && (u = !0)
                            : (u = !0),
                        u &&
                          (!e.F.has(a) && Pp(a) && e.F.set(a, e.i.preload(a.uri, null, a.mimeType || void 0)),
                          Np(e, a)));
                    case 3:
                      ((i = r.next()), d.A(2));
                      break;
                    case 4:
                      (n && Rp(e),
                        (function (e) {
                          if (!e.ba && e.H.size) {
                            if (
                              (e.I.D(e.g, "playing", e.V),
                              e.I.D(e.g, "timeupdate", e.V),
                              e.I.D(e.g, "seeked", e.oa),
                              e.I.D(e.g, "ended", e.X),
                              "requestVideoFrameCallback" in e.g && !Lp())
                            ) {
                              var t = e.g,
                                n = function () {
                                  -1 != e.O && (e.X(), -1 != e.O && (e.O = t.requestVideoFrameCallback(n)));
                                };
                              e.O = t.requestVideoFrameCallback(n);
                            } else e.R.Ea(0.025);
                            (e.N && e.N.Ea(1), (e.ba = !0));
                          }
                        })(e),
                        T(d));
                  }
                });
              }
              function kp(e, t, n) {
                ((t = void 0 !== t && t), (n = void 0 === n ? null : n));
                var r = 0,
                  i = null;
                if (e.H.size && null != e.l) {
                  var a = e.g.ended,
                    o = Array.from(e.H).sort(function (e, t) {
                      return t.startTime - e.startTime;
                    }),
                    s = o;
                  for (
                    s = t
                      ? o.filter(function (e) {
                          return e.pre;
                        })
                      : a
                        ? o.filter(function (e) {
                            return e.post;
                          })
                        : o.filter(function (e) {
                            return !e.pre && !e.post;
                          }),
                      s = (o = g(s)).next();
                    !s.done;
                    s = o.next()
                  ) {
                    s = s.value;
                    var u = !1;
                    if (t) u = s.pre;
                    else if (a) u = s.post;
                    else if (!s.pre && !s.post) {
                      var l = e.l - Math.round(1e3 * s.startTime) / 1e3,
                        d = 1;
                      (e.M.allowStartInMiddleOfInterstitial &&
                        s.endTime &&
                        s.endTime != 1 / 0 &&
                        (d = s.endTime - s.startTime),
                        (l > 0 || (0 == l && 0 == e.l)) &&
                          (l <= d || !s.canJump) &&
                          (u = !(null == n && e.B && !e.B.pre && !e.B.post && e.B.startTime >= s.startTime)));
                    }
                    u &&
                      (!e.B || s.startTime >= e.B.startTime) &&
                      (r == (n || 0)
                        ? (i = s)
                        : i &&
                          !s.canJump &&
                          Math.round(1e3 * s.startTime) / 1e3 - Math.round(1e3 * i.startTime) / 1e3 > 0.001 &&
                          ((i = s), (r = 0)),
                      r++);
                  }
                }
                return i;
              }
              function Ip(t, n, r, i, a, o) {
                ((o = void 0 === o ? 0 : o),
                  (t.B = n),
                  Sp(t),
                  t.u || !t.m || t.h.parentElement || t.m.appendChild(t.h),
                  1 == i &&
                    1 == r &&
                    (r = Array.from(t.H).filter(function (e) {
                      return n.pre
                        ? e.pre == n.pre
                        : n.post
                          ? e.post == n.post
                          : Math.abs(e.startTime - n.startTime) < 0.001;
                    }).length),
                  n.once && (o++, t.H.delete(n), wp(t), n.overlay || Rp(t)),
                  n.mimeType && (n.mimeType.startsWith("image/") || "text/html" === n.mimeType)
                    ? n.overlay
                      ? (function (t, n, r, i, a) {
                          function o() {
                            (t.o && (t.o.stop(), (t.o = null)),
                              t.m.removeChild(l),
                              Mp(t, n),
                              Up(t, "ad-stopped"),
                              t.j.Qa());
                            var e = kp(t, n.pre, i - a);
                            e ? Ip(t, e, r, ++i, Date.now(), a) : (t.J = !1);
                          }
                          t.J = !0;
                          var s = n.overlay,
                            u = "text/html" == n.mimeType ? "iframe" : "img",
                            l = document.createElement(u);
                          ((l.style.objectFit = "contain"),
                            (l.style.position = "absolute"),
                            (l.style.border = "none"),
                            Cp(t, n));
                          var d = new xp(n, r, i);
                          (Up(t, "ad-impression"),
                            Up(t, "ad-started", new Map().set("ad", d)),
                            "iframe" == u
                              ? (l.src = n.uri)
                              : ((l.src = n.uri),
                                (l.onerror = function (e) {
                                  (Up(t, "ad-error", new Map().set("originalEvent", e)), o());
                                })),
                            (d = s.viewport));
                          var c = s.topLeft;
                          ((s = s.size),
                            0 == d.x && 0 == d.y
                              ? ((l.width = n.overlay.size.x),
                                (l.height = n.overlay.size.y),
                                (l.style.bottom = "10%"),
                                (l.style.left = "0"),
                                (l.style.right = "0"),
                                (l.style.width = "100%"),
                                n.overlay.size.y || "iframe" != u || (l.style.height = "auto"))
                              : ((l.style.height = (s.y / d.y) * 100 + "%"),
                                (l.style.left = (c.x / d.x) * 100 + "%"),
                                (l.style.top = (c.y / d.y) * 100 + "%"),
                                (l.style.width = (s.x / d.x) * 100 + "%")),
                            t.m.appendChild(l));
                          var h = Date.now();
                          (t.o && t.o.stop(),
                            (t.o = new Mr(function () {
                              (n.playoutLimit && (Date.now() - h) / 1e3 > n.playoutLimit) ||
                              (n.endTime && t.g.currentTime > n.endTime)
                                ? (Up(t, "ad-complete"), o())
                                : t.g.currentTime < n.startTime && (Up(t, "ad-skipped"), o());
                            })),
                            n.playoutLimit && !n.endTime
                              ? t.o.ka(n.playoutLimit)
                              : n.endTime && t.o.Ea(0.025),
                            t.j.D(t.g, "seeked", function () {
                              var e = t.g.currentTime;
                              (e < n.startTime || (n.endTime && e > n.endTime)) &&
                                (t.o && t.o.stop(), Up(t, "ad-skipped"), o());
                            }),
                            n.clickThroughUrl &&
                              t.j.D(l, "click", function () {
                                n.clickThroughUrl && e.open(n.clickThroughUrl, "_blank");
                              }));
                        })(t, n, r, i, o)
                      : K("Unsupported interstitial", n)
                    : t.u && n.overlay
                      ? K("Unsupported interstitial", n)
                      : (function (t, n, r, i, a, o) {
                          var s, u, l, d, c, h, p, f, g, m, v, y, b, S, k, I, C, M, R, _, P;
                          D(function (L) {
                            switch (L.g) {
                              case 1:
                                if (
                                  ((s = Date.now()),
                                  (t.J = !0),
                                  (u = !1),
                                  (l = function () {
                                    if (!t.u && !n.overlay && null == n.resumeOffset)
                                      if (n.timelineRange && n.endTime && n.endTime != 1 / 0)
                                        t.g.currentTime != n.endTime && (t.g.currentTime = n.endTime);
                                      else {
                                        var e = Date.now();
                                        ((t.g.currentTime += (e - a) / 1e3), (a = e));
                                      }
                                  }),
                                  (d = function (e) {
                                    var s, u;
                                    return D(function (d) {
                                      if (1 == d.g) {
                                        if ((l(), (s = kp(t, n.pre, i - o)), e && n.groupId))
                                          for (; s && s.groupId == n.groupId; )
                                            (i++, (s = kp(t, n.pre, i - o)));
                                        return (
                                          t.o &&
                                            (!n.groupId || (s && s.groupId != n.groupId)) &&
                                            (t.o.stop(), (t.o = null)),
                                          Mp(t, n),
                                          s && !s.overlay
                                            ? d.A(2)
                                            : (n.post && ((t.l = null), (t.B = null)),
                                              t.u ? x(d, t.i.detach(), 4) : x(d, t.i.Cc(), 4))
                                        );
                                      }
                                      (2 != d.g &&
                                        (t.u &&
                                          (null == (u = n.resumeOffset) &&
                                            (u =
                                              n.timelineRange && n.endTime && n.endTime != 1 / 0
                                                ? n.endTime - (t.l || 0)
                                                : (Date.now() - a) / 1e3),
                                          Up(t, "ad-content-resume-requested", new Map().set("offset", u))),
                                        Up(t, "ad-stopped"),
                                        t.j.Qa(),
                                        (t.J = !1),
                                        t.u
                                          ? Rp(t)
                                          : ((t.h.style.display = "none"), l(), t.g.ended || t.g.play())),
                                        Sp(t),
                                        s && (Up(t, "ad-stopped"), t.j.Qa(), Ip(t, s, r, ++i, a, o)),
                                        T(d));
                                    });
                                  }),
                                  (c = function (e) {
                                    return D(function (n) {
                                      return u
                                        ? n.return()
                                        : ((u = !0),
                                          Up(t, "ad-error", new Map().set("originalEvent", e)),
                                          x(n, d(!1), 0));
                                    });
                                  }),
                                  (h = function () {
                                    return D(function (e) {
                                      if (1 == e.g) return u ? e.return() : ((u = !0), x(e, d(!1), 2));
                                      (Up(t, "ad-complete"), T(e));
                                    });
                                  }),
                                  (t.$ = function () {
                                    return D(function (e) {
                                      return u ? e.return() : ((u = !0), Up(t, "ad-skipped"), x(e, d(!0), 0));
                                    });
                                  }),
                                  (p = new bp(t.h, n, t.$, r, i, !t.u)),
                                  t.u || (p.setMuted(t.g.muted), p.setVolume(t.g.volume)),
                                  Up(t, "ad-started", new Map().set("ad", p)),
                                  (f = p.canSkipNow()) && Up(t, "ad-skip-state-changed"),
                                  t.j.Aa(t.i, "error", c),
                                  t.j.D(t.h, "timeupdate", function () {
                                    if (t.h.duration) {
                                      var e = p.canSkipNow();
                                      (f != e &&
                                        p.getRemainingTime() > 0 &&
                                        p.getDuration() > 0 &&
                                        Up(t, "ad-skip-state-changed"),
                                        (f = e),
                                        !t.u &&
                                          !n.overlay &&
                                          null == n.resumeOffset &&
                                          n.timelineRange &&
                                          n.endTime &&
                                          n.endTime != 1 / 0 &&
                                          t.g.currentTime != n.endTime &&
                                          t.C.Ra().end >= n.endTime &&
                                          (t.g.currentTime = n.endTime));
                                    }
                                  }),
                                  t.j.Aa(t.i, "firstquartile", function () {
                                    (l(), Up(t, "ad-first-quartile"));
                                  }),
                                  t.j.Aa(t.i, "midpoint", function () {
                                    (l(), Up(t, "ad-midpoint"));
                                  }),
                                  t.j.Aa(t.i, "thirdquartile", function () {
                                    (l(), Up(t, "ad-third-quartile"));
                                  }),
                                  t.j.Aa(t.i, "complete", h),
                                  t.j.D(t.h, "play", function () {
                                    Up(t, "ad-resumed");
                                  }),
                                  t.j.D(t.h, "pause", function () {
                                    var e = t.i.getConfiguration();
                                    t.h.currentTime >= e.playRangeEnd ? h() : Up(t, "ad-paused");
                                  }),
                                  t.j.D(t.h, "volumechange", function () {
                                    t.h.muted ? Up(t, "ad-muted") : Up(t, "ad-volume-changed");
                                  }),
                                  n.clickThroughUrl &&
                                    ((g = t.m || t.h),
                                    t.j.D(g, "click", function () {
                                      n.clickThroughUrl &&
                                        (p.isPaused() || p.pause(), e.open(n.clickThroughUrl, "_blank"));
                                    })),
                                  !t.u || 1 != i)
                                ) {
                                  L.A(2);
                                  break;
                                }
                                return (
                                  Up(t, "ad-content-pause-requested", new Map().set("saveLivePosition", !0)),
                                  (m = new Ii()),
                                  (v = function (e) {
                                    return D(function (n) {
                                      if (1 == n.g)
                                        return "detach" != e.state
                                          ? n.A(0)
                                          : Lp()
                                            ? x(
                                                n,
                                                new Promise(function (e) {
                                                  return new Mr(e).ka(0.1);
                                                }),
                                                3,
                                              )
                                            : n.A(3);
                                      (m.resolve(), t.j.Ma(t.C, "onstatechange", v), T(n));
                                    });
                                  }),
                                  t.j.D(t.C, "onstatechange", v),
                                  x(L, m, 2)
                                );
                              case 2:
                                return (
                                  Cp(t, n),
                                  t.u ||
                                    ((t.h.style.display = ""),
                                    n.overlay
                                      ? ((t.h.loop = n.loop),
                                        (y = n.overlay.viewport),
                                        (b = n.overlay.topLeft),
                                        (S = n.overlay.size),
                                        (t.h.style.height = (S.y / y.y) * 100 + "%"),
                                        (t.h.style.left = (b.x / y.x) * 100 + "%"),
                                        (t.h.style.top = (b.y / y.y) * 100 + "%"),
                                        (t.h.style.width = (S.x / y.x) * 100 + "%"))
                                      : (t.g.pause(),
                                        null != n.resumeOffset &&
                                          0 != n.resumeOffset &&
                                          (t.g.currentTime += n.resumeOffset),
                                        (t.h.loop = !1),
                                        (t.h.style.height = "100%"),
                                        (t.h.style.left = "0"),
                                        (t.h.style.top = "0"),
                                        (t.h.style.width = "100%"))),
                                  w(L, 4),
                                  _p(t),
                                  n.startTime &&
                                    n.endTime &&
                                    n.endTime != 1 / 0 &&
                                    n.startTime != n.endTime &&
                                    (k = n.endTime - n.startTime) > 0 &&
                                    t.i.configure("playRangeEnd", k),
                                  n.playoutLimit &&
                                    !t.o &&
                                    ((t.o = new Mr(function () {
                                      t.$();
                                    }).ka(n.playoutLimit)),
                                    t.i.configure("playRangeEnd", n.playoutLimit)),
                                  x(L, t.i.Vb(t.h), 6)
                                );
                              case 6:
                                return (
                                  (I = null),
                                  n.pre ||
                                    n.post ||
                                    !t.M.allowStartInMiddleOfInterstitial ||
                                    null == t.l ||
                                    ((C = t.l - n.startTime), Math.abs(C) > 0.25 && (I = C)),
                                  t.F.has(n)
                                    ? x(L, t.F.get(n), 10)
                                    : x(L, t.i.load(n.uri, I, n.mimeType || void 0), 8)
                                );
                              case 10:
                                return (
                                  (M = L.h),
                                  t.F.delete(n),
                                  x(L, M ? t.i.load(M) : t.i.load(n.uri, I, n.mimeType || void 0), 8)
                                );
                              case 8:
                                (n.overlay && t.g.paused ? t.h.pause() : t.h.play(),
                                  (R = (Date.now() - s) / 1e3),
                                  Up(t, "ads-loaded", new Map().set("loadTime", R)),
                                  t.u && t.g.play(),
                                  n.overlay &&
                                    (n.pre ||
                                      n.post ||
                                      (t.C.W() && !(n.startTime > 0)) ||
                                      ((_ = function () {
                                        var e = t.g.currentTime - n.startTime;
                                        Math.abs(e - t.h.currentTime) > 0.1 && (t.h.currentTime = e);
                                      }),
                                      t.j.Aa(t.h, "playing", _),
                                      t.j.D(t.g, "seeking", _)),
                                    t.j.D(t.g, "seeked", function () {
                                      var e = t.g.currentTime;
                                      (e < n.startTime || (n.endTime && e > n.endTime)) && t.$();
                                    })),
                                  A(L, 0));
                                break;
                              case 4:
                                if (((P = E(L)), !t.J)) return L.return();
                                (c(P), T(L));
                            }
                          });
                        })(t, n, r, i, a, o));
              }
              function Cp(e, t) {
                if ((t.displayOnBackground && (e.g.style.zIndex = "1"), null != t.currentVideo)) {
                  var n = t.currentVideo;
                  e.g.style.transformOrigin = "top left";
                  var r = !0,
                    i = [],
                    a = (n.topLeft.x / n.viewport.x) * 100;
                  (a > 0 && a <= 100 && (i.push("translateX(" + a + "%)"), (r = !1)),
                    (a = (n.topLeft.y / n.viewport.y) * 100) > 0 &&
                      a <= 100 &&
                      (i.push("translateY(" + a + "%)"), (r = !1)),
                    (a = n.size.x / n.viewport.x) < 1 && i.push("scaleX(" + a + ")"),
                    (n = n.size.y / n.viewport.y),
                    a < 1 && i.push("scaleY(" + n + ")"),
                    i.length && (e.g.style.transform = i.join(" ")),
                    r && (e.g.style.transition = "transform 250ms"));
                }
                (e.m &&
                  (t.clickThroughUrl
                    ? (e.m.setAttribute("ad-active", "true"), (e.m.style.pointerEvents = ""))
                    : (e.m.style.pointerEvents = "none"),
                  t.background && (e.m.style.background = t.background)),
                  e.G && (e.G.style.background = t.overlay ? "" : "rgb(0, 0, 0)"));
              }
              function Mp(e, t) {
                ((t && !t.displayOnBackground) || (e.g.style.zIndex = ""),
                  (t && null == t.currentVideo) ||
                    ((e.g.style.transformOrigin = ""),
                    (e.g.style.transition = ""),
                    (e.g.style.transform = "")),
                  e.m &&
                    (e.m.removeAttribute("ad-active"), (e.m.style.pointerEvents = ""), !t || t.background) &&
                    (e.m.style.background = ""),
                  e.G && (e.G.style.background = ""));
              }
              function Rp(e) {
                for (var t = [], n = g(e.H), r = n.next(), i = {}; !r.done; i = { Bc: void 0 }, r = n.next())
                  (r = r.value).overlay ||
                    ((i.Bc = { start: r.startTime, end: null }),
                    r.pre
                      ? ((i.Bc.start = 0), (i.Bc.end = null))
                      : r.post
                        ? ((i.Bc.start = -1), (i.Bc.end = null))
                        : r.timelineRange && (i.Bc.end = r.endTime),
                    t.find(
                      (function (e) {
                        return function (t) {
                          return e.Bc.start == t.start && e.Bc.end == t.end;
                        };
                      })(i),
                    ) || t.push(i.Bc));
                Up(e, "ad-cue-points-changed", new Map().set("cuepoints", t));
              }
              function _p(e) {
                (e.i.configure(e.C.ki()),
                  e.i.configure("ads.disableHLSInterstitial", !0),
                  e.i.configure("ads.disableDASHInterstitial", !0),
                  e.i.configure("playRangeEnd", 1 / 0),
                  Hi(e.C.Yb(), e.i.Yb()));
              }
              function Dp(e, t, n) {
                var r, i;
                return D(function (a) {
                  return 1 == a.g
                    ? ((r = Gi([t], {
                        maxAttempts: 2,
                        baseDelay: 1e3,
                        backoffFactor: 2,
                        fuzzFactor: 0.5,
                        timeout: 3e4,
                        stallTimeout: 5e3,
                        connectionTimeout: 1e4,
                      })),
                      x(a, e.C.Yb().request(7, r, n).promise, 2))
                    : ((i = a.h), a.return(i.data));
                });
              }
              function Pp(e) {
                return !(e = e.mimeType) || (!e.startsWith("image/") && "text/html" !== e);
              }
              function Lp() {
                var e = oe().Oa();
                return "TV" == e || "CONSOLE" == e || "CAST" == e;
              }
              function Np(e, t) {
                if (!(e.K.has(t) || (e.M && !e.M.allowPreloadOnDomElements))) {
                  var n = function (e) {
                      var t = document.createElement("link");
                      return (
                        (t.rel = "preload"),
                        (t.href = e),
                        (t.as = "image"),
                        document.head.appendChild(t),
                        t
                      );
                    },
                    r = [];
                  if (t.background) {
                    var i = t.background.match(/url\(('|")?([^'"()]+)('|")\)?/);
                    i && r.push(n(i[2]));
                  }
                  (t.mimeType && t.mimeType.startsWith("image/") && r.push(n(t.uri)), e.K.set(t, r));
                }
              }
              function Op(e, t) {
                if (e.K.has(t)) {
                  for (var n = e.K.get(t), r = (n = g(n)).next(); !r.done; r = n.next())
                    (r = r.value).parentNode.removeChild(r);
                  e.K.delete(t);
                }
              }
              function Up(e, t, n) {
                e.va(new Li(t, n));
              }
              function Bp(e, t, n, r, i) {
                ((this.h = e),
                  (this.j = Gt(this.h.skipOffset)),
                  (this.g = i),
                  (this.i = t),
                  (this.l = n),
                  (this.o = r),
                  (this.m = !1));
              }
              function jp(e, t, n, r) {
                ((this.C = e),
                  (this.K = t),
                  (this.h = n),
                  (this.l = null),
                  (this.R = NaN),
                  (this.i = r),
                  (this.J = !1),
                  (this.B = null),
                  (this.j = []),
                  (this.N = []),
                  (this.M = this.F = this.g = null),
                  (this.G = new Map()),
                  (this.m = []),
                  (this.u = []),
                  (this.H = ""),
                  (this.O = !0),
                  (this.I = ""),
                  (this.o = new ne()));
              }
              function Fp(e, t) {
                var n, r, i, a, o, s, u, l;
                D(function (d) {
                  return 1 == d.g
                    ? t.staticResource
                      ? ((n = Vp(t)),
                        e.G.get(n)
                          ? d.return()
                          : ((r = { type: 9 }),
                            (i = Gi([t.staticResource], {
                              maxAttempts: 2,
                              baseDelay: 1e3,
                              backoffFactor: 2,
                              fuzzFactor: 0.5,
                              timeout: 3e4,
                              stallTimeout: 5e3,
                              connectionTimeout: 1e4,
                            })),
                            (a = e.K.request(7, i, r)),
                            w(d, 2),
                            e.G.set(n, []),
                            x(d, a.promise, 4)))
                      : d.return()
                    : 2 != d.g
                      ? ((o = d.h),
                        (s = Ye(o.data)),
                        (u = JSON.parse(s)),
                        (l = u.apps),
                        e.G.set(n, l),
                        A(d, 0))
                      : (E(d), e.G.delete(n), void T(d));
                });
              }
              function Vp(e) {
                return [
                  e.adId,
                  e.adParameters,
                  e.adSystem,
                  e.adTitle,
                  e.creativeAdId,
                  e.creativeId,
                  e.creativeSequence,
                  e.height,
                  e.width,
                  e.staticResource,
                ].join("");
              }
              function Hp(e) {
                var t = e.h.currentTime;
                if (0 != t && null == e.B) {
                  for (var n, r, i = g(e.j), a = i.next(); !a.done; a = i.next())
                    for (var o = g((a = a.value).ads), s = o.next(); !s.done; s = o.next())
                      if (((s = s.value), r)) {
                        if (
                          s.startTimeInSeconds < t &&
                          s.startTimeInSeconds > r.startTimeInSeconds + r.durationInSeconds
                        ) {
                          ((r = s), (n = a));
                          break;
                        }
                      } else s.startTimeInSeconds < t && ((r = s), (n = a));
                  n && r && !e.N.includes(r.adId) && ((e.B = t), (e.h.currentTime = n.startTimeInSeconds));
                }
              }
              function Gp(e) {
                if (e.h.duration && (e.g || e.j.length)) {
                  var t = e.h.currentTime,
                    n = !1;
                  if (e.g) {
                    n = !0;
                    var r = e.F,
                      i = r.startTimeInSeconds + 0.5 * r.durationInSeconds,
                      a = r.startTimeInSeconds + 0.75 * r.durationInSeconds;
                    (t >= r.startTimeInSeconds + 0.25 * r.durationInSeconds && !e.u.includes("firstQuartile")
                      ? (e.u.push("firstQuartile"), Wp(e, "firstQuartile"))
                      : t >= i && !e.u.includes("midpoint")
                        ? (e.u.push("midpoint"), Wp(e, "midpoint"))
                        : t >= a &&
                          !e.u.includes("thirdQuartile") &&
                          (e.u.push("thirdQuartile"), Wp(e, "thirdQuartile")),
                      (r = e.g.getRemainingTime()),
                      (i = e.g.getDuration()),
                      e.g.canSkipNow() && r > 0 && i > 0 && Wp(e, "skipStateChanged"),
                      i > 0 && (r <= 0 || r > i) && zp(e));
                  }
                  if (!e.g || !e.g.isLinear()) {
                    e: for (
                      r = g(e.j), i = r.next();
                      !i.done && ((i = i.value), !e.g || !e.g.isLinear());
                      i = r.next()
                    )
                      for (a = 0; a < i.ads.length; a++) {
                        var o = i.ads[a],
                          s = o.startTimeInSeconds + o.durationInSeconds;
                        if (o.startTimeInSeconds <= t && s > t) {
                          if (e.N.includes(o.adId)) {
                            if (e.h.ended) continue;
                            e.h.currentTime = s;
                            break e;
                          }
                          (zp(e),
                            (e.M = i),
                            (e.g = new Bp(o, a + 1, i.ads.length, !0, e.h)),
                            (e.F = o),
                            0 === a && Wp(e, "breakStart"),
                            Xp(e));
                          break;
                        }
                      }
                    if (!e.g)
                      for (i = (r = g(e.j)).next(); !i.done && ((i = i.value), !e.g); i = r.next())
                        for (a = 0; a < i.nonLinearAdsList.length; a++)
                          if ((o = i.nonLinearAdsList[a]).nonLinearAdList.length) {
                            s = i.startTimeInSeconds;
                            var u = e.G.get(Vp(o.nonLinearAdList[0]));
                            if (s <= t && u && u.length) {
                              (zp(e), (s = e));
                              for (var l = (u = g(u)).next(); !l.done; l = u.next())
                                if ((l = l.value).data.source.length) {
                                  var d = document.createElement("img");
                                  ((d.src = l.data.source[0].url),
                                    (d.style.top = (l.placeholder.top || 0) + "%"),
                                    (d.style.height = 100 - (l.placeholder.top || 0) + "%"),
                                    (d.style.left = (l.placeholder.left || 0) + "%"),
                                    (d.style.maxWidth = 100 - (l.placeholder.left || 0) + "%"),
                                    (d.style.objectFit = "contain"),
                                    (d.style.position = "absolute"),
                                    s.C.appendChild(d));
                                }
                              ((e.M = i),
                                (e.g = new Bp(o, a + 1, i.ads.length, !1, e.h)),
                                (e.F = o),
                                0 === a && Wp(e, "breakStart"),
                                Xp(e));
                              break;
                            }
                          }
                    n &&
                      !e.g &&
                      ((t = e.h.currentTime), e.B && e.B > t && (e.h.currentTime = e.B), (e.B = null));
                  }
                }
              }
              function zp(e) {
                if (e.g) {
                  for (; e.C.lastChild; ) e.C.removeChild(e.C.firstChild);
                  e.J || e.N.push(e.F.adId);
                  var t = e.g.m;
                  Wp(e, void 0 !== t && t ? "skip" : "complete");
                  for (var n = (t = g(e.m)).next(); !n.done; n = t.next())
                    ((n = n.value), e.o.Ma(n.target, n.type, n.listener));
                  ((e.m = []),
                    (e.u = []),
                    (t = e.g.getPositionInSequence()) === (n = e.g.getSequenceLength()) && Wp(e, "breakEnd"),
                    (e.g = null),
                    (e.F = null),
                    (e.M = null));
                }
              }
              function Xp(e) {
                var t = !1;
                (e.h.paused ? (t = !0) : (Wp(e, "impression"), Wp(e, "start")),
                  e.m.push({
                    target: e.h,
                    type: "volumechange",
                    listener: function () {
                      e.h.muted && Wp(e, "mute");
                    },
                  }),
                  e.m.push({
                    target: e.h,
                    type: "volumechange",
                    listener: function () {
                      e.h.muted || Wp(e, "unmute");
                    },
                  }),
                  e.m.push({
                    target: e.h,
                    type: "play",
                    listener: function () {
                      t ? (Wp(e, "impression"), Wp(e, "start"), (t = !1)) : Wp(e, "resume");
                    },
                  }),
                  e.m.push({
                    target: e.h,
                    type: "pause",
                    listener: function () {
                      Wp(e, "pause");
                    },
                  }));
                for (var n = g(e.m), r = n.next(); !r.done; r = n.next())
                  ((r = r.value), e.o.D(r.target, r.type, r.listener));
              }
              function Wp(e, t) {
                var n = e.F.trackingEvents.find(function (e) {
                  return e.eventType == t;
                });
                if (
                  (n ||
                    (n = e.M.adBreakTrackingEvents.find(function (e) {
                      return e.eventType == t;
                    })),
                  n)
                )
                  for (var r = { type: 10 }, i = (n = g(n.beaconUrls)).next(); !i.done; i = n.next())
                    (i = i.value) && "" != i && (((i = Gi([i], ki())).method = "POST"), e.K.request(7, i, r));
                switch (t) {
                  case "impression":
                    e.i(new Li("ad-impression"));
                    break;
                  case "start":
                    e.i(new Li("ad-started", new Map().set("ad", e.g)));
                    break;
                  case "mute":
                    e.i(new Li("ad-muted"));
                    break;
                  case "unmute":
                    e.i(new Li("ad-volume-changed"));
                    break;
                  case "resume":
                    e.i(new Li("ad-resumed"));
                    break;
                  case "pause":
                    e.i(new Li("ad-paused"));
                    break;
                  case "firstQuartile":
                    e.i(new Li("ad-first-quartile"));
                    break;
                  case "midpoint":
                    e.i(new Li("ad-midpoint"));
                    break;
                  case "thirdQuartile":
                    e.i(new Li("ad-third-quartile"));
                    break;
                  case "complete":
                    (e.i(new Li("ad-complete")), e.i(new Li("ad-stopped")));
                    break;
                  case "skip":
                    (e.i(new Li("ad-skipped")), e.i(new Li("ad-stopped")));
                    break;
                  case "breakStart":
                    e.C.setAttribute("ad-active", "true");
                    break;
                  case "breakEnd":
                    e.C.removeAttribute("ad-active");
                    break;
                  case "skipStateChanged":
                    e.i(new Li("ad-skip-state-changed"));
                }
              }
              function Kp(e, t) {
                ((this.g = e), (this.i = null), (this.h = t));
              }
              function qp(e, t, n, r) {
                var i = this;
                ((this.u = e),
                  (this.l = t),
                  (this.j = null),
                  (this.G = NaN),
                  (this.i = r),
                  (this.H = !1),
                  (this.B = this.m = this.o = null),
                  (this.C = ""),
                  (this.F = []),
                  (this.h = new ne()),
                  (e = new google.ima.dai.api.UiSettings()).setLocale(n),
                  (this.g = new google.ima.dai.api.StreamManager(this.l, this.u, e)),
                  this.i(new Li("ima-stream-manager-loaded", new Map().set("imaStreamManager", this.g))),
                  this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.LOADED, function (e) {
                    !(function (e, t) {
                      (e.i(new Li("ads-loaded", new Map().set("loadTime", Date.now() / 1e3 - e.G))),
                        (t = t.getStreamData().url),
                        e.j.resolve(t),
                        (e.j = null),
                        e.H ||
                          e.h.D(e.l, "seeked", function () {
                            var t = e.l.currentTime;
                            if (0 != t) {
                              e.g.streamTimeForContentTime(t);
                              var n = e.g.previousCuePointForStreamTime(t);
                              n && !n.played && ((e.o = t), (e.l.currentTime = n.start));
                            }
                          }));
                    })(i, e);
                  }),
                  this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.ERROR, function () {
                    (i.C.length
                      ? i.j.resolve(i.C)
                      : i.j.reject(
                          "IMA Stream request returned an error and there was no backup asset uri provided.",
                        ),
                      (i.j = null));
                  }),
                  this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED, function () {}),
                  this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.STARTED, function (e) {
                    ((e = e.getAd()),
                      (i.m = new Kp(e, i.l)),
                      i.B && (i.m.i = i.B),
                      i.i(new Li("ad-started", new Map().set("ad", i.m))),
                      i.u.setAttribute("ad-active", "true"));
                  }),
                  this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED, function () {
                    i.u.removeAttribute("ad-active");
                    var e = i.l.currentTime;
                    i.o && i.o > e && ((i.l.currentTime = i.o), (i.o = null));
                  }),
                  this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.AD_PROGRESS, function (e) {
                    ((i.B = e.getStreamData().adProgressData), i.m && (i.m.i = i.B));
                  }),
                  this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE, function () {
                    i.i(new Li("ad-first-quartile"));
                  }),
                  this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.MIDPOINT, function () {
                    i.i(new Li("ad-midpoint"));
                  }),
                  this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE, function () {
                    i.i(new Li("ad-third-quartile"));
                  }),
                  this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.COMPLETE, function () {
                    (i.i(new Li("ad-complete")),
                      i.i(new Li("ad-stopped")),
                      i.u.removeAttribute("ad-active"),
                      (i.m = null));
                  }),
                  this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.SKIPPED, function () {
                    (i.i(new Li("ad-skipped")), i.i(new Li("ad-stopped")));
                  }),
                  this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED, function (e) {
                    var t = e.getStreamData();
                    e = [];
                    for (var n = (t = g(t.cuepoints)).next(); !n.done; n = t.next())
                      ((n = n.value), e.push({ start: n.start, end: n.end }));
                    ((i.F = e), i.i(new Li("ad-cue-points-changed", new Map().set("cuepoints", e))));
                  }));
              }
              function Yp() {
                (Ui.call(this),
                  (this.h = this.i = this.j = this.g = null),
                  (this.m = new lp()),
                  (this.o = navigator.language),
                  (this.l = null));
              }
              function $p(e, t) {
                if (t && t.type)
                  switch (t.type) {
                    case "ads-loaded":
                      e.m.g.push(t.loadTime);
                      break;
                    case "ad-started":
                      e.m.h++;
                      var n = t.ad;
                      n && !n.isLinear() && e.m.j++;
                      break;
                    case "ad-complete":
                      e.m.l++;
                      break;
                    case "ad-skipped":
                      e.m.m++;
                      break;
                    case "ad-error":
                      e.m.i++;
                  }
                e.dispatchEvent(t);
              }
              function Jp(e) {
                return JSON.stringify(e, function (e, t) {
                  if ("function" != typeof t) {
                    if (((e = t instanceof Li), t instanceof Event || e)) {
                      var n = {};
                      for (i in t) {
                        var r = t[i];
                        r && "object" == typeof r
                          ? "detail" == i
                            ? (n[i] = r)
                            : r instanceof Event || r instanceof Li
                              ? (n[i] = { __type__: "Event", event: Jp(r) })
                              : e && Array.isArray(r) && (n[i] = r)
                          : i in Event || (n[i] = r);
                      }
                      return n;
                    }
                    if (t instanceof Error) {
                      var i = new Set(["name", "message", "stack"]);
                      for (n in t) i.add(n);
                      for (n = (e = g(Object.getOwnPropertyNames(t))).next(); !n.done; n = e.next())
                        i.add(n.value);
                      for (e = {}, n = (i = g(i)).next(); !n.done; n = i.next()) e[(n = n.value)] = t[n];
                      t = { __type__: "Error", contents: e };
                    } else if (t instanceof TimeRanges) {
                      for (
                        i = { __type__: "TimeRanges", length: t.length, start: [], end: [] },
                          e = (t = g($o(t))).next();
                        !e.done;
                        e = t.next()
                      )
                        ((n = (e = e.value).end), i.start.push(e.start), i.end.push(n));
                      t = i;
                    } else
                      t =
                        ArrayBuffer.isView(t) && 1 === t.BYTES_PER_ELEMENT
                          ? { __type__: "Uint8Array", entries: Array.from(t) }
                          : "number" == typeof t
                            ? isNaN(t)
                              ? "NaN"
                              : isFinite(t)
                                ? t
                                : t < 0
                                  ? "-Infinity"
                                  : "Infinity"
                            : t;
                    return t;
                  }
                });
              }
              function Qp(e) {
                return JSON.parse(e, function (e, t) {
                  if ("NaN" == t) var n = NaN;
                  else if ("-Infinity" == t) n = -1 / 0;
                  else if ("Infinity" == t) n = 1 / 0;
                  else if (t && "object" == typeof t && "TimeRanges" == t.__type__)
                    n = (function (e) {
                      return {
                        length: e.length,
                        start: function (t) {
                          return e.start[t];
                        },
                        end: function (t) {
                          return e.end[t];
                        },
                      };
                    })(t);
                  else if (t && "object" == typeof t && "Uint8Array" == t.__type__)
                    n = new Uint8Array(t.entries);
                  else if (t && "object" == typeof t && "Error" == t.__type__) {
                    for (n in ((e = t.contents), (t = Error(e.message)), e)) t[n] = e[n];
                    n = t;
                  } else n = t && "object" == typeof t && "Event" == t.__type__ ? Qp(t.event) : t;
                  return n;
                });
              }
              (((i = cp.prototype).needsSkipUI = function () {
                return !1;
              }),
                (i.isClientRendering = function () {
                  return !0;
                }),
                (i.hasCustomClick = function () {
                  return !0;
                }),
                (i.isUsingAnotherMediaElement = function () {
                  return !0;
                }),
                (i.getDuration = function () {
                  return this.g.getDuration();
                }),
                (i.getMinSuggestedDuration = function () {
                  return this.g.getMinSuggestedDuration();
                }),
                (i.getRemainingTime = function () {
                  return this.h.getRemainingTime();
                }),
                (i.isPaused = function () {
                  return this.i;
                }),
                (i.isSkippable = function () {
                  return this.g.getSkipTimeOffset() >= 0;
                }),
                (i.getTimeUntilSkippable = function () {
                  var e = this.g.getSkipTimeOffset();
                  return ((e = this.getRemainingTime() - e), Math.max(e, 0));
                }),
                (i.canSkipNow = function () {
                  return this.h.getAdSkippableState();
                }),
                (i.skip = function () {
                  return this.h.skip();
                }),
                (i.pause = function () {
                  return this.h.pause();
                }),
                (i.play = function () {
                  return this.h.resume();
                }),
                (i.getVolume = function () {
                  return this.h.getVolume();
                }),
                (i.setVolume = function (e) {
                  return ((this.m.volume = e), this.h.setVolume(e));
                }),
                (i.isMuted = function () {
                  return 0 == this.h.getVolume();
                }),
                (i.isLinear = function () {
                  return this.g.isLinear();
                }),
                (i.resize = function (e, t) {
                  this.h.resize(e, t);
                }),
                (i.setMuted = function (e) {
                  (this.m.muted = e)
                    ? ((this.j = this.getVolume()), this.h.setVolume(0))
                    : this.h.setVolume(this.j);
                }),
                (i.getSequenceLength = function () {
                  var e = this.g.getAdPodInfo();
                  return null == e ? 1 : e.getTotalAds();
                }),
                (i.getPositionInSequence = function () {
                  var e = this.g.getAdPodInfo();
                  return null == e ? 1 : e.getAdPosition();
                }),
                (i.getTitle = function () {
                  return this.g.getTitle();
                }),
                (i.getDescription = function () {
                  return this.g.getDescription();
                }),
                (i.getVastMediaBitrate = function () {
                  return this.g.getVastMediaBitrate();
                }),
                (i.getVastMediaHeight = function () {
                  return this.g.getVastMediaHeight();
                }),
                (i.getVastMediaWidth = function () {
                  return this.g.getVastMediaWidth();
                }),
                (i.getVastAdId = function () {
                  return "";
                }),
                (i.getAdId = function () {
                  return this.g.getAdId();
                }),
                (i.getCreativeAdId = function () {
                  return this.g.getCreativeAdId();
                }),
                (i.getAdvertiserName = function () {
                  return this.g.getAdvertiserName();
                }),
                (i.getMediaUrl = function () {
                  return this.g.getMediaUrl();
                }),
                (i.getTimeOffset = function () {
                  var e = this.g.getAdPodInfo();
                  return null == e ? 0 : e.getTimeOffset();
                }),
                (i.getPodIndex = function () {
                  var e = this.g.getAdPodInfo();
                  return null == e ? 0 : e.getPodIndex();
                }),
                (i.release = function () {
                  this.h = this.g = null;
                }),
                V("shaka.ads.ClientSideAd", cp),
                (cp.prototype.release = cp.prototype.release),
                (cp.prototype.getPodIndex = cp.prototype.getPodIndex),
                (cp.prototype.getTimeOffset = cp.prototype.getTimeOffset),
                (cp.prototype.getMediaUrl = cp.prototype.getMediaUrl),
                (cp.prototype.getAdvertiserName = cp.prototype.getAdvertiserName),
                (cp.prototype.getCreativeAdId = cp.prototype.getCreativeAdId),
                (cp.prototype.getAdId = cp.prototype.getAdId),
                (cp.prototype.getVastAdId = cp.prototype.getVastAdId),
                (cp.prototype.getVastMediaWidth = cp.prototype.getVastMediaWidth),
                (cp.prototype.getVastMediaHeight = cp.prototype.getVastMediaHeight),
                (cp.prototype.getVastMediaBitrate = cp.prototype.getVastMediaBitrate),
                (cp.prototype.getDescription = cp.prototype.getDescription),
                (cp.prototype.getTitle = cp.prototype.getTitle),
                (cp.prototype.getPositionInSequence = cp.prototype.getPositionInSequence),
                (cp.prototype.getSequenceLength = cp.prototype.getSequenceLength),
                (cp.prototype.setMuted = cp.prototype.setMuted),
                (cp.prototype.resize = cp.prototype.resize),
                (cp.prototype.isLinear = cp.prototype.isLinear),
                (cp.prototype.isMuted = cp.prototype.isMuted),
                (cp.prototype.setVolume = cp.prototype.setVolume),
                (cp.prototype.getVolume = cp.prototype.getVolume),
                (cp.prototype.play = cp.prototype.play),
                (cp.prototype.pause = cp.prototype.pause),
                (cp.prototype.skip = cp.prototype.skip),
                (cp.prototype.canSkipNow = cp.prototype.canSkipNow),
                (cp.prototype.getTimeUntilSkippable = cp.prototype.getTimeUntilSkippable),
                (cp.prototype.isSkippable = cp.prototype.isSkippable),
                (cp.prototype.isPaused = cp.prototype.isPaused),
                (cp.prototype.getRemainingTime = cp.prototype.getRemainingTime),
                (cp.prototype.getMinSuggestedDuration = cp.prototype.getMinSuggestedDuration),
                (cp.prototype.getDuration = cp.prototype.getDuration),
                (cp.prototype.isUsingAnotherMediaElement = cp.prototype.isUsingAnotherMediaElement),
                (cp.prototype.hasCustomClick = cp.prototype.hasCustomClick),
                (cp.prototype.isClientRendering = cp.prototype.isClientRendering),
                (cp.prototype.needsSkipUI = cp.prototype.needsSkipUI),
                V("shaka.ads.Utils", hp),
                (hp.ADS_LOADED = "ads-loaded"),
                (hp.AD_STARTED = "ad-started"),
                (hp.AD_FIRST_QUARTILE = "ad-first-quartile"),
                (hp.AD_MIDPOINT = "ad-midpoint"),
                (hp.AD_THIRD_QUARTILE = "ad-third-quartile"),
                (hp.AD_COMPLETE = "ad-complete"),
                (hp.AD_STOPPED = "ad-stopped"),
                (hp.AD_SKIPPED = "ad-skipped"),
                (hp.AD_VOLUME_CHANGED = "ad-volume-changed"),
                (hp.AD_MUTED = "ad-muted"),
                (hp.AD_PAUSED = "ad-paused"),
                (hp.AD_RESUMED = "ad-resumed"),
                (hp.AD_SKIP_STATE_CHANGED = "ad-skip-state-changed"),
                (hp.CUEPOINTS_CHANGED = "ad-cue-points-changed"),
                (hp.IMA_AD_MANAGER_LOADED = "ima-ad-manager-loaded"),
                (hp.IMA_STREAM_MANAGER_LOADED = "ima-stream-manager-loaded"),
                (hp.AD_CLICKED = "ad-clicked"),
                (hp.AD_PROGRESS = "ad-progress"),
                (hp.AD_BUFFERING = "ad-buffering"),
                (hp.AD_IMPRESSION = "ad-impression"),
                (hp.AD_DURATION_CHANGED = "ad-duration-changed"),
                (hp.AD_CLOSED = "ad-closed"),
                (hp.AD_LOADED = "ad-loaded"),
                (hp.ALL_ADS_COMPLETED = "all-ads-completed"),
                (hp.AD_LINEAR_CHANGED = "ad-linear-changed"),
                (hp.AD_METADATA = "ad-metadata"),
                (hp.AD_RECOVERABLE_ERROR = "ad-recoverable-error"),
                (hp.AD_ERROR = "ad-error"),
                (hp.AD_BREAK_READY = "ad-break-ready"),
                (hp.AD_INTERACTION = "ad-interaction"),
                (hp.AD_CONTENT_PAUSE_REQUESTED = "ad-content-pause-requested"),
                (hp.AD_CONTENT_RESUME_REQUESTED = "ad-content-resume-requested"),
                (hp.AD_CONTENT_ATTACH_REQUESTED = "ad-content-attach-requested"),
                (gp.prototype.configure = function (e) {
                  this.o = e;
                }),
                (gp.prototype.stop = function () {
                  (this.g && this.g.stop(), this.u && es(this.u));
                }),
                (gp.prototype.release = function () {
                  (this.stop(),
                    this.B && this.B.disconnect(),
                    this.h && this.h.release(),
                    this.g && this.g.destroy(),
                    this.m.destroy(),
                    this.F.destroy());
                }),
                ((i = bp.prototype).needsSkipUI = function () {
                  return !0;
                }),
                (i.isClientRendering = function () {
                  return !0;
                }),
                (i.hasCustomClick = function () {
                  return null != this.h.clickThroughUrl;
                }),
                (i.isUsingAnotherMediaElement = function () {
                  return this.u;
                }),
                (i.getDuration = function () {
                  var e = this.g.duration;
                  return isNaN(e) ? -1 : e;
                }),
                (i.getMinSuggestedDuration = function () {
                  return this.getDuration();
                }),
                (i.getRemainingTime = function () {
                  var e = this.g.duration;
                  return isNaN(e) ? -1 : e - this.g.currentTime;
                }),
                (i.isPaused = function () {
                  return this.g.paused;
                }),
                (i.isSkippable = function () {
                  return this.i && null != this.l
                    ? this.getDuration() - this.getRemainingTime() < this.j + this.l
                    : this.i;
                }),
                (i.getTimeUntilSkippable = function () {
                  if (this.isSkippable()) {
                    var e = this.getRemainingTime() + this.j - this.getDuration();
                    return Math.max(e, 0);
                  }
                  return Math.max(this.getRemainingTime(), 0);
                }),
                (i.canSkipNow = function () {
                  return this.i && 0 == this.getTimeUntilSkippable();
                }),
                (i.skip = function () {
                  this.canSkipNow() && this.B();
                }),
                (i.pause = function () {
                  return this.g.pause();
                }),
                (i.play = function () {
                  return this.g.play();
                }),
                (i.getVolume = function () {
                  return this.g.volume;
                }),
                (i.setVolume = function (e) {
                  this.g.volume = e;
                }),
                (i.isMuted = function () {
                  return this.g.muted;
                }),
                (i.isLinear = function () {
                  return null == this.C;
                }),
                (i.resize = function () {}),
                (i.setMuted = function (e) {
                  this.g.muted = e;
                }),
                (i.getSequenceLength = function () {
                  return this.o;
                }),
                (i.getPositionInSequence = function () {
                  return this.m;
                }),
                (i.getTitle = function () {
                  return "";
                }),
                (i.getDescription = function () {
                  return "";
                }),
                (i.getVastMediaBitrate = function () {
                  return 0;
                }),
                (i.getVastMediaHeight = function () {
                  return 0;
                }),
                (i.getVastMediaWidth = function () {
                  return 0;
                }),
                (i.getVastAdId = function () {
                  return "";
                }),
                (i.getAdId = function () {
                  return this.h.id || "";
                }),
                (i.getCreativeAdId = function () {
                  return "";
                }),
                (i.getAdvertiserName = function () {
                  return "";
                }),
                (i.getMediaUrl = function () {
                  return this.h.uri;
                }),
                (i.getTimeOffset = function () {
                  return this.h.pre ? 0 : this.h.post ? -1 : this.h.startTime;
                }),
                (i.getPodIndex = function () {
                  return 0;
                }),
                (i.release = function () {
                  this.g = null;
                }),
                V("shaka.ads.InterstitialAd", bp),
                (bp.prototype.release = bp.prototype.release),
                (bp.prototype.getPodIndex = bp.prototype.getPodIndex),
                (bp.prototype.getTimeOffset = bp.prototype.getTimeOffset),
                (bp.prototype.getMediaUrl = bp.prototype.getMediaUrl),
                (bp.prototype.getAdvertiserName = bp.prototype.getAdvertiserName),
                (bp.prototype.getCreativeAdId = bp.prototype.getCreativeAdId),
                (bp.prototype.getAdId = bp.prototype.getAdId),
                (bp.prototype.getVastAdId = bp.prototype.getVastAdId),
                (bp.prototype.getVastMediaWidth = bp.prototype.getVastMediaWidth),
                (bp.prototype.getVastMediaHeight = bp.prototype.getVastMediaHeight),
                (bp.prototype.getVastMediaBitrate = bp.prototype.getVastMediaBitrate),
                (bp.prototype.getDescription = bp.prototype.getDescription),
                (bp.prototype.getTitle = bp.prototype.getTitle),
                (bp.prototype.getPositionInSequence = bp.prototype.getPositionInSequence),
                (bp.prototype.getSequenceLength = bp.prototype.getSequenceLength),
                (bp.prototype.setMuted = bp.prototype.setMuted),
                (bp.prototype.resize = bp.prototype.resize),
                (bp.prototype.isLinear = bp.prototype.isLinear),
                (bp.prototype.isMuted = bp.prototype.isMuted),
                (bp.prototype.setVolume = bp.prototype.setVolume),
                (bp.prototype.getVolume = bp.prototype.getVolume),
                (bp.prototype.play = bp.prototype.play),
                (bp.prototype.pause = bp.prototype.pause),
                (bp.prototype.skip = bp.prototype.skip),
                (bp.prototype.canSkipNow = bp.prototype.canSkipNow),
                (bp.prototype.getTimeUntilSkippable = bp.prototype.getTimeUntilSkippable),
                (bp.prototype.isSkippable = bp.prototype.isSkippable),
                (bp.prototype.isPaused = bp.prototype.isPaused),
                (bp.prototype.getRemainingTime = bp.prototype.getRemainingTime),
                (bp.prototype.getMinSuggestedDuration = bp.prototype.getMinSuggestedDuration),
                (bp.prototype.getDuration = bp.prototype.getDuration),
                (bp.prototype.isUsingAnotherMediaElement = bp.prototype.isUsingAnotherMediaElement),
                (bp.prototype.hasCustomClick = bp.prototype.hasCustomClick),
                (bp.prototype.isClientRendering = bp.prototype.isClientRendering),
                (bp.prototype.needsSkipUI = bp.prototype.needsSkipUI),
                ((i = xp.prototype).needsSkipUI = function () {
                  return !0;
                }),
                (i.isClientRendering = function () {
                  return !0;
                }),
                (i.hasCustomClick = function () {
                  return null != this.g.clickThroughUrl;
                }),
                (i.isUsingAnotherMediaElement = function () {
                  return !1;
                }),
                (i.getDuration = function () {
                  return -1;
                }),
                (i.getMinSuggestedDuration = function () {
                  return this.getDuration();
                }),
                (i.getRemainingTime = function () {
                  return -1;
                }),
                (i.isPaused = function () {
                  return !1;
                }),
                (i.isSkippable = function () {
                  return !1;
                }),
                (i.getTimeUntilSkippable = function () {
                  return 0;
                }),
                (i.canSkipNow = function () {
                  return !1;
                }),
                (i.skip = function () {}),
                (i.pause = function () {}),
                (i.play = function () {}),
                (i.getVolume = function () {
                  return 1;
                }),
                (i.setVolume = function () {}),
                (i.isMuted = function () {
                  return !1;
                }),
                (i.isLinear = function () {
                  return this.i;
                }),
                (i.resize = function () {}),
                (i.setMuted = function () {}),
                (i.getSequenceLength = function () {
                  return this.j;
                }),
                (i.getPositionInSequence = function () {
                  return this.h;
                }),
                (i.getTitle = function () {
                  return "";
                }),
                (i.getDescription = function () {
                  return "";
                }),
                (i.getVastMediaBitrate = function () {
                  return 0;
                }),
                (i.getVastMediaHeight = function () {
                  return 0;
                }),
                (i.getVastMediaWidth = function () {
                  return 0;
                }),
                (i.getVastAdId = function () {
                  return "";
                }),
                (i.getAdId = function () {
                  return this.g.id || "";
                }),
                (i.getCreativeAdId = function () {
                  return "";
                }),
                (i.getAdvertiserName = function () {
                  return "";
                }),
                (i.getMediaUrl = function () {
                  return this.g.uri;
                }),
                (i.getTimeOffset = function () {
                  return this.g.pre ? 0 : this.g.post ? -1 : this.g.startTime;
                }),
                (i.getPodIndex = function () {
                  return 0;
                }),
                (i.release = function () {}),
                V("shaka.ads.InterstitialStaticAd", xp),
                (xp.prototype.release = xp.prototype.release),
                (xp.prototype.getPodIndex = xp.prototype.getPodIndex),
                (xp.prototype.getTimeOffset = xp.prototype.getTimeOffset),
                (xp.prototype.getMediaUrl = xp.prototype.getMediaUrl),
                (xp.prototype.getAdvertiserName = xp.prototype.getAdvertiserName),
                (xp.prototype.getCreativeAdId = xp.prototype.getCreativeAdId),
                (xp.prototype.getAdId = xp.prototype.getAdId),
                (xp.prototype.getVastAdId = xp.prototype.getVastAdId),
                (xp.prototype.getVastMediaWidth = xp.prototype.getVastMediaWidth),
                (xp.prototype.getVastMediaHeight = xp.prototype.getVastMediaHeight),
                (xp.prototype.getVastMediaBitrate = xp.prototype.getVastMediaBitrate),
                (xp.prototype.getDescription = xp.prototype.getDescription),
                (xp.prototype.getTitle = xp.prototype.getTitle),
                (xp.prototype.getPositionInSequence = xp.prototype.getPositionInSequence),
                (xp.prototype.getSequenceLength = xp.prototype.getSequenceLength),
                (xp.prototype.setMuted = xp.prototype.setMuted),
                (xp.prototype.resize = xp.prototype.resize),
                (xp.prototype.isLinear = xp.prototype.isLinear),
                (xp.prototype.isMuted = xp.prototype.isMuted),
                (xp.prototype.setVolume = xp.prototype.setVolume),
                (xp.prototype.getVolume = xp.prototype.getVolume),
                (xp.prototype.play = xp.prototype.play),
                (xp.prototype.pause = xp.prototype.pause),
                (xp.prototype.skip = xp.prototype.skip),
                (xp.prototype.canSkipNow = xp.prototype.canSkipNow),
                (xp.prototype.getTimeUntilSkippable = xp.prototype.getTimeUntilSkippable),
                (xp.prototype.isSkippable = xp.prototype.isSkippable),
                (xp.prototype.isPaused = xp.prototype.isPaused),
                (xp.prototype.getRemainingTime = xp.prototype.getRemainingTime),
                (xp.prototype.getMinSuggestedDuration = xp.prototype.getMinSuggestedDuration),
                (xp.prototype.getDuration = xp.prototype.getDuration),
                (xp.prototype.isUsingAnotherMediaElement = xp.prototype.isUsingAnotherMediaElement),
                (xp.prototype.hasCustomClick = xp.prototype.hasCustomClick),
                (xp.prototype.isClientRendering = xp.prototype.isClientRendering),
                (xp.prototype.needsSkipUI = xp.prototype.needsSkipUI),
                ((i = Tp.prototype).configure = function (e) {
                  ((this.M = e), this.J || Sp(this));
                }),
                (i.stop = function () {
                  if (
                    (this.j && this.j.Qa(),
                    this.ma.clear(),
                    this.T.clear(),
                    this.H.clear(),
                    this.i.rg(),
                    this.F.size)
                  )
                    for (var e = Array.from(this.F.values()), t = (e = g(e)).next(); !t.done; t = e.next())
                      (t = t.value) &&
                        t.then(function (e) {
                          e && e.destroy();
                        });
                  if ((this.F.clear(), this.K.size))
                    for (t = (e = g((e = Array.from(this.K.keys())))).next(); !t.done; t = e.next())
                      Op(this, t.value);
                  (this.K.clear(),
                    this.i.detach(),
                    (this.J = !1),
                    (this.B = this.l = null),
                    (this.u = !0),
                    (this.h = this.g),
                    (this.G = null),
                    Mp(this),
                    wp(this),
                    this.m && es(this.m),
                    this.o && (this.o.stop(), (this.o = null)));
                }),
                (i.release = function () {
                  (this.stop(),
                    this.I && this.I.release(),
                    this.j && this.j.release(),
                    this.R && (this.R.stop(), (this.R = null)),
                    this.N && (this.N.stop(), (this.N = null)),
                    this.i.destroy());
                }),
                (i.td = function () {
                  return this.i;
                }),
                (i.addAdUrlInterstitial = function (e) {
                  var t,
                    n,
                    r,
                    i,
                    a,
                    o,
                    s,
                    u,
                    l,
                    d = this;
                  return D(function (c) {
                    if (1 == c.g) return x(c, Dp(d, e, (t = { type: 12 })), 2);
                    if (3 != c.g) {
                      if (((n = c.h), !(r = Yt(n, "VAST,vmap:VMAP")))) throw new Ke(2, 10, 10007);
                      if (((i = []), "VAST" == r.tagName)) return ((i = pp(r, d.l)), c.A(3));
                      if ("vmap:VMAP" != r.tagName) return c.A(3);
                      for (
                        a = function (e) {
                          var n, r;
                          return D(function (a) {
                            if (1 == a.g) return x(a, Dp(d, e.uri, t), 2);
                            if (((n = a.h), !(r = Yt(n, "VAST")))) throw new Ke(2, 10, 10007);
                            (i.push.apply(i, m(pp(r, e.time))), T(a));
                          });
                        },
                          o = [],
                          s = g(
                            (function (e) {
                              for (
                                var t = [], n = (e = g(en(e, "vmap:AdBreak"))).next();
                                !n.done;
                                n = e.next()
                              ) {
                                var r = n.value,
                                  i = r.attributes.timeOffset;
                                i &&
                                  ((n = null),
                                  (n = "start" == i ? null : "end" == i ? 1 / 0 : Gt(i)),
                                  (r = an(r, "vmap:AdSource")) &&
                                    (r = an(r, "vmap:AdTagURI")) &&
                                    (r = tn(r)) &&
                                    t.push({ time: n, uri: r }));
                              }
                              return t;
                            })(r),
                          ),
                          u = s.next();
                        !u.done;
                        u = s.next()
                      )
                        ((l = u.value), o.push(a(l)));
                      return o.length ? x(c, Promise.all(o), 3) : c.A(3);
                    }
                    (Ep(d, i), T(c));
                  });
                }),
                ((i = Bp.prototype).needsSkipUI = function () {
                  return !0;
                }),
                (i.isClientRendering = function () {
                  return !1;
                }),
                (i.hasCustomClick = function () {
                  return !1;
                }),
                (i.isUsingAnotherMediaElement = function () {
                  return !1;
                }),
                (i.getDuration = function () {
                  return this.h.durationInSeconds;
                }),
                (i.getMinSuggestedDuration = function () {
                  return this.getDuration();
                }),
                (i.getRemainingTime = function () {
                  return this.h.startTimeInSeconds + this.h.durationInSeconds - this.g.currentTime;
                }),
                (i.isPaused = function () {
                  return this.g.paused;
                }),
                (i.isSkippable = function () {
                  return "number" == typeof this.j;
                }),
                (i.getTimeUntilSkippable = function () {
                  if ("number" != typeof this.j) return this.getRemainingTime();
                  var e = this.getRemainingTime() + this.j - this.getDuration();
                  return Math.max(e, 0);
                }),
                (i.canSkipNow = function () {
                  return 0 == this.getTimeUntilSkippable();
                }),
                (i.skip = function () {
                  ((this.m = !0), (this.g.currentTime += this.getRemainingTime()));
                }),
                (i.pause = function () {
                  return this.g.pause();
                }),
                (i.play = function () {
                  return this.g.play();
                }),
                (i.getVolume = function () {
                  return this.g.volume;
                }),
                (i.setVolume = function (e) {
                  this.g.volume = e;
                }),
                (i.isMuted = function () {
                  return this.g.muted;
                }),
                (i.isLinear = function () {
                  return this.o;
                }),
                (i.resize = function () {}),
                (i.setMuted = function (e) {
                  this.g.muted = e;
                }),
                (i.getSequenceLength = function () {
                  return this.l ? this.l : 1;
                }),
                (i.getPositionInSequence = function () {
                  return this.i ? this.i : 1;
                }),
                (i.getTitle = function () {
                  return this.h.adTitle;
                }),
                (i.getDescription = function () {
                  return "";
                }),
                (i.getVastMediaBitrate = function () {
                  return 0;
                }),
                (i.getVastMediaHeight = function () {
                  return 0;
                }),
                (i.getVastMediaWidth = function () {
                  return 0;
                }),
                (i.getVastAdId = function () {
                  return this.h.vastAdId || "";
                }),
                (i.getAdId = function () {
                  return this.h.adId;
                }),
                (i.getCreativeAdId = function () {
                  return this.h.creativeId;
                }),
                (i.getAdvertiserName = function () {
                  return "";
                }),
                (i.getMediaUrl = function () {
                  return null;
                }),
                (i.getTimeOffset = function () {
                  return 0;
                }),
                (i.getPodIndex = function () {
                  return 0;
                }),
                (i.release = function () {
                  this.l = this.i = this.g = this.h = null;
                }),
                V("shaka.ads.MediaTailorAd", Bp),
                (Bp.prototype.release = Bp.prototype.release),
                (Bp.prototype.getPodIndex = Bp.prototype.getPodIndex),
                (Bp.prototype.getTimeOffset = Bp.prototype.getTimeOffset),
                (Bp.prototype.getMediaUrl = Bp.prototype.getMediaUrl),
                (Bp.prototype.getAdvertiserName = Bp.prototype.getAdvertiserName),
                (Bp.prototype.getCreativeAdId = Bp.prototype.getCreativeAdId),
                (Bp.prototype.getAdId = Bp.prototype.getAdId),
                (Bp.prototype.getVastAdId = Bp.prototype.getVastAdId),
                (Bp.prototype.getVastMediaWidth = Bp.prototype.getVastMediaWidth),
                (Bp.prototype.getVastMediaHeight = Bp.prototype.getVastMediaHeight),
                (Bp.prototype.getVastMediaBitrate = Bp.prototype.getVastMediaBitrate),
                (Bp.prototype.getDescription = Bp.prototype.getDescription),
                (Bp.prototype.getTitle = Bp.prototype.getTitle),
                (Bp.prototype.getPositionInSequence = Bp.prototype.getPositionInSequence),
                (Bp.prototype.getSequenceLength = Bp.prototype.getSequenceLength),
                (Bp.prototype.setMuted = Bp.prototype.setMuted),
                (Bp.prototype.resize = Bp.prototype.resize),
                (Bp.prototype.isLinear = Bp.prototype.isLinear),
                (Bp.prototype.isMuted = Bp.prototype.isMuted),
                (Bp.prototype.setVolume = Bp.prototype.setVolume),
                (Bp.prototype.getVolume = Bp.prototype.getVolume),
                (Bp.prototype.play = Bp.prototype.play),
                (Bp.prototype.pause = Bp.prototype.pause),
                (Bp.prototype.skip = Bp.prototype.skip),
                (Bp.prototype.canSkipNow = Bp.prototype.canSkipNow),
                (Bp.prototype.getTimeUntilSkippable = Bp.prototype.getTimeUntilSkippable),
                (Bp.prototype.isSkippable = Bp.prototype.isSkippable),
                (Bp.prototype.isPaused = Bp.prototype.isPaused),
                (Bp.prototype.getRemainingTime = Bp.prototype.getRemainingTime),
                (Bp.prototype.getMinSuggestedDuration = Bp.prototype.getMinSuggestedDuration),
                (Bp.prototype.getDuration = Bp.prototype.getDuration),
                (Bp.prototype.isUsingAnotherMediaElement = Bp.prototype.isUsingAnotherMediaElement),
                (Bp.prototype.hasCustomClick = Bp.prototype.hasCustomClick),
                (Bp.prototype.isClientRendering = Bp.prototype.isClientRendering),
                (Bp.prototype.needsSkipUI = Bp.prototype.needsSkipUI),
                (jp.prototype.stop = function () {
                  for (var e = g(this.m), t = e.next(); !t.done; t = e.next())
                    ((t = t.value), this.o.Ma(t.target, t.type, t.listener));
                  (zp(this),
                    (this.m = []),
                    (this.u = []),
                    (this.H = ""),
                    (this.O = !0),
                    (this.I = ""),
                    (this.B = null),
                    (this.j = []),
                    (this.N = []),
                    this.G.clear());
                }),
                (jp.prototype.release = function () {
                  (this.stop(), this.o && this.o.release());
                }),
                (jp.prototype.onManifestUpdated = function (e) {
                  ((this.J = e),
                    "" != this.H &&
                      ((function (e, t, n) {
                        var r, i, a, o, s, u, l, d, c, h, p, f, m, v, y, b;
                        D(function (S) {
                          if (1 == S.g)
                            return (
                              (r = { type: 8 }),
                              (i = Gi([t], {
                                maxAttempts: 2,
                                baseDelay: 1e3,
                                backoffFactor: 2,
                                fuzzFactor: 0.5,
                                timeout: 3e4,
                                stallTimeout: 5e3,
                                connectionTimeout: 1e4,
                              })),
                              (a = e.K.request(7, i, r)),
                              w(S, 2),
                              x(S, a.promise, 4)
                            );
                          if (2 != S.g) {
                            if (
                              ((o = S.h), (s = []), (u = Ye(o.data)), (l = JSON.parse(u)).avails.length > 0)
                            ) {
                              if (JSON.stringify(e.j) != JSON.stringify(l.avails)) {
                                for (e.j = l.avails, d = g(e.j), c = d.next(); !c.done; c = d.next())
                                  for (
                                    h = c.value, p = g(h.nonLinearAdsList), f = p.next();
                                    !f.done;
                                    f = p.next()
                                  )
                                    for (
                                      m = f.value, v = g(m.nonLinearAdList), y = v.next();
                                      !y.done;
                                      y = v.next()
                                    )
                                      ((b = y.value), Fp(e, b));
                                ((s = e.getCuePoints()),
                                  e.i(new Li("ad-cue-points-changed", new Map().set("cuepoints", s))));
                              }
                            } else
                              (e.j.length &&
                                e.i(new Li("ad-cue-points-changed", new Map().set("cuepoints", s))),
                                zp(e),
                                (e.j = []));
                            return (
                              n &&
                                (e.J || s.length > 0) &&
                                (function (e) {
                                  (Gp(e),
                                    e.J ||
                                      (Hp(e),
                                      e.o.D(e.h, "seeked", function () {
                                        Hp(e);
                                      }),
                                      e.o.D(e.h, "ended", function () {
                                        zp(e);
                                      })),
                                    e.o.D(e.h, "timeupdate", function () {
                                      Gp(e);
                                    }));
                                })(e),
                              A(S, 0)
                            );
                          }
                          (E(S), T(S));
                        });
                      })(this, this.H, this.O),
                      (this.O = !1)));
                }),
                (jp.prototype.getCuePoints = function () {
                  for (var e = [], t = g(this.j), n = t.next(); !n.done; n = t.next())
                    for (var r = (n = g(n.value.ads)).next(); !r.done; r = n.next())
                      ((r = r.value),
                        e.push({
                          start: r.startTimeInSeconds,
                          end: r.startTimeInSeconds + r.durationInSeconds,
                        }));
                  return e;
                }),
                ((i = Kp.prototype).needsSkipUI = function () {
                  return !0;
                }),
                (i.isClientRendering = function () {
                  return !1;
                }),
                (i.hasCustomClick = function () {
                  return !0;
                }),
                (i.isUsingAnotherMediaElement = function () {
                  return !1;
                }),
                (i.getDuration = function () {
                  return this.i ? this.i.duration : -1;
                }),
                (i.getMinSuggestedDuration = function () {
                  return this.getDuration();
                }),
                (i.getRemainingTime = function () {
                  return this.i ? this.i.duration - this.i.currentTime : -1;
                }),
                (i.isPaused = function () {
                  return this.h.paused;
                }),
                (i.isSkippable = function () {
                  return this.g.isSkippable();
                }),
                (i.getTimeUntilSkippable = function () {
                  var e = this.g.getSkipTimeOffset();
                  return ((e = this.getRemainingTime() - e), Math.max(e, 0));
                }),
                (i.canSkipNow = function () {
                  return 0 == this.getTimeUntilSkippable();
                }),
                (i.skip = function () {
                  this.h.currentTime += this.getRemainingTime();
                }),
                (i.pause = function () {
                  return this.h.pause();
                }),
                (i.play = function () {
                  return this.h.play();
                }),
                (i.getVolume = function () {
                  return this.h.volume;
                }),
                (i.setVolume = function (e) {
                  this.h.volume = e;
                }),
                (i.isMuted = function () {
                  return this.h.muted;
                }),
                (i.isLinear = function () {
                  return !0;
                }),
                (i.resize = function () {}),
                (i.setMuted = function (e) {
                  this.h.muted = e;
                }),
                (i.getSequenceLength = function () {
                  var e = this.g.getAdPodInfo();
                  return null == e ? 1 : e.getTotalAds();
                }),
                (i.getPositionInSequence = function () {
                  var e = this.g.getAdPodInfo();
                  return null == e ? 1 : e.getAdPosition();
                }),
                (i.getTitle = function () {
                  return this.g.getTitle();
                }),
                (i.getDescription = function () {
                  return this.g.getDescription();
                }),
                (i.getVastMediaBitrate = function () {
                  return 0;
                }),
                (i.getVastMediaHeight = function () {
                  return this.g.getVastMediaHeight();
                }),
                (i.getVastMediaWidth = function () {
                  return this.g.getVastMediaWidth();
                }),
                (i.getVastAdId = function () {
                  return "";
                }),
                (i.getAdId = function () {
                  return this.g.getAdId();
                }),
                (i.getCreativeAdId = function () {
                  return this.g.getCreativeAdId();
                }),
                (i.getAdvertiserName = function () {
                  return this.g.getAdvertiserName();
                }),
                (i.getMediaUrl = function () {
                  return null;
                }),
                (i.getTimeOffset = function () {
                  var e = this.g.getAdPodInfo();
                  return null == e ? 0 : e.getTimeOffset();
                }),
                (i.getPodIndex = function () {
                  var e = this.g.getAdPodInfo();
                  return null == e ? 0 : e.getPodIndex();
                }),
                (i.release = function () {
                  this.h = this.i = this.g = null;
                }),
                V("shaka.ads.ServerSideAd", Kp),
                (Kp.prototype.release = Kp.prototype.release),
                (Kp.prototype.getPodIndex = Kp.prototype.getPodIndex),
                (Kp.prototype.getTimeOffset = Kp.prototype.getTimeOffset),
                (Kp.prototype.getMediaUrl = Kp.prototype.getMediaUrl),
                (Kp.prototype.getAdvertiserName = Kp.prototype.getAdvertiserName),
                (Kp.prototype.getCreativeAdId = Kp.prototype.getCreativeAdId),
                (Kp.prototype.getAdId = Kp.prototype.getAdId),
                (Kp.prototype.getVastAdId = Kp.prototype.getVastAdId),
                (Kp.prototype.getVastMediaWidth = Kp.prototype.getVastMediaWidth),
                (Kp.prototype.getVastMediaHeight = Kp.prototype.getVastMediaHeight),
                (Kp.prototype.getVastMediaBitrate = Kp.prototype.getVastMediaBitrate),
                (Kp.prototype.getDescription = Kp.prototype.getDescription),
                (Kp.prototype.getTitle = Kp.prototype.getTitle),
                (Kp.prototype.getPositionInSequence = Kp.prototype.getPositionInSequence),
                (Kp.prototype.getSequenceLength = Kp.prototype.getSequenceLength),
                (Kp.prototype.setMuted = Kp.prototype.setMuted),
                (Kp.prototype.resize = Kp.prototype.resize),
                (Kp.prototype.isLinear = Kp.prototype.isLinear),
                (Kp.prototype.isMuted = Kp.prototype.isMuted),
                (Kp.prototype.setVolume = Kp.prototype.setVolume),
                (Kp.prototype.getVolume = Kp.prototype.getVolume),
                (Kp.prototype.play = Kp.prototype.play),
                (Kp.prototype.pause = Kp.prototype.pause),
                (Kp.prototype.skip = Kp.prototype.skip),
                (Kp.prototype.canSkipNow = Kp.prototype.canSkipNow),
                (Kp.prototype.getTimeUntilSkippable = Kp.prototype.getTimeUntilSkippable),
                (Kp.prototype.isSkippable = Kp.prototype.isSkippable),
                (Kp.prototype.isPaused = Kp.prototype.isPaused),
                (Kp.prototype.getRemainingTime = Kp.prototype.getRemainingTime),
                (Kp.prototype.getMinSuggestedDuration = Kp.prototype.getMinSuggestedDuration),
                (Kp.prototype.getDuration = Kp.prototype.getDuration),
                (Kp.prototype.isUsingAnotherMediaElement = Kp.prototype.isUsingAnotherMediaElement),
                (Kp.prototype.hasCustomClick = Kp.prototype.hasCustomClick),
                (Kp.prototype.isClientRendering = Kp.prototype.isClientRendering),
                (Kp.prototype.needsSkipUI = Kp.prototype.needsSkipUI),
                ((i = qp.prototype).configure = function () {}),
                (i.stop = function () {
                  ((this.C = ""), (this.o = null), (this.F = []));
                }),
                (i.release = function () {
                  (this.stop(), this.h && this.h.release());
                }),
                (i.onCueMetadataChange = function (e) {
                  if (e.key && e.data) {
                    var t = {};
                    ((t[e.key] = e.data), this.g.onTimedMetadata(t));
                  }
                }),
                (i.getCuePoints = function () {
                  return this.F;
                }),
                p(Yp, Ui),
                ((i = Yp.prototype).setLocale = function (e) {
                  this.o = e;
                }),
                (i.configure = function (e) {
                  ((this.l = e),
                    this.g && this.g.configure(this.l),
                    this.j && this.j.configure(this.l),
                    this.h && this.h.configure(this.l));
                }),
                (i.initInterstitial = function (e, t, n) {
                  var r = this;
                  (this.g && this.g.release(),
                    (this.g = new Tp(e, t, n, function (e) {
                      return $p(r, e);
                    })),
                    this.g.configure(this.l));
                }),
                (i.initClientSide = function (t, n, r) {
                  var i = this;
                  if (!e.google || !google.ima || !google.ima.AdsLoader) throw new Ke(2, 10, 1e4);
                  (this.j && this.j.release(),
                    (this.j = new gp(t, n, this.o, r, function (e) {
                      return $p(i, e);
                    })),
                    this.j.configure(this.l));
                }),
                (i.release = function () {
                  (this.g && (this.g.release(), (this.g = null)),
                    this.j && (this.j.release(), (this.j = null)),
                    this.i && (this.i.release(), (this.i = null)),
                    this.h && (this.h.release(), (this.h = null)),
                    Ui.prototype.release.call(this));
                }),
                (i.onAssetUnload = function () {
                  (this.g && this.g.stop(),
                    this.j && this.j.stop(),
                    this.i && this.i.stop(),
                    this.h && this.h.stop(),
                    this.dispatchEvent(new Li("ad-stopped")),
                    this.dispatchEvent(new Li("ad-content-attach-requested")),
                    (this.m = new lp()));
                }),
                (i.requestClientSideAds = function (e) {
                  if (!this.j) throw new Ke(1, 10, 10001);
                  var t = this.j;
                  (t.g && t.g.destroy(),
                    t.m && t.m.contentComplete(),
                    (t.H = Date.now() / 1e3),
                    t.m.requestAds(e));
                }),
                (i.updateClientSideAdsRenderingSettings = function (e) {
                  if (!this.j) throw new Ke(1, 10, 10001);
                  var t = this.j;
                  ((t.C = e), t.g && t.g.updateAdsRenderingSettings(t.C));
                }),
                (i.initMediaTailor = function (e, t, n) {
                  var r = this;
                  (this.i && this.i.release(),
                    (this.i = new jp(e, t, n, function (e) {
                      return $p(r, e);
                    })));
                }),
                (i.requestMediaTailorStream = function (e, t, n) {
                  if (!this.i) throw new Ke(1, 10, 10005);
                  var r = this.i;
                  return (
                    (n = void 0 === n ? "" : n),
                    r.l
                      ? (e = Promise.reject(new Ke(1, 10, 10004)))
                      : ((r.l = new Ii()),
                        (function (e, t, n) {
                          var r, i, a, o, s, u, l, d, c, h, p, f;
                          D(function (g) {
                            if (1 == g.g)
                              return (
                                (r = { type: 7 }),
                                ((i = Gi([t], {
                                  maxAttempts: 2,
                                  baseDelay: 1e3,
                                  backoffFactor: 2,
                                  fuzzFactor: 0.5,
                                  timeout: 3e4,
                                  stallTimeout: 5e3,
                                  connectionTimeout: 1e4,
                                })).method = "POST"),
                                n && ((a = JSON.stringify(n)), (i.body = Qe(a))),
                                (o = e.K.request(7, i, r)),
                                w(g, 2),
                                x(g, o.promise, 4)
                              );
                            if (2 != g.g) {
                              if (
                                ((s = g.h),
                                (u = Ye(s.data)),
                                !(l = JSON.parse(u)).manifestUrl || !l.trackingUrl)
                              )
                                throw Error("Insufficient data from MediaTailor.");
                              return (
                                (d = new me(t)),
                                (c = new me(l.trackingUrl)),
                                (e.H = d.resolve(c).toString()),
                                (h = Date.now() / 1e3),
                                (p = h - e.R),
                                e.i(new Li("ads-loaded", new Map().set("loadTime", p))),
                                (f = new me(l.manifestUrl)),
                                e.l.resolve(d.resolve(f).toString()),
                                (e.l = null),
                                A(g, 0)
                              );
                            }
                            if ((E(g), !e.I.length))
                              return (
                                e.l.reject(
                                  "MediaTailor request returned an error and there was no backup asset uri provided.",
                                ),
                                (e.l = null),
                                g.return()
                              );
                            (e.l.resolve(e.I), (e.l = null), T(g));
                          });
                        })(r, e, t),
                        (r.I = n || ""),
                        (r.R = Date.now() / 1e3),
                        (e = r.l)),
                    e
                  );
                }),
                (i.addMediaTailorTrackingUrl = function (e) {
                  if (!this.i) throw new Ke(1, 10, 10005);
                  var t = this.i;
                  ((t.H = e), t.i(new Li("ads-loaded", new Map().set("loadTime", 0))));
                }),
                (i.initServerSide = function (t, n) {
                  var r = this;
                  if (!e.google || !google.ima || !google.ima.dai) throw new Ke(2, 10, 10002);
                  (this.h && this.h.release(),
                    (this.h = new qp(t, n, this.o, function (e) {
                      return $p(r, e);
                    })),
                    this.h.configure(this.l));
                }),
                (i.requestServerSideStream = function (e, t) {
                  if (((t = void 0 === t ? "" : t), !this.h)) throw new Ke(1, 10, 10003);
                  e.adTagParameters || (e.adTagParameters = {});
                  var n = e.adTagParameters;
                  return (
                    (n.mpt || n.mpv) &&
                      K(
                        'You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.',
                      ),
                    (e.adTagParameters.mpt = "shaka-player"),
                    (e.adTagParameters.mpv = "v4.16.12"),
                    (n = this.h).j
                      ? (e = Promise.reject(new Ke(1, 10, 10004)))
                      : (e instanceof google.ima.dai.api.LiveStreamRequest && (n.H = !0),
                        (n.j = new Ii()),
                        n.g.requestStream(e),
                        (n.C = t || ""),
                        (n.G = Date.now() / 1e3),
                        (e = n.j)),
                    e
                  );
                }),
                (i.replaceServerSideAdTagParameters = function (e) {
                  if (!this.h) throw new Ke(1, 10, 10003);
                  ((e.mpt || e.mpv) &&
                    K(
                      'You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.',
                    ),
                    (e.mpt = "Shaka Player"),
                    (e.mpv = "v4.16.12"),
                    this.h.g.replaceAdTagParameters(e));
                }),
                (i.getServerSideCuePoints = function () {
                  return (
                    ce("AdManager.getServerSideCuePoints", "Please use getCuePoints function."),
                    this.getCuePoints()
                  );
                }),
                (i.getCuePoints = function () {
                  var e = [];
                  return (
                    this.h && (e = e.concat(this.h.getCuePoints())),
                    this.i && (e = e.concat(this.i.getCuePoints())),
                    e
                  );
                }),
                (i.getStats = function () {
                  var e = this.m;
                  return {
                    loadTimes: e.g,
                    averageLoadTime: dp(e),
                    started: e.h,
                    overlayAds: e.j,
                    playedCompletely: e.l,
                    skipped: e.m,
                    errors: e.i,
                  };
                }),
                (i.onManifestUpdated = function (e) {
                  this.i && this.i.onManifestUpdated(e);
                }),
                (i.onDashTimedMetadata = function (e) {
                  this.h &&
                    "urn:google:dai:2018" == e.schemeIdUri &&
                    this.h.g.processMetadata(
                      e.schemeIdUri,
                      e.eventNode ? e.eventNode.attributes.messageData : null,
                      e.startTime,
                    );
                }),
                (i.onHlsTimedMetadata = function (e, t) {
                  this.h && this.h.g.processMetadata("ID3", e.data, t);
                }),
                (i.onCueMetadataChange = function (e) {
                  this.h && this.h.onCueMetadataChange(e);
                }),
                (i.onHLSInterstitialMetadata = function (e, t, n) {
                  (this.l && this.l.disableHLSInterstitial) ||
                    (this.g || this.initInterstitial(null, e, t), this.g && Ap(this.g, n));
                }),
                (i.onDASHInterstitialMetadata = function (e, t, n) {
                  if (!this.l || !this.l.disableDASHInterstitial) {
                    var r = n.schemeIdUri;
                    if (
                      "urn:mpeg:dash:event:alternativeMPD:insert:2025" == r ||
                      "urn:mpeg:dash:event:alternativeMPD:replace:2025" == r
                    ) {
                      if (
                        (this.g || this.initInterstitial(null, e, t),
                        this.g &&
                          ((e = this.g),
                          (t = "urn:mpeg:dash:event:alternativeMPD:replace:2025" == n.schemeIdUri),
                          (r = "urn:mpeg:dash:event:alternativeMPD:insert:2025" == n.schemeIdUri),
                          t || r))
                      ) {
                        for (
                          var i,
                            a = n.startTime,
                            o = n.endTime,
                            s = null,
                            u = 0,
                            l = g(n.eventNode.children),
                            d = l.next();
                          !d.done;
                          d = l.next()
                        )
                          if ("AlternativeMPD" == (d = d.value).tagName) {
                            if ((d = d.attributes.uri)) {
                              i = d;
                              break;
                            }
                          } else if (
                            "InsertPresentation" == d.tagName ||
                            "ReplacePresentation" == d.tagName
                          ) {
                            var c = d.attributes.url;
                            if (c) {
                              ((i = et(c)),
                                (l = sn(d, "maxDuration", fn)) && (s = l / n.timescale),
                                (l = sn(d, "returnOffset", fn)) && (u = l / n.timescale),
                                t && u && (o = a + u));
                              break;
                            }
                          }
                        i &&
                          Ep(e, [
                            {
                              id: n.id,
                              groupId: null,
                              startTime: a,
                              endTime: o,
                              uri: i,
                              mimeType: null,
                              isSkippable: !1,
                              skipOffset: null,
                              skipFor: null,
                              canJump: !0,
                              resumeOffset: r ? u : null,
                              playoutLimit: s,
                              once: !1,
                              pre: !1,
                              post: !1,
                              timelineRange: t && !r,
                              loop: !1,
                              overlay: null,
                              displayOnBackground: !1,
                              currentVideo: null,
                              background: null,
                              clickThroughUrl: null,
                            },
                          ]);
                      }
                    } else
                      ("urn:mpeg:dash:event:2012" == r || "urn:scte:dash:scte214-events" == r) &&
                        n.eventNode &&
                        an(n.eventNode, "OverlayEvent") &&
                        (this.g || this.initInterstitial(null, e, t),
                        this.g &&
                          (function (e, t) {
                            var n = an(t.eventNode, "OverlayEvent"),
                              r = n.attributes.uri,
                              i = n.attributes.mimeType,
                              a = "true" == n.attributes.loop,
                              o = sn(n, "z", fn);
                            if (r && 0 != o) {
                              var s = null,
                                u = an(n, "Background");
                              if (u) {
                                var l = u.attributes.uri;
                                s = l ? "center / contain no-repeat url('" + l + "')" : nn(u);
                              }
                              ((u = 1920), (l = 1080));
                              var d = an(n, "Viewport");
                              if (d) {
                                if (null == (u = sn(d, "x", fn))) return;
                                if (null == (l = sn(d, "y", fn))) return;
                              }
                              var c = {
                                  viewport: { x: u, y: l },
                                  topLeft: { x: 0, y: 0 },
                                  size: { x: u, y: l },
                                },
                                h = an(n, "Overlay");
                              if (d && h) {
                                var p = an(h, "TopLeft"),
                                  f = an(h, "Size");
                                if (p && f) {
                                  if (null == (h = sn(p, "x", fn))) return;
                                  if (null == (p = sn(p, "y", fn))) return;
                                  var g = sn(f, "x", fn);
                                  if (null == g) return;
                                  if (null == (f = sn(f, "y", fn))) return;
                                  ((c.topLeft.x = h), (c.topLeft.y = p), (c.size.x = g), (c.size.y = f));
                                }
                              }
                              if (
                                ((h = null),
                                (n = an(n, "Squeeze")),
                                d && n && ((f = an(n, "TopLeft")), (n = an(n, "Size")), f && n))
                              ) {
                                if (null == (d = sn(f, "x", fn))) return;
                                if (null == (h = sn(f, "y", fn))) return;
                                if (null == (f = sn(n, "x", fn))) return;
                                if (null == (n = sn(n, "y", fn))) return;
                                h = {
                                  viewport: { x: u, y: l },
                                  topLeft: { x: d, y: h },
                                  size: { x: f, y: n },
                                };
                              }
                              Ep(e, [
                                {
                                  id: t.id,
                                  groupId: null,
                                  startTime: t.startTime,
                                  endTime: t.endTime,
                                  uri: r,
                                  mimeType: i,
                                  isSkippable: !1,
                                  skipOffset: null,
                                  skipFor: null,
                                  canJump: !0,
                                  resumeOffset: null,
                                  playoutLimit: null,
                                  once: !1,
                                  pre: !1,
                                  post: !1,
                                  timelineRange: !0,
                                  loop: a,
                                  overlay: c,
                                  displayOnBackground: -1 == o,
                                  currentVideo: h,
                                  background: s,
                                  clickThroughUrl: null,
                                },
                              ]);
                            }
                          })(this.g, n));
                  }
                }),
                (i.addCustomInterstitial = function (e) {
                  if (!this.g) throw new Ke(1, 10, 10006);
                  Ep(this.g, [e]);
                }),
                (i.addAdUrlInterstitial = function (e) {
                  if (!this.g) throw new Ke(1, 10, 10006);
                  return this.g.addAdUrlInterstitial(e);
                }),
                (i.getInterstitialPlayer = function () {
                  if (!this.g) throw new Ke(1, 10, 10006);
                  return this.g.td();
                }),
                V("shaka.ads.AdManager", Yp),
                (Yp.prototype.getInterstitialPlayer = Yp.prototype.getInterstitialPlayer),
                (Yp.prototype.addAdUrlInterstitial = Yp.prototype.addAdUrlInterstitial),
                (Yp.prototype.addCustomInterstitial = Yp.prototype.addCustomInterstitial),
                (Yp.prototype.onDASHInterstitialMetadata = Yp.prototype.onDASHInterstitialMetadata),
                (Yp.prototype.onHLSInterstitialMetadata = Yp.prototype.onHLSInterstitialMetadata),
                (Yp.prototype.onCueMetadataChange = Yp.prototype.onCueMetadataChange),
                (Yp.prototype.onHlsTimedMetadata = Yp.prototype.onHlsTimedMetadata),
                (Yp.prototype.onDashTimedMetadata = Yp.prototype.onDashTimedMetadata),
                (Yp.prototype.onManifestUpdated = Yp.prototype.onManifestUpdated),
                (Yp.prototype.getStats = Yp.prototype.getStats),
                (Yp.prototype.getCuePoints = Yp.prototype.getCuePoints),
                (Yp.prototype.getServerSideCuePoints = Yp.prototype.getServerSideCuePoints),
                (Yp.prototype.replaceServerSideAdTagParameters =
                  Yp.prototype.replaceServerSideAdTagParameters),
                (Yp.prototype.requestServerSideStream = Yp.prototype.requestServerSideStream),
                (Yp.prototype.initServerSide = Yp.prototype.initServerSide),
                (Yp.prototype.addMediaTailorTrackingUrl = Yp.prototype.addMediaTailorTrackingUrl),
                (Yp.prototype.requestMediaTailorStream = Yp.prototype.requestMediaTailorStream),
                (Yp.prototype.initMediaTailor = Yp.prototype.initMediaTailor),
                (Yp.prototype.updateClientSideAdsRenderingSettings =
                  Yp.prototype.updateClientSideAdsRenderingSettings),
                (Yp.prototype.requestClientSideAds = Yp.prototype.requestClientSideAds),
                (Yp.prototype.onAssetUnload = Yp.prototype.onAssetUnload),
                (Yp.prototype.release = Yp.prototype.release),
                (Yp.prototype.initClientSide = Yp.prototype.initClientSide),
                (Yp.prototype.initInterstitial = Yp.prototype.initInterstitial),
                (Yp.prototype.configure = Yp.prototype.configure),
                (Yp.prototype.setLocale = Yp.prototype.setLocale),
                (Yp.ADS_LOADED = "ads-loaded"),
                (Yp.AD_STARTED = "ad-started"),
                (Yp.AD_FIRST_QUARTILE = "ad-first-quartile"),
                (Yp.AD_MIDPOINT = "ad-midpoint"),
                (Yp.AD_THIRD_QUARTILE = "ad-third-quartile"),
                (Yp.AD_COMPLETE = "ad-complete"),
                (Yp.AD_STOPPED = "ad-stopped"),
                (Yp.AD_SKIPPED = "ad-skipped"),
                (Yp.AD_VOLUME_CHANGED = "ad-volume-changed"),
                (Yp.AD_MUTED = "ad-muted"),
                (Yp.AD_PAUSED = "ad-paused"),
                (Yp.AD_RESUMED = "ad-resumed"),
                (Yp.AD_SKIP_STATE_CHANGED = "ad-skip-state-changed"),
                (Yp.CUEPOINTS_CHANGED = "ad-cue-points-changed"),
                (Yp.IMA_AD_MANAGER_LOADED = "ima-ad-manager-loaded"),
                (Yp.IMA_STREAM_MANAGER_LOADED = "ima-stream-manager-loaded"),
                (Yp.AD_CLICKED = "ad-clicked"),
                (Yp.AD_PROGRESS = "ad-progress"),
                (Yp.AD_BUFFERING = "ad-buffering"),
                (Yp.AD_IMPRESSION = "ad-impression"),
                (Yp.AD_DURATION_CHANGED = "ad-duration-changed"),
                (Yp.AD_CLOSED = "ad-closed"),
                (Yp.AD_LOADED = "ad-loaded"),
                (Yp.ALL_ADS_COMPLETED = "all-ads-completed"),
                (Yp.AD_LINEAR_CHANGED = "ad-linear-changed"),
                (Yp.AD_METADATA = "ad-metadata"),
                (Yp.AD_RECOVERABLE_ERROR = "ad-recoverable-error"),
                (Yp.AD_ERROR = "ad-error"),
                (Yp.AD_BREAK_READY = "ad-break-ready"),
                (Yp.AD_INTERACTION = "ad-interaction"),
                (Yp.AD_CONTENT_PAUSE_REQUESTED = "ad-content-pause-requested"),
                (Yp.AD_CONTENT_RESUME_REQUESTED = "ad-content-resume-requested"),
                (Yp.AD_CONTENT_ATTACH_REQUESTED = "ad-content-attach-requested"),
                (sp = function () {
                  return new Yp();
                }));
              var Zp =
                  "ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(
                    " ",
                  ),
                ef =
                  "buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(
                    " ",
                  ),
                tf = ["loop", "playbackRate"],
                nf = ["pause", "play"],
                rf = new Map()
                  .set("getAssetUri", 2)
                  .set("getAudioLanguages", 4)
                  .set("getAudioLanguagesAndRoles", 4)
                  .set("getBufferFullness", 1)
                  .set("getBufferedInfo", 2)
                  .set("getExpiration", 2)
                  .set("getKeyStatuses", 2)
                  .set("getPlaybackRate", 2)
                  .set("getTextLanguages", 4)
                  .set("getTextLanguagesAndRoles", 4)
                  .set("isAudioOnly", 10)
                  .set("isBuffering", 1)
                  .set("isInProgress", 1)
                  .set("isLive", 10)
                  .set("isTextTrackVisible", 1)
                  .set("isVideoOnly", 10)
                  .set("keySystem", 10)
                  .set("seekRange", 1)
                  .set("getLoadMode", 10)
                  .set("getManifestType", 10)
                  .set("isFullyLoaded", 1)
                  .set("isEnded", 1)
                  .set("getBandwidthEstimate", 1)
                  .set("isRemotePlayback", 1),
                af = new Map()
                  .set("getConfiguration", 4)
                  .set("getConfigurationForLowLatency", 4)
                  .set("getStats", 5)
                  .set("getAudioTracks", 2)
                  .set("getChaptersTracks", 2)
                  .set("getImageTracks", 2)
                  .set("getVideoTracks", 2)
                  .set("getTextTracks", 2)
                  .set("getVariantTracks", 2),
                of = new Map()
                  .set("getPlayheadTimeAsDate", 1)
                  .set("getPresentationStartTimeAsDate", 20)
                  .set("getSegmentAvailabilityDuration", 20),
                sf = [
                  [
                    "getConfiguration",
                    "configure",
                    "getConfigurationForLowLatency",
                    "configurationForLowLatency",
                  ],
                ],
                uf = [["isTextTrackVisible", "setTextTrackVisibility"]],
                lf =
                  "cancelTrickPlay configure configurationForLowLatency getChapters resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel selectVideoTrack setTextTrackVisibility trickPlay updateStartTime goToLive useTrickPlayTrackIfAvailable".split(
                    " ",
                  ),
                df =
                  "addChaptersTrack addTextTrackAsync addThumbnailsTrack getAllThumbnails getChaptersAsync getThumbnails attach attachCanvas detach load unload".split(
                    " ",
                  );
              function cf(e, t, n, r, i, a, o) {
                var s = this;
                ((this.H = e),
                  (this.K = o),
                  (this.l = new Mr(t)),
                  (this.M = n),
                  (this.u = !1),
                  (this.B = r),
                  (this.G = i),
                  (this.N = a),
                  (this.i = this.m = !1),
                  (this.J = ""),
                  (this.o = null),
                  (this.C = function () {
                    return gf(s);
                  }),
                  (this.F = function (e, t) {
                    switch ((e = Qp(t)).type) {
                      case "event":
                        var n = e.targetName,
                          r = Ni(e.event);
                        s.B(n, r);
                        break;
                      case "update":
                        for (r in (n = e.update)) for (var i in ((e = s.g[r] || {}), n[r])) e[i] = n[r][i];
                        s.u && (s.M(), (s.u = !1));
                        break;
                      case "asyncComplete":
                        if (((i = e.id), (r = e.error), (t = e.res), (e = s.h.get(i)), s.h.delete(i), e))
                          if (r) {
                            for (n in ((i = new Ke(r.severity, r.category, r.code)), r)) i[n] = r[n];
                            e.reject(i);
                          } else e.resolve(t);
                    }
                  }),
                  (this.g = { video: {}, player: {} }),
                  (this.I = 0),
                  (this.h = new Map()),
                  (this.j = null),
                  wf.add(this));
              }
              function hf(e, t) {
                var n = e.N();
                ((xf = t),
                  t.addUpdateListener(e.C),
                  t.addMessageListener("urn:x-cast:com.google.shaka.v2", e.F),
                  gf(e),
                  vf(e, { type: "init", initState: n, appData: e.o }),
                  e.j.resolve());
              }
              function pf(e, t) {
                var n = 8003;
                switch (t.code) {
                  case "cancel":
                    n = 8004;
                    break;
                  case "timeout":
                    n = 8005;
                    break;
                  case "receiver_unavailable":
                    n = 8006;
                }
                e.j.reject(new Ke(2, 8, n, t));
              }
              function ff(e) {
                var t = xf;
                (t.removeUpdateListener(e.C), t.removeMessageListener("urn:x-cast:com.google.shaka.v2", e.F));
              }
              function gf(e) {
                var t = !!xf && "connected" == xf.status;
                if (e.i && !t) {
                  for (var n in (e.G(), e.g)) e.g[n] = {};
                  mf(e);
                }
                ((e.i = t), (e.J = t ? xf.receiver.friendlyName : ""), e.l.Jb());
              }
              function mf(e) {
                if (e.h)
                  for (var t = g(e.h.keys()), n = t.next(); !n.done; n = t.next()) {
                    n = n.value;
                    var r = e.h.get(n);
                    (e.h.delete(n), r.reject(new Ke(1, 7, 7e3)));
                  }
              }
              function vf(e, t) {
                t = Jp(t);
                var n = xf;
                try {
                  n.sendMessage("urn:x-cast:com.google.shaka.v2", t, function () {}, Y);
                } catch (r) {
                  throw (
                    (t = new Ke(2, 8, 8005, r)),
                    (n = new Li("error", new Map().set("detail", t))),
                    e.B("player", n),
                    e.qd(),
                    t
                  );
                }
              }
              (((i = cf.prototype).destroy = function () {
                return (
                  wf.delete(this),
                  mf(this),
                  xf && ff(this),
                  this.l && (this.l.stop(), (this.l = null)),
                  (this.G = this.B = null),
                  (this.i = this.m = !1),
                  (this.F = this.C = this.j = this.h = this.g = this.o = null),
                  Promise.resolve()
                );
              }),
                (i.wb = function () {
                  return this.i;
                }),
                (i.eh = function () {
                  return this.J;
                }),
                (i.init = function () {
                  if (this.H.length)
                    if (e.chrome && chrome.cast && chrome.cast.isAvailable) {
                      ((this.m = !0), this.l.Jb());
                      var t = new chrome.cast.SessionRequest(this.H, [], null, this.K, null);
                      ((t = new chrome.cast.ApiConfig(
                        t,
                        function (e) {
                          for (var t = g(wf), n = t.next(); !n.done; n = t.next()) {
                            var r = e;
                            (((n = n.value).j = new Ii()), (n.u = !0), hf(n, r));
                          }
                        },
                        function (e) {
                          for (var t = g(wf), n = t.next(); !n.done; n = t.next())
                            ((n = n.value), (bf = "available" == e), n.l.Jb());
                        },
                        "origin_scoped",
                      )),
                        chrome.cast.initialize(
                          t,
                          function () {},
                          function () {},
                        ),
                        bf && this.l.ka(yf),
                        (t = xf) && t.status != chrome.cast.SessionStatus.STOPPED
                          ? ((this.j = new Ii()), (this.u = !0), hf(this, t))
                          : (xf = null));
                    } else
                      e.__onGCastApiAvailable !== Sf &&
                        ((Tf = e.__onGCastApiAvailable || null), (e.__onGCastApiAvailable = Sf));
                }),
                (i.qh = function (e) {
                  ((this.o = e), this.i && vf(this, { type: "appData", appData: this.o }));
                }),
                (i.cast = function () {
                  var e = this;
                  return D(function (t) {
                    if (!e.m) throw new Ke(1, 8, 8e3);
                    if (!bf) throw new Ke(1, 8, 8001);
                    if (e.i) throw new Ke(1, 8, 8002);
                    return (
                      (e.j = new Ii()),
                      chrome.cast.requestSession(
                        function (t) {
                          return hf(e, t);
                        },
                        function (t) {
                          return pf(e, t);
                        },
                      ),
                      x(t, e.j, 0)
                    );
                  });
                }),
                (i.qd = function () {
                  if (this.i) {
                    if ((mf(this), xf)) {
                      ff(this);
                      try {
                        xf.stop(
                          function () {},
                          function () {},
                        );
                      } catch (fA) {}
                      xf = null;
                    }
                    gf(this);
                  }
                }),
                (i.get = function (e, t) {
                  var n = this;
                  if ("video" == e) {
                    if (nf.includes(t))
                      return function () {
                        return n.Mi.apply(n, [e, t].concat(m(P.apply(0, arguments))));
                      };
                  } else if ("player" == e) {
                    if (of.has(t) && !this.get("player", "isLive")()) return function () {};
                    if (lf.includes(t))
                      return function () {
                        return n.Mi.apply(n, [e, t].concat(m(P.apply(0, arguments))));
                      };
                    if (df.includes(t))
                      return function () {
                        return n.Pk.apply(n, [e, t].concat(m(P.apply(0, arguments))));
                      };
                    if (rf.has(t) || af.has(t))
                      return function () {
                        return n.g[e][t];
                      };
                  }
                  return this.g[e][t];
                }),
                (i.set = function (e, t, n) {
                  ((this.g[e][t] = n), vf(this, { type: "set", targetName: e, property: t, value: n }));
                }),
                (i.Mi = function (e, t) {
                  vf(this, { type: "call", targetName: e, methodName: t, args: P.apply(2, arguments) });
                }),
                (i.Pk = function (e, t) {
                  var n = P.apply(2, arguments),
                    r = new Ii(),
                    i = this.I.toString();
                  (this.I++, this.h.set(i, r));
                  try {
                    vf(this, { type: "asyncCall", targetName: e, methodName: t, args: n, id: i });
                  } catch (a) {
                    r.reject(a);
                  }
                  return r;
                }));
              var yf = 0.02,
                bf = !1,
                xf = null,
                Tf = null,
                wf = new Set();
              function Sf(t) {
                if ((Tf ? (e.__onGCastApiAvailable = Tf) : delete e.__onGCastApiAvailable, (Tf = null), t))
                  for (var n = g(wf), r = n.next(); !r.done; r = n.next()) r.value.init();
                "function" == typeof e.__onGCastApiAvailable && e.__onGCastApiAvailable(t);
              }
              function Af(t, n, r, i) {
                ((i = void 0 !== i && i), Ui.call(this));
                var a = this;
                ((this.i = t),
                  (this.h = n),
                  (this.l = this.o = this.m = this.u = this.j = null),
                  (this.I = r),
                  (this.H = i),
                  (this.F = []),
                  (this.C = []),
                  (this.B = []),
                  (this.G = new Map()),
                  (this.g = null),
                  e.chrome && "CAST" != oe().Oa()
                    ? ((this.g = new cf(
                        r,
                        function () {
                          return If(a);
                        },
                        function () {
                          return Cf(a);
                        },
                        function (e, t) {
                          return Df(a, e, t);
                        },
                        function () {
                          return Mf(a);
                        },
                        function () {
                          return kf(a);
                        },
                        i,
                      )),
                      (function (e) {
                        (e.g.init(), (e.l = new ne()));
                        for (var t = g(Zp), n = t.next(); !n.done; n = t.next())
                          e.l.D(e.i, n.value, function (t) {
                            e.g.wb() || ((t = Ni(t)), e.m.dispatchEvent(t));
                          });
                        for (var r in Oi)
                          e.l.D(e.h, Oi[r], function (t) {
                            e.g.wb() || e.o.dispatchEvent(t);
                          });
                        for (var i in ((e.j = {}), (t = {}), e.i))
                          (((t = { ie: t.ie }).ie = i),
                            Object.defineProperty(e.j, t.ie, {
                              configurable: !1,
                              enumerable: !0,
                              get: (function (t) {
                                return function () {
                                  return Rf(e, t.ie);
                                };
                              })(t),
                              set: (function (t) {
                                return function (n) {
                                  var r = t.ie;
                                  e.g.wb() ? e.g.set("video", r, n) : (e.i[r] = n);
                                };
                              })(t),
                            }));
                        ((e.u = {}),
                          Ef(e, function (t) {
                            Object.defineProperty(e.u, t, {
                              configurable: !1,
                              enumerable: !0,
                              get: function () {
                                return _f(e, t);
                              },
                            });
                          }),
                          (function (e) {
                            var t = new Map();
                            Ef(e, function (n, r) {
                              t.has(r)
                                ? ((r = t.get(r)), n.length < r.length ? e.G.set(n, r) : e.G.set(r, n))
                                : t.set(r, n);
                            });
                          })(e),
                          (e.m = new Ui()),
                          (e.m.Je = e.j),
                          (e.o = new Ui()),
                          (e.o.Je = e.u),
                          e.l.D(e.h, "unloading", function () {
                            (e.g && e.g.wb()) || Pf(e);
                          }));
                      })(this))
                    : ((this.j = this.i), (this.u = this.h)));
              }
              function Ef(e, t) {
                function n(e) {
                  return "constructor" != e && "function" == typeof i[e] && !a.has(e);
                }
                var r,
                  i = e.h,
                  a = new Set();
                for (r in i) n(r) && (a.add(r), t(r, i[r]));
                for (e = Object.getPrototypeOf(i), r = Object.getPrototypeOf({}); e && e != r; ) {
                  for (var o = g(Object.getOwnPropertyNames(e)), s = o.next(); !s.done; s = o.next())
                    n((s = s.value)) && (a.add(s), t(s, i[s]));
                  e = Object.getPrototypeOf(e);
                }
              }
              function kf(e) {
                var t = {
                  video: {},
                  player: {},
                  playerAfterLoad: {},
                  manifest: e.h.rd(),
                  startTime: null,
                  addThumbnailsTrackCalls: e.F,
                  addTextTrackAsyncCalls: e.C,
                  addChaptersTrackCalls: e.B,
                };
                e.i.pause();
                for (var n = g(tf), r = n.next(); !r.done; r = n.next())
                  ((r = r.value), (t.video[r] = e.i[r]));
                for (
                  e.i.ended || (t.startTime = e.i.currentTime), r = (n = g(sf)).next();
                  !r.done;
                  r = n.next()
                ) {
                  var i = r.value;
                  ((r = i[1]), (i = e.h[i[0]]()), (t.player[r] = i));
                }
                for (r = (n = g(uf)).next(); !r.done; r = n.next())
                  ((r = (i = r.value)[1]), (i = e.h[i[0]]()), (t.playerAfterLoad[r] = i));
                return t;
              }
              function If(e) {
                var t = new Li("caststatuschanged");
                e.dispatchEvent(t);
              }
              function Cf(e) {
                var t = new Li(e.j.paused ? "pause" : "play");
                e.m.dispatchEvent(t);
              }
              function Mf(e) {
                for (var t = g(sf), n = t.next(); !n.done; n = t.next()) {
                  var r = n.value;
                  ((n = r[1]), (r = e.g.get("player", r[0])()), e.h[n](r));
                }
                var i = e.F,
                  a = e.C,
                  o = e.B;
                Pf(e);
                var s = e.g.get("player", "getAssetUri")();
                ((r = e.g.get("video", "ended")), (t = Promise.resolve()));
                var u,
                  l = e.i.autoplay;
                ((n = null),
                  r || (n = e.g.get("video", "currentTime")),
                  (r = e.g.get("player", "getTextTracks")()) &&
                    r.length &&
                    (u = r.find(function (e) {
                      return e.active;
                    })));
                var d = e.g.get("player", "isTextTrackVisible")();
                s && ((e.i.autoplay = !1), (t = e.h.load(s, n)));
                var c = {};
                for (r = (n = g(tf)).next(); !r.done; r = n.next())
                  ((r = r.value), (c[r] = e.g.get("video", r)));
                t.then(
                  function () {
                    if (e.i) {
                      for (var t = g(i), n = t.next(); !n.done; n = t.next()) {
                        var r;
                        ((n = n.value), (r = e.td()).Pe.apply(r, m(n)));
                      }
                      for (r = (t = g(a)).next(); !r.done; r = t.next()) {
                        var h;
                        ((r = r.value), (h = e.td()).Rd.apply(h, m(r)));
                      }
                      for (t = (h = g(o)).next(); !t.done; t = h.next()) {
                        var p;
                        ((t = t.value), (p = e.td()).Oe.apply(p, m(t)));
                      }
                      for (h = (p = g(tf)).next(); !h.done; h = p.next()) ((h = h.value), (e.i[h] = c[h]));
                      for (h = (p = g(uf)).next(); !h.done; h = p.next())
                        ((h = (t = h.value)[1]), (t = e.g.get("player", t[0])()), e.h[h](t));
                      (e.h.wh(d),
                        u && e.h.oh(u.language, u.roles, u.forced),
                        (e.i.autoplay = l),
                        s && e.i.play());
                    }
                  },
                  function (t) {
                    ((t = new Li("error", (t = new Map().set("detail", t)))), e.h.dispatchEvent(t));
                  },
                );
              }
              function Rf(e, t) {
                if ("addEventListener" == t)
                  return function (t, n, r) {
                    return e.m.addEventListener(t, n, r);
                  };
                if ("removeEventListener" == t)
                  return function (t, n, r) {
                    return e.m.removeEventListener(t, n, r);
                  };
                if (e.g.wb() && 0 == Object.keys(e.g.g.video).length) {
                  var n = e.i[t];
                  if ("function" != typeof n) return n;
                }
                return e.g.wb()
                  ? e.g.get("video", t)
                  : ("function" == typeof (t = e.i[t]) && (t = t.bind(e.i)), t);
              }
              function _f(e, t, n) {
                if (((n = void 0 !== n && n), e.G.has(t) && (t = e.G.get(t)), "addEventListener" == t))
                  return function (t, n, r) {
                    return e.o.addEventListener(t, n, r);
                  };
                if ("removeEventListener" == t)
                  return function (t, n, r) {
                    return e.o.removeEventListener(t, n, r);
                  };
                if ("getMediaElement" == t)
                  return function () {
                    return e.j;
                  };
                if ("getSharedConfiguration" == t) return e.g.get("player", "getConfiguration");
                if ("getNetworkingEngine" == t)
                  return function () {
                    return e.h.Yb();
                  };
                if ("getDrmEngine" == t)
                  return function () {
                    return e.h.F;
                  };
                if ("getAdManager" == t)
                  return function () {
                    return e.h.di();
                  };
                if ("getQueueManager" == t)
                  return function () {
                    return e.h.mi();
                  };
                if ("setVideoContainer" == t)
                  return function (t) {
                    return e.h.Zi(t);
                  };
                if (!n) {
                  if ("addThumbnailsTrack" == t)
                    return function () {
                      var n = P.apply(0, arguments);
                      return (e.F.push(n), _f(e, t, !0).apply(null, m(n)));
                    };
                  if ("addTextTrackAsync" == t)
                    return function () {
                      var n = P.apply(0, arguments);
                      return (e.C.push(n), _f(e, t, !0).apply(null, m(n)));
                    };
                  if ("addChaptersTrack" == t)
                    return function () {
                      var n = P.apply(0, arguments);
                      return (e.B.push(n), _f(e, t, !0).apply(null, m(n)));
                    };
                }
                if (e.g.wb()) {
                  if ("getManifest" == t || "drmInfo" == t)
                    return function () {
                      return (K(t + "() does not work while casting!"), null);
                    };
                  if ("attach" == t || "detach" == t)
                    return function () {
                      return (K(t + "() does not work while casting!"), Promise.resolve());
                    };
                  if ("getChapters" == t)
                    return function () {
                      return (K(t + "() does not work while casting!"), []);
                    };
                }
                return (e.g.wb() && 0 == Object.keys(e.g.g.video).length && (rf.has(t) || af.has(t))) ||
                  !e.g.wb()
                  ? e.h[t].bind(e.h)
                  : e.g.get("player", t);
              }
              function Df(e, t, n) {
                e.g.wb() &&
                  ("video" == t
                    ? e.m.dispatchEvent(n)
                    : "player" == t && ("unloading" == n.type && Pf(e), e.o.dispatchEvent(n)));
              }
              function Pf(e) {
                ((e.F = []), (e.C = []), (e.B = []));
              }
              function Lf(e, t, n, r) {
                Ui.call(this);
                var i = this;
                ((this.h = e),
                  (this.g = t),
                  (this.j = new ne()),
                  (this.I = { video: e, player: t }),
                  (this.G = n || function () {}),
                  (this.J =
                    r ||
                    function (e) {
                      return e;
                    }),
                  (this.i = null),
                  (this.H = !1),
                  (this.o = !0),
                  (this.m = 0),
                  (this.C = !1),
                  (this.B = !0),
                  (this.u = this.l = null),
                  (this.F = new Mr(function () {
                    Bf(i);
                  })),
                  (function (e) {
                    var t = cast.receiver.CastReceiverManager.getInstance();
                    ((t.onSenderConnected = function () {
                      return Nf(e);
                    }),
                      (t.onSenderDisconnected = function () {
                        return Nf(e);
                      }),
                      (t.onSystemVolumeChanged = function () {
                        var t = cast.receiver.CastReceiverManager.getInstance().getSystemVolume();
                        (t &&
                          Hf(
                            e,
                            { type: "update", update: { video: { volume: t.level, muted: t.muted } } },
                            e.l,
                          ),
                          Hf(
                            e,
                            { type: "event", targetName: "video", event: { type: "volumechange" } },
                            e.l,
                          ));
                      }),
                      (e.u = t.getCastMessageBus("urn:x-cast:com.google.cast.media")),
                      (e.u.onMessage = function (t) {
                        return (function (e, t) {
                          var n = Qp(t.data);
                          switch (n.type) {
                            case "PLAY":
                              (e.h.play(), Gf(e));
                              break;
                            case "PAUSE":
                              (e.h.pause(), Gf(e));
                              break;
                            case "SEEK":
                              t = n.currentTime;
                              var r = n.resumeState;
                              (null != t && (e.h.currentTime = Number(t)),
                                r && "PLAYBACK_START" == r
                                  ? (e.h.play(), Gf(e))
                                  : r && "PLAYBACK_PAUSE" == r && (e.h.pause(), Gf(e)));
                              break;
                            case "STOP":
                              e.g.Cc().then(function () {
                                e.g && Gf(e);
                              });
                              break;
                            case "GET_STATUS":
                              Ff(e, Number(n.requestId));
                              break;
                            case "VOLUME":
                              ((t = (r = n.volume).level), (r = r.muted));
                              var i = e.h.volume,
                                a = e.h.muted;
                              (null != t && (e.h.volume = Number(t)),
                                null != r && (e.h.muted = r),
                                (i == e.h.volume && a == e.h.muted) || Gf(e));
                              break;
                            case "LOAD":
                              ((e.m = 0),
                                (e.C = !1),
                                (e.B = !1),
                                (t = n.media),
                                (r = n.currentTime),
                                (i = e.J(t.contentId)),
                                (a = n.autoplay || !0),
                                e.G(t.customData),
                                a && (e.h.autoplay = !0),
                                e.g
                                  .load(i, r)
                                  .then(function () {
                                    e.g && Ff(e);
                                  })
                                  .catch(function (t) {
                                    var r = "LOAD_FAILED";
                                    (7 == t.category && 7e3 == t.code && (r = "LOAD_CANCELLED"),
                                      Hf(e, { requestId: Number(n.requestId), type: r }, e.u));
                                  }));
                              break;
                            default:
                              Hf(
                                e,
                                {
                                  requestId: Number(n.requestId),
                                  type: "INVALID_REQUEST",
                                  reason: "INVALID_COMMAND",
                                },
                                e.u,
                              );
                          }
                        })(e, t);
                      }),
                      (e.l = t.getCastMessageBus("urn:x-cast:com.google.shaka.v2")),
                      (e.l.onMessage = function (t) {
                        return (function (e, t) {
                          var n = Qp(t.data);
                          switch (n.type) {
                            case "init":
                              ((e.m = 0),
                                (e.C = !1),
                                (e.B = !0),
                                (function (e, t, n) {
                                  var r, i, a, o, s, u, l, d, c, h, p, f, v, y, b, S, k, I, C;
                                  D(function (M) {
                                    switch (M.g) {
                                      case 1:
                                        for (r in t.player) ((i = t.player[r]), e.g[r](i));
                                        return (
                                          e.G(n),
                                          (a = e.h.autoplay),
                                          t.manifest
                                            ? ((e.h.autoplay = !1),
                                              w(M, 5),
                                              x(M, e.g.load(t.manifest, t.startTime), 7))
                                            : x(M, Promise.resolve(), 3)
                                        );
                                      case 7:
                                        if (t.addThumbnailsTrackCalls)
                                          for (
                                            o = g(t.addThumbnailsTrackCalls), s = o.next();
                                            !s.done;
                                            s = o.next()
                                          )
                                            ((u = s.value), e.g.Pe.apply(e.g, m(u)));
                                        if (t.addTextTrackAsyncCalls)
                                          for (
                                            l = g(t.addTextTrackAsyncCalls), d = l.next();
                                            !d.done;
                                            d = l.next()
                                          )
                                            ((c = d.value), e.g.Rd.apply(e.g, m(c)));
                                        if (t.addChaptersTrackCalls)
                                          for (
                                            h = g(t.addChaptersTrackCalls), p = h.next();
                                            !p.done;
                                            p = h.next()
                                          )
                                            ((f = p.value), e.g.Oe.apply(e.g, m(f)));
                                        A(M, 3);
                                        break;
                                      case 5:
                                        return (
                                          (v = E(M)),
                                          (y = new Map().set("detail", v)),
                                          (b = new Li("error", y)),
                                          e.g && e.g.dispatchEvent(b),
                                          M.return()
                                        );
                                      case 3:
                                        if (!e.g) return M.return();
                                        for (S in t.video) ((k = t.video[S]), (e.h[S] = k));
                                        for (I in t.playerAfterLoad) ((C = t.playerAfterLoad[I]), e.g[I](C));
                                        ((e.h.autoplay = a), t.manifest && (e.h.play(), Gf(e)), T(M));
                                    }
                                  });
                                })(e, n.initState, n.appData),
                                Bf(e));
                              break;
                            case "appData":
                              e.G(n.appData);
                              break;
                            case "set":
                              var r = n.targetName,
                                i = n.property;
                              if (((n = n.value), "video" == r)) {
                                if (((t = cast.receiver.CastReceiverManager.getInstance()), "volume" == i)) {
                                  t.setSystemVolumeLevel(n);
                                  break;
                                }
                                if ("muted" == i) {
                                  t.setSystemVolumeMuted(n);
                                  break;
                                }
                              }
                              e.I[r][i] = n;
                              break;
                            case "call":
                              (r = e.I[n.targetName])[n.methodName].apply(r, n.args);
                              break;
                            case "asyncCall":
                              ((r = n.targetName),
                                (i = n.methodName),
                                "player" == r && "load" == i && ((e.m = 0), (e.C = !1)));
                              var a = n.id,
                                o = t.senderId;
                              ((n = (t = e.I[r])[i].apply(t, n.args)),
                                "player" == r &&
                                  "load" == i &&
                                  (n = n.then(function () {
                                    e.B = !0;
                                  })),
                                n.then(
                                  function (t) {
                                    return Vf(e, o, a, null, t);
                                  },
                                  function (t) {
                                    return Vf(e, o, a, t, null);
                                  },
                                ));
                          }
                        })(e, t);
                      }),
                      t.start());
                    for (var n = (t = g(Zp)).next(); !n.done; n = t.next())
                      e.j.D(e.h, n.value, function (t) {
                        return Uf(e, "video", t);
                      });
                    for (var r in Oi)
                      e.j.D(e.g, Oi[r], function (t) {
                        return Uf(e, "player", t);
                      });
                    (e.j.D(e.h, "loadeddata", function () {
                      e.C = !0;
                    }),
                      e.j.D(e.g, "loading", function () {
                        ((e.o = !1), Of(e));
                      }),
                      e.j.D(e.h, "playing", function () {
                        ((e.o = !1), Of(e));
                      }),
                      e.j.D(e.h, "pause", function () {
                        Of(e);
                      }),
                      e.j.D(e.g, "unloading", function () {
                        ((e.o = !0), Of(e));
                      }),
                      e.j.D(e.h, "ended", function () {
                        new Mr(function () {
                          e.h && e.h.ended && ((e.o = !0), Of(e));
                        }).ka(Xf);
                      }));
                  })(this));
              }
              function Nf(e) {
                ((e.m = 0),
                  (e.B = !0),
                  (e.H = 0 != cast.receiver.CastReceiverManager.getInstance().getSenders().length),
                  Of(e));
              }
              function Of(e) {
                var t;
                D(function (n) {
                  return 1 == n.g
                    ? x(n, Promise.resolve(), 2)
                    : e.g
                      ? ((t = new Li("caststatuschanged")), e.dispatchEvent(t), jf(e) || Gf(e), void T(n))
                      : n.return();
                });
              }
              function Uf(e, t, n) {
                e.g && (Bf(e), Hf(e, { type: "event", targetName: t, event: n }, e.l));
              }
              function Bf(e) {
                e.F.ka(zf);
                for (var t = { video: {}, player: {} }, n = g(ef), r = n.next(); !r.done; r = n.next())
                  ((r = r.value), (t.video[r] = e.h[r]));
                (e.g.W() &&
                  of.forEach(function (n, r) {
                    e.m % n == 0 && (t.player[r] = e.g[r]());
                  }),
                  rf.forEach(function (n, r) {
                    e.m % n == 0 && (t.player[r] = e.g[r]());
                  }),
                  (n = cast.receiver.CastReceiverManager.getInstance().getSystemVolume()) &&
                    ((t.video.volume = n.level), (t.video.muted = n.muted)),
                  Hf(e, { type: "update", update: t }, e.l),
                  af.forEach(function (t, n) {
                    e.m % t == 0 &&
                      (((t = { player: {} }).player[n] = e.g[n]()),
                      Hf(e, { type: "update", update: t }, e.l));
                  }),
                  e.C && (e.m += 1),
                  jf(e));
              }
              function jf(e) {
                return !(!e.B || (!e.h.duration && !e.g.W()) || (Ff(e), (e.B = !1), 0));
              }
              function Ff(e, t) {
                var n = { contentId: e.g.rd(), streamType: e.g.W() ? "LIVE" : "BUFFERED", contentType: "" };
                (e.g.W() || (n.duration = e.h.duration),
                  e.i && (n.metadata = e.i),
                  Gf(e, void 0 === t ? 0 : t, n));
              }
              function Vf(e, t, n, r, i) {
                e.g && Hf(e, { type: "asyncComplete", id: n, error: r, res: i }, e.l, t);
              }
              function Hf(e, t, n, r) {
                e.H && ((e = Jp(t)), r ? n.getCastChannel(r).send(e) : n.broadcast(e));
              }
              function Gf(e, t, n) {
                n = void 0 === n ? null : n;
                var r = {
                  mediaSessionId: 0,
                  playbackRate: e.h.playbackRate,
                  playerState: e.o ? Wf : e.g.Rg() ? qf : e.h.paused ? Yf : Kf,
                  currentTime: e.h.currentTime,
                  supportedMediaCommands: 63,
                  volume: { level: e.h.volume, muted: e.h.muted },
                };
                (n && (r.media = n),
                  Hf(e, { requestId: void 0 === t ? 0 : t, type: "MEDIA_STATUS", status: [r] }, e.u));
              }
              (p(Af, Ui),
                ((i = Af.prototype).destroy = function (e) {
                  return (
                    this.g && void 0 !== e && e && this.g.qd(),
                    this.l && (this.l.release(), (this.l = null)),
                    (e = []),
                    this.h && (e.push(this.h.destroy()), (this.h = null)),
                    this.g && (e.push(this.g.destroy()), (this.g = null)),
                    (this.u = this.j = this.i = null),
                    Ui.prototype.release.call(this),
                    Promise.all(e)
                  );
                }),
                (i.gk = function () {
                  return this.j;
                }),
                (i.td = function () {
                  return this.u;
                }),
                (i.sj = function () {
                  return !!this.g && this.g.m && bf;
                }),
                (i.wb = function () {
                  return !!this.g && this.g.wb();
                }),
                (i.eh = function () {
                  return this.g ? this.g.eh() : "";
                }),
                (i.cast = function () {
                  var e = this;
                  return D(function (t) {
                    return 1 == t.g
                      ? e.g
                        ? x(t, e.g.cast(), 2)
                        : t.return()
                      : e.h
                        ? x(t, e.h.Cc(), 0)
                        : t.return();
                  });
                }),
                (i.qh = function (e) {
                  this.g && this.g.qh(e);
                }),
                (i.il = function () {
                  var e;
                  this.g &&
                    (e = this.g).i &&
                    chrome.cast.requestSession(
                      function (t) {
                        return hf(e, t);
                      },
                      function (t) {
                        return pf(e, t);
                      },
                    );
                }),
                (i.qd = function () {
                  this.g && this.g.qd();
                }),
                (i.tj = function (e, t) {
                  t = void 0 !== t && t;
                  var n = this;
                  return D(function (r) {
                    if (1 == r.g)
                      return e == n.I && t == n.H
                        ? r.return()
                        : ((n.I = e), (n.H = t), n.g ? (n.g.qd(), x(r, n.g.destroy(), 2)) : r.return());
                    ((n.g = null),
                      (n.g = new cf(
                        e,
                        function () {
                          return If(n);
                        },
                        function () {
                          return Cf(n);
                        },
                        function (e, t) {
                          return Df(n, e, t);
                        },
                        function () {
                          return Mf(n);
                        },
                        function () {
                          return kf(n);
                        },
                        t,
                      )),
                      n.g.init(),
                      T(r));
                  });
                }),
                V("shaka.cast.CastProxy", Af),
                (Af.prototype.changeReceiverId = Af.prototype.tj),
                (Af.prototype.forceDisconnect = Af.prototype.qd),
                (Af.prototype.suggestDisconnect = Af.prototype.il),
                (Af.prototype.setAppData = Af.prototype.qh),
                (Af.prototype.cast = Af.prototype.cast),
                (Af.prototype.receiverName = Af.prototype.eh),
                (Af.prototype.isCasting = Af.prototype.wb),
                (Af.prototype.canCast = Af.prototype.sj),
                (Af.prototype.getPlayer = Af.prototype.td),
                (Af.prototype.getVideo = Af.prototype.gk),
                (Af.prototype.destroy = Af.prototype.destroy),
                p(Lf, Ui),
                ((i = Lf.prototype).isConnected = function () {
                  return this.H;
                }),
                (i.pk = function () {
                  return this.o;
                }),
                (i.al = function (e) {
                  this.i = e;
                }),
                (i.xj = function () {
                  this.i = null;
                }),
                (i.cl = function (e) {
                  (this.i || (this.i = { metadataType: cast.receiver.media.MetadataType.GENERIC }),
                    (this.i.title = e));
                }),
                (i.$k = function (e) {
                  (this.i || (this.i = { metadataType: cast.receiver.media.MetadataType.GENERIC }),
                    (this.i.images = [{ url: e }]));
                }),
                (i.Zk = function (e) {
                  (this.i || (this.i = {}),
                    (this.i.artist = e),
                    (this.i.metadataType = cast.receiver.media.MetadataType.MUSIC_TRACK));
                }),
                (i.destroy = function () {
                  var e,
                    t = this;
                  return D(function (n) {
                    if (1 == n.g)
                      return (
                        t.j && (t.j.release(), (t.j = null)),
                        (e = []),
                        t.g && (e.push(t.g.destroy()), (t.g = null)),
                        t.F && (t.F.stop(), (t.F = null)),
                        (t.h = null),
                        (t.I = null),
                        (t.G = null),
                        (t.H = !1),
                        (t.o = !0),
                        (t.l = null),
                        (t.u = null),
                        Ui.prototype.release.call(t),
                        x(n, Promise.all(e), 2)
                      );
                    (cast.receiver.CastReceiverManager.getInstance().stop(), T(n));
                  });
                }),
                V("shaka.cast.CastReceiver", Lf),
                (Lf.prototype.destroy = Lf.prototype.destroy),
                (Lf.prototype.setContentArtist = Lf.prototype.Zk),
                (Lf.prototype.setContentImage = Lf.prototype.$k),
                (Lf.prototype.setContentTitle = Lf.prototype.cl),
                (Lf.prototype.clearContentMetadata = Lf.prototype.xj),
                (Lf.prototype.setContentMetadata = Lf.prototype.al),
                (Lf.prototype.isIdle = Lf.prototype.pk),
                (Lf.prototype.isConnected = Lf.prototype.isConnected));
              var zf = 0.5,
                Xf = 5,
                Wf = "IDLE",
                Kf = "PLAYING",
                qf = "BUFFERING",
                Yf = "PAUSED";
              function $f(e, t, n, r, i) {
                if (r >= i) return null;
                for (var a = -1, o = -1, s = 0; s < n.length; s++)
                  if (
                    n[s].some(function (e) {
                      return null != e && "" != e.g.trim();
                    })
                  ) {
                    a = s;
                    break;
                  }
                for (s = n.length - 1; s >= 0; s--)
                  if (
                    n[s].some(function (e) {
                      return null != e && "" != e.g.trim();
                    })
                  ) {
                    o = s;
                    break;
                  }
                if (-1 === a || -1 === o) return null;
                for (var u = (s = !1), l = "white", d = "black", c = Jf(r, i, s, u, l, d); a <= o; a++) {
                  for (var h = n[a], p = -1, f = -1, g = 0; g < h.length; g++)
                    if (null != h[g] && "" !== h[g].g.trim()) {
                      p = g;
                      break;
                    }
                  for (g = h.length - 1; g >= 0; g--)
                    if (null != h[g] && "" !== h[g].g.trim()) {
                      f = g;
                      break;
                    }
                  if (-1 === p || -1 === f) ((h = Qf(r, i)), e.nestedCues.push(h));
                  else {
                    for (; p <= f; p++)
                      if ((g = h[p])) {
                        var m = g.l,
                          v = g.i,
                          y = g.j,
                          b = g.h;
                        ((m == s && v == u && y == l && b == d) ||
                          (c.payload && e.nestedCues.push(c),
                          (c = Jf(r, i, m, v, y, b)),
                          (s = m),
                          (u = v),
                          (l = y),
                          (d = b)),
                          (c.payload += g.g));
                      } else c.payload += " ";
                    (c.payload && e.nestedCues.push(c),
                      a !== o && ((c = Qf(r, i)), e.nestedCues.push(c)),
                      (c = Jf(r, i, s, u, l, d)));
                  }
                }
                return e.nestedCues.length ? { cue: e, stream: t } : null;
              }
              function Jf(e, t, n, r, i, a) {
                return (
                  (e = new Cn(e, t, "")),
                  n && e.textDecoration.push(Qn),
                  r && (e.fontStyle = $n),
                  (e.color = i),
                  (e.backgroundColor = a),
                  e
                );
              }
              function Qf(e, t) {
                return (((e = new Cn(e, t, "")).lineBreak = !0), e);
              }
              function Zf(e, t, n, r, i) {
                ((this.g = e), (this.l = t), (this.i = n), (this.h = r), (this.j = i));
              }
              function eg(e, t) {
                ((this.i = []),
                  (this.g = 1),
                  (this.h = 0),
                  (this.F = e),
                  (this.C = t),
                  (this.j = this.m = !1),
                  (this.l = "white"),
                  (this.o = "black"),
                  (this.u = this.B = null),
                  ng(this));
              }
              function tg(e, t, n) {
                var r = "CC" + (1 + ((e.F << 1) | e.C)),
                  i = new Cn(t, n, "");
                i.lineInterpretation = 1;
                var a = dg.get(e.g);
                return (
                  a && (i.line = a),
                  null != e.u && null != e.B && (i.position = 10 + Math.min(70, 10 * e.u) + 2.5 * e.B),
                  (t = $f(i, r, e.i, t, n)) &&
                    e.g + t.cue.nestedCues.length - 3 > 15 &&
                    (a = dg.get(e.g + 3 - t.cue.nestedCues.length)) &&
                    (i.line = a),
                  t
                );
              }
              function ng(e) {
                (ag(e, 0, 15), (e.g = 1));
              }
              function rg(e, t, n) {
                if (!(n < 32 || n > 127)) {
                  var r = "";
                  switch (t) {
                    case 0:
                      r = og.has(n) ? og.get(n) : String.fromCharCode(n);
                      break;
                    case 1:
                      r = sg.get(n);
                      break;
                    case 2:
                      (e.i[e.g].pop(), (r = ug.get(n)));
                      break;
                    case 3:
                      (e.i[e.g].pop(), (r = lg.get(n)));
                  }
                  r && e.i[e.g].push(new Zf(r, e.m, e.j, e.o, e.l));
                }
              }
              function ig(e, t, n, r) {
                if (!(n < 0 || t < 0))
                  if (t >= n)
                    for (--r; r >= 0; r--)
                      e.i[t + r] = e.i[n + r].map(function (e) {
                        return e;
                      });
                  else
                    for (var i = 0; i < r; i++)
                      e.i[t + i] = e.i[n + i].map(function (e) {
                        return e;
                      });
              }
              function ag(e, t, n) {
                for (var r = 0; r <= n; r++) e.i[t + r] = [];
              }
              var og = new Map([
                  [39, ""],
                  [42, ""],
                  [92, ""],
                  [92, ""],
                  [94, ""],
                  [95, ""],
                  [96, ""],
                  [123, ""],
                  [124, ""],
                  [125, ""],
                  [126, ""],
                  [127, ""],
                ]),
                sg = new Map([
                  [48, ""],
                  [49, ""],
                  [50, ""],
                  [51, ""],
                  [52, ""],
                  [53, ""],
                  [54, ""],
                  [55, ""],
                  [56, ""],
                  [57, " "],
                  [58, ""],
                  [59, ""],
                  [60, ""],
                  [61, ""],
                  [62, ""],
                  [63, ""],
                ]),
                ug = new Map([
                  [32, ""],
                  [33, ""],
                  [34, ""],
                  [35, ""],
                  [36, ""],
                  [37, ""],
                  [38, ""],
                  [39, ""],
                  [40, "*"],
                  [41, "'"],
                  [42, ""],
                  [43, ""],
                  [44, ""],
                  [45, ""],
                  [46, ""],
                  [47, ""],
                  [48, ""],
                  [49, ""],
                  [50, ""],
                  [51, ""],
                  [52, ""],
                  [53, ""],
                  [54, ""],
                  [55, ""],
                  [56, ""],
                  [57, ""],
                  [58, ""],
                  [59, ""],
                  [60, ""],
                  [61, ""],
                  [62, ""],
                  [63, ""],
                ]),
                lg = new Map([
                  [32, ""],
                  [33, ""],
                  [34, ""],
                  [35, ""],
                  [36, ""],
                  [37, ""],
                  [38, ""],
                  [39, ""],
                  [40, ""],
                  [41, "{"],
                  [42, "}"],
                  [43, "\\"],
                  [44, "^"],
                  [45, "_"],
                  [46, "|"],
                  [47, "~"],
                  [48, ""],
                  [49, ""],
                  [50, ""],
                  [51, ""],
                  [52, ""],
                  [53, ""],
                  [54, ""],
                  [55, ""],
                  [56, ""],
                  [57, ""],
                  [58, ""],
                  [59, ""],
                  [60, ""],
                  [61, ""],
                  [62, ""],
                  [63, ""],
                ]),
                dg = new Map([
                  [1, 10],
                  [2, 15.33],
                  [3, 20.66],
                  [4, 26],
                  [5, 31.33],
                  [6, 36.66],
                  [7, 42],
                  [8, 47.33],
                  [9, 52.66],
                  [10, 58],
                  [11, 63.33],
                  [12, 68.66],
                  [13, 74],
                  [14, 79.33],
                  [15, 84.66],
                ]);
              function cg(e, t) {
                ((this.h = 0),
                  (this.o = new eg(e, t)),
                  (this.i = new eg(e, t)),
                  (this.g = this.j = new eg(e, t)),
                  (this.l = 0),
                  (this.m = null));
              }
              function hg(e, t, n) {
                e.g = e.i;
                var r = e.g,
                  i = null;
                return (
                  3 !== e.h &&
                    4 !== e.h &&
                    ((i = tg(r, e.l, n)),
                    ((n = e.i).g = n.h > 0 ? n.h : 0),
                    ag(n, 0, 15),
                    ((n = e.j).g = n.h > 0 ? n.h : 0),
                    ag(n, 0, 15),
                    (r.g = 15)),
                  (e.h = 3),
                  (r.h = t),
                  i
                );
              }
              function pg(e) {
                ((e.h = 1), (e.g = e.j), (e.g.h = 0));
              }
              function fg(e) {
                (q("Cea608DataChannel", "CEA-608 text mode entered, but is unsupported"),
                  (e.g = e.o),
                  (e.h = 4));
              }
              var gg = "black green blue cyan red yellow magenta black".split(" "),
                mg = "white green blue cyan red yellow magenta white_italics".split(" ");
              function vg(e, t) {
                ((this.J = t),
                  (this.N = e),
                  (this.K = this.l = !1),
                  (this.m = this.o = this.H = this.M = this.I = 0),
                  (this.G = 2),
                  (this.i = []),
                  (this.g = this.h = this.j = 0),
                  (this.F = this.B = !1),
                  (this.C = "white"),
                  (this.u = "black"),
                  yg(this));
              }
              function yg(e) {
                e.i = [];
                for (var t = 0; t < 16; t++) e.i.push(bg());
              }
              function bg() {
                for (var e = [], t = 0; t < 42; t++) e.push(null);
                return e;
              }
              function xg(e, t) {
                Tg(e) && ((e.i[e.h][e.g] = new Zf(t, e.F, e.B, e.u, e.C)), e.g++);
              }
              function Tg(e) {
                var t = e.g < e.m && e.g >= 0;
                return e.h < e.o && e.h >= 0 && t;
              }
              function wg(e, t, n) {
                var r = new Cn(e.j, t, "");
                r.textAlign = 0 === e.G ? "left" : 1 === e.G ? "right" : On;
                var i = r.region;
                switch (
                  (e.J && (i.id += "svc" + e.J),
                  (i.id += "win" + e.N),
                  (i.height = e.o),
                  (i.width = e.m),
                  (i.heightUnits = 2),
                  (i.widthUnits = 2),
                  (i.viewportAnchorX = e.I),
                  (i.viewportAnchorY = e.M),
                  (i.viewportAnchorUnits = e.K ? Ot : 2),
                  e.H)
                ) {
                  case 0:
                    ((i.regionAnchorX = 0), (i.regionAnchorY = 0));
                    break;
                  case 1:
                    ((i.regionAnchorX = 50), (i.regionAnchorY = 0));
                    break;
                  case 2:
                    ((i.regionAnchorX = 100), (i.regionAnchorY = 0));
                    break;
                  case 3:
                    ((i.regionAnchorX = 0), (i.regionAnchorY = 50));
                    break;
                  case 4:
                    ((i.regionAnchorX = 50), (i.regionAnchorY = 50));
                    break;
                  case 5:
                    ((i.regionAnchorX = 100), (i.regionAnchorY = 50));
                    break;
                  case 6:
                    ((i.regionAnchorX = 0), (i.regionAnchorY = 100));
                    break;
                  case 7:
                    ((i.regionAnchorX = 50), (i.regionAnchorY = 100));
                    break;
                  case 8:
                    ((i.regionAnchorX = 100), (i.regionAnchorY = 100));
                }
                return ((n = $f(r, "svc" + n, e.i, e.j, t)) && (e.j = t), n);
              }
              function Sg() {
                ((this.i = []), (this.h = null), (this.g = 0));
              }
              function Ag(e, t) {
                3 === t.type
                  ? ((e.g = 2 * (63 & t.value) - 1), (e.h = []))
                  : e.h &&
                    (e.g > 0 && (e.h.push(t), e.g--),
                    0 === e.g && (e.i.push(new Eg(e.h)), (e.h = null), (e.g = 0)));
              }
              function Eg(e) {
                ((this.g = 0), (this.h = e));
              }
              function kg(e) {
                if (!e.Ia()) throw new Ke(2, 2, 3e3);
                return e.h[e.g++];
              }
              function Ig(e) {
                ((this.i = e), (this.h = [null, null, null, null, null, null, null, null]), (this.g = null));
              }
              function Cg(e, t, n, r) {
                if (!e.g) return [];
                if (24 == n)
                  return (
                    (n = kg(t).value),
                    (r = kg(t).value),
                    (n = [n, r]
                      .map(function (e) {
                        return ("0" + (255 & e).toString(16)).slice(-2);
                      })
                      .join("")),
                    xg(e.g, String.fromCharCode(parseInt(n, 16))),
                    []
                  );
                t = e.g;
                var i = null;
                switch (n) {
                  case 8:
                    !Tg(t) ||
                      (t.g <= 0 && t.h <= 0) ||
                      (t.g <= 0 ? ((t.g = t.m - 1), t.h--) : t.g--, (t.i[t.h][t.g] = null));
                    break;
                  case 13:
                    (t.isVisible() && (i = wg(t, r, e.i)),
                      t.h + 1 >= t.o
                        ? (function (e) {
                            for (var t = 0, n = 1; n < 16; n++, t++) e.i[t] = e.i[n];
                            for (n = 0; n < 1; n++, t++) e.i[t] = bg();
                          })(t)
                        : t.h++,
                      (t.g = 0));
                    break;
                  case 14:
                    (t.isVisible() && (i = wg(t, r, e.i)), (t.i[t.h] = bg()), (t.g = 0));
                    break;
                  case 12:
                    (t.isVisible() && (i = wg(t, r, e.i)), yg(t), (t.h = 0), (t.g = 0));
                }
                return i ? [i] : [];
              }
              function Mg(e, t, n, r) {
                if (n >= 128 && n <= 135) ((r = 7 & n), e.h[r] && (e.g = e.h[r]));
                else {
                  if (136 === n) {
                    ((n = kg(t).value), (t = []));
                    for (var i = (n = g(Rg(e, n))).next(); !i.done; i = n.next()) {
                      if ((i = e.h[i.value]).isVisible()) {
                        var a = wg(i, r, e.i);
                        a && t.push(a);
                      }
                      yg(i);
                    }
                    return t;
                  }
                  if (137 === n)
                    for (n = (t = g(Rg(e, (t = kg(t).value)))).next(); !n.done; n = t.next())
                      ((n = e.h[n.value]).isVisible() || (n.j = r), n.display());
                  else {
                    if (138 === n) {
                      for (n = kg(t).value, t = null, i = (n = g(Rg(e, n))).next(); !i.done; i = n.next())
                        ((i = e.h[i.value]).isVisible() && (t = wg(i, r, e.i)), (i.l = !1));
                      return t ? [t] : [];
                    }
                    if (139 === n) {
                      for (n = kg(t).value, t = null, i = (n = g(Rg(e, n))).next(); !i.done; i = n.next())
                        ((i = e.h[i.value]).isVisible() ? (t = wg(i, r, e.i)) : (i.j = r), (i.l = !i.l));
                      return t ? [t] : [];
                    }
                    if (140 === n) return _g(e, (t = kg(t).value), r);
                    if (143 === n) return ((r = _g(e, 255, r)), Dg(e), r);
                    if (144 === n)
                      (t.skip(1),
                        (r = kg(t).value),
                        e.g && ((e.g.B = (128 & r) > 0), (e.g.F = (64 & r) > 0)));
                    else if (145 === n)
                      ((r = kg(t).value),
                        (n = kg(t).value),
                        t.skip(1),
                        e.g &&
                          ((t = Pg((48 & n) >> 4, (12 & n) >> 2, 3 & n)),
                          (e.g.C = Pg((48 & r) >> 4, (12 & r) >> 2, 3 & r)),
                          (e.g.u = t)));
                    else if (146 === n)
                      ((r = kg(t).value), (t = kg(t).value), e.g && (((e = e.g).h = 15 & r), (e.g = 63 & t)));
                    else if (151 === n)
                      (t.skip(1), t.skip(1), (r = kg(t).value), t.skip(1), e.g && (e.g.G = 3 & r));
                    else if (n >= 152 && n <= 159) {
                      ((n = (15 & n) - 8),
                        (i = null !== e.h[n]) || (((a = new vg(n, e.i)).j = r), (e.h[n] = a)),
                        (r = kg(t).value),
                        (a = kg(t).value));
                      var o = kg(t).value,
                        s = kg(t).value,
                        u = kg(t).value;
                      ((t = kg(t).value),
                        (i && !(7 & t)) ||
                          (((t = e.h[n]).h = 0),
                          (t.g = 0),
                          (t.F = !1),
                          (t.B = !1),
                          (t.C = "white"),
                          (t.u = "black")),
                        ((t = e.h[n]).l = (32 & r) > 0),
                        (t.M = 127 & a),
                        (t.I = o),
                        (t.H = (240 & s) >> 4),
                        (t.K = (128 & a) > 0),
                        (t.o = 1 + (15 & s)),
                        (t.m = 1 + (63 & u)),
                        (e.g = e.h[n]));
                    }
                  }
                }
                return [];
              }
              function Rg(e, t) {
                for (var n = [], r = 0; r < 8; r++) (!(1 & ~t) && e.h[r] && n.push(r), (t >>= 1));
                return n;
              }
              function _g(e, t, n) {
                for (var r = [], i = (t = g(Rg(e, t))).next(); !i.done; i = t.next()) {
                  i = i.value;
                  var a = e.h[i];
                  (a.isVisible() && (a = wg(a, n, e.i)) && r.push(a), (e.h[i] = null));
                }
                return r;
              }
              function Dg(e) {
                ((e.g = null), (e.h = [null, null, null, null, null, null, null, null]));
              }
              function Pg(e, t, n) {
                var r = { 0: 0, 1: 0, 2: 1, 3: 1 };
                return Ng[((e = r[e]) << 2) | ((t = r[t]) << 1) | (n = r[n])];
              }
              ((vg.prototype.isVisible = function () {
                return this.l;
              }),
                (vg.prototype.display = function () {
                  this.l = !0;
                }),
                (Eg.prototype.Ia = function () {
                  return this.g < this.h.length;
                }),
                (Eg.prototype.Pa = function () {
                  return this.g;
                }),
                (Eg.prototype.skip = function (e) {
                  if (this.g + e > this.h.length) throw new Ke(2, 2, 3e3);
                  this.g += e;
                }),
                (Eg.prototype.Qi = function (e) {
                  if (this.g - e < 0) throw new Ke(2, 2, 3e3);
                  this.g -= e;
                }));
              var Lg = new Map([
                  [32, " "],
                  [33, ""],
                  [37, ""],
                  [42, ""],
                  [44, ""],
                  [48, ""],
                  [49, ""],
                  [50, ""],
                  [51, ""],
                  [52, ""],
                  [53, ""],
                  [57, ""],
                  [58, ""],
                  [60, ""],
                  [61, ""],
                  [63, ""],
                  [118, ""],
                  [119, ""],
                  [120, ""],
                  [121, ""],
                  [122, ""],
                  [123, ""],
                  [124, ""],
                  [125, ""],
                  [126, ""],
                  [127, ""],
                ]),
                Ng = "black blue green cyan red magenta yellow white".split(" ");
              function Og() {
                ((this.h = []),
                  (this.g = []),
                  (this.i = new Sg()),
                  (this.l = 0),
                  (this.m = new Map([
                    ["CC1", new cg(0, 0)],
                    ["CC2", new cg(0, 1)],
                    ["CC3", new cg(1, 0)],
                    ["CC4", new cg(1, 1)],
                  ])),
                  (this.u = this.o = 0),
                  (this.j = new Map()),
                  (this.C = !0),
                  (this.B = new Set()),
                  Ug(this));
              }
              function Ug(e) {
                ((e.o = 0), (e.u = 0));
                for (var t = g(e.m.values()), n = t.next(); !n.done; n = t.next())
                  (((n = n.value).h = 0), (n.g = n.j), (n.m = null), ng(n.i), ng(n.j), ng(n.o));
                e.C = !0;
              }
              function Bg(e, t) {
                var n = t.type;
                if (16 == (112 & t.Cb)) {
                  var r = (t.Cb >> 3) & 1;
                  0 === n ? (e.o = r) : (e.u = r);
                }
                if (
                  ((r = "CC" + (1 + ((n << 1) | (n ? e.u : e.o)))),
                  (n = e.m.get(r)),
                  (255 === t.Cb && 255 === t.kc) || (!t.Cb && !t.kc) || !Fg(t.Cb) || !Fg(t.kc))
                )
                  return (++e.l >= 45 && Ug(e), null);
                ((e.l = 0), (t.Cb &= 127), (t.kc &= 127));
                var i = t.Cb;
                if ((i >= 1 && i <= 15) || (!t.Cb && !t.kc)) return null;
                if (((i = null), 16 == (112 & t.Cb)))
                  e: {
                    if ((e.B.add(r), (r = t.Cb), (e = t.kc), n.m === ((r << 8) | e))) n.m = null;
                    else if (((n.m = (r << 8) | e), 16 == (240 & r) && 64 == (192 & e))) {
                      ((t = [11, 11, 1, 2, 3, 4, 12, 13, 14, 15, 5, 6, 7, 8, 9, 10][
                        ((7 & r) << 1) | ((e >> 5) & 1)
                      ]),
                        (r = "white"),
                        (i = !1));
                      var a = null,
                        o = e > 95 ? e - 96 : e - 64;
                      (o <= 13
                        ? (r = mg[Math.floor(o / 2)])
                        : o <= 15
                          ? (i = !0)
                          : (a = Math.floor((o - 16) / 2)),
                        (e = !(1 & ~e)),
                        4 !== n.h &&
                          ((o = n.g),
                          3 === n.h &&
                            t !== o.g &&
                            (ig(o, (n = 1 + t - o.h), 1 + o.g - o.h, o.h),
                            ag(o, 0, n - 1),
                            ag(o, t + 1, 15 - t)),
                          (o.g = t),
                          (o.m = e),
                          (o.j = i),
                          (o.l = r),
                          (o.u = a),
                          (o.o = "black")));
                    } else if (17 == (247 & r) && 32 == (240 & e))
                      ((n.g.m = !1),
                        (n.g.j = !1),
                        (n.g.l = "white"),
                        rg(n.g, 0, 32),
                        (r = !1),
                        "white_italics" === (t = mg[(14 & e) >> 1]) && ((t = "white"), (r = !0)),
                        (n.g.m = !(1 & ~e)),
                        (n.g.j = r),
                        (n.g.l = t));
                    else if ((16 == (247 & r) && 32 == (240 & e)) || (23 == (247 & r) && 45 == (255 & e)))
                      ((t = "black"), !(7 & r) && (t = gg[(14 & e) >> 1]), (n.g.o = t));
                    else if (17 == (247 & r) && 48 == (240 & e)) rg(n.g, 1, e);
                    else if (18 == (246 & r) && 32 == (224 & e)) rg(n.g, 1 & r ? 3 : 2, e);
                    else {
                      if (20 == (246 & r) && 32 == (240 & e)) {
                        switch (((e = t.pts), (r = null), t.kc)) {
                          case 32:
                            pg(n);
                            break;
                          case 33:
                            (n = n.g).i[n.g].pop();
                            break;
                          case 37:
                            r = hg(n, 2, e);
                            break;
                          case 38:
                            r = hg(n, 3, e);
                            break;
                          case 39:
                            r = hg(n, 4, e);
                            break;
                          case 40:
                            rg(n.g, 0, 32);
                            break;
                          case 41:
                            ((n.h = 2), (n.g = n.i), (n.g.h = 0), (n.l = e));
                            break;
                          case 42:
                            (ng(n.o), fg(n));
                            break;
                          case 43:
                            fg(n);
                            break;
                          case 44:
                            ((t = n.i), (r = null), 4 !== n.h && (r = tg(t, n.l, e)), ag(t, 0, 15));
                            break;
                          case 45:
                            ((t = n.g),
                              3 !== n.h
                                ? (r = null)
                                : ((r = tg(t, n.l, e)),
                                  ig(t, (i = t.g - t.h + 1) - 1, i, t.h),
                                  ag(t, 0, i - 1),
                                  ag(t, t.g, 15 - t.g),
                                  (n.l = e)));
                            break;
                          case 46:
                            ag(n.j, 0, 15);
                            break;
                          case 47:
                            ((t = null),
                              4 !== n.h && (t = tg(n.i, n.l, e)),
                              (r = n.j),
                              (n.j = n.i),
                              (n.i = r),
                              pg(n),
                              (n.l = e),
                              (r = t));
                        }
                        i = r;
                        break e;
                      }
                      (23 == r || 31 == r) && e >= 33 && e <= 35 && (n.g.B = e - 32);
                    }
                    i = null;
                  }
                else ((e = t.kc), rg(n.g, 0, t.Cb), rg(n.g, 0, e));
                return i;
              }
              function jg(e, t) {
                var n = [];
                try {
                  for (; t.Ia(); ) {
                    var r = kg(t).value,
                      i = (224 & r) >> 5,
                      a = 31 & r;
                    if ((7 === i && 0 != a && (i = 63 & kg(t).value), 0 != i)) {
                      (e.B.add("svc" + i), e.j.has(i) || e.j.set(i, new Ig(i)));
                      for (var o = e.j.get(i), s = t.Pa(); t.Pa() - s < a; ) {
                        i = o;
                        var u = t,
                          l = kg(u),
                          d = l.value,
                          c = l.pts;
                        if ((16 === d && (d = (d << 16) | kg(u).value), d >= 0 && d <= 31))
                          var h = Cg(i, u, d, c);
                        else if (d >= 128 && d <= 159) h = Mg(i, u, d, c);
                        else {
                          if (d >= 4096 && d <= 4127)
                            ((i = u),
                              (u = 255 & d) >= 8 && u <= 15
                                ? i.skip(1)
                                : u >= 16 && u <= 23
                                  ? i.skip(2)
                                  : u >= 24 && u <= 31 && i.skip(3));
                          else if (d >= 4224 && d <= 4255)
                            ((i = u),
                              (u = 255 & d) >= 128 && u <= 135
                                ? i.skip(4)
                                : u >= 136 && u <= 143 && i.skip(5));
                          else if (d >= 32 && d <= 127)
                            ((u = d), i.g && xg(i.g, 127 === u ? "" : String.fromCharCode(u)));
                          else if (d >= 160 && d <= 255) i.g && xg(i.g, String.fromCharCode(d));
                          else if (d >= 4128 && d <= 4223) {
                            if (((u = 255 & d), i.g))
                              if (Lg.has(u)) {
                                var p = Lg.get(u);
                                xg(i.g, p);
                              } else xg(i.g, "_");
                          } else d >= 4256 && d <= 4351 && i.g && xg(i.g, 160 != (255 & d) ? "_" : "[CC]");
                          h = [];
                        }
                        n.push.apply(n, m(h));
                      }
                    }
                  }
                } catch (f) {
                  if (!(f instanceof Ke && 3e3 === f.code)) throw f;
                  q("CEA708_INVALID_DATA", "Buffer read out of bounds / invalid CEA-708 Data.");
                }
                return n;
              }
              function Fg(e) {
                for (var t = 0; e; ) ((t ^= 1 & e), (e >>= 1));
                return 1 === t;
              }
              function Vg(e) {
                for (var t = [], n = e, r = (e = 0); r < n.length; )
                  (2 == e && 3 == n[r]
                    ? ((e = 0), (n = [].concat(m(n))).splice(r, 1), (n = new Uint8Array(n)))
                    : 0 == n[r]
                      ? e++
                      : (e = 0),
                    r++);
                for (e = n, r = 0; r < e.length; ) {
                  for (n = 0; 255 == e[r]; ) ((n += 255), r++);
                  n += e[r++];
                  for (var i = 0; 255 == e[r]; ) ((i += 255), r++);
                  ((i += e[r++]), 4 == n && t.push(e.subarray(r, r + i)), (r += i));
                }
                return t;
              }
              function Hg() {
                ((this.j = new Map()), (this.i = this.h = 0), (this.g = zg));
              }
              function Gg(e, t, n, r, i, a, o, s, u) {
                var l = 0,
                  d = a,
                  c = s.map(function (e) {
                    return e.mh;
                  });
                for (
                  (c = [].concat.apply([], m(c))).length && (d = c[0].sampleSize || a), t.skip(o + s[0].qg);
                  t.Ia();
                ) {
                  o = t.U();
                  var h = t.Y(),
                    p = null;
                  switch (((p = !1), (s = 1), e.g)) {
                    case Xg:
                      p = 6 == (p = 31 & h);
                      break;
                    case Wg:
                      ((s = 2), t.skip(1), (p = 39 == (p = (h >> 1) & 63) || 40 == p));
                      break;
                    case Kg:
                      ((s = 2), t.skip(1), (p = 23 == (p = (h >> 1) & 63) || 24 == p));
                      break;
                    default:
                      return;
                  }
                  if (p)
                    for (
                      h = 0,
                        l < c.length && (h = c[l].Gf || 0),
                        h = (n + h) / r,
                        p = (s = g(Vg((s = t.Tb(o - s, !1))))).next();
                      !p.done;
                      p = s.next()
                    )
                      u.push({ packet: p.value, pts: h });
                  else
                    try {
                      t.skip(o - s);
                    } catch (f) {
                      break;
                    }
                  0 == (d -= o + 4) &&
                    ((n = l < c.length ? n + (c[l].nh || i) : n + i),
                    (d = (++l < c.length && c[l].sampleSize) || a));
                }
              }
              ((Og.prototype.clear = function () {
                ((this.l = 0), (this.h = []), (this.g = []));
                var e = this.i;
                ((e.i = []), (e.h = []), (e.g = 0), Ug(this));
                for (var t = (e = g(this.j.values())).next(); !t.done; t = e.next()) Dg(t.value);
              }),
                (Og.prototype.extract = function (e, t) {
                  if (this.C) {
                    for (var n = g(this.m.values()), r = n.next(); !r.done; r = n.next()) r.value.l = t;
                    this.C = !1;
                  }
                  if (
                    !((e = new na(e, 0)).getLength() < 8) &&
                    181 === e.Y() &&
                    49 === e.Ca() &&
                    1195456820 === e.U() &&
                    3 === e.Y() &&
                    64 & (n = e.Y())
                  )
                    for (n &= 31, e.skip(1), r = 0; r < n; r++) {
                      var i = e.Y(),
                        a = (4 & i) >> 2,
                        o = e.Y(),
                        s = e.Y();
                      a &&
                        (0 == (i &= 3) || 1 === i
                          ? this.h.push({ pts: t, type: i, Cb: o, kc: s, order: this.h.length })
                          : (this.g.push({ pts: t, type: i, value: o, order: this.g.length }),
                            this.g.push({ pts: t, type: 2, value: s, order: this.g.length })));
                    }
                }),
                (Og.prototype.decode = function () {
                  function e(e, t) {
                    return e.pts - t.pts || e.order - t.order;
                  }
                  var t = [];
                  (this.h.sort(e), this.g.sort(e));
                  for (var n = g(this.h), r = n.next(); !r.done; r = n.next())
                    (r = Bg(this, r.value)) && t.push(r);
                  for (r = (n = g(this.g)).next(); !r.done; r = n.next()) Ag(this.i, r.value);
                  for (r = (n = g(this.i.i)).next(); !r.done; r = n.next())
                    ((r = jg(this, r.value)), t.push.apply(t, m(r)));
                  return ((this.i.i = []), (this.h = []), (this.g = []), t);
                }),
                (Og.prototype.getStreams = function () {
                  return Array.from(this.B);
                }),
                V("shaka.cea.CeaDecoder", Og),
                (Lt = function () {
                  return new Og();
                }),
                (Hg.prototype.init = function (e) {
                  function t(e) {
                    ((e = e.name), qg.has(e) && (n.g = qg.get(e)));
                  }
                  var n = this,
                    r = [],
                    i = [];
                  if (
                    (new aa()
                      .box("moov", oa)
                      .box("mvex", oa)
                      .S("trex", function (e) {
                        var t = e.reader;
                        (t.skip(4), t.skip(4), (e = t.U()), (t = t.U()), (n.h = e), (n.i = t));
                      })
                      .box("trak", oa)
                      .S("tkhd", function (e) {
                        var t = e.reader;
                        1 == (e = e.version) ? (t.skip(8), t.skip(8)) : (t.skip(4), t.skip(4));
                        var n = t.U();
                        (1 == e ? t.skip(8) : t.skip(4),
                          t.skip(4),
                          t.skip(8),
                          t.skip(2),
                          t.skip(2),
                          t.skip(2),
                          t.skip(2),
                          t.skip(36),
                          t.Ca(),
                          t.Ca(),
                          t.Ca(),
                          t.Ca(),
                          r.push(n));
                      })
                      .box("mdia", oa)
                      .S("mdhd", function (e) {
                        ((e = ro(e.reader, e.version)), i.push(e.timescale));
                      })
                      .box("minf", oa)
                      .box("stbl", oa)
                      .S("stsd", sa)
                      .box("avc1", t)
                      .box("avc3", t)
                      .box("dvav", t)
                      .box("dva1", t)
                      .box("hev1", t)
                      .box("hvc1", t)
                      .box("dvh1", t)
                      .box("dvhe", t)
                      .box("vvc1", t)
                      .box("vvi1", t)
                      .box("dvc1", t)
                      .box("dvi1", t)
                      .box("encv", ua)
                      .box("sinf", oa)
                      .box("frma", function (e) {
                        ((e = oo(e.reader).codec), qg.has(e) && (n.g = qg.get(e)));
                      })
                      .parse(e, !0, !0),
                    !r.length || !i.length || r.length != i.length)
                  )
                    throw new Ke(2, 2, 2010);
                  (this.g == zg && K("Unable to determine bitstream format for CEA parsing!"),
                    r.forEach(function (e, t) {
                      n.j.set(e, i[t]);
                    }));
                }),
                (Hg.prototype.parse = function (e) {
                  var t = this;
                  if (this.g == zg) return [];
                  var n = [],
                    r = 0,
                    i = [];
                  return (
                    new aa()
                      .box("moof", function (e) {
                        ((r = e.start), (i = []), oa(e));
                      })
                      .box("traf", function (e) {
                        (i.push({ baseMediaDecodeTime: null, Wd: t.h, Xd: t.i, Ii: [], timescale: 9e4 }),
                          oa(e));
                      })
                      .S("trun", function (e) {
                        var t = i[i.length - 1];
                        ((e = io(e.reader, e.version, e.flags)), t.Ii.push(e));
                      })
                      .S("tfhd", function (e) {
                        var n = i[i.length - 1];
                        ((e = to(e.reader, e.flags)),
                          (n.Wd = e.Wd || t.h),
                          (n.Xd = e.Xd || t.i),
                          (e = e.trackId),
                          t.j.has(e) && (n.timescale = t.j.get(e)));
                      })
                      .S("tfdt", function (e) {
                        var t = i[i.length - 1];
                        ((e = no(e.reader, e.version)), (t.baseMediaDecodeTime = e.baseMediaDecodeTime));
                      })
                      .box("mdat", function (e) {
                        for (
                          var a = r - e.start - 8, o = e.reader.Pa(), s = g(i), u = s.next();
                          !u.done;
                          u = s.next()
                        )
                          null === (u = u.value).baseMediaDecodeTime
                            ? K("Unable to find base media decode time for CEA captions!")
                            : (e.reader.seek(o),
                              Gg(t, e.reader, u.baseMediaDecodeTime, u.timescale, u.Wd, u.Xd, a, u.Ii, n));
                      })
                      .parse(e, !1, !0),
                    n
                  );
                }),
                V("shaka.cea.Mp4CeaParser", Hg));
              var zg = 0,
                Xg = 1,
                Wg = 2,
                Kg = 3,
                qg = new Map()
                  .set("avc1", Xg)
                  .set("avc3", Xg)
                  .set("dvav", Xg)
                  .set("dva1", Xg)
                  .set("hev1", Wg)
                  .set("hvc1", Wg)
                  .set("dvh1", Wg)
                  .set("dvhe", Wg)
                  .set("vvc1", Kg)
                  .set("vvi1", Kg)
                  .set("dvc1", Kg)
                  .set("dvi1", Kg);
              function Yg() {
                this.g = null;
              }
              function $g(e) {
                return (e = (function (e) {
                  var t = 0,
                    n = Ue(e),
                    r = n.getUint32(t, !0);
                  if (r != e.byteLength) return [];
                  e: {
                    for (e = t + 4 + 2, t = []; e < n.byteLength - 1; ) {
                      ((r = n.getUint16(e, !0)), (e += 2));
                      var i = n.getUint16(e, !0);
                      if (((e += 2), 1 & i || i + e > n.byteLength)) {
                        n = [];
                        break e;
                      }
                      var a = Ne(n, e, i);
                      (t.push({ type: r, value: a }), (e += i));
                    }
                    n = t;
                  }
                  return n;
                })((e = at(tn(e)))).filter(function (e) {
                  return e.type === Qg;
                })[0]) && (e = $t((e = $e(e.value, !0)), "WRMHEADER"))
                  ? e
                  : null;
              }
              function Jg(e) {
                try {
                  var t = $g(e);
                  if (t)
                    e: {
                      for (var n = g(rn(t, "DATA")), r = n.next(); !r.done; r = n.next()) {
                        var i = r.value;
                        if (i.children)
                          for (var a = g(i.children), o = a.next(); !o.done; o = a.next()) {
                            var s = o.value;
                            if ("LA_URL" == s.tagName) {
                              var u = tn(s);
                              break e;
                            }
                          }
                      }
                      u = "";
                    }
                  else u = "";
                  return u;
                } catch (l) {
                  return "";
                }
              }
              (_t("video/mp4", function () {
                return new Hg();
              }),
                (Yg.prototype.init = function () {}),
                (Yg.prototype.parse = function (e) {
                  this.g ? this.g.clearData() : (this.g = new As());
                  var t = [];
                  if (!Cs((e = Ne(e)))) return t;
                  var n = (e = this.g.parse(e)).Yd(),
                    r = e.ef();
                  switch (((e = []), n.video)) {
                    case "avc":
                      e.push(6);
                      break;
                    case "hvc":
                      (e.push(39), e.push(40));
                  }
                  if (!e.length) return t;
                  for (r = (n = g(r)).next(); !r.done; r = n.next())
                    if (((r = r.value), e.includes(r.type) && null != r.time))
                      for (var i = g(Vg(r.data)), a = i.next(); !a.done; a = i.next())
                        t.push({ packet: a.value, pts: r.time });
                  return t;
                }),
                V("shaka.cea.TsCeaParser", Yg),
                _t("video/mp2t", function () {
                  return new Yg();
                }));
              var Qg = 1;
              function Zg() {
                this.g = new Map();
              }
              function em(t, n, r, i) {
                var a = (function (e, t) {
                    for (var n = [], r = (t = g(t)).next(); !r.done; r = t.next())
                      (r = nm(e, r.value)) && n.push(r);
                    return n;
                  })(t, n),
                  o = null;
                t = [];
                var s = [];
                n = null;
                var u = new Set(
                  a.map(function (e) {
                    return e.keyId;
                  }),
                );
                u.delete(null);
                var l = "cenc";
                if (u.size > 1) throw new Ke(2, 4, 4010);
                if (!r) {
                  if (
                    (s = a.filter(function (e) {
                      return "urn:mpeg:dash:sea:2012" == e.Hd;
                    })).length > 1
                  )
                    throw new Ke(2, 4, 4050);
                  (s.length &&
                    (n = (function (t) {
                      if (!e.crypto || !e.crypto.subtle)
                        throw (
                          K(
                            "Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)",
                          ),
                          new Ke(2, 4, 4042)
                        );
                      var n = on(t.node, "urn:mpeg:dash:schema:sea:2012", "SegmentEncryption");
                      if (!n) throw new Ke(2, 4, 4051);
                      if ("urn:mpeg:dash:sea:aes128-cbc:2013" != n.attributes.schemeIdUri)
                        throw new Ke(2, 4, 4051);
                      if (!(n = on(t.node, "urn:mpeg:dash:schema:sea:2012", "CryptoPeriod")))
                        throw new Ke(2, 4, 4051);
                      if (((t = n.attributes.IV), (n = et(n.attributes.keyUriTemplate)), !t || !n))
                        throw new Ke(2, 4, 4051);
                      if (16 != (t = ot(t.substr(2))).byteLength) throw new Ke(2, 4, 4048);
                      return { wk: n, iv: t };
                    })(s[0])),
                    (s = a.find(function (e) {
                      return "urn:mpeg:dash:mp4protection:2011" == e.Hd;
                    })) &&
                      s.encryptionScheme &&
                      (l = s.encryptionScheme),
                    (s = a.filter(function (e) {
                      return "urn:mpeg:dash:mp4protection:2011" == e.Hd
                        ? ((o = e.init || o), !1)
                        : "urn:mpeg:dash:sea:2012" != e.Hd;
                    })).length &&
                      ((t = (function (e, t, n, r, i) {
                        for (var a = [], o = (n = g(n)).next(); !o.done; o = n.next()) {
                          var s = r[(o = o.value).Hd];
                          if (s) {
                            var u;
                            if ((u = on(o.node, "urn:microsoft:playready", "pro")) && tn(u)) {
                              u = at((u = tn(u)));
                              var l = new Uint8Array([
                                154, 4, 240, 121, 152, 64, 66, 134, 171, 146, 230, 91, 224, 136, 95, 149,
                              ]);
                              u = [
                                { initData: va(u, l, new Set(), 0), initDataType: "cenc", keyId: o.keyId },
                              ];
                            } else u = null;
                            if (((l = null), "urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e" === o.Hd)) {
                              l = o;
                              var d = i;
                              if (0 == d.size) l = null;
                              else {
                                var c = new Uint8Array([
                                  16, 119, 239, 236, 192, 178, 77, 2, 172, 227, 60, 30, 82, 226, 251, 75,
                                ]);
                                l = [
                                  {
                                    initData: va(new Uint8Array([]), c, d, 1),
                                    initDataType: "cenc",
                                    keyId: l.keyId,
                                  },
                                ];
                              }
                            }
                            ((u = dt(s, t, o.init || e || u || l)),
                              (s = rm.get(s)) && (u.licenseServerUri = s(o)),
                              ((o = on(o.node, "https://dashif.org/CPS", "Certurl")) && (o = tn(o))) ||
                                (o = ""),
                              (u.serverCertificateUri = o),
                              a.push(u));
                          }
                        }
                        return a;
                      })(o, l, s, i, u)),
                      0 == t.length && (t = [dt("", l, o)])));
                }
                if (a.length && !n && (r || !s.length))
                  for (t = [], i = (r = g(Object.values(i))).next(); !i.done; i = r.next())
                    "org.w3.clearkey" != (i = i.value) && ((i = dt(i, l, o)), t.push(i));
                if ((u = Array.from(u)[0] || null))
                  for (r = (l = g(t)).next(); !r.done; r = l.next())
                    for (i = (r = g(r.value.initData)).next(); !i.done; i = r.next()) i.value.keyId = u;
                return { Yh: u, Em: o, drmInfos: t, hg: n, ci: !0 };
              }
              function tm(e) {
                var t = on(e.node, "https://dashif.org/CPS", "Laurl");
                if (t && (t = tn(t))) return t;
                if ((t = on(e.node, "urn:microsoft:playready", "pro")) && tn(t)) return Jg(t);
                if ((e = on(e.node, "urn:mpeg:cenc:2013", "pssh")) && (e = tn(e))) {
                  ((t = at(e)), (e = 8));
                  var n = (t = Ue(t)).getUint8(e);
                  return (
                    (e += 20),
                    n > 0 && (e += 4 + 16 * t.getUint32(e)),
                    Jg((e = $t("<pro>" + (e = rt((e = Ne(t, e + 4)))) + "</pro>")))
                  );
                }
                return "";
              }
              function nm(e, t) {
                var n = t.attributes.schemeIdUri,
                  r = un(t, "urn:mpeg:cenc:2013", "default_KID"),
                  i = ln(t, "urn:mpeg:cenc:2013", "pssh").map(nn),
                  a = t.attributes.value;
                if (!n) return null;
                if (((n = n.toLowerCase()), r && (r = r.replace(/-/g, "").toLowerCase()).includes(" ")))
                  throw new Ke(2, 4, 4009);
                var o = [];
                try {
                  o = i.map(function (t) {
                    if (!e.g.has(t)) {
                      var n = at(t);
                      e.g.set(t, n);
                    }
                    return { initDataType: "cenc", initData: e.g.get(t), keyId: null };
                  });
                } catch (s) {
                  throw new Ke(2, 4, 4007);
                }
                return { node: t, Hd: n, keyId: r, init: o.length > 0 ? o : null, encryptionScheme: a };
              }
              Zg.prototype.release = function () {
                this.g.clear();
              };
              var rm = new Map()
                .set("com.apple.fps", function (t) {
                  if ("apple" === e.shakaMediaKeysPolyfill) throw new Ke(2, 4, 4054);
                  return (t = on(t.node, "https://dashif.org/CPS", "Laurl")) && (t = tn(t)) ? t : "";
                })
                .set("com.widevine.alpha", function (e) {
                  var t = on(e.node, "https://dashif.org/CPS", "Laurl");
                  return t && (t = tn(t))
                    ? t
                    : ((e = on(e.node, "urn:microsoft", "laurl")) && et(e.attributes.licenseUrl)) || "";
                })
                .set("com.microsoft.playready", tm)
                .set("com.microsoft.playready.recommendation", tm)
                .set("com.microsoft.playready.software", tm)
                .set("com.microsoft.playready.hardware", tm)
                .set("org.w3.clearkey", function (e) {
                  var t = on(e.node, "https://dashif.org/CPS", "Laurl");
                  return t && (t = tn(t))
                    ? t
                    : (e = on(e.node, "http://dashif.org/guidelines/clearKey", "Laurl")) &&
                        "EME-1.0" === e.attributes.Lic_type &&
                        e &&
                        (e = tn(e))
                      ? e
                      : "";
                });
              function im(t, n, r, i, a, o) {
                var s = new Map()
                  .set("RepresentationID", n)
                  .set("Number", r)
                  .set("SubNumber", i)
                  .set("Bandwidth", a)
                  .set("Time", o);
                return t.replace(
                  /\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,
                  function (t, n, r, i) {
                    if ("$$" == t) return "$";
                    var a = s.get(n);
                    if (null == a) return t;
                    switch (
                      ("RepresentationID" == n && r && (r = void 0),
                      "Time" == n &&
                        "bigint" != typeof a &&
                        (Math.abs(a - Math.round(a)) >= 0.2 &&
                          K("Calculated $Time$ values must be close to integers"),
                        (a = Math.round(a))),
                      i)
                    ) {
                      case void 0:
                      case "d":
                      case "i":
                      case "u":
                        t = a.toString();
                        break;
                      case "o":
                        t = a.toString(8);
                        break;
                      case "x":
                        t = a.toString(16);
                        break;
                      case "X":
                        t = a.toString(16).toUpperCase();
                        break;
                      default:
                        t = a.toString();
                    }
                    return ((r = e.parseInt(r, 10) || 1), Array(Math.max(0, r - t.length) + 1).join("0") + t);
                  },
                );
              }
              function am(e, t) {
                var n = sm(e, t, "timescale"),
                  r = 1;
                n && (r = gn(n) || 1);
                var i = (n = gn((n = sm(e, t, "duration")) || "")) ? n / r : null,
                  a = sm(e, t, "startNumber"),
                  o = Number(sm(e, t, "presentationTimeOffset")) || 0,
                  s = mn(a || "");
                if (((null != a && null != s) || (s = 1), (a = null), (t = um(e, t, "SegmentTimeline")))) {
                  ((t = en(t, "S")), (a = r), (e = e.na.duration || 1 / 0));
                  for (var u = s, l = [], d = -o, c = 0; c < t.length; ++c) {
                    var h = t[c],
                      p = t[c + 1],
                      f = sn(h, "t", mn),
                      g = sn(h, "d", mn),
                      m = sn(h, "r", fn);
                    if (((h = sn(h, "k", fn) || 0), null != f && (f -= o), g)) {
                      if (((f = null != f ? f : d), (m = m || 0) < 0))
                        if (p) {
                          if (null == (p = sn(p, "t", mn))) break;
                          if (f >= p) break;
                          m = Math.ceil((p - f) / g) - 1;
                        } else {
                          if (e == 1 / 0) break;
                          if (f / a >= e) break;
                          m = Math.ceil((e * a - f) / g) - 1;
                        }
                      for (l.length > 0 && f != d && (l[l.length - 1].end = f / a), p = 0; p <= m; ++p)
                        ((d = f + g),
                          l.push({ start: f / a, Ld: f, end: d / a, Jh: d, wc: h, Vk: l.length + u }),
                          (f = d));
                    }
                  }
                  a = l;
                }
                return { timescale: r, Qf: n, gb: i, ve: s, ec: o / r || 0, gd: o, timeline: a };
              }
              function om(e, t) {
                return [t(e.L), t(e.qa), t(e.sa)].filter(Dr);
              }
              function sm(e, t, n) {
                ((t = om(e, t)), (e = null));
                for (var r = (t = g(t)).next(); !r.done && !(e = r.value.attributes[n]); r = t.next());
                return e;
              }
              function um(e, t, n) {
                ((t = om(e, t)), (e = null));
                for (var r = (t = g(t)).next(); !r.done && !(e = an(r.value, n)); r = t.next());
                return e;
              }
              function lm(e, t, n, r, i, a) {
                if (((a = void 0 === a ? 0 : a), un(e, "http://www.w3.org/1999/xlink", "href"))) {
                  var o = (function (e, t, n, r, i, a) {
                    for (
                      var o = un(e, "http://www.w3.org/1999/xlink", "href"),
                        s = un(e, "http://www.w3.org/1999/xlink", "actuate") || "onRequest",
                        u = g(Object.keys(e.attributes)),
                        l = u.next();
                      !l.done;
                      l = u.next()
                    ) {
                      var d = (l = l.value).split(":"),
                        c = Jt("http://www.w3.org/1999/xlink");
                      d[0] == c && delete e.attributes[l];
                    }
                    if (a >= 5) return Mi(new Ke(2, 4, 4028));
                    if ("onLoad" != s) return Mi(new Ke(2, 4, 4027));
                    var h = lt([r], [o]);
                    return i.request(0, Gi(h, t)).Xa(function (r) {
                      if (!(r = Yt(r.data, e.tagName))) return Mi(new Ke(2, 4, 4001, o));
                      for (e.children = []; r.children.length; ) {
                        var s = r.children.shift();
                        e.children.push(s);
                      }
                      for (var u = (s = g(Object.keys(r.attributes))).next(); !u.done; u = s.next())
                        ((u = u.value), (e.attributes[u] = r.attributes[u]));
                      return lm(e, t, n, h[0], i, a + 1);
                    });
                  })(e, t, n, r, i, a);
                  return (
                    n &&
                      (o = o.Xa(void 0, function () {
                        return lm(e, t, n, r, i, a);
                      })),
                    o
                  );
                }
                o = [];
                for (var s = g(Zt(e)), u = s.next(), l = {}; !u.done; l = { Td: void 0 }, u = s.next())
                  ((l.Td = u.value),
                    "urn:mpeg:dash:resolve-to-zero:2013" == un(l.Td, "http://www.w3.org/1999/xlink", "href")
                      ? (e.children = e.children.filter(
                          (function (e) {
                            return function (t) {
                              return t !== e.Td;
                            };
                          })(l),
                        ))
                      : "SegmentTimeline" != l.Td.tagName && o.push(lm(l.Td, t, n, r, i, a)));
                return Pi(o).Xa(function () {
                  return e;
                });
              }
              function dm(e, t, n, r, i, a, o, s) {
                var u,
                  l = new aa().S("sidx", function (e) {
                    u = (function (e, t, n, r, i, a, o, s) {
                      s = void 0 !== s && s;
                      var u = [];
                      o.reader.skip(4);
                      var l = o.reader.U();
                      if (0 == l) throw new Ke(2, 3, 3005);
                      if (0 == o.version)
                        var d = o.reader.U(),
                          c = o.reader.U();
                      else ((d = o.reader.Ed()), (c = o.reader.Ed()));
                      o.reader.skip(2);
                      var h = o.reader.Ca();
                      for (e = (s ? -o.size : e) + o.size + c, s = 0; s < h; s++) {
                        var p = o.reader.U();
                        ((c = (2147483648 & p) >>> 31), (p &= 2147483647));
                        var f = o.reader.U();
                        if ((o.reader.skip(4), 1 == c)) throw new Ke(2, 3, 3006);
                        (u.push(
                          new Fo(
                            d / l + n,
                            (d + f) / l + n,
                            function () {
                              return a;
                            },
                            e,
                            e + p - 1,
                            t,
                            n,
                            r,
                            i,
                          ),
                        ),
                          (d += f),
                          (e += p));
                      }
                      return (o.parser.stop(), u);
                    })(t, r, i, a, o, n, e, s);
                  });
                if ((e && l.parse(e), u)) return u;
                throw new Ke(2, 3, 3004);
              }
              function cm(e) {
                ((this.h = Ue(e)), (this.g = new na(this.h, 0)));
              }
              function hm(e) {
                var t = pm(e);
                if (t.length > 7) throw new Ke(2, 3, 3002);
                for (var n = 0, r = (t = g(t)).next(); !r.done; r = t.next()) n = 256 * n + r.value;
                t = pm(e);
                e: {
                  for (var i = (r = g(fm)).next(); !i.done; i = r.next())
                    if (Pe(t, new Uint8Array(i.value))) {
                      r = !0;
                      break e;
                    }
                  r = !1;
                }
                if (r) t = e.h.byteLength - e.g.Pa();
                else {
                  if (8 == t.length && 224 & t[1]) throw new Ke(2, 3, 3001);
                  for (i = r = 0; i < t.length; i++) {
                    var a = t[i];
                    r = 0 == i ? a & ((1 << (8 - t.length)) - 1) : 256 * r + a;
                  }
                  t = r;
                }
                return (
                  (t = e.g.Pa() + t <= e.h.byteLength ? t : e.h.byteLength - e.g.Pa()),
                  (r = Ue(e.h, e.g.Pa(), t)),
                  e.g.skip(t),
                  new gm(n, r)
                );
              }
              function pm(e) {
                var t = e.g.Pa(),
                  n = e.g.Y();
                if (0 == n) throw new Ke(2, 3, 3002);
                return ((n = 8 - Math.floor(Math.log2(n))), e.g.skip(n - 1), Ne(e.h, t, n));
              }
              cm.prototype.Ia = function () {
                return this.g.Ia();
              };
              var fm = [
                [255],
                [127, 255],
                [63, 255, 255],
                [31, 255, 255, 255],
                [15, 255, 255, 255, 255],
                [7, 255, 255, 255, 255, 255],
                [3, 255, 255, 255, 255, 255, 255],
                [1, 255, 255, 255, 255, 255, 255, 255],
              ];
              function gm(e, t) {
                ((this.id = e), (this.g = t));
              }
              function mm(e) {
                if (e.g.byteLength > 8) throw new Ke(2, 3, 3002);
                if (8 == e.g.byteLength && 224 & e.g.getUint8(0)) throw new Ke(2, 3, 3001);
                for (var t = 0, n = 0; n < e.g.byteLength; n++) t = 256 * t + e.g.getUint8(n);
                return t;
              }
              function vm(e, t, n, r, i, a, o) {
                if (440786851 != hm((t = new cm(t))).id) throw new Ke(2, 3, 3008);
                var s = hm(t);
                if (408125543 != s.id) throw new Ke(2, 3, 3009);
                ((t = s.g.byteOffset), (s = new cm(s.g)));
                for (var u = null; s.Ia(); ) {
                  var l = hm(s);
                  if (357149030 == l.id) {
                    u = l;
                    break;
                  }
                }
                if (!u) throw new Ke(2, 3, 3010);
                for (u = new cm(u.g), l = 1e6, s = null; u.Ia(); ) {
                  var d = hm(u);
                  if (2807729 == d.id) l = mm(d);
                  else if (17545 == d.id)
                    if (4 == d.g.byteLength) s = d.g.getFloat32(0);
                    else {
                      if (8 != d.g.byteLength) throw new Ke(2, 3, 3003);
                      s = d.g.getFloat64(0);
                    }
                }
                if (null == s) throw new Ke(2, 3, 3011);
                if (((s *= u = l / 1e9), 475249515 != (e = hm(new cm(e))).id)) throw new Ke(2, 3, 3007);
                return (function (e, t, n, r, i, a, o, s, u) {
                  function l() {
                    return i;
                  }
                  var d = [];
                  e = new cm(e.g);
                  for (var c = null, h = null; e.Ia(); ) {
                    var p = hm(e);
                    if (187 == p.id) {
                      var f = ym(p);
                      f &&
                        ((p = n * f.ol),
                        (f = t + f.Nk),
                        null != c && d.push(new Fo(c + o, p + o, l, h, f - 1, a, o, s, u)),
                        (c = p),
                        (h = f));
                    }
                  }
                  return (null != c && d.push(new Fo(c + o, r + o, l, h, null, a, o, s, u)), d);
                })(e, t, u, s, n, r, i, a, o);
              }
              function ym(e) {
                var t = new cm(e.g);
                if (179 != (e = hm(t)).id) throw new Ke(2, 3, 3013);
                if (((e = mm(e)), 183 != (t = hm(t)).id)) throw new Ke(2, 3, 3012);
                t = new cm(t.g);
                for (var n = 0; t.Ia(); ) {
                  var r = hm(t);
                  if (241 == r.id) {
                    n = mm(r);
                    break;
                  }
                }
                return { ol: e, Nk: n };
              }
              function bm(e, t, n) {
                if (!(t = um(e, t, "Initialization"))) return null;
                var r = e.L.bb(),
                  i = t.attributes.sourceURL;
                (i && (r = lt(r, [et(i)], e.Lb())), (i = 0));
                var a = null;
                return (
                  (t = sn(t, "range", pn)) && ((i = t.start), (a = t.end)),
                  ((n = new Bo(
                    function () {
                      return r;
                    },
                    i,
                    a,
                    Em(e),
                    null,
                    null,
                    n,
                    e.qa.encrypted,
                  )).codecs = e.L.codecs),
                  (n.mimeType = e.L.mimeType),
                  e.na && !e.na.kf && (n.g = e.na.start + e.na.duration),
                  n
                );
              }
              function xm(e, t, n) {
                var r = Number(sm(e, wm, "presentationTimeOffset")) || 0,
                  i = sm(e, wm, "timescale"),
                  a = 1;
                i && (a = gn(i) || 1);
                var o = r / a || 0,
                  s = bm(e, wm, n);
                !(function (e, t) {
                  if ((Am(e, t), !Sm(e))) throw new Ke(2, 4, 4002);
                })(e, s);
                var u = Kt(e);
                return {
                  endTime: -1,
                  timeline: -1,
                  Sc: function () {
                    var e = um(u, wm, "RepresentationIndex"),
                      n = u.L.bb();
                    return (
                      e && (e = et(e.attributes.sourceURL)) && (n = lt(n, [e], u.Lb())),
                      (e = Sm(u)),
                      Tm(u, t, s, n, e.start, e.end, o)
                    );
                  },
                  timescale: a,
                };
              }
              function Tm(e, t, n, r, i, a, o) {
                var s, u, l, d, c, h, p, f, m, v, y, b, T, w, S, A, E, k, I, C;
                return D(function (M) {
                  if (1 == M.g)
                    return (
                      (s = e.presentationTimeline),
                      (u = !e.Eb || !e.na.kf),
                      (l = e.na.start),
                      (d = e.na.duration),
                      (c = e.L.mimeType.split("/")[1]),
                      (p = null),
                      (f = [(h = t)(r, i, a, !1), "webm" == c ? h(n.P(), n.startByte, n.endByte, !0) : null]),
                      (h = null),
                      x(M, Promise.all(f), 2)
                    );
                  for (
                    m = M.h,
                      v = m[0],
                      y = m[1] || null,
                      T = l - o,
                      w = l,
                      S = d ? l + d : 1 / 0,
                      A = e.L.bb(),
                      E =
                        A.length != r.length ||
                        A.some(function (e, t) {
                          return e != r[t];
                        }),
                      b = "mp4" == c ? dm(v, i, A, n, T, w, S, E) : vm(v, y, A, n, T, w, S),
                      k = g(b),
                      I = k.next();
                    !I.done;
                    I = k.next()
                  )
                    (((C = I.value).codecs = e.L.codecs),
                      (C.mimeType = e.L.mimeType),
                      (C.bandwidth = e.bandwidth));
                  return (s.me(b), (p = new _u(b)), u && p.pd(w, S, !0), M.return(p));
                });
              }
              function wm(e) {
                return e.Id;
              }
              function Sm(e) {
                var t = um(e, wm, "RepresentationIndex");
                return ((e = pn((e = sm(e, wm, "indexRange")) || "")), t && (e = sn(t, "range", pn, e)), e);
              }
              function Am(e, t) {
                var n = e.L.mimeType.split("/")[1];
                if (e.L.contentType != gt && "mp4" != n && "webm" != n) throw new Ke(2, 4, 4006);
                if ("webm" == n && !t) throw new Ke(2, 4, 4005);
              }
              function Em(e) {
                var t = e.L;
                return {
                  bandwidth: e.bandwidth,
                  audioSamplingRate: t.audioSamplingRate,
                  codecs: t.codecs,
                  contentType: t.contentType,
                  frameRate: t.frameRate || null,
                  height: t.height || null,
                  mimeType: t.mimeType,
                  channelsCount: t.yf,
                  pixelAspectRatio: t.pixelAspectRatio || null,
                  width: t.width || null,
                  label: e.qa.label || null,
                  roles: e.roles || null,
                  language: e.qa.language || null,
                };
              }
              function km(e, t, n) {
                var r = bm(e, Im, n),
                  i = (function (e) {
                    var t = (function (e) {
                        return [e.L.Ac, e.qa.Ac, e.sa.Ac]
                          .filter(Dr)
                          .map(function (e) {
                            return en(e, "SegmentURL");
                          })
                          .reduce(function (e, t) {
                            return e.length > 0 ? e : t;
                          })
                          .map(function (t) {
                            return (
                              t.attributes.indexRange && !e.Og && (e.Og = !0),
                              {
                                Ck: et(t.attributes.media),
                                start: (t = sn(t, "mediaRange", pn, { start: 0, end: null })).start,
                                end: t.end,
                              }
                            );
                          });
                      })(e),
                      n = (e = am(e, Im)).ve;
                    0 == n && (n = 1);
                    var r = 0;
                    return (
                      e.gb
                        ? (r = e.gb * (n - 1))
                        : e.timeline && e.timeline.length > 0 && (r = e.timeline[0].start),
                      {
                        gb: e.gb,
                        startTime: r,
                        ve: n,
                        ec: e.ec,
                        timescale: e.timescale,
                        timeline: e.timeline,
                        yd: t,
                      }
                    );
                  })(e);
                if (!i.gb && !i.timeline && i.yd.length > 1) throw new Ke(2, 4, 4002);
                if (!i.gb && !e.na.duration && !i.timeline && 1 == i.yd.length) throw new Ke(2, 4, 4002);
                if (i.timeline && 0 == i.timeline.length) throw new Ke(2, 4, 4002);
                var a = null,
                  o = null;
                e.sa.id && e.L.id && (o = t.get(e.sa.id + "," + e.L.id)) && (a = o.segmentIndex);
                var s = (function (e, t, n, r, i, a, o, s, u, l) {
                  var d = r.yd.length;
                  r.timeline &&
                    r.timeline.length != r.yd.length &&
                    (d = Math.min(r.timeline.length, r.yd.length));
                  for (
                    var c = e - r.ec, h = t ? e + t : 1 / 0, p = [], f = r.startTime, g = {}, m = 0;
                    m < d;
                    g = { Sf: void 0, Hf: void 0 }, m++
                  ) {
                    g.Hf = r.yd[m];
                    var v = f;
                    ((f = void 0),
                      (f = null != r.gb ? v + r.gb : r.timeline ? r.timeline[m].end : v + t),
                      (g.Sf = null),
                      ((g = new Fo(
                        e + v,
                        e + f,
                        (function (e) {
                          return function () {
                            return (null == e.Sf && (e.Sf = lt(n(), [e.Hf.Ck], l())), e.Sf);
                          };
                        })(g),
                        g.Hf.start,
                        g.Hf.end,
                        i,
                        c,
                        e,
                        h,
                        [],
                        "",
                        null,
                        null,
                        Go,
                        a,
                      )).codecs = s),
                      (g.mimeType = o),
                      (g.bandwidth = u),
                      p.push(g));
                  }
                  return p;
                })(e.na.start, e.na.duration, e.L.bb, i, r, n, e.L.mimeType, e.L.codecs, e.bandwidth, e.Lb);
                return (
                  (t = !a),
                  a ? a.ke(s, e.presentationTimeline.Hb()) : (a = new _u(s)),
                  e.presentationTimeline.me(s),
                  (e.Eb && e.na.kf) ||
                    a.pd(e.na.start, e.na.duration ? e.na.start + e.na.duration : 1 / 0, t),
                  o && (o.segmentIndex = a),
                  {
                    endTime: -1,
                    timeline: -1,
                    Sc: function () {
                      return ((a && 0 != a.getNumReferences()) || a.tf(s), Promise.resolve(a));
                    },
                    timescale: i.timescale,
                  }
                );
              }
              function Im(e) {
                return e.Ac;
              }
              function Cm(t, n, r, i, a, o, s, u, l, d) {
                l || t.L.hf || (t.L.hf = sm(t, Mm, "initialization"));
                var c = t.L.hf
                    ? (function (e, t) {
                        var n = e.L.hf;
                        if ((n || (n = sm(e, Mm, "initialization")), !n)) return null;
                        n = et(n);
                        var r = e.L.originalId,
                          i = e.bandwidth || null,
                          a = e.L.bb,
                          o = e.Lb;
                        return (
                          (t = new Bo(
                            function () {
                              var e = im(n, r, null, null, i, null);
                              return lt(a(), [e], o());
                            },
                            0,
                            null,
                            Em(e),
                            null,
                            null,
                            t,
                            e.qa.encrypted,
                          )),
                          (t.codecs = e.L.codecs),
                          (t.mimeType = e.L.mimeType),
                          e.na && !e.na.kf && (t.g = e.na.start + e.na.duration),
                          t
                        );
                      })(t, s)
                    : null,
                  h = (function (e) {
                    var t = am(e, Mm),
                      n = sm(e, Mm, "media"),
                      r = sm(e, Mm, "index"),
                      i = sm(e, Mm, "k"),
                      a = 0;
                    return (
                      i && (a = parseInt(i, 10)),
                      {
                        Qf: t.Qf,
                        gb: t.gb,
                        timescale: t.timescale,
                        ve: t.ve,
                        ec: t.ec,
                        gd: t.gd,
                        timeline: t.timeline,
                        bc: n && et(n),
                        fe: r,
                        mimeType: e.L.mimeType,
                        codecs: e.L.codecs,
                        bandwidth: e.bandwidth,
                        Dk: a,
                      }
                    );
                  })(t);
                !(function (e) {
                  var t = e.fe ? 1 : 0;
                  if (((t += e.timeline ? 1 : 0), 0 == (t += e.gb ? 1 : 0))) throw new Ke(2, 4, 4002);
                  if ((1 != t && (e.fe && (e.timeline = null), (e.Qf = null), (e.gb = null)), !e.fe && !e.bc))
                    throw new Ke(2, 4, 4002);
                })(h);
                var p = Kt(t);
                if (h.fe)
                  return (
                    Am(t, c),
                    {
                      endTime: -1,
                      timeline: -1,
                      Sc: function () {
                        var e = im(h.fe, p.L.originalId, null, null, p.bandwidth || null, null);
                        return ((e = lt(p.L.bb(), [e])), Tm(p, n, c, e, 0, null, h.ec));
                      },
                      timescale: h.timescale,
                    }
                  );
                if (h.gb)
                  return (
                    i ||
                      "image" === t.qa.contentType ||
                      "text" === t.qa.contentType ||
                      ((i = t.na.start),
                      (d = t.sa.id),
                      (r = t.na.duration),
                      (d = (d = (null != d && o.get(d)) || r) ? i + d : 1 / 0),
                      t.presentationTimeline.Wg(h.gb),
                      t.presentationTimeline.Gi(i, d)),
                    {
                      endTime: -1,
                      timeline: -1,
                      Sc: function () {
                        return (function (t, n, r, i, a, o, s, u) {
                          function l(r) {
                            var a = r - y,
                              s = a * v,
                              l = n.Qf,
                              d = a * l;
                            ("BigInt" in e && d > Number.MAX_SAFE_INTEGER && (d = BigInt(a) * BigInt(l)),
                              (a = (s += p) + v),
                              (l = Math.min(a, c())));
                            var h = [],
                              f = n.Dk;
                            if (f)
                              for (var g = (l - s) / f, m = {}, E = 0; E < f; m = { bj: void 0 }, E++) {
                                var k = s + g * E,
                                  I = k + g;
                                ((m.bj = E),
                                  ((m = new Fo(
                                    k,
                                    I,
                                    (function (e) {
                                      return function () {
                                        var t = im(b, T, r, e.bj, x, d);
                                        return lt(w(), [t], S());
                                      };
                                    })(m),
                                    0,
                                    null,
                                    i,
                                    A,
                                    p,
                                    c(),
                                    [],
                                    "",
                                    null,
                                    null,
                                    Go,
                                    o,
                                  )).codecs = t.L.codecs),
                                  (m.mimeType = t.L.mimeType),
                                  0 == u ? E > 0 && m.wd() : E % u != 0 && m.wd(),
                                  h.push(m));
                              }
                            return (
                              ((s = new Fo(
                                s,
                                l,
                                function () {
                                  if (f) return [];
                                  var e = im(b, T, r, null, x, d);
                                  return lt(w(), [e], S());
                                },
                                0,
                                null,
                                i,
                                A,
                                p,
                                c(),
                                h,
                                "",
                                null,
                                null,
                                Go,
                                o,
                                h.length > 0,
                              )).codecs = t.L.codecs),
                              (s.mimeType = t.L.mimeType),
                              (s.bandwidth = t.bandwidth),
                              (s.j = a),
                              s
                            );
                          }
                          function d() {
                            var e = [Math.max(h.Hb(), p), Math.min(h.Ic(), c())].map(function (e) {
                              return e - p;
                            });
                            return (
                              (e = [Math.ceil(e[0] / v), Math.ceil(e[1] / v) - 1]),
                              t.L.rb && e[1]++,
                              e.map(function (e) {
                                return e + y;
                              })
                            );
                          }
                          function c() {
                            var e = (null != f && a.get(f)) || m;
                            return e ? p + e : 1 / 0;
                          }
                          var h = t.presentationTimeline,
                            p = t.na.start,
                            f = t.sa.id,
                            m = t.na.duration,
                            v = n.gb,
                            y = n.ve,
                            b = n.bc,
                            x = t.bandwidth || null,
                            T = t.L.originalId,
                            w = t.L.bb,
                            S = t.Lb,
                            A = p - n.ec,
                            E = d();
                          ((r = t.Eb ? Math.max(E[0], E[1] - r + 1) : E[0]), (s = s || E[1]), (E = []));
                          for (var k = r; k <= s; ++k) {
                            var I = l(k);
                            E.push(I);
                          }
                          var C = new _u(E);
                          if (((E = h.Ic() < c()), (k = h.W()), E || k)) {
                            var M = Math.max(r, s + 1);
                            ((r = v),
                              t.L.rb && (r = 0.1),
                              C.Rf(r, function () {
                                var e = h.Hb();
                                C.Ya(e);
                                var t = g(d());
                                (t.next(), (t = t.next().value));
                                for (var n = []; M <= t; ) {
                                  var r = l(M);
                                  (n.push(r), M++);
                                }
                                return e > c() && !n.length ? null : n;
                              }));
                          }
                          return Promise.resolve(C);
                        })(p, h, a, c, o, s, u, t.L.If);
                      },
                      timescale: h.timescale,
                    }
                  );
                var f = null;
                ((i = i = null),
                  t.sa.id &&
                    t.L.id &&
                    ((i = t.sa.id + "," + t.L.id), (i = r.get(i))) &&
                    (f = i.segmentIndex));
                var m = t.na.start,
                  v = t.na.duration ? m + t.na.duration : 1 / 0;
                if (f) (_m((d = f), h, m, v, c, t.Eb), d.Ya(t.presentationTimeline.Hb()));
                else {
                  if (((r = 0), (l = -1), null != t.sa.id && null != t.L.id)) {
                    var y = d.get(t.sa.id);
                    if (y) l = y.timeline;
                    else
                      for (y = (d = g(d.values())).next(); !y.done; y = d.next()) {
                        if (((y = y.value), Math.abs(h.ec - y.endTime) <= vt && y.gh.includes(t.L.id))) {
                          l = y.timeline;
                          break;
                        }
                        y.timeline >= r && (r = y.timeline + 1);
                      }
                  }
                  (-1 == l && (l = r),
                    (f = new Rm(t.Eb, h, t.L.originalId, t.bandwidth, t.L.bb, t.Lb, m, v, c, s, t.L.If, l)));
                }
                return (
                  h.timeline &&
                    "image" !== t.qa.contentType &&
                    "text" !== t.qa.contentType &&
                    t.presentationTimeline.Hi(f.h ? f.h.timeline : [], m),
                  i && t.Eb && (i.segmentIndex = f),
                  (i = (i = (i = h.timeline) && i[i.length - 1]) ? i.end + h.ec : -1),
                  (d = -1),
                  f instanceof Rm && (d = f.We()),
                  {
                    endTime: i,
                    timeline: d,
                    Sc: function () {
                      return (
                        f instanceof Rm && 0 == f.getNumReferences() && _m(f, h, m, v, c, t.Eb),
                        Promise.resolve(f)
                      );
                    },
                    timescale: h.timescale,
                  }
                );
              }
              function Mm(e) {
                return e.Oc;
              }
              function Rm(e, t, n, r, i, a, o, s, u, l, d, c) {
                (_u.call(this, []),
                  (this.F = e),
                  (this.h = t),
                  (this.H = n),
                  (this.C = r),
                  (this.G = i),
                  (this.J = a),
                  (this.j = o),
                  (this.l = s),
                  (this.u = u),
                  (this.B = l),
                  (this.I = d),
                  (this.K = c),
                  Dm(this));
              }
              function _m(e, t, n, r, i, a) {
                if (
                  ((function (e, t) {
                    if (e.u !== t) {
                      e.u = t;
                      for (var n = (e = g(e.g)).next(); !n.done; n = e.next()) (n = n.value) && Ho(n, t);
                    }
                  })(e, i),
                  (e.F = a),
                  e.h)
                ) {
                  if (e.h.gd !== t.gd)
                    for (n = t.gd - e.h.gd, i = 0; i < t.timeline.length; i++)
                      (((a = t.timeline[i]).Ld += n),
                        (a.Jh += n),
                        (a.start = (a.Ld + n) / t.timescale),
                        (a.end = (a.Jh + n) / t.timescale));
                  if ((e.h.bc !== t.bc && (e.h.bc = t.bc), (n = e.h.timeline).length)) {
                    var o = n[n.length - 1];
                    t = t.timeline.filter(function (e) {
                      return e.end > o.end;
                    });
                  } else t = t.timeline.slice();
                  (t.length > 0 && e.h.timeline.push.apply(e.h.timeline, m(t)), e.l !== r && (e.l = r));
                } else ((e.h = t), (e.j = n), (e.l = r));
                Dm(e);
              }
              function Dm(e) {
                if (e.h && !e.o) {
                  for (var t = [], n = g(e.h.timeline), r = n.next(); !r.done; r = n.next())
                    (r = r.value).start >= e.l || r.end <= 0 || t.push(r);
                  ((e.h.timeline = t), e.Ya(e.j));
                }
              }
              function Pm(e, t, n, r, i, a, o, s) {
                return (
                  (e = im(e, t, n, a, r || null, i)),
                  lt(o(), [e], s()).map(function (e) {
                    return e.toString();
                  })
                );
              }
              function Lm(e) {
                ((this.o = null),
                  (this.B = e),
                  (this.H = new Bi()),
                  (this.i = []),
                  (this.h = null),
                  (this.m = []),
                  (this.C = null),
                  (this.G = []),
                  (this.F = 300),
                  (this.l = new Map()),
                  (this.j = new Map()),
                  (this.g = null),
                  (this.u = "UNKNOWN"));
              }
              function Nm(e, t) {
                var n, r, i, a, o, s, u;
                return D(function (l) {
                  return 1 == l.g
                    ? ((n = lt(e.i, [Om(e, t)])),
                      (r = Gi(n, e.o.retryParameters)),
                      (i = e.B.networkingEngine.request(8, r)),
                      ji(e.H, i),
                      w(l, 2),
                      x(l, i.promise, 4))
                    : 2 != l.g
                      ? ((a = l.h),
                        (o = Ye(a.data)),
                        1 == (s = JSON.parse(o)).VERSION &&
                          (function (e, t, n) {
                            null != e.g && (e.g.stop(), (e.g = null));
                            var r = t["RELOAD-URI"] || n;
                            ((e.g = new Mr(function () {
                              Nm(e, r);
                            })),
                              (n = t.TTL) && (e.F = n),
                              e.g.ka(e.F),
                              (e.m = t["PATHWAY-PRIORITY"] || []),
                              (e.G = t["PATHWAY-CLONES"] || []));
                          })(e, s, a.uri),
                        A(l, 0))
                      : (u = E(l)) && 7001 == u.code
                        ? l.return()
                        : (null != e.g && (e.g.stop(), (e.g = null)),
                          (e.g = new Mr(function () {
                            Nm(e, t);
                          })),
                          e.g.ka(e.F),
                          void T(l));
                });
              }
              function Om(e, t) {
                if (!e.m.length) return t;
                t = new me(t);
                var n = e.C || e.m[0],
                  r = Math.round(e.B.getBandwidthEstimate()),
                  i = t.g;
                return (
                  "DASH" == e.u
                    ? (i.add("_DASH_pathway", n), i.add("_DASH_throughput", String(r)))
                    : "HLS" == e.u && (i.add("_HLS_pathway", n), i.add("_HLS_throughput", String(r))),
                  _e(i) && xe(t, i),
                  t.toString()
                );
              }
              function Um(e, t, n, r) {
                var i = e.l.get(t);
                (i || (i = new Map()), i.set(n, r), e.l.set(t, i));
              }
              function Bm(e, t, n) {
                ((n = void 0 !== n && n), (t = e.l.get(t) || new Map()));
                for (var r = [], i = g(e.m), a = i.next(), o = {}; !a.done; o = { Cd: void 0 }, a = i.next())
                  if (((o.Cd = a.value), (a = t.get(o.Cd)))) r.push({ ah: o.Cd, location: a });
                  else if (
                    (a = e.G.find(
                      (function (e) {
                        return function (t) {
                          return t.Ol == e.Cd;
                        };
                      })(o),
                    ))
                  ) {
                    var s = t.get(a["BASE-ID"]);
                    s &&
                      (a["URI-REPLACEMENT"].oj
                        ? (ye((s = new me(s)), a["URI-REPLACEMENT"].oj),
                          r.push({ ah: o.Cd, location: s.toString() }))
                        : r.push({ ah: o.Cd, location: s }));
                  }
                for (i = Date.now(), a = (o = g(e.j.keys())).next(); !a.done; a = o.next())
                  ((a = a.value), i > (s = e.j.get(a)) && e.j.delete(a));
                if (
                  ((r = r.filter(function (t) {
                    for (var n = g(e.j.keys()), r = n.next(); !r.done; r = n.next())
                      if (r.value.includes(new me(t.location).Db)) return !1;
                    return !0;
                  })),
                  r.length && (e.C = r[0].ah),
                  (r = r.map(function (e) {
                    return e.location;
                  })),
                  !r.length && e.h)
                )
                  for (o = (i = g(e.h.split(","))).next(); !o.done; o = i.next())
                    (o = t.get(o.value)) && ((e.C = e.h), r.push(o));
                if (!r.length) for (i = (t = g(t.values())).next(); !i.done; i = t.next()) r.push(i.value);
                return n ? r : lt(e.i, r);
              }
              function jm() {
                ((this.l = []),
                  (this.h = []),
                  (this.g = []),
                  (this.j = []),
                  (this.i = []),
                  (this.o = !1),
                  (this.m = new Set()));
              }
              function Fm(e, t) {
                for (var n = [], r = [], i = [], a = [], o = (e = g(e)).next(); !o.done; o = e.next()) {
                  var s = o.value;
                  o = new Map(
                    s.audioStreams.map(function (e) {
                      return [pv(e), e];
                    }),
                  );
                  var u = new Map(
                      s.videoStreams.map(function (e) {
                        return [hv(e), e];
                      }),
                    ),
                    l = new Map(
                      s.textStreams.map(function (e) {
                        return [fv(e), e];
                      }),
                    );
                  if (
                    ((s = new Map(
                      s.imageStreams.map(function (e) {
                        return [gv(e), e];
                      }),
                    )),
                    t)
                  ) {
                    var d = sv(gt);
                    (l.set(fv(d), d), (d = sv("image")), s.set(gv(d), d));
                  }
                  (n.push(o), r.push(u), i.push(l), a.push(s));
                }
                return { Sh: n, mj: r, hj: i, pi: a };
              }
              function Vm(e) {
                var t, n, r, i, a, o, s, u, l, d, c, h, p, f, m, v, y, b, T, w, S, A, E, k, I, C, M, R, _;
                return D(function (D) {
                  switch (D.g) {
                    case 1:
                      if (((t = mt), 1 == e.length)) return D.return(e[0]);
                      for (
                        n = e.map(function (e) {
                          return new Map(
                            e
                              .filter(function (e) {
                                return e.type === t.aa;
                              })
                              .map(function (e) {
                                return [pv(e), e];
                              }),
                          );
                        }),
                          r = e.map(function (e) {
                            return new Map(
                              e
                                .filter(function (e) {
                                  return e.type === t.wa;
                                })
                                .map(function (e) {
                                  return [hv(e), e];
                                }),
                            );
                          }),
                          i = e.map(function (e) {
                            return new Map(
                              e
                                .filter(function (e) {
                                  return e.type === t.Na;
                                })
                                .map(function (e) {
                                  return [fv(e), e];
                                }),
                            );
                          }),
                          a = e.map(function (e) {
                            return new Map(
                              e
                                .filter(function (e) {
                                  return e.type === t.Yf;
                                })
                                .map(function (e) {
                                  return [gv(e), e];
                                }),
                            );
                          }),
                          o = g(i),
                          s = o.next();
                        !s.done;
                        s = o.next()
                      )
                        ((u = s.value), (l = ov(t.Na)), u.set(fv(l), l));
                      for (d = g(a), c = d.next(); !c.done; c = d.next())
                        ((h = c.value), (p = ov(t.Yf)), h.set(gv(p), p));
                      return x(D, Hm((f = new jm()), [], n, 0, Km, Ym, 0), 2);
                    case 2:
                      return ((m = D.h), x(D, Hm(f, [], r, 0, Km, Ym, 0), 3));
                    case 3:
                      return ((v = D.h), x(D, Hm(f, [], i, 0, Km, Ym, 0), 4));
                    case 4:
                      return ((y = D.h), x(D, Hm(f, [], a, 0, Km, Ym, 0), 5));
                    case 5:
                      if (((b = D.h), (T = 0), v.length && m.length))
                        for (E = g(m), k = E.next(); !k.done; k = E.next())
                          for (I = k.value, C = g(v), M = C.next(); !M.done; M = C.next())
                            ((R = M.value), (_ = T++), R.variantIds.push(_), I.variantIds.push(_));
                      else
                        for (w = v.concat(m), S = g(w), A = S.next(); !A.done; A = S.next())
                          A.value.variantIds = [T++];
                      return D.return(v.concat(m).concat(y).concat(b));
                  }
                });
              }
              function Hm(e, t, n, r, i, a, o) {
                var s, u, l, d, c, h, p, f, m, v, y, b, T, w, S, A, E, k;
                return D(function (I) {
                  switch (I.g) {
                    case 1:
                      for (s = [], u = 0; u < n.length; u++)
                        u >= r ? s.push(new Set(n[u].values())) : s.push(new Set());
                      ((l = g(t)), (d = l.next()));
                    case 2:
                      if (d.done) {
                        I.A(4);
                        break;
                      }
                      return (
                        (c = d.value),
                        x(
                          I,
                          (function (e, t, n, r, i, a, o) {
                            return D(function (s) {
                              return 1 == s.g
                                ? ($m(e, n, t, o > 0),
                                  t.matchedStreams
                                    ? t.segmentIndex
                                      ? x(s, Gm(t, r + o), 2)
                                      : s.A(2)
                                    : s.return(!1))
                                : (Xm(t, r, i, a, o), s.return(!0));
                            });
                          })(e, c, n, r, a, s, o),
                          5,
                        )
                      );
                    case 5:
                      if (!I.h) throw new Ke(2, 4, 4037);
                      ((d = l.next()), I.A(2));
                      break;
                    case 4:
                      for (h = g(s), p = h.next(); !p.done; p = h.next())
                        for (f = p.value, m = g(f), v = m.next(); !v.done; v = m.next())
                          ((y = v.value), (b = zm(e, t, y, n, i, a, s)) && t.push(b));
                      for (T = g(s), w = T.next(); !w.done; w = T.next())
                        for (
                          S = w.value, A = g(S), E = A.next(), k = {};
                          !E.done;
                          k = { yh: void 0 }, E = A.next()
                        )
                          if (
                            ((k.yh = E.value),
                            !cv(k.yh) &&
                              t.some(
                                (function (e) {
                                  return function (t) {
                                    return Zm(e.yh, t);
                                  };
                                })(k),
                              ))
                          )
                            throw new Ke(2, 4, 4037);
                      return I.return(t);
                  }
                });
              }
              function Gm(e, t) {
                var n, r, i, a, o, s;
                return D(function (u) {
                  if (1 == u.g) {
                    for (n = [], r = e.matchedStreams, i = t; i < r.length; i++)
                      ((a = r[i]),
                        n.push(a.createSegmentIndex()),
                        a.trickModeVideo &&
                          !a.trickModeVideo.segmentIndex &&
                          n.push(a.trickModeVideo.createSegmentIndex()),
                        a.dependencyStream &&
                          !a.dependencyStream.segmentIndex &&
                          n.push(a.dependencyStream.createSegmentIndex()));
                    return x(u, Promise.all(n), 2);
                  }
                  if (e.segmentIndex instanceof Nu)
                    for (o = t; o < r.length; o++)
                      (s = r[o]).segmentIndex && e.segmentIndex.h.push(s.segmentIndex);
                  T(u);
                });
              }
              function zm(e, t, n, r, i, a, o) {
                if (cv(n)) return null;
                var s = i(n);
                return (
                  $m(e, r, s),
                  s.createSegmentIndex &&
                    ((s.createSegmentIndex = function () {
                      return D(function (e) {
                        return s.segmentIndex ? e.A(0) : ((s.segmentIndex = new Nu()), x(e, Gm(s, 0), 0));
                      });
                    }),
                    (s.closeSegmentIndex = function () {
                      if (
                        (s.segmentIndex && (s.segmentIndex.release(), (s.segmentIndex = null)),
                        s.matchedStreams)
                      )
                        for (var e = g(s.matchedStreams), n = e.next(); !n.done; n = e.next()) {
                          var r;
                          if ((r = (n = n.value).segmentIndex)) {
                            e: {
                              for (var i = (r = g(t)).next(); !i.done; i = r.next())
                                if (
                                  (i = i.value) !== s &&
                                  i.segmentIndex &&
                                  i.matchedStreams &&
                                  i.matchedStreams.includes(n)
                                ) {
                                  r = !0;
                                  break e;
                                }
                              r = !1;
                            }
                            r = !r;
                          }
                          r && (n.segmentIndex.release(), (n.segmentIndex = null));
                        }
                    })),
                  s.matchedStreams && s.matchedStreams.length ? (Xm(s, 0, a, o, 0), s) : null
                );
              }
              function Xm(e, t, n, r, i) {
                var a = e.matchedStreams;
                for (t += i; t < a.length; t++) {
                  var o = a[t];
                  n(e, o);
                  var s = !0;
                  if (
                    ("audio" == e.type && 0 == jr(e.language, o.language) && (s = !1),
                    s && ((s = r[t - i]) && s.delete(o), o.fullMimeTypes))
                  )
                    for (s = (o = g(o.fullMimeTypes.values())).next(); !s.done; s = o.next())
                      e.fullMimeTypes.add(s.value);
                }
              }
              function Wm(e) {
                var t = Object.assign({}, e);
                return (
                  (t.originalId = null),
                  (t.createSegmentIndex = function () {
                    return Promise.resolve();
                  }),
                  (t.closeSegmentIndex = function () {}),
                  (t.roles = t.roles.slice()),
                  (t.segmentIndex = null),
                  (t.emsgSchemeIdUris = []),
                  (t.keyIds = new Set(e.keyIds)),
                  (t.closedCaptions = e.closedCaptions ? new Map(e.closedCaptions) : null),
                  (t.trickModeVideo = null),
                  (t.dependencyStream = null),
                  t
                );
              }
              function Km(e) {
                var t = Object.assign({}, e);
                return (
                  (t.roles = t.roles.slice()),
                  (t.keyIds = new Set(e.keyIds)),
                  (t.segments = []),
                  (t.variantIds = []),
                  (t.closedCaptions = e.closedCaptions ? new Map(e.closedCaptions) : null),
                  t
                );
              }
              function qm(e, t) {
                function n(e, t) {
                  e || (e = []);
                  for (var n = (t = g(t)).next(); !n.done; n = t.next())
                    ((n = n.value), e.includes(n) || e.push(n));
                  return e;
                }
                ((e.roles = n(e.roles, t.roles)),
                  t.emsgSchemeIdUris && (e.emsgSchemeIdUris = n(e.emsgSchemeIdUris, t.emsgSchemeIdUris)));
                for (var r = g(t.keyIds), i = r.next(); !i.done; i = r.next()) e.keyIds.add(i.value);
                if (
                  (null == e.originalId
                    ? (e.originalId = t.originalId)
                    : (r = t.originalId || "") && !e.originalId.endsWith(r) && (e.originalId += "," + r),
                  (r = Fe(e.drmInfos, t.drmInfos)),
                  t.drmInfos.length && e.drmInfos.length && !r.length)
                )
                  throw new Ke(2, 4, 4038);
                if (((e.drmInfos = r), (e.encrypted = e.encrypted || t.encrypted), t.closedCaptions))
                  for (
                    e.closedCaptions || (e.closedCaptions = new Map()), i = (r = g(t.closedCaptions)).next();
                    !i.done;
                    i = r.next()
                  ) {
                    var a = g(i.value);
                    ((i = a.next().value), (a = a.next().value), e.closedCaptions.set(i, a));
                  }
                (e.bandwidth && t.bandwidth && (e.bandwidth = Math.max(e.bandwidth, t.bandwidth)),
                  t.trickModeVideo
                    ? (e.trickModeVideo ||
                        ((e.trickModeVideo = Wm(t.trickModeVideo)),
                        (e.trickModeVideo.matchedStreams = []),
                        (e.trickModeVideo.createSegmentIndex = function () {
                          if (e.trickModeVideo.segmentIndex) return Promise.resolve();
                          for (
                            var t = new Nu(), n = g(e.trickModeVideo.matchedStreams), r = n.next();
                            !r.done;
                            r = n.next()
                          )
                            t.h.push(r.value.segmentIndex);
                          return ((e.trickModeVideo.segmentIndex = t), Promise.resolve());
                        })),
                      e.trickModeVideo.matchedStreams.push(t.trickModeVideo),
                      qm(e.trickModeVideo, t.trickModeVideo))
                    : e.trickModeVideo && (e.trickModeVideo.matchedStreams.push(t), qm(e.trickModeVideo, t)),
                  t.dependencyStream
                    ? (e.dependencyStream ||
                        ((e.dependencyStream = Wm(t.dependencyStream)),
                        (e.dependencyStream.matchedStreams = []),
                        (e.dependencyStream.createSegmentIndex = function () {
                          if (e.dependencyStream.segmentIndex) return Promise.resolve();
                          for (
                            var t = new Nu(), n = g(e.dependencyStream.matchedStreams), r = n.next();
                            !r.done;
                            r = n.next()
                          )
                            t.h.push(r.value.segmentIndex);
                          return ((e.dependencyStream.segmentIndex = t), Promise.resolve());
                        })),
                      e.dependencyStream.matchedStreams.push(t.dependencyStream),
                      qm(e.dependencyStream, t.dependencyStream))
                    : e.dependencyStream &&
                      (e.dependencyStream.matchedStreams.push(t), qm(e.dependencyStream, t)));
              }
              function Ym(e, t) {
                var n = e.roles;
                n || (n = []);
                for (var r = g(t.roles), i = r.next(); !i.done; i = r.next())
                  ((i = i.value), n.includes(i) || n.push(i));
                for (e.roles = n, r = (n = g(t.keyIds)).next(); !r.done; r = n.next()) e.keyIds.add(r.value);
                if (
                  ((e.encrypted = e.encrypted && t.encrypted),
                  e.segments.push.apply(e.segments, m(t.segments)),
                  t.closedCaptions)
                )
                  for (
                    e.closedCaptions || (e.closedCaptions = new Map()), n = (t = g(t.closedCaptions)).next();
                    !n.done;
                    n = t.next()
                  )
                    ((n = (r = g(n.value)).next().value), (r = r.next().value), e.closedCaptions.set(n, r));
              }
              function $m(e, t, n, r) {
                r = void 0 !== r && r ? n.matchedStreams : [];
                for (var i = (t = g(t)).next(); !i.done; i = t.next()) {
                  if (!(i = Jm(e, i.value, n))) return;
                  r.push(i);
                }
                n.matchedStreams = r;
              }
              function Jm(e, t, n) {
                var r = { audio: pv, video: hv, text: fv, image: gv }[n.type],
                  i = null,
                  a = r(n);
                if (t.has(a)) i = t.get(a);
                else {
                  a = {
                    audio: function (e, t) {
                      return Zm(e, t);
                    },
                    video: function (e, t) {
                      return Zm(e, t);
                    },
                    text: ev,
                    image: tv,
                  }[n.type];
                  for (
                    var o = { audio: nv, video: rv, text: iv, image: av }[n.type],
                      s = g(t.values()),
                      u = s.next();
                    !u.done;
                    u = s.next()
                  )
                    !a(n, (u = u.value)) ||
                      n.fastSwitching != u.fastSwitching ||
                      (i && !o(n, i, u)) ||
                      (i = u);
                }
                return (e.o && !cv(i) && t.delete(r(i)), i);
              }
              function Qm(e, t) {
                return e.mimeType == t.mimeType && vv(e.codecs) === vv(t.codecs);
              }
              function Zm(e, t) {
                return !(e.drmInfos && !je(e.drmInfos, t.drmInfos));
              }
              function ev(e, t) {
                return (
                  !t.language ||
                  (e.forced === t.forced && 0 != jr(e.language, t.language) && t.kind == e.kind)
                );
              }
              function tv() {
                return !0;
              }
              function nv(e, t, n) {
                var r = lv(e, t, n);
                if (r === yv) return !0;
                if (r === xv) return !1;
                r = jr(e.language, t.language);
                var i = jr(e.language, n.language);
                if (i > r) return !0;
                if (i < r) return !1;
                if (t.label !== n.label) {
                  if (e.label === t.label) return !1;
                  if (e.label === n.label) return !0;
                }
                if (e.roles.length) {
                  if (
                    ((r = t.roles.filter(function (t) {
                      return e.roles.includes(t);
                    })),
                    (i = n.roles.filter(function (t) {
                      return e.roles.includes(t);
                    })).length > r.length)
                  )
                    return !0;
                  if (i.length < r.length) return !1;
                  if (n.roles.length !== t.roles.length) return n.roles.length < t.roles.length;
                } else {
                  if (!n.roles.length && t.roles.length) return !0;
                  if (n.roles.length && !t.roles.length) return !1;
                }
                return (
                  !(t.primary || !n.primary) ||
                  (!(t.primary && !n.primary) &&
                    ((r = uv(e.channelsCount, t.channelsCount, n.channelsCount)) == yv ||
                      (r != xv &&
                        ((r = uv(e.audioSamplingRate, t.audioSamplingRate, n.audioSamplingRate)) == yv ||
                          (r != xv && !(!e.bandwidth || dv(e.bandwidth, t.bandwidth, n.bandwidth) != yv))))))
                );
              }
              function rv(e, t, n) {
                var r = lv(e, t, n);
                if (r === yv) return !0;
                if (r === xv) return !1;
                if ((r = uv(e.width * e.height, t.width * t.height, n.width * n.height)) == yv) return !0;
                if (r == xv) return !1;
                if (e.frameRate) {
                  if ((r = uv(e.frameRate, t.frameRate, n.frameRate)) == yv) return !0;
                  if (r == xv) return !1;
                }
                return !(!e.bandwidth || dv(e.bandwidth, t.bandwidth, n.bandwidth) != yv);
              }
              function iv(e, t, n) {
                var r = jr(e.language, t.language),
                  i = jr(e.language, n.language);
                if (i > r) return !0;
                if (i < r) return !1;
                if (!t.primary && n.primary) return !0;
                if (t.primary && !n.primary) return !1;
                if (t.label !== n.label) {
                  if (e.label === t.label) return !1;
                  if (e.label === n.label) return !0;
                }
                if (e.roles.length) {
                  if (
                    ((r = t.roles.filter(function (t) {
                      return e.roles.includes(t);
                    })),
                    (i = n.roles.filter(function (t) {
                      return e.roles.includes(t);
                    })).length > r.length)
                  )
                    return !0;
                  if (i.length < r.length) return !1;
                } else {
                  if (!n.roles.length && t.roles.length) return !0;
                  if (n.roles.length && !t.roles.length) return !1;
                }
                return (
                  n.mimeType == e.mimeType &&
                  n.codecs == e.codecs &&
                  (t.mimeType != e.mimeType || t.codecs != e.codecs)
                );
              }
              function av(e, t, n) {
                return uv(e.width * e.height, t.width * t.height, n.width * n.height) == yv;
              }
              function ov(e) {
                return {
                  id: 0,
                  originalId: "",
                  groupId: null,
                  primary: !1,
                  type: e,
                  mimeType: "",
                  codecs: "",
                  language: "",
                  originalLanguage: null,
                  label: null,
                  width: null,
                  height: null,
                  encrypted: !1,
                  keyIds: new Set(),
                  segments: [],
                  variantIds: [],
                  roles: [],
                  forced: !1,
                  channelsCount: null,
                  audioSamplingRate: null,
                  spatialAudio: !1,
                  closedCaptions: null,
                  external: !1,
                  fastSwitching: !1,
                  isAudioMuxedInVideo: !1,
                  baseOriginalId: null,
                };
              }
              function sv(e) {
                return {
                  id: 0,
                  originalId: "",
                  groupId: null,
                  createSegmentIndex: function () {
                    return Promise.resolve();
                  },
                  segmentIndex: new _u([]),
                  mimeType: "",
                  codecs: "",
                  encrypted: !1,
                  drmInfos: [],
                  keyIds: new Set(),
                  language: "",
                  originalLanguage: null,
                  label: null,
                  type: e,
                  primary: !1,
                  trickModeVideo: null,
                  dependencyStream: null,
                  emsgSchemeIdUris: null,
                  roles: [],
                  forced: !1,
                  channelsCount: null,
                  audioSamplingRate: null,
                  spatialAudio: !1,
                  closedCaptions: null,
                  accessibilityPurpose: null,
                  external: !1,
                  fastSwitching: !1,
                  fullMimeTypes: new Set(),
                  isAudioMuxedInVideo: !1,
                  baseOriginalId: null,
                };
              }
              function uv(e, t, n) {
                if (t == e && e != n) return xv;
                if (n == e && e != t) return yv;
                if (t > e) {
                  if (n <= e || n - e < t - e) return yv;
                  if (n - e > t - e) return xv;
                } else {
                  if (n > e) return xv;
                  if (e - n < e - t) return yv;
                  if (e - n > e - t) return xv;
                }
                return bv;
              }
              function lv(e, t, n) {
                var r = e.mimeType === t.mimeType && e.codecs === t.codecs,
                  i = e.mimeType === n.mimeType && e.codecs === n.codecs;
                return r && !i
                  ? xv
                  : !r && i
                    ? yv
                    : ((t = Qm(e, t)), (e = Qm(e, n)), t && !e ? xv : !t && e ? yv : bv);
              }
              function dv(e, t, n) {
                return ((t = Math.abs(e - t)), (e = Math.abs(e - n)) < t ? yv : t < e ? xv : bv);
              }
              function cv(e) {
                switch (e.type) {
                  case gt:
                    return !e.language;
                  case "image":
                    return !e.tilesLayout;
                  default:
                    return !1;
                }
              }
              function hv(e) {
                return mv([
                  e.fastSwitching,
                  e.width,
                  e.frameRate,
                  e.codecs,
                  e.mimeType,
                  e.label,
                  e.roles,
                  e.closedCaptions ? Array.from(e.closedCaptions.entries()) : null,
                  e.bandwidth,
                  e.dependencyStream ? e.dependencyStream.baseOriginalId : null,
                  Array.from(e.keyIds),
                ]);
              }
              function pv(e) {
                return mv([
                  e.fastSwitching,
                  e.channelsCount,
                  e.language,
                  e.bandwidth,
                  e.label,
                  e.codecs,
                  e.mimeType,
                  e.roles,
                  e.audioSamplingRate,
                  e.primary,
                  e.dependencyStream ? e.dependencyStream.baseOriginalId : null,
                  Array.from(e.keyIds),
                ]);
              }
              function fv(e) {
                return mv([e.language, e.label, e.codecs, e.mimeType, e.bandwidth, e.roles]);
              }
              function gv(e) {
                return mv([e.width, e.codecs, e.mimeType]);
              }
              function mv(e) {
                return JSON.stringify(e);
              }
              function vv(e) {
                if (!Tv.has(e)) {
                  var t = pr(e);
                  Tv.set(e, t);
                }
                return Tv.get(e);
              }
              (p(Rm, _u),
                ((i = Rm.prototype).getNumReferences = function () {
                  return this.h ? this.h.timeline.length : 0;
                }),
                (i.release = function () {
                  (_u.prototype.release.call(this), (this.h = null));
                }),
                (i.Ya = function (e) {
                  if (this.h) {
                    for (
                      var t = 0, n = this.h.timeline, r = 0;
                      r < n.length && n[r].end + this.j <= e;
                      r += 1
                    )
                      t += 1;
                    t > 0 &&
                      ((this.h.timeline = n.slice(t)),
                      this.g.length >= t && (this.g = this.g.slice(t)),
                      (this.i += t),
                      0 === this.getNumReferences() && this.release());
                  }
                }),
                (i.find = function (e) {
                  if (
                    this.h &&
                    this.h.timeline &&
                    this.h.timeline.length &&
                    e < this.h.timeline[0].start + this.j
                  )
                    return this.i;
                  if (!this.h) return null;
                  var t = this.h.timeline;
                  if (e < this.j || e >= this.l) return null;
                  for (var n = t.length - 1, r = 0; r < t.length; r++) {
                    var i = t[r],
                      a = i.start + this.j;
                    if (
                      ((i = r < n ? t[r + 1].start + this.j : this.l === 1 / 0 ? i.end + this.j : this.l),
                      e >= a && e < i)
                    )
                      return r + this.i;
                  }
                  return null;
                }),
                (i.get = function (e) {
                  var t = this;
                  if ((e -= this.i) < 0 || e >= this.getNumReferences() || !this.h) return null;
                  var n = this.g[e];
                  if (!n) {
                    var r = (n = this.h.timeline[e]).Vk,
                      i = n.Ld + this.h.gd,
                      a = this.j - this.h.ec,
                      o = this.j + n.end,
                      s = o;
                    e === this.getNumReferences() - 1 &&
                      this.l !== 1 / 0 &&
                      (s = this.F && Math.abs(s - this.l) > 0.1 ? Math.min(s, this.l) : this.l);
                    var u = this.h.codecs,
                      l = this.h.mimeType,
                      d = this.h.bandwidth,
                      c = [],
                      h = !1;
                    if ((n.wc && this.h && this.h.bc && (h = this.h.bc.includes("$SubNumber$")), h)) {
                      h = (n.end - n.start) / n.wc;
                      for (var p = {}, f = 0; f < n.wc; p = { Tf: void 0, cj: void 0 }, f++) {
                        var g = n.start + h * f,
                          m = g + h;
                        ((p.cj = f),
                          (p.Tf = null),
                          ((p = new Fo(
                            this.j + g,
                            this.j + m,
                            (function (e) {
                              return function () {
                                return t.h
                                  ? (null == e.Tf && (e.Tf = Pm(t.h.bc, t.H, r, t.C, i, e.cj, t.G, t.J)),
                                    e.Tf)
                                  : [];
                              };
                            })(p),
                            0,
                            null,
                            this.u,
                            a,
                            this.j,
                            this.l,
                            [],
                            "",
                            null,
                            null,
                            Go,
                            this.B,
                          )).codecs = u),
                          (p.mimeType = l),
                          (p.bandwidth = d),
                          0 == this.I ? f > 0 && p.wd() : f % this.I != 0 && p.wd(),
                          c.push(p));
                      }
                    }
                    (((n = new Fo(
                      this.j + n.start,
                      s,
                      function () {
                        return c.length > 0 || !t.h ? [] : Pm(t.h.bc, t.H, r, t.C, i, null, t.G, t.J);
                      },
                      0,
                      null,
                      this.u,
                      a,
                      this.j,
                      this.l,
                      c,
                      "",
                      null,
                      null,
                      Go,
                      this.B,
                      c.length > 0,
                    )).codecs = u),
                      (n.mimeType = l),
                      (n.j = o),
                      (n.bandwidth = d),
                      (this.g[e] = n));
                  }
                  return n;
                }),
                (i.Fb = function (e) {
                  Dm(this);
                  for (var t = 0; t < this.getNumReferences(); t++) {
                    var n = this.get(t + this.i);
                    n && e(n);
                  }
                }),
                (i.We = function () {
                  return this.K;
                }),
                (Lm.prototype.configure = function (e) {
                  this.o = e;
                }),
                (Lm.prototype.destroy = function () {
                  return (
                    (this.B = this.o = null),
                    (this.i = []),
                    (this.h = null),
                    (this.m = []),
                    (this.G = []),
                    this.l.clear(),
                    null != this.g && (this.g.stop(), (this.g = null)),
                    this.H.destroy()
                  );
                }),
                (Lm.prototype.setManifestType = function (e) {
                  this.u = e;
                }),
                (Lm.prototype.banLocation = function (e) {
                  this.j.set(e, Date.now() + 6e4);
                }),
                ((i = jm.prototype).release = function () {
                  for (var e = g(this.h.concat(this.g, this.j, this.i)), t = e.next(); !t.done; t = e.next())
                    (t = t.value).segmentIndex && t.segmentIndex.release();
                  ((this.h = []),
                    (this.g = []),
                    (this.j = []),
                    (this.i = []),
                    (this.l = []),
                    (this.o = !1),
                    this.m.clear());
                }),
                (i.fk = function () {
                  return this.l;
                }),
                (i.Mg = function () {
                  return this.j.slice();
                }),
                (i.Mj = function () {
                  return this.i;
                }),
                (i.Zh = function (e, t) {
                  if (e) {
                    if ("audio" == e.type)
                      for (var n = g(this.h), r = n.next(); !r.done; r = n.next())
                        (r = r.value).matchedStreams = r.matchedStreams.filter(function (t) {
                          return t !== e;
                        });
                    else if ("video" == e.type)
                      for (r = (n = g(this.g)).next(); !r.done; r = n.next())
                        (((r = r.value).matchedStreams = r.matchedStreams.filter(function (t) {
                          return t !== e;
                        })),
                          r.trickModeVideo &&
                            (r.trickModeVideo.matchedStreams = r.trickModeVideo.matchedStreams.filter(
                              function (t) {
                                return t !== e;
                              },
                            )),
                          r.dependencyStream &&
                            (r.dependencyStream.matchedStreams = r.dependencyStream.matchedStreams.filter(
                              function (t) {
                                return t !== e;
                              },
                            )));
                    else if (e.type == gt)
                      for (r = (n = g(this.j)).next(); !r.done; r = n.next())
                        (r = r.value).matchedStreams = r.matchedStreams.filter(function (t) {
                          return t !== e;
                        });
                    else if ("image" == e.type)
                      for (r = (n = g(this.i)).next(); !r.done; r = n.next())
                        (r = r.value).matchedStreams = r.matchedStreams.filter(function (t) {
                          return t !== e;
                        });
                    (e.segmentIndex && e.closeSegmentIndex(), this.m.delete(t));
                  }
                }),
                (i.lg = function (e, t, n) {
                  n = void 0 !== n && n;
                  var r,
                    i,
                    a,
                    o,
                    s,
                    u,
                    l,
                    d,
                    c,
                    h,
                    p,
                    f,
                    m,
                    v,
                    y,
                    b,
                    w,
                    S,
                    A,
                    E,
                    k,
                    I,
                    C,
                    M,
                    R,
                    _,
                    P,
                    L,
                    N,
                    O,
                    U,
                    B,
                    j = this;
                  return D(function (D) {
                    if (1 == D.g) {
                      if (((r = mt), !t && 1 == e.length))
                        return (
                          (i = Fm(e, !1)),
                          (a = i.Sh),
                          (o = i.mj),
                          (s = i.hj),
                          (u = i.pi),
                          (j.h = Array.from(a[0].values())),
                          (j.g = Array.from(o[0].values())),
                          (j.j = Array.from(s[0].values())),
                          (j.i = Array.from(u[0].values())),
                          D.A(2)
                        );
                      for (l = n ? j.m.size : 0, d = -1, c = 0; c < e.length; c++)
                        ((h = e[c]), j.m.has(h.id) || (j.m.add(h.id), -1 == d && (d = c)));
                      return -1 == d
                        ? D.return()
                        : ((p = Fm(e, !0)),
                          (f = p.Sh),
                          (m = p.mj),
                          (v = p.hj),
                          (y = p.pi),
                          x(
                            D,
                            Promise.all([
                              Hm(j, j.h, f, d, Wm, qm, l),
                              Hm(j, j.g, m, d, Wm, qm, l),
                              Hm(j, j.j, v, d, Wm, qm, l),
                              Hm(j, j.i, y, d, Wm, qm, l),
                            ]),
                            2,
                          ));
                    }
                    if (((b = 0), (w = []), j.g.length && j.h.length))
                      for (M = g(j.h), R = M.next(); !R.done; R = M.next())
                        for (_ = R.value, P = g(j.g), L = P.next(); !L.done; L = P.next())
                          ((N = L.value),
                            (O = Fe(_.drmInfos, N.drmInfos)),
                            (_.drmInfos.length && N.drmInfos.length && !O.length) ||
                              ((U = (_.bandwidth || 0) + (N.bandwidth || 0)),
                              _.dependencyStream && (U += _.dependencyStream.bandwidth || 0),
                              N.dependencyStream && (U += N.dependencyStream.bandwidth || 0),
                              (B = b++),
                              w.push({
                                id: B,
                                language: _.language,
                                disabledUntilTime: 0,
                                primary: _.primary,
                                audio: _,
                                video: N,
                                bandwidth: U,
                                drmInfos: O,
                                allowedByApplication: !0,
                                allowedByKeySystem: !0,
                                decodingInfos: [],
                              })));
                    else
                      for (S = j.g.length ? j.g : j.h, A = g(S), E = A.next(); !E.done; E = A.next())
                        ((k = E.value),
                          (I = b++),
                          (C = k.bandwidth || 0),
                          k.dependencyStream && (C += k.dependencyStream.bandwidth || 0),
                          w.push({
                            id: I,
                            language: k.language,
                            disabledUntilTime: 0,
                            primary: k.primary,
                            audio: k.type == r.aa ? k : null,
                            video: k.type == r.wa ? k : null,
                            bandwidth: C,
                            drmInfos: k.drmInfos,
                            allowedByApplication: !0,
                            allowedByKeySystem: !0,
                            decodingInfos: [],
                          }));
                    ((j.l = w), T(D));
                  });
                }),
                (i.Xi = function (e) {
                  this.o = e;
                }),
                V("shaka.util.PeriodCombiner", jm),
                (jm.prototype.setUseStreamOnce = jm.prototype.Xi),
                (jm.prototype.combinePeriods = jm.prototype.lg),
                (jm.prototype.deleteStream = jm.prototype.Zh),
                (jm.prototype.getImageStreams = jm.prototype.Mj),
                (jm.prototype.getTextStreams = jm.prototype.Mg),
                (jm.prototype.getVariants = jm.prototype.fk));
              var yv = 1,
                bv = 0,
                xv = -1,
                Tv = new Map();
              function wv(e, t) {
                try {
                  return (function (e, t) {
                    var n = new DOMParser(),
                      r = Sv.value()(e);
                    e = null;
                    try {
                      e = n.parseFromString(r, "text/xml");
                    } catch (i) {
                      return null;
                    }
                    if (
                      !(n = e.documentElement) ||
                      n.getElementsByTagName("parsererror").length ||
                      n.tagName != t
                    )
                      return null;
                    if (!("createNodeIterator" in document)) return n;
                    for (t = document.createNodeIterator(e, NodeFilter.SHOW_ALL); (e = t.nextNode()); )
                      if (e instanceof HTMLElement || e instanceof SVGElement) return null;
                    return n;
                  })(Je(e), t);
                } catch (n) {
                  return null;
                }
              }
              var Sv = new ae(function () {
                if ("undefined" != typeof trustedTypes) {
                  var e = trustedTypes.createPolicy("shaka-player#xml", {
                    createHTML: function (e) {
                      return e;
                    },
                  });
                  return function (t) {
                    return e.createHTML(t);
                  };
                }
                return function (e) {
                  return e;
                };
              });
              function Av() {
                var e = this;
                ((this.j = this.g = null),
                  (this.B = []),
                  (this.h = null),
                  (this.Fa = 1),
                  (this.H = []),
                  (this.l = { vf: "", type: "", profiles: [], uc: null, rb: 0, bb: null, qe: 0 }),
                  (this.u = new Map()),
                  (this.C = new Map()),
                  (this.o = new Map()),
                  (this.F = new Map()),
                  (this.za = new Map()),
                  (this.m = new jm()),
                  (this.K = 0),
                  (this.Da = new H(5)),
                  (this.M = new Mr(function () {
                    e.J && !e.g.continueLoadingWhenPaused && (e.I.Ma(e.J, "timeupdate"), e.J.paused)
                      ? e.I.Aa(e.J, "timeupdate", function () {
                          return Ov(e);
                        })
                      : Ov(e);
                  })),
                  (this.R = new Bi()),
                  (this.O = null),
                  (this.G = []),
                  (this.ba = 1 / 0),
                  (this.va = !1),
                  (this.i = null),
                  (this.N = 0),
                  (this.T = !1),
                  (this.I = new ne()),
                  (this.J = null),
                  (this.V = !1),
                  (this.$ = ""),
                  (this.oa = function () {
                    return !1;
                  }),
                  (this.X = []),
                  (this.ma = new Set()),
                  (this.ya = new Zg()));
              }
              function Ev(e) {
                var t, n, r, i, a, o, s, u, l, d, c;
                return D(function (h) {
                  return 1 == h.g
                    ? ((t = 4),
                      (n = "MPD"),
                      (r = (function (e) {
                        var t = e.l.qe;
                        if (!e.l.vf || !t || !e.H.length) return [];
                        var n = Date.now() / 1e3,
                          r = e.H.filter(function (e) {
                            return !(e = mn(e.attributes.ttl)) || t + e > n;
                          })
                            .map(nn)
                            .filter(Dr);
                        return r.length ? lt(e.B, r) : [];
                      })(e)),
                      (i = e.B),
                      r.length
                        ? ((i = r), (n = "Patch"), (t = 6))
                        : e.B.length > 1 && e.i && (a = Bm(e.i, "Location", !0)).length && (i = a),
                      (o = Gi(i, e.g.retryParameters)),
                      (s = Date.now()),
                      x(h, Gv(e, o, 0, { type: t }), 2))
                    : 3 != h.g
                      ? ((u = h.h),
                        e.j
                          ? (u.uri && u.uri != u.originalUri && !e.B.includes(u.uri) && e.B.unshift(u.uri),
                            (l = new me(u.uri)),
                            (e.$ = l.g.toString()),
                            x(
                              h,
                              (function (e, t, n, r) {
                                var i, a, o, s, u, l, d, c;
                                return D(function (h) {
                                  if (1 == h.g) {
                                    if (((i = t), (a = e.g.dash.manifestPreprocessor) != id)) {
                                      if (
                                        (ce(
                                          "manifest.dash.manifestPreprocessor configuration",
                                          "Please Use manifest.dash.manifestPreprocessorTXml instead.",
                                        ),
                                        !(o = wv(i, r)))
                                      )
                                        throw new Ke(2, 4, 4001, n);
                                      (a(o), (i = Qe(o.outerHTML)));
                                    }
                                    if (!(s = Yt(i, r))) throw new Ke(2, 4, 4001, n);
                                    return (
                                      (u = e.g.dash.manifestPreprocessorTXml) != ad && u(s),
                                      "Patch" === r
                                        ? h.return(
                                            (function (e, t) {
                                              var n,
                                                r,
                                                i,
                                                a,
                                                o,
                                                s,
                                                u,
                                                l,
                                                d,
                                                c,
                                                h,
                                                p,
                                                f,
                                                v,
                                                y,
                                                b,
                                                w,
                                                S,
                                                A,
                                                E,
                                                k,
                                                I,
                                                C,
                                                M;
                                              return D(function (R) {
                                                if (1 == R.g) {
                                                  if (
                                                    ((n = t.attributes.mpdId),
                                                    (r = sn(t, "originalPublishTime", cn)),
                                                    !n || n !== e.l.vf || r !== e.l.qe)
                                                  )
                                                    throw ((e.H = []), new Ke(1, 4, 4052));
                                                  for (
                                                    i = [], a = [], o = new Set(), s = g(Zt(t)), u = s.next();
                                                    !u.done;
                                                    u = s.next()
                                                  )
                                                    if (
                                                      ((l = u.value),
                                                      (d = xn(l.attributes.sel || "")),
                                                      (c = d[d.length - 1]),
                                                      (h = nn(l) || ""),
                                                      "MPD" === c.name)
                                                    )
                                                      if ("mediaPresentationDuration" === c.Dc) {
                                                        var _ = hn(nn(l) || "");
                                                        if (null != _) {
                                                          e.l.uc = _;
                                                          for (
                                                            var D = g(e.u.values()), P = D.next();
                                                            !P.done;
                                                            P = D.next()
                                                          )
                                                            P.value.uc = _;
                                                        }
                                                      } else if ("type" === c.Dc) {
                                                        for (
                                                          e.h.presentationTimeline.cd("static" == h),
                                                            e.l.type = h,
                                                            D = (_ = g(e.u.values())).next();
                                                          !D.done;
                                                          D = _.next()
                                                        )
                                                          D.value.Eb = "dynamic" == h;
                                                        "static" == h && (e.K = -1);
                                                      } else
                                                        "publishTime" === c.Dc
                                                          ? (e.l.qe = cn(h) || 0)
                                                          : null === c.Dc && "add" === l.tagName && a.push(l);
                                                    else if ("PatchLocation" === c.name) Tn(e.H, l);
                                                    else if ("Period" === c.name)
                                                      "add" === l.tagName
                                                        ? a.push(l)
                                                        : "remove" === l.tagName && c.id && Cv(e, c.id);
                                                    else if ("SegmentTemplate" === c.name) {
                                                      if (
                                                        (_ = (D = xn(l.attributes.sel || ""))[D.length - 1])
                                                          .Dc
                                                      ) {
                                                        ((D = Mv(e, D)), (P = nn(l) || ""));
                                                        for (
                                                          var L = g(D), N = L.next();
                                                          !N.done;
                                                          N = L.next()
                                                        )
                                                          Sn((N = e.u.get(N.value)).L.Oc, l.tagName, _.Dc, P);
                                                        _ = D;
                                                      } else _ = [];
                                                      for (p = g(_), f = p.next(); !f.done; f = p.next())
                                                        ((v = f.value), o.add(v));
                                                    } else if (
                                                      "SegmentTimeline" === c.name ||
                                                      "S" === c.name
                                                    ) {
                                                      for (
                                                        _ = xn(l.attributes.sel || ""),
                                                          P = (D = g((_ = Mv(e, _)))).next();
                                                        !P.done;
                                                        P = D.next()
                                                      )
                                                        (Tn(
                                                          (L = en(
                                                            (P = um(
                                                              (P = e.u.get(P.value)),
                                                              Mm,
                                                              "SegmentTimeline",
                                                            )),
                                                            "S",
                                                          )),
                                                          l,
                                                        ),
                                                          (P.children = L));
                                                      for (y = g(_), b = y.next(); !b.done; b = y.next())
                                                        ((w = b.value), o.add(w));
                                                    }
                                                  for (S = g(o), A = S.next(); !A.done; A = S.next())
                                                    ((E = A.value), Rv(e, E));
                                                  for (k = g(a), I = k.next(); !I.done; I = k.next())
                                                    ((C = I.value),
                                                      i.push.apply(
                                                        i,
                                                        m(
                                                          _v(
                                                            e,
                                                            {
                                                              Eb: "dynamic" == e.l.type,
                                                              presentationTimeline: e.h.presentationTimeline,
                                                              sa: null,
                                                              na: null,
                                                              qa: null,
                                                              L: null,
                                                              bandwidth: 0,
                                                              Og: !1,
                                                              rb: e.l.rb,
                                                              profiles: e.l.profiles,
                                                              uc: e.l.uc,
                                                              roles: null,
                                                              Lb: zv,
                                                            },
                                                            e.l.bb,
                                                            C,
                                                            !0,
                                                          ).periods,
                                                        ),
                                                      ));
                                                  return i.length
                                                    ? ((e.h.periodCount += i.length),
                                                      (e.h.gapCount = e.N),
                                                      x(R, Iv(e, i, !0), 2))
                                                    : R.A(2);
                                                }
                                                ("static" == e.l.type &&
                                                  ((M = e.l.uc), e.h.presentationTimeline.Ab(M || 1 / 0)),
                                                  T(R));
                                              });
                                            })(e, s),
                                          )
                                        : e.g.dash.disableXlinkProcessing
                                          ? h.return(kv(e, s, n))
                                          : ((l = e.g.dash.xlinkFailGracefully),
                                            (d = lm(s, e.g.retryParameters, l, n, e.j.networkingEngine)),
                                            ji(e.R, d),
                                            x(h, d.promise, 2))
                                    );
                                  }
                                  return ((c = h.h), h.return(kv(e, c, n)));
                                });
                              })(e, u.data, u.uri, n),
                              3,
                            ))
                          : h.return(0))
                      : ((d = Date.now()), (c = (d - s) / 1e3), e.Da.sample(1, c), e.ma.clear(), h.return(c));
                });
              }
              function kv(e, t, n) {
                var r,
                  i,
                  a,
                  o,
                  s,
                  u,
                  l,
                  d,
                  c,
                  h,
                  p,
                  f,
                  v,
                  y,
                  b,
                  S,
                  k,
                  I,
                  C,
                  M,
                  R,
                  _,
                  P,
                  L,
                  N,
                  O,
                  U,
                  B,
                  j,
                  F,
                  V,
                  H,
                  G,
                  z,
                  X,
                  W,
                  q,
                  Y,
                  $,
                  J,
                  Q,
                  Z,
                  ee,
                  te,
                  ne,
                  re,
                  ie,
                  ae,
                  oe,
                  se,
                  ue,
                  le,
                  de,
                  ce;
                return D(function (he) {
                  switch (he.g) {
                    case 1:
                      for (
                        e.i && e.i.l.clear(),
                          r = [n],
                          i = [],
                          a = new Map(),
                          o = en(t, "Location"),
                          s = g(o),
                          u = s.next();
                        !u.done;
                        u = s.next()
                      )
                        ((l = u.value),
                          (d = l.attributes.serviceLocation),
                          (c = nn(l)) &&
                            ((h = lt(r, [c])[0]),
                            d && (e.i ? Um(e.i, "Location", d, h) : a.set(d, h)),
                            i.push(h)));
                      if (
                        (e.i
                          ? (p = Bm(e.i, "Location", !0)).length > 0 && (r = e.B = p)
                          : i.length && (r = e.B = i),
                        (e.l.vf = t.attributes.id || ""),
                        (e.l.qe = sn(t, "publishTime", cn) || 0),
                        (e.H = en(t, "PatchLocation")),
                        (f = Promise.resolve()),
                        (v = an(t, "ContentSteering")) && e.j)
                      )
                        for (
                          y = v.attributes.defaultServiceLocation,
                            e.i
                              ? ((e.i.i = r), (e.i.h = y))
                              : ((e.i = new Lm(e.j)),
                                e.i.configure(e.g),
                                e.i.setManifestType("DASH"),
                                (e.i.i = r),
                                (e.i.h = y),
                                (b = nn(v)) &&
                                  (sn(v, "queryBeforeStart", yn, !1) ? (f = Nm(e.i, b)) : Nm(e.i, b))),
                            S = g(a.keys()),
                            k = S.next();
                          !k.done;
                          k = S.next()
                        )
                          ((I = k.value), (C = a.get(I)), Um(e.i, "Location", I, C));
                      if (((M = en(t, "BaseURL")), (R = !1), e.i))
                        for (_ = g(M), P = _.next(); !P.done; P = _.next())
                          ((L = P.value),
                            (N = L.attributes.serviceLocation),
                            (O = nn(L)),
                            N && O && (Um(e.i, "BaseURL", N, O), (R = !0)));
                      if (
                        (e.X.splice(0),
                        (R && e.i) || ((U = M.map(nn)), e.X.push.apply(e.X, m(lt(r, U)))),
                        (B = e.i),
                        (j = e.X),
                        (F = Xv.call(Av, B, R, j)),
                        (e.l.bb = F),
                        (V = 0),
                        M && M.length && (V = sn(M[0], "availabilityTimeOffset", vn) || 0),
                        (e.l.rb = V),
                        (e.K = sn(t, "minimumUpdatePeriod", hn, -1)),
                        (H = sn(t, "availabilityStartTime", cn)),
                        (G = sn(t, "timeShiftBufferDepth", hn)),
                        (z = e.g.dash.ignoreSuggestedPresentationDelay),
                        (X = null),
                        z || (X = sn(t, "suggestedPresentationDelay", hn)),
                        (W = e.g.dash.ignoreMaxSegmentDuration),
                        (q = null),
                        W || (q = sn(t, "maxSegmentDuration", hn)),
                        (Y = t.attributes.type || "static"),
                        e.h &&
                          e.h.presentationTimeline &&
                          (e.V = e.h.presentationTimeline.W() && "static" == Y),
                        (e.l.type = Y),
                        e.h)
                      )
                        for (
                          $ = e.h.presentationTimeline, J = $.Hb(), Q = g(e.o.values()), Z = Q.next();
                          !Z.done;
                          Z = Q.next()
                        )
                          (ee = Z.value).segmentIndex && ee.segmentIndex.Ya(J);
                      else
                        ((te = e.g.dash.ignoreMinBufferTime),
                          (ne = 0),
                          te || (ne = sn(t, "minBufferTime", hn) || 0),
                          (re =
                            null != X
                              ? Math.min(X, G || 1 / 0)
                              : e.g.defaultPresentationDelay > 0
                                ? e.g.defaultPresentationDelay
                                : Math.min(1.5 * ne, G || 1 / 0)),
                          ($ = new uu(H, re, e.g.dash.autoCorrectDrift)));
                      return (
                        $.cd("static" == Y),
                        $.W() &&
                          !isNaN(e.g.availabilityWindowOverride) &&
                          (G = e.g.availabilityWindowOverride),
                        null == G && (G = 1 / 0),
                        $.Lf(G),
                        (ie = t.attributes.profiles || ""),
                        (e.l.profiles = ie.split(",")),
                        (ae = {
                          Eb: "static" != Y,
                          presentationTimeline: $,
                          sa: null,
                          na: null,
                          qa: null,
                          L: null,
                          bandwidth: 0,
                          Og: !1,
                          rb: V,
                          uc: null,
                          profiles: ie.split(","),
                          roles: null,
                          Lb: zv,
                        }),
                        x(he, f, 2)
                      );
                    case 2:
                      return (
                        (e.N = 0),
                        (oe = _v(e, ae, F, t, !1)),
                        (se = oe.duration),
                        (ue = oe.periods),
                        (("static" != Y || e.V) && oe.ai) || $.Ab(se || 1 / 0),
                        e.T && e.va && $.Ui(e.ba),
                        $.Wg(q || 1),
                        e.T && e.va && ((le = null != X ? X : e.g.defaultPresentationDelay), $.rh(le)),
                        e.h
                          ? ((e.h.periodCount = ue.length), (e.h.gapCount = e.N), x(he, Iv(e, ue, !1), 4))
                          : x(he, e.m.lg(ue, ae.Eb), 6)
                      );
                    case 6:
                      var pe = $,
                        fe = e.m.l,
                        ge = e.m.Mg(),
                        me = e.m.i,
                        ve = e.g.dash.sequenceMode,
                        ye = an(t, "ServiceDescription");
                      if (ye) {
                        var be = an(ye, "Latency");
                        if (((ye = an(ye, "PlaybackRate")), be || ye)) {
                          var xe = {};
                          (be &&
                            ("target" in be.attributes &&
                              (xe.targetLatency = parseInt(be.attributes.target, 10) / 1e3),
                            "max" in be.attributes && (xe.maxLatency = parseInt(be.attributes.max, 10) / 1e3),
                            "min" in be.attributes &&
                              (xe.minLatency = parseInt(be.attributes.min, 10) / 1e3)),
                            ye &&
                              ("max" in ye.attributes && (xe.maxPlaybackRate = parseFloat(ye.attributes.max)),
                              "min" in ye.attributes && (xe.minPlaybackRate = parseFloat(ye.attributes.min))),
                            (be = xe));
                        } else be = null;
                      } else be = null;
                      e: {
                        if ((ye = en(t, "SupplementalProperty")).length)
                          for (xe = (ye = g(ye)).next(); !xe.done; xe = ye.next())
                            if ("urn:mpeg:dash:chaining:2016" == (xe = xe.value).attributes.schemeIdUri) {
                              ye = xe.attributes.value;
                              break e;
                            }
                        ye = null;
                      }
                      if (
                        ((e.h = {
                          presentationTimeline: pe,
                          variants: fe,
                          textStreams: ge,
                          imageStreams: me,
                          offlineSessionIds: [],
                          sequenceMode: ve,
                          ignoreManifestTimestampsInSegmentsMode: !1,
                          type: "DASH",
                          serviceDescription: be,
                          nextUrl: ye,
                          periodCount: ue.length,
                          gapCount: e.N,
                          isLowLatency: e.T,
                          startTime: null,
                        }),
                        !$.kj())
                      ) {
                        he.A(7);
                        break;
                      }
                      return (
                        (de = en(t, "UTCTiming")),
                        x(
                          he,
                          (function (e, t, n) {
                            var r, i, a, o, s, u, l, d;
                            return D(function (c) {
                              switch (c.g) {
                                case 1:
                                  ((r = n.map(function (e) {
                                    return { scheme: e.attributes.schemeIdUri, value: e.attributes.value };
                                  })),
                                    (i = e.g.dash.clockSyncUri),
                                    !r.length &&
                                      i &&
                                      r.push({ scheme: "urn:mpeg:dash:utc:http-head:2014", value: i }),
                                    (a = g(r)),
                                    (o = a.next()));
                                case 2:
                                  if (o.done) {
                                    c.A(4);
                                    break;
                                  }
                                  switch (((s = o.value), w(c, 5), (u = s.scheme), (l = s.value), u)) {
                                    case "urn:mpeg:dash:utc:http-head:2014":
                                    case "urn:mpeg:dash:utc:http-head:2012":
                                      return c.A(7);
                                    case "urn:mpeg:dash:utc:http-xsdate:2014":
                                    case "urn:mpeg:dash:utc:http-iso:2014":
                                    case "urn:mpeg:dash:utc:http-xsdate:2012":
                                    case "urn:mpeg:dash:utc:http-iso:2012":
                                      return c.A(8);
                                    case "urn:mpeg:dash:utc:direct:2014":
                                    case "urn:mpeg:dash:utc:direct:2012":
                                      return ((d = Date.parse(l)), c.return(isNaN(d) ? 0 : d - Date.now()));
                                    case "urn:mpeg:dash:utc:http-ntp:2014":
                                    case "urn:mpeg:dash:utc:ntp:2014":
                                    case "urn:mpeg:dash:utc:sntp:2014":
                                      K("NTP UTCTiming scheme is not supported");
                                      break;
                                    default:
                                      K("Unrecognized scheme in UTCTiming element", u);
                                  }
                                  c.A(9);
                                  break;
                                case 7:
                                  return x(c, jv(e, t, l, "HEAD"), 10);
                                case 10:
                                  return c.return(c.h);
                                case 8:
                                  return x(c, jv(e, t, l, "GET"), 11);
                                case 11:
                                  return c.return(c.h);
                                case 9:
                                  A(c, 3);
                                  break;
                                case 5:
                                  E(c);
                                case 3:
                                  ((o = a.next()), c.A(2));
                                  break;
                                case 4:
                                  return (
                                    K(
                                      "A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!",
                                    ),
                                    c.return(0)
                                  );
                              }
                            });
                          })(e, F, de),
                          8,
                        )
                      );
                    case 8:
                      if (((ce = he.h), !e.j)) return he.return();
                      $.Vi(ce);
                    case 7:
                      ($.qf(), e.m && !e.h.presentationTimeline.W() && e.m.release());
                    case 4:
                      (e.j.makeTextStreamsForClosedCaptions(e.h),
                        (function (e) {
                          for (
                            var t = Array.from(e.F.keys()).filter(function (t) {
                                return !e.G.includes(t);
                              }),
                              n = (t = g(t)).next();
                            !n.done;
                            n = t.next()
                          ) {
                            n = n.value;
                            for (var r = !0, i = g(e.F.get(n)), a = i.next(); !a.done; a = i.next()) {
                              a = a.value;
                              var o = e.o.get(a);
                              o &&
                                (o.segmentIndex && 0 != o.segmentIndex.getNumReferences()
                                  ? (r = !1)
                                  : (e.m && e.m.Zh(o, n), e.o.delete(a)));
                            }
                            r && e.F.delete(n);
                          }
                        })(e),
                        (function (e, t) {
                          t = new Set(
                            t.map(function (e) {
                              return e.id;
                            }),
                          );
                          for (var n = g(e.C.keys()), r = n.next(); !r.done; r = n.next())
                            ((r = r.value), t.has(r) || e.C.delete(r));
                        })(e, ue),
                        T(he));
                  }
                });
              }
              function Iv(e, t, n) {
                var r;
                return D(function (i) {
                  if (1 == i.g) return x(i, e.m.lg(t, !0, n), 2);
                  ((e.h.variants = e.m.l),
                    (r = e.m.Mg()).length > 0 && (e.h.textStreams = r),
                    (e.h.imageStreams = e.m.i),
                    e.j.filter(e.h),
                    T(i));
                });
              }
              function Cv(e, t) {
                e.h.periodCount--;
                for (var n = g(e.u.keys()), r = n.next(); !r.done; r = n.next())
                  (r = r.value).startsWith(t) &&
                    ((um(e.u.get(r), Mm, "SegmentTimeline").children = []), Rv(e, r), e.u.delete(r));
                e.G = e.G.filter(function (e) {
                  return e !== t;
                });
              }
              function Mv(e, t) {
                for (var n = "", r = "", i = -1, a = "", o = (t = g(t)).next(); !o.done; o = t.next())
                  "Period" === (o = o.value).name
                    ? (n = o.id)
                    : "AdaptationSet" === o.name
                      ? ((r = o.id), null !== o.position && (i = o.position))
                      : "Representation" === o.name && (a = o.id);
                if (((t = []), a)) t.push(n + "," + a);
                else if (r)
                  for (i = g(e.u.values()), e = i.next(); !e.done; e = i.next())
                    (e = e.value).sa.id === n && e.qa.id === r && e.L.id && t.push(n + "," + e.L.id);
                else if (i > -1)
                  for (r = g(e.u.values()), e = r.next(); !e.done; e = r.next())
                    (e = e.value).sa.id === n && e.qa.position === i && e.L.id && t.push(n + "," + e.L.id);
                return t;
              }
              function Rv(e, t) {
                var n = e.u.get(t),
                  r = e.o.get(t);
                r.segmentIndex && r.segmentIndex.Ya(e.h.presentationTimeline.Hb());
                try {
                  var i = Cm(
                    n,
                    function (t, n, r, i) {
                      return Vv(e, t, n, r, i);
                    },
                    e.o,
                    !0,
                    e.g.dash.initialSegmentLimit,
                    e.za,
                    n.L.aesKey,
                    null,
                    !0,
                    e.C,
                  );
                  r.createSegmentIndex = function () {
                    return D(function (e) {
                      if (1 == e.g) return r.segmentIndex ? e.A(0) : x(e, i.Sc(), 3);
                      ((r.segmentIndex = e.h), T(e));
                    });
                  };
                } catch (a) {
                  if (((t = n.L.contentType) != gt && "application" != t && "image" != t) || 4002 != a.code)
                    throw a;
                }
              }
              function _v(e, t, n, r, i) {
                var a = t.uc;
                a || ((a = sn(r, "mediaPresentationDuration", hn)), (e.l.uc = a));
                var o = 0;
                e.h && e.h.presentationTimeline && e.V && (o = e.h.presentationTimeline.Zb());
                var s = [],
                  u = o;
                r = en(r, "Period");
                for (var l = 0; l < r.length; l++) {
                  var d = r[l],
                    c = r[l + 1],
                    h = sn(d, "start", hn, u),
                    p = d.attributes.id,
                    f = sn(d, "duration", hn);
                  h = 0 == l && 0 == h && e.V ? o : h;
                  var m = null;
                  if (c) {
                    var v = sn(c, "start", hn);
                    null != v && (m = v - h + o);
                  } else null != a && (m = a - h + o);
                  if (
                    ((v = vt),
                    m && f && Math.abs(m - f) > v && m > f && e.N++,
                    null == m && (m = f),
                    !(null !== e.O && null !== p && null !== h && h < e.O) ||
                      e.G.includes(p) ||
                      l + 1 == r.length)
                  ) {
                    if (
                      (null !== h && (null === e.O || h > e.O) && (e.O = h),
                      (u = Dv(e, t, n, { start: h, duration: m, node: d, kf: null == m || !c })),
                      s.push(u),
                      t.sa.id && m && e.za.set(t.sa.id, m),
                      null == m)
                    ) {
                      u = null;
                      break;
                    }
                    u = h + m;
                  }
                }
                if (i)
                  for (n = (t = g(s)).next(); !n.done; n = t.next())
                    ((n = n.value.id), e.G.includes(n) || e.G.push(n));
                else
                  e.G = s.map(function (e) {
                    return e.id;
                  });
                return null != a
                  ? { periods: s, duration: a + o, ai: !1 }
                  : { periods: s, duration: u, ai: !0 };
              }
              function Dv(e, t, n, r) {
                ((t.sa = Bv(e, r.node, null, n)),
                  (t.na = r),
                  (t.sa.rb = t.rb),
                  t.sa.id || (t.sa.id = "__shaka_period_" + r.start));
                var i = en(r.node, "EventStream");
                n = t.presentationTimeline.Hb();
                for (var a = (i = g(i)).next(); !a.done; a = i.next()) Fv(e, r.start, r.duration, a.value, n);
                for (i = (n = g((n = en(r.node, "SupplementalProperty")))).next(); !i.done; i = n.next())
                  "urn:mpeg:dash:urlparam:2014" == (i = i.value).attributes.schemeIdUri &&
                    (i = Nv(e, i)) &&
                    (t.Lb = i);
                if (
                  ((n = en(r.node, "AdaptationSet")
                    .map(function (n, r) {
                      return Lv(e, t, r, n);
                    })
                    .filter(Dr)),
                  t.Eb)
                ) {
                  i = [];
                  for (var o = (a = g(n)).next(); !o.done; o = a.next())
                    for (var s = (o = g(o.value.Rk)).next(); !s.done; s = o.next()) i.push(s.value);
                  if (i.length != new Set(i).size) throw new Ke(2, 4, 4018);
                }
                for (i = new Map(), o = (a = g(n)).next(); !o.done; o = a.next())
                  for (s = (o = g(o.value.Aj)).next(); !s.done; s = o.next()) {
                    var u = g(s.value);
                    ((s = u.next().value), (u = u.next().value), i.set(s, u));
                  }
                if (i.size)
                  for (a = null, s = (o = g(n)).next(); !s.done; s = o.next()) {
                    u = [];
                    for (
                      var l = g((s = s.value).streams), d = l.next(), c = {};
                      !d.done;
                      c = { Ah: void 0 }, d = l.next()
                    )
                      if (((c.Ah = d.value), i.has(c.Ah.originalId))) {
                        a ||
                          (a = en(r.node, "AdaptationSet")
                            .map(function (n, r) {
                              return Lv(e, t, r, n);
                            })
                            .filter(Dr));
                        for (var h = (d = g(a)).next(); !h.done; h = d.next())
                          (h = h.value.streams.find(
                            (function (e) {
                              return function (t) {
                                return t.originalId == e.Ah.originalId;
                              };
                            })(c),
                          )) &&
                            ((h.dependencyStream = i.get(h.originalId)),
                            (h.originalId += h.dependencyStream.originalId),
                            u.push(h));
                      }
                    u.length && s.streams.push.apply(s.streams, m(u));
                  }
                if (
                  ((r = n.filter(function (e) {
                    return !e.Hh;
                  })),
                  (n = n.filter(function (e) {
                    return e.Hh;
                  })),
                  !e.g.disableIFrames)
                )
                  for (i = (n = g(n)).next(); !i.done; i = n.next())
                    for (a = (i = i.value).Hh.split(" "), s = (o = g(r)).next(); !s.done; s = o.next())
                      if (((s = s.value), a.includes(s.id)))
                        for (u = (s = g(s.streams)).next(); !u.done; u = s.next()) hi(u.value, i.streams);
                if (
                  ((n = Pv(e.g.disableAudio, r, "audio")),
                  (i = Pv(e.g.disableVideo, r, "video")),
                  (a = Pv(e.g.disableText, r, gt)),
                  (r = Pv(e.g.disableThumbnails, r, "image")),
                  0 === i.length && 0 === n.length)
                )
                  throw new Ke(2, 4, 4004);
                return { id: t.sa.id, audioStreams: n, videoStreams: i, textStreams: a, imageStreams: r };
              }
              function Pv(e, t, n) {
                return e || !t.length
                  ? []
                  : t.reduce(function (e, t) {
                      return (t.contentType != n || e.push.apply(e, m(t.streams)), e);
                    }, []);
              }
              function Lv(t, n, r, i) {
                function a(e) {
                  var r = e.attributes["dvb:fontFamily"];
                  ((e = e.attributes["dvb:url"]),
                    r && e && ((e = lt(n.qa.bb(), [e], n.Lb())), t.j.addFont(r, e[0])));
                }
                function o(e) {
                  switch (e) {
                    case 1:
                    case 5:
                    case 6:
                    case 7:
                      return "srgb";
                    case 9:
                      return "rec2020";
                    case 11:
                    case 12:
                      return "p3";
                  }
                }
                function s(e) {
                  switch (e) {
                    case 1:
                    case 6:
                    case 13:
                    case 14:
                    case 15:
                      return "SDR";
                    case 16:
                      return "PQ";
                    case 18:
                      return "HLG";
                  }
                }
                ((n.qa = Bv(t, i, n.sa, null)), (n.qa.position = r));
                var u = !1,
                  l = (r = en(i, "Role"))
                    .map(function (e) {
                      return e.attributes.value;
                    })
                    .filter(Dr),
                  d = void 0,
                  c = n.qa.contentType == gt;
                c && (d = "subtitle");
                for (var h = (r = g(r)).next(); !h.done; h = r.next()) {
                  var p = (h = h.value).attributes.schemeIdUri;
                  if (null == p || "urn:mpeg:dash:role:2011" == p)
                    switch (((h = h.attributes.value), h)) {
                      case "main":
                        u = !0;
                        break;
                      case "caption":
                      case "subtitle":
                        d = h;
                    }
                }
                var f = en(i, "EssentialProperty");
                r = null;
                var v = !1;
                ((h = null), (p = !1));
                for (var y = (f = g(f)).next(); !y.done; y = f.next()) {
                  var b = (y = y.value).attributes.schemeIdUri;
                  if ("http://dashif.org/guidelines/trickmode" == b) r = y.attributes.value;
                  else if ("urn:mpeg:mpegB:cicp:TransferCharacteristics" == b)
                    var w = s(parseInt(y.attributes.value, 10));
                  else if ("urn:mpeg:mpegB:cicp:ColourPrimaries" == b)
                    var S = o(parseInt(y.attributes.value, 10));
                  else
                    "urn:mpeg:mpegB:cicp:MatrixCoefficients" != b &&
                      ("urn:mpeg:dash:ssr:2023" == b && t.g.dash.enableFastSwitching
                        ? (v = !0)
                        : "urn:dvb:dash:fontdownload:2014" == b
                          ? a(y)
                          : ("urn:mpeg:dash:urlparam:2014" == b && (h = Nv(t, y))) || (p = !0));
                }
                if (p) return null;
                var A = null;
                for (f = (p = g((p = en(i, "SupplementalProperty")))).next(); !f.done; f = p.next())
                  "http://dashif.org/guidelines/last-segment-number" ==
                  (y = (f = f.value).attributes.schemeIdUri)
                    ? (A = parseInt(f.attributes.value, 10) - 1)
                    : "urn:mpeg:mpegB:cicp:TransferCharacteristics" == y
                      ? (w = s(parseInt(f.attributes.value, 10)))
                      : "urn:mpeg:mpegB:cicp:ColourPrimaries" == y
                        ? (S = o(parseInt(f.attributes.value, 10)))
                        : "urn:dvb:dash:fontdownload:2014" == y
                          ? a(f)
                          : "urn:mpeg:dash:urlparam:2014" == y && (h = Nv(t, f));
                (h && (n.Lb = h), (h = en(i, "Accessibility")));
                var E,
                  k = new Map();
                for (p = (h = g(h)).next(); !p.done; p = h.next())
                  if (
                    ((p = (f = p.value).attributes.schemeIdUri),
                    (f = f.attributes.value),
                    "urn:scte:dash:cc:cea-608:2015" != p || t.g.disableText)
                  )
                    if ("urn:scte:dash:cc:cea-708:2015" != p || t.g.disableText)
                      "urn:mpeg:dash:role:2011" == p
                        ? null != f && (l.push(f), "captions" == f && (d = "caption"))
                        : "urn:tva:metadata:cs:AudioPurposeCS:2007" == p &&
                          ("1" == f
                            ? (E = "visually impaired")
                            : "2" == f
                              ? (E = "hard of hearing")
                              : "9" == f && (E = "spoken subtitles"));
                    else if (((p = 1), null != f))
                      for (y = (f = g(f.split(";"))).next(); !y.done; y = f.next()) {
                        b = y.value;
                        var I = (y = void 0);
                        (b.includes("=")
                          ? ((y = "svc" + (b = b.split("="))[0]), (I = b[1].split(",")[0].split(":").pop()))
                          : ((y = "svc" + p), p++, (I = b)),
                          k.set(y, Br(I)));
                      }
                    else k.set("svc1", "und");
                  else if (((p = 1), null != f))
                    for (b = (y = g((f = f.split(";")))).next(); !b.done; b = y.next()) {
                      I = b.value;
                      var C = (b = void 0);
                      (I.includes("=")
                        ? ((b = (I = I.split("="))[0].startsWith("CC") ? I[0] : "CC" + I[0]),
                          (C = I[1] || "und"))
                        : ((b = "CC" + p), 2 == f.length ? (p += 2) : p++, (C = I)),
                        k.set(b, Br(C)));
                    }
                  else k.set("CC1", "und");
                h = en(i, "ContentProtection");
                var M = em(t.ya, h, t.g.ignoreDrmInfo, t.g.dash.keySystemsByURI);
                n.qa.encrypted = h.length > 0;
                var R = Br(n.qa.language || "und"),
                  _ = n.qa.label,
                  P = new Map();
                if (((i = en(i, "Representation")), !t.g.ignoreSupplementalCodecs)) {
                  for (h = [], f = (p = g(i)).next(); !f.done; f = p.next())
                    (f = un((y = f.value), "urn:scte:dash:scte214-extensions", "supplementalCodecs")) &&
                      (((y = Wt(y)).attributes.codecs = f.split(" ").join(",")),
                      y.attributes.id &&
                        (y.attributes.supplementalId = y.attributes.id + "_supplementalCodecs"),
                      h.push(y));
                  i.push.apply(i, m(h));
                }
                if (
                  ((h = i
                    .map(function (r) {
                      var i = (function (t, n, r, i, a, o, s, u, l, d, c, h) {
                        n.L = Bv(t, d, n.qa, null);
                        var p = n.L.id;
                        if (
                          ((t.ba = Math.min(t.ba, n.L.rb)),
                          (t.T = t.ba > 0),
                          !(function (e) {
                            var t = e.Id ? 1 : 0;
                            return (
                              (t += e.Ac ? 1 : 0),
                              0 == (t += e.Oc ? 1 : 0)
                                ? e.contentType == gt || "application" == e.contentType
                                : (1 != t && (e.Id && (e.Ac = null), (e.Oc = null)), !0)
                            );
                          })(n.L))
                        )
                          return null;
                        var f = n.na.start;
                        ((n.bandwidth = sn(d, "bandwidth", gn) || 0), (n.roles = u));
                        var g = en(d, "SupplementalProperty"),
                          m = en(d, "EssentialProperty"),
                          v = en(d, "ContentProtection");
                        d = null;
                        var y,
                          b,
                          w = m.find(function (e) {
                            return "urn:mpeg:dash:urlparam:2014" == e.attributes.schemeIdUri;
                          });
                        ((w ||
                          (w = g.find(function (e) {
                            return "urn:mpeg:dash:urlparam:2014" == e.attributes.schemeIdUri;
                          }))) &&
                          (d = Nv(t, w)),
                          d && (n.Lb = d),
                          (w = n.L.contentType),
                          (d = w == gt || "application" == w),
                          (w = "image" == w),
                          v.length && (n.qa.encrypted = !0));
                        try {
                          var S = void 0;
                          if (r.hg) {
                            var A = n.L.bb,
                              E = n.Lb,
                              k = Gi(lt(A(), [r.hg.wk], E()), t.g.retryParameters);
                            S = {
                              bitsKey: 128,
                              blockCipherMode: "CBC",
                              iv: r.hg.iv,
                              firstMediaSequenceNumber: 0,
                              fetchKey: function () {
                                var n, r, i;
                                return D(function (a) {
                                  if (1 == a.g) return x(a, Gv(t, k, 6), 2);
                                  if (3 != a.g) {
                                    if (!(n = a.h).data || 16 != n.data.byteLength) throw new Ke(2, 4, 4049);
                                    return (
                                      (r = { name: "AES-CBC" }),
                                      (i = S),
                                      x(a, e.crypto.subtle.importKey("raw", n.data, r, !0, ["decrypt"]), 3)
                                    );
                                  }
                                  ((i.cryptoKey = a.h), (S.fetchKey = void 0), T(a));
                                });
                              },
                            };
                          }
                          if (
                            ((n.L.aesKey = S),
                            (A = function (e, n, r, i) {
                              return Vv(t, e, n, r, i);
                            }),
                            n.L.Id)
                          )
                            var I = xm(n, A, S);
                          else if (n.L.Ac) I = km(n, t.o, S);
                          else if (n.L.Oc)
                            I = Cm(n, A, t.o, !!t.h, t.g.dash.initialSegmentLimit, t.za, S, h, !1, t.C);
                          else {
                            var C = n.na.duration || 0,
                              M = n.L.bb,
                              R = n.L.mimeType,
                              _ = n.L.codecs;
                            I = {
                              endTime: -1,
                              timeline: -1,
                              Sc: function () {
                                var e = Pu(f, C, M());
                                return (
                                  e.Fb(function (e) {
                                    ((e.mimeType = R), (e.codecs = _));
                                  }),
                                  Promise.resolve(e)
                                );
                              },
                              timescale: 1,
                            };
                          }
                        } catch (L) {
                          if ((d || w) && 4002 == L.code) return null;
                          throw L;
                        }
                        if (
                          ((h = (function (e, t, n, r, i) {
                            var a = em(e, t, r, i);
                            if (n.ci)
                              ((e = 1 == n.drmInfos.length && !n.drmInfos[0].keySystem),
                                (t = 0 == a.drmInfos.length),
                                (0 == n.drmInfos.length || (e && !t)) && (n.drmInfos = a.drmInfos),
                                (n.ci = !1));
                            else if (
                              a.drmInfos.length > 0 &&
                              ((n.drmInfos = n.drmInfos.filter(function (e) {
                                return a.drmInfos.some(function (t) {
                                  return t.keySystem == e.keySystem;
                                });
                              })),
                              0 == n.drmInfos.length)
                            )
                              throw new Ke(2, 4, 4008);
                            return a.Yh || n.Yh;
                          })(t.ya, v, r, t.g.ignoreDrmInfo, t.g.dash.keySystemsByURI)),
                          (h = new Set(h ? [h] : [])),
                          (v = !1),
                          g.some(function (e) {
                            return (
                              "tag:dolby.com,2018:dash:EC3_ExtensionType:2018" == e.attributes.schemeIdUri &&
                              "JOC" == e.attributes.value
                            );
                          }) && (v = !0),
                          (g = !1),
                          d && (g = u.includes("forced_subtitle") || u.includes("forced-subtitle")),
                          w &&
                            ((m = m.find(function (e) {
                              return [
                                "http://dashif.org/thumbnail_tile",
                                "http://dashif.org/guidelines/thumbnail_tile",
                              ].includes(e.attributes.schemeIdUri);
                            })) && (y = m.attributes.value),
                            !y))
                        )
                          return null;
                        ((d = n.L.codecs),
                          n.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10") &&
                            (d.includes("hvc1.2.4.L153.B0") || d.includes("hev1.2.4.L153.B0")) &&
                            (b = "PQ"),
                          (m = n.L.id ? n.sa.id + "," + n.L.id : ""),
                          t.H.length &&
                            p &&
                            t.u.set(
                              n.sa.id + "," + p,
                              (function (e) {
                                function t(e) {
                                  return e
                                    ? (((e = Kt(e)).Id = null),
                                      (e.Ac = null),
                                      (e.Oc = En(e.Oc)),
                                      (e.Cf = null),
                                      e)
                                    : null;
                                }
                                return (
                                  ((e = Kt(e)).sa = t(e.sa)),
                                  (e.qa = t(e.qa)),
                                  (e.L = t(e.L)),
                                  e.na && ((e.na = Kt(e.na)), (e.na.node = null)),
                                  e
                                );
                              })(n),
                            ),
                          n.L.Cf &&
                            (function (e, t, n, r) {
                              if (!e.ma.has(t)) {
                                e.ma.add(t);
                                var i,
                                  a = sn(t, "presentationTime", mn) || 0,
                                  o = an(t, "UTCTiming");
                                ((i = o && o.attributes.schemeIdUri) &&
                                  (i = !(
                                    "urn:mpeg:dash:utc:http-ntp:2014" === (o = o.attributes.schemeIdUri) ||
                                    "urn:mpeg:dash:utc:ntp:2014" === o ||
                                    "urn:mpeg:dash:utc:sntp:2014" === o
                                  )),
                                  (t = i
                                    ? 1e3 * (sn(t, "wallClockTime", cn) || 0)
                                    : cs((t = sn(t, "wallClockTime", mn) || 0))),
                                  (a = (n = new Date(t - (a / n.timescale) * 1e3)).getTime() / 1e3),
                                  isNaN(a) ||
                                    (r.o || r.sh(a),
                                    (r = new Li(
                                      "prft",
                                      (r = new Map().set("detail", {
                                        wallClockTime: t,
                                        programStartDate: n,
                                      })),
                                    )),
                                    e.j.onEvent(r)));
                              }
                            })(t, n.L.Cf, I, n.presentationTimeline),
                          -1 != I.endTime &&
                            null != n.sa.id &&
                            null != n.L.id &&
                            ((p = t.C.get(n.sa.id))
                              ? ((p.endTime = I.endTime),
                                p.gh.includes(n.L.id) || p.gh.push(n.L.id),
                                t.C.set(n.sa.id, p))
                              : t.C.set(n.sa.id, {
                                  endTime: I.endTime,
                                  timeline: I.timeline,
                                  gh: [n.L.id],
                                })));
                        var P =
                          m && t.o.has(m)
                            ? t.o.get(m)
                            : {
                                id: t.Fa++,
                                originalId: n.L.id,
                                groupId: null,
                                createSegmentIndex: function () {
                                  return Promise.resolve();
                                },
                                closeSegmentIndex: function () {
                                  P.segmentIndex && (P.segmentIndex.release(), (P.segmentIndex = null));
                                },
                                segmentIndex: null,
                                mimeType: n.L.mimeType,
                                codecs: d,
                                frameRate: n.L.frameRate,
                                pixelAspectRatio: n.L.pixelAspectRatio,
                                bandwidth: n.bandwidth,
                                width: n.L.width,
                                height: n.L.height,
                                kind: i,
                                encrypted: r.drmInfos.length > 0,
                                drmInfos: r.drmInfos,
                                keyIds: h,
                                language: a,
                                originalLanguage: n.qa.language,
                                label: o,
                                type: n.qa.contentType,
                                primary: s,
                                trickModeVideo: null,
                                dependencyStream: null,
                                emsgSchemeIdUris: n.L.emsgSchemeIdUris,
                                roles: u,
                                forced: g,
                                channelsCount: n.L.yf,
                                audioSamplingRate: n.L.audioSamplingRate,
                                spatialAudio: v,
                                closedCaptions: l,
                                hdr: b,
                                colorGamut: void 0,
                                videoLayout: void 0,
                                tilesLayout: y,
                                accessibilityPurpose: c,
                                external: !1,
                                fastSwitching: !1,
                                fullMimeTypes: new Set([lr(n.L.mimeType, n.L.codecs)]),
                                isAudioMuxedInVideo: !1,
                                baseOriginalId: null,
                              };
                        return (
                          (P.createSegmentIndex = function () {
                            var e;
                            return D(function (t) {
                              if (1 == t.g) return P.segmentIndex ? t.A(0) : ((e = P), x(t, I.Sc(), 3));
                              ((e.segmentIndex = t.h), T(t));
                            });
                          }),
                          m &&
                            n.Eb &&
                            !t.o.has(m) &&
                            ((n = n.sa.id || ""),
                            t.F.has(n) || t.F.set(n, []),
                            t.o.set(m, P),
                            t.F.get(n).push(m)),
                          P
                        );
                      })(t, n, M, d, R, _, u, l, k, r, E, A);
                      return i &&
                        ((i.hdr = i.hdr || w),
                        (i.colorGamut = i.colorGamut || S),
                        (i.fastSwitching = v),
                        (r = r.attributes.dependencyId))
                        ? ((i.baseOriginalId = r), P.set(r, i), null)
                        : i;
                    })
                    .filter(function (e) {
                      return !!e;
                    })),
                  0 == h.length && 0 == P.size)
                ) {
                  if (((r = "image" == n.qa.contentType), t.g.dash.ignoreEmptyAdaptationSet || c || r))
                    return null;
                  throw new Ke(2, 4, 4003);
                }
                if (!n.qa.contentType || "application" == n.qa.contentType)
                  for (
                    n.qa.contentType = Hv(h[0].mimeType, h[0].codecs), p = (c = g(h)).next();
                    !p.done;
                    p = c.next()
                  )
                    p.value.type = n.qa.contentType;
                for (c = n.qa.id || "__fake__" + t.Fa++, f = (p = g(h)).next(); !f.done; f = p.next()) {
                  for (f = f.value, b = (y = g(M.drmInfos)).next(); !b.done; b = y.next())
                    (b = b.value).keyIds =
                      b.keyIds && f.keyIds
                        ? new Set([].concat(m(b.keyIds), m(f.keyIds)))
                        : b.keyIds || f.keyIds;
                  t.g.enableAudioGroups && (f.groupId = c);
                }
                return (
                  (i = i
                    .map(function (e) {
                      return e.attributes.supplementalId || e.attributes.id;
                    })
                    .filter(Dr)),
                  {
                    id: c,
                    contentType: n.qa.contentType,
                    language: R,
                    Fm: u,
                    streams: h,
                    drmInfos: M.drmInfos,
                    Hh: r,
                    Rk: i,
                    Aj: P,
                  }
                );
              }
              function Nv(e, t) {
                if (
                  (t = on(t, "urn:mpeg:dash:schema:urlparam:2014", "UrlQueryInfo")) &&
                  sn(t, "useMPDUrlQuery", yn, !1)
                ) {
                  var n = t.attributes.queryTemplate;
                  if (n)
                    return function () {
                      return "$querypart$" == n
                        ? e.$
                        : n
                            .split("&")
                            .map(function (t) {
                              if ("$querypart$" == t) return e.$;
                              var n = /\$query:(.*?)\$/g.exec(t);
                              if (n && 2 == n.length) {
                                n = n[1];
                                var r = new Me(e.$).get(n);
                                if (r.length) return n + "=" + r[0];
                              }
                              return t;
                            })
                            .join("&");
                    };
                }
                return null;
              }
              function Ov(e) {
                var t, n;
                return D(function (r) {
                  switch (r.g) {
                    case 1:
                      return ((t = 0), w(r, 2), x(r, Ev(e), 4));
                    case 4:
                      ((t = r.h), A(r, 3));
                      break;
                    case 2:
                      if (((n = E(r)), e.j)) {
                        if (e.g.raiseFatalErrorOnManifestUpdateRequestFailure)
                          return (e.j.onError(n), r.return());
                        ((n.severity = 1), e.j.onError(n));
                      }
                    case 3:
                      if (!e.j) return r.return();
                      (e.j.onManifestUpdated(), Uv(e, t), T(r));
                  }
                });
              }
              function Uv(e, t) {
                if (!(e.K < 0)) {
                  var n = e.K;
                  (e.g.updatePeriod >= 0 && (n = e.g.updatePeriod), e.M.ka(Math.max(n - t, G(e.Da))));
                }
              }
              function Bv(e, t, n, r) {
                ((n = n || {
                  contentType: "",
                  mimeType: "",
                  codecs: "",
                  emsgSchemeIdUris: [],
                  frameRate: void 0,
                  pixelAspectRatio: void 0,
                  yf: null,
                  audioSamplingRate: null,
                  rb: 0,
                  If: 1,
                  encrypted: !1,
                }),
                  (r = r || n.bb));
                var i,
                  a = t.attributes.id,
                  o = t.attributes.supplementalId,
                  s = en(t, "BaseURL"),
                  u = !1;
                if (e.i)
                  for (var l = g(s), d = l.next(); !d.done; d = l.next()) {
                    var c = d.value;
                    ((d = c.attributes.serviceLocation), (c = nn(c)), d && c && (Um(e.i, a, d, c), (u = !0)));
                  }
                (u && e.i) || (i = s.map(nn));
                var h = e.i;
                ((e = t.attributes.contentType || n.contentType),
                  (l = t.attributes.mimeType || n.mimeType),
                  (d = il([t.attributes.codecs || n.codecs]).join(",")),
                  (c = sn(t, "frameRate", bn) || n.frameRate));
                var p = t.attributes.sar || n.pixelAspectRatio,
                  f = (function (e, t) {
                    t = t.slice();
                    for (var n = (e = g(e)).next(); !n.done; n = e.next())
                      ((n = n.value.attributes.schemeIdUri), t.includes(n) || t.push(n));
                    return t;
                  })(en(t, "InbandEventStream"), n.emsgSchemeIdUris),
                  m = en(t, "AudioChannelConfiguration");
                m =
                  (function (e) {
                    for (var t = (e = g(e)).next(); !t.done; t = e.next()) {
                      var n = (t = t.value).attributes.schemeIdUri;
                      if (n && (t = t.attributes.value))
                        switch (n) {
                          case "urn:mpeg:dash:outputChannelPositionList:2012":
                            return t.trim().split(/ +/).length;
                          case "urn:mpeg:dash:23003:3:audio_channel_configuration:2011":
                          case "urn:dts:dash:audio_channel_configuration:2012":
                            if (!(t = parseInt(t, 10))) continue;
                            return t;
                          case "tag:dolby.com,2015:dash:audio_channel_configuration:2015":
                            if (
                              ((n = [2, 1, 2, 2, 2, 2, 1, 2, 2, 1, 1, 1, 1, 2, 1, 1, 2, 2]),
                              !(t = parseInt(t, 16)))
                            )
                              continue;
                            for (var r = 0, i = 0; i < n.length; i++) t & (1 << i) && (r += n[i]);
                            if (r) return r;
                            continue;
                          case "tag:dolby.com,2014:dash:audio_channel_configuration:2011":
                          case "urn:dolby:dash:audio_channel_configuration:2011":
                            if (
                              ((n = [1, 1, 1, 1, 1, 2, 2, 1, 1, 2, 2, 2, 1, 2, 1, 1].reverse()),
                              !(t = parseInt(t, 16)))
                            )
                              continue;
                            for (i = r = 0; i < n.length; i++) t & (1 << i) && (r += n[i]);
                            if (r) return r;
                            continue;
                          case "urn:mpeg:mpegB:cicp:ChannelConfiguration":
                            if (
                              ((n = [0, 1, 2, 3, 4, 5, 6, 8, 2, 3, 4, 7, 8, 24, 8, 12, 10, 12, 14, 12, 14]),
                              (t = parseInt(t, 10)) && t > 0 && t < n.length)
                            )
                              return n[t];
                        }
                    }
                    return null;
                  })(m) || n.yf;
                var v = sn(t, "audioSamplingRate", mn) || n.audioSamplingRate;
                e || (e = Hv(l, d));
                var y = an(t, "SegmentBase"),
                  b = an(t, "SegmentTemplate"),
                  x = (y && sn(y, "availabilityTimeOffset", vn)) || 0,
                  T = (b && sn(b, "availabilityTimeOffset", vn)) || 0,
                  w = (s && s.length && sn(s[0], "availabilityTimeOffset", vn)) || 0;
                ((x = n.rb + w + x + T),
                  (T = null),
                  (w = an(t, "SegmentSequenceProperties")) && (w = sn(w, "cadence", gn)) && (T = w),
                  (w = t.attributes.label));
                var S = en(t, "Label");
                return (
                  S && S.length && tn((S = S[0])) && (w = tn(S)),
                  {
                    bb: function () {
                      return lt(r(), s.length ? (h && u ? Bm(h, a) : i || []) : []);
                    },
                    Id: y || n.Id,
                    Ac: an(t, "SegmentList") || n.Ac,
                    Oc: b || n.Oc,
                    Cf: an(t, "ProducerReferenceTime") || n.Cf,
                    width: sn(t, "width", mn) || n.width,
                    height: sn(t, "height", mn) || n.height,
                    contentType: e,
                    mimeType: l,
                    codecs: d,
                    frameRate: c,
                    pixelAspectRatio: p,
                    emsgSchemeIdUris: f,
                    id: o || a,
                    originalId: a,
                    language: t.attributes.lang,
                    yf: m,
                    audioSamplingRate: v,
                    rb: x,
                    hf: null,
                    If: T || n.If,
                    label: w || null,
                    encrypted: !1,
                  }
                );
              }
              function jv(e, t, n, r) {
                var i, a, o, s, u, l, d;
                return D(function (c) {
                  if (1 == c.g)
                    return (
                      (i = [et(n)]),
                      (a = lt(t(), i)),
                      ((o = Gi(a, e.g.retryParameters)).method = r),
                      (s = e.j.networkingEngine.request(4, o, { isPreload: e.oa() })),
                      ji(e.R, s),
                      x(c, s.promise, 2)
                    );
                  if (((u = c.h), "HEAD" == r)) {
                    if (!u.headers || !u.headers.date) return c.return(0);
                    l = u.headers.date;
                  } else l = Ye(u.data);
                  return ((d = Date.parse(l)), isNaN(d) ? c.return(0) : c.return(d - Date.now()));
                });
              }
              function Fv(e, t, n, r, i) {
                for (
                  var a = r.attributes.schemeIdUri || "",
                    o = r.attributes.value || "",
                    s = sn(r, "timescale", mn) || 1,
                    u = sn(r, "presentationTimeOffset", mn) || 0,
                    l = (r = g(en(r, "Event"))).next();
                  !l.done;
                  l = r.next()
                ) {
                  var d = sn((l = l.value), "presentationTime", mn) || 0,
                    c = sn(l, "duration", mn) || 0;
                  ((c = (d = Math.max((d - u) / s + t, t)) + c / s),
                    null != n && ((d = Math.min(d, t + n)), (c = Math.min(c, t + n))),
                    c < i ||
                      ((l = {
                        schemeIdUri: a,
                        value: o,
                        startTime: d,
                        endTime: c,
                        id: l.attributes.id || "",
                        timescale: s,
                        eventElement: An(l),
                        eventNode: En(l),
                      }),
                      e.j.onTimelineRegionAdded(l)));
                }
              }
              function Vv(e, t, n, r, i) {
                var a, o, s, u;
                return D(function (l) {
                  return 1 == l.g
                    ? ((a = qi),
                      (o = i ? 0 : 1),
                      (s = ul(t, n, r, e.g.retryParameters)),
                      x(l, Gv(e, s, a, { type: o }), 2))
                    : ((u = l.h), l.return(u.data));
                });
              }
              function Hv(e, t) {
                return Sr((t = lr(e, t))) ? gt : e.split("/")[0];
              }
              function Gv(e, t, n, r) {
                return (
                  r || (r = {}),
                  (r.isPreload = e.oa()),
                  (t = e.j.networkingEngine.request(n, t, r)),
                  ji(e.R, t),
                  t.promise
                );
              }
              function zv() {
                return "";
              }
              function Xv(e, t, n) {
                return function () {
                  return e && t ? Bm(e, "BaseURL") : n.slice();
                };
              }
              function Wv() {}
              (((i = Av.prototype).configure = function (e, t) {
                var n = this.j && e.updatePeriod != this.g.updatePeriod && e.updatePeriod >= 0;
                ((this.g = e),
                  t && (this.oa = t),
                  n && this.h && this.h.presentationTimeline.W() && this.M.Jb(),
                  this.i && this.i.configure(this.g),
                  this.m && this.m.Xi(this.g.dash.useStreamOnceInPeriodFlattening));
              }),
                (i.start = function (e, t) {
                  var n,
                    r = this;
                  return D(function (i) {
                    if (1 == i.g)
                      return ((r.va = t.isLowLatencyMode()), (r.B = [e]), (r.j = t), x(i, Ev(r), 2));
                    if (((n = i.h), r.j && Uv(r, n), !r.j)) throw new Ke(2, 7, 7001);
                    return i.return(r.h);
                  });
                }),
                (i.stop = function () {
                  for (var e = g(this.o.values()), t = e.next(); !t.done; t = e.next())
                    (t = t.value).segmentIndex && t.segmentIndex.release();
                  return (
                    this.m && this.m.release(),
                    (this.g = this.j = null),
                    (this.B = []),
                    (this.h = null),
                    this.o.clear(),
                    this.F.clear(),
                    this.u.clear(),
                    this.C.clear(),
                    (this.l = { vf: "", type: "", profiles: [], uc: null, rb: 0, bb: null, qe: 0 }),
                    (this.m = null),
                    null != this.M && (this.M.stop(), (this.M = null)),
                    this.i && this.i.destroy(),
                    this.I && (this.I.release(), (this.I = null)),
                    this.ma.clear(),
                    this.ya.release(),
                    this.R.destroy()
                  );
                }),
                (i.update = function () {
                  var e,
                    t = this;
                  return D(function (n) {
                    return 1 == n.g
                      ? (w(n, 2), x(n, Ev(t), 4))
                      : 2 != n.g
                        ? A(n, 0)
                        : ((e = E(n)), t.j && e ? (t.j.onError(e), void T(n)) : n.return());
                  });
                }),
                (i.onExpirationUpdated = function () {}),
                (i.onInitialVariantChosen = function (e) {
                  if (this.h && this.h.presentationTimeline.W()) {
                    var t = e.video || e.audio;
                    if (t && t.segmentIndex) {
                      e = this.h.presentationTimeline.Ic();
                      var n = t.segmentIndex.find(e);
                      null != n && (t = t.segmentIndex.get(n)) && ((this.K = t.endTime - e), Uv(this, 0));
                    }
                  }
                }),
                (i.banLocation = function (e) {
                  this.i && this.i.banLocation(e);
                }),
                (i.setMediaElement = function (e) {
                  this.J = e;
                }),
                V("shaka.dash.DashParser", Av),
                At("application/dash+xml", function () {
                  return new Av();
                }),
                At("video/vnd.mpeg.dash.mpd", function () {
                  return new Av();
                }),
                V("shaka.dependencies", Wv),
                (Wv.has = function (e) {
                  return Yv.has(e);
                }),
                (Wv.add = function (e, t) {
                  if (!qv[e]) throw Error(e + " is not supported");
                  e == Kv
                    ? ce("mux.js", "mux.js is no longer used in Shaka Player.")
                    : Yv.set(e, function () {
                        return t;
                      });
                }));
              var Kv = "muxjs",
                qv = { Gm: Kv, ISOBoxer: "ISOBoxer" };
              Wv.Allowed = qv;
              var Yv = new Map([
                [
                  "ISOBoxer",
                  function () {
                    return e.ISOBoxer;
                  },
                ],
              ]);
              function $v() {
                ((this.j = new ae(function () {
                  return ["Oculus", "Quest"].some(function (e) {
                    return navigator.userAgent.includes(e.toLowerCase());
                  })
                    ? "VR"
                    : navigator.userAgent.match(/Smart( ?|_)TV/i) || navigator.userAgent.match(/Android ?TV/i)
                      ? "TV"
                      : navigator.userAgentData
                        ? navigator.userAgentData.mobile
                          ? "MOBILE"
                          : "DESKTOP"
                        : /(?:iPhone|iPad|iPod)/.test(navigator.userAgent)
                          ? "MOBILE"
                          : navigator.userAgentData && navigator.userAgentData.platform
                            ? "android" == navigator.userAgentData.platform.toLowerCase()
                              ? "MOBILE"
                              : "DESKTOP"
                            : navigator.userAgent.includes("Android")
                              ? "MOBILE"
                              : "DESKTOP";
                })),
                  (this.l = new ae(function () {
                    return navigator.vendor.includes("Apple") &&
                      (navigator.userAgent.includes("Version/") || navigator.userAgent.includes("OS/"))
                      ? "WEBKIT"
                      : navigator.userAgent.includes("Edge/")
                        ? "EDGE"
                        : navigator.userAgent.includes("Chrome/")
                          ? "CHROMIUM"
                          : navigator.userAgent.includes("Firefox/")
                            ? "GECKO"
                            : "UNKNOWN";
                  })));
              }
              function Jv() {
                var t = e.ManagedMediaSource || e.MediaSource;
                return !(!t || !t.isTypeSupported);
              }
              function Qv() {
                ($v.call(this),
                  (this.g = new ae(function () {
                    var e = navigator.userAgent.match(/Version\/(\d+)/);
                    return e || (e = navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))
                      ? parseInt(e[1], 10)
                      : null;
                  })),
                  (this.h = new ae(function () {
                    return /(?:iPhone|iPad|iPod)/.test(navigator.userAgent) || navigator.maxTouchPoints > 1
                      ? "xr" in navigator
                        ? "APPLE_VR"
                        : "MOBILE"
                      : "xr" in navigator
                        ? "APPLE_VR"
                        : "DESKTOP";
                  })));
              }
              function Zv() {
                if (!ey()) throw Error("Not a Chromecast device!");
                ($v.call(this),
                  (this.h = new ae(function () {
                    var e = navigator.userAgent.match(/Chrome\/(\d+)/);
                    return e ? parseInt(e[1], 10) : null;
                  })),
                  (this.g = new ae(function () {
                    var e =
                      (navigator.userAgentData && navigator.userAgentData.platform) || navigator.userAgent;
                    return (e = e.toLowerCase()).includes("android") ? ty : e.includes("fuchsia") ? ny : ry;
                  })));
              }
              function ey() {
                return (
                  navigator.userAgent.includes("CrKey") && !navigator.userAgent.includes("VIZIO SmartCast")
                );
              }
              (((i = $v.prototype).hc = function () {
                return !!navigator.mediaCapabilities;
              }),
                (i.Oa = function () {
                  return this.j.value();
                }),
                (i.Ha = function () {
                  return this.l.value();
                }),
                (i.Fd = function () {
                  return !1;
                }),
                (i.ih = function () {
                  return !1;
                }),
                (i.jf = function () {
                  return !1;
                }),
                (i.Ni = function () {
                  return !1;
                }),
                (i.se = function () {
                  return !1;
                }),
                (i.fd = function () {
                  return !0;
                }),
                (i.Ib = function () {
                  var t = e.ManagedSourceBuffer || e.SourceBuffer;
                  return !!t && !!t.prototype && !!t.prototype.changeType;
                }),
                (i.we = function () {
                  return !0;
                }),
                (i.Si = function () {
                  return 0;
                }),
                (i.lc = function () {
                  return Promise.resolve({ width: 1 / 0, height: 1 / 0 });
                }),
                (i.$i = function () {
                  return !1;
                }),
                (i.xh = function () {
                  return !1;
                }),
                (i.Wa = function (e) {
                  var t = this.Oa();
                  return (
                    ("TV" !== t && "CONSOLE" !== t && "CAST" !== t) ||
                      ((e.ads.customPlayheadTracker = !0),
                      (e.ads.skipPlayDetection = !0),
                      (e.ads.supportsMultipleMediaElements = !1)),
                    e
                  );
                }),
                (i.Ch = function () {
                  return !!e.indexedDB;
                }),
                (i.Li = function () {
                  return [];
                }),
                (i.sd = function (t) {
                  return void 0 !== e.matchMedia && e.matchMedia("(color-gamut: p3)").matches
                    ? t
                      ? "HLG"
                      : "PQ"
                    : "SDR";
                }),
                (i.gj = function () {
                  return !1;
                }),
                (i.Bi = function () {
                  return !1;
                }),
                (i.Ff = function () {
                  return !1;
                }),
                (i.Of = function () {
                  return !0;
                }),
                (i.Ci = function () {
                  return !1;
                }),
                (i.fj = function () {
                  return !0;
                }),
                (i.ed = function () {
                  return !1;
                }),
                (i.Vg = function (e) {
                  return "com.apple.fps" === e;
                }),
                (i.Nf = function () {
                  return !0;
                }),
                (i.toString = function () {
                  return "Device: " + this.Nb() + " v" + this.Ba() + "; Type: " + this.Oa();
                }),
                p(Qv, $v),
                ((i = Qv.prototype).Ba = function () {
                  return this.g.value();
                }),
                (i.Nb = function () {
                  return "Apple Browser";
                }),
                (i.Oa = function () {
                  return this.h.value();
                }),
                (i.Ha = function () {
                  return "WEBKIT";
                }),
                (i.hc = function () {
                  return !1;
                }),
                (i.Fd = function (e, t) {
                  return "audio" === t;
                }),
                (i.jf = function () {
                  return !0;
                }),
                (i.Ni = function (e) {
                  return "audio" === e;
                }),
                (i.Wa = function (e) {
                  return ($v.prototype.Wa.call(this, e), (e.abr.minTimeToSwitch = 0.5), e);
                }),
                (i.gj = function () {
                  return !0;
                }),
                (i.Nf = function () {
                  return !1;
                }),
                (navigator.vendor || "").includes("Apple") &&
                  (/(?:iPhone|iPad|iPod)/.test(navigator.userAgent) ||
                    navigator.maxTouchPoints > 1 ||
                    (navigator.userAgentData &&
                      navigator.userAgentData.platform &&
                      "macos" == navigator.userAgentData.platform.toLowerCase()) ||
                    (navigator.platform && navigator.platform.toLowerCase().includes("mac"))) &&
                  (se = function () {
                    return new Qv();
                  }),
                p(Zv, $v),
                ((i = Zv.prototype).Ba = function () {
                  return this.h.value();
                }),
                (i.Nb = function () {
                  return "Chromecast with " + this.g.value();
                }),
                (i.Oa = function () {
                  return "CAST";
                }),
                (i.Ha = function () {
                  return "CHROMIUM";
                }),
                (i.hc = function () {
                  return $v.prototype.hc.call(this) && this.g.value() !== ry;
                }),
                (i.Ib = function () {
                  return $v.prototype.Ib.call(this) && this.g.value() !== ry;
                }),
                (i.Si = function () {
                  switch (this.g.value()) {
                    case ty:
                      return 0;
                    case ny:
                      return 3;
                    default:
                      return 1;
                  }
                }),
                (i.lc = function () {
                  var t, n, r, i;
                  return D(function (a) {
                    switch (a.g) {
                      case 1:
                        if (
                          ((t = e.cast && cast.__platform__ && cast.__platform__.canDisplayType),
                          (n = { width: 1280, height: 720 }),
                          w(a, 2),
                          !(r = t))
                        ) {
                          a.A(4);
                          break;
                        }
                        return x(
                          a,
                          cast.__platform__.canDisplayType(
                            'video/mp4; codecs="avc1.640028"; width=3840; height=2160',
                          ),
                          5,
                        );
                      case 5:
                        r = a.h;
                      case 4:
                        if (r) {
                          ((n.width = 3840), (n.height = 2160), a.A(6));
                          break;
                        }
                        if (!(i = t)) {
                          a.A(7);
                          break;
                        }
                        return x(
                          a,
                          cast.__platform__.canDisplayType(
                            'video/mp4; codecs="avc1.640028"; width=1920; height=1080',
                          ),
                          8,
                        );
                      case 8:
                        i = a.h;
                      case 7:
                        i && ((n.width = 1920), (n.height = 1080));
                      case 6:
                        A(a, 3);
                        break;
                      case 2:
                        W("Failed to check canDisplayType:", E(a));
                      case 3:
                        return a.return(n);
                    }
                  });
                }),
                (i.Wa = function (e) {
                  return ($v.prototype.Wa.call(this, e), (e.streaming.stallSkip = 0), e);
                }),
                (i.Ch = function () {
                  return !1;
                }),
                (i.ed = function () {
                  return !0;
                }));
              var ty = "Android",
                ny = "Fuchsia",
                ry = "Linux";
              function iy() {
                $v.call(this);
                var e = this;
                ((this.i = new ae(function () {
                  var e = navigator.userAgent.match(/(Chrome|Firefox)\/(\d+)/);
                  return e ? parseInt(e[2], 10) : null;
                })),
                  (this.g = new ae(function () {
                    return navigator.userAgent.match(/Edge?\//)
                      ? "Edge"
                      : navigator.userAgent.includes("Chrome")
                        ? "Chrome"
                        : navigator.userAgent.includes("Firefox")
                          ? "Firefox"
                          : "Unknown";
                  })),
                  (this.h = new ae(function () {
                    return navigator.userAgentData && navigator.userAgentData.platform
                      ? "windows" == navigator.userAgentData.platform.toLowerCase()
                      : !!navigator.platform && navigator.platform.toLowerCase().includes("win32");
                  })),
                  (this.u = new ae(function () {
                    return !(
                      !$v.prototype.Ib.call(e) ||
                      (navigator.userAgent.match(/Edge?\//) && e.h.value())
                    );
                  })),
                  (this.o = new ae(function () {
                    return navigator.userAgent.includes("sony.hbbtv.tv");
                  })),
                  (this.m = new ae(function () {
                    return navigator.userAgentData && navigator.userAgentData.platform
                      ? "android" == navigator.userAgentData.platform.toLowerCase()
                      : !!navigator.userAgent.includes("Android");
                  })));
              }
              function ay() {
                $v.apply(this, arguments);
              }
              function oy() {
                ($v.call(this),
                  (this.g = new ae(function () {
                    var e = navigator.userAgent.match(/PlayStation (\d+)/);
                    return e ? parseInt(e[1], 10) : null;
                  })));
              }
              function sy() {
                $v.call(this);
                var e = navigator.userAgent.match(/Tizen (\d+).(\d+)/);
                ((this.g = e ? parseInt(e[1], 10) : null), (this.h = e ? parseInt(e[2], 10) : null));
              }
              function uy() {
                $v.apply(this, arguments);
              }
              function ly() {
                ($v.call(this),
                  (this.i = new ae(function () {
                    return (
                      navigator.userAgent.includes("DT_STB_BCM") || navigator.userAgent.includes("Sky_STB")
                    );
                  })),
                  (this.h = new ae(function () {
                    return navigator.userAgent.includes("SOPOpenBrowser");
                  })),
                  (this.g = new ae(function () {
                    if (navigator.userAgent.includes("DT_STB_BCM")) return 11;
                    var e = navigator.userAgent.match(/Version\/(\d+)/);
                    return e || (e = navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))
                      ? parseInt(e[1], 10)
                      : null;
                  })));
              }
              function dy() {
                $v.call(this);
                var e = this;
                ((this.h = (function () {
                  var e = null,
                    t = navigator.userAgent.match(/Chrome\/(\d+)/);
                  switch ((t && (e = parseInt(t[1], 10)), e)) {
                    case 38:
                      return 3;
                    case 53:
                      return 4;
                    case 68:
                      return 5;
                    case 79:
                      return 6;
                    case 87:
                      return 22;
                    case 94:
                      return 23;
                    case 108:
                      return 24;
                    case 120:
                      return 25;
                    default:
                      return null;
                  }
                })()),
                  (this.g = null));
                try {
                  var t = new PalmServiceBridge();
                  ((t.onservicecallback = function (t) {
                    ((t = JSON.parse(t)),
                      (e.g =
                        t.configs["tv.model.supportHDR"] ||
                        t.configs["tv.config.supportDolbyHDRContents"] ||
                        !1));
                  }),
                    t.call(
                      "luna://com.webos.service.config/getConfigs",
                      JSON.stringify({
                        configNames: ["tv.model.supportHDR", "tv.config.supportDolbyHDRContents"],
                      }),
                    ));
                } catch (n) {
                  K("WebOS: getConfigs call failed", n);
                }
              }
              if (
                (ey() &&
                  (se = function () {
                    return new Zv();
                  }),
                p(iy, $v),
                ((i = iy.prototype).Ba = function () {
                  return this.i.value();
                }),
                (i.Nb = function () {
                  return this.g.value();
                }),
                (i.Fd = function (e) {
                  return !!Ve(e) && "Edge" === this.g.value() && this.h.value();
                }),
                (i.ih = function () {
                  return "Edge" === this.g.value() && this.h.value();
                }),
                (i.jf = function () {
                  return "Edge" === this.g.value() && this.h.value();
                }),
                (i.Ib = function () {
                  return this.u.value();
                }),
                (i.Wa = function (e) {
                  if (($v.prototype.Wa.call(this, e), this.h.value()))
                    switch (this.g.value()) {
                      case "Firefox":
                        e.drm.keySystemsMapping = {
                          "com.microsoft.playready": "com.microsoft.playready.recommendation",
                        };
                        break;
                      case "Chrome":
                        e.drm.keySystemsMapping = {
                          "com.microsoft.playready": "com.microsoft.playready.recommendation.3000",
                          "com.microsoft.playready.recommendation":
                            "com.microsoft.playready.recommendation.3000",
                        };
                    }
                  return (
                    this.m.value() &&
                      ((e.drm.defaultAudioRobustnessForWidevine = ""),
                      (e.drm.defaultVideoRobustnessForWidevine = "")),
                    e
                  );
                }),
                (i.Ff = function () {
                  return "Edge" === this.g.value() || this.o.value();
                }),
                (i.ed = function () {
                  if ("GECKO" === this.Ha()) {
                    var e = this.Ba();
                    return null !== e ? e >= 100 : $v.prototype.ed.call(this);
                  }
                  return $v.prototype.ed.call(this);
                }),
                (i.Vg = function (e) {
                  return "GECKO" === this.Ha()
                    ? e.startsWith("com.microsoft.playready.recommendation")
                    : $v.prototype.Vg.call(this, e);
                }),
                (ue = function () {
                  return new iy();
                }),
                p(ay, $v),
                ((i = ay.prototype).Ba = function () {
                  return null;
                }),
                (i.Nb = function () {
                  return "Hisense";
                }),
                (i.Oa = function () {
                  return "TV";
                }),
                (i.hc = function () {
                  return !1;
                }),
                (i.lc = function () {
                  var t = { width: 1920, height: 1080 },
                    n = null;
                  if (e.Hisense_Get4KSupportState)
                    try {
                      n = e.Hisense_Get4KSupportState();
                    } catch (r) {}
                  return (
                    null == n && (n = navigator.userAgent.includes("UHD")),
                    n && ((t.width = 3840), (t.height = 2160)),
                    Promise.resolve(t)
                  );
                }),
                (i.Wa = function (e) {
                  return ($v.prototype.Wa.call(this, e), (e.streaming.stallSkip = 0), e);
                }),
                (navigator.userAgent.includes("Hisense") || navigator.userAgent.includes("VIDAA")) &&
                  (se = function () {
                    return new ay();
                  }),
                p(oy, $v),
                ((i = oy.prototype).Nb = function () {
                  return "PlayStation";
                }),
                (i.Oa = function () {
                  return "CONSOLE";
                }),
                (i.Ha = function () {
                  return "WEBKIT";
                }),
                (i.Ba = function () {
                  return this.g.value();
                }),
                (i.hc = function () {
                  return !1;
                }),
                (i.fd = function () {
                  return !1;
                }),
                (i.Ib = function () {
                  return !1;
                }),
                (i.xh = function () {
                  return 4 === this.Ba();
                }),
                (i.lc = function () {
                  var t, n, r, i;
                  return D(function (a) {
                    switch (a.g) {
                      case 1:
                        return (
                          (t = { width: 1920, height: 1080 }),
                          (n = !1),
                          w(a, 2),
                          x(a, e.msdk.device.getDisplayInfo(), 4)
                        );
                      case 4:
                        ((r = a.h), (n = "4K" === r.resolution), A(a, 3));
                        break;
                      case 2:
                        return (E(a), w(a, 5), x(a, e.msdk.device.getDisplayInfoImmediate(), 7));
                      case 7:
                        ((i = a.h), (n = "4K" === i.resolution), A(a, 3));
                        break;
                      case 5:
                        K("PlayStation: Failed to get the display info:", E(a));
                      case 3:
                        return (n && ((t.width = 3840), (t.height = 2160)), a.return(t));
                    }
                  });
                }),
                (i.Wa = function (e) {
                  return (
                    $v.prototype.Wa.call(this, e),
                    4 === this.Ba() && e.drm.preferredKeySystems.push("com.microsoft.playready"),
                    (e.streaming.clearDecodingCache = !0),
                    e
                  );
                }),
                (i.Ff = function () {
                  return 4 === this.Ba();
                }),
                (i.Of = function () {
                  return 4 !== this.Ba();
                }),
                navigator.userAgent.includes("PlayStation") &&
                  (se = function () {
                    return new oy();
                  }),
                p(sy, $v),
                ((i = sy.prototype).Ba = function () {
                  return this.g;
                }),
                (i.Nb = function () {
                  return "Tizen";
                }),
                (i.Ha = function () {
                  return "CHROMIUM";
                }),
                (i.Oa = function () {
                  return "TV";
                }),
                (i.Fd = function () {
                  return !0;
                }),
                (i.se = function () {
                  return 3 === this.Ba();
                }),
                (i.hc = function () {
                  return !1;
                }),
                (i.fd = function () {
                  var e = this.Ba();
                  return null !== e ? e >= 4 : $v.prototype.fd.call(this);
                }),
                (i.Ib = function () {
                  return !1;
                }),
                (i.we = function () {
                  return this.g && this.h
                    ? 5 === this.g
                      ? this.h >= 5
                      : this.g > 5
                    : $v.prototype.we.call(this);
                }),
                (i.lc = function () {
                  var t = e.devicePixelRatio;
                  t = {
                    width: e.screen.width * t > 1920 ? 3840 : 1920,
                    height: e.screen.height * t > 1080 ? 2160 : 1080,
                  };
                  try {
                    if (webapis.systeminfo && webapis.systeminfo.getMaxVideoResolution) {
                      var n = webapis.systeminfo.getMaxVideoResolution();
                      ((t.width = n.width), (t.height = n.height));
                    } else
                      webapis.productinfo.is8KPanelSupported && webapis.productinfo.is8KPanelSupported()
                        ? ((t.width = 7680), (t.height = 4320))
                        : webapis.productinfo.isUdPanelSupported &&
                          webapis.productinfo.isUdPanelSupported() &&
                          ((t.width = 3840), (t.height = 2160));
                  } catch (r) {
                    K("Tizen: Error detecting screen size, default screen size 1920x1080.");
                  }
                  return Promise.resolve(t);
                }),
                (i.Wa = function (e) {
                  return (
                    $v.prototype.Wa.call(this, e),
                    (e.drm.ignoreDuplicateInitData = 2 !== this.Ba()),
                    3 === this.Ba() && (e.streaming.crossBoundaryStrategy = "reset_to_encrypted"),
                    (e.streaming.shouldFixTimestampOffset = !0),
                    (e.streaming.stallSkip = 0),
                    (e.streaming.gapPadding = 2),
                    e
                  );
                }),
                (i.Li = function () {
                  var e = [];
                  return (null !== this.g && this.g < 5 && e.push("opus"), e);
                }),
                (i.sd = function (e) {
                  try {
                    if (webapis.avinfo.isHdrTvSupport()) return e ? "HLG" : "PQ";
                  } catch (t) {
                    return $v.prototype.sd.call(this, e);
                  }
                  return "SDR";
                }),
                (i.Bi = function () {
                  return !0;
                }),
                (i.Ci = function () {
                  return 3 === this.Ba();
                }),
                navigator.userAgent.includes("Tizen") &&
                  (se = function () {
                    return new sy();
                  }),
                p(uy, $v),
                (uy.prototype.Ba = function () {
                  return null;
                }),
                (uy.prototype.Nb = function () {
                  return "Vizio";
                }),
                (uy.prototype.Oa = function () {
                  return "TV";
                }),
                (uy.prototype.hc = function () {
                  return !1;
                }),
                navigator.userAgent.includes("VIZIO SmartCast") &&
                  (se = function () {
                    return new uy();
                  }),
                p(ly, $v),
                ((i = ly.prototype).Ba = function () {
                  return this.g.value();
                }),
                (i.Nb = function () {
                  return "WebKit STB";
                }),
                (i.Oa = function () {
                  return "TV";
                }),
                (i.Ha = function () {
                  return "WEBKIT";
                }),
                (i.hc = function () {
                  return !1;
                }),
                (i.fd = function () {
                  var e = this.g.value();
                  return null === e || e >= 15;
                }),
                (i.Fd = function () {
                  return this.h.value();
                }),
                (i.lc = function () {
                  return Promise.resolve({
                    width: e.screen.width * e.devicePixelRatio,
                    height: e.screen.height * e.devicePixelRatio,
                  });
                }),
                (i.Of = function () {
                  return !this.i.value();
                }),
                (i.Nf = function () {
                  return !1;
                }),
                (navigator.userAgent.includes("SOPOpenBrowser") ||
                  navigator.userAgent.includes("DT_STB_BCM") ||
                  navigator.userAgent.includes("Sky_STB") ||
                  !(
                    !(navigator.vendor || "").includes("Apple") ||
                    /(?:iPhone|iPad|iPod)/.test(navigator.userAgent) ||
                    navigator.maxTouchPoints > 1 ||
                    (navigator.userAgentData &&
                      navigator.userAgentData.platform &&
                      "macos" == navigator.userAgentData.platform.toLowerCase()) ||
                    (navigator.platform && navigator.platform.toLowerCase().includes("mac"))
                  )) &&
                  (se = function () {
                    return new ly();
                  }),
                p(dy, $v),
                ((i = dy.prototype).Ba = function () {
                  return this.h;
                }),
                (i.Nb = function () {
                  return "WebOS";
                }),
                (i.Oa = function () {
                  return "TV";
                }),
                (i.Ha = function () {
                  return "CHROMIUM";
                }),
                (i.hc = function () {
                  return !1;
                }),
                (i.fd = function () {
                  var e = this.Ba();
                  return null !== e ? e > 3 : $v.prototype.fd.call(this);
                }),
                (i.Ib = function () {
                  return !1;
                }),
                (i.we = function () {
                  var e = this.Ba();
                  return null !== e ? e > 3 : $v.prototype.we.call(this);
                }),
                (i.lc = function () {
                  var t = { width: 1920, height: 1080 };
                  try {
                    var n = JSON.parse(e.PalmSystem.deviceInfo);
                    ((t.width = Math.max(1920, n.screenWidth)), (t.height = Math.max(1080, n.screenHeight)));
                  } catch (r) {
                    K("WebOS: Error detecting screen size, default screen size 1920x1080.");
                  }
                  return Promise.resolve(t);
                }),
                (i.Wa = function (e) {
                  return (
                    $v.prototype.Wa.call(this, e),
                    3 === this.Ba() && (e.streaming.crossBoundaryStrategy = "reset"),
                    (e.streaming.shouldFixTimestampOffset = !0),
                    (e.streaming.stallSkip = 0),
                    e
                  );
                }),
                (i.sd = function (e) {
                  return null == this.g
                    ? (K("WebOS: getConfigs call haven't finished"), $v.prototype.sd.call(this, e))
                    : this.g
                      ? e
                        ? "HLG"
                        : "PQ"
                      : "SDR";
                }),
                (i.fj = function () {
                  return !1;
                }),
                (i.ed = function () {
                  var e = this.Ba();
                  return null !== e ? e >= 6 : $v.prototype.ed.call(this);
                }),
                navigator.userAgent.includes("Web0S"))
              ) {
                var cy = new dy();
                se = function () {
                  return cy;
                };
              }
              function hy() {
                ($v.call(this), (this.g = navigator.userAgent.includes("Edge/")));
                var e = navigator.userAgent.match(/Edge?\/(\d+)/);
                this.h = e ? parseInt(e[1], 10) : null;
              }
              function py() {
                var e = null;
                try {
                  e = "undefined" != typeof Windows ? Windows : chrome.webview.hostObjects.sync.Windows;
                } catch (t) {}
                return e;
              }
              function fy(e, t, n) {
                ((this.type = e), (this.ha = t), (this.segments = n || null));
              }
              function gy(e, t, n, r) {
                ((this.id = e),
                  (this.name = t),
                  (this.attributes = n),
                  (this.value = void 0 === r ? null : r));
              }
              function my(e, t) {
                return t
                  ? e.toString()
                  : ((t = new Set()
                      .add("AUDIO")
                      .add("VIDEO")
                      .add("SUBTITLES")
                      .add("PATHWAY-ID")
                      .add("GROUP-ID")
                      .add("URI")),
                    e.toString(t));
              }
              function vy(e, t) {
                return (
                  e.attributes.find(function (e) {
                    return e.name === t;
                  }) || null
                );
              }
              function yy(e, t, n) {
                return (e = vy(e, t)) ? e.value : n || null;
              }
              function by(e, t) {
                if (!(e = vy(e, t))) throw new Ke(2, 4, 4023, t);
                return e.value;
              }
              function xy(e, t, n) {
                ((n = void 0 === n ? [] : n), (this.ha = t), (this.g = e), (this.wc = n));
              }
              function Ty(e, t) {
                ((this.name = e), (this.value = t));
              }
              function wy(e, t) {
                return e.filter(function (e) {
                  return e.name == t;
                });
              }
              function Sy(e, t) {
                return e.filter(function (e) {
                  return by(e, "TYPE") == t;
                });
              }
              function Ay(e, t) {
                for (var n = (e = g(e)).next(); !n.done; n = e.next()) if ((n = n.value).name === t) return n;
                return null;
              }
              function Ey(e, t, n) {
                return ((n = void 0 === n ? 0 : n), (e = Ay(e, t)) ? Number(e.value) : n);
              }
              function ky(e, t, n) {
                return t ? Iy(e, [t], n) : [];
              }
              function Iy(e, t, n) {
                if (!t.length) return [];
                var r = t;
                return (
                  n &&
                    n.size &&
                    (r = t.map(function (e) {
                      return Cy(e, n);
                    })),
                  lt(e, r)
                );
              }
              function Cy(e, t) {
                if (!t || !t.size) return e;
                var n = (e = String(e).replace(/%7B/g, "{").replace(/%7D/g, "}")).match(/{\$\w*}/g);
                if (n)
                  for (var r = (n = g(n)).next(); !r.done; r = n.next()) {
                    var i = (r = r.value).slice(2, r.length - 1),
                      a = t.get(i);
                    if (!a) throw new Ke(2, 4, 4039, i);
                    e = e.replace(r, a);
                  }
                return e;
              }
              function My() {
                this.g = 0;
              }
              function Ry(e, t) {
                var n = (t = (t = Ye(t)).replace(/\r\n|\r(?=[^\n]|$)/gm, "\n").trim()).split(/\n+/m);
                if (!Py.test(n[0])) throw new Ke(2, 4, 4015);
                t = 0;
                for (var r = !1, i = [], a = !0, o = 0; o < n.length; o++) {
                  var s = n[o],
                    u = n[o + 1];
                  if ((s.startsWith("#") && !s.startsWith("#EXT")) || a) a = !1;
                  else {
                    if (
                      ((s = _y(e, s)),
                      r ||
                        (Oy.has(s.name)
                          ? ((t = 1), (r = !0))
                          : "EXT-X-STREAM-INF" == s.name || "EXT-X-MEDIA" == s.name
                            ? (r = !0)
                            : Uy.has(s.name) && ((t = 1), (r = !0))),
                      Uy.has(s.name))
                    ) {
                      if (1 != t) throw new Ke(2, 4, 4017);
                      ((a = e),
                        (e = Array(Math.max(100, Math.floor((n.length - o) / 2)))),
                        (r = 0),
                        (s = []));
                      var l = [];
                      for (u = null; o < n.length; o++) {
                        var d = n[o];
                        d.startsWith("#EXT")
                          ? ((d = _y(a, d)),
                            Oy.has(d.name)
                              ? i.push(d)
                              : "EXT-X-MAP" == d.name
                                ? (u = d)
                                : "EXT-X-PART" == d.name
                                  ? l.push(d)
                                  : "EXT-X-PRELOAD-HINT" == d.name
                                    ? "PART" == yy(d, "TYPE")
                                      ? l.push(d)
                                      : "MAP" == yy(d, "TYPE") && ((d.name = "EXT-X-MAP"), (u = d))
                                    : s.push(d))
                          : (d.startsWith("#") && !d.startsWith("#EXT")) ||
                            ((d = d.trim()),
                            u && s.push(u),
                            (s = new xy(d, s, l)),
                            r < e.length ? (e[r++] = s) : (e.push(s), r++),
                            (s = []),
                            (l = []));
                      }
                      return (
                        l.length &&
                          (u && s.push(u),
                          (n = new xy("", s, l)),
                          r < e.length ? (e[r++] = n) : (e.push(n), r++)),
                        new fy(t, i, r < e.length ? e.slice(0, r) : e)
                      );
                    }
                    (i.push(s),
                      "EXT-X-STREAM-INF" == s.name && (s.attributes.push(new Ty("URI", u)), (a = !0)));
                  }
                }
                return new fy(t, i);
              }
              function _y(e, t) {
                e = e.g++;
                var n = t.match(Dy);
                if (!n) throw new Ke(2, 4, 4016, t);
                t = n[1];
                var r,
                  i,
                  a = n[2];
                if (((n = []), a))
                  for (
                    a = new Bt(a),
                      Ly.lastIndex = 0,
                      (i = Ft(a, Ly)) && (r = i[1]),
                      Ny.lastIndex = 0,
                      i = Ft(a, Ny);
                    i;
                  )
                    (n.push(new Ty(i[1], i[2] || i[3])), jt(a), (i = Ft(a, Ny)));
                return new gy(e, t, n, r);
              }
              (p(hy, $v),
                ((i = hy.prototype).Ba = function () {
                  return this.h;
                }),
                (i.Nb = function () {
                  return "Xbox";
                }),
                (i.Oa = function () {
                  return "CONSOLE";
                }),
                (i.Ha = function () {
                  return this.g ? "EDGE" : "CHROMIUM";
                }),
                (i.Fd = function () {
                  return !0;
                }),
                (i.ih = function () {
                  return !0;
                }),
                (i.jf = function () {
                  return !0;
                }),
                (i.$i = function () {
                  return this.g;
                }),
                (i.lc = function () {
                  var e = { width: 1920, height: 1080 },
                    t = py();
                  if (t)
                    try {
                      var n = new t.Media.Protection.ProtectionCapabilities(),
                        r = t.Media.Protection.ProtectionCapabilityResult;
                      t = null;
                      do {
                        t = n.isTypeSupported(
                          'video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',
                          "com.microsoft.playready.recommendation",
                        );
                      } while (t === r.maybe);
                      t === r.probably && ((e.width = 3840), (e.height = 2160));
                    } catch (i) {
                      K("Xbox: Error detecting screen size, default screen size 1920x1080.");
                    }
                  return Promise.resolve(e);
                }),
                (i.Wa = function (e) {
                  return (
                    $v.prototype.Wa.call(this, e),
                    (e.drm.parseInbandPsshEnabled = this.g),
                    e.drm.preferredKeySystems.push("com.microsoft.playready"),
                    this.g && (e.streaming.gapPadding = 0.01),
                    e
                  );
                }),
                (i.Ff = function () {
                  return !0;
                }),
                (i.Ch = function () {
                  return !1;
                }),
                (navigator.userAgent.includes("Xbox One") || null !== py()) &&
                  (se = function () {
                    return new hy();
                  }),
                (gy.prototype.toString = function (e) {
                  var t = "#" + this.name,
                    n = this.attributes
                      ? this.attributes
                          .filter(function (t) {
                            return !e || !e.has(t.name);
                          })
                          .map(function (e) {
                            return e.name + "=" + (isNaN(Number(e.value)) ? '"' + e.value + '"' : e.value);
                          })
                      : [];
                  return (this.value && n.unshift(this.value), n.length > 0 && (t += ":" + n.join(",")), t);
                }));
              var Dy = /^#(EXT[^:]*)(?::(.*))?$/,
                Py = /^#EXTM3U($|[ \t\n])/m,
                Ly = /^([^,=]+)(?:,|$)/g,
                Ny = /([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g,
                Oy = new Set(
                  "EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(
                    " ",
                  ),
                ),
                Uy = new Set(
                  "EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(
                    " ",
                  ),
                );
              function By() {}
              function jy(e, t) {
                try {
                  var n = Fy(e);
                  return _i({
                    uri: e,
                    originalUri: e,
                    data: n.data,
                    headers: { "content-type": n.contentType },
                    originalRequest: t,
                  });
                } catch (r) {
                  return Mi(r);
                }
              }
              function Fy(t) {
                var n = t.split(":");
                if (n.length < 2 || "data" != n[0]) throw new Ke(2, 1, 1004, t);
                if ((n = n.slice(1).join(":").split(",")).length < 2) throw new Ke(2, 1, 1004, t);
                var r = n[0];
                ((t = e.decodeURIComponent(n.slice(1).join(","))), (n = r.split(";")), (r = n[0]));
                var i = !1;
                return (
                  n.length > 1 && "base64" == n[n.length - 1] && ((i = !0), n.pop()),
                  { data: i ? at(t) : Qe(t), contentType: r, Ih: n }
                );
              }
              function Vy() {
                var t = this;
                ((this.g = this.h = null),
                  (this.G = 1),
                  (this.B = new Map()),
                  (this.M = new Map()),
                  (this.C = new Map()),
                  this.C.set("video", new Map()),
                  this.C.set("audio", new Map()),
                  this.C.set(gt, new Map()),
                  this.C.set("image", new Map()),
                  (this.dc = new Map()
                    .set("com.apple.streamingkeydelivery", function (n, r, i) {
                      return (function (t, n, r, i) {
                        var a, o, s, u, l;
                        return D(function (d) {
                          if (1 == d.g) {
                            if ("video/mp2t" == r) throw new Ke(2, 4, 4040);
                            if ("apple" === e.shakaMediaKeysPolyfill) throw new Ke(2, 4, 4041);
                            if (((a = by(n, "METHOD")), !["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(a)))
                              return d.return(null);
                            ((o = "cenc"),
                              "SAMPLE-AES" == a && (o = "cbcs"),
                              (s = by(n, "URI")),
                              (u = dt("com.apple.fps", o, null, s)));
                            var c = new me(s).Db.replace(/-/g, "").toLowerCase();
                            return (l = 32 === c.length && /^[0-9a-f]+$/.test(c) ? c : null) || !i
                              ? d.A(2)
                              : x(d, Rb(t, i), 3);
                          }
                          return (2 != d.g && (l = d.h), l && u.keyIds.add(l), d.return(u));
                        });
                      })(t, n, r, i);
                    })
                    .set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed", function (e) {
                      var n = by(e, "METHOD");
                      if (["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(n)) {
                        var r = "cenc";
                        "SAMPLE-AES" == n && (r = "cbcs");
                        var i = by(e, "URI");
                        if (((n = Fy(i.split("?")[0])), (i = i.split("?")[0]), !t.I.has(i))) {
                          var a = Ne(n.data);
                          t.I.set(i, a);
                        }
                        ((r = dt(
                          "com.widevine.alpha",
                          r,
                          [{ initDataType: "cenc", initData: t.I.get(i) }],
                          void 0,
                          n.Ih,
                        )),
                          (e = yy(e, "KEYID")) && r.keyIds.add(e.toLowerCase().substr(2)),
                          (e = Promise.resolve(r)));
                      } else e = Promise.resolve(null);
                      return e;
                    })
                    .set("com.microsoft.playready", function (e) {
                      var t = by(e, "METHOD");
                      if (["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(t)) {
                        var n = "cenc";
                        ("SAMPLE-AES" == t && (n = "cbcs"),
                          (t = Fy((e = by(e, "URI")).split("?")[0])),
                          (e = Ne(t.data)));
                        var r = new Uint8Array([
                          154, 4, 240, 121, 152, 64, 66, 134, 171, 146, 230, 91, 224, 136, 95, 149,
                        ]);
                        ((n = dt(
                          "com.microsoft.playready",
                          n,
                          [{ initDataType: "cenc", initData: (r = va(e, r, new Set(), 0)) }],
                          void 0,
                          t.Ih,
                        )),
                          (e = $t(["<PLAYREADY>", it(e), "</PLAYREADY>"].join("\n"))) &&
                            (n.licenseServerUri = Jg(e)),
                          (n = Promise.resolve(n)));
                      } else n = Promise.resolve(null);
                      return n;
                    })
                    .set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c", function (e) {
                      var n = by(e, "METHOD");
                      if (["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(n)) {
                        var r = "cenc";
                        "SAMPLE-AES" == n && (r = "cbcs");
                        var i = by(e, "URI");
                        if (((n = Fy(i.split("?")[0])), (i = i.split("?")[0]), !t.I.has(i))) {
                          var a = Ne(n.data);
                          t.I.set(i, a);
                        }
                        ((r = dt(
                          "com.huawei.wiseplay",
                          r,
                          [{ initDataType: "cenc", initData: t.I.get(i) }],
                          void 0,
                          n.Ih,
                        )),
                          (e = yy(e, "KEYID")) && r.keyIds.add(e.toLowerCase().substr(2)),
                          (e = Promise.resolve(r)));
                      } else e = Promise.resolve(null);
                      return e;
                    })),
                  (this.ob = new Set()),
                  (this.i = new Map()),
                  (this.l = null),
                  (this.H = ""),
                  (this.ab = new My()),
                  (this.N = -1),
                  (this.ma = 1 / 0),
                  (this.ba = this.zc = this.kb = !1),
                  (this.F = new Mr(function () {
                    t.X && !t.g.continueLoadingWhenPaused && (t.V.Ma(t.X, "timeupdate"), t.X.paused)
                      ? t.V.Aa(t.X, "timeupdate", function () {
                          return Ab(t);
                        })
                      : Ab(t);
                  })),
                  (this.Fa = Bb),
                  (this.m = null),
                  (this.eb = 0),
                  (this.o = 1 / 0),
                  (this.Ua = this.Ta = this.T = 0),
                  (this.$ = new Bi()),
                  (this.J = new Map()),
                  (this.K = new Map()),
                  (this.Da = new Map()),
                  (this.va = new Map()),
                  (this.O = new Map()),
                  (this.ya = new Map()),
                  (this.za = new Map()),
                  (this.yc = this.oa = !1),
                  (this.ac = new H(5)),
                  (this.j = null),
                  (this.R = !0),
                  (this.V = new ne()),
                  (this.u = this.X = null),
                  (this.cc = function () {
                    return !1;
                  }),
                  (this.I = new Map()));
              }
              function Hy(e, t) {
                return Eb(e) ? e.C.get(t.type) : t.rf;
              }
              function Gy(e, t) {
                var n,
                  r,
                  i,
                  a,
                  o,
                  s,
                  u,
                  l,
                  d,
                  c,
                  h,
                  p,
                  f,
                  v,
                  y,
                  b,
                  S,
                  k,
                  I,
                  C,
                  M,
                  R,
                  _,
                  P,
                  L,
                  N,
                  O,
                  U,
                  B,
                  j,
                  F,
                  V,
                  H,
                  G,
                  z;
                return D(function (D) {
                  switch (D.g) {
                    case 1:
                      if (t.stream.isAudioMuxedInVideo) return D.return();
                      for (n = [], r = g(t.P()), i = r.next(); !i.done; i = r.next())
                        ((a = i.value),
                          (o = new me(a)),
                          (s = o.g),
                          t.Ue &&
                            (t.Qb >= 0 && s.add("_HLS_msn", String(t.Qb)),
                            t.Rb >= 0 && s.add("_HLS_part", String(t.Rb))),
                          t.Ve && s.add("_HLS_skip", "YES"),
                          _e(s) && xe(o, Te(s.toString())),
                          n.push(o.toString()));
                      return (w(D, 2), x(D, Sb(e, n, !0).promise, 4));
                    case 4:
                      ((u = D.h), A(D, 3));
                      break;
                    case 2:
                      throw ((l = E(D)), e.h && e.h.disableStream(t.stream), l);
                    case 3:
                      if (!t.stream.segmentIndex) return D.return();
                      if (1 != (d = Ry(e.ab, u.data)).type) throw new Ke(2, 4, 4017);
                      return (
                        (c = u.uri) == u.originalUri || t.P().includes(c) || t.Df.push(c),
                        (h = wy(d.ha, "EXT-X-DEFINE")),
                        (p = qy(e, h, c)),
                        (f = t.stream),
                        (v = Hy(e, t)),
                        x(D, lb(e, d, f.mimeType, t.P, p), 5)
                      );
                    case 5:
                      for (
                        y = D.h,
                          b = y.keyIds,
                          S = y.drmInfos,
                          k = y.encrypted,
                          I = y.Qh,
                          f.encrypted || !k || I || (f.encrypted = !0),
                          (function (e, t) {
                            return (
                              e.size === t.size &&
                              [].concat(m(e)).every(function (e) {
                                return t.has(e);
                              })
                            );
                          })(f.keyIds, b) || ((f.keyIds = b), (f.drmInfos = S), e.h.newDrmInfo(f)),
                          C = yb(e, d, v, p, t.P, t.type),
                          M = C.segments,
                          (R = C.bandwidth) && (f.bandwidth = R),
                          _ = Hu(f),
                          P = g(M),
                          L = P.next();
                        !L.done;
                        L = P.next()
                      )
                        (N = L.value).ea && (N.ea.xd = _);
                      (f.segmentIndex.ke(M, e.l.Hb()),
                        M.length &&
                          ((O = Ey(d.ha, "EXT-X-MEDIA-SEQUENCE", 0)),
                          (B = (U = Ay(d.ha, "EXT-X-SKIP")) ? Number(yy(U, "SKIPPED-SEGMENTS")) : 0),
                          (j = sb(O, M)),
                          (F = j.Qb),
                          (V = j.Rb),
                          (t.Qb = F + B),
                          (t.Rb = V),
                          (H = v.get(O)),
                          f.segmentIndex.Ya(H)),
                        (G = Du(f.segmentIndex)) &&
                          ((t.Wc = G.startTime), (z = M[M.length - 1]), (t.Mc = z.endTime)),
                        Ay(d.ha, "EXT-X-ENDLIST") && (t.be = !0),
                        hb(e, d),
                        vb(e, d.ha, f.type, p, t.P),
                        T(D));
                  }
                });
              }
              function zy(e, t, n) {
                n = void 0 !== n && n;
                for (var r = -1 == e.N, i = g(t), a = i.next(); !a.done; a = i.next()) {
                  var o = (a = a.value).stream.segmentIndex,
                    s = Hy(e, a);
                  if ((o = Du(o)))
                    for (var u = (s = g(s)).next(); !u.done; u = s.next()) {
                      var l = (u = g(u.value)).next().value;
                      if (u.next().value == o.startTime) {
                        (r && (e.N = Math.max(e.N, l)), (a.sg = l));
                        break;
                      }
                    }
                }
                if (!(e.N < 0))
                  for (r = (t = g(t)).next(); !r.done; r = t.next())
                    (ab(e, (r = r.value).type) || n) &&
                      (i = r.stream.segmentIndex) &&
                      (a = e.N - r.sg) > 0 &&
                      (i.g.splice(0, a), (i = Du(i))) &&
                      ((i = -i.startTime), r.stream.segmentIndex.offset(i), Xy(e, r, i));
              }
              function Xy(e, t, n) {
                if (!(Math.abs(n) < 0.001)) {
                  ((t.Wc += n), (t.Mc += n));
                  for (var r = g((e = Hy(e, t))), i = r.next(); !i.done; i = r.next()) {
                    var a = g(i.value);
                    ((i = a.next().value), (a = a.next().value), e.set(i, a + n));
                  }
                  t.P();
                }
              }
              function Wy(e, t, n) {
                var r, i, a, o, s;
                return D(function (u) {
                  switch (u.g) {
                    case 1:
                      return t
                        ? ((r = qi),
                          (i = ul(t.P(), t.Jc(), t.Hc(), e.g.retryParameters)),
                          x(u, Ib(e, i, r, { type: t instanceof Fo ? 1 : 0 }).promise, 2))
                        : u.return({ mimeType: null, data: null });
                    case 2:
                      if (((a = u.h), (o = a.data), !t.aesKey)) {
                        u.A(3);
                        break;
                      }
                      return x(u, al(o, t.aesKey, n), 4);
                    case 4:
                      o = u.h;
                    case 3:
                      return (
                        t instanceof Fo ? t.ue(o, !0) : t.ue(o),
                        (s = a.headers["content-type"]) && (s = s.split(";")[0].toLowerCase()),
                        u.return({ mimeType: s, data: o })
                      );
                  }
                });
              }
              function Ky(e) {
                if (Eb(e)) {
                  if (e.Fa == Fb) {
                    for (var t = 1 / 0, n = 1 / 0, r = g(e.i.values()), i = r.next(); !i.done; i = r.next())
                      (i = i.value).stream.segmentIndex &&
                        "text" != i.stream.type &&
                        !i.stream.isAudioMuxedInVideo &&
                        ((t = Math.min(t, i.Mc)), (n = Math.min(n, i.Wc)));
                    ((t = t - n || 0),
                      isNaN(e.g.availabilityWindowOverride) || (t = e.g.availabilityWindowOverride),
                      e.l.Lf(t));
                  }
                } else e.l.Ab(nb(e));
                if (!e.l.o)
                  for (n = (t = g(e.i.values())).next(); !n.done; n = t.next())
                    !(n = n.value).stream.segmentIndex ||
                      ("audio" != n.type && "video" != n.type) ||
                      ((n = Du(n.stream.segmentIndex)) && n.h && e.l.sh(n.h));
                e.l.qf();
              }
              function qy(e, t, n) {
                n = new me(n).g;
                for (var r = new Map(), i = (t = g(t)).next(); !i.done; i = t.next()) {
                  var a = i.value,
                    o = yy(a, "NAME"),
                    s = yy(a, "VALUE");
                  ((i = yy(a, "QUERYPARAM")),
                    (a = yy(a, "IMPORT")),
                    o && s && (r.has(o) || r.set(o, s)),
                    i && (o = n.get(i)[0]) && !r.has(o) && r.set(i, o),
                    a && (i = e.B.get(a)) && r.set(a, i));
                }
                return r;
              }
              function Yy(e) {
                var t = new Set([lr(e.mimeType, e.codecs)]);
                (e.segmentIndex &&
                  e.segmentIndex.Fb(function (n) {
                    n.mimeType && t.add(lr(n.mimeType, e.codecs));
                  }),
                  (e.fullMimeTypes = t));
              }
              function $y(e, t, n) {
                for (
                  var r = { audio: [], video: [] },
                    i = new Map(),
                    a = [],
                    o = !1,
                    s = !1,
                    u = g(t),
                    l = u.next();
                  !l.done;
                  l = u.next()
                ) {
                  var d = l.value;
                  l = yy(d, "AUDIO");
                  var c = yy(d, "VIDEO"),
                    h = l || c;
                  h &&
                    (a.includes(h) || a.push(h),
                    (d = yy(d, "PATHWAY-ID")) && i.set(h, d),
                    l ? (o = !0) : c && (s = !0));
                }
                (a.length &&
                  n.length &&
                  (function (e, t, n) {
                    t = t.filter(function (e) {
                      var t = yy(e, "URI") || "";
                      return "SUBTITLES" != (e = yy(e, "TYPE")) && ("" != t || "AUDIO" == e);
                    });
                    for (var r = {}, i = (t = g(t)).next(); !i.done; i = t.next()) {
                      var a = my((i = i.value), !e.j);
                      r[a] ? r[a].push(i) : (r[a] = [i]);
                    }
                    for (var o in r) Zy(e, r[o], n, !1);
                  })(
                    e,
                    (n = n.filter(function (e) {
                      return a.includes(by(e, "GROUP-ID"));
                    })),
                    i,
                  ),
                  (n = (i = a.sort().join(",")) && e.M.has(i) ? e.M.get(i) : []),
                  o ? r.audio.push.apply(r.audio, m(n)) : s && r.video.push.apply(r.video, m(n)),
                  (s = !1));
                var p = t.map(function (e) {
                  return by(e, "URI");
                });
                return (
                  (o = r.audio.find(function (e) {
                    return (
                      e &&
                      e.P().find(function (e) {
                        return p.includes(e);
                      })
                    );
                  })),
                  (u = pt("video", (n = Jy(e, t[0])))),
                  (l = pt("audio", n)) && !u
                    ? ((o = "audio"),
                      (s =
                        r.audio.length > 0 &&
                        !r.audio.some(function (e) {
                          return e.stream.isAudioMuxedInVideo;
                        })))
                    : !r.audio.length && !r.video.length && l && u
                      ? ((o = "video"), (n = [[u, l].join()]))
                      : r.audio.length && o
                        ? ((o = "audio"), (s = !0))
                        : (o = r.video.length && !r.audio.length ? "audio" : "video"),
                  s ||
                    ((t = (function (e, t, n, r) {
                      for (var i = e.G++, a = [], o = g(t), s = o.next(); !s.done; s = o.next()) {
                        var u = s.value;
                        ((s = by(u, "URI")),
                          (u = yy(u, "PATHWAY-ID")),
                          e.j && u && Um(e.j, i, u, s),
                          a.push(s));
                      }
                      if (((o = a.sort().join(",") + n.sort().join(",")), e.i.has(o))) return e.i.get(o);
                      s = a.join(",");
                      e: {
                        if (((t = yy(t[0], "CLOSED-CAPTIONS")), "video" == r)) {
                          if (e.g.disableText) {
                            ((e.R = !1), (t = null));
                            break e;
                          }
                          if (t) {
                            if ("NONE" != t) {
                              t = e.J.get(t);
                              break e;
                            }
                            e.R = !1;
                          } else if (!t && e.J.size)
                            for (t = (t = g(e.J.keys())).next(); !t.done; t = t.next()) {
                              t = e.J.get(t.value);
                              break e;
                            }
                        }
                        t = null;
                      }
                      return (
                        (n = ht(r, n)),
                        (r = tb(e, i, a, n, r, null, !1, s, null, t, null, !1, null, !1)),
                        e.i.set(o, r),
                        r
                      );
                    })(e, t, n, o)),
                    i && e.g.enableAudioGroups && (t.stream.groupId = i),
                    "audio" == t.stream.type &&
                      "audio" === o &&
                      r.audio.some(function (e) {
                        return e.stream.isAudioMuxedInVideo;
                      }) &&
                      ((e = r.audio[0].stream),
                      (t.stream.language = e.language),
                      (t.stream.channelsCount = e.channelsCount),
                      (t.stream.label = e.label),
                      (t.stream.audioSamplingRate = e.audioSamplingRate),
                      (t.stream.originalId = e.originalId),
                      (t.stream.originalLanguage = e.originalLanguage)),
                    (r[t.stream.type] = [t])),
                  r
                );
              }
              function Jy(e, t) {
                return (
                  (t = yy(t, "CODECS") || ""),
                  (e.ba = t.length > 0),
                  e.ba ||
                    e.g.hls.disableCodecGuessing ||
                    ((t = []),
                    e.g.disableVideo || t.push(e.g.hls.defaultVideoCodec),
                    e.g.disableAudio || t.push(e.g.hls.defaultAudioCodec),
                    (t = t.join(","))),
                  il(t.split(/\s*,\s*/))
                );
              }
              function Qy(e, t, n, r, i, a, o, s, u, l, d, c) {
                for (var h = g(n), p = h.next(); !p.done; p = h.next())
                  wb(p.value.stream, i, a, o, s, u, null);
                for (
                  i = e.g.disableVideo,
                    (n.length && !i) || (n = [null]),
                    i &&
                      (t = t.filter(function (e) {
                        return !e.stream.isAudioMuxedInVideo;
                      })),
                    i = e.g.disableAudio,
                    (t.length && !i) || (t = [null]),
                    i = [],
                    a = (t = g(t)).next();
                  !a.done;
                  a = t.next()
                )
                  for (a = a.value, s = (o = g(n)).next(); !s.done; s = o.next()) {
                    var f = s.value;
                    ((s = a ? a.stream : null) && ((s.drmInfos = l), (s.keyIds = d)),
                      (u = f ? f.stream : null) &&
                        ((u.drmInfos = l), (u.keyIds = d), e.g.disableIFrames || hi(u, c)),
                      u && !s && (u.bandwidth = r),
                      !u && s && (s.bandwidth = r),
                      (h = a ? a.stream.drmInfos : null),
                      (p = f ? f.stream.drmInfos : null),
                      (f = f ? f.P().sort().join(",") : ""));
                    var m = a ? a.P().sort().join(",") : "",
                      v = [];
                    (s && s.codecs && v.push(s.codecs),
                      u && u.codecs && v.push(u.codecs),
                      (f = [f, m, v.sort()].join("-")),
                      (s && u && !je(h, p)) ||
                        e.ob.has(f) ||
                        ((s = {
                          id: e.G++,
                          language: s ? s.language : "und",
                          disabledUntilTime: 0,
                          primary: (!!s && s.primary) || (!!u && u.primary),
                          audio: s,
                          video: u,
                          bandwidth: r,
                          allowedByApplication: !0,
                          allowedByKeySystem: !0,
                          decodingInfos: [],
                        }),
                        i.push(s),
                        e.ob.add(f)));
                  }
                return i;
              }
              function Zy(e, t, n, r) {
                r = void 0 === r || r;
                for (
                  var i = [], a = [], o = new Map(), s = g(t), u = s.next(), l = {};
                  !u.done;
                  l = { oi: void 0 }, u = s.next()
                ) {
                  ((u = u.value),
                    (l.oi = ++e.G),
                    (l = (function (e) {
                      return function () {
                        return "shaka://hls-muxed" + e.oi;
                      };
                    })(l)));
                  var d = r ? by(u, "URI") : yy(u, "URI") || l();
                  ((l = by(u, "GROUP-ID")),
                    i.push(d),
                    a.push(l),
                    o.set(l, d),
                    (u = yy(u, "PATHWAY-ID")) && n.set(l, u));
                }
                if (
                  ((r = a.sort().join(",")),
                  (u = t[0]),
                  (t = ""),
                  (s = (function (e) {
                    return ("subtitles" == (e = by(e, "TYPE").toLowerCase()) && (e = gt), e);
                  })(u)),
                  s == gt)
                )
                  t = yy(u, "CODECS") || "";
                else
                  for (l = (a = g(a)).next(); !l.done; l = a.next())
                    if (((l = l.value), e.K.has(l))) {
                      t = e.K.get(l);
                      break;
                    }
                if (((a = i.sort().join(",")), "audio" == s && r && (a += r), e.i.has(a))) return e.i.get(a);
                if (((l = e.G++), e.j))
                  for (d = (o = g(o)).next(); !d.done; d = o.next()) {
                    var c = g(d.value);
                    ((d = c.next().value), (c = c.next().value), (d = n.get(d)) && Um(e.j, l, d, c));
                  }
                ((n = yy(u, "LANGUAGE")),
                  (o = yy(u, "NAME")),
                  (d = "YES" == yy(u, "DEFAULT")),
                  (c =
                    "audio" == s
                      ? (function (e) {
                          return (e = yy(e, "CHANNELS")) ? parseInt(e.split("/")[0], 10) : null;
                        })(u)
                      : null));
                var h =
                    "audio" == s &&
                    (function (e) {
                      return (
                        !!(e = yy(e, "CHANNELS")) &&
                        2 == (e = e.split("/")).length &&
                        ("JOC" === e[1] || e[1].includes("ATMOS"))
                      );
                    })(u),
                  p = yy(u, "CHARACTERISTICS"),
                  f = "YES" == yy(u, "FORCED");
                return (
                  (u =
                    "audio" == s
                      ? (function (e) {
                          return (e = yy(e, "SAMPLE-RATE")) ? parseInt(e, 10) : null;
                        })(u)
                      : null),
                  (i = tb(e, l, i, t, s, n, d, o, c, null, p, f, u, h)).stream &&
                    e.g.enableAudioGroups &&
                    (i.stream.groupId = r),
                  e.M.has(r) ? e.M.get(r).push(i) : e.M.set(r, [i]),
                  e.i.set(a, i),
                  i
                );
              }
              function eb(e, t) {
                var n = "video",
                  r = by(t, "URI"),
                  i = yy(t, "CODECS") || "";
                if (("mjpg" == i && (n = "image"), e.i.has(r))) return e.i.get(r);
                var a = yy(t, "LANGUAGE"),
                  o = yy(t, "NAME"),
                  s = yy(t, "CHARACTERISTICS");
                return (
                  (n = tb(e, e.G++, [r], i, n, a, !1, o, null, null, s, !1, null, !1)),
                  (a = g((i = yy(t, "RESOLUTION")) ? i.split("x") : [null, null])),
                  (i = a.next().value),
                  (a = a.next().value),
                  (n.stream.width = Number(i) || void 0),
                  (n.stream.height = Number(a) || void 0),
                  (t = yy(t, "BANDWIDTH")) && (n.stream.bandwidth = Number(t)),
                  e.i.set(r, n),
                  n
                );
              }
              function tb(e, t, n, r, i, a, o, s, u, l, d, c, h, p) {
                function f(t) {
                  var n, f, y, S, k, I, C, M, R, _, P, L, N, O, U, B, j, F;
                  return D(function (D) {
                    switch (D.g) {
                      case 1:
                        return ((n = mt), w(D, 2), x(D, t.promise, 4));
                      case 4:
                        if (((f = D.h), t.aborted)) return D.return();
                        if (
                          ((y = f.uri) != f.originalUri && (b.P().includes(y) || b.Df.push(y)),
                          1 != (S = Ry(e.ab, f.data)).type)
                        )
                          throw new Ke(2, 4, 4017);
                        return (
                          (k = wy(S.ha, "EXT-X-DEFINE")),
                          (I = qy(e, k, y)),
                          (C = !1),
                          ((!e.ba && e.g.hls.disableCodecGuessing) ||
                            (e.R && i == n.wa && !e.g.hls.disableClosedCaptionsDetection)) &&
                            S.segments.length > 0 &&
                            ((e.R = !1), (C = !0)),
                          (M = !e.ba && e.g.hls.disableCodecGuessing),
                          (R = Eb(e)),
                          x(D, ob(e, 0, I, S, m, r, i, a, o, s, u, l, d, c, h, p, void 0, C, M), 5)
                        );
                      case 5:
                        if (((_ = D.h), t.aborted)) return D.return();
                        ((P = _.stream),
                          cb(e, S),
                          Eb(e) && !R && pb(e, S),
                          (b.Wc = _.Wc),
                          (b.Mc = _.Mc),
                          (b.Ve = _.Ve),
                          (b.Ue = _.Ue),
                          (b.be = _.be),
                          (b.rf = _.rf),
                          (b.Qb = _.Qb),
                          (b.Rb = _.Rb),
                          (v.segmentIndex = P.segmentIndex),
                          (v.encrypted = P.encrypted),
                          (v.drmInfos = P.drmInfos),
                          (v.keyIds = P.keyIds),
                          (v.mimeType = P.mimeType),
                          (v.bandwidth = v.bandwidth || P.bandwidth),
                          (v.codecs = v.codecs || P.codecs),
                          (v.closedCaptions = v.closedCaptions || P.closedCaptions),
                          (v.width = v.width || P.width),
                          (v.height = v.height || P.height),
                          (v.hdr = v.hdr || P.hdr),
                          (v.colorGamut = v.colorGamut || P.colorGamut),
                          (v.frameRate = v.frameRate || P.frameRate),
                          "und" == v.language && "und" != P.language && (v.language = P.language),
                          (v.language = v.language || P.language),
                          (v.channelsCount = v.channelsCount || P.channelsCount),
                          (v.audioSamplingRate = v.audioSamplingRate || P.audioSamplingRate),
                          Yy(v),
                          v.drmInfos.length && e.h.newDrmInfo(v),
                          (L = !1),
                          ((!l && v.closedCaptions) ||
                            (l && v.closedCaptions && l.size != v.closedCaptions.size)) &&
                            (L = !0),
                          e.m && L && e.h.makeTextStreamsForClosedCaptions(e.m),
                          i == n.Na &&
                            (N = Du(P.segmentIndex)) &&
                            N.ea &&
                            ((v.mimeType = "application/mp4"), Yy(v)),
                          (O = Hu(v)),
                          v.segmentIndex.Fb(function (e) {
                            e.ea && (e.ea.xd = O);
                          }),
                          (function (e) {
                            if (!e.m) return !1;
                            for (var t = [], n = [], r = (e = g(e.m.variants)).next(); !r.done; r = e.next())
                              ((r = r.value).video && t.push(r.video), r.audio && n.push(r.audio));
                            return !(
                              (t.length > 0 &&
                                !t.some(function (e) {
                                  return e.segmentIndex;
                                })) ||
                              (n.length > 0 &&
                                !n.some(function (e) {
                                  return e.segmentIndex;
                                }))
                            );
                          })(e) &&
                            (e.zc
                              ? ib(e, [b])
                              : ((e.zc = !0),
                                (U = Array.from(e.i.values())),
                                (B = U.filter(function (e) {
                                  return e.stream.segmentIndex;
                                })),
                                ib(e, B),
                                Ky(e),
                                (j = e.o) > 0 && e.F.ka(j))),
                          vb(e, S.ha, v.type, I, m),
                          e.m && (e.m.startTime = e.u),
                          A(D, 0));
                        break;
                      case 2:
                        if (((F = E(D)), v.closeSegmentIndex(), 7001 === F.code)) return D.return();
                        if (!e.h.disableStream(v)) throw F;
                        T(D);
                    }
                  });
                }
                function m() {
                  return e.j && n.length > 1 ? Bm(e.j, t) : b.Df.concat(Iy([e.H], n, e.B));
                }
                var v = ub(e, r, i, a, o, s, u, l, d, c, h, p);
                n.some(function (e) {
                  return e.startsWith("shaka://hls-muxed");
                }) && ((v.isAudioMuxedInVideo = !0), (v.mimeType = "video/mp2t"), Yy(v));
                var y,
                  b = {
                    stream: v,
                    type: i,
                    Df: [],
                    Wc: 0,
                    Mc: 0,
                    rf: new Map(),
                    Ve: !1,
                    Ue: !1,
                    be: !1,
                    sg: -1,
                    Qb: -1,
                    Rb: -1,
                    P: m,
                  },
                  S = null;
                return (
                  (v.createSegmentIndex = function () {
                    return (
                      S ||
                      (v.isAudioMuxedInVideo
                        ? ((v.segmentIndex = new _u([])), Promise.resolve())
                        : ((y = Sb(e, b.P(), !0)),
                          (S = new Promise(function (e) {
                            e(f(y));
                          }))))
                    );
                  }),
                  (v.closeSegmentIndex = function () {
                    (S && !v.segmentIndex && y.abort(),
                      v.segmentIndex && (v.segmentIndex.release(), (v.segmentIndex = null)),
                      (S = null));
                  }),
                  b
                );
              }
              function nb(e) {
                for (var t = 1 / 0, n = (e = g(e.i.values())).next(); !n.done; n = e.next())
                  (n = n.value).stream.segmentIndex &&
                    "text" != n.stream.type &&
                    !n.stream.isAudioMuxedInVideo &&
                    (t = Math.min(t, n.Mc));
                return t;
              }
              function rb(e, t) {
                for (var n = [], r = (t = g(t)).next(); !r.done; r = t.next())
                  (r = r.value).segmentIndex &&
                    r.segmentIndex.Fb(function (e) {
                      n.push(e);
                    });
                e.l.me(n);
              }
              function ib(e, t) {
                if (!Eb(e))
                  for (var n = nb(e), r = g(t), i = r.next(); !i.done; i = r.next())
                    i.value.stream.segmentIndex.pd(0, n);
                (rb(
                  e,
                  t.map(function (e) {
                    return e.stream;
                  }),
                ),
                  (n = (r = Array.from(e.i.values()).filter(function (e) {
                    return e.stream.segmentIndex;
                  })).some(function (e) {
                    return "audio" == e.stream.type;
                  })),
                  (i = r.some(function (e) {
                    return "video" == e.stream.type;
                  })),
                  (r = Eb(e) && !e.kb),
                  (n = !Eb(e) && e.kb && !(n && i)),
                  e.g.hls.ignoreManifestProgramDateTime || r || n
                    ? zy(e, t, r)
                    : ((function (e, t) {
                        if (e.ma == 1 / 0)
                          for (var n = (t = g(t)).next(); !n.done; n = t.next())
                            null != (n = Du(n.value.stream.segmentIndex)) &&
                              null != n.h &&
                              (e.ma = Math.min(e.ma, n.h));
                        if ((t = e.ma) != 1 / 0)
                          for (var r = (n = g(e.i.values())).next(); !r.done; r = n.next())
                            if (!ab(e, (r = r.value).type)) {
                              var i = r.stream.segmentIndex;
                              if (null != i) {
                                var a = Du(i);
                                if (a)
                                  if (null == a.h)
                                    W(
                                      "Missing EXT-X-PROGRAM-DATE-TIME for stream",
                                      r.P(),
                                      "Expect AV sync issues!",
                                    );
                                  else
                                    for (
                                      Xy(e, r, a.h - t - a.startTime), i = (r = g(i)).next();
                                      !i.done;
                                      i = r.next()
                                    )
                                      i.value.Dh(t);
                              }
                            }
                      })(e, t),
                      e.g.hls.ignoreManifestProgramDateTimeForTypes.length > 0 && zy(e, t)));
              }
              function ab(e, t) {
                return (
                  !!e.g.hls.ignoreManifestProgramDateTime ||
                  e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)
                );
              }
              function ob(e, t, n, r, i, a, o, s, u, l, d, c, h, p, f, m, v, y, b) {
                var T, S, k, I, C, M, R, _, P, L, N, O, U, B, j, F, V, H, G, z, X, W, K, q, Y, $, J, Q, Z;
                return (
                  (y = void 0 === y || y),
                  (b = void 0 === b || b),
                  D(function (t) {
                    switch (t.g) {
                      case 1:
                        if (
                          ((T = r.segments || []),
                          (S = T.every(function (e) {
                            return !!Ay(e.ha, "EXT-X-GAP");
                          })),
                          !T.length || S)
                        )
                          throw new Ke(2, 4, 4053);
                        if (
                          ((function (e, t) {
                            var n = Ay(t.ha, "EXT-X-PLAYLIST-TYPE");
                            ((t = Ay(t.ha, "EXT-X-ENDLIST")),
                              (t = (n && "VOD" == n.value) || t),
                              (n = n && "EVENT" == n.value && !t),
                              (n = !t && !n),
                              kb(e, t ? Bb : n ? Fb : jb));
                          })(e, r),
                          Eb(e) && hb(e, r),
                          (k = Eb(e) ? e.C.get(o) : new Map()),
                          (I = yb(e, r, k, n, i, o)),
                          (C = I.segments),
                          (M = I.bandwidth),
                          (N = L = P = _ = R = null),
                          !(C.length > 0 && y))
                        ) {
                          t.A(2);
                          break;
                        }
                        return x(
                          t,
                          (function (e, t) {
                            var n, r, i, a, o, s, u, l, d, c, h, p, f, m, v, y;
                            return D(function (b) {
                              if (1 == b.g)
                                return (
                                  (n = nl(e.g.hls.mediaPlaylistFullMimeType)),
                                  t.length
                                    ? ((r = Tb(e, t)),
                                      (i = r.segment),
                                      (a = r.segmentIndex),
                                      (o = i.P()),
                                      (s = sl(o[0])) && (u = _b.get(s))
                                        ? b.return(nl(u))
                                        : x(b, Promise.all([Wy(e, i.ea, 0), Wy(e, i, a)]), 2))
                                    : b.return(n)
                                );
                              if (
                                ((l = b.h),
                                (d = l[1].mimeType),
                                (c = l[0].data),
                                (h = l[1].data),
                                (p = "mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" ")),
                                (f = ["audio/mp4", "video/mp4", "video/iso.segment"]),
                                !(m = i.ea || f.includes(d)) && Cs(Ne(h)))
                              ) {
                                var T = h,
                                  w = e.g.disableAudio,
                                  S = e.g.disableVideo,
                                  A = e.g.disableText,
                                  E = Ne(T),
                                  k = new As().parse(E),
                                  I = k.Yd();
                                E = k.Ng();
                                var C = [],
                                  M = !1,
                                  R = !1;
                                if (!w)
                                  switch (I.audio) {
                                    case "aac":
                                    case "aac-loas":
                                      k.ub().length && (C.push("mp4a.40.2"), (M = !0));
                                      break;
                                    case "mp3":
                                      k.ub().length && (C.push("mp4a.40.34"), (M = !0));
                                      break;
                                    case "ac3":
                                      k.ub().length && (C.push("ac-3"), (M = !0));
                                      break;
                                    case "ec3":
                                      k.ub().length && (C.push("ec-3"), (M = !0));
                                      break;
                                    case "opus":
                                      k.ub().length && (C.push("opus"), (M = !0));
                                  }
                                if (!S)
                                  switch (I.video) {
                                    case "avc":
                                      (E.codec ? C.push(E.codec) : C.push("avc1.42E01E"), (R = !0));
                                      break;
                                    case "hvc":
                                      (E.codec ? C.push(E.codec) : C.push("hvc1.1.6.L93.90"), (R = !0));
                                      break;
                                    case "av1":
                                      (C.push("av01.0.01M.08"), (R = !0));
                                  }
                                if (C.length) {
                                  if (((w = M && !R), (S = new Map()), R && !A)) {
                                    for (
                                      (A = new Rt("video/mp2t")).Af(T), R = (T = g(A.Zf())).next();
                                      !R.done;
                                      R = T.next()
                                    )
                                      ((R = R.value), S.set(R, R));
                                    A.Pd();
                                  }
                                  E = {
                                    type: w ? "audio" : "video",
                                    mimeType: "video/mp2t",
                                    codecs: C.join(", "),
                                    language: null,
                                    height: E.height,
                                    width: E.width,
                                    channelCount: null,
                                    sampleRate: null,
                                    closedCaptions: S,
                                    ze: null,
                                    colorGamut: null,
                                    frameRate: E.frameRate,
                                    timescale: null,
                                  };
                                } else E = null;
                                if ((v = E)) return b.return(v);
                              } else if ((m || p.includes(s)) && (y = rl(c, h, e.g.disableText)))
                                return b.return(y);
                              return d ? b.return(nl(d)) : b.return(n);
                            });
                          })(e, C),
                          3,
                        );
                      case 3:
                        ((O = t.h),
                          o != O.type && Eb(e) && (e.C.set(O.type, e.C.get(o)), e.C.set(o, new Map())),
                          (o = O.type),
                          (s = O.language),
                          (d = O.channelCount),
                          (f = O.sampleRate),
                          e.g.disableText || (c = O.closedCaptions),
                          (_ = O.height),
                          (R = O.width),
                          (P = O.ze),
                          (L = O.colorGamut),
                          (N = O.frameRate),
                          b && ((v = O.mimeType), (a = O.codecs)));
                      case 2:
                        if (v) {
                          t.A(4);
                          break;
                        }
                        return x(
                          t,
                          (function (e, t, n, r) {
                            var i, a, o, s, u, l, d, c, h, p, f, g, m;
                            return D(function (v) {
                              switch (v.g) {
                                case 1:
                                  return (
                                    (i = qi),
                                    (a = Tb(e, r)),
                                    2 == (o = a.segment).status
                                      ? v.return(xb(t))
                                      : ((u = o.P()),
                                        (l = sl(u[0])) && ((d = Ob.get(t)), (c = d.get(l)) || (c = _b.get(l)))
                                          ? v.return(c)
                                          : (s = bb(t, n))
                                            ? v.return(s)
                                            : ((p = 1),
                                              (f = Gi(u, e.g.retryParameters)),
                                              w(v, 2),
                                              (f.method = "HEAD"),
                                              x(v, Ib(e, f, i, { type: p }).promise, 4)))
                                  );
                                case 4:
                                  ((g = v.h), (h = g.headers["content-type"]), A(v, 3));
                                  break;
                                case 2:
                                  if (!(m = E(v)) || (1002 != m.code && 1001 != m.code)) {
                                    v.A(3);
                                    break;
                                  }
                                  return (
                                    (f.method = "GET"),
                                    e.g.hls.allowRangeRequestsToGuessMimeType &&
                                      (f.headers.Range = "bytes=0-0"),
                                    x(v, Ib(e, f, i, { type: p }).promise, 6)
                                  );
                                case 6:
                                  ((g = v.h), (h = g.headers["content-type"]));
                                case 3:
                                  if (!h) {
                                    v.A(7);
                                    break;
                                  }
                                  if ("application/octet-stream" != (s = h.toLowerCase().split(";")[0])) {
                                    v.A(8);
                                    break;
                                  }
                                  if (g.data.byteLength) {
                                    v.A(9);
                                    break;
                                  }
                                  return ((f.method = "GET"), x(v, Ib(e, f, i, { type: p }).promise, 10));
                                case 10:
                                  g = v.h;
                                case 9:
                                  Cs(Ne(g.data)) && (s = "video/mp2t");
                                case 8:
                                  if ("application/octet-stream" != s) return v.return(s);
                                case 7:
                                  return v.return(xb(t));
                              }
                            });
                          })(e, o, a, C),
                          5,
                        );
                      case 5:
                        ((v = t.h),
                          o != gt || a || "application/mp4" != v || !C[0] || C[0].ea || (v = "text/vtt"));
                      case 4:
                        return x(t, lb(e, r, v, i, n), 6);
                      case 6:
                        if (
                          ((U = t.h),
                          (B = U.drmInfos),
                          (j = U.keyIds),
                          (F = U.encrypted),
                          (V = U.Qh),
                          F && !B.length && !V)
                        )
                          throw new Ke(2, 4, 4026);
                        return (
                          ((H = ub(e, a, o, s, u, l, d, c, h, p, f, m)).encrypted = F && !V),
                          (H.drmInfos = B),
                          (H.keyIds = j),
                          (H.mimeType = v),
                          M && (H.bandwidth = M),
                          Yy(H),
                          "video" == o && (R || _ || P || L) && wb(H, R, _, N, P, null, L),
                          Eb(e) && hb(e, r),
                          (G = C[0].startTime),
                          (z = C[C.length - 1]),
                          (X = z.endTime),
                          (W = new _u(C)),
                          (H.segmentIndex = W),
                          (q = !!(K = Ay(r.ha, "EXT-X-SERVER-CONTROL")) && null != vy(K, "CAN-SKIP-UNTIL")),
                          (Y = !!K && null != vy(K, "CAN-BLOCK-RELOAD")),
                          ($ = Ey(r.ha, "EXT-X-MEDIA-SEQUENCE", 0)),
                          (J = sb($, C)),
                          (Q = J.Qb),
                          (Z = J.Rb),
                          t.return({
                            stream: H,
                            type: o,
                            Df: [],
                            P: i,
                            Wc: G,
                            Mc: X,
                            Ve: q,
                            Ue: Y,
                            be: !1,
                            sg: -1,
                            Qb: Q,
                            Rb: Z,
                            rf: k,
                          })
                        );
                    }
                  })
                );
              }
              function sb(e, t) {
                e = e + t.length - 1;
                var n = -1;
                if (!t.length) return { Qb: ++e, Rb: n };
                var r = (t = t[t.length - 1]).g;
                return t.g.length
                  ? ((n = r.length - 1), r[r.length - 1].isPreload() || (e++, (n = 0)), { Qb: e, Rb: n })
                  : (e++, t.o && (n = 0), { Qb: e, Rb: n });
              }
              function ub(e, t, n, r, i, a, o, s, u, l, d, c) {
                var h = bb(n, t) || xb(n),
                  p = [];
                if (u) for (var f = (u = g(u.split(","))).next(); !f.done; f = u.next()) p.push(f.value);
                return (
                  (f = void 0),
                  (u = null),
                  n == gt
                    ? (f =
                        p.includes("public.accessibility.transcribes-spoken-dialog") &&
                        p.includes("public.accessibility.describes-music-and-sound")
                          ? "caption"
                          : "subtitle")
                    : p.includes("public.accessibility.describes-video") && (u = "visually impaired"),
                  p.length || "subtitle" !== f || p.push("subtitle"),
                  (f = null),
                  "video" != n && (f = a),
                  Yy(
                    (e = {
                      id: e.G++,
                      originalId: a,
                      groupId: null,
                      createSegmentIndex: function () {
                        return Promise.resolve();
                      },
                      segmentIndex: null,
                      mimeType: h,
                      codecs: t,
                      kind: n == gt ? "subtitle" : void 0,
                      encrypted: !1,
                      drmInfos: [],
                      keyIds: new Set(),
                      language: Br(r || "und"),
                      originalLanguage: r,
                      label: f,
                      type: n,
                      primary: i,
                      trickModeVideo: null,
                      dependencyStream: null,
                      emsgSchemeIdUris: null,
                      frameRate: void 0,
                      pixelAspectRatio: void 0,
                      width: void 0,
                      height: void 0,
                      bandwidth: void 0,
                      roles: p,
                      forced: l,
                      channelsCount: o,
                      audioSamplingRate: d,
                      spatialAudio: c,
                      closedCaptions: s,
                      hdr: void 0,
                      colorGamut: void 0,
                      videoLayout: void 0,
                      tilesLayout: void 0,
                      accessibilityPurpose: u,
                      external: !1,
                      fastSwitching: !1,
                      fullMimeTypes: new Set(),
                      isAudioMuxedInVideo: !1,
                      baseOriginalId: null,
                    }),
                  ),
                  e
                );
              }
              function lb(e, t, n, r, i) {
                var a, o, s, u, l, d, c, h, p, f, m, v, y, b, T, w, S, A, E, k, I, C, M, R, _, P, L, N, O;
                return D(function (D) {
                  switch (D.g) {
                    case 1:
                      if (((a = new Map()), !e.g.ignoreDrmInfo && t.segments))
                        for (o = g(t.segments), s = o.next(); !s.done; s = o.next())
                          if (((u = s.value), (l = wy(u.ha, "EXT-X-KEY")), (d = null), l.length))
                            for (d = fb(e, t, u.ha, r, i), c = g(l), h = c.next(); !h.done; h = c.next())
                              ((p = h.value), a.set(p, d));
                      ((m = f = !1), (v = []), (y = new Set()), (b = g(a)), (T = b.next()));
                    case 2:
                      if (T.done) {
                        D.A(4);
                        break;
                      }
                      if (
                        ((w = T.value),
                        (S = g(w)),
                        (A = S.next().value),
                        (E = S.next().value),
                        (I = E),
                        "NONE" == (C = by((k = A), "METHOD")))
                      ) {
                        D.A(3);
                        break;
                      }
                      if (((f = !0), (M = yy(k, "KEYFORMAT") || "identity"), (R = null), Cb(C))) {
                        ((m = !0), D.A(3));
                        break;
                      }
                      if ("identity" == M) return x(D, Mb(e, k, n, r, I, i), 11);
                      if (!(_ = e.dc.get(M))) {
                        ((P = null), D.A(9));
                        break;
                      }
                      return x(D, _(k, n, I), 10);
                    case 10:
                      P = D.h;
                    case 9:
                      ((R = P), D.A(6));
                      break;
                    case 11:
                      R = D.h;
                    case 6:
                      if (R) {
                        if (R.keyIds)
                          for (L = g(R.keyIds), N = L.next(); !N.done; N = L.next())
                            ((O = N.value), y.add(O));
                        v.push(R);
                      }
                    case 3:
                      ((T = b.next()), D.A(2));
                      break;
                    case 4:
                      return D.return({ drmInfos: v, keyIds: y, encrypted: f, Qh: m });
                  }
                });
              }
              function db(t, n, r, i, a) {
                if (!e.crypto || !e.crypto.subtle)
                  throw (
                    K(
                      "Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)",
                    ),
                    new Ke(2, 4, 4042)
                  );
                var o = 0,
                  s = yy(n, "IV", "");
                if (s) {
                  var u = ot(s.substr(2));
                  if (16 != u.byteLength) throw new Ke(2, 4, 4048);
                } else o = Ey(r.ha, "EXT-X-MEDIA-SEQUENCE", 0);
                var l = ky(i(), by(n, "URI"), a),
                  d = l.sort().join("");
                if (((r = n.toString() + "-" + o + "-" + d), !t.va.has(r))) {
                  var c = { bitsKey: 128, blockCipherMode: "CBC", iv: u, firstMediaSequenceNumber: o };
                  switch (by(n, "METHOD")) {
                    case "AES-256":
                      c.bitsKey = 256;
                      break;
                    case "AES-256-CTR":
                      ((c.bitsKey = 256), (c.blockCipherMode = "CTR"));
                  }
                  ((c.fetchKey = function () {
                    var n, r, i, a;
                    return D(function (o) {
                      if (1 == o.g)
                        return (
                          t.O.has(d) ||
                            ((n = Gi(l, t.g.retryParameters)), (r = Ib(t, n, 6).promise), t.O.set(d, r)),
                          x(o, t.O.get(d), 2)
                        );
                      if (3 != o.g) {
                        if (!(i = o.h).data || i.data.byteLength != c.bitsKey / 8) throw new Ke(2, 4, 4049);
                        return (
                          (a = {
                            name: "CTR" == c.blockCipherMode ? "AES-CTR" : "AES-CBC",
                            length: c.bitsKey,
                          }),
                          x(o, e.crypto.subtle.importKey("raw", i.data, a, !0, ["decrypt"]), 3)
                        );
                      }
                      ((c.cryptoKey = o.h), (c.fetchKey = void 0), T(o));
                    });
                  }),
                    t.va.set(r, c));
                }
                return t.va.get(r);
              }
              function cb(e, t) {
                null == e.u && (t = Ay(t.ha, "EXT-X-START")) && (e.u = Number(by(t, "TIME-OFFSET")));
              }
              function hb(e, t) {
                var n = 1 / 0,
                  r = t.segments;
                if (r.length)
                  for (var i = r.length - 1; i >= 0; ) {
                    var a = Ay(r[i].ha, "EXTINF");
                    if (a) {
                      n = Number(a.value.split(",")[0]);
                      break;
                    }
                    i--;
                  }
                if (!(r = Ay(t.ha, "EXT-X-TARGETDURATION"))) throw new Ke(2, 4, 4024, "EXT-X-TARGETDURATION");
                ((r = Number(r.value)),
                  (i = Ay(t.ha, "EXT-X-PART-INF")) && (e.T = Number(by(i, "PART-TARGET"))),
                  (t = Ay(t.ha, "EXT-X-SERVER-CONTROL")),
                  e.oa && e.T
                    ? ((e.o = e.yc
                        ? 5 * e.T <= n
                          ? Math.min(e.T, e.o)
                          : Math.min(n, e.o)
                        : Math.min(e.T, e.o)),
                      (e.Ua = t ? Number(by(t, "PART-HOLD-BACK")) : 0))
                    : ((e.o = Math.min(n, e.o)),
                      (n = t ? vy(t, "HOLD-BACK") : null),
                      (e.Ta = n ? Number(n.value) : 0)),
                  (e.eb = Math.max(r, e.eb)));
              }
              function pb(e, t) {
                var n = 0;
                if (e.g.defaultPresentationDelay) n = e.g.defaultPresentationDelay;
                else if (e.Ua) n = e.Ua;
                else if (e.Ta) n = e.Ta;
                else
                  for (
                    var r = t.segments.length, i = r - Math.min(r, e.g.hls.liveSegmentsDelay);
                    i < r;
                    i++
                  ) {
                    var a = Ay(t.segments[i].ha, "EXTINF");
                    n = a ? n + Number(a.value.split(",")[0]) : n + e.eb;
                  }
                (e.u && e.u < 0 && ((n = Math.min(-e.u, n)), (e.u += n)), e.l.Wi(0), e.l.rh(n), e.l.cd(!1));
              }
              function fb(e, t, n, r, i) {
                var a = Ay(n, "EXT-X-MAP");
                if (!a) return null;
                var o = by(a, "URI"),
                  s = ky(r(), o, i);
                if (((o = [s.toString(), yy(a, "BYTERANGE", "")].join("-")), !e.Da.has(o))) {
                  for (var u = void 0, l = null, d = !1, c = (n = g(n)).next(); !c.done; c = n.next())
                    "EXT-X-KEY" == (c = c.value).name
                      ? Cb((d = by(c, "METHOD"))) && c.id < a.id
                        ? ((d = !1), (u = db(e, c, t, r, i)))
                        : (d = "NONE" != d)
                      : "EXT-X-BYTERANGE" == c.name && c.id < a.id && (l = c);
                  ((t = (function (e, t, n, r, i) {
                    var a = 0,
                      o = null;
                    return (
                      !(t = yy(t, "BYTERANGE")) && n && (t = n.value),
                      t &&
                        ((a = t.split("@")),
                        (o = Number(a[0])),
                        (a = Number(a[1])),
                        (o = a + o - 1),
                        r && (n = o + 1 - a) % 16 && (o += 16 - (n % 16))),
                      new Bo(
                        function () {
                          return e;
                        },
                        a,
                        o,
                        null,
                        null,
                        null,
                        r,
                        i,
                      )
                    );
                  })(s, a, l, u, d)),
                    e.Da.set(o, t));
                }
                return e.Da.get(o);
              }
              function gb(t, n, r, i, a, o, s, u, l, d) {
                var c = i.ha,
                  h = Ay(c, "EXTINF"),
                  p = 0,
                  f = 0,
                  m = null;
                i.wc.length && (t.m.isLowLatency = !0);
                var v = null;
                if (!t.g.hls.ignoreManifestProgramDateTime) {
                  var y = Ay(c, "EXT-X-PROGRAM-DATE-TIME");
                  y && y.value && ((v = cn(y.value)), (t.kb = !0));
                }
                var b = Go;
                if ((Ay(c, "EXT-X-GAP") && (t.m.gapCount++, (b = 2)), !h)) {
                  if (0 == i.wc.length) throw new Ke(2, 4, 4024, "EXTINF");
                  if (!t.oa) return null;
                }
                var x = [];
                y = !1;
                var T = null,
                  w = !1,
                  S = !1;
                if (t.oa && i.wc.length) {
                  p = n && e.ReadableStream && t.g.hls.allowLowLatencyByteRangeOptimization;
                  for (var A = v, E = {}, k = 0; k < i.wc.length; E = { Uf: void 0, pe: void 0 }, k++) {
                    var I = i.wc[k],
                      C = 0 == k ? r : x[x.length - 1],
                      M = 0 == k ? a : C.endTime,
                      R = Number(yy(I, "DURATION")) || t.T;
                    if (R) {
                      var _ = M + R,
                        D = 0,
                        P = null;
                      if (
                        ("EXT-X-PRELOAD-HINT" == I.name
                          ? ((D = (D = yy(I, "BYTERANGE-START")) ? Number(D) : 0),
                            (C = yy(I, "BYTERANGE-LENGTH"))
                              ? (P = D + Number(C) - 1)
                              : D && (P = Number.MAX_SAFE_INTEGER))
                          : ((D = (P = g(mb(C, (D = yy(I, "BYTERANGE"))))).next().value),
                            (P = P.next().value)),
                        (E.pe = yy(I, "URI")),
                        E.pe)
                      ) {
                        ((C = Go),
                          "YES" == yy(I, "GAP") && (t.m.gapCount++, (C = 2), (w = !0)),
                          (E.Uf = null));
                        var L = (function (e) {
                          return function () {
                            return (null == e.Uf && (e.Uf = ky(u(), e.pe, o)), e.Uf);
                          };
                        })(E);
                        (p && D >= 0 && null != P && ((T = L), (y = !0)),
                          (M = new Fo(M, _, L, D, P, n, 0, 0, 1 / 0, [], "", null, A, C, d)),
                          "EXT-X-PRELOAD-HINT" == I.name && (M.Ug(), (S = !0)),
                          "YES" != yy(I, "INDEPENDENT") && k > 0 && M.wd(),
                          (I = l) ||
                            (x.length && x[0].mimeType
                              ? (I = x[0].mimeType)
                              : E.pe && ((E = sl(E.pe)), (I = Ob.get(s).get(E) || null))),
                          I && ((M.mimeType = I), Ub.has(I) && (M.ea = null)),
                          x.push(M),
                          A && (A += R));
                      }
                    }
                  }
                }
                if (h) {
                  if (0 == (h = Number(h.value.split(",")[0]))) return null;
                  p = a + h;
                } else {
                  if (!x.length) return null;
                  p = x[x.length - 1].endTime;
                }
                (y && (w || 0 != x[0].startByte ? ((y = !1), (T = null)) : (x = [])),
                  (h = Ay(c, "EXT-X-BYTERANGE"))
                    ? ((f = (m = g(mb(r, h.value))).next().value), (m = m.next().value))
                    : x.length && ((f = x[0].startByte), (m = x[x.length - 1].endByte)),
                  (r = ""),
                  (h = null),
                  "image" == s &&
                    ((r = "1x1"), (s = Ay(c, "EXT-X-TILES"))) &&
                    ((r = by(s, "LAYOUT")), (s = yy(s, "DURATION")) && (h = Number(s))));
                var N = null;
                return (
                  (n = new Fo(
                    a,
                    p,
                    function () {
                      return T ? T() : (null == N && (N = ky(u(), i.g, o)), N || []);
                    },
                    f,
                    m,
                    n,
                    0,
                    0,
                    1 / 0,
                    x,
                    r,
                    h,
                    v,
                    b,
                    d,
                    x.length > 0 && !!i.g,
                  )),
                  l && ((n.mimeType = l), Ub.has(l) && (n.ea = null)),
                  y && ((t.yc = !0), n.xi(), S && n.Ug()),
                  n
                );
              }
              function mb(e, t) {
                var n = 0,
                  r = null;
                return (
                  t &&
                    ((n = t.split("@")),
                    (t = Number(n[0])),
                    (r = (n = n[1] ? Number(n[1]) : e.endByte + 1) + t - 1)),
                  [n, r]
                );
              }
              function vb(e, t, n, r, i) {
                if ("video" == n || "audio" == n) {
                  var a = e.l.m;
                  if (a && !ab(e, n))
                    for (
                      t = (t = wy(t, "EXT-X-DATERANGE"))
                        .filter(function (e) {
                          return null != vy(e, "START-DATE");
                        })
                        .sort(function (e, t) {
                          return (e = by(e, "START-DATE")) < (t = by(t, "START-DATE")) ? -1 : e > t ? 1 : 0;
                        }),
                        n = 0;
                      n < t.length;
                      n++
                    ) {
                      var o = t[n];
                      try {
                        var s = cn(by(o, "START-DATE"));
                        if (!isNaN(s)) {
                          var u = Math.max(0, s - a),
                            l = null,
                            d = yy(o, "END-DATE");
                          if (d) {
                            var c = cn(d);
                            if (!isNaN(c) && (l = c - a) < 0) continue;
                          }
                          if (null == l) {
                            var h = yy(o, "DURATION") || yy(o, "PLANNED-DURATION");
                            if (h) {
                              var p = parseFloat(h);
                              if ((isNaN(p) || (l = u + p), s - a + p < 0)) continue;
                            }
                          }
                          var f = yy(o, "CLASS") || "com.apple.quicktime.HLS",
                            m = "YES" == yy(o, "END-ON-NEXT");
                          if (null == l && m) {
                            for (var v = n + 1; v < t.length; v++)
                              if (f == (yy(t[v], "CLASS") || "com.apple.quicktime.HLS")) {
                                var y = cn(by(t[v], "START-DATE"));
                                if (!isNaN(y) && y && y > s) {
                                  l = Math.max(0, y - a);
                                  break;
                                }
                              }
                            if (null == l) continue;
                          }
                          v = ["CLASS", "START-DATE", "END-DATE", "DURATION", "END-ON-NEXT"];
                          for (var b = [], x = g(o.attributes), T = x.next(); !T.done; T = x.next()) {
                            var w = T.value;
                            if (!v.includes(w.name)) {
                              var S = Cy(w.value, r);
                              (("X-ASSET-URI" != w.name && "X-ASSET-LIST" != w.name) ||
                                (S = ky(i(), w.value, r)[0]),
                                b.push({
                                  key: w.name,
                                  description: "",
                                  data: S,
                                  mimeType: null,
                                  pictureType: null,
                                }));
                            }
                          }
                          b.length > 1 && e.h.onMetadata(f, u, l, b);
                        }
                      } catch (A) {}
                    }
                }
              }
              function yb(e, t, n, r, i, a) {
                function o(e) {
                  if (!(e = sl(e))) return null;
                  var t = Ob.get(a).get(e);
                  return (t || (t = _b.get(e)), t);
                }
                var s = t.segments,
                  u = null,
                  l = null,
                  d = null,
                  c = null,
                  h = void 0,
                  p = Ey(t.ha, "EXT-X-DISCONTINUITY-SEQUENCE", -1),
                  f = Ey(t.ha, "EXT-X-MEDIA-SEQUENCE", 0),
                  m = Ay(t.ha, "EXT-X-SKIP"),
                  v = m ? Number(yy(m, "SKIPPED-SEGMENTS")) : 0,
                  y = f + v,
                  b = 0;
                (Eb(e) && n.has(y) && (b = n.get(y)),
                  0 === b && e.Fa == Fb && n.size > 0 && !n.has(y) && null != e.l.i && (b = e.l.Hb()));
                var x = [],
                  T = null;
                m = [];
                for (var w = 0; w < s.length; w++) {
                  var S = s[w];
                  (y = Ay(S.ha, "EXT-X-MAP")) && y.id !== l && ((u = fb(e, t, S.ha, i, r)), (l = y.id));
                  var A = "";
                  ((y = S.g) && (A = sl(y)),
                    A !== c && ((d = o(y)), (c = A)),
                    (A = 0 == w ? b : T.endTime),
                    (y = f + v + w),
                    Ay(S.ha, "EXT-X-DISCONTINUITY") && (p++, T && T.ea && (T.ea.g = A)));
                  for (var E = g(S.ha), k = E.next(); !k.done; k = E.next())
                    "EXT-X-KEY" == (k = k.value).name &&
                      (h = Cb(by(k, "METHOD")) ? db(e, k, t, i, r) : void 0);
                  if ((n.set(y, A), (A = gb(e, u, T, S, A, r, a, i, d, h)))) {
                    if (
                      ((T = Ey(S.ha, "EXT-X-BITRATE"))
                        ? (m.push({ bitrate: T, duration: A.endTime - A.startTime }), (A.bandwidth = T))
                        : A.endByte
                          ? (S = Vo(A)) &&
                            ((S = (8 * S) / (T = A.endTime - A.startTime) / 1e3),
                            m.push({ bitrate: S, duration: T }),
                            (A.bandwidth = S))
                          : m.length &&
                            (((T = m.pop()).duration += A.endTime - A.startTime),
                            m.push(T),
                            (A.bandwidth = T.bitrate)),
                      A.bandwidth)
                    )
                      for (S = (T = g(A.g)).next(); !S.done; S = T.next()) S.value.bandwidth = A.bandwidth;
                    ((T = A), (A.i = p), (ab(e, a) && null != e.N && y < e.N) || x.push(A));
                  }
                }
                if (
                  ((t = void 0),
                  m.length &&
                    ((t = m.reduce(function (e, t) {
                      return e + t.duration;
                    }, 0)),
                    (t = Math.round(
                      (m.reduce(function (e, t) {
                        return e + t.bitrate * t.duration;
                      }, 0) /
                        t) *
                        1e3,
                    ))),
                  (m = x.some(function (e) {
                    return null != e.h;
                  })))
                )
                  for (
                    n = {}, r = 0;
                    r < x.length;
                    n = { Ze: void 0, Ye: void 0, Re: void 0, Zc: void 0, Qe: void 0 }, r++
                  )
                    if (((n.Zc = x[r]), null == n.Zc.h))
                      for (
                        n.Ye = 0,
                          n.Ze = r,
                          i = (function (e) {
                            return function () {
                              var t = x[e.Ze];
                              if (t) {
                                if (null != t.h) return t.h + e.Ye;
                                ((e.Ye -= t.endTime - t.startTime), (e.Ze += 1));
                              }
                              return null;
                            };
                          })(n),
                          n.Qe = 0,
                          n.Re = r,
                          s = (function (e) {
                            return function () {
                              var t = x[e.Re];
                              if (t) {
                                if ((t != e.Zc && (e.Qe += t.endTime - t.startTime), null != t.h))
                                  return t.h + e.Qe;
                                --e.Re;
                              }
                              return null;
                            };
                          })(n);
                        null == n.Zc.h;
                      )
                        ((n.Zc.h = s()), null == n.Zc.h && (n.Zc.h = i()));
                if (m)
                  for (r = (n = g(x)).next(); !r.done; r = n.next())
                    for (r = (i = r.value).h, s = (i = g(i.g)).next(); !s.done; s = i.next())
                      (((s = s.value).h = r), (r += s.endTime - s.startTime));
                if (((n = e.ma), m && n != 1 / 0 && !ab(e, a)))
                  for (m = (e = g(x)).next(); !m.done; m = e.next()) m.value.Dh(n);
                return { segments: x, bandwidth: t };
              }
              function bb(e, t) {
                if (e == gt) {
                  if ("vtt" == t || "wvtt" == t) return "text/vtt";
                  if (t && "" !== t) return "application/mp4";
                }
                return "image" != e || (t && "jpeg" != t)
                  ? "audio" == e && "mp4a.40.34" == t
                    ? "audio/mpeg"
                    : "mjpg" == t
                      ? "application/mp4"
                      : null
                  : "image/jpeg";
              }
              function xb(e) {
                return e == gt ? "text/vtt" : Ob.get(e).get("mp4");
              }
              function Tb(e, t) {
                for (
                  var n = t[(e = Eb(e) ? Math.trunc((t.length - 1) / 2) : 0)];
                  2 == n.Kc() && e + 1 < t.length;
                )
                  n = t[++e];
                return { segment: n, segmentIndex: e };
              }
              function wb(e, t, n, r, i, a, o) {
                e &&
                  ((e.width = Number(t) || void 0),
                  (e.height = Number(n) || void 0),
                  (e.frameRate = Number(r) || void 0),
                  (e.hdr = i || void 0),
                  (e.videoLayout = a || void 0),
                  (e.colorGamut = o || void 0));
              }
              function Sb(e, t, n) {
                return Ib(e, Gi(t, e.g.retryParameters), 0, { type: n ? 2 : 3 });
              }
              function Ab(e) {
                var t, n, r, i, a, o;
                return D(function (s) {
                  switch (s.g) {
                    case 1:
                      return e.h ? (w(s, 2), (t = Date.now()), x(s, e.update(), 4)) : s.return();
                    case 4:
                      ((n = Date.now()),
                        Eb(e) &&
                          ((r = (n - t) / 1e3),
                          e.ac.sample(1, r),
                          (i = e.g.updatePeriod > 0 ? e.g.updatePeriod : e.o),
                          (a = Math.max(0, i - G(e.ac))),
                          e.F.ka(a)),
                        A(s, 3));
                      break;
                    case 2:
                      if (((o = E(s)), !e.h)) return s.return();
                      if (e.g.raiseFatalErrorOnManifestUpdateRequestFailure)
                        return (e.h.onError(o), s.return());
                      ((o.severity = 1), e.h.onError(o), e.F.ka(0.1));
                    case 3:
                      if (!e.h) return s.return();
                      (e.h.onManifestUpdated(), T(s));
                  }
                });
              }
              function Eb(e) {
                return e.Fa != Bb;
              }
              function kb(e, t) {
                ((e.Fa = t), e.l && e.l.cd(!Eb(e)), Eb(e) || e.F.stop());
              }
              function Ib(e, t, n, r) {
                if (!e.$) throw new Ke(2, 7, 7001);
                return (
                  r || (r = {}),
                  (r.isPreload = e.cc()),
                  (t = e.h.networkingEngine.request(n, t, r)),
                  ji(e.$, t),
                  t
                );
              }
              function Cb(e) {
                return "AES-128" == e || "AES-256" == e || "AES-256-CTR" == e;
              }
              function Mb(t, n, r, i, a, o) {
                var s, u, l, d, c, h, p, f, g, m, v;
                return D(function (y) {
                  switch (y.g) {
                    case 1:
                      if ("video/mp2t" == r) throw new Ke(2, 4, 4040);
                      if ("apple" === e.shakaMediaKeysPolyfill) throw new Ke(2, 4, 4041);
                      if (((s = by(n, "METHOD")), !["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(s)))
                        return y.return(null);
                      if ((u = ky(i(), by(n, "URI"), o))[0].startsWith("data:text/plain;base64,")) {
                        ((l = st(at(u[0].split("data:text/plain;base64,").pop()))), y.A(2));
                        break;
                      }
                      return (
                        (d = u.sort().join("")),
                        t.ya.has(d) ||
                          ((c = Gi(u, t.g.retryParameters)), (h = Ib(t, c, 6).promise), t.ya.set(d, h)),
                        x(y, t.ya.get(d), 3)
                      );
                    case 3:
                      ((p = y.h), (l = st(p.data)));
                    case 2:
                      if (((f = "00000000000000000000000000000000"), !a)) {
                        y.A(4);
                        break;
                      }
                      return x(y, Rb(t, a), 5);
                    case 5:
                      (g = y.h) && (f = g);
                    case 4:
                      return (
                        (m = new Map()).set(f, l),
                        (v = "cenc"),
                        "SAMPLE-AES" == s && (v = "cbcs"),
                        y.return(ct(m, v))
                      );
                  }
                });
              }
              function Rb(e, t) {
                var n, r, i;
                return D(function (a) {
                  return 1 == a.g
                    ? ((n = null),
                      e.za.has(t)
                        ? ((n = e.za.get(t)), a.A(2))
                        : ((r = ul(t.P(), t.Jc(), t.Hc(), e.g.retryParameters)),
                          x(a, Ib(e, r, qi, { type: 0 }).promise, 3)))
                    : (2 != a.g &&
                        ((i = a.h),
                        t.ue(i.data),
                        (n = (function (e) {
                          var t = null;
                          return (
                            new aa()
                              .box("moov", oa)
                              .box("trak", oa)
                              .box("mdia", oa)
                              .box("minf", oa)
                              .box("stbl", oa)
                              .S("stsd", sa)
                              .box("encv", ua)
                              .box("enca", la)
                              .box("sinf", oa)
                              .box("schi", oa)
                              .S("tenc", function (e) {
                                ((e = e.reader).Y(), e.Y(), e.Y(), e.Y(), (e = e.Tb(16, !1)), (t = st(e)));
                              })
                              .parse(e, !0),
                            t
                          );
                        })(i.data)),
                        e.za.set(t, n)),
                      a.return(n));
                });
              }
              (V("shaka.net.DataUriPlugin", By),
                (By.parse = jy),
                Vi("data", jy),
                ((i = Vy.prototype).configure = function (e, t) {
                  var n = this.h && e.updatePeriod != this.g.updatePeriod && e.updatePeriod >= 0;
                  ((this.g = e),
                    t && (this.cc = t),
                    this.j && this.j.configure(this.g),
                    n && this.m && this.m.presentationTimeline.W() && this.F.Jb());
                }),
                (i.start = function (e, t) {
                  var n,
                    r = this;
                  return D(function (i) {
                    return 1 == i.g
                      ? ((r.h = t), (r.oa = t.isLowLatencyMode()), x(i, Sb(r, [e]).promise, 2))
                      : 3 != i.g
                        ? ((n = i.h),
                          (r.H = n.uri),
                          x(
                            i,
                            (function (e, t) {
                              var n,
                                r,
                                i,
                                a,
                                o,
                                s,
                                u,
                                l,
                                d,
                                c,
                                h,
                                p,
                                f,
                                v,
                                y,
                                b,
                                S,
                                A,
                                k,
                                I,
                                C,
                                M,
                                R,
                                _,
                                P,
                                L,
                                N,
                                O,
                                U,
                                B,
                                j,
                                F,
                                V,
                                H,
                                G,
                                z,
                                X,
                                W,
                                K,
                                q,
                                Y,
                                $,
                                J;
                              return D(function (Z) {
                                switch (Z.g) {
                                  case 1:
                                    return (
                                      (n = mt),
                                      (r = Ry(e.ab, t)),
                                      (i = wy(r.ha, "EXT-X-DEFINE")),
                                      (a = []),
                                      (o = []),
                                      (s = []),
                                      (e.l = new uu(null, 0)),
                                      e.l.cd(!0),
                                      (u = function () {
                                        return [e.H];
                                      }),
                                      (l = null),
                                      (d = new Map()),
                                      1 == r.type
                                        ? ((e.R = !1),
                                          (F = wy(r.ha, "EXT-X-DEFINE")),
                                          (d = qy(e, F, e.H)),
                                          (l = n.wa),
                                          (V = ""),
                                          (H = new Map()),
                                          x(
                                            Z,
                                            ob(
                                              e,
                                              e.G++,
                                              d,
                                              r,
                                              u,
                                              "",
                                              l,
                                              V,
                                              !0,
                                              "Media Playlist",
                                              null,
                                              H,
                                              null,
                                              !1,
                                              null,
                                              !1,
                                            ),
                                            7,
                                          ))
                                        : ((function (e, t) {
                                            for (
                                              var n = new me(e.H).g, r = (t = g(t)).next();
                                              !r.done;
                                              r = t.next()
                                            ) {
                                              var i = r.value;
                                              r = yy(i, "NAME");
                                              var a = yy(i, "VALUE");
                                              ((i = yy(i, "QUERYPARAM")),
                                                r && a && (e.B.has(r) || e.B.set(r, a)),
                                                i && (r = n.get(i)[0]) && !e.B.has(r) && e.B.set(i, r));
                                            }
                                          })(e, i),
                                          (c = wy(r.ha, "EXT-X-MEDIA")),
                                          (h = wy(r.ha, "EXT-X-STREAM-INF")),
                                          (p = wy(r.ha, "EXT-X-IMAGE-STREAM-INF")),
                                          (f = wy(r.ha, "EXT-X-I-FRAME-STREAM-INF")),
                                          (v = wy(r.ha, "EXT-X-SESSION-KEY")),
                                          (y = wy(r.ha, "EXT-X-SESSION-DATA")),
                                          (b = wy(r.ha, "EXT-X-CONTENT-STEERING")),
                                          (function (e, t) {
                                            for (var n = (t = g(t)).next(); !n.done; n = t.next()) {
                                              var r = n.value,
                                                i = yy(r, "DATA-ID");
                                              n = yy(r, "URI");
                                              var a = yy(r, "LANGUAGE");
                                              ((r = yy(r, "VALUE")),
                                                (i = new Map().set("id", i)),
                                                n && i.set("uri", ky([e.H], n, e.B)[0]),
                                                a && i.set("language", a),
                                                r && i.set("value", r),
                                                (n = new Li("sessiondata", i)),
                                                e.h && e.h.onEvent(n));
                                            }
                                          })(e, y),
                                          x(
                                            Z,
                                            (function (e, t) {
                                              var n, r, i, a, o, s;
                                              return D(function (u) {
                                                if (!e.h || !e.g) return u.return();
                                                for (r = g(t), i = r.next(); !i.done; i = r.next())
                                                  if (
                                                    ((a = i.value),
                                                    (o = yy(a, "PATHWAY-ID")),
                                                    (s = yy(a, "SERVER-URI")),
                                                    o && s)
                                                  ) {
                                                    ((e.j = new Lm(e.h)),
                                                      e.j.configure(e.g),
                                                      (e.j.i = [e.H]),
                                                      e.j.setManifestType("HLS"),
                                                      (e.j.h = o),
                                                      (n = Nm(e.j, s)));
                                                    break;
                                                  }
                                                return x(u, n, 0);
                                              });
                                            })(e, b),
                                            4,
                                          ))
                                    );
                                  case 4:
                                    if (!e.g.ignoreSupplementalCodecs) {
                                      for (
                                        S = [], A = g(h), k = A.next(), I = {};
                                        !k.done;
                                        I = { dj: void 0 }, k = A.next()
                                      )
                                        ((C = k.value),
                                          (M = yy(C, "SUPPLEMENTAL-CODECS")) &&
                                            ((I.dj = M.split(/\s*,\s*/).map(function (e) {
                                              return e.split("/")[0];
                                            })),
                                            (R = C.attributes.map(
                                              (function (e) {
                                                return function (t) {
                                                  var n = t.name,
                                                    r = t.value;
                                                  return (
                                                    "CODECS" == n &&
                                                      ((r = e.dj.join(",")),
                                                      (t = t.value.split(",")).length > 1 &&
                                                        (t = pt("audio", t)) &&
                                                        (r += "," + t)),
                                                    new Ty(n, r)
                                                  );
                                                };
                                              })(I),
                                            )),
                                            S.push(new gy(C.id, C.name, R, null))));
                                      for (
                                        h.push.apply(h, m(S)), _ = [], P = g(f), L = P.next(), N = {};
                                        !L.done;
                                        N = { ej: void 0 }, L = P.next()
                                      )
                                        ((O = L.value),
                                          (U = yy(O, "SUPPLEMENTAL-CODECS")) &&
                                            ((N.ej = U.split(/\s*,\s*/).map(function (e) {
                                              return e.split("/")[0];
                                            })),
                                            (B = O.attributes.map(
                                              (function (e) {
                                                return function (t) {
                                                  var n = t.name;
                                                  return (
                                                    (t = t.value),
                                                    "CODECS" == n && (t = e.ej.join(",")),
                                                    new Ty(n, t)
                                                  );
                                                };
                                              })(N),
                                            )),
                                            _.push(new gy(O.id, O.name, B, null))));
                                      f.push.apply(f, m(_));
                                    }
                                    return (
                                      (function (e, t) {
                                        for (var n = (t = g(t)).next(); !n.done; n = t.next()) {
                                          var r = n.value,
                                            i = yy(r, "AUDIO");
                                          n = yy(r, "VIDEO");
                                          var a = yy(r, "SUBTITLES");
                                          if (((r = Jy(e, r)), a)) {
                                            var o = pt(gt, r);
                                            (e.K.set(a, o), Q(r, o));
                                          }
                                          (i &&
                                            ((a = pt("audio", r)) || (a = e.g.hls.defaultAudioCodec),
                                            e.K.set(i, a)),
                                            n &&
                                              ((i = pt("video", r)) || (i = e.g.hls.defaultVideoCodec),
                                              e.K.set(n, i)));
                                        }
                                      })(e, h),
                                      (function (e, t) {
                                        ((t = Sy(t, "CLOSED-CAPTIONS")), (e.R = 0 == t.length));
                                        for (var n = (t = g(t)).next(); !n.done; n = t.next()) {
                                          var r = n.value,
                                            i = yy(r, "LANGUAGE");
                                          ((n = Br(i || "und")),
                                            i || ((i = yy(r, "NAME")) && (n = i)),
                                            (i = by(r, "GROUP-ID")),
                                            (r = by(r, "INSTREAM-ID").replace("SERVICE", "svc")),
                                            e.J.get(i) || e.J.set(i, new Map()),
                                            e.J.get(i).set(r, n));
                                        }
                                      })(e, c),
                                      (j = (function (e, t) {
                                        return t
                                          .map(function (t) {
                                            return "video" !== (t = eb(e, t)).stream.type ? null : t.stream;
                                          })
                                          .filter(function (e) {
                                            return e;
                                          });
                                      })(e, f)),
                                      x(
                                        Z,
                                        (function (e, t, n, r, i, a, o) {
                                          var s,
                                            u,
                                            l,
                                            d,
                                            c,
                                            h,
                                            p,
                                            f,
                                            v,
                                            y,
                                            b,
                                            T,
                                            w,
                                            S,
                                            A,
                                            E,
                                            k,
                                            I,
                                            C,
                                            M,
                                            R,
                                            _,
                                            P,
                                            L,
                                            N,
                                            O,
                                            U,
                                            B,
                                            j,
                                            F,
                                            V,
                                            H,
                                            G,
                                            z,
                                            X,
                                            W;
                                          return D(function (D) {
                                            switch (D.g) {
                                              case 1:
                                                if (
                                                  ((s = []),
                                                  (u = new Set()),
                                                  e.g.ignoreDrmInfo || !(n.length > 0))
                                                ) {
                                                  D.A(2);
                                                  break;
                                                }
                                                ((l = g(n)), (d = l.next()));
                                              case 3:
                                                if (d.done) {
                                                  D.A(2);
                                                  break;
                                                }
                                                if (
                                                  ((c = d.value),
                                                  (h = by(c, "METHOD")),
                                                  (p = yy(c, "KEYFORMAT") || "identity"),
                                                  (f = null),
                                                  "NONE" == h)
                                                ) {
                                                  D.A(4);
                                                  break;
                                                }
                                                if (Cb(h)) {
                                                  ((v = ky(i(), by(c, "URI"), a)),
                                                    (y = v.sort().join("")),
                                                    e.O.has(y) ||
                                                      ((b = Gi(v, e.g.retryParameters)),
                                                      (T = Ib(e, b, 6).promise),
                                                      e.O.set(y, T)),
                                                    D.A(4));
                                                  break;
                                                }
                                                if ("identity" == p)
                                                  return x(D, Mb(e, c, "", i, null, a), 12);
                                                if (!(w = e.dc.get(p))) {
                                                  ((S = null), D.A(10));
                                                  break;
                                                }
                                                return x(D, w(c, "", null), 11);
                                              case 11:
                                                S = D.h;
                                              case 10:
                                                ((f = S), D.A(6));
                                                break;
                                              case 12:
                                                f = D.h;
                                              case 6:
                                                if (f) {
                                                  if (f.keyIds)
                                                    for (A = g(f.keyIds), E = A.next(); !E.done; E = A.next())
                                                      ((k = E.value), u.add(k));
                                                  s.push(f);
                                                }
                                              case 4:
                                                ((d = l.next()), D.A(3));
                                                break;
                                              case 2:
                                                for (I = {}, C = g(t), M = C.next(); !M.done; M = C.next())
                                                  ((R = M.value),
                                                    (_ = my(R, !e.j)),
                                                    I[_] ? I[_].push(R) : (I[_] = [R]));
                                                for (L in ((P = []), I))
                                                  ((N = I[L]),
                                                    (O = N[0]),
                                                    (U = yy(O, "FRAME-RATE")),
                                                    (B =
                                                      Number(by(O, "BANDWIDTH")) ||
                                                      Number(yy(O, "AVERAGE-BANDWIDTH"))),
                                                    (j = yy(O, "RESOLUTION")),
                                                    (F = g(j ? j.split("x") : [null, null])),
                                                    (V = F.next().value),
                                                    (H = F.next().value),
                                                    (G = yy(O, "VIDEO-RANGE")),
                                                    (z = yy(O, "REQ-VIDEO-LAYOUT")) &&
                                                      z.includes(",") &&
                                                      ((X = z.split(",").filter(function (e) {
                                                        return "CH-STEREO" == e || "CH-MONO" == e;
                                                      })),
                                                      (z = X[0])),
                                                    (z = z || "CH-MONO"),
                                                    (W = $y(e, N, r)),
                                                    P.push.apply(
                                                      P,
                                                      m(Qy(e, W.audio, W.video, B, V, H, U, G, z, s, u, o)),
                                                    ));
                                                return D.return(
                                                  P.filter(function (e) {
                                                    return null != e;
                                                  }),
                                                );
                                            }
                                          });
                                        })(e, h, v, c, u, e.B, j),
                                        5,
                                      )
                                    );
                                  case 5:
                                    return (
                                      (a = Z.h),
                                      (o = (function (e, t) {
                                        for (
                                          var n = Sy(t, "SUBTITLES"), r = {}, i = (t = g(n)).next();
                                          !i.done;
                                          i = t.next()
                                        ) {
                                          var a = my((i = i.value), !e.j);
                                          r[a] ? r[a].push(i) : (r[a] = [i]);
                                        }
                                        if (((t = []), !e.g.disableText))
                                          for (var o in r)
                                            try {
                                              t.push(Zy(e, r[o], new Map()).stream);
                                            } catch (s) {
                                              if (!e.g.hls.ignoreTextStreamFailures) throw s;
                                            }
                                        for (o = g(n), n = o.next(); !n.done; n = o.next())
                                          if (
                                            ((r = by(n.value, "GROUP-ID")),
                                            (n = e.K.get(r)) && (r = e.M.get(r)))
                                          )
                                            for (r = g(r), i = r.next(); !i.done; i = r.next())
                                              (((i = i.value).stream.codecs = n),
                                                (i.stream.mimeType = bb(gt, n) || xb(gt)),
                                                Yy(i.stream));
                                        return t.filter(function (e) {
                                          return e;
                                        });
                                      })(e, c)),
                                      x(
                                        Z,
                                        (function (e, t, n) {
                                          var r, i;
                                          return D(function (a) {
                                            return 1 == a.g
                                              ? ((r = t
                                                  .map(function (t) {
                                                    var n, r;
                                                    return D(function (i) {
                                                      if (1 == i.g)
                                                        return e.g.disableThumbnails
                                                          ? i.return(null)
                                                          : (w(i, 2),
                                                            x(
                                                              i,
                                                              (function (e, t) {
                                                                var n, r, i, a, o, s, u, l, d, c;
                                                                return D(function (h) {
                                                                  return 1 == h.g
                                                                    ? ((n = by(t, "URI")),
                                                                      (r = yy(t, "CODECS", "jpeg") || ""),
                                                                      e.i.has(n)
                                                                        ? h.return(e.i.get(n))
                                                                        : ((i = yy(t, "LANGUAGE")),
                                                                          (a = yy(t, "NAME")),
                                                                          (o = yy(t, "CHARACTERISTICS")),
                                                                          (s = tb(
                                                                            e,
                                                                            e.G++,
                                                                            [n],
                                                                            r,
                                                                            "image",
                                                                            i,
                                                                            !1,
                                                                            a,
                                                                            null,
                                                                            null,
                                                                            o,
                                                                            !1,
                                                                            null,
                                                                            !1,
                                                                          )),
                                                                          (u = yy(t, "RESOLUTION"))
                                                                            ? x(
                                                                                h,
                                                                                s.stream.createSegmentIndex(),
                                                                                3,
                                                                              )
                                                                            : h.A(2)))
                                                                    : (2 != h.g &&
                                                                        ((l = Du(s.stream.segmentIndex)),
                                                                        (d = l.tilesLayout) &&
                                                                          ((s.stream.width =
                                                                            Number(u.split("x")[0]) *
                                                                            Number(d.split("x")[0])),
                                                                          (s.stream.height =
                                                                            Number(u.split("x")[1]) *
                                                                            Number(d.split("x")[1]))),
                                                                        s.stream.closeSegmentIndex()),
                                                                      (c = yy(t, "BANDWIDTH")) &&
                                                                        (s.stream.bandwidth = Number(c)),
                                                                      e.i.set(n, s),
                                                                      h.return(s));
                                                                });
                                                              })(e, t),
                                                              4,
                                                            ));
                                                      if (2 != i.g) return ((n = i.h), i.return(n.stream));
                                                      if (((r = E(i)), e.g.hls.ignoreImageStreamFailures))
                                                        return i.return(null);
                                                      throw r;
                                                    });
                                                  })
                                                  .concat(
                                                    n.map(function (t) {
                                                      if (e.g.disableThumbnails) return null;
                                                      try {
                                                        var n = eb(e, t);
                                                        return "image" !== n.stream.type ? null : n.stream;
                                                      } catch (u) {
                                                        if (e.g.hls.ignoreImageStreamFailures) return null;
                                                        throw u;
                                                      }
                                                    }),
                                                  )),
                                                x(a, Promise.all(r), 2))
                                              : ((i = a.h),
                                                a.return(
                                                  i.filter(function (e) {
                                                    return e;
                                                  }),
                                                ));
                                          });
                                        })(e, p, f),
                                        6,
                                      )
                                    );
                                  case 6:
                                    ((s = Z.h), Z.A(3));
                                    break;
                                  case 7:
                                    ((G = Z.h),
                                      e.i.set(e.H, G),
                                      G.stream &&
                                        ((z = Hu(G.stream)),
                                        G.stream.segmentIndex.Fb(function (e) {
                                          e.ea && (e.ea.xd = z);
                                        })),
                                      (l = G.stream.type),
                                      (X = !0),
                                      ((e.g.disableAudio && "audio" == G.type) ||
                                        (e.g.disableVideo &&
                                          "video" == G.type &&
                                          !G.stream.codecs.includes(","))) &&
                                        (X = !1),
                                      X &&
                                        a.push({
                                          id: 0,
                                          language: Br(V || "und"),
                                          disabledUntilTime: 0,
                                          primary: !0,
                                          audio: "audio" == G.type ? G.stream : null,
                                          video: "video" == G.type ? G.stream : null,
                                          bandwidth: G.stream.bandwidth || 0,
                                          allowedByApplication: !0,
                                          allowedByKeySystem: !0,
                                          decodingInfos: [],
                                        }));
                                  case 3:
                                    if (!e.h) throw new Ke(2, 7, 7001);
                                    if (
                                      (cb(e, r),
                                      1 == r.type &&
                                        (Eb(e) && (pb(e, r), (W = e.o), e.F.ka(W)),
                                        (K = Array.from(e.i.values())),
                                        ib(e, K),
                                        Ky(e),
                                        vb(e, r.ha, l, d, u)),
                                      (e.m = {
                                        presentationTimeline: e.l,
                                        variants: a,
                                        textStreams: o,
                                        imageStreams: s,
                                        offlineSessionIds: [],
                                        sequenceMode: e.g.hls.sequenceMode,
                                        ignoreManifestTimestampsInSegmentsMode:
                                          e.g.hls.ignoreManifestTimestampsInSegmentsMode,
                                        type: "HLS",
                                        serviceDescription: null,
                                        nextUrl: null,
                                        periodCount: 1,
                                        gapCount: 0,
                                        isLowLatency: !1,
                                        startTime: e.u,
                                      }),
                                      e.ba || !e.g.hls.disableCodecGuessing)
                                    ) {
                                      Z.A(8);
                                      break;
                                    }
                                    for (q = [], Y = g(e.m.variants), $ = Y.next(); !$.done; $ = Y.next())
                                      ((J = $.value).audio &&
                                        "" === J.audio.codecs &&
                                        q.push(J.audio.createSegmentIndex()),
                                        J.video &&
                                          "" === J.video.codecs &&
                                          q.push(J.video.createSegmentIndex()));
                                    return x(Z, Promise.all(q), 8);
                                  case 8:
                                    (e.h.makeTextStreamsForClosedCaptions(e.m), T(Z));
                                }
                              });
                            })(r, n.data),
                            3,
                          ))
                        : i.return(r.m);
                  });
                }),
                (i.stop = function () {
                  this.F && (this.F.stop(), (this.F = null));
                  var e = [];
                  return (
                    this.$ && (e.push(this.$.destroy()), (this.$ = null)),
                    (this.g = this.h = null),
                    this.ob.clear(),
                    (this.m = null),
                    this.i.clear(),
                    this.M.clear(),
                    this.K.clear(),
                    this.B.clear(),
                    this.Da.clear(),
                    this.va.clear(),
                    this.O.clear(),
                    this.ya.clear(),
                    this.za.clear(),
                    this.I.clear(),
                    this.j && this.j.destroy(),
                    this.V && (this.V.release(), (this.V = null)),
                    Promise.all(e)
                  );
                }),
                (i.update = function () {
                  var e,
                    t,
                    n,
                    r,
                    i,
                    a,
                    o,
                    s,
                    u,
                    l,
                    d = this;
                  return D(function (c) {
                    if (1 == c.g) {
                      if (!Eb(d)) return c.return();
                      for (
                        e = [],
                          t = Array.from(d.i.values()),
                          d.o = 1 / 0,
                          d.m.gapCount = 0,
                          n = t.filter(function (e) {
                            return !e.stream.isAudioMuxedInVideo && e.stream.segmentIndex;
                          }),
                          r = g(n),
                          i = r.next();
                        !i.done;
                        i = r.next()
                      )
                        ((a = i.value), e.push(Gy(d, a)));
                      return x(c, Promise.all(e), 2);
                    }
                    for (
                      rb(
                        d,
                        n.map(function (e) {
                          return e.stream;
                        }),
                      ),
                        o = n.some(function (e) {
                          return 0 == e.be;
                        }),
                        n.length && !o && (kb(d, Bb), Ky(d)),
                        o && Ky(d),
                        s = g(n),
                        u = s.next();
                      !u.done;
                      u = s.next()
                    )
                      (l = u.value).stream.isAudioMuxedInVideo ||
                        !l.stream.segmentIndex ||
                        Du(l.stream.segmentIndex) ||
                        d.h.disableStream(l.stream);
                    T(c);
                  });
                }),
                (i.onExpirationUpdated = function () {}),
                (i.onInitialVariantChosen = function () {}),
                (i.banLocation = function (e) {
                  this.j && this.j.banLocation(e);
                }),
                (i.setMediaElement = function (e) {
                  this.X = e;
                }),
                V("shaka.hls.HlsParser", Vy));
              var _b = new Map()
                  .set("aac", "audio/aac")
                  .set("ac3", "audio/ac3")
                  .set("ec3", "audio/ec3")
                  .set("mp3", "audio/mpeg"),
                Db = new Map()
                  .set("mp4", "audio/mp4")
                  .set("mp4a", "audio/mp4")
                  .set("m4s", "audio/mp4")
                  .set("m4i", "audio/mp4")
                  .set("m4a", "audio/mp4")
                  .set("m4f", "audio/mp4")
                  .set("cmfa", "audio/mp4")
                  .set("ts", "video/mp2t")
                  .set("tsa", "video/mp2t"),
                Pb = new Map()
                  .set("mp4", "video/mp4")
                  .set("mp4v", "video/mp4")
                  .set("m4s", "video/mp4")
                  .set("m4i", "video/mp4")
                  .set("m4v", "video/mp4")
                  .set("m4f", "video/mp4")
                  .set("cmfv", "video/mp4")
                  .set("ts", "video/mp2t")
                  .set("tsv", "video/mp2t"),
                Lb = new Map()
                  .set("mp4", "application/mp4")
                  .set("m4s", "application/mp4")
                  .set("m4i", "application/mp4")
                  .set("m4f", "application/mp4")
                  .set("cmft", "application/mp4")
                  .set("vtt", "text/vtt")
                  .set("webvtt", "text/vtt")
                  .set("ttml", "application/ttml+xml"),
                Nb = new Map()
                  .set("jpg", "image/jpeg")
                  .set("png", "image/png")
                  .set("svg", "image/svg+xml")
                  .set("webp", "image/webp")
                  .set("avif", "image/avif"),
                Ob = new Map().set("audio", Db).set("video", Pb).set("text", Lb).set("image", Nb),
                Ub = new Set(["video/mp2t"].concat(m(br))),
                Bb = "VOD",
                jb = "EVENT",
                Fb = "LIVE";
              function Vb(e) {
                return Jg(e);
              }
              (At("application/x-mpegurl", function () {
                return new Vy();
              }),
                At("application/vnd.apple.mpegurl", function () {
                  return new Vy();
                }));
              var Hb = new Map()
                .set("com.microsoft.playready", Vb)
                .set("com.microsoft.playready.recommendation", Vb)
                .set("com.microsoft.playready.software", Vb)
                .set("com.microsoft.playready.hardware", Vb);
              function Gb() {
                var e = this;
                ((this.h = this.g = null),
                  (this.l = []),
                  (this.j = null),
                  (this.u = 1),
                  (this.i = null),
                  (this.F = new H(5)),
                  (this.o = new Mr(function () {
                    !(function (e) {
                      var t;
                      D(function (n) {
                        switch (n.g) {
                          case 1:
                            return (w(n, 2), x(n, zb(e), 4));
                          case 4:
                            A(n, 3);
                            break;
                          case 2:
                            ((t = E(n)), e.h && ((t.severity = 1), e.h.onError(t)));
                          case 3:
                            if (!e.h) return n.return();
                            T(n);
                        }
                      });
                    })(e);
                  })),
                  (this.C = new Bi()),
                  (this.m = new Map()),
                  (this.B = function () {
                    return !1;
                  }));
              }
              function zb(e) {
                var t, n, r, i, a, o, s;
                return D(function (u) {
                  if (1 == u.g)
                    return (
                      (t = Gi(e.l, e.g.retryParameters)),
                      (n = e.h.networkingEngine),
                      (r = Date.now()),
                      (i = n.request(0, t, { type: 5, isPreload: e.B() })),
                      ji(e.C, i),
                      x(u, i.promise, 2)
                    );
                  if (((a = u.h), !e.h)) return u.return();
                  a.uri && !e.l.includes(a.uri) && e.l.unshift(a.uri);
                  var l = a.uri,
                    d = a.data,
                    c = e.g.mss.manifestPreprocessor;
                  if (c != id) {
                    if (
                      (ce(
                        "manifest.mss.manifestPreprocessor configuration",
                        "Please Use manifest.mss.manifestPreprocessorTXml instead.",
                      ),
                      !(d = wv(d, "SmoothStreamingMedia")))
                    )
                      throw new Ke(2, 4, 4046, l);
                    (c(d), (d = Qe(d.outerHTML)));
                  }
                  var h = Yt(d, "SmoothStreamingMedia");
                  if (!h) throw new Ke(2, 4, 4046, l);
                  if (
                    ((l = e.g.mss.manifestPreprocessorTXml) != ad && l(h),
                    e.i || (e.i = new uu(null, 0)),
                    (l = sn(h, "IsLive", yn, !1)))
                  )
                    throw new Ke(2, 4, 4047);
                  (e.i.cd(!l),
                    (c = sn(h, "TimeScale", mn, 1e7)),
                    (d = sn(h, "DVRWindowLength", mn)),
                    l && (0 === d || isNaN(d)) && (d = 1 / 0));
                  var p,
                    f = sn(h, "CanSeek", yn, !1);
                  for (
                    0 === d && f && (d = 1 / 0),
                      f = null,
                      d && d > 0 && (f = d / c),
                      l && !isNaN(e.g.availabilityWindowOverride) && (f = e.g.availabilityWindowOverride),
                      null == f && (f = 1 / 0),
                      e.i.Lf(f),
                      d = sn(h, "Duration", mn, 1 / 0),
                      l || e.i.Ab(d / c),
                      l = { variants: [], textStreams: [], timescale: c, duration: d / c },
                      f = en(h, "Protection"),
                      c = e.g.mss.keySystemsBySystemId,
                      d = [],
                      p = (f = g(f)).next();
                    !p.done;
                    p = f.next()
                  )
                    d = d.concat(en(p.value, "ProtectionHeader"));
                  if (d.length) {
                    for (f = [], p = 0; p < d.length; p++) {
                      var v = d[p],
                        y = v.attributes.SystemID.toLowerCase(),
                        b = c[y];
                      if (b) {
                        var w;
                        e: {
                          if ((w = $g(v)))
                            for (var S = (w = g(rn(w, "DATA"))).next(); !S.done; S = w.next())
                              if ((S = an(S.value, "KID"))) {
                                ((w = at(tn(S))),
                                  (w = st(
                                    (w = new Uint8Array(
                                      [w[3], w[2], w[1], w[0], w[5], w[4], w[7], w[6]].concat(m(w.slice(8))),
                                    )),
                                  )));
                                break e;
                              }
                          w = null;
                        }
                        ((y = dt(
                          b,
                          "cenc",
                          (y = [
                            {
                              initData: va((S = at(tn(v))), (y = ot(y.replace(/-/g, ""))), new Set(), 0),
                              initDataType: "cenc",
                              keyId: w,
                            },
                          ]),
                        )),
                          w && y.keyIds.add(w),
                          (b = Hb.get(b)) && (y.licenseServerUri = b(v)),
                          f.push(y));
                      }
                    }
                    c = f;
                  } else c = [];
                  for (
                    p = c, f = [], c = [], d = [], v = (h = g((h = en(h, "StreamIndex")))).next();
                    !v.done;
                    v = h.next()
                  ) {
                    ((b = en((v = v.value), "QualityLevel")),
                      (y = l.timescale),
                      (w = l.duration),
                      (S = en(v, "c")));
                    for (var A = [], E = 0, k = 0; k < S.length; ++k) {
                      var I = S[k],
                        C = S[k + 1],
                        M = sn(I, "t", mn),
                        R = sn(I, "d", mn);
                      if (((I = sn(I, "r", fn)), !R)) break;
                      if (((M = null != M ? M : E), (I = I || 0) && I--, I < 0))
                        if (C) {
                          if (null == (C = sn(C, "t", mn))) break;
                          if (M >= C) break;
                          I = Math.ceil((C - M) / R) - 1;
                        } else {
                          if (w == 1 / 0) break;
                          if (M / y >= w) break;
                          I = Math.ceil((w * y - M) / R) - 1;
                        }
                      for (C = 0; C <= I; ++C)
                        ((E = M + R), A.push({ start: M / y, end: E / y, Ld: M }), (M = E));
                    }
                    for (y = A, w = (b = g(b)).next(); !w.done; w = b.next())
                      (w = Xb(e, v, w.value, y, p, l)) &&
                        ("audio" != w.type || e.g.disableAudio
                          ? "video" != w.type || e.g.disableVideo
                            ? w.type != gt || e.g.disableText || d.push(w)
                            : c.push(w)
                          : f.push(w));
                  }
                  for (h = [], p = (f = g(f.length > 0 ? f : [null])).next(); !p.done; p = f.next())
                    for (p = p.value, A = (v = g(c.length > 0 ? c : [null])).next(); !A.done; A = v.next())
                      ((y = (b = h).push),
                        (w = e),
                        (S = p),
                        (A = A.value),
                        (k = 0),
                        S && S.bandwidth && S.bandwidth > 0 && (k += S.bandwidth),
                        A && A.bandwidth && A.bandwidth > 0 && (k += A.bandwidth),
                        (w = {
                          id: w.u++,
                          language: S ? S.language : "und",
                          disabledUntilTime: 0,
                          primary: (!!S && S.primary) || (!!A && A.primary),
                          audio: S,
                          video: A,
                          bandwidth: k,
                          allowedByApplication: !0,
                          allowedByKeySystem: !0,
                          decodingInfos: [],
                        }),
                        y.call(b, w));
                  ((l.variants = h),
                    (l.textStreams = d),
                    e.j
                      ? ((e.j.variants = l.variants), (e.j.textStreams = l.textStreams), e.h.filter(e.j))
                      : ((e.j = {
                          presentationTimeline: e.i,
                          variants: l.variants,
                          textStreams: l.textStreams,
                          imageStreams: [],
                          offlineSessionIds: [],
                          sequenceMode: e.g.mss.sequenceMode,
                          ignoreManifestTimestampsInSegmentsMode: !1,
                          type: "MSS",
                          serviceDescription: null,
                          nextUrl: null,
                          periodCount: 1,
                          gapCount: 0,
                          isLowLatency: !1,
                          startTime: null,
                        }),
                        e.i.qf()),
                    Promise.resolve(),
                    (o = Date.now()),
                    (s = (o - r) / 1e3),
                    e.F.sample(1, s),
                    T(u));
                });
              }
              function Xb(e, t, n, r, i, a) {
                var o = t.attributes.Type;
                if ("audio" !== o && "video" !== o && "text" !== o)
                  return (K("Ignoring unrecognized type:", o), null);
                var s = t.attributes.Language,
                  u = e.u++,
                  l = sn(n, "Bitrate", gn),
                  d = sn(n, "MaxWidth", gn),
                  c = sn(n, "MaxHeight", gn),
                  h = sn(n, "Channels", gn),
                  p = sn(n, "SamplingRate", gn),
                  f = a.duration;
                r.length && (f = r[r.length - 1].end - r[0].start);
                var m = e.i.getDuration();
                (e.i.Ab(Math.min(f, m)),
                  (m = t.attributes.Name) && (m += n.attributes.Index),
                  m || (m = String(u)));
                var v = {
                  id: u,
                  originalId: m,
                  groupId: null,
                  createSegmentIndex: function () {
                    return Promise.resolve();
                  },
                  closeSegmentIndex: function () {
                    return Promise.resolve();
                  },
                  segmentIndex: null,
                  mimeType: "",
                  codecs: "",
                  frameRate: void 0,
                  pixelAspectRatio: void 0,
                  bandwidth: l || 0,
                  width: d || void 0,
                  height: c || void 0,
                  kind: "",
                  encrypted: i.length > 0,
                  drmInfos: i,
                  keyIds: new Set(),
                  language: Br(s || "und"),
                  originalLanguage: s,
                  label: "",
                  type: "",
                  primary: !1,
                  trickModeVideo: null,
                  dependencyStream: null,
                  emsgSchemeIdUris: [],
                  roles: [],
                  forced: !1,
                  channelsCount: h,
                  audioSamplingRate: p,
                  spatialAudio: !1,
                  closedCaptions: null,
                  hdr: void 0,
                  colorGamut: void 0,
                  videoLayout: void 0,
                  tilesLayout: void 0,
                  matchedStreams: [],
                  mssPrivateData: { duration: f, timescale: a.timescale, codecPrivateData: null },
                  accessibilityPurpose: null,
                  external: !1,
                  fastSwitching: !1,
                  fullMimeTypes: new Set(),
                  isAudioMuxedInVideo: !1,
                  baseOriginalId: null,
                };
                if (
                  ((i = t.attributes.Subtype) &&
                    ((i = Kb.get(i)) && v.roles.push(i), "main" === i && (v.primary = !0)),
                  (null !== (i = n.attributes.FourCC) && "" !== i) || (i = t.attributes.FourCC),
                  !i)
                )
                  if ("audio" === o) i = "AAC";
                  else if ("video" === o)
                    return (
                      K(
                        'FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"',
                      ),
                      null
                    );
                if (!Wb.includes(i.toUpperCase())) return (K("Codec not supported:", i), null);
                switch (
                  ((n = (function (e, t, n, r) {
                    if ((e = e.attributes.CodecPrivateData)) return e;
                    if ("audio" !== t) return null;
                    ((t = r.channelsCount || 2), (e = r.audioSamplingRate || 44100));
                    var i = {
                      96e3: 0,
                      88200: 1,
                      64e3: 2,
                      48e3: 3,
                      44100: 4,
                      32e3: 5,
                      24e3: 6,
                      22050: 7,
                      16e3: 8,
                      12e3: 9,
                      11025: 10,
                      8e3: 11,
                      7350: 12,
                    };
                    return (
                      (r = i[e]),
                      "AACH" === n
                        ? ((n = new Uint8Array(4)),
                          (e = i[2 * e]),
                          (n[0] = 40 | (r >> 1)),
                          (n[1] = (r << 7) | (t << 3) | (e >> 1)),
                          (n[2] = (e << 7) | 8),
                          (n[3] = 0),
                          ((t = new Uint16Array(2))[0] = (n[0] << 8) + n[1]),
                          (t[1] = (n[2] << 8) + n[3]),
                          t[0].toString(16) + t[1].toString(16))
                        : (((n = new Uint8Array(2))[0] = 16 | (r >> 1)),
                          (n[1] = (r << 7) | (t << 3)),
                          ((t = new Uint16Array(1))[0] = (n[0] << 8) + n[1]),
                          t[0].toString(16))
                    );
                  })(n, o, i, v)),
                  (v.mssPrivateData.codecPrivateData = n),
                  o)
                ) {
                  case "audio":
                    if (!n) return (K("Quality unsupported without CodecPrivateData", o), null);
                    ((v.type = "audio"),
                      (v.mimeType = "mss/audio/mp4"),
                      (v.codecs = (function (e, t) {
                        var n = 0;
                        return (
                          "AACH" === e && (n = 5),
                          t
                            ? 0 === n && (n = (248 & parseInt(t.substr(0, 2), 16)) >> 3)
                            : ((n = 2), "AACH" === e && (n = 5)),
                          "mp4a.40." + n
                        );
                      })(i, n)));
                    break;
                  case "video":
                    if (!n) return (K("Quality unsupported without CodecPrivateData", o), null);
                    ((v.type = "video"),
                      (v.mimeType = "mss/video/mp4"),
                      (v.codecs = (function (e) {
                        var t = /00000001[0-9]7/.exec(e);
                        return t.length && e ? "avc1." + e.substr(e.indexOf(t[0]) + 10, 6) : "";
                      })(n)));
                    break;
                  case "text":
                    ((v.type = gt),
                      (v.mimeType = "application/mp4"),
                      ("TTML" === i || "DFXP" === i) && (v.codecs = "stpp"));
                }
                return (
                  v.fullMimeTypes.add(lr(v.mimeType, v.codecs)),
                  (v.createSegmentIndex = function () {
                    if (v.segmentIndex) return Promise.resolve();
                    if (e.m.has(v.id)) var n = e.m.get(v.id);
                    else
                      ((n = []),
                        "video" == v.type &&
                          (n = v.mssPrivateData.codecPrivateData.split("00000001").slice(1)),
                        (n = co(
                          new lo([
                            (n = {
                              id: v.id,
                              type: v.type,
                              codecs: v.codecs,
                              encrypted: v.encrypted,
                              timescale: v.mssPrivateData.timescale,
                              duration: v.mssPrivateData.duration,
                              Bb: n,
                              Ga: new Uint8Array([]),
                              Sa: new Uint8Array([]),
                              Za: 0,
                              $a: 0,
                              data: null,
                              stream: v,
                            }),
                          ]),
                        )),
                        e.m.set(v.id, n));
                    return (
                      (n = (function (e, t, n, r, i) {
                        var a = r.attributes.Url.replace("{bitrate}", String(n.bandwidth));
                        r = [];
                        for (var o = (i = g(i)).next(), s = {}; !o.done; s = { Pf: void 0 }, o = i.next())
                          ((s.Pf = o.value),
                            r.push(
                              new Fo(
                                s.Pf.start,
                                s.Pf.end,
                                (function (t) {
                                  return function () {
                                    return lt(e.l, [a.replace("{start time}", String(t.Pf.Ld))]);
                                  };
                                })(s),
                                0,
                                null,
                                t,
                                0,
                                0,
                                n.mssPrivateData.duration,
                              ),
                            ));
                        return r;
                      })(
                        e,
                        new Bo(
                          function () {
                            return [];
                          },
                          0,
                          null,
                          Hu(v),
                          v.mssPrivateData.timescale,
                          n,
                          null,
                          v.encrypted,
                        ),
                        v,
                        t,
                        r,
                      )),
                      (v.segmentIndex = new _u(n)),
                      Promise.resolve()
                    );
                  }),
                  (v.closeSegmentIndex = function () {
                    v.segmentIndex && (v.segmentIndex.release(), (v.segmentIndex = null));
                  }),
                  v
                );
              }
              (((i = Gb.prototype).configure = function (e, t) {
                ((this.g = e), t && (this.B = t));
              }),
                (i.start = function (e, t) {
                  var n = this;
                  return D(function (r) {
                    if (1 == r.g) return ((n.l = [e]), (n.h = t), x(r, zb(n), 2));
                    if (!n.h) throw new Ke(2, 7, 7001);
                    return r.return(n.j);
                  });
                }),
                (i.stop = function () {
                  return (
                    (this.g = this.h = null),
                    (this.l = []),
                    (this.j = null),
                    null != this.o && (this.o.stop(), (this.o = null)),
                    this.m.clear(),
                    this.C.destroy()
                  );
                }),
                (i.update = function () {
                  var e,
                    t = this;
                  return D(function (n) {
                    return 1 == n.g
                      ? (w(n, 2), x(n, zb(t), 4))
                      : 2 != n.g
                        ? A(n, 0)
                        : ((e = E(n)), t.h && e ? (t.h.onError(e), void T(n)) : n.return());
                  });
                }),
                (i.onExpirationUpdated = function () {}),
                (i.onInitialVariantChosen = function () {}),
                (i.banLocation = function () {}),
                (i.setMediaElement = function () {}),
                V("shaka.mss.MssParser", Gb));
              var Wb = "AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),
                Kb = new Map().set("CAPT", "main").set("SUBT", "alternate").set("DESC", "main");
              function qb(e, t, n, r, i, a, o) {
                if ((n >= 200 && n <= 299 && 202 != n) || 304 == n)
                  return {
                    uri: i || r,
                    originalUri: r,
                    data: t,
                    status: n,
                    headers: e,
                    fromCache: !!e["x-shaka-from-cache"],
                    originalRequest: a,
                  };
                a = null;
                try {
                  a = Je(t);
                } catch (s) {}
                throw new Ke(401 == n || 403 == n ? 2 : 1, 1, 1001, r, n, a, e, o, i || r);
              }
              function Yb() {}
              function $b(e, t, n, r, i, a) {
                var o = new tx();
                try {
                  ea(t.headers).forEach(function (e, t) {
                    o.append(t, e);
                  });
                } catch (d) {
                  return Mi(new Ke(1, 1, 1002, e, d, n));
                }
                var s = new Zb(),
                  u = { Vh: !1, ij: !1 };
                if (
                  ((e = (function (e, t, n, r, i, a, o, s, u) {
                    var l, d, c, h, p, f, g, m, v, y, b, S, k, I;
                    return D(function (C) {
                      switch (C.g) {
                        case 1:
                          return (
                            (l = Qb),
                            (d = ex),
                            (h = new ArrayBuffer(0)),
                            (f = p = 0),
                            (g = {}),
                            (m = Date.now()),
                            w(C, 2),
                            x(C, l(e, r), 4)
                          );
                        case 4:
                          if (
                            ((c = C.h),
                            (g = (function (e) {
                              var t = {};
                              return (
                                e.forEach(function (e, n) {
                                  t[n.trim()] = e;
                                }),
                                t
                              );
                            })(c.headers)),
                            o(g),
                            "HEAD" == r.method)
                          ) {
                            C.A(5);
                            break;
                          }
                          return (
                            (y = (v = c.headers.get("Content-Length")) ? parseInt(v, 10) : 0),
                            c.body
                              ? ((b = c.clone().body.getReader()),
                                new d({
                                  start: function (e) {
                                    function t() {
                                      var n, r, i, o;
                                      return D(function (l) {
                                        switch (l.g) {
                                          case 1:
                                            return (w(l, 2), x(l, b.read(), 4));
                                          case 4:
                                            ((n = l.h), A(l, 3));
                                            break;
                                          case 2:
                                            return (E(l), l.return());
                                          case 3:
                                            if (n.done) {
                                              l.A(5);
                                              break;
                                            }
                                            if (((p += n.value.byteLength), !s)) {
                                              l.A(5);
                                              break;
                                            }
                                            return x(l, s(n.value), 5);
                                          case 5:
                                            ((r = Date.now()),
                                              (i = p - f),
                                              ((r - m > 100 && i >= u) || n.done) &&
                                                ((o = n.done ? 0 : y - p), a(r - m, i, o), (f = p), (m = r)),
                                              n.done ? e.close() : (e.enqueue(n.value), t()),
                                              T(l));
                                        }
                                      });
                                    }
                                    t();
                                  },
                                }),
                                x(C, c.arrayBuffer(), 8))
                              : x(C, c.arrayBuffer(), 9)
                          );
                        case 8:
                          ((h = C.h), C.A(5));
                          break;
                        case 9:
                          ((h = C.h), (S = Date.now()), a(S - m, h.byteLength, 0));
                        case 5:
                          (t.headers.Range &&
                            2 ==
                              (k = t.headers.Range.replace("bytes=", "")
                                .split("-")
                                .filter(function (e) {
                                  return e;
                                })
                                .map(function (e) {
                                  return parseInt(e, 10);
                                })).length &&
                            h.byteLength != k[1] - k[0] + 1 &&
                            K("Payload length does not match range requested bytes", t, c),
                            A(C, 3));
                          break;
                        case 2:
                          if (((I = E(C)), i.Vh)) throw new Ke(1, 1, 7001, e, n);
                          if (i.ij) throw new Ke(1, 1, 1003, e, n);
                          throw new Ke(1, 1, 1002, e, I, n);
                        case 3:
                          return C.return(qb(g, h, c.status, e, c.url, t, n));
                      }
                    });
                  })(
                    e,
                    t,
                    n,
                    {
                      body: t.body || void 0,
                      headers: o,
                      method: t.method,
                      signal: s.signal,
                      credentials: t.allowCrossSiteCredentials ? "include" : void 0,
                    },
                    u,
                    r,
                    i,
                    t.streamDataCallback,
                    a.minBytesForProgressEvents || 0,
                  )),
                  (e = new Ci(e, function () {
                    return ((u.Vh = !0), s.abort(), Promise.resolve());
                  })),
                  (t = t.retryParameters.timeout))
                ) {
                  var l = new Mr(function () {
                    ((u.ij = !0), s.abort());
                  });
                  (l.ka(t / 1e3),
                    e.finally(function () {
                      l.stop();
                    }));
                }
                return e;
              }
              function Jb() {
                if (!e.ReadableStream) return !1;
                try {
                  new ReadableStream({});
                } catch (fA) {
                  return !1;
                }
                return (
                  !!e.Response &&
                  !!new Response("").body &&
                  !(!e.fetch || "polyfill" in e.fetch || !e.AbortController)
                );
              }
              (At("application/vnd.ms-sstr+xml", function () {
                return new Gb();
              }),
                V("shaka.net.HttpFetchPlugin", Yb),
                (Yb.isSupported = Jb),
                (Yb.parse = $b));
              var Qb = e.fetch,
                Zb = e.AbortController,
                ex = e.ReadableStream,
                tx = e.Headers;
              function nx() {}
              function rx(e, t, n, r, i, a) {
                var o = new ix(),
                  s = Date.now(),
                  u = 0;
                return new Ci(
                  new Promise(function (l, d) {
                    (o.open(t.method, e, !0),
                      (o.responseType = "arraybuffer"),
                      (o.timeout = t.retryParameters.timeout),
                      (o.withCredentials = t.allowCrossSiteCredentials));
                    var c = {};
                    for (var h in ((o.onabort = function () {
                      d(new Ke(1, 1, 7001, e, n));
                    }),
                    (o.onreadystatechange = function () {
                      if (o.readyState === XMLHttpRequest.HEADERS_RECEIVED) {
                        for (
                          var e = o.getAllResponseHeaders().trim().split("\r\n"),
                            t = {},
                            n = (e = g(e)).next();
                          !n.done;
                          n = e.next()
                        )
                          t[(n = n.value.split(": "))[0].toLowerCase()] = n.slice(1).join(": ");
                        i((c = t));
                      }
                    }),
                    (o.onload = function (i) {
                      var a = o.response;
                      try {
                        r(Date.now() - s, i.loaded - u, 0);
                        var h = qb(c, a, o.status, e, o.responseURL, t, n);
                        l(h);
                      } catch (p) {
                        d(p);
                      }
                    }),
                    (o.onerror = function (t) {
                      d(new Ke(1, 1, 1002, e, t, n));
                    }),
                    (o.ontimeout = function () {
                      d(new Ke(1, 1, 1003, e, n));
                    }),
                    (o.onprogress = function (e) {
                      var t = Date.now(),
                        n = a.minBytesForProgressEvents || 0,
                        i = e.loaded - u;
                      ((t - s > 100 && i >= n) || (e.lengthComputable && e.loaded == e.total)) &&
                        (r(t - s, i, 4 == o.readyState ? 0 : e.total - e.loaded), (u = e.loaded), (s = t));
                    }),
                    t.headers))
                      try {
                        o.setRequestHeader(h.toLowerCase(), t.headers[h]);
                      } catch (p) {
                        throw new Ke(1, 1, 1002, e, p, n);
                      }
                    o.send(t.body);
                  }),
                  function () {
                    return (o.abort(), Promise.resolve());
                  },
                );
              }
              (Jb() && (Vi("http", $b, 2, !0), Vi("https", $b, 2, !0), Vi("blob", $b, 2, !0)),
                V("shaka.net.HttpXHRPlugin", nx),
                (nx.parse = rx));
              var ix = e.XMLHttpRequest;
              function ax(e, t, n, r, i) {
                ((this.g = e), (this.i = t), (this.groupId = n), (this.h = r), (this.j = i));
              }
              function ox(e) {
                var t = e.$b(!1);
                return t
                  ? it(t)
                  : e
                      .P()
                      .map(function (e) {
                        return "{" + encodeURI(e.split("#xywh=")[0]) + "}";
                      })
                      .join("") +
                      ":" +
                      e.startByte +
                      ":" +
                      e.endByte;
              }
              function sx(e, t) {
                return ul(e.g.P(), e.g.startByte, e.g.endByte, t.streaming.retryParameters);
              }
              function ux() {
                ((this.g = this.j = this.i = 0), (this.h = new Map()), (this.l = 0));
              }
              function lx(e, t) {
                e.i += t;
                var n = e.l;
                return (e.l++, e.h.set(n, t), n);
              }
              function dx(e) {
                return 0 == e.i ? 0 : e.j / e.i;
              }
              function cx(e) {
                var t = this;
                ((this.u = e),
                  (this.i = new Map()),
                  (this.h = new Ji(function () {
                    return hx(t).catch(function () {});
                  })),
                  (this.j = []),
                  (this.o = function () {}),
                  (this.m = function () {}),
                  (this.g = new ux()),
                  (this.l = !1));
              }
              function hx(e) {
                e.l = !0;
                var t = e.j.map(function (e) {
                  return e();
                });
                return ((e.j = []), Promise.all(t));
              }
              function px(e, t, n, r, i, a) {
                Qi(e.h);
                var o = (e.i.get(t) || Promise.resolve()).then(function () {
                  if (e.h.g) throw new Ke(2, 9, 7001);
                  if (i) {
                    var t = Ne(n);
                    for (var o in (t = new ma(t)).data) {
                      var s = Number(o);
                      e.m(t.data[s], t.g[s]);
                    }
                  }
                  return (e.g.close(r, n.byteLength), e.o(dx(e.g), e.g.g), a(n));
                });
                e.i.set(t, o);
              }
              function fx(e, t) {
                var n = this;
                ((this.i = e),
                  (this.h = e.objectStore(t)),
                  (this.g = new Ii()),
                  (e.onabort = function (e) {
                    (e.preventDefault(), n.g.reject());
                  }),
                  (e.onerror = function (e) {
                    (e.preventDefault(), n.g.reject());
                  }),
                  (e.oncomplete = function () {
                    n.g.resolve();
                  }));
              }
              function gx(e, t) {
                return new Promise(function (n, r) {
                  var i = e.h.openCursor();
                  ((i.onerror = r),
                    (i.onsuccess = function () {
                      var e;
                      return D(function (r) {
                        if (1 == r.g)
                          return null == i.result
                            ? (n(), r.return())
                            : ((e = i.result), x(r, t(e.key, e.value, e), 2));
                        (e.continue(), T(r));
                      });
                    }));
                });
              }
              function mx(e) {
                ((this.h = e), (this.g = []));
              }
              function vx(e, t) {
                return yx(e, t, "readwrite");
              }
              function yx(e, t, n) {
                var r = new fx((n = e.h.transaction([t], n)), t);
                return (
                  e.g.push(r),
                  r.promise().then(
                    function () {
                      Q(e.g, r);
                    },
                    function () {
                      Q(e.g, r);
                    },
                  ),
                  r
                );
              }
              function bx(e, t, n) {
                ((this.h = new mx(e)), (this.i = t), (this.g = n));
              }
              function xx(e) {
                return Promise.reject(new Ke(2, 9, 9011, "Cannot add new value to " + e));
              }
              function Tx(e, t, n, r) {
                t = (e = vx(e.h, t)).store();
                for (var i = (n = g(n)).next(), a = {}; !i.done; a = { Tg: void 0 }, i = n.next())
                  ((a.Tg = i.value),
                    (t.delete(a.Tg).onsuccess = (function (e) {
                      return function () {
                        return r(e.Tg);
                      };
                    })(a)));
                return e.promise();
              }
              function wx(e, t, n) {
                var r, i, a, o, s, u, l;
                return D(function (d) {
                  if (1 == d.g) {
                    for (
                      r = yx(e.h, t, "readonly"),
                        i = r.store(),
                        a = {},
                        o = [],
                        s = g(n),
                        u = s.next(),
                        l = {};
                      !u.done;
                      l = { Ef: void 0, lf: void 0 }, u = s.next()
                    )
                      ((l.lf = u.value),
                        (l.Ef = i.get(l.lf)),
                        (l.Ef.onsuccess = (function (e) {
                          return function () {
                            (null == e.Ef.result && o.push(e.lf), (a[e.lf] = e.Ef.result));
                          };
                        })(l)));
                    return x(d, r.promise(), 2);
                  }
                  if (o.length) throw new Ke(2, 9, 9012, "Could not find values for " + o);
                  return d.return(
                    n.map(function (e) {
                      return a[e];
                    }),
                  );
                });
              }
              function Sx(e) {
                this.g = new mx(e);
              }
              function Ax() {
                this.g = new Map();
              }
              function Ex(e) {
                var t = null;
                if (
                  (e.g.forEach(function (e, n) {
                    e.getCells().forEach(function (e, r) {
                      e.hasFixedKeySpace() || t || (t = { path: { Pb: n, cb: r }, cb: e });
                    });
                  }),
                  t)
                )
                  return t;
                throw new Ke(2, 9, 9013, "Could not find a cell that supports add-operations");
              }
              function kx(e, t, n) {
                if (!(e = e.g.get(t))) throw new Ke(2, 9, 9013, "Could not find mechanism with name " + t);
                if (!(t = e.getCells().get(n)))
                  throw new Ke(2, 9, 9013, "Could not find cell with name " + n);
                return t;
              }
              function Ix(e, t) {
                Cx.set(e, t);
              }
              (Vi("http", rx, 1, !0),
                Vi("https", rx, 1, !0),
                Vi("blob", rx, 1, !0),
                (ux.prototype.close = function (e, t) {
                  if (this.h.has(e)) {
                    var n = this.h.get(e);
                    (this.h.delete(e), (this.j += n), (this.g += t));
                  }
                }),
                (cx.prototype.destroy = function () {
                  return this.h.destroy();
                }),
                (cx.prototype.queue = function (e, t, n, r, i) {
                  var a = this;
                  Qi(this.h);
                  var o = (this.i.get(e) || Promise.resolve()).then(function () {
                    var e, o, s, u, l, d, c;
                    return D(function (h) {
                      if (1 == h.g)
                        return x(
                          h,
                          (function (e, t) {
                            var n, r, i, a;
                            return D(function (o) {
                              return 1 == o.g
                                ? ((n = qi),
                                  (r = e.u.request(n, t)),
                                  (i = function () {
                                    return r.abort();
                                  }),
                                  e.j.push(i),
                                  x(o, r.promise, 2))
                                : ((a = o.h), Q(e.j, i), o.return(a.data));
                            });
                          })(a, t),
                          2,
                        );
                      if (((e = h.h), a.h.g)) throw new Ke(2, 9, 7001);
                      if (r)
                        for (u in ((o = Ne(e)), (s = new ma(o)).data))
                          ((l = Number(u)), (d = s.data[l]), (c = s.g[l]), a.m(d, c));
                      return (a.g.close(n, e.byteLength), a.o(dx(a.g), a.g.g), h.return(i(e)));
                    });
                  });
                  return (this.i.set(e, o), o);
                }),
                (fx.prototype.abort = function () {
                  var e = this;
                  return D(function (t) {
                    if (1 == t.g) {
                      try {
                        e.i.abort();
                      } catch (n) {}
                      return (w(t, 2), x(t, e.g, 4));
                    }
                    if (2 != t.g) return A(t, 0);
                    (E(t), T(t));
                  });
                }),
                (fx.prototype.store = function () {
                  return this.h;
                }),
                (fx.prototype.promise = function () {
                  return this.g;
                }),
                (mx.prototype.destroy = function () {
                  return Promise.all(
                    this.g.map(function (e) {
                      return e.abort();
                    }),
                  );
                }),
                ((i = bx.prototype).destroy = function () {
                  return this.h.destroy();
                }),
                (i.hasFixedKeySpace = function () {
                  return !0;
                }),
                (i.addSegments = function () {
                  return xx(this.i);
                }),
                (i.removeSegments = function (e, t) {
                  return Tx(this, this.i, e, t);
                }),
                (i.getSegments = function (e) {
                  var t,
                    n = this;
                  return D(function (r) {
                    return 1 == r.g
                      ? x(r, wx(n, n.i, e), 2)
                      : ((t = r.h),
                        r.return(
                          t.map(function (e) {
                            return n.Xh(e);
                          }),
                        ));
                  });
                }),
                (i.addManifests = function () {
                  return xx(this.g);
                }),
                (i.updateManifest = function () {
                  return Promise.reject(new Ke(2, 9, 9016, "Cannot modify values in " + this.g));
                }),
                (i.updateManifestExpiration = function (e, t) {
                  var n = vx(this.h, this.g),
                    r = n.store();
                  return (
                    (r.get(e).onsuccess = function (n) {
                      (n = n.target.result) && ((n.expiration = t), r.put(n, e));
                    }),
                    n.promise()
                  );
                }),
                (i.removeManifests = function (e, t) {
                  return Tx(this, this.g, e, t);
                }),
                (i.getManifests = function (e) {
                  var t,
                    n = this;
                  return D(function (r) {
                    return 1 == r.g
                      ? x(r, wx(n, n.g, e), 2)
                      : ((t = r.h),
                        r.return(
                          Promise.all(
                            t.map(function (e) {
                              return n.Ud(e);
                            }),
                          ),
                        ));
                  });
                }),
                (i.getAllManifests = function () {
                  var e,
                    t,
                    n = this;
                  return D(function (r) {
                    return 1 == r.g
                      ? ((e = yx(n.h, n.g, "readonly")),
                        (t = new Map()),
                        x(
                          r,
                          gx(e, function (e, r) {
                            var i;
                            return D(function (a) {
                              if (1 == a.g) return x(a, n.Ud(r), 2);
                              ((i = a.h), t.set(e, i), T(a));
                            });
                          }),
                          2,
                        ))
                      : 3 != r.g
                        ? x(r, e.promise(), 3)
                        : r.return(t);
                  });
                }),
                (i.Xh = function (e) {
                  return e;
                }),
                (i.Ud = function (e) {
                  return Promise.resolve(e);
                }),
                (i.add = function (e, t) {
                  var n,
                    r,
                    i,
                    a,
                    o,
                    s,
                    u,
                    l = this;
                  return D(function (d) {
                    if (1 == d.g) {
                      for (
                        n = vx(l.h, e), r = n.store(), i = [], a = g(t), o = a.next(), s = {};
                        !o.done;
                        s = { hh: void 0 }, o = a.next()
                      )
                        ((u = o.value),
                          (s.hh = r.add(u)),
                          (s.hh.onsuccess = (function (e) {
                            return function () {
                              i.push(e.hh.result);
                            };
                          })(s)));
                      return x(d, n.promise(), 2);
                    }
                    return d.return(i);
                  });
                }),
                (Sx.prototype.destroy = function () {
                  return this.g.destroy();
                }),
                (Sx.prototype.getAll = function () {
                  var e,
                    t,
                    n = this;
                  return D(function (r) {
                    return 1 == r.g
                      ? ((e = yx(n.g, "session-ids", "readonly")),
                        (t = []),
                        x(
                          r,
                          gx(e, function (e, n) {
                            t.push(n);
                          }),
                          2,
                        ))
                      : 3 != r.g
                        ? x(r, e.promise(), 3)
                        : r.return(t);
                  });
                }),
                (Sx.prototype.add = function (e) {
                  for (
                    var t = vx(this.g, "session-ids"), n = t.store(), r = (e = g(e)).next();
                    !r.done;
                    r = e.next()
                  )
                    n.add(r.value);
                  return t.promise();
                }),
                (Sx.prototype.remove = function (e) {
                  var t,
                    n = this;
                  return D(function (r) {
                    return 1 == r.g
                      ? x(
                          r,
                          gx((t = vx(n.g, "session-ids")), function (t, n, r) {
                            e.includes(n.sessionId) && r.delete();
                          }),
                          2,
                        )
                      : x(r, t.promise(), 0);
                  });
                }),
                (Ax.prototype.destroy = function () {
                  for (var e = [], t = g(this.g.values()), n = t.next(); !n.done; n = t.next())
                    e.push(n.value.destroy());
                  return (this.g.clear(), Promise.all(e));
                }),
                (Ax.prototype.init = function () {
                  var e = this;
                  Cx.forEach(function (t, n) {
                    (t = t()) && e.g.set(n, t);
                  });
                  for (var t = [], n = g(this.g.values()), r = n.next(); !r.done; r = n.next())
                    t.push(r.value.init());
                  return Promise.all(t);
                }),
                V("shaka.offline.StorageMuxer", Ax),
                (Ax.unregister = function (e) {
                  Cx.delete(e);
                }),
                (Ax.register = Ix),
                (Ax.prototype.destroy = Ax.prototype.destroy));
              var Cx = new Map();
              function Mx() {
                bx.apply(this, arguments);
              }
              function Rx(e, t) {
                !(function (e) {
                  var t = e.streams.filter(function (e) {
                    return "audio" == e.contentType;
                  });
                  if (
                    ((e = e.streams.filter(function (e) {
                      return "video" == e.contentType;
                    })),
                    !t.every(function (e) {
                      return e.variantIds;
                    }) ||
                      !e.every(function (e) {
                        return e.variantIds;
                      }))
                  ) {
                    for (var n = g(t), r = n.next(); !r.done; r = n.next()) r.value.variantIds = [];
                    for (r = (n = g(e)).next(); !r.done; r = n.next()) r.value.variantIds = [];
                    if (((n = 0), e.length && !t.length)) {
                      r = n++;
                      for (var i = g(e), a = i.next(); !a.done; a = i.next()) a.value.variantIds.push(r);
                    }
                    if (!e.length && t.length)
                      for (r = n++, a = (i = g(t)).next(); !a.done; a = i.next()) a.value.variantIds.push(r);
                    if (e.length && t.length)
                      for (r = (t = g(t)).next(); !r.done; r = t.next())
                        for (r = r.value, a = (i = g(e)).next(); !a.done; a = i.next()) {
                          a = a.value;
                          var o = n++;
                          (r.variantIds.push(o), a.variantIds.push(o));
                        }
                  }
                })(e);
                for (var n = g(e.streams), r = n.next(); !r.done; r = n.next());
                return e.streams.map(function (n) {
                  return (function (e, t, n) {
                    var r = e.initSegmentUri ? _x(e.initSegmentUri) : null,
                      i = t + e.presentationTimeOffset,
                      a = t + n;
                    return {
                      id: e.id,
                      originalId: null,
                      groupId: null,
                      primary: e.primary,
                      type: e.contentType,
                      mimeType: e.mimeType,
                      codecs: e.codecs,
                      frameRate: e.frameRate,
                      pixelAspectRatio: void 0,
                      hdr: void 0,
                      colorGamut: void 0,
                      videoLayout: void 0,
                      kind: e.kind,
                      language: e.language,
                      originalLanguage: e.language || null,
                      label: e.label,
                      width: e.width,
                      height: e.height,
                      initSegmentKey: r,
                      encrypted: e.encrypted,
                      keyIds: new Set([e.keyId]),
                      segments: e.segments.map(function (e) {
                        var n = _x(e.uri);
                        return {
                          startTime: t + e.startTime,
                          endTime: t + e.endTime,
                          dataKey: n,
                          initSegmentKey: r,
                          appendWindowStart: t,
                          appendWindowEnd: a,
                          timestampOffset: i,
                          tilesLayout: "",
                          mimeType: null,
                          codecs: null,
                          thumbnailSprite: null,
                        };
                      }),
                      variantIds: e.variantIds,
                      roles: [],
                      forced: !1,
                      audioSamplingRate: null,
                      channelsCount: null,
                      spatialAudio: !1,
                      closedCaptions: null,
                      tilesLayout: void 0,
                      external: !1,
                      fastSwitching: !1,
                      isAudioMuxedInVideo: !1,
                    };
                  })(n, e.startTime, t);
                });
              }
              function _x(e) {
                var t;
                if (
                  (t = /^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e)) ||
                  (t = /^offline:segment\/([0-9]+)$/.exec(e))
                )
                  return Number(t[1]);
                throw new Ke(2, 9, 9004, "Could not parse uri " + e);
              }
              function Dx() {
                bx.apply(this, arguments);
              }
              function Px(e, t, n) {
                return {
                  id: e.id,
                  originalId: e.originalId,
                  groupId: null,
                  primary: e.primary,
                  type: e.contentType,
                  mimeType: e.mimeType,
                  codecs: e.codecs,
                  frameRate: e.frameRate,
                  pixelAspectRatio: e.pixelAspectRatio,
                  hdr: void 0,
                  colorGamut: void 0,
                  videoLayout: void 0,
                  kind: e.kind,
                  language: e.language,
                  originalLanguage: e.language || null,
                  label: e.label,
                  width: e.width,
                  height: e.height,
                  encrypted: e.encrypted,
                  keyIds: new Set([e.keyId]),
                  segments: e.segments.map(function (r) {
                    return {
                      startTime: t + r.startTime,
                      endTime: t + r.endTime,
                      initSegmentKey: e.initSegmentKey,
                      appendWindowStart: t,
                      appendWindowEnd: n,
                      timestampOffset: t - e.presentationTimeOffset,
                      dataKey: r.dataKey,
                      tilesLayout: "",
                      mimeType: null,
                      codecs: null,
                      thumbnailSprite: null,
                    };
                  }),
                  variantIds: e.variantIds,
                  roles: [],
                  forced: !1,
                  audioSamplingRate: null,
                  channelsCount: null,
                  spatialAudio: !1,
                  closedCaptions: null,
                  tilesLayout: void 0,
                  external: !1,
                  fastSwitching: !1,
                  isAudioMuxedInVideo: !1,
                };
              }
              function Lx() {
                bx.apply(this, arguments);
              }
              function Nx() {
                this.m = this.j = this.i = this.h = this.g = this.l = null;
              }
              (p(Mx, bx),
                (Mx.prototype.updateManifestExpiration = function (e, t) {
                  var n,
                    r,
                    i,
                    a = this;
                  return D(function (o) {
                    return (
                      (n = vx(a.h, a.g)),
                      (r = n.store()),
                      (i = new Ii()),
                      (r.get(e).onsuccess = function (n) {
                        (n = n.target.result)
                          ? ((n.expiration = t), r.put(n), i.resolve())
                          : i.reject(new Ke(2, 9, 9012, "Could not find values for " + e));
                      }),
                      x(o, Promise.all([n.promise(), i]), 0)
                    );
                  });
                }),
                (Mx.prototype.Ud = function (e) {
                  var t, n, r, i, a, o;
                  return D(function (s) {
                    if (1 == s.g) {
                      for (t = [], n = 0; n < e.periods.length; ++n)
                        ((r = n == e.periods.length - 1 ? e.duration : e.periods[n + 1].startTime),
                          (i = r - e.periods[n].startTime),
                          (a = Rx(e.periods[n], i)),
                          t.push(a));
                      return x(s, Vm(t), 2);
                    }
                    return (
                      (o = s.h),
                      s.return({
                        creationTime: 0,
                        originalManifestUri: e.originalManifestUri,
                        duration: e.duration,
                        size: e.size,
                        expiration: null == e.expiration ? 1 / 0 : e.expiration,
                        streams: o,
                        sessionIds: e.sessionIds,
                        drmInfo: e.drmInfo,
                        appMetadata: e.appMetadata,
                        sequenceMode: !1,
                      })
                    );
                  });
                }),
                (Mx.prototype.Xh = function (e) {
                  return { data: e.data };
                }),
                p(Dx, bx),
                (Dx.prototype.Ud = function (e) {
                  var t, n, r, i, a, o;
                  return D(function (s) {
                    if (1 == s.g) {
                      for (t = [], n = 0; n < e.periods.length; ++n) {
                        ((r = n == e.periods.length - 1 ? e.duration : e.periods[n + 1].startTime),
                          (i = r - e.periods[n].startTime));
                        for (
                          var u = e.periods[n], l = [], d = g(u.streams), c = d.next();
                          !c.done;
                          c = d.next()
                        )
                          0 != (c = c.value).variantIds.length && l.push(Px(c, u.startTime, u.startTime + i));
                        ((a = l), t.push(a));
                      }
                      return x(s, Vm(t), 2);
                    }
                    return (
                      (o = s.h),
                      s.return({
                        appMetadata: e.appMetadata,
                        creationTime: 0,
                        drmInfo: e.drmInfo,
                        duration: e.duration,
                        expiration: null == e.expiration ? 1 / 0 : e.expiration,
                        originalManifestUri: e.originalManifestUri,
                        sessionIds: e.sessionIds,
                        size: e.size,
                        streams: o,
                        sequenceMode: !1,
                      })
                    );
                  });
                }),
                p(Lx, bx),
                ((i = Lx.prototype).hasFixedKeySpace = function () {
                  return !1;
                }),
                (i.addSegments = function (e) {
                  return this.add(this.i, e);
                }),
                (i.addManifests = function (e) {
                  return this.add(this.g, e);
                }),
                (i.updateManifest = function (e, t) {
                  return (function (e, t, n) {
                    var r = (e = vx(e.h, e.g)).store();
                    return (
                      (r.get(t).onsuccess = function () {
                        r.put(n, t);
                      }),
                      e.promise()
                    );
                  })(this, e, t);
                }),
                (i.Ud = function (e) {
                  return (null == e.expiration && (e.expiration = 1 / 0), Promise.resolve(e));
                }),
                ((i = Nx.prototype).init = function () {
                  var t = this,
                    n = new Ii(),
                    r = !1,
                    i = new Mr(function () {
                      ((r = !0), n.reject(new Ke(2, 9, 9017)));
                    });
                  "number" == typeof Ox && Ox > 0 && i.ka(Ox);
                  var a = e.indexedDB.open("shaka_offline_db", 5);
                  return (
                    (a.onsuccess = function () {
                      if (!r) {
                        i.stop();
                        var e = a.result;
                        t.l = e;
                        var o = e.objectStoreNames;
                        ((o =
                          o.contains("manifest") && o.contains("segment")
                            ? new Mx(e, "segment", "manifest")
                            : null),
                          (t.g = o),
                          (o =
                            (o = e.objectStoreNames).contains("manifest-v2") && o.contains("segment-v2")
                              ? new Dx(e, "segment-v2", "manifest-v2")
                              : null),
                          (t.h = o),
                          (o =
                            (o = e.objectStoreNames).contains("manifest-v3") && o.contains("segment-v3")
                              ? new Dx(e, "segment-v3", "manifest-v3")
                              : null),
                          (t.i = o),
                          (o =
                            (o = e.objectStoreNames).contains("manifest-v5") && o.contains("segment-v5")
                              ? new Lx(e, "segment-v5", "manifest-v5")
                              : null),
                          (t.j = o),
                          (e = e.objectStoreNames.contains("session-ids") ? new Sx(e) : null),
                          (t.m = e),
                          n.resolve());
                      }
                    }),
                    (a.onupgradeneeded = function () {
                      for (
                        var e = a.result, t = g(["segment-v5", "manifest-v5", "session-ids"]), n = t.next();
                        !n.done;
                        n = t.next()
                      )
                        ((n = n.value),
                          e.objectStoreNames.contains(n) || e.createObjectStore(n, { autoIncrement: !0 }));
                    }),
                    (a.onerror = function (e) {
                      r || (i.stop(), n.reject(new Ke(2, 9, 9001, a.error)), e.preventDefault());
                    }),
                    n
                  );
                }),
                (i.destroy = function () {
                  var e = this;
                  return D(function (t) {
                    switch (t.g) {
                      case 1:
                        if (!e.g) {
                          t.A(2);
                          break;
                        }
                        return x(t, e.g.destroy(), 2);
                      case 2:
                        if (!e.h) {
                          t.A(4);
                          break;
                        }
                        return x(t, e.h.destroy(), 4);
                      case 4:
                        if (!e.i) {
                          t.A(6);
                          break;
                        }
                        return x(t, e.i.destroy(), 6);
                      case 6:
                        if (!e.j) {
                          t.A(8);
                          break;
                        }
                        return x(t, e.j.destroy(), 8);
                      case 8:
                        if (!e.m) {
                          t.A(10);
                          break;
                        }
                        return x(t, e.m.destroy(), 10);
                      case 10:
                        (e.l && e.l.close(), T(t));
                    }
                  });
                }),
                (i.getCells = function () {
                  var e = new Map();
                  return (
                    this.g && e.set("v1", this.g),
                    this.h && e.set("v2", this.h),
                    this.i && e.set("v3", this.i),
                    this.j && e.set("v5", this.j),
                    e
                  );
                }),
                (i.getEmeSessionCell = function () {
                  return this.m;
                }),
                (i.erase = function () {
                  var t = this;
                  return D(function (n) {
                    switch (n.g) {
                      case 1:
                        if (!t.g) {
                          n.A(2);
                          break;
                        }
                        return x(n, t.g.destroy(), 2);
                      case 2:
                        if (!t.h) {
                          n.A(4);
                          break;
                        }
                        return x(n, t.h.destroy(), 4);
                      case 4:
                        if (!t.i) {
                          n.A(6);
                          break;
                        }
                        return x(n, t.i.destroy(), 6);
                      case 6:
                        if (!t.j) {
                          n.A(8);
                          break;
                        }
                        return x(n, t.j.destroy(), 8);
                      case 8:
                        return (
                          t.l && t.l.close(),
                          x(
                            n,
                            (function () {
                              var t = new Ii(),
                                n = e.indexedDB.deleteDatabase("shaka_offline_db");
                              return (
                                (n.onblocked = function () {}),
                                (n.onsuccess = function () {
                                  t.resolve();
                                }),
                                (n.onerror = function (e) {
                                  (t.reject(new Ke(2, 9, 9001, n.error)), e.preventDefault());
                                }),
                                t
                              );
                            })(),
                            10,
                          )
                        );
                      case 10:
                        return (
                          (t.l = null),
                          (t.g = null),
                          (t.h = null),
                          (t.i = null),
                          (t.j = null),
                          x(n, t.init(), 0)
                        );
                    }
                  });
                }));
              var Ox = 5;
              function Ux(e, t, n, r) {
                ((this.g = e),
                  (this.i = t),
                  (this.h = n),
                  (this.l = r),
                  (this.j = ["offline:", e, "/", t, "/", n, "/", r].join("")));
              }
              function Bx(e) {
                if (null == (e = /^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e))) return null;
                var t = e[1];
                if ("manifest" != t && "segment" != t) return null;
                var n = e[2];
                if (!n) return null;
                var r = e[3];
                return r && null != t ? new Ux(t, n, r, Number(e[4])) : null;
              }
              function jx(e, t) {
                ((this.h = e), (this.g = t));
              }
              function Fx(e, t) {
                var n = new uu(null, 0);
                n.Ab(t.duration);
                var r = t.streams.filter(function (e) {
                    return "audio" == e.type;
                  }),
                  i = t.streams.filter(function (e) {
                    return "video" == e.type;
                  });
                ((r = (function (e, t, n, r) {
                  for (var i = new Set(), a = g(t), o = a.next(); !o.done; o = a.next())
                    for (var s = (o = g(o.value.variantIds)).next(); !s.done; s = o.next()) i.add(s.value);
                  for (a = g(n), o = a.next(); !o.done; o = a.next())
                    for (o = g(o.value.variantIds), s = o.next(); !s.done; s = o.next()) i.add(s.value);
                  for (a = new Map(), i = g(i), o = i.next(); !o.done; o = i.next())
                    ((o = o.value),
                      a.set(o, {
                        id: o,
                        language: "",
                        disabledUntilTime: 0,
                        primary: !1,
                        audio: null,
                        video: null,
                        bandwidth: 0,
                        allowedByApplication: !0,
                        allowedByKeySystem: !0,
                        decodingInfos: [],
                      }));
                  for (t = g(t), i = t.next(); !i.done; i = t.next())
                    for (
                      o = i.value, i = Vx(e, o, r), o = g(o.variantIds), s = o.next();
                      !s.done;
                      s = o.next()
                    )
                      (((s = a.get(s.value)).language = i.language),
                        (s.primary = s.primary || i.primary),
                        (s.audio = i));
                  for (n = g(n), t = n.next(); !t.done; t = n.next())
                    for (
                      i = t.value, t = Vx(e, i, r), i = g(i.variantIds), o = i.next();
                      !o.done;
                      o = i.next()
                    )
                      (((o = a.get(o.value)).primary = o.primary || t.primary), (o.video = t));
                  return a;
                })(e, r, i, n)),
                  (i = t.streams
                    .filter(function (e) {
                      return e.type == gt;
                    })
                    .map(function (t) {
                      return Vx(e, t, n);
                    })));
                var a = t.streams
                    .filter(function (e) {
                      return "image" == e.type;
                    })
                    .map(function (t) {
                      return Vx(e, t, n);
                    }),
                  o = t.drmInfo ? [t.drmInfo] : [];
                if (t.drmInfo)
                  for (var s = g(r.values()), u = s.next(); !u.done; u = s.next())
                    ((u = u.value).audio && u.audio.encrypted && (u.audio.drmInfos = o),
                      u.video && u.video.encrypted && (u.video.drmInfos = o));
                return {
                  presentationTimeline: n,
                  offlineSessionIds: t.sessionIds,
                  variants: Array.from(r.values()),
                  textStreams: i,
                  imageStreams: a,
                  sequenceMode: t.sequenceMode || !1,
                  ignoreManifestTimestampsInSegmentsMode: !1,
                  type: t.type || "UNKNOWN",
                  serviceDescription: null,
                  nextUrl: null,
                  periodCount: 1,
                  gapCount: 0,
                  isLowLatency: !1,
                  startTime: null,
                };
              }
              function Vx(e, t, n) {
                var r = t.segments.map(function (n) {
                  return (function (e, t, n) {
                    var r = new Ux("segment", e.h, e.g, t.dataKey);
                    return (
                      (e = new Fo(
                        t.startTime,
                        t.endTime,
                        function () {
                          return [r.toString()];
                        },
                        0,
                        null,
                        null != t.initSegmentKey
                          ? (function (e, t) {
                              var n = new Ux("segment", e.h, e.g, t);
                              return new Bo(
                                function () {
                                  return [n.toString()];
                                },
                                0,
                                null,
                              );
                            })(e, t.initSegmentKey)
                          : null,
                        t.timestampOffset,
                        t.appendWindowStart,
                        t.appendWindowEnd,
                        [],
                        t.tilesLayout || "",
                      )),
                      (e.mimeType = t.mimeType || n.mimeType || ""),
                      (e.codecs = t.codecs || n.codecs || ""),
                      t.thumbnailSprite && e.Mf(t.thumbnailSprite),
                      e
                    );
                  })(e, n, t);
                });
                return (
                  n.me(r),
                  {
                    id: t.id,
                    originalId: t.originalId,
                    groupId: t.groupId,
                    createSegmentIndex: function () {
                      return Promise.resolve();
                    },
                    segmentIndex: new _u(r),
                    mimeType: t.mimeType,
                    codecs: t.codecs,
                    width: t.width || void 0,
                    height: t.height || void 0,
                    frameRate: t.frameRate,
                    pixelAspectRatio: t.pixelAspectRatio,
                    hdr: t.hdr,
                    colorGamut: t.colorGamut,
                    videoLayout: t.videoLayout,
                    kind: t.kind,
                    encrypted: t.encrypted,
                    drmInfos: [],
                    keyIds: t.keyIds,
                    language: t.language,
                    originalLanguage: t.originalLanguage || null,
                    label: t.label,
                    type: t.type,
                    primary: t.primary,
                    trickModeVideo: null,
                    dependencyStream: null,
                    emsgSchemeIdUris: null,
                    roles: t.roles,
                    forced: t.forced,
                    channelsCount: t.channelsCount,
                    audioSamplingRate: t.audioSamplingRate,
                    spatialAudio: t.spatialAudio,
                    closedCaptions: t.closedCaptions,
                    tilesLayout: t.tilesLayout,
                    mssPrivateData: t.mssPrivateData,
                    accessibilityPurpose: null,
                    external: t.external,
                    fastSwitching: t.fastSwitching,
                    fullMimeTypes: new Set([lr(t.mimeType, t.codecs)]),
                    isAudioMuxedInVideo: t.isAudioMuxedInVideo || !1,
                    baseOriginalId: null,
                  }
                );
              }
              function Hx() {
                this.g = null;
              }
              function Gx() {}
              function zx(e, t) {
                var n = Bx(e);
                return (
                  (e =
                    n && "manifest" == n.g
                      ? _i(
                          (e = {
                            uri: e,
                            originalUri: e,
                            data: new ArrayBuffer(0),
                            headers: { "content-type": "application/x-offline-manifest" },
                            originalRequest: t,
                          }),
                        )
                      : n && "segment" == n.g
                        ? (function (e, t, n) {
                            var r = new Ax();
                            return _i(void 0)
                              .Xa(function () {
                                return r.init();
                              })
                              .Xa(function () {
                                return kx(r, t.Pb(), t.cb());
                              })
                              .Xa(function (e) {
                                return e.getSegments([t.key()]);
                              })
                              .Xa(function (e) {
                                return { uri: t, data: e[0].data, headers: {}, originalRequest: n };
                              })
                              .finally(function () {
                                return r.destroy();
                              });
                          })(n.key(), n, t)
                        : Mi(new Ke(2, 1, 9004, e))),
                  e
                );
              }
              function Xx(e, t, n) {
                var r, i, a, o, s, u;
                return D(function (l) {
                  switch (l.g) {
                    case 1:
                      r = [];
                      for (var d = [], c = g(n), h = c.next(); !h.done; h = c.next()) {
                        h = h.value;
                        for (var p = !1, f = g(d), m = f.next(); !m.done; m = f.next())
                          if (Wx((m = m.value).info, h)) {
                            (m.sessionIds.push(h.sessionId), (p = !0));
                            break;
                          }
                        p || d.push({ info: h, sessionIds: [h.sessionId] });
                      }
                      ((i = g(d)), (a = i.next()));
                    case 2:
                      if (a.done) {
                        l.A(4);
                        break;
                      }
                      return (
                        (o = a.value),
                        (s = (function (e, t, n) {
                          var r, i;
                          return D(function (a) {
                            switch (a.g) {
                              case 1:
                                return (
                                  (r = new ya({
                                    vc: t,
                                    onError: function () {},
                                    zf: function () {},
                                    onExpirationUpdated: function () {},
                                    onEvent: function () {},
                                  })),
                                  w(a, 2),
                                  r.configure(e),
                                  x(
                                    a,
                                    (function (e, t, n, r, i, a) {
                                      var o, s, u, l, d;
                                      return D(function (c) {
                                        return 1 == c.g
                                          ? ((o = []),
                                            a.length && o.push(a[0].contentType),
                                            i.length && o.push(i[0].contentType),
                                            (s = function (e) {
                                              return (
                                                ((e = dt(t, e, null)).licenseServerUri = n),
                                                (e.serverCertificate = r),
                                                (e.persistentStateRequired = !0),
                                                (e.sessionType = "persistent-license"),
                                                e
                                              );
                                            }),
                                            (u = gi(o)).video &&
                                              ((l = s(a[0].encryptionScheme || "")),
                                              u.video.drmInfos.push(l)),
                                            u.audio &&
                                              ((d = s(i[0].encryptionScheme || "")),
                                              u.audio.drmInfos.push(d)),
                                            x(c, Jr([u], !0, e.O, []), 2))
                                          : (Qi(e.j), c.return(Ea(e, [u])));
                                      });
                                    })(
                                      r,
                                      n.info.keySystem,
                                      n.info.licenseUri,
                                      n.info.serverCertificate,
                                      n.info.audioCapabilities,
                                      n.info.videoCapabilities,
                                    ),
                                    4,
                                  )
                                );
                              case 4:
                                A(a, 3);
                                break;
                              case 2:
                                return (E(a), x(a, r.destroy(), 5));
                              case 5:
                                return a.return([]);
                              case 3:
                                return (
                                  (i = []),
                                  x(
                                    a,
                                    Promise.all(
                                      n.sessionIds.map(function (e) {
                                        return D(function (t) {
                                          return 1 == t.g
                                            ? (w(t, 2),
                                              x(
                                                t,
                                                (function (e, t) {
                                                  var n, r, i;
                                                  return D(function (a) {
                                                    return 1 == a.g
                                                      ? x(
                                                          a,
                                                          Ca(e, t, { initData: null, initDataType: null }),
                                                          2,
                                                        )
                                                      : 3 != a.g
                                                        ? (n = a.h)
                                                          ? ((r = []),
                                                            (i = e.i.get(n)) &&
                                                              ((i.Kb = new Ii()), r.push(i.Kb)),
                                                            r.push(n.remove()),
                                                            x(a, Promise.all(r), 3))
                                                          : a.return()
                                                        : (e.i.delete(n), void T(a));
                                                  });
                                                })(r, e),
                                                4,
                                              ))
                                            : 2 != t.g
                                              ? (i.push(e), A(t, 0))
                                              : (E(t), void T(t));
                                        });
                                      }),
                                    ),
                                    6,
                                  )
                                );
                              case 6:
                                return x(a, r.destroy(), 7);
                              case 7:
                                return a.return(i);
                            }
                          });
                        })(e, t, o)),
                        x(l, s, 5)
                      );
                    case 5:
                      ((u = l.h), (r = r.concat(u)), (a = i.next()), l.A(2));
                      break;
                    case 4:
                      return l.return(r);
                  }
                });
              }
              function Wx(e, t) {
                function n(e, t) {
                  return e.robustness == t.robustness && e.contentType == t.contentType;
                }
                return (
                  e.keySystem == t.keySystem &&
                  e.licenseUri == t.licenseUri &&
                  Z(e.audioCapabilities, t.audioCapabilities, n) &&
                  Z(e.videoCapabilities, t.videoCapabilities, n)
                );
              }
              function Kx(e, t) {
                var n = Fx(new jx(e.Pb(), e.cb()), t),
                  r = t.appMetadata || {};
                return (
                  (n = qx(n)),
                  {
                    offlineUri: e.toString(),
                    originalManifestUri: t.originalManifestUri,
                    duration: t.duration,
                    size: t.size,
                    expiration: t.expiration,
                    tracks: n,
                    appMetadata: r,
                    isIncomplete: t.isIncomplete || !1,
                  }
                );
              }
              function qx(e) {
                for (var t = [], n = ui(e.variants), r = (n = g(n)).next(); !r.done; r = n.next())
                  t.push(ti(r.value));
                for (n = (e = g(e.textStreams)).next(); !n.done; n = e.next()) t.push(ni(n.value));
                return t;
              }
              function Yx() {
                this.g = new Map();
              }
              function $x(e, t) {
                var n = t.audio,
                  r = t.video;
                if (
                  (n && !r && e.g.set(n.id, n.bandwidth || t.bandwidth),
                  !n && r && e.g.set(r.id, r.bandwidth || t.bandwidth),
                  n && r)
                ) {
                  var i = n.bandwidth || 393216,
                    a = r.bandwidth || t.bandwidth - i;
                  (a <= 0 && (a = t.bandwidth), e.g.set(n.id, i), e.g.set(r.id, a));
                }
              }
              function Jx(e, t) {
                e.g.set(t.id, t.bandwidth || 2048);
              }
              function Qx(e, t) {
                return (null == (e = e.g.get(t)) && (e = 0), e);
              }
              function Zx(e) {
                var t = this;
                if (e && e.constructor != Jc) throw new Ke(2, 9, 9008);
                ((this.g = this.h = null),
                  e
                    ? ((this.h = e.g), (this.g = e.Yb()))
                    : ((this.h = td()), (this.g = new Fi()), this.g.configure(this.h.networking)),
                  (this.i = []),
                  (this.l = []));
                var n = !e;
                ((this.j = new Ji(function () {
                  var e, r, i, a, o;
                  return D(function (s) {
                    switch (s.g) {
                      case 1:
                        return x(
                          s,
                          Promise.all(
                            t.l.map(function (e) {
                              return hx(e);
                            }),
                          ),
                          2,
                        );
                      case 2:
                        for (e = function () {}, r = [], i = g(t.i), a = i.next(); !a.done; a = i.next())
                          ((o = a.value), r.push(o.then(e, e)));
                        return x(s, Promise.all(r), 3);
                      case 3:
                        if (!n) {
                          s.A(4);
                          break;
                        }
                        return x(s, t.g.destroy(), 4);
                      case 4:
                        ((t.h = null), (t.g = null), T(s));
                    }
                  });
                })),
                  (this.m = 1e9));
              }
              function eT() {
                if (Jv(oe()))
                  e: {
                    for (var e = g(Cx.values()), t = e.next(); !t.done; t = e.next())
                      if ((t = (t = t.value)())) {
                        (t.destroy(), (e = !0));
                        break e;
                      }
                    e = !1;
                  }
                else e = !1;
                return e;
              }
              function tT(e) {
                var t, n, r;
                return D(function (i) {
                  switch (i.g) {
                    case 1:
                      return x(i, (t = new Ax()).init(), 2);
                    case 2:
                      return x(i, Ex(t), 3);
                    case 3:
                      return (
                        (n = i.h),
                        (r = new Ux("manifest", n.path.Pb, n.path.cb, e)),
                        x(i, t.destroy(), 4)
                      );
                    case 4:
                      return x(i, new Zx().remove(r.toString()), 0);
                  }
                });
              }
              function nT(e, t, n, r, i, a) {
                var o, s, u, l, d, c, h, p, f, m, v;
                return D(function (y) {
                  switch (y.g) {
                    case 1:
                      for (o = !1, w(y, 2), s = !0, u = g(n.streams), l = u.next(); !l.done; l = u.next())
                        for (d = l.value, c = g(d.segments), h = c.next(); !h.done; h = c.next())
                          ((p = h.value),
                            null != (f = p.pendingSegmentRefId ? r[p.pendingSegmentRefId] : null) &&
                              ((p.dataKey = f), (p.pendingSegmentRefId = void 0)),
                            null != (f = p.pendingInitSegmentRefId ? r[p.pendingInitSegmentRefId] : null) &&
                              ((p.initSegmentKey = f), (p.pendingInitSegmentRefId = void 0)),
                            p.pendingSegmentRefId && (s = !1),
                            p.pendingInitSegmentRefId && (s = !1));
                      return ((n.size += i), s && (n.isIncomplete = !1), x(y, e.updateManifest(t, n), 4));
                    case 4:
                      ((o = !0), a(), A(y, 0));
                      break;
                    case 2:
                      return ((m = E(y)), x(y, tT(t), 5));
                    case 5:
                      if (o) {
                        y.A(6);
                        break;
                      }
                      return (
                        (v = Object.values(r)),
                        x(
                          y,
                          e.removeSegments(v, function () {}),
                          6,
                        )
                      );
                    case 6:
                      throw m;
                  }
                });
              }
              function rT(e) {
                return e.variants.some(function (e) {
                  var t = e.audio && e.audio.encrypted;
                  return (e.video && e.video.encrypted) || t;
                });
              }
              function iT(e) {
                return e.variants.some(function (e) {
                  return (e.video ? e.video.drmInfos : [])
                    .concat(e.audio ? e.audio.drmInfos : [])
                    .some(function (e) {
                      return e.initData && e.initData.length;
                    });
                });
              }
              function aT(e, t, n, r) {
                if (
                  ((t.expiration = n.Zd()), (n = Aa(n)), (t.sessionIds = r ? n : []), rT(e) && r && !n.length)
                )
                  throw new Ke(2, 9, 9007);
              }
              function oT(e, t) {
                for (var n = [], r = g(e.streams), i = r.next(); !i.done; i = r.next())
                  ((i = i.value),
                    t && "video" == i.type
                      ? n.push({
                          contentType: lr(i.mimeType, i.codecs),
                          robustness: e.drmInfo.videoRobustness,
                        })
                      : t ||
                        "audio" != i.type ||
                        n.push({
                          contentType: lr(i.mimeType, i.codecs),
                          robustness: e.drmInfo.audioRobustness,
                        }));
                return n;
              }
              function sT(e, t, n) {
                return D(function (r) {
                  return x(
                    r,
                    (function (e, t, n, r) {
                      var i, a, o;
                      return D(function (s) {
                        return 1 == s.g
                          ? r.drmInfo
                            ? ((i = (function (e) {
                                var t = Array.from(e.g.keys());
                                if (!t.length)
                                  throw new Ke(2, 9, 9e3, "No supported storage mechanisms found");
                                return e.g.get(t[0]).getEmeSessionCell();
                              })(n)),
                              (a = r.sessionIds.map(function (e) {
                                return {
                                  sessionId: e,
                                  keySystem: r.drmInfo.keySystem,
                                  licenseUri: r.drmInfo.licenseServerUri,
                                  serverCertificate: r.drmInfo.serverCertificate,
                                  audioCapabilities: oT(r, !1),
                                  videoCapabilities: oT(r, !0),
                                };
                              })),
                              x(s, Xx(t, e, a), 2))
                            : s.return()
                          : 3 != s.g
                            ? ((o = s.h), x(s, i.remove(o), 3))
                            : x(
                                s,
                                i.add(
                                  a.filter(function (e) {
                                    return !o.includes(e.sessionId);
                                  }),
                                ),
                                0,
                              );
                      });
                    })(e.g, e.h.drm, n, t),
                    0,
                  );
                });
              }
              function uT(e, t, n) {
                function r() {}
                var i = (function (e) {
                  for (var t = new Set(), n = (e = g(e.streams)).next(); !n.done; n = e.next())
                    for (var r = (n = g(n.value.segments)).next(); !r.done; r = n.next())
                      (null != (r = r.value).initSegmentKey && t.add(r.initSegmentKey), t.add(r.dataKey));
                  return Array.from(t);
                })(n);
                return (Kx(t, n), Promise.all([e.removeSegments(i, r), e.removeManifests([t.key()], r)]));
              }
              function lT(e, t) {
                var n;
                return D(function (r) {
                  switch (r.g) {
                    case 1:
                      return (w(r, 2), x(r, ol(t, e.g, e.h.streaming.retryParameters), 4));
                    case 4:
                      ((n = r.h), A(r, 3));
                      break;
                    case 2:
                      E(r);
                    case 3:
                      if (n) return r.return(n);
                      throw new Ke(1, 2, 2011, t);
                  }
                });
              }
              function dT(e, t, n, r, i, a) {
                var o = {
                    id: r.id,
                    originalId: r.originalId,
                    groupId: r.groupId,
                    primary: r.primary,
                    type: r.type,
                    mimeType: r.mimeType,
                    codecs: r.codecs,
                    frameRate: r.frameRate,
                    pixelAspectRatio: r.pixelAspectRatio,
                    hdr: r.hdr,
                    colorGamut: r.colorGamut,
                    videoLayout: r.videoLayout,
                    kind: r.kind,
                    language: r.language,
                    originalLanguage: r.originalLanguage,
                    label: r.label,
                    width: r.width || null,
                    height: r.height || null,
                    encrypted: r.encrypted,
                    keyIds: r.keyIds,
                    segments: [],
                    variantIds: [],
                    roles: r.roles,
                    forced: r.forced,
                    channelsCount: r.channelsCount,
                    audioSamplingRate: r.audioSamplingRate,
                    spatialAudio: r.spatialAudio,
                    closedCaptions: r.closedCaptions,
                    tilesLayout: r.tilesLayout,
                    mssPrivateData: r.mssPrivateData,
                    external: r.external,
                    fastSwitching: r.fastSwitching,
                    isAudioMuxedInVideo: r.isAudioMuxedInVideo,
                  },
                  s = i.offline.numberOfParallelDownloads,
                  u = 0 === s ? r.id : 0;
                return (
                  (function (e, t, n) {
                    if (null != (t = e.segmentIndex.find(t)))
                      for (var r = e.segmentIndex.get(t); r; ) (n(r, t), (r = e.segmentIndex.get(++t)));
                  })(r, n.presentationTimeline.Hb(), function (n, i) {
                    var l = ox(n),
                      d = void 0;
                    if (!a.has(l)) {
                      var c = n.endTime - n.startTime;
                      ((c = Qx(t, r.id) * c), (c = lx(e.g, c)), a.set(l, new ax(n, c, u, !1, i)));
                    }
                    (n.ea &&
                      ((d = ox(n.ea)),
                      a.has(d) ||
                        ((c = 0.5 * Qx(t, r.id)), (c = lx(e.g, c)), a.set(d, new ax(n.ea, c, u, !0, i)))),
                      o.segments.push({
                        pendingInitSegmentRefId: d,
                        initSegmentKey: d ? 0 : null,
                        startTime: n.startTime,
                        endTime: n.endTime,
                        appendWindowStart: n.appendWindowStart,
                        appendWindowEnd: n.appendWindowEnd,
                        timestampOffset: n.timestampOffset,
                        tilesLayout: n.tilesLayout,
                        pendingSegmentRefId: l,
                        dataKey: 0,
                        mimeType: n.mimeType,
                        codecs: n.codecs,
                        thumbnailSprite: n.thumbnailSprite,
                      }),
                      0 !== s && (u = (u + 1) % s));
                  }),
                  o
                );
              }
              function cT(e) {
                if (e.j.g) throw new Ke(2, 9, 7001);
              }
              function hT() {
                if (!eT()) throw new Ke(2, 9, 9e3);
              }
              function pT(e, t) {
                return D(function (n) {
                  return 1 == n.g
                    ? (e.i.push(t), S(n, 2), x(n, t, 4))
                    : 2 != n.g
                      ? n.return(n.h)
                      : (k(n), Q(e.i, t), I(n, 0));
                });
              }
              function fT(e) {
                for (var t = new Set(), n = g(e.variants), r = n.next(); !r.done; r = n.next())
                  ((r = r.value).audio && t.add(r.audio), r.video && t.add(r.video));
                for (r = (n = g(e.textStreams)).next(); !r.done; r = n.next()) t.add(r.value);
                for (n = (e = g(e.imageStreams)).next(); !n.done; n = e.next()) t.add(n.value);
                return t;
              }
              (V("shaka.offline.indexeddb.StorageMechanismOpenTimeout", Ox),
                Ix("idb", function () {
                  return oe().Ch() ? new Nx() : null;
                }),
                (Ux.prototype.Pb = function () {
                  return this.i;
                }),
                (Ux.prototype.cb = function () {
                  return this.h;
                }),
                (Ux.prototype.key = function () {
                  return this.l;
                }),
                (Ux.prototype.toString = function () {
                  return this.j;
                }),
                ((i = Hx.prototype).configure = function () {}),
                (i.start = function (e, t) {
                  var n,
                    r,
                    i,
                    a,
                    o,
                    s,
                    u = this;
                  return D(function (l) {
                    switch (l.g) {
                      case 1:
                        if (((n = Bx(e)), (u.g = n), null == n || "manifest" != n.g))
                          throw new Ke(2, 1, 9004, e);
                        return ((r = new Ax()), S(l, 2), x(l, r.init(), 4));
                      case 4:
                        return x(l, kx(r, n.Pb(), n.cb()), 5);
                      case 5:
                        return x(l, l.h.getManifests([n.key()]), 6);
                      case 6:
                        return (
                          (i = l.h),
                          (a = i[0]),
                          (o = new jx(n.Pb(), n.cb())),
                          (s = Fx(o, a)),
                          t.makeTextStreamsForClosedCaptions(s),
                          l.return(s)
                        );
                      case 2:
                        return (k(l), x(l, r.destroy(), 7));
                      case 7:
                        I(l, 0);
                    }
                  });
                }),
                (i.stop = function () {
                  return Promise.resolve();
                }),
                (i.update = function () {}),
                (i.onExpirationUpdated = function (e, t) {
                  var n,
                    r,
                    i,
                    a,
                    o,
                    s,
                    u,
                    l = this;
                  return D(function (d) {
                    switch (d.g) {
                      case 1:
                        return ((n = l.g), (r = new Ax()), w(d, 2, 3), x(d, r.init(), 5));
                      case 5:
                        return x(d, kx(r, n.Pb(), n.cb()), 6);
                      case 6:
                        return x(d, (i = d.h).getManifests([n.key()]), 7);
                      case 7:
                        if (
                          ((a = d.h),
                          (o = a[0]),
                          (s = o.sessionIds.includes(e)),
                          (u = null == o.expiration || o.expiration > t),
                          !s || !u)
                        ) {
                          d.A(3);
                          break;
                        }
                        return x(d, i.updateManifestExpiration(n.key(), t), 3);
                      case 3:
                        return (k(d), x(d, r.destroy(), 10));
                      case 10:
                        I(d, 0);
                        break;
                      case 2:
                        (E(d), d.A(3));
                    }
                  });
                }),
                (i.onInitialVariantChosen = function () {}),
                (i.banLocation = function () {}),
                (i.setMediaElement = function () {}),
                At("application/x-offline-manifest", function () {
                  return new Hx();
                }),
                V("shaka.offline.OfflineScheme", Gx),
                (Gx.plugin = zx),
                Vi("offline", zx),
                ((i = Zx.prototype).destroy = function () {
                  return this.j.destroy();
                }),
                (i.configure = function (e, t) {
                  return (2 == arguments.length && "string" == typeof e && (e = Vl(e, t)), rd(this.h, e));
                }),
                (i.getConfiguration = function () {
                  var e = td();
                  return (rd(e, this.h, td()), e);
                }),
                (i.Yb = function () {
                  return this.g;
                }),
                (i.store = function (e, t, n, r, i) {
                  var a = this,
                    o = this.getConfiguration(),
                    s = new cx(this.g);
                  return (
                    this.l.push(s),
                    (t = (function (e, t, n, r, i, a, o, s) {
                      var u, l, d, c, h, p, f, m, v, y, b, S, C, M, R, _, P, L, N, O, U, B, j;
                      return D(function (F) {
                        switch (F.g) {
                          case 1:
                            return (
                              hT(),
                              (l = u = null),
                              (d = new Ax()),
                              (p = h = c = null),
                              w(F, 2, 3),
                              x(F, a(), 5)
                            );
                          case 5:
                            return (
                              (u = F.h),
                              x(
                                F,
                                (function (e, t, n, r) {
                                  var i, a, o, s, u;
                                  return D(function (l) {
                                    if (1 == l.g)
                                      return (
                                        (i = null),
                                        (a = e.g),
                                        (o = {
                                          networkingEngine: a,
                                          filter: function () {
                                            return Promise.resolve();
                                          },
                                          makeTextStreamsForClosedCaptions: function () {},
                                          onTimelineRegionAdded: function () {},
                                          onEvent: function () {},
                                          onError: function (e) {
                                            i = e;
                                          },
                                          isLowLatencyMode: function () {
                                            return !1;
                                          },
                                          updateDuration: function () {},
                                          newDrmInfo: function () {},
                                          onManifestUpdated: function () {},
                                          getBandwidthEstimate: function () {
                                            return r.abr.defaultBandwidthEstimate;
                                          },
                                          onMetadata: function () {},
                                          disableStream: function () {},
                                          addFont: function () {},
                                        }),
                                        n.configure(r.manifest),
                                        cT(e),
                                        x(l, n.start(t, o), 2)
                                      );
                                    if (3 != l.g)
                                      return (
                                        (s = l.h),
                                        cT(e),
                                        (u = fT(s)),
                                        x(
                                          l,
                                          Promise.all(
                                            Zi(u, function (e) {
                                              return e.createSegmentIndex();
                                            }),
                                          ),
                                          3,
                                        )
                                      );
                                    if ((cT(e), i)) throw i;
                                    return l.return(s);
                                  });
                                })(e, t, u, o),
                                6,
                              )
                            );
                          case 6:
                            if (((f = F.h), cT(e), f.presentationTimeline.W() || f.presentationTimeline.Vc()))
                              throw new Ke(2, 9, 9005, t);
                            ((m = g(r)), (v = m.next()));
                          case 7:
                            if (v.done) {
                              F.A(9);
                              break;
                            }
                            return (
                              (y = v.value),
                              x(
                                F,
                                (function (e, t, n) {
                                  var r, i, a, o, s, u, l, d, c, h, p, f, m, v, y;
                                  return D(function (b) {
                                    switch (b.g) {
                                      case 1:
                                        return x(b, lT(e, t), 2);
                                      case 2:
                                        if ("text/vtt" != (r = b.h)) throw new Ke(1, 2, 2017, t);
                                        return x(
                                          b,
                                          (function (e, t, n) {
                                            var r, i, a;
                                            return D(function (o) {
                                              return 1 == o.g
                                                ? ((r = qi),
                                                  ((i = Gi([e], n)).method = "GET"),
                                                  x(o, t.request(r, i).promise, 2))
                                                : ((a = o.h), o.return(a.data));
                                            });
                                          })(t, e.g, e.h.streaming.retryParameters),
                                          3,
                                        );
                                      case 3:
                                        if (((i = b.h), !(a = wr(r)))) throw new Ke(2, 2, 2014, r);
                                        for (
                                          o = a(),
                                            s = {
                                              periodStart: 0,
                                              segmentStart: 0,
                                              segmentEnd: n.presentationTimeline.getDuration(),
                                              vttOffset: 0,
                                            },
                                            u = Ne(i),
                                            l = o.parseMedia(u, s, t, []),
                                            d = [],
                                            c = g(l),
                                            h = c.next(),
                                            p = {};
                                          !h.done;
                                          p = { Vf: void 0, od: void 0 }, h = c.next()
                                        )
                                          ((p.od = h.value),
                                            (p.Vf = null),
                                            (f = (function (e) {
                                              return function () {
                                                return (
                                                  null == e.Vf && (e.Vf = lt([t], [e.od.payload])),
                                                  e.Vf || []
                                                );
                                              };
                                            })(p)),
                                            (m = new Fo(
                                              p.od.startTime,
                                              p.od.endTime,
                                              f,
                                              0,
                                              null,
                                              null,
                                              0,
                                              0,
                                              1 / 0,
                                            )),
                                            p.od.payload.includes("#xywh") &&
                                              4 === (v = p.od.payload.split("#xywh=")[1].split(",")).length &&
                                              m.Mf({
                                                height: parseInt(v[3], 10),
                                                positionX: parseInt(v[0], 10),
                                                positionY: parseInt(v[1], 10),
                                                width: parseInt(v[2], 10),
                                              }),
                                            d.push(m));
                                        if (((y = r), !d.length)) {
                                          b.A(4);
                                          break;
                                        }
                                        return x(b, ol(d[0].P()[0], e.g, e.h.manifest.retryParameters), 5);
                                      case 5:
                                        y = b.h;
                                      case 4:
                                        return b.return({
                                          id: e.m++,
                                          originalId: null,
                                          groupId: null,
                                          createSegmentIndex: function () {
                                            return Promise.resolve();
                                          },
                                          segmentIndex: new _u(d),
                                          mimeType: y || "",
                                          codecs: "",
                                          kind: "",
                                          encrypted: !1,
                                          drmInfos: [],
                                          keyIds: new Set(),
                                          language: "und",
                                          originalLanguage: null,
                                          label: null,
                                          type: "image",
                                          primary: !1,
                                          trickModeVideo: null,
                                          dependencyStream: null,
                                          emsgSchemeIdUris: null,
                                          roles: [],
                                          forced: !1,
                                          channelsCount: null,
                                          audioSamplingRate: null,
                                          spatialAudio: !1,
                                          closedCaptions: null,
                                          tilesLayout: "1x1",
                                          accessibilityPurpose: null,
                                          external: !0,
                                          fastSwitching: !1,
                                          fullMimeTypes: new Set([lr(y || "", "")]),
                                          isAudioMuxedInVideo: !1,
                                          baseOriginalId: null,
                                        });
                                    }
                                  });
                                })(e, y, f),
                                10,
                              )
                            );
                          case 10:
                            ((b = F.h), f.imageStreams.push(b), cT(e), (v = m.next()), F.A(7));
                            break;
                          case 9:
                            ((S = g(i)), (C = S.next()));
                          case 11:
                            return C.done
                              ? (Ua(o.drm.clearKeys, f.variants),
                                (_ = f.variants.some(function (e) {
                                  if (e.audio)
                                    for (var t = g(e.audio.drmInfos), n = t.next(); !n.done; n = t.next())
                                      if (n.value.licenseServerUri.startsWith("data:")) return !0;
                                  if (e.video)
                                    for (t = (e = g(e.video.drmInfos)).next(); !t.done; t = e.next())
                                      if (t.value.licenseServerUri.startsWith("data:")) return !0;
                                  return !1;
                                })),
                                (P = o.offline.usePersistentLicense),
                                _ && (P = !1),
                                x(
                                  F,
                                  e.md(
                                    f,
                                    function (e) {
                                      p = p || e;
                                    },
                                    o,
                                    P,
                                  ),
                                  15,
                                ))
                              : ((M = C.value),
                                x(
                                  F,
                                  (function (e, t, n, r, i, a, o) {
                                    var s;
                                    return D(function (u) {
                                      if (1 == u.g) return a ? u.A(2) : x(u, lT(e, n), 3);
                                      if (
                                        (2 != u.g && (a = u.h),
                                        (s = {
                                          id: e.m++,
                                          originalId: null,
                                          groupId: null,
                                          createSegmentIndex: function () {
                                            return Promise.resolve();
                                          },
                                          segmentIndex: Pu(0, t.presentationTimeline.getDuration(), [n]),
                                          mimeType: a || "",
                                          codecs: o || "",
                                          kind: i,
                                          encrypted: !1,
                                          drmInfos: [],
                                          keyIds: new Set(),
                                          language: r,
                                          originalLanguage: r,
                                          label: null,
                                          type: gt,
                                          primary: !1,
                                          trickModeVideo: null,
                                          dependencyStream: null,
                                          emsgSchemeIdUris: null,
                                          roles: [],
                                          forced: !1,
                                          channelsCount: null,
                                          audioSamplingRate: null,
                                          spatialAudio: !1,
                                          closedCaptions: null,
                                          accessibilityPurpose: null,
                                          external: !0,
                                          fastSwitching: !1,
                                          fullMimeTypes: new Set([lr(a || "", o || "")]),
                                          isAudioMuxedInVideo: !1,
                                          baseOriginalId: null,
                                        }),
                                        !Sr(lr(s.mimeType, s.codecs)))
                                      )
                                        throw new Ke(2, 2, 2014, a);
                                      return u.return(s);
                                    });
                                  })(e, f, M.uri, M.language, M.kind, M.mime, M.codecs),
                                  14,
                                ));
                          case 14:
                            ((R = F.h), f.textStreams.push(R), cT(e), (C = S.next()), F.A(11));
                            break;
                          case 15:
                            if (((l = F.h), cT(e), p)) throw p;
                            return x(
                              F,
                              (function (e, t, n, r) {
                                var i,
                                  a,
                                  o,
                                  s,
                                  u,
                                  l,
                                  d,
                                  c,
                                  h,
                                  p,
                                  f,
                                  m,
                                  v,
                                  y,
                                  b,
                                  S,
                                  k,
                                  I,
                                  C,
                                  M,
                                  R,
                                  _,
                                  P,
                                  L,
                                  N,
                                  O,
                                  U,
                                  B,
                                  j;
                                return D(function (D) {
                                  switch (D.g) {
                                    case 1:
                                      return (
                                        (i = { width: 1 / 0, height: 1 / 0 }),
                                        (function (e, t, n) {
                                          e.variants = e.variants.filter(function (e) {
                                            return Wr(e, t, n);
                                          });
                                        })(e, n.restrictions, i),
                                        x(
                                          D,
                                          qr(t, e, r, n.drm.preferredKeySystems, n.drm.keySystemsMapping),
                                          2,
                                        )
                                      );
                                    case 2:
                                      for (
                                        a = [],
                                          o = n.preferredDecodingAttributes,
                                          s = n.preferredVideoCodecs,
                                          u = n.preferredAudioCodecs,
                                          l = n.preferredTextFormats,
                                          Xr(e, s, u, o, l),
                                          d = g(e.variants),
                                          c = d.next();
                                        !c.done;
                                        c = d.next()
                                      )
                                        ((h = c.value), a.push(ti(h)));
                                      for (p = g(e.textStreams), f = p.next(); !f.done; f = p.next())
                                        ((m = f.value), a.push(ni(m)));
                                      for (v = g(e.imageStreams), y = v.next(); !y.done; y = v.next())
                                        ((b = y.value), a.push(ri(b)));
                                      return x(D, n.offline.trackSelectionCallback(a), 3);
                                    case 3:
                                      for (
                                        S = D.h,
                                          k = e.presentationTimeline.getDuration(),
                                          I = 0,
                                          C = g(S),
                                          M = C.next();
                                        !M.done;
                                        M = C.next()
                                      )
                                        ((R = M.value), (_ = (R.bandwidth * k) / 8), (I += _));
                                      return (w(D, 4), x(D, n.offline.downloadSizeCallback(I), 6));
                                    case 6:
                                      if (!D.h) throw new Ke(2, 9, 9014);
                                      A(D, 5);
                                      break;
                                    case 4:
                                      if ((P = E(D)) instanceof Ke) throw P;
                                      throw new Ke(2, 9, 9015);
                                    case 5:
                                      for (
                                        L = new Set(), N = new Set(), O = new Set(), U = g(S), B = U.next();
                                        !B.done;
                                        B = U.next()
                                      )
                                        ("variant" == (j = B.value).type && L.add(j.id),
                                          "text" == j.type && N.add(j.id),
                                          "image" == j.type && O.add(j.id));
                                      ((e.variants = e.variants.filter(function (e) {
                                        return L.has(e.id);
                                      })),
                                        (e.textStreams = e.textStreams.filter(function (e) {
                                          return N.has(e.id);
                                        })),
                                        (e.imageStreams = e.imageStreams.filter(function (e) {
                                          return O.has(e.id);
                                        })),
                                        (function (e) {
                                          e.variants.map(function (e) {
                                            return e.video;
                                          });
                                          var t = new Set(
                                            e.variants.map(function (e) {
                                              return e.audio;
                                            }),
                                          );
                                          e = e.textStreams;
                                          for (var n = g(t), r = n.next(); !r.done; r = n.next())
                                            for (var i = (r = g(t)).next(); !i.done; i = r.next());
                                          for (t = g(e), n = t.next(); !n.done; n = t.next())
                                            for (n = g(e), r = n.next(); !r.done; r = n.next());
                                        })(e),
                                        T(D));
                                  }
                                });
                              })(f, l, o, P),
                              16,
                            );
                          case 16:
                            return x(F, d.init(), 17);
                          case 17:
                            return (cT(e), x(F, Ex(d), 18));
                          case 18:
                            return (
                              (c = F.h),
                              cT(e),
                              (L = (function (e, t, n, r, i, a, o) {
                                var s = (function (e, t, n) {
                                    return {
                                      offlineUri: null,
                                      originalManifestUri: e,
                                      duration: t.presentationTimeline.getDuration(),
                                      size: 0,
                                      expiration: 1 / 0,
                                      tracks: (t = qx(t)),
                                      appMetadata: n,
                                      isIncomplete: !1,
                                    };
                                  })(n, t, r),
                                  u = i.offline.progressCallback;
                                !(function (e, t, n) {
                                  ((e.o = t), (e.m = n));
                                })(
                                  a,
                                  function (e, t) {
                                    ((s.size = t), u(s, e));
                                  },
                                  function (t, n) {
                                    l && o && d == n && Sa(e, "cenc", t);
                                  },
                                );
                                var l = rT(t) && !iT(t),
                                  d = null;
                                l && (d = gT.get(e.g.keySystem));
                                for (
                                  var c = new Yx(), h = g(t.textStreams), p = h.next();
                                  !p.done;
                                  p = h.next()
                                )
                                  c.g.set(p.value.id, 52);
                                for (h = g(t.imageStreams), p = h.next(); !p.done; p = h.next())
                                  Jx(c, p.value);
                                for (h = g(t.variants), p = h.next(); !p.done; p = h.next()) $x(c, p.value);
                                return (
                                  (a = (function (e, t, n, r) {
                                    for (
                                      var i = new Map(), a = fT(n), o = new Map(), s = (a = g(a)).next();
                                      !s.done;
                                      s = a.next()
                                    ) {
                                      var u = dT(e, t, n, (s = s.value), r, i);
                                      o.set(s.id, u);
                                    }
                                    for (e = g(n.variants), t = e.next(); !t.done; t = e.next())
                                      ((t = t.value).audio && o.get(t.audio.id).variantIds.push(t.id),
                                        t.video && o.get(t.video.id).variantIds.push(t.id));
                                    return { streams: Array.from(o.values()), Gh: Array.from(i.values()) };
                                  })(a, c, t, i)),
                                  (i = a.streams),
                                  (a = a.Gh),
                                  (c = e.g) && o && (c.initData = []),
                                  {
                                    xk: {
                                      creationTime: Date.now(),
                                      originalManifestUri: n,
                                      duration: t.presentationTimeline.getDuration(),
                                      size: 0,
                                      expiration: e.Zd(),
                                      streams: i,
                                      sessionIds: o ? Aa(e) : [],
                                      drmInfo: c,
                                      appMetadata: r,
                                      isIncomplete: !0,
                                      sequenceMode: t.sequenceMode,
                                      type: t.type,
                                    },
                                    Gh: a,
                                  }
                                );
                              })(l, f, t, n, o, s, P)),
                              (N = L.xk),
                              (O = L.Gh),
                              x(F, c.cb.addManifests([N]), 19)
                            );
                          case 19:
                            if (((U = F.h), cT(e), (h = U[0]), cT(e), p)) throw p;
                            return x(
                              F,
                              (function (e, t, n, r, i, a, o, s, u, l) {
                                var d, c, h, p, f, m, v, y, b, S, k;
                                return D(function (I) {
                                  switch (I.g) {
                                    case 1:
                                      if (
                                        ((d = {}),
                                        (c = 0),
                                        (h = function () {
                                          if (e.j.g || i.l) throw new Ke(2, 9, 7001);
                                        }),
                                        (p = function (e, t) {
                                          var p, f, m, v, y, b, w, S, A;
                                          return D(function (E) {
                                            if (1 == E.g) {
                                              for (
                                                p = g(e), f = p.next(), m = {};
                                                !f.done;
                                                m = { mc: void 0 }, f = p.next()
                                              )
                                                ((m.mc = f.value),
                                                  h(),
                                                  (v = sx(m.mc, a)),
                                                  (y = m.mc.i),
                                                  (b = m.mc.h),
                                                  (w = (function (e) {
                                                    return function (t) {
                                                      var n, r, i, a;
                                                      return D(function (s) {
                                                        switch (s.g) {
                                                          case 1:
                                                            if (
                                                              ((n = e.mc.g), (r = n.$b(!1)), !n.aesKey || r)
                                                            ) {
                                                              s.A(2);
                                                              break;
                                                            }
                                                            return x(s, al(t, n.aesKey, e.mc.j), 3);
                                                          case 3:
                                                            t = s.h;
                                                          case 2:
                                                            return (
                                                              (i = ox(n)),
                                                              x(s, o.addSegments([{ data: t }]), 4)
                                                            );
                                                          case 4:
                                                            ((a = s.h),
                                                              h(),
                                                              (d[i] = a[0]),
                                                              (c += t.byteLength),
                                                              T(s));
                                                        }
                                                      });
                                                    };
                                                  })(m)),
                                                  (S = m.mc.g),
                                                  (A = S.$b(!1))
                                                    ? px(i, m.mc.groupId, A, y, b, w)
                                                    : i.queue(m.mc.groupId, v, y, b, w));
                                              return x(
                                                E,
                                                (function (e) {
                                                  return D(function (t) {
                                                    return 1 == t.g
                                                      ? x(t, Promise.all(e.i.values()), 2)
                                                      : t.return(e.g.g);
                                                  });
                                                })(i),
                                                2,
                                              );
                                            }
                                            return (
                                              h(),
                                              !t || i.l
                                                ? E.A(0)
                                                : (aT(s, r, u, l), x(E, o.updateManifest(n, r), 0))
                                            );
                                          });
                                        }),
                                        (f = !1),
                                        w(I, 2),
                                        !rT(s) || !f || iT(s))
                                      ) {
                                        I.A(4);
                                        break;
                                      }
                                      return x(
                                        I,
                                        p(
                                          t.filter(function (e) {
                                            return e.h;
                                          }),
                                          !0,
                                        ),
                                        5,
                                      );
                                    case 5:
                                      return (
                                        h(),
                                        (t = t.filter(function (e) {
                                          return !e.h;
                                        })),
                                        (m = d),
                                        (v = c),
                                        (d = {}),
                                        (c = 0),
                                        x(
                                          I,
                                          nT(o, n, r, m, v, function () {
                                            return cT(e);
                                          }),
                                          6,
                                        )
                                      );
                                    case 6:
                                      h();
                                    case 4:
                                      if (f) {
                                        I.A(7);
                                        break;
                                      }
                                      return x(I, p(t, !1), 8);
                                    case 8:
                                      return (
                                        h(),
                                        (y = d),
                                        (b = c),
                                        (d = {}),
                                        (c = 0),
                                        x(
                                          I,
                                          nT(o, n, r, y, b, function () {
                                            return h();
                                          }),
                                          9,
                                        )
                                      );
                                    case 9:
                                      h();
                                    case 7:
                                      A(I, 0);
                                      break;
                                    case 2:
                                      return (
                                        (S = E(I)),
                                        (k = Object.values(d)),
                                        x(
                                          I,
                                          o.removeSegments(k, function () {}),
                                          10,
                                        )
                                      );
                                    case 10:
                                      throw S;
                                  }
                                });
                              })(e, O, h, N, s, o, c.cb, f, l, P),
                              20,
                            );
                          case 20:
                            return (cT(e), aT(f, N, l, P), x(F, c.cb.updateManifest(h, N), 21));
                          case 21:
                            return (
                              cT(e),
                              (B = new Ux("manifest", c.path.Pb, c.path.cb, h)),
                              F.return(Kx(B, N))
                            );
                          case 3:
                            return (k(F), x(F, d.destroy(), 22));
                          case 22:
                            if (!u) {
                              F.A(23);
                              break;
                            }
                            return x(F, u.stop(), 23);
                          case 23:
                            if (!l) {
                              F.A(25);
                              break;
                            }
                            return x(F, l.destroy(), 25);
                          case 25:
                            I(F, 0);
                            break;
                          case 2:
                            if (((j = E(F)), null == h)) {
                              F.A(27);
                              break;
                            }
                            return x(F, tT(h), 27);
                          case 27:
                            throw p || j;
                        }
                      });
                    })(
                      this,
                      e,
                      t || {},
                      r || [],
                      i || [],
                      function () {
                        var t;
                        return D(function (r) {
                          return 1 == r.g
                            ? n
                              ? r.A(2)
                              : x(r, ol(e, a.g, o.manifest.retryParameters), 3)
                            : (2 != r.g && (n = r.h), (t = Et(e, n || null)), r.return(t()));
                        });
                      },
                      o,
                      s,
                    )),
                    (t = new Ci(t, function () {
                      return hx(s);
                    })).finally(function () {
                      Q(a.l, s);
                    }),
                    (function (e, t) {
                      var n = t.promise;
                      return (
                        e.i.push(n),
                        t.finally(function () {
                          Q(e.i, n);
                        })
                      );
                    })(this, t)
                  );
                }),
                (i.remove = function (e) {
                  return pT(
                    this,
                    (function (e, t) {
                      var n, r, i, a, o, s;
                      return D(function (u) {
                        switch (u.g) {
                          case 1:
                            if ((hT(), null == (n = Bx(t)) || "manifest" != n.g)) throw new Ke(2, 9, 9004, t);
                            return ((r = n), (i = new Ax()), S(u, 2), x(u, i.init(), 4));
                          case 4:
                            return x(u, kx(i, r.Pb(), r.cb()), 5);
                          case 5:
                            return x(u, (a = u.h).getManifests([r.key()]), 6);
                          case 6:
                            return ((o = u.h), (s = o[0]), x(u, Promise.all([sT(e, s, i), uT(a, r, s)]), 2));
                          case 2:
                            return (k(u), x(u, i.destroy(), 8));
                          case 8:
                            I(u, 0);
                        }
                      });
                    })(this, e),
                  );
                }),
                (i.Qk = function () {
                  return pT(
                    this,
                    (function (e) {
                      var t, n, r, i, a, o, s, u, l, d;
                      return D(function (c) {
                        switch (c.g) {
                          case 1:
                            return (
                              hT(),
                              (t = e.g),
                              (n = e.h.drm),
                              (r = new Ax()),
                              (i = !1),
                              S(c, 2),
                              x(c, r.init(), 4)
                            );
                          case 4:
                            ((a = []),
                              (function (e, t) {
                                e.g.forEach(function (e) {
                                  t(e.getEmeSessionCell());
                                });
                              })(r, function (e) {
                                return a.push(e);
                              }),
                              (o = g(a)),
                              (s = o.next()));
                          case 5:
                            if (s.done) {
                              c.A(2);
                              break;
                            }
                            return x(c, (u = s.value).getAll(), 8);
                          case 8:
                            return ((l = c.h), x(c, Xx(n, t, l), 9));
                          case 9:
                            return ((d = c.h), x(c, u.remove(d), 10));
                          case 10:
                            (d.length != l.length && (i = !0), (s = o.next()), c.A(5));
                            break;
                          case 2:
                            return (k(c), x(c, r.destroy(), 11));
                          case 11:
                            I(c, 3);
                            break;
                          case 3:
                            return c.return(!i);
                        }
                      });
                    })(this),
                  );
                }),
                (i.list = function () {
                  return pT(
                    this,
                    D(function (r) {
                      switch (r.g) {
                        case 1:
                          return (hT(), (e = []), (t = new Ax()), S(r, 2), x(r, t.init(), 4));
                        case 4:
                          return (
                            (n = Promise.resolve()),
                            (function (e, t) {
                              e.g.forEach(function (e, n) {
                                e.getCells().forEach(function (e, r) {
                                  t({ Pb: n, cb: r }, e);
                                });
                              });
                            })(t, function (t, r) {
                              n = n.then(function () {
                                return D(function (n) {
                                  if (1 == n.g) return x(n, r.getAllManifests(), 2);
                                  (n.h.forEach(function (n, r) {
                                    ((n = Kx(new Ux("manifest", t.Pb, t.cb, r), n)), e.push(n));
                                  }),
                                    T(n));
                                });
                              });
                            }),
                            x(r, n, 2)
                          );
                        case 2:
                          return (k(r), x(r, t.destroy(), 6));
                        case 6:
                          I(r, 3);
                          break;
                        case 3:
                          return r.return(e);
                      }
                    }),
                  );
                  var e, t, n;
                }),
                (i.md = function (e, t, n, r) {
                  var i,
                    a = this;
                  return D(function (o) {
                    return 1 == o.g
                      ? ((i = new ya({
                          vc: a.g,
                          onError: t,
                          zf: function () {},
                          onExpirationUpdated: function () {},
                          onEvent: function () {},
                        })).configure(n.drm),
                        x(
                          o,
                          (function (e, t, n) {
                            return ((e.$ = !0), (e.C = new Map()), (e.R = n), xa(e, t, !1));
                          })(i, e.variants, r),
                          2,
                        ))
                      : 3 != o.g
                        ? x(o, wa(i), 3)
                        : o.return(i);
                  });
                }),
                V("shaka.offline.Storage", Zx),
                (Zx.deleteAll = function () {
                  var e;
                  return D(function (t) {
                    return 1 == t.g
                      ? ((e = new Ax()),
                        S(t, 2),
                        x(
                          t,
                          (function (e) {
                            var t, n;
                            return D(function (r) {
                              return 1 == r.g
                                ? ((t = Array.from(e.g.values())),
                                  (n = t.length > 0) ||
                                    Cx.forEach(function (e) {
                                      (e = e()) && t.push(e);
                                    }),
                                  x(
                                    r,
                                    Promise.all(
                                      t.map(function (e) {
                                        return e.erase();
                                      }),
                                    ),
                                    2,
                                  ))
                                : n
                                  ? r.A(0)
                                  : x(
                                      r,
                                      Promise.all(
                                        t.map(function (e) {
                                          return e.destroy();
                                        }),
                                      ),
                                      0,
                                    );
                            });
                          })(e),
                          2,
                        ))
                      : 5 != t.g
                        ? (k(t), x(t, e.destroy(), 5))
                        : I(t, 0);
                  });
                }),
                (Zx.prototype.list = Zx.prototype.list),
                (Zx.prototype.removeEmeSessions = Zx.prototype.Qk),
                (Zx.prototype.remove = Zx.prototype.remove),
                (Zx.prototype.store = Zx.prototype.store),
                (Zx.prototype.getNetworkingEngine = Zx.prototype.Yb),
                (Zx.prototype.getConfiguration = Zx.prototype.getConfiguration),
                (Zx.prototype.configure = Zx.prototype.configure),
                (Zx.prototype.destroy = Zx.prototype.destroy),
                (Zx.support = eT));
              var gT = new Map()
                .set("org.w3.clearkey", "1077efecc0b24d02ace33c1e52e2fb4b")
                .set("com.widevine.alpha", "edef8ba979d64acea3c827dcd51d21ed")
                .set("com.microsoft.playready", "9a04f07998404286ab92e65be0885f95")
                .set("com.microsoft.playready.recommendation", "9a04f07998404286ab92e65be0885f95")
                .set("com.microsoft.playready.software", "9a04f07998404286ab92e65be0885f95")
                .set("com.microsoft.playready.hardware", "9a04f07998404286ab92e65be0885f95")
                .set("com.huawei.wiseplay", "3d5e6d359b9a41e8b843dd3c6e72c42c");
              function mT() {}
              function vT(e, t) {
                for (e = { priority: t || 0, callback: e }, t = 0; t < xT.length; t++)
                  if (xT[t].priority < e.priority) return void xT.splice(t, 0, e);
                xT.push(e);
              }
              (eh("offline", eT),
                V("shaka.polyfill", mT),
                (mT.register = vT),
                (mT.installAll = function () {
                  for (var e = g(xT), t = e.next(); !t.done; t = e.next()) {
                    t = t.value;
                    try {
                      t.callback();
                    } catch (n) {
                      K("Error installing polyfill!", n);
                    }
                  }
                }));
              var yT,
                bT,
                xT = [];
              function TT(e, t, n) {
                ((this.g = e), (this.i = t || null), (this.h = n || null), (this.keySystem = e.keySystem));
              }
              function wT(e) {
                return e.startsWith("com.apple")
                  ? "cbcs"
                  : e.startsWith("com.widevine") ||
                      e.startsWith("com.microsoft") ||
                      e.startsWith("com.chromecast") ||
                      e.startsWith("org.w3") ||
                      e.startsWith("com.huawei")
                    ? "cenc"
                    : (K("EmeEncryptionSchemePolyfill: Unknown key system:", e, "Please contribute!"), null);
              }
              function ST(e) {
                if (!e) return !1;
                var t = (e = e.getConfiguration()).audioCapabilities && e.audioCapabilities[0];
                return !(
                  !(e = (e.videoCapabilities && e.videoCapabilities[0]) || t) || void 0 === e.encryptionScheme
                );
              }
              function AT(e, t) {
                return !(e && e != t && (("cbcs" != e && "cbcs-1-9" != e) || !oe().ed()));
              }
              function ET() {}
              function kT() {
                oe().Of() &&
                  !yT &&
                  !navigator.emeEncryptionSchemePolyfilled &&
                  navigator.requestMediaKeySystemAccess &&
                  MediaKeySystemAccess.prototype.getConfiguration &&
                  ((yT = navigator.requestMediaKeySystemAccess),
                  (navigator.requestMediaKeySystemAccess = IT),
                  (navigator.emeEncryptionSchemePolyfilled = !0));
              }
              function IT(e, t) {
                var n,
                  r = this;
                return D(function (i) {
                  return 1 == i.g
                    ? x(i, yT.call(r, e, t), 2)
                    : ST((n = i.h))
                      ? ((navigator.requestMediaKeySystemAccess = yT), i.return(n))
                      : ((navigator.requestMediaKeySystemAccess = CT), i.return(CT.call(r, e, t)));
                });
              }
              function CT(e, t) {
                var n,
                  r,
                  i,
                  a,
                  o,
                  s,
                  u,
                  l,
                  d,
                  c,
                  h,
                  p,
                  f = this;
                return D(function (m) {
                  if (1 == m.g) {
                    for (n = wT(e), r = [], i = g(t), a = i.next(); !a.done; a = i.next())
                      ((o = a.value),
                        (s = MT(o.videoCapabilities, n)),
                        (u = MT(o.audioCapabilities, n)),
                        (o.videoCapabilities && o.videoCapabilities.length && !s.length) ||
                          (o.audioCapabilities && o.audioCapabilities.length && !u.length) ||
                          (((l = Object.assign({}, o)).videoCapabilities = s),
                          (l.audioCapabilities = u),
                          r.push(l)));
                    if (!r.length)
                      throw (
                        ((d = Error("Unsupported keySystem or supportedConfigurations.")).name =
                          "NotSupportedError"),
                        (d.code = DOMException.NOT_SUPPORTED_ERR),
                        d
                      );
                    return x(m, yT.call(f, e, r), 2);
                  }
                  return (
                    (c = m.h),
                    (p = h = null),
                    r[0] &&
                      (r[0].videoCapabilities && (h = r[0].videoCapabilities[0].encryptionScheme),
                      r[0].audioCapabilities && (p = r[0].audioCapabilities[0].encryptionScheme)),
                    m.return(new TT(c, h, p))
                  );
                });
              }
              function MT(e, t) {
                return e
                  ? e.filter(function (e) {
                      return AT(e.encryptionScheme, t);
                    })
                  : e;
              }
              function RT() {}
              function _T() {
                oe().Of() &&
                  !bT &&
                  !navigator.mediaCapabilitiesEncryptionSchemePolyfilled &&
                  navigator.mediaCapabilities &&
                  ((bT = navigator.mediaCapabilities.decodingInfo),
                  (navigator.mediaCapabilities.decodingInfo = DT),
                  (navigator.mediaCapabilitiesEncryptionSchemePolyfilled = !0));
              }
              function DT(e) {
                var t,
                  n,
                  r = this;
                return D(function (i) {
                  switch (i.g) {
                    case 1:
                      return x(i, bT.call(r, e), 2);
                    case 2:
                      if (!(t = i.h).supported || !e.keySystemConfiguration) return i.return(t);
                      if (ST((n = t.keySystemAccess)))
                        return ((navigator.mediaCapabilities.decodingInfo = bT), i.return(t));
                      if (((navigator.mediaCapabilities.decodingInfo = PT), n)) {
                        i.A(3);
                        break;
                      }
                      return x(i, LT(e), 4);
                    case 4:
                      return ((t.keySystemAccess = i.h), i.return(t));
                    case 3:
                      return i.return(PT.call(r, e));
                  }
                });
              }
              function PT(e) {
                var t,
                  n,
                  r,
                  i,
                  a,
                  o,
                  s,
                  u = this;
                return D(function (l) {
                  switch (l.g) {
                    case 1:
                      return (
                        (n = t = null),
                        !e.keySystemConfiguration ||
                        ((r = e.keySystemConfiguration),
                        (i = r.keySystem),
                        (n = r.audio && r.audio.encryptionScheme),
                        (t = r.video && r.video.encryptionScheme),
                        (a = wT(i)),
                        (o = {
                          powerEfficient: !1,
                          smooth: !1,
                          supported: !1,
                          keySystemAccess: null,
                          configuration: e,
                        }),
                        AT(n, a) && AT(t, a))
                          ? x(l, bT.call(u, e), 2)
                          : l.return(o)
                      );
                    case 2:
                      if ((s = l.h).keySystemAccess) {
                        ((s.keySystemAccess = new TT(s.keySystemAccess, t, n)), l.A(3));
                        break;
                      }
                      if (!e.keySystemConfiguration) {
                        l.A(3);
                        break;
                      }
                      return x(l, LT(e), 5);
                    case 5:
                      s.keySystemAccess = l.h;
                    case 3:
                      return l.return(s);
                  }
                });
              }
              function LT(e) {
                var t, n;
                return D(function (r) {
                  if (1 == r.g) {
                    var i = e.keySystemConfiguration,
                      a = [],
                      o = [];
                    return (
                      i.audio &&
                        a.push({
                          robustness: i.audio.robustness || "",
                          contentType: e.audio.contentType,
                          encryptionScheme: i.audio.encryptionScheme,
                        }),
                      i.video &&
                        o.push({
                          robustness: i.video.robustness || "",
                          contentType: e.video.contentType,
                          encryptionScheme: i.video.encryptionScheme,
                        }),
                      (i = {
                        initDataTypes: i.initDataType ? [i.initDataType] : [],
                        distinctiveIdentifier: i.distinctiveIdentifier,
                        persistentState: i.persistentState,
                        sessionTypes: i.sessionTypes,
                      }),
                      a.length && (i.audioCapabilities = a),
                      o.length && (i.videoCapabilities = o),
                      (t = i),
                      x(r, navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem, [t]), 2)
                    );
                  }
                  return ((n = r.h), r.return(n));
                });
              }
              function NT() {}
              function OT() {
                oe().hc() ||
                  (navigator.mediaCapabilities || (navigator.mediaCapabilities = {}),
                  (NT.originalMcap = navigator.mediaCapabilities),
                  (navigator.mediaCapabilities.decodingInfo = UT));
              }
              function UT(t) {
                var n, r, i, a, o, s, u;
                return D(function (l) {
                  switch (l.g) {
                    case 1:
                      if (
                        ((n = {
                          supported: !1,
                          powerEfficient: !0,
                          smooth: !0,
                          keySystemAccess: null,
                          configuration: t,
                        }),
                        oe(),
                        (r = t.video),
                        (i = t.audio),
                        "media-source" != t.type)
                      ) {
                        if ("file" != t.type) return l.return(n);
                        if (
                          (r && ((a = r.contentType), "" == ts().canPlayType(a))) ||
                          (i && ((o = i.contentType), "" == ts().canPlayType(o)))
                        )
                          return l.return(n);
                        l.A(2);
                        break;
                      }
                      if (!Jv()) return l.return(n);
                      if (!r) {
                        l.A(3);
                        break;
                      }
                      return x(
                        l,
                        (function (t) {
                          var n;
                          return D(function (r) {
                            return 1 == r.g
                              ? "CAST" !== oe().Oa()
                                ? r.A(2)
                                : x(
                                    r,
                                    (function (t) {
                                      var n, r, i, a;
                                      return D(function (o) {
                                        if (1 == o.g) {
                                          if (
                                            !(e.cast && cast.__platform__ && cast.__platform__.canDisplayType)
                                          )
                                            return o.return(Qa(t.contentType));
                                          switch (
                                            ((n = t.contentType),
                                            t.width &&
                                              t.height &&
                                              t.width > 1280 &&
                                              t.height > 720 &&
                                              (n += "; width=" + t.width + "; height=" + t.height),
                                            t.framerate &&
                                              ((r = Math.round(t.framerate)) < 24 || r > 30) &&
                                              (n += "; framerate=" + t.framerate),
                                            t.transferFunction || "")
                                          ) {
                                            case "":
                                            case "srgb":
                                              break;
                                            case "pq":
                                              n += "; eotf=smpte2084";
                                              break;
                                            case "hlg":
                                              n += "; eotf=arib-std-b67";
                                              break;
                                            default:
                                              return o.return(!1);
                                          }
                                          return (
                                            (i = !1),
                                            (a = zT).has(n)
                                              ? ((i = a.get(n)), o.A(2))
                                              : x(o, cast.__platform__.canDisplayType(n), 3)
                                          );
                                        }
                                        return (2 != o.g && ((i = o.h), a.set(n, i)), o.return(i));
                                      });
                                    })(t),
                                    3,
                                  )
                              : 2 != r.g
                                ? ((n = r.h), r.return(n))
                                : r.return(Qa(t.contentType));
                          });
                        })(r),
                        4,
                      );
                    case 4:
                      if (!l.h) return l.return(n);
                    case 3:
                      if (i) {
                        var d = oe().Oa(),
                          c = i.contentType;
                        if (("CAST" === d && i.spatialRendering && (c += "; spatialRendering=true"), !Qa(c)))
                          return l.return(n);
                      }
                    case 2:
                      return t.keySystemConfiguration
                        ? ((s = t.keySystemConfiguration),
                          x(
                            l,
                            (function (e, t, n) {
                              var r, i, a, o, s, u, l, d, c, h, p, f;
                              return D(function (g) {
                                switch (g.g) {
                                  case 1:
                                    ((r = []),
                                      (i = []),
                                      (a = []),
                                      n.audio &&
                                        ((o = {
                                          robustness: n.audio.robustness || "",
                                          contentType: t.contentType,
                                        }),
                                        oe().Bi() &&
                                          t.contentType.includes('codecs="ac-3"') &&
                                          (o.contentType = 'audio/mp4; codecs="ec-3"'),
                                        n.audio.encryptionScheme &&
                                          ((o.encryptionScheme = n.audio.encryptionScheme),
                                          a.push(n.audio.encryptionScheme)),
                                        r.push(o)),
                                      n.video &&
                                        ((s = {
                                          robustness: n.video.robustness || "",
                                          contentType: e.contentType,
                                        }),
                                        n.video.encryptionScheme &&
                                          ((s.encryptionScheme = n.video.encryptionScheme),
                                          a.push(n.video.encryptionScheme)),
                                        i.push(s)),
                                      (u = {
                                        initDataTypes: [n.initDataType],
                                        distinctiveIdentifier: n.distinctiveIdentifier,
                                        persistentState: n.persistentState,
                                        sessionTypes: n.sessionTypes,
                                      }),
                                      r.length && (u.audioCapabilities = r),
                                      i.length && (u.videoCapabilities = i),
                                      (l = e ? e.contentType : ""),
                                      (d = t ? t.contentType : ""),
                                      (c = gr(l) + ";" + fr(l)),
                                      (h = gr(d) + ";" + fr(d)),
                                      (p = n.keySystem),
                                      (f = null),
                                      w(g, 2));
                                    var m = ze(c, h, p, a);
                                    if (We.has(m)) {
                                      ((m = ze(c, h, p, a)), (f = We.get(m) || null), g.A(4));
                                      break;
                                    }
                                    return x(g, navigator.requestMediaKeySystemAccess(n.keySystem, [u]), 5);
                                  case 5:
                                    m = f = g.h;
                                    var v = ze(c, h, p, a);
                                    We.set(v, m);
                                  case 4:
                                    A(g, 3);
                                    break;
                                  case 2:
                                    E(g);
                                  case 3:
                                    return g.return(f);
                                }
                              });
                            })(r, i, s),
                            6,
                          ))
                        : ((n.supported = !0), l.return(n));
                    case 6:
                      (u = l.h) && ((n.supported = !0), (n.keySystemAccess = u));
                    case 5:
                      return l.return(n);
                  }
                });
              }
              ((TT.prototype.getConfiguration = function () {
                var e = this.g.getConfiguration();
                if (e.videoCapabilities)
                  for (var t = g(e.videoCapabilities), n = t.next(); !n.done; n = t.next())
                    n.value.encryptionScheme = this.i;
                if (e.audioCapabilities)
                  for (n = (t = g(e.audioCapabilities)).next(); !n.done; n = t.next())
                    n.value.encryptionScheme = this.h;
                return e;
              }),
                (TT.prototype.createMediaKeys = function () {
                  return this.g.createMediaKeys();
                }),
                (mT.EmeEncryptionScheme = ET),
                (ET.install = kT),
                vT(kT),
                (mT.MCapEncryptionScheme = RT),
                (RT.install = _T),
                vT(_T, -2),
                (mT.MediaCapabilities = NT),
                (NT.install = OT),
                (NT.originalMcap = null));
              var BT,
                jT,
                FT,
                VT,
                HT,
                GT,
                zT = new Map();
              function XT() {}
              function WT() {
                var t = oe(),
                  n = "WEBKIT" === t.Ha() ? t.Ba() : null;
                for (
                  (e.MediaSource || e.ManagedMediaSource) &&
                    n &&
                    e.MediaSource &&
                    (n <= 12
                      ? (KT(),
                        (function () {
                          var e = SourceBuffer.prototype.remove;
                          SourceBuffer.prototype.remove = function (t, n) {
                            return e.call(this, t, n - 0.001);
                          };
                        })())
                      : n <= 15 && KT()),
                    n = (t = g(t.Li())).next();
                  !n.done;
                  n = t.next()
                )
                  qT(n.value);
                ((e.MediaSource || e.ManagedMediaSource) &&
                  (function () {
                    if (e.MediaSource) {
                      var t = MediaSource.isTypeSupported.bind(MediaSource);
                      MediaSource.isTypeSupported = function (e) {
                        return "mp2t" != hr(e) && t(e);
                      };
                    }
                    if (e.ManagedMediaSource) {
                      var n = ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);
                      e.ManagedMediaSource.isTypeSupported = function (e) {
                        return "mp2t" != hr(e) && n(e);
                      };
                    }
                  })(),
                  e.MediaSource &&
                    MediaSource.isTypeSupported('video/webm; codecs="vp9"') &&
                    !MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"') &&
                    (function () {
                      var e = MediaSource.isTypeSupported;
                      oe().fj() &&
                        (MediaSource.isTypeSupported = function (t) {
                          var n = t.split(/ *; */),
                            r = n.findIndex(function (e) {
                              return e.startsWith("codecs=");
                            });
                          if (r < 0) return e(t);
                          var i = n[r]
                              .replace("codecs=", "")
                              .replace(/"/g, "")
                              .split(/\s*,\s*/),
                            a = i.findIndex(function (e) {
                              return e.startsWith("vp09");
                            });
                          return (
                            a >= 0 &&
                              ((i[a] = "vp9"), (n[r] = 'codecs="' + i.join(",") + '"'), (t = n.join("; "))),
                            e(t)
                          );
                        });
                    })());
              }
              function KT() {
                var e = MediaSource.prototype.addSourceBuffer;
                MediaSource.prototype.addSourceBuffer = function () {
                  var t = e.apply(this, P.apply(0, arguments));
                  return ((t.abort = function () {}), t);
                };
              }
              function qT(t) {
                var n = MediaSource.isTypeSupported.bind(MediaSource);
                if (
                  ((MediaSource.isTypeSupported = function (e) {
                    return fr(e) != t && n(e);
                  }),
                  e.ManagedMediaSource)
                ) {
                  var r = ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);
                  e.ManagedMediaSource.isTypeSupported = function (e) {
                    return fr(e) != t && r(e);
                  };
                }
              }
              function YT() {}
              function $T(t) {
                e.HTMLVideoElement &&
                  e.WebKitMediaKeys &&
                  e.shakaMediaKeysPolyfill != ow &&
                  (void 0 !== t &&
                    t &&
                    ((BT = !0),
                    (jT = Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype, "mediaKeys")),
                    (FT = HTMLMediaElement.prototype.setMediaKeys),
                    (VT = e.MediaKeys),
                    (HT = e.MediaKeySystemAccess),
                    (GT = navigator.requestMediaKeySystemAccess)),
                  delete HTMLMediaElement.prototype.mediaKeys,
                  (HTMLMediaElement.prototype.mediaKeys = null),
                  (HTMLMediaElement.prototype.setMediaKeys = QT),
                  (e.MediaKeys = tw),
                  (e.MediaKeySystemAccess = ew),
                  (navigator.requestMediaKeySystemAccess = JT),
                  (e.shakaMediaKeysPolyfill = ow),
                  mi.clear(),
                  We.clear());
              }
              function JT(e, t) {
                try {
                  var n = new ew(e, t);
                  return Promise.resolve(n);
                } catch (r) {
                  return Promise.reject(r);
                }
              }
              function QT(e) {
                var t = this.mediaKeys;
                return (
                  t && t != e && nw(t, null),
                  delete this.mediaKeys,
                  (this.mediaKeys = e) ? nw(e, this) : Promise.resolve()
                );
              }
              function ZT(e) {
                if (Ue((e = Ne(e.initData))).getUint32(0, !0) + 4 != e.byteLength)
                  throw new RangeError("Malformed FairPlay init data");
                e = Qe((e = $e(e.subarray(4), !0)));
                var t = new Event("encrypted");
                ((t.initDataType = "skd"), (t.initData = Le(e)), this.dispatchEvent(t));
              }
              function ew(e, t) {
                if (((this.keySystem = e), e.startsWith("com.apple.fps")))
                  for (t = (e = g(t)).next(); !t.done; t = e.next()) {
                    var n = t.value;
                    if ("required" == n.persistentState) t = null;
                    else {
                      t = {
                        audioCapabilities: [],
                        videoCapabilities: [],
                        persistentState: "optional",
                        distinctiveIdentifier: "optional",
                        initDataTypes: n.initDataTypes,
                        sessionTypes: ["temporary"],
                        label: n.label,
                      };
                      var r = !1,
                        i = !1;
                      if (n.audioCapabilities)
                        for (var a = g(n.audioCapabilities), o = a.next(); !o.done; o = a.next())
                          (o = o.value).contentType &&
                            ((r = !0),
                            WebKitMediaKeys.isTypeSupported(this.keySystem, o.contentType.split(";")[0]) &&
                              (t.audioCapabilities.push(o), (i = !0)));
                      if (n.videoCapabilities)
                        for (a = (n = g(n.videoCapabilities)).next(); !a.done; a = n.next())
                          (a = a.value).contentType &&
                            ((r = !0),
                            WebKitMediaKeys.isTypeSupported(this.keySystem, a.contentType.split(";")[0]) &&
                              (t.videoCapabilities.push(a), (i = !0)));
                      (r || (i = WebKitMediaKeys.isTypeSupported(this.keySystem, "video/mp4")),
                        (t = i ? t : null));
                    }
                    if (t) return void (this.g = t);
                  }
                throw (
                  ((e = Error("Unsupported keySystem")).name = "NotSupportedError"),
                  (e.code = DOMException.NOT_SUPPORTED_ERR),
                  e
                );
              }
              function tw(e) {
                ((this.h = new WebKitMediaKeys(e)), (this.g = new ne()));
              }
              function nw(e, t) {
                if ((e.g.Qa(), !t)) return Promise.resolve();
                e.g.D(t, "webkitneedkey", ZT);
                try {
                  return (
                    fu(t, HTMLMediaElement.HAVE_METADATA, e.g, function () {
                      t.webkitSetMediaKeys(e.h);
                    }),
                    Promise.resolve()
                  );
                } catch (n) {
                  return Promise.reject(n);
                }
              }
              function rw(e) {
                (Ui.call(this),
                  (this.i = null),
                  (this.l = e),
                  (this.g = this.h = null),
                  (this.j = new ne()),
                  (this.sessionId = ""),
                  (this.expiration = NaN),
                  (this.closed = new Ii()),
                  (this.keyStatuses = new aw()),
                  (this.onkeystatuseschange = null));
              }
              function iw(e, t) {
                var n = e.keyStatuses;
                ((n.size = null == t ? 0 : 1),
                  (n.g = t),
                  (t = new Li("keystatuseschange")),
                  e.dispatchEvent(t),
                  e.onkeystatuseschange && e.onkeystatuseschange(t));
              }
              function aw() {
                ((this.size = 0), (this.g = void 0));
              }
              (vT(OT, -1),
                (mT.MediaSource = XT),
                (XT.install = WT),
                vT(WT),
                (mT.PatchedMediaKeysApple = YT),
                (YT.uninstall = function () {
                  e.shakaMediaKeysPolyfill == ow &&
                    BT &&
                    ((BT = !1),
                    Object.defineProperty(HTMLMediaElement.prototype, "mediaKeys", jT),
                    (HTMLMediaElement.prototype.setMediaKeys = FT),
                    (e.MediaKeys = VT),
                    (e.MediaKeySystemAccess = HT),
                    (navigator.requestMediaKeySystemAccess = GT),
                    (jT = GT = FT = HT = VT = null),
                    (e.shakaMediaKeysPolyfill = ""),
                    mi.clear(),
                    We.clear());
                }),
                (YT.install = $T),
                (ew.prototype.createMediaKeys = function () {
                  var e = new tw(this.keySystem);
                  return Promise.resolve(e);
                }),
                (ew.prototype.getConfiguration = function () {
                  return this.g;
                }),
                (tw.prototype.createSession = function (e) {
                  if ("temporary" != (e = e || "temporary"))
                    throw new TypeError("Session type " + e + " is unsupported on this platform.");
                  return new rw(this.h);
                }),
                (tw.prototype.setServerCertificate = function () {
                  return Promise.resolve(!1);
                }),
                (tw.prototype.getStatusForPolicy = function () {
                  return Promise.resolve("usable");
                }),
                p(rw, Ui),
                ((i = rw.prototype).generateRequest = function (e, t) {
                  var n = this;
                  this.h = new Ii();
                  try {
                    var r = this.l.createSession("video/mp4", Ne(t));
                    ((this.i = r),
                      (this.sessionId = r.sessionId || ""),
                      this.j.D(this.i, "webkitkeymessage", function (e) {
                        (n.h && (n.h.resolve(), (n.h = null)),
                          (e = new Li(
                            "message",
                            (e = new Map()
                              .set(
                                "messageType",
                                null == n.keyStatuses.Kc() ? "license-request" : "license-renewal",
                              )
                              .set("message", Le(e.message))),
                          )),
                          n.dispatchEvent(e));
                      }),
                      this.j.D(r, "webkitkeyadded", function () {
                        n.g && (iw(n, "usable"), n.g.resolve(), (n.g = null));
                      }),
                      this.j.D(r, "webkitkeyerror", function () {
                        var e = Error("EME PatchedMediaKeysApple key error");
                        if (((e.errorCode = n.i.error), null != n.h)) (n.h.reject(e), (n.h = null));
                        else if (null != n.g) (n.g.reject(e), (n.g = null));
                        else
                          switch (n.i.error.code) {
                            case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:
                            case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:
                              iw(n, "output-not-allowed");
                              break;
                            default:
                              iw(n, "internal-error");
                          }
                      }),
                      iw(this, "status-pending"));
                  } catch (i) {
                    this.h.reject(i);
                  }
                  return this.h;
                }),
                (i.load = function () {
                  return Promise.reject(Error("MediaKeySession.load not yet supported"));
                }),
                (i.update = function (e) {
                  this.g = new Ii();
                  try {
                    this.i.update(Ne(e));
                  } catch (t) {
                    this.g.reject(t);
                  }
                  return this.g;
                }),
                (i.close = function () {
                  try {
                    (this.i.close(), this.closed.resolve(), this.j.Qa());
                  } catch (fA) {
                    this.closed.reject(fA);
                  }
                  return this.closed;
                }),
                (i.remove = function () {
                  return Promise.reject(
                    Error(
                      "MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform",
                    ),
                  );
                }),
                ((i = aw.prototype).Kc = function () {
                  return this.g;
                }),
                (i.forEach = function (e) {
                  this.g && e(this.g, Xe.value());
                }),
                (i.get = function (e) {
                  if (this.has(e)) return this.g;
                }),
                (i.has = function (e) {
                  var t = Xe.value();
                  return !(!this.g || !Pe(e, t));
                }),
                (i.entries = function () {}),
                (i.keys = function () {}),
                (i.values = function () {}));
              var ow = "apple";
              function sw() {}
              function uw() {
                if (e.MediaKeys) {
                  var t = oe();
                  (MediaKeys.prototype.setServerCertificate && t.we()) ||
                    (MediaKeys.prototype.setServerCertificate = lw);
                }
              }
              function lw() {
                return Promise.resolve(!1);
              }
              function dw() {}
              function cw() {
                if (
                  !(
                    !e.HTMLVideoElement ||
                    (navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration)
                  )
                ) {
                  if (HTMLMediaElement.prototype.webkitGenerateKeyRequest) Aw = "webkit";
                  else if (!HTMLMediaElement.prototype.generateKeyRequest) return;
                  ((navigator.requestMediaKeySystemAccess = pw),
                    delete HTMLMediaElement.prototype.mediaKeys,
                    (HTMLMediaElement.prototype.mediaKeys = null),
                    (HTMLMediaElement.prototype.setMediaKeys = fw),
                    (e.MediaKeys = mw),
                    (e.MediaKeySystemAccess = gw),
                    (e.shakaMediaKeysPolyfill = Ew));
                }
              }
              function hw(e) {
                return Aw ? Aw + e.charAt(0).toUpperCase() + e.slice(1) : e;
              }
              function pw(e, t) {
                try {
                  var n = new gw(e, t);
                  return Promise.resolve(n);
                } catch (r) {
                  return Promise.reject(r);
                }
              }
              function fw(e) {
                var t = this.mediaKeys;
                return (
                  t && t != e && vw(t, null),
                  delete this.mediaKeys,
                  (this.mediaKeys = e) && vw(e, this),
                  Promise.resolve()
                );
              }
              function gw(e, t) {
                this.g = this.keySystem = e;
                var n = !1;
                "org.w3.clearkey" == e && ((this.g = "webkit-org.w3.clearkey"), (n = !1));
                var r = !1,
                  i = document.getElementsByTagName("video");
                i = i.length ? i[0] : document.createElement("video");
                for (var a = (t = g(t)).next(); !a.done; a = t.next()) {
                  var o = {
                      audioCapabilities: [],
                      videoCapabilities: [],
                      persistentState: "optional",
                      distinctiveIdentifier: "optional",
                      initDataTypes: (a = a.value).initDataTypes,
                      sessionTypes: ["temporary"],
                      label: a.label,
                    },
                    s = !1;
                  if (a.audioCapabilities)
                    for (var u = g(a.audioCapabilities), l = u.next(); !l.done; l = u.next())
                      (l = l.value).contentType &&
                        ((s = !0),
                        i.canPlayType(l.contentType.split(";")[0], this.g) &&
                          (o.audioCapabilities.push(l), (r = !0)));
                  if (a.videoCapabilities)
                    for (l = (u = g(a.videoCapabilities)).next(); !l.done; l = u.next())
                      (l = l.value).contentType &&
                        ((s = !0),
                        i.canPlayType(l.contentType, this.g) && (o.videoCapabilities.push(l), (r = !0)));
                  if (
                    (s || (r = i.canPlayType("video/mp4", this.g) || i.canPlayType("video/webm", this.g)),
                    "required" == a.persistentState &&
                      (n
                        ? ((o.persistentState = "required"), (o.sessionTypes = ["persistent-license"]))
                        : (r = !1)),
                    r)
                  )
                    return void (this.h = o);
                }
                throw (
                  (n = "Unsupported keySystem"),
                  ("org.w3.clearkey" != e && "com.widevine.alpha" != e) ||
                    (n = "None of the requested configurations were supported."),
                  ((e = Error(n)).name = "NotSupportedError"),
                  (e.code = DOMException.NOT_SUPPORTED_ERR),
                  e
                );
              }
              function mw(e) {
                ((this.l = e), (this.h = null), (this.g = new ne()), (this.i = []), (this.j = new Map()));
              }
              function vw(e, t) {
                ((e.h = t), e.g.Qa());
                var n = Aw;
                t &&
                  (e.g.D(t, n + "needkey", function (t) {
                    var n = new CustomEvent("encrypted");
                    ((n.initDataType = "cenc"), (n.initData = Le(t.initData)), e.h.dispatchEvent(n));
                  }),
                  e.g.D(t, n + "keymessage", function (t) {
                    var n = yw(e, t.sessionId);
                    n &&
                      ((t = new Li(
                        "message",
                        (t = new Map()
                          .set(
                            "messageType",
                            null == n.keyStatuses.Kc() ? "licenserequest" : "licenserenewal",
                          )
                          .set("message", t.message)),
                      )),
                      n.h && (n.h.resolve(), (n.h = null)),
                      n.dispatchEvent(t));
                  }),
                  e.g.D(t, n + "keyadded", function (t) {
                    (t = yw(e, t.sessionId)) && t.ready();
                  }),
                  e.g.D(t, n + "keyerror", function (t) {
                    var n = yw(e, t.sessionId);
                    if (n) {
                      var r = Error("EME v0.1b key error"),
                        i = t.errorCode;
                      ((i.systemCode = t.systemCode),
                        (r.errorCode = i),
                        !t.sessionId && n.h
                          ? (45 == t.systemCode && (r.message = "Unsupported session type."),
                            n.h.reject(r),
                            (n.h = null))
                          : t.sessionId && n.g
                            ? (n.g.reject(r), (n.g = null))
                            : ((r = t.systemCode),
                              t.errorCode.code == MediaKeyError.MEDIA_KEYERR_OUTPUT
                                ? ww(n, "output-restricted")
                                : ww(n, 1 == r ? "expired" : "internal-error")));
                    }
                  }));
              }
              function yw(e, t) {
                var n = e.j.get(t);
                return n || ((n = e.i.shift()) ? ((n.sessionId = t), e.j.set(t, n), n) : null);
              }
              function bw(e, t, n) {
                (Ui.call(this),
                  (this.j = e),
                  (this.m = !1),
                  (this.g = this.h = null),
                  (this.i = t),
                  (this.l = n),
                  (this.sessionId = ""),
                  (this.expiration = NaN),
                  (this.closed = new Ii()),
                  (this.keyStatuses = new Sw()),
                  (this.onkeystatuseschange = null));
              }
              function xw(e, t, n) {
                if (e.m) return Promise.reject(Error("The session is already initialized."));
                e.m = !0;
                try {
                  if ("persistent-license" == e.l)
                    if (n) var r = Ne(Qe("LOAD_SESSION|" + n));
                    else {
                      var i = Qe("PERSISTENT|");
                      r = ut(i, t);
                    }
                  else r = Ne(t);
                } catch (o) {
                  return Promise.reject(o);
                }
                e.h = new Ii();
                var a = hw("generateKeyRequest");
                try {
                  e.j[a](e.i, r);
                } catch (o) {
                  if ("InvalidStateError" != o.name) return ((e.h = null), Promise.reject(o));
                  new Mr(function () {
                    try {
                      e.j[a](e.i, r);
                    } catch (t) {
                      (e.h.reject(t), (e.h = null));
                    }
                  }).ka(0.01);
                }
                return e.h;
              }
              function Tw(e, t, n) {
                if (e.g)
                  e.g
                    .then(function () {
                      return Tw(e, t, n);
                    })
                    .catch(function () {
                      return Tw(e, t, n);
                    });
                else {
                  if (((e.g = t), "webkit-org.w3.clearkey" == e.i)) {
                    var r = Ye(n),
                      i = JSON.parse(r);
                    ("oct" != i.keys[0].kty &&
                      (e.g.reject(Error("Response is not a valid JSON Web Key Set.")), (e.g = null)),
                      (r = at(i.keys[0].k)),
                      (i = at(i.keys[0].kid)));
                  } else ((r = Ne(n)), (i = null));
                  var a = hw("addKey");
                  try {
                    e.j[a](e.i, r, i, e.sessionId);
                  } catch (o) {
                    (e.g.reject(o), (e.g = null));
                  }
                }
              }
              function ww(e, t) {
                var n = e.keyStatuses;
                ((n.size = null == t ? 0 : 1),
                  (n.g = t),
                  (t = new Li("keystatuseschange")),
                  e.dispatchEvent(t),
                  e.onkeystatuseschange && e.onkeystatuseschange(t));
              }
              function Sw() {
                ((this.size = 0), (this.g = void 0));
              }
              (vT(function () {
                e.HTMLVideoElement &&
                  e.WebKitMediaKeys &&
                  ((navigator.requestMediaKeySystemAccess &&
                    MediaKeySystemAccess.prototype.getConfiguration) ||
                    $T());
              }),
                (mT.PatchedMediaKeysCert = sw),
                (sw.install = uw),
                vT(uw),
                (mT.PatchedMediaKeysWebkit = dw),
                (dw.install = cw),
                (gw.prototype.createMediaKeys = function () {
                  var e = new mw(this.g);
                  return Promise.resolve(e);
                }),
                (gw.prototype.getConfiguration = function () {
                  return this.h;
                }),
                (mw.prototype.createSession = function (e) {
                  if ("temporary" != (e = e || "temporary") && "persistent-license" != e)
                    throw new TypeError("Session type " + e + " is unsupported on this platform.");
                  var t = this.h || document.createElement("video");
                  return (t.src || (t.src = "about:blank"), (e = new bw(t, this.l, e)), this.i.push(e), e);
                }),
                (mw.prototype.setServerCertificate = function () {
                  return Promise.resolve(!1);
                }),
                (mw.prototype.getStatusForPolicy = function () {
                  return Promise.resolve("usable");
                }),
                p(bw, Ui),
                ((i = bw.prototype).ready = function () {
                  (ww(this, "usable"), this.g && this.g.resolve(), (this.g = null));
                }),
                (i.generateRequest = function (e, t) {
                  return xw(this, t, null);
                }),
                (i.load = function (e) {
                  return "persistent-license" == this.l
                    ? xw(this, null, e)
                    : Promise.reject(Error("Not a persistent session."));
                }),
                (i.update = function (e) {
                  var t = new Ii();
                  return (Tw(this, t, e), t);
                }),
                (i.close = function () {
                  if ("persistent-license" != this.l) {
                    if (!this.sessionId)
                      return (this.closed.reject(Error("The session is not callable.")), this.closed);
                    var e = hw("cancelKeyRequest");
                    try {
                      this.j[e](this.i, this.sessionId);
                    } catch (t) {}
                  }
                  return (this.closed.resolve(), this.closed);
                }),
                (i.remove = function () {
                  return "persistent-license" != this.l
                    ? Promise.reject(Error("Not a persistent session."))
                    : this.close();
                }),
                ((i = Sw.prototype).Kc = function () {
                  return this.g;
                }),
                (i.forEach = function (e) {
                  this.g && e(this.g, Xe.value());
                }),
                (i.get = function (e) {
                  if (this.has(e)) return this.g;
                }),
                (i.has = function (e) {
                  var t = Xe.value();
                  return !(!this.g || !Pe(e, t));
                }),
                (i.entries = function () {}),
                (i.keys = function () {}),
                (i.values = function () {}));
              var Aw = "",
                Ew = "webkit";
              function kw() {}
              function Iw() {
                e.crypto && ("randomUUID" in e.crypto || (e.crypto.randomUUID = Cw));
              }
              function Cw() {
                var e = URL.createObjectURL(new Blob()),
                  t = e.toString();
                return (URL.revokeObjectURL(e), t.substr(t.lastIndexOf("/") + 1));
              }
              function Mw() {}
              function Rw() {
                var e = Symbol.prototype;
                "description" in e || Object.defineProperty(e, "description", { get: _w });
              }
              function _w() {
                var e = /\((.*)\)/.exec(this.toString());
                return e ? e[1] : void 0;
              }
              function Dw() {}
              function Pw() {
                for (
                  var e = g([
                      Uint8Array,
                      Uint8ClampedArray,
                      Uint16Array,
                      Uint32Array,
                      Int8Array,
                      Int16Array,
                      Int32Array,
                      Float32Array,
                      Float64Array,
                    ]),
                    t = e.next();
                  !t.done;
                  t = e.next()
                )
                  ((t = t.value).prototype.indexOf || (t.prototype.indexOf = Lw),
                    t.prototype.lastIndexOf || (t.prototype.lastIndexOf = Nw),
                    t.prototype.includes || (t.prototype.includes = Ow));
              }
              function Lw(e, t) {
                return Array.prototype.indexOf.call(this, e, t);
              }
              function Nw(e, t) {
                return Array.prototype.lastIndexOf.call(this, e, t);
              }
              function Ow(e, t) {
                return -1 !== this.indexOf(e, t);
              }
              function Uw() {}
              function Bw() {
                if (e.HTMLMediaElement) {
                  var t = HTMLMediaElement.prototype.play;
                  HTMLMediaElement.prototype.play = function () {
                    var e = t.apply(this);
                    return (e && e.catch(function () {}), e);
                  };
                }
              }
              function jw() {}
              function Fw() {
                if (e.HTMLVideoElement) {
                  var t = HTMLVideoElement.prototype;
                  !t.getVideoPlaybackQuality &&
                    ("webkitDroppedFrameCount" in t || "number" == typeof ts().webkitDroppedFrameCount) &&
                    (t.getVideoPlaybackQuality = Vw);
                }
              }
              function Vw() {
                return {
                  droppedVideoFrames: this.webkitDroppedFrameCount,
                  totalVideoFrames: this.webkitDecodedFrameCount,
                  corruptedVideoFrames: 0,
                  creationTime: NaN,
                  totalFrameDelay: 0,
                };
              }
              function Hw() {}
              function Gw() {
                if (!e.VTTCue && e.TextTrackCue) {
                  var t = null,
                    n = TextTrackCue.length;
                  if (3 == n) t = zw;
                  else if (6 == n) t = Xw;
                  else {
                    try {
                      var r = !!zw(1, 2, "");
                    } catch (i) {
                      r = !1;
                    }
                    r && (t = zw);
                  }
                  t &&
                    (e.VTTCue = function (e, n, r) {
                      return t(e, n, r);
                    });
                }
              }
              function zw(t, n, r) {
                return new e.TextTrackCue(t, n, r);
              }
              function Xw(t, n, r) {
                return new e.TextTrackCue(t + "-" + n + "-" + r, t, n, r);
              }
              function Ww(e) {
                (Ui.call(this),
                  (this.g = e),
                  (this.m = null),
                  (this.h = []),
                  (this.j = -1),
                  (this.i = this.l = null),
                  (this.o = new ne()));
              }
              function Kw() {}
              (vT(cw),
                (mT.RandomUUID = kw),
                (kw.install = Iw),
                vT(Iw),
                (mT.Symbol = Mw),
                (Mw.install = Rw),
                vT(Rw),
                (mT.TypedArray = Dw),
                (Dw.install = Pw),
                vT(Pw),
                (mT.VideoPlayPromise = Uw),
                (Uw.install = Bw),
                vT(Bw),
                (mT.VideoPlaybackQuality = jw),
                (jw.install = Fw),
                vT(Fw),
                (mT.VTTCue = Hw),
                (Hw.install = Gw),
                vT(Gw),
                p(Ww, Ui),
                ((i = Ww.prototype).destroy = function () {
                  var e = this;
                  return D(function (t) {
                    if (1 == t.g) return x(t, e.removeAllItems(), 2);
                    ((e.g = null), e.o && (e.o.release(), (e.o = null)), Ui.prototype.release.call(e), T(t));
                  });
                }),
                (i.configure = function (e) {
                  this.m = e;
                }),
                (i.getConfiguration = function () {
                  return this.m;
                }),
                (i.getCurrentItem = function () {
                  return this.h.length && this.j >= 0 && this.j < this.h.length ? this.h[this.j] : null;
                }),
                (i.getCurrentItemIndex = function () {
                  return this.j;
                }),
                (i.getItems = function () {
                  return this.h.slice();
                }),
                (i.insertItems = function (e) {
                  (this.h.push.apply(this.h, m(e)), this.dispatchEvent(new Li("itemsinserted")));
                }),
                (i.removeAllItems = function () {
                  var e,
                    t,
                    n,
                    r,
                    i = this;
                  return D(function (a) {
                    if (1 == a.g) return (i.o.Qa(), i.h.length && i.j >= 0 ? x(a, i.g.Cc(), 2) : a.A(2));
                    if (4 != a.g) {
                      for (
                        e = [],
                          i.i && (i.i.preloadManager.l || e.push(i.i.preloadManager.destroy()), (i.i = null)),
                          i.l && (i.l.preloadManager.l || e.push(i.l.preloadManager.destroy()), (i.l = null)),
                          t = g(i.h),
                          n = t.next();
                        !n.done;
                        n = t.next()
                      )
                        (r = n.value).preloadManager &&
                          !r.preloadManager.l &&
                          e.push(r.preloadManager.destroy());
                      return e.length ? x(a, Promise.all(e), 4) : a.A(4);
                    }
                    ((i.h = []), (i.j = -1), i.dispatchEvent(new Li("itemsremoved")), T(a));
                  });
                }),
                (i.playItem = function (e) {
                  var t,
                    n,
                    r,
                    i,
                    a,
                    o,
                    s,
                    u,
                    l,
                    d,
                    c,
                    h,
                    p,
                    f,
                    m,
                    v,
                    y,
                    b = this;
                  return D(function (S) {
                    switch (S.g) {
                      case 1:
                        if ((b.o.Qa(), !b.h.length || e >= b.h.length)) throw new Ke(2, 7, 7007);
                        if (
                          ((t = b.getCurrentItem()),
                          (n = b.h[e]),
                          b.j != e && ((b.j = e), b.dispatchEvent(new Li("currentitemchanged"))),
                          (r = b.g.bf()),
                          (i = b.m ? b.m.preloadNextUrlWindow : 0) > 0 &&
                            ((a = !1),
                            b.o.D(r, "timeupdate", function () {
                              var e, t, n, o;
                              return D(function (s) {
                                switch (s.g) {
                                  case 1:
                                    if (b.l || b.h.length <= 1 || a || b.g.W() || !r.duration)
                                      return s.return();
                                    if (((e = b.g.Ra().end - r.currentTime), isNaN(e))) {
                                      s.A(0);
                                      break;
                                    }
                                    if (!(e <= i)) {
                                      s.A(0);
                                      break;
                                    }
                                    if (
                                      ((t = b.m && b.m.repeatMode),
                                      (n = null),
                                      b.j + 1 < b.h.length ? (n = b.h[b.j + 1]) : 1 == t && (n = b.h[0]),
                                      !n || (n.preloadManager && !n.preloadManager.l))
                                    ) {
                                      s.A(0);
                                      break;
                                    }
                                    return (
                                      (a = !0),
                                      (o = null),
                                      w(s, 5),
                                      x(s, b.g.preload(n.manifestUri, n.startTime, n.mimeType, n.config), 7)
                                    );
                                  case 7:
                                    ((o = s.h), A(s, 6));
                                    break;
                                  case 5:
                                    (E(s), (o = null));
                                  case 6:
                                    ((b.l = { item: n, preloadManager: o }), (a = !1), T(s));
                                }
                              });
                            })),
                          b.o.D(b.g, "complete", function () {
                            var e = b.m && b.m.repeatMode,
                              t = !1;
                            if (2 == e) t = !0;
                            else {
                              var n = b.j + 1;
                              n < b.h.length
                                ? b.playItem(n)
                                : 1 == e && (1 == b.h.length ? (t = !0) : b.playItem(0));
                            }
                            t &&
                              (r.paused
                                ? ((r.currentTime = b.g.Ra().start), r.play())
                                : b.o.D(r, "paused", function () {
                                    ((r.currentTime = b.g.Ra().start), r.play());
                                  }));
                          }),
                          (o = n.manifestUri),
                          n.preloadManager && !n.preloadManager.l && (o = n.preloadManager),
                          (s = !1),
                          b.l && b.l.item == n && b.l.preloadManager
                            ? (o = b.l.preloadManager)
                            : b.i &&
                              b.i.item == n &&
                              b.i.preloadManager &&
                              ((o = b.i.preloadManager), (s = !0)),
                          !b.i)
                        ) {
                          S.A(2);
                          break;
                        }
                        if (s || b.i.preloadManager.l) {
                          S.A(3);
                          break;
                        }
                        return x(S, b.i.preloadManager.destroy(), 3);
                      case 3:
                        b.i = null;
                      case 2:
                        if (!(b.m && b.m.preloadPrevItem && t && b.g.$d() === rp)) {
                          S.A(5);
                          break;
                        }
                        return ((u = null), w(S, 6), x(S, b.g.jj(), 8));
                      case 8:
                        ((u = S.h), A(S, 7));
                        break;
                      case 6:
                        (E(S), (u = null));
                      case 7:
                        b.i = { item: t, preloadManager: u };
                      case 5:
                        return (
                          n.config && (b.g.Oi(), b.g.configure(n.config)),
                          x(S, b.g.load(o, n.startTime, n.mimeType), 9)
                        );
                      case 9:
                        if (((b.l = null), n.extraText))
                          for (l = g(n.extraText), d = l.next(); !d.done; d = l.next())
                            (c = d.value).mime
                              ? b.g.Rd(c.uri, c.language, c.kind, c.mime, c.codecs)
                              : b.g.Rd(c.uri, c.language, c.kind);
                        if (n.extraThumbnail)
                          for (h = g(n.extraThumbnail), p = h.next(); !p.done; p = h.next())
                            ((f = p.value), b.g.Pe(f));
                        if (n.extraChapter)
                          for (m = g(n.extraChapter), v = m.next(); !v.done; v = m.next())
                            ((y = v.value), b.g.Oe(y.uri, y.language, y.mime));
                        T(S);
                    }
                  });
                }),
                V("shaka.queue.QueueManager", Ww),
                (Ww.prototype.playItem = Ww.prototype.playItem),
                (Ww.prototype.removeAllItems = Ww.prototype.removeAllItems),
                (Ww.prototype.insertItems = Ww.prototype.insertItems),
                (Ww.prototype.getItems = Ww.prototype.getItems),
                (Ww.prototype.getCurrentItemIndex = Ww.prototype.getCurrentItemIndex),
                (Ww.prototype.getCurrentItem = Ww.prototype.getCurrentItem),
                (Ww.prototype.getConfiguration = Ww.prototype.getConfiguration),
                (Ww.prototype.configure = Ww.prototype.configure),
                (Ww.prototype.destroy = Ww.prototype.destroy),
                (up = function (e) {
                  return new Ww(e);
                }),
                (Kw.prototype.parseInit = function () {}),
                (Kw.prototype.setSequenceMode = function () {}),
                (Kw.prototype.setManifestType = function () {}),
                (Kw.prototype.parseMedia = function (e, t) {
                  for (
                    var n = null, r = [], i = (e = g((e = Ye(e).split(/\r?\n/)))).next();
                    !i.done;
                    i = e.next()
                  )
                    if ((i = i.value) && !/^\s+$/.test(i) && (i = qw.exec(i))) {
                      var a = Yw.exec(i[1]);
                      ((i = new Cn(
                        (a = 60 * parseInt(a[1], 10) + parseFloat(a[2].replace(",", "."))),
                        t.segmentEnd ? t.segmentEnd : a + 2,
                        i[2],
                      )),
                        n && ((n.endTime = a), r.push(n)),
                        (n = i));
                    }
                  return (n && r.push(n), r);
                }),
                V("shaka.text.LrcTextParser", Kw),
                (Kw.prototype.parseMedia = Kw.prototype.parseMedia),
                (Kw.prototype.setManifestType = Kw.prototype.setManifestType),
                (Kw.prototype.setSequenceMode = Kw.prototype.setSequenceMode),
                (Kw.prototype.parseInit = Kw.prototype.parseInit));
              var qw = /^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,
                Yw = /^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;
              function $w() {
                this.g = "UNKNOWN";
              }
              function Jw(e, t, n, r, i, a, o, s, u, l, d, c, h, p) {
                var f = d;
                if (Qt(t)) {
                  if (!c) return null;
                  var m = { tagName: "span", children: [tn(t)], attributes: {}, parent: null };
                } else m = t;
                for (
                  var v = null, y = g(ES), b = y.next();
                  !b.done && !(v = aS(m, "backgroundImage", i, "#", b.value)[0]);
                  b = y.next()
                );
                y = null;
                var x = /^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;
                if ((b = dn(m, ES, "backgroundImage")) && x.test(b)) {
                  if ((y = parseInt(b.split(":").pop(), 10) - 1) >= p.length) return null;
                  y = p[y];
                } else
                  h &&
                    b &&
                    !b.startsWith("#") &&
                    ((x = new me(h)), (b = new me(b)), (b = x.resolve(b).toString()) && (y = b));
                if (
                  (("p" == t.tagName || v || y) && (c = !0),
                  (t = c),
                  (b = "default" == (m.attributes["xml:space"] || (u ? "default" : "preserve"))),
                  (u = []),
                  !(x = m.children.every(Qt)))
                )
                  for (var T = g(m.children), w = T.next(); !w.done; w = T.next())
                    (w = Jw(e, w.value, n, r, i, a, o, s, b, l, m, c, h, p)) && u.push(w);
                if (
                  ((i = null != d),
                  (h = tn(m)),
                  (h = m.children.length && h && /\S/.test(h)),
                  !(
                    (T = m.attributes.begin || m.attributes.end || m.attributes.dur) ||
                    h ||
                    "br" == m.tagName ||
                    0 != u.length ||
                    (i && !b)
                  ))
                )
                  return null;
                for (h = (p = sS(m, r)).start, p = p.end; f && f.tagName && "tt" != f.tagName; )
                  ((h = (p = oS(f, r, h, p)).start), (p = p.end), (f = f.parent));
                if (
                  (null == h && (h = 0),
                  (h += n.periodStart),
                  (p = null == p ? 1 / 0 : p + n.periodStart),
                  "HLS" !== e.g && ((h = Math.max(h, n.segmentStart)), (p = Math.min(p, n.segmentEnd))),
                  !T && u.length > 0)
                )
                  for (h = 1 / 0, p = 0, r = (n = g(u)).next(); !r.done; r = n.next())
                    ((r = r.value), (h = Math.min(h, r.startTime)), (p = Math.max(p, r.endTime)));
                if ("br" == m.tagName) return (((e = new Cn(h, p, "")).lineBreak = !0), e);
                if (
                  ((n = ""),
                  x && ((n = et(tn(m) || "")), b && (n = n.replace(/\s+/g, " "))),
                  ((n = new Cn(h, p, n)).nestedCues = u),
                  c || (n.isContainer = !0),
                  l && (n.cellResolution = l),
                  (l = aS(m, "region", o, "")[0]),
                  m.attributes.region && l && l.attributes["xml:id"])
                ) {
                  var S = l.attributes["xml:id"];
                  n.region = s.filter(function (e) {
                    return e.id == S;
                  })[0];
                }
                return (
                  (s = l),
                  d && i && !m.attributes.region && !m.attributes.style && (s = aS(d, "region", o, "")[0]),
                  (function (e, t, n, r, i, a, o, s, u) {
                    if (
                      ("rtl" == tS(e, n, r, o, "direction", (s = s || u)) && (t.direction = "rtl"),
                      "tb" == (u = tS(e, n, r, o, "writingMode", s)) || "tblr" == u
                        ? (t.writingMode = "vertical-lr")
                        : "tbrl" == u
                          ? (t.writingMode = "vertical-rl")
                          : "rltb" == u || "rl" == u
                            ? (t.direction = "rtl")
                            : u && (t.direction = Fn),
                      (u = tS(e, n, r, o, "textAlign", !0))
                        ? ((t.positionAlign = wS.get(u)),
                          (t.lineAlign = TS.get(u)),
                          (t.textAlign = Un[u.toUpperCase()]))
                        : (t.textAlign = On),
                      (u = tS(e, n, r, o, "displayAlign", !0)) && (t.displayAlign = jn[u.toUpperCase()]),
                      (u = tS(e, n, r, o, "color", s)) && (t.color = Zw(u)),
                      (u = tS(e, n, r, o, "backgroundColor", s)) && (t.backgroundColor = Zw(u)),
                      (u = tS(e, n, r, o, "border", s)) && (t.border = u),
                      (u = tS(e, n, r, o, "fontFamily", s)))
                    )
                      switch (u) {
                        case "monospaceSerif":
                          t.fontFamily = "Courier New,Liberation Mono,Courier,monospace";
                          break;
                        case "proportionalSansSerif":
                          t.fontFamily = "Arial,Helvetica,Liberation Sans,sans-serif";
                          break;
                        case "sansSerif":
                          t.fontFamily = "sans-serif";
                          break;
                        case "monospaceSansSerif":
                          t.fontFamily = "Consolas,monospace";
                          break;
                        case "proportionalSerif":
                          t.fontFamily = "serif";
                          break;
                        default:
                          t.fontFamily = u
                            .split(",")
                            .filter(function (e) {
                              return "default" != e;
                            })
                            .join(",");
                      }
                    switch (
                      ((u = tS(e, n, r, o, "fontWeight", s)) && "bold" == u && (t.fontWeight = qn),
                      (u = tS(e, n, r, o, "wrapOption", s)),
                      (t.wrapLine = !u || "noWrap" != u),
                      (u = tS(e, n, r, o, "lineHeight", s)) && u.match(pS) && (t.lineHeight = u),
                      (u = tS(e, n, r, o, "fontSize", s)) && (u.match(pS) || u.match(hS)) && (t.fontSize = u),
                      (u = tS(e, n, r, o, "fontStyle", s)) && (t.fontStyle = Jn[u.toUpperCase()]),
                      i
                        ? ((a = i.attributes.imageType || i.attributes.imagetype),
                          (u = i.attributes.encoding),
                          (i = tn(i).trim()),
                          "PNG" == a &&
                            "Base64" == u &&
                            i &&
                            (t.backgroundImage = "data:image/png;base64," + i))
                        : a && (t.backgroundImage = a),
                      (i = tS(e, n, r, o, "textOutline", s)) &&
                        ((i = i.split(" "))[0].match(pS)
                          ? (t.textStrokeColor = t.color)
                          : ((t.textStrokeColor = Zw(i[0])), i.shift()),
                        i[0] && i[0].match(pS) ? (t.textStrokeWidth = i[0]) : (t.textStrokeColor = "")),
                      (i = tS(e, n, r, o, "letterSpacing", s)) && i.match(pS) && (t.letterSpacing = i),
                      (i = tS(e, n, r, o, "linePadding", s)) && i.match(pS) && (t.linePadding = i),
                      (i = tS(e, n, r, o, "opacity", s)) && (t.opacity = parseFloat(i)),
                      (i = nS(e, r, o, "textDecoration")) && eS(t, i),
                      (i = rS(e, n, o, "textDecoration")) && eS(t, i),
                      (i = tS(e, n, r, o, "textCombine", s)) && (t.textCombineUpright = i),
                      tS(e, n, r, o, "ruby", s))
                    ) {
                      case "container":
                        t.rubyTag = "ruby";
                        break;
                      case "text":
                        t.rubyTag = "rt";
                    }
                  })(e, n, m, s, v, y, a, t, 0 == u.length),
                  n
                );
              }
              function Qw(e, t, n, r) {
                var i = new Nt(),
                  a = t.attributes["xml:id"];
                if (!a) return null;
                ((i.id = a),
                  (a = null),
                  r && (a = cS.exec(r) || fS.exec(r)),
                  (r = a ? Number(a[1]) : null),
                  (a = a ? Number(a[2]) : null));
                var o,
                  s = nS(e, t, n, "extent");
                if (s) {
                  var u = (o = cS.exec(s)) || fS.exec(s);
                  null != u &&
                    ((i.width = Number(u[1])),
                    (i.height = Number(u[2])),
                    o ||
                      (null != r && (i.width = (100 * i.width) / r),
                      null != a && (i.height = (100 * i.height) / a)),
                    (i.widthUnits = o || null != r ? Ot : 0),
                    (i.heightUnits = o || null != a ? Ot : 0));
                }
                return (
                  (e = nS(e, t, n, "origin")) &&
                    null != (u = (o = cS.exec(e)) || fS.exec(e)) &&
                    ((i.viewportAnchorX = Number(u[1])),
                    (i.viewportAnchorY = Number(u[2])),
                    o
                      ? s ||
                        ((i.width = 100 - i.viewportAnchorX),
                        (i.widthUnits = Ot),
                        (i.height = 100 - i.viewportAnchorY),
                        (i.heightUnits = Ot))
                      : (null != a && (i.viewportAnchorY = (100 * i.viewportAnchorY) / a),
                        null != r && (i.viewportAnchorX = (100 * i.viewportAnchorX) / r)),
                    (i.viewportAnchorUnits = o || null != r ? Ot : 0)),
                  i
                );
              }
              function Zw(e) {
                var t = e.match(/rgba\(([^)]+)\)/);
                return t && 4 == (t = t[1].split(",")).length
                  ? ((t[3] = String(Number(t[3]) / 255)), "rgba(" + t.join(",") + ")")
                  : e;
              }
              function eS(e, t) {
                for (var n = (t = g(t.split(" "))).next(); !n.done; n = t.next())
                  switch (n.value) {
                    case "underline":
                      e.textDecoration.includes(Qn) || e.textDecoration.push(Qn);
                      break;
                    case "noUnderline":
                      e.textDecoration.includes(Qn) && Q(e.textDecoration, Qn);
                      break;
                    case "lineThrough":
                      e.textDecoration.includes("lineThrough") || e.textDecoration.push("lineThrough");
                      break;
                    case "noLineThrough":
                      e.textDecoration.includes("lineThrough") && Q(e.textDecoration, "lineThrough");
                      break;
                    case "overline":
                      e.textDecoration.includes("overline") || e.textDecoration.push("overline");
                      break;
                    case "noOverline":
                      e.textDecoration.includes("overline") && Q(e.textDecoration, "overline");
                  }
              }
              function tS(e, t, n, r, i, a) {
                return ((a = void 0 === a || a), (t = rS(e, t, r, i)) ? t : a ? nS(e, n, r, i) : null);
              }
              function nS(e, t, n, r) {
                if (!t) return null;
                var i = dn(t, AS, r);
                return i || iS(e, t, n, r);
              }
              function rS(e, t, n, r) {
                var i = dn(t, AS, r);
                return i || iS(e, t, n, r);
              }
              function iS(e, t, n, r) {
                t = aS(t, "style", n, "");
                for (var i = null, a = 0; a < t.length; a++) {
                  var o = un(t[a], "urn:ebu:tt:style", r);
                  (o || (o = dn(t[a], AS, r)), o || (o = rS(e, t[a], n, r)), o && (i = o));
                }
                return i;
              }
              function aS(e, t, n, r, i) {
                var a = [];
                if (!e || n.length < 1) return a;
                var o = e;
                for (e = null; !e && !(e = i ? un(o, i, t) : o.attributes[t]) && (o = o.parent); );
                if ((t = e))
                  for (i = (t = g(t.split(" "))).next(); !i.done; i = t.next())
                    for (i = i.value, o = (e = g(n)).next(); !o.done; o = e.next())
                      if (r + (o = o.value).attributes["xml:id"] == i) {
                        a.push(o);
                        break;
                      }
                return a;
              }
              function oS(e, t, n, r) {
                return (
                  (e = sS(e, t)),
                  null == n ? (n = e.start) : null != e.start && (n += e.start),
                  null == r ? (r = e.end) : null != e.start && (r += e.start),
                  { start: n, end: r }
                );
              }
              function sS(e, t) {
                var n = uS(e.attributes.begin, t),
                  r = uS(e.attributes.end, t);
                return (
                  (e = uS(e.attributes.dur, t)),
                  null == r && null != e && (r = n + e),
                  { start: n, end: r }
                );
              }
              function uS(e, t) {
                var n = null;
                if (gS.test(e)) {
                  ((e = gS.exec(e)), (n = Number(e[1])));
                  var r = Number(e[2]),
                    i = Number(e[3]),
                    a = Number(e[4]);
                  n = (i += (a += (Number(e[5]) || 0) / t.h) / t.frameRate) + 60 * r + 3600 * n;
                } else if (mS.test(e)) n = lS(mS, e);
                else if (vS.test(e)) n = lS(vS, e);
                else if (yS.test(e)) ((e = yS.exec(e)), (n = Number(e[1]) / t.frameRate));
                else if (bS.test(e)) ((e = bS.exec(e)), (n = Number(e[1]) / t.g));
                else if (xS.test(e)) n = lS(xS, e);
                else if (e) throw new Ke(2, 2, 2001, "Could not parse cue time range in TTML");
                return n;
              }
              function lS(e, t) {
                return null == (e = e.exec(t)) || "" == e[0]
                  ? null
                  : (Number(e[4]) || 0) / 1e3 +
                      (Number(e[3]) || 0) +
                      60 * (Number(e[2]) || 0) +
                      3600 * (Number(e[1]) || 0);
              }
              function dS(e, t, n, r) {
                ((this.frameRate = Number(e) || 30),
                  (this.h = Number(t) || 1),
                  (this.g = Number(r)),
                  0 == this.g && (this.g = e ? this.frameRate * this.h : 1),
                  n && (e = /^(\d+) (\d+)$/g.exec(n)) && (this.frameRate *= Number(e[1]) / Number(e[2])));
              }
              (Tr("application/x-subtitle-lrc", function () {
                return new Kw();
              }),
                ($w.prototype.parseInit = function () {}),
                ($w.prototype.setSequenceMode = function () {}),
                ($w.prototype.setManifestType = function (e) {
                  this.g = e;
                }),
                ($w.prototype.parseMedia = function (e, t, n, r) {
                  var i = Ye(e);
                  if (((e = []), "" == i)) return e;
                  var a = $t(i, "tt", !0);
                  if (!a) throw new Ke(2, 2, 2005, "Failed to parse TTML.");
                  if (!(i = rn(a, "body")[0])) return [];
                  var o = dn(a, SS, "frameRate"),
                    s = dn(a, SS, "subFrameRate"),
                    u = dn(a, SS, "frameRateMultiplier"),
                    l = dn(a, SS, "tickRate"),
                    d = dn(a, SS, "cellResolution"),
                    c = a.attributes["xml:space"] || "default",
                    h = dn(a, AS, "extent");
                  if ("default" != c && "preserve" != c)
                    throw new Ke(2, 2, 2005, "Invalid xml:space value: " + c);
                  ((c = "default" == c),
                    (o = new dS(o, s, u, l)),
                    (d = (function (e) {
                      return e && (e = /^(\d+) (\d+)$/.exec(e))
                        ? { columns: parseInt(e[1], 10), rows: parseInt(e[2], 10) }
                        : null;
                    })(d)),
                    (s = ((s = rn(a, "metadata")[0]) ? s.children : []).filter(function (e) {
                      return "\n" != e;
                    })),
                    (u = rn(a, "style")),
                    (l = []));
                  for (var p = g((a = rn(a, "region"))), f = p.next(); !f.done; f = p.next())
                    (f = Qw(this, f.value, u, h)) && l.push(f);
                  if (en(i, "p").length) throw new Ke(2, 2, 2001, "<p> can only be inside <div> in TTML");
                  for (p = (h = g(en(i, "div"))).next(); !p.done; p = h.next())
                    if (en(p.value, "span").length)
                      throw new Ke(2, 2, 2001, "<span> can only be inside <p> in TTML");
                  return (
                    (t = Jw(this, i, t, o, s, u, a, l, c, d, null, !1, n, r)) &&
                      (t.backgroundColor || (t.backgroundColor = "transparent"), e.push(t)),
                    e
                  );
                }),
                V("shaka.text.TtmlTextParser", $w),
                ($w.prototype.parseMedia = $w.prototype.parseMedia),
                ($w.prototype.setManifestType = $w.prototype.setManifestType),
                ($w.prototype.setSequenceMode = $w.prototype.setSequenceMode),
                ($w.prototype.parseInit = $w.prototype.parseInit));
              var cS = /^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,
                hS = /^(\d{1,4}(?:\.\d+)?|100)%$/,
                pS = /^(\d+px|\d+em|\d*\.?\d+c)$/,
                fS = /^(\d+)px (\d+)px$/,
                gS = /^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,
                mS = /^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,
                vS = /^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,
                yS = /^(\d*(?:\.\d*)?)f$/,
                bS = /^(\d*(?:\.\d*)?)t$/,
                xS = RegExp(
                  "^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$",
                ),
                TS = new Map()
                  .set("left", Gn)
                  .set("center", "center")
                  .set("right", "end")
                  .set("start", Gn)
                  .set("end", "end"),
                wS = new Map().set("left", "line-left").set("center", "center").set("right", "line-right"),
                SS = ["http://www.w3.org/ns/ttml#parameter", "http://www.w3.org/2006/10/ttaf1#parameter"],
                AS = ["http://www.w3.org/ns/ttml#styling", "http://www.w3.org/2006/10/ttaf1#styling"],
                ES = [
                  "http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",
                  "http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt",
                ];
              function kS() {
                this.g = new $w();
              }
              function IS() {
                this.g = "UNKNOWN";
              }
              function CS(e, t, n) {
                var r;
                (r = /^align:(start|middle|center|end|left|right)$/.exec(t))
                  ? ((t = r[1]), (e.textAlign = "middle" == t ? On : Un[t.toUpperCase()]))
                  : (r = /^vertical:(lr|rl)$/.exec(t))
                    ? (e.writingMode = "lr" == r[1] ? "vertical-lr" : "vertical-rl")
                    : (r = /^size:([\d.]+)%$/.exec(t))
                      ? (e.size = Number(r[1]))
                      : (r =
                            /^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(
                              t,
                            ))
                        ? ((e.position = Number(r[1])),
                          r[2] &&
                            ((t = r[2]),
                            (e.positionAlign =
                              "line-left" == t || "start" == t
                                ? "line-left"
                                : "line-right" == t || "end" == t
                                  ? "line-right"
                                  : "center" == t || "middle" == t
                                    ? "center"
                                    : Nn)))
                        : (r = /^region:(.*)$/.exec(t))
                          ? (t = (function (e, t) {
                              return (
                                (e = e.filter(function (e) {
                                  return e.id == t;
                                })),
                                e.length ? e[0] : null
                              );
                            })(n, r[1])) && (e.region = t)
                          : (n = /^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))
                            ? ((e.lineInterpretation = 1),
                              (e.line = Number(n[1])),
                              n[2] && (e.lineAlign = zn[n[2].toUpperCase()]))
                            : (n = /^line:(-?\d+)(?:,(start|end|center))?$/.exec(t)) &&
                              ((e.lineInterpretation = Hn),
                              (e.line = Number(n[1])),
                              n[2] && (e.lineAlign = zn[n[2].toUpperCase()]));
              }
              function MS() {
                this.g = null;
              }
              function RS(e, t, n) {
                var r, i, a;
                return (
                  new aa()
                    .box(
                      "payl",
                      da(function (e) {
                        r = Ye(e);
                      }, !1),
                    )
                    .box(
                      "iden",
                      da(function (e) {
                        i = Ye(e);
                      }, !1),
                    )
                    .box(
                      "sttg",
                      da(function (e) {
                        a = Ye(e);
                      }, !1),
                    )
                    .parse(e),
                  r
                    ? (function (e, t, n, r, i) {
                        if ((_n((e = new Cn(r, i, e))), t && (e.id = t), n))
                          for (t = new Bt(n), n = Vt(t); n; ) (CS(e, n, []), jt(t), (n = Vt(t)));
                        return e;
                      })(r, i, a, t, n)
                    : null
                );
              }
              function _S() {}
              function DS() {
                this.g = new IS();
              }
              function PS() {}
              function LS(e, t) {
                var n = t.Fontname;
                if (
                  (n && (e.fontFamily = n),
                  (n = t.Fontsize) && (e.fontSize = n + "px"),
                  (n = t.PrimaryColour) && (n = NS(n)) && (e.color = n),
                  (n = t.BackColour) && (n = NS(n)) && (e.backgroundColor = n),
                  t.Bold && (e.fontWeight = qn),
                  t.Italic && (e.fontStyle = $n),
                  t.Underline && e.textDecoration.push(Qn),
                  (n = t.Spacing) && (e.letterSpacing = n + "px"),
                  (n = t.Alignment))
                )
                  switch (parseInt(n, 10)) {
                    case 1:
                      ((e.displayAlign = Bn), (e.textAlign = "start"));
                      break;
                    case 2:
                      ((e.displayAlign = Bn), (e.textAlign = On));
                      break;
                    case 3:
                      ((e.displayAlign = Bn), (e.textAlign = "end"));
                      break;
                    case 5:
                      ((e.displayAlign = "before"), (e.textAlign = "start"));
                      break;
                    case 6:
                      ((e.displayAlign = "before"), (e.textAlign = On));
                      break;
                    case 7:
                      ((e.displayAlign = "before"), (e.textAlign = "end"));
                      break;
                    case 9:
                      ((e.displayAlign = "center"), (e.textAlign = "start"));
                      break;
                    case 10:
                      ((e.displayAlign = "center"), (e.textAlign = On));
                      break;
                    case 11:
                      ((e.displayAlign = "center"), (e.textAlign = "end"));
                  }
                (t = t.AlphaLevel) && (e.opacity = parseFloat(t));
              }
              function NS(e) {
                return (e = parseInt(e.replace("&H", ""), 16)) >= 0
                  ? "rgba(" +
                      (255 & e) +
                      "," +
                      ((e >> 8) & 255) +
                      "," +
                      ((e >> 16) & 255) +
                      "," +
                      (((e >> 24) & 255) ^ 255) / 255 +
                      ")"
                  : null;
              }
              function OS(e) {
                return (
                  3600 * ((e = FS.exec(e))[1] ? parseInt(e[1].replace(":", ""), 10) : 0) +
                  60 * parseInt(e[2], 10) +
                  parseFloat(e[3])
                );
              }
              (Tr("application/ttml+xml", function () {
                return new $w();
              }),
                (kS.prototype.parseInit = function (e) {
                  var t = !1;
                  if (
                    (new aa()
                      .box("moov", oa)
                      .box("trak", oa)
                      .box("mdia", oa)
                      .box("minf", oa)
                      .box("stbl", oa)
                      .S("stsd", sa)
                      .box("stpp", function (e) {
                        ((t = !0), e.parser.stop());
                      })
                      .parse(e),
                    !t)
                  )
                    throw new Ke(2, 2, 2007);
                }),
                (kS.prototype.setSequenceMode = function (e) {
                  this.g.setSequenceMode(e);
                }),
                (kS.prototype.setManifestType = function (e) {
                  this.g.setManifestType(e);
                }),
                (kS.prototype.parseMedia = function (e, t, n) {
                  var r = [],
                    i = null,
                    a = [],
                    o = new Map(),
                    s = [];
                  if (
                    (new aa()
                      .box("moof", oa)
                      .box("traf", oa)
                      .S("tfhd", function (e) {
                        i = to(e.reader, e.flags).Xd;
                      })
                      .S("trun", function (e) {
                        for (
                          var t = (e = g((e = io(e.reader, e.version, e.flags)).mh)).next();
                          !t.done;
                          t = e.next()
                        )
                          s.push(t.value.sampleSize || i || 0);
                      })
                      .S("subs", function (e) {
                        for (var t = e.reader, n = t.U(), r = -1, i = 0; i < n; i++) {
                          var a = t.U();
                          ((r += a), (a = t.Ca()));
                          for (var s = [], u = 0; u < a; u++)
                            (1 == e.version ? s.push(t.U()) : s.push(t.Ca()), t.Y(), t.Y(), t.U());
                          o.set(r, s);
                        }
                      })
                      .box(
                        "mdat",
                        da(function (e) {
                          a.push(e);
                        }, !1),
                      )
                      .parse(e, !1),
                    0 == a.length)
                  )
                    throw new Ke(2, 2, 2007);
                  for (var u = ut.apply(nt, m(a)), l = 0, d = 0; d < s.length; d++) {
                    var c = Ne(u, l, s[d]);
                    l += s[d];
                    var h = o.get(d);
                    if (h && h.length) {
                      c = Ne(c, 0, h[0]);
                      for (var p = [], f = h[0], v = 1; v < h.length; v++) {
                        var y = Ne(e, f, h[v]);
                        ((y = rt(y)), p.push("data:image/png;base64," + y), (f += h[v]));
                      }
                      r = r.concat(this.g.parseMedia(c, t, n, p));
                    } else r = r.concat(this.g.parseMedia(c, t, n, []));
                  }
                  return r;
                }),
                V("shaka.text.Mp4TtmlParser", kS),
                (kS.prototype.parseMedia = kS.prototype.parseMedia),
                (kS.prototype.setManifestType = kS.prototype.setManifestType),
                (kS.prototype.setSequenceMode = kS.prototype.setSequenceMode),
                (kS.prototype.parseInit = kS.prototype.parseInit),
                Tr('application/mp4; codecs="stpp"', function () {
                  return new kS();
                }),
                Tr('application/mp4; codecs="stpp.ttml"', function () {
                  return new kS();
                }),
                Tr('application/mp4; codecs="stpp.ttml.im1i"', function () {
                  return new kS();
                }),
                Tr('application/mp4; codecs="stpp.ttml.im1t"', function () {
                  return new kS();
                }),
                Tr('application/mp4; codecs="stpp.ttml.im2i"', function () {
                  return new kS();
                }),
                Tr('application/mp4; codecs="stpp.ttml.im2t"', function () {
                  return new kS();
                }),
                Tr('application/mp4; codecs="stpp.ttml.etd1"', function () {
                  return new kS();
                }),
                Tr('application/mp4; codecs="stpp.ttml.etd1|im1t"', function () {
                  return new kS();
                }),
                Tr('application/mp4; codecs="stpp.ttml.im1t|etd1"', function () {
                  return new kS();
                }),
                Tr('application/mp4; codecs="stpp.TTML.im1t"', function () {
                  return new kS();
                }),
                (IS.prototype.parseInit = function () {}),
                (IS.prototype.setSequenceMode = function () {}),
                (IS.prototype.setManifestType = function (e) {
                  this.g = e;
                }),
                (IS.prototype.parseMedia = function (e, t) {
                  var n = (e = (e = Ye(e)).replace(/\r\n|\r(?=[^\n]|$)/gm, "\n")).split(/\n{2,}/m);
                  if (!/^WEBVTT($|[ \t\n])/m.test(n[0])) throw new Ke(2, 2, 2e3);
                  if (((e = t.vttOffset), "HLS" == this.g && n[0].includes("X-TIMESTAMP-MAP"))) {
                    var r = n[0];
                    if (
                      ((e = r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m)),
                      (r = r.match(/MPEGTS:(\d+)/m)),
                      !e || !r)
                    )
                      throw new Ke(2, 2, 2e3);
                    if (null == (e = Gt(e[1]))) throw new Ke(2, 2, 2e3);
                    r = Number(r[1]);
                    for (var i = t.segmentStart - t.periodStart; i >= 95443.7176888889; )
                      ((i -= 95443.7176888889), (r += 8589934592));
                    e = t.periodStart + r / 9e4 - e;
                  }
                  for (t = [], i = (r = g(n[0].split("\n"))).next(); !i.done; i = r.next())
                    if (((i = i.value), /^Region:/.test(i))) {
                      i = new Bt(i);
                      var a = new Nt();
                      (Vt(i), jt(i));
                      for (var o = Vt(i); o; ) {
                        var s = a,
                          u = o;
                        ((o = /^id=(.*)$/.exec(u))
                          ? (s.id = o[1])
                          : (o = /^width=(\d{1,2}|100)%$/.exec(u))
                            ? (s.width = Number(o[1]))
                            : (o = /^lines=(\d+)$/.exec(u))
                              ? ((s.height = Number(o[1])), (s.heightUnits = 2))
                              : (o = /^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))
                                ? ((s.regionAnchorX = Number(o[1])), (s.regionAnchorY = Number(o[2])))
                                : (o = /^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))
                                  ? ((s.viewportAnchorX = Number(o[1])), (s.viewportAnchorY = Number(o[2])))
                                  : /^scroll=up$/.exec(u) && (s.scroll = "up"),
                          jt(i),
                          (o = Vt(i)));
                      }
                      t.push(a);
                    }
                  for (Dn((r = new Map())), i = [], a = (n = g(n.slice(1))).next(); !a.done; a = n.next()) {
                    if (
                      (1 != (a = a.value.split("\n")).length || a[0]) &&
                      !/^NOTE($|[ \t])/.test(a[0]) &&
                      "STYLE" == a[0]
                    ) {
                      for (s = [], o = -1, u = 1; u < a.length; u++)
                        (a[u].includes("::cue") && (s.push([]), (o = s.length - 1)),
                          -1 != o && (s[o].push(a[u]), a[u].includes("}") && (o = -1)));
                      for (o = (s = g(s)).next(); !o.done; o = s.next()) {
                        var l = o.value;
                        ((o = "global"),
                          (u = l[0].match(/\((.*)\)/)) && (o = u.pop()),
                          (u = l.slice(1, -1)),
                          l[0].includes("}") && (l = /\{(.*?)\}/.exec(l[0])) && (u = l[1].split(";")),
                          (l = r.get(o)) || (l = new Cn(0, 0, "")));
                        for (var d = !1, c = 0; c < u.length; c++) {
                          var h = /^\s*([^:]+):\s*(.*)/.exec(u[c]);
                          if (h) {
                            var p = h[2].trim().replace(";", "");
                            switch (h[1].trim()) {
                              case "background-color":
                              case "background":
                                ((d = !0), (l.backgroundColor = p));
                                break;
                              case "color":
                                ((d = !0), (l.color = p));
                                break;
                              case "font-family":
                                ((d = !0), (l.fontFamily = p));
                                break;
                              case "font-size":
                                ((d = !0), (l.fontSize = p));
                                break;
                              case "font-weight":
                                (parseInt(p, 10) >= 700 || "bold" == p) && ((d = !0), (l.fontWeight = qn));
                                break;
                              case "font-style":
                                switch (p) {
                                  case "normal":
                                    ((d = !0), (l.fontStyle = Yn));
                                    break;
                                  case "italic":
                                    ((d = !0), (l.fontStyle = $n));
                                    break;
                                  case "oblique":
                                    ((d = !0), (l.fontStyle = "oblique"));
                                }
                                break;
                              case "opacity":
                                ((d = !0), (l.opacity = parseFloat(p)));
                                break;
                              case "text-combine-upright":
                                ((d = !0), (l.textCombineUpright = p));
                                break;
                              case "text-shadow":
                                ((d = !0), (l.textShadow = p));
                                break;
                              case "white-space":
                                ((d = !0), (l.wrapLine = "noWrap" != p));
                            }
                          }
                        }
                        d && r.set(o, l);
                      }
                    }
                    if (
                      ((d = e),
                      (1 == (l = a).length && !l[0]) ||
                        /^NOTE($|[ \t])/.test(l[0]) ||
                        "STYLE" == l[0] ||
                        "REGION" == l[0])
                    )
                      a = null;
                    else if (
                      ((a = null),
                      l[0].includes("--\x3e") || ((a = l[0]), l.splice(0, 1)),
                      (o = Ht((s = new Bt(l[0])))),
                      (c = Ft(s, /[ \t]+--\x3e[ \t]+/g)),
                      (u = Ht(s)),
                      null == o || null == c || null == u)
                    )
                      (K("Failed to parse VTT time code. Cue skipped:", a, l), (a = null));
                    else {
                      for (
                        u += d,
                          (o += d) < 0 && (o = 0),
                          d = l.slice(1).join("\n").trim(),
                          r.has("global")
                            ? (((l = r.get("global").clone()).startTime = o),
                              (l.endTime = u),
                              (l.payload = d))
                            : (l = new Cn(o, u, d)),
                          jt(s),
                          o = Vt(s);
                        o;
                      )
                        (CS(l, o, t), jt(s), (o = Vt(s)));
                      (_n(l, r), null != a && (l.id = a), (a = l));
                    }
                    a && i.push(a);
                  }
                  return i;
                }),
                V("shaka.text.VttTextParser", IS),
                (IS.prototype.parseMedia = IS.prototype.parseMedia),
                (IS.prototype.setManifestType = IS.prototype.setManifestType),
                (IS.prototype.setSequenceMode = IS.prototype.setSequenceMode),
                (IS.prototype.parseInit = IS.prototype.parseInit),
                Tr("text/vtt", function () {
                  return new IS();
                }),
                Tr('text/vtt; codecs="vtt"', function () {
                  return new IS();
                }),
                Tr('text/vtt; codecs="wvtt"', function () {
                  return new IS();
                }),
                (MS.prototype.parseInit = function (e) {
                  var t = this,
                    n = !1;
                  if (
                    (new aa()
                      .box("moov", oa)
                      .box("trak", oa)
                      .box("mdia", oa)
                      .S("mdhd", function (e) {
                        ((e = ro(e.reader, e.version)), (t.g = e.timescale));
                      })
                      .box("minf", oa)
                      .box("stbl", oa)
                      .S("stsd", sa)
                      .box("wvtt", function () {
                        n = !0;
                      })
                      .parse(e),
                    !this.g)
                  )
                    throw new Ke(2, 2, 2008);
                  if (!n) throw new Ke(2, 2, 2008);
                }),
                (MS.prototype.setSequenceMode = function () {}),
                (MS.prototype.setManifestType = function () {}),
                (MS.prototype.parseMedia = function (e, t) {
                  if (!e.length) return [];
                  if (!this.g) throw new Ke(2, 2, 2008);
                  var n,
                    r = 0,
                    i = [],
                    a = [],
                    o = !1,
                    s = !1,
                    u = !1,
                    l = null;
                  if (
                    (new aa()
                      .box("moof", oa)
                      .box("traf", oa)
                      .S("tfdt", function (e) {
                        ((o = !0), (r = no(e.reader, e.version).baseMediaDecodeTime));
                      })
                      .S("tfhd", function (e) {
                        l = to(e.reader, e.flags).Wd;
                      })
                      .S("trun", function (e) {
                        ((s = !0), (i = io(e.reader, e.version, e.flags).mh));
                      })
                      .box(
                        "mdat",
                        da(function (e) {
                          ((u = !0), (n = e));
                        }, !1),
                      )
                      .parse(e, !1),
                    !u && !o && !s)
                  )
                    throw new Ke(2, 2, 2008);
                  e = r;
                  for (var d = new na(n, 0), c = g(i), h = c.next(); !h.done; h = c.next()) {
                    var p = (h = h.value).nh || l,
                      f = h.Gf ? r + h.Gf : e;
                    e = f + (p || 0);
                    var m = 0;
                    do {
                      var v = d.U();
                      m += v;
                      var y = null;
                      ("vttc" == ha(d.U()) ? v > 8 && (y = d.Tb(v - 8, !1)) : d.skip(v - 8),
                        p &&
                          y &&
                          ((v = RS(y, t.periodStart + f / this.g, t.periodStart + e / this.g)), a.push(v)));
                    } while (h.sampleSize && m < h.sampleSize);
                  }
                  return a.filter(Dr);
                }),
                V("shaka.text.Mp4VttParser", MS),
                (MS.prototype.parseMedia = MS.prototype.parseMedia),
                (MS.prototype.setManifestType = MS.prototype.setManifestType),
                (MS.prototype.setSequenceMode = MS.prototype.setSequenceMode),
                (MS.prototype.parseInit = MS.prototype.parseInit),
                Tr('application/mp4; codecs="wvtt"', function () {
                  return new MS();
                }),
                (_S.prototype.parseInit = function () {}),
                (_S.prototype.setSequenceMode = function () {}),
                (_S.prototype.setManifestType = function () {}),
                (_S.prototype.parseMedia = function (e) {
                  var t = Ye(e).replace(/\r+/g, "");
                  if (((e = []), "" == (t = t.trim()))) return e;
                  for (var n = (t = g(t.split("\n\n"))).next(); !n.done; n = t.next()) {
                    var r = new Bt((n = n.value.split("\n"))[0]),
                      i = Ht(r),
                      a = Ft(r, /,/g);
                    if (((r = Ht(r)), null == i || null == a || null == r))
                      throw new Ke(2, 2, 2001, "Could not parse cue time range in SubViewer");
                    e.push(new Cn(i, r, n.slice(1).join("\n").trim()));
                  }
                  return e;
                }),
                V("shaka.text.SbvTextParser", _S),
                (_S.prototype.parseMedia = _S.prototype.parseMedia),
                (_S.prototype.setManifestType = _S.prototype.setManifestType),
                (_S.prototype.setSequenceMode = _S.prototype.setSequenceMode),
                (_S.prototype.parseInit = _S.prototype.parseInit),
                Tr("text/x-subviewer", function () {
                  return new _S();
                }),
                (DS.prototype.parseInit = function () {}),
                (DS.prototype.setSequenceMode = function () {}),
                (DS.prototype.setManifestType = function () {}),
                (DS.prototype.parseMedia = function (e, t, n) {
                  var r = Ye(e);
                  if (((e = "WEBVTT\n\n"), "" != r))
                    for (
                      var i = (r = g((r = (r = r.replace(/\r+/g, "")).trim()).split("\n\n"))).next();
                      !i.done;
                      i = r.next()
                    )
                      ((i = i.value.split(/\n/))[0].match(/\d+/) && i.shift(),
                        (i[0] = i[0].replace(/,/g, ".")),
                        (e +=
                          i
                            .join("\n")
                            .replace(/{b}/g, "<b>")
                            .replace(/{\/b}/g, "</b>")
                            .replace(/{i}/g, "<i>")
                            .replace(/{\/i}/g, "</i>")
                            .replace(/{u}/g, "<u>")
                            .replace(/{\/u}/g, "</u>") + "\n\n"));
                  return ((e = Ne(Qe(e))), this.g.parseMedia(e, t, n, []));
                }),
                V("shaka.text.SrtTextParser", DS),
                (DS.prototype.parseMedia = DS.prototype.parseMedia),
                (DS.prototype.setManifestType = DS.prototype.setManifestType),
                (DS.prototype.setSequenceMode = DS.prototype.setSequenceMode),
                (DS.prototype.parseInit = DS.prototype.parseInit),
                Tr("text/srt", function () {
                  return new DS();
                }),
                (PS.prototype.parseInit = function () {}),
                (PS.prototype.setSequenceMode = function () {}),
                (PS.prototype.setManifestType = function () {}),
                (PS.prototype.parseMedia = function (e) {
                  var t = "",
                    n = "",
                    r = null,
                    i = null;
                  for (i = (e = g((i = Ye(e).split(/\r?\n\s*\r?\n/)))).next(); !i.done; i = e.next()) {
                    var a = i.value;
                    ((i = a),
                      (a = US.exec(a)) && ((r = a[1]), (i = a[2])),
                      "V4 Styles" == r || "V4+ Styles" == r
                        ? ((t = i), (t = n ? t + "\n" + i : i))
                        : "Events" == r && (n = n ? n + "\n" + i : i));
                  }
                  for (r = [], i = null, e = (t = g(t.split(/\r?\n/))).next(); !e.done; e = t.next())
                    if (((e = e.value), !/^\s*;/.test(e) && (a = BS.exec(e))))
                      if (((e = a[1].trim()), (a = a[2].trim()), "Format" == e)) i = a.split(jS);
                      else if ("Style" == e) {
                        ((e = a.split(jS)), (a = {}));
                        for (var o = 0; o < i.length && o < e.length; o++) a[i[o]] = e[o];
                        r.push(a);
                      }
                  for (
                    i = [], t = null, a = (n = g(n.split(/\r?\n/))).next(), e = {};
                    !a.done;
                    e = { aj: void 0 }, a = n.next()
                  )
                    if (((a = a.value), !/^\s*;/.test(a) && (o = BS.exec(a))))
                      if (((a = o[1].trim()), (o = o[2].trim()), "Format" == a)) t = o.split(jS);
                      else if ("Dialogue" == a) {
                        ((o = o.split(jS)), (a = {}));
                        for (var s = 0; s < t.length && s < o.length; s++) a[t[s]] = o[s];
                        ((o = new Cn(
                          (s = OS(a.Start)),
                          OS(a.End),
                          o
                            .slice(t.length - 1)
                            .join(",")
                            .replace(/\\N/g, "\n")
                            .replace(/\{[^}]+\}/g, ""),
                        )),
                          (e.aj = a.Style),
                          (e = r.find(
                            (function (e) {
                              return function (t) {
                                return t.Name == e.aj;
                              };
                            })(e),
                          )) && LS(o, e),
                          i.push(o));
                      }
                  return i;
                }),
                V("shaka.text.SsaTextParser", PS),
                (PS.prototype.parseMedia = PS.prototype.parseMedia),
                (PS.prototype.setManifestType = PS.prototype.setManifestType),
                (PS.prototype.setSequenceMode = PS.prototype.setSequenceMode),
                (PS.prototype.parseInit = PS.prototype.parseInit));
              var US = /^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,
                BS = /^\s*([^:]+):\s*(.*)/,
                jS = /\s*,\s*/,
                FS = /^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;
              function VS(e, t) {
                var n = 1 & e[t + 1] ? 7 : 9;
                return t + n <= e.length &&
                  (e = (((3 & e[t + 3]) << 11) | (e[t + 4] << 3) | ((224 & e[t + 5]) >>> 5)) - n) > 0
                  ? { ee: n, ra: e }
                  : null;
              }
              function HS(e, t) {
                var n = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350],
                  r = (60 & e[t + 2]) >>> 2;
                if (r > n.length - 1) return null;
                var i = ((192 & e[t + 2]) >>> 6) + 1,
                  a = (1 & e[t + 2]) << 2;
                return (
                  (a |= (192 & e[t + 3]) >>> 6),
                  { sampleRate: n[r], channelCount: a, codec: "mp4a.40." + i }
                );
              }
              function GS(e, t) {
                if (t + 1 < e.length && 255 === e[t] && 240 == (246 & e[t + 1])) {
                  var n = 1 & e[t + 1] ? 7 : 9;
                  if (t + n >= e.length) return !1;
                  var r = ((3 & e[t + 3]) << 11) | (e[t + 4] << 3) | ((224 & e[t + 5]) >>> 5);
                  return (
                    !(r <= n) &&
                    ((t += r) === e.length || (t + 1 < e.length && 255 === e[t] && 240 == (246 & e[t + 1])))
                  );
                }
                return !1;
              }
              function zS(e) {
                ((this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null));
              }
              function XS(e, t) {
                if (t + 8 > e.length || 11 !== e[t] || 119 !== e[t + 1]) return null;
                var n = e[t + 4] >> 6;
                if (n >= 3) return null;
                var r = 63 & e[t + 4],
                  i =
                    2 *
                    [
                      64, 69, 96, 64, 70, 96, 80, 87, 120, 80, 88, 120, 96, 104, 144, 96, 105, 144, 112, 121,
                      168, 112, 122, 168, 128, 139, 192, 128, 140, 192, 160, 174, 240, 160, 175, 240, 192,
                      208, 288, 192, 209, 288, 224, 243, 336, 224, 244, 336, 256, 278, 384, 256, 279, 384,
                      320, 348, 480, 320, 349, 480, 384, 417, 576, 384, 418, 576, 448, 487, 672, 448, 488,
                      672, 512, 557, 768, 512, 558, 768, 640, 696, 960, 640, 697, 960, 768, 835, 1152, 768,
                      836, 1152, 896, 975, 1344, 896, 976, 1344, 1024, 1114, 1536, 1024, 1115, 1536, 1152,
                      1253, 1728, 1152, 1254, 1728, 1280, 1393, 1920, 1280, 1394, 1920,
                    ][3 * r + n];
                if (t + i > e.length) return null;
                var a = e[t + 6] >> 5,
                  o = 0;
                (2 === a ? (o += 2) : (1 & a && 1 !== a && (o += 2), 4 & a && (o += 2)),
                  (o = (((e[t + 6] << 8) | e[t + 7]) >> (12 - o)) & 1));
                var s = 7 & e[t + 5];
                return (
                  (e = new Uint8Array([
                    (n << 6) | ((e[t + 5] >> 3) << 1) | (s >> 2),
                    ((3 & s) << 6) | (a << 3) | (o << 2) | (r >> 4),
                    (r << 4) & 224,
                  ])),
                  {
                    sampleRate: [48e3, 44100, 32e3][n],
                    channelCount: [2, 1, 2, 3, 3, 4, 4, 5][a] + o,
                    Ga: e,
                    ra: i,
                  }
                );
              }
              function WS(e, t) {
                if (11 === e[t] && 119 === e[t + 1]) {
                  var n,
                    r,
                    i = 0,
                    a = 5;
                  for (t += a; a > 0; ) {
                    r = e[t];
                    var o = Math.min(a, 8),
                      s = 8 - o;
                    ((n = (r & (n = (4278190080 >>> (24 + s)) << s)) >> s),
                      (i = i ? (i << o) | n : n),
                      (t += 1),
                      (a -= o));
                  }
                  if (i < 16) return !0;
                }
                return !1;
              }
              function KS(e) {
                ((this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null));
              }
              function qS(e, t) {
                if (t + 8 > e.length || 2935 != ((e[t] << 8) | e[t + 1])) return null;
                var n = new hs(e.subarray(t + 2));
                (fs(n, 2), fs(n, 3));
                var r = (gs(n, 11) + 1) << 1,
                  i = gs(n, 2);
                if (3 == i) {
                  i = [24e3, 22060, 16e3][(i = gs(n, 2))];
                  var a = 3;
                } else ((i = [48e3, 44100, 32e3][i]), (a = gs(n, 2)));
                var o = gs(n, 3),
                  s = gs(n, 1);
                return (
                  (n = gs(n, 5)),
                  t + r > e.byteLength
                    ? null
                    : ((e = Math.floor((r * i) / (16 * [1, 2, 3, 6][a]))),
                      (e = new Uint8Array([
                        (8160 & e) >> 5,
                        (31 & e) << 3,
                        (i << 6) | (n << 1),
                        (o << 1) | s,
                        0,
                      ])),
                      { sampleRate: i, channelCount: [2, 1, 2, 3, 3, 4, 4, 5][o] + s, Ga: e, ra: r })
                );
              }
              function YS(e) {
                ((this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null));
              }
              (Tr("text/x-ssa", function () {
                return new PS();
              }),
                ((i = zS.prototype).destroy = function () {
                  this.g.clear();
                }),
                (i.isSupported = function (e) {
                  return "audio/aac" == e.toLowerCase().split(";")[0] && Qa(this.convertCodecs("audio", e));
                }),
                (i.convertCodecs = function (e, t) {
                  return "audio/aac" == t.toLowerCase().split(";")[0]
                    ? 'audio/mp4; codecs="' + (mr(t) || "mp4a.40.2") + '"'
                    : t;
                }),
                (i.getOriginalMimeType = function () {
                  return this.j;
                }),
                (i.transmux = function (e, t, n, r) {
                  for (var i = Ne(e), a = ds(i), o = a.length; o < i.length && !GS(i, o); o++);
                  if (
                    ((e = 1e3 * n.endTime),
                    (a = ls(a)).length &&
                      n &&
                      (a = a.find(function (e) {
                        return "com.apple.streaming.transportStreamTimestamp" === e.description;
                      })) &&
                      (e = a.data),
                    !(a = HS(i, o)))
                  )
                    return Promise.reject(new Ke(2, 3, 3018, n ? n.P()[0] : null));
                  ((t.audioSamplingRate = a.sampleRate), (t.channelsCount = a.channelCount));
                  for (var s = []; o < i.length; ) {
                    var u = VS(i, o);
                    if (!u) return Promise.reject(new Ke(2, 3, 3018, n ? n.P()[0] : null));
                    var l = u.ee + u.ra;
                    (o + l <= i.length &&
                      s.push({
                        data: i.subarray(o + u.ee, o + l),
                        size: u.ra,
                        duration: 1024,
                        sb: 0,
                        flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                      }),
                      (o += l));
                  }
                  return (
                    (i = a.sampleRate),
                    (e = Math.floor((e * i) / 1e3)),
                    (r = new lo([
                      (r = {
                        id: t.id,
                        type: "audio",
                        codecs: a.codec,
                        encrypted: t.encrypted && t.drmInfos.length > 0,
                        timescale: i,
                        duration: r,
                        Bb: [],
                        Ga: new Uint8Array([]),
                        Sa: new Uint8Array([]),
                        Za: 0,
                        $a: 0,
                        data: { sequenceNumber: this.h, baseMediaDecodeTime: e, zb: s },
                        stream: t,
                      }),
                    ])),
                    (n = t.id + "_" + n.i),
                    this.g.has(n) ? (t = this.g.get(n)) : ((t = co(r)), this.g.set(n, t)),
                    (n = this.i !== t),
                    (r = mo(r)),
                    (this.i = t),
                    this.h++,
                    Promise.resolve({ data: r, init: n ? t : null })
                  );
                }),
                V("shaka.transmuxer.AacTransmuxer", zS),
                (zS.prototype.transmux = zS.prototype.transmux),
                (zS.prototype.getOriginalMimeType = zS.prototype.getOriginalMimeType),
                (zS.prototype.convertCodecs = zS.prototype.convertCodecs),
                (zS.prototype.isSupported = zS.prototype.isSupported),
                (zS.prototype.destroy = zS.prototype.destroy),
                tr(
                  "audio/aac",
                  function () {
                    return new zS("audio/aac");
                  },
                  ir,
                ),
                ((i = KS.prototype).destroy = function () {
                  this.g.clear();
                }),
                (i.isSupported = function (e) {
                  return "audio/ac3" == e.toLowerCase().split(";")[0] && Qa(this.convertCodecs("audio", e));
                }),
                (i.convertCodecs = function (e, t) {
                  return "audio/ac3" == t.toLowerCase().split(";")[0]
                    ? oe().se()
                      ? 'audio/mp4; codecs="ec-3"'
                      : 'audio/mp4; codecs="ac-3"'
                    : t;
                }),
                (i.getOriginalMimeType = function () {
                  return this.j;
                }),
                (i.transmux = function (e, t, n, r) {
                  for (var i = ds((e = Ne(e))), a = i.length; a < e.length && !WS(e, a); a++);
                  var o = 1e3 * n.endTime;
                  ((i = ls(i)).length &&
                    n &&
                    (i = i.find(function (e) {
                      return "com.apple.streaming.transportStreamTimestamp" === e.description;
                    })) &&
                    (o = i.data),
                    (i = 0));
                  for (var s = new Uint8Array([]), u = []; a < e.length; ) {
                    var l = XS(e, a);
                    if (!l) return Promise.reject(new Ke(2, 3, 3018, n ? n.P()[0] : null));
                    ((t.audioSamplingRate = l.sampleRate),
                      (t.channelsCount = l.channelCount),
                      (i = l.sampleRate),
                      (s = l.Ga),
                      u.push({
                        data: e.subarray(a, a + l.ra),
                        size: l.ra,
                        duration: 1536,
                        sb: 0,
                        flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                      }),
                      (a += l.ra));
                  }
                  return (
                    (e = Math.floor((o * i) / 1e3)),
                    (r = new lo([
                      (r = {
                        id: t.id,
                        type: "audio",
                        codecs: "ac-3",
                        encrypted: t.encrypted && t.drmInfos.length > 0,
                        timescale: i,
                        duration: r,
                        Bb: [],
                        Ga: s,
                        Sa: new Uint8Array([]),
                        Za: 0,
                        $a: 0,
                        data: { sequenceNumber: this.h, baseMediaDecodeTime: e, zb: u },
                        stream: t,
                      }),
                    ])),
                    (n = t.id + "_" + n.i),
                    this.g.has(n) ? (t = this.g.get(n)) : ((t = co(r)), this.g.set(n, t)),
                    (n = this.i !== t),
                    (r = mo(r)),
                    (this.i = t),
                    this.h++,
                    Promise.resolve({ data: r, init: n ? t : null })
                  );
                }),
                V("shaka.transmuxer.Ac3Transmuxer", KS),
                (KS.prototype.transmux = KS.prototype.transmux),
                (KS.prototype.getOriginalMimeType = KS.prototype.getOriginalMimeType),
                (KS.prototype.convertCodecs = KS.prototype.convertCodecs),
                (KS.prototype.isSupported = KS.prototype.isSupported),
                (KS.prototype.destroy = KS.prototype.destroy),
                tr(
                  "audio/ac3",
                  function () {
                    return new KS("audio/ac3");
                  },
                  ir,
                ),
                ((i = YS.prototype).destroy = function () {
                  this.g.clear();
                }),
                (i.isSupported = function (e) {
                  return "audio/ec3" == e.toLowerCase().split(";")[0] && Qa(this.convertCodecs("audio", e));
                }),
                (i.convertCodecs = function (e, t) {
                  return "audio/ec3" == t.toLowerCase().split(";")[0] ? 'audio/mp4; codecs="ec-3"' : t;
                }),
                (i.getOriginalMimeType = function () {
                  return this.j;
                }),
                (i.transmux = function (e, t, n, r) {
                  for (
                    var i = ds((e = Ne(e))), a = i.length;
                    a < e.length && 2935 != ((e[a] << 8) | e[a + 1]);
                    a++
                  );
                  var o = 1e3 * n.endTime;
                  ((i = ls(i)).length &&
                    n &&
                    (i = i.find(function (e) {
                      return "com.apple.streaming.transportStreamTimestamp" === e.description;
                    })) &&
                    (o = i.data),
                    (i = 0));
                  for (var s = new Uint8Array([]), u = []; a < e.length; ) {
                    var l = qS(e, a);
                    if (!l) return Promise.reject(new Ke(2, 3, 3018, n ? n.P()[0] : null));
                    ((t.audioSamplingRate = l.sampleRate),
                      (t.channelsCount = l.channelCount),
                      (i = l.sampleRate),
                      (s = l.Ga),
                      u.push({
                        data: e.subarray(a, a + l.ra),
                        size: l.ra,
                        duration: 1536,
                        sb: 0,
                        flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                      }),
                      (a += l.ra));
                  }
                  return (
                    (e = Math.floor((o * i) / 1e3)),
                    (r = new lo([
                      (r = {
                        id: t.id,
                        type: "audio",
                        codecs: "ec-3",
                        encrypted: t.encrypted && t.drmInfos.length > 0,
                        timescale: i,
                        duration: r,
                        Bb: [],
                        Ga: s,
                        Sa: new Uint8Array([]),
                        Za: 0,
                        $a: 0,
                        data: { sequenceNumber: this.h, baseMediaDecodeTime: e, zb: u },
                        stream: t,
                      }),
                    ])),
                    (n = t.id + "_" + n.i),
                    this.g.has(n) ? (t = this.g.get(n)) : ((t = co(r)), this.g.set(n, t)),
                    (n = this.i !== t),
                    (r = mo(r)),
                    (this.i = t),
                    this.h++,
                    Promise.resolve({ data: r, init: n ? t : null })
                  );
                }),
                V("shaka.transmuxer.Ec3Transmuxer", YS),
                (YS.prototype.transmux = YS.prototype.transmux),
                (YS.prototype.getOriginalMimeType = YS.prototype.getOriginalMimeType),
                (YS.prototype.convertCodecs = YS.prototype.convertCodecs),
                (YS.prototype.isSupported = YS.prototype.isSupported),
                (YS.prototype.destroy = YS.prototype.destroy),
                tr(
                  "audio/ec3",
                  function () {
                    return new YS("audio/ec3");
                  },
                  ir,
                ));
              var $S = [100, 110, 122, 244, 44, 83, 86, 118, 128, 138, 139, 134];
              function JS(e) {
                if (!e.length) return null;
                var t = e.find(function (e) {
                    return 32 == e.type;
                  }),
                  n = e.find(function (e) {
                    return 33 == e.type;
                  }),
                  r = e.find(function (e) {
                    return 34 == e.type;
                  });
                if (!t || !n || !r) return null;
                var i = (function (e) {
                  var t = new hs(e, !0);
                  return (
                    Ts(t),
                    Ts(t),
                    gs(t, 4),
                    gs(t, 2),
                    gs(t, 6),
                    (e = gs(t, 3)),
                    (t = xs(t)),
                    { Xg: e + 1, Eh: t }
                  );
                })(t.fullData);
                e = (function (e) {
                  (Ts((e = new hs(e, !0))), Ts(e));
                  var t = 0,
                    n = 0,
                    r = 0,
                    i = 0;
                  gs(e, 4);
                  var a = gs(e, 3);
                  xs(e);
                  for (
                    var o = gs(e, 2),
                      s = gs(e, 1),
                      u = gs(e, 5),
                      l = Ts(e),
                      d = Ts(e),
                      c = Ts(e),
                      h = Ts(e),
                      p = Ts(e),
                      f = Ts(e),
                      g = Ts(e),
                      m = Ts(e),
                      v = Ts(e),
                      y = Ts(e),
                      b = Ts(e),
                      x = [],
                      T = [],
                      w = 0;
                    w < a;
                    w++
                  )
                    (x.push(xs(e)), T.push(xs(e)));
                  if (a > 0) for (w = a; w < 8; w++) gs(e, 2);
                  for (w = 0; w < a; w++) (x[w] && gs(e, 88), T[w] && Ts(e));
                  (ys(e),
                    3 == (x = ys(e)) && gs(e, 1),
                    (T = ys(e)),
                    (w = ys(e)),
                    xs(e) && ((t += ys(e)), (n += ys(e)), (r += ys(e)), (i += ys(e))));
                  var S = ys(e),
                    A = ys(e),
                    E = ys(e);
                  if (xs(e)) for (var k = 0; k <= a; k++) (ys(e), ys(e), ys(e));
                  else (ys(e), ys(e), ys(e));
                  if ((ys(e), ys(e), ys(e), ys(e), ys(e), ys(e), xs(e) && xs(e)))
                    for (k = 0; k < 4; k++)
                      for (var I = 0; I < (3 === k ? 2 : 6); I++)
                        if (xs(e)) {
                          var C = Math.min(64, 1 << (4 + (k << 1)));
                          k > 1 && bs(e);
                          for (var M = 0; M < C; M++) bs(e);
                        } else ys(e);
                  for (xs(e), xs(e), xs(e) && (Ts(e), ys(e), ys(e), xs(e)), k = ys(e), C = I = 0; C < k; C++)
                    if (((M = !1), 0 !== C && (M = xs(e)), M)) {
                      (C === k && ys(e), xs(e), ys(e));
                      for (var R = (M = 0); R <= I; R++) {
                        var _ = xs(e),
                          D = !1;
                        (_ || (D = xs(e)), (_ || D) && M++);
                      }
                      I = M;
                    } else {
                      for (I = (R = ys(e)) + (M = ys(e)), _ = 0; _ < R; _++) (ys(e), xs(e));
                      for (R = 0; R < M; R++) (ys(e), xs(e));
                    }
                  if (xs(e))
                    for (k = ys(e), I = 0; I < k; I++) {
                      for (C = 0; C < E + 4; C++) gs(e, 1);
                      gs(e, 1);
                    }
                  if (((k = E = 1), (I = !0), (C = 1), (R = M = 0), xs(e), xs(e), xs(e))) {
                    if (xs(e)) {
                      D = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2];
                      var P = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1];
                      (_ = Ts(e)) > 0 && _ <= 16
                        ? ((E = D[_ - 1]), (k = P[_ - 1]))
                        : 255 === _ && ((E = gs(e, 16)), (k = gs(e, 16)));
                    }
                    if (
                      (xs(e) && xs(e),
                      xs(e) && (gs(e, 3), xs(e), xs(e) && (Ts(e), Ts(e), Ts(e))),
                      xs(e) && (ys(e), ys(e)),
                      xs(e),
                      xs(e),
                      xs(e),
                      (_ = xs(e)) && (vs(e), vs(e), vs(e), vs(e)),
                      xs(e) && ((C = gs(e, 32)), (M = gs(e, 32)), xs(e) && ys(e), xs(e)))
                    ) {
                      ((P = !1),
                        (_ = xs(e)),
                        (D = xs(e)),
                        (_ || D) &&
                          ((P = xs(e)) && (Ts(e), gs(e, 5), xs(e), gs(e, 5)),
                          gs(e, 4),
                          gs(e, 4),
                          P && gs(e, 4),
                          gs(e, 5),
                          gs(e, 5),
                          gs(e, 5)));
                      for (var L = 0; L <= a; L++) {
                        var N = !0,
                          O = 1;
                        (I = xs(e)) || (N = xs(e));
                        var U = !1;
                        if ((N ? ys(e) : (U = xs(e)), U || (O = ys(e) + 1), _)) {
                          for (N = 0; N < O; N++) (ys(e), ys(e), P && (ys(e), ys(e)));
                          xs(e);
                        }
                        if (D) {
                          for (N = 0; N < O; N++) (ys(e), ys(e), P && (ys(e), ys(e)));
                          xs(e);
                        }
                      }
                    }
                    xs(e) && (xs(e), xs(e), xs(e), (R = ys(e)), ys(e), ys(e), ys(e), ys(e));
                  }
                  return {
                    Cg: b,
                    Ig: o,
                    Jg: s,
                    Hg: u,
                    Dg: l,
                    Eg: d,
                    Fg: c,
                    Gg: h,
                    wg: p,
                    xg: f,
                    yg: g,
                    zg: m,
                    Ag: v,
                    Bg: y,
                    uf: R,
                    kg: x,
                    jg: S,
                    ig: A,
                    width: T - (t + n) * (1 === x || 2 === x ? 2 : 1),
                    height: w - (r + i) * (1 === x ? 2 : 1),
                    Uk: E,
                    Tk: k,
                    vg: M / C,
                    ug: I,
                  };
                })(n.fullData);
                var a = (function (e) {
                  var t = new hs(e, !0);
                  (Ts(t),
                    Ts(t),
                    ys(t),
                    ys(t),
                    xs(t),
                    xs(t),
                    gs(t, 3),
                    xs(t),
                    xs(t),
                    ys(t),
                    ys(t),
                    bs(t),
                    xs(t),
                    xs(t),
                    xs(t) && ys(t),
                    bs(t),
                    bs(t),
                    xs(t),
                    xs(t),
                    xs(t),
                    xs(t),
                    (e = xs(t)),
                    (t = xs(t)));
                  var n = 1;
                  return (t && e ? (n = 0) : t ? (n = 3) : e && (n = 2), { Zg: n });
                })(r.fullData);
                return (
                  (t = (function (e, t, n, r) {
                    var i = new Uint8Array(23 + (5 + e.byteLength) + (5 + t.byteLength) + (5 + n.byteLength));
                    for (
                      i[0] = 1,
                        i[1] = ((3 & r.Ig) << 6) | ((r.Jg ? 1 : 0) << 5) | (31 & r.Hg),
                        i[2] = r.Dg,
                        i[3] = r.Eg,
                        i[4] = r.Fg,
                        i[5] = r.Gg,
                        i[6] = r.wg,
                        i[7] = r.xg,
                        i[8] = r.yg,
                        i[9] = r.zg,
                        i[10] = r.Ag,
                        i[11] = r.Bg,
                        i[12] = r.Cg,
                        i[13] = 240 | ((3840 & r.uf) >> 8),
                        i[14] = 255 & r.uf,
                        i[15] = 252 | (3 & r.Zg),
                        i[16] = 252 | (3 & r.kg),
                        i[17] = 248 | (7 & r.jg),
                        i[18] = 248 | (7 & r.ig),
                        i[19] = 0,
                        i[20] = parseInt(r.vg, 10),
                        i[21] = ((3 & (r.ug ? 1 : 0)) << 6) | ((7 & r.Xg) << 3) | ((r.Eh ? 1 : 0) << 2) | 3,
                        i[22] = 3,
                        e = [e, t, n],
                        t = 23,
                        n = e.length - 1,
                        r = 0;
                      r < e.length;
                      r += 1
                    )
                      (i.set(new Uint8Array([(32 + r) | (r === n ? 128 : 0), 0, 1]), t),
                        (t += 3),
                        i.set(new Uint8Array([e[r].byteLength >> 8, 255 & e[r].byteLength]), t),
                        (t += 2),
                        i.set(e[r], t),
                        (t += e[r].byteLength));
                    return i;
                  })(t.fullData, n.fullData, r.fullData, {
                    Xg: i.Xg,
                    Eh: i.Eh,
                    Ig: e.Ig,
                    Jg: e.Jg,
                    Cg: e.Cg,
                    Hg: e.Hg,
                    Dg: e.Dg,
                    Eg: e.Eg,
                    Fg: e.Fg,
                    Gg: e.Gg,
                    wg: e.wg,
                    xg: e.xg,
                    yg: e.yg,
                    zg: e.zg,
                    Ag: e.Ag,
                    Bg: e.Bg,
                    uf: e.uf,
                    kg: e.kg,
                    jg: e.jg,
                    ig: e.ig,
                    Zg: a.Zg,
                    vg: e.vg,
                    ug: e.ug,
                  })),
                  { height: e.height, width: e.width, Sa: t, Za: e.Uk, $a: e.Tk }
                );
              }
              function QS(e, t) {
                var n = (e[t + 1] >> 3) & 3,
                  r = (e[t + 1] >> 1) & 3,
                  i = (e[t + 2] >> 4) & 15,
                  a = (e[t + 2] >> 2) & 3;
                if (1 !== n && 0 !== i && 15 !== i && 3 !== a) {
                  var o = e[t + 3] >> 6;
                  ((i = 1e3 * tA[14 * (3 === n ? 3 - r : 3 === r ? 3 : 4) + i - 1]),
                    (a = nA[3 * (3 === n ? 0 : 2 === n ? 1 : 2) + a]),
                    (n = rA[n][r]));
                  var s = iA[r],
                    u = Math.floor((n * i) / a + ((e[t + 2] >> 1) & 1)) * s,
                    l = (navigator.userAgent || "").match(/Chrome\/(\d+)/i);
                  return (
                    (l = l ? parseInt(l[1], 10) : 0) &&
                      l <= 87 &&
                      2 === r &&
                      i >= 224e3 &&
                      0 === o &&
                      (e[t + 3] |= 128),
                    { sampleRate: a, channelCount: 3 === o ? 1 : 2, ra: u, Sk: 8 * n * s }
                  );
                }
                return null;
              }
              function ZS(e, t) {
                return !(255 !== e[t] || 224 & ~e[t + 1] || !(6 & e[t + 1]));
              }
              function eA(e, t) {
                if (t + 1 < e.length && ZS(e, t)) {
                  var n = QS(e, t),
                    r = 4;
                  return (n && n.ra && (r = n.ra), (t += r) === e.length || (t + 1 < e.length && ZS(e, t)));
                }
                return !1;
              }
              var tA = [
                  32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, 32, 48, 56, 64, 80, 96,
                  112, 128, 160, 192, 224, 256, 320, 384, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224,
                  256, 320, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 8, 16, 24, 32, 40,
                  48, 56, 64, 80, 96, 112, 128, 144, 160,
                ],
                nA = [44100, 48e3, 32e3, 22050, 24e3, 16e3, 11025, 12e3, 8e3],
                rA = [
                  [0, 72, 144, 12],
                  [0, 0, 0, 0],
                  [0, 72, 144, 12],
                  [0, 144, 144, 12],
                ],
                iA = [0, 1, 1, 4];
              function aA(e) {
                ((this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null));
              }
              function oA(e) {
                ((this.h = e), (this.g = null));
              }
              /*
      		 @license
      		 MSS Transmuxer
      		 Copyright 2015 Dash Industry Forum
      		 SPDX-License-Identifier: BSD-3-Clause
      		*/
              function sA(e) {
                ((this.h = e),
                  (this.g = Yv.get("ISOBoxer")()) &&
                    (function (e) {
                      function t() {
                        (this._procFullBox(),
                          1 & this.flags &&
                            (this._procField("AlgorithmID", "uint", 24),
                            this._procField("IV_size", "uint", 8),
                            this._procFieldArray("KID", 16, "uint", 8)),
                          this._procField("sample_count", "uint", 32),
                          this._procEntries("entry", this.sample_count, function (e) {
                            (this._procEntryField(e, "InitializationVector", "data", 8),
                              2 & this.flags &&
                                (this._procEntryField(e, "NumberOfEntries", "uint", 16),
                                this._procSubEntries(
                                  e,
                                  "clearAndCryptedData",
                                  e.NumberOfEntries,
                                  function (e) {
                                    (this._procEntryField(e, "BytesOfClearData", "uint", 16),
                                      this._procEntryField(e, "BytesOfEncryptedData", "uint", 32));
                                  },
                                )));
                          }));
                      }
                      (e.g.addBoxProcessor("saio", function () {
                        (this._procFullBox(),
                          1 & this.flags &&
                            (this._procField("aux_info_type", "uint", 32),
                            this._procField("aux_info_type_parameter", "uint", 32)),
                          this._procField("entry_count", "uint", 32),
                          this._procFieldArray(
                            "offset",
                            this.entry_count,
                            "uint",
                            1 === this.version ? 64 : 32,
                          ));
                      }),
                        e.g.addBoxProcessor("saiz", function () {
                          (this._procFullBox(),
                            1 & this.flags &&
                              (this._procField("aux_info_type", "uint", 32),
                              this._procField("aux_info_type_parameter", "uint", 32)),
                            this._procField("default_sample_info_size", "uint", 8),
                            this._procField("sample_count", "uint", 32),
                            0 === this.default_sample_info_size &&
                              this._procFieldArray("sample_info_size", this.sample_count, "uint", 8));
                        }),
                        e.g.addBoxProcessor("senc", t),
                        e.g.addBoxProcessor("uuid", function () {
                          for (var e = !0, n = 0; n < 16; n++) this.usertype[n] !== lA[n] && (e = !1);
                          e && (this._parsing && (this.type = "sepiff"), t.call(this));
                        }));
                    })(this));
              }
              function uA(e, t) {
                for (var n = 8, r = 0; r < e.boxes.length && e.boxes[r].type !== t; r++) n += e.boxes[r].size;
                return n;
              }
              (((i = aA.prototype).destroy = function () {
                this.g.clear();
              }),
                (i.isSupported = function (e) {
                  return "audio/mpeg" == e.toLowerCase().split(";")[0] && Qa(this.convertCodecs("audio", e));
                }),
                (i.convertCodecs = function (e, t) {
                  return "audio/mpeg" == t.toLowerCase().split(";")[0] ? 'audio/mp4; codecs="mp3"' : t;
                }),
                (i.getOriginalMimeType = function () {
                  return this.j;
                }),
                (i.transmux = function (e, t, n, r) {
                  for (var i = Ne(e), a = ds(i).length; a < i.length && !eA(i, a); a++);
                  var o;
                  for (e = []; a < i.length; ) {
                    var s = QS(i, a);
                    if (!s) return Promise.reject(new Ke(2, 3, 3018, n ? n.P()[0] : null));
                    (o || (o = s),
                      a + s.ra <= i.length &&
                        e.push({
                          data: i.subarray(a, a + s.ra),
                          size: s.ra,
                          duration: 1152,
                          sb: 0,
                          flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                        }),
                      (a += s.ra));
                  }
                  return o
                    ? ((i = ((9e4 * o.Sk) / o.sampleRate) * this.h),
                      (r = new lo([
                        (r = {
                          id: t.id,
                          type: "audio",
                          codecs: "mp3",
                          encrypted: t.encrypted && t.drmInfos.length > 0,
                          timescale: o.sampleRate,
                          duration: r,
                          Bb: [],
                          Ga: new Uint8Array([]),
                          Sa: new Uint8Array([]),
                          Za: 0,
                          $a: 0,
                          data: { sequenceNumber: this.h, baseMediaDecodeTime: i, zb: e },
                          stream: t,
                        }),
                      ])),
                      (n = t.id + "_" + n.i),
                      this.g.has(n) ? (t = this.g.get(n)) : ((t = co(r)), this.g.set(n, t)),
                      (n = this.i !== t),
                      (r = mo(r)),
                      (this.i = t),
                      this.h++,
                      Promise.resolve({ data: r, init: n ? t : null }))
                    : Promise.reject(new Ke(2, 3, 3018, n ? n.P()[0] : null));
                }),
                V("shaka.transmuxer.Mp3Transmuxer", aA),
                (aA.prototype.transmux = aA.prototype.transmux),
                (aA.prototype.getOriginalMimeType = aA.prototype.getOriginalMimeType),
                (aA.prototype.convertCodecs = aA.prototype.convertCodecs),
                (aA.prototype.isSupported = aA.prototype.isSupported),
                (aA.prototype.destroy = aA.prototype.destroy),
                tr(
                  "audio/mpeg",
                  function () {
                    return new aA("audio/mpeg");
                  },
                  ir,
                ),
                ((i = oA.prototype).destroy = function () {}),
                (i.isSupported = function (e) {
                  if ("video/mp2t" != e.toLowerCase().split(";")[0]) return !1;
                  var t = mr(e).split(","),
                    n = pt("audio", t);
                  return (
                    (t = pt("video", t)),
                    !(!n || t || "mp3" != pr(n)) && Qa(this.convertCodecs("audio", e))
                  );
                }),
                (i.convertCodecs = function (e, t) {
                  return "video/mp2t" == t.toLowerCase().split(";")[0] ? "audio/mpeg" : t;
                }),
                (i.getOriginalMimeType = function () {
                  return this.h;
                }),
                (i.transmux = function (e, t, n, r, i) {
                  if (
                    (this.g ? this.g.clearData() : (this.g = new As()),
                    this.g.Kf(n.i),
                    (e = Ne(e)),
                    "mp3" != (e = this.g.parse(e)).Yd().audio || "audio" != i)
                  )
                    return Promise.reject(new Ke(2, 3, 3018, n ? n.P()[0] : null));
                  for (n = new Uint8Array([]), i = g(e.ub()), e = i.next(); !e.done; e = i.next())
                    if ((e = e.value.data))
                      for (t = 0; t < e.length; )
                        (r = QS(e, t))
                          ? (t + r.ra <= e.length && (n = ut(n, e.subarray(t, t + r.ra))), (t += r.ra))
                          : t++;
                  return Promise.resolve(n);
                }),
                V("shaka.transmuxer.MpegTsTransmuxer", oA),
                (oA.prototype.transmux = oA.prototype.transmux),
                (oA.prototype.getOriginalMimeType = oA.prototype.getOriginalMimeType),
                (oA.prototype.convertCodecs = oA.prototype.convertCodecs),
                (oA.prototype.isSupported = oA.prototype.isSupported),
                (oA.prototype.destroy = oA.prototype.destroy),
                tr(
                  "video/mp2t",
                  function () {
                    return new oA("video/mp2t");
                  },
                  ar,
                ),
                ((i = sA.prototype).destroy = function () {}),
                (i.isSupported = function (e, t) {
                  var n = e.startsWith("mss/");
                  return (
                    !(!this.g || !n) &&
                    (t
                      ? Qa(this.convertCodecs(t, e))
                      : ((t = this.convertCodecs("audio", e)),
                        (e = this.convertCodecs("video", e)),
                        Qa(t) || Qa(e)))
                  );
                }),
                (i.convertCodecs = function (e, t) {
                  return t.replace("mss/", "");
                }),
                (i.getOriginalMimeType = function () {
                  return this.h;
                }),
                (i.transmux = function (e, t, n) {
                  if (!n) return Promise.resolve(Ne(e));
                  if (!t.mssPrivateData) return Promise.reject(new Ke(2, 3, 3020, n ? n.P()[0] : null));
                  try {
                    var r,
                      i = this.g.parseBuffer(e),
                      a = i.fetch("tfhd");
                    a.track_ID = t.id + 1;
                    var o = i.fetch("tfdt"),
                      s = i.fetch("traf");
                    null === o &&
                      (((o = this.g.createFullBox("tfdt", s, a)).version = 1),
                      (o.flags = 0),
                      (o.baseMediaDecodeTime = Math.floor(n.startTime * t.mssPrivateData.timescale)));
                    var u = i.fetch("trun"),
                      l = i.fetch("tfxd");
                    l && l._parent.boxes.splice(l._parent.boxes.indexOf(l), 1);
                    var d = i.fetch("tfrf");
                    d && d._parent.boxes.splice(d._parent.boxes.indexOf(d), 1);
                    var c = i.fetch("sepiff");
                    if (null !== c) {
                      ((c.type = "senc"), (c.usertype = void 0));
                      var h = i.fetch("saio");
                      if (null === h) {
                        (((h = this.g.createFullBox("saio", s)).version = 0),
                          (h.flags = 0),
                          (h.entry_count = 1),
                          (h.offset = [0]));
                        var p = this.g.createFullBox("saiz", s);
                        if (
                          ((p.version = 0),
                          (p.flags = 0),
                          (p.sample_count = c.sample_count),
                          (p.default_sample_info_size = 0),
                          (p.sample_info_size = []),
                          2 & c.flags)
                        )
                          for (r = 0; r < c.sample_count; r += 1)
                            p.sample_info_size[r] = 10 + 6 * c.entry[r].NumberOfEntries;
                        else p.default_sample_info_size = 8;
                      }
                    }
                    ((a.flags &= 16777214), (a.flags |= 131072), (u.flags |= 1));
                    var f = i.fetch("moof");
                    u.data_offset = f.getLength() + 8;
                    var g = i.fetch("saio");
                    null !== g && (g.offset[0] = uA(f, "traf") + uA(s, "senc") + 16);
                    var m = Ne(i.write());
                    return Promise.resolve(m);
                  } catch (v) {
                    return v instanceof Ke
                      ? Promise.reject(v)
                      : Promise.reject(new Ke(2, 3, 3022, n ? n.P()[0] : null));
                  }
                }),
                V("shaka.transmuxer.MssTransmuxer", sA),
                (sA.prototype.transmux = sA.prototype.transmux),
                (sA.prototype.getOriginalMimeType = sA.prototype.getOriginalMimeType),
                (sA.prototype.convertCodecs = sA.prototype.convertCodecs),
                (sA.prototype.isSupported = sA.prototype.isSupported),
                (sA.prototype.destroy = sA.prototype.destroy));
              var lA = new Uint8Array([
                162, 57, 79, 82, 90, 155, 79, 20, 162, 68, 108, 66, 124, 100, 141, 244,
              ]);
              function dA(e) {
                ((this.m = e), (this.g = 0), (this.j = new Map()), (this.l = this.i = this.h = null));
              }
              (tr(
                "mss/audio/mp4",
                function () {
                  return new sA("mss/audio/mp4");
                },
                ir,
              ),
                tr(
                  "mss/video/mp4",
                  function () {
                    return new sA("mss/video/mp4");
                  },
                  ir,
                ),
                ((i = dA.prototype).destroy = function () {
                  (this.j.clear(), this.i && this.i.destroy());
                }),
                (i.isSupported = function (e, t) {
                  if ("video/mp2t" != e.toLowerCase().split(";")[0]) return !1;
                  var n = e;
                  t && (n = this.convertCodecs(t, e));
                  var r = mr(n).split(",");
                  return (
                    (n = pt("audio", r)),
                    (r = pt("video", r)),
                    !((n && ((n = pr(n)), !cA.includes(n))) || (r && ((n = pr(r)), !hA.includes(n)))) &&
                      (t
                        ? Qa(this.convertCodecs(t, e))
                        : ((t = this.convertCodecs("audio", e)),
                          (e = this.convertCodecs("video", e)),
                          Qa(t) || Qa(e)))
                  );
                }),
                (i.convertCodecs = function (e, t) {
                  return "video/mp2t" == t.toLowerCase().split(";")[0]
                    ? ((t = mr(t)
                        .replace("mp4a.40.34", "mp3")
                        .split(",")
                        .map(function (e) {
                          return Zr(e, "audio/mp4");
                        })
                        .map(ei)
                        .join(",")),
                      "audio" == e ? 'audio/mp4; codecs="' + t + '"' : 'video/mp4; codecs="' + t + '"')
                    : t;
                }),
                (i.getOriginalMimeType = function () {
                  return this.m;
                }),
                (i.transmux = function (e, t, n, r, i) {
                  var a = Ne(e);
                  if ("audio" == i && !Cs(a)) {
                    for (var o = ds(a), s = o.length; s < a.length; s++)
                      if (eA(a, s)) return Promise.reject(new Ke(2, 3, 3018, n ? n.P()[0] : null));
                    for (s = o.length; s < a.length; s++)
                      if (GS(a, s))
                        return (this.i || (this.i = new zS("audio/aac")), this.i.transmux(e, t, n, r, i));
                    return Promise.reject(new Ke(2, 3, 3018, n ? n.P()[0] : null));
                  }
                  (this.h ? this.h.clearData() : (this.h = new As()), this.h.Kf(n.i));
                  var u = this.h.parse(a),
                    l = [],
                    d = u.Yd();
                  try {
                    var c = null;
                    if ("video" == i) {
                      switch (d.video) {
                        case "avc":
                          var h = [],
                            p = null,
                            f = u.ud(),
                            v = (function (e) {
                              function t(e) {
                                i = {
                                  data: new Uint8Array([]),
                                  frame: !1,
                                  isKeyframe: !1,
                                  pts: e.pts,
                                  dts: e.dts,
                                  nalus: [],
                                };
                              }
                              function n() {
                                if (i && i.nalus.length && i.frame) {
                                  for (var e = [], t = g(i.nalus), n = t.next(); !n.done; n = t.next()) {
                                    var a = (n = n.value).fullData.byteLength,
                                      o = new Uint8Array(4);
                                    ((o[0] = (a >> 24) & 255),
                                      (o[1] = (a >> 16) & 255),
                                      (o[2] = (a >> 8) & 255),
                                      (o[3] = 255 & a),
                                      e.push(o),
                                      e.push(n.fullData));
                                  }
                                  ((i.data = ut.apply(nt, m(e))), r.push(i));
                                }
                              }
                              for (var r = [], i = null, a = !1, o = 0; o < e.length; o++) {
                                var s = e[o],
                                  u = s.nalus,
                                  l = !1;
                                i && u.length && !a && (n(), t(s));
                                for (var d = (u = g(s.nalus)).next(); !d.done; d = u.next()) {
                                  var c = !1;
                                  switch ((d = d.value).type) {
                                    case 1:
                                      var h = !1;
                                      c = !0;
                                      var p = d.data;
                                      (l &&
                                        p.length > 4 &&
                                        (2 === (p = Ss(new hs(p))) || 4 === p || 7 === p || 9 === p) &&
                                        (h = !0),
                                        h && i && i.frame && !i.isKeyframe && (n(), (i = null)),
                                        i || t(s),
                                        (i.frame = !0),
                                        (i.isKeyframe = h));
                                      break;
                                    case 5:
                                      ((c = !0),
                                        i && i.frame && !i.isKeyframe && (n(), (i = null)),
                                        i || t(s),
                                        (i.frame = !0),
                                        (i.isKeyframe = !0));
                                      break;
                                    case 6:
                                    case 8:
                                    case 12:
                                      c = !0;
                                      break;
                                    case 7:
                                      l = c = !0;
                                      break;
                                    case 9:
                                      ((a = c = !0), i && i.frame && (n(), (i = null)), i || t(s));
                                      break;
                                    default:
                                      c = !1;
                                  }
                                  i && c && i.nalus.push(d);
                                }
                              }
                              return (n(), r);
                            })(f);
                          if (!v.length) throw new Ke(2, 3, 3023, n ? n.P()[0] : null);
                          for (var y = 0; y < v.length; y++) {
                            var b,
                              x = v[y];
                            (null == p && (p = x.dts),
                              (b =
                                y + 1 < v.length
                                  ? (v[y + 1].dts || 0) - (x.dts || 0)
                                  : v.length > 1
                                    ? (x.dts || 0) - (v[y - 1].dts || 0)
                                    : 9e4 * (n.endTime - n.startTime)),
                              h.push({
                                data: x.data,
                                size: x.data.byteLength,
                                duration: b,
                                sb: Math.round((x.pts || 0) - (x.dts || 0)),
                                flags: {
                                  xb: 0,
                                  mb: 0,
                                  jb: 0,
                                  hb: 0,
                                  ib: x.isKeyframe ? 2 : 1,
                                  yb: x.isKeyframe ? 0 : 1,
                                },
                              }));
                          }
                          for (var T = [], w = g(f), S = w.next(); !S.done; S = w.next())
                            T.push.apply(T, m(S.value.nalus));
                          var A = (function (e) {
                            if (!e.length) return null;
                            var t = e.find(function (e) {
                              return 7 == e.type;
                            });
                            if (
                              ((e = e.find(function (e) {
                                return 8 == e.type;
                              })),
                              !t || !e)
                            )
                              return null;
                            var n = new hs(t.data),
                              r = Ts(n);
                            if (
                              (Ts(n),
                              Ts(n),
                              vs(n),
                              $S.includes(r) &&
                                (3 === (r = ys(n)) && fs(n, 1), vs(n), vs(n), fs(n, 1), xs(n)))
                            ) {
                              r = 3 !== r ? 8 : 12;
                              for (var i = 0; i < r; i++) xs(n) && ws(n, i < 6 ? 16 : 64);
                            }
                            if ((vs(n), 0 === (r = ys(n)))) ys(n);
                            else if (1 === r)
                              for (fs(n, 1), vs(n), vs(n), r = ys(n), i = 0; i < r; i++) vs(n);
                            (vs(n), fs(n, 1));
                            var a = ys(n),
                              o = ys(n),
                              s = gs(n, 1);
                            (0 === s && fs(n, 1), fs(n, 1));
                            var u = 0,
                              l = 0,
                              d = 0,
                              c = 0;
                            if (
                              (xs(n) && ((u = ys(n)), (l = ys(n)), (d = ys(n)), (c = ys(n))),
                              (i = r = 1),
                              xs(n) && xs(n))
                            ) {
                              var h = Ts(n);
                              h > 0 && h <= 16
                                ? ((r = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2][h - 1]),
                                  (i = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1][h - 1]))
                                : 255 === h && ((r = gs(n, 16)), (i = gs(n, 16)));
                            }
                            return (
                              (n = (2 - s) * (o + 1) * 16 - 2 * d - 2 * c),
                              (a = 16 * (a + 1) - 2 * u - 2 * l),
                              (u = []),
                              (t = t.fullData),
                              u.push((t.byteLength >>> 8) & 255),
                              u.push(255 & t.byteLength),
                              (u = u.concat.apply(u, m(t))),
                              (t = []),
                              (e = e.fullData),
                              t.push((e.byteLength >>> 8) & 255),
                              t.push(255 & e.byteLength),
                              (t = t.concat.apply(t, m(e))),
                              {
                                height: n,
                                width: a,
                                Sa: (e = new Uint8Array([1, u[3], u[4], u[5], 255, 225].concat(u, [1], t))),
                                Za: r,
                                $a: i,
                              }
                            );
                          })(T);
                          if (!A || null == p) throw new Ke(2, 3, 3018, n ? n.P()[0] : null);
                          ((t.height = A.height),
                            (t.width = A.width),
                            (c = {
                              id: t.id,
                              type: "video",
                              codecs: "avc1",
                              encrypted: t.encrypted && t.drmInfos.length > 0,
                              timescale: 9e4,
                              duration: r,
                              Bb: [],
                              Ga: new Uint8Array([]),
                              Sa: A.Sa,
                              Za: A.Za,
                              $a: A.$a,
                              data: { sequenceNumber: this.g, baseMediaDecodeTime: p, zb: h },
                              stream: t,
                            }));
                          break;
                        case "hvc":
                          var E = [],
                            k = null,
                            I = [],
                            C = u.ud();
                          if (!C.length) throw new Ke(2, 3, 3023, n ? n.P()[0] : null);
                          for (var M = 0; M < C.length; M++) {
                            var R = C[M],
                              _ = R.nalus;
                            I.push.apply(I, m(_));
                            for (var D = !1, P = [], L = !1, N = g(_), O = N.next(); !O.done; O = N.next()) {
                              var U = O.value;
                              switch (U.type) {
                                case 1:
                                case 0:
                                  var B = (L = !0);
                                  break;
                                case 19:
                                case 20:
                                case 21:
                                  D = B = L = !0;
                                  break;
                                case 32:
                                case 33:
                                case 34:
                                case 39:
                                case 40:
                                  B = !0;
                                  break;
                                case 35:
                                  L = B = !0;
                                  break;
                                default:
                                  B = !1;
                              }
                              if (L && B) {
                                var j = U.fullData.byteLength,
                                  F = new Uint8Array(4);
                                ((F[0] = (j >> 24) & 255),
                                  (F[1] = (j >> 16) & 255),
                                  (F[2] = (j >> 8) & 255),
                                  (F[3] = 255 & j),
                                  P.push(F),
                                  P.push(U.fullData));
                              }
                            }
                            var V,
                              H = P.length ? { data: ut.apply(nt, m(P)), isKeyframe: D } : null;
                            H &&
                              (null == k && null != R.dts && (k = R.dts),
                              (V =
                                M + 1 < C.length
                                  ? (C[M + 1].dts || 0) - (R.dts || 0)
                                  : C.length > 1
                                    ? (R.dts || 0) - (C[M - 1].dts || 0)
                                    : 9e4 * (n.endTime - n.startTime)),
                              E.push({
                                data: H.data,
                                size: H.data.byteLength,
                                duration: V,
                                sb: Math.round((R.pts || 0) - (R.dts || 0)),
                                flags: {
                                  xb: 0,
                                  mb: 0,
                                  jb: 0,
                                  hb: 0,
                                  ib: H.isKeyframe ? 2 : 1,
                                  yb: H.isKeyframe ? 0 : 1,
                                },
                              }));
                          }
                          var G = JS(I);
                          if (!G || null == k) throw new Ke(2, 3, 3018, n ? n.P()[0] : null);
                          ((t.height = G.height),
                            (t.width = G.width),
                            (c = {
                              id: t.id,
                              type: "video",
                              codecs: "hvc1",
                              encrypted: t.encrypted && t.drmInfos.length > 0,
                              timescale: 9e4,
                              duration: r,
                              Bb: [],
                              Ga: new Uint8Array([]),
                              Sa: G.Sa,
                              Za: G.Za,
                              $a: G.$a,
                              data: { sequenceNumber: this.g, baseMediaDecodeTime: k, zb: E },
                              stream: t,
                            }));
                      }
                      c && (l.push(c), (c = null));
                    }
                    if ("audio" == i) {
                      switch (d.audio) {
                        case "aac":
                          for (
                            var z, X = [], W = null, K = null, q = null, Y = g(u.ub()), $ = Y.next();
                            !$.done;
                            $ = Y.next()
                          ) {
                            var J = $.value,
                              Q = J.data;
                            if (Q) {
                              var Z = 0;
                              if (-1 == K && q) ((Q = ut(q, J.data)), (K = null));
                              else if (null != K && q) {
                                Z = Math.max(0, K);
                                var ee = ut(q, Q.subarray(0, Z));
                                (X.push({
                                  data: ee,
                                  size: ee.byteLength,
                                  duration: 1024,
                                  sb: 0,
                                  flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                                }),
                                  (K = q = null));
                              }
                              if (!(z = HS(Q, Z))) throw new Ke(2, 3, 3018, n ? n.P()[0] : null);
                              for (
                                t.audioSamplingRate = z.sampleRate,
                                  t.channelsCount = z.channelCount,
                                  null == W && null !== J.pts && (W = J.pts);
                                Z < Q.length;
                              ) {
                                var te = VS(Q, Z);
                                if (!te) {
                                  ((q = Q.subarray(Z, Q.length)), (K = -1));
                                  break;
                                }
                                var ne = te.ee + te.ra;
                                (0 != (K = Math.max(0, Z + ne - Q.length))
                                  ? (q = Q.subarray(Z + te.ee, Z + ne))
                                  : Z + ne <= Q.length &&
                                    X.push({
                                      data: Q.subarray(Z + te.ee, Z + ne),
                                      size: te.ra,
                                      duration: 1024,
                                      sb: 0,
                                      flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                                    }),
                                  (Z += ne));
                              }
                            }
                          }
                          if (!z || null == W) {
                            W = 9e4 * n.startTime;
                            var re = pt("audio", t.codecs.split(","));
                            if (!re || !t.channelsCount || !t.audioSamplingRate)
                              throw new Ke(2, 3, 3018, n ? n.P()[0] : null);
                            z = { sampleRate: t.audioSamplingRate, channelCount: t.channelsCount, codec: re };
                            var ie = (function (e, t) {
                              if ("mp4a.40.2" === e) {
                                if (1 === t) return new Uint8Array([0, 200, 0, 128, 35, 128]);
                                if (2 === t) return new Uint8Array([33, 0, 73, 144, 2, 25, 0, 35, 128]);
                                if (3 === t)
                                  return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 142]);
                                if (4 === t)
                                  return new Uint8Array([
                                    0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 128, 44, 128, 8, 2, 56,
                                  ]);
                                if (5 === t)
                                  return new Uint8Array([
                                    0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33,
                                    144, 2, 56,
                                  ]);
                                if (6 === t)
                                  return new Uint8Array([
                                    0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33,
                                    144, 2, 0, 178, 0, 32, 8, 224,
                                  ]);
                              } else {
                                if (1 === t)
                                  return new Uint8Array([
                                    1, 64, 34, 128, 163, 78, 230, 128, 186, 8, 0, 0, 0, 28, 6, 241, 193, 10,
                                    90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                                    90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                                    90, 90, 90, 90, 94,
                                  ]);
                                if (2 === t || 3 === t)
                                  return new Uint8Array([
                                    1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241,
                                    161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                                    90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                                    90, 90, 90, 90, 94,
                                  ]);
                              }
                              return null;
                            })(re, t.channelsCount);
                            if (!ie) throw new Ke(2, 3, 3018, n ? n.P()[0] : null);
                            for (var ae = W + 9e4 * (n.endTime - n.startTime), oe = W; oe < ae; )
                              (X.push({
                                data: ie,
                                size: ie.byteLength,
                                duration: 1024,
                                sb: 0,
                                flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                              }),
                                (oe += (1024 / z.sampleRate) * 9e4));
                          }
                          var se = z.sampleRate,
                            ue = (W / 9e4) * se;
                          c = {
                            id: t.id,
                            type: "audio",
                            codecs: z.codec,
                            encrypted: t.encrypted && t.drmInfos.length > 0,
                            timescale: se,
                            duration: r,
                            Bb: [],
                            Ga: new Uint8Array([]),
                            Sa: new Uint8Array([]),
                            Za: 0,
                            $a: 0,
                            data: { sequenceNumber: this.g, baseMediaDecodeTime: ue, zb: X },
                            stream: t,
                          };
                          break;
                        case "ac3":
                          for (
                            var le = [],
                              de = 0,
                              ce = new Uint8Array([]),
                              he = null,
                              pe = g(u.ub()),
                              fe = pe.next();
                            !fe.done;
                            fe = pe.next()
                          ) {
                            var ge = fe.value,
                              me = ge.data;
                            null == he && null !== ge.pts && (he = ge.pts);
                            for (var ve = 0; ve < me.length; ) {
                              var ye = XS(me, ve);
                              ye
                                ? ((t.audioSamplingRate = ye.sampleRate),
                                  (t.channelsCount = ye.channelCount),
                                  (de = ye.sampleRate),
                                  (ce = ye.Ga),
                                  le.push({
                                    data: me.subarray(ve, ve + ye.ra),
                                    size: ye.ra,
                                    duration: 1536,
                                    sb: 0,
                                    flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                                  }),
                                  (ve += ye.ra))
                                : ve++;
                            }
                          }
                          if (0 == de || 0 == ce.byteLength || null == he)
                            throw new Ke(2, 3, 3018, n ? n.P()[0] : null);
                          var be = (he / 9e4) * de;
                          c = {
                            id: t.id,
                            type: "audio",
                            codecs: "ac-3",
                            encrypted: t.encrypted && t.drmInfos.length > 0,
                            timescale: de,
                            duration: r,
                            Bb: [],
                            Ga: ce,
                            Sa: new Uint8Array([]),
                            Za: 0,
                            $a: 0,
                            data: { sequenceNumber: this.g, baseMediaDecodeTime: be, zb: le },
                            stream: t,
                          };
                          break;
                        case "ec3":
                          for (
                            var xe = [],
                              Te = 0,
                              we = new Uint8Array([]),
                              Se = null,
                              Ae = g(u.ub()),
                              Ee = Ae.next();
                            !Ee.done;
                            Ee = Ae.next()
                          ) {
                            var ke = Ee.value,
                              Ie = ke.data;
                            null == Se && null !== ke.pts && (Se = ke.pts);
                            for (var Ce = 0; Ce < Ie.length; ) {
                              var Me = qS(Ie, Ce);
                              Me
                                ? ((t.audioSamplingRate = Me.sampleRate),
                                  (t.channelsCount = Me.channelCount),
                                  (Te = Me.sampleRate),
                                  (we = Me.Ga),
                                  xe.push({
                                    data: Ie.subarray(Ce, Ce + Me.ra),
                                    size: Me.ra,
                                    duration: 1536,
                                    sb: 0,
                                    flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                                  }),
                                  (Ce += Me.ra))
                                : Ce++;
                            }
                          }
                          if (0 == Te || 0 == we.byteLength || null == Se)
                            throw new Ke(2, 3, 3018, n ? n.P()[0] : null);
                          var Re = (Se / 9e4) * Te;
                          c = {
                            id: t.id,
                            type: "audio",
                            codecs: "ec-3",
                            encrypted: t.encrypted && t.drmInfos.length > 0,
                            timescale: Te,
                            duration: r,
                            Bb: [],
                            Ga: we,
                            Sa: new Uint8Array([]),
                            Za: 0,
                            $a: 0,
                            data: { sequenceNumber: this.g, baseMediaDecodeTime: Re, zb: xe },
                            stream: t,
                          };
                          break;
                        case "mp3":
                          for (
                            var _e, De = [], Pe = null, Le = g(u.ub()), Oe = Le.next();
                            !Oe.done;
                            Oe = Le.next()
                          ) {
                            var Ue = Oe.value,
                              Be = Ue.data;
                            if (Be) {
                              null == Pe && null !== Ue.pts && (Pe = Ue.pts);
                              for (var je = 0; je < Be.length; ) {
                                var Fe = QS(Be, je);
                                Fe
                                  ? (_e || (_e = Fe),
                                    je + Fe.ra <= Be.length &&
                                      De.push({
                                        data: Be.subarray(je, je + Fe.ra),
                                        size: Fe.ra,
                                        duration: 1152,
                                        sb: 0,
                                        flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                                      }),
                                    (je += Fe.ra))
                                  : je++;
                              }
                            }
                          }
                          if (!_e || null == Pe) throw new Ke(2, 3, 3018, n ? n.P()[0] : null);
                          var Ve = _e.sampleRate,
                            He = (Pe / 9e4) * Ve;
                          c = {
                            id: t.id,
                            type: "audio",
                            codecs: "mp3",
                            encrypted: t.encrypted && t.drmInfos.length > 0,
                            timescale: Ve,
                            duration: r,
                            Bb: [],
                            Ga: new Uint8Array([]),
                            Sa: new Uint8Array([]),
                            Za: 0,
                            $a: 0,
                            data: { sequenceNumber: this.g, baseMediaDecodeTime: He, zb: De },
                            stream: t,
                          };
                          break;
                        case "opus":
                          var Ge = [],
                            ze = null,
                            Xe = u.H;
                          if (!Xe) throw new Ke(2, 3, 3018, n ? n.P()[0] : null);
                          var We = [];
                          switch (Xe.uj) {
                            case 1:
                            case 2:
                              We = [0];
                              break;
                            case 0:
                              We = [255, 1, 1, 0, 1];
                              break;
                            case 128:
                              We = [255, 2, 0, 0, 1];
                              break;
                            case 3:
                              We = [1, 2, 1, 0, 2, 1];
                              break;
                            case 4:
                              We = [1, 2, 2, 0, 1, 2, 3];
                              break;
                            case 5:
                              We = [1, 3, 2, 0, 4, 1, 2, 3];
                              break;
                            case 6:
                              We = [1, 4, 2, 0, 4, 1, 2, 3, 5];
                              break;
                            case 7:
                              We = [1, 4, 2, 0, 4, 1, 2, 3, 5, 6];
                              break;
                            case 8:
                              We = [1, 5, 3, 0, 6, 1, 2, 3, 4, 5, 7];
                              break;
                            case 130:
                              We = [1, 1, 2, 0, 1];
                              break;
                            case 131:
                              We = [1, 1, 3, 0, 1, 2];
                              break;
                            case 132:
                              We = [1, 1, 4, 0, 1, 2, 3];
                              break;
                            case 133:
                              We = [1, 1, 5, 0, 1, 2, 3, 4];
                              break;
                            case 134:
                              We = [1, 1, 6, 0, 1, 2, 3, 4, 5];
                              break;
                            case 135:
                              We = [1, 1, 7, 0, 1, 2, 3, 4, 5, 6];
                              break;
                            case 136:
                              We = [1, 1, 8, 0, 1, 2, 3, 4, 5, 6, 7];
                          }
                          for (
                            var qe = new Uint8Array(
                                [
                                  0,
                                  Xe.channelCount,
                                  0,
                                  0,
                                  (Xe.sampleRate >>> 24) & 255,
                                  (Xe.sampleRate >>> 17) & 255,
                                  (Xe.sampleRate >>> 8) & 255,
                                  (Xe.sampleRate >>> 0) & 255,
                                  0,
                                  0,
                                ].concat(m(We)),
                              ),
                              Ye = Xe.sampleRate,
                              $e = g(u.ub()),
                              Je = $e.next();
                            !Je.done;
                            Je = $e.next()
                          ) {
                            var Qe = Je.value,
                              Ze = Qe.data;
                            null == ze && null !== Qe.pts && (ze = Qe.pts);
                            for (var et = 0; et < Ze.length; ) {
                              for (
                                var tt = !!(16 & Ze[et + 1]), rt = !!(8 & Ze[et + 1]), it = et + 2, at = 0;
                                255 === Ze[it];
                              )
                                ((at += 255), (it += 1));
                              ((at += Ze[it]), (it += 1), (it += tt ? 2 : 0), (it += rt ? 2 : 0));
                              var ot = Ze.slice(it, it + at);
                              (Ge.push({
                                data: ot,
                                size: ot.byteLength,
                                duration: 960,
                                sb: 0,
                                flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                              }),
                                (et = it + at));
                            }
                          }
                          if (0 == qe.byteLength || null == ze) throw new Ke(2, 3, 3018, n ? n.P()[0] : null);
                          ((t.audioSamplingRate = Xe.sampleRate), (t.channelsCount = Xe.channelCount));
                          var st = (ze / 9e4) * Ye;
                          c = {
                            id: t.id,
                            type: "audio",
                            codecs: "opus",
                            encrypted: t.encrypted && t.drmInfos.length > 0,
                            timescale: Ye,
                            duration: r,
                            Bb: [],
                            Ga: qe,
                            Sa: new Uint8Array([]),
                            Za: 0,
                            $a: 0,
                            data: { sequenceNumber: this.g, baseMediaDecodeTime: st, zb: Ge },
                            stream: t,
                          };
                      }
                      c && (l.push(c), (c = null));
                    }
                  } catch (gt) {
                    return gt && 3023 == gt.code ? Promise.resolve(new Uint8Array([])) : Promise.reject(gt);
                  }
                  if (!l.length) return Promise.reject(new Ke(2, 3, 3018, n ? n.P()[0] : null));
                  var lt = new lo(l),
                    dt = t.id + "_" + n.i;
                  if (this.j.has(dt)) var ct = this.j.get(dt);
                  else ((ct = co(lt)), this.j.set(dt, ct));
                  var ht = this.l !== ct,
                    ft = mo(lt);
                  return ((this.l = ct), this.g++, Promise.resolve({ data: ft, init: ht ? ct : null }));
                }),
                V("shaka.transmuxer.TsTransmuxer", dA),
                (dA.prototype.transmux = dA.prototype.transmux),
                (dA.prototype.getOriginalMimeType = dA.prototype.getOriginalMimeType),
                (dA.prototype.convertCodecs = dA.prototype.convertCodecs),
                (dA.prototype.isSupported = dA.prototype.isSupported),
                (dA.prototype.destroy = dA.prototype.destroy));
              var cA = ["aac", "ac-3", "ec-3", "mp3", "opus"],
                hA = ["avc", "hevc"];
              function pA() {}
              (tr(
                "video/mp2t",
                function () {
                  return new dA("video/mp2t");
                },
                or,
              ),
                p(pA, zl),
                V("shaka.util.FairPlayUtils", pA));
            }.call(t, e, e, void 0),
            t.shaka))
              au[n] = t.shaka[n];
          })());
        var uu,
          lu,
          du = {
            lightning: {
              debug: !1,
              focusDebug: !1,
              fontSettings: { fontFamily: "Roboto", color: 4294967295, fontSize: 40 },
              animationSettings: { easing: "ease-in-out", duration: 250 },
              rendererOptions: {
                appHeight: 1080,
                appWidth: 1920,
                numImageWorkers: 2,
                fontEngines: [
                  class extends dt {
                    constructor(e) {
                      (super(e),
                        s(this, "ssdfFontFamilies", {}),
                        s(this, "msdfFontFamilies", {}),
                        s(this, "fontFamilyArray", [this.ssdfFontFamilies, this.msdfFontFamilies]),
                        s(this, "sdfShader", void 0),
                        s(this, "rendererBounds", void 0),
                        s(this, "type", "sdf"),
                        (this.sdfShader = this.stage.shManager.loadShader("SdfShader", {
                          transform: new Float32Array(),
                          color: 0,
                          size: 0,
                          scrollY: 0,
                          distanceRange: 0,
                          debug: !1,
                        }).shader),
                        (this.rendererBounds = {
                          x1: 0,
                          y1: 0,
                          x2: this.stage.options.appWidth,
                          y2: this.stage.options.appHeight,
                        }));
                    }
                    getPropertySetters() {
                      return {
                        fontFamily: (e, t) => {
                          ((e.props.fontFamily = t), this.releaseFontFace(e), this.invalidateLayoutCache(e));
                        },
                        fontWeight: (e, t) => {
                          ((e.props.fontWeight = t), this.releaseFontFace(e), this.invalidateLayoutCache(e));
                        },
                        fontStyle: (e, t) => {
                          ((e.props.fontStyle = t), this.releaseFontFace(e), this.invalidateLayoutCache(e));
                        },
                        fontStretch: (e, t) => {
                          ((e.props.fontStretch = t), this.releaseFontFace(e), this.invalidateLayoutCache(e));
                        },
                        fontSize: (e, t) => {
                          ((e.props.fontSize = t), this.invalidateLayoutCache(e));
                        },
                        text: (e, t) => {
                          ((e.props.text = t), this.invalidateLayoutCache(e));
                        },
                        textAlign: (e, t) => {
                          ((e.props.textAlign = t), this.invalidateLayoutCache(e));
                        },
                        color: (e, t) => {
                          e.props.color = t;
                        },
                        x: (e, t) => {
                          ((e.props.x = t),
                            e.elementBounds.valid &&
                              (this.setElementBoundsX(e),
                              !e.renderWindow.valid &&
                                w(e.elementBounds, this.rendererBounds) &&
                                this.scheduleUpdateState(e)));
                        },
                        y: (e, t) => {
                          ((e.props.y = t),
                            e.elementBounds.valid &&
                              (this.setElementBoundsY(e),
                              !e.renderWindow.valid &&
                                w(e.elementBounds, this.rendererBounds) &&
                                this.scheduleUpdateState(e)));
                        },
                        contain: (e, t) => {
                          ((e.props.contain = t), this.invalidateLayoutCache(e));
                        },
                        width: (e, t) => {
                          ((e.props.width = t), "none" !== e.props.contain && this.invalidateLayoutCache(e));
                        },
                        height: (e, t) => {
                          ((e.props.height = t), "both" === e.props.contain && this.invalidateLayoutCache(e));
                        },
                        offsetY: (e, t) => {
                          ((e.props.offsetY = t), this.invalidateLayoutCache(e));
                        },
                        scrollable: (e, t) => {
                          ((e.props.scrollable = t), this.invalidateLayoutCache(e));
                        },
                        scrollY: (e, t) => {
                          ((e.props.scrollY = t), this.scheduleUpdateState(e));
                        },
                        letterSpacing: (e, t) => {
                          ((e.props.letterSpacing = t), this.invalidateLayoutCache(e));
                        },
                        lineHeight: (e, t) => {
                          ((e.props.lineHeight = t),
                            (e.resLineHeight = void 0),
                            this.invalidateLayoutCache(e));
                        },
                        maxLines: (e, t) => {
                          ((e.props.maxLines = t), this.invalidateLayoutCache(e));
                        },
                        textBaseline: (e, t) => {
                          ((e.props.textBaseline = t), this.invalidateLayoutCache(e));
                        },
                        verticalAlign: (e, t) => {
                          ((e.props.verticalAlign = t), this.invalidateLayoutCache(e));
                        },
                        overflowSuffix: (e, t) => {
                          ((e.props.overflowSuffix = t), this.invalidateLayoutCache(e));
                        },
                        debug: (e, t) => {
                          e.props.debug = t;
                        },
                      };
                    }
                    canRenderFont(e) {
                      var t = e.fontFamily;
                      return (
                        t in this.ssdfFontFamilies ||
                        t in this.msdfFontFamilies ||
                        "$$SDF_FAILURE_TEST$$" === t
                      );
                    }
                    isFontFaceSupported(e) {
                      return e instanceof Lt;
                    }
                    addFontFace(e) {
                      var t = e.fontFamily,
                        n =
                          "ssdf" === e.type
                            ? this.ssdfFontFamilies
                            : "msdf" === e.type
                              ? this.msdfFontFamilies
                              : void 0;
                      if (n) {
                        var r = n[t];
                        (r || ((r = new Set()), (n[t] = r)), r.add(e));
                      } else console.warn(`Invalid font face type: ${e.type}`);
                    }
                    createState(e) {
                      return {
                        props: e,
                        status: "initialState",
                        updateScheduled: !1,
                        emitter: new v(),
                        lineCache: [],
                        forceFullLayoutCalc: !1,
                        renderWindow: {
                          screen: { x1: 0, y1: 0, x2: 0, y2: 0 },
                          sdf: { x1: 0, y1: 0, x2: 0, y2: 0 },
                          firstLineIdx: 0,
                          numLines: 0,
                          valid: !1,
                        },
                        elementBounds: { x1: 0, y1: 0, x2: 0, y2: 0, valid: !1 },
                        clippingRect: { x: 0, y: 0, width: 0, height: 0, valid: !1 },
                        bufferNumFloats: 0,
                        bufferNumQuads: 0,
                        vertexBuffer: void 0,
                        webGlBuffers: null,
                        bufferUploaded: !1,
                        textH: void 0,
                        textW: void 0,
                        distanceRange: 0,
                        trFontFace: void 0,
                        isRenderable: !1,
                        resLineHeight: void 0,
                        debugData: {
                          updateCount: 0,
                          layoutCount: 0,
                          lastLayoutNumCharacters: 0,
                          layoutSum: 0,
                          drawSum: 0,
                          drawCount: 0,
                          bufferSize: 0,
                        },
                      };
                    }
                    updateState(e) {
                      var t = e.trFontFace,
                        n = e.textH,
                        r = e.lineCache,
                        i = e.debugData,
                        a = e.forceFullLayoutCalc;
                      if (
                        (i.updateCount++,
                        "initialState" === e.status && this.setStatus(e, "loading"),
                        void 0 === t)
                      ) {
                        if (((t = this.resolveFontFace(e.props)), (e.trFontFace = t), void 0 === t)) {
                          var o = `SdfTextRenderer: Could not resolve font face for family: '${e.props.fontFamily}'`;
                          return (console.error(o), void this.setStatus(e, "failed", new Error(o)));
                        }
                        t.texture.setRenderableOwner(e.props.fontFamily, !0);
                      }
                      if (!1 !== t.loaded) {
                        (t.data, t.metrics);
                        var s = e.props,
                          u = s.text,
                          l = s.fontSize,
                          d = s.x,
                          c = s.y,
                          h = s.contain,
                          p = s.width,
                          f = s.height,
                          g = s.verticalAlign,
                          m = s.scrollable,
                          v = s.overflowSuffix,
                          y = s.maxLines,
                          b = "both" === h && m ? e.props.scrollY : 0,
                          x = e.renderWindow,
                          T = t.data.info.size,
                          S = l / T,
                          A = e.resLineHeight;
                        if (void 0 === A) {
                          var E = e.props.lineHeight;
                          ((A =
                            void 0 === E
                              ? (function (e, t) {
                                  return t * (e.ascender - e.descender + e.lineGap);
                                })(t.metrics, l)
                              : E),
                            (e.resLineHeight = A));
                        }
                        var k = A / S;
                        e.distanceRange = S * t.data.distanceField.distanceRange;
                        var I = 24 * u.length,
                          C = e.vertexBuffer;
                        (!C || C.length < I) && (C = new Float32Array(2 * I));
                        var M = e.elementBounds;
                        if (
                          (M.valid || (this.setElementBoundsX(e), this.setElementBoundsY(e), (M.valid = !0)),
                          !a && x.valid)
                        ) {
                          var R = x.screen;
                          if (
                            d + R.x1 <= M.x1 &&
                            d + R.x2 >= M.x2 &&
                            c - b + R.y1 <= M.y1 &&
                            c - b + R.y2 >= M.y2
                          )
                            return void this.setStatus(e, "loaded");
                          ((x.valid = !1), this.setStatus(e, "loading"));
                        }
                        var _ = e.props,
                          D = _.offsetY,
                          P = _.textAlign;
                        if (!x.valid) {
                          if (!w(M, this.rendererBounds)) return;
                          nu(x, d, c, b, A, "both" === h ? M.y2 - M.y1 : 0, M, S);
                        }
                        var L = (function (e, t, n, r, i, a, o, s, u) {
                          var l = Math.min(Math.max(o.firstLineIdx, 0), s.length),
                            d = n.metrics;
                          n.data;
                          var c = (d.ascender - d.descender) * e,
                            h = 0;
                          "middle" === r ? (h = (t - c) / 2) : "bottom" === r && (h = t - c);
                          var p = i / a,
                            f = n.data.common.base,
                            g = p + (d.ascender * e - f) + l * t + h;
                          if (!(u && g >= u / a)) return { sdfX: 0, sdfY: g, lineIndex: l };
                        })(T, k, t, g, D, S, x, r, n);
                        if (L) {
                          var N = e.props.letterSpacing,
                            O = tu(
                              L.lineIndex,
                              L.sdfX,
                              L.sdfY,
                              u,
                              P,
                              p,
                              f,
                              l,
                              A,
                              N,
                              C,
                              h,
                              r,
                              x.sdf,
                              t,
                              a,
                              m,
                              v,
                              y,
                            );
                          ((e.bufferUploaded = !1),
                            (e.bufferNumFloats = O.bufferNumFloats),
                            (e.bufferNumQuads = O.bufferNumQuads),
                            (e.vertexBuffer = C),
                            (e.renderWindow = x),
                            (i.lastLayoutNumCharacters = O.layoutNumCharacters),
                            (i.bufferSize = C.byteLength),
                            O.fullyProcessed && ((e.textW = O.maxX * S), (e.textH = O.numLines * k * S)),
                            this.setStatus(e, "loaded"));
                        } else this.setStatus(e, "loaded");
                      } else
                        t.once("loaded", () => {
                          this.scheduleUpdateState(e);
                        });
                    }
                    renderQuads(e, t, n, r, i, a) {
                      var o, s;
                      if (e.vertexBuffer) {
                        var u,
                          l,
                          d = this.stage.renderer,
                          h = e.props,
                          p = h.fontSize,
                          f = h.color,
                          g = h.contain,
                          m = h.scrollable,
                          v = h.zIndex,
                          y = h.debug,
                          b = "both" === g && m ? e.props.scrollY : 0,
                          x = e.textW,
                          T = void 0 === x ? 0 : x,
                          w = e.textH,
                          E = void 0 === w ? 0 : w,
                          k = e.distanceRange,
                          I = e.vertexBuffer,
                          C = e.bufferUploaded,
                          M = e.trFontFace,
                          R = e.elementBounds,
                          _ = e.webGlBuffers;
                        if (!_) {
                          var D = d.glw,
                            P = 4 * Float32Array.BYTES_PER_ELEMENT,
                            L = D.createBuffer();
                          ((e.webGlBuffers = new Ct([
                            {
                              buffer: L,
                              attributes: {
                                a_position: {
                                  name: "a_position",
                                  size: 2,
                                  type: D.FLOAT,
                                  normalized: !1,
                                  stride: P,
                                  offset: 0,
                                },
                                a_textureCoordinate: {
                                  name: "a_textureCoordinate",
                                  size: 2,
                                  type: D.FLOAT,
                                  normalized: !1,
                                  stride: P,
                                  offset: 2 * Float32Array.BYTES_PER_ELEMENT,
                                },
                              },
                            },
                          ])),
                            (e.bufferUploaded = !1),
                            e.webGlBuffers,
                            (_ = e.webGlBuffers));
                        }
                        if (!C) {
                          var N,
                            O,
                            U = d.glw,
                            B =
                              null !==
                                (N =
                                  null === (O = _) || void 0 === O
                                    ? void 0
                                    : O.getBuffer("a_textureCoordinate")) && void 0 !== N
                                ? N
                                : null;
                          (U.arrayBufferData(B, I, U.STATIC_DRAW), (e.bufferUploaded = !0));
                        }
                        if (m && "both" === g) {
                          R.valid;
                          var j =
                            ((u = R),
                            (l = ru)
                              ? ((l.x = u.x1),
                                (l.y = u.y1),
                                (l.width = u.x2 - u.x1),
                                (l.height = u.y2 - u.y1),
                                l)
                              : { x: u.x1, y: u.y1, width: u.x2 - u.x1, height: u.y2 - u.y1 });
                          n.valid
                            ? ((e.clippingRect.valid = !0), (n = S(n, j, e.clippingRect)))
                            : ((e.clippingRect.valid = !0), (n = A(j, e.clippingRect)));
                        }
                        var F = new Tt(
                            d.glw,
                            d.options,
                            _,
                            this.sdfShader,
                            {
                              transform: t.getFloatArr(),
                              color: c(f, r),
                              size: p / ((null === (o = M.data) || void 0 === o ? void 0 : o.info.size) || 0),
                              scrollY: b,
                              distanceRange: k,
                              debug: y.sdfShaderDebug,
                            },
                            r,
                            n,
                            { height: E, width: T },
                            0,
                            v,
                            !1,
                            i,
                            a,
                          ),
                          V = (null === (s = e.trFontFace) || void 0 === s ? void 0 : s.texture).ctxTexture;
                        (F.addTexture(V),
                          (F.length = e.bufferNumFloats),
                          (F.numQuads = e.bufferNumQuads),
                          d.addRenderOp(F));
                      }
                    }
                    setIsRenderable(e, t) {
                      var n;
                      (super.setIsRenderable(e, t),
                        null === (n = e.trFontFace) ||
                          void 0 === n ||
                          n.texture.setRenderableOwner(e.props.fontFamily, t));
                    }
                    destroyState(e) {
                      var t;
                      (super.destroyState(e),
                        null === (t = e.trFontFace) ||
                          void 0 === t ||
                          t.texture.setRenderableOwner(e.props.fontFamily, !1));
                    }
                    resolveFontFace(e) {
                      return this.stage.fontManager.resolveFontFace(this.fontFamilyArray, e, "sdf");
                    }
                    releaseFontFace(e) {
                      ((e.resLineHeight = void 0),
                        e.trFontFace &&
                          (e.trFontFace.texture.setRenderableOwner(e.props.fontFamily, !1),
                          (e.trFontFace = void 0)));
                    }
                    invalidateLayoutCache(e) {
                      ((e.renderWindow.valid = !1),
                        (e.elementBounds.valid = !1),
                        (e.textH = void 0),
                        (e.textW = void 0),
                        (e.lineCache = []),
                        this.setStatus(e, "loading"),
                        this.scheduleUpdateState(e));
                    }
                    setElementBoundsX(e) {
                      var t = e.props,
                        n = t.x,
                        r = t.contain,
                        i = t.width,
                        a = e.elementBounds;
                      ((a.x1 = n), (a.x2 = "none" !== r ? n + i : 1 / 0));
                    }
                    setElementBoundsY(e) {
                      var t = e.props,
                        n = t.y,
                        r = t.contain,
                        i = t.height,
                        a = e.elementBounds;
                      ((a.y1 = n), (a.y2 = "both" === r ? n + i : 1 / 0));
                    }
                  },
                ],
                renderEngine: class extends ft {
                  constructor(e) {
                    (super(e),
                      s(this, "glw", void 0),
                      s(this, "system", void 0),
                      s(this, "quadBuffer", void 0),
                      s(this, "fQuadBuffer", void 0),
                      s(this, "uiQuadBuffer", void 0),
                      s(this, "renderOps", []),
                      s(this, "curBufferIdx", 0),
                      s(this, "curRenderOp", null),
                      s(this, "rttNodes", []),
                      s(this, "activeRttNode", null),
                      s(this, "defShaderCtrl", void 0),
                      s(this, "defaultShader", void 0),
                      s(this, "quadBufferCollection", void 0),
                      s(this, "clearColor", { raw: 0, normalized: [0, 0, 0, 0] }),
                      s(this, "quadBufferUsage", 0),
                      s(this, "numQuadsRendered", 0),
                      s(this, "renderToTextureActive", !1),
                      (this.quadBuffer = new ArrayBuffer(this.stage.options.quadBufferSize)),
                      (this.fQuadBuffer = new Float32Array(this.quadBuffer)),
                      (this.uiQuadBuffer = new Uint32Array(this.quadBuffer)),
                      (this.mode = "webgl"));
                    var t = e.canvas,
                      n = e.clearColor,
                      r = e.bufferMemory,
                      i = (function (e, t = !1, n) {
                        var r = {
                            alpha: !0,
                            antialias: !1,
                            depth: !1,
                            stencil: !0,
                            desynchronized: !1,
                            powerPreference: "high-performance",
                            premultipliedAlpha: !0,
                            preserveDrawingBuffer: !1,
                          },
                          i =
                            e.getContext(t ? "webgl2" : "webgl", r) || e.getContext("experimental-webgl", r);
                        if (!i) throw new Error("Unable to create WebGL context");
                        return n
                          ? new Proxy(i, {
                              get(e, t) {
                                var r = e[t];
                                return "function" == typeof r ? (n.increment(String(t)), r.bind(e)) : r;
                              },
                            })
                          : i;
                      })(t, e.forceWebGL2, e.contextSpy),
                      a = (this.glw = new Mt(i));
                    (a.viewport(0, 0, t.width, t.height),
                      this.updateClearColor(n),
                      a.setBlend(!0),
                      a.blendFunc(a.ONE, a.ONE_MINUS_SRC_ALPHA),
                      (function (e, t) {
                        for (
                          var n = ~~(t / 80), r = new Uint16Array(6 * n), i = 0, a = 0;
                          i < n;
                          i += 6, a += 4
                        )
                          ((r[i] = a),
                            (r[i + 1] = a + 1),
                            (r[i + 2] = a + 2),
                            (r[i + 3] = a + 2),
                            (r[i + 4] = a + 1),
                            (r[i + 5] = a + 3));
                        var o = e.createBuffer();
                        e.elementArrayBufferData(o, r, e.STATIC_DRAW);
                      })(a, r),
                      (this.system = { parameters: wt(this.glw), extensions: St(this.glw) }),
                      (this.shManager.renderer = this),
                      (this.defShaderCtrl = this.shManager.loadShader("DefaultShader")),
                      (this.defaultShader = this.defShaderCtrl.shader));
                    var o = a.createBuffer(),
                      u = 8 * Float32Array.BYTES_PER_ELEMENT;
                    this.quadBufferCollection = new Ct([
                      {
                        buffer: o,
                        attributes: {
                          a_position: {
                            name: "a_position",
                            size: 2,
                            type: a.FLOAT,
                            normalized: !1,
                            stride: u,
                            offset: 0,
                          },
                          a_textureCoordinate: {
                            name: "a_textureCoordinate",
                            size: 2,
                            type: a.FLOAT,
                            normalized: !1,
                            stride: u,
                            offset: 2 * Float32Array.BYTES_PER_ELEMENT,
                          },
                          a_color: {
                            name: "a_color",
                            size: 4,
                            type: a.UNSIGNED_BYTE,
                            normalized: !0,
                            stride: u,
                            offset: 4 * Float32Array.BYTES_PER_ELEMENT,
                          },
                          a_textureIndex: {
                            name: "a_textureIndex",
                            size: 1,
                            type: a.FLOAT,
                            normalized: !1,
                            stride: u,
                            offset: 5 * Float32Array.BYTES_PER_ELEMENT,
                          },
                          a_nodeCoordinate: {
                            name: "a_nodeCoordinate",
                            size: 2,
                            type: a.FLOAT,
                            normalized: !1,
                            stride: u,
                            offset: 6 * Float32Array.BYTES_PER_ELEMENT,
                          },
                        },
                      },
                    ]);
                  }
                  reset() {
                    var e = this.glw;
                    ((this.curBufferIdx = 0),
                      (this.curRenderOp = null),
                      (this.renderOps.length = 0),
                      e.setScissorTest(!1),
                      e.clear());
                  }
                  getShaderManager() {
                    return this.shManager;
                  }
                  createCtxTexture(e) {
                    return e instanceof Te
                      ? new It(this.glw, this.txMemManager, e)
                      : e instanceof we
                        ? new Rt(this.glw, this.txMemManager, e)
                        : new kt(this.glw, this.txMemManager, e);
                  }
                  addQuad(e) {
                    var t = this.fQuadBuffer,
                      n = this.uiQuadBuffer,
                      r = e.texture;
                    if (e.shader !== this.defaultShader) {
                      if (1 == f(e.shaderProps, "$dimensions")) {
                        var i = e.shaderProps.$dimensions;
                        ((i.width = e.width), (i.height = e.height));
                      }
                      !0 === f(e.shaderProps, "$alpha") && (e.shaderProps.$alpha = e.alpha);
                    }
                    var a = this.curBufferIdx,
                      o = (this.curRenderOp, { width: e.width, height: e.height });
                    !1 === this.reuseRenderOp(e) &&
                      (this.newRenderOp(
                        e.shader,
                        e.shaderProps,
                        e.alpha,
                        o,
                        e.clippingRect,
                        a,
                        e.rtt,
                        e.parentHasRenderTexture,
                        e.framebufferDimensions,
                      ),
                      this.curRenderOp);
                    var s = void 0,
                      u = 0,
                      l = 0,
                      d = 1,
                      c = 1;
                    if (r.type === g.subTexture) {
                      var h = r.props,
                        p = h.x,
                        m = h.y,
                        v = h.width,
                        y = h.height,
                        b = r.parentTexture.dimensions || { width: 0, height: 0 },
                        x = b.width,
                        T = void 0 === x ? 0 : x,
                        w = b.height,
                        S = void 0 === w ? 0 : w;
                      ((d = (u = p / T) + v / T),
                        (c = (l = m / S) + y / S),
                        (s = (r = r.parentTexture).ctxTexture));
                    } else
                      ((u = (s = r.ctxTexture).txCoordX1),
                        (l = s.txCoordY1),
                        (d = s.txCoordX2),
                        (c = s.txCoordY2));
                    if (
                      r.type === g.image &&
                      null !== e.textureOptions &&
                      void 0 !== e.textureOptions.resizeMode &&
                      null !== r.dimensions
                    ) {
                      var A = e.textureOptions.resizeMode,
                        E = r.dimensions,
                        k = E.width,
                        I = E.height;
                      if ("cover" === A.type) {
                        var C = e.width / k,
                          M = e.height / I,
                          R = Math.max(C, M),
                          _ = 1 / R;
                        if (R && C && C < R) {
                          var D,
                            P = _ * e.width;
                          d = (u = (1 - P / k) * (null !== (D = A.clipX) && void 0 !== D ? D : 0.5)) + P / k;
                        }
                        if (R && M && M < R) {
                          var L,
                            N = _ * e.height;
                          c = (l = (1 - N / I) * (null !== (L = A.clipY) && void 0 !== L ? L : 0.5)) + N / I;
                        }
                      }
                    }
                    var O = 0;
                    if (null !== e.textureOptions) {
                      if (!0 === e.textureOptions.flipX) {
                        var U = [d, u];
                        ((u = U[0]), (d = U[1]));
                      }
                      O = +(e.textureOptions.flipY || !1);
                    }
                    if (O ^ +(r.type === g.renderToTexture)) {
                      var B = [c, l];
                      ((l = B[0]), (c = B[1]));
                    }
                    var j = this.addTexture(s, a);
                    if ((this.curRenderOp, e.renderCoords))
                      ((t[a++] = e.renderCoords.x1),
                        (t[a++] = e.renderCoords.y1),
                        (t[a++] = u),
                        (t[a++] = l),
                        (n[a++] = e.colorTl),
                        (t[a++] = j),
                        (t[a++] = 0),
                        (t[a++] = 0),
                        (t[a++] = e.renderCoords.x2),
                        (t[a++] = e.renderCoords.y2),
                        (t[a++] = d),
                        (t[a++] = l),
                        (n[a++] = e.colorTr),
                        (t[a++] = j),
                        (t[a++] = 1),
                        (t[a++] = 0),
                        (t[a++] = e.renderCoords.x4),
                        (t[a++] = e.renderCoords.y4),
                        (t[a++] = u),
                        (t[a++] = c),
                        (n[a++] = e.colorBl),
                        (t[a++] = j),
                        (t[a++] = 0),
                        (t[a++] = 1),
                        (t[a++] = e.renderCoords.x3),
                        (t[a++] = e.renderCoords.y3),
                        (t[a++] = d),
                        (t[a++] = c),
                        (n[a++] = e.colorBr),
                        (t[a++] = j),
                        (t[a++] = 1),
                        (t[a++] = 1));
                    else if (0 !== e.tb || 0 !== e.tc)
                      ((t[a++] = e.tx),
                        (t[a++] = e.ty),
                        (t[a++] = u),
                        (t[a++] = l),
                        (n[a++] = e.colorTl),
                        (t[a++] = j),
                        (t[a++] = 0),
                        (t[a++] = 0),
                        (t[a++] = e.tx + e.width * e.ta),
                        (t[a++] = e.ty + e.width * e.tc),
                        (t[a++] = d),
                        (t[a++] = l),
                        (n[a++] = e.colorTr),
                        (t[a++] = j),
                        (t[a++] = 1),
                        (t[a++] = 0),
                        (t[a++] = e.tx + e.height * e.tb),
                        (t[a++] = e.ty + e.height * e.td),
                        (t[a++] = u),
                        (t[a++] = c),
                        (n[a++] = e.colorBl),
                        (t[a++] = j),
                        (t[a++] = 0),
                        (t[a++] = 1),
                        (t[a++] = e.tx + e.width * e.ta + e.height * e.tb),
                        (t[a++] = e.ty + e.width * e.tc + e.height * e.td),
                        (t[a++] = d),
                        (t[a++] = c),
                        (n[a++] = e.colorBr),
                        (t[a++] = j),
                        (t[a++] = 1),
                        (t[a++] = 1));
                    else {
                      var F = e.tx + e.width * e.ta,
                        V = e.ty + e.height * e.td;
                      ((t[a++] = e.tx),
                        (t[a++] = e.ty),
                        (t[a++] = u),
                        (t[a++] = l),
                        (n[a++] = e.colorTl),
                        (t[a++] = j),
                        (t[a++] = 0),
                        (t[a++] = 0),
                        (t[a++] = F),
                        (t[a++] = e.ty),
                        (t[a++] = d),
                        (t[a++] = l),
                        (n[a++] = e.colorTr),
                        (t[a++] = j),
                        (t[a++] = 1),
                        (t[a++] = 0),
                        (t[a++] = e.tx),
                        (t[a++] = V),
                        (t[a++] = u),
                        (t[a++] = c),
                        (n[a++] = e.colorBl),
                        (t[a++] = j),
                        (t[a++] = 0),
                        (t[a++] = 1),
                        (t[a++] = F),
                        (t[a++] = V),
                        (t[a++] = d),
                        (t[a++] = c),
                        (n[a++] = e.colorBr),
                        (t[a++] = j),
                        (t[a++] = 1),
                        (t[a++] = 1));
                    }
                    (this.curRenderOp.numQuads++, (this.curBufferIdx = a));
                  }
                  newRenderOp(e, t, n, r, i, a, o, s, u) {
                    var l = new Tt(
                      this.glw,
                      this.options,
                      this.quadBufferCollection,
                      e,
                      t,
                      n,
                      i,
                      r,
                      a,
                      0,
                      o,
                      s,
                      u,
                    );
                    ((this.curRenderOp = l), this.renderOps.push(l));
                  }
                  addTexture(e, t, n) {
                    var r = this.curRenderOp,
                      i = r.addTexture(e);
                    if (4294967295 === i) {
                      if (n) throw new Error("Unable to add texture to render op");
                      return (
                        this.newRenderOp(r.shader, r.shaderProps, r.alpha, r.dimensions, r.clippingRect, t),
                        this.addTexture(e, t, !0)
                      );
                    }
                    return i;
                  }
                  reuseRenderOp(e) {
                    var t,
                      n,
                      r,
                      i = e.shader,
                      a = e.shaderProps,
                      o = e.parentHasRenderTexture,
                      s = e.rtt,
                      u = e.clippingRect;
                    return (
                      (null === (t = this.curRenderOp) || void 0 === t ? void 0 : t.shader) === i &&
                      !1 !=
                        ((n = this.curRenderOp.clippingRect) === (r = u) ||
                          (null !== n &&
                            null !== r &&
                            n.x === r.x &&
                            n.y === r.y &&
                            n.width === r.width &&
                            n.height === r.height)) &&
                      !0 !== o &&
                      !0 !== s &&
                      (this.curRenderOp.shader === this.defaultShader ||
                        !1 !== this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps, a))
                    );
                  }
                  addRenderOp(e) {
                    (this.renderOps.push(e), (this.curRenderOp = null));
                  }
                  render(e = "screen") {
                    var t = this.glw,
                      n = this.quadBuffer,
                      r = new Float32Array(n, 0, this.curBufferIdx),
                      i = this.quadBufferCollection.getBuffer("a_position") || null;
                    t.arrayBufferData(i, r, t.STATIC_DRAW);
                    for (var a = 0, o = this.renderOps.length; a < o; a++) this.renderOps[a].draw();
                    this.quadBufferUsage = this.curBufferIdx * r.BYTES_PER_ELEMENT;
                    var s = 8 * r.BYTES_PER_ELEMENT * 4;
                    this.numQuadsRendered = this.quadBufferUsage / s;
                  }
                  getQuadCount() {
                    return this.numQuadsRendered;
                  }
                  renderToTexture(e) {
                    for (var t = 0; t < this.rttNodes.length; t++) if (this.rttNodes[t] === e) return;
                    this.insertRTTNodeInOrder(e);
                  }
                  insertRTTNodeInOrder(e) {
                    for (var t = this.rttNodes.length, n = e; n && n.parent; ) {
                      var r = this.rttNodes.indexOf(n.parent);
                      if (-1 !== r) {
                        t = r;
                        break;
                      }
                      n = n.parent;
                    }
                    var i = this.findMaxChildRTTIndex(e);
                    (-1 !== i && (t = Math.max(t, i + 1)), this.rttNodes.splice(t, 0, e));
                  }
                  findMaxChildRTTIndex(e) {
                    var t = -1,
                      n = e => {
                        var r = this.rttNodes.indexOf(e);
                        -1 !== r && (t = Math.max(t, r));
                        var i,
                          a = u(e.children);
                        try {
                          for (a.s(); !(i = a.n()).done; ) {
                            var o = i.value;
                            n(o);
                          }
                        } catch (s) {
                          a.e(s);
                        } finally {
                          a.f();
                        }
                      };
                    return (n(e), t);
                  }
                  renderRTTNodes() {
                    for (var e = this.glw, t = (this.stage.txManager, 0); t < this.rttNodes.length; t++) {
                      var n = this.rttNodes[t];
                      if (
                        void 0 !== n &&
                        !1 !== n.hasRTTupdates &&
                        0 !== n.worldAlpha &&
                        (!0 !== n.strictBounds || n.renderState !== P.OutOfBounds) &&
                        null !== n.texture &&
                        "loaded" === n.texture.state
                      ) {
                        ((this.activeRttNode = n), l(n.texture));
                        var r = n.texture.ctxTexture;
                        ((this.renderToTextureActive = !0),
                          e.bindFramebuffer(r.framebuffer),
                          e.viewport(0, 0, r.w, r.h),
                          e.clearColor(0, 0, 0, 0),
                          e.clear());
                        for (var i = 0; i < n.children.length; i++) {
                          var a = n.children[i];
                          void 0 !== a && (this.stage.addQuads(a), (a.hasRTTupdates = !1));
                        }
                        (this.render(), (this.renderOps.length = 0), (n.hasRTTupdates = !1));
                      }
                    }
                    var o = this.clearColor.normalized;
                    (e.clearColor(o[0], o[1], o[2], o[3]),
                      e.bindFramebuffer(null),
                      e.viewport(0, 0, this.glw.canvas.width, this.glw.canvas.height),
                      (this.renderToTextureActive = !1));
                  }
                  removeRTTNode(e) {
                    var t = this.rttNodes.indexOf(e);
                    -1 !== t && this.rttNodes.splice(t, 1);
                  }
                  getBufferInfo() {
                    return {
                      totalAvailable: this.stage.options.quadBufferSize,
                      totalUsed: this.quadBufferUsage,
                    };
                  }
                  getDefShaderCtr() {
                    return this.defShaderCtrl;
                  }
                  updateClearColor(e) {
                    if (this.clearColor.raw !== e) {
                      var t = this.glw,
                        n = x(e);
                      (t.clearColor(n[0], n[1], n[2], n[3]),
                        (this.clearColor = { raw: e, normalized: n }),
                        t.clear());
                    }
                  }
                },
                deviceLogicalPixelRatio: 1,
                devicePhysicalPixelRatio: 1,
                boundsMargin: 20,
                createImageBitmapSupport: "auto",
              },
            },
            keys: {
              Back: ["Escape", 461, 27],
              Backspace: ["Backspace", 8],
              Left: ["ArrowLeft", 37],
              Right: ["ArrowRight", 39],
              Up: ["ArrowUp", 38],
              Down: ["ArrowDown", 40],
              Enter: ["Enter", 13],
            },
            keyHoldOptions: {
              userKeyHoldMap: { EnterHold: ["Enter", 13], BackHold: ["b", 66] },
              holdThreshold: 1e3,
            },
          },
          cu = new URLSearchParams(window.location.search).get("posterSize") || "w185",
          hu = {
            headers: {
              "Content-Type": "application/json",
              Authorization:
                "Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxODU4MjY0ZTM2ZWQ1NzZkYzM3ZDU5MjJmNzM3MWRmNiIsIm5iZiI6MTY2NzIzOTgzMS45MDIwMDAyLCJzdWIiOiI2MzYwMGY5NzFkYmM4ODAwOTBmNTIxMDAiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.LXx9-LdX9JsiY0DhpmjYcYitlqPJqntNHVv-HGZXpww",
            },
          };
        function pu(e, t = cu) {
          return lu + t + e;
        }
        function fu(e, n = {}) {
          return fetch("https://api.themoviedb.org/3" + e, t(t({}, hu), n)).then(e => e.json());
        }
        function gu() {
          return fu("/configuration").then(e => {
            var t;
            return ((uu = e), (lu = null === (t = e.images) || void 0 === t ? void 0 : t.secure_base_url), e);
          });
        }
        var mu = {
          get: function (e, t = {}) {
            return uu ? fu(e, t) : gu().then(() => fu(e, t));
          },
          loadConfig: gu,
        };
        function vu() {
          return (vu = o(
            r().m(function e(t) {
              var n, i, a;
              return r().w(
                function (e) {
                  for (;;)
                    switch ((e.p = e.n)) {
                      case 0:
                        return ((e.p = 0), (e.n = 1), mu.get("/discover/movie"));
                      case 1:
                        return (
                          (n = e.v),
                          (i = t ? n.results.slice(0, 5) : n.results),
                          e.a(
                            2,
                            i.map(e => ({
                              title: e.title,
                              poster_path: e.poster_path,
                              overview: e.overview,
                              backdrop_path: e.backdrop_path,
                              id: e.id,
                            })),
                          )
                        );
                      case 2:
                        throw ((e.p = 2), (a = e.v), console.error(a), a);
                      case 3:
                        return e.a(2);
                    }
                },
                e,
                null,
                [[0, 2]],
              );
            }),
          )).apply(this, arguments);
        }
        function yu() {
          return (yu = o(
            r().m(function e() {
              var t, n;
              return r().w(
                function (e) {
                  for (;;)
                    switch ((e.p = e.n)) {
                      case 0:
                        return ((e.p = 0), (e.n = 1), mu.get("/discover/movie"));
                      case 1:
                        return (
                          (t = e.v),
                          e.a(
                            2,
                            t.results.map(e => ({
                              title: e.title,
                              poster_path: e.poster_path,
                              overview: e.overview,
                              backdrop_path: e.backdrop_path,
                              id: e.id,
                            })),
                          )
                        );
                      case 2:
                        throw ((e.p = 2), (n = e.v), console.error(n), n);
                      case 3:
                        return e.a(2);
                    }
                },
                e,
                null,
                [[0, 2]],
              );
            }),
          )).apply(this, arguments);
        }
        function bu() {
          return (bu = o(
            r().m(function e(t) {
              var n, i, a;
              return r().w(
                function (e) {
                  for (;;)
                    switch ((e.p = e.n)) {
                      case 0:
                        return ((e.p = 0), (e.n = 1), mu.get("/discover/tv"));
                      case 1:
                        return (
                          (n = e.v),
                          (i = t ? n.results.slice(0, 5) : n.results),
                          e.a(
                            2,
                            i.map(e => ({
                              title: e.name,
                              poster_path: e.poster_path,
                              overview: e.overview,
                              backdrop_path: e.backdrop_path,
                              id: e.id,
                            })),
                          )
                        );
                      case 2:
                        throw ((e.p = 2), (a = e.v), console.error(a), a);
                      case 3:
                        return e.a(2);
                    }
                },
                e,
                null,
                [[0, 2]],
              );
            }),
          )).apply(this, arguments);
        }
        function xu() {
          var e = [];
          return (
            e.push({
              title: "MOVIES",
              items: Kn(() =>
                (function (e) {
                  return vu.apply(this, arguments);
                })(!0),
              )[0],
            }),
            e.push({
              title: "SERIES",
              items: Kn(() =>
                (function (e) {
                  return bu.apply(this, arguments);
                })(!0),
              )[0],
            }),
            { rows: e }
          );
        }
        function Tu() {
          var e = Kn(() =>
            (function () {
              return yu.apply(this, arguments);
            })(),
          );
          return { movies: n(e, 1)[0] };
        }
        var wu = { display: "flex", flexDirection: "column", justifyContent: "center", alignItems: "center" },
          Su = { fontFamily: "Roboto", fontSize: 32, color: 1465341951, $focus: { color: 4294967295 } },
          Au = { width: "100%", height: 4, y: 4, color: 4278190335, alpha: 0, $focus: { alpha: 1 } };
        function Eu(e) {
          return zr(
            Zr,
            qr(
              {
                forwardStates: !0,
                get style() {
                  return wu;
                },
              },
              e,
              {
                get children() {
                  return [
                    zr(ei, {
                      get style() {
                        return Su;
                      },
                      get children() {
                        return e.children;
                      },
                    }),
                    zr(Zr, {
                      get style() {
                        return Au;
                      },
                    }),
                  ];
                },
              },
            ),
          );
        }
        var ku = [
            { label: "Home", path: "/" },
            { label: "Movies", path: "/movies" },
          ],
          Iu = e => {
            var t,
              n,
              r = vi(),
              i = () => ("/" === Qa() || r(-1), !0);
            return zr(Zr, {
              onUp: () => t.setFocus(),
              onDown: () => n.setFocus(),
              onBack: i,
              onBackspace: i,
              get children() {
                return [
                  zr(Zr, {
                    x: 32,
                    y: 32,
                    src: "/static/images/logo.png",
                    width: 301,
                    height: 60,
                    zIndex: 200,
                  }),
                  zr(Aa, {
                    x: 400,
                    y: 37,
                    gap: 20,
                    ref(e) {
                      "function" == typeof t ? t(e) : (t = e);
                    },
                    zIndex: 200,
                    get children() {
                      return zr(Ir, {
                        each: ku,
                        children: t =>
                          zr(
                            Eu,
                            qr(e, {
                              width: 118,
                              height: 49,
                              onEnter: () => r(t.path),
                              onClick: () => r(t.path),
                              get children() {
                                return t.label;
                              },
                            }),
                          ),
                      });
                    },
                  }),
                  zr(Zr, {
                    y: 0,
                    ref(e) {
                      "function" == typeof n ? n(e) : (n = e);
                    },
                    forwardFocus: 0,
                    get children() {
                      return e.children;
                    },
                  }),
                ];
              },
            });
          },
          Cu = { scale: 1, $focus: { scale: 1.1 } },
          Mu = {
            fontFamily: "Inter",
            fontWeight: 400,
            fontSize: 24,
            maxLines: 1,
            contain: "width",
            lineHeight: 1,
            color: 4294967193,
            $focus: { color: 4294967295 },
          },
          Ru = { borderRadius: 6, $focus: { border: { width: 6, color: 3978044671 } } },
          _u = e => {
            var t = e.item,
              n = (t.id, t.title),
              r = t.poster_path;
            return zr(Zr, {
              id: "card",
              get width() {
                return e.style.width;
              },
              get height() {
                return e.style.height;
              },
              display: "flex",
              flexDirection: "column",
              gap: 16,
              style: Cu,
              forwardStates: !0,
              onEnter: () => e.onEnter(),
              get children() {
                return [
                  zr(Zr, {
                    id: "pic",
                    style: Ru,
                    get src() {
                      return pu(r, "w342");
                    },
                  }),
                  zr(ei, {
                    id: "text",
                    get y() {
                      return e.style.height;
                    },
                    get width() {
                      return e.style.width;
                    },
                    style: Mu,
                    children: n,
                  }),
                ];
              },
            });
          },
          Du = { width: 229, height: 300 },
          Pu = { width: 1920, height: 1080 },
          Lu = {
            width: 312,
            height: 837,
            alignItems: "center",
            justifyContent: "center",
            borderRadius: 16,
            gap: 16,
            color: 255,
          },
          Nu = {
            width: 280,
            height: 136,
            color: 404232447,
            borderRadius: 16,
            display: "flex",
            flexDirection: "column",
            justifyContent: "center",
            alignItems: "center",
            gap: 24,
            $focus: { border: { width: 4, color: 3978044671 } },
          },
          Ou = { fontFamily: "Inter", fontWeight: 400, fontSize: 16, lineHeight: 1, height: 19 },
          Uu = e =>
            zr(Zr, {
              style: Nu,
              id: "card",
              get children() {
                return [
                  zr(Zr, {
                    width: 45,
                    height: 45,
                    get src() {
                      return "static/images/channels/" + e.channel.image;
                    },
                  }),
                  zr(ei, {
                    style: Ou,
                    get children() {
                      return e.channel.name;
                    },
                  }),
                ];
              },
            }),
          Bu = [
            { name: "CBS", image: "CBS.png" },
            { name: "NBC", image: "NBC.png" },
            { name: "ABC", image: "ABC.png" },
            { name: "Fox", image: "FOX.png" },
            { name: "Fox News Channel", image: "FNC.png" },
          ],
          ju = {
            fontFamily: "Inter",
            fontWeight: 700,
            fontSize: 24,
            lineHeight: 1,
            width: 280,
            height: 29,
            display: "flex",
            justifyContent: "center",
            alignSelf: "center",
          },
          Fu = () =>
            zr(ba, {
              get style() {
                return Lu;
              },
              flexBoundary: "fixed",
              get children() {
                return [
                  zr(Zr, {
                    style: ju,
                    skipFocus: !0,
                    get children() {
                      return zr(ei, { style: ju, children: "Top 5 Channels" });
                    },
                  }),
                  zr(Ir, { each: Bu, children: e => zr(Uu, { channel: e }) }),
                ];
              },
            }),
          Vu = {
            borderRadius: 30,
            width: 352,
            height: 67,
            top: 19,
            color: 791621631,
            display: "flex",
            justifyContent: "center",
            alignItems: "center",
            $focus: { color: 3978044671 },
          },
          Hu = { fontFace: "Inter", fontWeight: 600, fontSize: 24, letterSpacing: 0.06, display: "flex" },
          Gu = e =>
            zr(Zr, {
              style: Vu,
              get children() {
                return zr(ei, { style: Hu, children: "GO TO LIVE PLAYER" });
              },
            });
        function zu() {
          var e = vi();
          return {
            toDetails(t, n) {
              e(`/${n.toLowerCase()}/details/${t}`);
            },
          };
        }
        var Xu = e => {
            var t, n;
            (e.xPos, e.yPos);
            var r,
              i = null !== (t = e.width) && void 0 !== t ? t : 1920,
              a = null !== (n = e.height) && void 0 !== n ? n : 1080;
            return (
              $n(() => {
                r.animate({ rotation: 2 * Math.PI }, { duration: 1e3, repeat: -1, easing: "linear" }).start();
              }),
              zr(Zr, {
                width: i,
                height: a,
                rect: !0,
                color: 255,
                zIndex: 200,
                alpha: 1,
                get children() {
                  return [
                    zr(Zr, {
                      ref(e) {
                        "function" == typeof r ? r(e) : (r = e);
                      },
                      src: "/static/images/zabrinutiMita.png",
                      width: 120,
                      height: 120,
                      zIndex: 200,
                      x: 960,
                      y: 540,
                      mountX: 0.5,
                      mountY: 0.5,
                    }),
                    zr(ei, { x: 880, y: 620, children: "Loading..." }),
                  ];
                },
              })
            );
          },
          Wu = { fontFamily: "Inter", fontWeight: 700, fontSize: 24, letterSpacing: 0.06, color: 4294967295 },
          Ku = e => {
            (Ga(1920), Wa(1080), La("/static/images/background.jpg"));
            var t,
              n,
              r = () => {
                La("/static/images/background.jpg");
              };
            ((t = "movies"), (n = Ia.get(t)) && (n.dispose(), Ia.delete(t)));
            var i = zu().toDetails;
            return zr(Cr, {
              get when() {
                return e.data.rows[0].items();
              },
              get fallback() {
                return zr(Xu, {});
              },
              get children() {
                return zr(Zr, {
                  get style() {
                    return Pu;
                  },
                  forwardFocus: 1,
                  onFocus: r,
                  get children() {
                    return [
                      zr(Zr, { id: "gradient", width: 1920, height: 1080, colorTl: 353703423, colorBr: 0 }),
                      zr(ba, {
                        y: 125,
                        x: 62,
                        gap: 5,
                        get children() {
                          return [
                            zr(Aa, {
                              id: "homeContainer",
                              scroll: "none",
                              get children() {
                                return [
                                  zr(ba, {
                                    id: "mediaContainer",
                                    width: 1241,
                                    height: 404,
                                    autofocus: !0,
                                    get children() {
                                      return zr(Ir, {
                                        get each() {
                                          return e.data.rows;
                                        },
                                        children: e => [
                                          zr(ei, {
                                            style: Wu,
                                            skipFocus: !0,
                                            get children() {
                                              return e.title;
                                            },
                                          }),
                                          zr(Aa, {
                                            width: 1241,
                                            height: 359,
                                            gap: 24,
                                            scroll: "none",
                                            get children() {
                                              return zr(Ir, {
                                                get each() {
                                                  return e.items();
                                                },
                                                children: t =>
                                                  zr(_u, {
                                                    item: t,
                                                    get style() {
                                                      return Du;
                                                    },
                                                    onEnter: () => i(t.id, e.title),
                                                  }),
                                              });
                                            },
                                          }),
                                        ],
                                      });
                                    },
                                  }),
                                  zr(Fu, {}),
                                ];
                              },
                            }),
                            zr(Gu, {}),
                          ];
                        },
                      }),
                    ];
                  },
                });
              },
            });
          },
          qu = { width: 440, height: 265, scale: 1, $focus: { scale: 1.1 } },
          Yu = {
            fontWeight: 400,
            fontSize: 24,
            maxLines: 1,
            contain: "width",
            lineHeight: 1,
            color: 4294967193,
            $focus: { color: 4294967295 },
          },
          $u = { borderRadius: 6, $focus: { border: { width: 6, color: 3978044671 } } },
          Ju = e => {
            var t = e.item,
              n = t.title,
              r = t.poster_path;
            return zr(Zr, {
              id: "card",
              get item() {
                return e.item;
              },
              get width() {
                return e.style.width;
              },
              get height() {
                return e.style.height;
              },
              display: "flex",
              flexDirection: "column",
              style: qu,
              gap: 16,
              forwardStates: !0,
              focusable: !0,
              onEnter: () => e.onEnter(),
              get children() {
                return [
                  zr(Zr, {
                    id: "picture",
                    style: $u,
                    get src() {
                      return pu(r, "w92");
                    },
                  }),
                  zr(ei, {
                    id: "text",
                    get y() {
                      return e.style.height;
                    },
                    get width() {
                      return e.style.width;
                    },
                    style: Yu,
                    children: n,
                  }),
                ];
              },
            });
          },
          Qu = { fontWeight: 700, fontSize: 24, letterSpacing: 0.06, color: 4294967295 },
          Zu = e => {
            var t = zu().toDetails;
            (Ga(1920), Wa(697), La(" "));
            var n = () => location.hash.endsWith("movies"),
              r = Wi(e => {
                n() && La(e);
              }, 400),
              i = Wi((e, t) => {
                n() && (Ua(e), Fa(t));
              }, 400);
            return (
              $n(() => {
                var t, n;
                no(0);
                var r = null === (t = (n = e.data).movies) || void 0 === t ? void 0 : t.call(n);
                if (null != r && r.length) {
                  var i = r[0];
                  null != i &&
                    i.backdrop_path &&
                    (Ga(1920),
                    Wa(697),
                    La(`https://image.tmdb.org/t/p/w300/${i.backdrop_path}`),
                    Ua(i.title || i.name || ""),
                    Fa(i.overview || ""));
                }
              }),
              zr(Cr, {
                get when() {
                  var t;
                  return null === (t = e.data.movies()) || void 0 === t ? void 0 : t.length;
                },
                get fallback() {
                  return zr(Xu, {});
                },
                get children() {
                  return zr(Zr, {
                    forwardFocus: 4,
                    focusable: !0,
                    get children() {
                      return [
                        zr(Zr, {
                          width: 1920,
                          height: 1080,
                          colorTl: 353703423,
                          colorTr: "rgba(21,21,21,0.6)",
                          colorBl: 353703423,
                          colorBr: "rgba(21,21,21,0.6)",
                        }),
                        zr(Zr, {
                          width: 1920,
                          height: 1080,
                          colorTl: 353703423,
                          colorTr: 353703423,
                          colorBl: "rgba(21,21,21,0)",
                          colorBr: "rgba(21,21,21,0)",
                        }),
                        zr(ei, {
                          x: 69,
                          y: 258,
                          fontSize: 28,
                          fontWeight: 600,
                          color: 4294967295,
                          fontFamily: "Inter",
                          get children() {
                            return Oa();
                          },
                        }),
                        zr(ei, {
                          width: 698,
                          height: 124,
                          x: 69,
                          y: 316,
                          fontSize: 22,
                          fontWeight: 600,
                          contain: "width",
                          fontFamily: "Inter",
                          lineHeight: 31,
                          get children() {
                            return ja();
                          },
                        }),
                        zr(Aa, {
                          y: 697,
                          x: 64,
                          gap: 24,
                          width: 1241,
                          scroll: "edge",
                          throttleInput: 200,
                          autofocus: !0,
                          get selected() {
                            return to();
                          },
                          onSelectedChanged: (e, t, n, a) => {
                            (console.log("ROW SELECTED:", e), no(e));
                            var o = t.children[e],
                              s = null == o ? void 0 : o.item;
                            null != s &&
                              s.backdrop_path &&
                              (Ga(1920),
                              Wa(697),
                              r(`https://image.tmdb.org/t/p/w300/${s.backdrop_path}`),
                              i(s.title || s.name || "", s.overview || ""));
                          },
                          get children() {
                            return zr(Ir, {
                              get each() {
                                var t;
                                return null !== (t = e.data.movies()) && void 0 !== t ? t : [];
                              },
                              children: e => zr(Ju, { item: e, style: Qu, onEnter: () => t(e.id, "movies") }),
                            });
                          },
                        }),
                      ];
                    },
                  });
                },
              })
            );
          };
        function el(e) {
          return tl.apply(this, arguments);
        }
        function tl() {
          return (tl = o(
            r().m(function e(t) {
              var n;
              return r().w(function (e) {
                for (;;)
                  switch (e.n) {
                    case 0:
                      return ((e.n = 1), mu.get("/movie/" + t));
                    case 1:
                      return ((n = e.v), e.a(2, n));
                  }
              }, e);
            }),
          )).apply(this, arguments);
        }
        function nl(e) {
          return rl.apply(this, arguments);
        }
        function rl() {
          return (rl = o(
            r().m(function e(t) {
              var n, i, a, o, s, u, l, d, c, h, p;
              return r().w(function (e) {
                for (;;)
                  switch (e.n) {
                    case 0:
                      return ((e.n = 1), mu.get("/tv/" + t));
                    case 1:
                      return (
                        (n = e.v),
                        (i = n.name),
                        (a = n.genres),
                        (o = n.episode_run_time),
                        (s = n.origin_country),
                        (u = n.first_air_date),
                        (l = n.poster_path),
                        (d = n.overview),
                        (c = n.backdrop_path),
                        (h = n.id),
                        (p = n.vote_average),
                        e.a(2, {
                          title: i,
                          genres: a,
                          runtime: o,
                          origin_country: s,
                          release_date: u,
                          poster_path: l,
                          overview: d,
                          backdrop_path: c,
                          id: h,
                          vote_average: p,
                        })
                      );
                  }
              }, e);
            }),
          )).apply(this, arguments);
        }
        var il = {
            width: 112,
            height: 64,
            borderRadius: 300,
            display: "flex",
            justifyContent: "center",
            alignItems: "center",
            color: 791621631,
            $focus: { color: 3978044671 },
          },
          al = e => (
            vi(),
            zr(Zr, {
              style: il,
              onEnter: () => history.back(),
              get children() {
                return zr(Zr, {
                  src: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAABQ0lEQVR4AczXgQ2CMBCFYWESR3EUnUSdRDfRUXQSfH9jyBmptEJzZ3qhtli+FFrOfrPgMwzDSbFfMMTsT/8GCnbT6EfFRfWdjk3KX0CBwFnUtolOg1YDJ3DXruuuGqtJqQJmcIcmsvegxUAPHMYioBeuCOiJmwV6434CI+CywCi4SaBwF3XYTZh9rulWoutly8cqfuPsu9UVh3oERsSNwAkcfU+1k614RbqTvRBUCFA2yFQ8I2VJ3OKHVUWr98pE7kKdFbaAps0zDtiYwY0qJ+nA6JBKyu9od4yUwiUgJCA6WuRRzydwNfuVEQghIvIDCFLB1IaZyS+gZpEFEgb5BdQMsmjCICeBkZBZYB2Ss9vETyCX9H4mZ4HeyCKgJ7IYOIO0GTinrhZVQK6aeSbTu5v+taMaCMAg+a9y1nc2drpWjxcAAAD//5aIUZAAAAAGSURBVAMA7GtAR3aIKhkAAAAASUVORK5CYII=",
                  width: 48,
                  height: 48,
                });
              },
            })
          ),
          ol = {
            width: 286,
            height: 78,
            borderRadius: 300,
            gap: 10,
            color: 791621631,
            display: "flex",
            flexDirection: "row",
            justifyContent: "center",
            alignItems: "center",
            $focus: { color: 3978044671 },
          },
          sl = { fontFamily: "Inter", fontWeight: 600, fontSize: 20, lineHeight: 1, letterSpacing: 0.08 },
          ul = e =>
            zr(Zr, {
              style: ol,
              get children() {
                return [
                  zr(Zr, {
                    src: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAASCAYAAABSO15qAAAA7ElEQVR4AaSQCxHCQAxE2ypAAjgACTgABRQFrQOKAloHVAFIwAE4AAfg4Hh7c2Wm9P+ZbJPcZTfJBR6fMSYyxqRgTjrIAkghjBRE4El+ADPiXqYJ/rsmMO+I7PCdJoG6IomeEbkAxXU19qxJwF7y24DWtboE4FtrXKuvgFS0itbS+yjWmTdEwBL4LYHWOuFHCYgnxDxwPGYCkQu8pwhkvu/nYwRutF9BjvGD3uAFIYS4Bg9ia30nOFKtrjm+ZF0CGndBxwR8SkyXNAlo3C0kjavYlVedBH77uOti3KvLW11AFxXuqcpA67jcV+wLAAD//znRRWQAAAAGSURBVAMAUnpQLAZjcHYAAAAASUVORK5CYII=",
                    width: 24,
                    height: 24,
                  }),
                  zr(ei, { style: sl, children: "WATCH NOW" }),
                ];
              },
            }),
          ll = { fontFamily: "Inter", fontWeight: 400, fontSize: 20, lineHeight: 29, letterSpacing: 0 },
          dl = () => {
            var e = mi().params,
              t = e.id,
              r = n(
                Kn(() => t, "movies" === e.mediaType ? el : nl),
                1,
              )[0],
              i = vi();
            (Ga(1920), Wa(1080), La(" "));
            var a = () => (i(-1), !0);
            return zr(Zr, {
              onBack: a,
              onBackspace: a,
              get children() {
                return zr(Cr, {
                  get when() {
                    return r();
                  },
                  get children() {
                    return zr(ba, {
                      width: 1083,
                      height: 700,
                      x: 69,
                      y: 65,
                      gap: 44,
                      display: "flex",
                      flexDirection: "column",
                      forwardFocus: 1,
                      get children() {
                        return [
                          zr(al, {}),
                          zr(Zr, {
                            width: 1083,
                            height: 592,
                            gap: 25,
                            display: "flex",
                            flexDirection: "column",
                            id: "data",
                            forwardFocus: 1,
                            autofocus: !0,
                            get children() {
                              return [
                                zr(Zr, {
                                  id: "metaData",
                                  width: 1083,
                                  height: 82,
                                  display: "flex",
                                  flexDirection: "column",
                                  get children() {
                                    return [
                                      zr(ei, { style: ll, children: "Drama" }),
                                      zr(ei, { style: ll, children: "98 Minutes" }),
                                      zr(ei, { style: ll, children: "US - 1987 - PG - IMDb: 7.7" }),
                                    ];
                                  },
                                }),
                                zr(Zr, {
                                  id: "generalData",
                                  width: 1083,
                                  height: 485,
                                  display: "flex",
                                  gap: 60,
                                  forwardFocus: 1,
                                  get children() {
                                    return [
                                      zr(Zr, {
                                        width: 325,
                                        height: 485,
                                        get src() {
                                          var e;
                                          return pu(
                                            null === (e = r()) || void 0 === e ? void 0 : e.poster_path,
                                            "w342",
                                          );
                                        },
                                      }),
                                      zr(Zr, {
                                        id: "baseInfo",
                                        width: 698,
                                        height: 435,
                                        gap: 37,
                                        display: "flex",
                                        flexDirection: "column",
                                        alignSelf: "center",
                                        forwardFocus: 2,
                                        get children() {
                                          return [
                                            zr(Zr, {
                                              id: "titleAndDescription",
                                              width: 698,
                                              height: 182,
                                              gap: 40,
                                              display: "flex",
                                              flexDirection: "column",
                                              get children() {
                                                return [
                                                  " ",
                                                  zr(ei, {
                                                    fontFamily: "Inter",
                                                    fontWeight: 600,
                                                    fontSize: 28,
                                                    letterSpacing: 0,
                                                    contain: "width",
                                                    get children() {
                                                      var e;
                                                      return null === (e = r()) || void 0 === e
                                                        ? void 0
                                                        : e.title;
                                                    },
                                                  }),
                                                  zr(ei, {
                                                    fontFamily: "Inter",
                                                    fontWeight: 600,
                                                    fontSize: 22,
                                                    lineHeight: 31,
                                                    letterSpacing: 0,
                                                    contain: "width",
                                                    maxLines: 4,
                                                    get children() {
                                                      var e;
                                                      return null === (e = r()) || void 0 === e
                                                        ? void 0
                                                        : e.overview;
                                                    },
                                                  }),
                                                ];
                                              },
                                            }),
                                            zr(Zr, {
                                              id: "castAndCrew",
                                              width: 698,
                                              height: 101,
                                              gap: 8,
                                              display: "flex",
                                              flexDirection: "column",
                                              get children() {
                                                return [
                                                  zr(Zr, {
                                                    display: "flex",
                                                    width: 698,
                                                    get children() {
                                                      return zr(ei, {
                                                        fontFamily: "Inter",
                                                        fontWeight: 400,
                                                        fontSize: 22,
                                                        contain: "width",
                                                        maxLines: 2,
                                                        children:
                                                          "Director: Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari",
                                                      });
                                                    },
                                                  }),
                                                  zr(Zr, {
                                                    display: "flex",
                                                    width: 698,
                                                    get children() {
                                                      return zr(ei, {
                                                        fontFamily: "Inter",
                                                        fontWeight: 400,
                                                        fontSize: 22,
                                                        contain: "width",
                                                        maxLines: 2,
                                                        children:
                                                          "Cast: Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari",
                                                      });
                                                    },
                                                  }),
                                                ];
                                              },
                                            }),
                                            zr(ul, {}),
                                          ];
                                        },
                                      }),
                                    ];
                                  },
                                }),
                              ];
                            },
                          }),
                        ];
                      },
                    });
                  },
                });
              },
            });
          };
        Qs(Ut, du.lightning);
        var cl,
          hl = ((cl = Ut.rendererOptions),
          (Br = (function (e, t = "app") {
            return (Nt = new vt(e, t));
          })(cl, "app")),
          (Ut.setActiveElement = _r),
          (Vr.lng = Br.root),
          (Vr.rendered = !0),
          Br.on("idle", () => {
            (($r = !0), Jr());
          }),
          { renderer: Br, rootNode: Vr, render: Hr }).render;
        (!(function (e) {
          var n,
            r = u(e);
          try {
            for (r.s(); !(n = r.n()).done; ) {
              var i = n.value;
              "webgl" !== Nt.stage.renderer.mode || !("type" in i) || ("msdf" !== i.type && "ssdf" !== i.type)
                ? "fontUrl" in i && Nt.stage.fontManager.addFontFace(new bt(i))
                : Nt.stage.fontManager.addFontFace(new Lt(i.type, t(t({}, i), {}, { stage: Nt.stage })));
            }
          } catch (a) {
            r.e(a);
          } finally {
            r.f();
          }
        })(oo),
          hl(
            () => (
              ((e, t) => {
                var n = Qn(),
                  r = Zn.bind(void 0, n);
                Ut.setActiveElement = e => r(() => _r(e));
                var i = cn({ userKeyMap: e, keyHoldOptions: t, ownerContext: r }),
                  a = i.cleanup,
                  o = i.focusPath;
                (Xn(
                  Yn(
                    Rr,
                    () => {
                      Di([...o()]);
                    },
                    { defer: !0 },
                  ),
                ),
                  Jn(a));
              })(du.keys, du.keyHoldOptions),
              zr(ka, {
                get children() {
                  return zr(ta, {
                    root: io,
                    get children() {
                      return [
                        zr(_a, {
                          path: "",
                          component: Iu,
                          get children() {
                            return [
                              zr(_a, {
                                id: "home",
                                path: "/",
                                component: Ku,
                                preload: xu,
                                shouldDispose: () => "/movies" === Ya(),
                              }),
                              zr(_a, {
                                id: "movies",
                                path: "/movies",
                                component: Zu,
                                preload: Tu,
                                shouldDispose: () => "/" === Ya(),
                              }),
                            ];
                          },
                        }),
                        zr(Ci, { path: "/:mediaType/details/:id", component: dl }),
                      ];
                    },
                  });
                },
              })
            ),
          ));
      },
    };
  });
})();
