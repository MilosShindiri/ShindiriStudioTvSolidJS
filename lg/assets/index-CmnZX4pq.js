var XL = Object.defineProperty;
var WL = (f, c, a) =>
  c in f ? XL(f, c, { enumerable: !0, configurable: !0, writable: !0, value: a }) : (f[c] = a);
var _ = (f, c, a) => WL(f, typeof c != "symbol" ? c + "" : c, a);
function MB() {
  (import.meta.url, import("_").catch(() => 1), (async function* () {})().next());
}
(function () {
  const c = document.createElement("link").relList;
  if (c && c.supports && c.supports("modulepreload")) return;
  for (const g of document.querySelectorAll('link[rel="modulepreload"]')) d(g);
  new MutationObserver(g => {
    for (const T of g)
      if (T.type === "childList")
        for (const S of T.addedNodes) S.tagName === "LINK" && S.rel === "modulepreload" && d(S);
  }).observe(document, { childList: !0, subtree: !0 });
  function a(g) {
    const T = {};
    return (
      g.integrity && (T.integrity = g.integrity),
      g.referrerPolicy && (T.referrerPolicy = g.referrerPolicy),
      g.crossOrigin === "use-credentials"
        ? (T.credentials = "include")
        : g.crossOrigin === "anonymous"
          ? (T.credentials = "omit")
          : (T.credentials = "same-origin"),
      T
    );
  }
  function d(g) {
    if (g.ep) return;
    g.ep = !0;
    const T = a(g);
    fetch(g.href, T);
  }
})();
const KL = "modulepreload",
  $L = function (f, c) {
    return new URL(f, c).href;
  },
  ME = {},
  YL = function (c, a, d) {
    let g = Promise.resolve();
    if (a && a.length > 0) {
      let S = function (O) {
        return Promise.all(
          O.map(D =>
            Promise.resolve(D).then(
              F => ({ status: "fulfilled", value: F }),
              F => ({ status: "rejected", reason: F }),
            ),
          ),
        );
      };
      const h = document.getElementsByTagName("link"),
        M = document.querySelector("meta[property=csp-nonce]"),
        P = (M == null ? void 0 : M.nonce) || (M == null ? void 0 : M.getAttribute("nonce"));
      g = S(
        a.map(O => {
          if (((O = $L(O, d)), O in ME)) return;
          ME[O] = !0;
          const D = O.endsWith(".css"),
            F = D ? '[rel="stylesheet"]' : "";
          if (!!d)
            for (let Q = h.length - 1; Q >= 0; Q--) {
              const ue = h[Q];
              if (ue.href === O && (!D || ue.rel === "stylesheet")) return;
            }
          else if (document.querySelector('link[href="'.concat(O, '"]').concat(F))) return;
          const $ = document.createElement("link");
          if (
            (($.rel = D ? "stylesheet" : KL),
            D || ($.as = "script"),
            ($.crossOrigin = ""),
            ($.href = O),
            P && $.setAttribute("nonce", P),
            document.head.appendChild($),
            D)
          )
            return new Promise((Q, ue) => {
              ($.addEventListener("load", Q),
                $.addEventListener("error", () => ue(new Error("Unable to preload CSS for ".concat(O)))));
            });
        }),
      );
    }
    function T(S) {
      const h = new Event("vite:preloadError", { cancelable: !0 });
      if (((h.payload = S), window.dispatchEvent(h), !h.defaultPrevented)) throw S;
    }
    return g.then(S => {
      for (const h of S || []) h.status === "rejected" && T(h.reason);
      return c().catch(T);
    });
  };
function qL(f, c = !1, a) {
  const d = {
      alpha: !0,
      antialias: !1,
      depth: !1,
      stencil: !0,
      desynchronized: !1,
      powerPreference: "high-performance",
      premultipliedAlpha: !0,
      preserveDrawingBuffer: !1,
    },
    g = f.getContext(c ? "webgl2" : "webgl", d) || f.getContext("experimental-webgl", d);
  if (!g) throw new Error("Unable to create WebGL context");
  return a
    ? new Proxy(g, {
        get(T, S) {
          const h = T[S];
          return typeof h == "function" ? (a.increment(String(S)), h.bind(T)) : h;
        },
      })
    : g;
}
function Oy(f, c, a) {
  const d = Math.trunc(f >>> 24),
    g = Math.trunc((f >>> 16) & 255),
    T = Math.trunc((f >>> 8) & 255),
    S = Math.trunc(f & 255),
    h = Math.trunc(c >>> 24),
    M = Math.trunc((c >>> 16) & 255),
    P = Math.trunc((c >>> 8) & 255),
    O = Math.trunc(c & 255),
    D = Math.round(h * a + d * (1 - a)),
    F = Math.round(M * a + g * (1 - a)),
    K = Math.round(P * a + T * (1 - a)),
    $ = Math.round(O * a + S * (1 - a));
  return ((D << 24) | (F << 16) | (K << 8) | $) >>> 0;
}
function JL(f, c) {
  const a = f >>> 24,
    d = (f >>> 16) & 255,
    g = (f >>> 8) & 255,
    T = Math.trunc((f & 255) * c);
  return ((a << 24) | (d << 16) | (g << 8) | T) >>> 0;
}
let II = !0;
function QL(f) {
  II = f === "webgl";
}
function kf(f, c, a = !1) {
  const d = ((f & 255) / 255) * c,
    g = II ? d : 1,
    T = Math.trunc((f >>> 24) * g),
    S = Math.trunc(((f >>> 16) & 255) * g),
    h = Math.trunc(((f >>> 8) & 255) * g),
    M = Math.trunc(d * 255);
  return a ? ((M << 24) | (h << 16) | (S << 8) | T) >>> 0 : ((T << 24) | (S << 16) | (h << 8) | M) >>> 0;
}
function Jf(f, c) {
  return Object.prototype.hasOwnProperty.call(f, c);
}
const ZL = !0;
let eb = 1;
function tb() {
  return eb++;
}
class ws {
  constructor() {
    _(this, "eventListeners", {});
  }
  on(c, a) {
    let d = this.eventListeners[c];
    (d || (d = []), d.push(a), (this.eventListeners[c] = d));
  }
  off(c, a) {
    const d = this.eventListeners[c];
    if (!d) return;
    if (!a) {
      delete this.eventListeners[c];
      return;
    }
    const g = d.indexOf(a);
    g >= 0 && d.splice(g, 1);
  }
  once(c, a) {
    const d = (g, T) => {
      (this.off(c, d), a(g, T));
    };
    this.on(c, d);
  }
  emit(c, a) {
    const d = this.eventListeners[c];
    d &&
      [...d].forEach(g => {
        g(this, a);
      });
  }
  removeAllListeners() {
    this.eventListeners = {};
  }
}
var Kn;
(function (f) {
  ((f[(f.generic = 0)] = "generic"),
    (f[(f.color = 1)] = "color"),
    (f[(f.image = 2)] = "image"),
    (f[(f.noise = 3)] = "noise"),
    (f[(f.renderToTexture = 4)] = "renderToTexture"),
    (f[(f.subTexture = 5)] = "subTexture"));
})(Kn || (Kn = {}));
const lh = class lh extends ws {
  constructor(a) {
    super();
    _(this, "txManager");
    _(this, "_dimensions", null);
    _(this, "_error", null);
    _(this, "state", "initial");
    _(this, "renderableOwners", []);
    _(this, "renderable", !1);
    _(this, "type", Kn.generic);
    _(this, "preventCleanup", !1);
    _(this, "ctxTexture");
    _(this, "textureData", null);
    _(this, "memUsed", 0);
    _(this, "retryCount", 0);
    _(this, "maxRetryCount");
    _(this, "createdAt", Date.now());
    _(this, "gracePeriodExpired", !1);
    ((this.txManager = a), (this.maxRetryCount = a.maxRetryCount));
  }
  get dimensions() {
    return this._dimensions;
  }
  get error() {
    return this._error;
  }
  isWithinStartupGracePeriod() {
    return this.gracePeriodExpired
      ? !1
      : Date.now() - this.createdAt >= lh.STARTUP_GRACE_PERIOD
        ? ((this.gracePeriodExpired = !0), !1)
        : !0;
  }
  canBeCleanedUp() {
    return !(
      this.preventCleanup ||
      this.isWithinStartupGracePeriod() ||
      this.renderable === !0 ||
      this.renderableOwners.length > 0
    );
  }
  setRenderableOwner(a, d) {
    var S, h;
    const g = this.renderableOwners.length,
      T = this.renderableOwners.indexOf(a);
    if (d === !0) {
      T === -1 && this.renderableOwners.push(a);
      const M = this.renderableOwners.length;
      g !== M &&
        M === 1 &&
        ((this.renderable = !0), (S = this.onChangeIsRenderable) == null || S.call(this, !0), this.load());
    } else {
      T !== -1 && this.renderableOwners.splice(T, 1);
      const M = this.renderableOwners.length;
      g !== M &&
        M === 0 &&
        ((this.renderable = !1), (h = this.onChangeIsRenderable) == null || h.call(this, !1));
    }
  }
  load() {
    this.retryCount > this.maxRetryCount || this.txManager.loadTexture(this);
  }
  loadCtxTexture() {
    return (
      this.ctxTexture === void 0 && (this.ctxTexture = this.txManager.renderer.createCtxTexture(this)),
      this.ctxTexture
    );
  }
  free() {
    var a;
    (a = this.ctxTexture) == null || a.free();
  }
  release() {
    var a;
    ((a = this.ctxTexture) == null || a.release(), (this.ctxTexture = void 0), this.freeTextureData());
  }
  destroy() {
    (this.state === "loaded" && this.free(), this.freeTextureData());
  }
  freeTextureData() {
    queueMicrotask(() => {
      this.textureData = null;
    });
  }
  setState(a, d) {
    if (this.state === a) return;
    let g = null;
    (a === "loaded"
      ? ((this._error = null),
        d !== void 0 &&
          "width" in d &&
          "height" in d &&
          d.width !== void 0 &&
          d.height !== void 0 &&
          (this._dimensions = d),
        (g = this._dimensions))
      : a === "failed"
        ? ((this._error = d),
          (g = this._error),
          (this.retryCount += 1),
          queueMicrotask(() => {
            this.release();
          }))
        : a === "loading"
          ? ((this._error = null), (this._dimensions = null))
          : (this._error = null),
      (this.state = a),
      this.emit(a, g));
  }
  async getTextureData() {
    return (
      this.textureData === null && (this.textureData = await this.getTextureSource()),
      this.textureData
    );
  }
  static makeCacheKey(a) {
    return !1;
  }
  static resolveDefaults(a) {
    return {};
  }
  retry() {
    (this.release(), (this.retryCount = 0), this.load());
  }
};
_(lh, "STARTUP_GRACE_PERIOD", 2e3);
let ro = lh;
const nb = /^(data|ftps?|https?):/,
  fh = f => {
    const c = f >>> 24,
      a = (f >>> 16) & 255,
      d = (f >>> 8) & 255,
      g = f & 255;
    return [c / 255, a / 255, d / 255, g / 255];
  };
function Ca(f, c, a, d, g) {
  return g ? ((g.x1 = f), (g.y1 = c), (g.x2 = a), (g.y2 = d), g) : { x1: f, y1: c, x2: a, y2: d };
}
function yy(f, c) {
  return f.x1 < c.x2 && f.x2 > c.x1 && f.y1 < c.y2 && f.y2 > c.y1;
}
function rb(f, c) {
  return c
    ? ((c.x = f.x1), (c.y = f.y1), (c.width = f.x2 - f.x1), (c.height = f.y2 - f.y1), c)
    : { x: f.x1, y: f.y1, width: f.x2 - f.x1, height: f.y2 - f.y1 };
}
function CI(f, c, a) {
  const d = Math.max(f.x, c.x),
    g = Math.max(f.y, c.y),
    T = Math.min(f.x + f.width, c.x + c.width) - d,
    S = Math.min(f.y + f.height, c.y + c.height) - g;
  return T > 0 && S > 0
    ? a
      ? ((a.x = d), (a.y = g), (a.width = T), (a.height = S), a)
      : { x: d, y: g, width: T, height: S }
    : a
      ? ((a.x = 0), (a.y = 0), (a.width = 0), (a.height = 0), a)
      : { x: 0, y: 0, width: 0, height: 0 };
}
function MI(f, c) {
  return c
    ? ((c.x = f.x), (c.y = f.y), (c.width = f.width), (c.height = f.height), c)
    : { x: f.x, y: f.y, width: f.width, height: f.height };
}
function ib(f, c) {
  return f === c
    ? !0
    : f === null || c === null
      ? !1
      : f.x === c.x && f.y === c.y && f.width === c.width && f.height === c.height;
}
function vy(f, c) {
  return f.x1 <= c.x2 && f.y1 <= c.y2 && f.x2 >= c.x1 && f.y2 >= c.y1;
}
function sb(f, c) {
  return f.x1 < c.x1 && f.x2 > c.x2 && f.y1 < c.y1 && f.y2 > c.y2;
}
function ob(f, c, a) {
  return !(f < a.x1 || f > a.x2 || c < a.y1 || c > a.y2);
}
function ab(f) {
  return f.x1 < f.x2 && f.y1 < f.y2;
}
function Uy(f, c) {
  return Ca(f.x1 - c[3], f.y1 - c[0], f.x2 + c[1], f.y2 + c[2]);
}
function ub(f) {
  if (self.location.protocol === "file:" && !nb.test(f)) {
    const a = self.location.pathname.split("/");
    a.pop();
    const d = a.join("/"),
      g = self.location.protocol + "//" + d;
    return (f.charAt(0) === "." && (f = f.slice(1)), f.charAt(0) === "/" && (f = f.slice(1)), g + "/" + f);
  }
  return new URL(f, self.location.href).href;
}
function xy(f) {
  return f.startsWith("data:") === !0;
}
function lb(f) {
  var M, P;
  f = f.replace(/^data:/, "");
  const c = ((M = f.match(/image\/[^;]+/)) == null ? void 0 : M[0]) || "",
    a = f.replace(/^[^,]+,/, ""),
    d = 1024,
    g = atob(a),
    T = g.length,
    S = Math.ceil(T / d),
    h = new Array(S);
  for (let O = 0; O < S; ++O) {
    const D = O * d,
      F = Math.min(D + d, T),
      K = new Array(F - D);
    for (let $ = D, Q = 0; $ < F; ++Q, ++$) K[Q] = (P = g[$]) == null ? void 0 : P.charCodeAt(0);
    h[O] = new Uint8Array(K);
  }
  return new Blob(h, { type: c });
}
class xn {
  constructor() {
    _(this, "ta");
    _(this, "tb");
    _(this, "tx");
    _(this, "tc");
    _(this, "td");
    _(this, "ty");
    _(this, "_floatArr", null);
    _(this, "mutation");
    ((this.ta = 0),
      (this.tb = 0),
      (this.tx = 0),
      (this.tc = 0),
      (this.td = 0),
      (this.ty = 0),
      (this.mutation = !0));
  }
  static get temp() {
    return cb;
  }
  static multiply(c, a, d) {
    const g = c.ta * a.ta + c.tb * a.tc,
      T = c.ta * a.tb + c.tb * a.td,
      S = c.ta * a.tx + c.tb * a.ty + c.tx,
      h = c.tc * a.ta + c.td * a.tc,
      M = c.tc * a.tb + c.td * a.td,
      P = c.tc * a.tx + c.td * a.ty + c.ty;
    return (
      d || (d = new xn()),
      (d.ta = g),
      (d.tb = T),
      (d.tx = S),
      (d.tc = h),
      (d.td = M),
      (d.ty = P),
      (d.mutation = !0),
      d
    );
  }
  static identity(c) {
    return (
      c || (c = new xn()),
      (c.ta = 1),
      (c.tb = 0),
      (c.tx = 0),
      (c.tc = 0),
      (c.td = 1),
      (c.ty = 0),
      (c.mutation = !0),
      c
    );
  }
  static translate(c, a, d) {
    return (
      d || (d = new xn()),
      (d.ta = 1),
      (d.tb = 0),
      (d.tx = c),
      (d.tc = 0),
      (d.td = 1),
      (d.ty = a),
      (d.mutation = !0),
      d
    );
  }
  static scale(c, a, d) {
    return (
      d || (d = new xn()),
      (d.ta = c),
      (d.tb = 0),
      (d.tx = 0),
      (d.tc = 0),
      (d.td = a),
      (d.ty = 0),
      (d.mutation = !0),
      d
    );
  }
  static rotate(c, a) {
    const d = Math.cos(c),
      g = Math.sin(c);
    return (
      a || (a = new xn()),
      (a.ta = d),
      (a.tb = -g),
      (a.tx = 0),
      (a.tc = g),
      (a.td = d),
      (a.ty = 0),
      (a.mutation = !0),
      a
    );
  }
  static copy(c, a) {
    return (
      a || (a = new xn()),
      (a.ta = c.ta),
      (a.tc = c.tc),
      (a.tb = c.tb),
      (a.td = c.td),
      (a.tx = c.tx),
      (a.ty = c.ty),
      (a.mutation = !0),
      a
    );
  }
  translate(c, a) {
    return (
      (this.tx = this.ta * c + this.tb * a + this.tx),
      (this.ty = this.tc * c + this.td * a + this.ty),
      (this.mutation = !0),
      this
    );
  }
  scale(c, a) {
    return (
      (this.ta = this.ta * c),
      (this.tb = this.tb * a),
      (this.tc = this.tc * c),
      (this.td = this.td * a),
      (this.mutation = !0),
      this
    );
  }
  rotate(c) {
    if (c === 0 || !((c % Math.PI) * 2)) return this;
    const a = Math.cos(c),
      d = Math.sin(c),
      g = this.ta * a + this.tb * d,
      T = this.tb * a - this.ta * d,
      S = this.tc * a + this.td * d,
      h = this.td * a - this.tc * d;
    return ((this.ta = g), (this.tb = T), (this.tc = S), (this.td = h), (this.mutation = !0), this);
  }
  multiply(c) {
    return xn.multiply(this, c, this);
  }
  getFloatArr() {
    return (
      this._floatArr || (this._floatArr = new Float32Array(9)),
      this.mutation &&
        ((this._floatArr[0] = this.ta),
        (this._floatArr[1] = this.tc),
        (this._floatArr[2] = 0),
        (this._floatArr[3] = this.tb),
        (this._floatArr[4] = this.td),
        (this._floatArr[5] = 0),
        (this._floatArr[6] = this.tx),
        (this._floatArr[7] = this.ty),
        (this._floatArr[8] = 1),
        (this.mutation = !1)),
      this._floatArr
    );
  }
}
const cb = new xn(),
  _f = 0,
  Pf = 2,
  Df = 4,
  Lf = 6,
  bf = 1,
  Nf = 3,
  Of = 5,
  Uf = 7;
class Ma {
  constructor(c) {
    _(this, "data");
    ((this.data = new Float32Array(8)),
      c &&
        ((this.data[_f] = c[_f]),
        (this.data[Pf] = c[Pf]),
        (this.data[Df] = c[Df]),
        (this.data[Lf] = c[Lf]),
        (this.data[bf] = c[bf]),
        (this.data[Nf] = c[Nf]),
        (this.data[Of] = c[Of]),
        (this.data[Uf] = c[Uf])));
  }
  static translate(c, a, d, g, T, S, h, M, P) {
    return (
      P || (P = new Ma()),
      (P.data[_f] = c),
      (P.data[Pf] = d),
      (P.data[Df] = T),
      (P.data[Lf] = h),
      (P.data[bf] = a),
      (P.data[Nf] = g),
      (P.data[Of] = S),
      (P.data[Uf] = M),
      P
    );
  }
  get x1() {
    return this.data[_f];
  }
  get x2() {
    return this.data[Pf];
  }
  get x3() {
    return this.data[Df];
  }
  get x4() {
    return this.data[Lf];
  }
  get y1() {
    return this.data[bf];
  }
  get y2() {
    return this.data[Nf];
  }
  get y3() {
    return this.data[Of];
  }
  get y4() {
    return this.data[Uf];
  }
}
const RI = (f, c, a, d) => {
    const g = 3 * f,
      T = 3 * (a - f) - g,
      S = 1 - g - T,
      h = 3 * c,
      M = 3 * (d - c) - h,
      P = 1 - h - M;
    return function (O) {
      if (O >= 1) return 1;
      if (O <= 0) return 0;
      let D = 0.5,
        F,
        K,
        $;
      for (let le = 0; le < 20; le++) {
        if (((F = D * (D * (D * S + T) + g)), ($ = O - F), $ > -1e-8 && $ < 1e-8))
          return D * (D * (D * P + M) + h);
        if (((K = D * (D * (3 * S) + 2 * T) + g), K > 1e-10 && K < 1e-10)) break;
        D += $ / K;
      }
      let Q = 0,
        ue = 1;
      for (let le = 0; le < 20; le++) {
        if (((D = 0.5 * (Q + ue)), (F = D * (D * (D * S + T) + g)), ($ = O - F), $ > -1e-8 && $ < 1e-8))
          return D * (D * (D * P + M) + h);
        $ < 0 ? (ue = D) : (Q = D);
      }
    };
  },
  zf = {},
  db = {
    ease: [0.25, 0.1, 0.25, 1],
    "ease-in": [0.42, 0, 1, 1],
    "ease-out": [0, 0, 0.58, 1],
    "ease-in-out": [0.42, 0, 0.58, 1],
    "ease-in-sine": [0.12, 0, 0.39, 0],
    "ease-out-sine": [0.12, 0, 0.39, 0],
    "ease-in-out-sine": [0.37, 0, 0.63, 1],
    "ease-in-cubic": [0.32, 0, 0.67, 0],
    "ease-out-cubic": [0.33, 1, 0.68, 1],
    "ease-in-out-cubic": [0.65, 0, 0.35, 1],
    "ease-in-circ": [0.55, 0, 1, 0.45],
    "ease-out-circ": [0, 0.55, 0.45, 1],
    "ease-in-out-circ": [0.85, 0, 0.15, 1],
    "ease-in-back": [0.36, 0, 0.66, -0.56],
    "ease-out-back": [0.34, 1.56, 0.64, 1],
    "ease-in-out-back": [0.68, -0.6, 0.32, 1.6],
  },
  Xf = f => f,
  fb = f => {
    const c = /-?\d*\.?\d+/g,
      a = f.match(c);
    if (a) {
      const [d, g, T, S] = a,
        h = parseFloat(d || "0.42"),
        M = parseFloat(g || "0"),
        P = parseFloat(T || "1"),
        O = parseFloat(S || "1"),
        D = RI(h, M, P, O);
      return ((zf[f] = D), D);
    }
    return (console.warn("Unknown cubic-bezier timing: " + f), Xf);
  },
  kI = f => {
    if (f === "linear") return Xf;
    if (zf[f] !== void 0) return zf[f] || Xf;
    if (f === "step-start") return () => 1;
    if (f === "step-end") return a => (a === 1 ? 1 : 0);
    const c = db[f];
    if (c !== void 0) {
      const [a, d, g, T] = c,
        S = RI(a, d, g, T);
      return ((zf[f] = S), S);
    }
    return f.startsWith("cubic-bezier") ? fb(f) : (console.warn("Unknown timing function: " + f), Xf);
  };
function RE(f) {
  return (f / 1024 / 1024).toFixed(2);
}
class hb extends ws {
  constructor(a, d, g) {
    var h, M, P, O, D, F;
    super();
    _(this, "node");
    _(this, "props");
    _(this, "settings");
    _(this, "progress", 0);
    _(this, "delayFor", 0);
    _(this, "delay", 0);
    _(this, "timingFunction");
    _(this, "propValuesMap", {});
    _(this, "dynPropValuesMap");
    ((this.node = a), (this.props = d));
    for (const K in d)
      if (K !== "shaderProps")
        (this.propValuesMap.props === void 0 && (this.propValuesMap.props = {}),
          (this.propValuesMap.props[K] = { start: a[K] || 0, target: d[K] }));
      else if (a.shader.type !== "DynamicShader") {
        this.propValuesMap.shaderProps = {};
        for (const $ in d.shaderProps)
          this.propValuesMap.shaderProps[$] = { start: a.shader.props[$], target: d.shaderProps[$] };
      } else {
        const $ = Object.keys(d.shaderProps),
          Q = $.length;
        this.dynPropValuesMap = {};
        for (let ue = 0; ue < Q; ue++) {
          const le = $[ue],
            J = d.shaderProps[le];
          this.dynPropValuesMap[le] = {};
          const oe = Object.entries(J),
            x = oe.length;
          for (let Y = 0; Y < x; Y++) {
            const [me, he] = oe[Y];
            this.dynPropValuesMap[le][me] = { start: a.shader.props[le][me], target: he };
          }
        }
      }
    const T = g.easing || "linear",
      S = (h = g.delay) != null ? h : 0;
    ((this.settings = {
      duration: (M = g.duration) != null ? M : 0,
      delay: S,
      easing: T,
      loop: (P = g.loop) != null ? P : !1,
      repeat: (O = g.repeat) != null ? O : 0,
      repeatDelay: (D = g.repeatDelay) != null ? D : 0,
      stopMethod: (F = g.stopMethod) != null ? F : !1,
    }),
      (this.timingFunction = kI(T)),
      (this.delayFor = S),
      (this.delay = S));
  }
  reset() {
    ((this.progress = 0), (this.delayFor = this.settings.delay || 0), this.update(0));
  }
  restoreValues(a, d) {
    const g = Object.entries(d),
      T = g.length;
    for (let S = 0; S < T; S++) {
      const [h, M] = g[S];
      a[h] = M.start;
    }
  }
  restore() {
    if (
      (this.reset(),
      this.propValuesMap.props !== void 0 && this.restoreValues(this.node, this.propValuesMap.props),
      this.propValuesMap.shaderProps !== void 0 &&
        this.restoreValues(this.node.shader.props, this.propValuesMap.shaderProps),
      this.dynPropValuesMap !== void 0)
    ) {
      const a = Object.keys(this.dynPropValuesMap),
        d = a.length;
      if (d > 0)
        for (let g = 0; g < d; g++) {
          const T = a[g];
          this.restoreValues(this.node.shader.props[T], this.dynPropValuesMap[T]);
        }
    }
  }
  reverseValues(a) {
    const d = Object.entries(a),
      g = d.length;
    for (let T = 0; T < g; T++) {
      const [S, h] = d[T];
      a[S] = { start: h.target, target: h.start };
    }
  }
  reverse() {
    if (
      ((this.progress = 0),
      this.propValuesMap.props !== void 0 && this.reverseValues(this.propValuesMap.props),
      this.propValuesMap.shaderProps !== void 0 && this.reverseValues(this.propValuesMap.shaderProps),
      this.dynPropValuesMap !== void 0)
    ) {
      const a = Object.keys(this.dynPropValuesMap),
        d = a.length;
      if (d > 0)
        for (let g = 0; g < d; g++) {
          const T = a[g];
          this.reverseValues(this.dynPropValuesMap[T]);
        }
    }
    this.settings.loop || (this.settings.stopMethod = !1);
  }
  applyEasing(a, d, g) {
    return (this.timingFunction(a) || a) * (g - d) + d;
  }
  updateValue(a, d, g, T) {
    if (this.progress === 1) return d;
    if (this.progress === 0) return g;
    const S = d;
    if (a.indexOf("color") !== -1) {
      if (g === S) return g;
      if (T) {
        const h = this.timingFunction(this.progress) || this.progress;
        return Oy(g, S, h);
      }
      return Oy(g, S, this.progress);
    }
    return T ? this.applyEasing(this.progress, g, S) : g + (S - g) * this.progress;
  }
  updateValues(a, d, g) {
    const T = Object.entries(d),
      S = T.length;
    for (let h = 0; h < S; h++) {
      const [M, P] = T[h];
      a[M] = this.updateValue(M, P.target, P.start, g);
    }
  }
  update(a) {
    const { duration: d, loop: g, easing: T, stopMethod: S } = this.settings,
      { delayFor: h } = this;
    if (this.node.destroyed) {
      this.emit("destroyed", {});
      return;
    }
    if (d === 0 && h === 0) {
      this.emit("finished", {});
      return;
    }
    if (this.delayFor > 0) {
      if (((this.delayFor -= a), this.delayFor >= 0)) return;
      ((a = -this.delayFor), (this.delayFor = 0));
    }
    if (d === 0) {
      this.emit("finished", {});
      return;
    }
    if (
      (this.progress === 0 && this.emit("animating", {}),
      (this.progress += a / d),
      this.progress > 1 && ((this.progress = g ? 0 : 1), (this.delayFor = this.delay), S))
    ) {
      this.emit("finished", {});
      return;
    }
    if (
      (this.propValuesMap.props !== void 0 && this.updateValues(this.node, this.propValuesMap.props, T),
      this.propValuesMap.shaderProps !== void 0 &&
        this.updateValues(this.node.shader.props, this.propValuesMap.shaderProps, T),
      this.dynPropValuesMap !== void 0)
    ) {
      const M = Object.keys(this.dynPropValuesMap),
        P = M.length;
      if (P > 0)
        for (let O = 0; O < P; O++) {
          const D = M[O];
          this.updateValues(this.node.shader.props[D], this.dynPropValuesMap[D], T);
        }
    }
    (this.progress < 1 && this.emit("tick", { progress: this.progress }),
      this.progress === 1 && this.emit("finished", {}));
  }
}
class pb extends ws {
  constructor(a, d) {
    super();
    _(this, "manager");
    _(this, "animation");
    _(this, "stoppedPromise");
    _(this, "stoppedResolve", null);
    _(this, "state");
    ((this.manager = a),
      (this.animation = d),
      (this.state = "stopped"),
      (this.stoppedPromise = Promise.resolve()),
      (this.onAnimating = this.onAnimating.bind(this)),
      (this.onFinished = this.onFinished.bind(this)),
      (this.onTick = this.onTick.bind(this)),
      (this.onDestroy = this.onDestroy.bind(this)));
  }
  start() {
    return (
      this.state !== "running" &&
        this.state !== "scheduled" &&
        (this.makeStoppedPromise(), this.registerAnimation(), (this.state = "scheduled")),
      this
    );
  }
  stop() {
    return (
      this.unregisterAnimation(),
      this.stoppedResolve !== null &&
        (this.stoppedResolve(), (this.stoppedResolve = null), this.emit("stopped", this)),
      this.animation.reset(),
      (this.state = "stopped"),
      this
    );
  }
  pause() {
    return (this.unregisterAnimation(), (this.state = "paused"), this);
  }
  restore() {
    return ((this.stoppedResolve = null), this.animation.restore(), this);
  }
  waitUntilStopped() {
    return this.stoppedPromise;
  }
  registerAnimation() {
    (this.animation.once("finished", this.onFinished),
      this.animation.on("animating", this.onAnimating),
      this.animation.on("tick", this.onTick),
      this.animation.on("destroyed", this.onDestroy),
      this.manager.registerAnimation(this.animation));
  }
  unregisterAnimation() {
    (this.manager.unregisterAnimation(this.animation),
      this.animation.off("finished", this.onFinished),
      this.animation.off("animating", this.onAnimating),
      this.animation.off("tick", this.onTick),
      this.animation.off("destroy", this.onDestroy));
  }
  makeStoppedPromise() {
    this.stoppedResolve === null &&
      (this.stoppedPromise = new Promise(a => {
        this.stoppedResolve = a;
      }));
  }
  onDestroy() {
    (this.unregisterAnimation(), (this.state = "stopped"));
  }
  onFinished() {
    const { loop: a, stopMethod: d } = this.animation.settings;
    if (d === "reverse") {
      (this.animation.once("finished", this.onFinished), this.animation.reverse());
      return;
    }
    a ||
      (this.unregisterAnimation(),
      this.stoppedResolve !== null && (this.stoppedResolve(), (this.stoppedResolve = null)),
      this.emit("stopped", this),
      (this.state = "stopped"));
  }
  onAnimating() {
    ((this.state = "running"), this.emit("animating", this));
  }
  onTick(a, d) {
    this.emit("tick", d);
  }
}
var Mn;
(function (f) {
  ((f[(f.Init = 0)] = "Init"),
    (f[(f.OutOfBounds = 2)] = "OutOfBounds"),
    (f[(f.InBounds = 4)] = "InBounds"),
    (f[(f.InViewport = 8)] = "InViewport"));
})(Mn || (Mn = {}));
const Ul = new Map();
Ul.set(Mn.Init, "init");
Ul.set(Mn.OutOfBounds, "outOfBounds");
Ul.set(Mn.InBounds, "inBounds");
Ul.set(Mn.InViewport, "inViewport");
var pe;
(function (f) {
  ((f[(f.Children = 1)] = "Children"),
    (f[(f.ScaleRotate = 2)] = "ScaleRotate"),
    (f[(f.Local = 4)] = "Local"),
    (f[(f.Global = 8)] = "Global"),
    (f[(f.Clipping = 16)] = "Clipping"),
    (f[(f.CalculatedZIndex = 32)] = "CalculatedZIndex"),
    (f[(f.ZIndexSortedChildren = 64)] = "ZIndexSortedChildren"),
    (f[(f.PremultipliedColors = 128)] = "PremultipliedColors"),
    (f[(f.WorldAlpha = 256)] = "WorldAlpha"),
    (f[(f.RenderState = 512)] = "RenderState"),
    (f[(f.IsRenderable = 1024)] = "IsRenderable"),
    (f[(f.RenderTexture = 2048)] = "RenderTexture"),
    (f[(f.ParentRenderTexture = 4096)] = "ParentRenderTexture"),
    (f[(f.RenderBounds = 8192)] = "RenderBounds"),
    (f[(f.None = 0)] = "None"),
    (f[(f.All = 14335)] = "All"));
})(pe || (pe = {}));
class jy extends ws {
  constructor(a, d) {
    super();
    _(this, "stage");
    _(this, "children", []);
    _(this, "_id", tb());
    _(this, "props");
    _(this, "updateType", pe.All);
    _(this, "childUpdateType", pe.None);
    _(this, "globalTransform");
    _(this, "scaleRotateTransform");
    _(this, "localTransform");
    _(this, "sceneGlobalTransform");
    _(this, "renderCoords");
    _(this, "sceneRenderCoords");
    _(this, "renderBound");
    _(this, "strictBound");
    _(this, "preloadBound");
    _(this, "clippingRect", { x: 0, y: 0, width: 0, height: 0, valid: !1 });
    _(this, "isRenderable", !1);
    _(this, "renderState", Mn.Init);
    _(this, "worldAlpha", 1);
    _(this, "premultipliedColorTl", 0);
    _(this, "premultipliedColorTr", 0);
    _(this, "premultipliedColorBl", 0);
    _(this, "premultipliedColorBr", 0);
    _(this, "calcZIndex", 0);
    _(this, "hasRTTupdates", !1);
    _(this, "parentHasRenderTexture", !1);
    _(this, "rttParent", null);
    _(this, "destroyed", !1);
    _(this, "onTextureLoaded", (a, d) => {
      var g, T;
      (this.autosizeNode(d),
        this.setUpdateType(pe.IsRenderable),
        this.stage.requestRender(),
        this.parentHasRenderTexture && this.notifyParentRTTOfUpdate(),
        d.width > 1 && d.height > 1 && this.emit("loaded", { type: "texture", dimensions: d }),
        ((T = (g = this.props.textureOptions) == null ? void 0 : g.resizeMode) == null ? void 0 : T.type) ===
          "contain" && this.setUpdateType(pe.Local));
    });
    _(this, "onTextureFailed", (a, d) => {
      ((this.isRenderable = !1),
        this.updateTextureOwnership(!1),
        this.setUpdateType(pe.IsRenderable),
        this.parentHasRenderTexture && this.notifyParentRTTOfUpdate(),
        this.texture !== null &&
          this.texture.retryCount > this.texture.maxRetryCount &&
          this.emit("failed", { type: "texture", error: d }));
    });
    _(this, "onTextureFreed", () => {
      ((this.isRenderable = !1),
        this.updateTextureOwnership(!1),
        this.setUpdateType(pe.IsRenderable),
        this.parentHasRenderTexture && this.notifyParentRTTOfUpdate(),
        this.emit("freed", { type: "texture" }));
    });
    ((this.stage = a),
      (this.props = { ...d, parent: null, texture: null, src: null, rtt: !1 }),
      (this.parent = d.parent),
      (this.texture = d.texture),
      (this.src = d.src),
      (this.rtt = d.rtt),
      (this.interactive = d.interactive),
      d.boundsMargin &&
        (this.boundsMargin = Array.isArray(d.boundsMargin)
          ? d.boundsMargin
          : [d.boundsMargin, d.boundsMargin, d.boundsMargin, d.boundsMargin]),
      this.setUpdateType(pe.ScaleRotate | pe.Local | pe.RenderBounds | pe.RenderState),
      this.stage.defaultTexture &&
        this.stage.defaultTexture.state !== "loaded" &&
        this.stage.defaultTexture.once("loaded", () => {
          this.setUpdateType(pe.IsRenderable);
        }));
  }
  loadTexture() {
    const { texture: a } = this.props;
    queueMicrotask(() => {
      var d, g;
      if (
        (this.textureOptions.preload === !0 && this.stage.txManager.loadTexture(a),
        (a.preventCleanup =
          (g = (d = this.props.textureOptions) == null ? void 0 : d.preventCleanup) != null ? g : !1),
        a.on("loaded", this.onTextureLoaded),
        a.on("failed", this.onTextureFailed),
        a.on("freed", this.onTextureFreed),
        a.state === "loaded"
          ? (a.dimensions, this.onTextureLoaded(a, a.dimensions))
          : a.state === "failed"
            ? (a.error, this.onTextureFailed(a, a.error))
            : a.state === "freed" && this.onTextureFreed(a),
        this.parentHasRenderTexture)
      ) {
        this.notifyParentRTTOfUpdate();
        return;
      }
    });
  }
  unloadTexture() {
    this.texture !== null &&
      (this.texture.off("loaded", this.onTextureLoaded),
      this.texture.off("failed", this.onTextureFailed),
      this.texture.off("freed", this.onTextureFreed),
      this.texture.setRenderableOwner(this._id, !1));
  }
  autosizeNode(a) {
    this.autosize && ((this.width = a.width), (this.height = a.height));
  }
  setUpdateType(a) {
    this.updateType |= a;
    const d = this.props.parent;
    d && (d.updateType & pe.Children) === 0 && d.setUpdateType(pe.Children);
  }
  sortChildren() {
    this.children.sort((a, d) => a.calcZIndex - d.calcZIndex);
  }
  updateScaleRotateTransform() {
    const { rotation: a, scaleX: d, scaleY: g } = this.props;
    if (a === 0 && d === 1 && g === 1) {
      this.scaleRotateTransform = void 0;
      return;
    }
    this.scaleRotateTransform = xn.rotate(a, this.scaleRotateTransform).scale(d, g);
  }
  updateLocalTransform() {
    var P, O;
    const { x: a, y: d, width: g, height: T } = this.props,
      S = this.props.mountX * g,
      h = this.props.mountY * T;
    if (this.scaleRotateTransform) {
      const D = this.props.pivotX * g,
        F = this.props.pivotY * T;
      this.localTransform = xn
        .translate(a - S + D, d - h + F, this.localTransform)
        .multiply(this.scaleRotateTransform)
        .translate(-D, -F);
    } else this.localTransform = xn.translate(a - S, d - h, this.localTransform);
    const M = this.props.texture;
    if (
      M &&
      M.dimensions &&
      ((O = (P = this.props.textureOptions) == null ? void 0 : P.resizeMode) == null ? void 0 : O.type) ===
        "contain"
    ) {
      let D = 1,
        F = 1,
        K = 0,
        $ = 0;
      const { width: Q, height: ue } = M.dimensions,
        le = Q / ue,
        J = g / T;
      if (le > J) {
        const oe = g / Q,
          x = ue * oe;
        (($ = (T - x) / 2), (F = x / T));
      } else {
        const oe = T / ue,
          x = Q * oe;
        ((K = (g - x) / 2), (D = x / g));
      }
      this.localTransform.translate(K, $).scale(D, F);
    }
    this.setUpdateType(pe.Global);
  }
  update(a, d) {
    (this.updateType & pe.ScaleRotate && (this.updateScaleRotateTransform(), this.setUpdateType(pe.Local)),
      this.updateType & pe.Local && (this.updateLocalTransform(), this.setUpdateType(pe.Global)));
    const g = this.props.parent;
    let T = null;
    if (
      (this.updateType & pe.RenderTexture && this.rtt && (this.hasRTTupdates = !0),
      this.updateType & pe.Global &&
        (this.localTransform,
        this.parentHasRenderTexture === !0 && (g == null ? void 0 : g.rtt) === !0
          ? ((this.globalTransform = xn.identity()),
            (this.sceneGlobalTransform = xn
              .copy((g == null ? void 0 : g.globalTransform) || xn.identity())
              .multiply(this.localTransform)))
          : this.parentHasRenderTexture === !0 && (g == null ? void 0 : g.rtt) === !1
            ? ((this.sceneGlobalTransform = xn
                .copy((g == null ? void 0 : g.sceneGlobalTransform) || this.localTransform)
                .multiply(this.localTransform)),
              (this.globalTransform = xn.copy(
                (g == null ? void 0 : g.globalTransform) || this.localTransform,
                this.globalTransform,
              )))
            : (this.globalTransform = xn.copy(
                (g == null ? void 0 : g.globalTransform) || this.localTransform,
                this.globalTransform,
              )),
        g !== null && this.globalTransform.multiply(this.localTransform),
        this.calculateRenderCoords(),
        this.updateBoundingRect(),
        this.setUpdateType(pe.RenderState | pe.Children),
        (this.childUpdateType |= pe.Global),
        this.clipping === !0 &&
          (this.setUpdateType(pe.Clipping | pe.RenderBounds), (this.childUpdateType |= pe.RenderBounds))),
      this.updateType & pe.RenderBounds &&
        (this.createRenderBounds(),
        this.setUpdateType(pe.RenderState),
        this.setUpdateType(pe.Children),
        (this.childUpdateType |= pe.RenderBounds)),
      this.updateType & pe.RenderState &&
        ((T = this.checkRenderBounds()),
        this.setUpdateType(pe.IsRenderable),
        T !== Mn.OutOfBounds && this.updateRenderState(T)),
      this.updateType & pe.WorldAlpha &&
        (g ? (this.worldAlpha = g.worldAlpha * this.props.alpha) : (this.worldAlpha = this.props.alpha),
        this.setUpdateType(pe.Children | pe.PremultipliedColors | pe.IsRenderable),
        (this.childUpdateType |= pe.WorldAlpha)),
      this.updateType & pe.IsRenderable && this.updateIsRenderable(),
      this.updateType & pe.Clipping &&
        (this.calculateClippingRect(d),
        this.setUpdateType(pe.Children),
        (this.childUpdateType |= pe.Clipping),
        (this.childUpdateType |= pe.RenderBounds)),
      this.updateType & pe.PremultipliedColors &&
        ((this.premultipliedColorTl = kf(this.props.colorTl, this.worldAlpha, !0)),
        this.props.colorTl === this.props.colorTr &&
        this.props.colorBl === this.props.colorBr &&
        this.props.colorTl === this.props.colorBl
          ? (this.premultipliedColorTr =
              this.premultipliedColorBl =
              this.premultipliedColorBr =
                this.premultipliedColorTl)
          : ((this.premultipliedColorTr = kf(this.props.colorTr, this.worldAlpha, !0)),
            (this.premultipliedColorBl = kf(this.props.colorBl, this.worldAlpha, !0)),
            (this.premultipliedColorBr = kf(this.props.colorBr, this.worldAlpha, !0)))),
      g !== null &&
        this.updateType & pe.CalculatedZIndex &&
        (this.calculateZIndex(), g.setUpdateType(pe.ZIndexSortedChildren)),
      this.props.strictBounds === !0 && this.renderState === Mn.OutOfBounds)
    ) {
      this.updateType &= ~pe.RenderBounds;
      return;
    }
    if (this.updateType & pe.Children && this.children.length > 0)
      for (let S = 0, h = this.children.length; S < h; S++) {
        const M = this.children[S];
        if ((M.setUpdateType(this.childUpdateType), M.updateType === 0)) continue;
        let P = this.clippingRect;
        (this.rtt === !0 && (P = { x: 0, y: 0, width: 0, height: 0, valid: !1 }), M.update(a, P));
      }
    (this.parentHasRenderTexture && this.updateType > 0 && this.notifyParentRTTOfUpdate(),
      this.updateType & pe.ZIndexSortedChildren && this.sortChildren(),
      T === Mn.OutOfBounds &&
        (this.updateRenderState(T),
        this.updateIsRenderable(),
        this.rtt === !0 && T === Mn.OutOfBounds && this.notifyChildrenRTTOfUpdate(T)),
      (this.updateType = 0),
      (this.childUpdateType = 0));
  }
  findParentRTTNode() {
    let a = this.parent;
    for (; a && !a.rtt; ) a = a.parent;
    return a;
  }
  getRTTParentRenderState() {
    const a = this.rttParent || this.findParentRTTNode();
    return a ? a.renderState : null;
  }
  notifyChildrenRTTOfUpdate(a) {
    for (const d of this.children)
      (d.updateRenderState(a), d.updateIsRenderable(), d.notifyChildrenRTTOfUpdate(a));
  }
  notifyParentRTTOfUpdate() {
    if (this.parent === null) return;
    const a = this.rttParent || this.findParentRTTNode();
    a &&
      ((a.hasRTTupdates = !0),
      a.setUpdateType(pe.RenderTexture),
      a.parentHasRenderTexture === !0 && a.notifyParentRTTOfUpdate());
  }
  checkRenderBounds() {
    return (
      this.renderBound,
      this.strictBound,
      this.preloadBound,
      vy(this.renderBound, this.strictBound)
        ? Mn.InViewport
        : vy(this.renderBound, this.preloadBound)
          ? Mn.InBounds
          : sb(this.renderBound, this.strictBound)
            ? Mn.InViewport
            : this.parent !== null && (this.props.width === 0 || this.props.height === 0)
              ? this.parent.renderState
              : Mn.OutOfBounds
    );
  }
  updateBoundingRect() {
    const a = this.sceneGlobalTransform || this.globalTransform,
      d = this.sceneRenderCoords || this.renderCoords,
      { tb: g, tc: T } = a,
      { x1: S, y1: h, x3: M, y3: P } = d;
    if (g === 0 || T === 0) this.renderBound = Ca(S, h, M, P, this.renderBound);
    else {
      const { x2: O, x4: D, y2: F, y4: K } = d;
      this.renderBound = Ca(
        Math.min(S, O, M, D),
        Math.min(h, F, P, K),
        Math.max(S, O, M, D),
        Math.max(h, F, P, K),
        this.renderBound,
      );
    }
  }
  createRenderBounds() {
    if ((this.stage, this.parent !== null && this.parent.strictBound !== void 0)) {
      const O = this.parent.strictBound;
      ((this.strictBound = Ca(O.x1, O.y1, O.x2, O.y2)),
        (this.preloadBound = Uy(this.strictBound, this.boundsMargin)));
    } else ((this.strictBound = this.stage.strictBound), (this.preloadBound = this.stage.preloadBound));
    if (
      this.props.clipping === !1 ||
      this.renderBound === void 0 ||
      vy(this.renderBound, this.strictBound) === !1
    )
      return;
    const { x: a, y: d, width: g, height: T } = this.props,
      { tx: S, ty: h } = this.sceneGlobalTransform || this.globalTransform || {},
      M = S != null ? S : a,
      P = h != null ? h : d;
    ((this.strictBound = Ca(M, P, M + g, P + T, this.strictBound)),
      (this.preloadBound = Uy(this.strictBound, this.boundsMargin)));
  }
  updateRenderState(a) {
    if (a === this.renderState) return;
    const d = this.renderState;
    this.renderState = a;
    const g = Ul.get(a);
    this.emit(g, { previous: d, current: a });
  }
  updateIsRenderable() {
    let a = !1,
      d = !1;
    if (this.checkBasicRenderability() === !1) {
      (this.updateTextureOwnership(!1), this.setRenderable(!1));
      return;
    }
    if (this.texture !== null) {
      if (this.texture.retryCount > this.texture.maxRetryCount) {
        (this.updateTextureOwnership(!1), this.setRenderable(!1));
        return;
      }
      ((d = !0), (a = this.texture.state === "loaded"));
    } else
      (this.hasShader() || this.hasColorProperties() === !0) &&
        this.hasDimensions() === !0 &&
        this.stage.defaultTexture &&
        this.stage.defaultTexture.state === "loaded" &&
        (a = !0);
    (this.updateTextureOwnership(d), this.setRenderable(a));
  }
  checkBasicRenderability() {
    return !(this.worldAlpha === 0 || this.isOutOfBounds() === !0);
  }
  setRenderable(a) {
    this.isRenderable = a;
  }
  updateTextureOwnership(a) {
    var d;
    (d = this.texture) == null || d.setRenderableOwner(this._id, a);
  }
  isOutOfBounds() {
    return this.renderState <= Mn.OutOfBounds;
  }
  hasDimensions() {
    return this.props.width !== 0 && this.props.height !== 0;
  }
  hasColorProperties() {
    return (
      this.props.color !== 0 ||
      this.props.colorTop !== 0 ||
      this.props.colorBottom !== 0 ||
      this.props.colorLeft !== 0 ||
      this.props.colorRight !== 0 ||
      this.props.colorTl !== 0 ||
      this.props.colorTr !== 0 ||
      this.props.colorBl !== 0 ||
      this.props.colorBr !== 0
    );
  }
  hasShader() {
    return this.props.shader !== null;
  }
  calculateRenderCoords() {
    const { width: a, height: d } = this,
      { tx: g, ty: T, ta: S, tb: h, tc: M, td: P } = this.globalTransform;
    if (h === 0 && M === 0) {
      const ue = g,
        le = g + a * S,
        J = T,
        oe = T + d * P;
      this.renderCoords = Ma.translate(ue, J, le, J, le, oe, ue, oe, this.renderCoords);
    } else
      this.renderCoords = Ma.translate(
        g,
        T,
        g + a * S,
        T + a * M,
        g + a * S + d * h,
        T + a * M + d * P,
        g + d * h,
        T + d * P,
        this.renderCoords,
      );
    if (this.sceneGlobalTransform === void 0) return;
    const { tx: O, ty: D, ta: F, tb: K, tc: $, td: Q } = this.sceneGlobalTransform;
    if (K === 0 && $ === 0) {
      const ue = O,
        le = O + a * F,
        J = D,
        oe = D + d * Q;
      this.sceneRenderCoords = Ma.translate(ue, J, le, J, le, oe, ue, oe, this.sceneRenderCoords);
    } else
      this.sceneRenderCoords = Ma.translate(
        O,
        D,
        O + a * F,
        D + a * $,
        O + a * F + d * K,
        D + a * $ + d * Q,
        O + d * K,
        D + d * Q,
        this.sceneRenderCoords,
      );
  }
  calculateClippingRect(a) {
    this.globalTransform;
    const { clippingRect: d, props: g, globalTransform: T } = this,
      { clipping: S } = g,
      h = T.tb !== 0 || T.tc !== 0;
    (S === !0 && h === !1
      ? ((d.x = T.tx),
        (d.y = T.ty),
        (d.width = this.width * T.ta),
        (d.height = this.height * T.td),
        (d.valid = !0))
      : (d.valid = !1),
      a.valid === !0 && d.valid === !0 ? CI(a, d, d) : a.valid === !0 && (MI(a, d), (d.valid = !0)));
  }
  calculateZIndex() {
    var S, h;
    const a = this.props,
      d = a.zIndex || 0,
      g = ((S = a.parent) == null ? void 0 : S.zIndex) || 0;
    let T = d;
    ((h = a.parent) != null && h.zIndexLocked && (T = d < g ? d : g), (this.calcZIndex = T));
  }
  destroy() {
    var a;
    if (this.destroyed !== !0) {
      for (
        this.destroyed = !0,
          this.unloadTexture(),
          this.clippingRect.valid = !1,
          this.isRenderable = !1,
          this.renderCoords = void 0,
          this.renderBound = void 0,
          this.strictBound = void 0,
          this.preloadBound = void 0,
          this.globalTransform = void 0,
          this.scaleRotateTransform = void 0,
          this.localTransform = void 0,
          this.props.texture = null,
          this.props.shader = this.stage.defShaderCtr;
        this.children.length > 0;
      )
        (a = this.children[0]) == null || a.destroy();
      ((this.parent = null), this.rtt && this.stage.renderer.removeRTTNode(this), this.removeAllListeners());
    }
  }
  renderQuads(a) {
    (this.parentHasRenderTexture &&
      (!a.renderToTextureActive || this.parentRenderTexture !== a.activeRttNode)) ||
      (this.globalTransform,
      this.renderCoords,
      a.addQuad({
        width: this.props.width,
        height: this.props.height,
        colorTl: this.premultipliedColorTl,
        colorTr: this.premultipliedColorTr,
        colorBl: this.premultipliedColorBl,
        colorBr: this.premultipliedColorBr,
        texture: this.texture || this.stage.defaultTexture,
        textureOptions: this.textureOptions,
        zIndex: this.zIndex,
        shader: this.shader.shader,
        shaderProps: this.shader.getResolvedProps(),
        alpha: this.worldAlpha,
        clippingRect: this.clippingRect,
        tx: this.globalTransform.tx,
        ty: this.globalTransform.ty,
        ta: this.globalTransform.ta,
        tb: this.globalTransform.tb,
        tc: this.globalTransform.tc,
        td: this.globalTransform.td,
        renderCoords: this.renderCoords,
        rtt: this.rtt,
        parentHasRenderTexture: this.parentHasRenderTexture,
        framebufferDimensions: this.framebufferDimensions,
      }));
  }
  get id() {
    return this._id;
  }
  get data() {
    return this.props.data;
  }
  set data(a) {
    this.props.data = a;
  }
  get x() {
    return this.props.x;
  }
  set x(a) {
    this.props.x !== a && ((this.props.x = a), this.setUpdateType(pe.Local));
  }
  get absX() {
    var a, d, g;
    return (
      this.props.x +
      -this.props.width * this.props.mountX +
      (((a = this.props.parent) == null ? void 0 : a.absX) ||
        ((g = (d = this.props.parent) == null ? void 0 : d.globalTransform) == null ? void 0 : g.tx) ||
        0)
    );
  }
  get absY() {
    var a, d;
    return (
      this.props.y +
      -this.props.height * this.props.mountY +
      ((d = (a = this.props.parent) == null ? void 0 : a.absY) != null ? d : 0)
    );
  }
  get y() {
    return this.props.y;
  }
  set y(a) {
    this.props.y !== a && ((this.props.y = a), this.setUpdateType(pe.Local));
  }
  get width() {
    return this.props.width;
  }
  set width(a) {
    this.props.width !== a &&
      ((this.props.width = a),
      this.setUpdateType(pe.Local),
      this.props.rtt &&
        ((this.texture = this.stage.txManager.createTexture("RenderTexture", {
          width: this.width,
          height: this.height,
        })),
        this.setUpdateType(pe.RenderTexture)));
  }
  get height() {
    return this.props.height;
  }
  set height(a) {
    this.props.height !== a &&
      ((this.props.height = a),
      this.setUpdateType(pe.Local),
      this.props.rtt &&
        ((this.texture = this.stage.txManager.createTexture("RenderTexture", {
          width: this.width,
          height: this.height,
        })),
        this.setUpdateType(pe.RenderTexture)));
  }
  get scale() {
    return this.scaleX;
  }
  set scale(a) {
    ((this.scaleX = a), (this.scaleY = a));
  }
  get scaleX() {
    return this.props.scaleX;
  }
  set scaleX(a) {
    this.props.scaleX !== a && ((this.props.scaleX = a), this.setUpdateType(pe.ScaleRotate));
  }
  get scaleY() {
    return this.props.scaleY;
  }
  set scaleY(a) {
    this.props.scaleY !== a && ((this.props.scaleY = a), this.setUpdateType(pe.ScaleRotate));
  }
  get mount() {
    return this.props.mount;
  }
  set mount(a) {
    (this.props.mountX !== a || this.props.mountY !== a) &&
      ((this.props.mountX = a),
      (this.props.mountY = a),
      (this.props.mount = a),
      this.setUpdateType(pe.Local));
  }
  get mountX() {
    return this.props.mountX;
  }
  set mountX(a) {
    this.props.mountX !== a && ((this.props.mountX = a), this.setUpdateType(pe.Local));
  }
  get mountY() {
    return this.props.mountY;
  }
  set mountY(a) {
    this.props.mountY !== a && ((this.props.mountY = a), this.setUpdateType(pe.Local));
  }
  get pivot() {
    return this.props.pivot;
  }
  set pivot(a) {
    (this.props.pivotX !== a || this.props.pivotY !== a) &&
      ((this.props.pivotX = a),
      (this.props.pivotY = a),
      (this.props.pivot = a),
      this.setUpdateType(pe.Local));
  }
  get pivotX() {
    return this.props.pivotX;
  }
  set pivotX(a) {
    this.props.pivotX !== a && ((this.props.pivotX = a), this.setUpdateType(pe.Local));
  }
  get pivotY() {
    return this.props.pivotY;
  }
  set pivotY(a) {
    this.props.pivotY !== a && ((this.props.pivotY = a), this.setUpdateType(pe.Local));
  }
  get rotation() {
    return this.props.rotation;
  }
  set rotation(a) {
    this.props.rotation !== a && ((this.props.rotation = a), this.setUpdateType(pe.ScaleRotate));
  }
  get alpha() {
    return this.props.alpha;
  }
  set alpha(a) {
    ((this.props.alpha = a),
      this.setUpdateType(pe.PremultipliedColors | pe.WorldAlpha | pe.Children | pe.IsRenderable),
      (this.childUpdateType |= pe.WorldAlpha));
  }
  get autosize() {
    return this.props.autosize;
  }
  set autosize(a) {
    this.props.autosize = a;
  }
  get boundsMargin() {
    var a, d, g;
    return (g =
      (d = this.props.boundsMargin) != null ? d : (a = this.parent) == null ? void 0 : a.boundsMargin) != null
      ? g
      : this.stage.boundsMargin;
  }
  set boundsMargin(a) {
    if (a !== this.props.boundsMargin) {
      if (a === null) this.props.boundsMargin = a;
      else {
        const d = Array.isArray(a) ? a : [a, a, a, a];
        this.props.boundsMargin = d;
      }
      this.setUpdateType(pe.RenderBounds);
    }
  }
  get clipping() {
    return this.props.clipping;
  }
  set clipping(a) {
    ((this.props.clipping = a),
      this.setUpdateType(pe.Clipping | pe.RenderBounds | pe.Children),
      (this.childUpdateType |= pe.Global | pe.Clipping));
  }
  get color() {
    return this.props.color;
  }
  set color(a) {
    ((this.colorTop = a),
      (this.colorBottom = a),
      (this.colorLeft = a),
      (this.colorRight = a),
      (this.props.color = a),
      this.setUpdateType(pe.PremultipliedColors));
  }
  get colorTop() {
    return this.props.colorTop;
  }
  set colorTop(a) {
    ((this.props.colorTl !== a || this.props.colorTr !== a) && ((this.colorTl = a), (this.colorTr = a)),
      (this.props.colorTop = a),
      this.setUpdateType(pe.PremultipliedColors));
  }
  get colorBottom() {
    return this.props.colorBottom;
  }
  set colorBottom(a) {
    ((this.props.colorBl !== a || this.props.colorBr !== a) && ((this.colorBl = a), (this.colorBr = a)),
      (this.props.colorBottom = a),
      this.setUpdateType(pe.PremultipliedColors));
  }
  get colorLeft() {
    return this.props.colorLeft;
  }
  set colorLeft(a) {
    ((this.props.colorTl !== a || this.props.colorBl !== a) && ((this.colorTl = a), (this.colorBl = a)),
      (this.props.colorLeft = a),
      this.setUpdateType(pe.PremultipliedColors));
  }
  get colorRight() {
    return this.props.colorRight;
  }
  set colorRight(a) {
    ((this.props.colorTr !== a || this.props.colorBr !== a) && ((this.colorTr = a), (this.colorBr = a)),
      (this.props.colorRight = a),
      this.setUpdateType(pe.PremultipliedColors));
  }
  get colorTl() {
    return this.props.colorTl;
  }
  set colorTl(a) {
    ((this.props.colorTl = a), this.setUpdateType(pe.PremultipliedColors));
  }
  get colorTr() {
    return this.props.colorTr;
  }
  set colorTr(a) {
    ((this.props.colorTr = a), this.setUpdateType(pe.PremultipliedColors));
  }
  get colorBl() {
    return this.props.colorBl;
  }
  set colorBl(a) {
    ((this.props.colorBl = a), this.setUpdateType(pe.PremultipliedColors));
  }
  get colorBr() {
    return this.props.colorBr;
  }
  set colorBr(a) {
    ((this.props.colorBr = a), this.setUpdateType(pe.PremultipliedColors));
  }
  get zIndexLocked() {
    return this.props.zIndexLocked || 0;
  }
  set zIndexLocked(a) {
    ((this.props.zIndexLocked = a), this.setUpdateType(pe.CalculatedZIndex | pe.Children));
    for (let d = 0, g = this.children.length; d < g; d++) this.children[d].setUpdateType(pe.CalculatedZIndex);
  }
  get zIndex() {
    return this.props.zIndex;
  }
  set zIndex(a) {
    ((this.props.zIndex = a), this.setUpdateType(pe.CalculatedZIndex | pe.Children));
    for (let d = 0, g = this.children.length; d < g; d++) this.children[d].setUpdateType(pe.CalculatedZIndex);
  }
  get parent() {
    return this.props.parent;
  }
  set parent(a) {
    const d = this.props.parent;
    if (d !== a) {
      if (((this.props.parent = a), d)) {
        const g = d.children.indexOf(this);
        (d.children.splice(g, 1), d.setUpdateType(pe.Children | pe.ZIndexSortedChildren));
      }
      (a &&
        (a.children.push(this),
        this.setUpdateType(pe.All),
        a.setUpdateType(pe.Children | pe.ZIndexSortedChildren),
        (a.rtt || a.parentHasRenderTexture) && this.applyRTTInheritance(a)),
        this.updateScaleRotateTransform(),
        this.setUpdateType(pe.RenderBounds | pe.Children));
    }
  }
  get preventCleanup() {
    return this.props.textureOptions.preventCleanup || !1;
  }
  set preventCleanup(a) {
    this.props.textureOptions.preventCleanup = a;
  }
  get rtt() {
    return this.props.rtt;
  }
  set rtt(a) {
    this.props.rtt !== a &&
      ((this.props.rtt = a),
      a === !0 ? (this.initRenderTexture(), this.markChildrenWithRTT()) : this.cleanupRenderTexture(),
      this.setUpdateType(pe.RenderTexture),
      this.parentHasRenderTexture === !0 && this.notifyParentRTTOfUpdate());
  }
  initRenderTexture() {
    ((this.texture = this.stage.txManager.createTexture("RenderTexture", {
      width: this.width,
      height: this.height,
    })),
      this.stage.renderer.renderToTexture(this));
  }
  cleanupRenderTexture() {
    (this.unloadTexture(), this.clearRTTInheritance(), (this.hasRTTupdates = !1), (this.texture = null));
  }
  markChildrenWithRTT(a = null) {
    const d = a || this;
    for (const g of d.children)
      (g.setUpdateType(pe.All), (g.parentHasRenderTexture = !0), g.markChildrenWithRTT());
  }
  applyRTTInheritance(a) {
    (a.rtt && a.setUpdateType(pe.RenderTexture), this.markChildrenWithRTT(a));
  }
  clearRTTInheritance() {
    if (!this.rtt)
      for (const a of this.children)
        ((a.parentHasRenderTexture = !1),
          (a.rttParent = null),
          a.setUpdateType(pe.All),
          a.clearRTTInheritance());
  }
  get shader() {
    return this.props.shader;
  }
  set shader(a) {
    this.props.shader !== a && ((this.props.shader = a), this.setUpdateType(pe.IsRenderable));
  }
  get src() {
    return this.props.src;
  }
  set src(a) {
    if (this.props.src !== a) {
      if (((this.props.src = a), !a)) {
        this.texture = null;
        return;
      }
      this.texture = this.stage.txManager.createTexture("ImageTexture", {
        src: a,
        width: this.props.width,
        height: this.props.height,
        type: this.props.imageType,
        sx: this.props.srcX,
        sy: this.props.srcY,
        sw: this.props.srcWidth,
        sh: this.props.srcHeight,
        maxRetryCount: this.props.textureOptions.maxRetryCount,
      });
    }
  }
  set imageType(a) {
    this.props.imageType !== a && (this.props.imageType = a);
  }
  get imageType() {
    return this.props.imageType || null;
  }
  get srcHeight() {
    return this.props.srcHeight;
  }
  set srcHeight(a) {
    this.props.srcHeight = a;
  }
  get srcWidth() {
    return this.props.srcWidth;
  }
  set srcWidth(a) {
    this.props.srcWidth = a;
  }
  get srcX() {
    return this.props.srcX;
  }
  set srcX(a) {
    this.props.srcX = a;
  }
  get srcY() {
    return this.props.srcY;
  }
  set srcY(a) {
    this.props.srcY = a;
  }
  get framebufferDimensions() {
    return this.parentHasRenderTexture && !this.rtt && this.parent
      ? this.parent.framebufferDimensions
      : { width: this.width, height: this.height };
  }
  get parentRenderTexture() {
    let a = this.parent;
    for (; a; ) {
      if (a.rtt) return a;
      a = a.parent;
    }
    return null;
  }
  get texture() {
    return this.props.texture;
  }
  set texture(a) {
    if (this.props.texture === a) return;
    (this.props.texture && this.unloadTexture(),
      (this.props.texture = a),
      a !== null && (a.setRenderableOwner(this._id, this.isRenderable), this.loadTexture()),
      this.setUpdateType(pe.IsRenderable));
  }
  set textureOptions(a) {
    this.props.textureOptions = a;
  }
  get textureOptions() {
    return this.props.textureOptions;
  }
  get strictBounds() {
    return this.props.strictBounds;
  }
  set strictBounds(a) {
    a !== this.props.strictBounds &&
      ((this.props.strictBounds = a),
      this.setUpdateType(pe.RenderBounds | pe.Children),
      (this.childUpdateType |= pe.RenderBounds | pe.Children));
  }
  set interactive(a) {
    ((this.props.interactive = a), a === !0 && this.stage.interactiveNodes.add(this));
  }
  get interactive() {
    return this.props.interactive;
  }
  animate(a, d) {
    const g = new hb(this, a, d);
    return new pb(this.stage.animationManager, g);
  }
  flush() {}
}
const gb = f => {
    let c = !1,
      a = 0;
    const d = (g = 0) => {
      const T = f.targetFrameTime;
      if (T > 0 && g - a < T) {
        const S = T - (g - a);
        setTimeout(() => requestAnimationFrame(d), S);
        return;
      }
      if (((a = g), f.updateFrameTime(), f.updateAnimations(), !f.hasSceneUpdates())) {
        (f.calculateFps(),
          T > 0
            ? setTimeout(() => requestAnimationFrame(d), Math.max(T, 16.666666666666668))
            : setTimeout(() => requestAnimationFrame(d), 16.666666666666668),
          c || (f.eventBus.emit("idle"), (c = !0)),
          f.txMemManager.checkCleanup() === !0 && f.txMemManager.cleanup(),
          f.flushFrameEvents());
        return;
      }
      if (((c = !1), f.drawFrame(), f.flushFrameEvents(), T > 0)) {
        const S = Math.max(0, T - (performance.now() - g));
        setTimeout(() => requestAnimationFrame(d), S);
      } else requestAnimationFrame(d);
    };
    requestAnimationFrame(d);
  },
  Wf = () => (performance ? performance.now() : Date.now());
class mb {
  constructor() {
    _(this, "activeAnimations", new Set());
  }
  registerAnimation(c) {
    this.activeAnimations.add(c);
  }
  unregisterAnimation(c) {
    this.activeAnimations.delete(c);
  }
  update(c) {
    this.activeAnimations.forEach(a => {
      a.update(c);
    });
  }
}
function yb() {
  function f(a) {
    return a.indexOf("image/png") !== -1;
  }
  function c(a, d, g, T, S, h, M) {
    return new Promise(function (P, O) {
      var D = new XMLHttpRequest();
      (D.open("GET", a, !0),
        (D.responseType = "blob"),
        (D.onload = function () {
          if (D.status !== 200 && D.status !== 0)
            return O(new Error("Failed to load image: " + D.statusText));
          var F = D.response;
          (d !== void 0 || f(F.type),
            createImageBitmap(F)
              .then(function (K) {
                P({ data: K, premultiplyAlpha: d });
              })
              .catch(function (K) {
                O(K);
              }));
        }),
        (D.onerror = function () {
          O(new Error("Network error occurred while trying to fetch the image."));
        }),
        D.send());
    });
  }
  self.onmessage = a => {
    var d = a.data.src,
      g = a.data.id,
      T = a.data.premultiplyAlpha;
    (a.data.sx,
      a.data.sy,
      a.data.sw,
      a.data.sh,
      c(d, T)
        .then(function (S) {
          self.postMessage({ id: g, src: d, data: S }, [S.data]);
        })
        .catch(function (S) {
          self.postMessage({ id: g, src: d, error: S.message });
        }));
  };
}
class vb {
  constructor(c, a) {
    _(this, "imageWorkersEnabled", !0);
    _(this, "messageManager", {});
    _(this, "workers", []);
    _(this, "workerIndex", 0);
    _(this, "nextId", 0);
    ((this.workers = this.createWorkers(c, a)),
      this.workers.forEach(d => {
        d.onmessage = this.handleMessage.bind(this);
      }));
  }
  handleMessage(c) {
    const { id: a, data: d, error: g } = c.data,
      T = this.messageManager[a];
    if (T) {
      const [S, h] = T;
      (delete this.messageManager[a], g ? h(new Error(g)) : S(d));
    }
  }
  createWorkers(c = 1, a) {
    let d = "(".concat(yb.toString(), ")()");
    (a.options === !0 &&
      (d = d.replace(
        "var supportsOptionsCreateImageBitmap = false;",
        "var supportsOptionsCreateImageBitmap = true;",
      )),
      a.full === !0 &&
        ((d = d.replace(
          "var supportsOptionsCreateImageBitmap = false;",
          "var supportsOptionsCreateImageBitmap = true;",
        )),
        (d = d.replace(
          "var supportsFullCreateImageBitmap = false;",
          "var supportsFullCreateImageBitmap = true;",
        ))),
      (d = d.replace('"use strict";', "")));
    const g = new Blob([d], { type: "application/javascript" }),
      T = (self.URL ? URL : webkitURL).createObjectURL(g),
      S = [];
    for (let h = 0; h < c; h++) S.push(new Worker(T));
    return S;
  }
  getNextWorker() {
    const c = this.workers[this.workerIndex];
    return ((this.workerIndex = (this.workerIndex + 1) % this.workers.length), c);
  }
  getImage(c, a, d, g, T, S) {
    return new Promise((h, M) => {
      try {
        if (this.workers) {
          const P = this.nextId++;
          this.messageManager[P] = [h, M];
          const O = this.getNextWorker();
          O && O.postMessage({ id: P, src: c, premultiplyAlpha: a, sx: d, sy: g, sw: T, sh: S });
        }
      } catch (P) {
        M(P);
      }
    });
  }
}
const Ml = class Ml extends ro {
  constructor(a, d) {
    super(a);
    _(this, "type", Kn.color);
    _(this, "props");
    this.props = Ml.resolveDefaults(d);
  }
  get color() {
    return this.props.color;
  }
  set color(a) {
    this.props.color = a;
  }
  async getTextureSource() {
    const a = new Uint8Array(4);
    return (
      this.color === 4294967295
        ? ((a[0] = 255), (a[1] = 255), (a[2] = 255), (a[3] = 255))
        : ((a[0] = (this.color >> 16) & 255),
          (a[1] = (this.color >> 8) & 255),
          (a[2] = this.color & 255),
          (a[3] = (this.color >>> 24) & 255)),
      { data: a, premultiplyAlpha: !0 }
    );
  }
  static makeCacheKey(a) {
    const d = Ml.resolveDefaults(a);
    return "ColorTexture,".concat(d.color);
  }
  static resolveDefaults(a) {
    return { color: a.color || 4294967295 };
  }
};
_(Ml, "z$__type__Props");
let Qf = Ml;
function xb(f) {
  return /\.(ktx|pvr)$/.test(f);
}
const Tb = 55727696,
  Sb = {
    0: 35841,
    1: 35843,
    2: 35840,
    3: 35842,
    6: 36196,
    7: 33776,
    8: 33778,
    9: 33778,
    10: 33779,
    11: 33779,
  },
  wb = 1554098963,
  Ab = { "4x4": 37808, "5x5": 37809, "6x6": 37810, "8x8": 37811, "10x10": 37812, "12x12": 37813 },
  kE = [171, 75, 84, 88, 32, 49, 49, 187, 13, 10, 26, 10],
  _E = async f => {
    try {
      const c = await fetch(f);
      if (!c.ok)
        throw new Error("Failed to fetch compressed texture: ".concat(c.status, " ").concat(c.statusText));
      const a = await c.arrayBuffer();
      if (a.byteLength < 16)
        throw new Error(
          "File too small to be a valid compressed texture (".concat(
            a.byteLength,
            " bytes). Expected at least 16 bytes for header inspection.",
          ),
        );
      const d = new DataView(a),
        g = d.getUint32(0, !0);
      if (g === Tb) return kb(d);
      if (g === wb) return Eb(d);
      let T = !0;
      for (let S = 0; S < kE.length; S++)
        if (d.getUint8(S) !== kE[S]) {
          T = !1;
          break;
        }
      if (T === !0) return Cb(d);
      throw new Error("Unrecognized compressed texture format");
    } catch (c) {
      throw new Error("Failed to load compressed texture from ".concat(f, ": ").concat(c));
    }
  };
function PE(f, c) {
  return f.getUint8(c) + (f.getUint8(c + 1) << 8) + (f.getUint8(c + 2) << 16);
}
const Eb = async function (f) {
    const c = f.getUint8(4),
      a = f.getUint8(5),
      d = PE(f, 7),
      g = PE(f, 10);
    if (d === 0 || g === 0) throw new Error("Invalid ASTC texture dimensions: ".concat(d, "x").concat(g));
    const T = Math.ceil(d / c) * Math.ceil(g / a) * 16,
      S = f.byteLength - 16;
    if (T !== S) throw new Error("Invalid ASTC texture data size: expected ".concat(T, ", got ").concat(S));
    const h = Ab["".concat(c, "x").concat(a)];
    if (h === void 0) throw new Error("Unsupported ASTC block size: ".concat(c, "x").concat(a));
    const M = f.buffer,
      P = [];
    return (
      P.push(M.slice(16)),
      {
        data: { blockInfo: Pl[h], glInternalFormat: h, mipmaps: P, width: d, height: g, type: "astc" },
        premultiplyAlpha: !1,
      }
    );
  },
  Ib = function (f, c, a) {
    if (f.getExtension("WEBGL_compressed_texture_astc") === null)
      throw new Error("ASTC compressed textures not supported by this device");
    f.bindTexture(c);
    const { glInternalFormat: d, mipmaps: g, width: T, height: S } = a,
      h = new Uint8Array(g[0]);
    (f.compressedTexImage2D(0, d, T, S, 0, h),
      f.texParameteri(f.TEXTURE_WRAP_S, f.CLAMP_TO_EDGE),
      f.texParameteri(f.TEXTURE_WRAP_T, f.CLAMP_TO_EDGE),
      f.texParameteri(f.TEXTURE_MAG_FILTER, f.LINEAR),
      f.texParameteri(f.TEXTURE_MIN_FILTER, f.LINEAR));
  },
  Cb = async function (f) {
    const c = f.getUint32(12, !0),
      a = c === 67305985;
    if (a === !1 && c !== 16909060) throw new Error("Invalid KTX endianness value");
    const d = f.getUint32(16, a),
      g = f.getUint32(24, a);
    if (d !== 0 || g !== 0)
      throw new Error("KTX texture is not compressed (glType: ".concat(d, ", glFormat: ").concat(g, ")"));
    const T = f.getUint32(28, a);
    if (Pl[T] === void 0)
      throw new Error("Unsupported KTX compressed texture format: 0x".concat(T.toString(16)));
    const S = f.getUint32(36, a),
      h = f.getUint32(40, a);
    if (S === 0 || h === 0) throw new Error("Invalid KTX texture dimensions: ".concat(S, "x").concat(h));
    const M = f.getUint32(56, a);
    if (M === 0) throw new Error("KTX texture has no mipmap levels");
    const P = f.getUint32(60, a),
      O = [],
      D = f.buffer;
    let F = 64 + P;
    if (F > f.byteLength) throw new Error("Invalid KTX file: key/value data exceeds file size");
    for (let K = 0; K < M; K++) {
      const $ = f.getUint32(F, a);
      F += 4;
      const Q = F + $;
      (O.push(D.slice(F, Q)), (F = Q), F % 4 !== 0 && (F += 4 - (F % 4)));
    }
    return {
      data: { blockInfo: Pl[T], glInternalFormat: T, mipmaps: O, width: S, height: h, type: "ktx" },
      premultiplyAlpha: !1,
    };
  },
  Mb = function (f, c, a) {
    const { glInternalFormat: d, mipmaps: g, width: T, height: S, blockInfo: h } = a;
    f.bindTexture(c);
    const M = h.width,
      P = h.height;
    let O = T,
      D = S;
    for (let F = 0; F < g.length; F++) {
      let K = new Uint8Array(g[F]);
      const $ = Math.ceil(O / M) * M,
        Q = Math.ceil(D / P) * P,
        ue = Math.ceil(O / M) * Math.ceil(D / P) * h.bytes;
      if (K.byteLength < ue) {
        const le = new Uint8Array(ue);
        (le.set(K), (K = le));
      }
      (f.compressedTexImage2D(F, d, $, Q, 0, K), (O = Math.max(1, O >> 1)), (D = Math.max(1, D >> 1)));
    }
    (f.texParameteri(f.TEXTURE_WRAP_S, f.CLAMP_TO_EDGE),
      f.texParameteri(f.TEXTURE_WRAP_T, f.CLAMP_TO_EDGE),
      f.texParameteri(f.TEXTURE_MAG_FILTER, f.LINEAR),
      f.texParameteri(f.TEXTURE_MIN_FILTER, g.length > 1 ? f.LINEAR_MIPMAP_LINEAR : f.LINEAR));
  };
function Rb(f, c, a) {
  const d = a === 2 ? 16 : 8,
    g = 8,
    T = Math.max(f, d),
    S = Math.max(c, g);
  return (T * S * a) / 8;
}
const kb = async function (f) {
    const c = f.getUint32(8, !0),
      a = Sb[c];
    if (a === void 0) throw new Error("Unsupported PVR pixel format: 0x".concat(c.toString(16)));
    const d = f.getInt32(24, !0),
      g = f.getInt32(28, !0);
    if (g === 0 || d === 0) throw new Error("Invalid PVR texture dimensions: ".concat(g, "x").concat(d));
    const T = f.getInt32(44, !0),
      S = f.getUint32(48, !0),
      h = f.buffer;
    let M = 52 + S;
    if (M > h.byteLength) throw new Error("Invalid PVR file: metadata exceeds file size");
    const P = [],
      O = Pl[a];
    for (let D = 0; D < T; D++) {
      const F = f.getUint32(M, !0),
        K = h.byteLength - (M + 4);
      if (F > 0 && F <= K) {
        M += 4;
        const $ = M,
          Q = M + F;
        (P.push(h.slice($, Q)), (M = Q), (M = (M + 3) & -4));
        continue;
      }
      if (c === 0 || c === 1 || c === 2 || c === 3) {
        const $ = c === 0 || c === 1 ? 2 : 4,
          Q = Rb(g >> D, d >> D, $);
        (P.push(h.slice(M, M + Q)), (M += Q), (M = (M + 3) & -4));
        continue;
      }
      if (O !== void 0) {
        const $ = Math.ceil((g >> D) / O.width),
          Q = Math.ceil((d >> D) / O.height),
          ue = $ * Q * O.bytes;
        (P.push(h.slice(M, M + ue)), (M += ue), (M = (M + 3) & -4));
      }
    }
    return {
      data: { blockInfo: Pl[a], glInternalFormat: a, mipmaps: P, width: g, height: d, type: "pvr" },
      premultiplyAlpha: !1,
    };
  },
  _b = function (f, c, a) {
    const { glInternalFormat: d, mipmaps: g, width: T, height: S } = a;
    f.bindTexture(c);
    let h = T,
      M = S;
    for (let P = 0; P < g.length; P++)
      (f.compressedTexImage2D(P, d, h, M, 0, new Uint8Array(g[P])),
        (h = Math.max(1, h >> 1)),
        (M = Math.max(1, M >> 1)));
    (f.texParameteri(f.TEXTURE_WRAP_S, f.CLAMP_TO_EDGE),
      f.texParameteri(f.TEXTURE_WRAP_T, f.CLAMP_TO_EDGE),
      f.texParameteri(f.TEXTURE_MAG_FILTER, f.LINEAR),
      f.texParameteri(f.TEXTURE_MIN_FILTER, g.length > 1 ? f.LINEAR_MIPMAP_LINEAR : f.LINEAR));
  },
  Zs = { width: 4, height: 4, bytes: 8 },
  ga = { width: 4, height: 4, bytes: 16 },
  DE = { width: 5, height: 5, bytes: 16 },
  LE = { width: 6, height: 6, bytes: 16 },
  bE = { width: 8, height: 4, bytes: 8 },
  NE = { width: 8, height: 8, bytes: 16 },
  OE = { width: 10, height: 10, bytes: 16 },
  UE = { width: 12, height: 12, bytes: 16 },
  Pl = {
    33776: Zs,
    33777: Zs,
    33778: ga,
    33779: ga,
    36196: Zs,
    37492: Zs,
    37493: Zs,
    37496: ga,
    37497: ga,
    35840: Zs,
    35842: Zs,
    35841: bE,
    35843: bE,
    37808: ga,
    37840: ga,
    37809: DE,
    37841: DE,
    37810: LE,
    37842: LE,
    37811: NE,
    37843: NE,
    37812: OE,
    37844: OE,
    37813: UE,
    37845: UE,
  },
  Pb = { ktx: Mb, pvr: _b, astc: Ib };
function Db(f) {
  return /\.(svg)(\?.*)?$/.test(f);
}
const jE = (f, c, a, d, g, T, S) =>
  new Promise((h, M) => {
    const P = document.createElement("canvas"),
      O = P.getContext("2d");
    O.imageSmoothingEnabled = !0;
    const D = new Image();
    ((D.onload = () => {
      const F = d != null ? d : 0,
        K = g != null ? g : 0,
        $ = c || D.width,
        Q = a || D.height;
      ((P.width = $),
        (P.height = Q),
        O.drawImage(D, 0, 0, $, Q),
        h({ data: O.getImageData(F, K, T != null ? T : $, S != null ? S : Q), premultiplyAlpha: !1 }));
    }),
      (D.onerror = F => {
        M(F);
      }),
      (D.src = f));
  });
function _I(f, c = "") {
  return new Promise((a, d) => {
    const g = new XMLHttpRequest();
    ((g.responseType = c),
      (g.onreadystatechange = function () {
        g.readyState == XMLHttpRequest.DONE &&
          (g.status === 0 || g.status === 200 ? a(g.response) : d(g.statusText));
      }),
      g.open("GET", f, !0),
      g.send(null));
  });
}
const Rl = class Rl extends ro {
  constructor(a, d) {
    var T;
    const g = Rl.resolveDefaults(d);
    super(a);
    _(this, "type", Kn.image);
    _(this, "props");
    ((this.props = g),
      (this.maxRetryCount = (T = g.maxRetryCount) != null ? T : this.txManager.maxRetryCount));
  }
  hasAlphaChannel(a) {
    return a.indexOf("image/png") !== -1;
  }
  async loadImageFallback(a, d) {
    const g = new Image();
    return (
      typeof a == "string" && xy(a) === !1 && (g.crossOrigin = "anonymous"),
      new Promise((T, S) => {
        ((g.onload = () => {
          T({ data: g, premultiplyAlpha: d });
        }),
          (g.onerror = h => {
            const M =
              h instanceof Error
                ? h.message
                : h instanceof Event
                  ? "Image loading failed for ".concat(g.src)
                  : "Unknown image loading error";
            S(new Error("Image loading failed: ".concat(M)));
          }),
          a instanceof Blob ? (g.src = URL.createObjectURL(a)) : (g.src = a));
      })
    );
  }
  async createImageBitmap(a, d, g, T, S, h) {
    const M = d != null ? d : a.type.includes("image/png"),
      P = this.txManager.imageBitmapSupported;
    if (P.full === !0 && S !== null && h !== null)
      try {
        return {
          data: await createImageBitmap(a, g || 0, T || 0, S, h, {
            premultiplyAlpha: M ? "premultiply" : "none",
            colorSpaceConversion: "none",
            imageOrientation: "none",
          }),
          premultiplyAlpha: M,
        };
      } catch (O) {
        throw new Error("Failed to create image bitmap with crop: ".concat(O));
      }
    else if (P.basic === !0)
      try {
        return { data: await createImageBitmap(a), premultiplyAlpha: M };
      } catch (O) {
        throw new Error("Failed to create basic image bitmap: ".concat(O));
      }
    try {
      return {
        data: await createImageBitmap(a, {
          premultiplyAlpha: M ? "premultiply" : "none",
          colorSpaceConversion: "none",
          imageOrientation: "none",
        }),
        premultiplyAlpha: M,
      };
    } catch (O) {
      throw new Error("Failed to create image bitmap with options: ".concat(O));
    }
  }
  async loadImage(a) {
    const { premultiplyAlpha: d, sx: g, sy: T, sw: S, sh: h } = this.props;
    if (this.txManager.hasCreateImageBitmap === !0) {
      if (xy(a) === !1 && this.txManager.hasWorker === !0 && this.txManager.imageWorkerManager !== null)
        try {
          return this.txManager.imageWorkerManager.getImage(a, d, g, T, S, h);
        } catch (P) {
          throw new Error("Failed to load image via worker: ".concat(P));
        }
      let M;
      if (xy(a) === !0) M = lb(a);
      else
        try {
          M = await _I(a, "blob");
        } catch (P) {
          throw new Error("Failed to fetch image blob from ".concat(a, ": ").concat(P));
        }
      return this.createImageBitmap(M, d, g, T, S, h);
    }
    return this.loadImageFallback(a, d != null ? d : !0);
  }
  async getTextureSource() {
    var d;
    let a;
    try {
      a = await this.determineImageTypeAndLoadImage();
    } catch (g) {
      return (this.setState("failed", g), { data: null });
    }
    return a.data === null
      ? (this.setState("failed", Error("ImageTexture: No image data")), { data: null })
      : { data: a.data, premultiplyAlpha: (d = this.props.premultiplyAlpha) != null ? d : !0 };
  }
  determineImageTypeAndLoadImage() {
    const { src: a, premultiplyAlpha: d, type: g } = this.props;
    if (a === null) return { data: null };
    if (typeof a != "string") {
      if (a instanceof Blob)
        if (this.txManager.hasCreateImageBitmap === !0) {
          const { sx: S, sy: h, sw: M, sh: P } = this.props;
          return this.createImageBitmap(a, d, S, h, M, P);
        } else return this.loadImageFallback(a, d != null ? d : !0);
      return a instanceof ImageData ? { data: a, premultiplyAlpha: d } : { data: a(), premultiplyAlpha: d };
    }
    const T = ub(a);
    return g === "regular"
      ? this.loadImage(T)
      : g === "svg"
        ? jE(
            T,
            this.props.width,
            this.props.height,
            this.props.sx,
            this.props.sy,
            this.props.sw,
            this.props.sh,
          )
        : Db(a) === !0
          ? jE(
              T,
              this.props.width,
              this.props.height,
              this.props.sx,
              this.props.sy,
              this.props.sw,
              this.props.sh,
            )
          : g === "compressed" || xb(a) === !0
            ? _E(T)
            : this.loadImage(T);
  }
  static makeCacheKey(a) {
    var S, h, M;
    const d = Rl.resolveDefaults(a),
      g = d.key || d.src;
    if (typeof g != "string") return !1;
    let T = "";
    return (
      d.sh !== null &&
        d.sw !== null &&
        ((T += ","),
        (T += (S = d.sx) != null ? S : ""),
        (T += (h = d.sy) != null ? h : ""),
        (T += d.sw || ""),
        (T += d.sh || "")),
      "ImageTexture,"
        .concat(g, ",")
        .concat((M = d.premultiplyAlpha) != null ? M : "true")
        .concat(T)
    );
  }
  static resolveDefaults(a) {
    var d, g, T, S, h, M, P, O, D, F, K;
    return {
      src: (d = a.src) != null ? d : "",
      premultiplyAlpha: (g = a.premultiplyAlpha) != null ? g : !0,
      key: (T = a.key) != null ? T : null,
      type: (S = a.type) != null ? S : null,
      width: (h = a.width) != null ? h : null,
      height: (M = a.height) != null ? M : null,
      sx: (P = a.sx) != null ? P : null,
      sy: (O = a.sy) != null ? O : null,
      sw: (D = a.sw) != null ? D : null,
      sh: (F = a.sh) != null ? F : null,
      maxRetryCount: (K = a.maxRetryCount) != null ? K : null,
    };
  }
};
_(Rl, "z$__type__Props");
let Dl = Rl;
const kl = class kl extends ro {
  constructor(a, d) {
    super(a);
    _(this, "props");
    _(this, "type", Kn.noise);
    this.props = kl.resolveDefaults(d);
  }
  async getTextureSource() {
    const { width: a, height: d } = this.props,
      g = a * d * 4,
      T = new Uint8ClampedArray(g);
    for (let S = 0; S < g; S += 4) {
      const h = Math.floor(Math.random() * 256);
      ((T[S] = h), (T[S + 1] = h), (T[S + 2] = h), (T[S + 3] = 255));
    }
    return { data: new ImageData(T, a, d) };
  }
  static makeCacheKey(a) {
    if (a.cacheId === void 0) return !1;
    const d = kl.resolveDefaults(a);
    return "NoiseTexture,".concat(d.width, ",").concat(d.height, ",").concat(d.cacheId);
  }
  static resolveDefaults(a) {
    var d, g, T;
    return {
      width: (d = a.width) != null ? d : 128,
      height: (g = a.height) != null ? g : 128,
      cacheId: (T = a.cacheId) != null ? T : 0,
    };
  }
};
_(kl, "z$__type__Props");
let By = kl,
  Lb = 0;
const ch = class ch extends ro {
  constructor(a, d) {
    super(a);
    _(this, "props");
    _(this, "parentTexture");
    _(this, "type", Kn.subTexture);
    _(this, "subtextureId", "subtexture-".concat(Lb++));
    _(this, "onParentTxLoaded", () => {
      this.forwardParentTxState("loaded", { width: this.props.width, height: this.props.height });
    });
    _(this, "onParentTxFailed", (a, d) => {
      ((this.retryCount = this.parentTexture.retryCount - 1), this.forwardParentTxState("failed", d));
    });
    _(this, "onParentTxLoading", () => {
      this.forwardParentTxState("loading");
    });
    _(this, "onParentTxFreed", () => {
      this.forwardParentTxState("freed");
    });
    ((this.props = ch.resolveDefaults(d || {})),
      this.props.texture,
      this.props.texture instanceof Dl,
      (this.parentTexture = a.resolveParentTexture(this.props.texture)),
      this.renderableOwners.length > 0 && this.parentTexture.setRenderableOwner(this.subtextureId, !0),
      queueMicrotask(() => {
        const g = this.parentTexture;
        (g.state === "loaded" && g.dimensions
          ? this.onParentTxLoaded(g, g.dimensions)
          : g.state === "loading"
            ? this.onParentTxLoading()
            : g.state === "failed" && g.error
              ? this.onParentTxFailed(g, g.error)
              : g.state === "freed" && this.onParentTxFreed(),
          g.on("loading", this.onParentTxLoading),
          g.on("loaded", this.onParentTxLoaded),
          g.on("failed", this.onParentTxFailed),
          g.on("freed", this.onParentTxFreed));
      }));
  }
  forwardParentTxState(a, d) {
    this.setState(a, d);
  }
  onChangeIsRenderable(a) {
    this.parentTexture.setRenderableOwner(this.subtextureId, a);
  }
  async getTextureSource() {
    return { data: this.props };
  }
  static makeCacheKey(a) {
    return !1;
  }
  static resolveDefaults(a) {
    return { texture: a.texture, x: a.x || 0, y: a.y || 0, width: a.width || 0, height: a.height || 0 };
  }
};
_(ch, "z$__type__Props");
let Zf = ch;
const dh = class dh extends ro {
  constructor(a, d) {
    super(a);
    _(this, "props");
    _(this, "type", Kn.renderToTexture);
    this.props = dh.resolveDefaults(d || {});
  }
  get width() {
    return this.props.width;
  }
  set width(a) {
    this.props.width = a;
  }
  get height() {
    return this.props.height;
  }
  set height(a) {
    this.props.height = a;
  }
  async getTextureSource() {
    return { data: null, premultiplyAlpha: null };
  }
  static resolveDefaults(a) {
    return { width: a.width || 256, height: a.height || 256 };
  }
};
_(dh, "z$__type__Props");
let eh = dh;
async function bb() {
  var g, T, S;
  const f = new Uint8Array([
      137, 80, 78, 71, 13, 10, 26, 10, 0, 0, 0, 13, 73, 72, 68, 82, 0, 0, 0, 1, 0, 0, 0, 1, 1, 3, 0, 0, 0, 37,
      219, 86, 202, 0, 0, 0, 3, 80, 76, 84, 69, 0, 0, 0, 167, 122, 61, 218, 0, 0, 0, 1, 116, 82, 78, 83, 0,
      64, 230, 216, 102, 0, 0, 0, 10, 73, 68, 65, 84, 8, 215, 99, 96, 0, 0, 0, 2, 0, 1, 226, 33, 188, 51, 0,
      0, 0, 0, 73, 69, 78, 68, 174, 66, 96, 130,
    ]),
    c = { basic: !1, options: !1, full: !1 },
    a = new Blob([f], { type: "image/png" }),
    d = await createImageBitmap(a);
  ((g = d.close) == null || g.call(d), (c.basic = !0));
  try {
    const h = { premultiplyAlpha: "none" },
      M = await createImageBitmap(a, h);
    ((T = M.close) == null || T.call(M), (c.options = !0));
  } catch (h) {}
  try {
    const h = await createImageBitmap(a, 0, 0, 1, 1, { premultiplyAlpha: "none" });
    ((S = h.close) == null || S.call(h), (c.full = !0));
  } catch (h) {}
  return c;
}
var Vi;
(function (f) {
  ((f.MEMORY_THRESHOLD_EXCEEDED = "MEMORY_THRESHOLD_EXCEEDED"),
    (f.TEXTURE_DATA_NULL = "TEXTURE_DATA_NULL"),
    (f.TEXTURE_TYPE_NOT_REGISTERED = "TEXTURE_TYPE_NOT_REGISTERED"));
})(Vi || (Vi = {}));
const Nb = {
  [Vi.MEMORY_THRESHOLD_EXCEEDED]: "Memory threshold exceeded",
  [Vi.TEXTURE_DATA_NULL]: "Texture data is null",
  [Vi.TEXTURE_TYPE_NOT_REGISTERED]: "Texture type is not registered",
};
class Ty extends Error {
  constructor(a, d) {
    const g = Object.values(Vi).includes(a),
      T = g ? a : void 0;
    let S;
    g && T ? (S = d != null ? d : Nb[T]) : (S = String(a));
    super(S);
    _(this, "code");
    ((this.name = new.target.name), T && (this.code = T));
  }
}
class Ob extends ws {
  constructor(a, d) {
    super();
    _(this, "keyCache", new Map());
    _(this, "inverseKeyCache", new WeakMap());
    _(this, "txConstructors", {});
    _(this, "maxRetryCount");
    _(this, "priorityQueue", []);
    _(this, "uploadTextureQueue", []);
    _(this, "initialized", !1);
    _(this, "stage");
    _(this, "numImageWorkers");
    _(this, "imageWorkerManager", null);
    _(this, "hasCreateImageBitmap", !!self.createImageBitmap);
    _(this, "imageBitmapSupported", { basic: !1, options: !1, full: !1 });
    _(this, "hasWorker", !!self.Worker);
    _(this, "renderer");
    _(this, "frameTime", 0);
    const { numImageWorkers: g, createImageBitmapSupport: T, maxRetryCount: S } = d;
    ((this.stage = a),
      (this.numImageWorkers = g),
      (this.maxRetryCount = S),
      T === "auto"
        ? bb()
            .then(h => {
              this.initialize(h);
            })
            .catch(() => {
              (console.warn(
                "[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower.",
              ),
                (this.initialized = !0),
                this.emit("initialized"));
            })
        : this.initialize({ basic: T === "basic", options: T === "options", full: T === "full" }),
      this.registerTextureType("ImageTexture", Dl),
      this.registerTextureType("ColorTexture", Qf),
      this.registerTextureType("NoiseTexture", By),
      this.registerTextureType("SubTexture", Zf),
      this.registerTextureType("RenderTexture", eh));
  }
  registerTextureType(a, d) {
    this.txConstructors[a] = d;
  }
  initialize(a) {
    ((this.hasCreateImageBitmap = a.basic || a.options || a.full),
      (this.imageBitmapSupported = a),
      this.hasCreateImageBitmap ||
        console.warn(
          "[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower.",
        ),
      this.hasCreateImageBitmap && this.hasWorker && this.numImageWorkers > 0
        ? (this.imageWorkerManager = new vb(this.numImageWorkers, a))
        : console.warn(
            "[Lightning] Imageworker is 0 or not supported on this browser. Image loading will be slower.",
          ),
      (this.initialized = !0),
      this.emit("initialized"));
  }
  enqueueUploadTexture(a) {
    this.uploadTextureQueue.includes(a) === !1 && this.uploadTextureQueue.push(a);
  }
  createTexture(a, d) {
    let g;
    const T = this.txConstructors[a];
    if (!T) throw new Ty(Vi.TEXTURE_TYPE_NOT_REGISTERED, 'Texture type "'.concat(a, '" is not registered'));
    const S = T.makeCacheKey(d);
    return (
      S && this.keyCache.has(S)
        ? (g = this.keyCache.get(S))
        : ((g = new T(this, d)), S && this.initTextureToCache(g, S)),
      g
    );
  }
  async loadTexture(a, d) {
    if (a.type === Kn.subTexture || a.state === "loaded" || a.state === "loading") return;
    if (this.initialized === !1) {
      this.priorityQueue.push(a);
      return;
    }
    if (
      (a.setState("loading"),
      (await a.getTextureData().catch(S => (console.error(S), a.setState("failed"), null))) === null ||
        a.state === "failed")
    )
      return;
    if ((a.type !== Kn.image || d === !0) === !0) {
      await this.uploadTexture(a).catch(S => {
        (console.error("Failed to upload texture:", S), a.setState("failed"));
      });
      return;
    }
    this.enqueueUploadTexture(a);
  }
  async uploadTexture(a) {
    if (
      this.stage.txMemManager.doNotExceedCriticalThreshold === !0 &&
      this.stage.txMemManager.criticalCleanupRequested === !0
    ) {
      a.setState("failed", new Ty(Vi.MEMORY_THRESHOLD_EXCEEDED));
      return;
    }
    if (a.state === "failed" || a.state === "freed" || a.state === "loaded") return;
    if (a.textureData === null) {
      a.setState("failed", new Ty(Vi.TEXTURE_DATA_NULL, "Texture data is null, cannot upload texture"));
      return;
    }
    const d = a.loadCtxTexture();
    if (d !== null && d.state === "loaded") {
      a.setState("loaded");
      return;
    }
    await d.load();
  }
  isProcessingTexture(a) {
    return this.uploadTextureQueue.includes(a) === !0;
  }
  async processSome(a) {
    if (this.initialized === !1) return;
    const d = Wf();
    for (; this.priorityQueue.length > 0 && Wf() - d < a; ) {
      const g = this.priorityQueue.pop();
      try {
        (await g.getTextureData(), await this.uploadTexture(g));
      } catch (T) {
        console.error("Failed to process priority texture:", T);
      }
    }
    for (; this.uploadTextureQueue.length > 0 && Wf() - d < a; ) {
      const g = this.uploadTextureQueue.shift();
      try {
        await this.uploadTexture(g);
      } catch (T) {
        console.error("Failed to upload texture:", T);
      }
    }
  }
  hasUpdates() {
    return this.uploadTextureQueue.length > 0;
  }
  initTextureToCache(a, d) {
    const { keyCache: g, inverseKeyCache: T } = this;
    (g.set(d, a), T.set(a, d));
  }
  getTextureFromCache(a) {
    return this.keyCache.get(a);
  }
  removeTextureFromCache(a) {
    const { inverseKeyCache: d, keyCache: g } = this,
      T = d.get(a);
    T && g.delete(T);
  }
  resolveParentTexture(a) {
    if (!(a != null && a.props)) return a;
    const d = Dl.makeCacheKey(a.props),
      g = d ? this.getTextureFromCache(d) : void 0;
    return g != null ? g : a;
  }
}
const Ub = { normal: 400, bold: 700, bolder: 900, lighter: 100 },
  BE = f => (typeof f == "number" ? f : Ub[f] || 400);
function jb(f, c, a, d, g) {
  let T = BE(a);
  for (const S of f) {
    const h = S[c];
    if (!h) continue;
    if (h.size === 1)
      return (
        console.warn(
          "TrFontManager: Only one font face found for family: '".concat(
            c,
            "' - will be used for all weights and styles",
          ),
        ),
        h.values().next().value
      );
    const M = new Map();
    for (const O of h) {
      const D = BE(O.descriptors.weight);
      if (D === T && O.descriptors.style === d && O.descriptors.stretch === g) return O;
      M.set(D, O);
    }
    const P = "TrFontManager: No exact match: '"
      .concat(c, " Weight: ")
      .concat(T, " Style: ")
      .concat(d, " Stretch: ")
      .concat(g, "'");
    if ((console.error(P), T === 400 && M.has(500))) return M.get(500);
    if (T === 500 && M.has(400)) return M.get(400);
    if (T < 400) {
      for (; T > 0; ) {
        if (M.has(T)) return M.get(T);
        T -= 100;
      }
      T = 600;
    }
    for (; T < 1e3; ) {
      if (M.has(T)) return M.get(T);
      T += 100;
    }
    for (T = 500; T > 0; ) {
      if (M.has(T)) return M.get(T);
      T -= 100;
    }
  }
}
class Bb {
  constructor(c) {
    _(this, "textRenderers");
    _(this, "fontCache", new Map());
    this.textRenderers = c;
  }
  addFontFace(c) {
    for (const a in this.textRenderers) {
      const d = this.textRenderers[a];
      d && d.isFontFaceSupported(c) && d.addFontFace(c);
    }
  }
  resolveFontFace(c, a, d) {
    const { fontFamily: g, fontWeight: T, fontStyle: S, fontStretch: h } = a,
      M = "".concat(d, "_").concat(g, "_").concat(S, "_").concat(T, "_").concat(h);
    if (this.fontCache.has(M) === !0) return this.fontCache.get(M);
    const P = jb(c, g, T, S, h);
    return (P !== void 0 && this.fontCache.set(M, P), P);
  }
}
class PI {
  static makeCacheKey(c) {
    return !1;
  }
  static resolveDefaults(c) {
    return {};
  }
}
function FE(f, c, a) {
  const d = f.createShader(c);
  if (!d) {
    const T = f.getError();
    throw new Error(
      "Unable to create the shader: "
        .concat(c === f.VERTEX_SHADER ? "VERTEX_SHADER" : "FRAGMENT_SHADER", ".")
        .concat(T ? " WebGlContext Error: ".concat(T) : ""),
    );
  }
  if ((f.shaderSource(d, a), f.compileShader(d), !!f.getShaderParameter(d, f.COMPILE_STATUS))) return d;
  (console.error(f.getShaderInfoLog(d)), f.deleteShader(d));
}
function Fb(f, c, a) {
  const d = f.createProgram();
  if (!d) throw new Error("Unable to create program");
  if (
    (f.attachShader(d, c), f.attachShader(d, a), f.linkProgram(d), !!f.getProgramParameter(d, f.LINK_STATUS))
  )
    return d;
  (console.warn(f.getProgramInfoLog(d)), f.deleteProgram(d));
}
class oo extends PI {
  constructor(a) {
    super();
    _(this, "buffersBound", !1);
    _(this, "program");
    _(this, "vao");
    _(this, "renderer");
    _(this, "glw");
    _(this, "attributeLocations");
    _(this, "uniformLocations");
    _(this, "supportsIndexedTextures");
    const d = (this.renderer = a.renderer),
      g = (this.glw = this.renderer.glw);
    this.supportsIndexedTextures = a.supportsIndexedTextures || !1;
    const T = g.isWebGl2(),
      S = (T && a.webgl2Extensions) || (!T && a.webgl1Extensions) || [],
      h = T ? "2.0" : "1.0";
    S.forEach(Q => {
      if (!g.getExtension(Q))
        throw new Error(
          'Shader "'
            .concat(this.constructor.name, '" requires extension "')
            .concat(Q, '" for WebGL ')
            .concat(h, " but wasn't found"),
        );
    });
    const M = a.shaderSources || this.constructor.shaderSources;
    if (M)
      T &&
        M != null &&
        M.webGl2 &&
        ((M.fragment = M.webGl2.fragment), (M.vertex = M.webGl2.vertex), delete M.webGl2);
    else throw new Error('Shader "'.concat(this.constructor.name, '" is missing shaderSources.'));
    const P = d.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,
      O = M.vertex instanceof Function ? M.vertex(P) : M.vertex,
      D = M.fragment instanceof Function ? M.fragment(P) : M.fragment,
      F = FE(g, g.VERTEX_SHADER, O),
      K = FE(g, g.FRAGMENT_SHADER, D);
    if (!F || !K)
      throw new Error(
        "Unable to create the following shader(s): ".concat(
          [!F && "VERTEX_SHADER", !K && "FRAGMENT_SHADER"].filter(Boolean).join(" and "),
        ),
      );
    const $ = Fb(g, F, K);
    if (!$) throw new Error("Unable to create program");
    ((this.program = $),
      (this.attributeLocations = g.getAttributeLocations(this.program)),
      (this.uniformLocations = g.getUniformLocations(this.program)));
  }
  disableAttribute(a) {
    this.glw.disableVertexAttribArray(a);
  }
  disableAttributes() {
    const a = this.glw,
      d = this.attributeLocations.length;
    for (let g = 0; g < d; g++) a.disableVertexAttribArray(g);
  }
  canBatchShaderProps(a, d) {
    return !1;
  }
  bindRenderOp(a, d) {
    var h;
    (this.bindBufferCollection(a.buffers),
      a.textures.length > 0 && (h = a.textures[0]) != null && h.ctxTexture && this.bindTextures(a.textures));
    const { glw: g, parentHasRenderTexture: T, renderToTexture: S } = a;
    if (!(S && T)) {
      if (T) {
        const { width: M, height: P } = a.framebufferDimensions || {};
        (g.uniform1f(this.getUniformLocation("u_pixelRatio"), 1),
          g.uniform2f(this.getUniformLocation("u_resolution"), M != null ? M : 0, P != null ? P : 0));
      } else
        (g.uniform1f(this.getUniformLocation("u_pixelRatio"), a.options.pixelRatio),
          g.uniform2f(this.getUniformLocation("u_resolution"), g.canvas.width, g.canvas.height));
      if (d) {
        if (Jf(d, "$dimensions")) {
          let M = d.$dimensions;
          (M || (M = a.dimensions), g.uniform2f(this.getUniformLocation("u_dimensions"), M.width, M.height));
        }
        if (Jf(d, "$alpha")) {
          let M = d.$alpha;
          (M || (M = a.alpha), g.uniform1f(this.getUniformLocation("u_alpha"), M));
        }
        this.bindProps(d);
      }
    }
  }
  getUniformLocation(a) {
    return this.uniformLocations[a] || null;
  }
  bindBufferCollection(a) {
    const { glw: d } = this,
      g = this.attributeLocations,
      T = g.length;
    for (let S = 0; S < T; S++) {
      const h = g[S],
        M = a.getBuffer(h),
        P = a.getAttributeInfo(h);
      M === void 0 ||
        P === void 0 ||
        (d.enableVertexAttribArray(S),
        d.vertexAttribPointer(M, S, P.size, P.type, P.normalized, P.stride, P.offset));
    }
  }
  bindProps(a) {}
  bindTextures(a) {}
  attach() {
    (this.glw.useProgram(this.program),
      this.glw.isWebGl2() && this.vao && this.glw.bindVertexArray(this.vao));
  }
  detach() {
    this.disableAttributes();
  }
}
_(oo, "shaderSources");
class DI extends oo {
  constructor(c) {
    super({ renderer: c });
  }
  bindTextures(c) {
    const { glw: a } = this;
    (a.activeTexture(0), a.bindTexture(c[0].ctxTexture));
  }
}
_(DI, "shaderSources", {
  vertex:
    "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_nodeCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying vec2 v_nodeCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio;\n        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);\n\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_nodeCoordinate = a_nodeCoordinate;\n\n        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);\n        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;\n      }\n    ",
  fragment:
    "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    ",
});
class LI extends oo {
  constructor(a) {
    super({ renderer: a });
    _(this, "supportsIndexedTextures", !0);
  }
  bindTextures(a) {
    const { renderer: d, glw: g } = this;
    if (a.length > d.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)
      throw new Error(
        "DefaultShaderBatched: Cannot bind more than ".concat(
          d.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,
          " textures",
        ),
      );
    a.forEach((S, h) => {
      (g.activeTexture(h), g.bindTexture(S.ctxTexture));
    });
    const T = Array.from(Array(a.length).keys());
    this.glw.uniform1iv(this.getUniformLocation("u_textures[0]"), T);
  }
}
_(LI, "shaderSources", {
  vertex:
    "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",
  fragment: a =>
    "\n      #define txUnits "
      .concat(
        a,
        "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[",
      )
      .concat(a, "], int idx, vec2 uv) {\n        ")
      .concat(
        Array.from(Array(a).keys())
          .map(d =>
            "\n          "
              .concat(d !== 0 ? "else " : "", "if (idx == ")
              .concat(d, ") {\n            return texture2D(textures[")
              .concat(d, "], uv);\n          }\n        "),
          )
          .join(""),
        "\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    ",
      ),
});
class Rn {
  constructor(c) {
    _(this, "priority", 1);
    _(this, "name", "");
    _(this, "ref");
    _(this, "target");
    _(this, "passParameters", "");
    _(this, "declaredUniforms", "");
    _(this, "uniformInfo", {});
    const { ref: a, target: d, props: g = {} } = c;
    ((this.ref = a), (this.target = d));
    const T = {},
      S = [];
    let h = "";
    const M = this.constructor.uniforms || {};
    for (const P in M) {
      const O = M[P],
        D = O.type,
        F = "".concat(a, "_").concat(P);
      let K = "";
      (O.size && (K = "[".concat(O.size(g), "]")),
        S.push(F),
        (h += "uniform ".concat(D, " ").concat(F).concat(K, ";")),
        (T[P] = { name: F, uniform: M[P].method }));
    }
    ((this.passParameters = S.join(",")), (this.declaredUniforms = h), (this.uniformInfo = T));
  }
  static getEffectKey(c) {
    return "";
  }
  static getMethodParameters(c, a) {
    const d = [];
    for (const g in c) {
      const T = c[g];
      let S = "";
      (T.size && (S = "[".concat(T.size(a), "]")), d.push("".concat(T.type, " ").concat(g).concat(S)));
    }
    return d.join(",");
  }
  static resolveDefaults(c) {
    return {};
  }
  static makeEffectKey(c) {
    return !1;
  }
}
(_(Rn, "uniforms", {}), _(Rn, "methods"), _(Rn, "onShaderMask"), _(Rn, "onColorize"), _(Rn, "onEffectMask"));
const Sy = new Map(),
  Vb = (f, c) => {
    const a = JSON.stringify(f);
    if (Sy.has(a)) return Sy.get(a);
    f = f != null ? f : [];
    const d = [],
      g = f.length;
    let T = 0;
    for (; T < g; T++) {
      const { name: S, type: h, props: M } = f[T],
        P = { name: S, type: h, props: {} },
        O = c[h],
        D = O.resolveDefaults(M),
        F = O.uniforms,
        K = Object.keys(F),
        $ = K.length;
      let Q = 0;
      for (; Q < $; Q++) {
        const ue = K[Q],
          le = F[ue],
          J = {
            value: D[ue],
            programValue: void 0,
            method: le.method,
            updateOnBind: le.updateOnBind || !1,
            hasValidator: le.validator !== void 0,
            hasProgramValueUpdater: le.updateProgramValue !== void 0,
          },
          oe = (J.hasValidator && le.validator(D[ue], D)) || D[ue];
        (D[ue] !== oe && (J.validatedValue = oe),
          J.hasProgramValueUpdater && le.updateProgramValue(J),
          J.programValue === void 0 && (J.programValue = J.value),
          (P.props[ue] = J));
      }
      d.push(P);
    }
    return (Sy.set(a, d), d);
  },
  Fi = class Fi extends oo {
    constructor(a, d, g) {
      const T = Fi.createShader(d, g);
      super({ renderer: a, shaderSources: { vertex: T.vertex, fragment: T.fragment } });
      _(this, "effects", []);
      this.effects = T.effects;
    }
    bindTextures(a) {
      const { glw: d } = this;
      (d.activeTexture(0), d.bindTexture(a[0].ctxTexture));
    }
    bindUniformMethods(a) {
      const d = this.glw,
        g = a.effects,
        T = g.length;
      for (let S = 0; S < T; S++) {
        const h = this.effects[S].uniformInfo,
          M = g[S],
          P = Object.keys(M.props),
          O = P.length;
        for (let D = 0; D < O; D++) {
          const F = P[D],
            K = M.props[F].method,
            $ = this.getUniformLocation(h[F].name);
          if (
            K === "uniform2fv" ||
            K === "uniform2iv" ||
            K === "uniform3iv" ||
            K === "uniform4fv" ||
            K === "uniform4iv" ||
            K === "uniformMatrix2fv" ||
            K === "uniformMatrix3fv" ||
            K === "uniformMatrix4fv" ||
            K === "uniform1f" ||
            K === "uniform1fv" ||
            K === "uniform1i" ||
            K === "uniform1iv"
          ) {
            M.props[F].setUniformValue = function () {
              d[K]($, this.programValue);
            };
            continue;
          }
          if (K === "uniform2f" || K === "uniform2i") {
            M.props[F].setUniformValue = function () {
              d[K]($, this.programValue[0], this.programValue[1]);
            };
            continue;
          }
          if (K === "uniform3f" || K === "uniform3i") {
            M.props[F].setUniformValue = function () {
              d[K]($, this.programValue[0], this.programValue[1], this.programValue[2]);
            };
            continue;
          }
          if (K === "uniform4f" || K === "uniform4i") {
            M.props[F].setUniformValue = function () {
              d[K]($, this.programValue[0], this.programValue[1], this.programValue[2], this.programValue[3]);
            };
            continue;
          }
        }
      }
    }
    bindProps(a) {
      var S;
      const d = a.effects,
        g = d.length;
      let T = 0;
      for (; T < g; T++) {
        const h = d[T],
          M = Object.keys(h.props),
          P = M.length;
        let O = 0;
        for (; O < P; O++) {
          const D = M[O],
            F = h.props[D];
          if (F.updateOnBind === !0) {
            const K =
              (S = this.renderer.shManager.getRegisteredEffects()[h.type]) == null ? void 0 : S.uniforms[D];
            K == null || K.updateProgramValue(h.props[D], a);
          }
          F.setUniformValue();
        }
      }
    }
    canBatchShaderProps(a, d) {
      if (
        a.$alpha !== d.$alpha ||
        a.$dimensions.width !== d.$dimensions.width ||
        a.$dimensions.height !== d.$dimensions.height ||
        a.effects.length !== d.effects.length
      )
        return !1;
      const g = a.effects.length;
      let T = 0;
      for (; T < g; T++) {
        const S = a.effects[T],
          h = d.effects[T];
        if (S.type !== h.type) return !1;
        for (const M in S.props)
          if ((h.props && !h.props[M]) || S.props[M].value !== h.props[M].value) return !1;
      }
      return !0;
    }
    static createShader(a, d) {
      const g = {},
        T = {};
      let S = "";
      const h = [],
        M = [],
        P = a.effects.map($ => {
          const Q = d[$.type],
            ue = Q.getEffectKey($.props || {});
          g[ue] = g[ue] ? ++g[ue] : 1;
          const le = g[ue];
          le === 1 && M.push({ key: ue, type: $.type, props: $.props });
          const J = new Q({ ref: "".concat(ue).concat(le === 1 ? "" : le), target: ue, props: $.props });
          return ((S += J.declaredUniforms), h.push(...Object.values(J.uniformInfo)), J);
        });
      let O = "";
      M == null ||
        M.forEach($ => {
          var he;
          const Q = d[$.type],
            ue = Q.resolveDefaults((he = $.props) != null ? he : {}),
            le = [];
          for (const ve in Q.methods) {
            let I = ve;
            const re = Q.methods[ve];
            (T[ve] && T[ve] !== re && (I = Fi.resolveMethodDuplicate(ve, re, T)),
              (T[I] = re.replace("function", I)),
              le.push({ m: ve, cm: I }));
          }
          let J = Q.onShaderMask instanceof Function ? Q.onShaderMask(ue) : Q.onShaderMask,
            oe = Q.onColorize instanceof Function ? Q.onColorize(ue) : Q.onColorize,
            x = Q.onEffectMask instanceof Function ? Q.onEffectMask(ue) : Q.onEffectMask;
          le.forEach(ve => {
            const { m: I, cm: re } = ve,
              ee = new RegExp("\\$".concat(I), "g");
            (J && (J = J.replace(ee, re)), oe && (oe = oe.replace(ee, re)), x && (x = x.replace(ee, re)));
          });
          const Y = Q.getMethodParameters(Q.uniforms, ue),
            me = Y.length > 0 ? ", ".concat(Y) : "";
          (J &&
            (O += "\n        float fx_"
              .concat($.key, "_onShaderMask(float shaderMask ")
              .concat(me, ") {\n          ")
              .concat(J, "\n        }\n        ")),
            oe &&
              (O += "\n          vec4 fx_"
                .concat($.key, "_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor")
                .concat(me, ") {\n            ")
                .concat(oe, "\n          }\n        ")),
            x &&
              (O += "\n          vec4 fx_"
                .concat($.key, "_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor")
                .concat(me, ") {\n            ")
                .concat(x, "\n          }\n        ")));
        });
      let D = "";
      for (const $ in T) D += T[$];
      let F = "mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",
        K = "\n\n    ";
      for (let $ = 0; $ < P.length; $++) {
        const Q = P[$],
          ue = Q.passParameters.length > 0 ? ", ".concat(Q.passParameters) : "",
          le = d[Q.name];
        (le.onShaderMask &&
          (K += "\n        shaderMask = fx_"
            .concat(Q.target, "_onShaderMask(shaderMask ")
            .concat(ue, ");\n        ")),
          le.onColorize &&
            (K += "\n        maskColor = fx_"
              .concat(Q.target, "_onColorize(shaderMask, maskColor, shaderColor")
              .concat(ue, ");\n        ")),
          le.onEffectMask &&
            (F = "fx_".concat(Q.target, "_onEffectMask(shaderMask, maskColor, shaderColor").concat(ue, ")")));
        const J = P[$ + 1];
        (J === void 0 || d[J.name].onEffectMask) &&
          (K += "\n          shaderColor = ".concat(F, ";\n        "));
      }
      return { effects: P, uniforms: h, fragment: Fi.fragment(S, D, O, K), vertex: Fi.vertex() };
    }
    static resolveMethodDuplicate(a, d, g, T = 0) {
      const S = a + (T > 0 ? T : "");
      return g[S] && g[S] !== d ? this.resolveMethodDuplicate(a, d, g, ++T) : S;
    }
    static resolveDefaults(a, d) {
      var g;
      return {
        effects: Vb((g = a.effects) != null ? g : [], d),
        $dimensions: { width: 0, height: 0 },
        $alpha: 0,
      };
    }
    static makeCacheKey(a, d) {
      var T;
      let g = "";
      return (
        (T = a.effects) == null ||
          T.forEach(S => {
            const M = d[S.type].getEffectKey(S.props || {});
            g += ",".concat(M);
          }),
        "DynamicShader".concat(g)
      );
    }
  };
(_(Fi, "z$__type__Props"),
  _(
    Fi,
    "vertex",
    () =>
      "\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_nodeCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n    varying vec2 v_nodeCoordinate;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n      v_nodeCoordinate = a_nodeCoordinate;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  ",
  ),
  _(Fi, "fragment", (a, d, g, T) =>
    "\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    "
      .concat(
        a,
        "\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying vec2 v_nodeCoordinate;\n\n    ",
      )
      .concat(d, "\n\n    ")
      .concat(
        g,
        "\n\n    void main() {\n      vec2 p = v_nodeCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ",
      )
      .concat(T, "\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  "),
  ));
let Ra = Fi;
class Fy extends oo {
  constructor(c) {
    super({ renderer: c });
  }
  static resolveDefaults(c) {
    return { radius: c.radius || 10, $dimensions: { width: 0, height: 0 } };
  }
  bindTextures(c) {
    const { glw: a } = this;
    (a.activeTexture(0), a.bindTexture(c[0].ctxTexture));
  }
  bindProps(c) {
    const a = Math.min(c.$dimensions.width, c.$dimensions.height) / (2 * c.radius);
    this.glw.uniform1f(this.getUniformLocation("u_radius"), c.radius * Math.min(a, 1));
  }
  canBatchShaderProps(c, a) {
    return (
      c.radius === a.radius &&
      c.$dimensions.width === a.$dimensions.width &&
      c.$dimensions.height === a.$dimensions.height
    );
  }
}
(_(Fy, "z$__type__Props"),
  _(Fy, "shaderSources", {
    vertex:
      "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute vec2 a_nodeCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying vec2 v_nodeCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_nodeCoordinate = a_nodeCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",
    fragment:
      "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying vec2 v_nodeCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_nodeCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    ",
  }));
const Hb = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]),
  _l = class _l extends oo {
    constructor(c) {
      super({ renderer: c });
    }
    bindTextures(c) {
      const { glw: a } = this;
      (a.activeTexture(0), a.bindTexture(c[0].ctxTexture));
    }
    bindProps(c) {
      const a = _l.resolveDefaults(c);
      for (const d in a)
        if (d === "transform") this.glw.uniformMatrix3fv(this.getUniformLocation("u_transform"), a[d]);
        else if (d === "scrollY") this.glw.uniform1f(this.getUniformLocation("u_scrollY"), a[d]);
        else if (d === "color") {
          const g = fh(a.color);
          this.glw.uniform4fv(this.getUniformLocation("u_color"), g);
        } else
          d === "size"
            ? this.glw.uniform1f(this.getUniformLocation("u_size"), a[d])
            : d === "distanceRange"
              ? this.glw.uniform1f(this.getUniformLocation("u_distanceRange"), a[d])
              : d === "debug" && this.glw.uniform1i(this.getUniformLocation("u_debug"), a[d] ? 1 : 0);
    }
    static resolveDefaults(c = {}) {
      var a, d, g, T, S, h;
      return {
        transform: (a = c.transform) != null ? a : Hb,
        scrollY: (d = c.scrollY) != null ? d : 0,
        color: (g = c.color) != null ? g : 4294967295,
        size: (T = c.size) != null ? T : 16,
        distanceRange: (S = c.distanceRange) != null ? S : 1,
        debug: (h = c.debug) != null ? h : !1,
      };
    }
  };
(_(_l, "z$__type__Props"),
  _(_l, "shaderSources", {
    vertex:
      "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n\n        // Calculate screen space with pixel ratio\n        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n\n        gl_Position = vec4(screenSpace, 0.0, 1.0);\n        v_texcoord = a_textureCoordinate;\n\n      }\n    ",
    fragment:
      "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    ",
  }));
let Vy = _l;
const Da = f => {
    f.programValue === void 0 && (f.programValue = new Float32Array(4));
    const c = f.value,
      a = f.programValue;
    ((a[0] = (c >>> 24) / 255),
      (a[1] = ((c >>> 16) & 255) / 255),
      (a[2] = ((c >>> 8) & 255) / 255),
      (a[3] = (c & 255) / 255));
  },
  Gb = f => {
    const c = f.validatedValue || f.value;
    if (f.programValue instanceof Float32Array) {
      const a = f.programValue;
      ((a[0] = c[0]), (a[1] = c[1]));
    } else f.programValue = new Float32Array(c);
  },
  zb = f => {
    const c = f.validatedValue || f.value;
    if (f.programValue instanceof Float32Array) {
      const a = f.programValue;
      ((a[0] = c[0]), (a[1] = c[1]), (a[2] = c[2]), (a[3] = c[3]));
    } else f.programValue = new Float32Array(c);
  },
  bI = f => {
    const c = f.validatedValue || f.value;
    if (f.programValue instanceof Float32Array) {
      const a = c.length,
        d = f.programValue;
      for (let g = 0; g < a; g++) d[g] = c[g];
    } else f.programValue = new Float32Array(c);
  },
  uv = f => {
    const c = Array.isArray(f);
    if (c) {
      if (c && f.length === 4) return f;
      if (c && f.length === 2) return [f[0], f[1], f[0], f[1]];
      if (c && f.length === 3) return [f[0], f[1], f[2], f[0]];
    } else return [f, f, f, f];
    return [f[0], f[0], f[0], f[0]];
  },
  NI = (f, c) => {
    f.programValue === void 0 && (f.programValue = new Float32Array(4));
    const a = f.programValue,
      d = f.validatedValue || f.value;
    if (c === void 0 && f.$dimensions === void 0) {
      ((a[0] = d[0]), (a[1] = d[1]), (a[2] = d[2]), (a[3] = d[3]));
      return;
    }
    let g = f.$dimensions;
    if (c !== void 0) {
      const { $dimensions: F } = c;
      if (g !== void 0 && (g.width === F.width || g.height === F.height)) return;
      g === void 0 &&
        ((g = { width: F == null ? void 0 : F.width, height: F == null ? void 0 : F.height }),
        (f.$dimensions = g));
    }
    const { width: T, height: S } = g,
      [h, M, P, O] = d,
      D = Math.min(
        Math.min(
          Math.min(T / Math.max(T, h + M), T / Math.max(T, P + O)),
          Math.min(S / Math.max(S, h + P), S / Math.max(S, M + O)),
        ),
        1,
      );
    ((a[0] = h * D), (a[1] = M * D), (a[2] = P * D), (a[3] = O * D));
  };
class ya extends Rn {
  constructor() {
    super(...arguments);
    _(this, "name", "radius");
  }
  static getEffectKey() {
    return "radius";
  }
  static resolveDefaults(a) {
    var d;
    return { radius: (d = a.radius) != null ? d : 10 };
  }
}
(_(ya, "z$__type__Props"),
  _(ya, "uniforms", {
    radius: {
      value: 0,
      method: "uniform4fv",
      type: "vec4",
      updateOnBind: !0,
      validator: uv,
      updateProgramValue: NI,
    },
  }),
  _(ya, "methods", {
    fillMask: "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
    boxDist:
      "\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    ",
  }),
  _(
    ya,
    "onShaderMask",
    "\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_nodeCoordinate.x, 0.5) * step(v_nodeCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_nodeCoordinate.x) * step(v_nodeCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_nodeCoordinate.x) * step(0.5, v_nodeCoordinate.y);\n  r = r + radius[3] * step(v_nodeCoordinate.x, 0.5) * step(0.5, v_nodeCoordinate.y);\n  return $boxDist(v_nodeCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  ",
  ),
  _(ya, "onEffectMask", "\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  "));
class gl extends Rn {
  constructor() {
    super(...arguments);
    _(this, "name", "border");
  }
  static getEffectKey() {
    return "border";
  }
  static resolveDefaults(a) {
    var d, g;
    return { width: (d = a.width) != null ? d : 10, color: (g = a.color) != null ? g : 4294967295 };
  }
}
(_(gl, "z$__type__Props"),
  _(gl, "uniforms", {
    width: { value: 0, method: "uniform1f", type: "float" },
    color: { value: 4294967295, updateProgramValue: Da, method: "uniform4fv", type: "vec4" },
  }),
  _(
    gl,
    "onEffectMask",
    "\n  float intR = shaderMask + 1.0;\n  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);\n  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);\n  ",
  ),
  _(gl, "onColorize", "\n    return color;\n  "));
class va extends Rn {
  constructor() {
    super(...arguments);
    _(this, "name", "linearGradient");
  }
  static getEffectKey(a) {
    return a.colors.value
      ? "linearGradient".concat(a.colors.value.length)
      : "linearGradient".concat(a.colors.length);
  }
  static resolveDefaults(a) {
    var T, S;
    const d = (T = a.colors) != null ? T : [4278190080, 4294967295];
    let g = a.stops || [];
    if (g.length === 0 || g.length !== d.length) {
      const h = d.length;
      let M = 0;
      const P = g;
      for (; M < h; M++)
        g[M]
          ? ((P[M] = g[M]),
            g[M - 1] === void 0 && P[M - 2] !== void 0 && (P[M - 1] = P[M - 2] + (g[M] - P[M - 2]) / 2))
          : (P[M] = M * (1 / (d.length - 1)));
      g = P;
    }
    return { colors: d, stops: g, angle: (S = a.angle) != null ? S : 0 };
  }
}
(_(va, "z$__type__Props"),
  _(va, "uniforms", {
    angle: { value: 0, method: "uniform1f", type: "float" },
    colors: {
      value: 4294967295,
      validator: a => a.reduce((d, g) => d.concat(fh(g)), []),
      updateProgramValue: bI,
      size: a => a.colors.length,
      method: "uniform4fv",
      type: "vec4",
    },
    stops: { value: [], size: a => a.colors.length, method: "uniform1fv", type: "float" },
  }),
  _(va, "methods", {
    calcPoint:
      "\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    ",
  }),
  _(va, "ColorLoop", a => {
    let d = "";
    for (let g = 2; g < a; g++)
      d += "colorOut = mix(colorOut, colors["
        .concat(g, "], clamp((dist - stops[")
        .concat(g - 1, "]) / (stops[")
        .concat(g, "] - stops[")
        .concat(g - 1, "]), 0.0, 1.0));");
    return d;
  }),
  _(va, "onColorize", a => {
    const d = a.colors.length || 1;
    return "\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_nodeCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      //return early if dist is lower or equal to first stop\n      if(dist <= stops[0]) {\n        return mix(maskColor, colors[0], clamp(colors[0].a, 0.0, 1.0));\n      }\n      const int amount = ".concat(
      d,
      ";\n      const int last = amount - 1;\n\n      if(dist >= stops[last]) {\n        return mix(maskColor, colors[last], clamp(colors[last].a, 0.0, 1.0));\n      }\n\n      for(int i = 0; i < last; i++) {\n        float left = stops[i];\n        float right = stops[i + 1];\n        if(dist >= left && dist <= right) {\n          float localDist = smoothstep(left, right, dist);\n          vec4 colorOut = mix(colors[i], colors[i + 1], localDist);\n          return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n        }\n      }\n\n      //final fallback\n      return mix(maskColor, colors[last], clamp(colors[last].a, 0.0, 1.0));\n    ",
    );
  }));
class Hy extends Rn {
  constructor() {
    super(...arguments);
    _(this, "name", "grayscale");
  }
  static getEffectKey() {
    return "grayscale";
  }
  static resolveDefaults(a) {
    var d;
    return { amount: (d = a.amount) != null ? d : 1 };
  }
}
(_(Hy, "uniforms", { amount: { value: 1, method: "uniform1f", type: "float" } }),
  _(
    Hy,
    "onColorize",
    "\n    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;\n    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);\n  ",
  ));
class xa extends Rn {
  constructor() {
    super(...arguments);
    _(this, "name", "borderRight");
  }
  static getEffectKey() {
    return "borderRight";
  }
  static resolveDefaults(a) {
    var d, g;
    return { width: (d = a.width) != null ? d : 10, color: (g = a.color) != null ? g : 4294967295 };
  }
}
(_(xa, "z$__type__Props"),
  _(xa, "uniforms", {
    width: { value: 0, method: "uniform1f", type: "float" },
    color: { value: 4294967295, updateProgramValue: Da, method: "uniform4fv", type: "vec4" },
  }),
  _(xa, "methods", {
    fillMask: "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
    rectDist:
      "\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    ",
  }),
  _(
    xa,
    "onEffectMask",
    "\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_nodeCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  ",
  ),
  _(xa, "onColorize", "\n    return color;\n  "));
class Ta extends Rn {
  constructor() {
    super(...arguments);
    _(this, "name", "borderTop");
  }
  static getEffectKey() {
    return "borderTop";
  }
  static resolveDefaults(a) {
    var d, g;
    return { width: (d = a.width) != null ? d : 10, color: (g = a.color) != null ? g : 4294967295 };
  }
}
(_(Ta, "z$__type__Props"),
  _(Ta, "uniforms", {
    width: { value: 0, method: "uniform1f", type: "float" },
    color: { value: 4294967295, updateProgramValue: Da, method: "uniform4fv", type: "vec4" },
  }),
  _(Ta, "methods", {
    fillMask: "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
    rectDist:
      "\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    ",
  }),
  _(
    Ta,
    "onEffectMask",
    "\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_nodeCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  ",
  ),
  _(Ta, "onColorize", "\n    return color;\n  "));
class Sa extends Rn {
  constructor() {
    super(...arguments);
    _(this, "name", "borderBottom");
  }
  static getEffectKey() {
    return "borderBottom";
  }
  static resolveDefaults(a) {
    var d, g;
    return { width: (d = a.width) != null ? d : 10, color: (g = a.color) != null ? g : 4294967295 };
  }
}
(_(Sa, "z$__type__Props"),
  _(Sa, "uniforms", {
    width: { value: 0, method: "uniform1f", type: "float" },
    color: { value: 4294967295, updateProgramValue: Da, method: "uniform4fv", type: "vec4" },
  }),
  _(Sa, "methods", {
    fillMask: "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
    rectDist:
      "\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    ",
  }),
  _(
    Sa,
    "onEffectMask",
    "\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_nodeCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  ",
  ),
  _(Sa, "onColorize", "\n    return color;\n  "));
class wa extends Rn {
  constructor() {
    super(...arguments);
    _(this, "name", "borderLeft");
  }
  static getEffectKey() {
    return "borderLeft";
  }
  static resolveDefaults(a) {
    var d, g;
    return { width: (d = a.width) != null ? d : 10, color: (g = a.color) != null ? g : 4294967295 };
  }
}
(_(wa, "z$__type__Props"),
  _(wa, "uniforms", {
    width: { value: 0, method: "uniform1f", type: "float" },
    color: { value: 4294967295, updateProgramValue: Da, method: "uniform4fv", type: "vec4" },
  }),
  _(wa, "methods", {
    fillMask: "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
    rectDist:
      "\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    ",
  }),
  _(
    wa,
    "onEffectMask",
    "\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_nodeCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  ",
  ),
  _(wa, "onColorize", "\n    return color;\n  "));
class ml extends Rn {
  constructor() {
    super(...arguments);
    _(this, "name", "glitch");
  }
  static getEffectKey(a) {
    return "glitch";
  }
  static resolveDefaults(a) {
    var d, g, T, S, h;
    return {
      amplitude: (d = a.amplitude) != null ? d : 0.2,
      narrowness: (g = a.narrowness) != null ? g : 4,
      blockiness: (T = a.blockiness) != null ? T : 2,
      minimizer: (S = a.minimizer) != null ? S : 8,
      time: (h = a.time) != null ? h : Date.now(),
    };
  }
}
(_(ml, "z$__type__Props"),
  _(ml, "uniforms", {
    amplitude: { value: 0, method: "uniform1f", type: "float" },
    narrowness: { value: 0, method: "uniform1f", type: "float" },
    blockiness: { value: 0, method: "uniform1f", type: "float" },
    minimizer: { value: 0, method: "uniform1f", type: "float" },
    time: {
      value: 0,
      method: "uniform1f",
      updateOnBind: !0,
      updateProgramValue: a => {
        const d = (a.value = (Date.now() - a.value) % 1e3);
        a.programValue = d;
      },
      type: "float",
    },
  }),
  _(ml, "methods", {
    rand: "\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",
    noise:
      "\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",
    fbm: "\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    ",
  }),
  _(
    ml,
    "onColorize",
    "\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ",
  ));
class Kf extends Rn {
  constructor() {
    super(...arguments);
    _(this, "name", "fadeOut");
  }
  static getEffectKey() {
    return "fadeOut";
  }
  static resolveDefaults(a) {
    var d;
    return { fade: (d = a.fade) != null ? d : 10 };
  }
}
(_(Kf, "z$__type__Props"),
  _(Kf, "uniforms", {
    fade: { value: 0, method: "uniform4fv", type: "vec4", validator: uv, updateProgramValue: zb },
  }),
  _(
    Kf,
    "onColorize",
    "\n  vec2 point = v_nodeCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_nodeCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_nodeCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_nodeCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_nodeCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ",
  ));
class Aa extends Rn {
  constructor() {
    super(...arguments);
    _(this, "name", "radialGradient");
  }
  static getEffectKey(a) {
    return a.colors.value
      ? "radialGradient".concat(a.colors.value.length)
      : "radialGradient".concat(a.colors.length);
  }
  static resolveDefaults(a) {
    var T, S, h, M, P;
    const d = (T = a.colors) != null ? T : [4278190080, 4294967295];
    let g = a.stops || [];
    if (g.length === 0 || g.length !== d.length) {
      const O = d.length;
      let D = 0;
      const F = g;
      for (; D < O; D++)
        g[D]
          ? ((F[D] = g[D]),
            g[D - 1] === void 0 && F[D - 2] !== void 0 && (F[D - 1] = F[D - 2] + (g[D] - F[D - 2]) / 2))
          : (F[D] = D * (1 / (d.length - 1)));
      g = F;
    }
    return {
      colors: d,
      stops: g,
      width: (S = a.width) != null ? S : 0,
      height: (M = (h = a.height) != null ? h : a.width) != null ? M : 0,
      pivot: (P = a.pivot) != null ? P : [0.5, 0.5],
    };
  }
}
(_(Aa, "z$__type__Props"),
  _(Aa, "uniforms", {
    width: { value: 0, method: "uniform1f", type: "float" },
    height: { value: 0, method: "uniform1f", type: "float" },
    pivot: { value: [0.5, 0.5], updateProgramValue: Gb, method: "uniform2fv", type: "vec2" },
    colors: {
      value: 4294967295,
      validator: a => a.reduce((d, g) => d.concat(fh(g)), []),
      updateProgramValue: bI,
      size: a => a.colors.length,
      method: "uniform4fv",
      type: "vec4",
    },
    stops: { value: [], size: a => a.colors.length, method: "uniform1fv", type: "float" },
  }),
  _(Aa, "methods", {
    getGradientColor:
      "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
  }),
  _(Aa, "ColorLoop", a => {
    let d = "";
    for (let g = 2; g < a; g++)
      d += "colorOut = mix(colorOut, colors["
        .concat(g, "], clamp((dist - stops[")
        .concat(g - 1, "]) / (stops[")
        .concat(g, "] - stops[")
        .concat(g - 1, "]), 0.0, 1.0));");
    return d;
  }),
  _(Aa, "onColorize", a => {
    const d = a.colors.length || 1;
    return "\n      vec2 point = v_nodeCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      dist = clamp(dist, 0.0, 1.0);\n      //return early if dist is lower or equal to first stop\n      if(dist <= stops[0]) {\n        return mix(maskColor, colors[0], clamp(colors[0].a, 0.0, 1.0));\n      }\n      const int amount = ".concat(
      d,
      ";\n      const int last = amount - 1;\n\n      if(dist >= stops[last]) {\n        return mix(maskColor, colors[last], clamp(colors[last].a, 0.0, 1.0));\n      }\n\n      for(int i = 0; i < last; i++) {\n        float left = stops[i];\n        float right = stops[i + 1];\n        if(dist >= left && dist <= right) {\n          float localDist = smoothstep(left, right, dist);\n          vec4 colorOut = mix(colors[i], colors[i + 1], localDist);\n          return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n        }\n      }\n\n      //final fallback\n      return mix(maskColor, colors[last], clamp(colors[last].a, 0.0, 1.0));\n    ",
    );
  }));
class Ea extends Rn {
  constructor() {
    super(...arguments);
    _(this, "name", "radialProgress");
  }
  static getEffectKey() {
    return "radialProgress";
  }
  static resolveDefaults(a) {
    var d, g, T, S, h, M, P;
    return {
      width: (d = a.width) != null ? d : 10,
      progress: (g = a.progress) != null ? g : 0.5,
      offset: (T = a.offset) != null ? T : 0,
      range: (S = a.range) != null ? S : Math.PI * 2,
      rounded: (h = a.rounded) != null ? h : !1,
      radius: (M = a.radius) != null ? M : 1,
      color: (P = a.color) != null ? P : 4294967295,
    };
  }
}
(_(Ea, "z$__type__Props"),
  _(Ea, "uniforms", {
    width: { value: 0, method: "uniform1f", type: "float" },
    progress: { value: 0.5, method: "uniform1f", type: "float" },
    offset: { value: 0, method: "uniform1f", type: "float" },
    range: { value: 0, method: "uniform1f", type: "float" },
    rounded: { value: 0, method: "uniform1f", type: "float", validator: a => (a ? 1 : 0) },
    radius: { value: 1, method: "uniform1f", type: "float" },
    color: { value: 4294967295, updateProgramValue: Da, method: "uniform4fv", type: "vec4" },
  }),
  _(Ea, "methods", {
    rotateUV:
      "\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",
    drawDot:
      "\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    ",
  }),
  _(
    Ea,
    "onEffectMask",
    "\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_nodeCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  ",
  ),
  _(Ea, "onColorize", "\n    return color;\n  "));
class Ia extends Rn {
  constructor() {
    super(...arguments);
    _(this, "name", "holePunch");
  }
  static getEffectKey() {
    return "holePunch";
  }
  static resolveDefaults(a) {
    var d;
    return {
      x: a.x || 0,
      y: a.y || 0,
      width: a.width || 50,
      height: a.height || 50,
      radius: (d = a.radius) != null ? d : 0,
    };
  }
}
(_(Ia, "z$__type__Props"),
  _(Ia, "uniforms", {
    x: { value: 0, method: "uniform1f", type: "float" },
    y: { value: 0, method: "uniform1f", type: "float" },
    width: { value: 0, method: "uniform1f", type: "float" },
    height: { value: 0, method: "uniform1f", type: "float" },
    radius: {
      value: 0,
      method: "uniform4fv",
      type: "vec4",
      updateOnBind: !0,
      validator: uv,
      updateProgramValue: NI,
    },
  }),
  _(Ia, "methods", {
    fillMask: "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
    boxDist:
      "\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    ",
  }),
  _(
    Ia,
    "onShaderMask",
    "\n  vec2 halfDimensions = u_dimensions * 0.5;\n  vec2 size = vec2(width, height) * 0.5;\n  vec2 basePos = v_nodeCoordinate.xy * u_dimensions.xy - vec2(x, y);\n  vec2 pos = basePos - size;\n  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);\n  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);\n  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);\n  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);\n  return $boxDist(pos, size, r);\n  ",
  ),
  _(Ia, "onEffectMask", "\n  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));\n  "));
class Xb extends PI {
  constructor(a) {
    super();
    _(this, "shType");
    this.shType = a;
  }
  bindRenderOp() {}
  bindProps() {}
  attach() {}
  detach() {}
}
class Wb {
  constructor(c, a, d, g) {
    _(this, "type");
    _(this, "shader");
    _(this, "resolvedProps");
    _(this, "props");
    ((this.type = c), (this.shader = a), (this.resolvedProps = d));
    const T = Object.keys(d),
      S = T.length,
      h = {};
    for (let M = 0; M < S; M++) {
      const P = T[M];
      Object.defineProperty(h, P, {
        get: () => this.resolvedProps[P],
        set: O => {
          ((this.resolvedProps[P] = O), g.requestRender());
        },
      });
    }
    this.props = h;
  }
  getResolvedProps() {
    return this.resolvedProps;
  }
}
class Kb {
  constructor(c, a, d) {
    _(this, "shader");
    _(this, "resolvedProps");
    _(this, "props");
    _(this, "type");
    ((this.shader = c), (this.type = "DynamicShader"), (this.resolvedProps = a));
    const g = d.getRegisteredEffects(),
      T = {},
      S = a.effects,
      h = S.length;
    for (let M = 0; M < h; M++) {
      const { name: P, props: O, type: D } = S[M];
      if (P === void 0) continue;
      const F = {},
        K = Object.keys(O),
        $ = K.length;
      for (let Q = 0; Q < $; Q++) {
        const ue = K[Q];
        Object.defineProperty(F, ue, {
          get: () => this.resolvedProps.effects[M].props[ue].value,
          set: le => {
            var oe, x;
            const J = this.resolvedProps.effects[M].props[ue];
            ((J.value = le),
              J.hasValidator &&
                (le = J.validatedValue = (oe = g[D].uniforms[ue]) == null ? void 0 : oe.validator(le, O)),
              J.hasProgramValueUpdater
                ? (x = g[D].uniforms[ue]) == null || x.updateProgramValue(J)
                : (J.programValue = le),
              d.renderer.stage.requestRender());
          },
        });
      }
      Object.defineProperty(T, P, { get: () => F });
    }
    this.props = T;
  }
  getResolvedProps() {
    return this.resolvedProps;
  }
}
class $b {
  constructor() {
    _(this, "shCache", new Map());
    _(this, "shConstructors", {});
    _(this, "attachedShader", null);
    _(this, "effectConstructors", {});
    _(this, "renderer");
    (this.registerShaderType("DefaultShader", DI),
      this.registerShaderType("DefaultShaderBatched", LI),
      this.registerShaderType("RoundedRectangle", Fy),
      this.registerShaderType("DynamicShader", Ra),
      this.registerShaderType("SdfShader", Vy),
      this.registerEffectType("border", gl),
      this.registerEffectType("borderBottom", Sa),
      this.registerEffectType("borderLeft", wa),
      this.registerEffectType("borderRight", xa),
      this.registerEffectType("borderTop", Ta),
      this.registerEffectType("fadeOut", Kf),
      this.registerEffectType("linearGradient", va),
      this.registerEffectType("radialGradient", Aa),
      this.registerEffectType("grayscale", Hy),
      this.registerEffectType("glitch", ml),
      this.registerEffectType("radius", ya),
      this.registerEffectType("radialProgress", Ea),
      this.registerEffectType("holePunch", Ia));
  }
  registerShaderType(c, a) {
    this.shConstructors[c] = a;
  }
  registerEffectType(c, a) {
    this.effectConstructors[c] = a;
  }
  getRegisteredEffects() {
    return this.effectConstructors;
  }
  getRegisteredShaders() {
    return this.shConstructors;
  }
  loadShader(c, a) {
    if (!this.renderer) throw new Error("Renderer is not been defined");
    const d = this.shConstructors[c];
    if (!d) throw new Error('Shader type "'.concat(c, '" is not registered'));
    if (this.renderer.mode === "canvas" && d.prototype instanceof oo)
      return this._createShaderCtr(c, new Xb(c), a);
    if (c === "DynamicShader") return this.loadDynamicShader(a);
    const g = d.resolveDefaults(a),
      T = d.makeCacheKey(g) || d.name;
    if (T && this.shCache.has(T)) return this._createShaderCtr(c, this.shCache.get(T), g);
    const S = new d(this.renderer, a);
    return (T && this.shCache.set(T, S), this._createShaderCtr(c, S, g));
  }
  loadDynamicShader(c) {
    if (!this.renderer) throw new Error("Renderer is not been defined");
    const a = Ra.resolveDefaults(c, this.effectConstructors),
      d = Ra.makeCacheKey(a, this.effectConstructors);
    if (d && this.shCache.has(d)) return this._createDynShaderCtr(this.shCache.get(d), a);
    const g = new Ra(this.renderer, c, this.effectConstructors);
    return (d && this.shCache.set(d, g), this._createDynShaderCtr(g, a));
  }
  _createShaderCtr(c, a, d) {
    return new Wb(c, a, d, this.renderer.stage);
  }
  _createDynShaderCtr(c, a) {
    return (c.bindUniformMethods(a), new Kb(c, a, this));
  }
  useShader(c) {
    this.attachedShader !== c &&
      (this.attachedShader && this.attachedShader.detach(), c.attach(), (this.attachedShader = c));
  }
}
const Yb = {
  x: (f, c) => {
    f.props.x = c;
  },
  y: (f, c) => {
    f.props.y = c;
  },
  width: (f, c) => {
    f.props.width = c;
  },
  height: (f, c) => {
    f.props.height = c;
  },
  color: (f, c) => {
    f.props.color = c;
  },
  zIndex: (f, c) => {
    f.props.zIndex = c;
  },
  fontFamily: (f, c) => {
    f.props.fontFamily = c;
  },
  fontWeight: (f, c) => {
    f.props.fontWeight = c;
  },
  fontStyle: (f, c) => {
    f.props.fontStyle = c;
  },
  fontStretch: (f, c) => {
    f.props.fontStretch = c;
  },
  fontSize: (f, c) => {
    f.props.fontSize = c;
  },
  text: (f, c) => {
    f.props.text = c;
  },
  textAlign: (f, c) => {
    f.props.textAlign = c;
  },
  contain: (f, c) => {
    f.props.contain = c;
  },
  offsetY: (f, c) => {
    f.props.offsetY = c;
  },
  scrollable: (f, c) => {
    f.props.scrollable = c;
  },
  scrollY: (f, c) => {
    f.props.scrollY = c;
  },
  letterSpacing: (f, c) => {
    f.props.letterSpacing = c;
  },
  lineHeight: (f, c) => {
    f.props.lineHeight = c;
  },
  maxLines: (f, c) => {
    f.props.maxLines = c;
  },
  textBaseline: (f, c) => {
    f.props.textBaseline = c;
  },
  verticalAlign: (f, c) => {
    f.props.verticalAlign = c;
  },
  overflowSuffix: (f, c) => {
    f.props.overflowSuffix = c;
  },
  debug: (f, c) => {
    f.props.debug = c;
  },
};
class OI {
  constructor(c) {
    _(this, "stage");
    _(this, "set");
    this.stage = c;
    const a = { ...Yb, ...this.getPropertySetters() },
      d = {};
    (Object.keys(a).forEach(g => {
      Object.defineProperty(d, g, {
        value: (T, S) => {
          T.props[g] !== S && (a[g](T, S), this.stage.requestRender());
        },
        writable: !1,
        configurable: !1,
      });
    }),
      (this.set = d));
  }
  setStatus(c, a, d) {
    c.status !== a && ((c.status = a), c.emitter.emit(a, d));
  }
  setIsRenderable(c, a) {
    c.isRenderable = a;
  }
  destroyState(c) {
    (this.setStatus(c, "destroyed"), c.emitter.removeAllListeners());
  }
  scheduleUpdateState(c) {
    c.updateScheduled ||
      ((c.updateScheduled = !0),
      queueMicrotask(() => {
        c.status !== "destroyed" && ((c.updateScheduled = !1), this.updateState(c));
      }));
  }
}
class qb {
  constructor() {
    _(this, "data", {});
  }
  reset() {
    this.data = {};
  }
  increment(c) {
    (this.data[c] || (this.data[c] = 0), this.data[c]++);
  }
  getData() {
    return { ...this.data };
  }
}
class Jb {
  constructor(c, a) {
    _(this, "stage");
    _(this, "memUsed", 0);
    _(this, "loadedTextures", []);
    _(this, "criticalThreshold");
    _(this, "targetThreshold");
    _(this, "cleanupInterval");
    _(this, "debugLogging");
    _(this, "lastCleanupTime", 0);
    _(this, "baselineMemoryAllocation");
    _(this, "hasWarnedAboveCritical", !1);
    _(this, "criticalCleanupRequested", !1);
    _(this, "doNotExceedCriticalThreshold");
    _(this, "frameTime", 0);
    this.stage = c;
    const { criticalThreshold: d, doNotExceedCriticalThreshold: g } = a;
    ((this.doNotExceedCriticalThreshold = g || !1), (this.criticalThreshold = Math.round(d)));
    const T = Math.max(0, Math.min(1, a.targetThresholdLevel));
    if (
      ((this.cleanupInterval = a.cleanupInterval),
      (this.debugLogging = a.debugLogging),
      (this.baselineMemoryAllocation = Math.round(a.baselineMemoryAllocation)),
      (this.targetThreshold = Math.max(Math.round(d * T), this.baselineMemoryAllocation)),
      (this.memUsed = Math.round(a.baselineMemoryAllocation)),
      a.debugLogging)
    ) {
      let S = 0;
      setInterval(() => {
        S !== this.memUsed &&
          ((S = this.memUsed),
          console.log(
            "[TextureMemoryManager] Memory used: "
              .concat(RE(this.memUsed), " mb / ")
              .concat(RE(this.criticalThreshold), " mb (")
              .concat(((this.memUsed / this.criticalThreshold) * 100).toFixed(1), "%)"),
          ));
      }, 1e3);
    }
    d === 0 && (this.setTextureMemUse = () => {});
  }
  setTextureMemUse(c, a) {
    if (((this.memUsed -= c.memUsed), a === 0)) {
      const d = this.loadedTextures.indexOf(c);
      (d !== -1 && (this.loadedTextures[d] = null), (c.memUsed = 0));
      return;
    } else if (((c.memUsed = a), (this.memUsed += a), this.loadedTextures.indexOf(c) === -1)) {
      const d = this.loadedTextures.indexOf(null);
      d !== -1 ? (this.loadedTextures[d] = c) : this.loadedTextures.push(c);
    }
    this.memUsed > this.criticalThreshold && (this.criticalCleanupRequested = !0);
  }
  checkCleanup() {
    return (
      this.criticalCleanupRequested ||
      (this.memUsed > this.targetThreshold && this.frameTime - this.lastCleanupTime >= this.cleanupInterval)
    );
  }
  checkCriticalCleanup() {
    return this.memUsed > this.criticalThreshold;
  }
  destroyTexture(c) {
    this.debugLogging === !0 &&
      console.log("[TextureMemoryManager] Destroying texture. State: ".concat(c.state));
    const a = this.loadedTextures.indexOf(c);
    (a !== -1 && (this.loadedTextures[a] = null),
      this.stage.txManager.removeTextureFromCache(c),
      c.destroy(),
      (this.memUsed -= c.memUsed),
      (c.memUsed = 0));
  }
  cleanup() {
    const c = this.criticalCleanupRequested;
    ((this.lastCleanupTime = this.frameTime),
      c === !0 &&
        this.stage.queueFrameEvent("criticalCleanup", {
          memUsed: this.memUsed,
          criticalThreshold: this.criticalThreshold,
        }),
      this.debugLogging === !0 &&
        console.log("[TextureMemoryManager] Cleaning up textures. Critical: ".concat(c, ".")));
    const a = c ? this.criticalThreshold : this.targetThreshold;
    let d = this.memUsed;
    for (let g = 0; g < this.loadedTextures.length && !(d < a); g++) {
      const T = this.loadedTextures[g];
      if (!T) continue;
      if (
        (T.type === Kn.image || T.type === Kn.noise || T.type === Kn.renderToTexture) &&
        T.canBeCleanedUp() === !0
      ) {
        const h = T.memUsed;
        (this.destroyTexture(T), (d -= h));
      }
    }
    this.memUsed >= this.criticalThreshold
      ? (this.stage.queueFrameEvent("criticalCleanupFailed", {
          memUsed: this.memUsed,
          criticalThreshold: this.criticalThreshold,
        }),
        !this.hasWarnedAboveCritical &&
          (this.debugLogging === !0 || ZL === !1) &&
          (console.warn(
            "[TextureMemoryManager] Memory usage above critical threshold after cleanup: ".concat(
              this.memUsed,
            ),
          ),
          (this.hasWarnedAboveCritical = !0)))
      : ((this.criticalCleanupRequested = !1), (this.hasWarnedAboveCritical = !1));
  }
  getMemoryInfo() {
    let c = 0,
      a = this.baselineMemoryAllocation;
    for (const g of this.loadedTextures) g && g.renderable && ((c += 1), (a += g.memUsed));
    const d = this.loadedTextures.filter(g => g !== null).length;
    return {
      criticalThreshold: this.criticalThreshold,
      targetThreshold: this.targetThreshold,
      renderableMemUsed: a,
      memUsed: this.memUsed,
      renderableTexturesLoaded: c,
      loadedTextures: d,
      baselineMemoryAllocation: this.baselineMemoryAllocation,
    };
  }
}
class Qb {
  constructor(c, a) {
    _(this, "textureSource");
    _(this, "memManager");
    _(this, "state", "freed");
    ((this.memManager = c), (this.textureSource = a));
  }
  setTextureMemUse(c) {
    this.memManager.setTextureMemUse(this.textureSource, c);
  }
  get renderable() {
    return this.textureSource.renderable;
  }
}
class Zb {
  constructor(c) {
    _(this, "options");
    _(this, "mode");
    _(this, "stage");
    _(this, "txManager");
    _(this, "txMemManager");
    _(this, "shManager");
    _(this, "rttNodes", []);
    ((this.options = c),
      (this.stage = c.stage),
      (this.txManager = c.txManager),
      (this.txMemManager = c.txMemManager),
      (this.shManager = c.shManager));
  }
}
class e3 extends jy {
  constructor(a, d, g) {
    super(a, d);
    _(this, "textRenderer");
    _(this, "trState");
    _(this, "_textRendererOverride", null);
    _(this, "onTextLoaded", () => {
      const { contain: a } = this,
        d = this.trState.props.width,
        g = this.trState.props.height,
        T = this.trState.textW || 0,
        S = this.trState.textH || 0;
      (a === "both"
        ? ((this.props.width = d), (this.props.height = g))
        : a === "width"
          ? ((this.props.width = d), (this.props.height = S))
          : a === "none" && ((this.props.width = T), (this.props.height = S)),
        this.updateLocalTransform(),
        this.stage.requestRender(),
        this.emit("loaded", {
          type: "text",
          dimensions: { width: this.trState.textW || 0, height: this.trState.textH || 0 },
        }));
    });
    _(this, "onTextFailed", (a, d) => {
      this.emit("failed", { type: "text", error: d });
    });
    ((this._textRendererOverride = d.textRendererOverride), (this.textRenderer = g));
    const T = this.createState({
      x: 0,
      y: 0,
      width: d.width,
      height: d.height,
      textAlign: d.textAlign,
      color: d.color,
      zIndex: d.zIndex,
      contain: d.contain,
      scrollable: d.scrollable,
      scrollY: d.scrollY,
      offsetY: d.offsetY,
      letterSpacing: d.letterSpacing,
      debug: d.debug,
      fontFamily: d.fontFamily,
      fontSize: d.fontSize,
      fontStretch: d.fontStretch,
      fontStyle: d.fontStyle,
      fontWeight: d.fontWeight,
      text: d.text,
      lineHeight: d.lineHeight,
      maxLines: d.maxLines,
      textBaseline: d.textBaseline,
      verticalAlign: d.verticalAlign,
      overflowSuffix: d.overflowSuffix,
    });
    this.trState = T;
  }
  get width() {
    return this.props.width;
  }
  set width(a) {
    ((this.props.width = a),
      this.textRenderer.set.width(this.trState, a),
      this.contain === "none" && this.setUpdateType(pe.Local));
  }
  get height() {
    return this.props.height;
  }
  set height(a) {
    ((this.props.height = a),
      this.textRenderer.set.height(this.trState, a),
      this.contain !== "both" && this.setUpdateType(pe.Local));
  }
  get color() {
    return this.trState.props.color;
  }
  set color(a) {
    this.textRenderer.set.color(this.trState, a);
  }
  get text() {
    return this.trState.props.text;
  }
  set text(a) {
    this.textRenderer.set.text(this.trState, a);
  }
  get textRendererOverride() {
    return this._textRendererOverride;
  }
  set textRendererOverride(a) {
    ((this._textRendererOverride = a), this.textRenderer.destroyState(this.trState));
    const d = this.stage.resolveTextRenderer(this.trState.props, this._textRendererOverride);
    if (!d) {
      console.warn("Text Renderer not found for font", this.trState.props.fontFamily);
      return;
    }
    ((this.textRenderer = d), (this.trState = this.createState(this.trState.props)));
  }
  get fontSize() {
    return this.trState.props.fontSize;
  }
  set fontSize(a) {
    this.textRenderer.set.fontSize(this.trState, a);
  }
  get fontFamily() {
    return this.trState.props.fontFamily;
  }
  set fontFamily(a) {
    this.textRenderer.set.fontFamily(this.trState, a);
  }
  get fontStretch() {
    return this.trState.props.fontStretch;
  }
  set fontStretch(a) {
    this.textRenderer.set.fontStretch(this.trState, a);
  }
  get fontStyle() {
    return this.trState.props.fontStyle;
  }
  set fontStyle(a) {
    this.textRenderer.set.fontStyle(this.trState, a);
  }
  get fontWeight() {
    return this.trState.props.fontWeight;
  }
  set fontWeight(a) {
    this.textRenderer.set.fontWeight(this.trState, a);
  }
  get textAlign() {
    return this.trState.props.textAlign;
  }
  set textAlign(a) {
    this.textRenderer.set.textAlign(this.trState, a);
  }
  get contain() {
    return this.trState.props.contain;
  }
  set contain(a) {
    this.textRenderer.set.contain(this.trState, a);
  }
  get scrollable() {
    return this.trState.props.scrollable;
  }
  set scrollable(a) {
    this.textRenderer.set.scrollable(this.trState, a);
  }
  get scrollY() {
    return this.trState.props.scrollY;
  }
  set scrollY(a) {
    this.textRenderer.set.scrollY(this.trState, a);
  }
  get offsetY() {
    return this.trState.props.offsetY;
  }
  set offsetY(a) {
    this.textRenderer.set.offsetY(this.trState, a);
  }
  get letterSpacing() {
    return this.trState.props.letterSpacing;
  }
  set letterSpacing(a) {
    this.textRenderer.set.letterSpacing(this.trState, a);
  }
  get lineHeight() {
    return this.trState.props.lineHeight;
  }
  set lineHeight(a) {
    this.textRenderer.set.lineHeight(this.trState, a);
  }
  get maxLines() {
    return this.trState.props.maxLines;
  }
  set maxLines(a) {
    this.textRenderer.set.maxLines(this.trState, a);
  }
  get textBaseline() {
    return this.trState.props.textBaseline;
  }
  set textBaseline(a) {
    this.textRenderer.set.textBaseline(this.trState, a);
  }
  get verticalAlign() {
    return this.trState.props.verticalAlign;
  }
  set verticalAlign(a) {
    this.textRenderer.set.verticalAlign(this.trState, a);
  }
  get overflowSuffix() {
    return this.trState.props.overflowSuffix;
  }
  set overflowSuffix(a) {
    this.textRenderer.set.overflowSuffix(this.trState, a);
  }
  get debug() {
    return this.trState.props.debug;
  }
  set debug(a) {
    this.textRenderer.set.debug(this.trState, a);
  }
  update(a, d) {
    (super.update(a, d),
      this.globalTransform,
      this.textRenderer.set.x(this.trState, this.globalTransform.tx),
      this.textRenderer.set.y(this.trState, this.globalTransform.ty));
  }
  checkBasicRenderability() {
    return this.worldAlpha === 0 || this.isOutOfBounds() === !0
      ? !1
      : !!(this.trState && this.trState.props.text !== "");
  }
  setRenderable(a) {
    (super.setRenderable(a), this.textRenderer.setIsRenderable(this.trState, a));
  }
  renderQuads(a) {
    var d;
    if ((this.globalTransform, !this.textRenderer.renderQuads)) {
      super.renderQuads(a);
      return;
    }
    (this.parentHasRenderTexture &&
      (!a.renderToTextureActive || this.parentRenderTexture !== a.activeRttNode)) ||
      (this.parentHasRenderTexture &&
        (d = this.props.parent) != null &&
        d.rtt &&
        ((this.globalTransform = xn.identity()),
        this.localTransform && this.globalTransform.multiply(this.localTransform)),
      this.globalTransform,
      this.textRenderer.renderQuads(
        this.trState,
        this.globalTransform,
        this.clippingRect,
        this.worldAlpha,
        this.parentHasRenderTexture,
        this.framebufferDimensions,
      ));
  }
  destroy() {
    (super.destroy(), this.textRenderer.destroyState(this.trState));
  }
  createState(a) {
    const d = this.textRenderer.createState(a, this);
    return (
      d.emitter.on("loaded", this.onTextLoaded),
      d.emitter.on("failed", this.onTextFailed),
      this.textRenderer.scheduleUpdateState(d),
      d
    );
  }
}
function t3(f) {
  const c = { boolean: !0, string: !0, number: !0, undefined: !0 },
    a = Object.keys(f);
  for (let d = 0; d < a.length; d++) {
    const g = a[d];
    if (!g) continue;
    const T = f[g],
      S = typeof T;
    (S === "string" &&
      T.length > 2048 &&
      (console.warn(
        "Custom Data value for ".concat(g, " is too long, it will be truncated to 2048 characters"),
      ),
      (f[g] = T.substring(0, 2048))),
      c[S] ||
        (console.warn(
          "Custom Data value for ".concat(g, " is not a boolean, string, or number, it will be ignored"),
        ),
        delete f[g]));
  }
  return f;
}
const n3 = 2e6;
class r3 {
  constructor(c) {
    _(this, "options");
    _(this, "animationManager");
    _(this, "txManager");
    _(this, "txMemManager");
    _(this, "fontManager");
    _(this, "textRenderers");
    _(this, "shManager");
    _(this, "renderer");
    _(this, "root");
    _(this, "interactiveNodes", new Set());
    _(this, "boundsMargin");
    _(this, "defShaderCtr");
    _(this, "strictBound");
    _(this, "preloadBound");
    _(this, "strictBounds");
    _(this, "defaultTexture", null);
    _(this, "targetFrameTime", 0);
    _(this, "eventBus");
    _(this, "deltaTime", 0);
    _(this, "lastFrameTime", 0);
    _(this, "currentFrameTime", 0);
    _(this, "fpsNumFrames", 0);
    _(this, "fpsElapsedTime", 0);
    _(this, "numQuadsRendered", 0);
    _(this, "renderRequested", !1);
    _(this, "frameEventQueue", []);
    _(this, "fontResolveMap", {});
    _(this, "contextSpy", null);
    this.options = c;
    const {
      canvas: a,
      clearColor: d,
      appWidth: g,
      appHeight: T,
      boundsMargin: S,
      enableContextSpy: h,
      forceWebGL2: M,
      numImageWorkers: P,
      textureMemory: O,
      renderEngine: D,
      fontEngines: F,
      createImageBitmapSupport: K,
      maxRetryCount: $,
    } = c;
    ((this.eventBus = c.eventBus),
      (this.targetFrameTime = c.targetFPS > 0 ? 1e3 / c.targetFPS : 0),
      (this.txManager = new Ob(this, { numImageWorkers: P, createImageBitmapSupport: K, maxRetryCount: $ })),
      this.txManager.on("initialized", () => {
        this.requestRender();
      }),
      (this.txMemManager = new Jb(this, O)),
      (this.shManager = new $b()),
      (this.animationManager = new mb()),
      (this.contextSpy = h ? new qb() : null),
      (this.strictBounds = c.strictBounds));
    let Q = [0, 0, 0, 0];
    (S && (Q = Array.isArray(S) ? S : [S, S, S, S]),
      (this.boundsMargin = Q),
      (this.strictBound = Ca(0, 0, g, T)),
      (this.preloadBound = Uy(this.strictBound, Q)));
    const ue = {
      stage: this,
      canvas: a,
      pixelRatio: c.devicePhysicalPixelRatio * c.deviceLogicalPixelRatio,
      clearColor: d != null ? d : 4278190080,
      bufferMemory: n3,
      txManager: this.txManager,
      txMemManager: this.txMemManager,
      shManager: this.shManager,
      contextSpy: this.contextSpy,
      forceWebGL2: M,
    };
    this.renderer = new D(ue);
    const le = this.renderer.mode || "webgl";
    (this.createDefaultTexture(),
      (this.defShaderCtr = this.renderer.getDefShaderCtr()),
      QL(le),
      (this.txManager.renderer = this.renderer),
      (this.textRenderers = {}),
      F.forEach(oe => {
        const x = new oe(this),
          Y = x.type;
        if (Y === "sdf" && le === "canvas") {
          console.warn("SdfTextRenderer is not compatible with Canvas renderer. Skipping...");
          return;
        }
        x instanceof OI &&
          (Y === "canvas" ? (this.textRenderers.canvas = x) : Y === "sdf" && (this.textRenderers.sdf = x));
      }),
      Object.keys(this.textRenderers).length === 0 &&
        console.warn("No text renderers available. Your text will not render."),
      (this.fontManager = new Bb(this.textRenderers)));
    const J = new jy(this, {
      x: 0,
      y: 0,
      width: g,
      height: T,
      alpha: 1,
      autosize: !1,
      boundsMargin: null,
      clipping: !1,
      color: 0,
      colorTop: 0,
      colorBottom: 0,
      colorLeft: 0,
      colorRight: 0,
      colorTl: 0,
      colorTr: 0,
      colorBl: 0,
      colorBr: 0,
      zIndex: 0,
      zIndexLocked: 0,
      scaleX: 1,
      scaleY: 1,
      mountX: 0,
      mountY: 0,
      mount: 0,
      pivot: 0.5,
      pivotX: 0.5,
      pivotY: 0.5,
      rotation: 0,
      parent: null,
      texture: null,
      textureOptions: {},
      shader: this.defShaderCtr,
      rtt: !1,
      src: null,
      scale: 1,
      preventCleanup: !1,
      strictBounds: this.strictBounds,
    });
    ((this.root = J), gb(this));
  }
  setClearColor(c) {
    (this.renderer.updateClearColor(c), (this.renderRequested = !0));
  }
  updateTargetFrameTime() {
    this.targetFrameTime = this.options.targetFPS > 0 ? 1e3 / this.options.targetFPS : 0;
  }
  updateFrameTime() {
    const c = Wf();
    ((this.lastFrameTime = this.currentFrameTime),
      (this.currentFrameTime = c),
      (this.deltaTime = this.lastFrameTime ? c - this.lastFrameTime : 100 / 6),
      (this.txManager.frameTime = c),
      (this.txMemManager.frameTime = c),
      this.eventBus.emit("frameTick", { time: this.currentFrameTime, delta: this.deltaTime }));
  }
  createDefaultTexture() {
    ((this.defaultTexture = this.txManager.createTexture("ColorTexture", { color: 4294967295 })),
      this.defaultTexture instanceof Qf,
      this.txManager.loadTexture(this.defaultTexture, !0),
      this.defaultTexture.setRenderableOwner("stage", !0),
      this.defaultTexture.once("loaded", () => {
        this.requestRender();
      }));
  }
  updateAnimations() {
    const { animationManager: c } = this;
    this.root && c.update(this.deltaTime);
  }
  hasSceneUpdates() {
    return !!this.root.updateType || this.renderRequested || this.txManager.hasUpdates();
  }
  drawFrame() {
    const { renderer: c, renderRequested: a } = this;
    (this.root.updateType !== 0 && this.root.update(this.deltaTime, this.root.clippingRect),
      this.txManager.processSome(this.options.textureProcessingTimeLimit).catch(d => {
        console.error("Error processing textures:", d);
      }),
      c.reset(),
      c.rttNodes.length > 0 && c.renderRTTNodes(),
      this.addQuads(this.root),
      c == null || c.render(),
      this.calculateFps(),
      this.calculateQuads(),
      a && (this.renderRequested = !1),
      this.txMemManager.criticalCleanupRequested === !0 && this.txMemManager.cleanup());
  }
  queueFrameEvent(c, a) {
    this.frameEventQueue.push([c, a]);
  }
  flushFrameEvents() {
    for (const [c, a] of this.frameEventQueue) this.eventBus.emit(c, a);
    this.frameEventQueue = [];
  }
  calculateFps() {
    var a, d, g;
    const { fpsUpdateInterval: c } = this.options;
    if (c && (this.fpsNumFrames++, (this.fpsElapsedTime += this.deltaTime), this.fpsElapsedTime >= c)) {
      const T = Math.round((this.fpsNumFrames * 1e3) / this.fpsElapsedTime);
      ((this.fpsNumFrames = 0),
        (this.fpsElapsedTime = 0),
        this.queueFrameEvent("fpsUpdate", {
          fps: T,
          contextSpyData: (d = (a = this.contextSpy) == null ? void 0 : a.getData()) != null ? d : null,
        }),
        (g = this.contextSpy) == null || g.reset());
    }
  }
  calculateQuads() {
    const c = this.renderer.getQuadCount();
    c &&
      c !== this.numQuadsRendered &&
      ((this.numQuadsRendered = c), this.queueFrameEvent("quadsUpdate", { quads: c }));
  }
  addQuads(c) {
    (this.renderer, c.isRenderable === !0 && c.renderQuads(this.renderer));
    for (let a = 0; a < c.children.length; a++) {
      const d = c.children[a];
      d !== void 0 &&
        (d.worldAlpha === 0 ||
          (d.strictBounds === !0 && d.renderState === Mn.OutOfBounds) ||
          this.addQuads(d));
    }
  }
  requestRender() {
    this.renderRequested = !0;
  }
  findNodesAtPoint(c) {
    const a = c.x / this.options.deviceLogicalPixelRatio,
      d = c.y / this.options.deviceLogicalPixelRatio,
      g = [];
    for (const T of this.interactiveNodes)
      T.isRenderable !== !1 && ob(a, d, T.renderBound) === !0 && g.push(T);
    return g;
  }
  getNodeFromPosition(c) {
    const a = this.findNodesAtPoint(c);
    if (a.length === 0) return null;
    let d = a[0];
    for (let g = 0; g < a.length; g++) a[g].zIndex > d.zIndex && (d = a[g]);
    return d || null;
  }
  resolveTextRenderer(c, a = null) {
    const d = ""
      .concat(c.fontFamily)
      .concat(c.fontStyle)
      .concat(c.fontWeight)
      .concat(c.fontStretch)
      .concat(a || "");
    if (this.fontResolveMap[d] !== void 0) return this.fontResolveMap[d];
    let g = a,
      T = !1;
    if (g) {
      const h = this.textRenderers[g];
      h
        ? h.canRenderFont(c) ||
          (console.warn("Cannot use override text renderer '".concat(g, "' for font"), c),
          (g = null),
          (T = !0))
        : (console.warn("Text renderer override '".concat(g, "' not found.")), (g = null), (T = !0));
    }
    if (!g) {
      for (const [h, M] of Object.entries(this.textRenderers))
        if (M.canRenderFont(c)) {
          g = h;
          break;
        }
      !g && this.textRenderers.canvas !== void 0 && (g = "canvas");
    }
    if ((T && console.warn("Falling back to text renderer ".concat(String(g))), !g)) return null;
    const S = this.textRenderers[g];
    return ((this.fontResolveMap[d] = S), S);
  }
  createShaderCtr(c, a) {
    return this.shManager.loadShader(c, a);
  }
  createNode(c) {
    const a = this.resolveNodeDefaults(c);
    return new jy(this, a);
  }
  createTextNode(c) {
    var T, S, h, M, P, O, D, F, K, $, Q, ue, le, J, oe, x, Y, me;
    const a = (T = c.fontSize) != null ? T : 16,
      d = {
        ...this.resolveNodeDefaults(c),
        text: (S = c.text) != null ? S : "",
        textRendererOverride: (h = c.textRendererOverride) != null ? h : null,
        fontSize: a,
        fontFamily: (M = c.fontFamily) != null ? M : "sans-serif",
        fontStyle: (P = c.fontStyle) != null ? P : "normal",
        fontWeight: (O = c.fontWeight) != null ? O : "normal",
        fontStretch: (D = c.fontStretch) != null ? D : "normal",
        textAlign: (F = c.textAlign) != null ? F : "left",
        contain: (K = c.contain) != null ? K : "none",
        scrollable: ($ = c.scrollable) != null ? $ : !1,
        scrollY: (Q = c.scrollY) != null ? Q : 0,
        offsetY: (ue = c.offsetY) != null ? ue : 0,
        letterSpacing: (le = c.letterSpacing) != null ? le : 0,
        lineHeight: c.lineHeight,
        maxLines: (J = c.maxLines) != null ? J : 0,
        textBaseline: (oe = c.textBaseline) != null ? oe : "alphabetic",
        verticalAlign: (x = c.verticalAlign) != null ? x : "middle",
        overflowSuffix: (Y = c.overflowSuffix) != null ? Y : "...",
        debug: (me = c.debug) != null ? me : {},
        shaderProps: null,
      },
      g = this.resolveTextRenderer(d, c.textRendererOverride);
    if (!g) throw new Error("No compatible text renderer found for ".concat(d.fontFamily));
    return new e3(this, d, g);
  }
  setBoundsMargin(c) {
    ((this.boundsMargin = Array.isArray(c) ? c : [c, c, c, c]), this.root.setUpdateType(pe.RenderBounds));
  }
  resolveNodeDefaults(c) {
    var M,
      P,
      O,
      D,
      F,
      K,
      $,
      Q,
      ue,
      le,
      J,
      oe,
      x,
      Y,
      me,
      he,
      ve,
      I,
      re,
      ee,
      ge,
      de,
      se,
      ye,
      Ne,
      ht,
      rn,
      Zt,
      Ft,
      cn,
      Tn,
      j,
      At,
      qn,
      bt,
      Sn,
      Vt,
      wn,
      br,
      or,
      fe,
      Wr,
      xr,
      ar,
      di,
      An,
      je,
      ur,
      As,
      Th,
      Sh,
      Ua,
      ja;
    const a = (M = c.color) != null ? M : 4294967295,
      d = (D = (O = (P = c.colorTl) != null ? P : c.colorTop) != null ? O : c.colorLeft) != null ? D : a,
      g = ($ = (K = (F = c.colorTr) != null ? F : c.colorTop) != null ? K : c.colorRight) != null ? $ : a,
      T =
        (le = (ue = (Q = c.colorBl) != null ? Q : c.colorBottom) != null ? ue : c.colorLeft) != null ? le : a,
      S =
        (x = (oe = (J = c.colorBr) != null ? J : c.colorBottom) != null ? oe : c.colorRight) != null ? x : a;
    let h = {};
    return (
      this.options.inspector === !0 && (h = t3((Y = c.data) != null ? Y : {})),
      {
        x: (me = c.x) != null ? me : 0,
        y: (he = c.y) != null ? he : 0,
        width: (ve = c.width) != null ? ve : 0,
        height: (I = c.height) != null ? I : 0,
        alpha: (re = c.alpha) != null ? re : 1,
        autosize: (ee = c.autosize) != null ? ee : !1,
        boundsMargin: (ge = c.boundsMargin) != null ? ge : null,
        clipping: (de = c.clipping) != null ? de : !1,
        color: a,
        colorTop: (se = c.colorTop) != null ? se : a,
        colorBottom: (ye = c.colorBottom) != null ? ye : a,
        colorLeft: (Ne = c.colorLeft) != null ? Ne : a,
        colorRight: (ht = c.colorRight) != null ? ht : a,
        colorBl: T,
        colorBr: S,
        colorTl: d,
        colorTr: g,
        zIndex: (rn = c.zIndex) != null ? rn : 0,
        zIndexLocked: (Zt = c.zIndexLocked) != null ? Zt : 0,
        parent: (Ft = c.parent) != null ? Ft : null,
        texture: (cn = c.texture) != null ? cn : null,
        textureOptions: (Tn = c.textureOptions) != null ? Tn : {},
        shader: (j = c.shader) != null ? j : this.defShaderCtr,
        src: (At = c.src) != null ? At : null,
        srcHeight: c.srcHeight,
        srcWidth: c.srcWidth,
        srcX: c.srcX,
        srcY: c.srcY,
        scale: (qn = c.scale) != null ? qn : null,
        scaleX: (Sn = (bt = c.scaleX) != null ? bt : c.scale) != null ? Sn : 1,
        scaleY: (wn = (Vt = c.scaleY) != null ? Vt : c.scale) != null ? wn : 1,
        mount: (br = c.mount) != null ? br : 0,
        mountX: (fe = (or = c.mountX) != null ? or : c.mount) != null ? fe : 0,
        mountY: (xr = (Wr = c.mountY) != null ? Wr : c.mount) != null ? xr : 0,
        pivot: (ar = c.pivot) != null ? ar : 0.5,
        pivotX: (An = (di = c.pivotX) != null ? di : c.pivot) != null ? An : 0.5,
        pivotY: (ur = (je = c.pivotY) != null ? je : c.pivot) != null ? ur : 0.5,
        rotation: (As = c.rotation) != null ? As : 0,
        rtt: (Th = c.rtt) != null ? Th : !1,
        data: h,
        preventCleanup: (Sh = c.preventCleanup) != null ? Sh : !1,
        imageType: c.imageType,
        interactive: (Ua = c.interactive) != null ? Ua : !1,
        strictBounds: (ja = c.strictBounds) != null ? ja : this.strictBounds,
      }
    );
  }
  cleanup() {
    this.txMemManager.cleanup();
  }
}
class i3 extends ws {
  constructor(a, d) {
    var Q, ue, le, J, oe, x, Y, me, he, ve, I, re, ee;
    super();
    _(this, "root");
    _(this, "canvas");
    _(this, "settings");
    _(this, "stage");
    _(this, "inspector", null);
    const g = {
        criticalThreshold: ((Q = a.textureMemory) == null ? void 0 : Q.criticalThreshold) || 124e6,
        targetThresholdLevel: ((ue = a.textureMemory) == null ? void 0 : ue.targetThresholdLevel) || 0.5,
        cleanupInterval: ((le = a.textureMemory) == null ? void 0 : le.cleanupInterval) || 5e3,
        debugLogging: ((J = a.textureMemory) == null ? void 0 : J.debugLogging) || !1,
        baselineMemoryAllocation:
          ((oe = a.textureMemory) == null ? void 0 : oe.baselineMemoryAllocation) || 26e6,
        doNotExceedCriticalThreshold:
          ((x = a.textureMemory) == null ? void 0 : x.doNotExceedCriticalThreshold) || !1,
      },
      T = {
        appWidth: a.appWidth || 1920,
        appHeight: a.appHeight || 1080,
        textureMemory: g,
        boundsMargin: a.boundsMargin || 0,
        deviceLogicalPixelRatio: a.deviceLogicalPixelRatio || 1,
        devicePhysicalPixelRatio: a.devicePhysicalPixelRatio || window.devicePixelRatio,
        clearColor: (Y = a.clearColor) != null ? Y : 0,
        fpsUpdateInterval: a.fpsUpdateInterval || 0,
        targetFPS: a.targetFPS || 0,
        numImageWorkers: a.numImageWorkers !== void 0 ? a.numImageWorkers : 2,
        enableContextSpy: (me = a.enableContextSpy) != null ? me : !1,
        forceWebGL2: (he = a.forceWebGL2) != null ? he : !1,
        inspector: (ve = a.inspector) != null ? ve : !1,
        renderEngine: a.renderEngine,
        quadBufferSize: (I = a.quadBufferSize) != null ? I : 4 * 1024 * 1024,
        fontEngines: a.fontEngines,
        strictBounds: (re = a.strictBounds) != null ? re : !0,
        textureProcessingTimeLimit: a.textureProcessingTimeLimit || 42,
        canvas: a.canvas || document.createElement("canvas"),
        createImageBitmapSupport: a.createImageBitmapSupport || "full",
        maxRetryCount: (ee = a.maxRetryCount) != null ? ee : 5,
      };
    this.settings = T;
    const {
        appWidth: S,
        appHeight: h,
        deviceLogicalPixelRatio: M,
        devicePhysicalPixelRatio: P,
        inspector: O,
        canvas: D,
      } = T,
      F = S * M,
      K = h * M;
    ((this.canvas = D),
      (D.width = F * P),
      (D.height = K * P),
      (D.style.width = "".concat(F, "px")),
      (D.style.height = "".concat(K, "px")),
      (this.stage = new r3({
        appWidth: this.settings.appWidth,
        appHeight: this.settings.appHeight,
        boundsMargin: this.settings.boundsMargin,
        clearColor: this.settings.clearColor,
        canvas: this.canvas,
        deviceLogicalPixelRatio: this.settings.deviceLogicalPixelRatio,
        devicePhysicalPixelRatio: this.settings.devicePhysicalPixelRatio,
        enableContextSpy: this.settings.enableContextSpy,
        forceWebGL2: this.settings.forceWebGL2,
        fpsUpdateInterval: this.settings.fpsUpdateInterval,
        targetFPS: this.settings.targetFPS,
        numImageWorkers: this.settings.numImageWorkers,
        renderEngine: this.settings.renderEngine,
        textureMemory: g,
        eventBus: this,
        quadBufferSize: this.settings.quadBufferSize,
        fontEngines: this.settings.fontEngines,
        inspector: this.settings.inspector !== null,
        strictBounds: this.settings.strictBounds,
        textureProcessingTimeLimit: this.settings.textureProcessingTimeLimit,
        createImageBitmapSupport: this.settings.createImageBitmapSupport,
        maxRetryCount: this.settings.maxRetryCount,
      })),
      (this.root = this.stage.root));
    let $;
    if ((typeof d == "string" ? ($ = document.getElementById(d)) : ($ = d), !$))
      throw new Error("Could not find target element");
    $.appendChild(D);
  }
  createNode(a) {
    const d = this.stage.createNode(a);
    return this.inspector ? this.inspector.createNode(d) : d;
  }
  createTextNode(a) {
    const d = this.stage.createTextNode(a);
    return this.inspector ? this.inspector.createTextNode(d) : d;
  }
  destroyNode(a) {
    return (this.inspector && this.inspector.destroyNode(a.id), a.destroy());
  }
  createTexture(a, d) {
    return this.stage.txManager.createTexture(a, d);
  }
  createShader(a, d) {
    return this.stage.shManager.loadShader(a, d);
  }
  createDynamicShader(a) {
    return this.stage.shManager.loadDynamicShader({ effects: a });
  }
  createEffect(a, d, g) {
    return { name: g, type: a, props: d };
  }
  getNodeById(a) {
    var T;
    const d = (T = this.stage) == null ? void 0 : T.root;
    if (!d) return null;
    const g = S => {
      if (S.id === a) return S;
      for (const h of S.children) {
        const M = g(h);
        if (M) return M;
      }
      return null;
    };
    return g(d);
  }
  toggleFreeze() {
    throw new Error("Not implemented");
  }
  advanceFrame() {
    throw new Error("Not implemented");
  }
  getBufferInfo() {
    return this.stage.renderer.getBufferInfo();
  }
  rerender() {
    this.stage.requestRender();
  }
  cleanup() {
    this.stage.cleanup();
  }
  setClearColor(a) {
    this.stage.setClearColor(a);
  }
  get targetFPS() {
    return this.stage.options.targetFPS;
  }
  set targetFPS(a) {
    ((this.stage.options.targetFPS = a > 0 ? a : 0), this.stage.updateTargetFrameTime());
  }
}
class UI extends ws {
  constructor(a) {
    super();
    _(this, "fontFamily");
    _(this, "descriptors");
    _(this, "loaded", !1);
    _(this, "metrics", null);
    const { fontFamily: d, descriptors: g, metrics: T } = a;
    (T &&
      (this.metrics = {
        ascender: T.ascender / T.unitsPerEm,
        descender: T.descender / T.unitsPerEm,
        lineGap: T.lineGap / T.unitsPerEm,
      }),
      (this.fontFamily = d),
      (this.descriptors = { style: "normal", weight: "normal", stretch: "normal", ...g }));
  }
  static convertToCssFontFaceDescriptors(a) {
    return {
      style: a.style,
      weight: typeof a.weight == "number" ? "".concat(a.weight) : a.weight,
      stretch: a.stretch,
      unicodeRange: a.unicodeRange,
      featureSettings: a.featureSettings,
      display: a.display,
    };
  }
}
class s3 extends UI {
  constructor(a) {
    super(a);
    _(this, "fontFace");
    _(this, "fontUrl");
    const { fontFamily: d, fontUrl: g } = a,
      T = g.replace(/\(|\)/g, ""),
      S = this.descriptors;
    let h = {
      style: S.style,
      weight: typeof S.weight == "number" ? "".concat(S.weight) : S.weight,
      stretch: S.stretch,
      unicodeRange: S.unicodeRange,
      featureSettings: S.featureSettings,
      display: S.display,
    };
    for (const P in h) {
      const O = P;
      h[O] === void 0 && delete h[O];
    }
    const M = new FontFace(d, "url(".concat(T, ")"), h);
    (T.length > 0
      ? M.load()
          .then(() => {
            ((this.loaded = !0), this.emit("loaded"));
          })
          .catch(console.error)
      : ((this.loaded = !0), this.emit("loaded")),
      (this.fontFace = M),
      (this.fontUrl = g));
  }
}
class o3 {}
class jI extends o3 {
  constructor(a, d, g, T, S, h, M, P, O, D, F, K, $) {
    super();
    _(this, "glw");
    _(this, "options");
    _(this, "buffers");
    _(this, "shader");
    _(this, "shaderProps");
    _(this, "alpha");
    _(this, "clippingRect");
    _(this, "dimensions");
    _(this, "bufferIdx");
    _(this, "zIndex");
    _(this, "renderToTexture");
    _(this, "parentHasRenderTexture");
    _(this, "framebufferDimensions");
    _(this, "length", 0);
    _(this, "numQuads", 0);
    _(this, "textures", []);
    _(this, "maxTextures");
    ((this.glw = a),
      (this.options = d),
      (this.buffers = g),
      (this.shader = T),
      (this.shaderProps = S),
      (this.alpha = h),
      (this.clippingRect = M),
      (this.dimensions = P),
      (this.bufferIdx = O),
      (this.zIndex = D),
      (this.renderToTexture = F),
      (this.parentHasRenderTexture = K),
      (this.framebufferDimensions = $),
      (this.maxTextures = T.supportsIndexedTextures ? a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS) : 1));
  }
  addTexture(a) {
    const { textures: d, maxTextures: g } = this;
    let T = -1;
    const S = d.length;
    for (let h = 0; h < S; h++)
      if (d[h] === a) {
        T = h;
        break;
      }
    return T !== -1 ? T : S >= g ? 4294967295 : (this.textures.push(a), S);
  }
  draw() {
    const { glw: a, shader: d, shaderProps: g, options: T } = this,
      { shManager: S } = T;
    (S.useShader(d), d.bindRenderOp(this, g));
    const h = (this.bufferIdx / 32) * 6 * 2;
    if (this.clippingRect.valid) {
      const { x: M, y: P, width: O, height: D } = this.clippingRect,
        F = this.parentHasRenderTexture ? 1 : T.pixelRatio,
        K = T.canvas.height,
        $ = Math.round(M * F),
        Q = Math.round(O * F),
        ue = Math.round(D * F);
      let le = Math.round(K - ue - P * F);
      (this.parentHasRenderTexture &&
        (le = this.framebufferDimensions ? this.framebufferDimensions.height - this.dimensions.height : 0),
        a.setScissorTest(!0),
        a.scissor($, le, Q, ue));
    } else a.setScissorTest(!1);
    a.drawElements(a.TRIANGLES, 6 * this.numQuads, a.UNSIGNED_SHORT, h);
  }
}
function a3(f) {
  const c = {
    MAX_RENDERBUFFER_SIZE: 0,
    MAX_TEXTURE_SIZE: 0,
    MAX_VIEWPORT_DIMS: 0,
    MAX_VERTEX_TEXTURE_IMAGE_UNITS: 0,
    MAX_TEXTURE_IMAGE_UNITS: 0,
    MAX_COMBINED_TEXTURE_IMAGE_UNITS: 0,
    MAX_VERTEX_ATTRIBS: 0,
    MAX_VARYING_VECTORS: 0,
    MAX_VERTEX_UNIFORM_VECTORS: 0,
    MAX_FRAGMENT_UNIFORM_VECTORS: 0,
  };
  return (
    Object.keys(c).forEach(d => {
      c[d] = f.getParameter(f[d]);
    }),
    c
  );
}
function u3(f) {
  const c = {
    ANGLE_instanced_arrays: null,
    WEBGL_compressed_texture_s3tc: null,
    WEBGL_compressed_texture_astc: null,
    WEBGL_compressed_texture_etc: null,
    WEBGL_compressed_texture_etc1: null,
    WEBGL_compressed_texture_pvrtc: null,
    WEBKIT_WEBGL_compressed_texture_pvrtc: null,
    WEBGL_compressed_texture_s3tc_srgb: null,
    OES_vertex_array_object: null,
  };
  return (
    Object.keys(c).forEach(d => {
      c[d] = f.getExtension(d);
    }),
    c
  );
}
function l3(f, c) {
  const a = ~~(c / 80),
    d = new Uint16Array(a * 6);
  for (let T = 0, S = 0; T < a; T += 6, S += 4)
    ((d[T] = S),
      (d[T + 1] = S + 1),
      (d[T + 2] = S + 2),
      (d[T + 3] = S + 2),
      (d[T + 4] = S + 1),
      (d[T + 5] = S + 3));
  const g = f.createBuffer();
  f.elementArrayBufferData(g, d, f.STATIC_DRAW);
}
function c3(f) {
  return (
    f !== null &&
    ((typeof f == "object" && f.constructor && f.constructor.name === "HTMLImageElement") ||
      (typeof HTMLImageElement < "u" && f instanceof HTMLImageElement))
  );
}
const d3 = new Uint8Array([0, 0, 0, 0]);
class lv extends Qb {
  constructor(a, d, g) {
    super(d, g);
    _(this, "glw");
    _(this, "_nativeCtxTexture", null);
    _(this, "_w", 0);
    _(this, "_h", 0);
    _(this, "txCoordX1", 0);
    _(this, "txCoordY1", 0);
    _(this, "txCoordX2", 1);
    _(this, "txCoordY2", 1);
    this.glw = a;
  }
  checkGLError() {
    if (this.state === "failed") return !0;
    const a = this.glw.getError();
    return a !== 0
      ? ((this.state = "failed"),
        this.textureSource.setState("failed", new Error("WebGL Error: ".concat(a))),
        !0)
      : !1;
  }
  get ctxTexture() {
    return this.state === "freed" ? (this.load(), null) : (this._nativeCtxTexture, this._nativeCtxTexture);
  }
  get w() {
    return this._w;
  }
  get h() {
    return this._h;
  }
  async load() {
    if (this.state === "loading" || this.state === "loaded") return Promise.resolve();
    if (
      ((this.state = "loading"),
      this.textureSource.setState("loading"),
      (this._nativeCtxTexture = this.createNativeCtxTexture()),
      this._nativeCtxTexture === null)
    ) {
      ((this.state = "failed"),
        this.textureSource.setState("failed", new Error("WebGL Texture creation failed")));
      return;
    }
    try {
      const { width: a, height: d } = await this.onLoadRequest();
      if (this.state === "freed") return;
      ((this.state = "loaded"),
        (this._w = a),
        (this._h = d),
        this.textureSource.setState("loaded", { width: a, height: d }),
        this.textureSource.freeTextureData());
    } catch (a) {
      if (this.state === "freed") return;
      ((this.state = "failed"), this.textureSource.setState("failed"));
    }
  }
  async onLoadRequest() {
    var O, D;
    const { glw: a } = this,
      d = this.textureSource.textureData;
    if (this.state === "failed") return { width: 0, height: 0 };
    if (d === null || this._nativeCtxTexture === null)
      return (
        (this.state = "failed"),
        this.textureSource.setState("failed", new Error("No texture data available")),
        { width: 0, height: 0 }
      );
    (a.texImage2D(0, a.RGBA, 1, 1, 0, a.RGBA, a.UNSIGNED_BYTE, null), this.setTextureMemUse(d3.byteLength));
    let g = 0,
      T = 0;
    if ((a.activeTexture(0), this.checkGLError() === !0)) return { width: 0, height: 0 };
    const S = d.data,
      h = a.RGBA,
      M = 4,
      P = 1.1;
    if ((typeof ImageBitmap < "u" && S instanceof ImageBitmap) || S instanceof ImageData || c3(S)) {
      if (
        ((g = S.width),
        (T = S.height),
        a.bindTexture(this._nativeCtxTexture),
        a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !!d.premultiplyAlpha),
        a.texImage2D(0, h, h, a.UNSIGNED_BYTE, S),
        this.checkGLError() === !0)
      )
        return { width: 0, height: 0 };
      this.setTextureMemUse(T * g * M * P);
    } else if (S && "mipmaps" in S && S.mipmaps) {
      const { mipmaps: F, type: K, blockInfo: $ } = S;
      if ((Pb[K](a, this._nativeCtxTexture, S), this.checkGLError() === !0)) return { width: 0, height: 0 };
      ((g = S.width),
        (T = S.height),
        (this.txCoordX2 = g / (Math.ceil(g / $.width) * $.width)),
        (this.txCoordY2 = T / (Math.ceil(T / $.height) * $.height)),
        this.setTextureMemUse((D = (O = F[0]) == null ? void 0 : O.byteLength) != null ? D : 0));
    } else if (S && S instanceof Uint8Array) {
      if (
        ((g = 1),
        (T = 1),
        a.bindTexture(this._nativeCtxTexture),
        a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !!d.premultiplyAlpha),
        a.texImage2D(0, h, g, T, 0, h, a.UNSIGNED_BYTE, S),
        this.checkGLError() === !0)
      )
        return { width: 0, height: 0 };
      this.setTextureMemUse(g * T * M);
    } else
      return (
        console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned", d),
        (this.state = "failed"),
        this.textureSource.setState("failed", new Error("Unexpected texture data")),
        { width: 0, height: 0 }
      );
    return { width: g, height: T };
  }
  free() {
    this.state !== "freed" && ((this.state = "freed"), this.textureSource.setState("freed"), this.release());
  }
  release() {
    ((this._w = 0),
      (this._h = 0),
      this._nativeCtxTexture !== null &&
        (this.glw.deleteTexture(this._nativeCtxTexture),
        this.setTextureMemUse(0),
        (this._nativeCtxTexture = null)),
      this.textureSource.freeTextureData());
  }
  createNativeCtxTexture() {
    const { glw: a } = this,
      d = a.createTexture();
    return !d ||
      (a.activeTexture(0),
      a.bindTexture(d),
      a.texParameteri(a.TEXTURE_MAG_FILTER, a.LINEAR),
      a.texParameteri(a.TEXTURE_MIN_FILTER, a.LINEAR),
      a.texParameteri(a.TEXTURE_WRAP_S, a.CLAMP_TO_EDGE),
      a.texParameteri(a.TEXTURE_WRAP_T, a.CLAMP_TO_EDGE),
      a.getError() !== 0)
      ? null
      : d;
  }
}
class f3 extends lv {
  constructor(c, a, d) {
    super(c, a, d);
  }
  async onLoadRequest() {
    var a, d;
    const c = this.textureSource.textureData;
    return c.data instanceof Uint8Array
      ? { width: 1, height: 1 }
      : {
          width: ((a = c.data) == null ? void 0 : a.width) || 0,
          height: ((d = c.data) == null ? void 0 : d.height) || 0,
        };
  }
}
class BI {
  constructor(c) {
    _(this, "config");
    this.config = c;
  }
  getBuffer(c) {
    var a;
    return (a = this.config.find(d => d.attributes[c])) == null ? void 0 : a.buffer;
  }
  getAttributeInfo(c) {
    var a;
    return (a = this.config.find(d => d.attributes[c])) == null ? void 0 : a.attributes[c];
  }
}
function h3(f) {
  return self.WebGL2RenderingContext && f instanceof self.WebGL2RenderingContext;
}
class p3 {
  constructor(c) {
    _(this, "gl");
    _(this, "activeTextureUnit", 0);
    _(this, "texture2dUnits");
    _(this, "texture2dParams", new WeakMap());
    _(this, "scissorEnabled");
    _(this, "scissorX");
    _(this, "scissorY");
    _(this, "scissorWidth");
    _(this, "scissorHeight");
    _(this, "blendEnabled");
    _(this, "blendSrcRgb");
    _(this, "blendDstRgb");
    _(this, "blendSrcAlpha");
    _(this, "blendDstAlpha");
    _(this, "boundArrayBuffer");
    _(this, "boundElementArrayBuffer");
    _(this, "curProgram");
    _(this, "canvas");
    _(this, "MAX_RENDERBUFFER_SIZE");
    _(this, "MAX_TEXTURE_SIZE");
    _(this, "MAX_VIEWPORT_DIMS");
    _(this, "MAX_VERTEX_TEXTURE_IMAGE_UNITS");
    _(this, "MAX_TEXTURE_IMAGE_UNITS");
    _(this, "MAX_COMBINED_TEXTURE_IMAGE_UNITS");
    _(this, "MAX_VERTEX_ATTRIBS");
    _(this, "MAX_VARYING_VECTORS");
    _(this, "MAX_VERTEX_UNIFORM_VECTORS");
    _(this, "MAX_FRAGMENT_UNIFORM_VECTORS");
    _(this, "TEXTURE_MAG_FILTER");
    _(this, "TEXTURE_MIN_FILTER");
    _(this, "TEXTURE_WRAP_S");
    _(this, "TEXTURE_WRAP_T");
    _(this, "LINEAR");
    _(this, "LINEAR_MIPMAP_LINEAR");
    _(this, "CLAMP_TO_EDGE");
    _(this, "RGB");
    _(this, "RGBA");
    _(this, "UNSIGNED_BYTE");
    _(this, "UNPACK_PREMULTIPLY_ALPHA_WEBGL");
    _(this, "UNPACK_FLIP_Y_WEBGL");
    _(this, "FLOAT");
    _(this, "TRIANGLES");
    _(this, "UNSIGNED_SHORT");
    _(this, "ONE");
    _(this, "ONE_MINUS_SRC_ALPHA");
    _(this, "VERTEX_SHADER");
    _(this, "FRAGMENT_SHADER");
    _(this, "STATIC_DRAW");
    _(this, "COMPILE_STATUS");
    _(this, "LINK_STATUS");
    _(this, "DYNAMIC_DRAW");
    _(this, "COLOR_ATTACHMENT0");
    _(this, "INVALID_ENUM");
    _(this, "INVALID_OPERATION");
    ((this.gl = c), (this.activeTextureUnit = c.getParameter(c.ACTIVE_TEXTURE) - c.TEXTURE0));
    const a = c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS);
    ((this.texture2dUnits = new Array(a)
      .fill(void 0)
      .map((g, T) => (this.activeTexture(T), c.getParameter(c.TEXTURE_BINDING_2D)))),
      this.activeTexture(this.activeTextureUnit),
      (this.scissorEnabled = c.isEnabled(c.SCISSOR_TEST)));
    const d = c.getParameter(c.SCISSOR_BOX);
    ((this.scissorX = d[0]),
      (this.scissorY = d[1]),
      (this.scissorWidth = d[2]),
      (this.scissorHeight = d[3]),
      (this.blendEnabled = c.isEnabled(c.BLEND)),
      (this.blendSrcRgb = c.getParameter(c.BLEND_SRC_RGB)),
      (this.blendDstRgb = c.getParameter(c.BLEND_DST_RGB)),
      (this.blendSrcAlpha = c.getParameter(c.BLEND_SRC_ALPHA)),
      (this.blendDstAlpha = c.getParameter(c.BLEND_DST_ALPHA)),
      (this.boundArrayBuffer = c.getParameter(c.ARRAY_BUFFER_BINDING)),
      (this.boundElementArrayBuffer = c.getParameter(c.ELEMENT_ARRAY_BUFFER_BINDING)),
      (this.curProgram = c.getParameter(c.CURRENT_PROGRAM)),
      (this.canvas = c.canvas),
      (this.MAX_RENDERBUFFER_SIZE = c.MAX_RENDERBUFFER_SIZE),
      (this.MAX_TEXTURE_SIZE = c.MAX_TEXTURE_SIZE),
      (this.MAX_VIEWPORT_DIMS = c.MAX_VIEWPORT_DIMS),
      (this.MAX_VERTEX_TEXTURE_IMAGE_UNITS = c.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
      (this.MAX_TEXTURE_IMAGE_UNITS = c.MAX_TEXTURE_IMAGE_UNITS),
      (this.MAX_COMBINED_TEXTURE_IMAGE_UNITS = c.MAX_COMBINED_TEXTURE_IMAGE_UNITS),
      (this.MAX_VERTEX_ATTRIBS = c.MAX_VERTEX_ATTRIBS),
      (this.MAX_VARYING_VECTORS = c.MAX_VARYING_VECTORS),
      (this.MAX_VERTEX_UNIFORM_VECTORS = c.MAX_VERTEX_UNIFORM_VECTORS),
      (this.MAX_FRAGMENT_UNIFORM_VECTORS = c.MAX_FRAGMENT_UNIFORM_VECTORS),
      (this.TEXTURE_MAG_FILTER = c.TEXTURE_MAG_FILTER),
      (this.TEXTURE_MIN_FILTER = c.TEXTURE_MIN_FILTER),
      (this.TEXTURE_WRAP_S = c.TEXTURE_WRAP_S),
      (this.TEXTURE_WRAP_T = c.TEXTURE_WRAP_T),
      (this.LINEAR = c.LINEAR),
      (this.LINEAR_MIPMAP_LINEAR = c.LINEAR_MIPMAP_LINEAR),
      (this.CLAMP_TO_EDGE = c.CLAMP_TO_EDGE),
      (this.RGB = c.RGB),
      (this.RGBA = c.RGBA),
      (this.UNSIGNED_BYTE = c.UNSIGNED_BYTE),
      (this.UNPACK_PREMULTIPLY_ALPHA_WEBGL = c.UNPACK_PREMULTIPLY_ALPHA_WEBGL),
      (this.UNPACK_FLIP_Y_WEBGL = c.UNPACK_FLIP_Y_WEBGL),
      (this.FLOAT = c.FLOAT),
      (this.TRIANGLES = c.TRIANGLES),
      (this.UNSIGNED_SHORT = c.UNSIGNED_SHORT),
      (this.ONE = c.ONE),
      (this.ONE_MINUS_SRC_ALPHA = c.ONE_MINUS_SRC_ALPHA),
      (this.MAX_VERTEX_TEXTURE_IMAGE_UNITS = c.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
      (this.TRIANGLES = c.TRIANGLES),
      (this.UNSIGNED_SHORT = c.UNSIGNED_SHORT),
      (this.VERTEX_SHADER = c.VERTEX_SHADER),
      (this.FRAGMENT_SHADER = c.FRAGMENT_SHADER),
      (this.STATIC_DRAW = c.STATIC_DRAW),
      (this.COMPILE_STATUS = c.COMPILE_STATUS),
      (this.LINK_STATUS = c.LINK_STATUS),
      (this.DYNAMIC_DRAW = c.DYNAMIC_DRAW),
      (this.COLOR_ATTACHMENT0 = c.COLOR_ATTACHMENT0),
      (this.INVALID_ENUM = c.INVALID_ENUM),
      (this.INVALID_OPERATION = c.INVALID_OPERATION));
  }
  isWebGl2() {
    return h3(this.gl);
  }
  activeTexture(c) {
    const { gl: a } = this;
    this.activeTextureUnit !== c && (a.activeTexture(c + a.TEXTURE0), (this.activeTextureUnit = c));
  }
  bindTexture(c) {
    const { gl: a, activeTextureUnit: d, texture2dUnits: g } = this;
    g[d] !== c && ((g[d] = c), a.bindTexture(this.gl.TEXTURE_2D, c));
  }
  _getActiveTexture() {
    const { activeTextureUnit: c, texture2dUnits: a } = this;
    return a[c];
  }
  texParameteri(c, a) {
    const { gl: d, texture2dParams: g } = this,
      T = this._getActiveTexture();
    if (!T) throw new Error("No active texture");
    let S = g.get(T);
    (S || ((S = {}), g.set(T, S)), S[c] !== a && ((S[c] = a), d.texParameteri(d.TEXTURE_2D, c, a)));
  }
  texImage2D(c, a, d, g, T, S, h, M) {
    const { gl: P } = this;
    S ? P.texImage2D(P.TEXTURE_2D, c, a, d, g, T, S, h, M) : P.texImage2D(P.TEXTURE_2D, c, a, d, g, T);
  }
  compressedTexImage2D(c, a, d, g, T, S) {
    const { gl: h } = this;
    h.compressedTexImage2D(h.TEXTURE_2D, c, a, d, g, T, S);
  }
  pixelStorei(c, a) {
    const { gl: d } = this;
    d.pixelStorei(c, a);
  }
  generateMipmap() {
    const { gl: c } = this;
    c.generateMipmap(c.TEXTURE_2D);
  }
  createTexture() {
    const { gl: c } = this;
    return c.createTexture();
  }
  deleteTexture(c) {
    const { gl: a } = this;
    (c && this.texture2dParams.delete(c), a.deleteTexture(c));
  }
  deleteFramebuffer(c) {
    this.gl.deleteFramebuffer(c);
  }
  viewport(c, a, d, g) {
    const { gl: T } = this;
    T.viewport(c, a, d, g);
  }
  clearColor(c, a, d, g) {
    const { gl: T } = this;
    T.clearColor(c, a, d, g);
  }
  setScissorTest(c) {
    const { gl: a, scissorEnabled: d } = this;
    c !== d && (c ? a.enable(a.SCISSOR_TEST) : a.disable(a.SCISSOR_TEST), (this.scissorEnabled = c));
  }
  scissor(c, a, d, g) {
    const { gl: T, scissorX: S, scissorY: h, scissorWidth: M, scissorHeight: P } = this;
    (c !== S || a !== h || d !== M || g !== P) &&
      (T.scissor(c, a, d, g),
      (this.scissorX = c),
      (this.scissorY = a),
      (this.scissorWidth = d),
      (this.scissorHeight = g));
  }
  setBlend(c) {
    const { gl: a, blendEnabled: d } = this;
    c !== d && (c ? a.enable(a.BLEND) : a.disable(a.BLEND), (this.blendEnabled = c));
  }
  blendFunc(c, a) {
    const { gl: d, blendSrcRgb: g, blendDstRgb: T, blendSrcAlpha: S, blendDstAlpha: h } = this;
    (c !== g || a !== T || c !== S || a !== h) &&
      (d.blendFunc(c, a),
      (this.blendSrcRgb = c),
      (this.blendDstRgb = a),
      (this.blendSrcAlpha = c),
      (this.blendDstAlpha = a));
  }
  createBuffer() {
    const { gl: c } = this;
    return c.createBuffer();
  }
  createFramebuffer() {
    const { gl: c } = this;
    return c.createFramebuffer();
  }
  bindFramebuffer(c) {
    const { gl: a } = this;
    a.bindFramebuffer(a.FRAMEBUFFER, c);
  }
  framebufferTexture2D(c, a, d) {
    const { gl: g } = this;
    g.framebufferTexture2D(g.FRAMEBUFFER, c, g.TEXTURE_2D, a, d);
  }
  clear() {
    const { gl: c } = this;
    c.clear(c.COLOR_BUFFER_BIT);
  }
  arrayBufferData(c, a, d) {
    const { gl: g, boundArrayBuffer: T } = this;
    (T !== c && (g.bindBuffer(g.ARRAY_BUFFER, c), (this.boundArrayBuffer = c)),
      g.bufferData(g.ARRAY_BUFFER, a, d));
  }
  elementArrayBufferData(c, a, d) {
    const { gl: g, boundElementArrayBuffer: T } = this;
    (T !== c && (g.bindBuffer(g.ELEMENT_ARRAY_BUFFER, c), (this.boundElementArrayBuffer = c)),
      g.bufferData(g.ELEMENT_ARRAY_BUFFER, a, d));
  }
  vertexAttribPointer(c, a, d, g, T, S, h) {
    const { gl: M, boundArrayBuffer: P } = this;
    (P !== c && (M.bindBuffer(M.ARRAY_BUFFER, c), (this.boundArrayBuffer = c)),
      M.vertexAttribPointer(a, d, g, T, S, h));
  }
  getUniformLocations(c) {
    const a = this.gl,
      d = a.getProgramParameter(c, a.ACTIVE_UNIFORMS),
      g = {};
    for (let T = 0; T < d; T++) {
      let h = a.getActiveUniform(c, T).name.replace(/\[.*?\]/g, "");
      g[h] = a.getUniformLocation(c, h);
    }
    return g;
  }
  getAttributeLocations(c) {
    const a = this.gl,
      d = a.getProgramParameter(c, a.ACTIVE_ATTRIBUTES),
      g = [];
    for (let T = 0; T < d; T++) {
      const { name: S } = a.getActiveAttrib(c, T);
      g[a.getAttribLocation(c, S)] = S;
    }
    return g;
  }
  useProgram(c) {
    const { gl: a, curProgram: d } = this;
    d !== c && (a.useProgram(c), (this.curProgram = c));
  }
  uniform1f(c, a) {
    const { gl: d } = this;
    d.uniform1f(c, a);
  }
  uniform1fv(c, a) {
    const { gl: d } = this;
    d.uniform1fv(c, a);
  }
  uniform1i(c, a) {
    const { gl: d } = this;
    d.uniform1i(c, a);
  }
  uniform1iv(c, a) {
    const { gl: d } = this;
    d.uniform1iv(c, a);
  }
  uniform2f(c, a, d) {
    const { gl: g } = this;
    g.uniform2f(c, a, d);
  }
  uniform2fv(c, a) {
    const { gl: d } = this;
    d.uniform2fv(c, a);
  }
  uniform2i(c, a, d) {
    const { gl: g } = this;
    g.uniform2i(c, a, d);
  }
  uniform2iv(c, a) {
    const { gl: d } = this;
    d.uniform2iv(c, a);
  }
  uniform3f(c, a, d, g) {
    const { gl: T } = this;
    T.uniform3f(c, a, d, g);
  }
  uniform3fv(c, a) {
    const { gl: d } = this;
    d.uniform3fv(c, a);
  }
  uniform3i(c, a, d, g) {
    const { gl: T } = this;
    T.uniform3i(c, a, d, g);
  }
  uniform3iv(c, a) {
    const { gl: d } = this;
    d.uniform3iv(c, a);
  }
  uniform4f(c, a, d, g, T) {
    const { gl: S } = this;
    S.uniform4f(c, a, d, g, T);
  }
  uniform4fv(c, a) {
    const { gl: d } = this;
    d.uniform4fv(c, a);
  }
  uniform4i(c, a, d, g, T) {
    const { gl: S } = this;
    S.uniform4i(c, a, d, g, T);
  }
  uniform4iv(c, a) {
    const { gl: d } = this;
    d.uniform4iv(c, a);
  }
  uniformMatrix2fv(c, a) {
    const { gl: d } = this;
    d.uniformMatrix2fv(c, !1, a);
  }
  uniformMatrix3fv(c, a) {
    const { gl: d } = this;
    d.uniformMatrix3fv(c, !1, a);
  }
  uniformMatrix4fv(c, a) {
    const { gl: d } = this;
    d.uniformMatrix4fv(c, !1, a);
  }
  getParameter(c) {
    const { gl: a } = this;
    return a.getParameter(c);
  }
  drawElements(c, a, d, g) {
    const { gl: T } = this;
    T.drawElements(c, a, d, g);
  }
  getExtension(c) {
    const { gl: a } = this;
    return a.getExtension(c);
  }
  getError() {
    const { gl: c } = this;
    return c.getError();
  }
  createVertexArray() {
    const { gl: c } = this;
    return c.createVertexArray();
  }
  bindVertexArray(c) {
    const { gl: a } = this;
    a.bindVertexArray(c);
  }
  getAttribLocation(c, a) {
    const { gl: d } = this;
    return d.getAttribLocation(c, a);
  }
  getUniformLocation(c, a) {
    const { gl: d } = this;
    return d.getUniformLocation(c, a);
  }
  enableVertexAttribArray(c) {
    const { gl: a } = this;
    a.enableVertexAttribArray(c);
  }
  disableVertexAttribArray(c) {
    const { gl: a } = this;
    a.disableVertexAttribArray(c);
  }
  createShader(c) {
    const { gl: a } = this;
    return a.createShader(c);
  }
  compileShader(c) {
    const { gl: a } = this;
    a.compileShader(c);
  }
  attachShader(c, a) {
    const { gl: d } = this;
    d.attachShader(c, a);
  }
  linkProgram(c) {
    const { gl: a } = this;
    a.linkProgram(c);
  }
  deleteProgram(c) {
    const { gl: a } = this;
    a.deleteProgram(c);
  }
  getShaderParameter(c, a) {
    const { gl: d } = this;
    return d.getShaderParameter(c, a);
  }
  getShaderInfoLog(c) {
    const { gl: a } = this;
    return a.getShaderInfoLog(c);
  }
  createProgram() {
    const { gl: c } = this;
    return c.createProgram();
  }
  getProgramParameter(c, a) {
    const { gl: d } = this;
    return d.getProgramParameter(c, a);
  }
  getProgramInfoLog(c) {
    const { gl: a } = this;
    return a.getProgramInfoLog(c);
  }
  shaderSource(c, a) {
    const { gl: d } = this;
    d.shaderSource(c, a);
  }
  deleteShader(c) {
    const { gl: a } = this;
    a.deleteShader(c);
  }
  checkError(c) {
    const a = this.getError();
    if (a !== 0) {
      let d = "UNKNOWN_ERROR";
      switch (a) {
        case this.INVALID_ENUM:
          d = "INVALID_ENUM";
          break;
        case 1281:
          d = "INVALID_VALUE";
          break;
        case this.INVALID_OPERATION:
          d = "INVALID_OPERATION";
          break;
        case 1285:
          d = "OUT_OF_MEMORY";
          break;
        case 37442:
          d = "CONTEXT_LOST_WEBGL";
          break;
      }
      const g = "WebGL ".concat(d, " (0x").concat(a.toString(16), ") during ").concat(c);
      return { error: a, errorName: d, message: g };
    }
    return null;
  }
}
class g3 extends lv {
  constructor(a, d, g) {
    super(a, d, g);
    _(this, "framebuffer", null);
  }
  async onLoadRequest() {
    const { glw: a } = this,
      d = (this._nativeCtxTexture = this.createNativeCtxTexture());
    if (!d) throw new Error("Failed to create native texture for RenderTexture");
    const { width: g, height: T } = this.textureSource;
    return (
      (this.framebuffer = a.createFramebuffer()),
      a.texImage2D(0, a.RGBA, g, T, 0, a.RGBA, a.UNSIGNED_BYTE, null),
      this.setTextureMemUse(g * T * 4),
      a.bindFramebuffer(this.framebuffer),
      a.framebufferTexture2D(a.COLOR_ATTACHMENT0, d, 0),
      a.bindFramebuffer(null),
      { width: g, height: T }
    );
  }
  free() {
    (super.free(), this.glw.deleteFramebuffer(this.framebuffer), (this.framebuffer = null));
  }
}
class m3 extends Zb {
  constructor(a) {
    super(a);
    _(this, "glw");
    _(this, "system");
    _(this, "quadBuffer");
    _(this, "fQuadBuffer");
    _(this, "uiQuadBuffer");
    _(this, "renderOps", []);
    _(this, "curBufferIdx", 0);
    _(this, "curRenderOp", null);
    _(this, "rttNodes", []);
    _(this, "activeRttNode", null);
    _(this, "defShaderCtrl");
    _(this, "defaultShader");
    _(this, "quadBufferCollection");
    _(this, "clearColor", { raw: 0, normalized: [0, 0, 0, 0] });
    _(this, "quadBufferUsage", 0);
    _(this, "numQuadsRendered", 0);
    _(this, "renderToTextureActive", !1);
    ((this.quadBuffer = new ArrayBuffer(this.stage.options.quadBufferSize)),
      (this.fQuadBuffer = new Float32Array(this.quadBuffer)),
      (this.uiQuadBuffer = new Uint32Array(this.quadBuffer)),
      (this.mode = "webgl"));
    const { canvas: d, clearColor: g, bufferMemory: T } = a,
      S = qL(d, a.forceWebGL2, a.contextSpy),
      h = (this.glw = new p3(S));
    (h.viewport(0, 0, d.width, d.height),
      this.updateClearColor(g),
      h.setBlend(!0),
      h.blendFunc(h.ONE, h.ONE_MINUS_SRC_ALPHA),
      l3(h, T),
      (this.system = { parameters: a3(this.glw), extensions: u3(this.glw) }),
      (this.shManager.renderer = this),
      (this.defShaderCtrl = this.shManager.loadShader("DefaultShader")),
      (this.defaultShader = this.defShaderCtrl.shader));
    const M = h.createBuffer(),
      P = 8 * Float32Array.BYTES_PER_ELEMENT;
    this.quadBufferCollection = new BI([
      {
        buffer: M,
        attributes: {
          a_position: { name: "a_position", size: 2, type: h.FLOAT, normalized: !1, stride: P, offset: 0 },
          a_textureCoordinate: {
            name: "a_textureCoordinate",
            size: 2,
            type: h.FLOAT,
            normalized: !1,
            stride: P,
            offset: 2 * Float32Array.BYTES_PER_ELEMENT,
          },
          a_color: {
            name: "a_color",
            size: 4,
            type: h.UNSIGNED_BYTE,
            normalized: !0,
            stride: P,
            offset: 4 * Float32Array.BYTES_PER_ELEMENT,
          },
          a_textureIndex: {
            name: "a_textureIndex",
            size: 1,
            type: h.FLOAT,
            normalized: !1,
            stride: P,
            offset: 5 * Float32Array.BYTES_PER_ELEMENT,
          },
          a_nodeCoordinate: {
            name: "a_nodeCoordinate",
            size: 2,
            type: h.FLOAT,
            normalized: !1,
            stride: P,
            offset: 6 * Float32Array.BYTES_PER_ELEMENT,
          },
        },
      },
    ]);
  }
  reset() {
    const { glw: a } = this;
    ((this.curBufferIdx = 0),
      (this.curRenderOp = null),
      (this.renderOps.length = 0),
      a.setScissorTest(!1),
      a.clear());
  }
  getShaderManager() {
    return this.shManager;
  }
  createCtxTexture(a) {
    return a instanceof Zf
      ? new f3(this.glw, this.txMemManager, a)
      : a instanceof eh
        ? new g3(this.glw, this.txMemManager, a)
        : new lv(this.glw, this.txMemManager, a);
  }
  addQuad(a) {
    var ue, le;
    const { fQuadBuffer: d, uiQuadBuffer: g } = this;
    let T = a.texture;
    if (a.shader !== this.defaultShader) {
      if (Jf(a.shaderProps, "$dimensions") == !0) {
        const J = a.shaderProps.$dimensions;
        ((J.width = a.width), (J.height = a.height));
      }
      Jf(a.shaderProps, "$alpha") === !0 && (a.shaderProps.$alpha = a.alpha);
    }
    let { curBufferIdx: S, curRenderOp: h } = this;
    const M = { width: a.width, height: a.height };
    this.reuseRenderOp(a) === !1 &&
      (this.newRenderOp(
        a.shader,
        a.shaderProps,
        a.alpha,
        M,
        a.clippingRect,
        S,
        a.rtt,
        a.parentHasRenderTexture,
        a.framebufferDimensions,
      ),
      (h = this.curRenderOp));
    let P,
      O = 0,
      D = 0,
      F = 1,
      K = 1;
    if (T.type === Kn.subTexture) {
      const { x: J, y: oe, width: x, height: Y } = T.props,
        { width: me = 0, height: he = 0 } = T.parentTexture.dimensions || { width: 0, height: 0 };
      ((O = J / me),
        (F = O + x / me),
        (D = oe / he),
        (K = D + Y / he),
        (T = T.parentTexture),
        (P = T.ctxTexture));
    } else ((P = T.ctxTexture), (O = P.txCoordX1), (D = P.txCoordY1), (F = P.txCoordX2), (K = P.txCoordY2));
    if (
      T.type === Kn.image &&
      a.textureOptions !== null &&
      a.textureOptions.resizeMode !== void 0 &&
      T.dimensions !== null
    ) {
      const J = a.textureOptions.resizeMode,
        { width: oe, height: x } = T.dimensions;
      if (J.type === "cover") {
        const Y = a.width / oe,
          me = a.height / x,
          he = Math.max(Y, me),
          ve = 1 / he;
        if (he && Y && Y < he) {
          const I = ve * a.width;
          ((O = (1 - I / oe) * ((ue = J.clipX) != null ? ue : 0.5)), (F = O + I / oe));
        }
        if (he && me && me < he) {
          const I = ve * a.height;
          ((D = (1 - I / x) * ((le = J.clipY) != null ? le : 0.5)), (K = D + I / x));
        }
      }
    }
    let $ = 0;
    (a.textureOptions !== null &&
      (a.textureOptions.flipX === !0 && ([O, F] = [F, O]), ($ = +(a.textureOptions.flipY || !1))),
      $ ^ +(T.type === Kn.renderToTexture) && ([D, K] = [K, D]));
    const Q = this.addTexture(P, S);
    if ((this.curRenderOp, a.renderCoords))
      ((d[S++] = a.renderCoords.x1),
        (d[S++] = a.renderCoords.y1),
        (d[S++] = O),
        (d[S++] = D),
        (g[S++] = a.colorTl),
        (d[S++] = Q),
        (d[S++] = 0),
        (d[S++] = 0),
        (d[S++] = a.renderCoords.x2),
        (d[S++] = a.renderCoords.y2),
        (d[S++] = F),
        (d[S++] = D),
        (g[S++] = a.colorTr),
        (d[S++] = Q),
        (d[S++] = 1),
        (d[S++] = 0),
        (d[S++] = a.renderCoords.x4),
        (d[S++] = a.renderCoords.y4),
        (d[S++] = O),
        (d[S++] = K),
        (g[S++] = a.colorBl),
        (d[S++] = Q),
        (d[S++] = 0),
        (d[S++] = 1),
        (d[S++] = a.renderCoords.x3),
        (d[S++] = a.renderCoords.y3),
        (d[S++] = F),
        (d[S++] = K),
        (g[S++] = a.colorBr),
        (d[S++] = Q),
        (d[S++] = 1),
        (d[S++] = 1));
    else if (a.tb !== 0 || a.tc !== 0)
      ((d[S++] = a.tx),
        (d[S++] = a.ty),
        (d[S++] = O),
        (d[S++] = D),
        (g[S++] = a.colorTl),
        (d[S++] = Q),
        (d[S++] = 0),
        (d[S++] = 0),
        (d[S++] = a.tx + a.width * a.ta),
        (d[S++] = a.ty + a.width * a.tc),
        (d[S++] = F),
        (d[S++] = D),
        (g[S++] = a.colorTr),
        (d[S++] = Q),
        (d[S++] = 1),
        (d[S++] = 0),
        (d[S++] = a.tx + a.height * a.tb),
        (d[S++] = a.ty + a.height * a.td),
        (d[S++] = O),
        (d[S++] = K),
        (g[S++] = a.colorBl),
        (d[S++] = Q),
        (d[S++] = 0),
        (d[S++] = 1),
        (d[S++] = a.tx + a.width * a.ta + a.height * a.tb),
        (d[S++] = a.ty + a.width * a.tc + a.height * a.td),
        (d[S++] = F),
        (d[S++] = K),
        (g[S++] = a.colorBr),
        (d[S++] = Q),
        (d[S++] = 1),
        (d[S++] = 1));
    else {
      const J = a.tx + a.width * a.ta,
        oe = a.ty + a.height * a.td;
      ((d[S++] = a.tx),
        (d[S++] = a.ty),
        (d[S++] = O),
        (d[S++] = D),
        (g[S++] = a.colorTl),
        (d[S++] = Q),
        (d[S++] = 0),
        (d[S++] = 0),
        (d[S++] = J),
        (d[S++] = a.ty),
        (d[S++] = F),
        (d[S++] = D),
        (g[S++] = a.colorTr),
        (d[S++] = Q),
        (d[S++] = 1),
        (d[S++] = 0),
        (d[S++] = a.tx),
        (d[S++] = oe),
        (d[S++] = O),
        (d[S++] = K),
        (g[S++] = a.colorBl),
        (d[S++] = Q),
        (d[S++] = 0),
        (d[S++] = 1),
        (d[S++] = J),
        (d[S++] = oe),
        (d[S++] = F),
        (d[S++] = K),
        (g[S++] = a.colorBr),
        (d[S++] = Q),
        (d[S++] = 1),
        (d[S++] = 1));
    }
    (this.curRenderOp.numQuads++, (this.curBufferIdx = S));
  }
  newRenderOp(a, d, g, T, S, h, M, P, O) {
    const D = new jI(this.glw, this.options, this.quadBufferCollection, a, d, g, S, T, h, 0, M, P, O);
    ((this.curRenderOp = D), this.renderOps.push(D));
  }
  addTexture(a, d, g) {
    const { curRenderOp: T } = this,
      S = T.addTexture(a);
    if (S === 4294967295) {
      if (g) throw new Error("Unable to add texture to render op");
      return (
        this.newRenderOp(T.shader, T.shaderProps, T.alpha, T.dimensions, T.clippingRect, d),
        this.addTexture(a, d, !0)
      );
    }
    return S;
  }
  reuseRenderOp(a) {
    var M;
    const { shader: d, shaderProps: g, parentHasRenderTexture: T, rtt: S, clippingRect: h } = a;
    return !(
      ((M = this.curRenderOp) == null ? void 0 : M.shader) !== d ||
      ib(this.curRenderOp.clippingRect, h) === !1 ||
      T === !0 ||
      S === !0 ||
      (this.curRenderOp.shader !== this.defaultShader &&
        this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps, g) === !1)
    );
  }
  addRenderOp(a) {
    (this.renderOps.push(a), (this.curRenderOp = null));
  }
  render(a = "screen") {
    const { glw: d, quadBuffer: g } = this,
      T = new Float32Array(g, 0, this.curBufferIdx),
      S = this.quadBufferCollection.getBuffer("a_position") || null;
    d.arrayBufferData(S, T, d.STATIC_DRAW);
    for (let M = 0, P = this.renderOps.length; M < P; M++) this.renderOps[M].draw();
    this.quadBufferUsage = this.curBufferIdx * T.BYTES_PER_ELEMENT;
    const h = 4 * (8 * T.BYTES_PER_ELEMENT);
    this.numQuadsRendered = this.quadBufferUsage / h;
  }
  getQuadCount() {
    return this.numQuadsRendered;
  }
  renderToTexture(a) {
    for (let d = 0; d < this.rttNodes.length; d++) if (this.rttNodes[d] === a) return;
    this.insertRTTNodeInOrder(a);
  }
  insertRTTNodeInOrder(a) {
    let d = this.rttNodes.length,
      g = a;
    for (; g && g.parent; ) {
      const S = this.rttNodes.indexOf(g.parent);
      if (S !== -1) {
        d = S;
        break;
      }
      g = g.parent;
    }
    const T = this.findMaxChildRTTIndex(a);
    (T !== -1 && (d = Math.max(d, T + 1)), this.rttNodes.splice(d, 0, a));
  }
  findMaxChildRTTIndex(a) {
    let d = -1;
    const g = T => {
      const S = this.rttNodes.indexOf(T);
      S !== -1 && (d = Math.max(d, S));
      for (const h of T.children) g(h);
    };
    return (g(a), d);
  }
  renderRTTNodes() {
    const { glw: a } = this,
      { txManager: d } = this.stage;
    for (let T = 0; T < this.rttNodes.length; T++) {
      const S = this.rttNodes[T];
      if (
        S === void 0 ||
        S.hasRTTupdates === !1 ||
        S.worldAlpha === 0 ||
        (S.strictBounds === !0 && S.renderState === Mn.OutOfBounds) ||
        S.texture === null ||
        S.texture.state !== "loaded"
      )
        continue;
      ((this.activeRttNode = S), S.texture);
      const h = S.texture.ctxTexture;
      ((this.renderToTextureActive = !0),
        a.bindFramebuffer(h.framebuffer),
        a.viewport(0, 0, h.w, h.h),
        a.clearColor(0, 0, 0, 0),
        a.clear());
      for (let M = 0; M < S.children.length; M++) {
        const P = S.children[M];
        P !== void 0 && (this.stage.addQuads(P), (P.hasRTTupdates = !1));
      }
      (this.render(), (this.renderOps.length = 0), (S.hasRTTupdates = !1));
    }
    const g = this.clearColor.normalized;
    (a.clearColor(g[0], g[1], g[2], g[3]),
      a.bindFramebuffer(null),
      a.viewport(0, 0, this.glw.canvas.width, this.glw.canvas.height),
      (this.renderToTextureActive = !1));
  }
  removeRTTNode(a) {
    const d = this.rttNodes.indexOf(a);
    d !== -1 && this.rttNodes.splice(d, 1);
  }
  getBufferInfo() {
    return { totalAvailable: this.stage.options.quadBufferSize, totalUsed: this.quadBufferUsage };
  }
  getDefShaderCtr() {
    return this.defShaderCtrl;
  }
  updateClearColor(a) {
    if (this.clearColor.raw === a) return;
    const d = this.glw,
      g = fh(a);
    (d.clearColor(g[0], g[1], g[2], g[3]), (this.clearColor = { raw: a, normalized: g }), d.clear());
  }
}
const y3 = { LINE_FEED: 10 };
class v3 {}
class x3 extends v3 {
  constructor(a, d) {
    super();
    _(this, "data");
    _(this, "glyphMap");
    _(this, "kernings");
    ((this.data = a), (this.glyphMap = d));
    const g = (this.kernings = {});
    (a.kernings.forEach(T => {
      const S = T.second,
        h = (g[S] = g[S] || {});
      h[T.first] = T.amount;
    }),
      (this.kernings = g));
  }
  *shapeText(a, d) {
    var S;
    let g, T;
    for (; (g = d.peek()) && !g.done; ) {
      const h = g.value,
        M = this.glyphMap.get(h);
      if ((d.next(), M !== void 0)) {
        const P =
          T !== void 0 ? (((S = this.kernings[M.id]) == null ? void 0 : S[T]) || 0) + a.letterSpacing : 0;
        ((T = M.id),
          yield {
            mapped: !0,
            glyphId: M.id,
            codepoint: h,
            cluster: d.lastIndex,
            xAdvance: M.xadvance + P,
            yAdvance: 0,
            xOffset: M.xoffset + P,
            yOffset: M.yoffset,
            xBearing: 0,
            yBearing: 0,
            width: M.width,
            height: M.height,
          });
      } else (h === y3.LINE_FEED && (T = void 0), yield { mapped: !1, codepoint: h, cluster: d.lastIndex });
    }
  }
}
class FI extends UI {
  constructor(a, d) {
    super(d);
    _(this, "type");
    _(this, "texture");
    _(this, "maxCharHeight", 0);
    _(this, "shaper");
    _(this, "glyphMap", new Map());
    _(this, "data");
    const { atlasUrl: g, atlasDataUrl: T, stage: S } = d;
    ((this.type = a),
      S.renderer,
      (this.texture = S.txManager.createTexture("ImageTexture", { src: g, premultiplyAlpha: !1 })),
      S.txManager.loadTexture(this.texture, !0),
      (this.texture.preventCleanup = !0),
      this.texture.on("loaded", () => {
        (this.checkLoaded(), S.requestRender());
      }),
      _I(T)
        .then(h => {
          var P;
          ((this.data = JSON.parse(h)), this.data);
          let M = 0;
          if (
            (this.data.chars.forEach(O => {
              this.glyphMap.set(O.id, O);
              const D = O.yoffset + O.height;
              D > M && (M = D);
            }),
            (this.maxCharHeight = M),
            (this.shaper = new x3(this.data, this.glyphMap)),
            !this.metrics)
          )
            if ((P = this.data) != null && P.lightningMetrics) {
              const { ascender: O, descender: D, lineGap: F, unitsPerEm: K } = this.data.lightningMetrics;
              this.metrics = { ascender: O / K, descender: D / K, lineGap: F / K };
            } else
              throw new Error(
                "Font metrics not found in ".concat(this.type, " font ").concat(this.fontFamily, ". ") +
                  "Make sure you are using the latest version of the Lightning 3 `msdf-generator` tool to generate your SDF fonts.",
              );
          this.checkLoaded();
        })
        .catch(console.error));
  }
  getAtlasEntry(a) {
    const d = this.glyphMap.get(a);
    if (d === void 0) throw new Error("Glyph ".concat(a, " not found in font ").concat(this.fontFamily));
    return { x: d.x, y: d.y, width: d.width, height: d.height };
  }
  checkLoaded() {
    this.loaded ||
      (this.texture.state === "loaded" && this.data && ((this.loaded = !0), this.emit("loaded")));
  }
}
const T3 = { LEGACY: !1 },
  wy = !!T3,
  zt = {
    debug: !1,
    focusDebug: !1,
    keyDebug: !1,
    animationsEnabled: !0,
    animationSettings: { duration: 250, easing: "ease-in-out" },
    fontSettings: { fontFamily: "Ubuntu", fontSize: 100 },
    setActiveElement: () => {},
    focusStateKey: "$focus",
    lockStyles: !0,
  };
let Xr;
function S3(f, c = "app") {
  return ((Xr = new i3(f, c)), Xr);
}
function w3(f) {
  for (const c of f)
    Xr.stage.renderer.mode === "webgl" && "type" in c && (c.type === "msdf" || c.type === "ssdf")
      ? Xr.stage.fontManager.addFontFace(new FI(c.type, { ...c, stage: Xr.stage }))
      : "fontUrl" in c && Xr.stage.fontManager.addFontFace(new s3(c));
}
const _a = { Element: "element", TextNode: "textNode", Text: "text" };
function Ay(f, c, ...a) {}
const Pa = f => f instanceof Function,
  yl = f => typeof f == "function";
function Gy(f) {
  return Array.isArray(f);
}
function VE(f) {
  return typeof f == "string";
}
function A3(f) {
  return typeof f == "number";
}
function HE(f) {
  return "destroy" in f && typeof f.destroy == "function";
}
function eo(f) {
  return f instanceof Hi;
}
function wl(f) {
  return f._type === _a.TextNode;
}
function VI(f) {
  return f._type === _a.Text;
}
function E3(f, c) {
  for (const a of c) if (a in f) return !0;
  return !1;
}
function HI(f) {
  var c;
  return (c = f == null ? void 0 : f.states) == null ? void 0 : c.has(zt.focusStateKey);
}
class GE extends Array {
  constructor(a, d = {}) {
    var c = (...PB) => (super(...PB), _(this, "onChange"), this);
    return (
      Gy(d)
        ? c(...d)
        : VE(d)
          ? c(d)
          : c(
              ...Object.entries(d)
                .filter(([g, T]) => T)
                .map(([g]) => g),
            ),
      (this.onChange = a),
      this
    );
  }
  has(a) {
    return this.indexOf(a) >= 0 || this.indexOf("$".concat(a)) >= 0;
  }
  is(a) {
    return this.indexOf(a) >= 0;
  }
  add(a) {
    this.has(a) || (this.push(a), this.onChange());
  }
  toggle(a, d) {
    d === !0 ? this.add(a) : d === !1 ? this.remove(a) : this.has(a) ? this.remove(a) : this.add(a);
  }
  merge(a) {
    if (Gy(a)) ((this.length = 0), this.push(...a));
    else if (VE(a)) ((this.length = 0), this.push(a));
    else
      for (const d in a)
        if (a[d]) this.has(d) || this.push(d);
        else {
          const T = this.indexOf(d);
          T >= 0 && this.splice(T, 1);
        }
    return this;
  }
  remove(a) {
    const d = this.indexOf(a);
    d >= 0 && (this.splice(d, 1), this.onChange());
  }
}
function zE(f) {
  var ve, I, re;
  const a = (f.flexDirection || "row") === "row",
    d = a ? "width" : "height",
    g = a ? "height" : "width",
    T = a ? "marginLeft" : "marginTop",
    S = a ? "marginTop" : "marginLeft",
    h = a ? "marginRight" : "marginBottom",
    M = a ? "marginBottom" : "marginRight",
    P = [];
  let O = !1,
    D = 0;
  for (let ee = 0; ee < f.children.length; ee++) {
    const ge = f.children[ee];
    if (wl(ge) && ge.text && !(ge.width || ge.height)) return !1;
    if (VI(ge) || ge.flexItem === !1) continue;
    const de = ge.flexOrder;
    de !== void 0 && (O = !0);
    const se = ge.flexGrow,
      ye = se !== void 0 && se >= 0;
    ye && (D += se);
    const Ne = ge[d] || 0,
      ht = ge[T] || 0,
      rn = ge[h] || 0;
    P.push({
      node: ge,
      mainSize: Ne,
      marginStart: ht,
      marginEnd: rn,
      totalMainSizeOnAxis: Ne + ht + rn,
      isGrowItem: ye,
      flexGrowValue: ye ? se : 0,
      flexOrder: de || 0,
      crossSize: ge[g] || 0,
      crossMarginStart: ge[S] || 0,
      crossMarginEnd: ge[M] || 0,
    });
  }
  O ? P.sort((ee, ge) => ee.flexOrder - ge.flexOrder) : f.direction === "rtl" && P.reverse();
  const F = P.length;
  if (F === 0) return !1;
  const K = a ? "x" : "y",
    $ = a ? "y" : "x",
    Q = f[d] || 0;
  let ue = f[g] || 0;
  const le = f.gap || 0,
    J = f.justifyContent || "flexStart";
  let oe = !1;
  if (D > 0 && F > 1) {
    f.flexBoundary = f.flexBoundary || "fixed";
    let ee = 0;
    for (const se of P) ee += se.mainSize + se.marginStart + se.marginEnd;
    const ge = F > 0 ? le * (F - 1) : 0,
      de = Q - ee - ge;
    if (de > 0) {
      for (const se of P)
        if (se.isGrowItem && se.flexGrowValue > 0) {
          const ye = (se.flexGrowValue / D) * de,
            Ne = se.mainSize + ye;
          ((se.node[d] = Ne),
            (se.mainSize = Ne),
            (se.totalMainSizeOnAxis = Ne + se.marginStart + se.marginEnd));
        }
      f._containsFlexGrow = f._containsFlexGrow ? null : !0;
    } else
      f._containsFlexGrow
        ? (f._containsFlexGrow = null)
        : console.warn("No available space for flex-grow items to expand, or items overflow.");
  }
  let x = 0;
  if (J === "center" || J === "spaceBetween" || J === "spaceEvenly" || J === "spaceAround")
    for (const ee of P) x += ee.totalMainSizeOnAxis;
  const Y = f.alignItems || (f.flexWrap ? "flexStart" : void 0),
    me = ue
      ? (ee, ge = 0) => {
          const de = ee.node.alignSelf || Y;
          de &&
            (de === "flexStart"
              ? (ee.node[$] = ge + ee.crossMarginStart)
              : de === "center"
                ? (ee.node[$] = ge + (ue - ee.crossSize) / 2 + ee.crossMarginStart)
                : de === "flexEnd" && (ee.node[$] = ge + ue - ee.crossSize - ee.crossMarginEnd));
        }
      : (ee, ge = 0) => {};
  if (a && f._calcHeight && !f.flexCrossBoundary) {
    const ge = P.reduce((de, se) => Math.max(de, se.crossSize), 0) || f.height;
    ge !== f.height && ((oe = !0), (f.height = ue = ge));
  }
  let he = f.padding || 0;
  if (J === "flexStart") {
    if (f.flexWrap === "wrap") {
      let ee = 0;
      const ge = ((ve = P[0]) == null ? void 0 : ve.crossSize) || ue,
        de = a ? ((I = f.columnGap) != null ? I : le) : (re = f.rowGap) != null ? re : le;
      for (const ye of P)
        (he + ye.totalMainSizeOnAxis > Q && he > (f.padding || 0) && ((he = f.padding || 0), (ee += ge + de)),
          (ye.node[K] = he + ye.marginStart),
          (he += ye.totalMainSizeOnAxis + le),
          me(ye, ee));
      const se = ee + ge;
      f[g] !== se && ((f["preFlex".concat(g)] = f[g]), (f[g] = se), (oe = !0));
    } else
      for (const ee of P) ((ee.node[K] = he + ee.marginStart), (he += ee.totalMainSizeOnAxis + le), me(ee));
    if (f.flexBoundary !== "fixed" && f.flexWrap !== "wrap") {
      const ee = he - le + (f.padding || 0);
      if (ee !== Q) return ((f["preFlex".concat(d)] = Q), (f[d] = ee), !0);
    }
  } else if (J === "flexEnd") {
    he = Q - (f.padding || 0);
    for (let ee = F - 1; ee >= 0; ee--) {
      const ge = P[ee];
      ((ge.node[K] = he - ge.mainSize - ge.marginEnd), (he -= ge.totalMainSizeOnAxis + le), me(ge));
    }
  } else if (J === "center") {
    he = (Q - (x + le * (F - 1))) / 2 + (f.padding || 0);
    for (const ee of P) ((ee.node[K] = he + ee.marginStart), (he += ee.totalMainSizeOnAxis + le), me(ee));
  } else if (J === "spaceBetween") {
    const ee = F > 1 ? (Q - x - (f.padding || 0) * 2) / (F - 1) : 0;
    he = f.padding || 0;
    for (const ge of P) ((ge.node[K] = he + ge.marginStart), (he += ge.totalMainSizeOnAxis + ee), me(ge));
  } else if (J === "spaceAround") {
    const ee = F > 0 ? (Q - x - (f.padding || 0) * 2) / F : 0;
    he = (f.padding || 0) + ee / 2;
    for (const ge of P) ((ge.node[K] = he + ge.marginStart), (he += ge.totalMainSizeOnAxis + ee), me(ge));
  } else if (J === "spaceEvenly") {
    const ee = (Q - x - (f.padding || 0) * 2) / (F + 1);
    he = ee + (f.padding || 0);
    for (const ge of P) ((ge.node[K] = he + ge.marginStart), (he += ge.totalMainSizeOnAxis + ee), me(ge));
  }
  return oe;
}
const vl = {
    ArrowLeft: "Left",
    ArrowRight: "Right",
    ArrowUp: "Up",
    ArrowDown: "Down",
    Enter: "Enter",
    l: "Last",
    " ": "Space",
    Backspace: "Back",
    Escape: "Escape",
  },
  zy = {},
  XE = (f, c) => {
    for (const [a, d] of Object.entries(f))
      Array.isArray(d)
        ? d.forEach(g => {
            c[g] = a;
          })
        : d === null
          ? delete c[a]
          : (c[d] = a);
  };
let WE = !0;
const I3 = (f, c) => {
  if (WE) {
    const a = document.createElement("style");
    ((a.type = "text/css"),
      (a.innerHTML =
        '\n      [data-focus="3"] {\n        border: 2px solid rgba(255, 33, 33, 0.2);\n        border-radius: 5px;\n        transition: border-color 0.3s ease;\n      }\n\n      [data-focus="2"] {\n        border: 2px solid rgba(255, 33, 33, 0.4);\n        border-radius: 5px;\n        transition: border-color 0.3s ease;\n      }\n\n      [data-focus="1"] {\n        border: 4px solid rgba(255, 33, 33, 0.9);\n        border-radius: 5px;\n        transition: border-color 0.5s ease;\n      }\n    '),
      document.head.appendChild(a),
      (WE = !1));
  }
  (f.forEach(a => {
    a.data = { ...a.data, focus: void 0 };
  }),
    c.forEach((a, d) => {
      a.data = { ...a.data, focus: d + 1 };
    }));
};
let KE;
const C3 = f => {
  (M3(f, KE), (KE = f), zt.setActiveElement(f));
};
let no = [];
const M3 = (f, c) => {
  var g, T;
  let a = f;
  const d = [];
  for (; a; )
    ((!a.states.has(zt.focusStateKey) || a === f) &&
      (a.states.add(zt.focusStateKey),
      (g = a.onFocus) == null || g.call(a, f, c),
      (T = a.onFocusChanged) == null || T.call(a, !0, f, c)),
      d.push(a),
      (a = a.parent));
  return (
    no.forEach(S => {
      var h, M;
      d.includes(S) ||
        (S.states.remove(zt.focusStateKey),
        (h = S.onBlur) == null || h.call(S, f, c),
        (M = S.onFocusChanged) == null || M.call(S, !1, f, c));
    }),
    zt.focusDebug && I3(no, d),
    (no = d),
    d
  );
};
let $E = 0,
  YE;
const jf = (f, c, a = !1, d = !1) => {
    const g = performance.now(),
      T = f.key || f.keyCode,
      S = YE === T;
    if (((YE = T), !d && zt.throttleInput)) {
      if (S && g - $E < zt.throttleInput) return !1;
      $E = g;
    }
    let h;
    const M = no.length,
      P = "onCapture".concat(c || f.key) + d ? "Release" : "",
      O = d ? "onCaptureKeyRelease" : "onCaptureKey";
    for (let $ = M - 1; $ >= 0; $--) {
      const Q = no[$];
      if (
        Q.throttleInput &&
        S &&
        Q._lastAnyKeyPressTime !== void 0 &&
        g - Q._lastAnyKeyPressTime < Q.throttleInput
      )
        return !0;
      const ue = Q[P] || Q[O];
      if (yl(ue) && ue.call(Q, f, Q, h, c) === !0) return ((Q._lastAnyKeyPressTime = g), !0);
    }
    let D, F, K;
    (c && ((D = "on".concat(c)), (F = "on".concat(c, "Release"))), d || (K = a ? "onKeyHold" : "onKeyPress"));
    for (let $ = 0; $ < M; $++) {
      const Q = no[$];
      if (
        (h || (h = Q),
        Q.throttleInput &&
          S &&
          Q._lastAnyKeyPressTime !== void 0 &&
          g - Q._lastAnyKeyPressTime < Q.throttleInput)
      )
        return !0;
      let ue = !1;
      if (d && F) {
        const le = Q[F];
        yl(le) && le.call(Q, f, Q, h) === !0 && (ue = !0);
      } else if (!d && D) {
        const le = Q[D];
        yl(le) && le.call(Q, f, Q, h) === !0 && (ue = !0);
      }
      if (!ue && K) {
        const le = Q[K];
        yl(le) && le.call(Q, f, c, Q, h) === !0 && (ue = !0);
      }
      if (ue) return ((Q._lastAnyKeyPressTime = g), !0);
    }
    return !1;
  },
  R3 = 500,
  Bi = {},
  k3 = (f, c, a) => {
    if (c) {
      const d = c.key || c.keyCode,
        g = zy[c.key] || zy[c.keyCode],
        T = vl[c.key] || vl[c.keyCode];
      if (g) {
        Bi[d] ||
          (Bi[d] = window.setTimeout(() => {
            ((Bi[d] = !0), jf(c, g, !0));
          }, f));
        return;
      }
      jf(c, T, !1);
    } else if (a) {
      const d = a.key || a.keyCode,
        g = vl[a.key] || vl[a.keyCode];
      (Bi[d] === !0 ? delete Bi[d] : Bi[d] && (clearTimeout(Bi[d]), delete Bi[d], jf(a, g, !1)),
        jf(a, g, !1, !0));
    }
  },
  _3 = ({
    userKeyMap: f,
    keyHoldOptions: c,
    ownerContext: a = d => {
      d();
    },
  } = {}) => {
    (f && XE(f, vl), c != null && c.userKeyHoldMap && XE(c.userKeyHoldMap, zy));
    const d = (c == null ? void 0 : c.holdThreshold) || R3,
      g = k3.bind(null, d),
      T = h =>
        a(() => {
          g(h, void 0);
        }),
      S = h =>
        a(() => {
          g(void 0, h);
        });
    return (
      document.addEventListener("keyup", S),
      document.addEventListener("keydown", T),
      {
        cleanup: () => {
          (document.removeEventListener("keydown", T), document.removeEventListener("keyup", S));
          for (const [h, M] of Object.entries(Bi)) M && M !== !0 && clearTimeout(M);
        },
        focusPath: () => no,
      }
    );
  };
class P3 {
  constructor() {
    _(this, "nodeConfigs", []);
    _(this, "isRegistered", !1);
    _(this, "stage");
  }
  register(c) {
    this.isRegistered ||
      ((this.isRegistered = !0), (this.stage = c), c.animationManager.registerAnimation(this));
  }
  add(c, a, d, g) {
    var F, K;
    const T = this.nodeConfigs.find($ => $.node === c && $.propName === a),
      S = (F = g.duration) != null ? F : 0,
      h = (K = g.delay) != null ? K : 0,
      M = g.easing || "linear",
      P = kI(M),
      O = d,
      D = c[a];
    T
      ? ((T.duration = S),
        (T.delay = h),
        (T.easing = M),
        (T.timingFunction = P),
        (T.targetValue = O),
        (T.startValue = D),
        (T.progress = 0),
        (T.delayFor = h))
      : this.nodeConfigs.push({
          node: c,
          duration: S,
          delay: h,
          easing: M,
          progress: 0,
          delayFor: h,
          timingFunction: P,
          propName: a,
          startValue: D,
          targetValue: O,
        });
  }
  update(c) {
    var a;
    for (let d = this.nodeConfigs.length - 1; d >= 0; d--) {
      const g = this.nodeConfigs[d],
        { node: T, duration: S, timingFunction: h, propName: M, startValue: P, targetValue: O } = g;
      let D = c;
      if (g.delayFor > 0) {
        if (((g.delayFor -= D), g.delayFor >= 0)) continue;
        ((D = -g.delayFor), (g.delayFor = 0));
      }
      S > 0
        ? ((g.progress += D / S), (g.progress = Math.max(0, Math.min(1, g.progress))))
        : S === 0 && g.delayFor <= 0 && (g.progress = 1);
      const F = h(g.progress) || g.progress;
      let K;
      (g.progress === 1 ? (K = O) : M.includes("color") ? (K = Oy(P, O, F)) : (K = P + (O - P) * F),
        (T.lng[M] = K),
        g.progress === 1 && this.nodeConfigs.splice(d, 1),
        this.nodeConfigs.length === 0 &&
          ((a = this.stage) == null || a.animationManager.unregisterAnimation(this),
          (this.isRegistered = !1)));
    }
  }
}
const qE = new P3();
let Ll = !1;
const bl = new Set();
function GI() {
  Ll = !1;
  const f = [...bl];
  bl.clear();
  for (let c = f.length - 1; c >= 0; c--) f[c].updateLayout();
}
function JE(f) {
  (bl.add(f), Ll || ((Ll = !0), queueMicrotask(GI)));
}
function Ey(f, c) {
  const a = [];
  for (let d in c) {
    const g = c[d];
    (d === "rounded" && (d = "radius"), typeof g == "object" && a.push(Xr.createEffect(d, g, d)));
  }
  return Xr.createShader("DynamicShader", { effects: a });
}
function fl(f = "") {
  return {
    set(c) {
      (A3(c) && (c = { width: c, color: 255 }),
        (this.effects = this.effects
          ? { ...(this.effects || {}), ["border".concat(f)]: c }
          : { ["border".concat(f)]: c }));
    },
    get() {
      var c;
      return (c = this.effects) == null ? void 0 : c["border".concat(f)];
    },
  };
}
const D3 = [
    "alpha",
    "color",
    "colorTop",
    "colorRight",
    "colorLeft",
    "colorBottom",
    "colorTl",
    "colorTr",
    "colorBl",
    "colorBr",
    "height",
    "fontSize",
    "lineHeight",
    "mount",
    "mountX",
    "mountY",
    "pivot",
    "pivotX",
    "pivotY",
    "rotation",
    "scale",
    "scaleX",
    "scaleY",
    "width",
    "worldX",
    "worldY",
    "x",
    "y",
    "zIndex",
    "zIndexLocked",
  ],
  L3 = [
    "absX",
    "absY",
    "autosize",
    "clipping",
    "contain",
    "data",
    "destroyed",
    "fontFamily",
    "fontStretch",
    "fontStyle",
    "fontWeight",
    "imageType",
    "letterSpacing",
    "maxLines",
    "offsetY",
    "overflowSuffix",
    "preventCleanup",
    "rtt",
    "scrollable",
    "scrollY",
    "srcHeight",
    "srcWidth",
    "srcX",
    "srcY",
    "strictBounds",
    "text",
    "textAlign",
    "textBaseline",
    "textOverflow",
    "texture",
    "textureOptions",
    "verticalAlign",
    "wordWrap",
  ];
class Hi extends Object {
  constructor(c) {
    (super(),
      (this._type = c === "text" ? _a.TextNode : _a.Element),
      (this.rendered = !1),
      (this.lng = {}),
      (this.children = []));
  }
  get effects() {
    return this._effects;
  }
  set effects(c) {
    ((this._effects = c), wy && this.rendered && (this.lng.shader = Ey(this, c)));
  }
  set id(c) {
    var a;
    ((this._id = c),
      (a = zt.rendererOptions) != null && a.inspector && (this.data = { ...this.data, testId: c }));
  }
  get id() {
    return this._id;
  }
  get parent() {
    return this._parent;
  }
  set parent(c) {
    var a;
    ((this._parent = c),
      this.rendered && c != null && c.rendered && (this.lng.parent = (a = c.lng) != null ? a : null));
  }
  insertChild(c, a) {
    if (
      (c.parent && (c.parent.removeChild(c), this.rendered || (this._hasRenderedChildren = !0)),
      (c.parent = this),
      a)
    ) {
      this.removeChild(c);
      const d = this.children.indexOf(a);
      if (d >= 0) {
        this.children.splice(d, 0, c);
        return;
      }
    }
    this.children.push(c);
  }
  removeChild(c) {
    var d;
    const a = this.children.indexOf(c);
    a >= 0 && (this.children.splice(a, 1), (d = c.onRemove) == null || d.call(c, c));
  }
  get selectedNode() {
    const c = this.selected || 0;
    for (let a = c; a < this.children.length; a++) {
      const d = this.children[a];
      if (eo(d)) return ((this.selected = a), d);
    }
  }
  set shader(c) {
    this.lng.shader = Gy(c) ? Xr.createShader(...c) : c;
  }
  _sendToLightningAnimatable(c, a) {
    if (
      this.transition &&
      this.rendered &&
      zt.animationsEnabled &&
      (this.transition === !0 || this.transition[c])
    ) {
      const d = this.transition === !0 || this.transition[c] === !0 ? void 0 : this.transition[c];
      if (zt.simpleAnimationsEnabled) {
        (qE.add(this, c, a, d || this.animationSettings), qE.register(Xr.stage));
        return;
      } else {
        const g = this.animate({ [c]: a }, d);
        if (this.onAnimation) {
          const T = Object.keys(this.onAnimation);
          for (const S of T) {
            const h = this.onAnimation[S];
            g.on(S, (M, P) => {
              h.call(this, M, c, a, P);
            });
          }
        }
        return g.start();
      }
    }
    this.lng[c] = a;
  }
  animate(c, a) {
    return this.lng.animate(c, a || this.animationSettings || {});
  }
  chain(c, a) {
    return (
      this._animationRunning && ((this._animationQueue = []), (this._animationRunning = !1)),
      a
        ? (this._animationQueueSettings = a)
        : this._animationQueueSettings || (this._animationQueueSettings = a || this.animationSettings),
      (a = a || this._animationQueueSettings),
      (this._animationQueue = this._animationQueue || []),
      this._animationQueue.push({ props: c, animationSettings: a }),
      this
    );
  }
  async start() {
    let c = this._animationQueue.shift();
    for (; c; )
      ((this._animationRunning = !0),
        await this.animate(c.props, c.animationSettings).start().waitUntilStopped(),
        (c = this._animationQueue.shift()));
    ((this._animationRunning = !1), (this._animationQueueSettings = void 0));
  }
  emit(c, ...a) {
    let d = this;
    const g = "on".concat(c.charAt(0).toUpperCase()).concat(c.slice(1));
    for (; d; ) {
      const T = d[g];
      if (yl(T) && T.call(d, this, ...a) === !0) return !0;
      d = d.parent;
    }
    return !1;
  }
  setFocus() {
    if (this.rendered) {
      if (this.forwardFocus !== void 0)
        if (Pa(this.forwardFocus)) {
          if (this.forwardFocus.call(this, this) !== !1) return;
        } else {
          const c = typeof this.forwardFocus == "number" ? this.forwardFocus : null,
            a = this.children;
          if (c !== null && c < a.length) {
            const d = a[c];
            eo(d) && d.setFocus();
            return;
          }
        }
      queueMicrotask(() => C3(this));
    } else this._autofocus = !0;
  }
  _layoutOnLoad() {
    this.lng.on("loaded", () => {
      this.parent.updateLayout();
    });
  }
  getText() {
    let c = "";
    for (let a = 0; a < this.children.length; a++) c += this.children[a].text;
    return c;
  }
  destroy() {
    if (this.onDestroy) {
      const c = this.onDestroy(this);
      c instanceof Promise ? c.then(() => this._destroy()) : this._destroy();
    } else this._destroy();
  }
  _destroy() {
    var c;
    HE(this.lng) &&
      (this.lng.destroy(), (c = this.parent) != null && c.requiresLayout() && this.parent.updateLayout());
  }
  set style(c) {
    if (!(zt.lockStyles && this._style) && c) {
      this._style = c;
      for (const a in this._style) this[a] === void 0 && (this[a] = this._style[a]);
    }
  }
  get style() {
    return this._style;
  }
  get hasChildren() {
    return this.children.length > 0;
  }
  set src(c) {
    typeof c == "string"
      ? ((this.lng.src = c), !this.color && this.rendered && (this.color = 4294967295))
      : (this.color = 0);
  }
  get src() {
    return this.lng.src;
  }
  getChildById(c) {
    return this.children.find(a => a.id === c);
  }
  searchChildrenById(c) {
    for (let a = 0; a < this.children.length; a++) {
      const d = this.children[a];
      if (eo(d)) {
        if (d.id === c) return d;
        const g = d.searchChildrenById(c);
        if (g) return g;
      }
    }
  }
  set states(c) {
    ((this._states = this._states ? this._states.merge(c) : new GE(this._stateChanged.bind(this), c)),
      this.rendered && this._stateChanged());
  }
  get states() {
    return ((this._states = this._states || new GE(this._stateChanged.bind(this))), this._states);
  }
  get animationSettings() {
    return this._animationSettings || zt.animationSettings;
  }
  set animationSettings(c) {
    this._animationSettings = c;
  }
  set hidden(c) {
    this.alpha = c ? 0 : 1;
  }
  get hidden() {
    return this.alpha === 0;
  }
  get h() {
    return this.height;
  }
  set h(c) {
    this.height = c;
  }
  get w() {
    return this.width;
  }
  set w(c) {
    this.width = c;
  }
  set autofocus(c) {
    ((this._autofocus = c), c && queueMicrotask(() => this.setFocus()));
  }
  get autofocus() {
    return this._autofocus;
  }
  requiresLayout() {
    return this.display === "flex" || this.onLayout;
  }
  set updateLayoutOn(c) {
    this.updateLayout();
  }
  get updateLayoutOn() {
    return null;
  }
  updateLayout() {
    if (this.hasChildren) {
      if (this.display === "flex" && this.flexGrow && this.width === 0) return;
      const c = this.display === "flex" && zE(this);
      bl.delete(this);
      const a = Pa(this.onLayout) && this.onLayout.call(this, this);
      ((c || a) && this.parent && JE(this.parent),
        this._containsFlexGrow === !0 &&
          this.children.forEach(d => {
            d.display === "flex" && eo(d) && (zE(d), Pa(d.onLayout) && d.onLayout.call(d, d), JE(this));
          }));
    }
  }
  _stateChanged() {
    if (this.forwardStates) {
      const a = this.states.slice();
      this.children.forEach(d => {
        d.states = a;
      });
    }
    const c = this.states;
    if (this._undoStyles || E3(this, c)) {
      let a;
      this._undoStyles &&
        this._undoStyles.length &&
        ((a = {}),
        this._undoStyles.forEach(T => {
          a[T] = this.style[T];
        }));
      const d = c.length;
      if (d === 0) {
        (Object.assign(this, a), (this._undoStyles = []));
        return;
      }
      let g;
      (d === 1
        ? ((g = this[c[0]]), (g = a ? { ...a, ...g } : g))
        : (g = c.reduce((T, S) => {
            const h = this[S];
            return h ? { ...T, ...h } : T;
          }, a || {})),
        g
          ? ((this._undoStyles = Object.keys(g)),
            g.transition !== void 0 && (this.transition = g.transition),
            Object.assign(this, g))
          : (this._undoStyles = []));
    }
  }
  render(c) {
    var h, M, P, O;
    const a = this,
      d = this.parent;
    if (!d) {
      console.warn("Parent not set - no node created for: ", this);
      return;
    }
    if (!d.rendered) {
      console.warn("Parent not rendered yet: ", this);
      return;
    }
    if ((d.requiresLayout() && bl.add(d), this.rendered)) {
      (h = this.onRender) == null || h.call(this, this);
      return;
    }
    this._states && this._stateChanged();
    const g = a.lng,
      T = d.width || 0,
      S = d.height || 0;
    if (
      ((g.x = g.x || 0),
      (g.y = g.y || 0),
      (g.parent = d.lng),
      (this.right || this.right === 0) && ((g.x = T - this.right), (g.mountX = 1)),
      (this.bottom || this.bottom === 0) && ((g.y = S - this.bottom), (g.mountY = 1)),
      this.center && (this.centerX = this.centerY = !0),
      this.centerX && ((g.x += T / 2), (g.mountX = 0.5)),
      this.centerY && ((g.y += S / 2), (g.mountY = 0.5)),
      wl(a))
    ) {
      const D = g;
      if (zt.fontSettings) for (const F in zt.fontSettings) D[F] === void 0 && (D[F] = zt.fontSettings[F]);
      ((D.text = D.text || a.getText()),
        D.textAlign && !D.contain && console.warn("Text align requires contain: ", a.getText()),
        D.contain &&
          (D.width || (D.width = T - D.x - (D.marginRight || 0)),
          D.contain === "both" && !D.height && !D.maxLines
            ? (D.height = S - D.y - (D.marginBottom || 0))
            : D.maxLines === 1 && (D.height = D.height || D.lineHeight || D.fontSize)),
        wy && a._effects && (g.shader = Ey(a, a._effects)),
        (a.lng = Xr.createTextNode(g)),
        d.requiresLayout() && (!g.width || !g.height) && a._layoutOnLoad());
    } else if (
      (g.texture ||
        (isNaN(g.width) && ((g.width = a.flexGrow ? 0 : T - g.x), (a._calcWidth = !0)),
        isNaN(g.height) && ((g.height = S - g.y), (a._calcHeight = !0)),
        g.rtt && !g.color && (g.color = 4294967295),
        !g.color && !g.src && (g.color = 0)),
      wy && a._effects && (g.shader = Ey(a, a._effects)),
      (a.lng = Xr.createNode(g)),
      a._hasRenderedChildren)
    ) {
      a._hasRenderedChildren = !1;
      for (const D of a.children) eo(D) && HE(D.lng) && (D.lng.parent = a.lng);
    }
    if (
      ((a.rendered = !0),
      a.autosize && d.requiresLayout() && a._layoutOnLoad(),
      (M = this.onCreate) == null || M.call(this, this),
      (P = this.onRender) == null || P.call(this, this),
      a.onEvent)
    )
      for (const [D, F] of Object.entries(a.onEvent)) a.lng.on(D, (K, $) => F.call(a, a, $));
    if (((O = a.lng) != null && O.div && (a.lng.div.element = a), a._type === _a.Element)) {
      const D = a.children.length;
      for (let F = 0; F < D; F++) {
        const K = a.children[F];
        eo(K) && K.render();
      }
    }
    (c && !Ll && ((Ll = !0), queueMicrotask(GI)), a._autofocus && a.setFocus());
  }
}
for (const f of D3)
  Object.defineProperty(Hi.prototype, f, {
    get() {
      return this.lng[f];
    },
    set(c) {
      this._sendToLightningAnimatable(f, c);
    },
  });
for (const f of L3)
  Object.defineProperty(Hi.prototype, f, {
    get() {
      return this.lng[f];
    },
    set(c) {
      this.lng[f] = c;
    },
  });
function Iy(f) {
  return {
    set(c) {
      this.effects = this.effects ? { ...this.effects, [f]: c } : { [f]: c };
    },
    get() {
      var c;
      return (c = this.effects) == null ? void 0 : c[f];
    },
  };
}
Object.defineProperties(Hi.prototype, {
  border: fl(),
  borderLeft: fl("Left"),
  borderRight: fl("Right"),
  borderTop: fl("Top"),
  borderBottom: fl("Bottom"),
  linearGradient: Iy("linearGradient"),
  radialGradient: Iy("radialGradient"),
  radialProgress: Iy("radialProgressGradient"),
  rounded: {
    set(f) {
      this.effects = this.effects ? { ...this.effects, radius: { radius: f } } : { radius: { radius: f } };
    },
    get() {
      var f, c;
      return (c = (f = this.effects) == null ? void 0 : f.radius) == null ? void 0 : c.radius;
    },
  },
  borderRadius: {
    set(f) {
      this.effects = this.effects ? { ...this.effects, radius: { radius: f } } : { radius: { radius: f } };
    },
    get() {
      var f, c;
      return (c = (f = this.effects) == null ? void 0 : f.radius) == null ? void 0 : c.radius;
    },
  },
});
const Ct = {
  context: void 0,
  registry: void 0,
  effects: void 0,
  done: !1,
  getContextId() {
    return QE(this.context.count);
  },
  getNextContextId() {
    return QE(this.context.count++);
  },
};
function QE(f) {
  const c = String(f),
    a = c.length - 1;
  return Ct.context.id + (a ? String.fromCharCode(96 + a) : "") + c;
}
function xl(f) {
  Ct.context = f;
}
const zI = !1,
  b3 = (f, c) => f === c,
  Xy = Symbol("solid-proxy"),
  N3 = typeof Proxy == "function",
  O3 = Symbol("solid-track"),
  th = { equals: b3 };
let XI = ZI;
const zi = 1,
  nh = 2,
  WI = { owned: null, cleanups: null, context: null, owner: null },
  Cy = {};
var Tt = null;
let My = null,
  U3 = null,
  Mt = null,
  $n = null,
  Gi = null,
  hh = 0;
function Ts(f, c) {
  const a = Mt,
    d = Tt,
    g = f.length === 0,
    T = c === void 0 ? d : c,
    S = g ? WI : { owned: null, cleanups: null, context: T ? T.context : null, owner: T },
    h = g ? f : () => f(() => Yn(() => Nl(S)));
  ((Tt = S), (Mt = null));
  try {
    return ci(h, !0);
  } finally {
    ((Mt = a), (Tt = d));
  }
}
function Un(f, c) {
  c = c ? Object.assign({}, th, c) : th;
  const a = { value: f, observers: null, observerSlots: null, comparator: c.equals || void 0 },
    d = g => (typeof g == "function" && (g = g(a.value)), QI(a, g));
  return [JI.bind(a), d];
}
function j3(f, c, a) {
  const d = gh(f, c, !0, zi);
  La(d);
}
function Zr(f, c, a) {
  const d = gh(f, c, !1, zi);
  La(d);
}
function ph(f, c, a) {
  XI = z3;
  const d = gh(f, c, !1, zi);
  ((d.user = !0), Gi ? Gi.push(d) : La(d));
}
function nn(f, c, a) {
  a = a ? Object.assign({}, th, a) : th;
  const d = gh(f, c, !0, 0);
  return (
    (d.observers = null),
    (d.observerSlots = null),
    (d.comparator = a.equals || void 0),
    La(d),
    JI.bind(d)
  );
}
function B3(f) {
  return f && typeof f == "object" && "then" in f;
}
function Wy(f, c, a) {
  let d, g, T;
  ((d = !0), (g = f), (T = {}));
  let S = null,
    h = Cy,
    M = null,
    P = !1,
    O = "initialValue" in T,
    D = typeof d == "function" && nn(d);
  const F = new Set(),
    [K, $] = (T.storage || Un)(T.initialValue),
    [Q, ue] = Un(void 0),
    [le, J] = Un(void 0, { equals: !1 }),
    [oe, x] = Un(O ? "ready" : "unresolved");
  Ct.context &&
    ((M = Ct.getNextContextId()),
    T.ssrLoadFrom === "initial" ? (h = T.initialValue) : Ct.load && Ct.has(M) && (h = Ct.load(M)));
  function Y(re, ee, ge, de) {
    return (
      S === re &&
        ((S = null),
        de !== void 0 && (O = !0),
        (re === h || ee === h) && T.onHydrated && queueMicrotask(() => T.onHydrated(de, { value: ee })),
        (h = Cy),
        me(ee, ge)),
      ee
    );
  }
  function me(re, ee) {
    ci(() => {
      (ee === void 0 && $(() => re), x(ee !== void 0 ? "errored" : O ? "ready" : "unresolved"), ue(ee));
      for (const ge of F.keys()) ge.decrement();
      F.clear();
    }, !1);
  }
  function he() {
    const re = V3,
      ee = K(),
      ge = Q();
    if (ge !== void 0 && !S) throw ge;
    return (Mt && Mt.user, ee);
  }
  function ve(re = !0) {
    if (re !== !1 && P) return;
    P = !1;
    const ee = D ? D() : d;
    if (ee == null || ee === !1) {
      Y(S, Yn(K));
      return;
    }
    let ge;
    const de =
      h !== Cy
        ? h
        : Yn(() => {
            try {
              return g(ee, { value: K(), refetching: re });
            } catch (se) {
              ge = se;
            }
          });
    if (ge !== void 0) {
      Y(S, void 0, $f(ge), ee);
      return;
    } else if (!B3(de)) return (Y(S, de, void 0, ee), de);
    return (
      (S = de),
      "v" in de
        ? (de.s === 1 ? Y(S, de.v, void 0, ee) : Y(S, void 0, $f(de.v), ee), de)
        : ((P = !0),
          queueMicrotask(() => (P = !1)),
          ci(() => {
            (x(O ? "refreshing" : "pending"), J());
          }, !1),
          de.then(
            se => Y(de, se, void 0, ee),
            se => Y(de, void 0, $f(se), ee),
          ))
    );
  }
  Object.defineProperties(he, {
    state: { get: () => oe() },
    error: { get: () => Q() },
    loading: {
      get() {
        const re = oe();
        return re === "pending" || re === "refreshing";
      },
    },
    latest: {
      get() {
        if (!O) return he();
        const re = Q();
        if (re && !S) throw re;
        return K();
      },
    },
  });
  let I = Tt;
  return (D ? j3(() => ((I = Tt), ve(!1))) : ve(!1), [he, { refetch: re => io(I, () => ve(re)), mutate: $ }]);
}
function KI(f) {
  return ci(f, !1);
}
function Yn(f) {
  if (Mt === null) return f();
  const c = Mt;
  Mt = null;
  try {
    return f();
  } finally {
    Mt = c;
  }
}
function jl(f, c, a) {
  const d = Array.isArray(f);
  let g,
    T = a && a.defer;
  return S => {
    let h;
    if (d) {
      h = Array(f.length);
      for (let P = 0; P < f.length; P++) h[P] = f[P]();
    } else h = f();
    if (T) return ((T = !1), S);
    const M = Yn(() => c(h, g, S));
    return ((g = h), M);
  };
}
function Xi(f) {
  return (Tt === null || (Tt.cleanups === null ? (Tt.cleanups = [f]) : Tt.cleanups.push(f)), f);
}
function $I() {
  return Mt;
}
function Wi() {
  return Tt;
}
function io(f, c) {
  const a = Tt,
    d = Mt;
  ((Tt = f), (Mt = null));
  try {
    return ci(c, !0);
  } catch (g) {
    dv(g);
  } finally {
    ((Tt = a), (Mt = d));
  }
}
function F3(f) {
  const c = Mt,
    a = Tt;
  return Promise.resolve().then(() => {
    ((Mt = c), (Tt = a), ci(f, !1), (Mt = Tt = null));
  });
}
const [RB, kB] = Un(!1);
function YI(f, c) {
  const a = Symbol("context");
  return { id: a, Provider: X3(a), defaultValue: f };
}
function qI(f) {
  let c;
  return Tt && Tt.context && (c = Tt.context[f.id]) !== void 0 ? c : f.defaultValue;
}
function cv(f) {
  const c = nn(f),
    a = nn(() => Ky(c()));
  return (
    (a.toArray = () => {
      const d = a();
      return Array.isArray(d) ? d : d != null ? [d] : [];
    }),
    a
  );
}
let V3;
function JI() {
  if (this.sources && this.state)
    if (this.state === zi) La(this);
    else {
      const f = $n;
      (($n = null), ci(() => ih(this), !1), ($n = f));
    }
  if (Mt) {
    const f = this.observers ? this.observers.length : 0;
    (Mt.sources
      ? (Mt.sources.push(this), Mt.sourceSlots.push(f))
      : ((Mt.sources = [this]), (Mt.sourceSlots = [f])),
      this.observers
        ? (this.observers.push(Mt), this.observerSlots.push(Mt.sources.length - 1))
        : ((this.observers = [Mt]), (this.observerSlots = [Mt.sources.length - 1])));
  }
  return this.value;
}
function QI(f, c, a) {
  let d = f.value;
  return (
    (!f.comparator || !f.comparator(d, c)) &&
      ((f.value = c),
      f.observers &&
        f.observers.length &&
        ci(() => {
          for (let g = 0; g < f.observers.length; g += 1) {
            const T = f.observers[g],
              S = My && My.running;
            (S && My.disposed.has(T),
              (S ? !T.tState : !T.state) && (T.pure ? $n.push(T) : Gi.push(T), T.observers && e2(T)),
              S || (T.state = zi));
          }
          if ($n.length > 1e6) throw (($n = []), new Error());
        }, !1)),
    c
  );
}
function La(f) {
  if (!f.fn) return;
  Nl(f);
  const c = hh;
  H3(f, f.value, c);
}
function H3(f, c, a) {
  let d;
  const g = Tt,
    T = Mt;
  Mt = Tt = f;
  try {
    d = f.fn(c);
  } catch (S) {
    return (
      f.pure && ((f.state = zi), f.owned && f.owned.forEach(Nl), (f.owned = null)),
      (f.updatedAt = a + 1),
      dv(S)
    );
  } finally {
    ((Mt = T), (Tt = g));
  }
  (!f.updatedAt || f.updatedAt <= a) &&
    (f.updatedAt != null && "observers" in f ? QI(f, d) : (f.value = d), (f.updatedAt = a));
}
function gh(f, c, a, d = zi, g) {
  const T = {
    fn: f,
    state: d,
    updatedAt: null,
    owned: null,
    sources: null,
    sourceSlots: null,
    cleanups: null,
    value: c,
    owner: Tt,
    context: Tt ? Tt.context : null,
    pure: a,
  };
  return (Tt === null || (Tt !== WI && (Tt.owned ? Tt.owned.push(T) : (Tt.owned = [T]))), T);
}
function rh(f) {
  if (f.state === 0) return;
  if (f.state === nh) return ih(f);
  if (f.suspense && Yn(f.suspense.inFallback)) return f.suspense.effects.push(f);
  const c = [f];
  for (; (f = f.owner) && (!f.updatedAt || f.updatedAt < hh); ) f.state && c.push(f);
  for (let a = c.length - 1; a >= 0; a--)
    if (((f = c[a]), f.state === zi)) La(f);
    else if (f.state === nh) {
      const d = $n;
      (($n = null), ci(() => ih(f, c[0]), !1), ($n = d));
    }
}
function ci(f, c) {
  if ($n) return f();
  let a = !1;
  (c || ($n = []), Gi ? (a = !0) : (Gi = []), hh++);
  try {
    const d = f();
    return (G3(a), d);
  } catch (d) {
    (a || (Gi = null), ($n = null), dv(d));
  }
}
function G3(f) {
  if (($n && (ZI($n), ($n = null)), f)) return;
  const c = Gi;
  ((Gi = null), c.length && ci(() => XI(c), !1));
}
function ZI(f) {
  for (let c = 0; c < f.length; c++) rh(f[c]);
}
function z3(f) {
  let c,
    a = 0;
  for (c = 0; c < f.length; c++) {
    const d = f[c];
    d.user ? (f[a++] = d) : rh(d);
  }
  if (Ct.context) {
    if (Ct.count) {
      (Ct.effects || (Ct.effects = []), Ct.effects.push(...f.slice(0, a)));
      return;
    }
    xl();
  }
  for (
    Ct.effects &&
      (Ct.done || !Ct.count) &&
      ((f = [...Ct.effects, ...f]), (a += Ct.effects.length), delete Ct.effects),
      c = 0;
    c < a;
    c++
  )
    rh(f[c]);
}
function ih(f, c) {
  f.state = 0;
  for (let a = 0; a < f.sources.length; a += 1) {
    const d = f.sources[a];
    if (d.sources) {
      const g = d.state;
      g === zi ? d !== c && (!d.updatedAt || d.updatedAt < hh) && rh(d) : g === nh && ih(d, c);
    }
  }
}
function e2(f) {
  for (let c = 0; c < f.observers.length; c += 1) {
    const a = f.observers[c];
    a.state || ((a.state = nh), a.pure ? $n.push(a) : Gi.push(a), a.observers && e2(a));
  }
}
function Nl(f) {
  let c;
  if (f.sources)
    for (; f.sources.length; ) {
      const a = f.sources.pop(),
        d = f.sourceSlots.pop(),
        g = a.observers;
      if (g && g.length) {
        const T = g.pop(),
          S = a.observerSlots.pop();
        d < g.length && ((T.sourceSlots[S] = d), (g[d] = T), (a.observerSlots[d] = S));
      }
    }
  if (f.tOwned) {
    for (c = f.tOwned.length - 1; c >= 0; c--) Nl(f.tOwned[c]);
    delete f.tOwned;
  }
  if (f.owned) {
    for (c = f.owned.length - 1; c >= 0; c--) Nl(f.owned[c]);
    f.owned = null;
  }
  if (f.cleanups) {
    for (c = f.cleanups.length - 1; c >= 0; c--) f.cleanups[c]();
    f.cleanups = null;
  }
  f.state = 0;
}
function $f(f) {
  return f instanceof Error ? f : new Error(typeof f == "string" ? f : "Unknown error", { cause: f });
}
function dv(f, c = Tt) {
  throw $f(f);
}
function Ky(f) {
  if (typeof f == "function" && !f.length) return Ky(f());
  if (Array.isArray(f)) {
    const c = [];
    for (let a = 0; a < f.length; a++) {
      const d = Ky(f[a]);
      Array.isArray(d) ? c.push.apply(c, d) : c.push(d);
    }
    return c;
  }
  return f;
}
function X3(f, c) {
  return function (d) {
    let g;
    return (
      Zr(
        () => (g = Yn(() => ((Tt.context = { ...Tt.context, [f]: d.value }), cv(() => d.children)))),
        void 0,
      ),
      g
    );
  };
}
const W3 = Symbol("fallback");
function ZE(f) {
  for (let c = 0; c < f.length; c++) f[c]();
}
function K3(f, c, a = {}) {
  let d = [],
    g = [],
    T = [],
    S = 0,
    h = c.length > 1 ? [] : null;
  return (
    Xi(() => ZE(T)),
    () => {
      let M = f() || [],
        P = M.length,
        O,
        D;
      return (
        M[O3],
        Yn(() => {
          let K, $, Q, ue, le, J, oe, x, Y;
          if (P === 0)
            (S !== 0 && (ZE(T), (T = []), (d = []), (g = []), (S = 0), h && (h = [])),
              a.fallback && ((d = [W3]), (g[0] = Ts(me => ((T[0] = me), a.fallback()))), (S = 1)));
          else if (S === 0) {
            for (g = new Array(P), D = 0; D < P; D++) ((d[D] = M[D]), (g[D] = Ts(F)));
            S = P;
          } else {
            for (
              Q = new Array(P), ue = new Array(P), h && (le = new Array(P)), J = 0, oe = Math.min(S, P);
              J < oe && d[J] === M[J];
              J++
            );
            for (oe = S - 1, x = P - 1; oe >= J && x >= J && d[oe] === M[x]; oe--, x--)
              ((Q[x] = g[oe]), (ue[x] = T[oe]), h && (le[x] = h[oe]));
            for (K = new Map(), $ = new Array(x + 1), D = x; D >= J; D--)
              ((Y = M[D]), (O = K.get(Y)), ($[D] = O === void 0 ? -1 : O), K.set(Y, D));
            for (O = J; O <= oe; O++)
              ((Y = d[O]),
                (D = K.get(Y)),
                D !== void 0 && D !== -1
                  ? ((Q[D] = g[O]), (ue[D] = T[O]), h && (le[D] = h[O]), (D = $[D]), K.set(Y, D))
                  : T[O]());
            for (D = J; D < P; D++)
              D in Q ? ((g[D] = Q[D]), (T[D] = ue[D]), h && ((h[D] = le[D]), h[D](D))) : (g[D] = Ts(F));
            ((g = g.slice(0, (S = P))), (d = M.slice(0)));
          }
          return g;
        })
      );
      function F(K) {
        if (((T[D] = K), h)) {
          const [$, Q] = Un(D);
          return ((h[D] = Q), c(M[D], $));
        }
        return c(M[D]);
      }
    }
  );
}
function t2(f, c) {
  return Yn(() => f(c || {}));
}
function Bf() {
  return !0;
}
const $3 = {
  get(f, c, a) {
    return c === Xy ? a : f.get(c);
  },
  has(f, c) {
    return c === Xy ? !0 : f.has(c);
  },
  set: Bf,
  deleteProperty: Bf,
  getOwnPropertyDescriptor(f, c) {
    return {
      configurable: !0,
      enumerable: !0,
      get() {
        return f.get(c);
      },
      set: Bf,
      deleteProperty: Bf,
    };
  },
  ownKeys(f) {
    return f.keys();
  },
};
function Ry(f) {
  return (f = typeof f == "function" ? f() : f) ? f : {};
}
function Y3() {
  for (let f = 0, c = this.length; f < c; ++f) {
    const a = this[f]();
    if (a !== void 0) return a;
  }
}
function fv(...f) {
  let c = !1;
  for (let S = 0; S < f.length; S++) {
    const h = f[S];
    ((c = c || (!!h && Xy in h)), (f[S] = typeof h == "function" ? ((c = !0), nn(h)) : h));
  }
  if (N3 && c)
    return new Proxy(
      {
        get(S) {
          for (let h = f.length - 1; h >= 0; h--) {
            const M = Ry(f[h])[S];
            if (M !== void 0) return M;
          }
        },
        has(S) {
          for (let h = f.length - 1; h >= 0; h--) if (S in Ry(f[h])) return !0;
          return !1;
        },
        keys() {
          const S = [];
          for (let h = 0; h < f.length; h++) S.push(...Object.keys(Ry(f[h])));
          return [...new Set(S)];
        },
      },
      $3,
    );
  const a = {},
    d = Object.create(null);
  for (let S = f.length - 1; S >= 0; S--) {
    const h = f[S];
    if (!h) continue;
    const M = Object.getOwnPropertyNames(h);
    for (let P = M.length - 1; P >= 0; P--) {
      const O = M[P];
      if (O === "__proto__" || O === "constructor") continue;
      const D = Object.getOwnPropertyDescriptor(h, O);
      if (!d[O])
        d[O] = D.get
          ? { enumerable: !0, configurable: !0, get: Y3.bind((a[O] = [D.get.bind(h)])) }
          : D.value !== void 0
            ? D
            : void 0;
      else {
        const F = a[O];
        F && (D.get ? F.push(D.get.bind(h)) : D.value !== void 0 && F.push(() => D.value));
      }
    }
  }
  const g = {},
    T = Object.keys(d);
  for (let S = T.length - 1; S >= 0; S--) {
    const h = T[S],
      M = d[h];
    M && M.get ? Object.defineProperty(g, h, M) : (g[h] = M ? M.value : void 0);
  }
  return g;
}
function q3(f) {
  let c, a;
  const d = g => {
    const T = Ct.context;
    if (T) {
      const [h, M] = Un();
      (Ct.count || (Ct.count = 0),
        Ct.count++,
        (a || (a = f())).then(P => {
          (!Ct.done && xl(T), Ct.count--, M(() => P.default), xl());
        }),
        (c = h));
    } else if (!c) {
      const [h] = Wy(() => (a || (a = f())).then(M => M.default));
      c = h;
    }
    let S;
    return nn(() =>
      (S = c())
        ? Yn(() => {
            if (!T || Ct.done) return S(g);
            const h = Ct.context;
            xl(T);
            const M = S(g);
            return (xl(h), M);
          })
        : "",
    );
  };
  return ((d.preload = () => a || ((a = f()).then(g => (c = () => g.default)), a)), d);
}
const J3 = f => "Stale read from <".concat(f, ">.");
function Q3(f) {
  const c = "fallback" in f && { fallback: () => f.fallback };
  return nn(K3(() => f.each, f.children, c || void 0));
}
function n2(f) {
  const c = f.keyed,
    a = nn(() => f.when, void 0, void 0),
    d = c ? a : nn(a, void 0, { equals: (g, T) => !g == !T });
  return nn(
    () => {
      const g = d();
      if (g) {
        const T = f.children;
        return typeof T == "function" && T.length > 0
          ? Yn(() =>
              T(
                c
                  ? g
                  : () => {
                      if (!Yn(d)) throw J3("Show");
                      return a();
                    },
              ),
            )
          : T;
      }
      return f.fallback;
    },
    void 0,
    void 0,
  );
}
const [hv, r2] = Un(void 0);
function Z3(f, c) {
  return f ? (c ? { ...c, ...f } : f) : c;
}
const eN = (f, c, a) => (c < a ? Math.min(Math.max(f, c), a) : Math.min(Math.max(f, a), c)),
  tN = f => nn(() => f());
function nN({
  createElement: f,
  createTextNode: c,
  isTextNode: a,
  replaceText: d,
  insertNode: g,
  removeNode: T,
  setProperty: S,
  getParentNode: h,
  getFirstChild: M,
  getNextSibling: P,
}) {
  function O(J, oe, x, Y) {
    if ((x !== void 0 && !Y && (Y = []), typeof oe != "function")) return D(J, oe, Y, x);
    Zr(me => D(J, oe(), me, x), Y);
  }
  function D(J, oe, x, Y, me) {
    for (; typeof x == "function"; ) x = x();
    if (oe === x) return x;
    const he = typeof oe,
      ve = Y !== void 0;
    if (he === "string" || he === "number")
      if ((he === "number" && (oe = oe.toString()), ve)) {
        let I = x[0];
        (I && a(I) ? d(I, oe) : (I = c(oe)), (x = $(J, x, Y, I)));
      } else x !== "" && typeof x == "string" ? d(M(J), (x = oe)) : ($(J, x, Y, c(oe)), (x = oe));
    else if (oe == null || he === "boolean") x = $(J, x, Y);
    else {
      if (he === "function")
        return (
          Zr(() => {
            let I = oe();
            for (; typeof I == "function"; ) I = I();
            x = D(J, I, x, Y);
          }),
          () => x
        );
      if (Array.isArray(oe)) {
        const I = [];
        if (F(I, oe, me)) return (Zr(() => (x = D(J, I, x, Y, !0))), () => x);
        if (I.length === 0) {
          const re = $(J, x, Y);
          if (ve) return (x = re);
        } else
          Array.isArray(x)
            ? x.length === 0
              ? Q(J, I, Y)
              : K(J, x, I)
            : x == null || x === ""
              ? Q(J, I)
              : K(J, (ve && x) || [M(J)], I);
        x = I;
      } else {
        if (Array.isArray(x)) {
          if (ve) return (x = $(J, x, Y, oe));
          $(J, x, null, oe);
        } else x == null || x === "" || !M(J) ? g(J, oe) : ue(J, oe, M(J));
        x = oe;
      }
    }
    return x;
  }
  function F(J, oe, x) {
    let Y = !1;
    for (let me = 0, he = oe.length; me < he; me++) {
      let ve = oe[me],
        I;
      if (!(ve == null || ve === !0 || ve === !1))
        if (Array.isArray(ve)) Y = F(J, ve) || Y;
        else if ((I = typeof ve) == "string" || I === "number") J.push(c(ve));
        else if (I === "function")
          if (x) {
            for (; typeof ve == "function"; ) ve = ve();
            Y = F(J, Array.isArray(ve) ? ve : [ve]) || Y;
          } else (J.push(ve), (Y = !0));
        else J.push(ve);
    }
    return Y;
  }
  function K(J, oe, x) {
    let Y = x.length,
      me = oe.length,
      he = Y,
      ve = 0,
      I = 0,
      re = P(oe[me - 1]),
      ee = null;
    for (; ve < me || I < he; ) {
      if (oe[ve] === x[I]) {
        (ve++, I++);
        continue;
      }
      for (; oe[me - 1] === x[he - 1]; ) (me--, he--);
      if (me === ve) {
        const ge = he < Y ? (I ? P(x[I - 1]) : x[he - I]) : re;
        for (; I < he; ) g(J, x[I++], ge);
      } else if (he === I) for (; ve < me; ) ((!ee || !ee.has(oe[ve])) && T(J, oe[ve]), ve++);
      else if (oe[ve] === x[he - 1] && x[I] === oe[me - 1]) {
        const ge = P(oe[--me]);
        (g(J, x[I++], P(oe[ve++])), g(J, x[--he], ge), (oe[me] = x[he]));
      } else {
        if (!ee) {
          ee = new Map();
          let de = I;
          for (; de < he; ) ee.set(x[de], de++);
        }
        const ge = ee.get(oe[ve]);
        if (ge != null)
          if (I < ge && ge < he) {
            let de = ve,
              se = 1,
              ye;
            for (; ++de < me && de < he && !((ye = ee.get(oe[de])) == null || ye !== ge + se); ) se++;
            if (se > ge - I) {
              const Ne = oe[ve];
              for (; I < ge; ) g(J, x[I++], Ne);
            } else ue(J, x[I++], oe[ve++]);
          } else ve++;
        else T(J, oe[ve++]);
      }
    }
  }
  function $(J, oe, x, Y) {
    if (x === void 0) {
      let he;
      for (; (he = M(J)); ) T(J, he);
      return (Y && g(J, Y), "");
    }
    const me = Y || c("");
    if (oe.length) {
      let he = !1;
      for (let ve = oe.length - 1; ve >= 0; ve--) {
        const I = oe[ve];
        if (me !== I) {
          const re = h(I) === J;
          !he && !ve ? (re ? ue(J, me, I) : g(J, me, x)) : re && T(J, I);
        } else he = !0;
      }
    } else g(J, me, x);
    return [me];
  }
  function Q(J, oe, x) {
    for (let Y = 0, me = oe.length; Y < me; Y++) g(J, oe[Y], x);
  }
  function ue(J, oe, x) {
    (g(J, oe, x), T(J, x));
  }
  function le(J, oe, x = {}, Y) {
    return (
      oe || (oe = {}),
      Y || Zr(() => (x.children = D(J, oe.children, x.children))),
      Zr(() => oe.ref && oe.ref(J)),
      Zr(() => {
        for (const me in oe) {
          if (me === "children" || me === "ref") continue;
          const he = oe[me];
          he !== x[me] && (S(J, me, he, x[me]), (x[me] = he));
        }
      }),
      x
    );
  }
  return {
    render(J, oe) {
      let x;
      return (
        Ts(Y => {
          ((x = Y), O(oe, J()));
        }),
        x
      );
    },
    insert: O,
    spread(J, oe, x) {
      typeof oe == "function" ? Zr(Y => le(J, oe(), Y, x)) : le(J, oe, void 0, x);
    },
    createElement: f,
    createTextNode: c,
    insertNode: g,
    setProp(J, oe, x, Y) {
      return (S(J, oe, x, Y), x);
    },
    mergeProps: fv,
    effect: Zr,
    memo: tN,
    createComponent: t2,
    use(J, oe, x) {
      return Yn(() => J(oe, x));
    },
  };
}
function rN(f) {
  const c = nN(f);
  return ((c.mergeProps = fv), c);
}
Object.defineProperty(Hi.prototype, "preserve", {
  get() {
    return this._queueDelete === 0;
  },
  set(f) {
    this._queueDelete = f ? 0 : void 0;
  },
});
let $y = [];
function iN() {
  for (let f of $y) (Number(f._queueDelete) < 0 && f.destroy(), (f._queueDelete = void 0));
  $y.length = 0;
}
function eI(f, c) {
  f._queueDelete === void 0
    ? ((f._queueDelete = c), $y.push(f) === 1 && queueMicrotask(iN))
    : (f._queueDelete += c);
}
const i2 = {
    createElement(f) {
      return new Hi(f);
    },
    createTextNode(f) {
      return { _type: _a.Text, text: f };
    },
    replaceText(f, c) {
      (Ay("Replace Text: ", f, c), (f.text = c));
      const a = f.parent;
      a.text = a.getText();
    },
    setProperty(f, c, a = !0) {
      f[c] = a;
    },
    insertNode(f, c, a) {
      Ay("INSERT: ", f, c, a);
      let d = c.parent;
      (f.insertChild(c, a),
        c instanceof Hi
          ? (c.parent.rendered && c.render(!0), d !== void 0 && eI(c, 1))
          : wl(f) && (f.text = f.getText()));
    },
    isTextNode(f) {
      return wl(f);
    },
    removeNode(f, c) {
      (Ay("REMOVE: ", f, c), f.removeChild(c), c instanceof Hi ? eI(c, -1) : wl(f) && (f.text = f.getText()));
    },
    getParentNode(f) {
      return f.parent;
    },
    getFirstChild(f) {
      return f.children[0];
    },
    getNextSibling(f) {
      const c = f.parent.children || [],
        a = c.indexOf(f) + 1;
      if (a < c.length) return c[a];
    },
  },
  s2 = rN(i2);
let Ff;
const Al = i2.createElement("App"),
  sN = function (f) {
    return s2.render(f, Al);
  };
function oN(f, c) {
  const a = zt.rendererOptions;
  return (
    (Ff = S3(a, "app")),
    (zt.setActiveElement = r2),
    (Al.lng = Ff.root),
    (Al.rendered = !0),
    Ff.on("idle", () => {
      ((yv = !0), o2());
    }),
    { renderer: Ff, rootNode: Al, render: sN }
  );
}
const { memo: aN, createComponent: Lt, createElement: pv, spread: gv, mergeProps: mv } = s2,
  tI = [];
let yv = !1;
Ts(() => {
  Zr(() => {
    (hv(), (yv = !1));
  });
});
function o2() {
  yv &&
    tI.length &&
    setTimeout(() => {
      const f = tI.shift();
      f && (f(), o2());
    }, zt.taskDelay || 50);
}
const Ss = f => {
    const c = pv("node");
    return (gv(c, f, !1), c);
  },
  a2 = f => {
    const c = pv("text");
    return (gv(c, f, !1), c);
  };
const uN = !1;
function u2() {
  let f = new Set();
  function c(g) {
    return (f.add(g), () => f.delete(g));
  }
  let a = !1;
  function d(g, T) {
    if (a) return !(a = !1);
    const S = { to: g, options: T, defaultPrevented: !1, preventDefault: () => (S.defaultPrevented = !0) };
    for (const h of f)
      h.listener({
        ...S,
        from: h.location,
        retry: M => {
          (M && (a = !0), h.navigate(g, { ...T, resolve: !1 }));
        },
      });
    return !S.defaultPrevented;
  }
  return { subscribe: c, confirm: d };
}
let Yy;
function vv() {
  ((!window.history.state || window.history.state._depth == null) &&
    window.history.replaceState({ ...window.history.state, _depth: window.history.length - 1 }, ""),
    (Yy = window.history.state._depth));
}
vv();
function lN(f) {
  return { ...f, _depth: window.history.state && window.history.state._depth };
}
function cN(f, c) {
  let a = !1;
  return () => {
    const d = Yy;
    vv();
    const g = d == null ? null : Yy - d;
    if (a) {
      a = !1;
      return;
    }
    g && c(g) ? ((a = !0), window.history.go(-g)) : f();
  };
}
const dN = /^(?:[a-z0-9]+:)?\/\//i,
  fN = /^\/+|(\/)\/+$/g,
  hN = "http://sr";
function El(f, c = !1) {
  const a = f.replace(fN, "$1");
  return a ? (c || /^[?#]/.test(a) ? a : "/" + a) : "";
}
function Yf(f, c, a) {
  if (dN.test(c)) return;
  const d = El(f),
    g = a && El(a);
  let T = "";
  return (
    !g || c.startsWith("/")
      ? (T = d)
      : g.toLowerCase().indexOf(d.toLowerCase()) !== 0
        ? (T = d + g)
        : (T = g),
    (T || "/") + El(c, !T)
  );
}
function pN(f, c) {
  if (f == null) throw new Error(c);
  return f;
}
function gN(f, c) {
  return El(f).replace(/\/*(\*.*)?$/g, "") + El(c);
}
function l2(f) {
  const c = {};
  return (
    f.searchParams.forEach((a, d) => {
      d in c ? (Array.isArray(c[d]) ? c[d].push(a) : (c[d] = [c[d], a])) : (c[d] = a);
    }),
    c
  );
}
function mN(f, c, a) {
  const [d, g] = f.split("/*", 2),
    T = d.split("/").filter(Boolean),
    S = T.length;
  return h => {
    const M = h.split("/").filter(Boolean),
      P = M.length - S;
    if (P < 0 || (P > 0 && g === void 0 && !c)) return null;
    const O = { path: S ? "" : "/", params: {} },
      D = F => (a === void 0 ? void 0 : a[F]);
    for (let F = 0; F < S; F++) {
      const K = T[F],
        $ = K[0] === ":",
        Q = $ ? M[F] : M[F].toLowerCase(),
        ue = $ ? K.slice(1) : K.toLowerCase();
      if ($ && ky(Q, D(ue))) O.params[ue] = Q;
      else if ($ || !ky(Q, ue)) return null;
      O.path += "/".concat(Q);
    }
    if (g) {
      const F = P ? M.slice(-P).join("/") : "";
      if (ky(F, D(g))) O.params[g] = F;
      else return null;
    }
    return O;
  };
}
function ky(f, c) {
  const a = d => d === f;
  return c === void 0
    ? !0
    : typeof c == "string"
      ? a(c)
      : typeof c == "function"
        ? c(f)
        : Array.isArray(c)
          ? c.some(a)
          : c instanceof RegExp
            ? c.test(f)
            : !1;
}
function yN(f) {
  const [c, a] = f.pattern.split("/*", 2),
    d = c.split("/").filter(Boolean);
  return d.reduce((g, T) => g + (T.startsWith(":") ? 2 : 3), d.length - (a === void 0 ? 0 : 1));
}
function c2(f) {
  const c = new Map(),
    a = Wi();
  return new Proxy(
    {},
    {
      get(d, g) {
        return (
          c.has(g) ||
            io(a, () =>
              c.set(
                g,
                nn(() => f()[g]),
              ),
            ),
          c.get(g)()
        );
      },
      getOwnPropertyDescriptor() {
        return { enumerable: !0, configurable: !0 };
      },
      ownKeys() {
        return Reflect.ownKeys(f());
      },
      has(d, g) {
        return g in f();
      },
    },
  );
}
function d2(f) {
  let c = /(\/?\:[^\/]+)\?/.exec(f);
  if (!c) return [f];
  let a = f.slice(0, c.index),
    d = f.slice(c.index + c[0].length);
  const g = [a, (a += c[1])];
  for (; (c = /^(\/\:[^\/]+)\?/.exec(d)); ) (g.push((a += c[1])), (d = d.slice(c[0].length)));
  return d2(d).reduce((T, S) => [...T, ...g.map(h => h + S)], []);
}
const vN = 100,
  f2 = YI(),
  h2 = YI(),
  xN = () => pN(qI(f2), "<A> and 'use' router primitives can be only used inside a Route."),
  p2 = () => xN().navigatorFactory();
function TN(f, c = "") {
  const { component: a, preload: d, load: g, children: T, info: S } = f,
    h = !T || (Array.isArray(T) && !T.length),
    M = { key: f, component: a, preload: d || g, info: S };
  return g2(f.path).reduce((P, O) => {
    for (const D of d2(O)) {
      const F = gN(c, D);
      let K = h ? F : F.split("/*", 1)[0];
      ((K = K.split("/")
        .map($ => ($.startsWith(":") || $.startsWith("*") ? $ : encodeURIComponent($)))
        .join("/")),
        P.push({ ...M, originalPath: O, pattern: K, matcher: mN(K, !h, f.matchFilters) }));
    }
    return P;
  }, []);
}
function SN(f, c = 0) {
  return {
    routes: f,
    score: yN(f[f.length - 1]) * 1e4 - c,
    matcher(a) {
      const d = [];
      for (let g = f.length - 1; g >= 0; g--) {
        const T = f[g],
          S = T.matcher(a);
        if (!S) return null;
        d.unshift({ ...S, route: T });
      }
      return d;
    },
  };
}
function g2(f) {
  return Array.isArray(f) ? f : [f];
}
function m2(f, c = "", a = [], d = []) {
  const g = g2(f);
  for (let T = 0, S = g.length; T < S; T++) {
    const h = g[T];
    if (h && typeof h == "object") {
      h.hasOwnProperty("path") || (h.path = "");
      const M = TN(h, c);
      for (const P of M) {
        a.push(P);
        const O = Array.isArray(h.children) && h.children.length === 0;
        if (h.children && !O) m2(h.children, P.pattern, a, d);
        else {
          const D = SN([...a], d.length);
          d.push(D);
        }
        a.pop();
      }
    }
  }
  return a.length ? d : d.sort((T, S) => S.score - T.score);
}
function _y(f, c) {
  for (let a = 0, d = f.length; a < d; a++) {
    const g = f[a].matcher(c);
    if (g) return g;
  }
  return [];
}
function wN(f, c, a) {
  const d = new URL(hN),
    g = nn(
      O => {
        const D = f();
        try {
          return new URL(D, d);
        } catch (F) {
          return (console.error("Invalid path ".concat(D)), O);
        }
      },
      d,
      { equals: (O, D) => O.href === D.href },
    ),
    T = nn(() => g().pathname),
    S = nn(() => g().search, !0),
    h = nn(() => g().hash),
    M = () => "",
    P = jl(S, () => l2(g()));
  return {
    get pathname() {
      return T();
    },
    get search() {
      return S();
    },
    get hash() {
      return h();
    },
    get state() {
      return c();
    },
    get key() {
      return M();
    },
    query: a ? a(P) : c2(P),
  };
}
let to;
function AN() {
  return to;
}
function EN(f, c, a, d = {}) {
  const {
      signal: [g, T],
      utils: S = {},
    } = f,
    h = S.parsePath || (se => se),
    M = S.renderPath || (se => se),
    P = S.beforeLeave || u2(),
    O = Yf("", d.base || "");
  if (O === void 0) throw new Error("".concat(O, " is not a valid base path"));
  O && !g().value && T({ value: O, replace: !0, scroll: !1 });
  const [D, F] = Un(!1);
  let K;
  const $ = (se, ye) => {
      (ye.value === Q() && ye.state === le()) ||
        (K === void 0 && F(!0),
        (to = se),
        (K = ye),
        F3(() => {
          K === ye && (ue(K.value), J(K.state), Y[1](Ne => Ne.filter(ht => ht.pending)));
        }).finally(() => {
          K === ye &&
            KI(() => {
              ((to = void 0), se === "navigate" && ge(K), F(!1), (K = void 0));
            });
        }));
    },
    [Q, ue] = Un(g().value),
    [le, J] = Un(g().state),
    oe = wN(Q, le, S.queryWrapper),
    x = [],
    Y = Un([]),
    me = nn(() =>
      typeof d.transformUrl == "function" ? _y(c(), d.transformUrl(oe.pathname)) : _y(c(), oe.pathname),
    ),
    he = () => {
      const se = me(),
        ye = {};
      for (let Ne = 0; Ne < se.length; Ne++) Object.assign(ye, se[Ne].params);
      return ye;
    },
    ve = S.paramsWrapper ? S.paramsWrapper(he, c) : c2(he),
    I = {
      pattern: O,
      path: () => O,
      outlet: () => null,
      resolvePath(se) {
        return Yf(O, se);
      },
    };
  return (
    Zr(jl(g, se => $("native", se), { defer: !0 })),
    {
      base: I,
      location: oe,
      params: ve,
      isRouting: D,
      renderPath: M,
      parsePath: h,
      navigatorFactory: ee,
      matches: me,
      beforeLeave: P,
      preloadRoute: de,
      singleFlight: d.singleFlight === void 0 ? !0 : d.singleFlight,
      submissions: Y,
    }
  );
  function re(se, ye, Ne) {
    Yn(() => {
      if (typeof ye == "number") {
        ye && (S.go ? S.go(ye) : console.warn("Router integration does not support relative routing"));
        return;
      }
      const ht = !ye || ye[0] === "?",
        {
          replace: rn,
          resolve: Zt,
          scroll: Ft,
          state: cn,
        } = { replace: !1, resolve: !ht, scroll: !0, ...Ne },
        Tn = Zt ? se.resolvePath(ye) : Yf((ht && oe.pathname) || "", ye);
      if (Tn === void 0) throw new Error("Path '".concat(ye, "' is not a routable path"));
      if (x.length >= vN) throw new Error("Too many redirects");
      const j = Q();
      (Tn !== j || cn !== le()) &&
        (uN ||
          (P.confirm(Tn, Ne) &&
            (x.push({ value: j, replace: rn, scroll: Ft, state: le() }),
            $("navigate", { value: Tn, state: cn }))));
    });
  }
  function ee(se) {
    return ((se = se || qI(h2) || I), (ye, Ne) => re(se, ye, Ne));
  }
  function ge(se) {
    const ye = x[0];
    ye && (T({ ...se, replace: ye.replace, scroll: ye.scroll }), (x.length = 0));
  }
  function de(se, ye) {
    const Ne = _y(c(), se.pathname),
      ht = to;
    to = "preload";
    for (let rn in Ne) {
      const { route: Zt, params: Ft } = Ne[rn];
      Zt.component && Zt.component.preload && Zt.component.preload();
      const { preload: cn } = Zt;
      ye &&
        cn &&
        io(a(), () =>
          cn({
            params: Ft,
            location: {
              pathname: se.pathname,
              search: se.search,
              hash: se.hash,
              query: l2(se),
              state: null,
              key: "",
            },
            intent: "preload",
          }),
        );
    }
    to = ht;
  }
}
function IN(f, c, a, d) {
  const { base: g, location: T, params: S } = f,
    { pattern: h, component: M, preload: P } = d().route,
    O = nn(() => d().path);
  M && M.preload && M.preload();
  const D = P ? P({ params: S, location: T, intent: to || "initial" }) : void 0;
  return {
    parent: c,
    pattern: h,
    path: O,
    outlet: () =>
      M
        ? t2(M, {
            params: S,
            location: T,
            data: D,
            get children() {
              return a();
            },
          })
        : a(),
    resolvePath(K) {
      return Yf(g.path(), K, O());
    },
  };
}
const CN = f => c => {
  const { base: a } = c,
    d = cv(() => c.children),
    g = nn(() => m2(d(), c.base || ""));
  let T;
  const S = EN(f, g, () => T, { base: a, singleFlight: c.singleFlight, transformUrl: c.transformUrl });
  return (
    f.create && f.create(S),
    Lt(f2.Provider, {
      value: S,
      get children() {
        return Lt(MN, {
          routerState: S,
          get root() {
            return c.root;
          },
          get preload() {
            return c.rootPreload || c.rootLoad;
          },
          get children() {
            return [
              aN(() => (T = Wi()) && null),
              Lt(RN, {
                routerState: S,
                get branches() {
                  return g();
                },
              }),
            ];
          },
        });
      },
    })
  );
};
function MN(f) {
  const c = f.routerState.location,
    a = f.routerState.params,
    d = nn(
      () =>
        f.preload &&
        Yn(() => {
          f.preload({ params: a, location: c, intent: AN() || "initial" });
        }),
    );
  return Lt(n2, {
    get when() {
      return f.root;
    },
    keyed: !0,
    get fallback() {
      return f.children;
    },
    children: g =>
      Lt(g, {
        params: a,
        location: c,
        get data() {
          return d();
        },
        get children() {
          return f.children;
        },
      }),
  });
}
function RN(f) {
  const c = [];
  let a;
  const d = nn(
    jl(f.routerState.matches, (g, T, S) => {
      let h = T && g.length === T.length;
      const M = [];
      for (let P = 0, O = g.length; P < O; P++) {
        const D = T && T[P],
          F = g[P];
        S && D && F.route.key === D.route.key
          ? (M[P] = S[P])
          : ((h = !1),
            c[P] && c[P](),
            Ts(K => {
              ((c[P] = K),
                (M[P] = IN(
                  f.routerState,
                  M[P - 1] || f.routerState.base,
                  nI(() => d()[P + 1]),
                  () => {
                    var Q;
                    const $ = f.routerState.matches();
                    return (Q = $[P]) != null ? Q : $[0];
                  },
                )));
            }));
      }
      return (c.splice(g.length).forEach(P => P()), S && h ? S : ((a = M[0]), M));
    }),
  );
  return nI(() => d() && a)();
}
const nI = f => () =>
    Lt(n2, {
      get when() {
        return f();
      },
      keyed: !0,
      children: c =>
        Lt(h2.Provider, {
          value: c,
          get children() {
            return c.outlet();
          },
        }),
    }),
  Vf = f => {
    const c = cv(() => f.children);
    return fv(f, {
      get children() {
        return c();
      },
    });
  };
function kN([f, c], a, d) {
  return [f, d ? g => c(d(g)) : c];
}
function _N(f) {
  let c = !1;
  const a = g => (typeof g == "string" ? { value: g } : g),
    d = kN(
      Un(a(f.get()), { equals: (g, T) => g.value === T.value && g.state === T.state }),
      void 0,
      g => (!c && f.set(g), Ct.registry && !Ct.done && (Ct.done = !0), g),
    );
  return (
    f.init &&
      Xi(
        f.init((g = f.get()) => {
          ((c = !0), d[1](a(g)), (c = !1));
        }),
      ),
    CN({ signal: d, create: f.create, utils: f.utils })
  );
}
const [y2, PN] = Un([]),
  DN = (f, c) => {
    const a = Wi(),
      d = io.bind(void 0, a);
    zt.setActiveElement = S => d(() => r2(S));
    const { cleanup: g, focusPath: T } = _3({ userKeyMap: f, keyHoldOptions: c, ownerContext: d });
    (ph(
      jl(
        hv,
        () => {
          PN([...T()]);
        },
        { defer: !0 },
      ),
    ),
      Xi(g));
  },
  sh = "aria-parent";
let oh = [];
function LN(f = []) {
  const c = [];
  let a;
  for (a = 0; a < f.length; a++) {
    const d = f[a];
    if (typeof d == "string" && !d.includes("PAUSE-")) c.push(f[a]);
    else break;
  }
  return [c.join(",\b ")].concat(f.slice(a));
}
function Py(f) {
  return new Promise(c => {
    setTimeout(c, f);
  });
}
function rI(f) {
  var c;
  ((c = f == null ? void 0 : f.text) == null ? void 0 : c.trim().length) !== 0 && oh.push(f);
}
function bN() {
  const f = T2();
  if (!f) {
    console.error("ARIA div not found: ".concat(sh));
    return;
  }
  for (const c of oh) {
    const a = document.createElement("span");
    (a.setAttribute("lang", c.lang), a.setAttribute("aria-label", c.text), f.appendChild(a));
  }
  setTimeout(() => {
    ((oh = []), v2(), x2());
  }, 100);
}
function v2() {
  const f = document.getElementById(sh);
  if (f) for (; f.firstChild; ) f.removeChild(f.firstChild);
}
function x2() {
  var c;
  const f = (c = document.getElementById("app")) == null ? void 0 : c.firstChild;
  f == null || f.focus();
}
function T2() {
  const f = document.getElementById(sh);
  if (!f) {
    const c = document.createElement("div");
    return (
      c.setAttribute("id", sh),
      c.setAttribute("aria-live", "assertive"),
      c.setAttribute("tabindex", "0"),
      document.body.appendChild(c),
      c
    );
  }
  return f;
}
function iI(f, c, a = "en-US", d) {
  const g = window.speechSynthesis;
  return new Promise((T, S) => {
    let h;
    if (d) {
      const P = g.getVoices();
      h = P.find(O => O.name === d) || P[0];
    }
    const M = new SpeechSynthesisUtterance(f);
    ((M.lang = a),
      h && (M.voice = h),
      (M.onend = () => {
        T();
      }),
      (M.onerror = P => {
        S(P);
      }),
      c.push(M),
      g.speak(M));
  });
}
function qy(f, c, a, d, g = !0) {
  const T = window.speechSynthesis,
    S = LN(Array.isArray(f) ? f : [f]),
    h = [],
    M = [];
  let P = !0;
  return {
    series: (async () => {
      try {
        for (; P && S.length; ) {
          const D = await Promise.resolve(S.shift());
          if (!P) break;
          if (typeof D == "string" && D.includes("PAUSE-")) {
            const F = Number(D.split("PAUSE-")[1]) * 1e3;
            isNaN(F) || (await Py(F));
          } else if (typeof D == "string") {
            if (!D) continue;
            const F = 3;
            let K = F;
            for (; P && K > 0; )
              try {
                (c ? rI({ text: D, lang: a }) : await iI(D, M, a, d), (K = 0));
              } catch ($) {
                if ($ instanceof SpeechSynthesisErrorEvent)
                  if ($.error === "network")
                    (K--,
                      console.warn("Speech synthesis network error. Retries left: ".concat(K)),
                      await Py(500 * (F - K)));
                  else if ($.error === "canceled" || $.error === "interrupted") K = 0;
                  else throw new Error("SpeechSynthesisErrorEvent: ".concat($.error));
                else throw $;
              }
          } else if (D instanceof SpeechSynthesisUtterance) {
            let K = 3;
            const $ = D.text,
              Q = D == null ? void 0 : D.lang,
              ue = D == null ? void 0 : D.voice;
            for (; P && K > 0; )
              try {
                $ &&
                  (c ? rI({ text: $, lang: Q }) : await iI($, M, Q, ue == null ? void 0 : ue.name), (K = 0));
              } catch (le) {
                if (le instanceof SpeechSynthesisErrorEvent)
                  if (le.error === "network")
                    (K--,
                      console.warn("Speech synthesis network error. Retries left: ".concat(K)),
                      await Py(500 * (3 - K)));
                  else if (le.error === "canceled" || le.error === "interrupted") K = 0;
                  else throw new Error("SpeechSynthesisErrorEvent: ".concat(le.error));
                else throw le;
              }
          } else if (typeof D == "function") {
            const F = qy(D(), c, a, d, !1);
            (h.push(F), await F.series);
          } else if (Array.isArray(D)) {
            const F = qy(D, c, a, d, !1);
            (h.push(F), await F.series);
          }
        }
      } finally {
        ((P = !1), g && c && bN());
      }
    })(),
    get active() {
      return P;
    },
    append: D => {
      S.push(D);
    },
    cancel: () => {
      if (P) {
        if (g) {
          if (c) {
            const D = T2();
            D && ((oh = []), v2(), D.focus(), x2());
            return;
          }
          T.cancel();
        }
        (h.forEach(D => {
          D.cancel();
        }),
          (P = !1));
      }
    },
  };
}
let Hf;
function NN(f, c, a = "en-US", d) {
  return (Hf && Hf.cancel(), (Hf = qy(f, c, a, d)), Hf);
}
const ON = (f, c) => {
    let a;
    const d = () => clearTimeout(a);
    return (
      Wi() && Xi(d),
      Object.assign(
        (...T) => {
          (a !== void 0 && d(), (a = setTimeout(() => f(...T), c)));
        },
        { clear: d },
      )
    );
  },
  S2 = (f, c) => {
    let a = !1,
      d,
      g;
    const T = (...h) => {
        ((g = h),
          !a &&
            ((a = !0),
            (d = setTimeout(() => {
              (f(...g), (a = !1));
            }, c))));
      },
      S = () => {
        (clearTimeout(d), (a = !1));
      };
    return (Wi() && Xi(S), Object.assign(T, { clear: S }));
  };
function UN(f) {
  let c = 0,
    a = !1;
  const [d, g] = Un(void 0, { equals: !1 }),
    T = f(() => {
      ((a = !0), g());
    });
  return () => (a || (T(), d()), a ? ((a = !!c), !0) : ($I() && (c++, Xi(() => c--)), !1));
}
let Jy,
  Il = [],
  li,
  Qy = !1;
const jN = 3e5;
function sI(f, c) {
  const a = ON(f, c);
  let d;
  const g = T => {
    ((d = T), a(T));
  };
  return (
    (g.flush = () => {
      (a.clear(), f(d));
    }),
    (g.clear = a.clear),
    g
  );
}
function hl(f) {
  return f.id || f.name;
}
function BN(f = []) {
  if (!tn.onFocusChange || !tn.enabled) return;
  const c = f.every(T => !T.loading),
    a = f.filter(T => !Il.includes(T));
  if ((Jy(), !c && tn.onFocusChange)) {
    tn.onFocusChange([]);
    return;
  }
  Il = f.slice(0);
  const d = [],
    g = a
      .reverse()
      .reduce(
        (T, S) => (
          S.announce
            ? (T.push([hl(S), "Announce", S.announce]), d.push(S.announce))
            : S.title
              ? (T.push([hl(S), "Title", S.title]), d.push(S.title))
              : T.push([hl(S), "No Announce", ""]),
          T
        ),
        [],
      );
  if (
    (a
      .reverse()
      .reduce(
        (T, S) => (
          S.announceContext
            ? (T.push([hl(S), "Context", S.announceContext]), d.push(S.announceContext))
            : T.push([hl(S), "No Context", ""]),
          T
        ),
        g,
      ),
    tn.debug && console.table(g),
    d.length)
  )
    return tn.speak(d.reduce((T, S) => T.concat(S), []));
}
function FN(f, c, a, d) {
  if (!Qy) return (li = NN(f, c, a, d));
}
const tn = {
  debug: !1,
  enabled: !0,
  lang: "en-US",
  aria: !1,
  cancel: function () {
    li && li.cancel();
  },
  clearPrevFocus: function (f = 0) {
    ((Il = Il.slice(0, f)), Jy());
  },
  speak: function (f, { append: c = !1, notification: a = !1 } = {}) {
    return (
      tn.onFocusChange &&
        tn.enabled &&
        (c && li && li.active ? li.append(f) : (tn.cancel(), FN(f, tn.aria, tn.lang, tn.voice)),
        a &&
          ((Qy = !0),
          li == null ||
            li.series
              .finally(() => {
                ((Qy = !1), tn.refresh());
              })
              .catch(console.error))),
      li
    );
  },
  refresh: function (f = 0) {
    (tn.clearPrevFocus(f), tn.onFocusChange && tn.onFocusChange(Yn(() => y2())));
  },
  setupTimers: function ({ focusDebounce: f = 400, focusChangeTimeout: c = jN } = {}) {
    ((tn.onFocusChange = sI(BN, f)),
      (Jy = sI(() => {
        Il = [];
      }, c)));
  },
};
let oI = !1;
const VN = f => (oI || ((oI = !0), tn.setupTimers(f), ph(jl(y2, tn.onFocusChange, { defer: !0 }))), tn);
function HN(f) {
  return f !== null && (typeof f == "object" || typeof f == "function");
}
function aI(f, ...c) {
  return typeof f == "function" ? f(...c) : f;
}
const GN = Xi,
  zN = () => {
    let f = [];
    const c = () => (f = []);
    return {
      push: (...a) => f.push(...a),
      execute(a, d, g, T) {
        (f.forEach(S => S(a, d, g, T)), c());
      },
      clear: c,
    };
  };
function qf(f, c, a, d) {
  return (f.addEventListener(c, a, d), GN(f.removeEventListener.bind(f, c, a, d)));
}
function w2(f, c) {
  const { push: a, execute: d } = zN();
  return [
    (g, T, S) => {
      const h = qf(f, g, T, S != null ? S : c);
      return (a(h), h);
    },
    Xi(d),
  ];
}
const A2 = { passive: !0 },
  XN = { x: 0, y: 0, isInside: !1, sourceType: null };
function WN(f = window, c, a = {}) {
  const { touch: d = !0, followTouch: g = !0 } = a,
    [T, S] = w2(f, A2),
    h = M => c({ x: M.pageX, y: M.pageY, sourceType: "mouse" });
  if ((T("mousemove", h), T("dragover", h), d)) {
    const M = P => {
      P.touches.length && c({ x: P.touches[0].clientX, y: P.touches[0].clientY, sourceType: "touch" });
    };
    (T("touchstart", M), g && T("touchmove", M));
  }
  return S;
}
function KN(f = window, c, a = {}) {
  const { touch: d = !0 } = a,
    [g, T] = w2(f, A2);
  let S = !1,
    h = !d;
  function M(P) {
    (this === "mouse" ? (S = P) : (h = P), c(S || h));
  }
  return (
    g("mouseover", M.bind("mouse", !0)),
    g("mouseout", M.bind("mouse", !1)),
    g("mousemove", M.bind("mouse", !0), { passive: !0, once: !0 }),
    d && (g("touchstart", M.bind("touch", !0)), g("touchend", M.bind("touch", !1))),
    T
  );
}
function $N(f, c = Wi()) {
  let a = 0,
    d,
    g;
  return () => (
    a++,
    Xi(() => {
      (a--,
        queueMicrotask(() => {
          !a && g && (g(), (g = d = void 0));
        }));
    }),
    g || Ts(T => (d = f((g = T))), c),
    d
  );
}
function YN(f) {
  const c = Wi(),
    a = $N(f, c);
  return () => (Ct.context ? Ts(f, c) : a());
}
function qN(f) {
  const c = { ...f },
    a = { ...f },
    d = {},
    g = S => {
      let h = d[S];
      if (!h) {
        if (!$I()) return c[S];
        ((d[S] = h = Un(c[S], { internal: !0 })), delete c[S]);
      }
      return h[0]();
    };
  for (const S in f) Object.defineProperty(a, S, { get: () => g(S), enumerable: !0 });
  const T = (S, h) => {
    const M = d[S];
    if (M) return M[1](h);
    S in c && (c[S] = aI(h, c[S]));
  };
  return [
    a,
    (S, h) => {
      if (HN(S)) {
        const M = Yn(() => Object.entries(aI(S, a)));
        KI(() => {
          for (const [P, O] of M) T(P, () => O);
        });
      } else T(S, h);
      return a;
    },
  ];
}
function JN(f, c = {}) {
  const a = { ...XN, ...c.initialValue },
    [d, g] = qN(a),
    T = S => {
      (WN(S, g, c), KN(S, g.bind(void 0, "isInside"), c));
    };
  return (typeof f != "function" ? T(f) : ph(() => T(f())), d);
}
const QN = YN(JN.bind(void 0, void 0, void 0));
function ZN(f, c) {
  var a;
  (a = f == null ? void 0 : f.states) == null || a.remove(c);
}
function ka(f, c, a = "keydown") {
  return new KeyboardEvent(a, {
    key: f,
    keyCode: c,
    which: c,
    ctrlKey: !1,
    altKey: !1,
    shiftKey: !1,
    metaKey: !1,
    bubbles: !0,
  });
}
let uI;
const eO = S2(f => {
  const c = f.deltaY;
  (c < 0
    ? document.body.dispatchEvent(ka("ArrowUp", 38))
    : c > 0 && document.body.dispatchEvent(ka("ArrowDown", 40)),
    clearTimeout(uI),
    (uI = setTimeout(() => {
      (document.body.dispatchEvent(ka("ArrowUp", 38, "keyup")),
        document.body.dispatchEvent(ka("ArrowDown", 40, "keyup")));
    }, 250)));
}, 250);
function tO(f) {
  var g;
  const c = hv(),
    a = ((g = zt.rendererOptions) == null ? void 0 : g.deviceLogicalPixelRatio) || 1;
  if (
    c instanceof Hi &&
    Zy(
      f.clientX,
      f.clientY,
      (c.lng.absX || 0) * a,
      (c.lng.absY || 0) * a,
      (c.width || 0) * a,
      (c.height || 0) * a,
    )
  )
    return c;
  let d = c == null ? void 0 : c.parent;
  for (; d; ) {
    if (
      Pa(d.onMouseClick) &&
      c &&
      Zy(
        f.clientX,
        f.clientY,
        (d.lng.absX || 0) * a,
        (d.lng.absY || 0) * a,
        (d.width || 0) * a,
        (d.height || 0) * a,
      )
    )
      return d;
    d = d.parent;
  }
  return null;
}
function nO(f, c, a, d) {
  if (Pa(f.onMouseClick)) {
    f.onMouseClick(c, f);
    return;
  } else if (Pa(f.onEnter)) {
    f.onEnter();
    return;
  }
  (f.setFocus(),
    setTimeout(() => {
      (document.dispatchEvent(ka("Enter", 13)),
        setTimeout(() => document.body.dispatchEvent(ka("Enter", 13, "keyup")), 1));
    }, 1));
}
function rO(f, c, a) {
  return d => {
    const g = tO(d);
    g && nO(g, d);
  };
}
function iO(f, c, a) {
  return d => {};
}
function Zy(f, c, a, d, g = 0, T = 0) {
  return f >= a && f <= a + g && c >= d && c <= d + T;
}
function sO(f, c, a, d) {
  return eo(f)
    ? f.alpha !== 0 &&
        !f.skipFocus &&
        Zy(c, a, (f.lng.absX || 0) * d, (f.lng.absY || 0) * d, (f.width || 0) * d, (f.height || 0) * d)
    : !1;
}
function oO(f) {
  var d;
  if (f.length === 0) return;
  if (f.length === 1) return f[0];
  let c = -1,
    a;
  for (const g of f) {
    const T = (d = g.zIndex) != null ? d : -1;
    T >= c && ((c = T), (a = g));
  }
  return a;
}
function aO(f, c, a) {
  var S;
  const d = [],
    g = ((S = zt.rendererOptions) == null ? void 0 : S.deviceLogicalPixelRatio) || 1;
  let T = [f];
  for (; T.length > 0; ) {
    const h = T.filter(P => sO(P, c, a, g));
    if (h.length === 0) break;
    const M = oO(h);
    if (!M || VI(M)) break;
    (d.push(M), (T = M.children));
  }
  return d;
}
function uO(f = Al, c = 100, a) {
  const d = QN(),
    g = UN(K => S2(K, c));
  let T = null;
  const S = a == null ? void 0 : a.customStates,
    h = S == null ? void 0 : S.hoverState,
    M = rO(),
    P = iO(),
    O = Wi(),
    D = K => {
      io(O, () => M(K));
    },
    F = K => {
      io(O, () => P(K));
    };
  (qf(window, "wheel", eO),
    qf(window, "click", D),
    qf(window, "mousedown", F),
    ph(() => {
      if (g()) {
        const K = aO(f, d.x, d.y).filter(
          $ => !!($.onEnter || $.onMouseClick || $.onFocus || $[zt.focusStateKey]),
        );
        if (K.length) {
          let $ = K[K.length - 1];
          for (; $; ) {
            const ue = $.parent;
            if (ue != null && ue.forwardStates) $ = ue;
            else break;
          }
          if (!$) return;
          const Q = $.parent;
          ((Q == null ? void 0 : Q.selected) !== void 0 && (Q.selected = Q.children.indexOf($)),
            T && T !== $ && h && ZN(T, h),
            $.setFocus(),
            (T = $));
        }
      }
    }));
}
function lO(f) {
  const c = f.replace(/^.*?#/, "");
  if (!c.startsWith("/")) {
    const [, a = "/"] = window.location.hash.split("#", 2);
    return "".concat(a, "#").concat(c);
  }
  return c;
}
function cO(f, c, a) {
  return (f.addEventListener(c, a), () => f.removeEventListener(c, a));
}
function dO(f) {
  const c = () => window.location.hash.slice(1),
    a = u2();
  return _N({
    get: c,
    set({ value: d, replace: g, state: T }) {
      (g ? window.history.replaceState(lN(T), "", "#" + d) : window.history.pushState(T, "", "#" + d), vv());
    },
    init: d =>
      cO(
        window,
        "hashchange",
        cN(d, g => !a.confirm(g && g < 0 ? g : c())),
      ),
    utils: {
      go: d => window.history.go(d),
      renderPath: d => "#".concat(d),
      parsePath: lO,
      beforeLeave: a,
      queryWrapper: f.forceProxy || !lI ? d => cI(d, f.queryParams) : void 0,
      paramsWrapper: f.forceProxy || !lI ? (d, g) => cI(d, fO(g())) : void 0,
    },
  })(f);
}
const lI = typeof Proxy == "function";
function cI(f, c) {
  const a = new Map(),
    d = Wi(),
    g = {},
    T = h => (
      a.has(h) ||
        io(d, () =>
          a.set(
            h,
            nn(() => f()[h]),
          ),
        ),
      a.get(h)()
    );
  return (
    (c || Object.keys(f())).forEach(h => {
      Object.defineProperty(g, h, { get: () => T(h), enumerable: !0, configurable: !0 });
    }),
    g
  );
}
const fO = f => {
  const c = [];
  return (
    f.forEach(a => {
      a.routes.forEach(d => {
        if (d.pattern) {
          const g = d.pattern.match(/:(\w+)/g);
          g &&
            g.forEach(T => {
              const S = T.slice(1);
              c.includes(S) || c.push(S);
            });
        }
      });
    }),
    c
  );
};
function xv(f, c) {
  return f === 0 || (f >= 0 && f < c.length);
}
function E2(f, c = 0, a = 1) {
  var d;
  for (let g = c; ; g += a) {
    if (!xv(g, f.children))
      if (f.wrap) g = (g + f.children.length) % f.children.length;
      else break;
    if (!((d = f.children[g]) != null && d.skipFocus)) return g;
  }
  return -1;
}
function I2(f, c) {
  var g;
  const a = f.children[c];
  if (a == null || a.skipFocus) return ((f.selected = -1), !1);
  const d = f.selected;
  return (
    (f.selected = c),
    HI(a) || a.setFocus(),
    (g = f.onSelectedChanged) == null || g.call(f, c, f, a, d),
    !0
  );
}
const hO = function () {
  const f = this;
  let c = f.selected;
  if (c !== 0) for (c = eN(c, 0, this.children.length - 1); !xv(c, this.children); ) c--;
  return ((c = E2(f, c)), (f.selected = c), I2(f, c));
};
function C2(f) {
  return function () {
    return pO(this, f === "up" || f === "left" ? -1 : 1);
  };
}
function pO(f, c) {
  var g;
  let a = E2(f, f.selected + c, c);
  if (a === -1) {
    if (
      !xv(f.selected, f.children) ||
      ((g = f.children[f.selected]) != null && g.skipFocus) ||
      HI(f.children[f.selected])
    )
      return !1;
    a = f.selected;
  }
  const d = f.children[a];
  if (f.plinko) {
    const S = f.children[f.selected].selected || 0;
    d.selected = S < d.children.length ? S : d.children.length - 1;
  }
  return I2(f, a);
}
const gO = 8,
  dI = f => f.lng.renderState !== gO;
function mO(f) {
  const c = f ? "width" : "height",
    a = f ? "x" : "y";
  return (d, g, T, S) => {
    var re, ee, ge, de, se, ye, Ne, ht, rn, Zt, Ft, cn, Tn;
    let h = g;
    if (
      (typeof d != "number" && ((h = d), (d = h.selected || 0)),
      !h || h.scroll === "none" || d === S || !h.children.length)
    )
      return;
    h._initialPosition === void 0 && (h._initialPosition = h[a]);
    const M = h.lng,
      P = f ? M.stage.root.width : M.stage.root.height,
      O = S === void 0 || S - 1 !== d;
    if (h._screenOffset === void 0) {
      if (h.parent.clipping) {
        const j = h.parent;
        h.endOffset = (re = h.endOffset) != null ? re : P - ((f ? j.absX : j.absY) || 0) - j[c];
      }
      h._screenOffset = (ee = h.offset) != null ? ee : (f ? M.absX : M.absY) - h[a];
    }
    const D = h._screenOffset,
      F = h.gap || 0,
      K = h.scroll || (S === void 0 ? (h.scrollIndex ? "center" : "always") : "auto"),
      $ = (ge = h._targetPosition) != null ? ge : h[a],
      Q = O ? Math.min($, h[a]) : Math.max($, h[a]);
    h.offset = (de = h.offset) != null ? de : Q;
    const ue = h.offset;
    if (((T = T || h.children[d]), !T)) return;
    const le = (se = T[a]) != null ? se : 0,
      J = (ye = T[c]) != null ? ye : 0,
      oe =
        (Zt =
          (rn = T.scale) != null
            ? rn
            : (ht = (Ne = T.style) == null ? void 0 : Ne.focus) == null
              ? void 0
              : ht.scale) != null
          ? Zt
          : 1,
      x = J * oe,
      Y = (Ft = h[c]) != null ? Ft : 0,
      me = Math.min(P - Y - D - ((cn = h.endOffset) != null ? cn : 2 * F), ue),
      he = O ? d + 1 : d - 1,
      ve = h.children[he] || null;
    let I = Q;
    if (T.centerScroll) I = -le + (P - x) / 2;
    else if (K === "always") I = -le + ue;
    else if (K === "bounded") {
      const j = h.children.length,
        At = h.upCount || 6,
        qn = Math.max(0, j - At),
        bt = d >= qn,
        Sn = d === qn,
        Vt = Sn && S !== void 0 && S < qn;
      if (!bt) I = -le + ue;
      else if (O)
        if (Vt) {
          const wn = h.children[qn],
            br = (Tn = wn == null ? void 0 : wn[a]) != null ? Tn : 0;
          I = wn ? -br + ue : Q;
        } else I = Q;
      else Sn ? (I = -le + ue) : (I = Q);
    } else if (K === "center") {
      const j = -le + (P - x) / 2 - D;
      I = Math.min(Math.max(j, me), ue);
    } else if (!ve) I = O ? me : ue;
    else if (K === "auto")
      if (h.scrollIndex && h.scrollIndex > 0) {
        const At = h.children.length - h.scrollIndex;
        O && h.selected >= h.scrollIndex ? (I = Q - J - F) : !O && h.selected < At && (I = Q + J + F);
      } else O ? (I = Q - J - F) : (I = Q + J + F);
    else O && dI(ve) ? (I = Q - J - F) : dI(ve) && (I = -le + ue);
    if (((I = O && K !== "always" && K !== "bounded" ? Math.max(I, me) : Math.min(I, ue)), h[a] !== I)) {
      if (h.onScrolled) {
        const j = I === h._initialPosition;
        h.onScrolled(h, I, j);
      }
      ((h[a] = I), (h._targetPosition = I));
    }
  };
}
const ev = mO(!0);
function Gf(...f) {
  const c = f.filter(a => typeof a == "function");
  if (c.length !== 0)
    return c.length === 1
      ? c[0]
      : function (...a) {
          let d;
          for (const g of c) if (((d = g.apply(this, a)), d === !0)) return d;
          return d;
        };
}
const yO = { display: "flex", gap: 30, transition: { x: { duration: 250, easing: "ease-in-out" } } };
function vO(f) {
  var c;
  ((this.selected = f), ev(f, this), (c = this.children[f]) == null || c.setFocus());
}
const xO = C2("left"),
  TO = C2("right"),
  SO = f =>
    (() => {
      var c = pv("view");
      return (
        gv(
          c,
          mv(f, {
            get selected() {
              return f.selected || 0;
            },
            onLeft: Gf(f.onLeft, xO),
            onRight: Gf(f.onRight, TO),
            forwardFocus: hO,
            scrollToIndex: vO,
            onLayout: f.selected ? Gf(f.onLayout, ev) : f.onLayout,
            onSelectedChanged: Gf(f.onSelectedChanged, f.scroll !== "none" ? ev : void 0),
            style: Z3(f.style, yO),
          }),
          !1,
        ),
        c
      );
    })(),
  wO = f => {
    (uO(), p2());
    const c = VN();
    return (
      (c.debug = !1),
      (c.enabled = !1),
      Lt(Ss, {
        ref(a) {
          var d = window.APP;
          typeof d == "function" ? d(a) : (window.APP = a);
        },
        onAnnouncer: () => (c.enabled = !c.enabled),
        get children() {
          return f.children;
        },
      })
    );
  },
  ma = "",
  AO = [
    {
      type: "msdf",
      fontFamily: "Roboto",
      descriptors: { weight: 700 },
      atlasDataUrl: ma + "fonts/Roboto-Bold.msdf.json",
      atlasUrl: ma + "fonts/Roboto-Bold.msdf.png",
    },
    {
      type: "msdf",
      fontFamily: "Roboto",
      descriptors: { weight: 400 },
      atlasDataUrl: ma + "fonts/Roboto-Regular.msdf.json",
      atlasUrl: ma + "fonts/Roboto-Regular.msdf.png",
    },
    {
      type: "msdf",
      fontFamily: "Arial",
      descriptors: { weight: 500 },
      atlasDataUrl: ma + "fonts/Roboto-Regular.msdf.json",
      atlasUrl: ma + "fonts/Roboto-Regular.msdf.png",
    },
  ];
var M2 = typeof global == "object" && global && global.Object === Object && global,
  EO = typeof self == "object" && self && self.Object === Object && self,
  ba = M2 || EO || Function("return this")(),
  ah = ba.Symbol,
  R2 = Object.prototype,
  IO = R2.hasOwnProperty,
  CO = R2.toString,
  pl = ah ? ah.toStringTag : void 0;
function MO(f) {
  var c = IO.call(f, pl),
    a = f[pl];
  try {
    f[pl] = void 0;
    var d = !0;
  } catch (T) {}
  var g = CO.call(f);
  return (d && (c ? (f[pl] = a) : delete f[pl]), g);
}
var RO = Object.prototype,
  kO = RO.toString;
function _O(f) {
  return kO.call(f);
}
var PO = "[object Null]",
  DO = "[object Undefined]",
  fI = ah ? ah.toStringTag : void 0;
function mh(f) {
  return f == null ? (f === void 0 ? DO : PO) : fI && fI in Object(f) ? MO(f) : _O(f);
}
function Bl(f) {
  return f != null && typeof f == "object";
}
var tv = Array.isArray;
function ao(f) {
  var c = typeof f;
  return f != null && (c == "object" || c == "function");
}
function k2(f) {
  return f;
}
var LO = "[object AsyncFunction]",
  bO = "[object Function]",
  NO = "[object GeneratorFunction]",
  OO = "[object Proxy]";
function Tv(f) {
  if (!ao(f)) return !1;
  var c = mh(f);
  return c == bO || c == NO || c == LO || c == OO;
}
var Dy = ba["__core-js_shared__"],
  hI = (function () {
    var f = /[^.]+$/.exec((Dy && Dy.keys && Dy.keys.IE_PROTO) || "");
    return f ? "Symbol(src)_1." + f : "";
  })();
function UO(f) {
  return !!hI && hI in f;
}
var jO = Function.prototype,
  BO = jO.toString;
function FO(f) {
  if (f != null) {
    try {
      return BO.call(f);
    } catch (c) {}
    try {
      return f + "";
    } catch (c) {}
  }
  return "";
}
var VO = /[\\^$.*+?()[\]{}|]/g,
  HO = /^\[object .+?Constructor\]$/,
  GO = Function.prototype,
  zO = Object.prototype,
  XO = GO.toString,
  WO = zO.hasOwnProperty,
  KO = RegExp(
    "^" +
      XO.call(WO)
        .replace(VO, "\\$&")
        .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") +
      "$",
  );
function $O(f) {
  if (!ao(f) || UO(f)) return !1;
  var c = Tv(f) ? KO : HO;
  return c.test(FO(f));
}
function YO(f, c) {
  return f == null ? void 0 : f[c];
}
function Sv(f, c) {
  var a = YO(f, c);
  return $O(a) ? a : void 0;
}
var pI = Object.create,
  qO = (function () {
    function f() {}
    return function (c) {
      if (!ao(c)) return {};
      if (pI) return pI(c);
      f.prototype = c;
      var a = new f();
      return ((f.prototype = void 0), a);
    };
  })();
function JO(f, c, a) {
  switch (a.length) {
    case 0:
      return f.call(c);
    case 1:
      return f.call(c, a[0]);
    case 2:
      return f.call(c, a[0], a[1]);
    case 3:
      return f.call(c, a[0], a[1], a[2]);
  }
  return f.apply(c, a);
}
function QO(f, c) {
  var a = -1,
    d = f.length;
  for (c || (c = Array(d)); ++a < d; ) c[a] = f[a];
  return c;
}
var ZO = 800,
  eU = 16,
  tU = Date.now;
function nU(f) {
  var c = 0,
    a = 0;
  return function () {
    var d = tU(),
      g = eU - (d - a);
    if (((a = d), g > 0)) {
      if (++c >= ZO) return arguments[0];
    } else c = 0;
    return f.apply(void 0, arguments);
  };
}
function rU(f) {
  return function () {
    return f;
  };
}
var uh = (function () {
    try {
      var f = Sv(Object, "defineProperty");
      return (f({}, "", {}), f);
    } catch (c) {}
  })(),
  iU = uh
    ? function (f, c) {
        return uh(f, "toString", { configurable: !0, enumerable: !1, value: rU(c), writable: !0 });
      }
    : k2,
  sU = nU(iU),
  oU = 9007199254740991,
  aU = /^(?:0|[1-9]\d*)$/;
function _2(f, c) {
  var a = typeof f;
  return (
    (c = c == null ? oU : c),
    !!c && (a == "number" || (a != "symbol" && aU.test(f))) && f > -1 && f % 1 == 0 && f < c
  );
}
function wv(f, c, a) {
  c == "__proto__" && uh
    ? uh(f, c, { configurable: !0, enumerable: !0, value: a, writable: !0 })
    : (f[c] = a);
}
function yh(f, c) {
  return f === c || (f !== f && c !== c);
}
var uU = Object.prototype,
  lU = uU.hasOwnProperty;
function cU(f, c, a) {
  var d = f[c];
  (!(lU.call(f, c) && yh(d, a)) || (a === void 0 && !(c in f))) && wv(f, c, a);
}
function dU(f, c, a, d) {
  var g = !a;
  a || (a = {});
  for (var T = -1, S = c.length; ++T < S; ) {
    var h = c[T],
      M = void 0;
    (M === void 0 && (M = f[h]), g ? wv(a, h, M) : cU(a, h, M));
  }
  return a;
}
var gI = Math.max;
function fU(f, c, a) {
  return (
    (c = gI(c === void 0 ? f.length - 1 : c, 0)),
    function () {
      for (var d = arguments, g = -1, T = gI(d.length - c, 0), S = Array(T); ++g < T; ) S[g] = d[c + g];
      g = -1;
      for (var h = Array(c + 1); ++g < c; ) h[g] = d[g];
      return ((h[c] = a(S)), JO(f, this, h));
    }
  );
}
function hU(f, c) {
  return sU(fU(f, c, k2), f + "");
}
var pU = 9007199254740991;
function P2(f) {
  return typeof f == "number" && f > -1 && f % 1 == 0 && f <= pU;
}
function Av(f) {
  return f != null && P2(f.length) && !Tv(f);
}
function gU(f, c, a) {
  if (!ao(a)) return !1;
  var d = typeof c;
  return (d == "number" ? Av(a) && _2(c, a.length) : d == "string" && c in a) ? yh(a[c], f) : !1;
}
function mU(f) {
  return hU(function (c, a) {
    var d = -1,
      g = a.length,
      T = g > 1 ? a[g - 1] : void 0,
      S = g > 2 ? a[2] : void 0;
    for (
      T = f.length > 3 && typeof T == "function" ? (g--, T) : void 0,
        S && gU(a[0], a[1], S) && ((T = g < 3 ? void 0 : T), (g = 1)),
        c = Object(c);
      ++d < g;
    ) {
      var h = a[d];
      h && f(c, h, d, T);
    }
    return c;
  });
}
var yU = Object.prototype;
function D2(f) {
  var c = f && f.constructor,
    a = (typeof c == "function" && c.prototype) || yU;
  return f === a;
}
function vU(f, c) {
  for (var a = -1, d = Array(f); ++a < f; ) d[a] = c(a);
  return d;
}
var xU = "[object Arguments]";
function mI(f) {
  return Bl(f) && mh(f) == xU;
}
var L2 = Object.prototype,
  TU = L2.hasOwnProperty,
  SU = L2.propertyIsEnumerable,
  nv = mI(
    (function () {
      return arguments;
    })(),
  )
    ? mI
    : function (f) {
        return Bl(f) && TU.call(f, "callee") && !SU.call(f, "callee");
      };
function wU() {
  return !1;
}
var b2 = typeof exports == "object" && exports && !exports.nodeType && exports,
  yI = b2 && typeof module == "object" && module && !module.nodeType && module,
  AU = yI && yI.exports === b2,
  vI = AU ? ba.Buffer : void 0,
  EU = vI ? vI.isBuffer : void 0,
  N2 = EU || wU,
  IU = "[object Arguments]",
  CU = "[object Array]",
  MU = "[object Boolean]",
  RU = "[object Date]",
  kU = "[object Error]",
  _U = "[object Function]",
  PU = "[object Map]",
  DU = "[object Number]",
  LU = "[object Object]",
  bU = "[object RegExp]",
  NU = "[object Set]",
  OU = "[object String]",
  UU = "[object WeakMap]",
  jU = "[object ArrayBuffer]",
  BU = "[object DataView]",
  FU = "[object Float32Array]",
  VU = "[object Float64Array]",
  HU = "[object Int8Array]",
  GU = "[object Int16Array]",
  zU = "[object Int32Array]",
  XU = "[object Uint8Array]",
  WU = "[object Uint8ClampedArray]",
  KU = "[object Uint16Array]",
  $U = "[object Uint32Array]",
  Bt = {};
Bt[FU] = Bt[VU] = Bt[HU] = Bt[GU] = Bt[zU] = Bt[XU] = Bt[WU] = Bt[KU] = Bt[$U] = !0;
Bt[IU] =
  Bt[CU] =
  Bt[jU] =
  Bt[MU] =
  Bt[BU] =
  Bt[RU] =
  Bt[kU] =
  Bt[_U] =
  Bt[PU] =
  Bt[DU] =
  Bt[LU] =
  Bt[bU] =
  Bt[NU] =
  Bt[OU] =
  Bt[UU] =
    !1;
function YU(f) {
  return Bl(f) && P2(f.length) && !!Bt[mh(f)];
}
function qU(f) {
  return function (c) {
    return f(c);
  };
}
var O2 = typeof exports == "object" && exports && !exports.nodeType && exports,
  Cl = O2 && typeof module == "object" && module && !module.nodeType && module,
  JU = Cl && Cl.exports === O2,
  Ly = JU && M2.process,
  xI = (function () {
    try {
      var f = Cl && Cl.require && Cl.require("util").types;
      return f || (Ly && Ly.binding && Ly.binding("util"));
    } catch (c) {}
  })(),
  TI = xI && xI.isTypedArray,
  U2 = TI ? qU(TI) : YU;
function QU(f, c) {
  var a = tv(f),
    d = !a && nv(f),
    g = !a && !d && N2(f),
    T = !a && !d && !g && U2(f),
    S = a || d || g || T,
    h = S ? vU(f.length, String) : [],
    M = h.length;
  for (var P in f)
    (S &&
      (P == "length" ||
        (g && (P == "offset" || P == "parent")) ||
        (T && (P == "buffer" || P == "byteLength" || P == "byteOffset")) ||
        _2(P, M))) ||
      h.push(P);
  return h;
}
function ZU(f, c) {
  return function (a) {
    return f(c(a));
  };
}
function ej(f) {
  var c = [];
  if (f != null) for (var a in Object(f)) c.push(a);
  return c;
}
var tj = Object.prototype,
  nj = tj.hasOwnProperty;
function rj(f) {
  if (!ao(f)) return ej(f);
  var c = D2(f),
    a = [];
  for (var d in f) (d == "constructor" && (c || !nj.call(f, d))) || a.push(d);
  return a;
}
function j2(f) {
  return Av(f) ? QU(f) : rj(f);
}
var Ol = Sv(Object, "create");
function ij() {
  ((this.__data__ = Ol ? Ol(null) : {}), (this.size = 0));
}
function sj(f) {
  var c = this.has(f) && delete this.__data__[f];
  return ((this.size -= c ? 1 : 0), c);
}
var oj = "__lodash_hash_undefined__",
  aj = Object.prototype,
  uj = aj.hasOwnProperty;
function lj(f) {
  var c = this.__data__;
  if (Ol) {
    var a = c[f];
    return a === oj ? void 0 : a;
  }
  return uj.call(c, f) ? c[f] : void 0;
}
var cj = Object.prototype,
  dj = cj.hasOwnProperty;
function fj(f) {
  var c = this.__data__;
  return Ol ? c[f] !== void 0 : dj.call(c, f);
}
var hj = "__lodash_hash_undefined__";
function pj(f, c) {
  var a = this.__data__;
  return ((this.size += this.has(f) ? 0 : 1), (a[f] = Ol && c === void 0 ? hj : c), this);
}
function so(f) {
  var c = -1,
    a = f == null ? 0 : f.length;
  for (this.clear(); ++c < a; ) {
    var d = f[c];
    this.set(d[0], d[1]);
  }
}
so.prototype.clear = ij;
so.prototype.delete = sj;
so.prototype.get = lj;
so.prototype.has = fj;
so.prototype.set = pj;
function gj() {
  ((this.__data__ = []), (this.size = 0));
}
function vh(f, c) {
  for (var a = f.length; a--; ) if (yh(f[a][0], c)) return a;
  return -1;
}
var mj = Array.prototype,
  yj = mj.splice;
function vj(f) {
  var c = this.__data__,
    a = vh(c, f);
  if (a < 0) return !1;
  var d = c.length - 1;
  return (a == d ? c.pop() : yj.call(c, a, 1), --this.size, !0);
}
function xj(f) {
  var c = this.__data__,
    a = vh(c, f);
  return a < 0 ? void 0 : c[a][1];
}
function Tj(f) {
  return vh(this.__data__, f) > -1;
}
function Sj(f, c) {
  var a = this.__data__,
    d = vh(a, f);
  return (d < 0 ? (++this.size, a.push([f, c])) : (a[d][1] = c), this);
}
function Ki(f) {
  var c = -1,
    a = f == null ? 0 : f.length;
  for (this.clear(); ++c < a; ) {
    var d = f[c];
    this.set(d[0], d[1]);
  }
}
Ki.prototype.clear = gj;
Ki.prototype.delete = vj;
Ki.prototype.get = xj;
Ki.prototype.has = Tj;
Ki.prototype.set = Sj;
var B2 = Sv(ba, "Map");
function wj() {
  ((this.size = 0), (this.__data__ = { hash: new so(), map: new (B2 || Ki)(), string: new so() }));
}
function Aj(f) {
  var c = typeof f;
  return c == "string" || c == "number" || c == "symbol" || c == "boolean" ? f !== "__proto__" : f === null;
}
function xh(f, c) {
  var a = f.__data__;
  return Aj(c) ? a[typeof c == "string" ? "string" : "hash"] : a.map;
}
function Ej(f) {
  var c = xh(this, f).delete(f);
  return ((this.size -= c ? 1 : 0), c);
}
function Ij(f) {
  return xh(this, f).get(f);
}
function Cj(f) {
  return xh(this, f).has(f);
}
function Mj(f, c) {
  var a = xh(this, f),
    d = a.size;
  return (a.set(f, c), (this.size += a.size == d ? 0 : 1), this);
}
function Na(f) {
  var c = -1,
    a = f == null ? 0 : f.length;
  for (this.clear(); ++c < a; ) {
    var d = f[c];
    this.set(d[0], d[1]);
  }
}
Na.prototype.clear = wj;
Na.prototype.delete = Ej;
Na.prototype.get = Ij;
Na.prototype.has = Cj;
Na.prototype.set = Mj;
var F2 = ZU(Object.getPrototypeOf, Object),
  Rj = "[object Object]",
  kj = Function.prototype,
  _j = Object.prototype,
  V2 = kj.toString,
  Pj = _j.hasOwnProperty,
  Dj = V2.call(Object);
function Lj(f) {
  if (!Bl(f) || mh(f) != Rj) return !1;
  var c = F2(f);
  if (c === null) return !0;
  var a = Pj.call(c, "constructor") && c.constructor;
  return typeof a == "function" && a instanceof a && V2.call(a) == Dj;
}
function bj() {
  ((this.__data__ = new Ki()), (this.size = 0));
}
function Nj(f) {
  var c = this.__data__,
    a = c.delete(f);
  return ((this.size = c.size), a);
}
function Oj(f) {
  return this.__data__.get(f);
}
function Uj(f) {
  return this.__data__.has(f);
}
var jj = 200;
function Bj(f, c) {
  var a = this.__data__;
  if (a instanceof Ki) {
    var d = a.__data__;
    if (!B2 || d.length < jj - 1) return (d.push([f, c]), (this.size = ++a.size), this);
    a = this.__data__ = new Na(d);
  }
  return (a.set(f, c), (this.size = a.size), this);
}
function Oa(f) {
  var c = (this.__data__ = new Ki(f));
  this.size = c.size;
}
Oa.prototype.clear = bj;
Oa.prototype.delete = Nj;
Oa.prototype.get = Oj;
Oa.prototype.has = Uj;
Oa.prototype.set = Bj;
var H2 = typeof exports == "object" && exports && !exports.nodeType && exports,
  SI = H2 && typeof module == "object" && module && !module.nodeType && module,
  Fj = SI && SI.exports === H2,
  wI = Fj ? ba.Buffer : void 0;
wI && wI.allocUnsafe;
function Vj(f, c) {
  return f.slice();
}
var AI = ba.Uint8Array;
function Hj(f) {
  var c = new f.constructor(f.byteLength);
  return (new AI(c).set(new AI(f)), c);
}
function Gj(f, c) {
  var a = Hj(f.buffer);
  return new f.constructor(a, f.byteOffset, f.length);
}
function zj(f) {
  return typeof f.constructor == "function" && !D2(f) ? qO(F2(f)) : {};
}
function Xj(f) {
  return function (c, a, d) {
    for (var g = -1, T = Object(c), S = d(c), h = S.length; h--; ) {
      var M = S[++g];
      if (a(T[M], M, T) === !1) break;
    }
    return c;
  };
}
var Wj = Xj();
function rv(f, c, a) {
  ((a !== void 0 && !yh(f[c], a)) || (a === void 0 && !(c in f))) && wv(f, c, a);
}
function Kj(f) {
  return Bl(f) && Av(f);
}
function iv(f, c) {
  if (!(c === "constructor" && typeof f[c] == "function") && c != "__proto__") return f[c];
}
function $j(f) {
  return dU(f, j2(f));
}
function Yj(f, c, a, d, g, T, S) {
  var h = iv(f, a),
    M = iv(c, a),
    P = S.get(M);
  if (P) {
    rv(f, a, P);
    return;
  }
  var O = T ? T(h, M, a + "", f, c, S) : void 0,
    D = O === void 0;
  if (D) {
    var F = tv(M),
      K = !F && N2(M),
      $ = !F && !K && U2(M);
    ((O = M),
      F || K || $
        ? tv(h)
          ? (O = h)
          : Kj(h)
            ? (O = QO(h))
            : K
              ? ((D = !1), (O = Vj(M)))
              : $
                ? ((D = !1), (O = Gj(M)))
                : (O = [])
        : Lj(M) || nv(M)
          ? ((O = h), nv(h) ? (O = $j(h)) : (!ao(h) || Tv(h)) && (O = zj(M)))
          : (D = !1));
  }
  (D && (S.set(M, O), g(O, M, d, T, S), S.delete(M)), rv(f, a, O));
}
function G2(f, c, a, d, g) {
  f !== c &&
    Wj(
      c,
      function (T, S) {
        if ((g || (g = new Oa()), ao(T))) Yj(f, c, S, a, G2, d, g);
        else {
          var h = d ? d(iv(f, S), T, S + "", f, c, g) : void 0;
          (h === void 0 && (h = T), rv(f, S, h));
        }
      },
      j2,
    );
}
var qj = mU(function (f, c, a) {
  G2(f, c, a);
});
const Jj = 24;
function Qj(f, c, a, d, g, T, S, h, M) {
  const P = Math.min(Math.max(S.firstLineIdx, 0), h.length),
    O = 0,
    { metrics: D } = a;
  a.data;
  const F = (D.ascender - D.descender) * f;
  let K = 0;
  d === "middle" ? (K = (c - F) / 2) : d === "bottom" && (K = c - F);
  const $ = g / T,
    Q = a.data.common.base,
    le = D.ascender * f - Q,
    J = $ + le + P * c + K;
  if (!(M && J >= M / T)) return { sdfX: O, sdfY: J, lineIndex: P };
}
class Tl {
  constructor(c, a = 0) {
    _(this, "iterator");
    _(this, "peekBuffer", []);
    _(this, "_lastIndex");
    ((this.iterator = c), (this.iterator = c), (this._lastIndex = a - 1), (this.peekBuffer = []));
  }
  next() {
    const c = this.peekBuffer.length > 0 ? this.peekBuffer.pop() : this.iterator.next();
    return (c.done ? (this._lastIndex = -1) : this._lastIndex++, c);
  }
  peek() {
    if (this.peekBuffer.length > 0) return this.peekBuffer[0];
    const c = this.iterator.next();
    return (this.peekBuffer.push(c), c);
  }
  get lastIndex() {
    return this._lastIndex;
  }
}
function* Sl(f, c = 0) {
  let a = c;
  for (; a < f.length; ) {
    const d = f.codePointAt(a);
    if (d === void 0) throw new Error("Invalid Unicode code point");
    (yield d, (a += d <= 65535 ? 1 : 2));
  }
}
function Zj(f, c, a) {
  const d = a.shapeText(c, new Tl(Sl(f, 0), 0));
  let g = 0;
  for (const T of d) T.mapped && T.codepoint !== 8203 && (g += T.xAdvance);
  return g;
}
function eB(f, c, a, d, g, T, S, h, M, P, O, D, F, K, $, Q, ue, le, J) {
  ($.loaded, $.data, $.shaper);
  const oe = h / $.data.info.size,
    x = M / oe,
    Y = T / oe,
    me = P / oe,
    he = F[f],
    ve = (he == null ? void 0 : he.codepointIndex) || 0,
    I = (he == null ? void 0 : he.maxX) || 0,
    re = (he == null ? void 0 : he.maxY) || 0;
  let ee = I,
    ge = re,
    de = c,
    se = a,
    ye = 0;
  const Ne = { codepointIndex: -1, bufferOffset: -1, xStart: -1 },
    ht = $.shaper,
    rn = { letterSpacing: me };
  d.endsWith(" ") && (d += " ");
  let Zt = ht.shapeText(rn, new Tl(Sl(d, ve), ve)),
    Ft,
    cn = -1;
  const Tn = [],
    j = S / oe,
    At = Zj(le, rn, ht);
  let qn = !0;
  for (; qn; ) {
    const bt = (J === 0 || f + 1 < J) && (D !== "both" || ue || se + x + $.maxCharHeight <= j),
      Sn = bt ? Y : Y - At;
    let Vt = 0;
    const wn = se + $.maxCharHeight >= K.y1,
      br = se <= K.y2,
      or = wn && br;
    for (; (Ft = Zt.next()) && !Ft.done; ) {
      const fe = Ft.value;
      if (f === F.length) F.push({ codepointIndex: fe.cluster, maxY: ge, maxX: ee });
      else if (f > F.length) throw new Error("Unexpected lineCache length");
      if (
        (fe.codepoint === 32 || fe.codepoint === 10 || fe.codepoint === 8203
          ? Ne.codepointIndex !== -1 && ((Ne.codepointIndex = -1), (Vt = de))
          : Ne.codepointIndex === -1 &&
            ((Ne.codepointIndex = fe.cluster), (Ne.bufferOffset = ye), (Ne.xStart = Vt)),
        fe.mapped)
      ) {
        const Wr = de + fe.xOffset + fe.width;
        if (D !== "none" && Wr >= Sn && Ne.codepointIndex !== -1 && Ne.xStart > 0)
          if (bt) {
            ((Zt = ht.shapeText(rn, new Tl(Sl(d, Ne.codepointIndex), Ne.codepointIndex))),
              (ye = Ne.bufferOffset));
            break;
          } else
            ((Zt = ht.shapeText(rn, new Tl(Sl(le, 0), 0))),
              (de = Ne.xStart),
              (ye = Ne.bufferOffset),
              (D = "none"));
        else {
          const xr = de + fe.xOffset,
            ar = se + fe.yOffset;
          if (or) {
            cn === -1 && (cn = ye);
            const di = $.getAtlasEntry(fe.glyphId),
              An = di.x / $.data.common.scaleW,
              je = di.y / $.data.common.scaleH,
              ur = di.width / $.data.common.scaleW,
              As = di.height / $.data.common.scaleH;
            ((O[ye++] = xr),
              (O[ye++] = ar),
              (O[ye++] = An),
              (O[ye++] = je),
              (O[ye++] = xr + fe.width),
              (O[ye++] = ar),
              (O[ye++] = An + ur),
              (O[ye++] = je),
              (O[ye++] = xr),
              (O[ye++] = ar + fe.height),
              (O[ye++] = An),
              (O[ye++] = je + As),
              (O[ye++] = xr + fe.width),
              (O[ye++] = ar + fe.height),
              (O[ye++] = An + ur),
              (O[ye++] = je + As));
          }
          ((ge = Math.max(ge, ar + fe.height)), (ee = Math.max(ee, xr + fe.width)), (de += fe.xAdvance));
        }
      } else if (fe.codepoint === 10) {
        if (bt) break;
        ((Zt = ht.shapeText(rn, new Tl(Sl(le, 0), 0))), (D = "none"));
      }
    }
    (cn !== -1 && (Tn.push({ bufferStart: cn, bufferEnd: ye }), (cn = -1)),
      (de = 0),
      (se += x),
      f++,
      (Ne.codepointIndex = -1),
      (Vt = 0),
      (!Q && D === "both" && se > K.y2) || (Ft && Ft.done) ? (qn = !1) : bt || (qn = !1));
  }
  if (g === "center") {
    const bt = D === "none" ? ee : Y;
    for (let Sn = 0; Sn < Tn.length; Sn++) {
      const Vt = Tn[Sn],
        wn = O[Vt.bufferEnd - 4] - O[Vt.bufferStart],
        br = (bt - wn) / 2;
      for (let or = Vt.bufferStart; or < Vt.bufferEnd; or += 4) O[or] += br;
    }
  } else if (g === "right") {
    const bt = D === "none" ? ee : Y;
    for (let Sn = 0; Sn < Tn.length; Sn++) {
      const Vt = Tn[Sn],
        wn = Vt.bufferEnd === Vt.bufferStart ? 0 : O[Vt.bufferEnd - 4] - O[Vt.bufferStart],
        br = bt - wn;
      for (let or = Vt.bufferStart; or < Vt.bufferEnd; or += 4) O[or] += br;
    }
  }
  return {
    bufferNumFloats: ye,
    bufferNumQuads: ye / 16,
    layoutNumCharacters: Ft.done ? d.length - ve : Ft.value.cluster - ve + 1,
    fullyProcessed: !!Ft.done,
    maxX: ee,
    maxY: ge,
    numLines: F.length,
  };
}
function tB(f, c) {
  return Math.ceil(f / c) * c;
}
function nB(f, c) {
  return Math.floor(f / c) * c;
}
function rB(f, c, a, d, g, T, S, h) {
  const { screen: M, sdf: P } = f;
  if (!ab(S))
    ((M.x1 = 0),
      (M.y1 = 0),
      (M.x2 = 0),
      (M.y2 = 0),
      (P.x1 = 0),
      (P.y1 = 0),
      (P.x2 = 0),
      (P.y2 = 0),
      (f.numLines = 0),
      (f.firstLineIdx = 0));
  else {
    const O = S.x1 - c,
      D = O + (S.x2 - S.x1),
      F = S.y1 - a + d,
      K = nB(F - T, g || 1),
      $ = tB(F + (S.y2 - S.y1) + T, g || 1);
    ((M.x1 = O),
      (M.y1 = K),
      (M.x2 = D),
      (M.y2 = $),
      (P.x1 = O / h),
      (P.y1 = K / h),
      (P.x2 = D / h),
      (P.y2 = $ / h),
      (f.numLines = Math.ceil(($ - K) / g)),
      (f.firstLineIdx = g ? Math.floor(K / g) : 0));
  }
  f.valid = !0;
}
function iB(f, c) {
  return c * (f.ascender - f.descender + f.lineGap);
}
const sB = { x: 0, y: 0, width: 0, height: 0 };
class oB extends OI {
  constructor(a) {
    super(a);
    _(this, "ssdfFontFamilies", {});
    _(this, "msdfFontFamilies", {});
    _(this, "fontFamilyArray", [this.ssdfFontFamilies, this.msdfFontFamilies]);
    _(this, "sdfShader");
    _(this, "rendererBounds");
    _(this, "type", "sdf");
    ((this.sdfShader = this.stage.shManager.loadShader("SdfShader", {
      transform: new Float32Array(),
      color: 0,
      size: 0,
      scrollY: 0,
      distanceRange: 0,
      debug: !1,
    }).shader),
      (this.rendererBounds = {
        x1: 0,
        y1: 0,
        x2: this.stage.options.appWidth,
        y2: this.stage.options.appHeight,
      }));
  }
  getPropertySetters() {
    return {
      fontFamily: (a, d) => {
        ((a.props.fontFamily = d), this.releaseFontFace(a), this.invalidateLayoutCache(a));
      },
      fontWeight: (a, d) => {
        ((a.props.fontWeight = d), this.releaseFontFace(a), this.invalidateLayoutCache(a));
      },
      fontStyle: (a, d) => {
        ((a.props.fontStyle = d), this.releaseFontFace(a), this.invalidateLayoutCache(a));
      },
      fontStretch: (a, d) => {
        ((a.props.fontStretch = d), this.releaseFontFace(a), this.invalidateLayoutCache(a));
      },
      fontSize: (a, d) => {
        ((a.props.fontSize = d), this.invalidateLayoutCache(a));
      },
      text: (a, d) => {
        ((a.props.text = d), this.invalidateLayoutCache(a));
      },
      textAlign: (a, d) => {
        ((a.props.textAlign = d), this.invalidateLayoutCache(a));
      },
      color: (a, d) => {
        a.props.color = d;
      },
      x: (a, d) => {
        ((a.props.x = d),
          a.elementBounds.valid &&
            (this.setElementBoundsX(a),
            !a.renderWindow.valid &&
              yy(a.elementBounds, this.rendererBounds) &&
              this.scheduleUpdateState(a)));
      },
      y: (a, d) => {
        ((a.props.y = d),
          a.elementBounds.valid &&
            (this.setElementBoundsY(a),
            !a.renderWindow.valid &&
              yy(a.elementBounds, this.rendererBounds) &&
              this.scheduleUpdateState(a)));
      },
      contain: (a, d) => {
        ((a.props.contain = d), this.invalidateLayoutCache(a));
      },
      width: (a, d) => {
        ((a.props.width = d), a.props.contain !== "none" && this.invalidateLayoutCache(a));
      },
      height: (a, d) => {
        ((a.props.height = d), a.props.contain === "both" && this.invalidateLayoutCache(a));
      },
      offsetY: (a, d) => {
        ((a.props.offsetY = d), this.invalidateLayoutCache(a));
      },
      scrollable: (a, d) => {
        ((a.props.scrollable = d), this.invalidateLayoutCache(a));
      },
      scrollY: (a, d) => {
        ((a.props.scrollY = d), this.scheduleUpdateState(a));
      },
      letterSpacing: (a, d) => {
        ((a.props.letterSpacing = d), this.invalidateLayoutCache(a));
      },
      lineHeight: (a, d) => {
        ((a.props.lineHeight = d), (a.resLineHeight = void 0), this.invalidateLayoutCache(a));
      },
      maxLines: (a, d) => {
        ((a.props.maxLines = d), this.invalidateLayoutCache(a));
      },
      textBaseline: (a, d) => {
        ((a.props.textBaseline = d), this.invalidateLayoutCache(a));
      },
      verticalAlign: (a, d) => {
        ((a.props.verticalAlign = d), this.invalidateLayoutCache(a));
      },
      overflowSuffix: (a, d) => {
        ((a.props.overflowSuffix = d), this.invalidateLayoutCache(a));
      },
      debug: (a, d) => {
        a.props.debug = d;
      },
    };
  }
  canRenderFont(a) {
    const { fontFamily: d } = a;
    return d in this.ssdfFontFamilies || d in this.msdfFontFamilies || d === "$$SDF_FAILURE_TEST$$";
  }
  isFontFaceSupported(a) {
    return a instanceof FI;
  }
  addFontFace(a) {
    const d = a.fontFamily,
      g = a.type === "ssdf" ? this.ssdfFontFamilies : a.type === "msdf" ? this.msdfFontFamilies : void 0;
    if (!g) {
      console.warn("Invalid font face type: ".concat(a.type));
      return;
    }
    let T = g[d];
    (T || ((T = new Set()), (g[d] = T)), T.add(a));
  }
  createState(a) {
    return {
      props: a,
      status: "initialState",
      updateScheduled: !1,
      emitter: new ws(),
      lineCache: [],
      forceFullLayoutCalc: !1,
      renderWindow: {
        screen: { x1: 0, y1: 0, x2: 0, y2: 0 },
        sdf: { x1: 0, y1: 0, x2: 0, y2: 0 },
        firstLineIdx: 0,
        numLines: 0,
        valid: !1,
      },
      elementBounds: { x1: 0, y1: 0, x2: 0, y2: 0, valid: !1 },
      clippingRect: { x: 0, y: 0, width: 0, height: 0, valid: !1 },
      bufferNumFloats: 0,
      bufferNumQuads: 0,
      vertexBuffer: void 0,
      webGlBuffers: null,
      bufferUploaded: !1,
      textH: void 0,
      textW: void 0,
      distanceRange: 0,
      trFontFace: void 0,
      isRenderable: !1,
      resLineHeight: void 0,
      debugData: {
        updateCount: 0,
        layoutCount: 0,
        lastLayoutNumCharacters: 0,
        layoutSum: 0,
        drawSum: 0,
        drawCount: 0,
        bufferSize: 0,
      },
    };
  }
  updateState(a) {
    let { trFontFace: d } = a;
    const { textH: g, lineCache: T, debugData: S, forceFullLayoutCalc: h } = a;
    if ((S.updateCount++, a.status === "initialState" && this.setStatus(a, "loading"), d === void 0)) {
      if (((d = this.resolveFontFace(a.props)), (a.trFontFace = d), d === void 0)) {
        const ht = "SdfTextRenderer: Could not resolve font face for family: '".concat(
          a.props.fontFamily,
          "'",
        );
        (console.error(ht), this.setStatus(a, "failed", new Error(ht)));
        return;
      }
      d.texture.setRenderableOwner(a.props.fontFamily, !0);
    }
    if (d.loaded === !1) {
      d.once("loaded", () => {
        this.scheduleUpdateState(a);
      });
      return;
    }
    (d.data, d.metrics);
    const {
        text: M,
        fontSize: P,
        x: O,
        y: D,
        contain: F,
        width: K,
        height: $,
        verticalAlign: Q,
        scrollable: ue,
        overflowSuffix: le,
        maxLines: J,
      } = a.props,
      oe = F === "both" && ue ? a.props.scrollY : 0,
      { renderWindow: x } = a,
      Y = d.data.info.size,
      me = P / Y;
    let he = a.resLineHeight;
    if (he === void 0) {
      const ht = a.props.lineHeight;
      (ht === void 0 ? (he = iB(d.metrics, P)) : (he = ht), (a.resLineHeight = he));
    }
    const ve = he / me;
    a.distanceRange = me * d.data.distanceField.distanceRange;
    const I = M.length * Jj;
    let re = a.vertexBuffer;
    (!re || re.length < I) && (re = new Float32Array(I * 2));
    const ee = a.elementBounds;
    if (
      (ee.valid || (this.setElementBoundsX(a), this.setElementBoundsY(a), (ee.valid = !0)), !h && x.valid)
    ) {
      const ht = x.screen;
      if (O + ht.x1 <= ee.x1 && O + ht.x2 >= ee.x2 && D - oe + ht.y1 <= ee.y1 && D - oe + ht.y2 >= ee.y2) {
        this.setStatus(a, "loaded");
        return;
      }
      ((x.valid = !1), this.setStatus(a, "loading"));
    }
    const { offsetY: ge, textAlign: de } = a.props;
    if (!x.valid) {
      if (!yy(ee, this.rendererBounds)) return;
      rB(x, O, D, oe, he, F === "both" ? ee.y2 - ee.y1 : 0, ee, me);
    }
    const se = Qj(Y, ve, d, Q, ge, me, x, T, g);
    if (!se) {
      this.setStatus(a, "loaded");
      return;
    }
    const { letterSpacing: ye } = a.props,
      Ne = eB(se.lineIndex, se.sdfX, se.sdfY, M, de, K, $, P, he, ye, re, F, T, x.sdf, d, h, ue, le, J);
    ((a.bufferUploaded = !1),
      (a.bufferNumFloats = Ne.bufferNumFloats),
      (a.bufferNumQuads = Ne.bufferNumQuads),
      (a.vertexBuffer = re),
      (a.renderWindow = x),
      (S.lastLayoutNumCharacters = Ne.layoutNumCharacters),
      (S.bufferSize = re.byteLength),
      Ne.fullyProcessed && ((a.textW = Ne.maxX * me), (a.textH = Ne.numLines * ve * me)),
      this.setStatus(a, "loaded"));
  }
  renderQuads(a, d, g, T, S, h) {
    var ee, ge, de;
    if (!a.vertexBuffer) return;
    const M = this.stage.renderer,
      { fontSize: P, color: O, contain: D, scrollable: F, zIndex: K, debug: $ } = a.props,
      Q = D === "both" && F ? a.props.scrollY : 0,
      {
        textW: ue = 0,
        textH: le = 0,
        distanceRange: J,
        vertexBuffer: oe,
        bufferUploaded: x,
        trFontFace: Y,
        elementBounds: me,
      } = a;
    let { webGlBuffers: he } = a;
    if (!he) {
      const se = M.glw,
        ye = 4 * Float32Array.BYTES_PER_ELEMENT,
        Ne = se.createBuffer();
      ((a.webGlBuffers = new BI([
        {
          buffer: Ne,
          attributes: {
            a_position: {
              name: "a_position",
              size: 2,
              type: se.FLOAT,
              normalized: !1,
              stride: ye,
              offset: 0,
            },
            a_textureCoordinate: {
              name: "a_textureCoordinate",
              size: 2,
              type: se.FLOAT,
              normalized: !1,
              stride: ye,
              offset: 2 * Float32Array.BYTES_PER_ELEMENT,
            },
          },
        },
      ])),
        (a.bufferUploaded = !1),
        a.webGlBuffers,
        (he = a.webGlBuffers));
    }
    if (!x) {
      const se = M.glw,
        ye = (ee = he == null ? void 0 : he.getBuffer("a_textureCoordinate")) != null ? ee : null;
      (se.arrayBufferData(ye, oe, se.STATIC_DRAW), (a.bufferUploaded = !0));
    }
    if (F && D === "both") {
      me.valid;
      const se = rb(me, sB);
      g.valid
        ? ((a.clippingRect.valid = !0), (g = CI(g, se, a.clippingRect)))
        : ((a.clippingRect.valid = !0), (g = MI(se, a.clippingRect)));
    }
    const ve = new jI(
        M.glw,
        M.options,
        he,
        this.sdfShader,
        {
          transform: d.getFloatArr(),
          color: JL(O, T),
          size: P / (((ge = Y.data) == null ? void 0 : ge.info.size) || 0),
          scrollY: Q,
          distanceRange: J,
          debug: $.sdfShaderDebug,
        },
        T,
        g,
        { height: le, width: ue },
        0,
        K,
        !1,
        S,
        h,
      ),
      re = ((de = a.trFontFace) == null ? void 0 : de.texture).ctxTexture;
    (ve.addTexture(re), (ve.length = a.bufferNumFloats), (ve.numQuads = a.bufferNumQuads), M.addRenderOp(ve));
  }
  setIsRenderable(a, d) {
    var g;
    (super.setIsRenderable(a, d),
      (g = a.trFontFace) == null || g.texture.setRenderableOwner(a.props.fontFamily, d));
  }
  destroyState(a) {
    var d;
    (super.destroyState(a),
      (d = a.trFontFace) == null || d.texture.setRenderableOwner(a.props.fontFamily, !1));
  }
  resolveFontFace(a) {
    return this.stage.fontManager.resolveFontFace(this.fontFamilyArray, a, "sdf");
  }
  releaseFontFace(a) {
    ((a.resLineHeight = void 0),
      a.trFontFace &&
        (a.trFontFace.texture.setRenderableOwner(a.props.fontFamily, !1), (a.trFontFace = void 0)));
  }
  invalidateLayoutCache(a) {
    ((a.renderWindow.valid = !1),
      (a.elementBounds.valid = !1),
      (a.textH = void 0),
      (a.textW = void 0),
      (a.lineCache = []),
      this.setStatus(a, "loading"),
      this.scheduleUpdateState(a));
  }
  setElementBoundsX(a) {
    const { x: d, contain: g, width: T } = a.props,
      { elementBounds: S } = a;
    ((S.x1 = d), (S.x2 = g !== "none" ? d + T : 1 / 0));
  }
  setElementBoundsY(a) {
    const { y: d, contain: g, height: T } = a.props,
      { elementBounds: S } = a;
    ((S.y1 = d), (S.y2 = g === "both" ? d + T : 1 / 0));
  }
}
var aB =
    typeof globalThis < "u"
      ? globalThis
      : typeof window < "u"
        ? window
        : typeof global < "u"
          ? global
          : typeof self < "u"
            ? self
            : {},
  by = {};
/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/ var EI;
function uB() {
  return (
    EI ||
      ((EI = 1),
      (function (f) {
        (function () {
          var c = typeof window < "u" ? window : aB,
            a = {};
          (function (g, T, S) {
            var h,
              M =
                typeof Object.create == "function"
                  ? Object.create
                  : function (e) {
                      function t() {}
                      return ((t.prototype = e), new t());
                    },
              P =
                typeof Object.defineProperties == "function"
                  ? Object.defineProperty
                  : function (e, t, n) {
                      return (e == Array.prototype || e == Object.prototype || (e[t] = n.value), e);
                    };
            function O(e) {
              e = [
                typeof globalThis == "object" && globalThis,
                e,
                typeof g == "object" && g,
                typeof self == "object" && self,
                typeof T == "object" && T,
              ];
              for (var t = 0; t < e.length; ++t) {
                var n = e[t];
                if (n && n.Math == Math) return n;
              }
              throw Error("Cannot find global object");
            }
            var D = O(this);
            function F(e, t) {
              if (t)
                e: {
                  var n = D;
                  e = e.split(".");
                  for (var r = 0; r < e.length - 1; r++) {
                    var i = e[r];
                    if (!(i in n)) break e;
                    n = n[i];
                  }
                  ((e = e[e.length - 1]),
                    (r = n[e]),
                    (t = t(r)),
                    t != r && t != null && P(n, e, { configurable: !0, writable: !0, value: t }));
                }
            }
            var K;
            if (typeof Object.setPrototypeOf == "function") K = Object.setPrototypeOf;
            else {
              var $;
              e: {
                var Q = { a: !0 },
                  ue = {};
                try {
                  ((ue.__proto__ = Q), ($ = ue.a));
                  break e;
                } catch (e) {}
                $ = !1;
              }
              K = $
                ? function (e, t) {
                    if (((e.__proto__ = t), e.__proto__ !== t)) throw new TypeError(e + " is not extensible");
                    return e;
                  }
                : null;
            }
            var le = K;
            function J(e, t) {
              if (((e.prototype = M(t.prototype)), (e.prototype.constructor = e), le)) le(e, t);
              else
                for (var n in t)
                  if (n != "prototype")
                    if (Object.defineProperties) {
                      var r = Object.getOwnPropertyDescriptor(t, n);
                      r && Object.defineProperty(e, n, r);
                    } else e[n] = t[n];
              e.Im = t.prototype;
            }
            function oe(e) {
              var t = 0;
              return function () {
                return t < e.length ? { done: !1, value: e[t++] } : { done: !0 };
              };
            }
            function x(e) {
              var t = typeof Symbol < "u" && Symbol.iterator && e[Symbol.iterator];
              if (t) return t.call(e);
              if (typeof e.length == "number") return { next: oe(e) };
              throw Error(String(e) + " is not an iterable or ArrayLike");
            }
            function Y(e) {
              if (!(e instanceof Array)) {
                e = x(e);
                for (var t, n = []; !(t = e.next()).done; ) n.push(t.value);
                e = n;
              }
              return e;
            }
            function me() {
              ((this.o = !1),
                (this.l = null),
                (this.h = void 0),
                (this.g = 1),
                (this.j = this.m = 0),
                (this.B = this.i = null));
            }
            function he(e) {
              if (e.o) throw new TypeError("Generator is already running");
              e.o = !0;
            }
            me.prototype.u = function (e) {
              this.h = e;
            };
            function ve(e, t) {
              ((e.i = { bi: t, si: !0 }), (e.g = e.m || e.j));
            }
            me.prototype.return = function (e) {
              ((this.i = { return: e }), (this.g = this.j));
            };
            function I(e, t, n) {
              return ((e.g = n), { value: t });
            }
            me.prototype.A = function (e) {
              this.g = e;
            };
            function re(e) {
              e.g = 0;
            }
            function ee(e, t, n) {
              ((e.m = t), n != null && (e.j = n));
            }
            function ge(e, t) {
              ((e.m = 0), (e.j = t || 0));
            }
            function de(e, t, n) {
              ((e.g = t), (e.m = n || 0));
            }
            function se(e, t) {
              return ((e.m = t || 0), (t = e.i.bi), (e.i = null), t);
            }
            function ye(e) {
              ((e.B = [e.i]), (e.m = 0), (e.j = 0));
            }
            function Ne(e, t) {
              var n = e.B.splice(0)[0];
              (n = e.i = e.i || n)
                ? n.si
                  ? (e.g = e.m || e.j)
                  : n.A != null && e.j < n.A
                    ? ((e.g = n.A), (e.i = null))
                    : (e.g = e.j)
                : (e.g = t);
            }
            function ht(e) {
              ((this.g = new me()), (this.h = e));
            }
            function rn(e, t) {
              he(e.g);
              var n = e.g.l;
              return n
                ? Zt(
                    e,
                    "return" in n
                      ? n.return
                      : function (r) {
                          return { value: r, done: !0 };
                        },
                    t,
                    e.g.return,
                  )
                : (e.g.return(t), Ft(e));
            }
            function Zt(e, t, n, r) {
              try {
                var i = t.call(e.g.l, n);
                if (!(i instanceof Object)) throw new TypeError("Iterator result " + i + " is not an object");
                if (!i.done) return ((e.g.o = !1), i);
                var s = i.value;
              } catch (o) {
                return ((e.g.l = null), ve(e.g, o), Ft(e));
              }
              return ((e.g.l = null), r.call(e.g, s), Ft(e));
            }
            function Ft(e) {
              for (; e.g.g; )
                try {
                  var t = e.h(e.g);
                  if (t) return ((e.g.o = !1), { value: t.value, done: !1 });
                } catch (n) {
                  ((e.g.h = void 0), ve(e.g, n));
                }
              if (((e.g.o = !1), e.g.i)) {
                if (((t = e.g.i), (e.g.i = null), t.si)) throw t.bi;
                return { value: t.return, done: !0 };
              }
              return { value: void 0, done: !0 };
            }
            function cn(e) {
              ((this.next = function (t) {
                return (he(e.g), e.g.l ? (t = Zt(e, e.g.l.next, t, e.g.u)) : (e.g.u(t), (t = Ft(e))), t);
              }),
                (this.throw = function (t) {
                  return (he(e.g), e.g.l ? (t = Zt(e, e.g.l.throw, t, e.g.u)) : (ve(e.g, t), (t = Ft(e))), t);
                }),
                (this.return = function (t) {
                  return rn(e, t);
                }),
                (this[Symbol.iterator] = function () {
                  return this;
                }));
            }
            function Tn(e) {
              function t(r) {
                return e.next(r);
              }
              function n(r) {
                return e.throw(r);
              }
              return new Promise(function (r, i) {
                function s(o) {
                  o.done ? r(o.value) : Promise.resolve(o.value).then(t, n).then(s, i);
                }
                s(e.next());
              });
            }
            function j(e) {
              return Tn(new cn(new ht(e)));
            }
            function At() {
              for (var e = Number(this), t = [], n = e; n < arguments.length; n++) t[n - e] = arguments[n];
              return t;
            }
            (F("Symbol", function (e) {
              function t(s) {
                if (this instanceof t) throw new TypeError("Symbol is not a constructor");
                return new n(r + (s || "") + "_" + i++, s);
              }
              function n(s, o) {
                ((this.g = s), P(this, "description", { configurable: !0, writable: !0, value: o }));
              }
              if (e) return e;
              n.prototype.toString = function () {
                return this.g;
              };
              var r = "jscomp_symbol_" + ((Math.random() * 1e9) >>> 0) + "_",
                i = 0;
              return t;
            }),
              F("Symbol.iterator", function (e) {
                return (
                  e ||
                  ((e = Symbol("Symbol.iterator")),
                  P(Array.prototype, e, {
                    configurable: !0,
                    writable: !0,
                    value: function () {
                      return qn(oe(this));
                    },
                  }),
                  e)
                );
              }));
            function qn(e) {
              return (
                (e = { next: e }),
                (e[Symbol.iterator] = function () {
                  return this;
                }),
                e
              );
            }
            F("Promise", function (e) {
              function t(o) {
                ((this.h = 0), (this.i = void 0), (this.g = []), (this.o = !1));
                var u = this.j();
                try {
                  o(u.resolve, u.reject);
                } catch (l) {
                  u.reject(l);
                }
              }
              function n() {
                this.g = null;
              }
              function r(o) {
                return o instanceof t
                  ? o
                  : new t(function (u) {
                      u(o);
                    });
              }
              if (e) return e;
              n.prototype.h = function (o) {
                if (this.g == null) {
                  this.g = [];
                  var u = this;
                  this.i(function () {
                    u.l();
                  });
                }
                this.g.push(o);
              };
              var i = D.setTimeout;
              ((n.prototype.i = function (o) {
                i(o, 0);
              }),
                (n.prototype.l = function () {
                  for (; this.g && this.g.length; ) {
                    var o = this.g;
                    this.g = [];
                    for (var u = 0; u < o.length; ++u) {
                      var l = o[u];
                      o[u] = null;
                      try {
                        l();
                      } catch (p) {
                        this.j(p);
                      }
                    }
                  }
                  this.g = null;
                }),
                (n.prototype.j = function (o) {
                  this.i(function () {
                    throw o;
                  });
                }),
                (t.prototype.j = function () {
                  function o(p) {
                    return function (m) {
                      l || ((l = !0), p.call(u, m));
                    };
                  }
                  var u = this,
                    l = !1;
                  return { resolve: o(this.G), reject: o(this.l) };
                }),
                (t.prototype.G = function (o) {
                  if (o === this) this.l(new TypeError("A Promise cannot resolve to itself"));
                  else if (o instanceof t) this.I(o);
                  else {
                    e: switch (typeof o) {
                      case "object":
                        var u = o != null;
                        break e;
                      case "function":
                        u = !0;
                        break e;
                      default:
                        u = !1;
                    }
                    u ? this.F(o) : this.m(o);
                  }
                }),
                (t.prototype.F = function (o) {
                  var u = void 0;
                  try {
                    u = o.then;
                  } catch (l) {
                    this.l(l);
                    return;
                  }
                  typeof u == "function" ? this.J(u, o) : this.m(o);
                }),
                (t.prototype.l = function (o) {
                  this.u(2, o);
                }),
                (t.prototype.m = function (o) {
                  this.u(1, o);
                }),
                (t.prototype.u = function (o, u) {
                  if (this.h != 0)
                    throw Error(
                      "Cannot settle(" + o + ", " + u + "): Promise already settled in state" + this.h,
                    );
                  ((this.h = o), (this.i = u), this.h === 2 && this.H(), this.B());
                }),
                (t.prototype.H = function () {
                  var o = this;
                  i(function () {
                    if (o.C()) {
                      var u = D.console;
                      typeof u < "u" && u.error(o.i);
                    }
                  }, 1);
                }),
                (t.prototype.C = function () {
                  if (this.o) return !1;
                  var o = D.CustomEvent,
                    u = D.Event,
                    l = D.dispatchEvent;
                  return typeof l > "u"
                    ? !0
                    : (typeof o == "function"
                        ? (o = new o("unhandledrejection", { cancelable: !0 }))
                        : typeof u == "function"
                          ? (o = new u("unhandledrejection", { cancelable: !0 }))
                          : ((o = D.document.createEvent("CustomEvent")),
                            o.initCustomEvent("unhandledrejection", !1, !0, o)),
                      (o.promise = this),
                      (o.reason = this.i),
                      l(o));
                }),
                (t.prototype.B = function () {
                  if (this.g != null) {
                    for (var o = 0; o < this.g.length; ++o) s.h(this.g[o]);
                    this.g = null;
                  }
                }));
              var s = new n();
              return (
                (t.prototype.I = function (o) {
                  var u = this.j();
                  o.Te(u.resolve, u.reject);
                }),
                (t.prototype.J = function (o, u) {
                  var l = this.j();
                  try {
                    o.call(u, l.resolve, l.reject);
                  } catch (p) {
                    l.reject(p);
                  }
                }),
                (t.prototype.then = function (o, u) {
                  function l(v, w) {
                    return typeof v == "function"
                      ? function (A) {
                          try {
                            p(v(A));
                          } catch (E) {
                            m(E);
                          }
                        }
                      : w;
                  }
                  var p,
                    m,
                    y = new t(function (v, w) {
                      ((p = v), (m = w));
                    });
                  return (this.Te(l(o, p), l(u, m)), y);
                }),
                (t.prototype.catch = function (o) {
                  return this.then(void 0, o);
                }),
                (t.prototype.Te = function (o, u) {
                  function l() {
                    switch (p.h) {
                      case 1:
                        o(p.i);
                        break;
                      case 2:
                        u(p.i);
                        break;
                      default:
                        throw Error("Unexpected state: " + p.h);
                    }
                  }
                  var p = this;
                  (this.g == null ? s.h(l) : this.g.push(l), (this.o = !0));
                }),
                (t.resolve = r),
                (t.reject = function (o) {
                  return new t(function (u, l) {
                    l(o);
                  });
                }),
                (t.race = function (o) {
                  return new t(function (u, l) {
                    for (var p = x(o), m = p.next(); !m.done; m = p.next()) r(m.value).Te(u, l);
                  });
                }),
                (t.all = function (o) {
                  var u = x(o),
                    l = u.next();
                  return l.done
                    ? r([])
                    : new t(function (p, m) {
                        function y(A) {
                          return function (E) {
                            ((v[A] = E), w--, w == 0 && p(v));
                          };
                        }
                        var v = [],
                          w = 0;
                        do (v.push(void 0), w++, r(l.value).Te(y(v.length - 1), m), (l = u.next()));
                        while (!l.done);
                      });
                }),
                t
              );
            });
            function bt(e, t) {
              return Object.prototype.hasOwnProperty.call(e, t);
            }
            (F("WeakMap", function (e) {
              function t(l) {
                if (((this.g = (u += Math.random() + 1).toString()), l)) {
                  l = x(l);
                  for (var p; !(p = l.next()).done; ) ((p = p.value), this.set(p[0], p[1]));
                }
              }
              function n() {}
              function r(l) {
                var p = typeof l;
                return (p === "object" && l !== null) || p === "function";
              }
              function i(l) {
                if (!bt(l, o)) {
                  var p = new n();
                  P(l, o, { value: p });
                }
              }
              function s(l) {
                var p = Object[l];
                p &&
                  (Object[l] = function (m) {
                    return m instanceof n ? m : (Object.isExtensible(m) && i(m), p(m));
                  });
              }
              if (
                (function () {
                  if (!e || !Object.seal) return !1;
                  try {
                    var l = Object.seal({}),
                      p = Object.seal({}),
                      m = new e([
                        [l, 2],
                        [p, 3],
                      ]);
                    return m.get(l) != 2 || m.get(p) != 3
                      ? !1
                      : (m.delete(l), m.set(p, 4), !m.has(l) && m.get(p) == 4);
                  } catch (y) {
                    return !1;
                  }
                })()
              )
                return e;
              var o = "$jscomp_hidden_" + Math.random();
              (s("freeze"), s("preventExtensions"), s("seal"));
              var u = 0;
              return (
                (t.prototype.set = function (l, p) {
                  if (!r(l)) throw Error("Invalid WeakMap key");
                  if ((i(l), !bt(l, o))) throw Error("WeakMap key fail: " + l);
                  return ((l[o][this.g] = p), this);
                }),
                (t.prototype.get = function (l) {
                  return r(l) && bt(l, o) ? l[o][this.g] : void 0;
                }),
                (t.prototype.has = function (l) {
                  return r(l) && bt(l, o) && bt(l[o], this.g);
                }),
                (t.prototype.delete = function (l) {
                  return r(l) && bt(l, o) && bt(l[o], this.g) ? delete l[o][this.g] : !1;
                }),
                t
              );
            }),
              F("Map", function (e) {
                function t() {
                  var u = {};
                  return (u.xc = u.next = u.head = u);
                }
                function n(u, l) {
                  var p = u[1];
                  return qn(function () {
                    if (p) {
                      for (; p.head != u[1]; ) p = p.xc;
                      for (; p.next != p.head; ) return ((p = p.next), { done: !1, value: l(p) });
                      p = null;
                    }
                    return { done: !0, value: void 0 };
                  });
                }
                function r(u, l) {
                  var p = l && typeof l;
                  p == "object" || p == "function"
                    ? s.has(l)
                      ? (p = s.get(l))
                      : ((p = "" + ++o), s.set(l, p))
                    : (p = "p_" + l);
                  var m = u[0][p];
                  if (m && bt(u[0], p))
                    for (u = 0; u < m.length; u++) {
                      var y = m[u];
                      if ((l !== l && y.key !== y.key) || l === y.key)
                        return { id: p, list: m, index: u, entry: y };
                    }
                  return { id: p, list: m, index: -1, entry: void 0 };
                }
                function i(u) {
                  if (((this[0] = {}), (this[1] = t()), (this.size = 0), u)) {
                    u = x(u);
                    for (var l; !(l = u.next()).done; ) ((l = l.value), this.set(l[0], l[1]));
                  }
                }
                if (
                  (function () {
                    if (
                      !e ||
                      typeof e != "function" ||
                      !e.prototype.entries ||
                      typeof Object.seal != "function"
                    )
                      return !1;
                    try {
                      var u = Object.seal({ x: 4 }),
                        l = new e(x([[u, "s"]]));
                      if (
                        l.get(u) != "s" ||
                        l.size != 1 ||
                        l.get({ x: 4 }) ||
                        l.set({ x: 4 }, "t") != l ||
                        l.size != 2
                      )
                        return !1;
                      var p = l.entries(),
                        m = p.next();
                      return m.done || m.value[0] != u || m.value[1] != "s"
                        ? !1
                        : ((m = p.next()),
                          !(m.done || m.value[0].x != 4 || m.value[1] != "t" || !p.next().done));
                    } catch (y) {
                      return !1;
                    }
                  })()
                )
                  return e;
                var s = new WeakMap();
                ((i.prototype.set = function (u, l) {
                  u = u === 0 ? 0 : u;
                  var p = r(this, u);
                  return (
                    p.list || (p.list = this[0][p.id] = []),
                    p.entry
                      ? (p.entry.value = l)
                      : ((p.entry = { next: this[1], xc: this[1].xc, head: this[1], key: u, value: l }),
                        p.list.push(p.entry),
                        (this[1].xc.next = p.entry),
                        (this[1].xc = p.entry),
                        this.size++),
                    this
                  );
                }),
                  (i.prototype.delete = function (u) {
                    return (
                      (u = r(this, u)),
                      u.entry && u.list
                        ? (u.list.splice(u.index, 1),
                          u.list.length || delete this[0][u.id],
                          (u.entry.xc.next = u.entry.next),
                          (u.entry.next.xc = u.entry.xc),
                          (u.entry.head = null),
                          this.size--,
                          !0)
                        : !1
                    );
                  }),
                  (i.prototype.clear = function () {
                    ((this[0] = {}), (this[1] = this[1].xc = t()), (this.size = 0));
                  }),
                  (i.prototype.has = function (u) {
                    return !!r(this, u).entry;
                  }),
                  (i.prototype.get = function (u) {
                    return (u = r(this, u).entry) && u.value;
                  }),
                  (i.prototype.entries = function () {
                    return n(this, function (u) {
                      return [u.key, u.value];
                    });
                  }),
                  (i.prototype.keys = function () {
                    return n(this, function (u) {
                      return u.key;
                    });
                  }),
                  (i.prototype.values = function () {
                    return n(this, function (u) {
                      return u.value;
                    });
                  }),
                  (i.prototype.forEach = function (u, l) {
                    for (var p = this.entries(), m; !(m = p.next()).done; )
                      ((m = m.value), u.call(l, m[1], m[0], this));
                  }),
                  (i.prototype[Symbol.iterator] = i.prototype.entries));
                var o = 0;
                return i;
              }),
              F("Set", function (e) {
                function t(n) {
                  if (((this.g = new Map()), n)) {
                    n = x(n);
                    for (var r; !(r = n.next()).done; ) this.add(r.value);
                  }
                  this.size = this.g.size;
                }
                return (function () {
                  if (
                    !e ||
                    typeof e != "function" ||
                    !e.prototype.entries ||
                    typeof Object.seal != "function"
                  )
                    return !1;
                  try {
                    var n = Object.seal({ x: 4 }),
                      r = new e(x([n]));
                    if (
                      !r.has(n) ||
                      r.size != 1 ||
                      r.add(n) != r ||
                      r.size != 1 ||
                      r.add({ x: 4 }) != r ||
                      r.size != 2
                    )
                      return !1;
                    var i = r.entries(),
                      s = i.next();
                    return s.done || s.value[0] != n || s.value[1] != n
                      ? !1
                      : ((s = i.next()),
                        s.done || s.value[0] == n || s.value[0].x != 4 || s.value[1] != s.value[0]
                          ? !1
                          : i.next().done);
                  } catch (o) {
                    return !1;
                  }
                })()
                  ? e
                  : ((t.prototype.add = function (n) {
                      return ((n = n === 0 ? 0 : n), this.g.set(n, n), (this.size = this.g.size), this);
                    }),
                    (t.prototype.delete = function (n) {
                      return ((n = this.g.delete(n)), (this.size = this.g.size), n);
                    }),
                    (t.prototype.clear = function () {
                      (this.g.clear(), (this.size = 0));
                    }),
                    (t.prototype.has = function (n) {
                      return this.g.has(n);
                    }),
                    (t.prototype.entries = function () {
                      return this.g.entries();
                    }),
                    (t.prototype.values = function () {
                      return this.g.values();
                    }),
                    (t.prototype.keys = t.prototype.values),
                    (t.prototype[Symbol.iterator] = t.prototype.values),
                    (t.prototype.forEach = function (n, r) {
                      var i = this;
                      this.g.forEach(function (s) {
                        return n.call(r, s, s, i);
                      });
                    }),
                    t);
              }));
            function Sn(e, t, n) {
              e instanceof String && (e = String(e));
              for (var r = e.length, i = 0; i < r; i++) {
                var s = e[i];
                if (t.call(n, s, i, e)) return { ni: i, v: s };
              }
              return { ni: -1, v: void 0 };
            }
            F("Array.prototype.findIndex", function (e) {
              return (
                e ||
                function (t, n) {
                  return Sn(this, t, n).ni;
                }
              );
            });
            function Vt(e, t) {
              e instanceof String && (e += "");
              var n = 0,
                r = !1,
                i = {
                  next: function () {
                    if (!r && n < e.length) {
                      var s = n++;
                      return { value: t(s, e[s]), done: !1 };
                    }
                    return ((r = !0), { done: !0, value: void 0 });
                  },
                };
              return (
                (i[Symbol.iterator] = function () {
                  return i;
                }),
                i
              );
            }
            (F("Array.prototype.values", function (e) {
              return (
                e ||
                function () {
                  return Vt(this, function (t, n) {
                    return n;
                  });
                }
              );
            }),
              F("Array.from", function (e) {
                return (
                  e ||
                  function (t, n, r) {
                    n =
                      n != null
                        ? n
                        : function (u) {
                            return u;
                          };
                    var i = [],
                      s = typeof Symbol < "u" && Symbol.iterator && t[Symbol.iterator];
                    if (typeof s == "function") {
                      t = s.call(t);
                      for (var o = 0; !(s = t.next()).done; ) i.push(n.call(r, s.value, o++));
                    } else for (s = t.length, o = 0; o < s; o++) i.push(n.call(r, t[o], o));
                    return i;
                  }
                );
              }),
              F("Array.prototype.keys", function (e) {
                return (
                  e ||
                  function () {
                    return Vt(this, function (t) {
                      return t;
                    });
                  }
                );
              }));
            function wn(e, t, n) {
              if (e == null)
                throw new TypeError(
                  "The 'this' value for String.prototype." + n + " must not be null or undefined",
                );
              if (t instanceof RegExp)
                throw new TypeError(
                  "First argument to String.prototype." + n + " must not be a regular expression",
                );
              return e + "";
            }
            (F("String.prototype.startsWith", function (e) {
              return (
                e ||
                function (t, n) {
                  var r = wn(this, t, "startsWith"),
                    i = r.length,
                    s = t.length;
                  n = Math.max(0, Math.min(n | 0, r.length));
                  for (var o = 0; o < s && n < i; ) if (r[n++] != t[o++]) return !1;
                  return o >= s;
                }
              );
            }),
              F("Object.is", function (e) {
                return (
                  e ||
                  function (t, n) {
                    return t === n ? t !== 0 || 1 / t === 1 / n : t !== t && n !== n;
                  }
                );
              }),
              F("Array.prototype.includes", function (e) {
                return (
                  e ||
                  function (t, n) {
                    var r = this;
                    r instanceof String && (r = String(r));
                    var i = r.length;
                    for (n = n || 0, n < 0 && (n = Math.max(n + i, 0)); n < i; n++) {
                      var s = r[n];
                      if (s === t || Object.is(s, t)) return !0;
                    }
                    return !1;
                  }
                );
              }),
              F("String.prototype.includes", function (e) {
                return (
                  e ||
                  function (t, n) {
                    return wn(this, t, "includes").indexOf(t, n || 0) !== -1;
                  }
                );
              }),
              F("String.fromCodePoint", function (e) {
                return (
                  e ||
                  function (t) {
                    for (var n = "", r = 0; r < arguments.length; r++) {
                      var i = Number(arguments[r]);
                      if (i < 0 || i > 1114111 || i !== Math.floor(i))
                        throw new RangeError("invalid_code_point " + i);
                      i <= 65535
                        ? (n += String.fromCharCode(i))
                        : ((i -= 65536),
                          (n += String.fromCharCode(((i >>> 10) & 1023) | 55296)),
                          (n += String.fromCharCode((i & 1023) | 56320)));
                    }
                    return n;
                  }
                );
              }),
              F("WeakSet", function (e) {
                function t(n) {
                  if (((this.g = new WeakMap()), n)) {
                    n = x(n);
                    for (var r; !(r = n.next()).done; ) this.add(r.value);
                  }
                }
                return (function () {
                  if (!e || !Object.seal) return !1;
                  try {
                    var n = Object.seal({}),
                      r = Object.seal({}),
                      i = new e([n]);
                    return !i.has(n) || i.has(r) ? !1 : (i.delete(n), i.add(r), !i.has(n) && i.has(r));
                  } catch (s) {
                    return !1;
                  }
                })()
                  ? e
                  : ((t.prototype.add = function (n) {
                      return (this.g.set(n, !0), this);
                    }),
                    (t.prototype.has = function (n) {
                      return this.g.has(n);
                    }),
                    (t.prototype.delete = function (n) {
                      return this.g.delete(n);
                    }),
                    t);
              }),
              F("Array.prototype.find", function (e) {
                return (
                  e ||
                  function (t, n) {
                    return Sn(this, t, n).v;
                  }
                );
              }),
              F("Object.entries", function (e) {
                return (
                  e ||
                  function (t) {
                    var n = [],
                      r;
                    for (r in t) bt(t, r) && n.push([r, t[r]]);
                    return n;
                  }
                );
              }));
            var br =
              typeof Object.assign == "function"
                ? Object.assign
                : function (e, t) {
                    if (e == null) throw new TypeError("No nullish arg");
                    e = Object(e);
                    for (var n = 1; n < arguments.length; n++) {
                      var r = arguments[n];
                      if (r) for (var i in r) bt(r, i) && (e[i] = r[i]);
                    }
                    return e;
                  };
            (F("Object.assign", function (e) {
              return e || br;
            }),
              F("Promise.prototype.finally", function (e) {
                return (
                  e ||
                  function (t) {
                    return this.then(
                      function (n) {
                        return Promise.resolve(t()).then(function () {
                          return n;
                        });
                      },
                      function (n) {
                        return Promise.resolve(t()).then(function () {
                          throw n;
                        });
                      },
                    );
                  }
                );
              }),
              F("Array.prototype.entries", function (e) {
                return (
                  e ||
                  function () {
                    return Vt(this, function (t, n) {
                      return [t, n];
                    });
                  }
                );
              }),
              F("Number.isNaN", function (e) {
                return (
                  e ||
                  function (t) {
                    return typeof t == "number" && isNaN(t);
                  }
                );
              }),
              F("String.prototype.repeat", function (e) {
                return (
                  e ||
                  function (t) {
                    var n = wn(this, null, "repeat");
                    if (t < 0 || t > 1342177279) throw new RangeError("Invalid count value");
                    t |= 0;
                    for (var r = ""; t; ) (t & 1 && (r += n), (t >>>= 1) && (n += n));
                    return r;
                  }
                );
              }),
              F("Number.EPSILON", function () {
                return 2220446049250313e-31;
              }),
              F("Number.MAX_SAFE_INTEGER", function () {
                return 9007199254740991;
              }),
              F("Number.isFinite", function (e) {
                return (
                  e ||
                  function (t) {
                    return typeof t != "number" ? !1 : !isNaN(t) && t !== 1 / 0 && t !== -1 / 0;
                  }
                );
              }),
              F("Object.values", function (e) {
                return (
                  e ||
                  function (t) {
                    var n = [],
                      r;
                    for (r in t) bt(t, r) && n.push(t[r]);
                    return n;
                  }
                );
              }),
              F("Math.log2", function (e) {
                return (
                  e ||
                  function (t) {
                    return Math.log(t) / Math.LN2;
                  }
                );
              }),
              F("String.prototype.endsWith", function (e) {
                return (
                  e ||
                  function (t, n) {
                    var r = wn(this, t, "endsWith");
                    (n === void 0 && (n = r.length), (n = Math.max(0, Math.min(n | 0, r.length))));
                    for (var i = t.length; i > 0 && n > 0; ) if (r[--n] != t[--i]) return !1;
                    return i <= 0;
                  }
                );
              }),
              F("Math.trunc", function (e) {
                return (
                  e ||
                  function (t) {
                    if (((t = Number(t)), isNaN(t) || t === 1 / 0 || t === -1 / 0 || t === 0)) return t;
                    var n = Math.floor(Math.abs(t));
                    return t < 0 ? -n : n;
                  }
                );
              }));
            var or = this || self;
            function fe(e, t) {
              e = e.split(".");
              var n = or;
              e[0] in n || typeof n.execScript > "u" || n.execScript("var " + e[0]);
              for (var r; e.length && (r = e.shift()); )
                e.length || t === void 0
                  ? n[r] && n[r] !== Object.prototype[r]
                    ? (n = n[r])
                    : (n = n[r] = {})
                  : (n[r] = t);
            }
            function Wr(e) {
              ((this.g = Math.exp(Math.log(0.5) / e)), (this.i = this.h = 0));
            }
            Wr.prototype.sample = function (e, t) {
              var n = Math.pow(this.g, e);
              ((t = t * (1 - n) + n * this.h), isNaN(t) || ((this.h = t), (this.i += e)));
            };
            function xr(e) {
              return e.h / (1 - Math.pow(e.g, e.i));
            }
            function ar() {
              ((this.h = new Wr(2)), (this.j = new Wr(5)), (this.g = 0), (this.i = 128e3), (this.l = 16e3));
            }
            ((ar.prototype.configure = function (e) {
              ((this.i = e.minTotalBytes),
                (this.l = e.minBytes),
                (this.h.g = Math.exp(Math.log(0.5) / e.fastHalfLife)),
                (this.j.g = Math.exp(Math.log(0.5) / e.slowHalfLife)));
            }),
              (ar.prototype.sample = function (e, t) {
                if (!(t < this.l)) {
                  var n = (8e3 * t) / e;
                  ((e /= 1e3), (this.g += t), this.h.sample(e, n), this.j.sample(e, n));
                }
              }),
              (ar.prototype.getBandwidthEstimate = function (e) {
                return this.g < this.i ? e : Math.min(xr(this.h), xr(this.j));
              }));
            function di() {}
            function An() {}
            function je() {}
            function ur(e) {
              var t = At.apply(1, arguments);
              Ua.has(e) || (Ua.add(e), je.apply(di, Y(t)));
            }
            function As() {}
            function Th() {}
            function Sh() {}
            var Ua = new Set();
            g.console &&
              (new Map()
                .set(1, function () {
                  return console.error.apply(console, Y(At.apply(0, arguments)));
                })
                .set(2, function () {
                  return console.warn.apply(console, Y(At.apply(0, arguments)));
                })
                .set(3, function () {
                  return console.info.apply(console, Y(At.apply(0, arguments)));
                })
                .set(4, function () {
                  return console.log.apply(console, Y(At.apply(0, arguments)));
                })
                .set(5, function () {
                  return console.debug.apply(console, Y(At.apply(0, arguments)));
                })
                .set(6, function () {
                  return console.debug.apply(console, Y(At.apply(0, arguments)));
                }),
              (je = function () {
                return console.warn.apply(console, Y(At.apply(0, arguments)));
              }),
              (An = function () {
                console.error.apply(console, Y(At.apply(0, arguments)));
              }));
            function ja(e, t) {
              return typeof e == "number" && typeof t == "number" && isNaN(e) && isNaN(t) ? !0 : e === t;
            }
            function Nr(e, t) {
              ((t = e.indexOf(t)), t > -1 && e.splice(t, 1));
            }
            function Es(e, t, n) {
              if ((n || (n = ja), e.length != t.length)) return !1;
              ((t = t.slice()), (e = x(e)));
              for (var r = e.next(), i = {}; !r.done; i = { ui: void 0 }, r = e.next()) {
                if (
                  ((i.ui = r.value),
                  (r = t.findIndex(
                    (function (s) {
                      return function (o) {
                        return n(s.ui, o);
                      };
                    })(i),
                  )),
                  r == -1)
                )
                  return !1;
                ((t[r] = t[t.length - 1]), t.pop());
              }
              return t.length == 0;
            }
            function $i(e, t, n) {
              if (e === t) return !0;
              if (!e || !t) return e == t;
              if ((n || (n = ja), e.length != t.length)) return !1;
              for (var r = 0; r < e.length; r++) if (!n(e[r], t[r])) return !1;
              return !0;
            }
            function Fl() {
              this.g = new Map();
            }
            ((h = Fl.prototype),
              (h.push = function (e, t) {
                this.g.has(e) ? this.g.get(e).push(t) : this.g.set(e, [t]);
              }),
              (h.get = function (e) {
                return this.g.has(e) ? this.g.get(e).slice() : null;
              }),
              (h.remove = function (e, t) {
                if (this.g.has(e)) {
                  var n = this.g.get(e).filter(function (r) {
                    return r != t;
                  });
                  (this.g.set(e, n), n.length || this.g.delete(e));
                }
              }),
              (h.forEach = function (e) {
                this.g.forEach(function (t, n) {
                  e(n, t);
                });
              }),
              (h.size = function () {
                return this.g.size;
              }),
              (h.keys = function () {
                return Array.from(this.g.keys());
              }));
            function et() {
              this.g = new Fl();
            }
            ((h = et.prototype),
              (h.release = function () {
                (this.Qa(), (this.g = null));
              }),
              (h.D = function (e, t, n, r) {
                this.g && ((e = new Ev(e, t, n, r)), this.g.push(t, e));
              }),
              (h.Aa = function (e, t, n, r) {
                function i(o) {
                  (s.Ma(e, t, i), n(o));
                }
                var s = this;
                this.D(e, t, i, r);
              }),
              (h.Ma = function (e, t, n) {
                if (this.g) {
                  var r = this.g.get(t) || [];
                  r = x(r);
                  for (var i = r.next(); !i.done; i = r.next())
                    ((i = i.value), i.target != e || (n != i.listener && n) || (i.Ma(), this.g.remove(t, i)));
                }
              }),
              (h.Qa = function () {
                if (this.g) {
                  for (var e = [], t = x(this.g.g.values()), n = t.next(); !n.done; n = t.next())
                    e.push.apply(e, Y(n.value));
                  for (e = x(e), t = e.next(); !t.done; t = e.next()) t.value.Ma();
                  this.g.g.clear();
                }
              }),
              fe("shaka.util.EventManager", et),
              (et.prototype.removeAll = et.prototype.Qa),
              (et.prototype.unlisten = et.prototype.Ma),
              (et.prototype.listenOnce = et.prototype.Aa),
              (et.prototype.listen = et.prototype.D),
              (et.prototype.release = et.prototype.release));
            function Ev(e, t, n, r) {
              ((this.target = e),
                (this.type = t),
                (this.listener = n),
                (this.g = $2(e, r)),
                this.target.addEventListener(t, n, this.g));
            }
            Ev.prototype.Ma = function () {
              (this.target.removeEventListener(this.type, this.listener, this.g),
                (this.listener = this.target = null),
                (this.g = !1));
            };
            function $2(e, t) {
              if (t == null) return !1;
              if (typeof t == "boolean") return t;
              var n = new Set(["passive", "capture"]);
              return (
                Object.keys(t).filter(function (r) {
                  return !n.has(r);
                }),
                Y2(e) ? t : t.capture || !1
              );
            }
            function Y2(e) {
              var t = Iv;
              if (t == null) {
                t = !1;
                try {
                  var n = {},
                    r = {
                      get: function () {
                        return ((t = !0), !1);
                      },
                    };
                  (Object.defineProperty(n, "passive", r),
                    Object.defineProperty(n, "capture", r),
                    (r = function () {}),
                    e.addEventListener("test", r, n),
                    e.removeEventListener("test", r, n));
                } catch (i) {
                  t = !1;
                }
                Iv = t;
              }
              return t || !1;
            }
            var Iv = void 0;
            fe("shaka.config.AutoShowText", {
              NEVER: 0,
              ALWAYS: 1,
              IF_PREFERRED_TEXT_LANGUAGE: 2,
              IF_SUBTITLES_MAY_BE_NEEDED: 3,
            });
            function xt(e) {
              ((this.h = e), (this.g = void 0));
            }
            xt.prototype.value = function () {
              return (this.g === void 0 && (this.g = this.h()), this.g);
            };
            /*
 @license
 Shaka Player
 Copyright 2025 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/ function Be() {
              return q2.value();
            }
            var Kr = null,
              wh = null,
              q2 = new xt(function () {
                var e = void 0;
                return (Kr && (e = Kr()), !e && wh && (e = wh()), e);
              });
            function Ah(e, t) {
              ((this.g = e), (this.h = t));
            }
            Ah.prototype.toString = function () {
              return "v" + this.g + "." + this.h;
            };
            function qe(e, t) {
              var n = new Ah(5, 0),
                r = Cv,
                i = r.g,
                s = n.h - i.h;
              ((n.g - i.g || s) > 0 ? r.i : r.h)(r.g, n, e, t);
            }
            function J2(e, t, n, r) {
              je(
                [
                  n,
                  "has been deprecated and will be removed in",
                  t,
                  ". We are currently at version",
                  e,
                  ". Additional information:",
                  r,
                ].join(" "),
              );
            }
            function Q2(e, t, n, r) {
              An(
                [
                  n,
                  "has been deprecated and has been removed in",
                  t,
                  ". We are now at version",
                  e,
                  ". Additional information:",
                  r,
                ].join(" "),
              );
            }
            var Cv = null;
            /*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/ var Z2 = RegExp(
              "^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$",
            );
            /*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/ function Pt(e) {
              var t;
              e instanceof Pt
                ? (Vl(this, e.fc),
                  (this.hd = e.hd),
                  Hl(this, e.Db),
                  Eh(this, e.Dd),
                  (this.Sb = e.Sb),
                  Is(this, e.g.clone()),
                  (this.Rc = e.Rc))
                : e && (t = String(e).match(Z2))
                  ? (Vl(this, t[1] || "", !0),
                    (this.hd = uo(t[2] || "")),
                    Hl(this, t[3] || "", !0),
                    Eh(this, t[4]),
                    (this.Sb = uo(t[5] || "", !0)),
                    Is(this, t[6] || "", !0),
                    (this.Rc = uo(t[7] || "")))
                  : (this.g = new lo(null));
            }
            ((h = Pt.prototype),
              (h.fc = ""),
              (h.hd = ""),
              (h.Db = ""),
              (h.Dd = null),
              (h.Sb = ""),
              (h.Rc = ""),
              (h.toString = function () {
                var e = [],
                  t = this.fc;
                if ((t && e.push(Ba(t, Mv, !0), ":"), (t = this.Db))) {
                  e.push("//");
                  var n = this.hd;
                  (n && e.push(Ba(n, Mv, !0), "@"),
                    e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g, "%$1")),
                    (t = this.Dd),
                    t != null && e.push(":", String(t)));
                }
                return (
                  (t = this.Sb) &&
                    (this.Db && t.charAt(0) != "/" && e.push("/"),
                    e.push(Ba(t, t.charAt(0) == "/" ? nC : tC, !0))),
                  (t = this.g.toString()) && e.push("?", t),
                  (t = this.Rc) && e.push("#", Ba(t, iC)),
                  e.join("")
                );
              }),
              (h.resolve = function (e) {
                var t = this.clone();
                t.fc === "data" && (t = new Pt());
                var n = !!e.fc;
                (n ? Vl(t, e.fc) : (n = !!e.hd),
                  n ? (t.hd = e.hd) : (n = !!e.Db),
                  n ? Hl(t, e.Db) : (n = e.Dd != null));
                var r = e.Sb;
                if (n) Eh(t, e.Dd);
                else if ((n = !!e.Sb)) {
                  if (r.charAt(0) != "/")
                    if (this.Db && !this.Sb) r = "/" + r;
                    else {
                      var i = t.Sb.lastIndexOf("/");
                      i != -1 && (r = t.Sb.substr(0, i + 1) + r);
                    }
                  if (r == ".." || r == ".") r = "";
                  else if (r.indexOf("./") != -1 || r.indexOf("/.") != -1) {
                    ((i = r.lastIndexOf("/", 0) == 0), (r = r.split("/")));
                    for (var s = [], o = 0; o < r.length; ) {
                      var u = r[o++];
                      u == "."
                        ? i && o == r.length && s.push("")
                        : u == ".."
                          ? ((s.length > 1 || (s.length == 1 && s[0] != "")) && s.pop(),
                            i && o == r.length && s.push(""))
                          : (s.push(u), (i = !0));
                    }
                    r = s.join("/");
                  }
                }
                return (
                  n ? (t.Sb = r) : (n = e.g.toString() !== ""),
                  n ? Is(t, e.g.clone()) : (n = !!e.Rc),
                  n && (t.Rc = e.Rc),
                  t
                );
              }),
              (h.clone = function () {
                return new Pt(this);
              }));
            function Vl(e, t, n) {
              ((e.fc = n ? uo(t, !0) : t), e.fc && (e.fc = e.fc.replace(/:$/, "")));
            }
            function Hl(e, t, n) {
              e.Db = n ? uo(t, !0) : t;
            }
            function Eh(e, t) {
              if (t) {
                if (((t = Number(t)), isNaN(t) || t < 0)) throw Error("Bad port number " + t);
                e.Dd = t;
              } else e.Dd = null;
            }
            function Is(e, t, n) {
              t instanceof lo ? (e.g = t) : (n || (t = Ba(t, rC)), (e.g = new lo(t)));
            }
            function uo(e, t) {
              return e ? (t ? decodeURI(e) : decodeURIComponent(e)) : "";
            }
            function Ba(e, t, n) {
              return e != null
                ? ((e = encodeURI(e).replace(t, eC)), n && (e = e.replace(/%25([0-9a-fA-F]{2})/g, "%$1")), e)
                : null;
            }
            function eC(e) {
              return ((e = e.charCodeAt(0)), "%" + ((e >> 4) & 15).toString(16) + (e & 15).toString(16));
            }
            var Mv = /[#\/\?@]/g,
              tC = /[#\?:]/g,
              nC = /[#\?]/g,
              rC = /[#\?@]/g,
              iC = /#/g;
            function lo(e) {
              this.g = e || null;
            }
            function Gl(e) {
              if (!e.fb && ((e.fb = new Map()), (e.Vd = 0), e.g))
                for (var t = e.g.split("&"), n = 0; n < t.length; n++) {
                  var r = t[n].indexOf("="),
                    i = null;
                  if (r >= 0) {
                    var s = t[n].substring(0, r);
                    i = t[n].substring(r + 1);
                  } else s = t[n];
                  ((s = decodeURIComponent(s)), (i = i || ""), e.add(s, decodeURIComponent(i)));
                }
            }
            ((h = lo.prototype), (h.fb = null), (h.Vd = null));
            function Rv(e) {
              return (Gl(e), e.Vd);
            }
            ((h.add = function (e, t) {
              (Gl(this), (this.g = null));
              var n = this.fb.has(e) ? this.fb.get(e) : null;
              return (n || this.fb.set(e, (n = [])), n.push(t), this.Vd++, this);
            }),
              (h.set = function (e, t) {
                return (
                  Gl(this),
                  (this.g = null),
                  this.fb.has(e) ? this.fb.set(e, [t]) : this.add(e, t),
                  this
                );
              }),
              (h.get = function (e) {
                return (Gl(this), this.fb.get(e) || []);
              }),
              (h.toString = function () {
                if (this.g) return this.g;
                if (!this.fb || !this.fb.size) return "";
                for (var e = [], t = x(this.fb.keys()), n = t.next(); !n.done; n = t.next()) {
                  var r = n.value;
                  ((n = encodeURIComponent(r)), (r = this.fb.get(r)));
                  for (var i = 0; i < r.length; i++) {
                    var s = n;
                    (r[i] !== "" && (s += "=" + encodeURIComponent(r[i])), e.push(s));
                  }
                }
                return (this.g = e.join("&"));
              }),
              (h.clone = function () {
                var e = new lo();
                if (((e.g = this.g), this.fb)) {
                  for (var t = new Map(), n = x(this.fb), r = n.next(); !r.done; r = n.next()) {
                    var i = x(r.value);
                    ((r = i.next().value), (i = i.next().value), t.set(r, i.concat()));
                  }
                  ((e.fb = t), (e.Vd = this.Vd));
                }
                return e;
              }));
            function co() {}
            function fi(e, t) {
              if (!e && !t) return !0;
              if (!e || !t || e.byteLength != t.byteLength) return !1;
              if (
                (ArrayBuffer.isView(e) ? e.buffer : e) == (ArrayBuffer.isView(t) ? t.buffer : t) &&
                (e.byteOffset || 0) == (t.byteOffset || 0)
              )
                return !0;
              var n = De(e);
              t = De(t);
              for (var r = 0; r < e.byteLength; r++) if (n[r] != t[r]) return !1;
              return !0;
            }
            function Tr(e) {
              return ArrayBuffer.isView(e)
                ? e.byteOffset == 0 && e.byteLength == e.buffer.byteLength
                  ? e.buffer
                  : new Uint8Array(e).buffer
                : e;
            }
            function De(e, t, n) {
              return ((n = n === void 0 ? 1 / 0 : n), Ih(e, t === void 0 ? 0 : t, n, Uint8Array));
            }
            function kv(e, t, n) {
              return ((n = n === void 0 ? 1 / 0 : n), Ih(e, t === void 0 ? 0 : t, n, Uint16Array));
            }
            function jn(e, t, n) {
              return ((n = n === void 0 ? 1 / 0 : n), Ih(e, t === void 0 ? 0 : t, n, DataView));
            }
            function Ih(e, t, n, r) {
              var i = ArrayBuffer.isView(e) ? e.buffer : e,
                s = 1;
              "BYTES_PER_ELEMENT" in r && (s = r.BYTES_PER_ELEMENT);
              var o = ((e.byteOffset || 0) + e.byteLength) / s;
              return (
                (e = Math.floor(Math.max(0, Math.min(((e.byteOffset || 0) + t) / s, o)))),
                new r(i, e, Math.floor(Math.min(e + Math.max(n, 0), o)) - e)
              );
            }
            (fe("shaka.util.BufferUtils", co),
              (co.toDataView = jn),
              (co.toUint16 = kv),
              (co.toUint8 = De),
              (co.toArrayBuffer = Tr),
              (co.equal = fi));
            function _v(e, t) {
              if (e === t || !e.length || !t.length) return !0;
              e = x(e);
              for (var n = e.next(); !n.done; n = e.next()) {
                if (((n = n.value), zl(n))) return !0;
                for (var r = x(t), i = r.next(); !i.done; i = r.next())
                  if (((i = i.value), n.keySystem === i.keySystem || zl(i))) return !0;
              }
              return !1;
            }
            function Pv(e, t) {
              if (!e.length) return t;
              if (!t.length) return e;
              var n = [];
              e = x(e);
              for (var r = e.next(); !r.done; r = e.next()) {
                r = r.value;
                for (var i = x(t), s = i.next(); !s.done; s = i.next())
                  if (((s = s.value), r.keySystem == s.keySystem)) {
                    i = new Map();
                    for (
                      var o = x((r.initData || []).concat(s.initData || [])), u = o.next();
                      !u.done;
                      u = o.next()
                    )
                      ((u = u.value), i.set(u.keyId, u));
                    ((i = Array.from(i.values())),
                      (o =
                        r.keyIds && s.keyIds
                          ? new Set([].concat(Y(r.keyIds), Y(s.keyIds)))
                          : r.keyIds || s.keyIds),
                      n.push({
                        keySystem: r.keySystem,
                        licenseServerUri: r.licenseServerUri || s.licenseServerUri,
                        distinctiveIdentifierRequired:
                          r.distinctiveIdentifierRequired || s.distinctiveIdentifierRequired,
                        persistentStateRequired: r.persistentStateRequired || s.persistentStateRequired,
                        videoRobustness: r.videoRobustness || s.videoRobustness,
                        audioRobustness: r.audioRobustness || s.audioRobustness,
                        serverCertificate: r.serverCertificate || s.serverCertificate,
                        serverCertificateUri: r.serverCertificateUri || s.serverCertificateUri,
                        initData: i,
                        keyIds: o,
                      }));
                    break;
                  } else zl(r) ? n.push(r) : zl(s) && n.push(s);
              }
              return n;
            }
            function Ch(e) {
              return e ? !!e.match(/^com\.(microsoft|chromecast)\.playready/) : !1;
            }
            function Fa(e) {
              return e ? !!e.match(/^com\.apple\.fps/) : !1;
            }
            function zl(e) {
              return (e = e.licenseServerUri) ? e.startsWith("data:application/json;base64,") : !1;
            }
            function Mh(e, t, n, r) {
              return (
                (r = []
                  .concat(Y(new Set(r)))
                  .sort()
                  .join("#")),
                e + "#" + t + "#" + n + "#" + r
              );
            }
            var Xl = new xt(function () {
                return Tr(new Uint8Array([0]));
              }),
              fo = new Map();
            function H(e, t, n) {
              var r = At.apply(3, arguments);
              ((this.severity = e),
                (this.category = t),
                (this.code = n),
                (this.data = r),
                (this.handled = !1),
                (this.message = "Shaka Error " + this.code));
              try {
                throw Error(this.message || "Shaka Error");
              } catch (i) {
                this.stack = i.stack;
              }
            }
            ((H.prototype.toString = function () {
              return "shaka.util.Error " + JSON.stringify(this, null, "  ");
            }),
              fe("shaka.util.Error", H),
              (H.Severity = { RECOVERABLE: 1, CRITICAL: 2 }),
              (H.Category = {
                NETWORK: 1,
                TEXT: 2,
                MEDIA: 3,
                MANIFEST: 4,
                STREAMING: 5,
                DRM: 6,
                PLAYER: 7,
                CAST: 8,
                STORAGE: 9,
                ADS: 10,
              }),
              (H.Code = {
                UNSUPPORTED_SCHEME: 1e3,
                BAD_HTTP_STATUS: 1001,
                HTTP_ERROR: 1002,
                TIMEOUT: 1003,
                MALFORMED_DATA_URI: 1004,
                REQUEST_FILTER_ERROR: 1006,
                RESPONSE_FILTER_ERROR: 1007,
                MALFORMED_TEST_URI: 1008,
                UNEXPECTED_TEST_REQUEST: 1009,
                ATTEMPTS_EXHAUSTED: 1010,
                SEGMENT_MISSING: 1011,
                INVALID_TEXT_HEADER: 2e3,
                INVALID_TEXT_CUE: 2001,
                UNABLE_TO_DETECT_ENCODING: 2003,
                BAD_ENCODING: 2004,
                INVALID_XML: 2005,
                INVALID_MP4_TTML: 2007,
                INVALID_MP4_VTT: 2008,
                UNABLE_TO_EXTRACT_CUE_START_TIME: 2009,
                INVALID_MP4_CEA: 2010,
                TEXT_COULD_NOT_GUESS_MIME_TYPE: 2011,
                CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS: 2012,
                TEXT_ONLY_WEBVTT_SRC_EQUALS: 2013,
                MISSING_TEXT_PLUGIN: 2014,
                UNSUPPORTED_EXTERNAL_THUMBNAILS_URI: 2017,
                BUFFER_READ_OUT_OF_BOUNDS: 3e3,
                JS_INTEGER_OVERFLOW: 3001,
                EBML_OVERFLOW: 3002,
                EBML_BAD_FLOATING_POINT_SIZE: 3003,
                MP4_SIDX_WRONG_BOX_TYPE: 3004,
                MP4_SIDX_INVALID_TIMESCALE: 3005,
                MP4_SIDX_TYPE_NOT_SUPPORTED: 3006,
                WEBM_CUES_ELEMENT_MISSING: 3007,
                WEBM_EBML_HEADER_ELEMENT_MISSING: 3008,
                WEBM_SEGMENT_ELEMENT_MISSING: 3009,
                WEBM_INFO_ELEMENT_MISSING: 3010,
                WEBM_DURATION_ELEMENT_MISSING: 3011,
                WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING: 3012,
                WEBM_CUE_TIME_ELEMENT_MISSING: 3013,
                MEDIA_SOURCE_OPERATION_FAILED: 3014,
                MEDIA_SOURCE_OPERATION_THREW: 3015,
                VIDEO_ERROR: 3016,
                QUOTA_EXCEEDED_ERROR: 3017,
                TRANSMUXING_FAILED: 3018,
                CONTENT_TRANSFORMATION_FAILED: 3019,
                MSS_MISSING_DATA_FOR_TRANSMUXING: 3020,
                MSS_TRANSMUXING_FAILED: 3022,
                TRANSMUXING_NO_VIDEO_DATA: 3023,
                STREAMING_NOT_ALLOWED: 3024,
                UNABLE_TO_GUESS_MANIFEST_TYPE: 4e3,
                DASH_INVALID_XML: 4001,
                DASH_NO_SEGMENT_INFO: 4002,
                DASH_EMPTY_ADAPTATION_SET: 4003,
                DASH_EMPTY_PERIOD: 4004,
                DASH_WEBM_MISSING_INIT: 4005,
                DASH_UNSUPPORTED_CONTAINER: 4006,
                DASH_PSSH_BAD_ENCODING: 4007,
                DASH_NO_COMMON_KEY_SYSTEM: 4008,
                DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED: 4009,
                DASH_CONFLICTING_KEY_IDS: 4010,
                RESTRICTIONS_CANNOT_BE_MET: 4012,
                HLS_PLAYLIST_HEADER_MISSING: 4015,
                INVALID_HLS_TAG: 4016,
                HLS_INVALID_PLAYLIST_HIERARCHY: 4017,
                DASH_DUPLICATE_REPRESENTATION_ID: 4018,
                HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND: 4020,
                HLS_REQUIRED_ATTRIBUTE_MISSING: 4023,
                HLS_REQUIRED_TAG_MISSING: 4024,
                HLS_COULD_NOT_GUESS_CODECS: 4025,
                HLS_KEYFORMATS_NOT_SUPPORTED: 4026,
                DASH_UNSUPPORTED_XLINK_ACTUATE: 4027,
                DASH_XLINK_DEPTH_LIMIT: 4028,
                CONTENT_UNSUPPORTED_BY_BROWSER: 4032,
                CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM: 4033,
                NO_VARIANTS: 4036,
                PERIOD_FLATTENING_FAILED: 4037,
                INCONSISTENT_DRM_ACROSS_PERIODS: 4038,
                HLS_VARIABLE_NOT_FOUND: 4039,
                HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED: 4040,
                HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED: 4041,
                NO_WEB_CRYPTO_API: 4042,
                CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM: 4045,
                MSS_INVALID_XML: 4046,
                MSS_LIVE_CONTENT_NOT_SUPPORTED: 4047,
                AES_128_INVALID_IV_LENGTH: 4048,
                AES_128_INVALID_KEY_LENGTH: 4049,
                DASH_CONFLICTING_AES_128: 4050,
                DASH_UNSUPPORTED_AES_128: 4051,
                DASH_INVALID_PATCH: 4052,
                HLS_EMPTY_MEDIA_PLAYLIST: 4053,
                DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED: 4054,
                CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM: 4055,
                STREAMING_ENGINE_STARTUP_INVALID_STATE: 5006,
                NO_RECOGNIZED_KEY_SYSTEMS: 6e3,
                REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE: 6001,
                FAILED_TO_CREATE_CDM: 6002,
                FAILED_TO_ATTACH_TO_VIDEO: 6003,
                INVALID_SERVER_CERTIFICATE: 6004,
                FAILED_TO_CREATE_SESSION: 6005,
                FAILED_TO_GENERATE_LICENSE_REQUEST: 6006,
                LICENSE_REQUEST_FAILED: 6007,
                LICENSE_RESPONSE_REJECTED: 6008,
                ENCRYPTED_CONTENT_WITHOUT_DRM_INFO: 6010,
                NO_LICENSE_SERVER_GIVEN: 6012,
                OFFLINE_SESSION_REMOVED: 6013,
                EXPIRED: 6014,
                SERVER_CERTIFICATE_REQUIRED: 6015,
                INIT_DATA_TRANSFORM_ERROR: 6016,
                SERVER_CERTIFICATE_REQUEST_FAILED: 6017,
                MIN_HDCP_VERSION_NOT_MATCH: 6018,
                ERROR_CHECKING_HDCP_VERSION: 6019,
                MISSING_EME_SUPPORT: 6020,
                LOAD_INTERRUPTED: 7e3,
                OPERATION_ABORTED: 7001,
                NO_VIDEO_ELEMENT: 7002,
                OBJECT_DESTROYED: 7003,
                CONTENT_NOT_LOADED: 7004,
                SRC_EQUALS_PRELOAD_NOT_SUPPORTED: 7005,
                PRELOAD_DESTROYED: 7006,
                QUEUE_INDEX_OUT_OF_BOUNDS: 7007,
                CAST_API_UNAVAILABLE: 8e3,
                NO_CAST_RECEIVERS: 8001,
                ALREADY_CASTING: 8002,
                UNEXPECTED_CAST_ERROR: 8003,
                CAST_CANCELED_BY_USER: 8004,
                CAST_CONNECTION_TIMED_OUT: 8005,
                CAST_RECEIVER_APP_UNAVAILABLE: 8006,
                STORAGE_NOT_SUPPORTED: 9e3,
                INDEXED_DB_ERROR: 9001,
                DEPRECATED_OPERATION_ABORTED: 9002,
                REQUESTED_ITEM_NOT_FOUND: 9003,
                MALFORMED_OFFLINE_URI: 9004,
                CANNOT_STORE_LIVE_OFFLINE: 9005,
                NO_INIT_DATA_FOR_OFFLINE: 9007,
                LOCAL_PLAYER_INSTANCE_REQUIRED: 9008,
                NEW_KEY_OPERATION_NOT_SUPPORTED: 9011,
                KEY_NOT_FOUND: 9012,
                MISSING_STORAGE_CELL: 9013,
                STORAGE_LIMIT_REACHED: 9014,
                DOWNLOAD_SIZE_CALLBACK_ERROR: 9015,
                MODIFY_OPERATION_NOT_SUPPORTED: 9016,
                INDEXED_DB_INIT_TIMED_OUT: 9017,
                CS_IMA_SDK_MISSING: 1e4,
                CS_AD_MANAGER_NOT_INITIALIZED: 10001,
                SS_IMA_SDK_MISSING: 10002,
                SS_AD_MANAGER_NOT_INITIALIZED: 10003,
                CURRENT_DAI_REQUEST_NOT_FINISHED: 10004,
                MT_AD_MANAGER_NOT_INITIALIZED: 10005,
                INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED: 10006,
                VAST_INVALID_XML: 10007,
              }));
            function Cs() {}
            function St(e) {
              if (!e) return "";
              if (
                ((e = De(e)),
                e[0] == 239 && e[1] == 187 && e[2] == 191 && (e = e.subarray(3)),
                g.TextDecoder && !Be().xh())
              )
                return (
                  (e = new TextDecoder().decode(e)),
                  e.includes("") &&
                    An(
                      'Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!',
                    ),
                  e
                );
              for (var t = "", n = 0; n < e.length; ++n) {
                var r = 65533;
                if (
                  ((e[n] & 128) == 0
                    ? (r = e[n])
                    : e.length >= n + 2 && (e[n] & 224) == 192 && (e[n + 1] & 192) == 128
                      ? ((r = ((e[n] & 31) << 6) | (e[n + 1] & 63)), (n += 1))
                      : e.length >= n + 3 &&
                          (e[n] & 240) == 224 &&
                          (e[n + 1] & 192) == 128 &&
                          (e[n + 2] & 192) == 128
                        ? ((r = ((e[n] & 15) << 12) | ((e[n + 1] & 63) << 6) | (e[n + 2] & 63)), (n += 2))
                        : e.length >= n + 4 &&
                          (e[n] & 241) == 240 &&
                          (e[n + 1] & 192) == 128 &&
                          (e[n + 2] & 192) == 128 &&
                          (e[n + 3] & 192) == 128 &&
                          ((r =
                            ((e[n] & 7) << 18) |
                            ((e[n + 1] & 63) << 12) |
                            ((e[n + 2] & 63) << 6) |
                            (e[n + 3] & 63)),
                          (n += 3)),
                  r <= 65535)
                )
                  t += String.fromCharCode(r);
                else {
                  r -= 65536;
                  var i = r & 1023;
                  ((t += String.fromCharCode(55296 + (r >> 10))), (t += String.fromCharCode(56320 + i)));
                }
              }
              return t;
            }
            function Yi(e, t, n) {
              if (!e) return "";
              if (!n && e.byteLength % 2 != 0) throw new H(2, 2, 2004);
              n = Math.floor(e.byteLength / 2);
              var r = new Uint16Array(n);
              e = jn(e);
              for (var i = 0; i < n; i++) r[i] = e.getUint16(i * 2, t);
              return Wl.value()(r);
            }
            function ei(e) {
              function t(r) {
                return n.byteLength <= r || (n[r] >= 9 && n[r] <= 126);
              }
              if (!e) return "";
              var n = De(e);
              if (n[0] == 239 && n[1] == 187 && n[2] == 191) return St(n);
              if (n[0] == 254 && n[1] == 255) return Yi(n.subarray(2), !1);
              if (n[0] == 255 && n[1] == 254) return Yi(n.subarray(2), !0);
              if (n[0] == 0 && n[2] == 0) return Yi(e, !1);
              if (n[1] == 0 && n[3] == 0) return Yi(e, !0);
              if (t(0) && t(1) && t(2) && t(3)) return St(e);
              throw new H(2, 2, 2003);
            }
            function Or(e) {
              if (g.TextEncoder && !Be().xh()) {
                var t = new TextEncoder();
                return Tr(t.encode(e));
              }
              ((e = encodeURIComponent(e)), (e = unescape(e)), (t = new Uint8Array(e.length)));
              for (var n = 0; n < e.length; n++) t[n] = e[n].charCodeAt(0);
              return Tr(t);
            }
            function Rh(e, t) {
              for (var n = new ArrayBuffer(e.length * 2), r = new DataView(n), i = 0; i < e.length; ++i)
                r.setUint16(i * 2, e.charCodeAt(i), t);
              return n;
            }
            function kn(e) {
              var t = {
                  "&amp;": "&",
                  "&lt;": "<",
                  "&gt;": ">",
                  "&quot;": '"',
                  "&apos;": "'",
                  "&nbsp;": "",
                  "&lrm;": "",
                  "&rlm;": "",
                },
                n = /&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,
                r = RegExp(n.source);
              return e && r.test(e)
                ? e.replace(n, function (i) {
                    return i[1] == "#"
                      ? ((i =
                          i[2] == "x" || i[2] == "X"
                            ? parseInt(i.substring(3), 16)
                            : parseInt(i.substring(2), 10)),
                        i >= 0 && i <= 1114111 ? String.fromCodePoint(i) : "")
                      : t[i] || "'";
                  })
                : e || "";
            }
            (fe("shaka.util.StringUtils", Cs),
              (Cs.resetFromCharCode = function () {
                Wl.g = void 0;
              }),
              (Cs.toUTF16 = Rh),
              (Cs.toUTF8 = Or),
              (Cs.fromBytesAutoDetect = ei),
              (Cs.fromUTF16 = Yi),
              (Cs.fromUTF8 = St));
            var Wl = new xt(function () {
              function e(n) {
                try {
                  var r = new Uint8Array(n);
                  return String.fromCharCode.apply(null, r).length > 0;
                } catch (i) {
                  return !1;
                }
              }
              for (var t = { Pc: 65536 }; t.Pc > 0; t = { Pc: t.Pc }, t.Pc /= 2)
                if (e(t.Pc))
                  return (function (n) {
                    return function (r) {
                      for (var i = "", s = 0; s < r.length; s += n.Pc)
                        i += String.fromCharCode.apply(null, r.subarray(s, s + n.Pc));
                      return i;
                    };
                  })(t);
              return null;
            });
            function dn() {}
            function Kl(e) {
              return (
                (e = De(e)),
                Uint8Array.prototype.toBase64
                  ? e.toBase64({ alphabet: "base64", omitPadding: !1 })
                  : ((e = Wl.value()(e)), btoa(e))
              );
            }
            function hi(e, t) {
              return (
                (t = t == null ? !0 : t),
                Uint8Array.prototype.toBase64
                  ? De(e).toBase64({ alphabet: "base64url", omitPadding: !t })
                  : ((e = Kl(e).replace(/\+/g, "-").replace(/\//g, "_")), t ? e : e.replace(/[=]*$/, ""))
              );
            }
            function Sr(e) {
              if (!("fromBase64" in Uint8Array)) {
                e = g.atob(e.replace(/-/g, "+").replace(/_/g, "/"));
                for (var t = new Uint8Array(e.length), n = 0; n < e.length; ++n) t[n] = e.charCodeAt(n);
                return t;
              }
              return (
                (e = e.replace(/\s+/g, "")),
                Uint8Array.fromBase64(e, { alphabet: /[-_]/.test(e) ? "base64url" : "base64" })
              );
            }
            function Ms(e) {
              if (!("fromHex" in Uint8Array)) {
                for (var t = e.length / 2, n = new Uint8Array(t), r = 0; r < t; r++)
                  n[r] = g.parseInt(e.substr(r * 2, 2), 16);
                return n;
              }
              return Uint8Array.fromHex(e);
            }
            function pi(e) {
              var t = De(e);
              if (!Uint8Array.prototype.toHex) {
                ((e = ""), (t = x(t)));
                for (var n = t.next(); !n.done; n = t.next())
                  ((n = n.value), (n = n.toString(16)), n.length == 1 && (n = "0" + n), (e += n));
                return e;
              }
              return t.toHex();
            }
            function Nt() {
              for (var e = At.apply(0, arguments), t = 0, n = 0; n < e.length; ++n) t += e[n].byteLength;
              t = new Uint8Array(t);
              for (var r = (n = 0); r < e.length; ++r) {
                var i = e[r];
                (ArrayBuffer.isView(i) && i.BYTES_PER_ELEMENT === 1 ? t.set(i, n) : t.set(De(i), n),
                  (n += i.byteLength));
              }
              return t;
            }
            (fe("shaka.util.Uint8ArrayUtils", dn),
              (dn.concat = Nt),
              (dn.toHex = pi),
              (dn.fromHex = Ms),
              (dn.fromBase64 = Sr),
              (dn.toBase64 = hi),
              (dn.toStandardBase64 = Kl));
            function qt(e, t, n) {
              if (((n = n === void 0 ? "" : n), t.length == 0)) return e;
              if (e.length == 1 && t.length == 1) {
                var r = new Pt(e[0]);
                return ((t = new Pt(t[0])), (t = r.resolve(t)), n && Is(t, n), [t.toString()]);
              }
              ((t = t.map(function (u) {
                return new Pt(u);
              })),
                (r = []),
                (e = x(e)));
              for (var i = e.next(); !i.done; i = e.next()) {
                i = new Pt(i.value);
                for (var s = x(t), o = s.next(); !o.done; o = s.next())
                  ((o = i.resolve(o.value)), n && Is(o, n), r.push(o.toString()));
              }
              return r;
            }
            function gi(e, t, n, r, i) {
              return (
                (t = {
                  keySystem: e,
                  encryptionScheme: t,
                  licenseServerUri: "",
                  distinctiveIdentifierRequired: !1,
                  persistentStateRequired: !1,
                  audioRobustness: "",
                  videoRobustness: "",
                  serverCertificate: null,
                  serverCertificateUri: "",
                  sessionType: "",
                  initData: n || [],
                  keyIds: new Set(),
                  mediaTypes: i,
                }),
                r && (t.keySystemUris = new Set([r])),
                !n &&
                  Fa(e) &&
                  t.initData.push({ initDataType: "sinf", initData: new Uint8Array(0), keyId: null }),
                t
              );
            }
            function Dv(e, t) {
              t = t === void 0 ? "cenc" : t;
              var n = [],
                r = [],
                i = [];
              (e.forEach(function (o, u) {
                var l = u;
                l.length != 22 && (l = hi(Ms(u), !1));
                var p = o;
                (p.length != 22 && (p = hi(Ms(o), !1)),
                  (o = { kty: "oct", kid: l, k: p }),
                  n.push(o),
                  r.push(o.kid),
                  i.push(u));
              }),
                (e = JSON.stringify({ keys: n })));
              var s = JSON.stringify({ kids: r });
              return (
                (s = [{ initData: De(Or(s)), initDataType: "keyids" }]),
                {
                  keySystem: "org.w3.clearkey",
                  encryptionScheme: t,
                  licenseServerUri: "data:application/json;base64," + g.btoa(e),
                  distinctiveIdentifierRequired: !1,
                  persistentStateRequired: !1,
                  audioRobustness: "",
                  videoRobustness: "",
                  serverCertificate: null,
                  serverCertificateUri: "",
                  sessionType: "",
                  initData: s,
                  keyIds: new Set(i),
                }
              );
            }
            function ho(e, t) {
              if (t.length == 1) return t[0];
              if (((e = Bn(e, t)), e != null)) return e;
              throw new H(2, 4, 4025, t);
            }
            function Bn(e, t) {
              var n = bv.get(e);
              n = x(n);
              for (var r = n.next(); !r.done; r = n.next()) {
                r = r.value;
                for (var i = x(t), s = i.next(); !s.done; s = i.next())
                  if (((s = s.value), r.test(s.trim()))) return s.trim();
              }
              return e == Fe ? "" : null;
            }
            function kh(e, t) {
              var n = [];
              ((e = bv.get(e)), (e = x(e)));
              for (var r = e.next(); !r.done; r = e.next()) {
                r = r.value;
                for (var i = x(t), s = i.next(); !s.done; s = i.next())
                  ((s = s.value), r.test(s.trim()) && n.push(s.trim()));
              }
              return n;
            }
            var Fe = "text",
              Ot = { wa: "video", aa: "audio", Na: Fe, Yf: "image", ul: "application" },
              Lv = 1 / 15,
              bv = new Map()
                .set("audio", [
                  /^vorbis$/,
                  /^Opus$/,
                  /^opus$/,
                  /^fLaC$/,
                  /^flac$/,
                  /^mp4a/,
                  /^[ae]c-3$/,
                  /^ac-4/,
                  /^dts[cex]$/,
                  /^iamf/,
                  /^mhm[12]/,
                  /^ac3$/,
                  /^eac3$/,
                  /^apac$/,
                ])
                .set("video", [
                  /^avc/,
                  /^hev/,
                  /^hvc/,
                  /^vvc/,
                  /^vvi/,
                  /^vp0?[89]/,
                  /^av01/,
                  /^dvh/,
                  /^dva/,
                  /^dav/,
                ])
                .set("text", [/^vtt$/, /^wvtt/, /^stpp/]);
            function Va(e, t, n, r) {
              ((this.g = null), (this.l = e), (this.i = t), (this.m = n), (this.o = r), (this.j = !1));
              e: {
                if (
                  (typeof libDPIModule > "u" && je("Could not find LCEVC Library dependencies on this page"),
                  typeof LCEVCdec < "u")
                )
                  this.h = LCEVCdec;
                else if (typeof LcevcDil < "u")
                  ((this.h = LcevcDil),
                    (this.j = !0),
                    qe("LcevcDil", "lcevc_dil.js is deprecated, please use lcevc_dec.js instead"));
                else {
                  (je("Could not find LCEVC Library on this page"), (e = !1));
                  break e;
                }
                typeof this.h.SupportObject > "u"
                  ? (je("Could not find LCEVC Library on this page"), (e = !1))
                  : (this.h.SupportObject.SupportStatus || je(this.h.SupportObject.SupportError),
                    (e =
                      typeof this.h < "u" &&
                      typeof libDPIModule < "u" &&
                      this.i instanceof HTMLCanvasElement &&
                      this.h.SupportObject.SupportStatus));
              }
              e &&
                !this.g &&
                this.h.SupportObject.webGLSupport(this.i) &&
                (this.i.classList.remove("shaka-hidden"),
                (this.g = this.j
                  ? new this.h.LcevcDil(this.l, this.i, this.m)
                  : new this.h.LCEVCdec(this.l, this.i, this.m)));
            }
            function $l(e, t, n, r) {
              r.type !== "video" ||
                (e.o && !r.baseOriginalId) ||
                (e.g && e.g.appendBuffer(t, "video", r.id, -n, !e.o));
            }
            function Nv(e) {
              e.g && e.i.classList.add("shaka-hidden");
            }
            Va.prototype.release = function () {
              this.g && (this.g.close(), (this.g = null));
            };
            function Ov(e) {
              return e && typeof LCEVCdec < "u" ? e.codecs == "lvc1" : !1;
            }
            (fe("shaka.lcevc.Dec", Va), (Va.prototype.release = Va.prototype.release));
            function Ha() {}
            function Rs(e, t) {
              po.set(e, t);
            }
            function sC() {
              var e = {};
              if ((Be(), oi()))
                for (var t = x(po.keys()), n = t.next(); !n.done; n = t.next()) e[n.value] = !0;
              for (
                t = x([
                  "application/dash+xml",
                  "application/x-mpegurl",
                  "application/vnd.apple.mpegurl",
                  "application/vnd.ms-sstr+xml",
                ]),
                  n = t.next();
                !n.done;
                n = t.next()
              )
                ((n = n.value), (e[n] = oi() ? po.has(n) : Hs().canPlayType(n) != ""));
              return e;
            }
            function Uv(e, t) {
              if (t) {
                var n = po.get(t.toLowerCase());
                if (n) return n;
              }
              throw new H(2, 4, 4e3, e, t);
            }
            (fe("shaka.media.ManifestParser", Ha),
              (Ha.unregisterParserByMime = function (e) {
                po.delete(e);
              }),
              (Ha.registerParserByMime = Rs),
              (Ha.registerParserByExtension = function () {
                qe(
                  "ManifestParser.registerParserByExtension",
                  "Please use an ManifestParser with registerParserByMime function.",
                );
              }),
              (Ha.AccessibilityPurpose = {
                Cm: "visually impaired",
                Nl: "hard of hearing",
                jm: "spoken subtitles",
              }));
            var po = new Map();
            function Ga() {}
            ((Ga.prototype.extract = function () {}),
              (Ga.prototype.decode = function () {
                return [];
              }),
              (Ga.prototype.clear = function () {}),
              (Ga.prototype.getStreams = function () {
                return [];
              }));
            function _h() {}
            ((_h.prototype.init = function () {}),
              (_h.prototype.parse = function () {
                return [];
              }));
            function jv() {}
            ((h = jv.prototype),
              (h.init = function () {}),
              (h.Af = function () {}),
              (h.Pd = function () {}),
              (h.remove = function () {}),
              (h.Zf = function () {}),
              fe("shaka.media.IClosedCaptionParser", jv));
            function $r(e) {
              ((this.h = new Map()),
                (this.i = 0),
                (this.j = new _h()),
                (e = Bv(e.toLowerCase())) && (this.j = e()),
                (this.g = new Ga()),
                (e = ks) && ((this.g = e()), this.h.set(this.i, this.g)));
            }
            ((h = $r.prototype),
              (h.init = function (e, t, n) {
                if (((t = t === void 0 ? !1 : t), (n = n === void 0 ? -1 : n), n != -1 && this.i != n)) {
                  t = n;
                  var r = this.h.get(t);
                  (this.h.set(this.i, this.g),
                    r ? (this.g = r) : ((r = ks) && (this.g = r()), this.h.set(t, this.g)));
                } else t || this.Pd();
                (this.j.init(e), n != -1 && (this.i = n));
              }),
              (h.Af = function (e) {
                ((e = this.j.parse(e)), (e = x(e)));
                for (var t = e.next(); !t.done; t = e.next()) {
                  t = t.value;
                  var n = De(t.packet);
                  n.length > 0 && this.g.extract(n, t.pts);
                }
                return this.g.decode();
              }),
              (h.Pd = function () {
                this.g.clear();
              }),
              (h.remove = function (e) {
                ((e = e === void 0 ? [] : e), (e = new Set(e)));
                for (var t = x(this.h.keys()), n = t.next(); !n.done; n = t.next())
                  if (((n = n.value), !e.has(n))) {
                    var r = this.h.get(n);
                    (r && r.clear(), this.h.delete(n));
                  }
              }),
              (h.Zf = function () {
                return this.g.getStreams();
              }));
            function Ph(e, t) {
              Dh.set(e, t);
            }
            function Bv(e) {
              return Dh.get(e);
            }
            (fe("shaka.media.ClosedCaptionParser", $r),
              ($r.findDecoder = function () {
                return ks;
              }),
              ($r.unregisterDecoder = function () {
                ks = null;
              }),
              ($r.registerDecoder = function (e) {
                ks = e;
              }),
              ($r.findParser = Bv),
              ($r.unregisterParser = function (e) {
                Dh.delete(e);
              }),
              ($r.registerParser = Ph));
            var Dh = new Map(),
              ks = null;
            function _s() {
              ((this.id = ""),
                (this.regionAnchorY = this.regionAnchorX = this.viewportAnchorY = this.viewportAnchorX = 0),
                (this.height = this.width = 100),
                (this.viewportAnchorUnits = this.widthUnits = this.heightUnits = Jn),
                (this.scroll = Fv));
            }
            fe("shaka.text.CueRegion", _s);
            var Jn = 1;
            _s.units = { PX: 0, PERCENTAGE: Jn, LINES: 2 };
            var Fv = "";
            _s.scrollMode = { NONE: Fv, UP: "up" };
            function go(e) {
              ((this.h = e || ""), (this.g = 0));
            }
            function mo(e) {
              qi(e, /[ \t]+/gm);
            }
            function qi(e, t) {
              return (
                (t.lastIndex = e.g),
                (t = t.exec(e.h)),
                (t = t == null ? null : { position: t.index, length: t[0].length, results: t }),
                e.g == e.h.length || t == null || t.position != e.g ? null : ((e.g += t.length), t.results)
              );
            }
            function Ps(e) {
              return e.g == e.h.length ? null : (e = qi(e, /[^ \t\n]*/gm)) ? e[0] : null;
            }
            function za(e) {
              if (((e = qi(e, oC)), e == null)) return null;
              var t = Number(e[2]),
                n = Number(e[3]);
              return t > 59 || n > 59
                ? null
                : (Number(e[6]) || 0) / 1e3 + n + t * 60 + (Number(e[1]) || 0) * 3600;
            }
            function yo(e) {
              return e ? za(new go(e)) : null;
            }
            var oC = /(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;
            function Yl() {}
            function Ur(e) {
              function t(r) {
                switch (typeof r) {
                  case "undefined":
                  case "boolean":
                  case "number":
                  case "string":
                  case "symbol":
                  case "function":
                    return r;
                  default:
                    if (!r || ArrayBuffer.isView(r)) return r;
                    if (n.has(r)) return null;
                    var i = Array.isArray(r);
                    if (r.constructor != Object && !i) return null;
                    n.add(r);
                    var s = i ? [] : {},
                      o;
                    for (o in r) s[o] = t(r[o]);
                    return (i && (s.length = r.length), s);
                }
              }
              var n = new WeakSet();
              return t(e);
            }
            function Ji(e) {
              var t = {},
                n;
              for (n in e) t[n] = e[n];
              return t;
            }
            function ql(e) {
              if (Array.isArray(e)) {
                for (var t = [], n = 0; n < e.length; n++) {
                  var r = n.toString(),
                    i = e[n];
                  i !== void 0 && (i = ql(i)) && t.push(r + ":" + i);
                }
                e = "[" + t.join(",") + "]";
              } else if (typeof e == "function") e = "";
              else if (e instanceof Object) {
                for (n = Object.keys(e), n.sort(), t = [], n = x(n), r = n.next(); !r.done; r = n.next())
                  ((i = r.value),
                    (r = JSON.stringify(i)),
                    (i = e[i]),
                    i !== void 0 && (i = ql(i)) && t.push(r + ":" + i));
                e = "{" + t.join(",") + "}";
              } else e = JSON.stringify(e);
              return e;
            }
            (fe("shaka.util.ObjectUtils", Yl),
              (Yl.alphabeticalKeyOrderStringify = ql),
              (Yl.shallowCloneObject = Ji),
              (Yl.cloneObject = Ur));
            /*
 @license
 tXml
 Copyright 2015 Tobias Nickel
 SPDX-License-Identifier: MIT
*/ function Xa(e, t) {
              var n = n === void 0 ? !1 : n;
              return ((e = ei(e)), Ds(e, t, n));
            }
            function Ds(e, t, n) {
              return (
                (e = aC(e, n === void 0 ? !1 : n)),
                !t && e.length
                  ? e[0]
                  : (e = e.find(function (r) {
                        return t.split(",").includes(r.tagName);
                      }))
                    ? e
                    : null
              );
            }
            function Lh(e) {
              return Nh.has(e) ? Nh.get(e) : "";
            }
            function aC(e, t) {
              function n(s, o) {
                o = o === void 0 ? !1 : o;
                for (var u = []; e[i]; )
                  if (e.charCodeAt(i) == 60) {
                    if (e.charCodeAt(i + 1) === 47) {
                      ((o = i + 2), (i = e.indexOf(">", i)), (o = e.substring(o, i)));
                      var l = o.indexOf(s);
                      if (l == -1) {
                        var p = s.indexOf(".");
                        p > 0 && (l = o.indexOf(s.substring(0, p)));
                      }
                      if (l == -1)
                        throw (
                          (s = e.substring(0, i).split("\n")),
                          Error(
                            "Unexpected close tag\nLine: " +
                              (s.length - 1) +
                              "\nColumn: " +
                              (s[s.length - 1].length + 1) +
                              "\nChar: " +
                              e[i],
                          )
                        );
                      i + 1 && (i += 1);
                      break;
                    } else if (e.charCodeAt(i + 1) === 33) {
                      if (e.charCodeAt(i + 2) == 45) {
                        for (
                          ;
                          i !== -1 &&
                          (e.charCodeAt(i) !== 62 ||
                            e.charCodeAt(i - 1) != 45 ||
                            e.charCodeAt(i - 2) != 45 ||
                            i == -1);
                        )
                          i = e.indexOf(">", i + 1);
                        i === -1 && (i = e.length);
                      } else if (
                        e.charCodeAt(i + 2) === 91 &&
                        e.charCodeAt(i + 8) === 91 &&
                        e.substr(i + 3, 5).toLowerCase() === "cdata"
                      ) {
                        ((l = e.indexOf("]]>", i)),
                          l == -1
                            ? (u.push(e.substr(i + 9)), (i = e.length))
                            : (u.push(e.substring(i + 9, l)), (i = l + 3)));
                        continue;
                      }
                      i++;
                      continue;
                    }
                    e: {
                      ((p = o), i++);
                      var m = r(),
                        y = {};
                      for (l = []; e.charCodeAt(i) !== 62 && e[i]; ) {
                        var v = e.charCodeAt(i);
                        if ((v > 64 && v < 91) || (v > 96 && v < 123)) {
                          v = r();
                          for (
                            var w = e.charCodeAt(i);
                            w &&
                            w !== 39 &&
                            w !== 34 &&
                            !((w > 64 && w < 91) || (w > 96 && w < 123)) &&
                            w !== 62;
                          )
                            (i++, (w = e.charCodeAt(i)));
                          var A = i + 1;
                          if (
                            ((i = e.indexOf(e[i], A)),
                            (A = (" " + e.slice(A, i)).slice(1)),
                            w === 39 || w === 34)
                          ) {
                            if (i === -1) {
                              if (((p = { tagName: m, attributes: y, children: l, parent: null }), t))
                                for (m = 0; m < l.length; m++) typeof l[m] != "string" && (l[m].parent = p);
                              l = p;
                              break e;
                            }
                          } else ((A = null), i--);
                          if (v.startsWith("xmlns:")) {
                            w = A;
                            var E = v.split(":")[1];
                            (Nh.set(w, E), Oh.set(E, w));
                          }
                          (m === "tt" && v === "xml:space" && A === "preserve" && (p = !0), (y[v] = A));
                        }
                        i++;
                      }
                      for (
                        e.charCodeAt(i - 1) !== 47 ? (i++, (l = n(m, p))) : i++,
                          p = { tagName: m, attributes: y, children: l, parent: null },
                          m = l.length,
                          y = 0;
                        y < m;
                        y++
                      )
                        ((v = l[y]),
                          typeof v != "string" ? t && (v.parent = p) : y == m - 1 && v == "\n" && l.pop());
                      l = p;
                    }
                    if ((u.push(l), typeof l == "string")) break;
                    l.tagName[0] === "?" && l.children && (u.push.apply(u, Y(l.children)), (l.children = []));
                  } else
                    ((l = i),
                      (i = e.indexOf("<", i) - 1),
                      i === -2 && (i = e.length),
                      (l = (" " + e.slice(l, i + 1)).slice(1)),
                      o
                        ? l.length > 0 && u.push(l)
                        : ((u.length && l.length == 1 && l[0] == "\n") || l.trim().length > 0) && u.push(l),
                      i++);
                return u;
              }
              function r() {
                for (var s = i; "\r\n	>/= ".indexOf(e[i]) === -1 && e[i]; ) i++;
                return (" " + e.slice(s, i)).slice(1);
              }
              var i = 0;
              return n("");
            }
            function Jl(e) {
              return typeof e == "string";
            }
            function Vv(e) {
              var t = [];
              if (!e.children) return [];
              e = x(e.children);
              for (var n = e.next(); !n.done; n = e.next())
                ((n = n.value), typeof n != "string" && t.push(n));
              return t;
            }
            function it(e, t) {
              var n = [];
              if (!e.children) return [];
              e = x(e.children);
              for (var r = e.next(); !r.done; r = e.next()) ((r = r.value), r.tagName === t && n.push(r));
              return n;
            }
            function Dt(e) {
              return typeof e == "string"
                ? kn(e)
                : ((e = e.children.reduce(function (t, n) {
                    return typeof n == "string" ? t + n : t;
                  }, "")),
                  e === "" ? null : kn(e));
            }
            function _n(e) {
              return Array.from(e.children).every(function (t) {
                return typeof t == "string";
              })
                ? ((e = Dt(e)) && (e = e.trim()), e)
                : null;
            }
            function Yr(e, t, n) {
              if (((n = n === void 0 ? [] : n), e.tagName === t && n.push(e), e.children)) {
                e = x(e.children);
                for (var r = e.next(); !r.done; r = e.next()) Yr(r.value, t, n);
              }
              return n;
            }
            function mt(e, t) {
              return ((e = it(e, t)), e.length != 1 ? null : e[0]);
            }
            function wr(e, t, n) {
              return ((e = Hv(e, t, n)), e.length != 1 ? null : e[0]);
            }
            function Le(e, t, n, r) {
              r = r === void 0 ? null : r;
              var i = null;
              return ((e = e.attributes[t]), e != null && (i = n(e)), i == null ? r : i);
            }
            function mi(e, t, n) {
              return ((t = Lh(t)), e.attributes[t + ":" + n] || null);
            }
            function Hv(e, t, n) {
              var r = Lh(t);
              if (((t = []), e.children))
                for (n = r ? r + ":" + n : n, e = x(e.children), r = e.next(); !r.done; r = e.next())
                  (r = r.value) && r.tagName === n && t.push(r);
              return t;
            }
            function ti(e, t, n) {
              t = x(t);
              for (var r = t.next(); !r.done; r = t.next()) if ((r = mi(e, r.value, n))) return r;
              return null;
            }
            function yi(e) {
              return e
                ? (/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e) && (e += "Z"),
                  (e = Date.parse(e)),
                  isNaN(e) ? null : e / 1e3)
                : null;
            }
            function ni(e) {
              return !e ||
                ((e = RegExp(
                  "^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$",
                  "i",
                ).exec(e)),
                !e)
                ? null
                : ((e =
                    31536e3 * Number(e[1] || null) +
                    2592e3 * Number(e[2] || null) +
                    86400 * Number(e[3] || null) +
                    3600 * Number(e[4] || null) +
                    60 * Number(e[5] || null) +
                    Number(e[6] || null)),
                  isFinite(e) ? e : null);
            }
            function Ql(e) {
              var t = /([0-9]+)-([0-9]+)/.exec(e);
              return !t || ((e = Number(t[1])), !isFinite(e))
                ? null
                : ((t = Number(t[2])), isFinite(t) ? { start: e, end: t } : null);
            }
            function sn(e) {
              return ((e = Number(e)), e % 1 === 0 ? e : null);
            }
            function ri(e) {
              return ((e = Number(e)), e % 1 === 0 && e > 0 ? e : null);
            }
            function on(e) {
              return ((e = Number(e)), e % 1 === 0 && e >= 0 ? e : null);
            }
            function Zl(e) {
              return ((e = Number(e)), isNaN(e) ? null : e);
            }
            function ec(e) {
              return e ? e.toLowerCase() === "true" : !1;
            }
            function uC(e) {
              var t,
                n = (t = e.match(/^(\d+)\/(\d+)$/)) ? Number(t[1]) / Number(t[2]) : Number(e);
              return isNaN(n) ? null : n;
            }
            function tc(e) {
              var t = [];
              ((e = kn(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/)), (e = x(e)));
              for (var n = e.next(); !n.done; n = e.next()) {
                n = n.value;
                var r = n.match(/^([\w]+)/);
                if (r) {
                  var i = n.match(/(@id='(.*?)')/),
                    s = n.match(/(@t='(\d+)')/),
                    o = n.match(/(@n='(\d+)')/),
                    u = n.match(/\[(\d+)\]/);
                  t.push({
                    name: r[0],
                    id: i ? i[0].match(/'(.*?)'/)[0].replace(/'/gm, "") : null,
                    t: s ? Number(s[0].match(/'(.*?)'/)[0].replace(/'/gm, "")) : null,
                    n: o ? Number(o[0].match(/'(.*?)'/)[0].replace(/'/gm, "")) : null,
                    position: u ? Number(u[1]) - 1 : null,
                    Dc: n.split("/@")[1] || null,
                  });
                } else n.startsWith("@") && t.length && (t[t.length - 1].Dc = n.slice(1));
              }
              return t;
            }
            function Gv(e, t) {
              var n = tc(t.attributes.sel || "");
              if (n.length) {
                var r = n[n.length - 1],
                  i = t.attributes.pos || null;
                ((n = r.position),
                  n == null && (r.t !== null && (n = zv(e, "t", r.t)), r.n !== null && (n = zv(e, "n", r.n))),
                  n === null
                    ? (n = i === "prepend" ? 0 : e.length)
                    : i === "prepend"
                      ? --n
                      : i === "after" && ++n,
                  (i = t.tagName),
                  (r = r.Dc) && e[n]
                    ? Xv(e[n], i, r, _n(t) || "")
                    : ((i !== "remove" && i !== "replace") || e.splice(n, 1),
                      (i !== "add" && i !== "replace") || e.splice.apply(e, [n, 0].concat(Y(t.children)))));
              }
            }
            function zv(e, t, n) {
              var r = 0;
              e = x(e);
              for (var i = e.next(); !i.done; i = e.next()) {
                if (Number(i.value.attributes[t]) === n) return r;
                r++;
              }
              return null;
            }
            function Xv(e, t, n, r) {
              t === "remove"
                ? delete e.attributes[n]
                : (t === "add" || t === "replace") && (e.attributes[n] = r);
            }
            function Wv(e) {
              var t = "",
                n = e.tagName.split(":");
              (n.length > 0 && ((t = n[0]), (t = Oh.has(t) ? Oh.get(t) : "")),
                (t = document.createElementNS(t, e.tagName)));
              for (var r in e.attributes) t.setAttribute(r, e.attributes[r]);
              for (e = x(e.children), r = e.next(); !r.done; r = e.next())
                ((r = r.value),
                  (n = void 0),
                  typeof r == "string" ? (n = new Text(r)) : (n = Wv(r)),
                  t.appendChild(n));
              return t;
            }
            function bh(e) {
              if (!e) return null;
              var t = { tagName: e.tagName, attributes: Ji(e.attributes), children: [], parent: null };
              e = x(e.children);
              for (var n = e.next(); !n.done; n = e.next())
                ((n = n.value), typeof n == "string" || ((n = bh(n)), (n.parent = t)), t.children.push(n));
              return t;
            }
            var Nh = new Map(),
              Oh = new Map();
            function pt(e, t, n) {
              ((this.startTime = e),
                (this.endTime = t),
                (this.payload = n),
                (this.region = new _s()),
                (this.position = null),
                (this.positionAlign = ic),
                (this.size = 0),
                (this.textAlign = ii),
                (this.direction = $a),
                (this.writingMode = Ls),
                (this.lineInterpretation = Ya),
                (this.line = null),
                (this.lineHeight = ""),
                (this.lineAlign = bs),
                (this.displayAlign = Ka),
                (this.fontSize = this.border = this.backgroundImage = this.backgroundColor = this.color = ""),
                (this.fontWeight = Zv),
                (this.fontStyle = Bh),
                (this.linePadding = this.letterSpacing = this.fontFamily = ""),
                (this.opacity = 1),
                (this.textCombineUpright = ""),
                (this.textDecoration = []),
                (this.textStrokeWidth = this.textStrokeColor = this.textShadow = ""),
                (this.wrapLine = !0),
                (this.id = ""),
                (this.nestedCues = []),
                (this.lineBreak = this.isContainer = !1),
                (this.rubyTag = null),
                (this.cellResolution = { columns: 32, rows: 15 }));
            }
            function Kv(e, t) {
              return ((e = new pt(e, t, "")), (e.lineBreak = !0), e);
            }
            pt.prototype.clone = function () {
              var e = new pt(0, 0, ""),
                t;
              for (t in this) ((e[t] = this[t]), Array.isArray(e[t]) && (e[t] = e[t].slice()));
              return e;
            };
            function nc(e, t) {
              if (
                e.payload != t.payload ||
                !(Math.abs(e.startTime - t.startTime) < 0.001 && Math.abs(e.endTime - t.endTime) < 0.001)
              )
                return !1;
              for (var n in e)
                if (n != "startTime" && n != "endTime" && n != "payload") {
                  if (n == "nestedCues") {
                    if (!$i(e.nestedCues, t.nestedCues, nc)) return !1;
                  } else if (n == "region" || n == "cellResolution") {
                    for (var r in e[n]) if (e[n][r] != t[n][r]) return !1;
                  } else if (Array.isArray(e[n])) {
                    if (!$i(e[n], t[n])) return !1;
                  } else if (e[n] != t[n]) return !1;
                }
              return !0;
            }
            function rc(e, t) {
              t = t === void 0 ? new Map() : t;
              var n = e.payload;
              if (n.includes("<")) {
                t.size === 0 && $v(t);
                var r = n;
                n = [];
                for (var i = -1, s = 0; s < r.length; s++)
                  r[s] === "<"
                    ? (i = s + 1)
                    : r[s] === ">" && i > 0 && ((i = r.substr(i, s - i)), i.match(cC) && n.push(i), (i = -1));
                for (n = x(n), s = n.next(); !s.done; s = n.next())
                  ((s = s.value), (r = r.replace("<" + s + ">", '<div time="' + s + '">')), (r += "</div>"));
                e: {
                  ((s = r), (i = []));
                  var o = -1;
                  ((n = ""), (r = !1));
                  for (var u = 0; u < s.length; u++)
                    if (s[u] === "/") {
                      var l = s.indexOf(">", u);
                      if (l === -1) {
                        n = s;
                        break e;
                      }
                      if ((l = s.substring(u + 1, l)) && l == "v") {
                        r = !0;
                        var p = null;
                        if ((i.length && (p = i[i.length - 1]), p)) {
                          if (p === l) n += "/" + l + ">";
                          else {
                            if (!p.startsWith("v")) {
                              n += s[u];
                              continue;
                            }
                            n += "/" + p + ">";
                          }
                          u += l.length + 1;
                        } else n += s[u];
                      } else n += s[u];
                    } else
                      (s[u] === "<"
                        ? ((o = u + 1), s[o] != "v" && (o = -1))
                        : s[u] === ">" && o > 0 && (i.push(s.substr(o, u - o)), (o = -1)),
                        (n += s[u]));
                  for (s = x(i), i = s.next(); !i.done; i = s.next())
                    ((i = i.value),
                      (o = i.replace(" ", ".voice-")),
                      (n = n.replace("<" + i + ">", "<" + o + ">")),
                      (n = n.replace("</" + i + ">", "</" + o + ">")),
                      r || (n += "</" + o + ">"));
                }
                ((n = lC(n)), (e.payload = ""), (r = "<span>" + n.replace(/\n/g, "<br />") + "</span>"));
                try {
                  var m = Ds(r, "span");
                } catch (y) {}
                if (m)
                  if (((m = m.children), m.length != 1 || m[0].tagName))
                    for (m = x(m), n = m.next(); !n.done; n = m.next()) Yv(n.value, e, t);
                  else e.payload = kn(n);
                else e.payload = kn(n);
              } else e.payload = kn(n);
            }
            function $v(e) {
              for (var t = x(Object.entries(Jv)), n = t.next(); !n.done; n = t.next()) {
                var r = x(n.value);
                ((n = r.next().value), (r = r.next().value));
                var i = new pt(0, 0, "");
                ((i.color = r), e.set("." + n, i));
              }
              for (t = x(Object.entries(Qv)), n = t.next(); !n.done; n = t.next())
                ((r = x(n.value)),
                  (n = r.next().value),
                  (r = r.next().value),
                  (i = new pt(0, 0, "")),
                  (i.backgroundColor = r),
                  e.set("." + n, i));
            }
            function lC(e) {
              var t = { "< ": "", " >": " &gt;" },
                n = /(< +>|<\s|\s>)/g,
                r = RegExp(n.source);
              return e && r.test(e)
                ? e.replace(n, function (i) {
                    return t[i] || "";
                  })
                : e || "";
            }
            function Yv(e, t, n) {
              var r = t.clone();
              if (
                ((r.nestedCues = []),
                (r.payload = ""),
                (r.rubyTag = ""),
                (r.line = null),
                (r.region = new _s()),
                (r.position = null),
                (r.size = 0),
                (r.textAlign = ii),
                e.tagName)
              )
                for (var i = x(e.tagName.split(/(?=[ .])+/g)), s = i.next(); !s.done; s = i.next()) {
                  var o = (s = s.value);
                  if (o.startsWith(".voice-")) {
                    var u = o.split("-").pop();
                    ((o = 'v[voice="' + u + '"]'), n.has(o) || (o = "v[voice=" + u + "]"));
                  }
                  switch (
                    (n.has(o) &&
                      ((u = r), (o = n.get(o))) &&
                      ((u.backgroundColor = Wa(o.backgroundColor, u.backgroundColor)),
                      (u.color = Wa(o.color, u.color)),
                      (u.fontFamily = Wa(o.fontFamily, u.fontFamily)),
                      (u.fontSize = Wa(o.fontSize, u.fontSize)),
                      (u.textShadow = Wa(o.textShadow, u.textShadow)),
                      (u.fontWeight = o.fontWeight),
                      (u.fontStyle = o.fontStyle),
                      (u.opacity = o.opacity),
                      (u.rubyTag = o.rubyTag),
                      (u.textCombineUpright = o.textCombineUpright),
                      (u.wrapLine = o.wrapLine)),
                    s)
                  ) {
                    case "br":
                      ((r = Kv(r.startTime, r.endTime)), t.nestedCues.push(r));
                      return;
                    case "b":
                      r.fontWeight = vo;
                      break;
                    case "i":
                      r.fontStyle = xo;
                      break;
                    case "u":
                      r.textDecoration.push(vi);
                      break;
                    case "font":
                      (s = e.attributes.color) && (r.color = s);
                      break;
                    case "div":
                      if (((s = e.attributes.time), !s)) break;
                      (s = yo(s)) && (r.startTime = s);
                      break;
                    case "ruby":
                    case "rp":
                    case "rt":
                      r.rubyTag = s;
                  }
                }
              if (((i = e.children), Jl(e) || (i.length == 1 && Jl(i[0]))))
                for (n = Dt(e).split("\n"), e = !0, n = x(n), i = n.next(); !i.done; i = n.next())
                  ((i = i.value),
                    e || ((e = Kv(r.startTime, r.endTime)), t.nestedCues.push(e)),
                    i.length > 0 && ((e = r.clone()), (e.payload = kn(i)), t.nestedCues.push(e)),
                    (e = !1));
              else
                for (t.nestedCues.push(r), t = x(i), e = t.next(); !e.done; e = t.next()) Yv(e.value, r, n);
            }
            function Wa(e, t) {
              return e && e.length > 0 ? e : t;
            }
            (fe("shaka.text.Cue", pt),
              (pt.parseCuePayload = rc),
              (pt.equal = nc),
              (pt.prototype.clone = pt.prototype.clone));
            var ic = "auto";
            pt.positionAlign = { LEFT: "line-left", RIGHT: "line-right", CENTER: "center", AUTO: ic };
            var ii = "center",
              Uh = { LEFT: "left", RIGHT: "right", CENTER: ii, START: "start", END: "end" };
            pt.textAlign = Uh;
            var Ka = "after",
              qv = { BEFORE: "before", CENTER: "center", AFTER: Ka };
            pt.displayAlign = qv;
            var $a = "ltr";
            pt.direction = { HORIZONTAL_LEFT_TO_RIGHT: $a, HORIZONTAL_RIGHT_TO_LEFT: "rtl" };
            var Ls = "horizontal-tb";
            pt.writingMode = {
              HORIZONTAL_TOP_TO_BOTTOM: Ls,
              VERTICAL_LEFT_TO_RIGHT: "vertical-lr",
              VERTICAL_RIGHT_TO_LEFT: "vertical-rl",
            };
            var Ya = 0;
            pt.lineInterpretation = { LINE_NUMBER: Ya, PERCENTAGE: 1 };
            var bs = "start",
              jh = { CENTER: "center", START: bs, END: "end" };
            pt.lineAlign = jh;
            var Jv = {
              white: "white",
              lime: "lime",
              cyan: "cyan",
              red: "red",
              yellow: "yellow",
              magenta: "magenta",
              blue: "blue",
              black: "black",
            };
            pt.defaultTextColor = Jv;
            var Qv = {
              bg_white: "white",
              bg_lime: "lime",
              bg_cyan: "cyan",
              bg_red: "red",
              bg_yellow: "yellow",
              bg_magenta: "magenta",
              bg_blue: "blue",
              bg_black: "black",
            };
            pt.defaultTextBackgroundColor = Qv;
            var Zv = 400,
              vo = 700;
            pt.fontWeight = { NORMAL: Zv, BOLD: vo };
            var Bh = "normal",
              xo = "italic",
              e0 = { NORMAL: Bh, ITALIC: xo, OBLIQUE: "oblique" };
            pt.fontStyle = e0;
            var vi = "underline";
            pt.textDecoration = { UNDERLINE: vi, LINE_THROUGH: "lineThrough", OVERLINE: "overline" };
            var cC = /(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;
            function Qi() {}
            Qi.prototype.destroy = function () {};
            function xi(e, t, n) {
              Fh.set(e.toLowerCase().split(";")[0] + "-" + n, { priority: n, Bf: t });
            }
            function To(e, t) {
              for (
                var n = e.toLowerCase().split(";")[0], r = x([t0, Hh, Vh, Zi]), i = r.next();
                !i.done;
                i = r.next()
              )
                if ((i = Fh.get(n + "-" + i.value))) {
                  var s = i.Bf(),
                    o = s.isSupported(e, t);
                  if ((s.destroy(), o)) return i.Bf;
                }
              return null;
            }
            (fe("shaka.transmuxer.TransmuxerEngine", Qi),
              (Qi.findTransmuxer = To),
              (Qi.unregisterTransmuxer = function (e, t) {
                Fh.delete(e.toLowerCase().split(";")[0] + "-" + t);
              }),
              (Qi.registerTransmuxer = xi),
              (Qi.prototype.destroy = Qi.prototype.destroy));
            var Fh = new Map(),
              Zi = 1,
              Vh = 2,
              Hh = 3,
              t0 = 4;
            Qi.PluginPriority = { FALLBACK: Zi, PREFERRED_SECONDARY: Vh, PREFERRED: Hh, APPLICATION: t0 };
            function Gh() {}
            function Rt(e, t) {
              var n = e;
              return (t && !Ti.includes(e) && (n += '; codecs="' + t + '"'), n);
            }
            function sc(e, t) {
              return (t && (e += '; codecs="' + t + '"'), e);
            }
            function zh(e, t, n) {
              var r = Rt(e, t);
              return (
                (t = sc(e, t)),
                To(t)
                  ? (e = To(t))
                    ? ((e = e()), (n = e.convertCodecs(n, t)), e.destroy())
                    : (n = t)
                  : (n = e != "video/mp2t" && n == "audio" ? r.replace("video", "audio") : r),
                n
              );
            }
            function qa(e) {
              return e.split(";")[0].split("/")[1];
            }
            function fn(e) {
              var t = n0(e);
              switch (((e = t[0].toLowerCase()), (t = t[1].toLowerCase()), !0)) {
                case e === "mp4a" && t === "69":
                case e === "mp4a" && t === "6b":
                case e === "mp4a" && t === "40.34":
                  return "mp3";
                case e === "mp4a" && t === "66":
                case e === "mp4a" && t === "67":
                case e === "mp4a" && t === "68":
                case e === "mp4a" && t === "40.2":
                case e === "mp4a" && t === "40.02":
                case e === "mp4a" && t === "40.5":
                case e === "mp4a" && t === "40.05":
                case e === "mp4a" && t === "40.29":
                case e === "mp4a" && t === "40.42":
                  return "aac";
                case e === "mp4a" && t === "a5":
                case e === "ac3":
                case e === "ac-3":
                  return "ac-3";
                case e === "mp4a" && t === "a6":
                case e === "eac3":
                case e === "ec-3":
                  return "ec-3";
                case e === "ac-4":
                  return "ac-4";
                case e === "mp4a" && t === "b2":
                  return "dtsx";
                case e === "mp4a" && t === "a9":
                  return "dtsc";
                case e === "vp09":
                case e === "vp9":
                  return "vp9";
                case e === "avc1":
                case e === "avc3":
                  return "avc";
                case e === "hvc1":
                case e === "hev1":
                  return "hevc";
                case e === "vvc1":
                case e === "vvi1":
                  return "vvc";
                case e === "dvh1":
                case e === "dvhe":
                  return t && t.startsWith("05") ? "dovi-p5" : "dovi-hevc";
                case e === "dvav":
                case e === "dva1":
                  return "dovi-avc";
                case e === "dav1":
                  return "dovi-av1";
                case e === "dvc1":
                case e === "dvi1":
                  return "dovi-vvc";
                case e === "lvc1":
                  return "lcevc";
              }
              return e;
            }
            function es(e) {
              var t = [];
              e = x(e.split(","));
              for (var n = e.next(); !n.done; n = e.next()) ((n = n0(n.value)), t.push(n[0]));
              return t.sort().join(",");
            }
            function Qn(e) {
              return e.split(";")[0];
            }
            function Fn(e) {
              return (
                (e = e.split(/ *; */)),
                e.shift(),
                (e = e.find(function (t) {
                  return t.startsWith("codecs=");
                }))
                  ? e.split("=")[1].replace(/^"|"$/g, "")
                  : ""
              );
            }
            function oc(e) {
              return e === "application/x-mpegurl" || e === "application/vnd.apple.mpegurl";
            }
            function n0(e) {
              e = e.split(".");
              var t = e[0];
              return (e.shift(), [t, e.join(".")]);
            }
            (fe("shaka.util.MimeUtils", Gh),
              (Gh.getFullTypeWithAllCodecs = sc),
              (Gh.getFullType = Rt),
              new Map()
                .set("codecs", "codecs")
                .set("frameRate", "framerate")
                .set("bandwidth", "bitrate")
                .set("width", "width")
                .set("height", "height")
                .set("channelsCount", "channels"));
            var Ti = ["audio/aac", "audio/ac3", "audio/ec3", "audio/mpeg"];
            function Si(e) {
              ((this.i = null),
                (this.l = e),
                (this.C = !1),
                (this.m = this.u = 0),
                (this.o = 1 / 0),
                (this.h = this.g = null),
                (this.F = ""),
                (this.B = function () {}),
                (this.j = new Map()));
            }
            function an(e, t) {
              Za.set(e, t);
            }
            function Ja(e) {
              return Za.get(e);
            }
            function Qa(e) {
              return Za.has(e) ? !0 : e == "application/cea-608" || e == "application/cea-708" ? !!ks : !1;
            }
            Si.prototype.destroy = function () {
              return ((this.l = this.i = null), this.j.clear(), Promise.resolve());
            };
            function dC(e, t, n, r, i) {
              var s, o, u, l, p, m, y;
              return j(function (v) {
                if (v.g == 1) return I(v, Promise.resolve(), 2);
                if (!e.i || !e.l) return v.return();
                if (n == null || r == null) return (e.i.parseInit(De(t)), v.return());
                for (
                  s = e.C ? n : e.u,
                    o = { periodStart: e.u, segmentStart: n, segmentEnd: r, vttOffset: s },
                    u = e.i.parseMedia(De(t), o, i, []),
                    l = x(u),
                    p = l.next();
                  !p.done;
                  p = l.next()
                )
                  ((m = p.value), e.B(m, i || null, o));
                ((y = u.filter(function (w) {
                  return w.startTime >= e.m && w.startTime < e.o;
                })),
                  e.l.append(y),
                  e.g == null && (e.g = Math.max(n, e.m)),
                  (e.h = Math.min(r, e.o)),
                  re(v));
              });
            }
            Si.prototype.remove = function (e, t, n) {
              n = n === void 0 ? !1 : n;
              var r = this;
              return j(function (i) {
                if (i.g == 1) return I(i, Promise.resolve(), 2);
                if (e >= t) return i.return();
                (n && pC(r, e, t),
                  r.l &&
                    r.l.remove(e, t) &&
                    r.g != null &&
                    (t <= r.g ||
                      e >= r.h ||
                      (e <= r.g && t >= r.h
                        ? (r.g = r.h = null)
                        : e <= r.g && t < r.h
                          ? (r.g = t)
                          : e > r.g && t >= r.h && (r.h = e)),
                    s0(r)),
                  re(i));
              });
            };
            function fC(e, t, n) {
              ((e.m = t), (e.o = n));
            }
            function r0(e, t, n) {
              ((e.F = t),
                (t = e.j.get(t)) &&
                  ((t = t.filter(function (r) {
                    return r.endTime <= n;
                  })),
                  t.length && e.l.append(t)));
            }
            function i0(e, t, n) {
              ((t.startTime += n), (t.endTime += n), (t = x(t.nestedCues)));
              for (var r = t.next(); !r.done; r = t.next()) i0(e, r.value, n);
            }
            function hC(e, t, n) {
              var r = new Map();
              t = x(t);
              for (var i = t.next(); !i.done; i = t.next()) {
                var s = i.value;
                ((i = s.stream),
                  (s = s.cue),
                  r.has(i) || r.set(i, []),
                  i0(e, s, n),
                  s.startTime >= e.m && s.startTime < e.o && (r.get(i).push(s), i == e.F && e.l.append([s])));
              }
              for (n = x(r.keys()), t = n.next(); !t.done; t = n.next())
                for (
                  t = t.value, e.j.has(t) || e.j.set(t, []), i = x(r.get(t)), s = i.next();
                  !s.done;
                  s = i.next()
                )
                  ((s = s.value), e.j.get(t).push(s));
              s0(e);
            }
            function pC(e, t, n) {
              for (var r = x(e.j.keys()), i = r.next(); !i.done; i = r.next()) {
                i = i.value;
                var s = e.j.get(i);
                ((s = s.filter(function (o) {
                  return o.startTime < t || o.endTime >= n;
                })),
                  e.j.set(i, s));
              }
            }
            function s0(e) {
              for (var t = 1 / 0, n = -1 / 0, r = x(e.j.values()), i = r.next(); !i.done; i = r.next()) {
                i = x(i.value);
                for (var s = i.next(); !s.done; s = i.next())
                  ((s = s.value), (t = Math.min(t, s.startTime)), (n = Math.max(n, s.endTime)));
              }
              t !== 1 / 0 &&
                n !== -1 / 0 &&
                ((e.g = e.g == null ? Math.max(t, e.m) : Math.min(e.g, Math.max(t, e.m))),
                (e.h = Math.max(e.h, Math.min(n, e.o))));
            }
            (fe("shaka.text.TextEngine", Si),
              (Si.prototype.destroy = Si.prototype.destroy),
              (Si.findParser = Ja),
              (Si.unregisterParser = function (e) {
                Za.delete(e);
              }),
              (Si.registerParser = an));
            var Za = new Map();
            function eu(e) {
              ((this.h = e), (this.g = null));
            }
            ((eu.prototype.ka = function (e) {
              var t = this;
              this.stop();
              var n = !0,
                r = null;
              return (
                (this.g = function () {
                  (g.clearTimeout(r), (n = !1));
                }),
                (r = g.setTimeout(function () {
                  n && t.h();
                }, e * 1e3)),
                this
              );
            }),
              (eu.prototype.stop = function () {
                this.g && (this.g(), (this.g = null));
              }));
            function Ve(e) {
              ((this.h = e), (this.g = null));
            }
            ((Ve.prototype.Jb = function () {
              return (this.stop(), this.h(), this);
            }),
              (Ve.prototype.ka = function (e) {
                var t = this;
                return (
                  this.stop(),
                  (this.g = new eu(function () {
                    t.h();
                  }).ka(e)),
                  this
                );
              }),
              (Ve.prototype.Ea = function (e) {
                var t = this;
                return (
                  this.stop(),
                  (this.g = new eu(function () {
                    (t.g.ka(e), t.h());
                  }).ka(e)),
                  this
                );
              }),
              (Ve.prototype.stop = function () {
                this.g && (this.g.stop(), (this.g = null));
              }),
              fe("shaka.util.Timer", Ve),
              (Ve.prototype.stop = Ve.prototype.stop),
              (Ve.prototype.tickEvery = Ve.prototype.Ea),
              (Ve.prototype.tickAfter = Ve.prototype.ka),
              (Ve.prototype.tickNow = Ve.prototype.Jb));
            function gC(e, t) {
              return e.concat(t);
            }
            function mC() {}
            function ts(e) {
              return e != null;
            }
            function ac(e, t) {
              return Promise.race([
                t,
                new Promise(function (n, r) {
                  new Ve(r).ka(e);
                }),
              ]);
            }
            function jr() {}
            function So(e, t) {
              return ((e = tt(e)), (t = tt(t)), e.split("-")[0] == t.split("-")[0]);
            }
            function tu(e, t) {
              return (
                (e = tt(e)),
                (t = tt(t)),
                (e = e.split("-")),
                (t = t.split("-")),
                e[0] == t[0] && e.length == 1 && t.length == 2
              );
            }
            function Xh(e, t) {
              return (
                (e = tt(e)),
                (t = tt(t)),
                (e = e.split("-")),
                (t = t.split("-")),
                e.length == 2 && t.length == 2 && e[0] == t[0]
              );
            }
            function tt(e) {
              e = x(e.split("-x-"));
              var t = e.next().value;
              ((t = t === void 0 ? "" : t), (e = e.next().value), (e = e === void 0 ? "" : e));
              var n = x(t.split("-"));
              return (
                (t = n.next().value),
                (t = t === void 0 ? "" : t),
                (n = n.next().value),
                (n = n === void 0 ? "" : n),
                (e = e ? "x-" + e : ""),
                (t = t.toLowerCase()),
                (t = o0.get(t) || t),
                (n = n.toUpperCase()),
                (n ? t + "-" + n : t) + (e ? "-" + e : "")
              );
            }
            function Ns(e, t) {
              return ((e = tt(e)), (t = tt(t)), t == e ? 4 : tu(t, e) ? 3 : Xh(t, e) ? 2 : tu(e, t) ? 1 : 0);
            }
            function uc(e) {
              var t = e.indexOf("-");
              return ((e = t >= 0 ? e.substring(0, t) : e), (e = e.toLowerCase()), (e = o0.get(e) || e));
            }
            function Wh(e) {
              return e.language
                ? tt(e.language)
                : e.audio && e.audio.language
                  ? tt(e.audio.language)
                  : e.video && e.video.language
                    ? tt(e.video.language)
                    : "und";
            }
            function lc(e, t) {
              e = tt(e);
              var n = new Set();
              t = x(t);
              for (var r = t.next(); !r.done; r = t.next()) n.add(tt(r.value));
              for (t = x(n), r = t.next(); !r.done; r = t.next()) if (((r = r.value), r == e)) return r;
              for (t = x(n), r = t.next(); !r.done; r = t.next()) if (((r = r.value), tu(r, e))) return r;
              for (t = x(n), r = t.next(); !r.done; r = t.next()) if (((r = r.value), Xh(r, e))) return r;
              for (n = x(n), t = n.next(); !t.done; t = n.next()) if (((t = t.value), tu(e, t))) return t;
              return null;
            }
            (fe("shaka.util.LanguageUtils", jr),
              (jr.findClosestLocale = lc),
              (jr.getLocaleForVariant = Wh),
              (jr.getLocaleForText = function (e) {
                return tt(e.language || "und");
              }),
              (jr.getBase = uc),
              (jr.relatedness = Ns),
              (jr.areSiblings = function (e, t) {
                var n = uc(e),
                  r = uc(t);
                return e != n && t != r && n == r;
              }),
              (jr.normalize = tt),
              (jr.isSiblingOf = Xh),
              (jr.isParentOf = tu),
              (jr.areLanguageCompatible = So),
              (jr.areLocaleCompatible = function (e, t) {
                return ((e = tt(e)), (t = tt(t)), e == t);
              }));
            var o0 = new Map([
              ["aar", "aa"],
              ["abk", "ab"],
              ["afr", "af"],
              ["aka", "ak"],
              ["alb", "sq"],
              ["amh", "am"],
              ["ara", "ar"],
              ["arg", "an"],
              ["arm", "hy"],
              ["asm", "as"],
              ["ava", "av"],
              ["ave", "ae"],
              ["aym", "ay"],
              ["aze", "az"],
              ["bak", "ba"],
              ["bam", "bm"],
              ["baq", "eu"],
              ["bel", "be"],
              ["ben", "bn"],
              ["bih", "bh"],
              ["bis", "bi"],
              ["bod", "bo"],
              ["bos", "bs"],
              ["bre", "br"],
              ["bul", "bg"],
              ["bur", "my"],
              ["cat", "ca"],
              ["ces", "cs"],
              ["cha", "ch"],
              ["che", "ce"],
              ["chi", "zh"],
              ["chu", "cu"],
              ["chv", "cv"],
              ["cor", "kw"],
              ["cos", "co"],
              ["cre", "cr"],
              ["cym", "cy"],
              ["cze", "cs"],
              ["dan", "da"],
              ["deu", "de"],
              ["div", "dv"],
              ["dut", "nl"],
              ["dzo", "dz"],
              ["ell", "el"],
              ["eng", "en"],
              ["epo", "eo"],
              ["est", "et"],
              ["eus", "eu"],
              ["ewe", "ee"],
              ["fao", "fo"],
              ["fas", "fa"],
              ["fij", "fj"],
              ["fin", "fi"],
              ["fra", "fr"],
              ["fre", "fr"],
              ["fry", "fy"],
              ["ful", "ff"],
              ["geo", "ka"],
              ["ger", "de"],
              ["gla", "gd"],
              ["gle", "ga"],
              ["glg", "gl"],
              ["glv", "gv"],
              ["gre", "el"],
              ["grn", "gn"],
              ["guj", "gu"],
              ["hat", "ht"],
              ["hau", "ha"],
              ["heb", "he"],
              ["her", "hz"],
              ["hin", "hi"],
              ["hmo", "ho"],
              ["hrv", "hr"],
              ["hun", "hu"],
              ["hye", "hy"],
              ["ibo", "ig"],
              ["ice", "is"],
              ["ido", "io"],
              ["iii", "ii"],
              ["iku", "iu"],
              ["ile", "ie"],
              ["ina", "ia"],
              ["ind", "id"],
              ["ipk", "ik"],
              ["isl", "is"],
              ["ita", "it"],
              ["jav", "jv"],
              ["jpn", "ja"],
              ["kal", "kl"],
              ["kan", "kn"],
              ["kas", "ks"],
              ["kat", "ka"],
              ["kau", "kr"],
              ["kaz", "kk"],
              ["khm", "km"],
              ["kik", "ki"],
              ["kin", "rw"],
              ["kir", "ky"],
              ["kom", "kv"],
              ["kon", "kg"],
              ["kor", "ko"],
              ["kua", "kj"],
              ["kur", "ku"],
              ["lao", "lo"],
              ["lat", "la"],
              ["lav", "lv"],
              ["lim", "li"],
              ["lin", "ln"],
              ["lit", "lt"],
              ["ltz", "lb"],
              ["lub", "lu"],
              ["lug", "lg"],
              ["mac", "mk"],
              ["mah", "mh"],
              ["mal", "ml"],
              ["mao", "mi"],
              ["mar", "mr"],
              ["may", "ms"],
              ["mkd", "mk"],
              ["mlg", "mg"],
              ["mlt", "mt"],
              ["mon", "mn"],
              ["mri", "mi"],
              ["msa", "ms"],
              ["mya", "my"],
              ["nau", "na"],
              ["nav", "nv"],
              ["nbl", "nr"],
              ["nde", "nd"],
              ["ndo", "ng"],
              ["nep", "ne"],
              ["nld", "nl"],
              ["nno", "nn"],
              ["nob", "nb"],
              ["nor", "no"],
              ["nya", "ny"],
              ["oci", "oc"],
              ["oji", "oj"],
              ["ori", "or"],
              ["orm", "om"],
              ["oss", "os"],
              ["pan", "pa"],
              ["per", "fa"],
              ["pli", "pi"],
              ["pol", "pl"],
              ["por", "pt"],
              ["pus", "ps"],
              ["que", "qu"],
              ["roh", "rm"],
              ["ron", "ro"],
              ["rum", "ro"],
              ["run", "rn"],
              ["rus", "ru"],
              ["sag", "sg"],
              ["san", "sa"],
              ["sin", "si"],
              ["slk", "sk"],
              ["slo", "sk"],
              ["slv", "sl"],
              ["sme", "se"],
              ["smo", "sm"],
              ["sna", "sn"],
              ["snd", "sd"],
              ["som", "so"],
              ["sot", "st"],
              ["spa", "es"],
              ["sqi", "sq"],
              ["srd", "sc"],
              ["srp", "sr"],
              ["ssw", "ss"],
              ["sun", "su"],
              ["swa", "sw"],
              ["swe", "sv"],
              ["tah", "ty"],
              ["tam", "ta"],
              ["tat", "tt"],
              ["tel", "te"],
              ["tgk", "tg"],
              ["tgl", "tl"],
              ["tha", "th"],
              ["tib", "bo"],
              ["tir", "ti"],
              ["ton", "to"],
              ["tsn", "tn"],
              ["tso", "ts"],
              ["tuk", "tk"],
              ["tur", "tr"],
              ["twi", "tw"],
              ["uig", "ug"],
              ["ukr", "uk"],
              ["urd", "ur"],
              ["uzb", "uz"],
              ["ven", "ve"],
              ["vie", "vi"],
              ["vol", "vo"],
              ["wel", "cy"],
              ["wln", "wa"],
              ["wol", "wo"],
              ["xho", "xh"],
              ["yid", "yi"],
              ["yor", "yo"],
              ["zha", "za"],
              ["zho", "zh"],
              ["zul", "zu"],
            ]);
            function a0() {}
            function u0(e, t, n, r, i) {
              if (i.length) {
                var s = e.textStreams;
                i = x(i);
                for (var o = i.next(), u = {}; !o.done; u = { Fh: void 0 }, o = i.next())
                  if (
                    ((u.Fh = o.value),
                    (o = s.filter(
                      (function (A) {
                        return function (E) {
                          return !!(E.codecs.startsWith(A.Fh) || E.mimeType.startsWith(A.Fh));
                        };
                      })(u),
                    )),
                    o.length)
                  ) {
                    s = o;
                    break;
                  }
                e.textStreams = s;
              }
              if (((s = e.variants), (t.length || n.length) && (s = yC(s, t, n)), r.length)) {
                for (t = new Fl(), s = x(s), n = s.next(); !n.done; n = s.next())
                  ((n = n.value), t.push(String(n.video.width || 0), n));
                var l = [];
                (t.forEach(function (A, E) {
                  A = 0;
                  var C = [];
                  E = x(E);
                  for (var k = E.next(), R = {}; !k.done; R = { Xf: void 0 }, k = E.next())
                    ((R.Xf = k.value),
                      (k = r.filter(
                        (function (L) {
                          return function (U) {
                            return L.Xf.decodingInfos[0][U];
                          };
                        })(R),
                      ).length),
                      k > A ? ((A = k), (C = [R.Xf])) : k == A && C.push(R.Xf));
                  l.push.apply(l, Y(C));
                }),
                  (s = l));
              }
              for (t = new Set(), n = x(s), i = n.next(); !i.done; i = n.next())
                ((i = i.value), i.video && t.add(i.video));
              if (t.size) {
                var p = {
                  vp8: 1,
                  avc: 1,
                  "dovi-avc": 0.95,
                  vp9: 0.9,
                  vp09: 0.9,
                  hevc: 0.85,
                  "dovi-hevc": 0.8,
                  "dovi-p5": 0.75,
                  av01: 0.7,
                  "dovi-av1": 0.65,
                  vvc: 0.6,
                };
                i = Array.from(t).sort(function (A, E) {
                  return A.bandwidth && E.bandwidth && A.bandwidth != E.bandwidth
                    ? A.bandwidth - E.bandwidth
                    : A.width != E.width
                      ? A.width - E.width
                      : A.codecs && E.codecs
                        ? ((A = fn(A.codecs)), (E = fn(E.codecs)), (p[A] || 1) - (p[E] || 1))
                        : 0;
                });
                var m = [];
                for (
                  t = new Map(),
                    n = function (A) {
                      var E = [
                        String(A.width || ""),
                        String(A.height || ""),
                        String(Math.round(A.frameRate || 0)),
                        A.hdr || "",
                        A.fastSwitching,
                      ];
                      return (
                        A.dependencyStream && E.push(A.dependencyStream.baseOriginalId || ""),
                        A.roles && E.push(A.roles.sort().join("_")),
                        E.join(";")
                      );
                    },
                    i = x(i),
                    o = i.next();
                  !o.done;
                  o = i.next()
                ) {
                  ((o = o.value), (u = n(o)));
                  var y = t.get(u) || [];
                  if (y.length) {
                    var v = fn(y[y.length - 1].codecs),
                      w = fn(o.codecs);
                    v == w && (y.push(o), m.push(o.id));
                  } else (y.push(o), m.push(o.id));
                  t.set(u, y);
                }
                e.variants = s.filter(function (A) {
                  return !((A = A.video) && !m.includes(A.id));
                });
              } else e.variants = s;
            }
            function yC(e, t, n) {
              t = x(t);
              for (var r = t.next(), i = {}; !r.done; i = { lj: void 0 }, r = t.next())
                if (
                  ((i.lj = r.value),
                  (r = e.filter(
                    (function (s) {
                      return function (o) {
                        return o.video && o.video.codecs.startsWith(s.lj);
                      };
                    })(i),
                  )),
                  r.length)
                ) {
                  e = r;
                  break;
                }
              for (n = x(n), t = n.next(), r = {}; !t.done; r = { Rh: void 0 }, t = n.next())
                if (
                  ((r.Rh = t.value),
                  (t = e.filter(
                    (function (s) {
                      return function (o) {
                        return o.audio && o.audio.codecs.startsWith(s.Rh);
                      };
                    })(r),
                  )),
                  t.length)
                ) {
                  e = t;
                  break;
                }
              return e;
            }
            function vC(e, t, n) {
              e.variants = e.variants.filter(function (r) {
                return cc(r, t, n);
              });
            }
            function cc(e, t, n) {
              function r(o, u, l) {
                return o >= u && o <= l;
              }
              if (e && e.video && e.video.width && e.video.height) {
                var i = e.video.width,
                  s = e.video.height;
                if (
                  (s > i && ((s = x([s, i])), (i = s.next().value), (s = s.next().value)),
                  !r(i, t.minWidth, Math.min(t.maxWidth, n.width)) ||
                    !r(s, t.minHeight, Math.min(t.maxHeight, n.height)) ||
                    !r(i * s, t.minPixels, t.maxPixels))
                )
                  return !1;
              }
              return !(
                (e &&
                  e.video &&
                  e.video.frameRate &&
                  !r(e.video.frameRate, t.minFrameRate, t.maxFrameRate)) ||
                (e &&
                  e.audio &&
                  e.audio.channelsCount &&
                  !r(e.audio.channelsCount, t.minChannelsCount, t.maxChannelsCount)) ||
                !r(e.bandwidth, t.minBandwidth, t.maxBandwidth)
              );
            }
            function xC(e, t, n, r) {
              return (
                (n = n === void 0 ? [] : n),
                (r = r === void 0 ? {} : r),
                j(function (i) {
                  return i.g == 1
                    ? I(i, l0(e, t, t.offlineSessionIds.length > 0, n, r), 2)
                    : (AC(t), I(i, EC(t), 0));
                })
              );
            }
            function l0(e, t, n, r, i) {
              var s, o;
              return j(function (u) {
                if (u.g == 1) return (Be().$i() && TC(t.variants), I(u, Kh(t.variants, n, !1, r), 2));
                ((s = null),
                  e && (o = e.g) && (s = o.keySystem),
                  (t.variants = t.variants.filter(function (l) {
                    var p = SC(l, s, i);
                    if (!p) {
                      var m = [];
                      (l.audio && m.push(m0(l.audio)), l.video && m.push(m0(l.video)));
                    }
                    return p;
                  })),
                  re(u));
              });
            }
            function TC(e) {
              var t = new Map()
                  .set("dvav", "avc3")
                  .set("dva1", "avc1")
                  .set("dvhe", "hev1")
                  .set("dvh1", "hvc1")
                  .set("dvc1", "vvc1")
                  .set("dvi1", "vvi1"),
                n = new Set();
              e = x(e);
              for (var r = e.next(); !r.done; r = e.next()) ((r = r.value), r.video && n.add(r.video));
              for (n = x(n), e = n.next(); !e.done; e = n.next()) {
                ((e = e.value), (r = x(t)));
                for (var i = r.next(); !i.done; i = r.next()) {
                  var s = x(i.value);
                  if (((i = s.next().value), (s = s.next().value), e.codecs.includes(i))) {
                    e.codecs = e.codecs.replace(i, s);
                    break;
                  }
                }
              }
            }
            function SC(e, t, n) {
              if (
                !e.decodingInfos.some(function (l) {
                  return !(
                    !l.supported ||
                    (t && (l = l.keySystemAccess) && (n[l.keySystem] || l.keySystem) != t)
                  );
                })
              )
                return !1;
              var r = Be(),
                i = r.Nb() === "Xbox";
              r = r.Oa() === "MOBILE" && r.Ha() === "GECKO";
              var s = e.video,
                o = (s && s.width) || 0,
                u = (s && s.height) || 0;
              return (i &&
                s &&
                (o > 1920 || u > 1080) &&
                (s.codecs.includes("avc1.") || s.codecs.includes("avc3."))) ||
                ((i = s && s.dependencyStream) && !Ov(i))
                ? !1
                : ((e = e.audio),
                  !(
                    (r && e && e.encrypted && e.codecs.toLowerCase().includes("opus")) ||
                    (e && e.dependencyStream)
                  ));
            }
            function c0(e, t) {
              var n, r, i, s, o, u, l;
              return j(function (p) {
                if (p.g == 1) {
                  for (
                    n = function (m, y) {
                      if (m) {
                        var v = Ji(m);
                        return (
                          (v.supported = m.supported && y.supported),
                          (v.powerEfficient = m.powerEfficient && y.powerEfficient),
                          (v.smooth = m.smooth && y.smooth),
                          y.keySystemAccess && !v.keySystemAccess && (v.keySystemAccess = y.keySystemAccess),
                          v
                        );
                      }
                      return y;
                    },
                      r = null,
                      i = [],
                      s = x(t),
                      o = s.next(),
                      u = {};
                    !o.done;
                    u = { cache: void 0, Se: void 0 }, o = s.next()
                  )
                    ((l = o.value),
                      (u.Se = ql(l)),
                      (u.cache = pc),
                      u.cache.has(u.Se)
                        ? (r = n(r, u.cache.get(u.Se)))
                        : i.push(
                            wC(l).then(
                              (function (m) {
                                return function (y) {
                                  var v = null;
                                  y = x(y || []);
                                  for (var w = y.next(); !w.done; w = y.next()) v = n(v, w.value);
                                  v && (m.cache.set(m.Se, v), (r = n(r, v)));
                                };
                              })(u),
                            ),
                          ));
                  return I(p, Promise.all(i), 2);
                }
                (r && e.decodingInfos.push(r), re(p));
              });
            }
            function wC(e) {
              var t = [""];
              e.video && (t = Fn(e.video.contentType).split(","));
              var n = [""];
              e.audio && (n = Fn(e.audio.contentType).split(","));
              var r = [];
              t = x(t);
              for (var i = t.next(); !i.done; i = t.next()) {
                i = i.value;
                for (var s = x(n), o = s.next(), u = {}; !o.done; u = { Qc: void 0 }, o = s.next())
                  ((o = o.value),
                    (u.Qc = Ur(e)),
                    e.video && (u.Qc.video.contentType = Rt(Qn(u.Qc.video.contentType), i)),
                    e.audio && (u.Qc.audio.contentType = Rt(Qn(u.Qc.audio.contentType), o)),
                    r.push(
                      new Promise(
                        (function (l) {
                          return function (p, m) {
                            (Be().Oa() == "MOBILE"
                              ? ac(5, navigator.mediaCapabilities.decodingInfo(l.Qc))
                              : navigator.mediaCapabilities.decodingInfo(l.Qc)
                            )
                              .then(function (y) {
                                p(y);
                              })
                              .catch(m);
                          };
                        })(u),
                      ),
                    ));
              }
              return Promise.all(r).catch(function () {
                return (JSON.stringify(e), null);
              });
            }
            function Kh(e, t, n, r) {
              var i, s, o, u, l, p, m, y, v, w, A, E, C, k, R, L, U, G;
              return j(function (b) {
                switch (b.g) {
                  case 1:
                    if (
                      e.some(function (B) {
                        return B.decodingInfos.length;
                      })
                    )
                      return b.return();
                    ((i = x(r)), (s = i.next()), (o = {}));
                  case 2:
                    if (s.done) {
                      b.A(4);
                      break;
                    }
                    ((o.Ji = s.value), (u = !1), (l = x(e)), (p = l.next()));
                  case 5:
                    if (p.done) {
                      b.A(7);
                      break;
                    }
                    ((m = p.value),
                      (y = d0(m, t, n).filter(
                        (function (B) {
                          return function (N) {
                            return (
                              (N = N[0]),
                              (N.keySystemConfiguration && N.keySystemConfiguration.keySystem) === B.Ji
                            );
                          };
                        })(o),
                      )),
                      (v = x(y)),
                      (w = v.next()));
                  case 8:
                    if (w.done) {
                      b.A(10);
                      break;
                    }
                    return ((A = w.value), I(b, c0(m, A), 9));
                  case 9:
                    ((w = v.next()), b.A(8));
                    break;
                  case 10:
                    (m.decodingInfos.some(function (B) {
                      return B.supported;
                    }) && (u = !0),
                      (p = l.next()),
                      b.A(5));
                    break;
                  case 7:
                    if (u) return b.return();
                    ((o = { Ji: void 0 }), (s = i.next()), b.A(2));
                    break;
                  case 4:
                    ((E = x(e)), (C = E.next()));
                  case 12:
                    if (C.done) {
                      b.A(0);
                      break;
                    }
                    ((k = C.value),
                      (R = d0(k, t, n).filter(function (B) {
                        return (
                          (B = B[0]),
                          (B = B.keySystemConfiguration && B.keySystemConfiguration.keySystem),
                          !B || !r.includes(B)
                        );
                      })),
                      (L = x(R)),
                      (U = L.next()));
                  case 15:
                    if (U.done) {
                      ((C = E.next()), b.A(12));
                      break;
                    }
                    return ((G = U.value), I(b, c0(k, G), 16));
                  case 16:
                    ((U = L.next()), b.A(15));
                }
              });
            }
            function d0(e, t, n) {
              var r = e.audio,
                i = e.video,
                s = [],
                o = [];
              if (i)
                for (var u = x(i.fullMimeTypes), l = u.next(); !l.done; l = u.next()) {
                  l = l.value;
                  var p = Fn(l);
                  if (p.includes(",") && !r) {
                    var m = p.split(","),
                      y = Qn(l);
                    ((p = ho("video", m)),
                      (m = ho("audio", m)),
                      (m = nu(m, y)),
                      (y = zh(y, m, "audio")),
                      o.push({
                        contentType: y,
                        channels: 2,
                        bitrate: e.bandwidth || 1,
                        samplerate: 1,
                        spatialRendering: !1,
                      }));
                  }
                  if (
                    ((p = f0(p)),
                    (l = {
                      contentType: zh(Qn(l), p, "video"),
                      width: i.width || 64,
                      height: i.height || 64,
                      bitrate: i.bandwidth || e.bandwidth || 1,
                      framerate: i.frameRate || 30,
                    }),
                    i.hdr)
                  )
                    switch (i.hdr) {
                      case "PQ":
                        l.transferFunction = "pq";
                        break;
                      case "HLG":
                        l.transferFunction = "hlg";
                    }
                  (i.colorGamut && (l.colorGamut = i.colorGamut), s.push(l));
                }
              if (r)
                for (u = x(r.fullMimeTypes), l = u.next(); !l.done; l = u.next())
                  ((p = l.value),
                    (l = Qn(p)),
                    (p = nu(Fn(p), l)),
                    (l = zh(l, p, "audio")),
                    o.push({
                      contentType: l,
                      channels: r.channelsCount || 2,
                      bitrate: r.bandwidth || e.bandwidth || 1,
                      samplerate: r.audioSamplingRate || 1,
                      spatialRendering: r.spatialAudio,
                    }));
              for (
                u = [], s.length == 0 && s.push(null), o.length == 0 && o.push(null), s = x(s), l = s.next();
                !l.done;
                l = s.next()
              )
                for (l = l.value, p = x(o), y = p.next(); !y.done; y = p.next())
                  ((y = y.value),
                    (m = { type: n ? "file" : "media-source" }),
                    l && (m.video = l),
                    y && (m.audio = y),
                    u.push(m));
              if (
                ((o = (e.video ? e.video.drmInfos : []).concat(e.audio ? e.audio.drmInfos : [])), !o.length)
              )
                return [u];
              for (e = [], n = new Map(), o = x(o), s = o.next(); !s.done; s = o.next())
                ((s = s.value), n.get(s.keySystem) || n.set(s.keySystem, []), n.get(s.keySystem).push(s));
              for (
                o = t ? "required" : "optional",
                  t = t ? ["persistent-license"] : ["temporary"],
                  s = x(n.keys()),
                  l = s.next();
                !l.done;
                l = s.next()
              ) {
                for (
                  l = l.value, y = n.get(l), p = new Map(), y = x(y), m = y.next();
                  !m.done;
                  m = y.next()
                ) {
                  m = m.value;
                  var v = m.videoRobustness + "," + m.audioRobustness;
                  (p.get(v) || p.set(v, []), p.get(v).push(m));
                }
                for (p = x(p.values()), y = p.next(); !y.done; y = p.next()) {
                  ((y = y.value), (m = []), (v = x(u)));
                  for (var w = v.next(); !w.done; w = v.next()) {
                    w = Object.assign({}, w.value);
                    for (
                      var A = {
                          keySystem: l,
                          initDataType: "cenc",
                          persistentState: o,
                          distinctiveIdentifier: "optional",
                          sessionTypes: t,
                        },
                        E = x(y),
                        C = E.next();
                      !C.done;
                      C = E.next()
                    ) {
                      if (((C = C.value), C.initData && C.initData.length)) {
                        for (var k = new Set(), R = x(C.initData), L = R.next(); !L.done; L = R.next())
                          k.add(L.value.initDataType);
                        A.initDataType = C.initData[0].initDataType;
                      }
                      (C.distinctiveIdentifierRequired && (A.distinctiveIdentifier = "required"),
                        C.persistentStateRequired && (A.persistentState = "required"),
                        C.sessionType && (A.sessionTypes = [C.sessionType]),
                        r &&
                          (A.audio
                            ? (C.encryptionScheme &&
                                (A.audio.encryptionScheme = A.audio.encryptionScheme || C.encryptionScheme),
                              (A.audio.robustness = A.audio.robustness || C.audioRobustness))
                            : ((A.audio = { robustness: C.audioRobustness }),
                              C.encryptionScheme && (A.audio.encryptionScheme = C.encryptionScheme)),
                          A.audio.robustness == "" && delete A.audio.robustness),
                        i &&
                          (A.video
                            ? (C.encryptionScheme &&
                                (A.video.encryptionScheme = A.video.encryptionScheme || C.encryptionScheme),
                              (A.video.robustness = A.video.robustness || C.videoRobustness))
                            : ((A.video = { robustness: C.videoRobustness }),
                              C.encryptionScheme && (A.video.encryptionScheme = C.encryptionScheme)),
                          A.video.robustness == "" && delete A.video.robustness));
                    }
                    ((w.keySystemConfiguration = A), m.push(w));
                  }
                  e.push(m);
                }
              }
              return e;
            }
            function nu(e, t) {
              var n = Be();
              return e.toLowerCase() == "flac"
                ? n.Ha() != "WEBKIT"
                  ? "flac"
                  : "fLaC"
                : e.toLowerCase() === "opus"
                  ? n.Ha() != "WEBKIT"
                    ? "opus"
                    : qa(t) == "mp4"
                      ? "Opus"
                      : "opus"
                  : e.toLowerCase() == "ac-3" && n.se()
                    ? "ec-3"
                    : e;
            }
            function f0(e) {
              if (e.includes("avc1")) {
                var t = e.split(".");
                if (t.length == 3)
                  return (
                    (e = t.shift() + "."),
                    (e += parseInt(t.shift(), 10).toString(16)),
                    (e += ("000" + parseInt(t.shift(), 10).toString(16)).slice(-4))
                  );
              } else if (e == "vp9") return "vp09.00.41.08";
              return e;
            }
            function AC(e) {
              e.textStreams = e.textStreams.filter(function (t) {
                return ((t = Rt(t.mimeType, t.codecs)), Qa(t));
              });
            }
            function EC(e) {
              var t, n, r, i, s, o, u;
              return j(function (l) {
                switch (l.g) {
                  case 1:
                    ((t = []), (n = x(e.imageStreams)), (r = n.next()));
                  case 2:
                    if (r.done) {
                      l.A(4);
                      break;
                    }
                    if (
                      ((i = r.value),
                      (s = i.mimeType),
                      s == "application/mp4" && i.codecs == "mjpg" && (s = "image/jpg"),
                      gc.has(s))
                    ) {
                      l.A(5);
                      break;
                    }
                    if (((o = RC.get(s)), !o)) {
                      (gc.set(s, !1), l.A(5));
                      break;
                    }
                    return I(l, IC(o), 7);
                  case 7:
                    ((u = l.h), gc.set(s, u));
                  case 5:
                    (gc.get(s) && t.push(i), (r = n.next()), l.A(2));
                    break;
                  case 4:
                    ((e.imageStreams = t), re(l));
                }
              });
            }
            function IC(e) {
              return new Promise(function (t) {
                var n = new Image();
                ((n.src = e),
                  "decode" in n
                    ? n
                        .decode()
                        .then(function () {
                          t(!0);
                        })
                        .catch(function () {
                          t(!1);
                        })
                    : (n.onload = n.onerror =
                        function () {
                          t(n.height === 2);
                        }));
              });
            }
            function Os(e) {
              var t = e.audio,
                n = e.video,
                r = t ? t.mimeType : null,
                i = n ? n.mimeType : null,
                s = t ? t.codecs : null,
                o = n ? n.codecs : null,
                u = t ? t.groupId : null,
                l = [];
              (n && l.push(n.mimeType), t && l.push(t.mimeType), (l = l[0] || null));
              var p = [];
              (t && p.push(t.kind), n && p.push(n.kind), (p = p[0] || null));
              var m = new Set();
              if (t) for (var y = x(t.roles), v = y.next(); !v.done; v = y.next()) m.add(v.value);
              if (n) for (y = x(n.roles), v = y.next(); !v.done; v = y.next()) m.add(v.value);
              if (
                ((e = {
                  id: e.id,
                  active: !1,
                  type: "variant",
                  bandwidth: e.bandwidth,
                  language: e.language,
                  label: null,
                  videoLabel: null,
                  kind: p,
                  width: null,
                  height: null,
                  frameRate: null,
                  pixelAspectRatio: null,
                  hdr: null,
                  colorGamut: null,
                  videoLayout: null,
                  mimeType: l,
                  audioMimeType: r,
                  videoMimeType: i,
                  codecs: "",
                  audioCodec: s,
                  videoCodec: o,
                  primary: e.primary,
                  roles: Array.from(m),
                  audioRoles: null,
                  videoRoles: null,
                  forced: !1,
                  videoId: null,
                  audioId: null,
                  audioGroupId: u,
                  channelsCount: null,
                  audioSamplingRate: null,
                  spatialAudio: !1,
                  tilesLayout: null,
                  audioBandwidth: null,
                  videoBandwidth: null,
                  originalVideoId: null,
                  originalAudioId: null,
                  originalTextId: null,
                  originalImageId: null,
                  accessibilityPurpose: null,
                  originalLanguage: null,
                }),
                n &&
                  ((e.videoId = n.id),
                  (e.originalVideoId = n.originalId),
                  (e.width = n.width || null),
                  (e.height = n.height || null),
                  (e.frameRate = n.frameRate || null),
                  (e.pixelAspectRatio = n.pixelAspectRatio || null),
                  (e.videoBandwidth = n.bandwidth || null),
                  (e.hdr = n.hdr || null),
                  (e.colorGamut = n.colorGamut || null),
                  (e.videoLayout = n.videoLayout || null),
                  (e.videoRoles = n.roles),
                  (e.videoLabel = n.label),
                  (r = n.dependencyStream) &&
                    ((e.width = r.width || e.width),
                    (e.height = r.height || e.height),
                    (e.videoCodec = r.codecs || e.videoCodec),
                    (e.pixelAspectRatio = r.pixelAspectRatio || e.pixelAspectRatio),
                    e.videoBandwidth && r.bandwidth && (e.videoBandwidth += r.bandwidth)),
                  o.includes(",")))
              ) {
                ((e.channelsCount = n.channelsCount),
                  (e.audioSamplingRate = n.audioSamplingRate),
                  (e.spatialAudio = n.spatialAudio),
                  (e.originalLanguage = n.originalLanguage),
                  (e.audioMimeType = i),
                  (i = o.split(",")));
                try {
                  ((e.videoCodec = ho("video", i)), (e.audioCodec = ho("audio", i)));
                } catch (w) {}
              }
              return (
                t &&
                  ((e.audioId = t.id),
                  (e.originalAudioId = t.originalId),
                  (e.channelsCount = t.channelsCount),
                  (e.audioSamplingRate = t.audioSamplingRate),
                  (e.audioBandwidth = t.bandwidth || null),
                  (e.spatialAudio = t.spatialAudio),
                  (e.label = t.label),
                  (e.audioRoles = t.roles),
                  (e.accessibilityPurpose = t.accessibilityPurpose),
                  (e.originalLanguage = t.originalLanguage),
                  (i = t.dependencyStream)) &&
                  ((e.audioCodec = i.codecs || e.audioCodec),
                  e.audioBandwidth && i.bandwidth && (e.audioBandwidth += i.bandwidth)),
                n &&
                  !e.videoBandwidth &&
                  (t
                    ? e.audioBandwidth && (e.videoBandwidth = e.bandwidth - e.audioBandwidth)
                    : (e.videoBandwidth = e.bandwidth)),
                t &&
                  !e.audioBandwidth &&
                  (n
                    ? e.videoBandwidth && (e.audioBandwidth = e.bandwidth - e.videoBandwidth)
                    : (e.audioBandwidth = e.bandwidth)),
                (t = []),
                e.videoCodec && t.push(e.videoCodec),
                e.audioCodec && t.push(e.audioCodec),
                (e.codecs = t.join(", ")),
                e
              );
            }
            function Us(e) {
              return {
                id: e.id,
                active: !1,
                type: Fe,
                bandwidth: e.bandwidth || 0,
                language: e.language,
                label: e.label,
                kind: e.kind || null,
                mimeType: e.mimeType,
                codecs: e.codecs || null,
                primary: e.primary,
                roles: e.roles,
                accessibilityPurpose: e.accessibilityPurpose,
                forced: e.forced,
                originalTextId: e.originalId,
                originalLanguage: e.originalLanguage,
              };
            }
            function $h(e) {
              var t = e.width || null,
                n = e.height || null,
                r = null;
              e.segmentIndex && (r = qr(e.segmentIndex));
              var i = e.tilesLayout;
              return (
                r && (i = r.tilesLayout || i),
                i && t != null && (t /= Number(i.split("x")[0])),
                i && n != null && (n /= Number(i.split("x")[1])),
                {
                  id: e.id,
                  type: "image",
                  bandwidth: e.bandwidth || 0,
                  width: t,
                  height: n,
                  mimeType: e.mimeType,
                  codecs: e.codecs || null,
                  tilesLayout: i || null,
                  originalImageId: e.originalId,
                }
              );
            }
            function dc(e) {
              return (e.__shaka_id || (e.__shaka_id = MC++), e.__shaka_id);
            }
            function h0(e) {
              var t = {
                id: dc(e),
                active: e.mode != "disabled",
                type: Fe,
                bandwidth: 0,
                language: tt(e.language || "und"),
                label: e.label,
                kind: e.kind,
                mimeType: null,
                codecs: null,
                primary: !1,
                roles: [],
                accessibilityPurpose: null,
                forced: e.kind == "forced",
                originalTextId: e.id,
                originalLanguage: e.language,
              };
              return (
                e.kind == "captions" && (t.mimeType = "unknown"),
                e.kind == "subtitles" && (t.mimeType = "text/vtt"),
                e.kind && (t.roles = [e.kind]),
                t
              );
            }
            function fc(e, t) {
              var n = e ? e.language : null;
              if (
                ((n = {
                  id: dc(e || t),
                  active: e ? e.enabled : t.selected,
                  type: "variant",
                  bandwidth: 0,
                  language: tt(n || "und"),
                  label: e ? e.label : null,
                  videoLabel: null,
                  kind: e ? e.kind : null,
                  width: null,
                  height: null,
                  frameRate: null,
                  pixelAspectRatio: null,
                  hdr: null,
                  colorGamut: null,
                  videoLayout: null,
                  mimeType: null,
                  audioMimeType: null,
                  videoMimeType: null,
                  codecs: null,
                  audioCodec: null,
                  videoCodec: null,
                  primary: e ? e.kind == "main" : !1,
                  roles: [],
                  forced: !1,
                  audioRoles: null,
                  videoRoles: null,
                  videoId: null,
                  audioId: null,
                  audioGroupId: null,
                  channelsCount: null,
                  audioSamplingRate: null,
                  spatialAudio: !1,
                  tilesLayout: null,
                  audioBandwidth: null,
                  videoBandwidth: null,
                  originalVideoId: t ? t.id : null,
                  originalAudioId: e ? e.id : null,
                  originalTextId: null,
                  originalImageId: null,
                  accessibilityPurpose: null,
                  originalLanguage: n,
                }),
                e && e.kind && ((n.roles = [e.kind]), (n.audioRoles = [e.kind])),
                e &&
                  e.configuration &&
                  (e.configuration.codec &&
                    ((n.audioCodec = e.configuration.codec), (n.codecs = n.audioCodec)),
                  e.configuration.bitrate &&
                    ((n.audioBandwidth = e.configuration.bitrate), (n.bandwidth += n.audioBandwidth)),
                  e.configuration.sampleRate && (n.audioSamplingRate = e.configuration.sampleRate),
                  e.configuration.numberOfChannels && (n.channelsCount = e.configuration.numberOfChannels)),
                t &&
                  t.configuration &&
                  (t.configuration.codec &&
                    ((n.videoCodec = t.configuration.codec),
                    (n.codecs = n.codecs ? n.codecs + ("," + n.videoCodec) : n.videoCodec)),
                  t.configuration.bitrate &&
                    ((n.videoBandwidth = t.configuration.bitrate), (n.bandwidth += n.videoBandwidth)),
                  t.configuration.framerate && (n.frameRate = t.configuration.framerate),
                  t.configuration.width && (n.width = t.configuration.width),
                  t.configuration.height && (n.height = t.configuration.height),
                  t.configuration.colorSpace && t.configuration.colorSpace.transfer))
              )
                switch (t.configuration.colorSpace.transfer) {
                  case "pq":
                    n.hdr = "PQ";
                    break;
                  case "hlg":
                    n.hdr = "HLG";
                    break;
                  case "bt709":
                    n.hdr = "SDR";
                }
              return n;
            }
            function ru(e) {
              return e.allowedByApplication && e.allowedByKeySystem && e.disabledUntilTime == 0;
            }
            function hc(e) {
              return e.filter(function (t) {
                return ru(t);
              });
            }
            function wo(e, t, n, r) {
              var i = e,
                s = e.filter(function (l) {
                  return l.primary;
                });
              s.length && (i = s);
              var o = i.length ? i[0].language : "";
              if (
                ((i = i.filter(function (l) {
                  return l.language == o;
                })),
                t)
              ) {
                var u = lc(
                  tt(t),
                  e.map(function (l) {
                    return l.language;
                  }),
                );
                u &&
                  (i = e.filter(function (l) {
                    return tt(l.language) == u;
                  }));
              }
              if (
                ((i = i.filter(function (l) {
                  return l.forced == r;
                })),
                n)
              ) {
                if (((e = p0(i, n)), e.length)) return e;
              } else if (
                ((e = i.filter(function (l) {
                  return l.roles.length == 0;
                })),
                e.length)
              )
                return e;
              return (
                (e = i
                  .map(function (l) {
                    return l.roles;
                  })
                  .reduce(gC, [])),
                e.length ? p0(i, e[0]) : i
              );
            }
            function p0(e, t) {
              return e.filter(function (n) {
                return n.roles.includes(t);
              });
            }
            function CC(e) {
              var t = [];
              return (e.audio && t.push(e.audio), e.video && t.push(e.video), t);
            }
            function g0(e, t) {
              t.length &&
                ((t = t
                  .filter(function (n) {
                    return fn(e.codecs) == fn(n.codecs);
                  })
                  .sort(function (n, r) {
                    return n.bandwidth && r.bandwidth && n.bandwidth != r.bandwidth
                      ? n.bandwidth - r.bandwidth
                      : (n.width || 0) - (r.width || 0);
                  })),
                (e.trickModeVideo = t[0]),
                t.length > 1 &&
                  (t = t.find(function (n) {
                    return e.width == n.width && e.height == n.height;
                  }))) &&
                (e.trickModeVideo = t);
            }
            function m0(e) {
              return e.type == "audio"
                ? "type=audio codecs=" +
                    e.codecs +
                    " bandwidth=" +
                    e.bandwidth +
                    " channelsCount=" +
                    e.channelsCount +
                    " audioSamplingRate=" +
                    e.audioSamplingRate
                : e.type == "video"
                  ? "type=video codecs=" +
                    e.codecs +
                    " bandwidth=" +
                    e.bandwidth +
                    " frameRate=" +
                    e.frameRate +
                    " width=" +
                    e.width +
                    " height=" +
                    e.height
                  : "unexpected stream type";
            }
            function y0(e, t, n) {
              if (n.autoShowText == 0) return !1;
              if (n.autoShowText == 1) return !0;
              var r = tt(n.preferredTextLanguage);
              return (
                (t = tt(t.language)),
                n.autoShowText == 2
                  ? So(t, r)
                  : n.autoShowText == 3
                    ? e
                      ? ((e = tt(e.language)), So(t, r) && !So(e, t))
                      : !1
                    : (je("Invalid autoShowText setting!"), !1)
              );
            }
            function v0(e) {
              var t = {
                id: 0,
                language: "und",
                disabledUntilTime: 0,
                primary: !1,
                audio: null,
                video: null,
                bandwidth: 100,
                allowedByApplication: !0,
                allowedByKeySystem: !0,
                decodingInfos: [],
              };
              e = x(e);
              for (var n = e.next(); !n.done; n = e.next()) {
                n = n.value;
                var r = {
                  id: 0,
                  originalId: null,
                  groupId: null,
                  createSegmentIndex: function () {
                    return Promise.resolve();
                  },
                  segmentIndex: null,
                  mimeType: n ? Qn(n) : "",
                  codecs: n ? Fn(n) : "",
                  encrypted: !0,
                  drmInfos: [],
                  keyIds: new Set(),
                  language: "und",
                  originalLanguage: null,
                  label: null,
                  type: "video",
                  primary: !1,
                  trickModeVideo: null,
                  dependencyStream: null,
                  emsgSchemeIdUris: null,
                  roles: [],
                  forced: !1,
                  channelsCount: null,
                  audioSamplingRate: null,
                  spatialAudio: !1,
                  closedCaptions: null,
                  accessibilityPurpose: null,
                  external: !1,
                  fastSwitching: !1,
                  fullMimeTypes: new Set(),
                  isAudioMuxedInVideo: !1,
                  baseOriginalId: null,
                };
                (r.fullMimeTypes.add(Rt(r.mimeType, r.codecs)),
                  n.startsWith("audio/") ? ((r.type = "audio"), (t.audio = r)) : (t.video = r));
              }
              return t;
            }
            (fe("shaka.util.StreamUtils", a0), (a0.meetsRestrictions = cc));
            var pc = new Map(),
              MC = 0,
              gc = new Map()
                .set("image/svg+xml", !0)
                .set("image/png", !0)
                .set("image/jpeg", !0)
                .set("image/jpg", !0),
              RC = new Map()
                .set(
                  "image/webp",
                  "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",
                )
                .set(
                  "image/avif",
                  "data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",
                );
            function Et() {
              var e = this;
              ((this.H = null),
                (this.G = !1),
                (this.u = new ar()),
                (this.j = new et()),
                navigator.connection &&
                  navigator.connection.addEventListener &&
                  this.j.D(navigator.connection, "change", function () {
                    e.g.useNetworkInformation &&
                      navigator.onLine &&
                      ((e.u = new ar()), e.g && e.u.configure(e.g.advanced), e.trySuggestStreams());
                  }),
                (this.l = []),
                (this.I = 1),
                (this.J = !1),
                (this.h = this.o = this.g = this.B = null),
                (this.m = new Ve(function () {
                  if (e.G && (e.g.restrictToElementSize || e.g.restrictToScreenSize)) {
                    var t = e.chooseVariant();
                    t && e.H(t, e.g.clearBufferSwitch, e.g.safeMarginSwitch);
                  }
                })),
                (this.C = g),
                "documentPictureInPicture" in g &&
                  this.j.D(g.documentPictureInPicture, "enter", function () {
                    ((e.C = g.documentPictureInPicture.window),
                      e.m && e.m.Jb(),
                      e.j.Aa(e.C, "pagehide", function () {
                        ((e.C = g), e.m && e.m.Jb());
                      }));
                  }),
                (this.F = this.i = null));
            }
            ((h = Et.prototype),
              (h.stop = function () {
                ((this.H = null),
                  (this.G = !1),
                  (this.l = []),
                  (this.I = 1),
                  (this.o = this.B = null),
                  this.h && (this.h.disconnect(), (this.h = null)),
                  this.m && this.m.stop(),
                  (this.F = this.i = null));
              }),
              (h.release = function () {
                (this.stop(), this.j.release(), (this.m = null));
              }),
              (h.init = function (e) {
                this.H = e;
              }),
              (h.chooseVariant = function (e) {
                e = e === void 0 ? !1 : e;
                var t = 1 / 0,
                  n = 1 / 0;
                if (
                  (this.g.restrictToScreenSize &&
                    ((n = this.g.ignoreDevicePixelRatio ? 1 : this.C.devicePixelRatio),
                    (t = this.C.screen.height * n),
                    (n *= this.C.screen.width)),
                  this.h && this.g.restrictToElementSize)
                ) {
                  var r = this.g.ignoreDevicePixelRatio ? 1 : this.C.devicePixelRatio,
                    i = this.o.clientHeight,
                    s = this.o.clientWidth;
                  (this.i &&
                    document.pictureInPictureElement &&
                    document.pictureInPictureElement == this.o &&
                    ((i = this.i.height), (s = this.i.width)),
                    (t = Math.min(t, i * r)),
                    (n = Math.min(n, s * r)));
                }
                if (
                  ((i = this.l.filter(function (p) {
                    return p && !((p.audio && p.audio.fastSwitching) || (p.video && p.video.fastSwitching));
                  })),
                  i.length || (i = this.l),
                  (r = i),
                  e &&
                    i.length != this.l.length &&
                    (r = this.l.filter(function (p) {
                      return (
                        p && !!((p.audio && p.audio.fastSwitching) || (p.video && p.video.fastSwitching))
                      );
                    })),
                  (e = Yh(this, this.g.restrictions, r, 1 / 0, 1 / 0)),
                  t != 1 / 0 || n != 1 / 0)
                ) {
                  for (e = kC(e), e = x(e), i = e.next(); !i.done; i = e.next())
                    if (((i = i.value), i.height >= t && i.width >= n)) {
                      ((t = i.height), (n = i.width));
                      break;
                    }
                  e = Yh(this, this.g.restrictions, r, t, n);
                }
                for (
                  t = this.getBandwidthEstimate(),
                    r.length && !e.length && ((e = Yh(this, null, r, 1 / 0, 1 / 0)), (e = [e[0]])),
                    n = e[0] || null,
                    r = 0;
                  r < e.length;
                  r++
                ) {
                  i = e[r];
                  var o = isNaN(this.I) ? 1 : Math.abs(this.I);
                  s = (o * i.bandwidth) / this.g.bandwidthDowngradeTarget;
                  for (var u = { bandwidth: 1 / 0 }, l = r + 1; l < e.length; l++)
                    if (i.bandwidth != e[l].bandwidth) {
                      u = e[l];
                      break;
                    }
                  ((o = (o * u.bandwidth) / this.g.bandwidthUpgradeTarget),
                    n &&
                      i &&
                      t >= s &&
                      t <= o &&
                      (n.bandwidth != i.bandwidth ||
                        (n.bandwidth == i.bandwidth &&
                          n.video &&
                          i.video &&
                          (n.video.width < i.video.width || n.video.height < i.video.height))) &&
                      (n = i));
                }
                return ((this.B = Date.now()), n);
              }),
              (h.enable = function () {
                ((this.G = !0), this.l.length && this.trySuggestStreams());
              }),
              (h.disable = function () {
                this.G = !1;
              }),
              (h.segmentDownloaded = function (e, t, n, r) {
                var i = e;
                (this.g.removeLatencyFromFirstPacketTime &&
                  r &&
                  r.packetNumber === 1 &&
                  r.timeToFirstByte &&
                  (i = e - r.timeToFirstByte),
                  i >= this.g.cacheLoadThreshold && this.u.sample(i, t),
                  n && this.B != null && this.G && x0(this));
              }),
              (h.trySuggestStreams = function () {
                this.G && ((this.B = Date.now()), x0(this, !0));
              }),
              (h.getBandwidthEstimate = function () {
                var e = this.g.defaultBandwidthEstimate;
                return (
                  navigator.connection &&
                    navigator.connection.downlink &&
                    this.g.useNetworkInformation &&
                    (e = navigator.connection.downlink * 1e6),
                  navigator.connection &&
                  navigator.connection.downlink &&
                  this.g.useNetworkInformation &&
                  this.g.preferNetworkInformationBandwidth
                    ? e
                    : ((e = this.u.getBandwidthEstimate(e)), this.F ? this.F.getBandwidthEstimate(e) : e)
                );
              }),
              (h.setVariants = function (e) {
                return Es(e, this.l) ? !1 : ((this.l = e), !0);
              }),
              (h.playbackRateChanged = function (e) {
                this.I = e;
              }),
              (h.setMediaElement = function (e) {
                function t() {
                  n.m.ka(_C);
                }
                var n = this;
                ((this.o = e),
                  this.h && (this.h.disconnect(), (this.h = null)),
                  this.o &&
                    "ResizeObserver" in g &&
                    ((this.h = new ResizeObserver(t)), this.h.observe(this.o)),
                  this.j.D(e, "enterpictureinpicture", function (r) {
                    r.pictureInPictureWindow && ((n.i = r.pictureInPictureWindow), n.j.D(n.i, "resize", t));
                  }),
                  this.j.D(e, "leavepictureinpicture", function () {
                    (n.i && n.j.Ma(n.i, "resize", t), (n.i = null));
                  }));
              }),
              (h.setCmsdManager = function (e) {
                this.F = e;
              }),
              (h.configure = function (e) {
                ((this.g = e), this.u && this.g && this.u.configure(this.g.advanced));
              }));
            function x0(e, t) {
              if (t === void 0 || !t) {
                if (!e.J) {
                  if (((t = e.u), !(t.g >= t.i))) return;
                  ((e.J = !0), (e.B -= (e.g.switchInterval - e.g.minTimeToSwitch) * 1e3));
                }
                if (Date.now() - e.B < e.g.switchInterval * 1e3) return;
              }
              ((t = e.chooseVariant()),
                e.getBandwidthEstimate(),
                t && e.H(t, e.g.clearBufferSwitch, e.g.safeMarginSwitch));
            }
            function Yh(e, t, n, r, i) {
              if (e.F) {
                var s = e.F.ji();
                s &&
                  (n = n.filter(function (o) {
                    return o.bandwidth && s ? o.bandwidth <= s : !0;
                  }));
              }
              return (
                t &&
                  (n = n.filter(function (o) {
                    return cc(o, t, { width: i, height: r });
                  })),
                n.sort(function (o, u) {
                  return o.bandwidth - u.bandwidth;
                })
              );
            }
            function kC(e) {
              var t = [];
              e = x(e);
              for (var n = e.next(); !n.done; n = e.next())
                (n = n.value) &&
                  (n = n.video) &&
                  n.height &&
                  n.width &&
                  t.push({ height: n.height, width: n.width });
              return t.sort(function (r, i) {
                return r.width - i.width;
              });
            }
            (fe("shaka.abr.SimpleAbrManager", Et),
              (Et.prototype.configure = Et.prototype.configure),
              (Et.prototype.setCmsdManager = Et.prototype.setCmsdManager),
              (Et.prototype.setMediaElement = Et.prototype.setMediaElement),
              (Et.prototype.playbackRateChanged = Et.prototype.playbackRateChanged),
              (Et.prototype.setVariants = Et.prototype.setVariants),
              (Et.prototype.getBandwidthEstimate = Et.prototype.getBandwidthEstimate),
              (Et.prototype.trySuggestStreams = Et.prototype.trySuggestStreams),
              (Et.prototype.segmentDownloaded = Et.prototype.segmentDownloaded),
              (Et.prototype.disable = Et.prototype.disable),
              (Et.prototype.enable = Et.prototype.enable),
              (Et.prototype.chooseVariant = Et.prototype.chooseVariant),
              (Et.prototype.init = Et.prototype.init),
              (Et.prototype.release = Et.prototype.release),
              (Et.prototype.stop = Et.prototype.stop));
            var _C = 1;
            function T0(e, t) {
              var n = Br();
              ((this.l = e.maxAttempts == null ? n.maxAttempts : e.maxAttempts),
                (this.j = e.baseDelay == null ? n.baseDelay : e.baseDelay),
                (this.o = e.fuzzFactor == null ? n.fuzzFactor : e.fuzzFactor),
                (this.m = e.backoffFactor == null ? n.backoffFactor : e.backoffFactor),
                (this.g = 0),
                (this.h = this.j),
                (this.i = t === void 0 ? !1 : t) && (this.g = 1));
            }
            function S0(e) {
              var t, n;
              return j(function (r) {
                if (r.g == 1) {
                  if (e.g >= e.l)
                    if (e.i) ((e.g = 1), (e.h = e.j));
                    else throw new H(2, 7, 1010);
                  return (
                    (t = e.g),
                    e.g++,
                    t == 0
                      ? r.return()
                      : ((n = e.h * (1 + (Math.random() * 2 - 1) * e.o)),
                        I(
                          r,
                          new Promise(function (i) {
                            new Ve(i).ka(n / 1e3);
                          }),
                          2,
                        ))
                  );
                }
                ((e.h *= e.m), re(r));
              });
            }
            function Br() {
              return {
                maxAttempts: 2,
                baseDelay: 1e3,
                backoffFactor: 2,
                fuzzFactor: 0.5,
                timeout: 3e4,
                stallTimeout: 5e3,
                connectionTimeout: 1e4,
              };
            }
            function at() {
              var e,
                t,
                n = new Promise(function (r, i) {
                  ((e = r), (t = i));
                });
              return ((n.resolve = e), (n.reject = t), n);
            }
            ((at.prototype.resolve = function () {}), (at.prototype.reject = function () {}));
            function kt(e, t) {
              ((this.promise = e), (this.i = t), (this.g = null));
            }
            function ns(e) {
              return new kt(Promise.reject(e), function () {
                return Promise.resolve();
              });
            }
            function qh() {
              var e = Promise.reject(new H(2, 7, 7001));
              return (
                e.catch(function () {}),
                new kt(e, function () {
                  return Promise.resolve();
                })
              );
            }
            function Ao(e) {
              return new kt(Promise.resolve(e), function () {
                return Promise.resolve();
              });
            }
            function w0(e) {
              return new kt(e, function () {
                return e.catch(function () {});
              });
            }
            kt.prototype.abort = function () {
              return (this.g || (this.g = this.i()), this.g);
            };
            function A0(e) {
              return new kt(
                Promise.all(
                  e.map(function (t) {
                    return t.promise;
                  }),
                ),
                function () {
                  return Promise.all(
                    e.map(function (t) {
                      return t.abort();
                    }),
                  );
                },
              );
            }
            ((kt.prototype.finally = function (e) {
              return (
                this.promise.then(
                  function () {
                    return e(!0);
                  },
                  function () {
                    return e(!1);
                  },
                ),
                this
              );
            }),
              (kt.prototype.Xa = function (e, t) {
                function n(u) {
                  return function (l) {
                    if (i.g && u) s.reject(o);
                    else {
                      var p = u ? e : t;
                      p ? (r = PC(p, l, s)) : (u ? s.resolve : s.reject)(l);
                    }
                  };
                }
                function r() {
                  return (s.reject(o), i.abort());
                }
                var i = this,
                  s = new at();
                s.catch(function () {});
                var o = new H(2, 7, 7001);
                return (
                  this.promise.then(n(!0), n(!1)),
                  new kt(s, function () {
                    return r();
                  })
                );
              }));
            function PC(e, t, n) {
              try {
                var r = e(t);
                return r && r.promise && r.abort
                  ? (n.resolve(r.promise),
                    function () {
                      return r.abort();
                    })
                  : (n.resolve(r),
                    function () {
                      return Promise.resolve(r).then(
                        function () {},
                        function () {},
                      );
                    });
              } catch (i) {
                return (
                  n.reject(i),
                  function () {
                    return Promise.resolve();
                  }
                );
              }
            }
            (D.Object.defineProperties(kt.prototype, {
              aborted: {
                configurable: !0,
                enumerable: !0,
                get: function () {
                  return this.g !== null;
                },
              },
            }),
              fe("shaka.util.AbortableOperation", kt),
              (kt.prototype.chain = kt.prototype.Xa),
              (kt.prototype.finally = kt.prototype.finally),
              (kt.all = A0),
              (kt.prototype.abort = kt.prototype.abort),
              (kt.notAbortable = w0),
              (kt.completed = Ao),
              (kt.aborted = qh),
              (kt.failed = ns));
            function we(e, t) {
              if (t)
                if (t instanceof Map)
                  for (var n = x(t.keys()), r = n.next(); !r.done; r = n.next())
                    ((r = r.value),
                      Object.defineProperty(this, r, { value: t.get(r), writable: !0, enumerable: !0 }));
                else
                  for (n in t) Object.defineProperty(this, n, { value: t[n], writable: !0, enumerable: !0 });
              ((this.defaultPrevented = this.cancelable = this.bubbles = !1),
                (this.timeStamp = g.performance && g.performance.now ? g.performance.now() : Date.now()),
                (this.type = e),
                (this.isTrusted = !1),
                (this.target = this.currentTarget = null),
                (this.g = !1));
            }
            function E0(e) {
              var t = new we(e.type),
                n;
              for (n in e) Object.defineProperty(t, n, { value: e[n], writable: !0, enumerable: !0 });
              return t;
            }
            ((we.prototype.preventDefault = function () {
              this.cancelable && (this.defaultPrevented = !0);
            }),
              (we.prototype.stopImmediatePropagation = function () {
                this.g = !0;
              }),
              (we.prototype.stopPropagation = function () {}),
              fe("shaka.util.FakeEvent", we));
            var mc = {
              wl: "abrstatuschanged",
              xl: "adaptation",
              yl: "audiotrackchanged",
              zl: "audiotrackschanged",
              Al: "boundarycrossed",
              Bl: "buffering",
              Cl: "canupdatestarttime",
              Dl: "complete",
              El: "currentitemchanged",
              Fl: "downloadcompleted",
              Gl: "downloadfailed",
              Hl: "downloadheadersreceived",
              Il: "drmsessionupdate",
              Jl: "emsg",
              Pl: "itemsinserted",
              Ql: "itemsremoved",
              gm: "prft",
              Error: "error",
              Kl: "expirationupdated",
              Ll: "firstquartile",
              Ml: "gapjumped",
              Rl: "keystatuschanged",
              Ul: "loaded",
              Vl: "loading",
              Xl: "manifestparsed",
              Yl: "manifestupdated",
              Zl: "mediaqualitychanged",
              $l: "mediasourcerecovered",
              am: "metadataadded",
              Metadata: "metadata",
              bm: "midpoint",
              dm: "nospatialvideoinfo",
              fm: "onstatechange",
              hm: "ratechange",
              lm: "segmentappended",
              nm: "sessiondata",
              om: "spatialvideoinfo",
              pm: "stalldetected",
              qm: "started",
              rm: "statechanged",
              sm: "streaming",
              tm: "textchanged",
              um: "texttrackvisibility",
              vm: "thirdquartile",
              wm: "timelineregionadded",
              xm: "timelineregionenter",
              ym: "timelineregionexit",
              zm: "trackschanged",
              Bm: "unloading",
              Dm: "variantchanged",
            };
            function ot() {
              ((this.ab = new Fl()), (this.Je = this));
            }
            ((ot.prototype.addEventListener = function (e, t) {
              this.ab && this.ab.push(e, t);
            }),
              (ot.prototype.removeEventListener = function (e, t) {
                this.ab && this.ab.remove(e, t);
              }),
              (ot.prototype.dispatchEvent = function (e) {
                if (!this.ab) return !0;
                var t = this.ab.get(e.type) || [],
                  n = this.ab.get("All");
                for (n && (t = t.concat(n)), t = x(t), n = t.next(); !n.done; n = t.next()) {
                  ((n = n.value), (e.target = this.Je), (e.currentTarget = this.Je));
                  try {
                    n.handleEvent ? n.handleEvent(e) : n.call(this, e);
                  } catch (r) {}
                  if (e.g) break;
                }
                return e.defaultPrevented;
              }),
              (ot.prototype.release = function () {
                this.ab = null;
              }));
            function Eo() {
              this.g = [];
            }
            function js(e, t) {
              e.g.push(
                t.finally(function () {
                  Nr(e.g, t);
                }),
              );
            }
            Eo.prototype.destroy = function () {
              for (var e = [], t = x(this.g), n = t.next(); !n.done; n = t.next())
                ((n = n.value), n.promise.catch(function () {}), e.push(n.abort()));
              return ((this.g = []), Promise.all(e));
            };
            function yt(e, t, n, r, i, s, o) {
              (ot.call(this),
                (this.i = null),
                (this.j = !1),
                (this.u = new Eo()),
                (this.g = new Set()),
                (this.h = new Set()),
                (this.o = e || null),
                (this.m = t || null),
                (this.B = n || null),
                (this.C = r || null),
                (this.F = i || null),
                (this.H = s || null),
                (this.G = o || null),
                (this.l = new Map()));
            }
            (J(yt, ot),
              (h = yt.prototype),
              (h.configure = function (e) {
                this.i = e;
              }));
            function wi(e, t, n, r) {
              ((r = r === void 0 ? !1 : r), (n = n || k0));
              var i = vc.get(e);
              (!i || n >= i.priority) && vc.set(e, { priority: n, Bf: t, Ik: r });
            }
            function I0(e, t) {
              for (var n = x(e.g), r = n.next(); !r.done; r = n.next()) t.g.add(r.value);
              for (e = x(e.h), n = e.next(); !n.done; n = e.next()) t.h.add(n.value);
            }
            ((h.Lk = function (e) {
              this.g.add(e);
            }),
              (h.kl = function (e) {
                this.g.delete(e);
              }),
              (h.vj = function () {
                this.g.clear();
              }),
              (h.Mk = function (e) {
                this.h.add(e);
              }),
              (h.ll = function (e) {
                this.h.delete(e);
              }),
              (h.wj = function () {
                this.h.clear();
              }),
              (h.Wh = function () {
                this.l.clear();
              }));
            function Ut(e, t, n) {
              return {
                uris: e,
                method: "GET",
                body: null,
                headers: {},
                allowCrossSiteCredentials: !1,
                retryParameters: t,
                licenseRequestType: null,
                sessionId: null,
                drmInfo: null,
                initData: null,
                initDataType: null,
                streamDataCallback: n === void 0 ? null : n,
              };
            }
            ((h.destroy = function () {
              return (
                (this.j = !0),
                this.g.clear(),
                this.h.clear(),
                this.l.clear(),
                ot.prototype.release.call(this),
                this.u.destroy()
              );
            }),
              (h.request = function (e, t, n) {
                var r = this,
                  i = new R0();
                if (this.j) {
                  var s = Promise.reject(new H(2, 7, 7001));
                  return (
                    s.catch(function () {}),
                    new yc(
                      s,
                      function () {
                        return Promise.resolve();
                      },
                      i,
                    )
                  );
                }
                ((t.method = t.method || "GET"),
                  (t.headers = t.headers || {}),
                  (t.retryParameters = t.retryParameters ? Ur(t.retryParameters) : Br()),
                  (t.uris = Ur(t.uris)),
                  (s = DC(this, e, t, n)));
                var o = s.Xa(function () {
                    return C0(r, e, t, n, new T0(t.retryParameters, !1), 0, null, i);
                  }),
                  u = o.Xa(function (v) {
                    return LC(r, e, v, n);
                  }),
                  l = Date.now(),
                  p = 0;
                s.promise.then(
                  function () {
                    p = Date.now() - l;
                  },
                  function () {},
                );
                var m = 0;
                o.promise.then(
                  function () {
                    m = Date.now();
                  },
                  function () {},
                );
                var y = u.Xa(
                  function (v) {
                    var w = Date.now() - m,
                      A = v.response;
                    return (
                      (A.timeMs += p),
                      (A.timeMs += w),
                      v.jk ||
                        !r.o ||
                        A.fromCache ||
                        t.method == "HEAD" ||
                        e != Ar ||
                        r.o(A.timeMs, A.data.byteLength, M0(n), t, n),
                      r.G && r.G(e, A, n),
                      A
                    );
                  },
                  function (v) {
                    throw (v && (v.severity = 2), v);
                  },
                );
                return (
                  (s = new yc(
                    y.promise,
                    function () {
                      return y.abort();
                    },
                    i,
                  )),
                  js(this.u, s),
                  s
                );
              }));
            function DC(e, t, n, r) {
              function i(u) {
                s = s.Xa(function () {
                  return (n.body && (n.body = Tr(n.body)), u(t, n, r));
                });
              }
              var s = Ao(void 0);
              (e.F && i(e.F), (e = x(e.g)));
              for (var o = e.next(); !o.done; o = e.next()) i(o.value);
              return s.Xa(void 0, function (u) {
                throw u instanceof H && u.code == 7001 ? u : new H(2, 1, 1006, u);
              });
            }
            function C0(e, t, n, r, i, s, o, u) {
              (e.i.forceHTTP && (n.uris[s] = n.uris[s].replace("https://", "http://")),
                e.i.forceHTTPS && (n.uris[s] = n.uris[s].replace("http://", "https://")),
                s > 0 && e.H && e.H(t, r, n.uris[s], n.uris[s - 1]));
              var l = new Pt(n.uris[s]),
                p = l.fc,
                m = !1;
              (p || ((p = location.protocol), (p = p.slice(0, -1)), Vl(l, p), (n.uris[s] = l.toString())),
                (p = p.toLowerCase()));
              var y = (p = vc.get(p)) ? p.Bf : null;
              if (!y) return ns(new H(2, 1, 1e3, l));
              var v = p.Ik;
              (l = e.l.get(l.Db)) && (n.headers["common-access-token"] = l);
              var w = null,
                A = null,
                E = !1,
                C = !1,
                k;
              return w0(S0(i))
                .Xa(function () {
                  if (e.j) return qh();
                  k = Date.now();
                  var R = 0;
                  n.requestStartTime = Date.now();
                  var L = y(
                    n.uris[s],
                    n,
                    t,
                    function (b, B, N) {
                      (w && w.stop(),
                        A && A.ka(G / 1e3),
                        e.o &&
                          t == Ar &&
                          (R++, (n.packetNumber = R), e.o(b, B, M0(r), n, r), (m = !0), (u.g = N)));
                    },
                    function (b) {
                      ((C = !0), (n.timeToFirstByte = Date.now() - n.requestStartTime), e.m && e.m(b, n, t));
                    },
                    { minBytesForProgressEvents: e.i.minBytesForProgressEvents },
                  );
                  if (!v) return L;
                  var U = n.retryParameters.connectionTimeout;
                  U &&
                    ((w = new Ve(function () {
                      ((E = !0), L.abort());
                    })),
                    w.ka(U / 1e3));
                  var G = n.retryParameters.stallTimeout;
                  return (
                    G &&
                      (A = new Ve(function () {
                        ((E = !0), L.abort());
                      })),
                    L
                  );
                })
                .Xa(
                  function (R) {
                    (w && w.stop(), A && A.stop(), R.timeMs == null && (R.timeMs = Date.now() - k));
                    var L = R.headers["common-access-token"];
                    if (L) {
                      var U = new Pt(R.uri);
                      e.l.set(U.Db, L);
                    }
                    return (
                      (L = { response: R, jk: m }),
                      !C && e.m && e.m(R.headers, n, t),
                      e.B && e.B(n, R),
                      L
                    );
                  },
                  function (R) {
                    if ((w && w.stop(), A && A.stop(), e.C)) {
                      var L = null,
                        U = 0;
                      (R instanceof H && ((L = R), R.code == 1001 && (U = R.data[1])), e.C(n, L, U, E));
                    }
                    if (e.j) return qh();
                    if ((E && (R = new H(1, 1, 1003, n.uris[s], t)), R instanceof H)) {
                      if (R.code == 7001) throw R;
                      if (R.code == 1010) throw o;
                      if (R.severity == 1) {
                        if (
                          ((L = new Map().set("error", R)),
                          (L = new we("retry", L)),
                          (L.cancelable = !0),
                          e.dispatchEvent(L),
                          L.defaultPrevented)
                        )
                          throw R;
                        return ((s = (s + 1) % n.uris.length), C0(e, t, n, r, i, s, R, u));
                      }
                    }
                    throw R;
                  },
                );
            }
            function LC(e, t, n, r) {
              var i = Ao(void 0);
              e = x(e.h);
              for (var s = e.next(), o = {}; !s.done; o = { Pi: void 0 }, s = e.next())
                ((o.Pi = s.value),
                  (i = i.Xa(
                    (function (u) {
                      return function () {
                        var l = n.response;
                        return (l.data && (l.data = Tr(l.data)), (0, u.Pi)(t, l, r));
                      };
                    })(o),
                  )));
              return i.Xa(
                function () {
                  return n;
                },
                function (u) {
                  var l = 2;
                  if (u instanceof H) {
                    if (u.code == 7001) throw u;
                    l = u.severity;
                  }
                  throw new H(l, 1, 1007, u);
                },
              );
            }
            function M0(e) {
              if (e) {
                var t = e.segment;
                if (((e = e.stream), t && e && e.fastSwitching && t.Xc)) return !1;
              }
              return !0;
            }
            (fe("shaka.net.NetworkingEngine", yt),
              (yt.prototype.request = yt.prototype.request),
              (yt.prototype.destroy = yt.prototype.destroy),
              (yt.makeRequest = Ut),
              (yt.defaultRetryParameters = function () {
                return Br();
              }),
              (yt.prototype.clearCommonAccessTokenMap = yt.prototype.Wh),
              (yt.prototype.clearAllResponseFilters = yt.prototype.wj),
              (yt.prototype.unregisterResponseFilter = yt.prototype.ll),
              (yt.prototype.registerResponseFilter = yt.prototype.Mk),
              (yt.prototype.clearAllRequestFilters = yt.prototype.vj),
              (yt.prototype.unregisterRequestFilter = yt.prototype.kl),
              (yt.prototype.registerRequestFilter = yt.prototype.Lk),
              (yt.unregisterScheme = function (e) {
                vc.delete(e);
              }),
              (yt.registerScheme = wi),
              (yt.prototype.configure = yt.prototype.configure));
            function R0() {
              this.g = 0;
            }
            yt.NumBytesRemainingClass = R0;
            function yc(e, t, n) {
              (kt.call(this, e, t), (this.h = n));
            }
            (J(yc, kt), (yt.PendingRequest = yc));
            var Ar = 1;
            ((yt.RequestType = {
              MANIFEST: 0,
              SEGMENT: Ar,
              LICENSE: 2,
              APP: 3,
              TIMING: 4,
              SERVER_CERTIFICATE: 5,
              KEY: 6,
              ADS: 7,
              CONTENT_STEERING: 8,
              CMCD: 9,
            }),
              (yt.AdvancedRequestType = {
                INIT_SEGMENT: 0,
                MEDIA_SEGMENT: 1,
                MEDIA_PLAYLIST: 2,
                MASTER_PLAYLIST: 3,
                MPD: 4,
                MSS: 5,
                MPD_PATCH: 6,
                MEDIATAILOR_SESSION_INFO: 7,
                MEDIATAILOR_TRACKING_INFO: 8,
                MEDIATAILOR_STATIC_RESOURCE: 9,
                MEDIATAILOR_TRACKING_EVENT: 10,
                INTERSTITIAL_ASSET_LIST: 11,
                INTERSTITIAL_AD_URL: 12,
              }));
            var k0 = 3;
            yt.PluginPriority = { FALLBACK: 1, PREFERRED: 2, APPLICATION: k0 };
            var vc = new Map();
            function Io(e) {
              ((this.g = !1), (this.h = new at()), (this.i = e));
            }
            Io.prototype.destroy = function () {
              var e = this;
              return this.g
                ? this.h
                : ((this.g = !0),
                  this.i().then(
                    function () {
                      e.h.resolve();
                    },
                    function () {
                      e.h.resolve();
                    },
                  ));
            };
            function dt(e, t) {
              if (e.g) throw t instanceof H && t.code == 7003 ? t : new H(2, 7, 7003, t);
            }
            function Jh(e, t) {
              var n = [];
              e = x(e);
              for (var r = e.next(); !r.done; r = e.next()) n.push(t(r.value));
              return n;
            }
            function bC(e, t) {
              e = x(e);
              for (var n = e.next(); !n.done; n = e.next()) if (!t(n.value)) return !1;
              return !0;
            }
            function Co(e) {
              for (var t = new Map(), n = x(Object.keys(e)), r = n.next(); !r.done; r = n.next())
                ((r = r.value), t.set(r, e[r]));
              return t;
            }
            function Qh(e) {
              var t = {};
              return (
                e.forEach(function (n, r) {
                  t[r] = n;
                }),
                t
              );
            }
            function gt(e, t) {
              ((this.h = jn(e)), (this.i = t == _0), (this.g = 0));
            }
            ((h = gt.prototype),
              (h.Ia = function () {
                return this.g < this.h.byteLength;
              }),
              (h.Pa = function () {
                return this.g;
              }),
              (h.getLength = function () {
                return this.h.byteLength;
              }),
              (h.Y = function () {
                try {
                  var e = this.h.getUint8(this.g);
                  return ((this.g += 1), e);
                } catch (t) {
                  throw Ai();
                }
              }),
              (h.Ca = function () {
                try {
                  var e = this.h.getUint16(this.g, this.i);
                  return ((this.g += 2), e);
                } catch (t) {
                  throw Ai();
                }
              }),
              (h.U = function () {
                try {
                  var e = this.h.getUint32(this.g, this.i);
                  return ((this.g += 4), e);
                } catch (t) {
                  throw Ai();
                }
              }),
              (h.dh = function () {
                try {
                  var e = this.h.getInt32(this.g, this.i);
                  return ((this.g += 4), e);
                } catch (t) {
                  throw Ai();
                }
              }),
              (h.Ed = function () {
                try {
                  if (this.i)
                    var e = this.h.getUint32(this.g, !0),
                      t = this.h.getUint32(this.g + 4, !0);
                  else ((t = this.h.getUint32(this.g, !1)), (e = this.h.getUint32(this.g + 4, !1)));
                } catch (n) {
                  throw Ai();
                }
                if (t > 2097151) throw new H(2, 3, 3001);
                return ((this.g += 8), t * 4294967296 + e);
              }),
              (h.Tb = function (e, t) {
                if (this.g + e > this.h.byteLength) throw Ai();
                var n = De(this.h, this.g, e);
                return ((this.g += e), t ? new Uint8Array(n) : n);
              }),
              (h.skip = function (e) {
                if (this.g + e > this.h.byteLength) throw Ai();
                this.g += e;
              }),
              (h.Qi = function (e) {
                if (this.g < e) throw Ai();
                this.g -= e;
              }),
              (h.seek = function (e) {
                if (e < 0 || e > this.h.byteLength) throw Ai();
                this.g = e;
              }),
              (h.Yc = function () {
                for (var e = this.g; this.Ia() && this.h.getUint8(this.g) != 0; ) this.g += 1;
                return ((e = De(this.h, e, this.g - e)), (this.g += 1), St(e));
              }));
            function Ai() {
              return new H(2, 3, 3e3);
            }
            (fe("shaka.util.DataViewReader", gt),
              (gt.prototype.readTerminatedString = gt.prototype.Yc),
              (gt.prototype.seek = gt.prototype.seek),
              (gt.prototype.rewind = gt.prototype.Qi),
              (gt.prototype.skip = gt.prototype.skip),
              (gt.prototype.readBytes = gt.prototype.Tb),
              (gt.prototype.readUint64 = gt.prototype.Ed),
              (gt.prototype.readInt32 = gt.prototype.dh),
              (gt.prototype.readUint32 = gt.prototype.U),
              (gt.prototype.readUint16 = gt.prototype.Ca),
              (gt.prototype.readUint8 = gt.prototype.Y),
              (gt.prototype.getLength = gt.prototype.getLength),
              (gt.prototype.getPosition = gt.prototype.Pa),
              (gt.prototype.hasMoreData = gt.prototype.Ia));
            var _0 = 1;
            gt.Endianness = { BIG_ENDIAN: 0, LITTLE_ENDIAN: _0 };
            function ut() {
              ((this.i = new Map()), (this.h = new Map()), (this.g = !1));
            }
            ((h = ut.prototype),
              (h.box = function (e, t) {
                return ((e = P0(e)), this.i.set(e, NC), this.h.set(e, t), this);
              }),
              (h.S = function (e, t) {
                return ((e = P0(e)), this.i.set(e, D0), this.h.set(e, t), this);
              }),
              (h.stop = function () {
                this.g = !0;
              }),
              (h.parse = function (e, t, n) {
                for (e = new gt(e, 0), this.g = !1; e.Ia() && !this.g; ) this.Bd(0, e, t, n);
              }),
              (h.Bd = function (e, t, n, r) {
                var i = t.Pa();
                if (r && i + 8 > t.getLength()) this.g = !0;
                else {
                  var s = t.U(),
                    o = t.U(),
                    u = Tc(o),
                    l = !1;
                  switch (s) {
                    case 0:
                      s = t.getLength() - i;
                      break;
                    case 1:
                      if (r && t.Pa() + 8 > t.getLength()) {
                        this.g = !0;
                        return;
                      }
                      ((s = t.Ed()), (l = !0));
                  }
                  var p = this.h.get(o);
                  if (p) {
                    var m = null,
                      y = null;
                    if (this.i.get(o) == D0) {
                      if (r && t.Pa() + 4 > t.getLength()) {
                        this.g = !0;
                        return;
                      }
                      ((y = t.U()), (m = y >>> 24), (y &= 16777215));
                    }
                    ((o = i + s),
                      n && o > t.getLength() && (o = t.getLength()),
                      r && o > t.getLength()
                        ? (this.g = !0)
                        : ((o -= t.Pa()),
                          (t = o > 0 ? t.Tb(o, !1) : new Uint8Array(0)),
                          (t = new gt(t, 0)),
                          p({
                            name: u,
                            parser: this,
                            partialOkay: n || !1,
                            stopOnPartial: r || !1,
                            version: m,
                            flags: y,
                            reader: t,
                            size: s,
                            start: i + e,
                            has64BitSize: l,
                          })));
                  } else t.skip(Math.min(i + s - t.Pa(), t.getLength() - t.Pa()));
                }
              }));
            function Ue(e) {
              for (var t = rs(e); e.reader.Ia() && !e.parser.g; )
                e.parser.Bd(e.start + t, e.reader, e.partialOkay, e.stopOnPartial);
            }
            function Ei(e) {
              for (
                var t = rs(e), n = e.reader.U(), r = 0;
                r < n && (e.parser.Bd(e.start + t, e.reader, e.partialOkay, e.stopOnPartial), !e.parser.g);
                r++
              );
            }
            function Zn(e) {
              var t = rs(e);
              for (e.reader.skip(78); e.reader.Ia() && !e.parser.g; )
                e.parser.Bd(e.start + t, e.reader, e.partialOkay, e.stopOnPartial);
            }
            function xc(e) {
              var t = rs(e);
              e.reader.skip(8);
              var n = e.reader.Ca();
              for (
                e.reader.skip(6), n == 2 ? e.reader.skip(48) : e.reader.skip(12), n == 1 && e.reader.skip(16);
                e.reader.Ia() && !e.parser.g;
              )
                e.parser.Bd(e.start + t, e.reader, e.partialOkay, e.stopOnPartial);
            }
            function Mo(e, t) {
              return function (n) {
                e(n.reader.Tb(n.reader.getLength() - n.reader.Pa(), t));
              };
            }
            function P0(e) {
              var t = 0;
              e = x(e);
              for (var n = e.next(); !n.done; n = e.next()) t = (t << 8) | n.value.charCodeAt(0);
              return t;
            }
            function Tc(e) {
              return String.fromCharCode((e >> 24) & 255, (e >> 16) & 255, (e >> 8) & 255, e & 255);
            }
            function rs(e) {
              return 8 + (e.has64BitSize ? 8 : 0) + (e.flags != null ? 4 : 0);
            }
            (fe("shaka.util.Mp4Parser", ut),
              (ut.headerSize = rs),
              (ut.typeToString = Tc),
              (ut.allData = Mo),
              (ut.audioSampleEntry = xc),
              (ut.visualSampleEntry = Zn),
              (ut.sampleDescription = Ei),
              (ut.children = Ue),
              (ut.prototype.parseNext = ut.prototype.Bd),
              (ut.prototype.parse = ut.prototype.parse),
              (ut.prototype.stop = ut.prototype.stop),
              (ut.prototype.fullBox = ut.prototype.S),
              (ut.prototype.box = ut.prototype.box));
            var NC = 0,
              D0 = 1;
            function Zh(e) {
              var t = this;
              ((this.g = []),
                (this.h = []),
                (this.data = []),
                new ut()
                  .box("moov", Ue)
                  .box("moof", Ue)
                  .S("pssh", function (n) {
                    if (!(n.version > 1)) {
                      var r = De(n.reader.h, -12, n.size);
                      if ((t.data.push(r), (r = n.reader.Tb(16, !1)), t.g.push(pi(r)), n.version > 0)) {
                        r = n.reader.U();
                        for (var i = 0; i < r; i++) {
                          var s = n.reader.Tb(16, !1);
                          ((s = pi(s)), t.h.push(s));
                        }
                      }
                    }
                  })
                  .parse(e));
            }
            function Sc(e, t, n, r) {
              var i = e.length,
                s = 12 + t.length + 4 + i;
              r > 0 && (s += 4 + 16 * n.size);
              var o = new Uint8Array(s),
                u = jn(o),
                l = 0;
              if (
                (u.setUint32(l, s),
                (l += 4),
                u.setUint32(l, 1886614376),
                (l += 4),
                r < 1 ? u.setUint32(l, 0) : u.setUint32(l, 16777216),
                (l += 4),
                o.set(t, l),
                (l += t.length),
                r > 0)
              )
                for (u.setUint32(l, n.size), l += 4, t = x(n), n = t.next(); !n.done; n = t.next())
                  ((n = Ms(n.value)), o.set(n, l), (l += n.length));
              return (u.setUint32(l, i), o.set(e, l + 4), o);
            }
            function wc(e) {
              var t = this;
              ((this.F = e),
                (this.l = this.B = null),
                (this.$ = this.T = !1),
                (this.J = 0),
                (this.g = null),
                (this.o = new et()),
                (this.i = new Map()),
                (this.X = []),
                (this.C = new Map()),
                (this.K = !1),
                (this.m = new at()),
                (this.h = null),
                (this.u = function (n) {
                  (n.severity == 2 && t.m.reject(n), e.onError(n));
                }),
                (this.ba = new Map()),
                (this.ma = new Map()),
                (this.M = new Ve(function () {
                  return WC(t);
                })),
                (this.R = !1),
                (this.N = []),
                (this.oa = !1),
                (this.G = new Ve(function () {
                  $C(t);
                })),
                this.m.catch(function () {}),
                (this.j = new Io(function () {
                  return OC(t);
                })),
                (this.O = !1),
                (this.H = this.I = null),
                (this.V = function () {
                  return !1;
                }));
            }
            ((h = wc.prototype),
              (h.destroy = function () {
                return this.j.destroy();
              }));
            function OC(e) {
              return j(function (t) {
                switch (t.g) {
                  case 1:
                    return (
                      e.o.release(),
                      (e.o = null),
                      e.m.reject(),
                      e.G.stop(),
                      (e.G = null),
                      e.M.stop(),
                      (e.M = null),
                      I(t, su(e), 2)
                    );
                  case 2:
                    if (!e.l) {
                      t.A(3);
                      break;
                    }
                    return (ee(t, 4), I(t, e.l.setMediaKeys(null), 6));
                  case 6:
                    de(t, 5);
                    break;
                  case 4:
                    se(t);
                  case 5:
                    e.l = null;
                  case 3:
                    ((e.g = null),
                      (e.B = null),
                      (e.C = new Map()),
                      (e.h = null),
                      (e.u = function () {}),
                      (e.F = null),
                      (e.O = !1),
                      (e.I = null),
                      re(t));
                }
              });
            }
            h.configure = function (e, t) {
              ((this.h = e),
                t && (this.V = t),
                this.G && this.T && this.g && this.G.Ea(this.h.updateExpirationTime));
            };
            function UC(e, t, n) {
              return ((e.$ = !0), (e.C = new Map()), (e.R = n), b0(e, t, !1));
            }
            function L0(e, t, n, r) {
              ((r = r === void 0 ? !0 : r), (e.C = new Map()), (n = x(n)));
              for (var i = n.next(); !i.done; i = n.next())
                e.C.set(i.value, { initData: null, initDataType: null });
              for (n = x(e.h.persistentSessionsMetadata), i = n.next(); !i.done; i = n.next())
                ((i = i.value), e.C.set(i.sessionId, { initData: i.initData, initDataType: i.initDataType }));
              return ((e.R = e.C.size > 0), b0(e, t, r));
            }
            function jC(e, t, n, r, i, s) {
              var o, u, l, p, m;
              return j(function (y) {
                return y.g == 1
                  ? ((o = []),
                    s.length && o.push(s[0].contentType),
                    i.length && o.push(i[0].contentType),
                    (u = function (v) {
                      return (
                        (v = gi(t, v, null)),
                        (v.licenseServerUri = n),
                        (v.serverCertificate = r),
                        (v.persistentStateRequired = !0),
                        (v.sessionType = "persistent-license"),
                        v
                      );
                    }),
                    (l = v0(o)),
                    l.video && ((p = u(s[0].encryptionScheme || "")), l.video.drmInfos.push(p)),
                    l.audio && ((m = u(i[0].encryptionScheme || "")), l.audio.drmInfos.push(m)),
                    I(y, Kh([l], !0, e.O, []), 2))
                  : (dt(e.j), y.return(j0(e, [l])));
              });
            }
            function b0(e, t, n) {
              var r, i, s, o, u, l, p, m, y, v, w, A, E, C, k, R, L, U;
              return j(function (G) {
                if (G.g == 1) {
                  for (
                    z0(e.h.clearKeys, t),
                      r = t.some(function (b) {
                        return !!(
                          (b.video && b.video.drmInfos.length) ||
                          (b.audio && b.audio.drmInfos.length)
                        );
                      }),
                      i = Co(e.h.servers),
                      s = Co(e.h.advanced || {}),
                      !r && n && qC(t, i),
                      o = new WeakSet(),
                      u = x(t),
                      l = u.next();
                    !l.done;
                    l = u.next()
                  )
                    for (p = l.value, m = G0(p), y = x(m), v = y.next(); !v.done; v = y.next())
                      ((w = v.value), o.has(w) || (o.add(w), QC(w, i, s, e.h.keySystemsMapping)));
                  for (
                    A = function (b, B) {
                      var N = [];
                      b = x(b);
                      for (var z = b.next(); !z.done; z = b.next()) {
                        z = z.value;
                        var V = z[B] || (s.has(z.keySystem) && s.get(z.keySystem)[B]) || "",
                          X;
                        if (
                          ((X = V == "") && (X = (X = z.keySystem) ? !!X.match(/^com\.widevine\.alpha/) : !1),
                          X &&
                            (B == "audioRobustness"
                              ? (V = [e.h.defaultAudioRobustnessForWidevine])
                              : B == "videoRobustness" && (V = [e.h.defaultVideoRobustnessForWidevine])),
                          typeof V == "string")
                        )
                          N.push(z);
                        else if (Array.isArray(V))
                          for (V.length === 0 && (V = [""]), V = x(V), X = V.next(); !X.done; X = V.next()) {
                            var W = {};
                            N.push(Object.assign({}, z, ((W[B] = X.value), W)));
                          }
                      }
                      return N;
                    },
                      E = new WeakSet(),
                      C = x(t),
                      k = C.next();
                    !k.done;
                    k = C.next()
                  )
                    ((R = k.value),
                      R.video &&
                        !E.has(R.video) &&
                        ((R.video.drmInfos = A(R.video.drmInfos, "videoRobustness")),
                        (R.video.drmInfos = A(R.video.drmInfos, "audioRobustness")),
                        E.add(R.video)),
                      R.audio &&
                        !E.has(R.audio) &&
                        ((R.audio.drmInfos = A(R.audio.drmInfos, "videoRobustness")),
                        (R.audio.drmInfos = A(R.audio.drmInfos, "audioRobustness")),
                        E.add(R.audio)));
                  return I(G, Kh(t, e.R, e.O, e.h.preferredKeySystems), 2);
                }
                return (
                  dt(e.j),
                  (L = r || i.size > 0),
                  L
                    ? ((U = j0(e, t)), G.return(r ? U : U.catch(function () {})))
                    : ((e.T = !0), G.return(Promise.resolve()))
                );
              });
            }
            function N0(e) {
              var t;
              return j(function (n) {
                switch (n.g) {
                  case 1:
                    if (e.l.mediaKeys) return n.return();
                    if (!e.I) {
                      n.A(2);
                      break;
                    }
                    return I(n, e.I, 3);
                  case 3:
                    return (dt(e.j), n.return());
                  case 2:
                    return (ee(n, 4), (e.I = e.l.setMediaKeys(e.B)), I(n, e.I, 6));
                  case 6:
                    de(n, 5);
                    break;
                  case 4:
                    ((t = se(n)), e.u(new H(2, 6, 6003, t.message)));
                  case 5:
                    (dt(e.j), re(n));
                }
              });
            }
            function BC(e, t) {
              return j(function (n) {
                if (n.g == 1) return I(n, N0(e), 2);
                (iu(e, t.initDataType, De(t.initData)), re(n));
              });
            }
            h.Vb = function (e) {
              var t = this,
                n,
                r;
              return j(function (i) {
                if (i.g == 1)
                  return t.l === e
                    ? i.return()
                    : t.B
                      ? ((t.l = e),
                        t.h.delayLicenseRequestUntilPlayed &&
                          t.o.Aa(t.l, "play", function () {
                            for (var s = x(t.N), o = s.next(); !o.done; o = s.next()) np(t, o.value);
                            ((t.oa = !0), (t.N = []));
                          }),
                        t.l.remote
                          ? (t.o.D(t.l.remote, "connect", function () {
                              return su(t);
                            }),
                            t.o.D(t.l.remote, "connecting", function () {
                              return su(t);
                            }),
                            t.o.D(t.l.remote, "disconnect", function () {
                              return su(t);
                            }))
                          : "webkitCurrentPlaybackTargetIsWireless" in t.l &&
                            t.o.D(t.l, "webkitcurrentplaybacktargetiswirelesschanged", function () {
                              return su(t);
                            }),
                        (t.H =
                          (t.g &&
                            t.g.initData.find(function (s) {
                              return s.initData.length > 0;
                            })) ||
                          null),
                        (n = t.g.keySystem),
                        (r = Be().Vg(n)) || (!t.H && t.g.keySystem === "com.apple.fps" && !t.C.size)
                          ? i.A(2)
                          : I(i, N0(t), 2))
                      : (t.o.Aa(e, "encrypted", function () {
                          t.u(new H(2, 6, 6010));
                        }),
                        i.return());
                (O0(t).catch(function () {}),
                  (!r && (t.H || t.C.size || t.h.parseInbandPsshEnabled)) ||
                    t.o.D(t.l, "encrypted", function (s) {
                      return BC(t, s);
                    }),
                  re(i));
              });
            };
            function FC(e) {
              var t, n, r, i, s;
              return j(function (o) {
                switch (o.g) {
                  case 1:
                    if (!e.B || !e.g) return o.return();
                    if (
                      !e.g.serverCertificateUri ||
                      (e.g.serverCertificate && e.g.serverCertificate.length)
                    ) {
                      o.A(2);
                      break;
                    }
                    return (
                      (t = Ut([e.g.serverCertificateUri], e.h.retryParameters)),
                      ee(o, 3),
                      (n = e.F.vc.request(5, t, { isPreload: e.V() })),
                      I(o, n.promise, 5)
                    );
                  case 5:
                    ((r = o.h), (e.g.serverCertificate = De(r.data)), de(o, 4));
                    break;
                  case 3:
                    throw ((i = se(o)), new H(2, 6, 6017, i));
                  case 4:
                    if (e.j.g) return o.return();
                  case 2:
                    return !e.g.serverCertificate || !e.g.serverCertificate.length
                      ? o.return()
                      : (ee(o, 6), I(o, e.B.setServerCertificate(e.g.serverCertificate), 8));
                  case 8:
                    de(o, 0);
                    break;
                  case 6:
                    throw ((s = se(o)), new H(2, 6, 6004, s.message));
                }
              });
            }
            function VC(e, t) {
              var n, r, i;
              return j(function (s) {
                if (s.g == 1) return I(s, F0(e, t, { initData: null, initDataType: null }), 2);
                if (s.g != 3)
                  return (
                    (n = s.h),
                    n
                      ? ((r = []),
                        (i = e.i.get(n)) && ((i.Kb = new at()), r.push(i.Kb)),
                        r.push(n.remove()),
                        I(s, Promise.all(r), 3))
                      : s.return()
                  );
                (e.i.delete(n), re(s));
              });
            }
            function O0(e) {
              var t, n, r, i, s;
              return j(function (o) {
                if (o.g == 1)
                  return e.C.size
                    ? (e.C.forEach(function (u, l) {
                        F0(e, l, u);
                      }),
                      I(o, e.m, 3))
                    : o.A(2);
                if (o.g != 2) {
                  if (((t = (e.g && e.g.keyIds) || new Set([])), t.size > 0 && YC(e))) return o.return(e.m);
                  ((e.K = !1), (e.m = new at()), e.m.catch(function () {}));
                }
                for (n = (e.g ? e.g.initData : []) || [], r = x(n), i = r.next(); !i.done; i = r.next())
                  ((s = i.value), iu(e, s.initDataType, s.initData));
                return (ou(e) && e.m.resolve(), o.return(e.m));
              });
            }
            function iu(e, t, n) {
              if (n.length) {
                try {
                  n = e.h.initDataTransform(n, t, e.g);
                } catch (o) {
                  ((t = o), o instanceof H || (t = new H(2, 6, 6016, o)), e.u(t));
                  return;
                }
                if (e.h.ignoreDuplicateInitData) {
                  var r = e.i.values();
                  r = x(r);
                  for (var i = r.next(); !i.done; i = r.next()) if (fi(n, i.value.initData)) return;
                  var s = !1;
                  if (
                    (e.C.forEach(function (o) {
                      !s && fi(n, o.initData) && (s = !0);
                    }),
                    s)
                  )
                    return;
                }
                ((e.K = !0),
                  e.i.size > 0 &&
                    ou(e) &&
                    (e.m.resolve(), (e.K = !1), (e.m = new at()), e.m.catch(function () {})),
                  zC(e, t, n, e.g.sessionType));
              }
            }
            function U0(e) {
              return (
                (e = e.i.keys()),
                (e = Jh(e, function (t) {
                  return t.sessionId;
                })),
                Array.from(e)
              );
            }
            ((h.Kg = function () {
              var e = this,
                t = this.i.keys();
              return (
                (t = Jh(t, function (n) {
                  var r = e.i.get(n);
                  return {
                    sessionId: n.sessionId,
                    sessionType: r.type,
                    initData: r.initData,
                    initDataType: r.initDataType,
                  };
                })),
                Array.from(t)
              );
            }),
              (h.Zd = function () {
                var e = 1 / 0,
                  t = this.i.keys();
                t = x(t);
                for (var n = t.next(); !n.done; n = t.next())
                  ((n = n.value), isNaN(n.expiration) || (e = Math.min(e, n.expiration)));
                return e;
              }));
            function HC(e) {
              return e.J ? e.J : NaN;
            }
            h.$e = function () {
              return Qh(this.ma);
            };
            function j0(e, t) {
              var n, r, i, s, o, u, l;
              return j(function (p) {
                switch (p.g) {
                  case 1:
                    if (((n = new Map()), (r = GC(e, t, n)), !r))
                      throw navigator.requestMediaKeySystemAccess ? new H(2, 6, 6001) : new H(2, 6, 6020);
                    (dt(e.j), ee(p, 2), r.getConfiguration());
                    var m = (i = e.h.keySystemsMapping[r.keySystem] || r.keySystem),
                      y = n.get(i),
                      v = [],
                      w = [],
                      A = [],
                      E = [],
                      C = [],
                      k = new Set(),
                      R = new Set();
                    JC(y, v, w, E, A, C, k, R);
                    var L = e.R ? "persistent-license" : "temporary";
                    for (
                      m = {
                        keySystem: m,
                        encryptionScheme: v[0],
                        licenseServerUri: w[0],
                        distinctiveIdentifierRequired: y[0].distinctiveIdentifierRequired,
                        persistentStateRequired: y[0].persistentStateRequired,
                        sessionType: y[0].sessionType || L,
                        audioRobustness: y[0].audioRobustness || "",
                        videoRobustness: y[0].videoRobustness || "",
                        serverCertificate: E[0],
                        serverCertificateUri: A[0],
                        initData: C,
                        keyIds: k,
                        mediaTypes: y[0].mediaTypes,
                      },
                        R.size > 0 && (m.keySystemUris = R),
                        y = x(y),
                        R = y.next();
                      !R.done;
                      R = y.next()
                    )
                      ((R = R.value),
                        R.distinctiveIdentifierRequired &&
                          (m.distinctiveIdentifierRequired = R.distinctiveIdentifierRequired),
                        R.persistentStateRequired && (m.persistentStateRequired = R.persistentStateRequired));
                    if (((e.g = m), !e.g.licenseServerUri)) throw new H(2, 6, 6012, e.g.keySystem);
                    return I(p, r.createMediaKeys(), 4);
                  case 4:
                    if (
                      ((s = p.h),
                      dt(e.j),
                      (e.B = s),
                      !(e.h.minHdcpVersion != "" && "getStatusForPolicy" in e.B))
                    ) {
                      p.A(5);
                      break;
                    }
                    return (
                      ee(p, 6),
                      I(p, e.B.getStatusForPolicy({ minHdcpVersion: e.h.minHdcpVersion }), 8)
                    );
                  case 8:
                    if (((o = p.h), o != "usable")) throw new H(2, 6, 6018);
                    (dt(e.j), de(p, 5, 2));
                    break;
                  case 6:
                    throw ((u = se(p, 2)), u instanceof H ? u : new H(2, 6, 6019, u.message));
                  case 5:
                    return ((e.T = !0), e.G.Ea(e.h.updateExpirationTime), I(p, FC(e), 9));
                  case 9:
                    (dt(e.j), de(p, 0));
                    break;
                  case 2:
                    throw (
                      (l = se(p)),
                      dt(e.j, l),
                      (e.g = null),
                      l instanceof H ? l : new H(2, 6, 6002, l.message)
                    );
                }
              });
            }
            function GC(e, t, n) {
              for (var r = x(t), i = r.next(); !i.done; i = r.next()) {
                i = x(G0(i.value));
                for (var s = i.next(); !s.done; s = i.next())
                  ((s = s.value), n.has(s.keySystem) || n.set(s.keySystem, []), n.get(s.keySystem).push(s));
              }
              if (n.size == 1 && n.has("")) throw new H(2, 6, 6e3);
              ((r = e.h.preferredKeySystems),
                r.length || ((i = Co(e.h.servers)), i.size == 1 && (r = Array.from(i.keys()))),
                (i = x(r)));
              var o = i.next();
              for (s = {}; !o.done; s = { Ki: void 0 }, o = i.next()) {
                ((s.Ki = o.value), (o = x(t)));
                for (var u = o.next(); !u.done; u = o.next())
                  if (
                    (u = u.value.decodingInfos.find(
                      (function (y) {
                        return function (v) {
                          return (
                            v.supported && v.keySystemAccess != null && v.keySystemAccess.keySystem == y.Ki
                          );
                        };
                      })(s),
                    ))
                  )
                    return u.keySystemAccess;
              }
              for (i = x([!0, !1]), s = i.next(); !s.done; s = i.next())
                for (s = s.value, o = x(t), u = o.next(); !u.done; u = o.next()) {
                  u = x(u.value.decodingInfos);
                  for (var l = u.next(); !l.done; l = u.next())
                    if (((l = l.value), l.supported && l.keySystemAccess)) {
                      var p = l.keySystemAccess.keySystem;
                      if (!r.includes(p)) {
                        var m = n.get(p);
                        for (
                          !m && e.h.keySystemsMapping[p] && (m = n.get(e.h.keySystemsMapping[p])),
                            p = x(m),
                            m = p.next();
                          !m.done;
                          m = p.next()
                        )
                          if (!!m.value.licenseServerUri == s) return l.keySystemAccess;
                      }
                    }
                }
              return null;
            }
            function ep(e) {
              ou(e) && e.m.resolve();
            }
            function B0(e, t) {
              new Ve(function () {
                ((t.loaded = !0), ep(e));
              }).ka(eM);
            }
            function F0(e, t, n) {
              var r, i, s, o, u, l, p;
              return j(function (m) {
                switch (m.g) {
                  case 1:
                    try {
                      r = e.B.createSession("persistent-license");
                    } catch (y) {
                      return ((i = new H(2, 6, 6005, y.message)), e.u(i), m.return(Promise.reject(i)));
                    }
                    return (
                      e.o.D(r, "message", function (y) {
                        tp(e) ? e.N.push(y) : np(e, y);
                      }),
                      e.o.D(r, "keystatuseschange", function (y) {
                        return V0(e, y);
                      }),
                      (s = {
                        initData: n.initData,
                        initDataType: n.initDataType,
                        loaded: !1,
                        Yg: 1 / 0,
                        Kb: null,
                        type: "persistent-license",
                      }),
                      e.i.set(r, s),
                      ee(m, 2),
                      I(m, r.load(t), 4)
                    );
                  case 4:
                    return (
                      (o = m.h),
                      dt(e.j),
                      o ||
                        (e.i.delete(r),
                        (u = e.h.persistentSessionOnlinePlayback ? 1 : 2),
                        e.u(new H(u, 6, 6013)),
                        (s.loaded = !0)),
                      B0(e, s),
                      ep(e),
                      m.return(r)
                    );
                  case 2:
                    ((l = se(m)),
                      dt(e.j, l),
                      e.i.delete(r),
                      (p = e.h.persistentSessionOnlinePlayback ? 1 : 2),
                      e.u(new H(p, 6, 6005, l.message)),
                      (s.loaded = !0),
                      ep(e));
                  case 3:
                    return m.return(Promise.resolve());
                }
              });
            }
            function zC(e, t, n, r) {
              try {
                var i = e.B.createSession(r);
              } catch (s) {
                e.u(new H(2, 6, 6005, s.message));
                return;
              }
              (e.o.D(i, "message", function (s) {
                tp(e) ? e.N.push(s) : np(e, s);
              }),
                e.o.D(i, "keystatuseschange", function (s) {
                  return V0(e, s);
                }),
                e.i.set(i, { initData: n, initDataType: t, loaded: !1, Yg: 1 / 0, Kb: null, type: r }),
                e.h.logLicenseExchange && hi(n),
                i.generateRequest(t, n).catch(function (s) {
                  if (!e.j.g) {
                    e.i.delete(i);
                    var o = s.errorCode;
                    if (o && o.systemCode) {
                      var u = o.systemCode;
                      (u < 0 && (u += 4294967296), (u = "0x" + u.toString(16)));
                    }
                    e.u(new H(2, 6, 6006, s.message, s, u));
                  }
                }));
            }
            function tp(e) {
              return e.l
                ? e.h.delayLicenseRequestUntilPlayed && e.l.paused && !e.oa
                : !e.$ && e.h.delayLicenseRequestUntilPlayed;
            }
            function XC(e) {
              return j(function (t) {
                return t.g == 1
                  ? !e.K || tp(e)
                    ? t.A(0)
                    : I(t, e.m, 3)
                  : I(
                      t,
                      Promise.all(
                        e.X.map(function (n) {
                          return n.promise;
                        }),
                      ),
                      0,
                    );
              });
            }
            function np(e, t) {
              var n, r, i, s, o, u, l, p, m, y, v, w, A, E, C, k;
              j(function (R) {
                switch (R.g) {
                  case 1:
                    if (
                      ((n = t.target),
                      e.h.logLicenseExchange && hi(t.message),
                      (r = e.i.get(n)),
                      (i = e.g.licenseServerUri),
                      (s = e.h.advanced[e.g.keySystem]),
                      t.messageType == "individualization-request" &&
                        s &&
                        s.individualizationServer &&
                        (i = s.individualizationServer),
                      (o = Ut([i], e.h.retryParameters)),
                      (o.body = t.message),
                      (o.method = "POST"),
                      (o.licenseRequestType = t.messageType),
                      (o.sessionId = n.sessionId),
                      (o.drmInfo = e.g),
                      r && ((o.initData = r.initData), (o.initDataType = r.initDataType)),
                      s && s.headers)
                    )
                      for (u in s.headers) o.headers[u] = s.headers[u];
                    if (e.g.keySystem === "org.w3.clearkey") {
                      var L = o,
                        U = e.g;
                      try {
                        var G = ei(L.body);
                        if (G) {
                          var b = JSON.parse(G);
                          b.type || ((b.type = U.sessionType), (L.body = Or(JSON.stringify(b))));
                        }
                      } catch (B) {}
                    }
                    if (Ch(e.g.keySystem))
                      if (((L = Yi(o.body, !0, !0)), L.includes("PlayReadyKeyMessage"))) {
                        for (
                          L = Ds(L, "PlayReadyKeyMessage"), U = Yr(L, "HttpHeader"), U = x(U), G = U.next();
                          !G.done;
                          G = U.next()
                        )
                          ((b = G.value),
                            (G = Yr(b, "name")[0]),
                            (b = Yr(b, "value")[0]),
                            (o.headers[Dt(G)] = Dt(b)));
                        ((L = Yr(L, "Challenge")[0]), (o.body = Sr(Dt(L))));
                      } else o.headers["Content-Type"] = "text/xml; charset=utf-8";
                    return (
                      (l = Date.now()),
                      ee(R, 2),
                      (m = e.F.vc.request(2, o, { isPreload: e.V() })),
                      e.X.push(m),
                      I(R, m.promise, 4)
                    );
                  case 4:
                    ((p = R.h), Nr(e.X, m), de(R, 3));
                    break;
                  case 2:
                    return (
                      (y = se(R)),
                      e.j.g ||
                        ((v = {
                          sessionId: n.sessionId,
                          sessionType: r.type,
                          initData: r.initData,
                          initDataType: r.initDataType,
                        }),
                        (w = new H(2, 6, 6007, y, v)),
                        e.i.size == 1
                          ? (e.u(w), r && r.Kb && r.Kb.reject(w))
                          : (r && r.Kb && r.Kb.reject(w),
                            e.i.delete(n),
                            ou(e) && (e.m.resolve(), e.M.ka(0.1)))),
                      R.return()
                    );
                  case 3:
                    return e.j.g
                      ? R.return()
                      : ((e.J += (Date.now() - l) / 1e3),
                        e.h.logLicenseExchange && hi(p.data),
                        ee(R, 5),
                        I(R, n.update(p.data), 7));
                  case 7:
                    de(R, 6);
                    break;
                  case 5:
                    return (
                      (E = ((A = se(R)) && A.message) || String(A)),
                      (C = new H(2, 6, 6008, E)),
                      e.u(C),
                      r && r.Kb && r.Kb.reject(C),
                      R.return()
                    );
                  case 6:
                    if (e.j.g) return R.return();
                    ((k = new we("drmsessionupdate")),
                      e.F.onEvent(k),
                      r && (r.Kb && r.Kb.resolve(), B0(e, r)),
                      re(R));
                }
              });
            }
            function V0(e, t) {
              t = t.target;
              var n = e.i.get(t),
                r = !1;
              t.keyStatuses.forEach(function (s, o) {
                if (typeof o == "string") {
                  var u = o;
                  ((o = s), (s = u));
                }
                if (((u = Be()), Ch(e.g.keySystem) && o.byteLength == 16 && u.Ff())) {
                  u = jn(o);
                  var l = u.getUint32(0, !0),
                    p = u.getUint16(4, !0),
                    m = u.getUint16(6, !0);
                  (u.setUint32(0, l, !1), u.setUint16(4, p, !1), u.setUint16(6, m, !1));
                }
                (s != "status-pending" && (n.loaded = !0),
                  s == "expired" && (r = !0),
                  (o = pi(o).slice(0, 32)),
                  e.ba.set(o, s));
              });
              var i = t.expiration - Date.now();
              ((i < 0 || (r && i < 1e3)) && n && !n.Kb && (e.i.delete(t), H0(t)),
                ou(e) && (e.m.resolve(), e.M.ka(tM)));
            }
            function WC(e) {
              var t = e.ba,
                n = e.ma;
              (n.clear(),
                t.forEach(function (r, i) {
                  return n.set(i, r);
                }),
                (t = Array.from(n.values())),
                t.length &&
                  t.every(function (r) {
                    return r == "expired";
                  }) &&
                  e.u(new H(2, 6, 6014)),
                e.F.zf(Qh(n)));
            }
            function KC() {
              var e, t, n, r, i, s, o, u, l, p, m, y, v, w, A, E, C, k, R, L, U, G, b, B, N, z, V, X, W;
              return j(function (ie) {
                if (ie.g == 1) {
                  if (
                    ((e =
                      "org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(
                        " ",
                      )),
                    !(
                      g.MediaKeys &&
                      g.navigator &&
                      g.navigator.requestMediaKeySystemAccess &&
                      g.MediaKeySystemAccess &&
                      g.MediaKeySystemAccess.prototype.getConfiguration
                    ))
                  ) {
                    for (t = {}, n = x(e), r = n.next(); !r.done; r = n.next())
                      ((i = r.value), (t[i] = null));
                    return ie.return(t);
                  }
                  for (
                    s = "1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),
                      o = [
                        "SW_SECURE_CRYPTO",
                        "SW_SECURE_DECODE",
                        "HW_SECURE_CRYPTO",
                        "HW_SECURE_DECODE",
                        "HW_SECURE_ALL",
                      ],
                      u = ["150", "2000", "3000"],
                      l = {
                        "com.widevine.alpha": o,
                        "com.widevine.alpha.experiment": o,
                        "com.microsoft.playready.recommendation": u,
                      },
                      p = [
                        { contentType: 'video/mp4; codecs="avc1.42E01E"' },
                        { contentType: 'video/webm; codecs="vp8"' },
                      ],
                      m = [
                        { contentType: 'audio/mp4; codecs="mp4a.40.2"' },
                        { contentType: 'audio/webm; codecs="opus"' },
                      ],
                      y = {
                        videoCapabilities: p,
                        audioCapabilities: m,
                        initDataTypes: ["cenc", "sinf", "skd", "keyids"],
                      },
                      v = [null, "cenc", "cbcs"],
                      w = new Map(),
                      A = Be(),
                      E = function (ne, q, Z) {
                        var ae, ce, be, Te, Ze, Oe, st, Xe, He, $e, Qe, Ye, Ge;
                        return j(function (We) {
                          switch (We.g) {
                            case 1:
                              return (ee(We, 2), I(We, q.createMediaKeys(), 5));
                            case 5:
                              ae = We.h;
                            case 4:
                              de(We, 3);
                              break;
                            case 2:
                              return (se(We), We.return());
                            case 3:
                              if (
                                ((be = (ce = q.getConfiguration().sessionTypes)
                                  ? ce.includes("persistent-license")
                                  : !1),
                                A.Ci() && (be = !1),
                                (Te = q.getConfiguration().videoCapabilities),
                                (Ze = q.getConfiguration().audioCapabilities),
                                (Oe = {
                                  persistentState: be,
                                  encryptionSchemes: [],
                                  videoRobustnessLevels: [],
                                  audioRobustnessLevels: [],
                                  minHdcpVersions: [],
                                }),
                                w.get(ne) ? (Oe = w.get(ne)) : w.set(ne, Oe),
                                (st = Te[0].encryptionScheme) &&
                                  !Oe.encryptionSchemes.includes(st) &&
                                  Oe.encryptionSchemes.push(st),
                                (Xe = Te[0].robustness) &&
                                  !Oe.videoRobustnessLevels.includes(Xe) &&
                                  Oe.videoRobustnessLevels.push(Xe),
                                (He = Ze[0].robustness) &&
                                  !Oe.audioRobustnessLevels.includes(He) &&
                                  Oe.audioRobustnessLevels.push(He),
                                !(Z && ("getStatusForPolicy" in ae)))
                              ) {
                                We.A(0);
                                break;
                              }
                              (($e = x(s)), (Qe = $e.next()));
                            case 7:
                              if (Qe.done) {
                                We.A(0);
                                break;
                              }
                              if (((Ye = Qe.value), Oe.minHdcpVersions.includes(Ye))) {
                                We.A(8);
                                break;
                              }
                              return I(We, ae.getStatusForPolicy({ minHdcpVersion: Ye }), 10);
                            case 10:
                              if (((Ge = We.h), Ge == "usable"))
                                Oe.minHdcpVersions.includes(Ye) || Oe.minHdcpVersions.push(Ye);
                              else {
                                We.A(0);
                                break;
                              }
                            case 8:
                              ((Qe = $e.next()), We.A(7));
                          }
                        });
                      },
                      C = function (ne, q, Z, ae, ce) {
                        ce = ce === void 0 ? !1 : ce;
                        var be, Te, Ze, Oe, st, Xe, He, $e, Qe, Ye, Ge;
                        return j(function (We) {
                          switch (We.g) {
                            case 1:
                              for (
                                ee(We, 2), be = Ur(y), Te = x(be.videoCapabilities), Ze = Te.next();
                                !Ze.done;
                                Ze = Te.next()
                              )
                                ((Oe = Ze.value), (Oe.encryptionScheme = q), (Oe.robustness = Z));
                              for (st = x(be.audioCapabilities), Xe = st.next(); !Xe.done; Xe = st.next())
                                ((He = Xe.value), (He.encryptionScheme = q), (He.robustness = ae));
                              return (
                                ($e = Ur(be)),
                                ($e.persistentState = "required"),
                                ($e.sessionTypes = ["persistent-license"]),
                                (Qe = [$e, be]),
                                (Ge = Be()),
                                Ge.Oa() == "MOBILE"
                                  ? I(We, ac(5, navigator.requestMediaKeySystemAccess(ne, Qe)), 7)
                                  : I(We, navigator.requestMediaKeySystemAccess(ne, Qe), 6)
                              );
                            case 6:
                              ((Ye = We.h), We.A(5));
                              break;
                            case 7:
                              Ye = We.h;
                            case 5:
                              return I(We, E(ne, Ye, ce), 8);
                            case 8:
                              de(We, 0);
                              break;
                            case 2:
                              (se(We), re(We));
                          }
                        });
                      },
                      k = function (ne) {
                        return !(Be().Ha() === "WEBKIT" && ne === "org.w3.clearkey");
                      },
                      R = [],
                      L = x(e),
                      U = L.next();
                    !U.done;
                    U = L.next()
                  )
                    if (((G = U.value), w.set(G, null), k(G))) {
                      for (b = !0, B = x(v), N = B.next(); !N.done; N = B.next())
                        ((z = N.value), R.push(C(G, z, "", "", b)), (b = !1));
                      for (V = x(l[G] || []), X = V.next(); !X.done; X = V.next())
                        ((W = X.value), R.push(C(G, null, W, "")), R.push(C(G, null, "", W)));
                    }
                  return I(ie, Promise.all(R), 2);
                }
                return ie.return(Qh(w));
              });
            }
            function H0(e) {
              return j(function (t) {
                if (t.g == 1)
                  return (
                    ee(t, 2),
                    I(t, ac(ZC, Promise.all([e.close().catch(function () {}), e.closed])), 4)
                  );
                if (t.g != 2) return de(t, 0);
                (se(t), re(t));
              });
            }
            function su(e) {
              var t;
              return j(function (n) {
                return (
                  (t = Array.from(e.i.entries())),
                  e.i.clear(),
                  I(
                    n,
                    Promise.all(
                      t.map(function (r) {
                        r = x(r);
                        var i = r.next().value,
                          s = r.next().value;
                        return j(function (o) {
                          if (o.g == 1)
                            return (
                              ee(o, 2),
                              e.$ ||
                              e.C.has(i.sessionId) ||
                              s.type !== "persistent-license" ||
                              e.h.persistentSessionOnlinePlayback
                                ? I(o, H0(i), 5)
                                : I(o, i.remove(), 5)
                            );
                          if (o.g != 2) return de(o, 0);
                          (se(o), re(o));
                        });
                      }),
                    ),
                    0,
                  )
                );
              });
            }
            function G0(e) {
              return (e.video ? e.video.drmInfos : []).concat(e.audio ? e.audio.drmInfos : []);
            }
            function $C(e) {
              e.i.forEach(function (t, n) {
                var r = t.Yg,
                  i = n.expiration;
                (isNaN(i) && (i = 1 / 0), i != r && (e.F.onExpirationUpdated(n.sessionId, i), (t.Yg = i)));
              });
            }
            function ou(e) {
              return (
                (e = e.i.values()),
                bC(e, function (t) {
                  return t.loaded;
                })
              );
            }
            function YC(e) {
              for (var t = x((e.g && e.g.keyIds) || new Set([])), n = t.next(); !n.done; n = t.next())
                if (e.ba.get(n.value) !== "usable") return !1;
              return !0;
            }
            function qC(e, t) {
              var n = [];
              for (
                t.forEach(function (r, i) {
                  n.push({
                    keySystem: i,
                    licenseServerUri: r,
                    distinctiveIdentifierRequired: !1,
                    persistentStateRequired: !1,
                    audioRobustness: "",
                    videoRobustness: "",
                    serverCertificate: null,
                    serverCertificateUri: "",
                    initData: [],
                    keyIds: new Set(),
                  });
                }),
                  e = x(e),
                  t = e.next();
                !t.done;
                t = e.next()
              )
                ((t = t.value), t.video && (t.video.drmInfos = n), t.audio && (t.audio.drmInfos = n));
            }
            function JC(e, t, n, r, i, s, o, u) {
              var l = [];
              e = x(e);
              for (var p = e.next(), m = {}; !p.done; m = { La: void 0 }, p = e.next()) {
                if (
                  ((m.La = p.value),
                  t.includes(m.La.encryptionScheme) || t.push(m.La.encryptionScheme),
                  m.La.keySystem == "org.w3.clearkey" &&
                  m.La.licenseServerUri.startsWith("data:application/json;base64,")
                    ? l.includes(m.La.licenseServerUri) || l.push(m.La.licenseServerUri)
                    : n.includes(m.La.licenseServerUri) || n.push(m.La.licenseServerUri),
                  i.includes(m.La.serverCertificateUri) || i.push(m.La.serverCertificateUri),
                  m.La.serverCertificate &&
                    (r.some(
                      (function (w) {
                        return function (A) {
                          return fi(A, w.La.serverCertificate);
                        };
                      })(m),
                    ) ||
                      r.push(m.La.serverCertificate)),
                  m.La.initData)
                ) {
                  p = x(m.La.initData);
                  for (var y = p.next(), v = {}; !y.done; v = { Pg: void 0 }, y = p.next())
                    ((v.Pg = y.value),
                      s.some(
                        (function (w) {
                          return function (A) {
                            var E = w.Pg;
                            return A.keyId && A.keyId == E.keyId
                              ? !0
                              : A.initDataType == E.initDataType && fi(A.initData, E.initData);
                          };
                        })(v),
                      ) || s.push(v.Pg));
                }
                if (m.La.keyIds) for (p = x(m.La.keyIds), y = p.next(); !y.done; y = p.next()) o.add(y.value);
                if (m.La.keySystemUris && u)
                  for (m = x(m.La.keySystemUris), p = m.next(); !p.done; p = m.next()) u.add(p.value);
              }
              if (l.length == 1) n.push(l[0]);
              else if (l.length > 0) {
                for (t = [], l = x(l), r = l.next(); !r.done; r = l.next())
                  ((r = g.atob(r.value.split("data:application/json;base64,").pop())),
                    (r = JSON.parse(r)),
                    t.push.apply(t, Y(r.keys)));
                ((l = JSON.stringify({ keys: t })), n.push("data:application/json;base64," + g.btoa(l)));
              }
            }
            function QC(e, t, n, r) {
              var i = e.keySystem;
              i &&
                (i != "org.w3.clearkey" || !e.licenseServerUri) &&
                (t.size && t.get(i) && ((t = t.get(i)), (e.licenseServerUri = t)),
                e.keyIds || (e.keyIds = new Set()),
                (n = n.get(i)) &&
                  (e.distinctiveIdentifierRequired ||
                    (e.distinctiveIdentifierRequired = n.distinctiveIdentifierRequired),
                  e.persistentStateRequired || (e.persistentStateRequired = n.persistentStateRequired),
                  e.serverCertificate || (e.serverCertificate = n.serverCertificate),
                  n.sessionType && (e.sessionType = n.sessionType),
                  e.serverCertificateUri || (e.serverCertificateUri = n.serverCertificateUri)),
                r[i] && (e.keySystem = r[i]),
                g.cast &&
                  g.cast.__platform__ &&
                  i == "com.microsoft.playready" &&
                  (e.keySystem = "com.chromecast.playready"));
            }
            function z0(e, t) {
              if (((e = Co(e)), e.size != 0)) {
                ((e = Dv(e)), (t = x(t)));
                for (var n = t.next(); !n.done; n = t.next())
                  ((n = n.value), n.video && (n.video.drmInfos = [e]), n.audio && (n.audio.drmInfos = [e]));
              }
            }
            var ZC = 1,
              eM = 5,
              tM = 0.5;
            function nM() {
              ((this.g = Fs), (this.j = new Map().set(Fs, 2).set(Bs, 1)), (this.i = 0), (this.h = -1));
            }
            function rp(e, t) {
              var n = e.g !== t;
              return ((e.g = t), n && t === Fs && (e.i = Date.now()), n);
            }
            var Bs = 0,
              Fs = 1;
            /*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/ function ip(e, t, n) {
              ((this.h = e), (this.i = t), (this.g = n));
            }
            function X0(e, t) {
              return j(function (n) {
                if (n.g == 1)
                  return I(n, xC(e.g, t, e.h.drm.preferredKeySystems, e.h.drm.keySystemsMapping), 2);
                if (
                  (e.h.streaming.dontChooseCodecs ||
                    u0(
                      t,
                      e.h.preferredVideoCodecs,
                      e.h.preferredAudioCodecs,
                      e.h.preferredDecodingAttributes,
                      e.h.preferredTextFormats,
                    ),
                  !t.variants.some(ru))
                )
                  throw new H(2, 4, 4032);
                return n.return(K0(e, t));
              });
            }
            function W0(e, t) {
              var n = e.h.restrictions;
              e = e.i;
              var r = !1;
              t = x(t.variants);
              for (var i = t.next(); !i.done; i = t.next()) {
                i = i.value;
                var s = i.allowedByApplication;
                ((i.allowedByApplication = cc(i, n, e)), s != i.allowedByApplication && (r = !0));
              }
              return r;
            }
            function K0(e, t) {
              var n = W0(e, t);
              if (t) {
                var r = e.g ? e.g.g : null;
                if (r && e.g.B) {
                  for (var i = new Set(), s = x(t.variants), o = s.next(); !o.done; o = s.next())
                    ((o = o.value), o.audio && i.add(o.audio), o.video && i.add(o.video));
                  for (i = x(i), s = i.next(); !s.done; s = i.next()) $0(e, r.keySystem, s.value);
                }
                Y0(e, t);
              }
              return n;
            }
            function $0(e, t, n) {
              n = x(n.drmInfos);
              for (var r = n.next(); !r.done; r = n.next())
                if (((r = r.value), r.keySystem == t)) {
                  for (var i = x(r.initData || []), s = i.next(); !s.done; s = i.next())
                    ((s = s.value), iu(e.g, s.initDataType, s.initData));
                  ((i = e.g), i.g && i.g.mediaTypes !== r.mediaTypes && (i.g.mediaTypes = r.mediaTypes));
                }
            }
            function Y0(e, t) {
              function n(p) {
                if (p && !u.has(p) && (u.add(p), p.keyIds.size)) {
                  p = x(p.keyIds);
                  for (var m = p.next(); !m.done; m = p.next()) {
                    m = m.value;
                    var y = r[i ? "00" : m];
                    y ? q0.includes(y) && o.add(y) : s.add(m);
                  }
                }
              }
              var r = e.g ? e.g.$e() : {};
              e = Object.keys(r);
              var i = e.length && e[0] == "00";
              e = !1;
              var s = new Set(),
                o = new Set(),
                u = new WeakSet();
              t = x(t.variants);
              for (var l = t.next(); !l.done; l = t.next()) {
                if (((l = l.value), !l.allowedByApplication)) e = !0;
                else if (l.allowedByKeySystem) return;
                (n(l.audio), n(l.video));
              }
              throw (
                (e = {
                  hasAppRestrictions: e,
                  missingKeys: Array.from(s),
                  restrictedKeyStatuses: Array.from(o),
                }),
                new H(2, 4, 4012, e)
              );
            }
            var q0 = ["output-restricted", "internal-error"];
            fe("shaka.config.CodecSwitchingStrategy", { RELOAD: "reload", SMOOTH: "smooth" });
            function En(e) {
              if (sp.has(e)) return sp.get(e);
              var t = g.ManagedMediaSource || g.MediaSource;
              return t ? ((t = t.isTypeSupported(e)), sp.set(e, t), t) : !1;
            }
            function J0() {
              var e = g.ManagedMediaSource || g.MediaSource;
              return e && e.prototype
                ? !!e.prototype.setLiveSeekableRange && !!e.prototype.clearLiveSeekableRange
                : !1;
            }
            var sp = new Map();
            function Ac(e, t) {
              var n = null,
                r = null,
                i = null,
                s = null,
                o = e.U();
              return (
                t & 1 && (i = e.Ed()),
                t & 2 && (s = e.U()),
                t & 8 && (n = e.U()),
                t & 16 && (r = e.U()),
                { trackId: o, Wd: n, Xd: r, rj: i, Ri: s }
              );
            }
            function Ec(e, t) {
              return t == 1
                ? ((t = e.U()), (e = e.U()), { baseMediaDecodeTime: t * 4294967296 + e })
                : { baseMediaDecodeTime: e.U() };
            }
            function Ic(e, t) {
              return (
                t == 1 ? (e.skip(8), e.skip(8)) : (e.skip(4), e.skip(4)),
                (t = e.U()),
                e.skip(4),
                (e = e.Ca()),
                {
                  timescale: t,
                  language:
                    String.fromCharCode((e >> 10) + 96) +
                    String.fromCharCode(((e & 960) >> 5) + 96) +
                    String.fromCharCode((e & 31) + 96),
                }
              );
            }
            function Cc(e, t, n) {
              var r = e.U(),
                i = [],
                s = null;
              (n & 1 && (s = e.dh()), n & 4 && e.skip(4));
              for (var o = 0; o < r; o++) {
                var u = { nh: null, sampleSize: null, Gf: null };
                (n & 256 && (u.nh = e.U()),
                  n & 512 && (u.sampleSize = e.U()),
                  n & 1024 && e.skip(4),
                  n & 2048 && (u.Gf = t == 0 ? e.U() : e.dh()),
                  i.push(u));
              }
              return { Hm: r, mh: i, qg: s };
            }
            function Q0(e) {
              (e.skip(6), e.skip(2), e.skip(8));
              var t = e.Ca();
              return (
                e.skip(2),
                e.skip(2),
                e.skip(2),
                (e = e.Ca() + e.Ca() / 65536),
                { channelCount: t, sampleRate: e }
              );
            }
            function op(e) {
              return ((e = e.U()), { codec: Tc(e) });
            }
            function rM(e) {
              var t = null,
                n = null,
                r = e.Tb(4, !1),
                i = String.fromCharCode(r[0]);
              if (
                ((i += String.fromCharCode(r[1])),
                (i += String.fromCharCode(r[2])),
                (i += String.fromCharCode(r[3])),
                i === "nclx")
              ) {
                switch (e.Ca()) {
                  case 1:
                  case 5:
                  case 6:
                  case 7:
                    t = "srgb";
                    break;
                  case 9:
                    t = "rec2020";
                    break;
                  case 11:
                  case 12:
                    t = "p3";
                }
                switch (((r = e.Ca()), e.Ca(), r)) {
                  case 1:
                  case 6:
                  case 13:
                  case 14:
                  case 15:
                    n = "SDR";
                    break;
                  case 16:
                    n = "PQ";
                    break;
                  case 18:
                    n = "HLG";
                }
              }
              return { colorGamut: t, ze: n };
            }
            function au(e, t) {
              return (
                (t = t === void 0 ? !1 : t),
                (e = e.toString(16).toUpperCase()),
                t ? e : ("0" + e).slice(-2)
              );
            }
            function er(e) {
              return (e < 10 ? "0" : "") + e;
            }
            function Ro(e) {
              this.g = e;
            }
            function ko(e) {
              for (var t = [], n = x(e.g), r = n.next(); !r.done; r = n.next()) {
                var i = t,
                  s = i.push,
                  o = r.value;
                r = Ke;
                var u = o.id + 1,
                  l = o.stream.width || 0,
                  p = o.stream.height || 0;
                o.type == "audio" && (p = l = 0);
                var m = o.duration * o.timescale,
                  y = Math.floor(m / (is + 1));
                switch (
                  ((m = Math.floor(m % (is + 1))),
                  (u = new Uint8Array(
                    [1, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(
                      Y(wt(u, 4)),
                      [0, 0, 0, 0],
                      Y(wt(y, 4)),
                      Y(wt(m, 4)),
                      [
                        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                        0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0,
                      ],
                      Y(wt(l, 2)),
                      [0, 0],
                      Y(wt(p, 2)),
                      [0, 0],
                    ),
                  )),
                  (u = Ke("tkhd", u)),
                  (l = Ke),
                  (y = o.duration * o.timescale),
                  (p = Math.floor(y / (is + 1))),
                  (y = Math.floor(y % (is + 1))),
                  (m = o.stream.language),
                  (m =
                    ((m.charCodeAt(0) - 96) << 10) | ((m.charCodeAt(1) - 96) << 5) | (m.charCodeAt(2) - 96)),
                  (p = new Uint8Array(
                    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(
                      Y(wt(o.timescale, 4)),
                      Y(wt(p, 4)),
                      Y(wt(y, 4)),
                      Y(wt(m, 2)),
                      [0, 0],
                    ),
                  )),
                  (p = Ke("mdhd", p)),
                  (y = o),
                  (m = new Uint8Array([])),
                  y.type)
                ) {
                  case "video":
                    m = sM.value();
                    break;
                  case "audio":
                    m = oM.value();
                }
                y = Ke("hdlr", m);
                e: {
                  switch (o.type) {
                    case "video":
                      o = Ke("minf", Ke("vmhd", dM.value()), ix.value(), Z0(o));
                      break e;
                    case "audio":
                      o = Ke("minf", Ke("smhd", fM.value()), ix.value(), Z0(o));
                      break e;
                  }
                  o = new Uint8Array([]);
                }
                ((o = l("mdia", p, y, o)), (r = r("trak", u, o)), s.call(i, r));
              }
              for (
                t = Nt.apply(dn, Y(t)),
                  s = e.g[0],
                  n = Ke,
                  r = s.duration * s.timescale,
                  i = Math.floor(r / (is + 1)),
                  r = Math.floor(r % (is + 1)),
                  i = new Uint8Array(
                    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(
                      Y(wt(s.timescale, 4)),
                      Y(wt(i, 4)),
                      Y(wt(r, 4)),
                      [
                        0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                        0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0,
                        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255,
                      ],
                    ),
                  ),
                  i = Ke("mvhd", i),
                  r = [],
                  e = x(e.g),
                  l = e.next();
                !l.done;
                l = e.next()
              )
                ((o = r),
                  (u = o.push),
                  (l = new Uint8Array(
                    [0, 0, 0, 0].concat(
                      Y(wt(l.value.id + 1, 4)),
                      [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                    ),
                  )),
                  (l = Ke("trex", l)),
                  u.call(o, l));
              if (((e = Nt.apply(dn, Y(r))), (e = Ke("mvex", e)), (r = []), s.encrypted)) {
                for (s = x(s.stream.drmInfos), o = s.next(); !o.done; o = s.next())
                  if (((o = o.value), o.initData))
                    for (o = x(o.initData), u = o.next(); !u.done; u = o.next()) r.push(u.value.initData);
                s = Nt.apply(dn, Y(r));
              } else s = new Uint8Array([]);
              return (
                (e = n("moov", i, t, e, s)),
                (t = pM.value()),
                (n = new Uint8Array(t.byteLength + e.byteLength)),
                n.set(t),
                n.set(e, t.byteLength),
                n
              );
            }
            function Z0(e) {
              var t = Ke,
                n = "aac";
              e.codecs.includes("mp3")
                ? (n = "mp3")
                : e.codecs.includes("ac-3")
                  ? (n = Be().se() ? "ec-3" : "ac-3")
                  : e.codecs.includes("ec-3")
                    ? (n = "ec-3")
                    : e.codecs.includes("opus") && (n = "opus");
              var r = new Uint8Array([]);
              switch (e.type) {
                case "video":
                  if (e.codecs.includes("avc1")) {
                    if (((n = e.stream.width || 0), (r = e.stream.height || 0), e.Sa.byteLength > 0))
                      var i = Ke("avcC", e.Sa);
                    else {
                      i = Ke;
                      for (var s = 7, o = [], u = [], l = 0, p = 0, m = 0, y = 0; y < e.Bb.length; y++) {
                        var v = tx(e.Bb[y]);
                        switch (v[0] & 31) {
                          case 7:
                            (o.push(v), (s += v.length + 2));
                            break;
                          case 8:
                            (u.push(v), (s += v.length + 2));
                        }
                      }
                      for (
                        o.length > 0 && ((l = o[0][1]), (m = o[0][2]), (p = o[0][3])),
                          s = new Uint8Array(s),
                          y = 0,
                          s[y++] = 1,
                          s[y++] = l,
                          s[y++] = m,
                          s[y++] = p,
                          s[y++] = 255,
                          s[y++] = 224 | o.length,
                          l = 0;
                        l < o.length;
                        l++
                      )
                        ((s[y++] = (o[l].length & 65280) >> 8),
                          (s[y++] = o[l].length & 255),
                          s.set(o[l], y),
                          (y += o[l].length));
                      for (s[y++] = u.length, o = 0; o < u.length; o++)
                        ((s[y++] = (u[o].length & 65280) >> 8),
                          (s[y++] = u[o].length & 255),
                          s.set(u[o], y),
                          (y += u[o].length));
                      i = i("avcC", s);
                    }
                    ((n = new Uint8Array(
                      [0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0].concat(
                        Y(wt(n, 2)),
                        Y(wt(r, 2)),
                        [
                          0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 19, 118, 105, 100, 101, 111, 106, 115,
                          45, 99, 111, 110, 116, 114, 105, 98, 45, 104, 108, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                          0, 0, 0, 0, 24, 17, 17,
                        ],
                      ),
                    )),
                      (r = "avc1"),
                      (u = ex(e)),
                      (o = new Uint8Array([])),
                      e.encrypted && ((o = Vs(e.stream, e.codecs)), (r = "encv")),
                      (r = Ke(r, n, i, u, o)));
                  } else
                    e.codecs.includes("hvc1") &&
                      ((r = e.stream.width || 0),
                      (i = e.stream.height || 0),
                      (n = new Uint8Array([])),
                      e.Sa.byteLength > 0 && (n = Ke("hvcC", e.Sa)),
                      (r = new Uint8Array(
                        [0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0].concat(
                          Y(wt(r, 2)),
                          Y(wt(i, 2)),
                          [
                            0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 19, 118, 105, 100, 101, 111, 106, 115,
                            45, 99, 111, 110, 116, 114, 105, 98, 45, 104, 108, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                            0, 0, 0, 0, 24, 17, 17,
                          ],
                        ),
                      )),
                      (i = "hvc1"),
                      (u = ex(e)),
                      (o = new Uint8Array([])),
                      e.encrypted && ((o = Vs(e.stream, e.codecs)), (i = "encv")),
                      (r = Ke(i, r, n, u, o)));
                  break;
                case "audio":
                  (n == "mp3"
                    ? (e = Ke(".mp3", uu(e)))
                    : n == "ac-3"
                      ? ((n = Ke("dac3", e.Ga)),
                        (r = "ac-3"),
                        (i = new Uint8Array([])),
                        e.encrypted && ((i = Vs(e.stream, e.codecs)), (r = "enca")),
                        (e = Ke(r, uu(e), n, i)))
                      : n == "ec-3"
                        ? ((n = Ke("dec3", e.Ga)),
                          (r = "ec-3"),
                          (i = new Uint8Array([])),
                          e.encrypted && ((i = Vs(e.stream, e.codecs)), (r = "enca")),
                          (e = Ke(r, uu(e), n, i)))
                        : n == "opus"
                          ? ((n = Ke("dOps", e.Ga)),
                            (r = "Opus"),
                            (i = new Uint8Array([])),
                            e.encrypted && ((i = Vs(e.stream, e.codecs)), (r = "enca")),
                            (e = Ke(r, uu(e), n, i)))
                          : (e.Ga.byteLength > 0
                              ? (n = Ke("esds", e.Ga))
                              : ((n = Ke),
                                (r = e.id + 1),
                                (i = e.stream.channelsCount || 2),
                                (o = e.stream.audioSamplingRate || 44100),
                                (l = ho("audio", e.codecs.split(","))),
                                (p = {
                                  96e3: 0,
                                  88200: 1,
                                  64e3: 2,
                                  48e3: 3,
                                  44100: 4,
                                  32e3: 5,
                                  24e3: 6,
                                  22050: 7,
                                  16e3: 8,
                                  12e3: 9,
                                  11025: 10,
                                  8e3: 11,
                                  7350: 12,
                                }),
                                (u = p[o]),
                                (l === "mp4a.40.5" || l === "mp4a.40.29") && (u = p[o * 2]),
                                (o = parseInt(l.split(".").pop(), 10)),
                                (r = new Uint8Array(
                                  [0, 0, 0, 0, 3, 25].concat(Y(wt(r, 2)), [
                                    0,
                                    4,
                                    17,
                                    64,
                                    21,
                                    0,
                                    0,
                                    0,
                                    0,
                                    0,
                                    0,
                                    0,
                                    0,
                                    0,
                                    0,
                                    0,
                                    5,
                                    2,
                                    (o << 3) | (u >>> 1),
                                    (u << 7) | (i << 3),
                                    6,
                                    1,
                                    2,
                                  ]),
                                )),
                                (n = n("esds", r))),
                            (r = "mp4a"),
                            (i = new Uint8Array([])),
                            e.encrypted && ((i = Vs(e.stream, e.codecs)), (r = "enca")),
                            (e = Ke(r, uu(e), n, i))),
                    (r = e));
              }
              return (
                (e = Ke("stsd", hM.value(), r)),
                t(
                  "stbl",
                  e,
                  Ke("stts", aM.value()),
                  Ke("stsc", uM.value()),
                  Ke("stsz", cM.value()),
                  Ke("stco", lM.value()),
                )
              );
            }
            function ex(e) {
              if (!e.Za && !e.$a) return new Uint8Array([]);
              var t = e.$a;
              return ((e = new Uint8Array([].concat(Y(wt(e.Za, 4)), Y(wt(t, 4))))), Ke("pasp", e));
            }
            function uu(e) {
              return new Uint8Array(
                [
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  1,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  e.stream.channelsCount || 2,
                  0,
                  16,
                  0,
                  0,
                  0,
                  0,
                ].concat(Y(wt(e.stream.audioSamplingRate || 44100, 2)), [0, 0]),
              );
            }
            function Vs(e, t) {
              var n = Ke;
              ((t = new Uint8Array([].concat(Y(wt(nx(t.split(".")[0]), 4))))), (t = Ke("frma", t)));
              var r = "cenc",
                i = e.drmInfos[0];
              (i && i.encryptionScheme && (r = i.encryptionScheme),
                (r = new Uint8Array([0, 0, 0, 0].concat(Y(wt(nx(r), 4)), [0, 1, 0, 0]))),
                (r = Ke("schm", r)),
                (i = Ke));
              var s = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);
              e = x(e.drmInfos);
              for (var o = e.next(); !o.done; o = e.next())
                if ((o = o.value) && o.keyIds && o.keyIds.size) {
                  o = x(o.keyIds);
                  for (var u = o.next(); !u.done; u = o.next()) s = tx(u.value);
                }
              return (
                (e = new Uint8Array([0, 0, 0, 0, 0, 0, 1, 8])),
                (s = Ke("tenc", e, s)),
                n("sinf", t, r, i("schi", s))
              );
            }
            function lu(e) {
              var t = [];
              e = x(e.g);
              for (var n = e.next(); !n.done; n = e.next()) {
                n = n.value;
                var r = t.push,
                  i = r.apply,
                  s = Ke,
                  o = new Uint8Array([0, 0, 0, 0].concat(Y(wt(n.data ? n.data.sequenceNumber : 0, 4))));
                o = Ke("mfhd", o);
                var u,
                  l = n.data ? n.data.zb : [],
                  p = new Uint8Array(4 + l.length);
                for (u = 0; u < l.length; u++) {
                  var m = l[u].flags;
                  p[u + 4] = (m.ib << 4) | (m.mb << 2) | m.jb;
                }
                l = Ke("sdtp", p);
                var y = l.length + 32 + 20 + 8 + 16 + 8 + 8;
                ((p = Ke),
                  (u = new Uint8Array(
                    [0, 0, 0, 58].concat(
                      Y(wt(n.id + 1, 4)),
                      [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                    ),
                  )),
                  (u = Ke("tfhd", u)),
                  (m = n.data ? n.data.baseMediaDecodeTime : 0));
                var v = Math.floor(m % (is + 1));
                ((m = new Uint8Array([1, 0, 0, 0].concat(Y(wt(Math.floor(m / (is + 1)), 4)), Y(wt(v, 4))))),
                  (m = Ke("tfdt", m)));
                var w = y;
                ((y = n.data ? n.data.zb : []), (v = y.length));
                var A = 12 + 16 * v,
                  E = new Uint8Array(A);
                for (
                  w += 8 + A,
                    E.set([n.type === "video" ? 1 : 0, 0, 15, 1].concat(Y(wt(v, 4)), Y(wt(w, 4))), 0),
                    w = 0;
                  w < v;
                  w++
                ) {
                  var C = y[w];
                  A = wt(C.duration, 4);
                  var k = wt(C.size, 4),
                    R = C.flags;
                  ((C = wt(C.sb, 4)),
                    E.set(
                      [].concat(
                        Y(A),
                        Y(k),
                        [(R.xb << 2) | R.ib, (R.mb << 6) | (R.jb << 4) | R.yb, R.hb & 61440, R.hb & 15],
                        Y(C),
                      ),
                      12 + 16 * w,
                    ));
                }
                ((y = Ke("trun", E)),
                  (l = p("traf", u, m, y, l)),
                  (s = s("moof", o, l)),
                  i.call(r, t, [s, iM(n)]));
              }
              return Nt.apply(dn, Y(t));
            }
            function iM(e) {
              return (
                (e = (e.data ? e.data.zb : []).map(function (t) {
                  return t.data;
                })),
                (e = Nt.apply(dn, Y(e))),
                Ke("mdat", e)
              );
            }
            function wt(e, t) {
              var n = [];
              for (--t; t >= 0; t--) n.push((e >> (8 * t)) & 255);
              return n;
            }
            function tx(e) {
              for (var t = new Uint8Array(e.length / 2), n = 0; n < e.length / 2; n += 1)
                t[n] = parseInt(String(e[n * 2] + e[n * 2 + 1]), 16);
              return t;
            }
            function nx(e) {
              for (var t = 0, n = 0; n < e.length; n += 1) t |= e.charCodeAt(n) << ((e.length - n - 1) * 8);
              return t;
            }
            function Ke(e) {
              var t = At.apply(1, arguments),
                n = rx.get(e);
              n || ((n = [e.charCodeAt(0), e.charCodeAt(1), e.charCodeAt(2), e.charCodeAt(3)]), rx.set(e, n));
              for (var r = 8, i = t.length - 1; i >= 0; i--) r += t[i].byteLength;
              for (
                i = new Uint8Array(r),
                  i[0] = (r >> 24) & 255,
                  i[1] = (r >> 16) & 255,
                  i[2] = (r >> 8) & 255,
                  i[3] = r & 255,
                  i.set(n, 4),
                  n = 0,
                  r = 8;
                n < t.length;
                n++
              )
                (i.set(t[n], r), (r += t[n].byteLength));
              return i;
            }
            var is = 4294967295,
              rx = new Map(),
              sM = new xt(function () {
                return new Uint8Array([
                  0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 86, 105,
                  100, 101, 111, 72, 97, 110, 100, 108, 101, 114, 0,
                ]);
              }),
              oM = new xt(function () {
                return new Uint8Array([
                  0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111,
                  117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0,
                ]);
              }),
              aM = new xt(function () {
                return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
              }),
              uM = new xt(function () {
                return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
              }),
              lM = new xt(function () {
                return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
              }),
              cM = new xt(function () {
                return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);
              }),
              dM = new xt(function () {
                return new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]);
              }),
              fM = new xt(function () {
                return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
              }),
              hM = new xt(function () {
                return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]);
              }),
              pM = new xt(function () {
                var e = new Uint8Array([105, 115, 111, 109]),
                  t = new Uint8Array([97, 118, 99, 49]),
                  n = new Uint8Array([0, 0, 0, 1]);
                return Ke("ftyp", e, n, e, t);
              }),
              ix = new xt(function () {
                var e = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1]);
                return ((e = Ke("dref", e)), Ke("dinf", e));
              });
            function gM(e) {
              e = De(e);
              var t = null;
              return (
                new ut()
                  .box("moov", Ue)
                  .box("trak", Ue)
                  .box("mdia", Ue)
                  .box("minf", Ue)
                  .box("stbl", Ue)
                  .S("stsd", Ei)
                  .box("enca", function (n) {
                    return ((t = n.reader.h), xc(n));
                  })
                  .box("sinf", Ue)
                  .box("frma", function (n) {
                    (n.parser.stop(),
                      op(n.reader).codec === "ec-3" && t && t.getUint16(16) !== 2 && t.setUint16(16, 2));
                  })
                  .parse(e),
                e
              );
            }
            function mM(e, t, n) {
              function r(w) {
                y.push({ box: w, Ei: 1701733217 });
              }
              function i(w) {
                y.push({ box: w, Ei: 1701733238 });
              }
              function s(w) {
                ((l = !0), w.parser.stop());
              }
              function o(w) {
                (m.push(w), Ue(w));
              }
              var u = (t = De(t)),
                l = !1,
                p,
                m = [],
                y = [];
              if (
                (new ut()
                  .box("moov", o)
                  .box("trak", o)
                  .box("mdia", o)
                  .box("minf", o)
                  .box("stbl", o)
                  .S("stsd", function (w) {
                    ((p = w), m.push(w), Ei(w));
                  })
                  .S("encv", s)
                  .S("enca", s)
                  .S("dvav", i)
                  .S("dva1", i)
                  .S("dvh1", i)
                  .S("dvhe", i)
                  .S("dvc1", i)
                  .S("dvi1", i)
                  .S("hev1", i)
                  .S("hvc1", i)
                  .S("avc1", i)
                  .S("avc3", i)
                  .S("ac-3", r)
                  .S("ec-3", r)
                  .S("ac-4", r)
                  .S("Opus", r)
                  .S("fLaC", r)
                  .S("mp4a", r)
                  .parse(t),
                l)
              )
                return t;
              if (y.length == 0 || !p) throw (pi(t), new H(2, 3, 3019, n));
              (y.reverse(), (n = x(y)));
              for (var v = n.next(); !v.done; v = n.next())
                ((v = v.value), (u = xM(e, u, p, v.box, m, v.Ei)));
              return Be().ih()
                ? ((e = new Uint8Array(t.byteLength + u.byteLength)), e.set(u), e.set(t, u.byteLength), e)
                : u;
            }
            function yM(e) {
              e = De(e);
              var t = [];
              new ut()
                .box("mdat", function (o) {
                  t.push(o);
                })
                .parse(e);
              for (var n = [], r = 0; r < t.length; r++) {
                var i = t[r - 1],
                  s = t[r];
                n.push(vM(e.subarray(i ? i.start + i.size : 0, s.start + s.size)));
              }
              return Nt.apply(dn, Y(n));
            }
            function vM(e) {
              function t(y) {
                (o.push(y), Ue(y));
              }
              var n,
                r,
                i,
                s,
                o = [];
              if (
                (new ut()
                  .box("moof", t)
                  .box("traf", t)
                  .S("tfhd", function (y) {
                    ((n = y), (i = Ac(y.reader, y.flags)));
                  })
                  .S("trun", function (y) {
                    ((r = y), (s = Cc(y.reader, y.version, y.flags)));
                  })
                  .parse(e),
                i && i.Ri !== 2)
              ) {
                var u = n.start + rs(n) + 4 + (i.rj !== null ? 8 : 0),
                  l = jn(e);
                if (i.Ri !== null) l.setUint32(u, 2);
                else {
                  Mc(e, n.start, n.size + 4);
                  var p = l.getUint32(n.start + 8);
                  (l.setUint32(n.start + 8, p | 2),
                    s && s.qg !== null && l.setInt32(r.start + rs(r) + 4, s.qg + 4),
                    (p = e.subarray(0, u)),
                    (l = e.subarray(u)),
                    (e = new Uint8Array(e.byteLength + 4)),
                    e.set(p),
                    (p = []));
                  for (var m = 3; m >= 0; m--) p.push((2 >> (8 * m)) & 255);
                  for (
                    e.set(new Uint8Array(p), u), e.set(l, u + 4), u = x(o), l = u.next();
                    !l.done;
                    l = u.next()
                  )
                    ((l = l.value), Mc(e, l.start, l.size + 4));
                }
              }
              return e;
            }
            function xM(e, t, n, r, i, s) {
              var o = Vs(e, r.name),
                u = t.subarray(r.start, r.start + r.size);
              for (
                e = new Uint8Array(r.size + o.byteLength),
                  e.set(u, 0),
                  jn(e).setUint32(4, s),
                  e.set(o, r.size),
                  Mc(e, 0, e.byteLength),
                  s = new Uint8Array(t.byteLength + e.byteLength),
                  r = Be().jf() ? r.start : r.start + r.size,
                  o = t.subarray(r),
                  s.set(t.subarray(0, r)),
                  s.set(e, r),
                  s.set(o, r + e.byteLength),
                  t = x(i),
                  i = t.next();
                !i.done;
                i = t.next()
              )
                ((i = i.value), Mc(s, i.start, i.size + e.byteLength));
              return ((e = jn(s, n.start)), (n = rs(n)), (t = e.getUint32(n)), e.setUint32(n, t + 1), s);
            }
            function Mc(e, t, n) {
              ((e = jn(e, t)),
                (t = e.getUint32(0)),
                t != 0 &&
                  (t == 1 ? (e.setUint32(8, n >> 32), e.setUint32(12, n & 4294967295)) : e.setUint32(0, n)));
            }
            function TM(e) {
              function t(i) {
                (r.push({ start: i.start, size: i.size }), Ue(i));
              }
              var n = De(e),
                r = [];
              return (
                new ut()
                  .box("moov", t)
                  .box("trak", t)
                  .box("mdia", t)
                  .box("minf", t)
                  .box("stbl", t)
                  .box("stsd", function (i) {
                    r.push({ start: i.start, size: i.size });
                    for (var s = jn(n, i.start), o = 0; o < i.size - 3; o++) {
                      var u = s.getUint32(o);
                      u == 1633889587
                        ? s.setUint32(o, 1700998451)
                        : u == 1684103987 && s.setUint32(o, 1684366131);
                    }
                  })
                  .parse(n),
                n
              );
            }
            function Vn(e, t, n, r, i, s, o, u) {
              ((this.P = e),
                (this.startByte = t),
                (this.endByte = n),
                (this.xd = r === void 0 ? null : r),
                (this.timescale = i === void 0 ? null : i),
                (this.h = s === void 0 ? null : s),
                (this.aesKey = o === void 0 ? null : o),
                (this.g = this.mimeType = this.codecs = null),
                (this.encrypted = u === void 0 ? !1 : u));
            }
            ((Vn.prototype.Jc = function () {
              return this.startByte;
            }),
              (Vn.prototype.Hc = function () {
                return this.endByte;
              }),
              (Vn.prototype.ue = function (e) {
                this.h = e;
              }),
              (Vn.prototype.$b = function () {
                return this.h;
              }));
            function cu(e, t) {
              return e === t
                ? !0
                : e && t
                  ? e.Jc() == t.Jc() &&
                    e.Hc() == t.Hc() &&
                    $i(e.P().sort(), t.P().sort()) &&
                    fi(e.$b(), t.$b())
                  : e == t;
            }
            (fe("shaka.media.InitSegmentReference", Vn),
              (Vn.prototype.getEndByte = Vn.prototype.Hc),
              (Vn.prototype.getStartByte = Vn.prototype.Jc));
            function Ce(e, t, n, r, i, s, o, u, l, p, m, y, v, w, A, E) {
              for (
                p = p === void 0 ? [] : p,
                  w = w === void 0 ? Ii : w,
                  this.startTime = e,
                  this.j = this.endTime = t,
                  this.C = n,
                  this.startByte = r,
                  this.endByte = i,
                  this.ea = s,
                  this.timestampOffset = o,
                  this.appendWindowStart = u,
                  this.appendWindowEnd = l,
                  this.g = p,
                  this.tilesLayout = m === void 0 ? "" : m,
                  this.B = y === void 0 ? null : y,
                  this.h = v === void 0 ? null : v,
                  this.status = w,
                  this.preload = !1,
                  this.l = !0,
                  this.o = !1,
                  this.aesKey = A === void 0 ? null : A,
                  this.thumbnailSprite = null,
                  this.i = -1,
                  this.m = E === void 0 ? !1 : E,
                  this.je = this.Xc = !1,
                  e = x(this.g),
                  t = e.next();
                !t.done;
                t = e.next()
              )
                t.value.Ai();
              (this.m && this.g.length && this.g[this.g.length - 1].zi(),
                (this.u = this.bandwidth = this.mimeType = this.codecs = null),
                (this.F = !1));
            }
            ((h = Ce.prototype),
              (h.P = function () {
                return this.C();
              }),
              (h.getStartTime = function () {
                return this.startTime;
              }),
              (h.Kj = function () {
                return this.endTime;
              }),
              (h.Jc = function () {
                return this.startByte;
              }),
              (h.Hc = function () {
                return this.endByte;
              }));
            function ap(e) {
              if (e.endByte) return e.endByte + 1 - e.startByte;
              if (e.bandwidth) {
                var t = e.bandwidth * (e.endTime - e.startTime);
                if (!isNaN(t) && t > 0) return t;
              }
              if (e.g.length > 0 && e.m)
                for (e = x(e.g), e = e.next(); !e.done; e = e.next()) {
                  ap(e.value);
                  break;
                }
              return null;
            }
            ((h.ek = function () {
              return this.tilesLayout;
            }),
              (h.dk = function () {
                return this.B;
              }),
              (h.Kc = function () {
                return this.status;
              }),
              (h.Ak = function () {
                this.status = ox;
              }),
              (h.Ug = function () {
                this.preload = !0;
              }),
              (h.isPreload = function () {
                return this.preload;
              }),
              (h.wd = function () {
                this.l = !1;
              }),
              (h.qk = function () {
                return this.l;
              }),
              (h.Ai = function () {
                this.Xc = !0;
              }),
              (h.tk = function () {
                return this.Xc;
              }),
              (h.zi = function () {
                this.je = !0;
              }),
              (h.rk = function () {
                return this.je;
              }),
              (h.xi = function () {
                this.o = !0;
              }),
              (h.kk = function () {
                return this.o;
              }),
              (h.Mf = function (e) {
                this.thumbnailSprite = e;
              }),
              (h.bk = function () {
                return this.thumbnailSprite;
              }),
              (h.offset = function (e) {
                ((this.startTime += e), (this.endTime += e), (this.j += e));
                for (var t = x(this.g), n = t.next(); !n.done; n = t.next())
                  ((n = n.value), (n.startTime += e), (n.endTime += e), (n.j += e));
              }),
              (h.Dh = function (e) {
                this.h == null
                  ? An("Sync attempted without sync time!")
                  : ((e = this.h - e - this.startTime), Math.abs(e) >= 0.001 && this.offset(e));
              }),
              (h.ue = function (e, t) {
                ((this.u = e), (this.F = t === void 0 ? !1 : t));
              }),
              (h.$b = function (e) {
                var t = this.u;
                return ((e === void 0 || e) && this.F && (this.u = null), t);
              }));
            function sx(e, t) {
              ((e.ea = t), (e = x(e.g)));
              for (var n = e.next(); !n.done; n = e.next()) sx(n.value, t);
            }
            (fe("shaka.media.SegmentReference", Ce),
              (Ce.prototype.getSegmentData = Ce.prototype.$b),
              (Ce.prototype.setSegmentData = Ce.prototype.ue),
              (Ce.prototype.syncAgainst = Ce.prototype.Dh),
              (Ce.prototype.offset = Ce.prototype.offset),
              (Ce.prototype.getThumbnailSprite = Ce.prototype.bk),
              (Ce.prototype.setThumbnailSprite = Ce.prototype.Mf),
              (Ce.prototype.hasByterangeOptimization = Ce.prototype.kk),
              (Ce.prototype.markAsByterangeOptimization = Ce.prototype.xi),
              (Ce.prototype.isLastPartial = Ce.prototype.rk),
              (Ce.prototype.markAsLastPartial = Ce.prototype.zi),
              (Ce.prototype.isPartial = Ce.prototype.tk),
              (Ce.prototype.markAsPartial = Ce.prototype.Ai),
              (Ce.prototype.isIndependent = Ce.prototype.qk),
              (Ce.prototype.markAsNonIndependent = Ce.prototype.wd),
              (Ce.prototype.isPreload = Ce.prototype.isPreload),
              (Ce.prototype.markAsPreload = Ce.prototype.Ug),
              (Ce.prototype.markAsUnavailable = Ce.prototype.Ak),
              (Ce.prototype.getStatus = Ce.prototype.Kc),
              (Ce.prototype.getTileDuration = Ce.prototype.dk),
              (Ce.prototype.getTilesLayout = Ce.prototype.ek),
              (Ce.prototype.getEndByte = Ce.prototype.Hc),
              (Ce.prototype.getStartByte = Ce.prototype.Jc),
              (Ce.prototype.getEndTime = Ce.prototype.Kj),
              (Ce.prototype.getStartTime = Ce.prototype.getStartTime),
              (Ce.prototype.getUris = Ce.prototype.P));
            var Ii = 0,
              ox = 1;
            Ce.Status = { vl: Ii, Am: ox, Wl: 2 };
            function du(e) {
              return e.length == 1 && e.end(0) - e.start(0) < 1e-4;
            }
            function ax(e) {
              return !e || du(e) ? null : e.length == 1 && e.start(0) < 0 ? 0 : e.length ? e.start(0) : null;
            }
            function Rc(e) {
              return !e || du(e) ? null : e.length ? e.end(e.length - 1) : null;
            }
            function up(e, t) {
              return !e || !e.length || du(e) || t > e.end(e.length - 1) ? !1 : t >= e.start(0);
            }
            function ux(e, t) {
              if (!e || !e.length || du(e)) return 0;
              var n = 0;
              e = x(Ci(e));
              for (var r = e.next(); !r.done; r = e.next()) {
                var i = r.value;
                ((r = i.start), (i = i.end), i > t && (n += i - Math.max(r, t)));
              }
              return n;
            }
            function SM(e, t, n) {
              return !e || !e.length || du(e)
                ? null
                : ((e = Ci(e).findIndex(function (r, i, s) {
                    return r.start > t && (i == 0 || s[i - 1].end - t <= n);
                  })),
                  e >= 0 ? e : null);
            }
            function Ci(e) {
              if (!e) return [];
              for (var t = [], n = 0; n < e.length; n++) t.push({ start: e.start(n), end: e.end(n) });
              return t;
            }
            function lp() {}
            function lx(e, t) {
              var n = document.createElement("source");
              return ((n.src = e), (n.type = t === void 0 ? "" : t), n);
            }
            function kc(e) {
              for (var t = !1, n = e.getElementsByTagName("source"), r = n.length - 1; r >= 0; --r)
                (e.removeChild(n[r]), (t = !0));
              return (e.src && (e.removeAttribute("src"), (t = !0)), t);
            }
            function fu(e) {
              for (; e.firstChild; ) e.removeChild(e.firstChild);
            }
            function Hs() {
              return (
                _o ||
                (cp ||
                  (cp = new Ve(function () {
                    _o = null;
                  })),
                (_o =
                  document.getElementsByTagName("video")[0] || document.getElementsByTagName("audio")[0]) ||
                  (_o = document.createElement("video")),
                cp.ka(1),
                _o)
              );
            }
            function wM(e, t) {
              var n, r, i, s, o;
              return j(function (u) {
                if (u.g == 1)
                  return "fonts" in document && "FontFace" in g ? I(u, document.fonts.ready, 2) : u.return();
                if (!("entries" in document.fonts)) return u.return();
                for (
                  n = function (l) {
                    l = l.entries();
                    for (var p = [], m = l.next(); m.done === !1; ) (p.push(m.value), (m = l.next()));
                    return p;
                  },
                    r = x(n(document.fonts)),
                    i = r.next();
                  !i.done;
                  i = r.next()
                )
                  if (((s = i.value), s.family === e && s.display === "swap")) return u.return();
                ((o = new FontFace(e, "url(" + t + ")", { display: "swap" })), document.fonts.add(o), re(u));
              });
            }
            (fe("shaka.util.Dom", lp), (lp.removeAllChildren = fu), (lp.clearSourceFromVideo = kc));
            var cp = null,
              _o = null;
            /*
 @license
 Shaka Player
 Copyright 2022 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/ function dp() {}
            function cx(e, t) {
              return (
                t + 10 <= e.length &&
                e[t] === 73 &&
                e[t + 1] === 68 &&
                e[t + 2] === 51 &&
                e[t + 3] < 255 &&
                e[t + 4] < 255 &&
                e[t + 6] < 128 &&
                e[t + 7] < 128 &&
                e[t + 8] < 128 &&
                e[t + 9] < 128
              );
            }
            function dx(e, t) {
              return (
                t + 10 <= e.length &&
                e[t] === 51 &&
                e[t + 1] === 68 &&
                e[t + 2] === 73 &&
                e[t + 3] < 255 &&
                e[t + 4] < 255 &&
                e[t + 6] < 128 &&
                e[t + 7] < 128 &&
                e[t + 8] < 128 &&
                e[t + 9] < 128
              );
            }
            function fp(e, t) {
              var n = (e[t] & 127) << 21;
              return ((n |= (e[t + 1] & 127) << 14), (n |= (e[t + 2] & 127) << 7), (n |= e[t + 3] & 127));
            }
            function AM(e) {
              var t = { key: e.type, description: "", data: "", mimeType: null, pictureType: null };
              if (e.type === "APIC") {
                if (e.size < 2 || e.data[0] !== 3) return null;
                var n = e.data.subarray(1).indexOf(0);
                if (n === -1) return null;
                var r = St(De(e.data, 1, n)),
                  i = e.data[2 + n],
                  s = e.data.subarray(3 + n).indexOf(0);
                if (s === -1) return null;
                var o = St(De(e.data, 3 + n, s)),
                  u;
                return (
                  r === "-->" ? (u = St(De(e.data, 4 + n + s))) : (u = Tr(e.data.subarray(4 + n + s))),
                  (t.mimeType = r),
                  (t.pictureType = i),
                  (t.description = o),
                  (t.data = u),
                  t
                );
              }
              return e.type === "TXXX"
                ? e.size < 2 || e.data[0] !== 3 || ((r = e.data.subarray(1).indexOf(0)), r === -1)
                  ? null
                  : ((n = St(De(e.data, 1, r))),
                    (e = St(De(e.data, 2 + r)).replace(/\0*$/, "")),
                    (t.description = n),
                    (t.data = e),
                    t)
                : e.type === "WXXX"
                  ? e.size < 2 || e.data[0] !== 3 || ((r = e.data.subarray(1).indexOf(0)), r === -1)
                    ? null
                    : ((n = St(De(e.data, 1, r))),
                      (e = St(De(e.data, 2 + r)).replace(/\0*$/, "")),
                      (t.description = n),
                      (t.data = e),
                      t)
                  : e.type === "PRIV"
                    ? e.size < 2 || ((n = e.data.indexOf(0)), n === -1)
                      ? null
                      : ((n = St(De(e.data, 0, n))),
                        (t.description = n),
                        n == "com.apple.streaming.transportStreamTimestamp"
                          ? ((n = e.data.subarray(n.length + 1)),
                            (e = n[3] & 1),
                            (n = (n[4] << 23) + (n[5] << 15) + (n[6] << 7) + n[7]),
                            (n /= 45),
                            e && (n += 4772185884e-2),
                            (t.data = n))
                          : ((e = Tr(e.data.subarray(n.length + 1))), (t.data = e)),
                        t)
                    : e.type[0] === "T"
                      ? e.size < 2 || e.data[0] !== 3
                        ? null
                        : ((e = St(e.data.subarray(1)).replace(/\0*$/, "")), (t.data = e), t)
                      : e.type[0] === "W"
                        ? ((e = St(e.data).replace(/\0*$/, "")), (t.data = e), t)
                        : e.data
                          ? ((t.data = Tr(e.data)), t)
                          : null;
            }
            function Gs(e) {
              for (var t = 0, n = []; cx(e, t); ) {
                var r = fp(e, t + 6);
                for ((e[t + 5] >> 6) & 1 && (t += 10), t += 10, r = t + r; t + 10 < r; ) {
                  var i = e.subarray(t),
                    s = fp(i, 4);
                  ((i = {
                    type: String.fromCharCode(i[0], i[1], i[2], i[3]),
                    size: s,
                    data: i.subarray(10, 10 + s),
                  }),
                    (s = AM(i)) && n.push(s),
                    (t += i.size + 10));
                }
                dx(e, t) && (t += 10);
              }
              return n;
            }
            function Po(e, t) {
              for (var n = (t = t === void 0 ? 0 : t), r = 0; cx(e, t); )
                ((e[t + 5] >> 6) & 1 && (r += 10),
                  (r += 10),
                  (r += fp(e, t + 6)),
                  dx(e, t + 10) && (r += 10),
                  (t += r));
              return r > 0 ? e.subarray(n, n + r) : new Uint8Array([]);
            }
            (fe("shaka.util.Id3Utils", dp), (dp.getID3Data = Po), (dp.getID3Frames = Gs));
            function fx(e) {
              return new Date(Date.UTC(1900, 0, 1, 0, 0, 0, 0) + e).getTime();
            }
            function Mi(e, t) {
              if (((this.j = e), t !== void 0 && t)) {
                t = new Uint8Array(e.byteLength);
                for (var n = 0, r = 0; r < e.byteLength; r++)
                  (r >= 2 && e[r] == 3 && e[r - 1] == 0 && e[r - 2] == 0) || ((t[n] = e[r]), n++);
                this.j = De(t, 0, n);
              }
              ((this.i = this.j.byteLength), (this.g = this.h = 0));
            }
            function hp(e) {
              var t = e.j.byteLength - e.i,
                n = new Uint8Array(4),
                r = Math.min(4, e.i);
              r !== 0 && (n.set(e.j.subarray(t, t + r)), (e.h = new gt(n, 0).U()), (e.g = r * 8), (e.i -= r));
            }
            function tr(e, t) {
              if (e.g <= t) {
                t -= e.g;
                var n = Math.floor(t / 8);
                ((t -= n * 8), (e.g -= n), hp(e));
              }
              ((e.h <<= t), (e.g -= t));
            }
            function ze(e, t) {
              var n = Math.min(e.g, t),
                r = e.h >>> (32 - n);
              return (
                (e.g -= n),
                e.g > 0 ? (e.h <<= n) : e.i > 0 && hp(e),
                (n = t - n),
                n > 0 ? (r << n) | ze(e, n) : r
              );
            }
            function pp(e) {
              var t;
              for (t = 0; t < e.g; ++t)
                if ((e.h & (2147483648 >>> t)) !== 0) return ((e.h <<= t), (e.g -= t), t);
              return (hp(e), t + pp(e));
            }
            function un(e) {
              tr(e, 1 + pp(e));
            }
            function Se(e) {
              var t = pp(e);
              return ze(e, t + 1) - 1;
            }
            function Do(e) {
              return ((e = Se(e)), 1 & e ? (1 + e) >>> 1 : -1 * (e >>> 1));
            }
            function Ee(e) {
              return ze(e, 1) === 1;
            }
            function nt(e) {
              return ze(e, 8);
            }
            function _c(e, t) {
              for (var n = 8, r = 8, i = 0; i < t; i++)
                (r !== 0 && ((r = Do(e)), (r = (n + r + 256) % 256)), (n = r === 0 ? n : r));
            }
            function EM(e) {
              return (nt(e), Se(e), Se(e));
            }
            fe("shaka.util.ExpGolomb", Mi);
            function ft() {
              ((this.I = null),
                (this.J = !1),
                (this.m = this.K = null),
                (this.j = []),
                (this.g = []),
                (this.C = this.F = null),
                (this.i = []),
                (this.h = []),
                (this.G = null),
                (this.l = []),
                (this.B = this.H = this.o = this.u = null));
            }
            ((h = ft.prototype),
              (h.clearData = function () {
                ((this.j = []), (this.g = []), (this.i = []), (this.h = []), (this.l = []));
              }),
              (h.Kf = function (e) {
                (this.B != null && this.B != e && (this.o = this.u = null), (this.B = e));
              }),
              (h.parse = function (e) {
                if (e.length < 564) return this;
                for (
                  var t = Math.max(0, mp(e)), n = e.length - ((e.length + t) % 188), r = !1, i = t;
                  i < n;
                  i += 188
                )
                  if (e[i] == 71) {
                    var s = !!(e[i + 1] & 64),
                      o = ((e[i + 1] & 31) << 8) + e[i + 2];
                    if ((e[i + 3] & 48) >> 4 > 1) {
                      var u = i + 5 + e[i + 4];
                      if (u == i + 188) continue;
                    } else u = i + 4;
                    switch (o) {
                      case 0:
                        (s && (u += e[u] + 1), (this.I = ((e[u + 10] & 31) << 8) | e[u + 11]));
                        break;
                      case 17:
                      case 8191:
                        break;
                      case this.I:
                        (s && (u += e[u] + 1),
                          (s = e),
                          (o = { audio: -1, video: -1, gf: -1, audioCodec: "", videoCodec: "" }));
                        var l = u + 3 + (((s[u + 1] & 15) << 8) | s[u + 2]) - 4;
                        for (u += 12 + (((s[u + 10] & 15) << 8) | s[u + 11]); u < l; ) {
                          var p = ((s[u + 1] & 31) << 8) | s[u + 2],
                            m = ((s[u + 3] & 15) << 8) | s[u + 4];
                          switch (s[u]) {
                            case 6:
                              if (m > 0)
                                for (var y = u + 5, v = m; v > 2; ) {
                                  var w = s[y + 1] + 2;
                                  switch (s[y]) {
                                    case 5:
                                      var A = s.subarray(y + 2, y + w);
                                      ((A = Wl.value()(A)),
                                        o.audio == -1 && A === "Opus"
                                          ? ((o.audio = p), (o.audioCodec = "opus"))
                                          : o.video == -1 &&
                                            A === "AV01" &&
                                            ((o.video = p), (o.videoCodec = "av1")));
                                      break;
                                    case 106:
                                      o.audio == -1 && ((o.audio = p), (o.audioCodec = "ac3"));
                                      break;
                                    case 122:
                                      o.audio == -1 && ((o.audio = p), (o.audioCodec = "ec3"));
                                      break;
                                    case 124:
                                      o.audio == -1 && ((o.audio = p), (o.audioCodec = "aac"));
                                      break;
                                    case 127:
                                      o.audioCodec == "opus" &&
                                        ((A = null),
                                        s[y + 2] === 128 && (A = s[y + 3]),
                                        A != null &&
                                          (this.H = {
                                            channelCount: (A & 15) === 0 ? 2 : A & 15,
                                            uj: A,
                                            sampleRate: 48e3,
                                          }));
                                  }
                                  ((y += w), (v -= w));
                                }
                              break;
                            case 15:
                              o.audio == -1 && ((o.audio = p), (o.audioCodec = "aac"));
                              break;
                            case 17:
                              o.audio == -1 && ((o.audio = p), (o.audioCodec = "aac-loas"));
                              break;
                            case 21:
                              o.gf == -1 && (o.gf = p);
                              break;
                            case 27:
                              o.video == -1 && ((o.video = p), (o.videoCodec = "avc"));
                              break;
                            case 3:
                            case 4:
                              o.audio == -1 && ((o.audio = p), (o.audioCodec = "mp3"));
                              break;
                            case 36:
                              o.video == -1 && ((o.video = p), (o.videoCodec = "hvc"));
                              break;
                            case 129:
                              o.audio == -1 && ((o.audio = p), (o.audioCodec = "ac3"));
                              break;
                            case 132:
                            case 135:
                              o.audio == -1 && ((o.audio = p), (o.audioCodec = "ec3"));
                          }
                          u += m + 5;
                        }
                        ((s = o),
                          s.video != -1 && ((this.K = s.video), (this.m = s.videoCodec)),
                          s.audio != -1 && ((this.F = s.audio), (this.C = s.audioCodec)),
                          s.gf != -1 && (this.G = s.gf),
                          r && !this.J && ((r = !1), (i = t - 188)),
                          (this.J = !0));
                        break;
                      case this.K:
                        ((u = e.subarray(u, i + 188)),
                          s
                            ? this.j.push([u])
                            : this.j.length &&
                              this.j[this.j.length - 1] &&
                              this.j[this.j.length - 1].push(u));
                        break;
                      case this.F:
                        ((u = e.subarray(u, i + 188)),
                          s
                            ? this.i.push([u])
                            : this.i.length &&
                              this.i[this.i.length - 1] &&
                              this.i[this.i.length - 1].push(u));
                        break;
                      case this.G:
                        ((u = e.subarray(u, i + 188)),
                          s
                            ? this.l.push([u])
                            : this.l.length &&
                              this.l[this.l.length - 1] &&
                              this.l[this.l.length - 1].push(u));
                        break;
                      default:
                        r = !0;
                    }
                  }
                return this;
              }));
            function gp(e, t) {
              if (((t[0] << 16) | (t[1] << 8) | t[2]) !== 1) return null;
              var n = {
                data: new Uint8Array(0),
                packetLength: (t[4] << 8) | t[5],
                pts: null,
                dts: null,
                nalus: [],
              };
              if (n.packetLength && n.packetLength > t.byteLength - 6) return null;
              var r = t[7];
              if (r & 192) {
                var i =
                  (t[9] & 14) * 536870912 +
                  (t[10] & 255) * 4194304 +
                  (t[11] & 254) * 16384 +
                  (t[12] & 255) * 128 +
                  (t[13] & 254) / 2;
                (e.u == null && (e.u = i),
                  (n.pts = px(i, e.u)),
                  (e.u = n.pts),
                  (n.dts = n.pts),
                  r & 64 &&
                    ((r =
                      (t[14] & 14) * 536870912 +
                      (t[15] & 255) * 4194304 +
                      (t[16] & 254) * 16384 +
                      (t[17] & 255) * 128 +
                      (t[18] & 254) / 2),
                    e.o == null && (e.o = r),
                    (n.dts = n.pts != i ? px(r, e.o) : r)),
                  (e.o = n.dts));
              }
              return ((e = t[8] + 9), t.byteLength <= e ? null : ((n.data = t.subarray(e)), n));
            }
            ((h.Hk = function (e) {
              return (
                qe("TsParser.parseAvcNalus", "Please use parseNalus function instead."),
                this.$g(e, { le: null, state: null })
              );
            }),
              (h.$g = function (e, t) {
                var n = e.pts ? e.pts / 9e4 : null;
                e = e.data;
                var r = e.byteLength,
                  i = 1;
                this.m == "hvc" && (i = 2);
                var s = t.state || 0,
                  o = s,
                  u = 0,
                  l = [],
                  p = -1,
                  m = 0;
                for (
                  s == -1 &&
                  ((p = 0), (m = this.m == "hvc" ? (e[0] >> 1) & 63 : e[0] & 31), (s = 0), (u = 1));
                  u < r;
                ) {
                  var y = e[u++];
                  s
                    ? s === 1
                      ? (s = y ? 0 : 2)
                      : y
                        ? y == 1
                          ? ((y = u - s - 1),
                            p >= 0
                              ? l.push({
                                  data: e.subarray(p + i, y),
                                  fullData: e.subarray(p, y),
                                  type: m,
                                  time: n,
                                  state: null,
                                })
                              : (s = l.length ? l[l.length - 1] : t.le) &&
                                (o &&
                                  u <= 4 - o &&
                                  s.state &&
                                  ((s.data = s.data.subarray(0, s.data.byteLength - o)),
                                  (s.fullData = s.fullData.subarray(0, s.fullData.byteLength - o))),
                                y > 0 &&
                                  ((y = e.subarray(0, y)),
                                  (s.data = Nt(s.data, y)),
                                  (s.fullData = Nt(s.fullData, y)),
                                  (s.state = 0))),
                            u < r
                              ? ((m = this.m == "hvc" ? (e[u] >> 1) & 63 : e[u] & 31), (p = u), (s = 0))
                              : (s = -1))
                          : (s = 0)
                        : (s = 3)
                    : (s = y ? 0 : 1);
                }
                return (
                  p >= 0 &&
                    s >= 0 &&
                    l.push({
                      data: e.subarray(p + i, r),
                      fullData: e.subarray(p, r),
                      type: m,
                      time: n,
                      state: s,
                    }),
                  !l.length &&
                    t.le &&
                    (n = l.length ? l[l.length - 1] : t.le) &&
                    ((n.data = Nt(n.data, e)), (n.fullData = Nt(n.fullData, e))),
                  (t.state = s),
                  l
                );
              }),
              (h.getMetadata = function () {
                for (var e = [], t = x(this.l), n = t.next(); !n.done; n = t.next())
                  ((n = Nt.apply(dn, Y(n.value))),
                    (n = gp(this, n)) &&
                      e.push({
                        cueTime: n.pts ? n.pts / 9e4 : null,
                        data: n.data,
                        frames: Gs(n.data),
                        dts: n.dts,
                        pts: n.pts,
                      }));
                return e;
              }),
              (h.ub = function () {
                if (this.i.length && !this.h.length)
                  for (var e = x(this.i), t = e.next(); !t.done; t = e.next()) {
                    var n = Nt.apply(dn, Y(t.value)),
                      r = gp(this, n);
                    ((t = this.h.length ? this.h[this.h.length - 1] : null),
                      r && r.pts != null && r.dts != null && (!t || (t.pts != r.pts && t.dts != r.dts))
                        ? this.h.push(r)
                        : this.h.length &&
                          (n = r ? r.data : n) &&
                          ((t = this.h.pop()), (t.data = Nt(t.data, n)), this.h.push(t)));
                  }
                return this.h;
              }),
              (h.ud = function (e) {
                if (((e = e === void 0 ? !0 : e), this.j.length && !this.g.length)) {
                  for (var t = x(this.j), n = t.next(); !n.done; n = t.next()) {
                    var r = Nt.apply(dn, Y(n.value)),
                      i = gp(this, r);
                    ((n = this.g.length ? this.g[this.g.length - 1] : null),
                      i && i.pts != null && i.dts != null && (!n || (n.pts != i.pts && n.dts != i.dts))
                        ? this.g.push(i)
                        : this.g.length &&
                          (r = i ? i.data : r) &&
                          ((n = this.g.pop()), (n.data = Nt(n.data, r)), this.g.push(n)));
                  }
                  if (e) {
                    for (
                      t = { le: null, state: null }, n = [], r = x(this.g), i = r.next();
                      !i.done;
                      i = r.next()
                    )
                      ((i = i.value),
                        (i.nalus = this.$g(i, t)),
                        i.nalus.length && (n.push(i), (t.le = i.nalus[i.nalus.length - 1])));
                    this.g = n;
                  }
                }
                return e ? this.g : ((e = this.g), (this.g = []), e);
              }),
              (h.getStartTime = function (e) {
                if (e == "audio") {
                  e = null;
                  var t = this.ub();
                  return (t.length && ((e = t[0]), (e = Math.min(e.dts, e.pts) / 9e4)), e);
                }
                return e == "video"
                  ? ((e = null),
                    (t = this.ud(!1)),
                    t.length && ((e = t[0]), (e = Math.min(e.dts, e.pts) / 9e4)),
                    e)
                  : null;
              }),
              (h.Yd = function () {
                return { audio: this.C, video: this.m };
              }),
              (h.ef = function () {
                for (var e = [], t = x(this.ud()), n = t.next(); !n.done; n = t.next())
                  e.push.apply(e, Y(n.value.nalus));
                return e;
              }),
              (h.hk = function () {
                qe("TsParser.getVideoResolution", "Please use getVideoInfo function instead.");
                var e = this.Ng();
                return { height: e.height, width: e.width };
              }),
              (h.Ng = function () {
                return this.m == "hvc" ? CM(this) : IM(this);
              }));
            function hx(e) {
              var t = e.ud();
              return t.length > 1 && ((e = t[0].pts), (t = t[1].pts), !isNaN(t - e))
                ? String(Math.abs((1 / (t - e)) * 9e4))
                : null;
            }
            function IM(e) {
              var t = { height: null, width: null, codec: null, frameRate: null },
                n = e.ef();
              if (
                !n.length ||
                ((n = n.find(function (w) {
                  return w.type == 7;
                })),
                !n)
              )
                return t;
              n = new Mi(n.data);
              var r = nt(n),
                i = nt(n),
                s = nt(n);
              if ((un(n), MM.includes(r))) {
                var o = Se(n);
                if ((o === 3 && tr(n, 1), un(n), un(n), tr(n, 1), Ee(n))) {
                  o = o !== 3 ? 8 : 12;
                  for (var u = 0; u < o; u++) Ee(n) && (u < 6 ? _c(n, 16) : _c(n, 64));
                }
              }
              if ((un(n), (o = Se(n)), o === 0)) Se(n);
              else if (o === 1) for (tr(n, 1), un(n), un(n), o = Se(n), u = 0; u < o; u++) un(n);
              (un(n), tr(n, 1), (o = Se(n)), (u = Se(n)));
              var l = ze(n, 1);
              (l === 0 && tr(n, 1), tr(n, 1));
              var p = 0,
                m = 0,
                y = 0,
                v = 0;
              return (
                Ee(n) && ((p = Se(n)), (m = Se(n)), (y = Se(n)), (v = Se(n))),
                (t.height = String((2 - l) * (u + 1) * 16 - y * 2 - v * 2)),
                (t.width = String((o + 1) * 16 - p * 2 - m * 2)),
                (t.codec =
                  "avc1." +
                  ("0" + r.toString(16).toUpperCase()).slice(-2) +
                  ("0" + i.toString(16).toUpperCase()).slice(-2) +
                  ("0" + s.toString(16).toUpperCase()).slice(-2)),
                (t.frameRate = hx(e)),
                t
              );
            }
            function CM(e) {
              var t = { height: null, width: null, codec: null, frameRate: null },
                n = e.ef();
              if (
                !n.length ||
                ((n = n.find(function (G) {
                  return G.type == 33;
                })),
                !n)
              )
                return t;
              var r = new Mi(n.fullData, !0);
              (nt(r), nt(r), ze(r, 4));
              var i = ze(r, 3);
              Ee(r);
              var s = ze(r, 2),
                o = ze(r, 1),
                u = ze(r, 5),
                l = ze(r, 32);
              n = nt(r);
              for (
                var p = nt(r), m = nt(r), y = nt(r), v = nt(r), w = nt(r), A = nt(r), E = [], C = [], k = 0;
                k < i;
                k++
              )
                (E.push(Ee(r)), C.push(Ee(r)));
              if (i > 0) for (k = i; k < 8; k++) ze(r, 2);
              for (k = 0; k < i; k++) (E[k] && ze(r, 88), C[k] && nt(r));
              (Se(r), (i = Se(r)), i == 3 && ze(r, 1), (E = Se(r)), (C = Se(r)));
              var R = (k = 0),
                L = 0,
                U = 0;
              return (
                Ee(r) && ((k += Se(r)), (R += Se(r)), (L += Se(r)), (U += Se(r))),
                (t.width = String(E - (k + R) * (i === 1 || i === 2 ? 2 : 1))),
                (t.height = String(C - (L + U) * (i === 1 ? 2 : 1))),
                (r = (function (G) {
                  for (var b = 0, B = 0; B < 32; B++) b |= ((G >> B) & 1) << (31 - B);
                  return b >>> 0;
                })(l)),
                (o = o == 1 ? "H" : "L"),
                (s = "hvc1" + ("." + ["", "A", "B", "C"][s] + u)),
                (s += "." + r.toString(16).toUpperCase()),
                (s += "." + o + A),
                w && (s += "." + w.toString(16).toUpperCase()),
                v && (s += "." + v.toString(16).toUpperCase()),
                y && (s += "." + y.toString(16).toUpperCase()),
                m && (s += "." + m.toString(16).toUpperCase()),
                p && (s += "." + p.toString(16).toUpperCase()),
                n && (s += "." + n.toString(16).toUpperCase()),
                (t.codec = s),
                (t.frameRate = hx(e)),
                t
              );
            }
            function px(e, t) {
              var n = 1;
              for (e > t && (n = -1); Math.abs(t - e) > 4294967296; ) e += n * 8589934592;
              return e;
            }
            function Lo(e) {
              return !(mp(e) < 0);
            }
            function mp(e) {
              for (var t = Math.min(1e3, e.length - 564), n = 0; n < t; ) {
                if (e[n] == 71 && e[n + 188] == 71 && e[n + 376] == 71) return n;
                n++;
              }
              return -1;
            }
            (fe("shaka.util.TsParser", ft),
              (ft.syncOffset = mp),
              (ft.probe = Lo),
              (ft.prototype.getVideoInfo = ft.prototype.Ng),
              (ft.prototype.getVideoResolution = ft.prototype.hk),
              (ft.prototype.getVideoNalus = ft.prototype.ef),
              (ft.prototype.getCodecs = ft.prototype.Yd),
              (ft.prototype.getStartTime = ft.prototype.getStartTime),
              (ft.prototype.getVideoData = ft.prototype.ud),
              (ft.prototype.getAudioData = ft.prototype.ub),
              (ft.prototype.getMetadata = ft.prototype.getMetadata),
              (ft.prototype.parseNalus = ft.prototype.$g),
              (ft.prototype.parseAvcNalus = ft.prototype.Hk),
              (ft.prototype.parse = ft.prototype.parse),
              (ft.prototype.setDiscontinuitySequence = ft.prototype.Kf),
              (ft.prototype.clearData = ft.prototype.clearData),
              (ft.Timescale = 9e4));
            var MM = [100, 110, 122, 244, 44, 83, 86, 118, 128, 138, 139, 134];
            function gx(e, t, n, r, i) {
              var s = this;
              ((this.g = e),
                (this.O = n),
                (this.B = r),
                (this.ba = t),
                (this.l = new Map()),
                (this.G = new Map()),
                (this.Ta = new Map()),
                (this.h = null),
                (this.Fa = !1),
                (this.C = i || null),
                (this.o = new Map()),
                (this.u = new et()),
                (this.j = new Map()),
                (this.K = null),
                (this.M = new at()),
                (this.Da = ""),
                (this.ob = !1),
                (this.za = !0),
                (this.N = !1),
                (this.F = this.R = null),
                (this.i = yp(this, this.M)),
                (this.Ua = this.H = !1),
                (this.I = new Io(function () {
                  return _M(s);
                })),
                (this.J = !1),
                (this.X = "UNKNOWN"),
                (this.eb = this.kb = !1),
                (this.ab = new at()),
                (this.m = !1),
                (this.ya = null),
                (this.$ = new Map()),
                (this.oa = this.T = this.va = this.V = null),
                (this.ma = new at()),
                this.g.remote &&
                  ((this.N = this.g.remote.state != "disconnected"),
                  this.u.D(this.g.remote, "connect", function () {
                    s.N = s.g.remote.state != "disconnected";
                  }),
                  this.u.D(this.g.remote, "connecting", function () {
                    s.N = s.g.remote.state != "disconnected";
                  }),
                  this.u.D(this.g.remote, "disconnect", function () {
                    s.N = s.g.remote.state != "disconnected";
                  })));
            }
            function yp(e, t) {
              if (((e.za = !0), g.ManagedMediaSource)) {
                e.F || (e.g.disableRemotePlayback = !0);
                var n = new ManagedMediaSource();
                (e.u.D(n, "startstreaming", function () {
                  e.za = !0;
                }),
                  e.u.D(n, "endstreaming", function () {
                    e.za = !1;
                  }));
              } else n = new MediaSource();
              return (
                e.u.Aa(n, "sourceopen", function () {
                  (URL.revokeObjectURL(e.Da), t.resolve());
                }),
                e.u.Aa(e.g, "playing", function () {
                  e.ob = !0;
                }),
                (e.Da = Sp(n)),
                e.B.useSourceElements
                  ? (e.g.removeAttribute("src"),
                    e.R && e.g.removeChild(e.R),
                    e.F && e.g.removeChild(e.F),
                    (e.R = lx(e.Da)),
                    e.g.appendChild(e.R),
                    e.F && e.g.appendChild(e.F),
                    e.g.load())
                  : (e.g.src = e.Da),
                n
              );
            }
            function RM(e, t, n) {
              e.g &&
                g.ManagedMediaSource &&
                e.i &&
                e.B.useSourceElements &&
                (e.F && e.g.removeChild(e.F),
                (e.F = lx(t, n)),
                e.g.appendChild(e.F),
                (e.g.disableRemotePlayback = !1));
            }
            function kM() {
              var e =
                  'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.20000000.L153.B0",video/mp4; codecs="hvc1.2.4.L120.b0",video/mp4; codecs="hvc1.2.4.L123.b0",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="av01.0.31M.10.0.111.09.16.09.0",video/mp4; codecs="av01.0.31M.10.0.112.09.18.09.0",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.08.01",video/mp4; codecs="dav1.10.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.03",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",audio/mp4; codecs="apac.31.00",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'
                    .split(",")
                    .concat(Y(Ti)),
                t = {};
              (Be(), (e = x(e)));
              for (var n = e.next(); !n.done; n = e.next()) {
                if (((n = n.value), Qa(n))) t[n] = !0;
                else if (oi()) {
                  var r = Qn(n),
                    i = nu(Fn(n), r);
                  ((r = Rt(r, i)), (t[n] = En(r) || !!To(r)));
                } else t[n] = Hs().canPlayType(n) != "";
                ((r = n.split(";")[0]), (t[r] = t[r] || t[n]));
              }
              return t;
            }
            ((h = gx.prototype),
              (h.destroy = function () {
                return this.I.destroy();
              }));
            function _M(e) {
              var t, n, r, i, s, o, u, l, p, m, y, v, w, A, E;
              return j(function (C) {
                if (C.g == 1) {
                  for (t = [], n = x(e.o), r = n.next(); !r.done; r = n.next())
                    for (
                      i = r.value,
                        s = x(i),
                        o = s.next().value,
                        u = s.next().value,
                        l = u[0],
                        p = o,
                        e.o.set(p, u.slice(0, 1)),
                        l && t.push(l.p.catch(mC)),
                        m = x(u.slice(1)),
                        y = m.next();
                      !y.done;
                      y = m.next()
                    )
                      ((v = y.value), v.p.reject(new H(2, 7, 7003, void 0)));
                  return (e.h && t.push(e.h.destroy()), I(C, Promise.all(t), 2));
                }
                for (w = x(e.j.values()), A = w.next(); !A.done; A = w.next()) ((E = A.value), E.destroy());
                (e.u && (e.u.release(), (e.u = null)),
                  e.g && e.F && e.g.removeChild(e.F),
                  e.g && e.R && (e.g.removeChild(e.R), e.g.load(), (e.g.disableRemotePlayback = !1)),
                  (e.g = null),
                  (e.R = null),
                  (e.F = null),
                  (e.B = null),
                  (e.i = null),
                  (e.h = null),
                  (e.ba = null),
                  e.l.clear(),
                  e.Ta.clear(),
                  e.j.clear(),
                  (e.K = null),
                  e.o.clear(),
                  (e.C = null),
                  e.$.clear(),
                  (e.O = null),
                  re(C));
              });
            }
            h.init = function (e, t, n, r) {
              ((t = t === void 0 ? !1 : t), (n = n === void 0 ? "UNKNOWN" : n), (r = r === void 0 ? !1 : r));
              var i = this,
                s,
                o,
                u,
                l,
                p,
                m;
              return j(function (y) {
                if (y.g == 1) return ((s = Ot), I(y, i.M, 2));
                if (y.g != 3)
                  return !zs(i) && !ss(i)
                    ? y.A(3)
                    : (An("Expected MediaSource to be open during init(); reopening the media source."),
                      (i.M = new at()),
                      (i.i = yp(i, i.M)),
                      I(y, i.M, 3));
                for (
                  i.J = t,
                    i.X = n,
                    i.kb = r,
                    i.eb = !i.J && i.X == "HLS" && !i.kb,
                    i.$.clear(),
                    i.V = null,
                    i.va = null,
                    i.T = null,
                    i.oa = null,
                    i.ma = new at(),
                    o = x(e.keys()),
                    u = o.next();
                  !u.done;
                  u = o.next()
                )
                  ((l = u.value),
                    (p = e.get(l)),
                    Pc(i, l, p, p.codecs),
                    i.m ? (i.o.set(s.aa, []), i.o.set(s.wa, [])) : i.o.set(l, []));
                ((m = e.get(s.aa)) && m.isAudioMuxedInVideo && (i.m = !0), re(y));
              });
            };
            function Pc(e, t, n, r) {
              t == "audio" && r && (r = nu(r, n.mimeType));
              var i = Rt(n.mimeType, r);
              if (t == Fe) Dc(e, i, e.J, n.external);
              else {
                var s = e.B.forceTransmux;
                (!En(i) || (!e.J && Ti.includes(i))) && (s = !0);
                var o = sc(n.mimeType, r);
                if (s) {
                  if (
                    ((s = Bn("audio", (r || "").split(","))), (r = Bn("video", (r || "").split(","))), s && r)
                  ) {
                    ((e.m = !0), Pc(e, "audio", n, s), Pc(e, "video", n, r));
                    return;
                  }
                  (r = To(o)) && ((i = r()), e.j.set(t, i), (i = i.convertCodecs(t, o)));
                }
                ((o = i + e.B.addExtraFeaturesToSourceBuffer(i)), dt(e.I));
                try {
                  var u = e.i.addSourceBuffer(o);
                } catch (l) {
                  throw new H(
                    2,
                    3,
                    3015,
                    l,
                    "The mediaSource_ status was " + e.i.readyState + " expected 'open'",
                    null,
                  );
                }
                (e.J && (u.mode = GM),
                  e.u.D(u, "error", function () {
                    var l = e.o.get(t)[0];
                    l.p.reject(new H(2, 3, 3014, e.g.error ? e.g.error.code : 0, l.uri));
                  }),
                  e.u.D(u, "updateend", function () {
                    return os(e, t);
                  }),
                  e.l.set(t, u),
                  e.G.set(t, i),
                  e.Ta.set(t, !!n.drmInfos.length));
              }
            }
            h.configure = function (e) {
              ((this.B = e), this.h && (this.h.B = e.modifyCueCallback));
            };
            function mx(e) {
              return e.za && !e.N && !e.H;
            }
            function Dc(e, t, n, r) {
              e.h || ((e.h = new Si(e.ba)), e.h && (e.h.B = e.B.modifyCueCallback));
              var i = e.h;
              ((r = r || e.Fa),
                (e = e.X),
                t == "application/cea-608" || t == "application/cea-708"
                  ? (i.i = null)
                  : ((i.i = Za.get(t)()),
                    i.i.setSequenceMode
                      ? i.i.setSequenceMode(n)
                      : qe(
                          "Text parsers w/ setSequenceMode",
                          'Text parsers should have a "setSequenceMode" method!',
                        ),
                    i.i.setManifestType
                      ? i.i.setManifestType(e)
                      : qe(
                          "Text parsers w/ setManifestType",
                          'Text parsers should have a "setManifestType" method!',
                        ),
                    (i.C = r)));
            }
            function zs(e) {
              return e.H ? !1 : e.i ? e.i.readyState == "ended" : !0;
            }
            function ss(e) {
              return e.H ? !1 : e.i ? e.i.readyState == "closed" : !0;
            }
            function vp(e, t) {
              return e.l.size ? (t == Fe ? e.h.g : ax(bo(e, t))) : null;
            }
            function Xs(e, t) {
              return e.l.size ? (t == Fe ? e.h.h : Rc(bo(e, t))) : null;
            }
            function PM(e, t, n) {
              return t == Fe
                ? ((e = e.h), e.h == null || e.h < n ? 0 : e.h - Math.max(n, e.g))
                : ((e = bo(e, t)), ux(e, n));
            }
            h.Gc = function () {
              var e = {
                total: this.H ? [] : Ci(this.g.buffered),
                audio: Ci(bo(this, "audio")),
                video: Ci(bo(this, "video")),
                text: [],
              };
              if (this.h) {
                var t = this.h.g,
                  n = this.h.h;
                t != null && n != null && e.text.push({ start: t, end: n });
              }
              return e;
            };
            function bo(e, t) {
              if (e.H || e.N || ss(e)) return null;
              try {
                return e.l.get(t).buffered;
              } catch (n) {
                return (e.l.has(t), null);
              }
            }
            function DM(e, t, n, r, i, s, o) {
              o = o === void 0 ? !1 : o;
              var u = null,
                l = [],
                p = De(n);
              if (Ti.includes(s))
                ((n = Gs(p)),
                  n.length &&
                    r &&
                    ((o = n.find(function (A) {
                      return A.description === "com.apple.streaming.transportStreamTimestamp";
                    })) &&
                      typeof o.data == "number" &&
                      (u = Math.round(o.data) / 1e3),
                    e.O.onMetadata(
                      [{ cueTime: r.startTime, data: p, frames: n, dts: r.startTime, pts: r.startTime }],
                      0,
                      r.endTime,
                    )));
              else if (s.includes("/mp4") && r && r.ea) {
                p = new ut();
                var m =
                  (i.emsgSchemeIdUris != null && i.emsgSchemeIdUris.length > 0) || e.B.dispatchAllEmsgBoxes;
                m &&
                  p.S("emsg", function (A) {
                    var E = i.emsgSchemeIdUris;
                    if (A.version === 0)
                      var C = A.reader.Yc(),
                        k = A.reader.Yc(),
                        R = A.reader.U(),
                        L = A.reader.U(),
                        U = A.reader.U(),
                        G = A.reader.U(),
                        b = r.startTime + L / R;
                    else
                      ((R = A.reader.U()),
                        (b = A.reader.Ed() / R + r.timestampOffset),
                        (L = b - r.startTime),
                        (U = A.reader.U()),
                        (G = A.reader.U()),
                        (C = A.reader.Yc()),
                        (k = A.reader.Yc()));
                    ((A = A.reader.Tb(A.reader.getLength() - A.reader.Pa(), !0)),
                      ((E && E.includes(C)) || e.B.dispatchAllEmsgBoxes) &&
                        (C == "urn:mpeg:dash:event:2012"
                          ? e.O.Gk()
                          : ((E = b + U / R),
                            e.O.Ek({
                              startTime: b,
                              endTime: E,
                              schemeIdUri: C,
                              value: k,
                              timescale: R,
                              presentationTimeDelta: L,
                              eventDuration: U,
                              id: G,
                              messageData: A,
                            }),
                            (C == "https://aomedia.org/emsg/ID3" ||
                              C == "https://developer.apple.com/streaming/emsg-id3") &&
                              ((R = Gs(A)),
                              R.length &&
                                e.O.onMetadata(
                                  [{ cueTime: b, data: A, frames: R, dts: b, pts: b }],
                                  0,
                                  E,
                                )))));
                  });
                var y = r.ea.timescale;
                t = y && !isNaN(y);
                var v = 0,
                  w = !1;
                (t &&
                  p
                    .S("prft", function (A) {
                      var E = A.reader,
                        C = A.version;
                      (E.U(), (A = E.U()));
                      var k = E.U();
                      ((A = A * 1e3 + (k / 4294967296) * 1e3),
                        C === 0 ? (E = E.U()) : ((C = E.U()), (E = E.U()), (E = C * 4294967296 + E)),
                        (A = fx(A)),
                        (E = new Map().set("detail", {
                          wallClockTime: A,
                          programStartDate: new Date(A - (E / y) * 1e3),
                        })),
                        (E = new we("prft", E)),
                        e.O.onEvent(E));
                    })
                    .box("moof", Ue)
                    .box("traf", Ue)
                    .S("tfdt", function (A) {
                      w ||
                        ((v = Ec(A.reader, A.version).baseMediaDecodeTime / y),
                        (w = !0),
                        m || A.parser.stop());
                    }),
                  (m || t) && p.parse(n, !1, o),
                  w && r.timestampOffset == 0 && (u = v));
              } else
                s.includes("/mp4") ||
                  s.includes("/webm") ||
                  !Lo(p) ||
                  (e.$.has(t) || e.$.set(t, new ft()),
                  (l = e.$.get(t)),
                  l.clearData(),
                  l.Kf(r.i),
                  l.parse(p),
                  (p = l.getStartTime(t)),
                  p != null && (u = p),
                  (l = l.getMetadata()));
              return { timestamp: u, metadata: l };
            }
            function Lc(e, t, n, r, i, s, o, u, l, p, m) {
              ((o = o === void 0 ? !1 : o),
                (u = u === void 0 ? !1 : u),
                (l = l === void 0 ? !1 : l),
                (p = p === void 0 ? !1 : p));
              var y, v, w, A, E, C, k, R, L, U, G, b, B, N, z, V, X, W, ie, ne;
              return j(function (q) {
                switch (q.g) {
                  case 1:
                    if (((y = Ot), t != y.Na)) {
                      q.A(2);
                      break;
                    }
                    if (e.X != "HLS") {
                      q.A(3);
                      break;
                    }
                    return I(q, e.ab, 4);
                  case 4:
                    ((v = q.h), (e.h.u = v));
                  case 3:
                    return I(
                      q,
                      dC(e.h, n, r ? r.startTime : null, r ? r.endTime : null, r ? r.P()[0] : null),
                      5,
                    );
                  case 5:
                    return q.return();
                  case 2:
                    if (p || !e.m) {
                      q.A(6);
                      break;
                    }
                    return I(q, Lc(e, y.aa, n, r, i, s, o, u, l, !0), 7);
                  case 7:
                    return I(q, Lc(e, y.wa, n, r, i, s, o, u, l, !0), 8);
                  case 8:
                    return q.return();
                  case 6:
                    if (!e.l.has(t)) return q.return();
                    if (
                      ((w = e.l.get(t).timestampOffset),
                      (A = e.G.get(t)),
                      e.j.has(t) && (A = e.j.get(t).getOriginalMimeType()),
                      r &&
                        ((E = DM(e, t, n, r, i, A, l)),
                        (C = E.timestamp),
                        (k = E.metadata),
                        C != null &&
                          (e.V == null &&
                            t == y.wa &&
                            ((e.V = C),
                            (e.va = r.startTime),
                            e.T != null && ((R = 0), e.va == e.oa && (R = e.V - e.T), e.ma.resolve(R))),
                          e.T == null &&
                            t == y.aa &&
                            ((e.T = C),
                            (e.oa = r.startTime),
                            e.V != null && ((L = 0), e.va == e.oa && (L = e.V - e.T), e.ma.resolve(L))),
                          (U = C),
                          (G = Ti),
                          !e.J && G.includes(e.G.get(t)) && (U = 0),
                          (b = r.startTime - U),
                          (B = Math.abs(w - b)),
                          (B >= 0.001 || o || u) &&
                            (!l || b > 0 || !w) &&
                            ((w = b),
                            e.eb &&
                              (Xt(
                                e,
                                t,
                                function () {
                                  return No(e, t);
                                },
                                null,
                              ),
                              Xt(
                                e,
                                t,
                                function () {
                                  return Oo(e, t, w);
                                },
                                null,
                              ))),
                          (t == y.wa || !e.l.has(y.wa)) && e.ab.resolve(w)),
                        k.length) &&
                        e.O.onMetadata(k, w, r ? r.endTime : null),
                      s &&
                        t == y.wa &&
                        (e.h || Dc(e, "application/cea-608", e.J, !1),
                        e.K || ((N = A.split(";", 1)[0]), (e.K = new $r(N))),
                        r ? ((z = e.K.Af(n)), z.length && hC(e.h, z, w)) : e.K.init(n, u, m)),
                      !e.j.has(t))
                    ) {
                      q.A(9);
                      break;
                    }
                    return I(q, e.j.get(t).transmux(n, i, r, e.i.duration, t), 10);
                  case 10:
                    ((V = q.h),
                      ArrayBuffer.isView(V)
                        ? (n = V)
                        : ((X = V),
                          X.init != null &&
                            ((W = X.init),
                            Xt(
                              e,
                              t,
                              function () {
                                (e.C && $l(e.C, W, w, i), e.l.get(t).appendBuffer(W));
                              },
                              r ? r.P()[0] : null,
                            )),
                          (n = X.data)));
                  case 9:
                    if (((n = jM(e, i, n, r, t)), !r || !e.J || t == y.Na)) {
                      q.A(11);
                      break;
                    }
                    if (!o && !u) {
                      q.A(11);
                      break;
                    }
                    if (((ie = r.startTime), e.X != "HLS" || e.m || t != y.aa || !e.l.has(y.wa))) {
                      q.A(13);
                      break;
                    }
                    return I(q, e.ma, 14);
                  case 14:
                    ((ne = q.h), Math.abs(ne) > 0.15 && (ie -= ne));
                  case 13:
                    (Xt(
                      e,
                      t,
                      function () {
                        return No(e, t);
                      },
                      null,
                    ),
                      Xt(
                        e,
                        t,
                        function () {
                          return Oo(e, t, ie);
                        },
                        null,
                      ));
                  case 11:
                    return I(
                      q,
                      Xt(
                        e,
                        t,
                        function () {
                          var Z = n;
                          (e.C && $l(e.C, Z, w, i), e.l.get(t).appendBuffer(Z));
                        },
                        r ? r.P()[0] : null,
                      ),
                      15,
                    );
                  case 15:
                    re(q);
                }
              });
            }
            function LM(e, t) {
              var n = Xs(e, "video") || 0;
              r0(e.h, t, n);
            }
            function bM(e) {
              e.h && r0(e.h, "", 0);
            }
            h.remove = function (e, t, n, r) {
              var i = this,
                s,
                o;
              return j(function (u) {
                return u.g == 1
                  ? ((s = Ot),
                    e == s.wa && i.K && (i.K.remove(r), (o = i.h.g || 0), i.h.remove(o, n, !0)),
                    e == s.Na
                      ? I(u, i.h.remove(t, n), 0)
                      : n > t
                        ? I(
                            u,
                            Xt(
                              i,
                              e,
                              function () {
                                return bc(i, e, t, n);
                              },
                              null,
                            ),
                            5,
                          )
                        : u.A(0))
                  : i.m
                    ? I(
                        u,
                        Xt(
                          i,
                          s.aa,
                          function () {
                            return bc(i, s.aa, t, n);
                          },
                          null,
                        ),
                        0,
                      )
                    : u.A(0);
              });
            };
            function yx(e, t) {
              var n;
              return j(function (r) {
                return r.g == 1
                  ? ((n = Ot),
                    t == n.Na
                      ? e.h
                        ? I(r, e.h.remove(0, 1 / 0), 0)
                        : r.return()
                      : t === n.wa && e.K && e.h
                        ? I(r, e.h.remove(0, 1 / 0, !0), 4)
                        : r.A(4))
                  : r.g != 6
                    ? I(
                        r,
                        Xt(
                          e,
                          t,
                          function () {
                            return bc(e, t, 0, e.i.duration);
                          },
                          null,
                        ),
                        6,
                      )
                    : e.m
                      ? I(
                          r,
                          Xt(
                            e,
                            n.aa,
                            function () {
                              return bc(e, n.aa, 0, e.i.duration);
                            },
                            null,
                          ),
                          0,
                        )
                      : r.A(0);
              });
            }
            h.flush = function (e) {
              var t = this,
                n;
              return j(function (r) {
                return r.g == 1
                  ? ((n = Ot),
                    e == n.Na
                      ? r.return()
                      : I(
                          r,
                          Xt(
                            t,
                            e,
                            function () {
                              ((t.g.currentTime -= 0.001), os(t, e));
                            },
                            null,
                          ),
                          2,
                        ))
                  : t.m
                    ? I(
                        r,
                        Xt(
                          t,
                          n.aa,
                          function () {
                            var i = n.aa;
                            ((t.g.currentTime -= 0.001), os(t, i));
                          },
                          null,
                        ),
                        0,
                      )
                    : r.A(0);
              });
            };
            function vx(e, t, n, r, i, s, o, u, l) {
              var p, m, y;
              return j(function (v) {
                return v.g == 1
                  ? ((p = Ot),
                    t == p.Na
                      ? (s || (e.h.u = n), fC(e.h, r, i), v.return())
                      : ((m = []), I(v, VM(e, t, o, u, l), 2)))
                  : ((y = v.h),
                    y ||
                      (m.push(
                        Xt(
                          e,
                          t,
                          function () {
                            return No(e, t);
                          },
                          null,
                        ),
                      ),
                      e.m &&
                        m.push(
                          Xt(
                            e,
                            p.aa,
                            function () {
                              return No(e, p.aa);
                            },
                            null,
                          ),
                        )),
                    s ||
                      (m.push(
                        Xt(
                          e,
                          t,
                          function () {
                            return Oo(e, t, n);
                          },
                          null,
                        ),
                      ),
                      e.m &&
                        m.push(
                          Xt(
                            e,
                            p.aa,
                            function () {
                              return Oo(e, p.aa, n);
                            },
                            null,
                          ),
                        )),
                    (r != 0 || i != 1 / 0) &&
                      (m.push(
                        Xt(
                          e,
                          t,
                          function () {
                            return xx(e, t, r, i);
                          },
                          null,
                        ),
                      ),
                      e.m &&
                        m.push(
                          Xt(
                            e,
                            p.aa,
                            function () {
                              return xx(e, p.aa, r, i);
                            },
                            null,
                          ),
                        )),
                    m.length ? I(v, Promise.all(m), 0) : v.A(0));
              });
            }
            function NM(e, t, n) {
              var r, i;
              return j(function (s) {
                return s.g == 1
                  ? ((r = Ot),
                    t == r.Na ||
                    (t == r.wa && (e.ab = new at()), !e.J || ((i = Xs(e, t)) && Math.abs(i - n) < 0.15))
                      ? s.return()
                      : (Xt(
                          e,
                          t,
                          function () {
                            return No(e, t);
                          },
                          null,
                        ),
                        e.m &&
                          Xt(
                            e,
                            r.aa,
                            function () {
                              return No(e, r.aa);
                            },
                            null,
                          ),
                        I(
                          s,
                          Xt(
                            e,
                            t,
                            function () {
                              return Oo(e, t, n);
                            },
                            null,
                          ),
                          2,
                        )))
                  : e.m
                    ? I(
                        s,
                        Xt(
                          e,
                          r.aa,
                          function () {
                            return Oo(e, r.aa, n);
                          },
                          null,
                        ),
                        0,
                      )
                    : s.A(0);
              });
            }
            ((h.endOfStream = function (e) {
              var t = this;
              return j(function (n) {
                return I(
                  n,
                  hu(t, function () {
                    zs(t) || ss(t) || (e ? t.i.endOfStream(e) : t.i.endOfStream());
                  }),
                  0,
                );
              });
            }),
              (h.Ab = function (e) {
                var t = this;
                return j(function (n) {
                  return I(
                    n,
                    hu(t, function () {
                      if (t.B.durationReductionEmitsUpdateEnd && e < t.i.duration)
                        for (var r = x(t.l.keys()), i = r.next(); !i.done; i = r.next()) {
                          i = i.value;
                          var s = { start: function () {}, p: new at(), uri: null };
                          t.o.get(i).unshift(s);
                        }
                      ((t.i.duration = e), (t.ya = e));
                    }),
                    0,
                  );
                });
              }),
              (h.getDuration = function () {
                return this.i.duration;
              }));
            function OM(e, t, n) {
              j(function (r) {
                return e.I.g || e.g.error || e.N || e.H || zs(e) || ss(e)
                  ? r.return()
                  : I(
                      r,
                      hu(e, function () {
                        zs(e) || ss(e) || e.i.setLiveSeekableRange(t, n);
                      }),
                      0,
                    );
              });
            }
            function xp(e) {
              j(function (t) {
                return e.I.g || e.g.error || e.N || e.H || zs(e) || ss(e)
                  ? t.return()
                  : I(
                      t,
                      hu(e, function () {
                        zs(e) || ss(e) || e.i.clearLiveSeekableRange();
                      }),
                      0,
                    );
              });
            }
            function bc(e, t, n, r) {
              if (r <= n) os(e, t);
              else {
                if (e.C) {
                  var i = e.C;
                  t === "video" && i.g && i.g.flushBuffer(n, r);
                }
                e.l.get(t).remove(n, r);
              }
            }
            function No(e, t) {
              var n = e.l.get(t),
                r = n.appendWindowStart,
                i = n.appendWindowEnd;
              (n.abort(), (n.appendWindowStart = r), (n.appendWindowEnd = i), os(e, t));
            }
            function Oo(e, t, n) {
              (n < 0 && (n += 0.001), (e.l.get(t).timestampOffset = n), os(e, t));
            }
            function xx(e, t, n, r) {
              var i = e.l.get(t);
              ((i.appendWindowEnd !== r || i.appendWindowStart !== n) &&
                ((i.appendWindowStart = 0), (i.appendWindowEnd = r), (i.appendWindowStart = n)),
                os(e, t));
            }
            function os(e, t) {
              if (e.H || e.I.g) {
                var n = e.o.get(t);
                n && n.length && ((n = n[0]) && n.p && n.p.resolve(), e.o.set(t, []));
              } else (n = e.o.get(t)[0]) && (n.p.resolve(), Tp(e, t));
            }
            function Xt(e, t, n, r) {
              return (
                dt(e.I),
                (n = { start: n, p: new at(), uri: r }),
                e.o.get(t).push(n),
                e.o.get(t).length == 1 && Tx(e, t),
                n.p
              );
            }
            function hu(e, t) {
              var n, r, i, s, o, u, l, p, m, y, v, w, A;
              return j(function (E) {
                switch (E.g) {
                  case 1:
                    for (
                      dt(e.I), n = [], r = Array.from(e.l.keys()), i = x(r), s = i.next(), o = {};
                      !s.done;
                      o = { ready: void 0 }, s = i.next()
                    )
                      ((u = s.value),
                        (o.ready = new at()),
                        (l = {
                          start: (function (C) {
                            return function () {
                              return C.ready.resolve();
                            };
                          })(o),
                          p: o.ready,
                          uri: null,
                        }),
                        (p = e.o.get(u)),
                        p.push(l),
                        n.push(o.ready),
                        p.length == 1 && l.start());
                    return (ee(E, 2), I(E, Promise.all(n), 4));
                  case 4:
                    de(E, 3);
                    break;
                  case 2:
                    throw ((m = se(E)), m);
                  case 3:
                    return (ee(E, 5, 6), I(E, t(), 6));
                  case 6:
                    for (ye(E), y = x(r), v = y.next(); !v.done; v = y.next()) ((w = v.value), Tp(e, w));
                    Ne(E, 0);
                    break;
                  case 5:
                    throw (
                      (A = se(E)),
                      new H(2, 3, 3015, A, e.g.error || "No error in the media element", null)
                    );
                }
              });
            }
            function Tp(e, t) {
              (e.o.get(t).shift(), Tx(e, t));
            }
            function Tx(e, t) {
              var n = e.o.get(t)[0];
              if (n)
                try {
                  n.start();
                } catch (r) {
                  (r.name == "QuotaExceededError"
                    ? n.p.reject(new H(2, 3, 3017, t))
                    : mx(e)
                      ? n.p.reject(new H(2, 3, 3015, r, e.g.error || "No error in the media element", n.uri))
                      : n.p.reject(new H(2, 3, 3024, t)),
                    Tp(e, t));
                }
            }
            function UM(e, t) {
              ((e.ba = t), e.h && (e.h.l = t));
            }
            function jM(e, t, n, r, i) {
              if (qa(e.G.get(i)) != "mp4") return n;
              var s = r === null,
                o = e.Ta.get(i),
                u = e.O.Pj(),
                l = !1;
              (r && r.ea && (l = r.ea.encrypted), (r = r ? r.P()[0] : null));
              var p = Be();
              return (
                e.B.correctEc3Enca && s && i === "audio" && (n = gM(n)),
                e.B.insertFakeEncryptionInInit &&
                  o &&
                  p.Fd(u, i) &&
                  (s ? (n = mM(t, n, r)) : !l && p.Ni(i) && (n = yM(n))),
                s && p.se() && (n = TM(n)),
                n
              );
            }
            function BM(e, t, n, r) {
              return Xt(
                e,
                t,
                function () {
                  if (t !== Fe) {
                    if ((e.G.get(t), Be().Ib())) {
                      (e.j.has(t) && (e.j.get(t).destroy(), e.j.delete(t)), r && e.j.set(t, r));
                      var i = n + e.B.addExtraFeaturesToSourceBuffer(n);
                      (e.l.get(t).changeType(i), e.G.set(t, n));
                    }
                    os(e, t);
                  }
                },
                null,
              );
            }
            function FM(e, t) {
              var n, r, i, s, o, u, l, p, m, y, v, w, A, E, C, k, R, L, U, G;
              return j(function (b) {
                if (b.g == 1) {
                  if (e.H || e.N) return b.return();
                  for (
                    n = Ot,
                      e.H = !0,
                      e.m = !1,
                      r = e.g.currentTime,
                      i = e.g.autoplay,
                      e.g.paused || (e.Ua = !0),
                      e.ob && (e.g.autoplay = !1),
                      ge(b, 2),
                      e.u.Qa(),
                      s = x(e.j.values()),
                      o = s.next();
                    !o.done;
                    o = s.next()
                  )
                    ((u = o.value), u.destroy());
                  for (l = x(e.l.values()), p = l.next(); !p.done; p = l.next()) {
                    m = p.value;
                    try {
                      e.i.removeSourceBuffer(m);
                    } catch (B) {}
                  }
                  return (
                    e.j.clear(),
                    e.l.clear(),
                    (y = e.i.duration),
                    (e.M = new at()),
                    (e.i = yp(e, e.M)),
                    I(b, e.M, 4)
                  );
                }
                if (b.g != 2) {
                  for (
                    !isNaN(y) && y ? (e.i.duration = y) : !isNaN(e.ya) && e.ya && (e.i.duration = e.ya),
                      v = new at(),
                      w = e.i.sourceBuffers,
                      A = t.size,
                      E = 0,
                      C = function () {
                        (E++, E === A && (v.resolve(), e.u.Ma(w, "addsourcebuffer", C)));
                      },
                      e.u.D(w, "addsourcebuffer", C),
                      k = x(t.keys()),
                      R = k.next();
                    !R.done;
                    R = k.next()
                  )
                    ((L = R.value), (U = t.get(L)), Pc(e, L, U, U.codecs));
                  return (
                    (G = t.get(n.aa)) && G.isAudioMuxedInVideo && (e.m = !0),
                    e.m && !e.o.has(n.aa) && e.o.set(n.aa, []),
                    I(b, v, 2)
                  );
                }
                return (
                  ye(b),
                  (e.H = !1),
                  dt(e.I),
                  e.u.Aa(e.g, "loadedmetadata", function () {
                    e.I.g || (e.g.currentTime = r);
                  }),
                  e.u.Aa(e.g, "canplaythrough", function () {
                    e.I.g || ((e.g.autoplay = i), e.Ua && ((e.Ua = !1), e.g.play()));
                  }),
                  Ne(b, 0)
                );
              });
            }
            function Sx(e, t) {
              return hu(e, function () {
                return FM(e, t);
              });
            }
            function wx(e, t, n, r) {
              var i = !1,
                s = Bn("audio", (r || "").split(",")),
                o = Bn("video", (r || "").split(",")),
                u = o;
              (t == "audio" && (u = s), u || (u = r));
              var l = Rt(n, u),
                p = Qn(e.G.get(t)),
                m = e.B.forceTransmux;
              if (
                (!En(l) || (!e.J && Ti.includes(l))
                  ? (m = !0)
                  : m || n == p || (m = !Be().Nf() && Ti.includes(n)),
                m && ((e = sc(n, u)), (u = To(e))))
              ) {
                var y = u();
                (s && o && (i = !0), (l = y.convertCodecs(t, e)));
              }
              return (
                !y && t === "video" && s && (l = Rt(n, r)),
                (t = fn(Fn(l))),
                { jc: y, jl: i, Th: Qn(l), codec: t, mimeType: l }
              );
            }
            function Ax(e, t, n, r, i) {
              if (t == Fe) return { type: wp, wf: n, jc: null };
              var s = fn(Fn(e.G.get(t))),
                o = Qn(e.G.get(t)),
                u = wx(e, t, n, r),
                l = u.jc,
                p = u.jl,
                m = u.Th,
                y = u.codec;
              u = u.mimeType;
              var v = !0;
              return (
                p &&
                  e.G.has("audio") &&
                  ((n = wx(e, "audio", n, r)),
                  (r = fn(Fn(e.G.get("audio")))),
                  (v = Qn(e.G.get("audio"))),
                  (v = r == n.codec && v == n.Th),
                  n.jc && n.jc.destroy()),
                s === y && o === m && v
                  ? { type: wp, wf: u, jc: l }
                  : ((s = !0),
                    ((e.m && !i.has("audio")) || (p && l && !e.j.has(t))) && (s = !1),
                    (t = Be()),
                    s && e.B.codecSwitchingStrategy === "smooth" && t.Ib()
                      ? { type: Ex, wf: u, jc: l }
                      : (l && l.destroy(), { type: Ap, wf: u, jc: null }))
              );
            }
            function VM(e, t, n, r, i) {
              var s, o, u, l, p, m;
              return j(function (y) {
                return y.g == 1
                  ? ((s = Ot),
                    (o = Ax(e, t, n, r, i)),
                    (u = o.type),
                    (l = o.jc),
                    (p = o.wf),
                    (m = i.get(s.aa)) && (e.m = m.isAudioMuxedInVideo),
                    u == wp
                      ? (e.j.has(t) && !l
                          ? (e.j.get(t).destroy(), e.j.delete(t))
                          : !e.j.has(t) && l
                            ? e.j.set(t, l)
                            : l &&
                              (e.j.has(t) && e.j.get(t).transmux !== l.transmux
                                ? (e.j.get(t).destroy(), e.j.set(t, l))
                                : l.destroy()),
                        y.return(!1))
                      : u == Ex
                        ? I(y, BM(e, t, p, l), 3)
                        : u != Ap
                          ? y.A(3)
                          : (l && l.destroy(), I(y, Sx(e, i), 3)))
                  : y.return(!0);
              });
            }
            function HM(e, t, n, r, i) {
              return ((e = Ax(e, t, n, r, i)), e.jc && e.jc.destroy(), e.type == Ap);
            }
            var Sp = g.URL.createObjectURL,
              GM = "sequence",
              wp = "none",
              Ap = "reset",
              Ex = "changeType";
            function Pe(e, t, n) {
              ((this.i = e),
                (this.F = t),
                (this.u = this.l = 1 / 0),
                (this.h = 1),
                (this.g = this.j = null),
                (this.B = 0),
                (this.C = !0),
                (this.J = !1),
                (this.I = 0),
                (this.G = n === void 0 ? !0 : n),
                (this.H = 0),
                (this.o = !1),
                (this.m = e));
            }
            ((h = Pe.prototype),
              (h.getDuration = function () {
                return this.l;
              }),
              (h.Rj = function () {
                return this.h;
              }),
              (h.Wi = function (e) {
                this.i = e;
              }),
              (h.Ab = function (e) {
                this.l = e;
              }),
              (h.Wj = function () {
                return this.i;
              }),
              (h.Vi = function (e) {
                this.B = e;
              }),
              (h.cd = function (e) {
                (e && !this.C && (this.J = !0), (this.C = e));
              }),
              (h.Lf = function (e) {
                this.u = e;
              }),
              (h.df = function () {
                return this.u;
              }),
              (h.rh = function (e) {
                this.F = e;
              }),
              (h.Jj = function () {
                return this.F;
              }),
              (h.Hi = function (e, t) {
                if (e.length != 0) {
                  var n = (Date.now() + this.B) / 1e3;
                  if (
                    ((e = e.filter(function (i) {
                      return i.start + t < n;
                    })),
                    e.length != 0)
                  ) {
                    var r = e[e.length - 1].end + t;
                    (this.xf(e[0].start + t),
                      (this.h = e.reduce(function (i, s) {
                        return Math.max(i, s.end - s.start);
                      }, this.h)),
                      (this.g = Math.max(this.g, r)),
                      this.i != null && this.G && !this.o && (this.i = n - this.g - this.h));
                  }
                }
              }),
              (h.me = function (e) {
                if (e.length != 0) {
                  var t = e[0].startTime,
                    n = e[0].endTime,
                    r = (Date.now() + this.B) / 1e3;
                  e = x(e);
                  for (var i = e.next(); !i.done; i = e.next())
                    ((i = i.value),
                      r < i.startTime ||
                        ((t = Math.min(t, i.startTime)),
                        (n = Math.max(n, i.endTime)),
                        (this.h = Math.max(this.h, i.endTime - i.startTime))));
                  (this.xf(t),
                    (this.g = Math.max(this.g, n)),
                    this.i != null && this.G && !this.o && (this.i = r - this.g - this.h));
                }
              }),
              (h.Gi = function (e, t) {
                (this.xf(e), t == 1 / 0 || this.W() || (this.g = Math.max(this.g, t)));
              }),
              (h.Sj = function () {
                return this.g;
              }),
              (h.qf = function () {
                this.o = !0;
              }),
              (h.vk = function () {
                return this.o;
              }),
              (h.sh = function (e) {
                this.m = e;
              }),
              (h.Oj = function () {
                return this.m;
              }),
              (h.xf = function (e) {
                this.j == null ? (this.j = e) : this.J || (this.j = Math.min(this.j, e));
              }),
              (h.Wg = function (e) {
                this.h = Math.max(this.h, e);
              }),
              (h.offset = function (e) {
                (this.j != null && (this.j += e), this.g != null && (this.g += e));
              }),
              (h.W = function () {
                return this.l == 1 / 0 && !this.C;
              }),
              (h.Vc = function () {
                return this.l != 1 / 0 && !this.C;
              }),
              (h.Hb = function () {
                return Math.max(this.I, this.Ic() - this.u);
              }),
              (h.Yi = function (e) {
                this.I = e;
              }),
              (h.Ic = function () {
                return this.W() || this.Vc()
                  ? Math.min(Math.max(0, (Date.now() + this.B) / 1e3 - this.h - this.i) + this.H, this.l)
                  : this.g
                    ? Math.min(this.g, this.l)
                    : this.l;
              }),
              (h.ae = function (e) {
                var t = Math.max(this.j, this.I);
                return this.u == 1 / 0
                  ? Math.ceil(t * 1e3) / 1e3
                  : Math.max(t, Math.min(this.Ic() - this.u + e, this.Gb()));
              }),
              (h.Zb = function () {
                return this.ae(0);
              }),
              (h.Gb = function () {
                return Math.max(0, this.Ic() - (this.W() || this.Vc() ? this.F : 0));
              }),
              (h.kj = function () {
                return !(this.i == null || (this.g != null && this.G));
              }),
              (h.Ui = function (e) {
                this.H = e;
              }),
              (h.Ej = function () {
                return this.H;
              }),
              fe("shaka.media.PresentationTimeline", Pe),
              (Pe.prototype.getAvailabilityTimeOffset = Pe.prototype.Ej),
              (Pe.prototype.setAvailabilityTimeOffset = Pe.prototype.Ui),
              (Pe.prototype.usingPresentationStartTime = Pe.prototype.kj),
              (Pe.prototype.getSeekRangeEnd = Pe.prototype.Gb),
              (Pe.prototype.getSeekRangeStart = Pe.prototype.Zb),
              (Pe.prototype.getSafeSeekRangeStart = Pe.prototype.ae),
              (Pe.prototype.getSegmentAvailabilityEnd = Pe.prototype.Ic),
              (Pe.prototype.setUserSeekStart = Pe.prototype.Yi),
              (Pe.prototype.getSegmentAvailabilityStart = Pe.prototype.Hb),
              (Pe.prototype.isInProgress = Pe.prototype.Vc),
              (Pe.prototype.isLive = Pe.prototype.W),
              (Pe.prototype.offset = Pe.prototype.offset),
              (Pe.prototype.notifyMaxSegmentDuration = Pe.prototype.Wg),
              (Pe.prototype.notifyMinSegmentStartTime = Pe.prototype.xf),
              (Pe.prototype.getInitialProgramDateTime = Pe.prototype.Oj),
              (Pe.prototype.setInitialProgramDateTime = Pe.prototype.sh),
              (Pe.prototype.isStartTimeLocked = Pe.prototype.vk),
              (Pe.prototype.lockStartTime = Pe.prototype.qf),
              (Pe.prototype.getMaxSegmentEndTime = Pe.prototype.Sj),
              (Pe.prototype.notifyPeriodDuration = Pe.prototype.Gi),
              (Pe.prototype.notifySegments = Pe.prototype.me),
              (Pe.prototype.notifyTimeRange = Pe.prototype.Hi),
              (Pe.prototype.getDelay = Pe.prototype.Jj),
              (Pe.prototype.setDelay = Pe.prototype.rh),
              (Pe.prototype.getSegmentAvailabilityDuration = Pe.prototype.df),
              (Pe.prototype.setSegmentAvailabilityDuration = Pe.prototype.Lf),
              (Pe.prototype.setStatic = Pe.prototype.cd),
              (Pe.prototype.setClockOffset = Pe.prototype.Vi),
              (Pe.prototype.getPresentationStartTime = Pe.prototype.Wj),
              (Pe.prototype.setDuration = Pe.prototype.Ab),
              (Pe.prototype.setPresentationStartTime = Pe.prototype.Wi),
              (Pe.prototype.getMaxSegmentDuration = Pe.prototype.Rj),
              (Pe.prototype.getDuration = Pe.prototype.getDuration));
            function Ep(e, t, n, r) {
              var i = this;
              ((this.u = r),
                (this.g = e),
                (this.F = t),
                (this.h = n),
                (this.j = new et()),
                (this.m = !1),
                (this.l = 0),
                (this.C = !1),
                (this.H = this.G = 0),
                (this.o = XM(this)),
                (this.B = !1),
                this.j.D(e, "waiting", function () {
                  return pu(i);
                }),
                (this.i = new Ve(function () {
                  pu(i);
                }).Ea(this.h.gapJumpTimerTime)));
            }
            ((Ep.prototype.release = function () {
              (this.j && (this.j.release(), (this.j = null)),
                this.i != null && (this.i.stop(), (this.i = null)),
                this.o && (this.o.release(), (this.o = null)),
                (this.g = this.F = this.u = null));
            }),
              (Ep.prototype.zd = function () {
                ((this.B = !0), this.i && this.i.Ea(this.h.gapJumpTimerTime), pu(this));
              }));
            function pu(e) {
              if (e.g.readyState != 0) {
                if (e.g.seeking) {
                  if (!e.m) return;
                } else e.m = !1;
                if (!e.g.paused || (e.g.currentTime == e.l && (e.g.autoplay || e.g.currentTime != e.l))) {
                  var t;
                  if (!(t = !e.o)) {
                    t = e.o;
                    var n = t.h,
                      r = Mx(n),
                      i = n.g.currentTime,
                      s = Date.now() / 1e3;
                    ((t.g != i || t.m != r) && ((t.l = s), (t.g = i), (t.m = r), (t.i = !1)),
                      (i = s - t.l),
                      (r = i >= t.o && r && !t.i) &&
                        (t.j && t.j(t.g, i), (t.i = !0), (t.g = n.g.currentTime)),
                      (t = !r));
                  }
                  t &&
                    ((t = e.g.currentTime),
                    (n = e.g.buffered),
                    (r = SM(n, t, e.h.gapDetectionThreshold)),
                    r == null ||
                      (r == 0 && !e.B) ||
                      ((i = n.start(r)),
                      (s = e.h.gapPadding) && (i = Math.ceil((i + s) * 100) / 100),
                      i >= e.F.Gb() ||
                        i - t < 0.001 ||
                        (r != 0 && n.end(r - 1),
                        zM(e, i),
                        t == e.l && (e.l = i),
                        e.G++,
                        e.u(new we("gapjumped")))));
                }
              }
            }
            function zM(e, t) {
              ((e.C = !0),
                e.j.Aa(e.g, "seeked", function () {
                  e.C = !1;
                }),
                (e.g.currentTime = t));
            }
            function XM(e) {
              if (!e.h.stallEnabled) return null;
              var t = e.h.stallThreshold,
                n = e.h.stallSkip;
              return new Ix(new Cx(e.g), t, function () {
                var r;
                return j(function (i) {
                  if (i.g == 1)
                    return (
                      (r = Ci(e.g.buffered)),
                      r.length ? (n ? ((e.g.currentTime += n), i.A(2)) : I(i, e.g.play(), 3)) : i.return()
                    );
                  if (i.g != 2) {
                    if (!e.g) return i.return();
                    (e.g.pause(), e.g.play());
                  }
                  (e.H++, e.u(new we("stalldetected")), re(i));
                });
              });
            }
            function Ix(e, t, n) {
              ((this.h = e),
                (this.m = Mx(e)),
                (this.g = e.g.currentTime),
                (this.l = Date.now() / 1e3),
                (this.i = !1),
                (this.o = t),
                (this.j = n));
            }
            Ix.prototype.release = function () {
              (this.h && this.h.release(), (this.j = this.h = null));
            };
            function Cx(e) {
              var t = this;
              ((this.g = e),
                (this.h = new et()),
                (this.i = !1),
                this.h.D(this.g, "audiofocuspaused", function () {
                  t.i = !0;
                }),
                this.h.D(this.g, "audiofocusgranted", function () {
                  t.i = !1;
                }),
                this.h.D(this.g, "audiofocuslost", function () {
                  t.i = !0;
                }));
            }
            function Mx(e) {
              if (e.g.paused || e.g.playbackRate == 0 || e.i || e.g.buffered.length == 0) var t = !1;
              else
                e: {
                  ((t = e.g.currentTime), (e = x(Ci(e.g.buffered))));
                  for (var n = e.next(); !n.done; n = e.next())
                    if (((n = n.value), !(t < n.start - 0.1 || t > n.end - 0.5))) {
                      t = !0;
                      break e;
                    }
                  t = !1;
                }
              return t;
            }
            Cx.prototype.release = function () {
              (this.h && this.h.release(), (this.h = null));
            };
            function Uo(e, t, n, r) {
              t == HTMLMediaElement.HAVE_NOTHING || e.readyState >= t
                ? r()
                : ((t = WM.value().get(t)), n.Aa(e, t, r));
            }
            var WM = new xt(function () {
              return new Map([
                [HTMLMediaElement.HAVE_METADATA, "loadedmetadata"],
                [HTMLMediaElement.HAVE_CURRENT_DATA, "loadeddata"],
                [HTMLMediaElement.HAVE_FUTURE_DATA, "canplay"],
                [HTMLMediaElement.HAVE_ENOUGH_DATA, "canplaythrough"],
              ]);
            });
            function Rx(e, t, n, r) {
              var i = this;
              ((this.g = e),
                (this.m = t),
                (this.u = n),
                (this.l = null),
                (this.j = function () {
                  return (i.l == null && (i.l = r()), i.l);
                }),
                (this.o = !1),
                (this.h = new et()),
                (this.i = new Dx(e)),
                Uo(this.g, HTMLMediaElement.HAVE_METADATA, this.h, function () {
                  _x(i, i.j());
                }));
            }
            Rx.prototype.release = function () {
              (this.h && (this.h.release(), (this.h = null)),
                this.i != null && (this.i.release(), (this.i = null)),
                (this.m = function () {}),
                (this.g = null));
            };
            function Ip(e) {
              return e.o ? e.g.currentTime : e.j();
            }
            function kx(e, t) {
              e.g.readyState > 0
                ? Lx(e.i, t)
                : Uo(e.g, HTMLMediaElement.HAVE_METADATA, e.h, function () {
                    _x(e, e.j());
                  });
            }
            function _x(e, t) {
              Math.abs(e.g.currentTime - t) < 0.001
                ? Px(e)
                : (e.h.Aa(e.g, "seeking", function () {
                    Px(e);
                  }),
                  Lx(e.i, e.g.currentTime && e.g.currentTime != 0 ? e.g.currentTime : t));
            }
            function Px(e) {
              ((e.o = !0),
                e.h.D(e.g, "seeking", function () {
                  return e.m();
                }),
                e.u(e.g.currentTime));
            }
            function Dx(e) {
              var t = this;
              ((this.g = e),
                (this.m = 10),
                (this.j = this.l = this.i = 0),
                (this.h = new Ve(function () {
                  t.i <= 0 || t.g.currentTime != t.l || t.g.currentTime === t.j
                    ? t.h.stop()
                    : ((t.g.currentTime = t.j), t.i--);
                })));
            }
            Dx.prototype.release = function () {
              (this.h && (this.h.stop(), (this.h = null)), (this.g = null));
            };
            function Lx(e, t) {
              ((e.l = e.g.currentTime), (e.j = t), (e.i = e.m), (e.g.currentTime = t), e.h.Ea(0.1));
            }
            function bx(e) {
              ((this.g = e), (this.i = !1), (this.h = null), (this.j = new et()));
            }
            ((h = bx.prototype),
              (h.ready = function () {
                function e() {
                  if (t.h == null || (t.h == 0 && t.g.duration != 1 / 0)) t.i = !0;
                  else {
                    var n = t.g.currentTime,
                      r = null;
                    if (typeof t.h == "number") r = t.h;
                    else if (t.h instanceof Date) {
                      var i = Nx(t);
                      i !== null && ((r = t.h.getTime() / 1e3 - i), (r = Ox(t, r)));
                    }
                    r == null
                      ? (t.i = !0)
                      : (r < 0 && (r = Math.max(0, n + r)),
                        n != r
                          ? (t.j.Aa(t.g, "seeking", function () {
                              t.i = !0;
                            }),
                            (t.g.currentTime = r))
                          : (t.i = !0));
                  }
                }
                var t = this;
                Uo(this.g, HTMLMediaElement.HAVE_FUTURE_DATA, this.j, function () {
                  e();
                });
              }),
              (h.release = function () {
                (this.j && (this.j.release(), (this.j = null)), (this.g = null));
              }),
              (h.$f = function (e) {
                this.h = this.i ? this.h : e;
              }),
              (h.Qd = function () {
                var e = this.i ? this.g.currentTime : this.h;
                return (
                  e instanceof Date && ((e = e.getTime() / 1e3 - (Nx(this) || 0)), (e = Ox(this, e))),
                  e || 0
                );
              }),
              (h.Nh = function () {
                return 0;
              }),
              (h.Lh = function () {
                return 0;
              }),
              (h.Mh = function () {
                return !1;
              }),
              (h.Fi = function () {}),
              (h.ri = function () {
                var e = Rc(this.g.buffered);
                return e != null && e >= this.g.duration - 1;
              }));
            function Nx(e) {
              return e.g.getStartDate && ((e = e.g.getStartDate().getTime()), !isNaN(e)) ? e / 1e3 : null;
            }
            function Ox(e, t) {
              return (
                (e = e.g.seekable),
                e.length > 0 && ((t = Math.max(e.start(0), t)), (t = Math.min(e.end(e.length - 1), t))),
                t
              );
            }
            function Ux(e, t, n, r, i, s) {
              var o = this;
              ((this.h = e),
                (this.g = t.presentationTimeline),
                (this.l = n),
                (this.u = i),
                (this.o = null),
                (this.i = new Ep(e, t.presentationTimeline, n, s)),
                (this.j = new Rx(
                  e,
                  function () {
                    e: {
                      var u = o.i;
                      ((u.m = !0), (u.B = !1), u.i && u.i.Ea(u.h.gapJumpTimerTime), pu(u));
                      var l = Ip(o.j);
                      if (((u = Fx(o, l)), !J0() && Math.abs(u - l) > 0.001)) {
                        l = !1;
                        var p = Be().Si();
                        if (p) {
                          var m = Date.now() / 1e3;
                          (!o.o || o.o < m - p) && ((o.o = m), (l = !0));
                        } else l = !0;
                        if (l) {
                          (kx(o.j, u), (u = void 0));
                          break e;
                        }
                      }
                      (o.u(), (u = void 0));
                    }
                    return u;
                  },
                  function (u) {
                    var l = o.i;
                    (l.g.seeking && !l.m && ((l.m = !0), (l.l = u)),
                      l.i && l.i.Ea(l.h.gapJumpTimerTime),
                      pu(l));
                  },
                  function () {
                    return jx(o, r);
                  },
                )),
                (this.m = new Ve(function () {
                  if (o.h.readyState != 0 && !o.h.paused) {
                    var u = Ip(o.j),
                      l = o.g.Zb(),
                      p = o.g.Gb();
                    (p - l < 3 && (l = p - 3), u < l && ((u = Fx(o, u)), (o.h.currentTime = u)));
                  }
                })));
            }
            ((h = Ux.prototype),
              (h.ready = function () {
                this.m.Ea(0.25);
              }),
              (h.release = function () {
                (this.j && (this.j.release(), (this.j = null)),
                  this.i && (this.i.release(), (this.i = null)),
                  this.m && (this.m.stop(), (this.m = null)),
                  (this.h = this.j = this.g = this.l = null),
                  (this.u = function () {}));
              }),
              (h.$f = function (e) {
                kx(this.j, jx(this, e));
              }),
              (h.Qd = function () {
                var e = Ip(this.j);
                return this.h.readyState > 0 && !this.h.paused ? Vx(this, e) : e;
              }),
              (h.Nh = function () {
                return this.i.H;
              }),
              (h.Lh = function () {
                return this.i.G;
              }),
              (h.Mh = function () {
                return this.i.C;
              }));
            function jx(e, t) {
              return (
                t == null
                  ? (t = e.g.getDuration() < 1 / 0 ? e.g.Zb() : e.g.Gb())
                  : t instanceof Date
                    ? (t = t.getTime() / 1e3 - (e.g.m || e.g.i))
                    : t < 0 && (t = e.g.Gb() + t),
                Bx(e, Vx(e, t))
              );
            }
            ((h.Fi = function () {
              this.i.zd();
            }),
              (h.ri = function () {
                if (this.g.W()) {
                  var e = this.g.Ic(),
                    t = Rc(this.h.buffered);
                  if (t != null && t >= e) return !0;
                }
                return !1;
              }));
            function Bx(e, t) {
              var n = e.g.getDuration();
              return t >= n ? n - e.l.durationBackoff : t;
            }
            function Fx(e, t) {
              var n = e.l.rebufferingGoal,
                r = e.l.safeSeekOffset,
                i = e.g.Zb(),
                s = e.g.Gb(),
                o = e.g.getDuration();
              s - i < 3 && (i = s - 3);
              var u = e.g.ae(n),
                l = e.g.ae(r);
              return (
                (n = e.g.ae(n + r)),
                t >= o
                  ? Bx(e, t)
                  : t > s
                    ? s - e.l.safeSeekEndOffset
                    : t < i
                      ? e.g.W() && e.l.returnToEndOfLiveWindowWhenOutside
                        ? s - e.l.safeSeekEndOffset
                        : up(e.h.buffered, l)
                          ? l
                          : n
                      : t >= u || up(e.h.buffered, t)
                        ? t
                        : n
              );
            }
            function Vx(e, t) {
              var n = e.g.Zb();
              return t < n ? n : ((e = e.g.Gb()), t > e ? e : t);
            }
            function Je(e) {
              ((this.g = e), (this.m = null), (this.i = 0), (this.o = !1));
            }
            ((h = Je.prototype),
              (h.getNumReferences = function () {
                return this.g.length;
              }),
              (h.getNumEvicted = function () {
                return this.i;
              }),
              (h.release = function () {
                this.o || ((this.g = []), this.m && this.m.stop(), (this.m = null));
              }),
              (h.Bk = function () {
                this.o = !0;
              }),
              (h.Fb = function (e) {
                for (var t = x(this.g), n = t.next(); !n.done; n = t.next()) e(n.value);
              }));
            function qr(e) {
              return e.g[0] || null;
            }
            ((h.find = function (e) {
              for (var t = this.g.length - 1, n = t; n >= 0; --n) {
                var r = this.g[n],
                  i = n < t ? this.g[n + 1].startTime : r.endTime;
                if (e >= r.startTime && e < i) return n + this.i;
              }
              return this.g.length && e < this.g[0].startTime ? this.i : null;
            }),
              (h.get = function (e) {
                return this.g.length == 0
                  ? null
                  : ((e -= this.i), e < 0 || e >= this.g.length ? null : this.g[e]);
              }),
              (h.offset = function (e) {
                if (!this.o) for (var t = x(this.g), n = t.next(); !n.done; n = t.next()) n.value.offset(e);
              }),
              (h.tf = function (e) {
                if (!this.o && e.length) {
                  var t = Math.round(e[0].startTime * 1e3) / 1e3;
                  ((this.g = this.g.filter(function (n) {
                    return Math.round(n.startTime * 1e3) / 1e3 < t;
                  })),
                    this.g.push.apply(this.g, Y(e)));
                }
              }),
              (h.ke = function (e, t) {
                var n = this;
                ((e = e.filter(function (r) {
                  return r.endTime > t && (n.g.length == 0 || r.endTime > n.g[0].startTime);
                })),
                  this.tf(e),
                  this.Ya(t));
              }),
              (h.Ya = function (e) {
                if (!this.o) {
                  var t = this.g.length;
                  ((this.g = this.g.filter(function (n) {
                    return n.endTime > e;
                  })),
                    (this.i += t - this.g.length));
                }
              }),
              (h.pd = function (e, t, n) {
                if (((n = n === void 0 ? !1 : n), !this.o)) {
                  for (; this.g.length && this.g[this.g.length - 1].startTime >= t; ) this.g.pop();
                  for (; this.g.length && this.g[0].endTime <= e; ) (this.g.shift(), n || this.i++);
                  this.g.length != 0 &&
                    ((e = this.g[this.g.length - 1]),
                    (t = new Ce(
                      e.startTime,
                      t,
                      e.C,
                      e.startByte,
                      e.endByte,
                      e.ea,
                      e.timestampOffset,
                      e.appendWindowStart,
                      e.appendWindowEnd,
                      e.g,
                      e.tilesLayout,
                      e.B,
                      e.h,
                      e.status,
                      e.aesKey,
                    )),
                    (t.mimeType = e.mimeType),
                    (t.codecs = e.codecs),
                    (t.i = e.i),
                    (this.g[this.g.length - 1] = t));
                }
              }),
              (h.Rf = function (e, t) {
                var n = this;
                this.o ||
                  (this.m && this.m.stop(),
                  (this.m = new Ve(function () {
                    var r = t();
                    r ? n.g.push.apply(n.g, Y(r)) : (n.m.stop(), (n.m = null));
                  })),
                  this.m.Ea(e));
              }),
              (Je.prototype[Symbol.iterator] = function () {
                return this.Xb(0);
              }),
              (Je.prototype.Xb = function (e, t, n) {
                ((t = t === void 0 ? !1 : t), (n = n === void 0 ? !1 : n));
                var r = this.find(e);
                if (r == null) return null;
                var i = this.get(r);
                n ? r++ : r--;
                var s = -1;
                if (i && i.g.length > 0)
                  for (var o = i.g.length - 1; o >= 0; --o) {
                    var u = i.g[o];
                    if (e >= u.startTime && e < u.endTime) {
                      if (!t) {
                        for (; o && !u.l; ) (o--, (u = i.g[o]));
                        if (!u.l) return (An("No independent partial segment found!"), null);
                      }
                      (n ? r-- : r++, (s = o - 1));
                      break;
                    }
                  }
                return new Er(this, r, s, n);
              }),
              (Je.prototype.We = function () {
                return -1;
              }));
            function Nc(e, t, n) {
              return (
                (e = new Ce(
                  e,
                  e + t,
                  function () {
                    return n;
                  },
                  0,
                  null,
                  null,
                  e,
                  e,
                  e + t,
                )),
                new Je([e])
              );
            }
            (fe("shaka.media.SegmentIndex", Je),
              (Je.forSingleSegment = Nc),
              (Je.prototype.getIteratorForTime = Je.prototype.Xb),
              (Je.prototype.updateEvery = Je.prototype.Rf),
              (Je.prototype.fit = Je.prototype.pd),
              (Je.prototype.evict = Je.prototype.Ya),
              (Je.prototype.mergeAndEvict = Je.prototype.ke),
              (Je.prototype.offset = Je.prototype.offset),
              (Je.prototype.get = Je.prototype.get),
              (Je.prototype.find = Je.prototype.find),
              (Je.prototype.markImmutable = Je.prototype.Bk),
              (Je.prototype.release = Je.prototype.release),
              (Je.prototype.getNumEvicted = Je.prototype.getNumEvicted),
              (Je.prototype.getNumReferences = Je.prototype.getNumReferences));
            function Er(e, t, n, r) {
              ((this.i = e), (this.h = t), (this.g = n), (this.reverse = r));
            }
            ((h = Er.prototype),
              (h.Jd = function (e) {
                this.reverse = e;
              }),
              (h.zj = function () {
                return this.h;
              }),
              (h.current = function () {
                var e = this.i.get(this.h);
                return (
                  e &&
                    e.g.length > 0 &&
                    e.m &&
                    this.g >= e.g.length &&
                    (this.h++, (this.g = 0), (e = this.i.get(this.h))),
                  e && e.g.length > 0 ? e.g[this.g] : e
                );
              }),
              (h.next = function () {
                var e = this.i.get(this.h);
                return (
                  this.reverse
                    ? e && e.g.length > 0
                      ? (this.g--,
                        this.g < 0 &&
                          (this.h--,
                          (this.g = (e = this.i.get(this.h)) && e.g.length > 0 ? e.g.length - 1 : 0)))
                      : (this.h--, (this.g = 0))
                    : e && e.g.length > 0
                      ? (this.g++, e.m && this.g == e.g.length && (this.h++, (this.g = 0)))
                      : (this.h++, (this.g = 0)),
                  (e = this.current()),
                  { value: e, done: !e }
                );
              }),
              (h.jh = function () {
                var e = this.current();
                if (e && e.Xc && !e.l && (e = this.i.get(this.h)) && e.g.length > 0)
                  for (var t = e.g[this.g]; t.l && !(this.g <= 0); ) (this.g--, (t = e.g[this.g]));
              }),
              fe("shaka.media.SegmentIterator", Er),
              (Er.prototype.resetToLastIndependent = Er.prototype.jh),
              (Er.prototype.next = Er.prototype.next),
              (Er.prototype.current = Er.prototype.current),
              (Er.prototype.currentPosition = Er.prototype.zj),
              (Er.prototype.setReverse = Er.prototype.Jd));
            function It() {
              (Je.call(this, []), (this.h = []));
            }
            (J(It, Je),
              (h = It.prototype),
              (h.clone = function () {
                var e = new It();
                return ((e.h = this.h.slice()), (e.i = this.i), e);
              }),
              (h.release = function () {
                this.h = [];
              }),
              (h.Fb = function (e) {
                for (var t = x(this.h), n = t.next(); !n.done; n = t.next()) n.value.Fb(e);
              }));
            function KM(e, t) {
              e = x(e.h);
              for (var n = e.next(); !n.done; n = e.next()) t(n.value);
            }
            h.find = function (e) {
              for (var t = this.i, n = x(this.h), r = n.next(); !r.done; r = n.next()) {
                r = r.value;
                var i = r.find(e);
                if (i != null) return i + t;
                t += r.getNumEvicted() + r.getNumReferences();
              }
              return null;
            };
            function $M(e, t) {
              e = x(e.h);
              for (var n = e.next(); !n.done; n = e.next())
                if (((n = n.value), n.find(t) != null)) return n.We();
              return -1;
            }
            ((h.get = function (e) {
              for (var t = this.i, n = x(this.h), r = n.next(); !r.done; r = n.next()) {
                r = r.value;
                var i = r.get(e - t);
                if (i) return i;
                ((i = r.getNumReferences()), (t += r.getNumEvicted() + i));
              }
              return null;
            }),
              (h.offset = function () {}),
              (h.tf = function () {}),
              (h.Ya = function (e) {
                if (this.h.length) {
                  var t = this.h[0];
                  (t.Ya(e),
                    t.getNumReferences() == 0 &&
                      (this.h.shift(), (this.i += t.getNumEvicted()), t.release(), this.Ya(e)));
                }
              }),
              (h.ke = function () {}),
              (h.pd = function () {}),
              (h.Rf = function () {}),
              fe("shaka.media.MetaSegmentIndex", It),
              (It.prototype.updateEvery = It.prototype.Rf),
              (It.prototype.fit = It.prototype.pd),
              (It.prototype.mergeAndEvict = It.prototype.ke),
              (It.prototype.evict = It.prototype.Ya),
              (It.prototype.merge = It.prototype.tf),
              (It.prototype.offset = It.prototype.offset),
              (It.prototype.get = It.prototype.get),
              (It.prototype.find = It.prototype.find),
              (It.prototype.forEachTopLevelReference = It.prototype.Fb),
              (It.prototype.release = It.prototype.release));
            function gu(e) {
              var t = this;
              ((this.g = e),
                (this.j = !1),
                (this.i = this.g.cf()),
                (this.h = new Ve(function () {
                  t.g.Di(t.i * 0.25);
                })));
            }
            ((gu.prototype.release = function () {
              (this.set(this.Tc()), this.h && (this.h.stop(), (this.h = null)), (this.g = null));
            }),
              (gu.prototype.set = function (e) {
                ((this.i = e), Cp(this));
              }),
              (gu.prototype.Tc = function () {
                return this.g.Tc();
              }));
            function Cp(e) {
              e.h.stop();
              var t = e.j ? 0 : e.i;
              if (t >= 0)
                try {
                  e.g.cf() != t && e.g.uh(t);
                  return;
                } catch (n) {}
              (e.h.Ea(0.25), e.g.cf() != 0 && e.g.uh(0));
            }
            function Mp(e) {
              var t = this;
              ((this.j = e),
                (this.h = new et()),
                (this.g = new Set()),
                (this.i = new Ve(function () {
                  Hx(t, !1);
                }).Jb()),
                e.paused || this.i.Ea(0.25),
                this.h.D(e, "playing", function () {
                  t.i.Jb().Ea(0.25);
                }),
                this.h.D(e, "pause", function () {
                  t.i.stop();
                }));
            }
            Mp.prototype.release = function () {
              (this.h && (this.h.release(), (this.h = null)), this.i.stop());
              for (var e = x(this.g), t = e.next(); !t.done; t = e.next()) t.value.release();
              this.g.clear();
            };
            function Hx(e, t) {
              var n = e.j.currentTime;
              e = x(e.g);
              for (var r = e.next(); !r.done; r = e.next()) r.value.j(n, t);
            }
            function Oc(e) {
              (ot.call(this), (this.g = new Map()), (this.h = e));
            }
            (J(Oc, ot),
              (Oc.prototype.release = function () {
                (this.g.clear(), ot.prototype.release.call(this));
              }));
            function YM(e, t) {
              var n = e.g.get(t);
              return (n || ((n = { re: [], pg: null, contentType: t }), e.g.set(t, n)), n);
            }
            function qM(e, t, n) {
              var r = YM(e, t.contentType);
              (JM(e, r),
                (e = { xd: t, position: n }),
                (r = r.re),
                (t = r.findIndex(function (i) {
                  return i.position >= n;
                })),
                t >= 0 ? r.splice(t, r[t].position == n ? 1 : 0, e) : r.push(e));
            }
            Oc.prototype.j = function (e) {
              for (var t = x(this.g.values()), n = t.next(); !n.done; n = t.next()) {
                n = n.value;
                var r = n.pg;
                e: {
                  for (var i = n.re, s = i.length - 1; s >= 0; s--) {
                    var o = i[s];
                    if (o.position <= e) {
                      i = o.xd;
                      break e;
                    }
                  }
                  i = null;
                }
                ((s =
                  i &&
                  !(
                    r === i ||
                    (r &&
                      i &&
                      r.bandwidth == i.bandwidth &&
                      r.audioSamplingRate == i.audioSamplingRate &&
                      r.codecs == i.codecs &&
                      r.contentType == i.contentType &&
                      r.frameRate == i.frameRate &&
                      r.height == i.height &&
                      r.mimeType == i.mimeType &&
                      r.channelsCount == i.channelsCount &&
                      r.pixelAspectRatio == i.pixelAspectRatio &&
                      r.width == i.width)
                  )),
                  (o = i && r && i.label && r.label && r.label !== i.label));
                var u = i && r && i.language && r.language && r.language !== i.language;
                ((r = i && r && i.roles && r.roles && !$i(r.roles, i.roles)),
                  (o || u || r) &&
                    Gx(this, e, i.contentType) &&
                    ((n.pg = i),
                    (r = new we(
                      "audiotrackchange",
                      new Map([
                        ["quality", i],
                        ["position", e],
                      ]),
                    )),
                    this.dispatchEvent(r)),
                  s &&
                    Gx(this, e, i.contentType) &&
                    ((n.pg = i),
                    JSON.stringify(i),
                    (n = new we(
                      "qualitychange",
                      new Map([
                        ["quality", i],
                        ["position", e],
                      ]),
                    )),
                    this.dispatchEvent(n)));
              }
            };
            function Gx(e, t, n) {
              return !!(
                (e = e.h()[n]) &&
                e.length > 0 &&
                ((n = e[e.length - 1].end), t >= e[0].start && t < n)
              );
            }
            function JM(e, t) {
              if ((e = e.h()[t.contentType]) && e.length > 0) {
                var n = e[0].start,
                  r = e[e.length - 1].end,
                  i = t.re;
                t.re = i.filter(function (s, o) {
                  return !(
                    (s.position <= n && o + 1 < i.length && i[o + 1].position <= n) ||
                    s.position >= r
                  );
                });
              } else t.re = [];
            }
            function Uc(e) {
              var t = {
                bandwidth: e.bandwidth || 0,
                audioSamplingRate: null,
                codecs: e.codecs,
                contentType: e.type,
                frameRate: null,
                height: null,
                mimeType: e.mimeType,
                channelsCount: null,
                pixelAspectRatio: null,
                width: null,
                label: null,
                roles: e.roles,
                language: null,
              };
              return (
                e.type == "video" &&
                  ((t.frameRate = e.frameRate || null),
                  (t.height = e.height || null),
                  (t.pixelAspectRatio = e.pixelAspectRatio || null),
                  (t.width = e.width || null)),
                e.type == "audio" &&
                  ((t.audioSamplingRate = e.audioSamplingRate),
                  (t.channelsCount = e.channelsCount),
                  (t.label = e.label || null),
                  (t.language = e.language)),
                t
              );
            }
            function mu(e) {
              (ot.call(this), (this.h = new Map()), (this.i = e), (this.g = null));
            }
            (J(mu, ot),
              (mu.prototype.release = function () {
                (this.h.clear(), this.g && (this.g.stop(), (this.g = null)), ot.prototype.release.call(this));
              }));
            function Rp(e, t) {
              var n =
                t.schemeIdUri + "_" + t.id + "_" + (t.startTime.toFixed(1) + "_" + t.endTime.toFixed(1));
              e.h.has(n) ||
                (e.h.set(n, t),
                (t = new we("regionadd", new Map([["region", t]]))),
                e.dispatchEvent(t),
                QM(e));
            }
            function QM(e) {
              e.g ||
                (e.g = new Ve(function () {
                  for (var t = e.i(), n = x(e.h), r = n.next(); !r.done; r = n.next()) {
                    var i = x(r.value);
                    ((r = i.next().value),
                      (i = i.next().value),
                      i.endTime < t.start &&
                        (e.h.delete(r),
                        (r = new we("regionremove", new Map([["region", i]]))),
                        e.dispatchEvent(r)));
                  }
                  !e.h.size && e.g && (e.g.stop(), (e.g = null));
                }).Ea(2));
            }
            function jc(e, t, n, r, i) {
              function s(o, u) {
                return !(u.fastSwitching && o.Xc && o.je);
              }
              ((this.m = e),
                (this.i = t),
                (this.l = n),
                (this.g = new Map()),
                (this.j = new Map()),
                (this.h = null),
                (this.o = r),
                (this.u = i || s));
            }
            function ZM(e, t) {
              ((e.l = t), (e = x(e.g.values())));
              for (var n = e.next(); !n.done; n = e.next()) n.value.g = t;
            }
            function yu(e, t, n) {
              if (
                ((n = n === void 0 ? !1 : n),
                !e.i.segmentIndex || (e.h || (e.h = e.i.segmentIndex.Xb(t, !0, e.o)), !e.h))
              )
                return Promise.resolve();
              for (n && e.h.next(), t = []; e.g.size < e.m && ((n = e.h.next().value), !!n); ) {
                var r = !0;
                if (
                  (n.isPreload() && n.endByte != null && (r = !1),
                  n.Kc() == 2 && (r = !1),
                  n.$b(!1) && (r = !1),
                  r && n.ea && t.push(zx(e, n.ea)),
                  r && !e.g.has(n) && ((r = new _p(e.l)), t.push(Kx(r, n, e.i)), e.g.set(n, r)),
                  !e.u(n, e.i))
                )
                  break;
              }
              return (kp(e), Promise.all(t));
            }
            function zx(e, t) {
              if (
                !e.i.segmentIndex ||
                t.$b() ||
                Array.from(e.j.keys()).some(function (i) {
                  return cu(i, t);
                })
              )
                return Promise.resolve();
              var n = new _p(e.l),
                r = Kx(n, t, e.i);
              return (e.j.set(t, n), r);
            }
            function Xx(e, t) {
              t = x(t.keys());
              for (var n = t.next(); !n.done; n = t.next()) (n = n.value) && vu(e, n);
            }
            function Jr(e) {
              (Xx(e, e.g), Xx(e, e.j), (e.h = null));
            }
            ((jc.prototype.Ya = function (e, t) {
              t = t === void 0 ? !1 : t;
              for (var n = x(this.g.keys()), r = n.next(); !r.done; r = n.next())
                ((r = r.value), e > r.endTime && vu(this, r));
              t && kp(this);
            }),
              (jc.prototype.Jd = function (e) {
                ((this.o = e), this.h && this.h.Jd(e));
              }));
            function kp(e) {
              if (e.g.size)
                for (
                  var t = Array.from(e.g.keys()), n = x(e.j.keys()), r = n.next(), i = {};
                  !r.done;
                  i = { Qg: void 0 }, r = n.next()
                )
                  ((i.Qg = r.value),
                    t.some(
                      (function (s) {
                        return function (o) {
                          return cu(o.ea, s.Qg);
                        };
                      })(i),
                    ) || vu(e, i.Qg));
            }
            function Wx(e, t) {
              e.m = t;
              for (var n = Array.from(e.g.keys()); n.length > t; ) {
                var r = n.pop();
                r && vu(e, r);
              }
              kp(e);
            }
            function eR(e, t) {
              t && t !== e.i && (Jr(e), (e.i = t));
            }
            function vu(e, t) {
              var n = e.g;
              (t instanceof Vn && (n = e.j), (e = n.get(t)), n.delete(t), e && e.abort());
            }
            function _p(e) {
              ((this.g = e), (this.oe = this.Bh = null));
            }
            function Kx(e, t, n) {
              var r = new Uint8Array(0);
              return (
                (e.oe = e.g(t, n, function (i) {
                  return j(function (s) {
                    if (s.g == 1)
                      return (r.byteLength > 0 ? (r = Nt(r, i)) : (r = i), e.Bh ? I(s, e.Bh(r), 3) : s.A(0));
                    ((r = new Uint8Array(0)), re(s));
                  });
                })),
                e.oe.promise.catch(function (i) {
                  return i instanceof H && i.code == 7001 ? Promise.resolve() : Promise.reject(i);
                })
              );
            }
            ((_p.prototype.abort = function () {
              this.oe && this.oe.abort();
            }),
              fe("shaka.config.CrossBoundaryStrategy", {
                KEEP: "keep",
                RESET: "reset",
                RESET_TO_ENCRYPTED: "reset_to_encrypted",
                RESET_ON_ENCRYPTION_CHANGE: "RESET_ON_ENCRYPTION_CHANGE",
              }));
            function Pp(e) {
              var t = Qn(e),
                n = t.split("/")[0];
              return (
                (e = Fn(e)),
                {
                  type: n,
                  mimeType: t,
                  codecs: e,
                  language: null,
                  height: null,
                  width: null,
                  channelCount: null,
                  sampleRate: null,
                  closedCaptions: new Map(),
                  ze: null,
                  colorGamut: null,
                  frameRate: null,
                  timescale: null,
                }
              );
            }
            function tR(e, t, n) {
              function r(N) {
                R = N.name;
                var z = N.reader;
                z.skip(24);
                var V = z.Ca(),
                  X = z.Ca();
                (z.skip(50), (v = String(V)), (y = String(X)), N.reader.Ia() && Ue(N));
              }
              function i(N) {
                var z = Q0(N.reader);
                ((w = z.channelCount), (A = z.sampleRate), s(N.name));
              }
              function s(N) {
                switch (((N = N.toLowerCase()), N)) {
                  case "avc1":
                  case "avc3":
                    (u.push(N + ".42E01E"), (p = !0));
                    break;
                  case "hev1":
                  case "hvc1":
                    (u.push(N + ".1.6.L93.90"), (p = !0));
                    break;
                  case "dvh1":
                  case "dvhe":
                    (u.push(N + ".05.04"), (p = !0));
                    break;
                  case "vp09":
                    (u.push(N + ".00.10.08"), (p = !0));
                    break;
                  case "av01":
                    (u.push(N + ".0.01M.08"), (p = !0));
                    break;
                  case "mp4a":
                    (o.push("mp4a.40.2"), (l = !0));
                    break;
                  case "ac-3":
                  case "ec-3":
                  case "ac-4":
                  case "opus":
                  case "flac":
                    (o.push(N), (l = !0));
                    break;
                  case "apac":
                    (o.push("apac.31.00"), (l = !0));
                }
              }
              var o = [],
                u = [],
                l = !1,
                p = !1,
                m = null,
                y = null,
                v = null,
                w = null,
                A = null,
                E = null,
                C = null,
                k = null,
                R;
              if (
                (new ut()
                  .box("moov", Ue)
                  .box("trak", Ue)
                  .box("mdia", Ue)
                  .S("mdhd", function (N) {
                    ((N = Ic(N.reader, N.version)), (m = N.language), (k = N.timescale));
                  })
                  .box("minf", Ue)
                  .box("stbl", Ue)
                  .S("stsd", Ei)
                  .box("mp4a", function (N) {
                    var z = Q0(N.reader);
                    ((w = z.channelCount), (A = z.sampleRate), N.reader.Ia() ? Ue(N) : s(N.name));
                  })
                  .box("esds", function (N) {
                    N = N.reader;
                    for (var z = "mp4a", V, X; N.Ia(); ) {
                      V = N.Y();
                      for (var W = N.Y(); W & 128; ) W = N.Y();
                      if (V == 3)
                        (N.Ca(), (W = N.Y()), W & 128 && N.Ca(), W & 64 && N.skip(N.Y()), W & 32 && N.Ca());
                      else if (V == 4) ((X = N.Y()), N.skip(12));
                      else if (V == 5) break;
                    }
                    (X &&
                      ((z += "." + au(X)),
                      V == 5 &&
                        N.Ia() &&
                        ((V = N.Y()),
                        (X = (V & 248) >> 3),
                        X === 31 && N.Ia() && (X = 32 + ((V & 7) << 3) + ((N.Y() & 224) >> 5)),
                        (z += "." + X))),
                      o.push(z),
                      (l = !0));
                  })
                  .box("ac-3", i)
                  .box("ec-3", i)
                  .box("ac-4", i)
                  .box("Opus", i)
                  .box("fLaC", i)
                  .box("apac", i)
                  .box("avc1", r)
                  .box("avc3", r)
                  .box("hev1", r)
                  .box("hvc1", r)
                  .box("dva1", r)
                  .box("dvav", r)
                  .box("dvh1", r)
                  .box("dvhe", r)
                  .box("vp09", r)
                  .box("av01", r)
                  .box("avcC", function (N) {
                    var z = R || "";
                    switch (R) {
                      case "dvav":
                        z = "avc3";
                        break;
                      case "dva1":
                        z = "avc1";
                    }
                    ((N = N.reader),
                      N.skip(1),
                      (N = z + "." + au(N.Y()) + au(N.Y()) + au(N.Y())),
                      u.push(N),
                      (p = !0));
                  })
                  .box("hvcC", function (N) {
                    var z = R || "";
                    switch (R) {
                      case "dvh1":
                        z = "hvc1";
                        break;
                      case "dvhe":
                        z = "hev1";
                    }
                    var V = N.reader;
                    (V.skip(1), (N = V.Y()));
                    var X = ["", "A", "B", "C"][N >> 6],
                      W = N & 31,
                      ie = V.U(),
                      ne = (N & 32) >> 5 ? "H" : "L";
                    ((N = [V.Y(), V.Y(), V.Y(), V.Y(), V.Y(), V.Y()]), (V = V.Y()));
                    for (var q = 0, Z = 0; Z < 32 && ((q |= ie & 1), Z != 31); Z++) ((q <<= 1), (ie >>= 1));
                    for (
                      z = z + ("." + X + W) + ("." + au(q, !0)), z += "." + ne + V, X = "", W = N.length;
                      W--;
                    )
                      ((ne = N[W]) || X) && (X = "." + ne.toString(16).toUpperCase() + X);
                    ((z += X), u.push(z), (p = !0));
                  })
                  .box("dvcC", function (N) {
                    var z = R || "";
                    switch (R) {
                      case "hvc1":
                        z = "dvh1";
                        break;
                      case "hev1":
                        z = "dvhe";
                        break;
                      case "avc1":
                        z = "dva1";
                        break;
                      case "avc3":
                        z = "dvav";
                        break;
                      case "av01":
                        z = "dav1";
                    }
                    var V = N.reader;
                    (V.skip(2),
                      (N = V.Y()),
                      (V = V.Y()),
                      u.push(z + "." + er((N >> 1) & 127) + "." + er(((N << 5) & 32) | ((V >> 3) & 31))),
                      (p = !0));
                  })
                  .box("dvvC", function (N) {
                    var z = R || "";
                    switch (R) {
                      case "hvc1":
                        z = "dvh1";
                        break;
                      case "hev1":
                        z = "dvhe";
                        break;
                      case "avc1":
                        z = "dva1";
                        break;
                      case "avc3":
                        z = "dvav";
                        break;
                      case "av01":
                        z = "dav1";
                    }
                    var V = N.reader;
                    (V.skip(2),
                      (N = V.Y()),
                      (V = V.Y()),
                      u.push(z + "." + er((N >> 1) & 127) + "." + er(((N << 5) & 32) | ((V >> 3) & 31))),
                      (p = !0));
                  })
                  .S("vpcC", function (N) {
                    var z = R || "",
                      V = N.reader;
                    N = V.Y();
                    var X = V.Y();
                    ((V = (V.Y() >> 4) & 15), u.push(z + "." + er(N) + "." + er(X) + "." + er(V)), (p = !0));
                  })
                  .box("av1C", function (N) {
                    var z = R || "";
                    switch (R) {
                      case "dav1":
                        z = "av01";
                    }
                    var V = N.reader;
                    (V.skip(1), (N = V.Y()), (V = V.Y()));
                    var X = N >>> 5,
                      W = (V & 64) >> 6;
                    (u.push(
                      z +
                        "." +
                        X +
                        "." +
                        er(N & 31) +
                        (V >>> 7 ? "H" : "M") +
                        "." +
                        er(X === 2 && W ? ((V & 32) >> 5 ? 12 : 10) : W ? 10 : 8) +
                        "." +
                        ((V & 16) >> 4) +
                        "." +
                        ((V & 8) >> 3) +
                        ((V & 4) >> 2) +
                        (V & 3) +
                        "." +
                        er(1) +
                        "." +
                        er(1) +
                        "." +
                        er(1) +
                        ".0",
                    ),
                      (p = !0));
                  })
                  .box("enca", xc)
                  .box("encv", Zn)
                  .box("sinf", Ue)
                  .box("frma", function (N) {
                    ((N = op(N.reader).codec), s(N));
                  })
                  .box("colr", function (N) {
                    u = u.map(function (X) {
                      if (X.startsWith("av01.")) {
                        var W = N.reader,
                          ie = W.Pa(),
                          ne = W.Tb(4, !1),
                          q = String.fromCharCode(ne[0]);
                        if (
                          ((q += String.fromCharCode(ne[1])),
                          (q += String.fromCharCode(ne[2])),
                          (q += String.fromCharCode(ne[3])),
                          q === "nclx")
                        ) {
                          ((ne = W.Ca()), (q = W.Ca()));
                          var Z = W.Ca(),
                            ae = W.Y() >> 7,
                            ce = X.split(".");
                          ce.length == 10 &&
                            ((ce[6] = er(ne)),
                            (ce[7] = er(q)),
                            (ce[8] = er(Z)),
                            (ce[9] = String(ae)),
                            (X = ce.join(".")));
                        }
                        W.seek(ie);
                      }
                      return X;
                    });
                    var z = rM(N.reader),
                      V = z.colorGamut;
                    ((E = z.ze), (C = V));
                  })
                  .parse(e || t, !0, !0),
                !o.length && !u.length)
              )
                return null;
              var L = l && !p,
                U = new Map();
              if (p && !n) {
                ((n = new $r("video/mp4")), e && n.init(e));
                try {
                  n.Af(t);
                  for (var G = x(n.Zf()), b = G.next(); !b.done; b = G.next()) {
                    var B = b.value;
                    U.set(B, B);
                  }
                } catch (N) {}
                n.Pd();
              }
              return {
                type: L ? "audio" : "video",
                mimeType: L ? "audio/mp4" : "video/mp4",
                codecs: Dp(o.concat(u)).join(", "),
                language: m,
                height: y,
                width: v,
                channelCount: w,
                sampleRate: A,
                closedCaptions: U,
                ze: E,
                colorGamut: C,
                frameRate: null,
                timescale: k,
              };
            }
            function Dp(e) {
              var t = new Set(),
                n = [];
              e = x(e);
              for (var r = e.next(); !r.done; r = e.next()) {
                r = r.value;
                var i = es(r);
                t.has(i) || (n.push(r), t.add(i));
              }
              return (
                (t = kh("audio", n)),
                (r = kh("video", n)),
                (e = kh(Fe, n)),
                (r = nR(r)),
                (t = t.concat(r).concat(e)),
                n.length && !t.length ? n : t
              );
            }
            function nR(e) {
              if (e.length <= 1) return e;
              var t = e.find(function (n) {
                return (
                  n.startsWith("dvav.") ||
                  n.startsWith("dva1.") ||
                  n.startsWith("dvh1.") ||
                  n.startsWith("dvhe.") ||
                  n.startsWith("dav1.") ||
                  n.startsWith("dvc1.") ||
                  n.startsWith("dvi1.")
                );
              });
              return t
                ? En('video/mp4; codecs="' + t + '"')
                  ? [t]
                  : e.filter(function (n) {
                      return n != t;
                    })
                : e;
            }
            function rR(e) {
              var t = null;
              return (
                new ut()
                  .box("moov", Ue)
                  .box("trak", Ue)
                  .box("mdia", Ue)
                  .box("minf", Ue)
                  .box("stbl", Ue)
                  .S("stsd", Ei)
                  .box("encv", Zn)
                  .box("enca", xc)
                  .box("sinf", Ue)
                  .box("schi", Ue)
                  .S("tenc", function (n) {
                    ((n = n.reader), n.Y(), n.Y(), n.Y(), n.Y(), (n = n.Tb(16, !1)), (t = pi(n)));
                  })
                  .parse(e, !0),
                t
              );
            }
            function Lp(e, t, n) {
              var r, i, s, o, u;
              return j(function (l) {
                if (l.g == 1) return ((r = t), r.cryptoKey ? l.A(2) : I(l, r.fetchKey(), 3));
                if (((i = r.iv), !i))
                  for (
                    i = De(new ArrayBuffer(16)), s = r.firstMediaSequenceNumber + n, o = i.byteLength - 1;
                    o >= 0;
                    o--
                  )
                    ((i[o] = s & 255), (s >>= 8));
                return (
                  t.blockCipherMode == "CBC"
                    ? (u = { name: "AES-CBC", iv: i })
                    : (u = { name: "AES-CTR", counter: i, length: 64 }),
                  l.return(g.crypto.subtle.decrypt(u, r.cryptoKey, e))
                );
              });
            }
            function jo(e, t, n) {
              var r, i, s, o, u, l, p;
              return j(function (m) {
                switch (m.g) {
                  case 1:
                    return (
                      (r = Bo(e)),
                      (i = iR.get(r))
                        ? m.return(i)
                        : ((s = 0),
                          (o = Ut([e], n)),
                          ee(m, 2),
                          (o.method = "HEAD"),
                          I(m, t.request(s, o).promise, 4))
                    );
                  case 4:
                    ((u = m.h), (i = u.headers["content-type"]), de(m, 3));
                    break;
                  case 2:
                    if (((l = se(m)), !l || (l.code != 1002 && l.code != 1001))) {
                      m.A(3);
                      break;
                    }
                    return ((o.method = "GET"), I(m, t.request(s, o).promise, 6));
                  case 6:
                    ((p = m.h), (i = p.headers["content-type"]));
                  case 3:
                    return m.return(i ? i.toLowerCase().split(";").shift() : "");
                }
              });
            }
            function Bo(e) {
              return (
                (e = new Pt(e).Sb.split("/").pop().split(".")),
                e.length == 1 ? "" : e.pop().toLowerCase()
              );
            }
            function xu(e, t, n, r, i) {
              return (
                (e = Ut(e, r, i)),
                (t != 0 || n != null) && (e.headers.Range = n ? "bytes=" + t + "-" + n : "bytes=" + t + "-"),
                e
              );
            }
            var iR = new Map()
              .set("mp4", "video/mp4")
              .set("m4v", "video/mp4")
              .set("m4a", "audio/mp4")
              .set("webm", "video/webm")
              .set("weba", "audio/webm")
              .set("mkv", "video/webm")
              .set("ts", "video/mp2t")
              .set("ogv", "video/ogg")
              .set("ogg", "audio/ogg")
              .set("mpg", "video/mpeg")
              .set("mpeg", "video/mpeg")
              .set("mov", "video/quicktime")
              .set("m3u8", "application/x-mpegurl")
              .set("mpd", "application/dash+xml")
              .set("ism", "application/vnd.ms-sstr+xml")
              .set("mp3", "audio/mpeg")
              .set("aac", "audio/aac")
              .set("flac", "audio/flac")
              .set("wav", "audio/wav")
              .set("sbv", "text/x-subviewer")
              .set("srt", "text/srt")
              .set("vtt", "text/vtt")
              .set("webvtt", "text/vtt")
              .set("ttml", "application/ttml+xml")
              .set("lrc", "application/x-subtitle-lrc")
              .set("ssa", "text/x-ssa")
              .set("ass", "text/x-ssa")
              .set("jpeg", "image/jpeg")
              .set("jpg", "image/jpeg")
              .set("png", "image/png")
              .set("svg", "image/svg+xml")
              .set("webp", "image/webp")
              .set("avif", "image/avif")
              .set("html", "text/html")
              .set("htm", "text/html");
            function $x(e, t) {
              var n = this;
              ((this.g = t),
                (this.j = e),
                (this.i = null),
                (this.M = new Map()),
                (this.C = 1),
                (this.B = this.o = null),
                (this.V = 0),
                (this.h = new Map()),
                (this.N = !1),
                (this.X = null),
                (this.F = !1),
                (this.l = new Io(function () {
                  return sR(n);
                })),
                (this.R = Date.now() / 1e3),
                (this.m = new Map()),
                (this.T = { projection: null, hfov: null }),
                (this.ba = 0),
                (this.$ = 1 / 0),
                (this.H = null),
                (this.O = []),
                (this.u = new Ve(function () {
                  if (n.j && n.g)
                    if (n.j.presentationTimeline.W()) {
                      var r = n.j.presentationTimeline.Zb(),
                        i = n.j.presentationTimeline.Gb();
                      i - r > 1 ? OM(n.g.Z, r, i) : xp(n.g.Z);
                    } else (xp(n.g.Z), n.u && n.u.stop());
                  else n.u && n.u.stop();
                })),
                (this.I = null),
                (this.J = !1),
                (this.K = new Ve(function () {
                  var r = n.g.video;
                  !r.ended && n.I && ((n.J = !0), (r.currentTime = n.I), (n.I = null));
                })),
                (this.G = new et()));
            }
            ((h = $x.prototype),
              (h.destroy = function () {
                return this.l.destroy();
              }));
            function sR(e) {
              var t, n, r, i, s, o, u;
              return j(function (l) {
                if (l.g == 1) {
                  for (
                    e.u && e.u.stop(),
                      e.u = null,
                      e.K && e.K.stop(),
                      e.K = null,
                      e.G && (e.G.release(), (e.G = null)),
                      t = [],
                      n = x(e.h.values()),
                      r = n.next();
                    !r.done;
                    r = n.next()
                  )
                    ((i = r.value), Ri(i), t.push(Gc(i)), i.ia && (Jr(i.ia), (i.ia = null)));
                  for (s = x(e.m.values()), o = s.next(); !o.done; o = s.next()) ((u = o.value), Jr(u));
                  return I(l, Promise.all(t), 2);
                }
                (e.h.clear(), e.m.clear(), (e.g = null), (e.j = null), (e.i = null), (e.I = null), re(l));
              });
            }
            h.configure = function (e) {
              if (
                ((this.i = e),
                (this.X = new T0(
                  {
                    maxAttempts: Math.max(e.retryParameters.maxAttempts, 2),
                    baseDelay: e.retryParameters.baseDelay,
                    backoffFactor: e.retryParameters.backoffFactor,
                    fuzzFactor: e.retryParameters.fuzzFactor,
                  },
                  !0,
                )),
                e.disableAudioPrefetch)
              ) {
                var t = this.h.get("audio");
                (t && t.ia && (Jr(t.ia), (t.ia = null)), (t = x(this.m.keys())));
                for (var n = t.next(); !n.done; n = t.next())
                  ((n = n.value), Jr(this.m.get(n)), this.m.delete(n));
              }
              for (
                e.disableTextPrefetch && (t = this.h.get(Fe)) && t.ia && (Jr(t.ia), (t.ia = null)),
                  e.disableVideoPrefetch && (t = this.h.get("video")) && t.ia && (Jr(t.ia), (t.ia = null)),
                  t = x(this.h.keys()),
                  n = t.next();
                !n.done;
                n = t.next()
              )
                ((n = this.h.get(n.value)),
                  n.ia
                    ? (Wx(n.ia, e.segmentPrefetchLimit),
                      e.segmentPrefetchLimit > 0 || (Jr(n.ia), (n.ia = null)))
                    : e.segmentPrefetchLimit > 0 && (n.ia = Np(this, n.stream)));
              e.disableAudioPrefetch || fR(this);
            };
            function oR(e, t, n) {
              e.j.presentationTimeline.W() || ((e.ba = t), (e.$ = n));
            }
            h.start = function (e) {
              var t = this;
              return j(function (n) {
                if (n.g == 1) return I(n, dR(t, e || new Map()), 2);
                (dt(t.l), (t.N = !0), re(n));
              });
            };
            function aR(e, t) {
              var n, r, i, s, o, u;
              j(function (l) {
                switch (l.g) {
                  case 1:
                    return ((n = Ot), e.V++, (r = e.V), ee(l, 2), I(l, yx(e.g.Z, n.Na), 4));
                  case 4:
                    de(l, 3);
                    break;
                  case 2:
                    ((i = se(l)), e.g && e.g.onError(i));
                  case 3:
                    ((s = Rt(t.mimeType, t.codecs)),
                      Dc(e.g.Z, s, e.j.sequenceMode, t.external),
                      (o = e.g.Z.ba),
                      (o.isTextVisible() || e.i.alwaysStreamText) &&
                        e.V == r &&
                        ((u = Fc(e, t)), e.h.set(n.Na, u), In(e, u, 0)),
                      re(l));
                }
              });
            }
            function uR(e) {
              var t = e.h.get(Fe);
              (t &&
                (Ri(t),
                Gc(t).catch(function () {}),
                (e.H = e.h.get(Fe)),
                e.h.delete(Fe),
                t.stream && t.stream.closeSegmentIndex && t.stream.closeSegmentIndex()),
                (e.B = null));
            }
            function Yx(e, t) {
              for (var n = e.g.Ob() < 0, r = x(e.h.values()), i = r.next(); !i.done; i = r.next())
                ((i = i.value), i.ua && i.ua.Jd(n), i.ia && i.ia.Jd(n));
              for (r = x(e.m.values()), i = r.next(); !i.done; i = r.next()) i.value.Jd(n);
              (n = e.h.get("video")) &&
                (r = n.stream) &&
                (t
                  ? (t = r.trickModeVideo) && !n.Nc && (Fo(e, t, !1, 0, !1), (n.Nc = r))
                  : (t = n.Nc) && ((n.Nc = null), Fo(e, t, !0, 0, !1)));
            }
            function qx(e, t, n, r, i, s) {
              ((n = n === void 0 ? !1 : n),
                (r = r === void 0 ? 0 : r),
                (i = i === void 0 ? !1 : i),
                (s = s === void 0 ? !1 : s),
                (e.o = t),
                e.N && (t.video && Fo(e, t.video, n, r, i, s), t.audio && Fo(e, t.audio, n, r, i, s)));
            }
            function Bc(e, t) {
              j(function (n) {
                if (n.g == 1)
                  return (
                    (e.H = null),
                    (e.B = t),
                    e.N ? (t.segmentIndex ? n.A(2) : I(n, t.createSegmentIndex(), 2)) : n.return()
                  );
                (Fo(e, t, !0, 0, !1), re(n));
              });
            }
            function lR(e) {
              var t = e.h.get(Fe);
              t && Fo(e, t.stream, !0, 0, !0);
            }
            function cR(e, t) {
              for (var n = x(e.M.entries()), r = n.next(); !r.done; r = n.next()) {
                var i = x(r.value);
                ((r = i.next().value), (i = i.next().value), r.includes(t.type) && (i(), e.M.delete(r)));
              }
            }
            function Fo(e, t, n, r, i, s) {
              var o = e.h.get(t.type);
              o || t.type != Fe
                ? o &&
                  (o.Nc && (t.trickModeVideo ? ((o.Nc = t), (t = t.trickModeVideo)) : (o.Nc = null)),
                  o.stream != t || i) &&
                  (e.m.has(t) ? (o.ia = e.m.get(t)) : o.ia && eR(o.ia, t),
                  t.type == Fe &&
                    o.stream != t &&
                    ((i = Rt(t.mimeType, t.codecs)), Dc(e.g.Z, i, e.j.sequenceMode, t.external)),
                  !e.m.has(o.stream) &&
                    o.stream.closeSegmentIndex &&
                    (o.Ka
                      ? ((i = "(" + o.type + ":" + o.stream.id + ")"),
                        e.M.has(i) || e.M.set(i, o.stream.closeSegmentIndex))
                      : o.stream.closeSegmentIndex()),
                  (i = o.stream.isAudioMuxedInVideo != t.isAudioMuxedInVideo),
                  (o.stream = t),
                  (o.ua = null),
                  (o.gg = !!s),
                  t.dependencyStream ? (o.Fc = Fc(e, t.dependencyStream)) : (o.Fc = null),
                  tT(e),
                  i &&
                    ((o.pb = null),
                    (o.tc = null),
                    (o.sc = null),
                    t.isAudioMuxedInVideo &&
                      ((t = null),
                      o.type === "video"
                        ? (t = e.h.get("audio"))
                        : o.type === "audio" && (t = e.h.get("video")),
                      t &&
                        (Gc(t).catch(function () {}),
                        (t.pb = null),
                        (t.tc = null),
                        (t.sc = null),
                        bp(e, t),
                        Jx(e, t).catch(function (u) {
                          e.g && e.g.onError(u);
                        })))),
                  n
                    ? o.Wb
                      ? (o.Md = !0)
                      : o.Ka
                        ? ((o.Ub = !0), (o.ld = r), (o.Md = !0))
                        : (Ri(o),
                          jp(e, o, !0, r).catch(function (u) {
                            e.g && e.g.onError(u);
                          }))
                    : o.Ka || o.qb || In(e, o, 0),
                  Jx(e, o).catch(function (u) {
                    e.g && e.g.onError(u);
                  }))
                : aR(e, t);
            }
            function Jx(e, t) {
              var n, r, i;
              return j(function (s) {
                if (s.g == 1)
                  return t.Va
                    ? ((n = t.stream), (r = t.Va), n.segmentIndex ? s.A(2) : I(s, n.createSegmentIndex(), 2))
                    : s.return();
                if (s.g != 4)
                  return (
                    (i = n.dependencyStream),
                    !i || i.segmentIndex ? s.A(4) : I(s, i.createSegmentIndex(), 4)
                  );
                if (t.Va != r || t.stream != n) return s.return();
                var o = e.g.nc(),
                  u = Xs(e.g.Z, t.type),
                  l = t.stream.segmentIndex.find(t.Ja ? t.Ja.endTime : o),
                  p = l == null ? null : t.stream.segmentIndex.get(l);
                ((l = p ? ap(p) : null),
                  p &&
                    !l &&
                    (l = ((p.endTime - p.getStartTime()) * (t.stream.bandwidth || e.o.bandwidth)) / 8),
                  l
                    ? ((p = p.ea) && (l += (p.endByte ? p.endByte + 1 - p.startByte : null) || 0),
                      (p = e.g.getBandwidthEstimate()),
                      (o = (l * 8) / p < (u || 0) - o - e.i.rebufferingGoal || t.Va.h.g > l))
                    : (o = !0),
                  o && t.Va.abort(),
                  re(s));
              });
            }
            h.bd = function () {
              if (this.g) {
                for (var e = this.g.nc(), t = x(this.h.keys()), n = t.next(); !n.done; n = t.next()) {
                  var r = n.value;
                  n = this.h.get(r);
                  var i;
                  if (
                    ((i = !this.J) &&
                      ((i = this.g.Z),
                      r == Fe
                        ? ((i = i.h), (i = i.g == null || i.h == null ? !1 : e >= i.g && e < i.h))
                        : ((i = bo(i, r)), (i = up(i, e))),
                      (i = !i)),
                    i)
                  ) {
                    if (((this.R = 0), n.ia && (n.ia.h = null), n.type === "audio")) {
                      i = x(this.m.values());
                      for (var s = i.next(); !s.done; s = i.next()) s.value.h = null;
                    }
                    ((n.ua = null),
                      (Xs(this.g.Z, r) != null || n.Ka) && bp(this, n),
                      n.Va && (n.Va.abort(), (n.Va = null)),
                      r === Fe && ((r = this.g.Z), r.K && r.K.Pd()),
                      (n.bd = !0));
                  }
                  !this.J || n.Wb || n.Ka || n.qb || In(this, n, 0);
                }
                Su(this) && Vp(this);
              }
            };
            function bp(e, t) {
              t.Wb ||
                t.Ub ||
                (t.Ka
                  ? ((t.Ub = !0), (t.ld = 0))
                  : vp(e.g.Z, t.type) == null
                    ? t.qb == null && In(e, t, 0)
                    : (Ri(t),
                      jp(e, t, !1, 0).catch(function (n) {
                        e.g && e.g.onError(n);
                      })));
            }
            function dR(e, t) {
              var n, r, i, s, o, u, l, p;
              return j(function (m) {
                if (m.g == 1) {
                  if (!e.o) throw new H(2, 5, 5006);
                  return (
                    (n = Xc(e, !0)),
                    (r = e.g.Z),
                    I(m, r.init(n, e.j.sequenceMode, e.j.type, e.j.ignoreManifestTimestampsInSegmentsMode), 2)
                  );
                }
                for (dt(e.l), e.updateDuration(), i = x(n.keys()), s = i.next(); !s.done; s = i.next())
                  ((o = s.value),
                    (u = n.get(o)),
                    e.h.has(o) ||
                      ((l = Fc(e, u)),
                      t.has(u.id) &&
                        ((p = t.get(u.id)),
                        ZM(p, function (y, v, w) {
                          return Hc(y, v, w || null, e.i.retryParameters, e.g.vc);
                        }),
                        (l.ia = p)),
                      e.h.set(o, l),
                      In(e, l, 0)));
                (tT(e), re(m));
              });
            }
            function Fc(e, t) {
              var n = {
                stream: t,
                type: t.type,
                ua: null,
                ia: Np(e, t),
                Ja: null,
                pb: null,
                pf: null,
                tc: null,
                sc: null,
                mf: null,
                nf: null,
                Nc: null,
                endOfStream: !1,
                Ka: !1,
                qb: null,
                Ub: !1,
                ld: 0,
                Md: !1,
                Wb: !1,
                bd: !0,
                gg: !1,
                fh: !1,
                ce: !1,
                Va: null,
                Fc: null,
              };
              return (t.dependencyStream && (n.Fc = Fc(e, t.dependencyStream)), n);
            }
            function Np(e, t) {
              if (
                (t.type === "video" && e.i.disableVideoPrefetch) ||
                (t.type === "audio" && e.i.disableAudioPrefetch) ||
                (t.type === Fe &&
                  (t.mimeType == "application/cea-608" || t.mimeType == "application/cea-708")) ||
                (t.type === Fe && e.i.disableTextPrefetch)
              )
                return null;
              if (e.m.has(t)) return e.m.get(t);
              var n = e.h.get(t.type);
              return (n = n && n.ia) && t === n.i
                ? n
                : e.i.segmentPrefetchLimit > 0
                  ? new jc(
                      e.i.segmentPrefetchLimit,
                      t,
                      function (r, i, s) {
                        return Hc(r, i, s || null, e.i.retryParameters, e.g.vc);
                      },
                      e.g.Ob() < 0,
                      e.g.hl,
                    )
                  : null;
            }
            function fR(e) {
              for (
                var t = e.i.segmentPrefetchLimit,
                  n = e.i.prefetchAudioLanguages,
                  r = x(e.j.variants),
                  i = r.next(),
                  s = {};
                !i.done;
                s = { Mb: void 0 }, i = r.next()
              )
                if (((s.Mb = i.value), s.Mb.audio))
                  if (e.m.has(s.Mb.audio)) {
                    if (
                      ((i = e.m.get(s.Mb.audio)),
                      Wx(i, t),
                      !(
                        t > 0 &&
                        n.some(
                          (function (u) {
                            return function (l) {
                              return So(u.Mb.audio.language, l);
                            };
                          })(s),
                        )
                      ))
                    ) {
                      var o = e.h.get(s.Mb.audio.type);
                      (i !== (o && o.ia) && Jr(i), e.m.delete(s.Mb.audio));
                    }
                  } else
                    t <= 0 ||
                      !n.some(
                        (function (u) {
                          return function (l) {
                            return So(u.Mb.audio.language, l);
                          };
                        })(s),
                      ) ||
                      !(i = Np(e, s.Mb.audio)) ||
                      (s.Mb.audio.segmentIndex || s.Mb.audio.createSegmentIndex(), e.m.set(s.Mb.audio, i));
            }
            h.updateDuration = function () {
              var e = J0(),
                t = this.j.presentationTimeline.getDuration();
              t < 1 / 0
                ? (e && (this.u && this.u.stop(), xp(this.g.Z)), this.g.Z.Ab(t))
                : e
                  ? (this.u && this.u.Ea(0.5), this.g.Z.Ab(1 / 0))
                  : this.g.Z.Ab(4294967296);
            };
            function hR(e, t) {
              var n, r, i, s, o, u, l, p, m;
              return j(function (y) {
                switch (y.g) {
                  case 1:
                    if ((dt(e.l), (n = Ot), t.Ka || t.qb == null || t.Wb)) return y.return();
                    if (((t.qb = null), !t.Ub)) {
                      y.A(2);
                      break;
                    }
                    return I(y, jp(e, t, t.Md, t.ld), 3);
                  case 3:
                    return y.return();
                  case 2:
                    if ((cR(e, t), t.stream.segmentIndex)) {
                      y.A(4);
                      break;
                    }
                    return ((r = t.stream), ee(y, 5), I(y, t.stream.createSegmentIndex(), 7));
                  case 7:
                    de(y, 6);
                    break;
                  case 5:
                    return ((i = se(y)), I(y, Bp(e, t, i), 8));
                  case 8:
                    return y.return();
                  case 6:
                    if (r != t.stream)
                      return (
                        r.closeSegmentIndex && r.closeSegmentIndex(),
                        t.Ka || t.qb || In(e, t, 0),
                        y.return()
                      );
                  case 4:
                    if (!t.Fc) {
                      y.A(9);
                      break;
                    }
                    if (t.Fc.stream.segmentIndex) {
                      y.A(9);
                      break;
                    }
                    return (ee(y, 11), I(y, t.Fc.stream.createSegmentIndex(), 13));
                  case 13:
                    de(y, 9);
                    break;
                  case 11:
                    se(y);
                  case 9:
                    (ee(y, 14), (s = pR(e, t)), s != null && (In(e, t, s), (t.ce = !1)), de(y, 15));
                    break;
                  case 14:
                    return ((o = se(y)), I(y, Bp(e, t, o), 16));
                  case 16:
                    return y.return();
                  case 15:
                    if (t.type === n.Na) return y.return();
                    if (
                      ((u = []),
                      t.stream && !t.stream.isAudioMuxedInVideo && u.push(t),
                      (l = t.type === n.aa ? n.wa : n.aa),
                      (p = e.h.get(l)) && p.stream && !p.stream.isAudioMuxedInVideo && u.push(p),
                      !e.N ||
                        !u.every(function (v) {
                          return v.endOfStream;
                        }))
                    ) {
                      y.A(0);
                      break;
                    }
                    return I(y, e.g.Z.endOfStream(), 18);
                  case 18:
                    (dt(e.l),
                      (m = e.g.Z.getDuration()),
                      m != 0 && m < e.j.presentationTimeline.getDuration() && e.j.presentationTimeline.Ab(m),
                      re(y));
                }
              });
            }
            function pR(e, t) {
              if (Up(t)) return (LM(e.g.Z, t.stream.originalId || ""), null);
              if ((t.type == Fe && bM(e.g.Z), t.stream.isAudioMuxedInVideo && t.type == "audio")) return null;
              if (t.type != Fe && ss(e.g.Z)) return (zc(e, !0), null);
              var n = e.i.updateIntervalSeconds / Math.max(1, Math.abs(e.g.Ob()));
              if (!mx(e.g.Z) && t.type != Fe) return n / 2;
              var r = e.g.nc();
              if (t.type === "audio")
                for (var i = x(e.m.keys()), s = i.next(); !s.done; s = i.next())
                  ((s = e.m.get(s.value)), s.Ya(r, !0), yu(s, r));
              i = t.Ja ? t.Ja.endTime : r;
              var o = PM(e.g.Z, t.type, r);
              s = Math.max(1, Math.max(e.i.rebufferingGoal, e.i.bufferingGoal) * e.C);
              var u = e.j.presentationTimeline.getDuration() - i,
                l = Xs(e.g.Z, t.type);
              if (u < 1e-6 && l)
                return (
                  (t.endOfStream = !0),
                  t.type == "video" && (n = e.h.get(Fe)) && Up(n) && (n.endOfStream = !0),
                  null
                );
              if (((t.endOfStream = !1), o >= s)) return n / 2;
              if (((u = !t.ua), (l = Qx(e, t, r, l)), !l))
                return ((e = 1 / 0), (t = t.Ja) && (e = t.endTime - t.startTime), Math.min(e / 2, n));
              o = t.pb;
              var p = l.ea;
              (o && p && cu(p, o) && (o.g = p.g),
                (o = !1),
                u && t.gg && ((o = !0), (t.gg = !1)),
                (u = 1 / 0),
                (p = Array.from(e.h.values())),
                (p = x(p)));
              for (var m = p.next(); !m.done; m = p.next())
                ((m = m.value),
                  Up(m) || (m.ua && !m.ua.current()) || (u = Math.min(u, m.Ja ? m.Ja.endTime : r)));
              return i >= u + e.j.presentationTimeline.h
                ? n
                : (t.ia &&
                    t.ua &&
                    !e.m.has(t.stream) &&
                    (t.ia.Ya(l.startTime + 0.001), yu(t.ia, l.startTime).catch(function () {})),
                  (Su(e) && xR(e, t, l)) ||
                    (gR(e, t, r, l, o).catch(function () {}), t.Fc && Zx(e, t.Fc, r, s)),
                  null);
            }
            function Qx(e, t, n, r) {
              if (t.ua)
                return (
                  (n = t.ua.current()) &&
                    t.Ja &&
                    Math.abs(t.Ja.startTime - n.startTime) < 0.001 &&
                    (n = t.ua.next().value),
                  n
                );
              if (t.Ja || r)
                return (
                  (n = t.Ja ? t.Ja.endTime : r),
                  (e = e.g.Ob() < 0),
                  t.stream.segmentIndex && (t.ua = t.stream.segmentIndex.Xb(n, !1, e)),
                  t.ua && t.ua.next().value
                );
              r = e.j.sequenceMode || Su(e) ? 0 : e.i.inaccurateManifestTolerance;
              var i = Math.max(n - r, 0);
              e = e.g.Ob() < 0;
              var s = null;
              return (
                r &&
                  (t.stream.segmentIndex && (t.ua = t.stream.segmentIndex.Xb(i, !1, e)),
                  (s = t.ua && t.ua.next().value)),
                s ||
                  (t.stream.segmentIndex && (t.ua = t.stream.segmentIndex.Xb(n, !1, e)),
                  (s = t.ua && t.ua.next().value)),
                s
              );
            }
            function gR(e, t, n, r, i) {
              var s, o, u, l, p, m, y, v, w, A, E, C, k, R, L, U, G;
              return j(function (b) {
                switch (b.g) {
                  case 1:
                    if (((s = Ot), (o = t.stream), (u = t.ua), (t.Ka = !0), ee(b, 2), r.Kc() == 2))
                      throw new H(1, 1, 1011);
                    return I(b, yR(e, t, r, i), 4);
                  case 4:
                    return (
                      dt(e.l),
                      e.F
                        ? b.return()
                        : ((l = o.mimeType == "video/mp4" || o.mimeType == "audio/mp4"),
                          (p = g.ReadableStream),
                          e.i.lowLatencyMode && e.j.isLowLatency && p && l && (e.j.type != "HLS" || r.o)
                            ? ((v = new Uint8Array(0)),
                              (A = w = !1),
                              (C = function (B) {
                                var N, z, V;
                                return j(function (X) {
                                  switch (X.g) {
                                    case 1:
                                      if (w || ((A = !0), dt(e.l), e.F)) return X.return();
                                      if (
                                        (ee(X, 2),
                                        (v = Nt(v, B)),
                                        (N = !1),
                                        (z = 0),
                                        new ut()
                                          .box("mdat", function (W) {
                                            ((z = W.size + W.start), (N = !0));
                                          })
                                          .parse(v, !1, !0),
                                        !N)
                                      ) {
                                        X.A(4);
                                        break;
                                      }
                                      return (
                                        (V = v.subarray(0, z)),
                                        (v = v.subarray(z)),
                                        I(X, Op(e, t, n, o, r, V, !0, i), 5)
                                      );
                                    case 5:
                                      t.ia && t.ua && yu(t.ia, r.startTime, !0);
                                    case 4:
                                      de(X, 0);
                                      break;
                                    case 2:
                                      ((E = se(X)), re(X));
                                  }
                                });
                              }),
                              I(b, Tu(e, t, r, C), 9))
                            : ((m = Tu(e, t, r)), I(b, m, 7)))
                    );
                  case 7:
                    return (
                      (y = b.h),
                      dt(e.l),
                      e.F
                        ? b.return()
                        : (dt(e.l),
                          t.Ub
                            ? ((t.Ka = !1), In(e, t, 0), b.return())
                            : I(b, Op(e, t, n, o, r, y, !1, i), 6))
                    );
                  case 9:
                    if (((k = b.h), E)) throw E;
                    if (A) {
                      b.A(10);
                      break;
                    }
                    return (
                      (w = !0),
                      dt(e.l),
                      e.F
                        ? b.return()
                        : t.Ub
                          ? ((t.Ka = !1), In(e, t, 0), b.return())
                          : I(b, Op(e, t, n, o, r, k, !1, i), 10)
                    );
                  case 10:
                    t.ia && t.ua && yu(t.ia, r.startTime, !0);
                  case 6:
                    if ((dt(e.l), e.F)) return b.return();
                    ((t.Ja = r),
                      u.next(),
                      (t.Ka = !1),
                      (t.fh = !1),
                      (R = e.g.Z.Gc()),
                      (L = R[t.type]),
                      JSON.stringify(L),
                      t.Ub ||
                        ((U = null),
                        t.type === s.wa ? (U = e.h.get(s.aa)) : t.type === s.aa && (U = e.h.get(s.wa)),
                        U && U.type == s.aa
                          ? e.g.zd(r, t.stream, U.stream.isAudioMuxedInVideo, !1)
                          : e.g.zd(r, t.stream, t.stream.codecs.includes(","), !1)),
                      Ri(t),
                      In(e, t, 0),
                      de(b, 0));
                    break;
                  case 2:
                    if (((G = se(b)), dt(e.l, G), e.F)) return b.return();
                    if (((t.Ka = !1), G.code == 7001)) ((t.Ka = !1), Ri(t), In(e, t, 0), b.A(0));
                    else if (t.type == s.Na && e.i.ignoreTextStreamFailures) (e.h.delete(s.Na), b.A(0));
                    else
                      return G.code == 3017
                        ? I(b, mR(e, t, G), 0)
                        : ((t.ce = !0),
                          G.category == 1 && t.ia && vu(t.ia, r),
                          (G.severity = 2),
                          I(b, Bp(e, t, G), 0));
                }
              });
            }
            function Zx(e, t, n, r) {
              var i, s, o, u, l, p, m, y, v, w, A, E, C;
              return j(function (k) {
                switch (k.g) {
                  case 1:
                    for (
                      i = Ot, s = t.stream, l = (u = (o = s.segmentIndex) && o.Xb(n)) && u.next().value;
                      l && e.O.includes(l.startTime);
                    )
                      l = u && u.next().value;
                    if (!l) {
                      k.A(0);
                      break;
                    }
                    if (((p = l.ea), !p || cu(p, t.pb))) {
                      k.A(3);
                      break;
                    }
                    return ((t.pb = p), ee(k, 4), I(k, Tu(e, t, p), 6));
                  case 6:
                    m = k.h;
                    var R = e.g.Z;
                    (R.C && $l(R.C, m, 0, s), (e.O = []), de(k, 3));
                    break;
                  case 4:
                    throw ((y = se(k)), (t.pb = null), y);
                  case 3:
                    if (t.Ja && t.Ja == l) {
                      k.A(0);
                      break;
                    }
                    return ((t.Ja = l), ee(k, 8), I(k, Tu(e, t, l), 10));
                  case 10:
                    ((v = k.h), (R = e.g.Z), R.C && $l(R.C, v, 0, s), e.O.push(l.startTime), de(k, 9));
                    break;
                  case 8:
                    throw ((w = se(k)), (t.Ja = null), w);
                  case 9:
                    if (
                      (t.Ub ||
                        ((A = null),
                        t.type === i.wa ? (A = e.h.get(i.aa)) : t.type === i.aa && (A = e.h.get(i.wa)),
                        A && A.type == i.aa
                          ? e.g.zd(l, t.stream, A.stream.isAudioMuxedInVideo, !0)
                          : e.g.zd(l, t.stream, t.stream.codecs.includes(","), !0)),
                      (E = Math.max.apply(Math, [0].concat(Y(e.O)))),
                      (C = e.g.nc()),
                      C + r > E)
                    )
                      return I(k, Zx(e, t, l.startTime, r), 0);
                    k.A(0);
                }
              });
            }
            function mR(e, t, n) {
              var r, i, s, o, u, l, p;
              return j(function (m) {
                switch (m.g) {
                  case 1:
                    if (
                      ((r = Array.from(e.h.values())),
                      r.some(function (y) {
                        return y != t && y.fh;
                      }))
                    ) {
                      m.A(2);
                      break;
                    }
                    if (e.i.avoidEvictionOnQuotaExceededError)
                      return ((i = Fp(e, n)), e.g.disableStream(t.stream, i) || In(e, t, 4), m.return());
                    if (((s = Math.round(100 * e.C)), s > 20)) {
                      ((e.C -= 0.2), m.A(3));
                      break;
                    }
                    if (s > 4) {
                      ((e.C -= 0.04), m.A(3));
                      break;
                    }
                    if (((o = Fp(e, n)), (u = e.g.disableStream(t.stream, o)), !u)) {
                      ((t.ce = !0), (e.F = !0), e.g.onError(n), m.A(5));
                      break;
                    }
                    return ((e.C = 1), (l = e.g.nc()), I(m, Vc(e, t, l), 5));
                  case 5:
                    return m.return();
                  case 3:
                    return ((t.fh = !0), (p = e.g.nc()), I(m, Vc(e, t, p), 2));
                  case 2:
                    (In(e, t, 4), re(m));
                }
              });
            }
            function yR(e, t, n, r) {
              var i, s, o, u, l, p, m, y, v, w, A, E, C, k, R, L;
              return j(function (U) {
                switch (U.g) {
                  case 1:
                    if (
                      ((i = Ot),
                      (s = t.Ja == null),
                      (o = []),
                      (u = Math.max(0, Math.max(n.appendWindowStart, e.ba) - 0.1)),
                      (l = Math.min(n.appendWindowEnd, e.$) + 0.1),
                      (p = n.codecs || t.stream.codecs),
                      (m = es(p)),
                      (y = Qn(n.mimeType || t.stream.mimeType)),
                      (v = n.timestampOffset),
                      v == t.pf && u == t.tc && l == t.sc && m == t.mf && y == t.nf)
                    ) {
                      U.A(2);
                      break;
                    }
                    if (((w = t.mf && t.nf && HM(e.g.Z, t.type, y, p, Xc(e))), !w)) {
                      U.A(3);
                      break;
                    }
                    if (
                      ((A = null),
                      t.type === i.wa ? (A = e.h.get(i.aa)) : t.type === i.aa && (A = e.h.get(i.wa)),
                      !A)
                    ) {
                      U.A(3);
                      break;
                    }
                    return I(
                      U,
                      Gc(A).catch(function () {}),
                      5,
                    );
                  case 5:
                    ((A.pb = null), (A.tc = null), (A.sc = null), bp(e, A));
                  case 3:
                    return I(U, eT(e, t, v, u, l, n, m, y), 2);
                  case 2:
                    return (
                      cu(n.ea, t.pb) ||
                        ((t.pb = n.ea),
                        n.l &&
                          n.ea &&
                          ((E = Tu(e, t, n.ea)),
                          (C = function () {
                            var G, b, B, N, z, V, X, W, ie, ne, q;
                            return j(function (Z) {
                              switch (Z.g) {
                                case 1:
                                  return (ee(Z, 2), I(Z, E, 4));
                                case 4:
                                  return (
                                    (G = Z.h),
                                    dt(e.l),
                                    (b = null),
                                    (B = new Map()),
                                    (N = { projection: null, hfov: null }),
                                    t.stream &&
                                      (z = t.stream.videoLayout) &&
                                      ((V = z.split("/")),
                                      V.includes("PROJ-RECT")
                                        ? (N.projection = "rect")
                                        : V.includes("PROJ-EQUI")
                                          ? (N.projection = "equi")
                                          : V.includes("PROJ-HEQU")
                                            ? (N.projection = "hequ")
                                            : V.includes("PROJ-PRIM")
                                              ? (N.projection = "prim")
                                              : V.includes("PROJ-AIV") && (N.projection = "hequ")),
                                    (X = new ut()),
                                    X.box("moov", Ue)
                                      .box("trak", Ue)
                                      .box("mdia", Ue)
                                      .S("mdhd", function (ae) {
                                        b = Ic(ae.reader, ae.version).timescale;
                                      })
                                      .box("hdlr", function (ae) {
                                        switch (((ae = ae.reader), ae.skip(8), ae.Yc())) {
                                          case "soun":
                                            B.set(i.aa, b);
                                            break;
                                          case "vide":
                                            B.set(i.wa, b);
                                        }
                                        b = null;
                                      }),
                                    t.type !== i.wa ||
                                      N.projection ||
                                      X.box("minf", Ue)
                                        .box("stbl", Ue)
                                        .S("stsd", Ei)
                                        .box("encv", Zn)
                                        .box("avc1", Zn)
                                        .box("avc3", Zn)
                                        .box("hev1", Zn)
                                        .box("hvc1", Zn)
                                        .box("dvav", Zn)
                                        .box("dva1", Zn)
                                        .box("dvh1", Zn)
                                        .box("dvhe", Zn)
                                        .box("dvc1", Zn)
                                        .box("dvi1", Zn)
                                        .box("vexu", Ue)
                                        .box("proj", Ue)
                                        .S("prji", function (ae) {
                                          ((ae = ae.reader.Yc()), (N.projection = ae));
                                        })
                                        .box("hfov", function (ae) {
                                          ((ae = ae.reader.U() / 1e3), (N.hfov = ae));
                                        }),
                                    X.parse(G, !0, !0),
                                    t.type === i.wa && vR(e, N),
                                    B.has(t.type)
                                      ? (n.ea.timescale = B.get(t.type))
                                      : b != null && (n.ea.timescale = b),
                                    (W = t.stream.segmentIndex),
                                    W instanceof It && (ie = $M(W, n.startTime)),
                                    (ne = t.stream.closedCaptions && t.stream.closedCaptions.size > 0),
                                    I(Z, e.g.Uh(t.type, G), 5)
                                  );
                                case 5:
                                  return I(
                                    Z,
                                    Lc(e.g.Z, t.type, G, null, t.stream, ne, t.bd, r, !1, !1, ie),
                                    6,
                                  );
                                case 6:
                                  de(Z, 0);
                                  break;
                                case 2:
                                  throw ((q = se(Z)), (t.pb = null), q);
                              }
                            });
                          }),
                          (k = n.startTime),
                          s && ((R = Xs(e.g.Z, t.type)), R != null && (k = R)),
                          e.g.Fk(k, n.ea),
                          o.push(C()))),
                      (L = t.Ja ? t.Ja.i : -1),
                      n.i != L && o.push(NM(e.g.Z, t.type, n.startTime)),
                      I(U, Promise.all(o), 0)
                    );
                }
              });
            }
            function eT(e, t, n, r, i, s, o, u) {
              var l, p, m, y, v;
              return j(function (w) {
                switch (w.g) {
                  case 1:
                    if (
                      ((l = Ot),
                      (p = Xc(e)),
                      ee(w, 2),
                      (t.tc = r),
                      (t.sc = i),
                      o && (t.mf = o),
                      u && (t.nf = u),
                      (t.pf = n),
                      (m = e.j.sequenceMode || e.j.type == "HLS"),
                      (y = null),
                      t.type === l.wa ? (y = e.h.get(l.aa)) : t.type === l.aa && (y = e.h.get(l.wa)),
                      !(y && y.stream && y.stream.isAudioMuxedInVideo))
                    ) {
                      w.A(4);
                      break;
                    }
                    return I(w, vx(e.g.Z, y.type, n, r, i, m, y.stream.mimeType, y.stream.codecs, p), 4);
                  case 4:
                    return I(
                      w,
                      vx(
                        e.g.Z,
                        t.type,
                        n,
                        r,
                        i,
                        m,
                        s.mimeType || t.stream.mimeType,
                        s.codecs || t.stream.codecs,
                        p,
                      ),
                      6,
                    );
                  case 6:
                    de(w, 0);
                    break;
                  case 2:
                    throw (
                      (v = se(w)),
                      (t.tc = null),
                      (t.sc = null),
                      (t.mf = null),
                      (t.nf = null),
                      (t.pf = null),
                      v
                    );
                }
              });
            }
            function Op(e, t, n, r, i, s, o, u) {
              ((o = o === void 0 ? !1 : o), (u = u === void 0 ? !1 : u));
              var l, p, m, y;
              return j(function (v) {
                switch (v.g) {
                  case 1:
                    return (
                      (l = r.closedCaptions && r.closedCaptions.size > 0),
                      e.i.shouldFixTimestampOffset &&
                        ((p = r.mimeType == "video/mp4" || r.mimeType == "audio/mp4"),
                        (m = null),
                        i.ea && (m = i.ea.timescale),
                        p &&
                          m &&
                          r.type === "video" &&
                          e.j.type == "DASH" &&
                          new ut()
                            .box("moof", Ue)
                            .box("traf", Ue)
                            .S("tfdt", function (w) {
                              var A, E, C, k, R, L;
                              return j(function (U) {
                                return (
                                  (A = Ec(w.reader, w.version)),
                                  (E = A.baseMediaDecodeTime),
                                  E
                                    ? ((C = -E / m),
                                      (k = Number(t.pf) || 0),
                                      k < C
                                        ? ((R = t.tc), (L = t.sc), I(U, eT(e, t, C, R, L, i), 0))
                                        : U.A(0))
                                    : U.return()
                                );
                              });
                            })
                            .parse(s, !1, o)),
                      I(v, Vc(e, t, n), 2)
                    );
                  case 2:
                    return (dt(e.l), (y = t.bd), (t.bd = !1), I(v, e.g.Uh(t.type, s), 3));
                  case 3:
                    return I(v, Lc(e.g.Z, t.type, s, i, r, l, y, u, o), 4);
                  case 4:
                    (dt(e.l), re(v));
                }
              });
            }
            function Vc(e, t, n) {
              var r, i, s, o, u, l, p, m, y;
              return j(function (v) {
                if (v.g == 1)
                  return (
                    e.H == t && (e.H = null),
                    (r = t.stream.segmentIndex),
                    r instanceof It &&
                      (r.Ya(e.j.presentationTimeline.Hb()),
                      (i = []),
                      KM(r, function (w) {
                        i.push(w.We());
                      })),
                    (s = Math.max(e.i.bufferBehind * e.C, e.j.presentationTimeline.h)),
                    (o = vp(e.g.Z, t.type)),
                    o == null
                      ? v.return()
                      : ((u = n - o),
                        (l = e.i.evictionGoal),
                        (p = e.j.presentationTimeline.Zb()),
                        (m = e.j.presentationTimeline.Gb()),
                        (y = u - s),
                        m - p > l && (y = Math.max(u - s, p - l - o)),
                        y <= l ? v.return() : I(v, e.g.Z.remove(t.type, o, o + y, i), 2))
                  );
                if (v.g != 4) return (dt(e.l), e.H ? I(v, Vc(e, e.H, n), 4) : v.A(0));
                (dt(e.l), re(v));
              });
            }
            function Up(e) {
              return (
                e &&
                e.type == Fe &&
                (e.stream.mimeType == "application/cea-608" || e.stream.mimeType == "application/cea-708")
              );
            }
            function Tu(e, t, n, r) {
              var i, s, o, u, l;
              return j(function (p) {
                switch (p.g) {
                  case 1:
                    if ((i = n.$b())) return p.return(i);
                    if (((s = null), t.ia)) {
                      var m = t.ia,
                        y = m.g;
                      (n instanceof Vn && (y = m.j),
                        y.has(n) ? ((m = y.get(n)), r && (m.Bh = r), (s = m.oe)) : (s = null));
                    }
                    return (
                      s || (s = Hc(n, t.stream, r || null, e.i.retryParameters, e.g.vc)),
                      (o = 0),
                      t.ua && (o = t.ua.h),
                      (t.Va = s),
                      I(p, s.promise, 2)
                    );
                  case 2:
                    if (((u = p.h), (t.Va = null), (l = u.data), !n.aesKey)) {
                      p.A(3);
                      break;
                    }
                    return I(p, Lp(l, n.aesKey, o), 4);
                  case 4:
                    l = p.h;
                  case 3:
                    return p.return(l);
                }
              });
            }
            function Hc(e, t, n, r, i, s) {
              s = s === void 0 ? !1 : s;
              var o = e instanceof Ce ? e : void 0,
                u = o ? 1 : 0;
              return (
                (e = xu(e.P(), e.startByte, e.endByte, r, n)),
                (e.contentType = t.type),
                i.request(Ar, e, { type: u, stream: t, segment: o, isPreload: s })
              );
            }
            function jp(e, t, n, r) {
              var i, s;
              return j(function (o) {
                if (o.g == 1)
                  return (
                    (t.Ub = !1),
                    (t.Md = !1),
                    (t.ld = 0),
                    (t.Wb = !0),
                    (t.Ja = null),
                    (t.ua = null),
                    t.ia && !e.m.has(t.stream) && Jr(t.ia),
                    r
                      ? ((i = e.g.nc()), (s = e.g.Z.getDuration()), I(o, e.g.Z.remove(t.type, i + r, s), 3))
                      : I(o, yx(e.g.Z, t.type), 4)
                  );
                if (o.g != 3) return (dt(e.l), n ? I(o, e.g.Z.flush(t.type), 3) : o.A(3));
                (dt(e.l), (t.Wb = !1), (t.endOfStream = !1), t.Ka || t.qb || In(e, t, 0), re(o));
              });
            }
            function In(e, t, n) {
              var r = t.type;
              (r != Fe || e.h.has(r)) &&
                (t.qb = new eu(function () {
                  var i;
                  return j(function (s) {
                    if (s.g == 1) return (ee(s, 2), I(s, hR(e, t), 4));
                    if (s.g != 2) return de(s, 0);
                    ((i = se(s)), e.g && e.g.onError(i), re(s));
                  });
                }).ka(n));
            }
            function Ri(e) {
              e.qb != null && (e.qb.stop(), (e.qb = null));
            }
            function Gc(e) {
              return j(function (t) {
                return e.Va ? I(t, e.Va.abort(), 0) : t.A(0);
              });
            }
            function Bp(e, t, n) {
              var r;
              return j(function (i) {
                if (i.g == 1)
                  return n.code == 3024 ? ((t.Ka = !1), Ri(t), In(e, t, 0), i.return()) : I(i, S0(e.X), 2);
                if ((dt(e.l), n.category === 1 && n.code != 1003)) {
                  if (t.Nc) return (Yx(e, !1), i.return());
                  ((r = Fp(e, n)),
                    (n.handled = e.g.disableStream(t.stream, r)),
                    n.handled && (n.severity = 1));
                }
                ((!n.handled || n.code != 1011) && e.g.onError(n),
                  n.handled || e.i.failureCallback(n),
                  re(i));
              });
            }
            function Fp(e, t) {
              return e.i.maxDisabledTime === 0 && t.code == 1011 ? 1 : e.i.maxDisabledTime;
            }
            function zc(e, t) {
              t = t === void 0 ? !1 : t;
              var n, r, i, s, o, u;
              return j(function (l) {
                if (l.g == 1) {
                  if (((n = Date.now() / 1e3), (r = e.i.minTimeBetweenRecoveries), !t)) {
                    if (!e.i.allowMediaSourceRecoveries || n - e.R < r) return l.return(!1);
                    e.R = n;
                  }
                  return (
                    (i = Ot),
                    (s = e.h.get(i.aa)) &&
                      (Ri(s),
                      s.Va && (s.Va.abort(), (s.Va = null)),
                      (s.pb = null),
                      (s.tc = null),
                      (s.sc = null),
                      (s.Ka = !1),
                      (s.Ub = !1),
                      (s.ld = 0),
                      (s.Md = !1),
                      (s.Wb = !1),
                      s.ua && s.ua.jh()),
                    (o = e.h.get(i.wa)) &&
                      (Ri(o),
                      o.Va && (o.Va.abort(), (o.Va = null)),
                      (o.pb = null),
                      (o.tc = null),
                      (o.sc = null),
                      (o.Ka = !1),
                      (o.Ub = !1),
                      (o.ld = 0),
                      (o.Md = !1),
                      (o.Wb = !1),
                      o.ua && o.ua.jh()),
                    (u = e.g.video.paused),
                    I(l, Sx(e.g.Z, Xc(e)), 2)
                  );
                }
                return (
                  !o || o.Wb || o.Ka || o.qb || In(e, o, 0),
                  !s || s.Wb || s.Ka || s.qb || In(e, s, 0),
                  u || e.g.video.play(),
                  l.return(!0)
                );
              });
            }
            function vR(e, t) {
              if (e.T.projection != t.projection || e.T.hfov != t.hfov) {
                if (t.projection != null || t.hfov != null) {
                  var n = new Map().set("detail", t);
                  n = new we("spatialvideoinfo", n);
                } else n = new we("nospatialvideoinfo");
                ((n.cancelable = !0), e.g.onEvent(n), (e.T = t));
              }
            }
            function Su(e) {
              if (e.i.crossBoundaryStrategy !== "keep") return !0;
              var t = Be();
              if (t.Ib()) {
                if (!t.Nf()) {
                  for (t = x(e.h.keys()), n = t.next(); !n.done; n = t.next())
                    if (
                      ((n = e.h.get(n.value)),
                      n.type !== Ot.Na && (n = n.stream) && n.fullMimeTypes && n.fullMimeTypes.size > 1)
                    ) {
                      for (e = new Set(), t = x(n.fullMimeTypes), n = t.next(); !n.done; n = t.next())
                        e.add(qa(n.value));
                      return e.size > 1;
                    }
                }
              } else {
                t = x(e.h.keys());
                for (var n = t.next(); !n.done; n = t.next())
                  if (
                    ((n = e.h.get(n.value)),
                    n.type !== Ot.Na && (n = n.stream) && n.fullMimeTypes && n.fullMimeTypes.size > 1)
                  )
                    return !0;
              }
              return !1;
            }
            function tT(e) {
              (e.G.Qa(),
                Su(e) &&
                  (e.G.D(e.g.video, "waiting", function () {
                    return Vp(e);
                  }),
                  e.G.D(e.g.video, "timeupdate", function () {
                    return Vp(e);
                  })));
            }
            function Vp(e) {
              if (Su(e)) {
                e.K.stop();
                var t = e.g.nc(),
                  n = e.h.get("video") || e.h.get("audio");
                n &&
                  (n = n.pb) &&
                  n.g !== null &&
                  ((t = n.g - t), t < 0 || t > 1 || ((e.I = n.g + 0.1), e.K.ka(t)));
              }
            }
            function xR(e, t, n) {
              if (t.type === Fe) return !1;
              var r = t.pb;
              if (!r) return !1;
              var i = n.ea;
              if (
                ((n = r.g !== i.g),
                e.i.crossBoundaryStrategy === "reset_to_encrypted" &&
                  (r.encrypted || i.encrypted || (n = !1),
                  r.encrypted && (e.i.crossBoundaryStrategy = "keep")),
                e.i.crossBoundaryStrategy === "RESET_ON_ENCRYPTION_CHANGE" &&
                  r.encrypted == i.encrypted &&
                  (n = !1),
                e.i.crossBoundaryStrategy === "keep" && r.mimeType && i.mimeType)
              ) {
                var s = fn(Fn(r.mimeType)),
                  o = fn(Fn(r.mimeType));
                r.mimeType == i.mimeType && s == o && (n = !1);
              }
              return (
                n &&
                  (e.J || t.bd) &&
                  ((e.J = !1),
                  zc(e, !0).then(function () {
                    var u = new Map().set("oldEncrypted", r.encrypted).set("newEncrypted", i.encrypted);
                    e.g.onEvent(new we("boundarycrossed", u));
                  })),
                n
              );
            }
            function Xc(e, t) {
              function n(s) {
                if (s.fullMimeTypes && s.fullMimeTypes.size > 1 && e.h.has(s.type)) {
                  var o = e.h.get(s.type),
                    u = Xs(e.g.Z, o.type),
                    l = e.g.nc();
                  (o = Qx(e, o, l, u)) &&
                    o.codecs &&
                    o.mimeType &&
                    ((s.codecs = o.codecs), (s.mimeType = o.mimeType));
                }
              }
              t = t === void 0 ? !1 : t;
              var r = new Map(),
                i = e.o.audio;
              return (
                i && (n(i), r.set("audio", i)),
                (i = e.o.video) && (n(i), r.set("video", i)),
                t && e.B && r.set(Fe, e.B),
                r
              );
            }
            function Wc() {}
            function Hp(e, t, n, r, i) {
              var s = i in r,
                o = s
                  ? n.constructor == Object && Object.keys(r).length == 0
                  : n.constructor == Object && Object.keys(n).length == 0,
                u = s || o,
                l = !0,
                p;
              for (p in t) {
                var m = i + "." + p,
                  y = s ? r[i] : n[p];
                u || p in n
                  ? t[p] === void 0
                    ? y === void 0 || u
                      ? delete e[p]
                      : (e[p] = Ur(y))
                    : o
                      ? (e[p] = t[p])
                      : y.constructor == Object && t[p] && t[p].constructor == Object
                        ? (e[p] || (e[p] = Ur(y)), (m = Hp(e[p], t[p], y, r, m)), (l = l && m))
                        : typeof t[p] != typeof y ||
                            t[p] == null ||
                            (typeof t[p] != "function" && t[p].constructor != y.constructor)
                          ? (An("Invalid config, wrong type for " + m), (l = !1))
                          : typeof n[p] == "function" && n[p].length != t[p].length
                            ? (je("Unexpected number of arguments for " + m), (e[p] = t[p]))
                            : (e[p] = Array.isArray(e[p]) ? t[p].slice() : t[p])
                  : (An("Invalid config, unrecognized key " + m), (l = !1));
              }
              return l;
            }
            function Kc(e, t) {
              for (var n = {}, r = n, i = 0, s = 0; (i = e.indexOf(".", i)), !(i < 0); )
                ((i == 0 || e[i - 1] != "\\") &&
                  ((s = e.substring(s, i).replace(/\\\./g, ".")), (r[s] = {}), (r = r[s]), (s = i + 1)),
                  (i += 1));
              return ((r[e.substring(s).replace(/\\\./g, ".")] = t), n);
            }
            function Vo(e, t) {
              return e && t;
            }
            function nT(e, t) {
              function n(s) {
                for (var o = x(Object.keys(s)), u = o.next(); !u.done; u = o.next())
                  if (((u = u.value), !(s[u] instanceof HTMLElement)))
                    if (i(s[u]) && Object.keys(s[u]).length === 0) delete s[u];
                    else {
                      var l = s[u];
                      (Array.isArray(l) && l.length === 0) || typeof s[u] == "function"
                        ? delete s[u]
                        : i(s[u]) && (n(s[u]), Object.keys(s[u]).length === 0 && delete s[u]);
                    }
              }
              function r(s, o) {
                return Object.keys(s).reduce(function (u, l) {
                  var p = s[l];
                  return (
                    o.hasOwnProperty(l)
                      ? p instanceof HTMLElement && o[l] instanceof HTMLElement
                        ? p.isEqualNode(o[l]) || (u[l] = p)
                        : i(p) && i(o[l])
                          ? ((p = r(p, o[l])), (Object.keys(p).length > 0 || !i(p)) && (u[l] = p))
                          : Array.isArray(p) && Array.isArray(o[l])
                            ? Es(p, o[l]) || (u[l] = p)
                            : (Number.isNaN(p) && Number.isNaN(o[l])) || (p !== o[l] && (u[l] = p))
                      : (u[l] = p),
                    u
                  );
                }, {});
              }
              function i(s) {
                return s && typeof s == "object" && !Array.isArray(s);
              }
              return ((e = r(e, t)), n(e), e);
            }
            (fe("shaka.util.ConfigUtils", Wc),
              (Wc.getDifferenceFromConfigObjects = nT),
              (Wc.convertToConfigObject = Kc),
              (Wc.mergeConfigObjects = Hp),
              fe("shaka.config.RepeatMode", { OFF: 0, ALL: 1, SINGLE: 2 }));
            function Hn() {}
            function rT(e) {
              return ((e = ei(e)), new Pt(e).Db);
            }
            function wu(e, t, n) {
              function r(u) {
                (jn(s).setUint32(o, u.byteLength, !0), (o += 4), s.set(De(u), o), (o += u.byteLength));
              }
              if (!n || !n.byteLength) throw new H(2, 6, 6015);
              var i;
              (typeof t == "string" ? (i = Rh(t, !0)) : (i = t), (e = ei(e)), (e = Rh(e, !0)));
              var s = new Uint8Array(12 + e.byteLength + i.byteLength + n.byteLength),
                o = 0;
              return (r(e), r(i), r(n), s);
            }
            function Gp(e, t, n) {
              return t !== "skd"
                ? e
                : ((t = n.serverCertificate), (n = ei(e).split("skd://").pop()), wu(e, n, t));
            }
            function $c(e, t) {
              e === 2 &&
                (e = t.drmInfo) &&
                Fa(e.keySystem) &&
                (t.headers["Content-Type"] = "application/octet-stream");
            }
            (fe("shaka.drm.FairPlay", Hn),
              (Hn.commonFairPlayResponse = function (e, t) {
                if (e === 2 && (e = t.originalRequest.drmInfo) && Fa(e.keySystem)) {
                  try {
                    var n = St(t.data);
                  } catch (i) {
                    return;
                  }
                  if (
                    ((e = !1),
                    (n = n.trim()),
                    n.substr(0, 5) === "<ckc>" &&
                      n.substr(-6) === "</ckc>" &&
                      ((n = n.slice(5, -6)), (e = !0)),
                    !e)
                  )
                    try {
                      var r = JSON.parse(n);
                      (r.ckc && ((n = r.ckc), (e = !0)),
                        r.CkcMessage && ((n = r.CkcMessage), (e = !0)),
                        r.License && ((n = r.License), (e = !0)));
                    } catch (i) {}
                  e && (t.data = Tr(Sr(n)));
                }
              }),
              (Hn.muxFairPlayRequest = function (e, t) {
                $c(e, t);
              }),
              (Hn.expressplayFairPlayRequest = function (e, t) {
                if (e === 2) {
                  var n = t.drmInfo;
                  n && Fa(n.keySystem) && $c(e, t);
                }
              }),
              (Hn.conaxFairPlayRequest = function (e, t) {
                $c(e, t);
              }),
              (Hn.ezdrmFairPlayRequest = function (e, t) {
                $c(e, t);
              }),
              (Hn.verimatrixFairPlayRequest = function (e, t) {
                e === 2 &&
                  (e = t.drmInfo) &&
                  Fa(e.keySystem) &&
                  ((e = De(t.body)),
                  (e = hi(e)),
                  (t.headers["Content-Type"] = "application/x-www-form-urlencoded"),
                  (t.body = Or("spc=" + e)));
              }),
              (Hn.muxInitDataTransform = function (e, t, n) {
                return Gp(e, t, n);
              }),
              (Hn.expressplayInitDataTransform = function (e, t, n) {
                return Gp(e, t, n);
              }),
              (Hn.conaxInitDataTransform = function (e, t, n) {
                if (t !== "skd") return e;
                ((t = n.serverCertificate),
                  (n = ei(e).split("skd://").pop().split("?").shift()),
                  (n = g.atob(n)));
                var r = new ArrayBuffer(n.length * 2);
                r = kv(r);
                for (var i = 0, s = n.length; i < s; i++) r[i] = n.charCodeAt(i);
                return wu(e, r, t);
              }),
              (Hn.ezdrmInitDataTransform = function (e, t, n) {
                return t !== "skd"
                  ? e
                  : ((t = n.serverCertificate), (n = ei(e).split(";").pop()), wu(e, n, t));
              }),
              (Hn.verimatrixInitDataTransform = function (e, t, n) {
                return Gp(e, t, n);
              }),
              (Hn.initDataTransform = wu),
              (Hn.defaultGetContentId = rT),
              (Hn.isFairPlaySupported = function () {
                var e;
                return j(function (t) {
                  return t.g == 1
                    ? ((e = {
                        initDataTypes: ["cenc", "sinf", "skd"],
                        videoCapabilities: [{ contentType: 'video/mp4; codecs="avc1.42E01E"' }],
                      }),
                      ee(t, 2),
                      I(t, navigator.requestMediaKeySystemAccess("com.apple.fps", [e]), 4))
                    : t.g != 2
                      ? t.return(!0)
                      : (se(t), t.return(!1));
                });
              }));
            function Yc(e, t, n) {
              for (
                n = n === void 0 ? !0 : n,
                  this.h = e,
                  this.g = new Set([e]),
                  t = t || [],
                  e = x(t),
                  t = e.next();
                !t.done;
                t = e.next()
              )
                this.add(t.value, n);
            }
            ((Yc.prototype.add = function (e, t) {
              var n = this.h;
              t = t === void 0 ? !0 : t;
              var r;
              if (
                !(r = !!n.audio != !!e.audio || !!n.video != !!e.video || n.language != e.language) &&
                (r = n.audio && e.audio)
              ) {
                r = n.audio;
                var i = e.audio;
                r = !(
                  !(
                    ((!r.channelsCount || !i.channelsCount || r.channelsCount > 2 || i.channelsCount > 2) &&
                      r.channelsCount != i.channelsCount) ||
                    r.spatialAudio !== i.spatialAudio ||
                    (t && !iT(r, i))
                  ) &&
                  Es(r.roles, i.roles) &&
                  r.groupId === i.groupId
                );
              }
              return (
                !r &&
                  (r = n.video && e.video) &&
                  ((n = n.video), (r = e.video), (r = !((!t || iT(n, r)) && Es(n.roles, r.roles)))),
                r ? !1 : (this.g.add(e), !0)
              );
            }),
              (Yc.prototype.values = function () {
                return this.g.values();
              }));
            function iT(e, t) {
              return e.mimeType != t.mimeType
                ? !1
                : ((e = e.codecs.split(",").map(function (n) {
                    return es(n);
                  })),
                  (t = t.codecs.split(",").map(function (n) {
                    return es(n);
                  })),
                  Es(e, t));
            }
            fe("shaka.media.AdaptationSet", Yc);
            function Au() {
              this.h = this.g = null;
            }
            ((Au.prototype.configure = function (e) {
              this.g = e;
            }),
              (Au.prototype.getConfiguration = function () {
                return this.g;
              }),
              (Au.prototype.create = function (e) {
                var t;
                if (this.g.language) {
                  var n = TR(e, this.g.language);
                  n.length && (t = n);
                }
                (t ||
                  ((t = e.filter(function (s) {
                    return s.primary;
                  })),
                  (t = t.length ? t : e)),
                  (e = SR(t, this.g.role)),
                  e.length && (t = e),
                  (e = wR(t, this.g.videoRole)),
                  e.length && (t = e),
                  this.g.videoLayout && ((e = MR(t, this.g.videoLayout)), e.length && (t = e)),
                  this.g.hdrLevel && ((e = CR(t, this.g.hdrLevel)), e.length && (t = e)));
                var r = [this.g.channelCount, this.g.preferredAudioChannelCount];
                if (
                  ((e = r.filter(function (s, o) {
                    return s && r.indexOf(s) === o;
                  })),
                  e.length)
                ) {
                  for (e = x(e), n = e.next(); !n.done; n = e.next())
                    if (((n = IR(t, n.value)), n.length)) {
                      t = n;
                      break;
                    }
                }
                (this.g.audioLabel && ((e = AR(t, this.g.audioLabel)), e.length && (t = e)),
                  this.g.videoLabel && ((e = ER(t, this.g.videoLabel)), e.length && (t = e)),
                  (e = RR(t, this.g.spatialAudio)),
                  e.length && (t = e));
                var i = [this.g.audioCodec, this.g.activeAudioCodec].concat(Y(this.g.preferredAudioCodecs));
                if (
                  ((e = i.filter(function (s, o) {
                    return s && i.indexOf(s) === o;
                  })),
                  e.length)
                ) {
                  for (e = x(e), n = e.next(); !n.done; n = e.next())
                    if (((n = kR(t, n.value)), n.length)) {
                      t = n;
                      break;
                    }
                }
                return (
                  (e = Be()),
                  (e = this.g.codecSwitchingStrategy == "smooth" && e.Ib()),
                  (this.h = new Yc(t[0], t, !e))
                );
              }),
              (Au.prototype.getLastAdaptationSet = function () {
                return this.h;
              }));
            function TR(e, t) {
              t = tt(t);
              var n = lc(
                t,
                e.map(function (r) {
                  return Wh(r);
                }),
              );
              return n
                ? e.filter(function (r) {
                    return n == Wh(r);
                  })
                : [];
            }
            function SR(e, t) {
              return e.filter(function (n) {
                return n.audio ? (t ? n.audio.roles.includes(t) : n.audio.roles.length == 0) : !1;
              });
            }
            function wR(e, t) {
              return e.filter(function (n) {
                return n.video ? (t ? n.video.roles.includes(t) : n.video.roles.length == 0) : !1;
              });
            }
            function AR(e, t) {
              return e.filter(function (n) {
                return n.audio && n.audio.label ? n.audio.label.toLowerCase() == t.toLowerCase() : !1;
              });
            }
            function ER(e, t) {
              return e.filter(function (n) {
                return n.video && n.video.label ? n.video.label.toLowerCase() == t.toLowerCase() : !1;
              });
            }
            function IR(e, t) {
              return e
                .filter(function (n) {
                  return !(n.audio && n.audio.channelsCount && n.audio.channelsCount > t);
                })
                .sort(function (n, r) {
                  return n.audio || r.audio
                    ? n.audio
                      ? r.audio
                        ? (r.audio.channelsCount || 0) - (n.audio.channelsCount || 0)
                        : 1
                      : -1
                    : 0;
                });
            }
            function CR(e, t) {
              if (t == "AUTO") {
                var n = e.some(function (r) {
                  return !!(r.video && r.video.hdr && r.video.hdr == "HLG");
                });
                t = Be().sd(n);
              }
              return e.filter(function (r) {
                return !(r.video && r.video.hdr && r.video.hdr != t);
              });
            }
            function MR(e, t) {
              return e.filter(function (n) {
                return !(n.video && n.video.videoLayout && n.video.videoLayout != t);
              });
            }
            function RR(e, t) {
              return e.filter(function (n) {
                return !(n.audio && n.audio.spatialAudio != t);
              });
            }
            function kR(e, t) {
              return e.filter(function (n) {
                return !(n.audio && n.audio.codecs != t);
              });
            }
            function qc() {}
            function Ho() {
              var e = 1 / 0,
                t = Be();
              navigator.connection && navigator.connection.saveData && (e = 360);
              var n = {
                  retryParameters: Br(),
                  servers: {},
                  clearKeys: {},
                  advanced: {},
                  delayLicenseRequestUntilPlayed: !1,
                  persistentSessionOnlinePlayback: !1,
                  persistentSessionsMetadata: [],
                  initDataTransform: function (u, l, p) {
                    return (
                      g.shakaMediaKeysPolyfill === "apple" &&
                        l == "skd" &&
                        ((l = p.serverCertificate), (p = rT(u)), (u = wu(u, p, l))),
                      u
                    );
                  },
                  logLicenseExchange: !1,
                  updateExpirationTime: 1,
                  preferredKeySystems: [],
                  keySystemsMapping: {},
                  parseInbandPsshEnabled: !1,
                  minHdcpVersion: "",
                  ignoreDuplicateInitData: !0,
                  defaultAudioRobustnessForWidevine: "SW_SECURE_CRYPTO",
                  defaultVideoRobustnessForWidevine: "SW_SECURE_DECODE",
                },
                r = "reload";
              t.Ib() && (r = "smooth");
              var i = {
                  retryParameters: Br(),
                  availabilityWindowOverride: NaN,
                  disableAudio: !1,
                  disableVideo: !1,
                  disableText: !1,
                  disableThumbnails: !1,
                  disableIFrames: !1,
                  defaultPresentationDelay: 0,
                  segmentRelativeVttTiming: !1,
                  raiseFatalErrorOnManifestUpdateRequestFailure: !1,
                  continueLoadingWhenPaused: !0,
                  ignoreSupplementalCodecs: !1,
                  updatePeriod: -1,
                  ignoreDrmInfo: !1,
                  enableAudioGroups: !0,
                  dash: {
                    clockSyncUri: "",
                    disableXlinkProcessing: !0,
                    xlinkFailGracefully: !1,
                    ignoreMinBufferTime: !1,
                    autoCorrectDrift: !0,
                    initialSegmentLimit: 1e3,
                    ignoreSuggestedPresentationDelay: !1,
                    ignoreEmptyAdaptationSet: !1,
                    ignoreMaxSegmentDuration: !1,
                    keySystemsByURI: {
                      "urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b": "org.w3.clearkey",
                      "urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e": "org.w3.clearkey",
                      "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed": "com.widevine.alpha",
                      "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95": "com.microsoft.playready",
                      "urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95": "com.microsoft.playready",
                      "urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2": "com.apple.fps",
                      "urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c": "com.huawei.wiseplay",
                    },
                    manifestPreprocessor: Jc,
                    manifestPreprocessorTXml: Qc,
                    sequenceMode: !1,
                    useStreamOnceInPeriodFlattening: !1,
                    enableFastSwitching: !0,
                  },
                  hls: {
                    ignoreTextStreamFailures: !1,
                    ignoreImageStreamFailures: !1,
                    defaultAudioCodec: "mp4a.40.2",
                    defaultVideoCodec: "avc1.42E01E",
                    ignoreManifestProgramDateTime: !1,
                    ignoreManifestProgramDateTimeForTypes: [],
                    mediaPlaylistFullMimeType: 'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',
                    liveSegmentsDelay: 3,
                    sequenceMode: t.fd(),
                    ignoreManifestTimestampsInSegmentsMode: !1,
                    disableCodecGuessing: !1,
                    disableClosedCaptionsDetection: !1,
                    allowLowLatencyByteRangeOptimization: !0,
                    allowRangeRequestsToGuessMimeType: !1,
                  },
                  mss: {
                    manifestPreprocessor: Jc,
                    manifestPreprocessorTXml: Qc,
                    sequenceMode: !1,
                    keySystemsBySystemId: {
                      "9a04f079-9840-4286-ab92-e65be0885f95": "com.microsoft.playready",
                      "79f0049a-4098-8642-ab92-e65be0885f95": "com.microsoft.playready",
                    },
                  },
                },
                s = {
                  trackSelectionCallback: function (u) {
                    return j(function (l) {
                      return l.return(u);
                    });
                  },
                  downloadSizeCallback: function (u) {
                    var l;
                    return j(function (p) {
                      return p.g == 1
                        ? navigator.storage && navigator.storage.estimate
                          ? I(p, navigator.storage.estimate(), 3)
                          : p.return(!0)
                        : ((l = p.h), p.return(l.usage + u < l.quota * 0.95));
                    });
                  },
                  progressCallback: function (u, l) {
                    return Vo([u, l]);
                  },
                  usePersistentLicense: !0,
                  numberOfParallelDownloads: 5,
                },
                o = {
                  drm: n,
                  manifest: i,
                  streaming: {
                    retryParameters: Br(),
                    failureCallback: function (u) {
                      return Vo([u]);
                    },
                    rebufferingGoal: 0,
                    bufferingGoal: 10,
                    bufferBehind: 30,
                    evictionGoal: 1,
                    ignoreTextStreamFailures: !1,
                    alwaysStreamText: !1,
                    startAtSegmentBoundary: !1,
                    gapDetectionThreshold: 0.5,
                    gapPadding: 0,
                    gapJumpTimerTime: 0.25,
                    durationBackoff: 1,
                    safeSeekOffset: 5,
                    safeSeekEndOffset: 0,
                    stallEnabled: !0,
                    stallThreshold: 1,
                    stallSkip: 0.1,
                    useNativeHlsForFairPlay: !0,
                    inaccurateManifestTolerance: 2,
                    lowLatencyMode: !0,
                    preferNativeDash: !1,
                    preferNativeHls: !1,
                    updateIntervalSeconds: 1,
                    observeQualityChanges: !1,
                    maxDisabledTime: 30,
                    segmentPrefetchLimit: 1,
                    prefetchAudioLanguages: [],
                    disableAudioPrefetch: !1,
                    disableTextPrefetch: !1,
                    disableVideoPrefetch: !1,
                    liveSync: {
                      enabled: !1,
                      targetLatency: 0.5,
                      targetLatencyTolerance: 0.5,
                      maxPlaybackRate: 1.1,
                      minPlaybackRate: 0.95,
                      panicMode: !1,
                      panicThreshold: 60,
                      dynamicTargetLatency: {
                        enabled: !1,
                        stabilityThreshold: 60,
                        rebufferIncrement: 0.5,
                        maxAttempts: 10,
                        maxLatency: 4,
                        minLatency: 1,
                      },
                    },
                    allowMediaSourceRecoveries: !0,
                    minTimeBetweenRecoveries: 5,
                    vodDynamicPlaybackRate: !1,
                    vodDynamicPlaybackRateLowBufferRate: 0.95,
                    vodDynamicPlaybackRateBufferRatio: 0.5,
                    preloadNextUrlWindow: 30,
                    loadTimeout: 30,
                    clearDecodingCache: !1,
                    dontChooseCodecs: !1,
                    shouldFixTimestampOffset: !1,
                    avoidEvictionOnQuotaExceededError: !1,
                    crossBoundaryStrategy: "keep",
                    returnToEndOfLiveWindowWhenOutside: !1,
                  },
                  networking: { forceHTTP: !1, forceHTTPS: !1, minBytesForProgressEvents: 16e3 },
                  mediaSource: {
                    codecSwitchingStrategy: r,
                    addExtraFeaturesToSourceBuffer: function (u) {
                      return Vo([u], "");
                    },
                    forceTransmux: !1,
                    insertFakeEncryptionInInit: !0,
                    correctEc3Enca: !1,
                    modifyCueCallback: function (u, l, p) {
                      return Vo([u, l, p]);
                    },
                    dispatchAllEmsgBoxes: !1,
                    useSourceElements: !0,
                    durationReductionEmitsUpdateEnd: !0,
                  },
                  offline: s,
                  abrFactory: function () {
                    return new Et();
                  },
                  adaptationSetCriteriaFactory: function () {
                    return new (Function.prototype.bind.apply(
                      Au,
                      [null].concat(Y(At.apply(0, arguments))),
                    ))();
                  },
                  abr: {
                    enabled: !0,
                    useNetworkInformation: !0,
                    defaultBandwidthEstimate: 1e6,
                    switchInterval: 8,
                    bandwidthUpgradeTarget: 0.85,
                    bandwidthDowngradeTarget: 0.95,
                    restrictions: {
                      minWidth: 0,
                      maxWidth: 1 / 0,
                      minHeight: 0,
                      maxHeight: e,
                      minPixels: 0,
                      maxPixels: 1 / 0,
                      minFrameRate: 0,
                      maxFrameRate: 1 / 0,
                      minBandwidth: 0,
                      maxBandwidth: 1 / 0,
                      minChannelsCount: 0,
                      maxChannelsCount: 1 / 0,
                    },
                    advanced: { minTotalBytes: 128e3, minBytes: 16e3, fastHalfLife: 2, slowHalfLife: 5 },
                    restrictToElementSize: !1,
                    restrictToScreenSize: !1,
                    ignoreDevicePixelRatio: !1,
                    clearBufferSwitch: !1,
                    safeMarginSwitch: 0,
                    cacheLoadThreshold: 5,
                    minTimeToSwitch: 0,
                    preferNetworkInformationBandwidth: !1,
                    removeLatencyFromFirstPacketTime: !1,
                  },
                  autoShowText: 3,
                  preferredAudioLanguage: "",
                  preferredAudioLabel: "",
                  preferredTextLanguage: "",
                  preferredAudioRole: "",
                  preferredVideoRole: "",
                  preferredTextRole: "",
                  preferredAudioChannelCount: 2,
                  preferredVideoHdrLevel: "AUTO",
                  preferredVideoLayout: "",
                  preferredVideoLabel: "",
                  preferredVideoCodecs: [],
                  preferredAudioCodecs: [],
                  preferredTextFormats: [],
                  preferForcedSubs: !1,
                  preferSpatialAudio: !1,
                  preferredDecodingAttributes: [],
                  restrictions: {
                    minWidth: 0,
                    maxWidth: 1 / 0,
                    minHeight: 0,
                    maxHeight: 1 / 0,
                    minPixels: 0,
                    maxPixels: 1 / 0,
                    minFrameRate: 0,
                    maxFrameRate: 1 / 0,
                    minBandwidth: 0,
                    maxBandwidth: 1 / 0,
                    minChannelsCount: 0,
                    maxChannelsCount: 1 / 0,
                  },
                  playRangeStart: 0,
                  playRangeEnd: 1 / 0,
                  textDisplayer: { captionsUpdatePeriod: 0.25, fontScaleFactor: 1 },
                  textDisplayFactory: function () {
                    return null;
                  },
                  cmcd: {
                    enabled: !1,
                    sessionId: "",
                    contentId: "",
                    rtpSafetyFactor: 5,
                    useHeaders: !1,
                    includeKeys: [],
                    version: 1,
                    targets: [],
                  },
                  cmsd: {
                    enabled: !0,
                    applyMaximumSuggestedBitrate: !0,
                    estimatedThroughputWeightRatio: 0.5,
                  },
                  lcevc: {
                    enabled: !1,
                    dynamicPerformanceScaling: !0,
                    logLevel: 0,
                    drawLogo: !1,
                    poster: !0,
                  },
                  ads: {
                    customPlayheadTracker: !1,
                    skipPlayDetection: !1,
                    supportsMultipleMediaElements: !0,
                    disableHLSInterstitial: !1,
                    disableDASHInterstitial: !1,
                    allowPreloadOnDomElements: !0,
                    allowStartInMiddleOfInterstitial: !0,
                  },
                  ignoreHardwareResolution: !1,
                  queue: { preloadNextUrlWindow: 1 / 0, preloadPrevItem: !0, repeatMode: 0 },
                };
              return (
                (s.trackSelectionCallback = function (u) {
                  return j(function (l) {
                    return l.return(_R(u, o.preferredAudioLanguage, o.preferredVideoHdrLevel));
                  });
                }),
                t.Wa(o)
              );
            }
            function sT() {
              return {
                streaming: {
                  inaccurateManifestTolerance: 0,
                  segmentPrefetchLimit: 2,
                  updateIntervalSeconds: 0.1,
                  maxDisabledTime: 1,
                  retryParameters: { baseDelay: 100 },
                },
                manifest: { dash: { autoCorrectDrift: !1 }, retryParameters: { baseDelay: 100 } },
                drm: { retryParameters: { baseDelay: 100 } },
              };
            }
            function ki(e, t, n) {
              var r = {
                ".drm.keySystemsMapping": "",
                ".drm.servers": "",
                ".drm.clearKeys": "",
                ".drm.advanced": {
                  distinctiveIdentifierRequired: !1,
                  persistentStateRequired: !1,
                  videoRobustness: [],
                  audioRobustness: [],
                  sessionType: "",
                  serverCertificate: new Uint8Array(0),
                  serverCertificateUri: "",
                  individualizationServer: "",
                  headers: {},
                },
              };
              return Hp(e, t, n || Ho(), r, "");
            }
            function _R(e, t, n) {
              var r = n;
              r == "AUTO" &&
                ((n = e.some(function (u) {
                  return !!(u.hdr && u.hdr == "HLG");
                })),
                (r = Be().sd(n)));
              var i = e.filter(function (u) {
                return !(u.type != "variant" || (u.hdr && u.hdr != r));
              });
              n = [];
              var s = lc(
                t,
                i.map(function (u) {
                  return u.language;
                }),
              );
              (s &&
                (n = i.filter(function (u) {
                  return tt(u.language) == s;
                })),
                n.length == 0 &&
                  (n = i.filter(function (u) {
                    return u.primary;
                  })),
                n.length == 0 &&
                  (i.map(function (u) {
                    return u.language;
                  }),
                  (n = i)));
              var o = n.filter(function (u) {
                return u.height && u.height <= 480;
              });
              for (
                o.length &&
                  (o.sort(function (u, l) {
                    return l.height - u.height;
                  }),
                  (n = o.filter(function (u) {
                    return u.height == o[0].height;
                  }))),
                  t = [],
                  n.length &&
                    ((i = Math.floor(n.length / 2)),
                    n.sort(function (u, l) {
                      return u.bandwidth - l.bandwidth;
                    }),
                    t.push(n[i])),
                  e = x(e),
                  n = e.next();
                !n.done;
                n = e.next()
              )
                ((n = n.value), (n.type != Fe && n.type != "image") || t.push(n));
              return t;
            }
            function Jc(e) {
              return Vo([e], e);
            }
            function Qc(e) {
              return Vo([e], e);
            }
            (fe("shaka.util.PlayerConfiguration", qc),
              (qc.mergeConfigObjects = ki),
              (qc.createDefaultForLL = sT),
              (qc.createDefault = Ho));
            function PR() {
              ((this.g = null), (this.h = []));
            }
            function zp(e, t) {
              var n = 0;
              (e.g && e.g.state == t && (n += e.g.duration), (e = x(e.h)));
              for (var r = e.next(); !r.done; r = e.next())
                ((r = r.value), (n += r.state == t ? r.duration : 0));
              return n;
            }
            function DR(e) {
              function t(s) {
                return { timestamp: s.timestamp, state: s.state, duration: s.duration };
              }
              for (var n = [], r = x(e.h), i = r.next(); !i.done; i = r.next()) n.push(t(i.value));
              return (e.g && n.push(t(e.g)), n);
            }
            function LR() {
              ((this.i = this.h = null), (this.g = []));
            }
            function Xp(e, t, n) {
              e.i != t &&
                ((e.i = t),
                e.g.push({
                  timestamp: Date.now() / 1e3,
                  id: t.id,
                  type: "text",
                  fromAdaptation: n,
                  bandwidth: null,
                }));
            }
            function Zc() {
              ((this.C = this.X = NaN),
                (this.l = ""),
                (this.j =
                  this.wi =
                  this.u =
                  this.B =
                  this.K =
                  this.F =
                  this.o =
                  this.m =
                  this.J =
                  this.G =
                  this.i =
                  this.T =
                  this.V =
                  this.N =
                  this.O =
                  this.R =
                    NaN),
                (this.M = 0),
                (this.H = this.I = NaN),
                (this.g = new PR()),
                (this.h = new LR()));
            }
            function bR(e, t, n) {
              ((e.R = t), (e.O = n));
            }
            function oT(e, t, n) {
              ((e.X = t), (e.C = n));
            }
            function NR(e, t) {
              e.i = isNaN(e.i) ? t : Math.max(e.i, t);
            }
            function aT(e, t) {
              e.j = isNaN(e.j) ? t : e.j + t;
            }
            function OR(e) {
              var t = e.X,
                n = e.C,
                r = e.l,
                i = e.B,
                s = e.O,
                o = e.R,
                u = e.N,
                l = e.V,
                p = e.T,
                m = e.u,
                y = e.i,
                v = e.G,
                w = e.J,
                A = e.m,
                E = zp(e.g, "playing"),
                C = zp(e.g, "paused"),
                k = zp(e.g, "buffering"),
                R = e.o,
                L = e.F,
                U = e.K,
                G = e.wi,
                b = e.j,
                B = e.M,
                N = e.I,
                z = e.H,
                V = DR(e.g),
                X = [];
              e = x(e.h.g);
              for (var W = e.next(); !W.done; W = e.next())
                ((W = W.value),
                  X.push({
                    timestamp: W.timestamp,
                    id: W.id,
                    type: W.type,
                    fromAdaptation: W.fromAdaptation,
                    bandwidth: W.bandwidth,
                  }));
              return {
                width: t,
                height: n,
                currentCodecs: r,
                streamBandwidth: i,
                decodedFrames: s,
                droppedFrames: o,
                corruptedFrames: u,
                stallsDetected: l,
                gapsJumped: p,
                estimatedBandwidth: m,
                completionPercent: y,
                loadLatency: v,
                manifestTimeSeconds: w,
                drmTimeSeconds: A,
                playTime: E,
                pauseTime: C,
                bufferingTime: k,
                licenseTime: R,
                liveLatency: L,
                maxSegmentDuration: U,
                manifestSizeBytes: G,
                bytesDownloaded: b,
                nonFatalErrorCount: B,
                manifestPeriodCount: N,
                manifestGapCount: z,
                stateHistory: V,
                switchHistory: X,
              };
            }
            function Ir(e, t, n, r) {
              (ot.call(this),
                (this.N = e),
                (this.V = t),
                (this.Da = r.networkingEngine),
                (this.o = n),
                (this.C = null),
                (this.za = 0),
                (this.Ta = r.md),
                (this.G = r.yk),
                (this.Ua = r.zk),
                (this.g = r.config),
                (this.m = this.H = this.h = null),
                (this.oa = !1),
                (this.I = r.Kk),
                (this.va = !1),
                (this.j = null),
                (this.ba = !1),
                (this.u = null),
                (this.M = new Map()),
                (this.ya = !1),
                (this.Fa = r.Jk),
                (this.X = new Zc()),
                (this.ma = new at()),
                (this.B = new at()),
                (this.O = null),
                (this.l = !1),
                (this.$ = r.pj),
                (this.T = this.i = null),
                (this.R = !1),
                (this.K = []),
                (this.J = []),
                (this.F = !0));
            }
            J(Ir, ot);
            function Eu(e, t, n) {
              (e = t ? e.J : e.K) ? e.push(n) : n();
            }
            function UR(e) {
              if (e.J) for (var t = x(e.J), n = t.next(); !n.done; n = t.next()) ((n = n.value), n());
              e.J = null;
            }
            function uT(e, t) {
              if (((e.O = t), (e.R = !0), e.K)) {
                t = x(e.K);
                for (var n = t.next(); !n.done; n = t.next()) ((n = n.value), n());
              }
              e.K = null;
            }
            ((h = Ir.prototype),
              (h.getStartTime = function () {
                return this.o;
              }),
              (h.rd = function () {
                return this.N;
              }),
              (h.Lg = function () {
                return this.h;
              }));
            function jR(e) {
              return ((e.va = !0), e.I);
            }
            h.getStats = function () {
              return this.X;
            };
            function BR(e) {
              return ((e.ba = !0), e.j);
            }
            ((h.Vj = function () {
              return this.i ? Os(this.i) : null;
            }),
              (h.Uj = function () {
                return this.T ? Us(this.T) : null;
              }));
            function FR(e) {
              return ((e.ya = !0), e.M);
            }
            ((h.start = function () {
              var e = this;
              (function () {
                var t;
                return j(function (n) {
                  switch (n.g) {
                    case 1:
                      return I(n, Promise.resolve(), 2);
                    case 2:
                      return (ee(n, 3), I(n, VR(e), 5));
                    case 5:
                      if ((as(e), g.shakaMediaKeysPolyfill === "webkit")) {
                        n.A(6);
                        break;
                      }
                      return I(n, lT(e), 7);
                    case 7:
                      as(e);
                    case 6:
                      return I(n, GR(e), 8);
                    case 8:
                      if ((as(e), !e.$)) {
                        n.A(9);
                        break;
                      }
                      return I(n, zR(e), 10);
                    case 10:
                      as(e);
                    case 9:
                      if (!e.$ || !e.j) {
                        n.A(11);
                        break;
                      }
                      return I(n, XC(e.j), 12);
                    case 12:
                      as(e);
                    case 11:
                      (e.B.resolve(), de(n, 0));
                      break;
                    case 3:
                      ((t = se(n)),
                        (t instanceof H && (t.code == 7001 || t.code == 7003)) || e.B.reject(t),
                        re(n));
                  }
                });
              })();
            }),
              (h.dispatchEvent = function (e) {
                return this.O ? this.O.dispatchEvent(e) : ot.prototype.dispatchEvent.call(this, e);
              }),
              (h.onError = function (e) {
                e.severity === 2 && (this.B.reject(e), this.destroy());
                var t = new Map().set("detail", e);
                ((t = new we("error", t)), this.dispatchEvent(t), t.defaultPrevented && (e.handled = !0));
              }));
            function as(e) {
              if (e.l) throw new H(2, 7, 7003);
            }
            function Wp(e, t) {
              e.dispatchEvent(new we("onstatechange", new Map().set("state", t)));
            }
            function VR(e) {
              var t, n, r, i, s, o;
              return j(function (u) {
                switch (u.g) {
                  case 1:
                    if (
                      (Wp(e, "manifest-parser"),
                      e.m ||
                        ((e.H = Uv(e.N, e.V)),
                        (e.m = e.H()),
                        e.m.configure(e.g.manifest, function () {
                          return e.F;
                        })),
                      (t = Date.now() / 1e3),
                      Wp(e, "manifest"),
                      e.h)
                    ) {
                      u.A(2);
                      break;
                    }
                    return I(u, e.m.start(e.N, e.Ua), 3);
                  case 3:
                    return ((e.h = u.h), dT(e.h), I(u, HR(e), 2));
                  case 2:
                    return (
                      e.ma.resolve(),
                      (n = new we("manifestparsed", void 0)),
                      I(u, Promise.resolve(), 5)
                    );
                  case 5:
                    if ((e.dispatchEvent(n), e.h.variants.length == 0)) throw new H(2, 4, 4036);
                    if ((dT(e.h), (r = W0(e.G, e.h)), !r)) {
                      u.A(6);
                      break;
                    }
                    return ((i = new we("trackschanged", void 0)), I(u, Promise.resolve(), 7));
                  case 7:
                    (as(e), e.dispatchEvent(i));
                  case 6:
                    ((s = Date.now() / 1e3), (o = s - t), (e.X.J = o), re(u));
                }
              });
            }
            function lT(e, t) {
              var n, r, i, s;
              return j(function (o) {
                switch (o.g) {
                  case 1:
                    return !e.h || e.j
                      ? o.return()
                      : (Wp(e, "drm-engine"),
                        (e.za = Date.now() / 1e3),
                        (e.j = e.Ta()),
                        (e.G.g = e.j),
                        e.j.configure(e.g.drm, function () {
                          return e.F;
                        }),
                        (n = hc(e.h.variants)),
                        (r = !0),
                        e.h && e.h.presentationTimeline && (r = e.h.presentationTimeline.W()),
                        I(o, L0(e.j, n, e.h.offlineSessionIds, r), 2));
                  case 2:
                    if ((as(e), !t)) {
                      o.A(3);
                      break;
                    }
                    return I(o, e.j.Vb(t), 4);
                  case 4:
                    as(e);
                  case 3:
                    return I(o, X0(e.G, e.h), 5);
                  case 5:
                    if (((i = o.h), !i)) {
                      o.A(0);
                      break;
                    }
                    return ((s = new we("trackschanged", void 0)), I(o, Promise.resolve(), 7));
                  case 7:
                    (e.dispatchEvent(s), re(o));
                }
              });
            }
            ((h.configure = function (e, t) {
              ((e = Kc(e, t)), ki(this.g, e));
            }),
              (h.getConfiguration = function () {
                return Ur(this.g);
              }));
            function HR(e) {
              return j(function (t) {
                return (
                  e.C ||
                    ((e.C = e.g.adaptationSetCriteriaFactory()),
                    e.C.configure({
                      language: e.g.preferredAudioLanguage,
                      role: e.g.preferredAudioRole,
                      videoRole: e.g.preferredVideoRole,
                      channelCount: 0,
                      hdrLevel: e.g.preferredVideoHdrLevel,
                      spatialAudio: e.g.preferSpatialAudio,
                      videoLayout: e.g.preferredVideoLayout,
                      audioLabel: e.g.preferredAudioLabel,
                      videoLabel: e.g.preferredVideoLabel,
                      codecSwitchingStrategy: e.g.mediaSource.codecSwitchingStrategy,
                      audioCodec: "",
                      activeAudioCodec: "",
                      activeAudioChannelCount: 0,
                      preferredAudioCodecs: e.g.preferredAudioCodecs,
                      preferredAudioChannelCount: e.g.preferredAudioChannelCount,
                    })),
                  e.i || !e.h.variants.length || (e.h.variants.length != 1 && e.h.type != "HLS")
                    ? t.A(0)
                    : ((e.i = Kp(e)), e.i ? I(t, cT(e.i), 0) : t.A(0))
                );
              });
            }
            function GR(e) {
              return j(function (t) {
                return t.g == 1
                  ? !e.i || e.h.variants.includes(e.i)
                    ? t.A(0)
                    : I(t, XR(e.i), 3)
                  : ((e.i = Kp(e)), e.i ? I(t, cT(e.i), 0) : t.A(0));
              });
            }
            function zR(e) {
              var t, n, r, i, s;
              return j(function (o) {
                return (
                  !e.i && (t = Kp(e)) && (e.i = t),
                  e.i
                    ? ((n = e.h.presentationTimeline.W()),
                      (r = []),
                      (i = e.i),
                      i.video && r.push($p(e, i.video, n)),
                      i.audio && r.push($p(e, i.audio, n)),
                      (s =
                        wo(
                          e.h.textStreams,
                          e.g.preferredTextLanguage,
                          e.g.preferredTextRole,
                          e.g.preferForcedSubs,
                        )[0] || null) &&
                        y0(i.audio, s, e.g) &&
                        (r.push($p(e, s, n)), (e.T = s)),
                      I(o, Promise.all(r), 0))
                    : o.A(0)
                );
              });
            }
            function Kp(e) {
              if (!e.u) {
                var t = e.g.abrFactory;
                ((e.u = t()), e.u.configure(e.g.abr));
              }
              return (
                (t = hc(e.h.variants)),
                (t = e.C.create(t)),
                e.u.setVariants(Array.from(t.values())),
                e.u.chooseVariant(!0)
              );
            }
            function $p(e, t, n) {
              var r, i, s, o, u;
              return j(function (l) {
                return l.g == 1
                  ? ((r = e.g.streaming.segmentPrefetchLimit || 2),
                    (i = new jc(
                      r,
                      t,
                      function (p, m, y) {
                        return Hc(p, m, y || null, e.g.streaming.retryParameters, e.Da, e.F);
                      },
                      !1,
                    )),
                    e.M.set(t.id, i),
                    t.segmentIndex ? l.A(2) : I(l, t.createSegmentIndex(), 2))
                  : ((s = typeof e.o == "number" ? e.o : 0),
                    (o = t.segmentIndex.Xb(s)),
                    (u = null),
                    o && ((u = o.current()), u || (u = o.next().value)),
                    u || (u = qr(t.segmentIndex)),
                    u ? (n ? (u.ea ? I(l, zx(i, u.ea), 0) : l.A(0)) : I(l, yu(i, u.startTime), 0)) : l.A(0));
              });
            }
            function cT(e) {
              var t, n, r, i;
              return j(function (s) {
                for (t = [], n = x([e.video, e.audio]), r = n.next(); !r.done; r = n.next())
                  (i = r.value) && !i.segmentIndex && t.push(i.createSegmentIndex());
                return t.length > 0 ? I(s, Promise.all(t), 0) : s.A(0);
              });
            }
            function XR(e) {
              var t, n, r, i;
              return j(function (s) {
                for (t = [], n = x([e.video, e.audio]), r = n.next(); !r.done; r = n.next())
                  (i = r.value) && i.segmentIndex && i.closeSegmentIndex && t.push(i.closeSegmentIndex());
                return t.length > 0 ? I(s, Promise.all(t), 0) : s.A(0);
              });
            }
            ((h.rl = function () {
              return this.B;
            }),
              (h.destroy = function () {
                var e = this,
                  t,
                  n,
                  r;
                return j(function (i) {
                  if (i.g == 1) return ((e.l = !0), !e.m || e.oa ? i.A(2) : I(i, e.m.stop(), 2));
                  if (i.g != 4)
                    return (
                      e.u && e.u.release(),
                      e.I && !e.va && e.I.release(),
                      !e.j || e.ba ? i.A(4) : I(i, e.j.destroy(), 4)
                    );
                  if (e.M.size > 0 && !e.ya)
                    for (t = x(e.M.values()), n = t.next(); !n.done; n = t.next()) ((r = n.value), Jr(r));
                  re(i);
                });
              }));
            function dT(e) {
              function t(n) {
                return (n.video && n.audio) || (n.video && n.video.codecs.includes(","));
              }
              e.variants.some(t) && (e.variants = e.variants.filter(t));
            }
            (fe("shaka.media.PreloadManager", Ir),
              (Ir.prototype.destroy = Ir.prototype.destroy),
              (Ir.prototype.waitForFinish = Ir.prototype.rl),
              (Ir.prototype.getPrefetchedTextTrack = Ir.prototype.Uj),
              (Ir.prototype.getPrefetchedVariantTrack = Ir.prototype.Vj));
            function Ws(e, t) {
              ot.call(this);
              var n = this;
              ((this.i = e),
                (this.l = t),
                (this.g = new Map()),
                (this.m = [
                  {
                    kd: null,
                    jd: Go,
                    Uc: function (r, i) {
                      return _i(n, "enter", r, i);
                    },
                  },
                  {
                    kd: Iu,
                    jd: Go,
                    Uc: function (r, i) {
                      return _i(n, "enter", r, i);
                    },
                  },
                  {
                    kd: Cu,
                    jd: Go,
                    Uc: function (r, i) {
                      return _i(n, "enter", r, i);
                    },
                  },
                  {
                    kd: Go,
                    jd: Iu,
                    Uc: function (r, i) {
                      return _i(n, "exit", r, i);
                    },
                  },
                  {
                    kd: Go,
                    jd: Cu,
                    Uc: function (r, i) {
                      return _i(n, "exit", r, i);
                    },
                  },
                  {
                    kd: Iu,
                    jd: Cu,
                    Uc: function (r, i) {
                      i ? _i(n, "skip", r, i) : (_i(n, "enter", r, i), _i(n, "exit", r, i));
                    },
                  },
                  {
                    kd: Cu,
                    jd: Iu,
                    Uc: function (r, i) {
                      return _i(n, "skip", r, i);
                    },
                  },
                ]),
                (this.h = new et()),
                this.h.D(this.i, "regionremove", function (r) {
                  n.g.delete(r.region);
                }));
            }
            (J(Ws, ot),
              (Ws.prototype.release = function () {
                ((this.i = null),
                  this.g.clear(),
                  this.h.release(),
                  (this.h = null),
                  ot.prototype.release.call(this));
              }),
              (Ws.prototype.j = function (e, t) {
                if (!this.l || e != 0) {
                  this.l = !1;
                  for (var n = x(this.i.h.values()), r = n.next(); !r.done; r = n.next()) {
                    r = r.value;
                    var i = this.g.get(r),
                      s = e < r.startTime ? Iu : e > r.endTime ? Cu : Go;
                    this.g.set(r, s);
                    for (var o = x(this.m), u = o.next(); !u.done; u = o.next())
                      ((u = u.value), u.kd == i && u.jd == s && u.Uc(r, t));
                  }
                }
              }));
            function _i(e, t, n, r) {
              ((t = new we(
                t,
                new Map([
                  ["region", n],
                  ["seeking", r],
                ]),
              )),
                e.dispatchEvent(t));
            }
            var Iu = 1,
              Go = 2,
              Cu = 3;
            /*
		 @license
		 Copyright 2013 Ali Al Dallal

		 Licensed under the MIT license.

		 Permission is hereby granted, free of charge, to any person obtaining a copy
		 of this software and associated documentation files (the "Software"), to deal
		 in the Software without restriction, including without limitation the rights
		 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
		 copies of the Software, and to permit persons to whom the Software is
		 furnished to do so, subject to the following conditions:

		 The above copyright notice and this permission notice shall be included in
		 all copies or substantial portions of the Software.

		 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
		 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
		 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
		 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
		 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
		 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
		 SOFTWARE.
		*/ for (
              var us = {
                  ach: "Lwo",
                  ady: "",
                  af: "Afrikaans",
                  "af-NA": "Afrikaans (Namibia)",
                  "af-ZA": "Afrikaans (South Africa)",
                  ak: "Ti",
                  ar: "",
                  "ar-AR": "",
                  "ar-MA": "",
                  "ar-SA": " ()",
                  "ay-BO": "Aymar aru",
                  az: "Azrbaycan dili",
                  "az-AZ": "Azrbaycan dili",
                  "be-BY": "",
                  bg: "",
                  "bg-BG": "",
                  bn: "",
                  "bn-IN": " ()",
                  "bn-BD": "()",
                  "bs-BA": "Bosanski",
                  ca: "Catal",
                  "ca-ES": "Catal",
                  cak: "Maya Kaqchikel",
                  "ck-US": " (tsalagi)",
                  cs: "etina",
                  "cs-CZ": "etina",
                  cy: "Cymraeg",
                  "cy-GB": "Cymraeg",
                  da: "Dansk",
                  "da-DK": "Dansk",
                  de: "Deutsch",
                  "de-AT": "Deutsch (sterreich)",
                  "de-DE": "Deutsch (Deutschland)",
                  "de-CH": "Deutsch (Schweiz)",
                  dsb: "Dolnoserbina",
                  el: "",
                  "el-GR": "",
                  en: "English",
                  "en-GB": "English (UK)",
                  "en-AU": "English (Australia)",
                  "en-CA": "English (Canada)",
                  "en-IE": "English (Ireland)",
                  "en-IN": "English (India)",
                  "en-PI": "English (Pirate)",
                  "en-UD": "English (Upside Down)",
                  "en-US": "English (US)",
                  "en-ZA": "English (South Africa)",
                  "en@pirate": "English (Pirate)",
                  eo: "Esperanto",
                  "eo-EO": "Esperanto",
                  es: "Espaol",
                  "es-AR": "Espaol (Argentine)",
                  "es-419": "Espaol (Latinoamrica)",
                  "es-CL": "Espaol (Chile)",
                  "es-CO": "Espaol (Colombia)",
                  "es-EC": "Espaol (Ecuador)",
                  "es-ES": "Espaol (Espaa)",
                  "es-LA": "Espaol (Latinoamrica)",
                  "es-NI": "Espaol (Nicaragua)",
                  "es-MX": "Espaol (Mxico)",
                  "es-US": "Espaol (Estados Unidos)",
                  "es-VE": "Espaol (Venezuela)",
                  et: "eesti keel",
                  "et-EE": "Eesti (Estonia)",
                  eu: "Euskara",
                  "eu-ES": "Euskara",
                  fa: "",
                  "fa-IR": "",
                  "fb-LT": "Leet Speak",
                  ff: "Fulah",
                  fi: "Suomi",
                  "fi-FI": "Suomi",
                  "fo-FO": "Froyskt",
                  fr: "Franais",
                  "fr-CA": "Franais (Canada)",
                  "fr-FR": "Franais (France)",
                  "fr-BE": "Franais (Belgique)",
                  "fr-CH": "Franais (Suisse)",
                  "fy-NL": "Frysk",
                  ga: "Gaeilge",
                  "ga-IE": "Gaeilge (Gaelic)",
                  gl: "Galego",
                  "gl-ES": "Galego",
                  "gn-PY": "Avae'",
                  "gu-IN": "",
                  "gx-GR": " ",
                  he: "",
                  "he-IL": "",
                  hi: "",
                  "hi-IN": "",
                  hr: "Hrvatski",
                  "hr-HR": "Hrvatski",
                  hsb: "Hornjoserbina",
                  ht: "Kreyl",
                  hu: "Magyar",
                  "hu-HU": "Magyar",
                  "hy-AM": "",
                  id: "Bahasa Indonesia",
                  "id-ID": "Bahasa Indonesia",
                  is: "slenska",
                  "is-IS": "slenska (Iceland)",
                  it: "Italiano",
                  "it-IT": "Italiano",
                  ja: "",
                  "ja-JP": "",
                  "jv-ID": "Basa Jawa",
                  "ka-GE": "",
                  "kk-KZ": "",
                  km: "",
                  "km-KH": "",
                  kab: "Taqbaylit",
                  kn: "",
                  "kn-IN": " (India)",
                  ko: "",
                  "ko-KR": " ()",
                  ku: "Kurd",
                  "ku-TR": "Kurd",
                  la: "Latin",
                  "la-VA": "Latin",
                  lb: "Ltzebuergesch",
                  "li-NL": "Lmbrgs",
                  lt: "Lietuvi",
                  "lt-LT": "Lietuvi",
                  lv: "Latvieu",
                  "lv-LV": "Latvieu",
                  mai: ", ",
                  "mg-MG": "Malagasy",
                  mk: "",
                  "mk-MK": " ()",
                  ml: "",
                  "ml-IN": "",
                  "mn-MN": "",
                  mr: "",
                  "mr-IN": "",
                  ms: "Bahasa Melayu",
                  "ms-MY": "Bahasa Melayu",
                  mt: "Malti",
                  "mt-MT": "Malti",
                  my: "",
                  nb: "Norsk (bokml)",
                  "nb-NO": "Norsk (bokml)",
                  ne: "",
                  "ne-NP": "",
                  nl: "Nederlands",
                  "nl-BE": "Nederlands (Belgi)",
                  "nl-NL": "Nederlands (Nederland)",
                  "nn-NO": "Norsk (nynorsk)",
                  no: "Norsk",
                  oc: "Occitan",
                  "or-IN": "",
                  pa: "",
                  "pa-IN": " ( )",
                  pl: "Polski",
                  "pl-PL": "Polski",
                  "ps-AF": "",
                  pt: "Portugus",
                  "pt-BR": "Portugus (Brasil)",
                  "pt-PT": "Portugus (Portugal)",
                  "qu-PE": "Qhichwa",
                  "rm-CH": "Rumantsch",
                  ro: "Romn",
                  "ro-RO": "Romn",
                  ru: "",
                  "ru-RU": "",
                  "sa-IN": "",
                  "se-NO": "Davvismegiella",
                  "si-LK": "",
                  sk: "Slovenina",
                  "sk-SK": "Slovenina (Slovakia)",
                  sl: "Slovenina",
                  "sl-SI": "Slovenina",
                  "so-SO": "Soomaaliga",
                  sq: "Shqip",
                  "sq-AL": "Shqip",
                  sr: "",
                  "sr-RS": " (Serbia)",
                  su: "Basa Sunda",
                  sv: "Svenska",
                  "sv-SE": "Svenska",
                  sw: "Kiswahili",
                  "sw-KE": "Kiswahili",
                  ta: "",
                  "ta-IN": "",
                  te: "",
                  "te-IN": "",
                  tg: " ",
                  "tg-TJ": "",
                  th: "",
                  "th-TH": " ()",
                  tl: "Filipino",
                  "tl-PH": "Filipino",
                  tlh: "tlhIngan-Hol",
                  tr: "Trke",
                  "tr-TR": "Trke",
                  "tt-RU": "",
                  uk: "",
                  "uk-UA": "",
                  ur: "",
                  "ur-PK": "",
                  uz: "O'zbek",
                  "uz-UZ": "O'zbek",
                  vi: "Ting Vit",
                  "vi-VN": "Ting Vit",
                  "xh-ZA": "isiXhosa",
                  yi: "",
                  "yi-DE": " (German)",
                  zh: "",
                  "zh-HANS": "",
                  "zh-HANT": "",
                  "zh-CN": "",
                  "zh-HK": "",
                  "zh-SG": "",
                  "zh-TW": "",
                  "zu-ZA": "isiZulu",
                },
                fT = x(Object.keys(us)),
                Yp = fT.next();
              !Yp.done;
              Yp = fT.next()
            ) {
              var hT = Yp.value;
              us[hT.toLowerCase()] = us[hT];
            }
            function pT(e, t) {
              if (e.lineBreak) return "\n";
              if (e.nestedCues.length)
                return e.nestedCues
                  .map(function (o) {
                    return pT(o, e);
                  })
                  .join("");
              if (!e.payload) return e.payload;
              var n = [],
                r = e.fontWeight >= vo,
                i = e.fontStyle == xo,
                s = e.textDecoration.includes(vi);
              return (
                r && n.push(["b"]),
                i && n.push(["i"]),
                s && n.push(["u"]),
                (i = e.color),
                i == "" && t && (i = t.color),
                (r = ""),
                (i = gT(i)) && (r += "." + i),
                (i = e.backgroundColor),
                i == "" && t && (i = t.backgroundColor),
                (t = gT(i)) && (r += ".bg_" + t),
                r && n.push(["c", r]),
                n.reduceRight(function (o, u) {
                  var l = x(u);
                  return (
                    (u = l.next().value),
                    (l = l.next().value),
                    "<" + u + (l === void 0 ? "" : l) + ">" + o + "</" + u + ">"
                  );
                }, e.payload)
              );
            }
            function gT(e) {
              e = e.toLowerCase();
              var t = e.replace(/\s/g, "").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);
              switch (
                (t
                  ? (e =
                      "#" +
                      (parseInt(t[1], 10) | 256).toString(16).slice(1) +
                      (parseInt(t[2], 10) | 256).toString(16).slice(1) +
                      (parseInt(t[3], 10) | 256).toString(16).slice(1))
                  : e.startsWith("#") && e.length > 7 && (e = e.slice(0, 7)),
                e)
              ) {
                case "white":
                case "#fff":
                case "#ffffff":
                  return "white";
                case "lime":
                case "#0f0":
                case "#00ff00":
                  return "lime";
                case "cyan":
                case "#0ff":
                case "#00ffff":
                  return "cyan";
                case "red":
                case "#f00":
                case "#ff0000":
                  return "red";
                case "yellow":
                case "#ff0":
                case "#ffff00":
                  return "yellow";
                case "magenta":
                case "#f0f":
                case "#ff00ff":
                  return "magenta";
                case "blue":
                case "#00f":
                case "#0000ff":
                  return "blue";
                case "black":
                case "#000":
                case "#000000":
                  return "black";
              }
              return null;
            }
            function qp(e, t) {
              var n = [];
              e = x(mT(e));
              for (var r = e.next(); !r.done; r = e.next())
                if (((r = r.value), r.isContainer)) n.push.apply(n, Y(qp(r.nestedCues, r)));
                else {
                  var i = r.clone();
                  ((i.nestedCues = []), (i.payload = pT(r, t)), n.push(i));
                }
              return n;
            }
            function mT(e) {
              var t = [];
              e = x(e);
              for (var n = e.next(), r = {}; !n.done; r = { mg: void 0 }, n = e.next())
                ((r.mg = n.value),
                  t.some(
                    (function (i) {
                      return function (s) {
                        return nc(i.mg, s);
                      };
                    })(r),
                  ) || t.push(r.mg));
              return t;
            }
            function WR(e) {
              function t(r) {
                for (var i = 5381, s = r.length; s; ) i = (i * 33) ^ r.charCodeAt(--s);
                return (i >>> 0).toString();
              }
              if (e.startTime >= e.endTime) return null;
              var n = new VTTCue(e.startTime, e.endTime, e.payload);
              ((n.id = t(e.startTime.toString()) + t(e.endTime.toString()) + t(e.payload)),
                (n.lineAlign = e.lineAlign),
                (n.positionAlign = e.positionAlign),
                e.size && (n.size = e.size));
              try {
                n.align = e.textAlign;
              } catch (r) {}
              return (
                e.textAlign == "center" && n.align != "center" && (n.align = "middle"),
                e.writingMode == "vertical-lr"
                  ? (n.vertical = "lr")
                  : e.writingMode == "vertical-rl" && (n.vertical = "rl"),
                e.lineInterpretation == 1 && (n.snapToLines = !1),
                e.line != null && (n.line = e.line),
                e.position != null && (n.position = e.position),
                n
              );
            }
            function yT(e, t) {
              var n = qp(t),
                r = [];
              ((t = e.cues ? Array.from(e.cues) : []), (n = x(n)));
              for (var i = n.next(), s = {}; !i.done; s = { vd: void 0 }, i = n.next())
                ((s.vd = i.value),
                  !t.some(
                    (function (o) {
                      return function (u) {
                        return (
                          u.startTime == o.vd.startTime && u.endTime == o.vd.endTime && u.text == o.vd.payload
                        );
                      };
                    })(s),
                  ) &&
                    s.vd.payload &&
                    (i = WR(s.vd)) &&
                    r.push(i));
              for (
                t = r.slice().sort(function (o, u) {
                  return o.startTime != u.startTime
                    ? o.startTime - u.startTime
                    : o.endTime != u.endTime
                      ? o.endTime - u.startTime
                      : ("line" in VTTCue.prototype)
                        ? r.indexOf(u) - r.indexOf(o)
                        : r.indexOf(o) - r.indexOf(u);
                }),
                  t = x(t),
                  n = t.next();
                !n.done;
                n = t.next()
              )
                e.addCue(n.value);
            }
            function Jp(e, t) {
              var n = !1;
              e.mode === "disabled" && ((n = !0), (e.mode = "hidden"));
              for (var r = 0; r < e.cues.length; ) {
                var i = e.cues[r];
                t(i) ? e.removeCue(i) : r++;
              }
              n && (e.mode = "disabled");
            }
            function Wt(e) {
              var t = this;
              ((this.i = e),
                (this.l = new et()),
                (this.j = null),
                (this.h = new Map()),
                (this.g = -1),
                (this.u = !1),
                (this.o = null),
                (this.C = function () {
                  (t.l.Ma(t.i, "textchanged", t.m), t.l.Ma(t.j.textTracks, "change", t.B));
                  for (var n = x(t.h.values()), r = n.next(); !r.done; r = n.next()) r.value.remove();
                  (t.h.clear(), (t.g = -1), (t.j = null));
                }),
                (this.m = function () {
                  var n = new Map(),
                    r = t.i.Lc();
                  r = x(r);
                  for (var i = r.next(); !i.done; i = r.next()) {
                    if (((i = i.value), t.h.has(i.id))) {
                      var s = t.h.get(i.id);
                      (i.active || s.track.mode === "disabled" || (s.track.mode = "disabled"),
                        t.h.delete(i.id));
                    } else {
                      ((s = t.j.ownerDocument.createElement("track")), (s.kind = KR(i)));
                      var o = s,
                        u = void 0;
                      if (i.label) u = i.label;
                      else if (i.language)
                        if (i.language in us) u = us[i.language];
                        else {
                          var l = uc(i.language);
                          l in us && (u = us[l] + " (" + i.language + ")");
                        }
                      (u ||
                        ((u = i.originalTextId),
                        i.language && i.language !== i.originalTextId && (u += " (" + i.language + ")")),
                        (o.label = u),
                        i.language in us && (s.srclang = i.language),
                        (s.src = "data:,WEBVTT"),
                        (s.track.mode = "disabled"),
                        t.j.appendChild(s));
                    }
                    (n.set(i.id, s), i.active && (t.g = i.id));
                  }
                  for (r = x(t.h.values()), i = r.next(); !i.done; i = r.next()) i.value.remove();
                  (t.g > -1 &&
                    (n.has(t.g)
                      ? ((r = n.get(t.g).track),
                        r.mode === "disabled" && (r.mode = t.u ? "showing" : "hidden"))
                      : (t.g = -1)),
                    (t.h = n));
                }),
                (this.B = function () {
                  if (!t.o) {
                    var n = t.j;
                    t.o = new Ve(function () {
                      if (((t.o = null), t.j === n)) {
                        var r = -1,
                          i = !1;
                        if (t.h.has(t.g)) {
                          var s = t.h.get(t.g);
                          s.track.mode === "showing"
                            ? ((r = t.g), (i = !0))
                            : s.track.mode === "hidden" && (r = t.g);
                        }
                        if (!i)
                          for (i = x(t.h), s = i.next(); !s.done; s = i.next()) {
                            var o = x(s.value);
                            if (((s = o.next().value), (o = o.next().value), o.track.mode === "showing")) {
                              r = s;
                              break;
                            } else r < 0 && o.track.mode === "hidden" && (r = s);
                          }
                        for (i = x(t.h), s = i.next(); !s.done; s = i.next())
                          ((o = x(s.value)),
                            (s = o.next().value),
                            (o = o.next().value),
                            s !== r && o.track.mode !== "disabled" && (o.track.mode = "disabled"));
                        (t.g !== r && ((t.g = r), r > -1 && t.i.ph({ id: r })),
                          t.i.wh(r > -1 && t.h.get(r).track.mode === "showing"));
                      }
                    }).ka(0);
                  }
                }),
                this.l.D(e, "loaded", function () {
                  return t.enableTextDisplayer();
                }),
                this.enableTextDisplayer());
            }
            ((h = Wt.prototype),
              (h.configure = function () {}),
              (h.remove = function (e, t) {
                if (this.i)
                  this.h.has(this.g) &&
                    Jp(this.h.get(this.g).track, function (n) {
                      return n.startTime < t && n.endTime > e;
                    });
                else return !1;
                return !0;
              }),
              (h.append = function (e) {
                this.h.has(this.g) && yT(this.h.get(this.g).track, e);
              }),
              (h.destroy = function () {
                return (
                  this.i && (this.j && this.C(), (this.i = null)),
                  this.l && (this.l.release(), (this.l = null)),
                  Promise.resolve()
                );
              }),
              (h.isTextVisible = function () {
                return this.u;
              }),
              (h.setTextVisibility = function (e) {
                if (((this.u = e), this.h.has(this.g))) {
                  var t = this.h.get(this.g).track;
                  t.mode !== "disabled" && ((e = e ? "showing" : "hidden"), t.mode !== e && (t.mode = e));
                } else if (this.i && this.i.$d() === 3)
                  if (
                    ((t = Array.from(this.i.bf().textTracks).filter(function (r) {
                      return ["captions", "subtitles", "forced"].includes(r.kind);
                    })),
                    e)
                  ) {
                    ((e = null), (t = x(t)));
                    for (var n = t.next(); !n.done; n = t.next())
                      if (((n = n.value), n.mode === "showing")) {
                        e = null;
                        break;
                      } else e || n.mode !== "hidden" || (e = n);
                    e && (e.mode = "showing");
                  } else
                    for (e = x(t), t = e.next(); !t.done; t = e.next())
                      ((t = t.value), t.mode === "showing" && (t.mode = "hidden"));
              }),
              (h.setTextLanguage = function () {}),
              (h.enableTextDisplayer = function () {
                !this.j &&
                  this.i &&
                  this.i.$d() === 2 &&
                  ((this.j = this.i.bf()),
                  this.l.Aa(this.i, "unloading", this.C),
                  this.l.D(this.i, "textchanged", this.m),
                  this.l.D(this.j.textTracks, "change", this.B),
                  this.m());
              }));
            function KR(e) {
              var t = Be();
              return e.forced && t.Ha() === "WEBKIT"
                ? "forced"
                : e.kind === "caption" ||
                    (e.roles &&
                      e.roles.some(function (n) {
                        return n.includes("transcribes-spoken-dialog");
                      }) &&
                      e.roles.some(function (n) {
                        return n.includes("describes-music-and-sound");
                      }))
                  ? "captions"
                  : "subtitles";
            }
            (fe("shaka.text.NativeTextDisplayer", Wt),
              (Wt.prototype.enableTextDisplayer = Wt.prototype.enableTextDisplayer),
              (Wt.prototype.setTextLanguage = Wt.prototype.setTextLanguage),
              (Wt.prototype.setTextVisibility = Wt.prototype.setTextVisibility),
              (Wt.prototype.isTextVisible = Wt.prototype.isTextVisible),
              (Wt.prototype.destroy = Wt.prototype.destroy),
              (Wt.prototype.append = Wt.prototype.append),
              (Wt.prototype.remove = Wt.prototype.remove),
              (Wt.prototype.configure = Wt.prototype.configure));
            function hn(e, t) {
              for (
                qe("SimpleTextDisplayer", "Please migrate to NativeTextDisplayer"),
                  this.h = e,
                  this.i = t,
                  this.g = null,
                  e = x(Array.from(this.h.textTracks)),
                  t = e.next();
                !t.done;
                t = e.next()
              )
                ((t = t.value),
                  t.kind !== "metadata" &&
                    t.kind !== "chapters" &&
                    ((t.mode = "disabled"), t.label == this.i && (this.g = t)));
              this.g && (this.g.mode = "hidden");
            }
            ((h = hn.prototype),
              (h.configure = function () {}),
              (h.remove = function (e, t) {
                return this.g
                  ? (Jp(this.g, function (n) {
                      return n.startTime < t && n.endTime > e;
                    }),
                    !0)
                  : !1;
              }),
              (h.append = function (e) {
                this.g && yT(this.g, e);
              }),
              (h.destroy = function () {
                return (
                  this.g &&
                    (Jp(this.g, function () {
                      return !0;
                    }),
                    (this.g.mode = "disabled")),
                  (this.g = this.h = null),
                  Promise.resolve()
                );
              }),
              (h.isTextVisible = function () {
                return this.g ? this.g.mode == "showing" : !1;
              }),
              (h.setTextVisibility = function (e) {
                (e && !this.g && vT(this), this.g && (this.g.mode = e ? "showing" : "hidden"));
              }),
              (h.setTextLanguage = function () {}),
              (h.enableTextDisplayer = function () {
                vT(this);
              }));
            function vT(e) {
              e.h && !e.g && ((e.g = e.h.addTextTrack("subtitles", e.i)), (e.g.mode = "hidden"));
            }
            (fe("shaka.text.SimpleTextDisplayer", hn),
              (hn.prototype.enableTextDisplayer = hn.prototype.enableTextDisplayer),
              (hn.prototype.setTextLanguage = hn.prototype.setTextLanguage),
              (hn.prototype.setTextVisibility = hn.prototype.setTextVisibility),
              (hn.prototype.isTextVisible = hn.prototype.isTextVisible),
              (hn.prototype.destroy = hn.prototype.destroy),
              (hn.prototype.append = hn.prototype.append),
              (hn.prototype.remove = hn.prototype.remove),
              (hn.prototype.configure = hn.prototype.configure));
            function pn() {}
            ((h = pn.prototype),
              (h.configure = function () {}),
              (h.remove = function () {}),
              (h.append = function () {}),
              (h.destroy = function () {}),
              (h.isTextVisible = function () {
                return !1;
              }),
              (h.setTextVisibility = function () {}),
              (h.setTextLanguage = function () {}),
              (h.enableTextDisplayer = function () {}),
              fe("shaka.text.StubTextDisplayer", pn),
              (pn.prototype.enableTextDisplayer = pn.prototype.enableTextDisplayer),
              (pn.prototype.setTextLanguage = pn.prototype.setTextLanguage),
              (pn.prototype.setTextVisibility = pn.prototype.setTextVisibility),
              (pn.prototype.isTextVisible = pn.prototype.isTextVisible),
              (pn.prototype.destroy = pn.prototype.destroy),
              (pn.prototype.append = pn.prototype.append),
              (pn.prototype.remove = pn.prototype.remove),
              (pn.prototype.configure = pn.prototype.configure));
            function gn(e, t) {
              var n = this;
              ((this.m = !1),
                (this.h = []),
                (this.j = e),
                (this.o = t),
                (this.C = this.u = null),
                (this.g = document.createElement("div")),
                this.g.classList.add("shaka-text-container"),
                (this.g.style.textAlign = "center"),
                (this.g.style.display = "flex"),
                (this.g.style.flexDirection = "column"),
                (this.g.style.alignItems = "center"),
                (this.g.style.justifyContent = "flex-end"),
                (this.B = new Ve(function () {
                  n.j.paused || ls(n);
                })),
                Mu(this),
                (this.l = new Map()),
                (this.i = new et()),
                this.i.D(document, "fullscreenchange", function () {
                  ls(n, !0);
                }),
                this.i.D(this.j, "seeking", function () {
                  ls(n, !0);
                }),
                this.i.D(this.j, "ratechange", function () {
                  Mu(n);
                }),
                this.i.D(this.j, "resize", function () {
                  var r = n.j,
                    i = r.videoWidth;
                  ((r = r.videoHeight), i && r ? (n.u = i / r) : (n.u = null));
                }),
                (this.F = null),
                "ResizeObserver" in g &&
                  ((this.F = new ResizeObserver(function () {
                    ls(n, !0);
                  })),
                  this.F.observe(this.g)),
                (this.G = new Map()));
            }
            ((h = gn.prototype),
              (h.configure = function (e) {
                ((this.C = e), Mu(this), ls(this, !0));
              }),
              (h.append = function (e) {
                var t = [].concat(Y(this.h));
                e = x(mT(e));
                for (var n = e.next(), r = {}; !n.done; r = { ng: void 0 }, n = e.next())
                  ((r.ng = n.value),
                    t.some(
                      (function (i) {
                        return function (s) {
                          return nc(s, i.ng);
                        };
                      })(r),
                    ) || this.h.push(r.ng));
                (this.h.length && Mu(this), ls(this));
              }),
              (h.destroy = function () {
                return (
                  this.g &&
                    (this.g.parentElement && this.o.removeChild(this.g),
                    (this.g = null),
                    (this.m = !1),
                    (this.h = []),
                    this.B && (this.B.stop(), (this.B = null)),
                    this.l.clear(),
                    this.i && (this.i.release(), (this.i = null)),
                    this.F && (this.F.disconnect(), (this.F = null))),
                  Promise.resolve()
                );
              }),
              (h.remove = function (e, t) {
                if (!this.g) return !1;
                var n = this.h.length;
                return (
                  (this.h = this.h.filter(function (r) {
                    return r.startTime < e || r.endTime >= t;
                  })),
                  ls(this, n > this.h.length),
                  this.h.length || Mu(this),
                  !0
                );
              }),
              (h.isTextVisible = function () {
                return this.m;
              }),
              (h.setTextVisibility = function (e) {
                (this.m = e)
                  ? (this.g.parentElement || this.o.appendChild(this.g), ls(this, !0))
                  : this.g.parentElement && this.o.removeChild(this.g);
              }),
              (h.setTextLanguage = function (e) {
                e && e != "und" ? this.g.setAttribute("lang", e) : this.g.setAttribute("lang", "");
              }),
              (h.enableTextDisplayer = function () {}));
            function Mu(e) {
              e.B &&
                (e.h.length
                  ? e.B.Ea((e.C ? e.C.captionsUpdatePeriod : 0.25) / Math.max(1, Math.abs(e.j.playbackRate)))
                  : e.B.stop());
            }
            function $R(e, t) {
              for (; t != null; ) {
                if (t == e.g) return !0;
                t = t.parentElement;
              }
              return !1;
            }
            function xT(e, t, n, r, i) {
              var s = !1,
                o = [],
                u = [];
              t = x(t);
              for (var l = t.next(); !l.done; l = t.next()) {
                ((l = l.value), i.push(l));
                var p = e.l.get(l),
                  m = l.startTime <= r && l.endTime > r,
                  y = p ? p.nj : null;
                (p && (o.push(p.og), p.$c && o.push(p.$c), m || ((s = !0), e.l.delete(l), (p = null))),
                  m &&
                    (u.push(l),
                    p ? $R(e, y) || (s = !0) : (YR(e, l, i), (p = e.l.get(l)), (y = p.nj), (s = !0))),
                  l.nestedCues.length > 0 && y && xT(e, l.nestedCues, y, r, i),
                  i.pop());
              }
              if (s) {
                for (r = x(o), i = r.next(); !i.done; i = r.next())
                  ((i = i.value), i.parentElement && i.parentElement.removeChild(i));
                for (
                  u.sort(function (v, w) {
                    return v.startTime != w.startTime ? v.startTime - w.startTime : v.endTime - w.endTime;
                  }),
                    u = x(u),
                    r = u.next();
                  !r.done;
                  r = u.next()
                )
                  ((r = e.l.get(r.value)),
                    r.$c
                      ? (r.$c.contains(n) && r.$c.removeChild(n), n.appendChild(r.$c), r.$c.appendChild(r.og))
                      : n.appendChild(r.og));
              }
            }
            function ls(e, t) {
              if (e.g) {
                var n = e.j.currentTime;
                if (!e.m || (t !== void 0 && t)) {
                  t = x(e.G.values());
                  for (var r = t.next(); !r.done; r = t.next()) fu(r.value);
                  (fu(e.g), e.l.clear(), e.G.clear());
                }
                e.m && xT(e, e.h, e.g, n, []);
              }
            }
            function YR(e, t, n) {
              var r = n.length > 1,
                i = r ? "span" : "div";
              (t.lineBreak && (i = "br"), t.rubyTag && (i = t.rubyTag), (r = !r && t.nestedCues.length > 0));
              var s = document.createElement(i);
              if ((i != "br" && JR(e, s, t, n, r), (n = null), t.region && t.region.id)) {
                var o = t.region,
                  u = e.u === 4 / 3 ? 2.5 : 1.9;
                if (
                  ((n =
                    o.id +
                    "_" +
                    o.width +
                    "x" +
                    o.height +
                    (o.heightUnits == Jn ? "%" : "px") +
                    "-" +
                    o.viewportAnchorX +
                    "x" +
                    o.viewportAnchorY +
                    (o.viewportAnchorUnits == Jn ? "%" : "px")),
                  e.G.has(n))
                )
                  n = e.G.get(n);
                else {
                  i = document.createElement("span");
                  var l = o.heightUnits == Jn ? "%" : "px",
                    p = o.widthUnits == Jn ? "%" : "px",
                    m = o.viewportAnchorUnits == Jn ? "%" : "px";
                  ((i.id = "shaka-text-region---" + n),
                    i.classList.add("shaka-text-region"),
                    (i.style.position = "absolute"));
                  var y = o.height,
                    v = o.width;
                  (o.heightUnits === 2 && ((y = o.height * 5.33), (l = "%")),
                    o.widthUnits === 2 && ((v = o.width * u), (p = "%")),
                    (i.style.height = y + l),
                    (i.style.width = v + p),
                    o.viewportAnchorUnits === 2
                      ? ((u = (o.viewportAnchorY / 75) * 100),
                        (l = (o.viewportAnchorX / (e.u === 4 / 3 ? 160 : 210)) * 100),
                        (u -= (o.regionAnchorY * y) / 100),
                        (l -= (o.regionAnchorX * v) / 100),
                        (i.style.top = u + "%"),
                        (i.style.left = l + "%"))
                      : ((i.style.top = o.viewportAnchorY - (o.regionAnchorY * y) / 100 + m),
                        (i.style.left = o.viewportAnchorX - (o.regionAnchorX * v) / 100 + m)),
                    o.heightUnits !== 0 &&
                      o.widthUnits !== 0 &&
                      o.viewportAnchorUnits !== 0 &&
                      ((o = Math.max(
                        0,
                        Math.min(
                          100 - (parseInt(i.style.width.slice(0, -1), 10) || 0),
                          parseInt(i.style.left.slice(0, -1), 10) || 0,
                        ),
                      )),
                      (i.style.top =
                        Math.max(
                          0,
                          Math.min(
                            100 - (parseInt(i.style.height.slice(0, -1), 10) || 0),
                            parseInt(i.style.top.slice(0, -1), 10) || 0,
                          ),
                        ) + "%"),
                      (i.style.left = o + "%")),
                    (i.style.display = "flex"),
                    (i.style.flexDirection = "column"),
                    (i.style.alignItems = "center"),
                    (i.style.justifyContent =
                      t.displayAlign == "before"
                        ? "flex-start"
                        : t.displayAlign == "center"
                          ? "center"
                          : "flex-end"),
                    e.G.set(n, i),
                    (n = i));
                }
              }
              ((i = s),
                r &&
                  ((i = document.createElement("span")),
                  i.classList.add("shaka-text-wrapper"),
                  (i.style.backgroundColor = t.backgroundColor),
                  (i.style.lineHeight = "normal"),
                  s.appendChild(i)),
                e.l.set(t, { og: s, nj: i, $c: n }));
            }
            function qR(e) {
              var t = e.direction,
                n = e.positionAlign;
              return (
                (e = e.textAlign),
                n !== ic
                  ? n
                  : e === "left" || (e === "start" && t === $a) || (e === "end" && t === "rtl")
                    ? "line-left"
                    : e === "right" || (e === "start" && t === "rtl") || (e === "end" && t === $a)
                      ? "line-right"
                      : "center"
              );
            }
            function JR(e, t, n, r, i) {
              var s = t.style,
                o = n.nestedCues.length == 0,
                u = r.length > 1;
              s.whiteSpace = "pre-wrap";
              var l = n.payload.replace(/\s+$/g, function (m) {
                return "".repeat(m.length);
              });
              if (
                ((s.webkitTextStrokeColor = n.textStrokeColor),
                (s.webkitTextStrokeWidth = n.textStrokeWidth),
                (s.color = n.color),
                (s.direction = n.direction),
                (s.opacity = n.opacity),
                (s.paddingLeft = Qp(n.linePadding, n, e.o)),
                (s.paddingRight = Qp(n.linePadding, n, e.o)),
                (s.textCombineUpright = n.textCombineUpright),
                (s.textShadow = n.textShadow),
                n.backgroundImage)
              )
                ((s.backgroundImage = "url('" + n.backgroundImage + "')"),
                  (s.backgroundRepeat = "no-repeat"),
                  (s.backgroundSize = "contain"),
                  (s.backgroundPosition = "center"),
                  n.backgroundColor && (s.backgroundColor = n.backgroundColor),
                  (s.width = "100%"),
                  (s.height = "100%"));
              else {
                if (n.nestedCues.length) var p = t;
                else ((p = document.createElement("span")), t.appendChild(p));
                (n.border && (p.style.border = n.border),
                  i ||
                    ((t = QR(r, function (m) {
                      return m.backgroundColor;
                    }))
                      ? (p.style.backgroundColor = t)
                      : l && (p.style.backgroundColor = "rgba(0, 0, 0, 0.8)")),
                  l && (p.setAttribute("translate", "no"), (p.textContent = l)));
              }
              (u && !r[r.length - 1].isContainer
                ? (s.display = "inline")
                : ((s.display = "flex"),
                  (s.flexDirection = "column"),
                  (s.alignItems = "center"),
                  n.textAlign == "left" || n.textAlign == "start"
                    ? ((s.width = "100%"), (s.alignItems = "start"))
                    : (n.textAlign == "right" || n.textAlign == "end") &&
                      ((s.width = "100%"), (s.alignItems = "end")),
                  (s.justifyContent =
                    n.displayAlign == "before"
                      ? "flex-start"
                      : n.displayAlign == "center"
                        ? "center"
                        : "flex-end")),
                o || (s.margin = "0"),
                (s.fontFamily = n.fontFamily),
                (s.fontWeight = n.fontWeight.toString()),
                (s.fontStyle = n.fontStyle),
                (s.letterSpacing = n.letterSpacing),
                (r = e.C ? e.C.fontScaleFactor : 1),
                (r !== 1 || n.fontSize) && (s.fontSize = Qp(n.fontSize || "1em", n, e.o, r)),
                (r = n.line),
                r != null &&
                  ((o = n.lineInterpretation),
                  o == Ya &&
                    ((o = 1),
                    (u = 16),
                    e.u && e.u < 1 && (u = 32),
                    (r = r < 0 ? 100 + (r / u) * 100 : (r / u) * 100)),
                  o == 1 &&
                    ((s.position = "absolute"),
                    n.writingMode == Ls
                      ? ((s.width = "100%"),
                        n.lineAlign == bs
                          ? (s.top = r + "%")
                          : n.lineAlign == "end" && (s.bottom = 100 - r + "%"))
                      : n.writingMode == "vertical-lr"
                        ? ((s.height = "100%"),
                          n.lineAlign == bs
                            ? (s.left = r + "%")
                            : n.lineAlign == "end" && (s.right = 100 - r + "%"))
                        : ((s.height = "100%"),
                          n.lineAlign == bs
                            ? (s.right = r + "%")
                            : n.lineAlign == "end" && (s.left = 100 - r + "%")))),
                (s.lineHeight = n.lineHeight),
                (e = qR(n)),
                e == "line-left"
                  ? ((s.cssFloat = "left"),
                    n.position !== null &&
                      ((s.position = "absolute"),
                      n.writingMode == Ls
                        ? ((s.left = n.position + "%"), (s.width = "auto"))
                        : (s.top = n.position + "%")))
                  : e == "line-right"
                    ? ((s.cssFloat = "right"),
                      n.position !== null &&
                        ((s.position = "absolute"),
                        n.writingMode == Ls
                          ? ((s.right = 100 - n.position + "%"), (s.width = "auto"))
                          : (s.bottom = n.position + "%")))
                    : n.position !== null &&
                      n.position != 50 &&
                      ((s.position = "absolute"),
                      n.writingMode == Ls
                        ? ((s.left = n.position + "%"), (s.width = "auto"))
                        : (s.top = n.position + "%"),
                      n.size && (s.transform = "translateX(-50%)")),
                (s.textAlign = n.textAlign),
                (s.textDecoration = n.textDecoration.join(" ")),
                (s.writingMode = n.writingMode),
                ("writingMode" in document.documentElement.style && s.writingMode == n.writingMode) ||
                  (s.webkitWritingMode = n.writingMode),
                n.size && (n.writingMode == Ls ? (s.width = n.size + "%") : (s.height = n.size + "%")));
            }
            function Qp(e, t, n, r) {
              r = r === void 0 ? 1 : r;
              var i = (i = new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))
                ? { value: Number(i[1]), unit: i[2] }
                : null;
              if (!i) return e;
              switch (((e = i.unit), (r *= i.value), e)) {
                case "%":
                  return ((r / 100) * n.clientHeight) / t.cellResolution.rows + "px";
                case "c":
                  return (n.clientHeight * r) / t.cellResolution.rows + "px";
                default:
                  return r + e;
              }
            }
            function QR(e, t) {
              for (var n = e.length - 1; n >= 0; n--) {
                var r = t(e[n]);
                if (r || r === 0) return r;
              }
              return null;
            }
            (fe("shaka.text.UITextDisplayer", gn),
              (gn.prototype.enableTextDisplayer = gn.prototype.enableTextDisplayer),
              (gn.prototype.setTextLanguage = gn.prototype.setTextLanguage),
              (gn.prototype.setTextVisibility = gn.prototype.setTextVisibility),
              (gn.prototype.isTextVisible = gn.prototype.isTextVisible),
              (gn.prototype.remove = gn.prototype.remove),
              (gn.prototype.destroy = gn.prototype.destroy),
              (gn.prototype.append = gn.prototype.append),
              (gn.prototype.configure = gn.prototype.configure));
            function ZR(e, t) {
              function n(s) {
                for (var o = s, u = x(t), l = u.next(); !l.done; l = u.next())
                  ((l = l.value), l.end && l.start < s && (o += l.end - l.start));
                return (
                  (s = Math.floor(o / 3600)),
                  (u = Math.floor((o / 60) % 60)),
                  (l = Math.floor(o % 60)),
                  (o = Math.floor((o * 1e3) % 1e3)),
                  (s < 10 ? "0" : "") +
                    s +
                    ":" +
                    (u < 10 ? "0" : "") +
                    u +
                    ":" +
                    (l < 10 ? "0" : "") +
                    l +
                    "." +
                    (o < 100 ? (o < 10 ? "00" : "0") : "") +
                    o
                );
              }
              var r = qp(e);
              ((e = "WEBVTT\n\n"), (r = x(r)));
              for (var i = r.next(); !i.done; i = r.next())
                ((i = i.value),
                  (e +=
                    n(i.startTime) +
                    " --> " +
                    n(i.endTime) +
                    (function (s) {
                      var o = [];
                      switch (s.textAlign) {
                        case "left":
                          o.push("align:left");
                          break;
                        case "right":
                          o.push("align:right");
                          break;
                        case ii:
                          o.push("align:middle");
                          break;
                        case "start":
                          o.push("align:start");
                          break;
                        case "end":
                          o.push("align:end");
                      }
                      switch (s.writingMode) {
                        case "vertical-lr":
                          o.push("vertical:lr");
                          break;
                        case "vertical-rl":
                          o.push("vertical:rl");
                      }
                      return o.length ? " " + o.join(" ") : "";
                    })(i) +
                    "\n"),
                  (e += i.payload + "\n\n"));
              return e;
            }
            fe("shaka.text.WebVttGenerator", function () {});
            function Zp(e, t) {
              ((this.g = t),
                (this.j = e),
                (this.m = new Map()),
                (this.l = void 0),
                (this.F = !1),
                (this.J = !0),
                (this.u = this.I = !1),
                (this.C = this.B = void 0),
                (this.H = 0),
                (this.K = { request: !1, response: !1, event: !1 }),
                (this.o = {}),
                (this.i = new et()),
                (this.G = []),
                (this.h = null));
            }
            ((Zp.prototype.setMediaElement = function (e) {
              ((this.h = e), ik(this));
            }),
              (Zp.prototype.configure = function (e) {
                ((this.g = e), sk(this));
              }));
            function ek(e) {
              (e.m.clear(),
                (e.F = !1),
                (e.J = !0),
                (e.I = !1),
                (e.u = !1),
                (e.B = 0),
                (e.C = 0),
                (e.H = 0),
                (e.K = { request: !1, response: !1, event: !1 }),
                TT(e),
                (e.o = {}),
                (e.h = null),
                e.i.Qa());
            }
            function tk(e, t) {
              ((e.u = t),
                e.u
                  ? e.l == sd
                    ? (e.l = od)
                    : e.l == ad && (e.l = ud)
                  : e.l == od
                    ? (e.l = sd)
                    : e.l == ud && (e.l = ad));
            }
            function nk(e, t) {
              if (e.g && e.g.enabled && (mn(e, "ps", { dd: "d" }), e.h && e.h.autoplay)) {
                var n = e.h.play();
                n &&
                  n
                    .then(function () {
                      e.H = t;
                    })
                    .catch(function () {
                      e.H = 0;
                    });
              }
            }
            function rk(e, t, n) {
              try {
                if (!e.g.enabled) return t;
                var r = tg(e);
                e: {
                  switch (n.toLowerCase()) {
                    case "audio/mp4":
                    case "audio/webm":
                    case "audio/ogg":
                    case "audio/mpeg":
                    case "audio/aac":
                    case "audio/flac":
                    case "audio/wav":
                      var i = td;
                      break e;
                    case "video/webm":
                    case "video/mp4":
                    case "video/mpeg":
                    case "video/mp2t":
                      i = rd;
                      break e;
                    case "application/x-mpegurl":
                    case "application/vnd.apple.mpegurl":
                    case "application/dash+xml":
                    case "video/vnd.mpeg.dash.mpd":
                    case "application/vnd.ms-sstr+xml":
                      i = MT;
                      break e;
                  }
                  i = void 0;
                }
                ((r.ot = i), (r.su = !0));
                var s = Ru(r);
                return ed(t, s);
              } catch (o) {
                return (ur("CMCD_SRC_ERROR", "Could not generate src CMCD data.", o), t);
              }
            }
            function ik(e) {
              (e.i.D(e.h, "playing", function () {
                (e.C || (e.C = Date.now()), mn(e, "ps", { dd: "p" }));
              }),
                e.i.D(e.h, "volumechange", function () {
                  mn(e, e.h.muted ? "m" : "um");
                }),
                e.i.D(e.h, "play", function () {
                  e.B || ((e.B = Date.now()), mn(e, "ps", { dd: "s" }));
                }),
                e.i.D(e.h, "pause", function () {
                  mn(e, "ps", { dd: "a" });
                }),
                e.i.D(e.j, "buffering", function () {
                  mn(e, "ps", { dd: "w" });
                }),
                e.i.D(e.h, "seeking", function () {
                  return mn(e, "ps", { dd: "k" });
                }),
                e.i.D(document, "fullscreenchange", function () {
                  mn(e, document.fullscreenElement ? "pe" : "pc");
                }));
              var t = e.h;
              ((t.webkitPresentationMode || t.webkitSupportsFullscreen) &&
                e.i.D(t, "webkitpresentationmodechanged", function () {
                  t.webkitPresentationMode
                    ? mn(e, t.webkitPresentationMode !== "inline" ? "pe" : "pc")
                    : t.webkitSupportsFullscreen && mn(e, t.webkitDisplayingFullscreen ? "pe" : "pc");
                }),
                e.i.D(e.h, "enterpictureinpicture", function () {
                  mn(e, "pe");
                }),
                e.i.D(e.h, "leavepictureinpicture", function () {
                  mn(e, "pc");
                }),
                "documentPictureInPicture" in g &&
                  e.i.D(g.documentPictureInPicture, "enter", function (n) {
                    (mn(e, "pe"),
                      e.i.Aa(n.window, "pagehide", function () {
                        mn(e, "pc");
                      }));
                  }),
                e.i.D(document, "visibilitychange", function () {
                  document.hidden ? mn(e, "b", { bg: !0 }) : mn(e, "b");
                }),
                e.i.D(e.j, "complete", function () {
                  mn(e, "ps", { dd: "e" });
                }));
            }
            function sk(e) {
              TT(e);
              var t = ST(e);
              t = x(t);
              for (var n = t.next(); !n.done; n = t.next())
                if (((n = n.value.timeInterval), n === void 0 && (n = vk), n >= 1)) {
                  var r = new Ve(function () {
                    return mn(e, xk);
                  });
                  (r.Ea(n), e.G.push(r));
                }
            }
            function TT(e) {
              if (e.G) for (var t = x(e.G), n = t.next(); !n.done; n = t.next()) n.value.stop();
              e.G = [];
            }
            function ST(e) {
              return (e = e.g.targets)
                ? e.filter(function (t) {
                    return t.mode === DT && t.enabled;
                  })
                : [];
            }
            function eg(e) {
              return (e = e.g.targets)
                ? e.filter(function (t) {
                    return t.mode === PT && t.enabled === !0;
                  })
                : [];
            }
            function tg(e) {
              return (
                e.g.sessionId || (e.g.sessionId = g.crypto.randomUUID()),
                {
                  v: e.g.version,
                  sf: e.l,
                  sid: e.g.sessionId,
                  cid: e.g.contentId,
                  mtp: e.j.getBandwidthEstimate() / 1e3,
                }
              );
            }
            function mn(e, t, n) {
              if (
                ((n = n === void 0 ? {} : n),
                (t = Object.assign({ e: t, ts: Date.now() }, n)),
                (t = ig(e, t, DT)),
                (n = e.g.targets),
                !(e.g.version < og) && n)
              ) {
                var r = ST(e);
                ((n = Array.from(new Set([].concat(Y(ag), Y(gk))))), (r = x(r)));
                for (var i = r.next(); !i.done; i = r.next()) {
                  i = i.value;
                  var s = ng(i.includeKeys || [], n);
                  (s.includes(kT) || s.push(kT), (s = rg(t, s)));
                  var o = i.events || [],
                    u = s.e,
                    l = s.sta;
                  (u &&
                    (!mk.includes(u) ||
                      !(u !== "ps" || (l && yk.includes(l))) ||
                      (o && o.length > 0 && !o.includes(u)))) ||
                    wT(e, s, i);
                }
              }
            }
            function zo(e, t, n) {
              if (e.g.enabled) {
                n = ig(e, n, _T);
                var r = AT({ mode: _T, useHeaders: e.g.useHeaders, includeKeys: e.g.includeKeys || [] });
                (e.o[r] || (e.o[r] = { request: 1, response: 1 }),
                  (n.sn = e.o[r].request++),
                  (r = e.g.includeKeys || []));
                var i = e.g.version == og ? Array.from(new Set([].concat(Y(ag), Y(hk)))) : RT;
                ((r = ng(r, i)), (n = rg(n, r)), ok(e, n, t, e.g.useHeaders));
              }
            }
            function wT(e, t, n, r) {
              var i = Br(),
                s = n.url;
              if (n.useHeaders) {
                if (((t = CT(t)), !Object.keys(t).length)) return;
                (r && Object.assign(r.headers, t), (r = Ut([s], i)), Object.assign(r.headers, t));
              } else {
                if (((t = Ru(t)), !t)) return;
                ((s = ed(s, t)), r && (r.uri = s), (r = Ut([s], i)));
              }
              e.j.Yb().request(9, r);
            }
            function ok(e, t, n, r) {
              if (r) {
                if (((t = CT(t)), !Object.keys(t).length)) return;
                Object.assign(n.headers, t);
              } else {
                var i = Ru(t);
                if (!i) return;
                n.uris = n.uris.map(function (s) {
                  return ed(s, i);
                });
              }
              eg(e).length > 0 || !e.m.has(n) || e.m.delete(n);
            }
            function ng(e, t) {
              if (!e || e.length === 0) return t;
              for (var n = x(e), r = n.next(); !r.done; r = n.next()) t.includes(r.value);
              return (e = e.filter(function (i) {
                return t.includes(i);
              }));
            }
            function rg(e, t) {
              return Object.keys(e).reduce(function (n, r) {
                return (t.includes(r) && (n[r] = e[r]), n);
              }, {});
            }
            function ak(e) {
              if (e.type === 0) return ck;
              if ((e = e.stream)) {
                var t = e.type;
                if (t == "video") return e.codecs && e.codecs.includes(",") ? rd : nd;
                if (t == "audio") return td;
                if (t == "text") return e.mimeType === "application/mp4" ? id : sg;
              }
            }
            function AT(e) {
              var t = Object.keys(e)
                .sort()
                .reduce(function (n, r) {
                  return (r !== "enabled" && (n[r] = e[r]), n);
                }, {});
              return JSON.stringify(t);
            }
            function uk(e, t) {
              if (((t = e.j.Gc()[t]), !t.length)) return NaN;
              var n = e.h ? e.h.currentTime : 0;
              return (e = t.find(function (r) {
                return r.start <= n && r.end >= n;
              }))
                ? (e.end - n) * 1e3
                : NaN;
            }
            function ET(e, t) {
              if (((t = e.j.Gc()[t]), !t.length)) return 0;
              var n = e.h ? e.h.currentTime : 0;
              return (e = t.find(function (r) {
                return r.start <= n && r.end >= n;
              }))
                ? (e.end - n) * 1e3
                : 0;
            }
            function lk(e, t) {
              var n = e.j.qc();
              if (!n.length) return NaN;
              ((e = n[0]), (n = x(n)));
              for (var r = n.next(); !r.done; r = n.next())
                ((r = r.value), r.type === "variant" && r.bandwidth > e.bandwidth && (e = r));
              switch (t) {
                case nd:
                  return e.videoBandwidth || NaN;
                case td:
                  return e.audioBandwidth || NaN;
                default:
                  return e.bandwidth;
              }
            }
            function IT(e, t, n) {
              var r = t.segment,
                i = 0;
              (r && (i = r.endTime - r.startTime),
                (i = { d: i * 1e3, st: e.j.W() ? fk : dk }),
                (i.ot = ak(t)));
              var s = i.ot === nd || i.ot === td || i.ot === rd || i.ot === id;
              if ((t = t.stream)) {
                var o = e.j.Ob();
                if (s && ((i.bl = uk(e, t.type)), i.ot !== id)) {
                  var u = ET(e, t.type);
                  i.dl = o ? u / Math.abs(o) : u;
                }
                if ((t.bandwidth && (i.br = t.bandwidth / 1e3), t.segmentIndex && r)) {
                  if ((o = t.segmentIndex.Xb(r.endTime, !0, o < 0)) && (o = o.next().value) && o != r) {
                    if (n && !$i(r.P(), o.P())) {
                      var l = o.P()[0];
                      u = new URL(l);
                      var p = new URL(n);
                      if (u.origin !== p.origin) n = l;
                      else {
                        ((n = u.pathname.split("/").slice(1)),
                          (l = p.pathname.split("/").slice(1, -1)),
                          (p = Math.min(n.length, l.length)));
                        for (var m = 0; m < p && n[m] === l[m]; m++) (n.shift(), l.shift());
                        for (; l.length; ) (l.shift(), n.unshift(".."));
                        n = n.join("/") + u.search + u.hash;
                      }
                      i.nor = n;
                    }
                    (!o.startByte && !o.endByte) ||
                      (r.startByte == o.startByte && r.endByte == o.endByte) ||
                      ((n = o.startByte + "-"), o.endByte && (n += o.endByte), (i.nrr = n));
                  }
                  ((o = e.j.Ob() || 1),
                    (n = ET(e, t.type) || 500),
                    (r = (t = t.bandwidth)
                      ? ((t * (r.endTime - r.startTime)) / 1e3 / (n / o / 1e3)) * e.g.rtpSafetyFactor
                      : NaN),
                    isNaN(r) || (i.rtp = r));
                }
              }
              return (s && i.ot !== id && (i.tb = lk(e, i.ot) / 1e3), i);
            }
            function ig(e, t, n) {
              (Object.assign(t, tg(e)), (t.pr = e.j.Ob()));
              var r = t.ot === nd || t.ot === rd;
              return (
                e.I && r && ((t.bs = !0), (t.su = !0), (e.I = !1)),
                t.su == null && (t.su = e.J),
                e.j.W() && ((r = e1(e.j)), (t.ltc = r || void 0)),
                document.hidden && (t.bg = !0),
                (r = e.C && e.B ? e.C - (e.H || e.B) : void 0),
                r == null || e.K[n] || ((t.msd = r), (e.K[n] = !0)),
                t
              );
            }
            function Ru(e) {
              function t(y) {
                return n(y / 100) * 100;
              }
              function n(y) {
                return Math.round(y);
              }
              function r(y) {
                return !Number.isNaN(y) && y != null && y !== "" && y !== !1;
              }
              var i = [],
                s = {
                  br: n,
                  d: n,
                  bl: t,
                  dl: t,
                  mtp: t,
                  nor: function (y) {
                    return encodeURIComponent(y);
                  },
                  rtp: t,
                  tb: n,
                  ttfb: n,
                  ttlb: n,
                },
                o = Object.keys(e || {}).sort();
              o = x(o);
              for (var u = o.next(); !u.done; u = o.next()) {
                u = u.value;
                var l = e[u];
                if (r(l) && (u !== "v" || l !== 1) && (u != "pr" || l !== 1)) {
                  var p = s[u];
                  (p && (l = p(l)), (p = typeof l));
                  var m = void 0;
                  ((m =
                    p === "string" && u !== "ot" && u !== "sf" && u !== "st"
                      ? u + "=" + JSON.stringify(l)
                      : p === "boolean"
                        ? u
                        : p === "symbol"
                          ? u + "=" + l.description
                          : u + "=" + l),
                    i.push(m));
                }
              }
              return i.join(",");
            }
            function CT(e) {
              var t = Object.keys(e),
                n = {},
                r = ["Object", "Request", "Session", "Status"],
                i = [{}, {}, {}, {}],
                s = {
                  br: 0,
                  d: 0,
                  ot: 0,
                  tb: 0,
                  url: 0,
                  bl: 1,
                  dl: 1,
                  mtp: 1,
                  nor: 1,
                  nrr: 1,
                  su: 1,
                  ltc: 1,
                  ttfb: 1,
                  ttlb: 1,
                  ts: 1,
                  rc: 1,
                  cmsdd: 1,
                  cmsds: 1,
                  sn: 1,
                  cid: 2,
                  pr: 2,
                  sf: 2,
                  sid: 2,
                  st: 2,
                  v: 2,
                  msd: 2,
                  bs: 3,
                  rtp: 3,
                  bg: 3,
                };
              t = x(t);
              for (var o = t.next(); !o.done; o = t.next())
                ((o = o.value), (i[s[o] != null ? s[o] : 1][o] = e[o]));
              for (e = 0; e < i.length; e++) (s = Ru(i[e])) && (n["CMCD-" + r[e]] = s);
              return n;
            }
            function ed(e, t) {
              return !t || e.includes("offline:") ? e : ((e = new Pt(e)), e.g.set("CMCD", t), e.toString());
            }
            var MT = "m",
              td = "a",
              nd = "v",
              rd = "av",
              ck = "i",
              sg = "c",
              id = "tt",
              og = 2,
              dk = "v",
              fk = "l",
              sd = "d",
              od = "ld",
              ad = "h",
              ud = "lh";
            fe("shaka.util.CmcdManager.StreamingFormat", {
              DASH: sd,
              Sl: od,
              HLS: ad,
              Tl: ud,
              im: "s",
              OTHER: "o",
            });
            var RT = "br bl bs cid d dl mtp nor nrr ot pr rtp sf sid st su tb v".split(" "),
              ag =
                "br ab bl tbl bs cdn cid ltc mtp pr sf sid bg sta st ts tpb tb lb tab lab pt ec msd v sn".split(
                  " ",
                ),
              hk =
                "ab bl tbl bs cdn cid d dl ltc mtp nor ot pr rtp sf sid bg sta st su ts tpb tb lb tab lab pt ec msd v".split(
                  " ",
                ),
              pk = "d dl nor ot rtp rc su ttfb ttfbb ttlb url cmsdd cmsds".split(" "),
              gk = ["e", "sta"],
              mk = "ps e t c b m um pe pc".split(" "),
              yk = "spawkrfeqd".split(""),
              vk = 10,
              kT = "ts",
              xk = "t",
              _T = "request",
              PT = "response",
              DT = "event";
            function Cr(e) {
              ((this.h = e), (this.g = null));
            }
            ((h = Cr.prototype),
              (h.configure = function (e) {
                this.h = e;
              }),
              (h.ji = function () {
                return this.h.enabled && this.h.applyMaximumSuggestedBitrate && this.g && this.g.has(NT)
                  ? this.g.get(NT) * 1e3
                  : null;
              }),
              (h.gi = function () {
                return this.h.enabled && this.g && this.g.has(bT) ? this.g.get(bT) * 1e3 : null;
              }),
              (h.Xj = function () {
                return this.h.enabled && this.g && this.g.has(OT) ? this.g.get(OT) : null;
              }),
              (h.Yj = function () {
                return this.h.enabled && this.g && this.g.has(UT) ? this.g.get(UT) : null;
              }),
              (h.getBandwidthEstimate = function (e) {
                var t = this.gi();
                if (!t) return e;
                var n = this.h.estimatedThroughputWeightRatio;
                return n > 0 && n <= 1 ? e * (1 - n) + t * n : e;
              }));
            function LT(e) {
              return e
                ? e.toLowerCase() === "false"
                  ? !1
                  : /^[-0-9]/.test(e)
                    ? parseInt(e, 10)
                    : e.replace(/["]+/g, "")
                : !0;
            }
            (fe("shaka.util.CmsdManager", Cr),
              (Cr.prototype.getBandwidthEstimate = Cr.prototype.getBandwidthEstimate),
              (Cr.prototype.getRoundTripTime = Cr.prototype.Yj),
              (Cr.prototype.getResponseDelay = Cr.prototype.Xj),
              (Cr.prototype.getEstimatedThroughput = Cr.prototype.gi),
              (Cr.prototype.getMaxBitrate = Cr.prototype.ji));
            var bT = "etp",
              NT = "mb",
              OT = "rd",
              UT = "rtt";
            function jT() {
              ((this.g = null), (this.h = []));
            }
            function ug(e, t) {
              return j(function (n) {
                if (n.g == 1)
                  return e.g
                    ? I(
                        n,
                        new Promise(function (r) {
                          return e.h.push(r);
                        }),
                        2,
                      )
                    : n.A(2);
                ((e.g = t), re(n));
              });
            }
            jT.prototype.release = function () {
              this.h.length > 0 ? this.h.shift()() : (this.g = null);
            };
            function BT(e, t, n) {
              return (
                (n = n === void 0 ? Number.EPSILON : n),
                e === t
                  ? !0
                  : ((e = Math.abs(e - t)),
                    e <= n ? !0 : n !== Number.EPSILON ? Math.abs(e - n) <= Number.EPSILON : !1)
              );
            }
            function te(e, t, n) {
              ((t = t === void 0 ? null : t), ot.call(this));
              var r = this;
              ((this.m = gd),
                (this.h = null),
                (this.Be = t),
                (this.$ = !1),
                (this.Le = new et()),
                (this.Ce = new et()),
                (this.j = new et()),
                (this.dc = new et()),
                (this.Gd = new et()),
                (this.G = this.H = this.F = this.N = null),
                (this.Me = 0),
                (this.ba = new jT()),
                (this.O =
                  this.Fa =
                  this.X =
                  this.i =
                  this.zc =
                  this.I =
                  this.l =
                  this.ye =
                  this.T =
                  this.Ph =
                  this.va =
                  this.K =
                  this.kb =
                  this.za =
                  this.Ae =
                  this.R =
                  this.Ta =
                  this.M =
                  this.ac =
                    null),
                (this.Ua = !1),
                (this.Ge = this.o = null),
                (this.Fe = 1e9),
                (this.Ke = []),
                (this.yc = new Map()),
                (this.ob = []),
                (this.ag = -1),
                (this.g = Qr(this)),
                (this.dg = sT()),
                (this.V = null),
                (this.Ne = -1),
                (this.cc = null),
                (this.ya = { width: 1 / 0, height: 1 / 0 }),
                (this.Ee = new ip(this.g, this.ya, null)),
                (this.Ie = []),
                (this.B = null),
                (this.J = this.g.adaptationSetCriteriaFactory()),
                this.J.configure({
                  language: this.g.preferredAudioLanguage,
                  role: this.g.preferredAudioRole,
                  videoRole: this.g.preferredVideoRole,
                  channelCount: 0,
                  hdrLevel: this.g.preferredVideoHdrLevel,
                  spatialAudio: this.g.preferSpatialAudio,
                  videoLayout: this.g.preferredVideoLayout,
                  audioLabel: this.g.preferredAudioLabel,
                  videoLabel: this.g.preferredVideoLabel,
                  codecSwitchingStrategy: this.g.mediaSource.codecSwitchingStrategy,
                  audioCodec: "",
                  activeAudioCodec: "",
                  activeAudioChannelCount: 0,
                  preferredAudioCodecs: this.g.preferredAudioCodecs,
                  preferredAudioChannelCount: this.g.preferredAudioChannelCount,
                }),
                (this.Kd = this.g.preferredTextLanguage),
                (this.Od = this.g.preferredTextRole),
                (this.Nd = this.g.preferForcedSubs),
                (this.De = []),
                n && n(this),
                (this.K = new Zp(this, this.g.cmcd)),
                (this.va = new Cr(this.g.cmsd)),
                (this.N = WT(this)),
                (this.ma = this.oa = this.Da = this.C = null),
                (this.fg = !1),
                (this.cg = []),
                (this.eg = new Ve(function () {
                  return j(function (i) {
                    if (i.g == 1) return r.oa ? I(i, r.Vb(r.ma, !0), 3) : i.A(0);
                    if (i.g != 4) return I(i, r.load(r.oa), 4);
                    (r.fg ? r.ma.pause() : r.ma.play(), (r.oa = null), (r.fg = !1), re(i));
                  });
                })),
                md &&
                  ((this.C = md()),
                  this.C.configure(this.g.ads),
                  this.Gd.D(this.C, "ad-content-pause-requested", function (i) {
                    var s, o;
                    return j(function (u) {
                      if (u.g == 1)
                        return (
                          r.eg.stop(),
                          r.oa
                            ? u.A(0)
                            : ((r.ma = r.h),
                              (r.fg = r.ge()),
                              (s = i.saveLivePosition || !1),
                              (o = !0),
                              r.W() && (o = s),
                              I(u, r.$h(!0, o), 3))
                        );
                      ((r.oa = u.h), re(u));
                    });
                  }),
                  this.Gd.D(this.C, "ad-content-resume-requested", function (i) {
                    if (((i = i.offset || 0), r.oa)) {
                      var s = r.oa;
                      s.o &&
                        i &&
                        (typeof s.o == "number" ? (s.o += i) : s.o.setTime(s.o.getTime() + i * 1e3));
                    }
                    r.eg.ka(0.1);
                  }),
                  this.Gd.D(this.C, "ad-content-attach-requested", function () {
                    return j(function (i) {
                      if (i.g == 1) return r.h || !r.ma ? i.A(0) : I(i, r.Vb(r.ma, !0), 3);
                      ((r.ma = null), re(i));
                    });
                  })),
                yd && ((this.Da = yd(this)), this.Da.configure(this.g.queue)),
                this.Le.D(g, "online", function () {
                  (gg(r), r.kh());
                }),
                (this.He = new Ve(function () {
                  for (
                    var i = Date.now() / 1e3, s = !1, o = !0, u = x(r.i.variants), l = u.next();
                    !l.done;
                    l = u.next()
                  )
                    ((l = l.value),
                      l.disabledUntilTime > 0 &&
                        l.disabledUntilTime <= i &&
                        ((l.disabledUntilTime = 0), (s = !0)),
                      l.disabledUntilTime > 0 && (o = !1));
                  (o && r.He.stop(), s && ds(r, !1, void 0, !1, !1));
                })),
                (this.eb = null),
                e &&
                  (qe(
                    "Player w/ mediaElement",
                    "Please migrate from initializing Player with a mediaElement; use the attach method instead.",
                  ),
                  this.Vb(e, !0)),
                (this.u = null));
            }
            J(te, ot);
            function ld(e) {
              e.T != null && (Nv(e.T), e.T.release(), (e.T = null));
            }
            function Tk(e, t, n) {
              n || t.lcevc.enabled
                ? (ld(e), e.T == null && ((e.T = new Va(e.h, e.Ph, t.lcevc, n)), e.H && (e.H.C = e.T)))
                : ld(e);
            }
            function ct(e, t) {
              return new we(e, t);
            }
            ((h = te.prototype),
              (h.destroy = function () {
                var e = this,
                  t;
                return j(function (n) {
                  switch (n.g) {
                    case 1:
                      return e.m == Fr ? n.return() : (ld(e), (t = e.detach()), (e.m = Fr), I(n, t, 2));
                    case 2:
                      return I(n, e.rg(), 3);
                    case 3:
                      if (
                        (e.Le && (e.Le.release(), (e.Le = null)),
                        e.Ce && (e.Ce.release(), (e.Ce = null)),
                        e.j && (e.j.release(), (e.j = null)),
                        e.dc && (e.dc.release(), (e.dc = null)),
                        e.Gd && (e.Gd.release(), (e.Gd = null)),
                        (e.Ge = null),
                        (e.g = null),
                        (e.B = null),
                        (e.Be = null),
                        (e.K = null),
                        (e.va = null),
                        !e.N)
                      ) {
                        n.A(4);
                        break;
                      }
                      return I(n, e.N.destroy(), 5);
                    case 5:
                      e.N = null;
                    case 4:
                      (e.o && (e.o.release(), (e.o = null)),
                        e.Da && (e.Da.destroy(), (e.Da = null)),
                        ot.prototype.release.call(e),
                        re(n));
                  }
                });
              }));
            function FT(e, t) {
              g1.set(e, t);
            }
            function Xo(e, t) {
              e.dispatchEvent(ct("onstatechange", new Map().set("state", t)));
            }
            ((h.Vb = function (e, t) {
              t = t === void 0 ? !0 : t;
              var n = this,
                r,
                i,
                s;
              return j(function (o) {
                switch (o.g) {
                  case 1:
                    if (n.m == Fr) throw new H(2, 7, 7e3);
                    if (((r = n.h && n.h == e), !n.h || n.h == e)) {
                      o.A(2);
                      break;
                    }
                    return I(o, n.detach(), 2);
                  case 2:
                    return I(o, lg(n, "attach"), 4);
                  case 4:
                    if (o.h) return o.return();
                    if (
                      (ee(o, 5, 6),
                      r ||
                        (Xo(n, "attach"),
                        (i = function () {
                          var u = mg(n, !1);
                          u && Wo(n, u);
                        }),
                        n.Ce.D(e, "error", i),
                        (n.h = e),
                        n.K && n.K.setMediaElement(e)),
                      Be(),
                      !t || !oi() || n.H)
                    ) {
                      o.A(6);
                      break;
                    }
                    return I(o, cg(n), 6);
                  case 6:
                    (ye(o), n.ba.release(), Ne(o, 0));
                    break;
                  case 5:
                    return ((s = se(o)), I(o, n.detach(), 10));
                  case 10:
                    throw s;
                }
              });
            }),
              (h.qj = function (e) {
                this.Ph = e;
              }),
              (h.detach = function (e) {
                e = e === void 0 ? !1 : e;
                var t = this;
                return j(function (n) {
                  if (n.g == 1) {
                    if (t.m == Fr) throw new H(2, 7, 7e3);
                    return I(n, t.Cc(!1, e), 2);
                  }
                  if (n.g != 3) return I(n, lg(t, "detach"), 3);
                  if (n.h) return n.return();
                  try {
                    (t.h && (t.Ce.Qa(), (t.h = null)), Xo(t, "detach"), t.C && !e && t.C.release());
                  } finally {
                    t.ba.release();
                  }
                  re(n);
                });
              }));
            function lg(e, t) {
              var n;
              return j(function (r) {
                return r.g == 1
                  ? ((n = ++e.Me), I(r, ug(e.ba, t), 2))
                  : n != e.Me
                    ? (e.ba.release(), r.return(!0))
                    : r.return(!1);
              });
            }
            ((h.Cc = function (e, t) {
              ((e = e === void 0 ? !0 : e), (t = t === void 0 ? !1 : t));
              var n = this,
                r,
                i,
                s,
                o,
                u,
                l,
                p,
                m,
                y,
                v,
                w,
                A,
                E,
                C,
                k,
                R;
              return j(function (L) {
                switch (L.g) {
                  case 1:
                    return (n.m != Fr && (n.m = gd), I(L, lg(n, "unload"), 2));
                  case 2:
                    return L.h
                      ? L.return()
                      : (ge(L, 3),
                        (n.Ua = !1),
                        Xo(n, "unload"),
                        ld(n),
                        (r = n.De.map(function (U) {
                          return U();
                        })),
                        (n.De = []),
                        I(L, Promise.all(r), 5));
                  case 5:
                    if (
                      (n.dispatchEvent(ct("unloading")),
                      n.Ae && (n.Ae.release(), (n.Ae = null)),
                      n.za && (n.za.release(), (n.za = null)),
                      n.kb && (n.kb.release(), (n.kb = null)),
                      n.h && (n.j.Qa(), n.dc.Qa()),
                      n.He.stop(),
                      n.ac && (n.ac.release(), (n.ac = null)),
                      n.Ta && (n.Ta.stop(), (n.Ta = null)),
                      !n.I)
                    ) {
                      L.A(6);
                      break;
                    }
                    return I(L, n.I.stop(), 7);
                  case 7:
                    ((n.I = null), (n.zc = null));
                  case 6:
                    if ((n.o && n.o.stop(), !n.l)) {
                      L.A(8);
                      break;
                    }
                    return I(L, n.l.destroy(), 9);
                  case 9:
                    n.l = null;
                  case 8:
                    if (
                      (n.M && (n.M.release(), (n.M = null)),
                      n.G && (n.G.release(), (n.G = null)),
                      g.shakaMediaKeysPolyfill !== "webkit" || !n.F)
                    ) {
                      L.A(10);
                      break;
                    }
                    return I(L, n.F.destroy(), 11);
                  case 11:
                    n.F = null;
                  case 10:
                    if (!n.H) {
                      L.A(12);
                      break;
                    }
                    return I(L, n.H.destroy(), 13);
                  case 13:
                    n.H = null;
                  case 12:
                    if (
                      (n.C && !t && n.C.onAssetUnload(),
                      n.oa && !t && (n.oa.destroy(), (n.oa = null)),
                      t || n.eg.stop(),
                      n.K && ek(n.K),
                      n.va && (n.va.g = null),
                      !n.u)
                    ) {
                      L.A(14);
                      break;
                    }
                    return I(L, n.u.destroy(), 15);
                  case 15:
                    n.u = null;
                  case 14:
                    if (((n.$ = !1), n.h)) {
                      for (i = x(n.cg), s = i.next(); !s.done; s = i.next())
                        ((o = s.value), o.src.startsWith("blob:") && URL.revokeObjectURL(o.src), o.remove());
                      ((n.cg = []), kc(n.h) && n.h.load());
                    }
                    if (!n.F) {
                      L.A(16);
                      break;
                    }
                    return I(L, n.F.destroy(), 17);
                  case 17:
                    n.F = null;
                  case 16:
                    if (
                      (n.eb && n.X != n.eb.rd() && (n.eb.l || n.eb.destroy(), (n.eb = null)),
                      (n.X = null),
                      (n.Fa = null),
                      (n.R = null),
                      n.i)
                    ) {
                      for (u = x(n.i.variants), l = u.next(); !l.done; l = u.next())
                        for (p = l.value, m = x([p.audio, p.video]), y = m.next(); !y.done; y = m.next())
                          (v = y.value) && v.segmentIndex && v.segmentIndex.release();
                      for (w = x(n.i.textStreams), A = w.next(); !A.done; A = w.next())
                        ((E = A.value), E.segmentIndex && E.segmentIndex.release());
                    }
                    for (
                      n.g && n.g.streaming.clearDecodingCache && (pc.clear(), fo.clear()),
                        n.i = null,
                        n.B = new Zc(),
                        n.Oh = null,
                        n.cc = null,
                        n.V = null,
                        n.Ne = -1,
                        n.Ke = [],
                        C = x(n.yc.values()),
                        k = C.next();
                      !k.done;
                      k = C.next()
                    )
                      ((R = k.value), R.stop());
                    (n.yc.clear(), (n.ob = []), (n.ag = -1), n.N && n.N.Wh(), ku(n));
                  case 3:
                    (ye(L), n.ba.release(), Ne(L, 4));
                    break;
                  case 4:
                    if ((Be(), e && oi() && !n.H && n.h)) return I(L, cg(n), 0);
                    L.A(0);
                }
              });
            }),
              (h.ql = function (e) {
                this.O = e;
              }),
              (h.load = function (e, t, n) {
                t = t === void 0 ? null : t;
                var r = this,
                  i,
                  s,
                  o,
                  u,
                  l,
                  p,
                  m,
                  y,
                  v,
                  w,
                  A,
                  E,
                  C,
                  k;
                return j(function (R) {
                  switch (R.g) {
                    case 1:
                      if (r.m == Fr) throw new H(2, 7, 7e3);
                      if (r.h || !r.ma) {
                        R.A(2);
                        break;
                      }
                      return I(R, r.Vb(r.ma, !0), 3);
                    case 3:
                      r.ma = null;
                    case 2:
                      if (((i = null), (s = ""), e instanceof Ir)) {
                        if (e.l) throw new H(2, 7, 7006);
                        ((i = e), (s = i.rd() || ""));
                      } else s = e || "";
                      return I(R, ug(r.ba, "load"), 4);
                    case 4:
                      if ((r.ba.release(), !r.h)) throw new H(2, 7, 7002);
                      if (!r.X) {
                        R.A(5);
                        break;
                      }
                      return ((r.X = s), I(R, r.Cc(!1), 5));
                    case 5:
                      if (
                        ((o = ++r.Me),
                        (u = function () {
                          return j(function (L) {
                            if (L.g == 1) return r.Me == o ? L.A(0) : i ? I(L, i.destroy(), 3) : L.A(3);
                            throw new H(2, 7, 7e3);
                          });
                        }),
                        (l = function (L, U) {
                          return j(function (G) {
                            switch (G.g) {
                              case 1:
                                return (ge(G, 2), I(G, ug(r.ba, U), 4));
                              case 4:
                                return I(G, u(), 5);
                              case 5:
                                return I(G, L(), 6);
                              case 6:
                                return I(G, u(), 7);
                              case 7:
                                i && r.g && (i.g = r.g);
                              case 2:
                                (ye(G), r.ba.release(), Ne(G, 0));
                            }
                          });
                        }),
                        ee(R, 7, 8),
                        t == null && i && (t = i.getStartTime()),
                        (r.O = t),
                        (r.Ua = !1),
                        r.dispatchEvent(ct("loading")),
                        i)
                      ) {
                        ((n = i.V), R.A(10));
                        break;
                      }
                      if (n) {
                        R.A(10);
                        break;
                      }
                      return I(
                        R,
                        l(function () {
                          return j(function (L) {
                            if (L.g == 1) return I(L, zT(r, s), 2);
                            ((n = L.h), re(L));
                          });
                        }, "guessMimeType_"),
                        10,
                      );
                    case 10:
                      if (((p = !!i), i)) {
                        (uT(i, r), (r.B = i.getStats()), R.A(13));
                        break;
                      }
                      return I(R, HT(r, s, t, n, !0, r.g), 14);
                    case 14:
                      (i = R.h)
                        ? ((i.F = !1), uT(i, r), (r.B = i.getStats()), i.start(), i.B.catch(function () {}))
                        : (r.B = new Zc());
                    case 13:
                      return (
                        (m = !i),
                        (y = Date.now() / 1e3),
                        (r.B = i ? i.getStats() : new Zc()),
                        (r.X = s),
                        (r.Fa = n || null),
                        ku(r),
                        (v = function () {
                          var L = r.h ? r.h.buffered : null;
                          return { start: ax(L) || 0, end: Rc(L) || 0 };
                        }),
                        (r.za = new mu(v)),
                        r.za.addEventListener("regionadd", function (L) {
                          dg(r, L.region, "metadataadded");
                        }),
                        m
                          ? I(
                              R,
                              l(function () {
                                return j(function (L) {
                                  return I(L, Ek(r, n), 0);
                                });
                              }, "initializeSrcEqualsDrmInner_"),
                              25,
                            )
                          : ((r.kb = new mu(v)),
                            I(
                              R,
                              l(function () {
                                return j(function (L) {
                                  if (L.g == 1) return I(L, Promise.race([i.ma, i.B]), 2);
                                  r.zc = i.H;
                                  var U = i;
                                  ((U.oa = !0), (r.I = U.m), (r.i = i.Lg()), re(L));
                                });
                              }, "waitForFinish"),
                              17,
                            ))
                      );
                    case 17:
                      if (r.H) {
                        R.A(18);
                        break;
                      }
                      return I(
                        R,
                        l(function () {
                          return j(function (L) {
                            return I(L, cg(r), 0);
                          });
                        }, "initializeMediaSourceEngineInner_"),
                        18,
                      );
                    case 18:
                      return (
                        r.i &&
                          r.i.textStreams.length &&
                          (r.u.enableTextDisplayer
                            ? r.u.enableTextDisplayer()
                            : qe(
                                "Text displayer w/ enableTextDisplayer",
                                'Text displayer should have a "enableTextDisplayer" method!',
                              )),
                        I(
                          R,
                          l(function () {
                            return j(function (L) {
                              return I(L, i.B, 0);
                            });
                          }, "waitForFinish"),
                          20,
                        )
                      );
                    case 20:
                      if (
                        ((r.g = i.getConfiguration()),
                        (r.Ee = i.G),
                        r.I && r.I.setMediaElement && r.h && r.I.setMediaElement(r.h),
                        (r.Ae = jR(i)),
                        (r.ye = i.Fa),
                        (w = i.C) && (r.J = w),
                        p &&
                          r.h &&
                          r.h.nodeName === "AUDIO" &&
                          (Sk(r), r.configure("manifest.disableVideo", !0)),
                        i.j)
                      ) {
                        R.A(21);
                        break;
                      }
                      return I(
                        R,
                        l(function () {
                          return j(function (L) {
                            return I(L, lT(i, r.h), 0);
                          });
                        }, "drmEngine_.init"),
                        21,
                      );
                    case 21:
                      return (
                        (r.F = BR(i)),
                        I(
                          R,
                          l(function () {
                            return j(function (L) {
                              return I(L, r.F.Vb(r.h), 0);
                            });
                          }, "drmEngine_.attach"),
                          23,
                        )
                      );
                    case 23:
                      return (
                        (A = r.g.abrFactory),
                        (r.o && r.Ge == A) ||
                          ((r.Ge = A),
                          r.o && r.o.release(),
                          (r.o = A()),
                          typeof r.o.setMediaElement != "function" &&
                            (qe(
                              "AbrManager w/o setMediaElement",
                              "Please use an AbrManager with setMediaElement function.",
                            ),
                            (r.o.setMediaElement = function () {})),
                          typeof r.o.setCmsdManager != "function" &&
                            (qe(
                              "AbrManager w/o setCmsdManager",
                              "Please use an AbrManager with setCmsdManager function.",
                            ),
                            (r.o.setCmsdManager = function () {})),
                          typeof r.o.trySuggestStreams != "function" &&
                            (qe(
                              "AbrManager w/o trySuggestStreams",
                              "Please use an AbrManager with trySuggestStreams function.",
                            ),
                            (r.o.trySuggestStreams = function () {})),
                          r.o.configure(r.g.abr)),
                        (E = FR(i)),
                        (C = i.i),
                        I(
                          R,
                          l(function () {
                            return j(function (L) {
                              return I(L, Ak(r, y, C, E), 0);
                            });
                          }, "loadInner_"),
                          24,
                        )
                      );
                    case 24:
                      (UR(i), r.Fa && Be().gj() && oc(r.Fa) && RM(r.H, r.X, r.Fa), R.A(16));
                      break;
                    case 25:
                      return I(
                        R,
                        l(function () {
                          return j(function (L) {
                            return I(L, Ik(r, y, n), 0);
                          });
                        }, "srcEqualsInner_"),
                        16,
                      );
                    case 16:
                      r.dispatchEvent(ct("loaded"));
                    case 8:
                      if ((ye(R), !i)) {
                        R.A(27);
                        break;
                      }
                      return I(R, i.destroy(), 27);
                    case 27:
                      ((r.eb = null), Ne(R, 0));
                      break;
                    case 7:
                      if (((k = se(R)), !k || k.code == 7e3)) {
                        R.A(29);
                        break;
                      }
                      return I(R, r.Cc(!1), 29);
                    case 29:
                      throw k;
                  }
                });
              }));
            function Sk(e) {
              for (var t = x(e.i.variants), n = t.next(); !n.done; n = t.next())
                ((n = n.value),
                  n.video && (n.video.closeSegmentIndex(), (n.video = null)),
                  (n.bandwidth = n.audio && n.audio.bandwidth ? n.audio.bandwidth : 0));
              e.i.variants = e.i.variants.filter(function (r) {
                return r.audio;
              });
            }
            ((h.jj = function (e, t, n) {
              ((e = e === void 0 ? !0 : e), (t = t === void 0 ? !1 : t), (n = n === void 0 ? !1 : n));
              var r = this,
                i;
              return j(function (s) {
                return s.g == 1
                  ? I(s, VT(r, n), 2)
                  : s.g != 3
                    ? ((i = s.h), I(s, r.Cc(e, t), 3))
                    : s.return(i);
              });
            }),
              (h.$h = function (e, t) {
                ((e = e === void 0 ? !1 : e), (t = t === void 0 ? !1 : t));
                var n = this,
                  r;
                return j(function (i) {
                  return i.g == 1
                    ? I(i, VT(n, t), 2)
                    : i.g != 3
                      ? ((r = i.h), I(i, n.detach(e), 3))
                      : i.return(r);
                });
              }));
            function VT(e, t) {
              t = t === void 0 ? !1 : t;
              var n, r, i;
              return j(function (s) {
                if (s.g == 1)
                  return (
                    (n = null),
                    e.i && e.I && e.zc && e.X && e.g
                      ? ((r = e.h.currentTime), t || (r = null), I(s, GT(e, e.X, r, e.Fa, e.g, !0, !1), 3))
                      : s.A(2)
                  );
                if (s.g != 2) {
                  ((n = s.h),
                    e.Ie.push(n),
                    e.I && e.I.setMediaElement && e.I.setMediaElement(null),
                    (i = e.l ? e.l.o : null) && (n.i = i));
                  var o = n,
                    u = e.I,
                    l = e.zc;
                  ((o.h = e.i),
                    (o.m = u),
                    (o.H = l),
                    (n.C = e.J),
                    n.start(),
                    (e.i = null),
                    (e.I = null),
                    (e.zc = null),
                    (e.o = null),
                    (e.Ge = null));
                }
                return s.return(n);
              });
            }
            ((h.preload = function (e, t, n, r) {
              t = t === void 0 ? null : t;
              var i = this,
                s,
                o;
              return j(function (u) {
                return u.g == 1
                  ? ((s = Qr(i)), ki(s, r || i.g, Qr(i)), I(u, HT(i, e, t, n, !1, s), 2))
                  : ((o = u.h) ? o.start() : Wo(i, new H(2, 7, 7005)), u.return(o));
              });
            }),
              (h.rg = function () {
                var e = this,
                  t,
                  n,
                  r,
                  i;
                return j(function (s) {
                  for (t = [], n = x(e.Ie), r = n.next(); !r.done; r = n.next())
                    ((i = r.value), i.l || t.push(i.destroy()));
                  return ((e.Ie = []), I(s, Promise.all(t), 0));
                });
              }));
            function HT(e, t, n, r, i, s) {
              i = i === void 0 ? !1 : i;
              var o, u, l;
              return j(function (p) {
                return p.g == 1
                  ? r
                    ? p.A(2)
                    : I(p, zT(e, t), 3)
                  : (p.g != 2 && (r = p.h),
                    wk(e, r)
                      ? p.return(null)
                      : ((o = s || e.g),
                        (u = !1),
                        i && e.h && e.h.nodeName === "AUDIO" && (u = !0),
                        (l = GT(e, t, n, r || null, o, !i, u)),
                        (l = i
                          ? l.then(function (m) {
                              return ((m.F = !1), m);
                            })
                          : l.then(function (m) {
                              return (e.Ie.push(m), m);
                            })),
                        p.return(l)));
              });
            }
            function GT(e, t, n, r, i, s, o) {
              ((s = s === void 0 ? !0 : s), (o = o === void 0 ? !1 : o));
              var u, l, p, m, y, v, w, A, E, C, k, R, L, U, G;
              return j(function (b) {
                return b.g == 1
                  ? ((u = null),
                    (l = Ur(i)),
                    o && (l.manifest.disableVideo = !0),
                    (p = function () {
                      return u.R && u.l ? null : u;
                    }),
                    (m = function () {
                      return p() ? p().getConfiguration() : e.g;
                    }),
                    e.ya.width != 1 / 0 || e.ya.height != 1 / 0 || e.g.ignoreHardwareResolution
                      ? b.A(2)
                      : ((y = Be()), I(b, y.lc(), 3)))
                  : (b.g != 2 && ((v = b.h), (e.ya.width = v.width), (e.ya.height = v.height)),
                    (w = new ip(l, e.ya, null)),
                    (A = {
                      networkingEngine: e.N,
                      filter: function (B) {
                        var N, z;
                        return j(function (V) {
                          if (V.g == 1) return I(V, X0(w, B), 2);
                          if (V.g != 4)
                            return (
                              (N = V.h),
                              N ? ((z = ct("trackschanged")), I(V, Promise.resolve(), 4)) : V.A(0)
                            );
                          (u.dispatchEvent(z), re(V));
                        });
                      },
                      makeTextStreamsForClosedCaptions: function (B) {
                        return jk(e, B);
                      },
                      onTimelineRegionAdded: function (B) {
                        Rp(u.I, B);
                      },
                      onEvent: function (B) {
                        return u.dispatchEvent(B);
                      },
                      onError: function (B) {
                        return u.onError(B);
                      },
                      isLowLatencyMode: function () {
                        return m().streaming.lowLatencyMode;
                      },
                      updateDuration: function () {
                        e.l && u.R && e.l.updateDuration();
                      },
                      newDrmInfo: function (B) {
                        var N = u.j,
                          z = N ? N.g : null;
                        z && N.B && $0(w, z.keySystem, B);
                      },
                      onManifestUpdated: function () {
                        var B = new Map().set("isLive", e.W());
                        (u.dispatchEvent(ct("manifestupdated", B)),
                          Eu(u, !1, function () {
                            e.C && e.C.onManifestUpdated(e.W());
                          }));
                      },
                      getBandwidthEstimate: function () {
                        return e.o.getBandwidthEstimate();
                      },
                      onMetadata: function (B, N, z, V) {
                        var X = B;
                        ((B == "com.apple.hls.interstitial" || B == "com.apple.hls.overlay") &&
                          ((X = "com.apple.quicktime.HLS"),
                          (B = { startTime: N, endTime: z, values: V }),
                          e.C && e.C.onHLSInterstitialMetadata(e, e.h, B)),
                          (V = x(V)),
                          (B = V.next()));
                        for (var W = {}; !B.done; W = { bh: void 0 }, B = V.next())
                          ((W.bh = B.value),
                            W.bh.name != "ID" &&
                              Eu(
                                u,
                                !1,
                                (function (ie) {
                                  return function () {
                                    fg(e, N, z, X, ie.bh);
                                  };
                                })(W),
                              ));
                      },
                      disableStream: function (B) {
                        return e.disableStream(B, e.g.streaming.maxDisabledTime);
                      },
                      addFont: function (B, N) {
                        return e.addFont(B, N);
                      },
                    }),
                    (E = new mu(function () {
                      return e.Ra();
                    })),
                    E.addEventListener("regionadd", function (B) {
                      var N = B.region;
                      (Du(e, "timelineregionadded", N, u),
                        Eu(u, !1, function () {
                          e.C && (e.C.onDashTimedMetadata(N), e.C.onDASHInterstitialMetadata(e, e.h, N));
                        }));
                    }),
                    (C = null),
                    l.streaming.observeQualityChanges &&
                      ((C = new Oc(function () {
                        return e.Gc();
                      })),
                      C.addEventListener("qualitychange", function (B) {
                        d1(e, B.quality, B.position);
                      }),
                      C.addEventListener("audiotrackchange", function (B) {
                        d1(e, B.quality, B.position, !0);
                      })),
                    (k = !0),
                    (R = {
                      vc: e.N,
                      onError: function (B) {
                        return u.onError(B);
                      },
                      zf: function (B) {
                        Eu(u, !0, function () {
                          e.F && Fk(e, B);
                        });
                      },
                      onExpirationUpdated: function (B, N) {
                        var z = ct("expirationupdated");
                        (u.dispatchEvent(z),
                          (z = u.m) && z.onExpirationUpdated && z.onExpirationUpdated(B, N));
                      },
                      onEvent: function (B) {
                        (u.dispatchEvent(B),
                          B.type == "drmsessionupdate" &&
                            k &&
                            ((k = !1),
                            (B = Date.now() / 1e3 - u.za),
                            ((e.B || u.getStats()).m = B),
                            e.T && Nv(e.T)));
                      },
                    }),
                    (L = WT(e, p)),
                    I0(e.N, L),
                    (U = function () {
                      return e.md(R);
                    }),
                    (G = { config: l, zk: A, Kk: E, Jk: C, md: U, yk: w, networkingEngine: L, pj: s }),
                    (u = new Ir(t, r, n, G)),
                    b.return(u));
              });
            }
            function zT(e, t) {
              var n, r, i, s;
              return j(function (o) {
                return o.g == 1
                  ? ((n = e.g.manifest.retryParameters), I(o, jo(t, e.N, n), 2))
                  : ((r = o.h),
                    r == "application/x-mpegurl" &&
                      ((i = Be()), i.Ha() === "WEBKIT" && (r = "application/vnd.apple.mpegurl")),
                    r == "video/quicktime" && ((s = Be()), s.Ha() === "CHROMIUM" && (r = "video/mp4")),
                    o.return(r));
              });
            }
            function wk(e, t) {
              if (!oi(Be())) return !0;
              if (t) {
                if ((e.h || Hs()).canPlayType(t) == "") return !1;
                if (!oi(Be()) || !po.has(t.toLowerCase())) return !0;
                if (oc(t))
                  return Be().Ha() === "WEBKIT" &&
                    (e.g.drm.servers["com.apple.fps"] || e.g.drm.servers["com.apple.fps.1_0"])
                    ? e.g.streaming.useNativeHlsForFairPlay
                    : e.g.streaming.preferNativeHls;
                if (t === "application/dash+xml" || t === "video/vnd.mpeg.dash.mpd")
                  return e.g.streaming.preferNativeDash;
              }
              return !1;
            }
            function cd(e, t) {
              var n = e.g.textDisplayFactory;
              e.Oh !== n || (t !== void 0 && t)
                ? ((t = e.u),
                  (e.u = n()),
                  e.u.configure
                    ? e.u.configure(e.g.textDisplayer)
                    : qe("Text displayer w/ configure", 'Text displayer should have a "configure" method!'),
                  e.u.setTextLanguage ||
                    qe(
                      "Text displayer w/ setTextLanguage",
                      'Text displayer should have a "setTextLanguage" method!',
                    ),
                  t
                    ? (e.u.setTextVisibility(t.isTextVisible()), t.destroy().catch(function () {}))
                    : e.u.setTextVisibility(e.$),
                  e.H && UM(e.H, e.u),
                  (e.Oh = n),
                  e.l && lR(e.l))
                : e.u && e.u.configure && e.u.configure(e.g.textDisplayer);
            }
            function cg(e) {
              var t, n, r;
              return j(function (i) {
                if (i.g == 1)
                  return (
                    Be(),
                    Xo(e, "media-source"),
                    e.g.mediaSource.useSourceElements && kc(e.h),
                    cd(e),
                    (t = Lk(
                      e.h,
                      e.u,
                      {
                        Pj: function () {
                          return e.keySystem();
                        },
                        onMetadata: function (s, o, u) {
                          s = x(s);
                          for (var l = s.next(); !l.done; l = s.next())
                            if (((l = l.value), l.data && typeof l.cueTime == "number" && l.frames)) {
                              var p = l.cueTime + o,
                                m = u;
                              m && p > m && (m = p);
                              for (var y = x(l.frames), v = y.next(); !v.done; v = y.next())
                                fg(e, p, m, "org.id3", v.value);
                              e.C && e.C.onHlsTimedMetadata(l, p);
                            }
                        },
                        Ek: function (s) {
                          e.kb &&
                            Rp(e.kb, {
                              schemeIdUri: s.schemeIdUri,
                              startTime: s.startTime,
                              endTime: s.endTime,
                              id: String(s.id),
                              emsg: s,
                            });
                        },
                        onEvent: function (s) {
                          return e.dispatchEvent(s);
                        },
                        Gk: function () {
                          e.I && e.I.update && e.I.update();
                        },
                      },
                      e.T,
                      e.g.mediaSource,
                    )),
                    (n = e.g.manifest),
                    (r = n.segmentRelativeVttTiming),
                    (t.Fa = r),
                    I(i, t.M, 2)
                  );
                ((e.H = t), re(i));
              });
            }
            function XT(e, t, n) {
              function r() {
                return hg(e);
              }
              if (
                (e.j.D(t, "playing", r),
                e.j.D(t, "pause", r),
                e.j.D(t, "ended", r),
                e.j.D(t, "ratechange", function () {
                  var s = e.h.playbackRate;
                  s != 0 &&
                    (e.M && (e.M.set(s), e.m == ln && e.o.playbackRateChanged(s), n1(e, s)),
                    (s = ct("ratechange")),
                    e.dispatchEvent(s));
                }),
                t.remote &&
                  (e.j.D(t.remote, "connect", function () {
                    (e.l && t.remote.state == "connected" && Pi(e), Pn(e));
                  }),
                  e.j.D(t.remote, "connecting", function () {
                    return Pn(e);
                  }),
                  e.j.D(t.remote, "disconnect", function () {
                    return j(function (s) {
                      if (s.g == 1)
                        return e.l && t.remote.state == "disconnected" ? I(s, zc(e.l), 3) : s.A(2);
                      (s.g != 2 && Pi(e), Pn(e), re(s));
                    });
                  })),
                t.audioTracks &&
                  (e.j.D(t.audioTracks, "addtrack", function () {
                    return Pn(e);
                  }),
                  e.j.D(t.audioTracks, "removetrack", function () {
                    return Pn(e);
                  }),
                  e.j.D(t.audioTracks, "change", function () {
                    return Pn(e);
                  })),
                t.videoTracks &&
                  (e.j.D(t.videoTracks, "addtrack", function () {
                    return Pn(e);
                  }),
                  e.j.D(t.videoTracks, "removetrack", function () {
                    return Pn(e);
                  }),
                  e.j.D(t.videoTracks, "change", function () {
                    return Pn(e);
                  })),
                (t.webkitPresentationMode || t.webkitSupportsFullscreen) &&
                  e.j.D(t, "webkitpresentationmodechanged", function () {
                    e.Be && cd(e, !0);
                  }),
                t.textTracks)
              ) {
                var i = function () {
                  (e.m === nr && e.u instanceof Wt && Pi(e), Pn(e));
                };
                (e.j.D(t.textTracks, "addtrack", function (s) {
                  if (s.track)
                    switch (((s = s.track), s.kind)) {
                      case "metadata":
                        Rk(e, s);
                        break;
                      case "chapters":
                        kk(e, s);
                        break;
                      default:
                        i();
                    }
                }),
                  e.j.D(t.textTracks, "removetrack", i),
                  e.j.D(t.textTracks, "change", i));
              }
              t.preload != "none" &&
                e.j.Aa(t, "loadedmetadata", function () {
                  e.B.G = Date.now() / 1e3 - n;
                });
            }
            function Ak(e, t, n, r) {
              var i, s, o, u, l, p, m, y, v, w, A, E, C, k, R, L, U, G, b, B, N, z, V, X, W, ie, ne, q;
              return j(function (Z) {
                switch (Z.g) {
                  case 1:
                    for (
                      Xo(e, "load"),
                        i = e.h,
                        e.M = new gu({
                          cf: function () {
                            return i.playbackRate;
                          },
                          Tc: function () {
                            return i.defaultPlaybackRate;
                          },
                          uh: function (ae) {
                            i.playbackRate = ae;
                          },
                          Di: function (ae) {
                            i.currentTime += ae;
                          },
                        }),
                        XT(e, i, t),
                        ("onchange" in g.screen) &&
                          e.j.D(g.screen, "change", function () {
                            if (e.J.getConfiguration) {
                              var ae = e.J.getConfiguration();
                              ae.hdrLevel == "AUTO"
                                ? cs(e)
                                : e.g.preferredVideoHdrLevel == "AUTO" &&
                                  e.g.abr.enabled &&
                                  ((ae.hdrLevel = "AUTO"), e.J.configure(ae), cs(e));
                            }
                          }),
                        s = !1,
                        o = x(e.i.variants),
                        u = o.next();
                      !u.done;
                      u = o.next()
                    )
                      ((l = u.value), (p = l.video && l.video.dependencyStream) && (s = Ov(p)));
                    (Tk(e, e.g, s),
                      (e.Kd = e.g.preferredTextLanguage),
                      (e.Od = e.g.preferredTextRole),
                      (e.Nd = e.g.preferForcedSubs),
                      yg(e.i.presentationTimeline, e.g.playRangeStart, e.g.playRangeEnd),
                      e.o.init(function (ae, ce, be) {
                        e.i &&
                          e.l &&
                          ae != e.l.o &&
                          _u(e, ae, !0, ce === void 0 ? !1 : ce, be === void 0 ? 0 : be);
                      }),
                      e.o.setMediaElement(i),
                      e.o.setCmsdManager(e.va),
                      (e.l = bk(e)),
                      e.l.configure(e.g.streaming),
                      (e.m = ln),
                      e.dispatchEvent(ct("streaming")),
                      (m = n));
                  case 2:
                    for (
                      (v = e.l.o) || m || (m = i1(e, !0)),
                        w = [],
                        y = v || m,
                        A = x([y.video, y.audio]),
                        E = A.next();
                      !E.done;
                      E = A.next()
                    )
                      (C = E.value) &&
                        !C.segmentIndex &&
                        (w.push(C.createSegmentIndex()),
                        C.dependencyStream && w.push(C.dependencyStream.createSegmentIndex()));
                    if (!(w.length > 0)) {
                      Z.A(4);
                      break;
                    }
                    return I(Z, Promise.all(w), 4);
                  case 4:
                    if (!y || y.disabledUntilTime != 0) {
                      Z.A(2);
                      break;
                    }
                    if (
                      (cs(e),
                      e.I && e.I.onInitialVariantChosen && e.I.onInitialVariantChosen(y),
                      e.i.isLowLatency &&
                        (e.g.streaming.lowLatencyMode
                          ? e.configure(e.dg)
                          : je(
                              "Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.",
                            )),
                      e.K && (tk(e.K, e.i.isLowLatency && e.g.streaming.lowLatencyMode), nk(e.K, t * 1e3)),
                      yg(e.i.presentationTimeline, e.g.playRangeStart, e.g.playRangeEnd),
                      oR(e.l, e.g.playRangeStart, e.g.playRangeEnd),
                      (e.Ua = !0),
                      e.dispatchEvent(ct("canupdatestarttime")),
                      (k = function (ae) {
                        ((e.G = _k(e, ae)), (e.ac = Pk(e, ae)), KT(e, i, !1));
                      }),
                      e.g.streaming.startAtSegmentBoundary ||
                        ((R = e.O), R == null && e.i.startTime && (R = e.i.startTime), k(R)),
                      v)
                    ) {
                      Z.A(7);
                      break;
                    }
                    if (!e.g.streaming.startAtSegmentBoundary) {
                      Z.A(8);
                      break;
                    }
                    return (
                      (L = e.i.presentationTimeline),
                      e.O instanceof Date &&
                        ((G = L.m || L.i), (b = e.O.getTime() / 1e3 - G), b != null && (U = b)),
                      U == null && (U = typeof e.O == "number" ? e.O : e.h.currentTime),
                      e.O == null && e.i.startTime && (U = e.i.startTime),
                      (B = L.Zb()),
                      (N = L.Gb()),
                      U < B ? (U = B) : U > N && (U = N),
                      I(Z, Bk(m, U), 9)
                    );
                  case 9:
                    ((z = Z.h), k(z));
                  case 8:
                    _u(e, m, !0, !1, 0);
                  case 7:
                    return (
                      e.G.ready(),
                      (V = e.Lc().find(function (ae) {
                        return ae.active;
                      })),
                      V ||
                        ((X = wo(e.i.textStreams, e.Kd, e.Od, e.Nd)[0] || null) && Xp(e.B.h, X, !0),
                        m &&
                          (X
                            ? (y0(m.audio, X, e.g) && (e.$ = !0), e.$ && e.u.setTextVisibility(!0))
                            : ((e.$ = !1), e.u.setTextVisibility(!1)),
                          l1(e)),
                        X && (e.g.streaming.alwaysStreamText || e.Sg()) && (Bc(e.l, X), Pu(e))),
                      I(Z, e.l.start(r), 10)
                    );
                  case 10:
                    (e.g.abr.enabled && (e.o.enable(), c1(e)),
                      Pn(e),
                      e.i.variants.some(function (ae) {
                        return ae.primary;
                      }),
                      (((W = e.W()) &&
                        ((e.g.streaming.liveSync && e.g.streaming.liveSync.enabled) ||
                          e.i.serviceDescription ||
                          e.g.streaming.liveSync.panicMode)) ||
                        e.g.streaming.vodDynamicPlaybackRate) &&
                        ((ie = function () {
                          return r1(e);
                        }),
                        e.j.D(i, "timeupdate", ie)),
                      W ||
                        ((ne = function () {
                          return pd(e);
                        }),
                        e.j.D(i, "timeupdate", ne),
                        pd(e),
                        e.i.nextUrl &&
                          (e.g.streaming.preloadNextUrlWindow > 0 &&
                            ((q = function () {
                              var ae;
                              return j(function (ce) {
                                if (ce.g == 1)
                                  return (
                                    (ae = e.Ra().end - e.h.currentTime),
                                    isNaN(ae) || !(ae <= e.g.streaming.preloadNextUrlWindow)
                                      ? ce.A(0)
                                      : (e.j.Ma(i, "timeupdate", q), I(ce, e.preload(e.i.nextUrl), 4))
                                  );
                                ((e.eb = ce.h), re(ce));
                              });
                            }),
                            e.j.D(i, "timeupdate", q)),
                          e.j.D(i, "ended", function () {
                            e.load(e.eb || e.i.nextUrl);
                          }))),
                      e.C && e.C.onManifestUpdated(W),
                      re(Z));
                }
              });
            }
            function Ek(e, t) {
              var n, r, i;
              return j(function (s) {
                return s.g == 1
                  ? ((n = Date.now() / 1e3),
                    (r = !0),
                    (e.F = e.md({
                      vc: e.N,
                      onError: function (o) {
                        Wo(e, o);
                      },
                      zf: function () {},
                      onExpirationUpdated: function () {
                        var o = ct("expirationupdated");
                        e.dispatchEvent(o);
                      },
                      onEvent: function (o) {
                        (e.dispatchEvent(o),
                          o.type == "drmsessionupdate" && r && ((r = !1), (e.B.m = Date.now() / 1e3 - n)));
                      },
                    })),
                    e.F.configure(e.g.drm),
                    (i = v0([t])),
                    (e.F.O = !0),
                    I(s, L0(e.F, [i], []), 2))
                  : I(s, e.F.Vb(e.h), 0);
              });
            }
            function Ik(e, t, n) {
              var r, i, s, o, u, l, p, m, y, v, w, A;
              return j(function (E) {
                switch (E.g) {
                  case 1:
                    if (
                      (Xo(e, "src-equals"),
                      (r = e.h),
                      (e.G = new bx(r)),
                      (i = !1),
                      e.De.push(function () {
                        i = !0;
                      }),
                      e.dispatchEvent(ct("canupdatestarttime")),
                      e.O != null && e.G.$f(e.O),
                      (e.ac = Dk(e, e.O || 0)),
                      (e.M = new gu({
                        cf: function () {
                          return r.playbackRate;
                        },
                        Tc: function () {
                          return r.defaultPlaybackRate;
                        },
                        uh: function (C) {
                          r.playbackRate = C;
                        },
                        Di: function (C) {
                          r.currentTime += C;
                        },
                      })),
                      KT(e, r, !0),
                      r.textTracks &&
                        (cd(e),
                        (s = function (C) {
                          if (!(e.u instanceof Wt)) {
                            var k = dd(e).find(function (R) {
                              return R.mode !== "disabled";
                            });
                            (k && (k.mode = C ? "showing" : "hidden"),
                              e.u instanceof hn &&
                                (k = Nk(e)) &&
                                (k.mode = !C && e.u.isTextVisible() ? "showing" : "hidden"));
                          }
                        }),
                        e.j.D(r, "enterpictureinpicture", function () {
                          return s(!0);
                        }),
                        e.j.D(r, "leavepictureinpicture", function () {
                          return s(!1);
                        }),
                        r.remote
                          ? (e.j.D(r.remote, "connect", function () {
                              return s(!1);
                            }),
                            e.j.D(r.remote, "connecting", function () {
                              return s(!1);
                            }),
                            e.j.D(r.remote, "disconnect", function () {
                              return s(!1);
                            }))
                          : "webkitCurrentPlaybackTargetIsWireless" in r &&
                            e.j.D(r, "webkitcurrentplaybacktargetiswirelesschanged", function () {
                              return s(!1);
                            }),
                        (o = r),
                        (o.webkitPresentationMode || o.webkitSupportsFullscreen) &&
                          e.j.D(o, "webkitpresentationmodechanged", function () {
                            o.webkitPresentationMode
                              ? s(o.webkitPresentationMode !== "inline")
                              : o.webkitSupportsFullscreen && s(o.webkitDisplayingFullscreen);
                          })),
                      XT(e, r, t),
                      (u = rk(e.K, e.X, n)),
                      !u.includes("#t=") &&
                        (e.g.playRangeStart > 0 || isFinite(e.g.playRangeEnd)) &&
                        ((u += "#t="),
                        e.g.playRangeStart > 0 && (u += e.g.playRangeStart),
                        isFinite(e.g.playRangeEnd) && (u += "," + e.g.playRangeEnd)),
                      !e.H)
                    ) {
                      E.A(2);
                      break;
                    }
                    return I(E, e.H.destroy(), 3);
                  case 3:
                    e.H = null;
                  case 2:
                    return (
                      kc(r),
                      (r.src = u),
                      (l = Be()),
                      l.Oa() == "TV" && r.load(),
                      r.preload != "none" && !r.autoplay && oc(n) && l.Ha() === "WEBKIT" && r.load(),
                      (e.m = nr),
                      e.dispatchEvent(ct("streaming")),
                      (p = function () {
                        return new Promise(function (C) {
                          var k = new Ve(C);
                          (e.j.D(r.textTracks, "change", function () {
                            return k.ka(0.5);
                          }),
                            k.ka(0.5));
                        });
                      }),
                      (m = new at()),
                      Uo(r, HTMLMediaElement.HAVE_METADATA, e.j, function () {
                        return j(function (C) {
                          if (C.g == 1)
                            return (e.G.ready(), e.Fa && oc(e.Fa) ? I(C, p(), 3) : (m.resolve(), C.A(0)));
                          (m.resolve(), re(C));
                        });
                      }),
                      Uo(r, HTMLMediaElement.HAVE_CURRENT_DATA, e.j, function () {
                        var C, k, R, L, U;
                        return j(function (G) {
                          if (G.g == 1) return I(G, p(), 2);
                          if (i) return G.return();
                          if (
                            (Ck(e),
                            (C = dd(e)),
                            C.some(function (b) {
                              return b.mode === "showing";
                            }) && ((e.$ = !0), e.u.setTextVisibility(!0)),
                            !(e.u instanceof Wt))
                          )
                            for (
                              C.length &&
                                (e.u.enableTextDisplayer
                                  ? e.u.enableTextDisplayer()
                                  : qe(
                                      "Text displayer w/ enableTextDisplayer",
                                      'Text displayer should have a "enableTextDisplayer" method',
                                    )),
                                k = !1,
                                R = x(C),
                                L = R.next();
                              !L.done;
                              L = R.next()
                            )
                              ((U = L.value),
                                U.mode !== "disabled" &&
                                  (k
                                    ? ((U.mode = "disabled"),
                                      je("Found more than one enabled text track, disabling it", U))
                                    : (ZT(e, U), (k = !0))));
                          (Mk(e), re(G));
                        });
                      }),
                      r.error
                        ? m.reject(mg(e))
                        : r.preload == "none" &&
                          (je(
                            'With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.',
                          ),
                          m.resolve()),
                      e.j.Aa(r, "error", function () {
                        m.reject(mg(e));
                      }),
                      I(E, ac(e.g.streaming.loadTimeout, m), 4)
                    );
                  case 4:
                    ((((y = e.W()) &&
                      ((e.g.streaming.liveSync && e.g.streaming.liveSync.enabled) ||
                        e.g.streaming.liveSync.panicMode)) ||
                      e.g.streaming.vodDynamicPlaybackRate) &&
                      ((v = function () {
                        return r1(e);
                      }),
                      e.j.D(r, "timeupdate", v)),
                      y ||
                        ((w = function () {
                          return pd(e);
                        }),
                        e.j.D(r, "timeupdate", w),
                        pd(e)),
                      e.C &&
                        (e.C.onManifestUpdated(y),
                        y &&
                          ((A = e.Ra().end),
                          e.j.D(r, "progress", function () {
                            var C = e.Ra().end;
                            A != C && (e.C.onManifestUpdated(e.W()), (A = C));
                          }))),
                      (e.Ua = !0),
                      re(E));
                }
              });
            }
            function Ck(e) {
              var t = e.g.preferredAudioLanguage;
              t != "" && e.Ti(t, e.g.preferredAudioRole);
            }
            function Mk(e) {
              var t = e.g.preferredTextLanguage;
              t != "" && e.oh(t, e.g.preferredTextRole, e.g.preferForcedSubs);
            }
            function Rk(e, t) {
              if (t.kind == "metadata") {
                ((t.mode = "hidden"),
                  e.j.D(t, "cuechange", function () {
                    if (t.activeCues)
                      for (var r = x(t.activeCues), i = r.next(); !i.done; i = r.next())
                        ((i = i.value),
                          fg(e, i.startTime, i.endTime, i.type, i.value),
                          e.C && e.C.onCueMetadataChange(i.value));
                    if (t.cues) {
                      ((r = []), (i = x(t.cues)));
                      for (var s = i.next(), o = {}; !s.done; o = { Ec: void 0 }, s = i.next())
                        ((o.Ec = s.value),
                          o.Ec.type == "com.apple.quicktime.HLS" &&
                            o.Ec.startTime != null &&
                            ((s = r.find(
                              (function (u) {
                                return function (l) {
                                  return l.startTime == u.Ec.startTime && l.endTime == u.Ec.endTime;
                                };
                              })(o),
                            )),
                            s ||
                              ((s = { startTime: o.Ec.startTime, endTime: o.Ec.endTime, values: [] }),
                              r.push(s)),
                            s.values.push(o.Ec.value)));
                      for (r = x(r), i = r.next(); !i.done; i = r.next())
                        ((i = i.value),
                          i.values.some(function (u) {
                            return u.key == "X-ASSET-URI" || u.key == "X-ASSET-LIST";
                          }) &&
                            e.C &&
                            (i.values.push({
                              key: "CUE",
                              description: "",
                              data: i.startTime != 0 || e.W() ? "ONCE" : "ONCE,PRE",
                              mimeType: null,
                              pictureType: null,
                            }),
                            e.C.onHLSInterstitialMetadata(e, e.h, i)));
                    }
                  }));
                var n = new Ve(function () {
                  var r = Ok(e);
                  r = x(r);
                  for (var i = r.next(); !i.done; i = r.next()) i.value.mode = "hidden";
                })
                  .Jb()
                  .ka(0.5);
                e.De.push(function () {
                  n.stop();
                });
              }
            }
            function dg(e, t, n) {
              ((t = new Map()
                .set("startTime", t.startTime)
                .set("endTime", t.endTime)
                .set("metadataType", t.schemeIdUri)
                .set("payload", t.payload)),
                e.dispatchEvent(ct(n, t)));
            }
            function fg(e, t, n, r, i) {
              e.za &&
                ((t = { schemeIdUri: r, startTime: t, endTime: n || 1 / 0, id: "", payload: i }),
                (t.id = JSON.stringify(t)),
                Rp(e.za, t));
            }
            function kk(e, t) {
              if (t && t.kind == "chapters") {
                t.mode = "hidden";
                var n = new Ve(function () {
                  t.mode = "hidden";
                })
                  .Jb()
                  .ka(0.5);
                e.De.push(function () {
                  n.stop();
                });
              }
            }
            ((h.Ok = function () {
              for (var e = this.ba; e.g; ) e.release();
            }),
              (h.md = function (e) {
                return new wc(e);
              }));
            function WT(e, t) {
              function n(s) {
                t() ? t().dispatchEvent(s) : e.dispatchEvent(s);
              }
              function r(s) {
                t() ? Eu(t(), !0, s) : s();
              }
              t ||
                (t = function () {
                  return null;
                });
              var i = new yt(
                function (s, o, u, l, p) {
                  r(function () {
                    e.o && e.o.segmentDownloaded(s, o, u, l, p);
                  });
                },
                function (s, o, u) {
                  ((o = new Map().set("headers", s).set("request", o).set("requestType", u)),
                    n(ct("downloadheadersreceived", o)),
                    r(function () {
                      if (e.va) {
                        var l = e.va;
                        if (l.h.enabled) {
                          var p = s["cmsd-static"];
                          if (p)
                            try {
                              var m = new Map(),
                                y = p.split(",");
                              for (p = 0; p < y.length; p++) {
                                var v = y[p].split("=");
                                m.set(v[0], LT(v[1]));
                              }
                            } catch (k) {}
                          if ((m = s["cmsd-dynamic"])) {
                            e: {
                              try {
                                var w = new Map(),
                                  A = m.split(";");
                                for (m = 1; m < A.length; m++) {
                                  var E = A[m].split("=");
                                  w.set(E[0], LT(E[1]));
                                }
                                var C = w;
                                break e;
                              } catch (k) {
                                C = null;
                                break e;
                              }
                              C = void 0;
                            }
                            C && (l.g = C);
                          }
                        }
                      }
                    }));
                },
                function (s, o) {
                  ((s = new Map().set("request", s).set("response", o)), n(ct("downloadcompleted", s)));
                },
                function (s, o, u, l) {
                  ((s = new Map()
                    .set("request", s)
                    .set("error", o)
                    .set("httpResponseCode", u)
                    .set("aborted", l)),
                    n(ct("downloadfailed", s)));
                },
                function (s, o, u) {
                  r(function () {
                    if (e.K) {
                      var l = e.K,
                        p = u;
                      if (((p = p === void 0 ? {} : p), l.g.enabled))
                        if (o.method === "HEAD") zo(l, o, {});
                        else
                          switch (s) {
                            case 0:
                              try {
                                if (l.g.enabled) {
                                  if (p.type) {
                                    e: {
                                      switch (p.type) {
                                        case 4:
                                          var m = l.u ? od : sd;
                                          break e;
                                        case 3:
                                        case 2:
                                          m = l.u ? ud : ad;
                                          break e;
                                        case 5:
                                          m = "s";
                                          break e;
                                      }
                                      m = void 0;
                                    }
                                    l.l = m;
                                  }
                                  zo(l, o, { ot: MT, su: !l.F });
                                }
                              } catch (v) {
                                ur("CMCD_MANIFEST_ERROR", "Could not generate manifest CMCD data.", v);
                              }
                              break;
                            case Ar:
                              try {
                                if (l.g.enabled) {
                                  var y = IT(l, p, o.uris[0]);
                                  ((y.ts = Date.now()),
                                    l.m.has(o) && l.m.delete(o),
                                    l.m.set(o, y.ts),
                                    zo(l, o, y));
                                }
                              } catch (v) {
                                ur("CMCD_SEGMENT_ERROR", "Could not generate segment CMCD data.", v);
                              }
                              break;
                            case 2:
                            case 5:
                            case 6:
                              zo(l, o, { ot: "k" });
                              break;
                            case 4:
                              zo(l, o, { ot: "o" });
                          }
                    }
                  });
                },
                function (s, o, u, l) {
                  (s = t() ? t().m : e.I) && s.banLocation && s.banLocation(l);
                },
                function (s, o, u) {
                  if (o.data) {
                    var l = o.data.byteLength,
                      p = t() ? t().getStats() : e.B;
                    if (
                      (p && (aT(p, l), s === 0 && (p.wi = l)),
                      (l = e.K),
                      (u = u === void 0 ? {} : u),
                      eg(l).length !== 0)
                    )
                      switch (s) {
                        case Ar:
                          try {
                            var m = IT(l, u, o.uri);
                            (o.originalRequest &&
                              o.originalRequest.timeToFirstByte != null &&
                              (m.ttfb = o.originalRequest.timeToFirstByte),
                              o.timeMs != null && (m.ttlb = o.timeMs));
                            var y = o.originalUri || o.uri;
                            if (y.includes("CMCD="))
                              try {
                                var v = new URL(y);
                                v.searchParams.delete("CMCD");
                                var w = v.toString();
                              } catch (B) {
                                w = y;
                              }
                            else w = y;
                            ((m.url = w),
                              l.m.has(o.originalRequest)
                                ? ((m.ts = l.m.get(o.originalRequest)), l.m.delete(o.originalRequest))
                                : m.ts || (m.ts = Date.now()));
                            var A = eg(l);
                            if (A.length !== 0) {
                              var E = l.g.version == og ? Array.from(new Set([].concat(Y(ag), Y(pk)))) : RT;
                              m.rc = o.status || 0;
                              var C = ig(l, m, PT);
                              (o.headers &&
                                o.headers["CMSD-Static"] &&
                                (C.cmsds = btoa(o.headers["CMSD-Static"])),
                                o.headers &&
                                  o.headers["CMSD-Dynamic"] &&
                                  (C.cmsdd = btoa(o.headers["CMSD-Dynamic"])));
                              for (var k = x(A), R = k.next(); !R.done; R = k.next()) {
                                var L = R.value,
                                  U = ng(L.includeKeys || [], E),
                                  G = AT(L);
                                (l.o[G] || (l.o[G] = { request: 1, response: 1 }),
                                  (C.sn = l.o[G].response++));
                                var b = rg(C, U);
                                wT(l, b, L, o);
                              }
                            }
                          } catch (B) {
                            ur("CMCD_SEGMENT_ERROR", "Could not generate response segment CMCD data.", B);
                          }
                      }
                  }
                },
              );
              return (i.configure(e.g.networking), i);
            }
            function _k(e, t) {
              return new Ux(
                e.h,
                e.i,
                e.g.streaming,
                t,
                function () {
                  (e.ac && Hx(e.ac, !e.G.Mh()), e.l && e.l.bd(), e.R && si(e, "seeking"));
                },
                function (n) {
                  return e.dispatchEvent(n);
                },
              );
            }
            function Pk(e, t) {
              var n = e.W() || (typeof t == "number" && t > 0);
              ((t = new Ws(e.Ae, n)),
                t.addEventListener("enter", function (s) {
                  Du(e, "timelineregionenter", s.region);
                }),
                t.addEventListener("exit", function (s) {
                  Du(e, "timelineregionexit", s.region);
                }),
                t.addEventListener("skip", function (s) {
                  var o = s.region;
                  s.seeking || (Du(e, "timelineregionenter", o), Du(e, "timelineregionexit", o));
                }));
              var r = new Ws(e.za, n);
              (r.addEventListener("enter", function (s) {
                dg(e, s.region, "metadata");
              }),
                (n = new Ws(e.kb, n)),
                n.addEventListener("enter", function (s) {
                  ((s = new Map().set("detail", s.region.emsg)), e.dispatchEvent(ct("emsg", s)));
                }));
              var i = new Mp(e.h);
              return (i.g.add(t), i.g.add(r), i.g.add(n), e.ye && i.g.add(e.ye), i);
            }
            function Dk(e, t) {
              ((t = new Ws(e.za, t instanceof Date || t > 0)),
                t.addEventListener("enter", function (r) {
                  dg(e, r.region, "metadata");
                }));
              var n = new Mp(e.h);
              return (n.g.add(t), n);
            }
            function KT(e, t, n) {
              ((e.R = new nM()),
                rp(e.R, Bs),
                $T(e),
                ku(e),
                (e.Ta = new Ve(function () {
                  si(e);
                })),
                e.g.streaming.rebufferingGoal && e.Ta.Ea(0.25),
                e.j.D(t, "waiting", function () {
                  return si(e, "waiting");
                }),
                e.j.D(t, "canplaythrough", function () {
                  return si(e, "canplaythrough");
                }),
                e.j.D(t, "playing", function () {
                  return si(e, "playing");
                }),
                e.j.D(t, "seeked", function () {
                  return si(e, "seeked");
                }),
                e.j.D(t, "timeupdate", function () {
                  return si(e, "timeupdate");
                }),
                n &&
                  (e.j.D(t, "progress", function () {
                    return si(e, "progress");
                  }),
                  e.j.D(t, "stalled", function () {
                    return si(e, "stalled");
                  })));
            }
            function $T(e) {
              var t = e.g.streaming.rebufferingGoal;
              e.R.j.set(Fs, Math.min(0.5, t / 2)).set(Bs, t);
            }
            function si(e, t) {
              if (e.g.streaming.rebufferingGoal) {
                ((t = e.H ? zs(e.H) : !1), (t = e.ge() || t || e.G.ri()));
                var n = ux(e.h.buffered, e.h.currentTime),
                  r = e.R,
                  i = r.j.get(r.g);
                rp(r, t || (n >= i && n > 0) ? Fs : Bs) && ku(e);
              } else if (t) {
                ((n = e.R), (r = e.h.currentTime), (i = n.h), (n.h = r));
                var s = void 0;
                switch (t) {
                  case "seeking":
                  case "waiting":
                    ((n.h = -1), (s = Bs));
                    break;
                  case "canplaythrough":
                  case "playing":
                  case "seeked":
                    s = Fs;
                    break;
                  case "timeupdate":
                    i >= 0 && r - i > 0.01 && (s = Fs);
                }
                s !== void 0 && rp(n, s) && ku(e);
              }
            }
            function Lk(e, t, n, r, i) {
              return new gx(e, t, n, i, r);
            }
            function bk(e) {
              return new $x(e.i, {
                nc: function () {
                  return e.G ? e.G.Qd() : 0;
                },
                getBandwidthEstimate: function () {
                  return e.o.getBandwidthEstimate();
                },
                Ob: function () {
                  return e.Ob();
                },
                video: e.h,
                Z: e.H,
                vc: e.N,
                onError: function (t) {
                  return Wo(e, t);
                },
                onEvent: function (t) {
                  return e.dispatchEvent(t);
                },
                zd: function (t, n, r, i) {
                  var s = t.startTime,
                    o = t.endTime,
                    u = n.type;
                  if (u != Fe) {
                    if (e.G) {
                      e.G.Fi();
                      var l = vp(e.H, u);
                      !e.W() &&
                        e.h.paused &&
                        !e.h.seeking &&
                        l != null &&
                        l > 0 &&
                        e.G.Qd() < l &&
                        !BT(e.G.Qd(), l, 0.001) &&
                        e.G.$f(l);
                    }
                    si(e);
                  }
                  ((r = new Map()
                    .set("start", s)
                    .set("end", o)
                    .set("contentType", u)
                    .set("isMuxed", r)
                    .set("isDependency", i)),
                    e.dispatchEvent(ct("segmentappended", r)),
                    e.o && n.fastSwitching && t.Xc && t.je && e.o.trySuggestStreams());
                },
                Fk: function (t, n) {
                  (n = n.xd) && e.ye && qM(e.ye, n, t);
                },
                Uh: function (t, n) {
                  var r = e.F;
                  if (r.h.parseInbandPsshEnabled && !r.H && ["audio", "video"].includes(t)) {
                    ((t = new Zh(De(n))), (n = 0));
                    for (var i = x(t.data), s = i.next(); !s.done; s = i.next()) n += s.value.length;
                    if (n == 0) r = Promise.resolve();
                    else {
                      for (n = new Uint8Array(n), i = 0, t = x(t.data), s = t.next(); !s.done; s = t.next())
                        ((s = s.value), n.set(s, i), (i += s.length));
                      (iu(r, "cenc", n), (r = r.m));
                    }
                  } else r = Promise.resolve();
                  return r;
                },
                disableStream: function (t, n) {
                  return e.disableStream(t, n);
                },
                hl: function (t, n) {
                  return !(e.g.abr.enabled && n.fastSwitching && t.Xc && t.je);
                },
              });
            }
            ((h.configure = function (e, t) {
              var n = this.getConfiguration();
              if (
                (arguments.length == 2 && typeof e == "string" && (e = Kc(e, t)),
                "preferredVariantRole" in e &&
                  (qe("preferredVariantRole configuration", "Please Use preferredAudioRole instead."),
                  (e.preferredAudioRole = e.preferredVariantRole),
                  delete e.preferredVariantRole),
                e.streaming &&
                  "forceTransmuxTS" in e.streaming &&
                  (qe(
                    "streaming.forceTransmuxTS configuration",
                    "Please Use mediaSource.forceTransmux instead.",
                  ),
                  (e.mediaSource = e.mediaSource || {}),
                  (e.mediaSource.mediaSource = e.streaming.forceTransmuxTS),
                  delete e.streaming.forceTransmuxTS),
                e.streaming &&
                  "forceTransmux" in e.streaming &&
                  (qe(
                    "streaming.forceTransmux configuration",
                    "Please Use mediaSource.forceTransmux instead.",
                  ),
                  (e.mediaSource = e.mediaSource || {}),
                  (e.mediaSource.mediaSource = e.streaming.forceTransmux),
                  delete e.streaming.forceTransmux),
                e.streaming && "useNativeHlsOnSafari" in e.streaming)
              ) {
                qe(
                  "streaming.useNativeHlsOnSafari configuration",
                  "Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead.",
                );
                var r = Be();
                ((e.streaming.preferNativeHls = e.streaming.useNativeHlsOnSafari && r.Ha() === "WEBKIT"),
                  delete e.streaming.useNativeHlsOnSafari);
              }
              if (
                (e.streaming &&
                  typeof e.streaming.liveSync == "boolean" &&
                  (qe("streaming.liveSync", "Please Use streaming.liveSync.enabled instead."),
                  (r = e.streaming.liveSync),
                  (e.streaming.liveSync = {}),
                  (e.streaming.liveSync.enabled = r)),
                e.streaming &&
                  !(e.streaming.liveSync && "targetLatency" in e.streaming.liveSync) &&
                  ("liveSyncMinLatency" in e.streaming || "liveSyncMaxLatency" in e.streaming))
              ) {
                r = e.streaming.liveSyncMinLatency || 0;
                var i = Math.abs((e.streaming.liveSyncMaxLatency || 1) - r) / 2;
                ((e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.targetLatency = r + i),
                  (e.streaming.liveSync.targetLatencyTolerance = i));
              }
              if (
                (e.streaming &&
                  "liveSyncMaxLatency" in e.streaming &&
                  (qe(
                    "streaming.liveSyncMaxLatency",
                    "Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest",
                  ),
                  delete e.streaming.liveSyncMaxLatency),
                e.streaming &&
                  "liveSyncMinLatency" in e.streaming &&
                  (qe(
                    "streaming.liveSyncMinLatency",
                    "Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest",
                  ),
                  delete e.streaming.liveSyncMinLatency),
                e.streaming &&
                  "liveSyncTargetLatency" in e.streaming &&
                  (qe(
                    "streaming.liveSyncTargetLatency",
                    "Please Use streaming.liveSync.targetLatency instead.",
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.targetLatency = e.streaming.liveSyncTargetLatency),
                  delete e.streaming.liveSyncTargetLatency),
                e.streaming &&
                  "liveSyncTargetLatencyTolerance" in e.streaming &&
                  (qe(
                    "streaming.liveSyncTargetLatencyTolerance",
                    "Please Use streaming.liveSync.targetLatencyTolerance instead.",
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.targetLatencyTolerance = e.streaming.liveSyncTargetLatencyTolerance),
                  delete e.streaming.liveSyncTargetLatencyTolerance),
                e.streaming &&
                  "liveSyncPlaybackRate" in e.streaming &&
                  (qe(
                    "streaming.liveSyncPlaybackRate",
                    "Please Use streaming.liveSync.maxPlaybackRate instead.",
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.maxPlaybackRate = e.streaming.liveSyncPlaybackRate),
                  delete e.streaming.liveSyncPlaybackRate),
                e.streaming &&
                  "liveSyncMinPlaybackRate" in e.streaming &&
                  (qe(
                    "streaming.liveSyncMinPlaybackRate",
                    "Please Use streaming.liveSync.minPlaybackRate instead.",
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.minPlaybackRate = e.streaming.liveSyncMinPlaybackRate),
                  delete e.streaming.liveSyncMinPlaybackRate),
                e.streaming &&
                  "liveSyncPanicMode" in e.streaming &&
                  (qe("streaming.liveSyncPanicMode", "Please Use streaming.liveSync.panicMode instead."),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.panicMode = e.streaming.liveSyncPanicMode),
                  delete e.streaming.liveSyncPanicMode),
                e.streaming &&
                  "liveSyncPanicThreshold" in e.streaming &&
                  (qe(
                    "streaming.liveSyncPanicThreshold",
                    "Please Use streaming.liveSync.panicThreshold instead.",
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.panicThreshold = e.streaming.liveSyncPanicThreshold),
                  delete e.streaming.liveSyncPanicThreshold),
                e.mediaSource && "sourceBufferExtraFeatures" in e.mediaSource)
              ) {
                qe(
                  "mediaSource.sourceBufferExtraFeatures configuration",
                  "Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.",
                );
                var s = e.mediaSource.sourceBufferExtraFeatures;
                ((e.mediaSource.addExtraFeaturesToSourceBuffer = function () {
                  return s;
                }),
                  delete e.mediaSource.sourceBufferExtraFeatures);
              }
              if (
                (e.manifest &&
                  e.manifest.hls &&
                  "useSafariBehaviorForLive" in e.manifest.hls &&
                  (qe(
                    "manifest.hls.useSafariBehaviorForLive configuration",
                    "Please Use liveSync config to keep on live Edge instead.",
                  ),
                  delete e.manifest.hls.useSafariBehaviorForLive),
                e.streaming &&
                  "parsePrftBox" in e.streaming &&
                  (qe("streaming.parsePrftBox configuration", "Now fired without needing a configuration."),
                  delete e.streaming.parsePrftBox),
                e.manifest &&
                  e.manifest.dash &&
                  "enableAudioGroups" in e.manifest.dash &&
                  (qe(
                    "manifest.dash.enableAudioGroups configuration",
                    "Please Use manifest.enableAudioGroups instead.",
                  ),
                  (e.manifest.enableAudioGroups = e.manifest.dash.enableAudioGroups),
                  delete e.manifest.dash.enableAudioGroups),
                e.streaming &&
                  "dispatchAllEmsgBoxes" in e.streaming &&
                  (qe(
                    "streaming.dispatchAllEmsgBoxes configuration",
                    "Please Use mediaSource.dispatchAllEmsgBoxes instead.",
                  ),
                  (e.mediaSource = e.mediaSource || {}),
                  (e.mediaSource.dispatchAllEmsgBoxes = e.streaming.dispatchAllEmsgBoxes),
                  delete e.streaming.dispatchAllEmsgBoxes),
                e.streaming &&
                  "autoLowLatencyMode" in e.streaming &&
                  (qe(
                    "streaming.autoLowLatencyMode configuration",
                    "Please Use streaming.lowLatencyMode instead.",
                  ),
                  (e.streaming.lowLatencyMode = e.streaming.autoLowLatencyMode),
                  delete e.streaming.autoLowLatencyMode),
                e.manifest &&
                  e.manifest.dash &&
                  "ignoreSupplementalCodecs" in e.manifest.dash &&
                  (qe(
                    "manifest.dash.ignoreSupplementalCodecs configuration",
                    "Please Use manifest.ignoreSupplementalCodecs instead.",
                  ),
                  (e.manifest.ignoreSupplementalCodecs = e.manifest.dash.ignoreSupplementalCodecs),
                  delete e.manifest.dash.ignoreSupplementalCodecs),
                e.manifest &&
                  e.manifest.hls &&
                  "ignoreSupplementalCodecs" in e.manifest.hls &&
                  (qe(
                    "manifest.hls.ignoreSupplementalCodecs configuration",
                    "Please Use manifest.ignoreSupplementalCodecs instead.",
                  ),
                  (e.manifest.ignoreSupplementalCodecs = e.manifest.hls.ignoreSupplementalCodecs),
                  delete e.manifest.hls.ignoreSupplementalCodecs),
                e.manifest &&
                  e.manifest.dash &&
                  "updatePeriod" in e.manifest.dash &&
                  (qe(
                    "manifest.dash.updatePeriod configuration",
                    "Please Use manifest.updatePeriod instead.",
                  ),
                  (e.manifest.updatePeriod = e.manifest.dash.updatePeriod),
                  delete e.manifest.dash.updatePeriod),
                e.manifest &&
                  e.manifest.hls &&
                  "updatePeriod" in e.manifest.hls &&
                  (qe("manifest.hls.updatePeriod configuration", "Please Use manifest.updatePeriod instead."),
                  (e.manifest.updatePeriod = e.manifest.hls.updatePeriod),
                  delete e.manifest.hls.updatePeriod),
                e.manifest &&
                  e.manifest.dash &&
                  "ignoreDrmInfo" in e.manifest.dash &&
                  (qe(
                    "manifest.dash.ignoreDrmInfo configuration",
                    "Please Use manifest.ignoreDrmInfo instead.",
                  ),
                  (e.manifest.ignoreDrmInfo = e.manifest.dash.ignoreDrmInfo),
                  delete e.manifest.dash.ignoreDrmInfo),
                e.drm && e.drm.advanced)
              ) {
                r = !1;
                for (var o in e.drm.advanced) {
                  var u = e.drm.advanced[o];
                  ((i = u.videoRobustness),
                    (u = u.audioRobustness),
                    "videoRobustness" in e.drm.advanced[o] &&
                      !Array.isArray(e.drm.advanced[o].videoRobustness) &&
                      ((e.drm.advanced[o].videoRobustness = [i]), (r = !0)),
                    "audioRobustness" in e.drm.advanced[o] &&
                      !Array.isArray(e.drm.advanced[o].audioRobustness) &&
                      ((e.drm.advanced[o].audioRobustness = [u]), (r = !0)));
                }
                r &&
                  qe(
                    "AdvancedDrmConfiguration's videoRobustness and audioRobustness",
                    "These properties are no longer strings but array of strings, please update your usage of these properties.",
                  );
              }
              return (
                e.streaming &&
                  "forceHTTP" in e.streaming &&
                  (qe("streaming.forceHTTP configuration", "Please Use networking.forceHTTP instead."),
                  (e.networking = e.networking || {}),
                  (e.networking.forceHTTP = e.streaming.forceHTTP),
                  delete e.streaming.forceHTTP),
                e.streaming &&
                  "forceHTTPS" in e.streaming &&
                  (qe("streaming.forceHTTPS configuration", "Please Use networking.forceHTTP instead."),
                  (e.networking = e.networking || {}),
                  (e.networking.forceHTTPS = e.streaming.forceHTTPS),
                  delete e.streaming.forceHTTPS),
                e.streaming &&
                  "minBytesForProgressEvents" in e.streaming &&
                  (qe(
                    "streaming.minBytesForProgressEvents configuration",
                    "Please Use networking.minBytesForProgressEvents instead.",
                  ),
                  (e.networking = e.networking || {}),
                  (e.networking.minBytesForProgressEvents = e.streaming.minBytesForProgressEvents),
                  delete e.streaming.minBytesForProgressEvents),
                (o = ki(this.g, e, Qr(this))),
                YT(this, n),
                o
              );
            }),
              (h.yj = function (e) {
                this.dg = e;
              }));
            function YT(e, t) {
              if (((e.Ee = new ip(e.g, e.ya, e.F)), e.I)) {
                var n = Ur(e.g.manifest);
                (e.h && e.h.nodeName === "AUDIO" && (n.disableVideo = !0), e.I.configure(n));
              }
              if ((e.F && e.F.configure(e.g.drm), e.l)) {
                e.l.configure(e.g.streaming);
                try {
                  e.m != Fr && K0(e.Ee, e.i) && Pn(e);
                } catch (i) {
                  Wo(e, i);
                }
                (e.o && cs(e), (n = e.l.o), !n || (n.allowedByApplication && n.allowedByKeySystem) || ds(e));
              }
              if (
                (e.N && e.N.configure(e.g.networking),
                e.H && (e.H.configure(e.g.mediaSource), (e.H.Fa = e.g.manifest.segmentRelativeVttTiming)),
                e.u && cd(e),
                e.o && (e.o.configure(e.g.abr), e.g.abr.enabled ? e.o.enable() : e.o.disable(), c1(e)),
                e.R && $T(e),
                e.Ta && (e.g.streaming.rebufferingGoal ? e.Ta.Ea(0.25) : e.Ta.stop()),
                e.i && yg(e.i.presentationTimeline, e.g.playRangeStart, e.g.playRangeEnd),
                e.C && e.C.configure(e.g.ads),
                e.K && e.K.configure(e.g.cmcd),
                e.va && e.va.configure(e.g.cmsd),
                e.Da && e.Da.configure(e.g.queue),
                e.m == ln && e.J.getConfiguration)
              ) {
                n = e.J.getConfiguration();
                var r = !1;
                (t.preferredVideoHdrLevel != e.g.preferredVideoHdrLevel &&
                  n.hdrLevel != e.g.preferredVideoHdrLevel &&
                  ((n.hdrLevel = e.g.preferredVideoHdrLevel), (r = !0)),
                  t.preferredVideoLayout != e.g.preferredVideoLayout &&
                    n.videoLayout != e.g.preferredVideoLayout &&
                    ((n.videoLayout = e.g.preferredVideoLayout), (r = !0)),
                  t.preferSpatialAudio != e.g.preferSpatialAudio &&
                    n.spatialAudio != e.g.preferSpatialAudio &&
                    ((n.spatialAudio = e.g.preferSpatialAudio), (r = !0)),
                  t.preferredVideoRole != e.g.preferredVideoRole &&
                    n.videoRole != e.g.preferredVideoRole &&
                    ((n.videoRole = e.g.preferredVideoRole), (r = !0)),
                  r && (e.J.configure(n), ds(e)));
              }
            }
            ((h.getConfiguration = function () {
              var e = Qr(this);
              return (ki(e, this.g, Qr(this)), e);
            }),
              (h.Ij = function () {
                return this.dg;
              }),
              (h.ki = function () {
                var e = Qr(this);
                return (ki(e, this.g, Qr(this)), nT(this.g, Qr(this)));
              }),
              (h.ei = function () {
                if (this.h) {
                  var e = this.h.buffered.length;
                  e = e ? this.h.buffered.end(e - 1) : 0;
                  var t = this.getConfiguration().streaming.bufferingGoal;
                  if (((t = Math.min(this.h.currentTime + t, this.Ra().end)), e >= t)) return 1;
                  if (!(e <= this.h.currentTime) && e < t)
                    return (e - this.h.currentTime) / (t - this.h.currentTime);
                }
                return 0;
              }),
              (h.Oi = function () {
                var e = this.getConfiguration(),
                  t;
                for (t in this.g) delete this.g[t];
                (ki(this.g, Qr(this), Qr(this)), YT(this, e));
              }),
              (h.$d = function () {
                return this.m;
              }),
              (h.ii = function () {
                return this.i ? this.i.type : null;
              }),
              (h.bf = function () {
                return this.h;
              }),
              (h.Yb = function () {
                return this.N;
              }),
              (h.rd = function () {
                return this.X;
              }),
              (h.di = function () {
                return this.C ? this.C : null;
              }),
              (h.mi = function () {
                return this.Da ? this.Da : null;
              }),
              (h.W = function () {
                return this.i && !this.xa()
                  ? this.i.presentationTimeline.W()
                  : this.h && (this.h.src || this.xa())
                    ? this.h.duration == 1 / 0
                    : !1;
              }),
              (h.Vc = function () {
                return this.i ? this.i.presentationTimeline.Vc() : !1;
              }),
              (h.lk = function () {
                if (this.i && !this.xa()) {
                  var e = this.i.variants;
                  return e.length ? !e[0].video : !1;
                }
                return this.h && (this.h.src || this.xa())
                  ? this.h.videoTracks
                    ? this.h.videoTracks.length == 0
                    : this.h.videoHeight == 0
                  : !1;
              }),
              (h.ti = function () {
                if (this.i && !this.xa()) {
                  var e = this.i.variants;
                  return e.length
                    ? ((e = e[0]), e.audio || !e.video ? !1 : !e.video.codecs.includes(","))
                    : !1;
                }
                return this.h && (this.h.src || this.xa()) && this.h.audioTracks
                  ? this.h.audioTracks.length == 0
                  : !1;
              }),
              (h.Ra = function () {
                if (this.i && !this.xa()) {
                  if (!this.Ua && this.i.type == "HLS") return { start: 0, end: 0 };
                  var e = this.i.presentationTimeline;
                  return { start: e.Zb(), end: e.Gb() };
                }
                if (this.h && (this.h.src || this.xa()) && (e = this.h.seekable) && e.length) {
                  var t = this.g ? this.g.playRangeStart : 0;
                  t = Math.max(e.start(0), t);
                  var n = this.g ? this.g.playRangeEnd : 1 / 0;
                  return ((e = Math.min(e.end(e.length - 1), n)), { start: t, end: e });
                }
                return { start: 0, end: 0 };
              }),
              (h.ik = function () {
                this.W() && (this.h.currentTime = this.Ra().end);
              }),
              (h.nk = function () {
                return this.Ua;
              }),
              (h.keySystem = function () {
                var e = this.drmInfo();
                return e ? e.keySystem : "";
              }),
              (h.drmInfo = function () {
                return this.F ? this.F.g : null;
              }),
              (h.Zd = function () {
                return this.F ? this.F.Zd() : 1 / 0;
              }),
              (h.Kg = function () {
                return this.F ? this.F.Kg() : [];
              }),
              (h.$e = function () {
                return this.F ? this.F.$e() : {};
              }),
              (h.Rg = function () {
                return this.R ? this.R.g == Bs : !!this.X;
              }),
              (h.Ob = function () {
                return this.h ? (this.M ? this.M.i : 1) : 0;
              }),
              (h.Kh = function (e) {
                this.m == ln && this.l && Yx(this.l, e);
              }),
              (h.xe = function (e, t) {
                ((t = t === void 0 ? !0 : t),
                  e == 0
                    ? je("A trick play rate of 0 is unsupported!")
                    : (this.M.set(e),
                      this.m == ln && (this.o.playbackRateChanged(e), this.Kh(t && e != 1)),
                      n1(this, e)));
              }),
              (h.Sd = function () {
                var e = this.M.Tc();
                (this.m == nr && this.M.set(e),
                  this.m == ln && (this.M.set(e), this.o.playbackRateChanged(e), this.Kh(!1)),
                  this.dc.Qa());
              }),
              (h.qc = function () {
                if (this.i && !this.xa()) {
                  for (
                    var e = this.l ? this.l.o : null, t = [], n = 0, r = x(this.i.variants), i = r.next();
                    !i.done;
                    i = r.next()
                  )
                    if (((i = i.value), ru(i))) {
                      var s = Os(i);
                      ((s.active = i == e),
                        s.active ||
                          n == 1 ||
                          e == null ||
                          i.video != e.video ||
                          i.audio != e.audio ||
                          (s.active = !0),
                        s.active && n++,
                        t.push(s));
                    }
                  return t;
                }
                if (this.h && this.h.audioTracks) {
                  var o = s1(this);
                  return (
                    (e = Array.from(this.h.audioTracks)),
                    e.length
                      ? e.map(function (u) {
                          return fc(u, o);
                        })
                      : o
                        ? [fc(null, o)]
                        : []
                  );
                }
                return [];
              }),
              (h.Lc = function () {
                if (this.i) {
                  if (this.xa()) return [];
                  for (
                    var e = this.l ? this.l.B : null, t = [], n = x(this.i.textStreams), r = n.next();
                    !r.done;
                    r = n.next()
                  ) {
                    r = r.value;
                    var i = Us(r);
                    ((i.active = r == e), t.push(i));
                  }
                  return t;
                }
                return this.h && this.h.src && this.h.textTracks
                  ? dd(this).map(function (s) {
                      return h0(s);
                    })
                  : [];
              }),
              (h.Nj = function () {
                var e = this.Ke;
                return (
                  this.i && (e = this.i.imageStreams),
                  e.map(function (t) {
                    return $h(t);
                  })
                );
              }),
              (h.Bj = function (e) {
                var t = this,
                  n,
                  r;
                return j(function (i) {
                  return i.g == 1
                    ? I(i, JT(t, e), 2)
                    : ((n = i.h),
                      n
                        ? ((r = []),
                          n.segmentIndex.Fb(function (s) {
                            var o = qT(s.tilesLayout || n.tilesLayout);
                            if (o)
                              for (var u = o.rows * o.columns, l = s.j - s.startTime, p = 0; p < u; p++) {
                                var m = QT(s, n, s.startTime + (l * p) / u, o);
                                r.push(m);
                              }
                          }),
                          n.closeSegmentIndex && n.closeSegmentIndex(),
                          i.return(r))
                        : i.return(null));
                });
              }));
            function qT(e) {
              return e && (e = /(\d+)x(\d+)/.exec(e))
                ? { columns: parseInt(e[1], 10), rows: parseInt(e[2], 10) }
                : null;
            }
            h.ck = function (e, t) {
              var n = this,
                r,
                i,
                s,
                o,
                u,
                l;
              return j(function (p) {
                return p.g == 1
                  ? I(p, JT(n, e), 2)
                  : ((r = p.h),
                    !r ||
                    (r.closeSegmentIndex &&
                      (n.yc.has(r) ||
                        ((i = new Ve(function () {
                          (r.closeSegmentIndex(), n.yc.delete(r));
                        })),
                        n.yc.set(r, i)),
                      (s = n.yc.get(r)),
                      s.ka(5)),
                    (o = r.segmentIndex.find(t)),
                    o == null)
                      ? p.return(null)
                      : ((u = r.segmentIndex.get(o)),
                        (l = qT(u.tilesLayout || r.tilesLayout))
                          ? p.return(QT(u, r, t, l))
                          : p.return(null)));
              });
            };
            function JT(e, t) {
              var n, r;
              return j(function (i) {
                return i.g == 1
                  ? (e.m != ln && e.m != nr) || ((n = e.Ke), e.i && (n = e.i.imageStreams), (r = n[0]), !r)
                    ? i.return(null)
                    : (t != null &&
                        (r = n.find(function (s) {
                          return s.id == t;
                        })),
                      r ? (r.segmentIndex ? i.A(2) : I(i, r.createSegmentIndex(), 2)) : i.return(null))
                  : i.return(r);
              });
            }
            function QT(e, t, n, r) {
              var i = t.width || 0,
                s = t.height || 0,
                o = i / r.columns,
                u = s / r.rows,
                l = r.columns * r.rows,
                p = e.j - e.startTime;
              p = e.B || p / l;
              var m = e.startTime,
                y = 0,
                v = 0;
              return (
                l > 1 &&
                  ((v = Math.floor((n - e.startTime) / p)),
                  (m = e.startTime + v * p),
                  (y = (v % r.columns) * o),
                  (v = Math.floor(v / r.columns) * u)),
                (r = !1),
                (n = e.thumbnailSprite) &&
                  ((r = !0), (u = n.height), (y = n.positionX), (v = n.positionY), (o = n.width)),
                {
                  segment: e,
                  imageHeight: s,
                  imageWidth: i,
                  height: u,
                  positionX: y,
                  positionY: v,
                  startTime: m,
                  duration: p,
                  uris: e.P(),
                  startByte: e.Jc(),
                  endByte: e.Hc(),
                  width: o,
                  sprite: r,
                  mimeType: e.mimeType || t.mimeType,
                  codecs: e.codecs || t.codecs,
                }
              );
            }
            h.ph = function (e) {
              function t() {
                var r = n.i.textStreams.find(function (i) {
                  return i.id == e.id;
                });
                r && r != n.l.B && (Xp(n.B.h, r, !1), Bc(n.l, r), Pi(n), Pu(n), (n.Kd = r.language));
              }
              var n = this;
              (this.i && this.G && (t(), !this.xa())) ||
                (function () {
                  if (n.h && n.h.textTracks) {
                    var r = dd(n),
                      i = r.find(function (u) {
                        return dc(u) === e.id;
                      });
                    if (i) {
                      if (n.u instanceof Wt) {
                        r = x(r);
                        for (var s = r.next(); !s.done; s = r.next()) {
                          s = s.value;
                          var o = s === i ? (n.$ ? "showing" : "hidden") : "disabled";
                          s.mode !== o && (s.mode = o);
                        }
                      } else
                        ((r = r.find(function (u) {
                          return u.mode !== "disabled";
                        })),
                          r !== i &&
                            (r && ((r.mode = "disabled"), n.j.Ma(r, "cuechange"), n.u.remove(0, 1 / 0)),
                            i && ZT(n, i)));
                      (Pi(n), Pu(n));
                    }
                  }
                })();
            };
            function ZT(e, t) {
              (e.j.D(t, "cuechange", function () {
                e.u.remove(0, Math.max(0, e.h.currentTime - e.g.streaming.bufferBehind));
                var n = { periodStart: 0, segmentStart: 0, segmentEnd: e.h.duration, vttOffset: 0 },
                  r = [],
                  i = Array.from(t.activeCues || []);
                i = x(i);
                for (var s = i.next(); !s.done; s = i.next()) {
                  if (((s = s.value), s.endTime === 1 / 0 || s.endTime < s.startTime)) s = null;
                  else {
                    var o = new pt(s.startTime, s.endTime, s.text);
                    ((o.line = typeof s.line == "number" ? s.line : null),
                      s.lineAlign && (o.lineAlign = s.lineAlign),
                      (o.lineInterpretation = s.snapToLines ? Ya : 1),
                      (o.position = typeof s.position == "number" ? s.position : null),
                      s.positionAlign && (o.positionAlign = s.positionAlign),
                      (o.size = s.size),
                      (o.textAlign = s.align),
                      s.vertical === "lr"
                        ? (o.writingMode = "vertical-lr")
                        : s.vertical === "rl" && (o.writingMode = "vertical-rl"),
                      s.region &&
                        ((o.region.id = s.region.id),
                        (o.region.height = s.region.lines),
                        (o.region.heightUnits = 2),
                        (o.region.regionAnchorX = s.region.regionAnchorX),
                        (o.region.regionAnchorY = s.region.regionAnchorY),
                        (o.region.scroll = s.region.scroll),
                        (o.region.viewportAnchorX = s.region.viewportAnchorX),
                        (o.region.viewportAnchorY = s.region.viewportAnchorY),
                        (o.region.viewportAnchorUnits = Jn),
                        (o.region.width = s.region.width),
                        (o.region.widthUnits = Jn)),
                      rc(o),
                      (s = o));
                  }
                  s && ((o = e.g.mediaSource.modifyCueCallback) && o(s, null, n), r.push(s));
                }
                e.u.append(r);
              }),
                (t.mode = document.pictureInPictureElement ? "showing" : "hidden"));
            }
            ((h.Jf = function (e, t, n) {
              function r() {
                var s = i.i.variants.find(function (u) {
                  return u.id == e.id;
                });
                if (s && ru(s)) {
                  var o = i.l.o;
                  (i.g.abr.enabled &&
                    (o.video != s.video ||
                      (o.audio &&
                        s.audio &&
                        o.audio.language == s.audio.language &&
                        o.audio.channelsCount == s.audio.channelsCount &&
                        o.audio.label == s.audio.label)) &&
                    je(
                      "Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack().",
                    ),
                    i.xa() ? _u(i, s, !1, !1, 0) : _u(i, s, !1, t || !1, n || 0),
                    i.J.configure({
                      language: s.language,
                      role: (s.audio && s.audio.roles && s.audio.roles[0]) || "",
                      videoRole: (s.video && s.video.roles && s.video.roles[0]) || "",
                      channelCount: s.audio && s.audio.channelsCount ? s.audio.channelsCount : 0,
                      hdrLevel: s.video && s.video.hdr ? s.video.hdr : "",
                      spatialAudio: s.audio && s.audio.spatialAudio ? s.audio.spatialAudio : !1,
                      videoLayout: s.video && s.video.videoLayout ? s.video.videoLayout : "",
                      audioLabel: s.audio && s.audio.label ? s.audio.label : "",
                      videoLabel: s.video && s.video.label ? s.video.label : "",
                      codecSwitchingStrategy: i.g.mediaSource.codecSwitchingStrategy,
                      audioCodec: s.audio && s.audio.codecs ? s.audio.codecs : "",
                      activeAudioCodec: o.audio && o.audio.codecs ? o.audio.codecs : "",
                      activeAudioChannelCount: o.audio && o.audio.channelsCount ? o.audio.channelsCount : 0,
                      preferredAudioCodecs: i.g.preferredAudioCodecs,
                      preferredAudioChannelCount: i.g.preferredAudioChannelCount,
                    }),
                    cs(i));
                }
              }
              var i = this;
              ((t = t === void 0 ? !1 : t),
                (n = n === void 0 ? 0 : n),
                !(this.i && this.G && (r(), !this.xa())) &&
                  (function () {
                    if (e.originalAudioId && i.h && i.h.audioTracks) {
                      var s = Array.from(i.h.audioTracks);
                      s = x(s);
                      for (var o = s.next(); !o.done; o = s.next())
                        if (((o = o.value), dc(o) == e.id)) {
                          pg(i, o);
                          break;
                        }
                    }
                  })());
            }),
              (h.Wk = function (e, t) {
                function n() {
                  var i = r.J.getConfiguration();
                  ((i.audioCodec = e.codecs || ""),
                    (i.audioLabel = e.label || ""),
                    (i.channelCount = e.channelsCount || 0),
                    (i.language = e.language),
                    (i.role = e.roles[0] || ""),
                    (i.spatialAudio = e.spatialAudio));
                  var s = r.l.o;
                  ((s = s && s.audio) &&
                    ((i.activeAudioCodec = s.codecs || ""),
                    (i.activeAudioChannelCount = s.channelsCount || 0)),
                    r.J.configure(i),
                    ds(r, !0, t, !1, !1));
                }
                var r = this;
                ((t = t === void 0 ? 0 : t),
                  !(this.i && this.G && (n(), !this.xa())) &&
                    (function () {
                      if (r.h && r.h.audioTracks) {
                        var i = tt(e.language),
                          s = Array.from(r.h.audioTracks),
                          o = null;
                        s = x(s);
                        for (var u = s.next(); !u.done; u = s.next()) {
                          u = u.value;
                          var l = u.language || "und";
                          if (u.label == e.label && tt(l) == i && u.kind == e.roles[0]) {
                            o = u;
                            break;
                          }
                        }
                        o && pg(r, o);
                      }
                    })());
              }),
              (h.getAudioTracks = function () {
                if (this.i && !this.xa()) {
                  var e = this.qc();
                  if (!e.length) return [];
                  var t = e.find(function (s) {
                    return s.active;
                  });
                  if (!t) return [];
                  var n = e;
                  if (
                    (this.m != ln ||
                      this.xa() ||
                      (n = e.filter(function (s) {
                        return (
                          s.originalVideoId === t.originalVideoId &&
                          (s.audioCodec || Ti.includes(s.audioMimeType || ""))
                        );
                      })),
                    !n.length)
                  )
                    return [];
                  ((e = new Map()), (n = x(n)));
                  for (var r = n.next(); !r.done; r = n.next()) {
                    r = r.value;
                    var i = r.originalAudioId;
                    (i || r.audioId == null || (i = String(r.audioId)),
                      !i && r.codecs.includes(",") && r.audioCodec && (i = "muxed-in-video"),
                      i &&
                        ((i += [
                          r.language,
                          r.label,
                          r.channelsCount,
                          r.spatialAudio,
                          r.audioCodec || "",
                        ].join("_")),
                        e.set(i, {
                          active: r.active,
                          language: r.language,
                          label: r.label,
                          mimeType: r.audioMimeType,
                          codecs: r.audioCodec,
                          primary: r.primary,
                          roles: r.audioRoles || [],
                          accessibilityPurpose: r.accessibilityPurpose,
                          channelsCount: r.channelsCount,
                          audioSamplingRate: r.audioSamplingRate,
                          spatialAudio: r.spatialAudio,
                          originalLanguage: r.originalLanguage,
                        })));
                  }
                  return Array.from(e.values());
                }
                return this.h && this.h.audioTracks
                  ? Array.from(this.h.audioTracks).map(function (s) {
                      var o = s.language;
                      return (
                        (o = {
                          active: s.enabled,
                          language: tt(o || "und"),
                          label: s.label,
                          mimeType: null,
                          codecs: null,
                          primary: s.kind == "main",
                          roles: [],
                          accessibilityPurpose: null,
                          channelsCount: null,
                          audioSamplingRate: null,
                          spatialAudio: !1,
                          originalLanguage: o,
                        }),
                        s.kind &&
                          (s.kind == "description" && (o.accessibilityPurpose = "visually impaired"),
                          o.roles.push(s.kind)),
                        s.configuration &&
                          (s.configuration.codec && (o.codecs = s.configuration.codec),
                          s.configuration.sampleRate && (o.audioSamplingRate = s.configuration.sampleRate),
                          s.configuration.numberOfChannels &&
                            (o.channelsCount = s.configuration.numberOfChannels)),
                        o
                      );
                    })
                  : [];
              }),
              (h.Yk = function (e, t, n) {
                ((t = t === void 0 ? !1 : t), (n = n === void 0 ? 0 : n));
                var r = this.qc();
                if (r.length) {
                  var i = r.find(function (o) {
                    return o.active;
                  });
                  if (i) {
                    r = r.filter(function (o) {
                      return (
                        (o.videoBandwidth || o.bandwidth) == e.bandwidth &&
                        o.width == e.width &&
                        o.height == e.height &&
                        o.frameRate == e.frameRate &&
                        o.pixelAspectRatio == e.pixelAspectRatio &&
                        o.hdr == e.hdr &&
                        o.colorGamut == e.colorGamut &&
                        o.videoLayout == e.videoLayout &&
                        o.videoMimeType == e.mimeType &&
                        o.videoCodec == e.codecs &&
                        $i(o.videoRoles, e.roles) &&
                        o.videoLabel == e.label
                      );
                    });
                    var s;
                    (r.length == 1
                      ? (s = r[0])
                      : (s = r.find(function (o) {
                          return o.audioId === i.audioId;
                        })),
                      s ||
                        (s = r.find(function (o) {
                          return (
                            o.language == i.language &&
                            o.label === i.label &&
                            o.channelsCount === i.channelsCount &&
                            o.spatialAudio === i.spatialAudio &&
                            o.audioMimeType === i.audioMimeType &&
                            fn(o.audioCodec || "") === fn(i.audioCodec || "") &&
                            $i(o.audioRoles, i.audioRoles)
                          );
                        })),
                      s && !s.active && this.Jf(s, t, n));
                  }
                }
              }),
              (h.getVideoTracks = function () {
                if (this.m == nr || this.xa()) return [];
                var e = this.qc();
                if (!e.length) return [];
                var t = e.find(function (s) {
                  return s.active;
                });
                if (!t) return [];
                var n = e;
                if (
                  (this.ti() ||
                    (n = e.filter(function (s) {
                      return s.videoCodec &&
                        s.audioGroupId === t.audioGroupId &&
                        s.originalAudioId === t.originalAudioId
                        ? s.audioId === t.audioId
                          ? !0
                          : s.language === t.language &&
                            s.label === t.label &&
                            s.channelsCount === t.channelsCount &&
                            s.spatialAudio === t.spatialAudio &&
                            s.audioMimeType === t.audioMimeType &&
                            fn(s.audioCodec || "") === fn(t.audioCodec || "") &&
                            $i(s.audioRoles, t.audioRoles)
                        : !1;
                    })),
                  !n.length)
                )
                  return [];
                ((e = new Map()), (n = x(n)));
                for (var r = n.next(); !r.done; r = n.next()) {
                  r = r.value;
                  var i = r.originalVideoId;
                  (i || r.videoId == null || (i = String(r.videoId)),
                    i &&
                      e.set(i, {
                        active: r.active,
                        bandwidth: r.videoBandwidth || r.bandwidth,
                        width: r.width,
                        height: r.height,
                        frameRate: r.frameRate,
                        pixelAspectRatio: r.pixelAspectRatio,
                        hdr: r.hdr,
                        colorGamut: r.colorGamut,
                        videoLayout: r.videoLayout,
                        mimeType: r.videoMimeType,
                        codecs: r.videoCodec,
                        roles: r.videoRoles || [],
                        label: r.videoLabel,
                      }));
                }
                return Array.from(e.values());
              }),
              (h.Dj = function () {
                return h1(this.qc());
              }),
              (h.$j = function () {
                return h1(this.Lc());
              }),
              (h.Cj = function () {
                return Array.from(f1(this.qc()));
              }),
              (h.Zj = function () {
                return Array.from(f1(this.Lc()));
              }),
              (h.Ti = function (e, t, n, r, i, s, o) {
                function u() {
                  function p(A, E) {
                    return A.video || E.video
                      ? A.video && E.video
                        ? Math.abs((A.video.height || 0) - (E.video.height || 0)) +
                          Math.abs((A.video.width || 0) - (E.video.width || 0))
                        : 1 / 0
                      : 0;
                  }
                  var m = l.l.o;
                  ((l.J = l.g.adaptationSetCriteriaFactory()),
                    l.J.configure({
                      language: e,
                      role: t || "",
                      videoRole: (m.video && m.video.roles && m.video.roles[0]) || "",
                      channelCount: n || 0,
                      hdrLevel: "",
                      spatialAudio: s || !1,
                      videoLayout: "",
                      audioLabel: o || "",
                      videoLabel: "",
                      codecSwitchingStrategy: l.g.mediaSource.codecSwitchingStrategy,
                      audioCodec: i || "",
                      activeAudioCodec: m.audio && m.audio.codecs ? m.audio.codecs : "",
                      activeAudioChannelCount: m.audio && m.audio.channelsCount ? m.audio.channelsCount : 0,
                      preferredAudioCodecs: l.g.preferredAudioCodecs,
                      preferredAudioChannelCount: l.g.preferredAudioChannelCount,
                    }));
                  var y = l.J.create(l.i.variants),
                    v = null;
                  y = x(y.values());
                  for (var w = y.next(); !w.done; w = y.next())
                    ((w = w.value), ru(w) && (!v || p(v, m) > p(w, m)) && (v = w));
                  v != m && (v ? ((m = Os(v)), l.Jf(m, !0, r || 0)) : ds(l));
                }
                var l = this;
                ((n = n === void 0 ? 0 : n),
                  (r = r === void 0 ? 0 : r),
                  (i = i === void 0 ? "" : i),
                  (s = s === void 0 ? !1 : s),
                  (o = o === void 0 ? "" : o),
                  !(this.i && this.G && (u(), !this.xa())) &&
                    (function () {
                      if (l.h && l.h.audioTracks) {
                        var p = wo(l.qc(), e, t || "", !1)[0];
                        p && l.Jf(p);
                      }
                    })());
              }),
              (h.oh = function (e, t, n) {
                function r() {
                  ((i.Kd = e), (i.Od = t || ""), (i.Nd = n || !1));
                  var s = wo(i.i.textStreams, i.Kd, i.Od, i.Nd)[0] || null;
                  s &&
                    s != i.l.B &&
                    (Xp(i.B.h, s, !1), i.g.streaming.alwaysStreamText || i.Sg()) &&
                    (Bc(i.l, s), Pi(i), Pu(i));
                }
                var i = this;
                ((n = n === void 0 ? !1 : n),
                  !(this.i && this.G && (r(), !this.xa())) &&
                    (function () {
                      var s = wo(i.Lc(), e, t || "", n || !1)[0];
                      s && i.ph(s);
                    })());
              }),
              (h.Xk = function (e, t, n) {
                function r() {
                  for (var s = null, o = x(i.i.variants), u = o.next(); !u.done; u = o.next())
                    if (((u = u.value), u.audio.label == e)) {
                      s = u;
                      break;
                    }
                  s != null &&
                    ((i.J = i.g.adaptationSetCriteriaFactory()),
                    i.J.configure({
                      language: s.language,
                      role: "",
                      videoRole: "",
                      channelCount: 0,
                      hdrLevel: "",
                      spatialAudio: !1,
                      videoLayout: "",
                      videoLabel: "",
                      audioLabel: e,
                      codecSwitchingStrategy: i.g.mediaSource.codecSwitchingStrategy,
                      audioCodec: "",
                      activeAudioCodec: "",
                      activeAudioChannelCount: 0,
                      preferredAudioCodecs: i.g.preferredAudioCodecs,
                      preferredAudioChannelCount: i.g.preferredAudioChannelCount,
                    }),
                    ds(i, t, n));
                }
                var i = this;
                ((t = t === void 0 ? !0 : t),
                  (n = n === void 0 ? 0 : n),
                  !(this.i && this.G && (r(), !this.xa())) &&
                    (function () {
                      if (i.h && i.h.audioTracks) {
                        var s = Array.from(i.h.audioTracks),
                          o = null;
                        s = x(s);
                        for (var u = s.next(); !u.done; u = s.next())
                          ((u = u.value), u.label == e && (o = u));
                        o && pg(i, o);
                      }
                    })());
              }),
              (h.Sg = function () {
                var e = this.$;
                return this.u ? this.u.isTextVisible() : e;
              }),
              (h.Hj = function () {
                return this.ob.map(function (e) {
                  return Us(e);
                });
              }),
              (h.Fj = function (e) {
                if ((qe("getChapters", "Please use an getChaptersAsync."), !this.ob.length)) return [];
                var t = tt(e);
                if (
                  ((e = this.ob.filter(function (s) {
                    return tt(s.language) == t;
                  })),
                  !e.length)
                )
                  return [];
                var n = [],
                  r = new Set();
                e = x(e);
                for (var i = e.next(); !i.done; i = e.next())
                  ((i = i.value),
                    i.segmentIndex &&
                      i.segmentIndex.Fb(function (s) {
                        var o = s.P()[0],
                          u = s.startTime + "-" + s.endTime + "-" + o;
                        ((s = { id: u, title: o, startTime: s.startTime, endTime: s.endTime }),
                          r.has(u) || (n.push(s), r.add(u)));
                      }));
                return n;
              }),
              (h.Gj = function (e) {
                var t = this,
                  n,
                  r,
                  i,
                  s,
                  o,
                  u,
                  l;
                return j(function (p) {
                  switch (p.g) {
                    case 1:
                      if (!t.ob.length) return p.return([]);
                      if (
                        ((n = tt(e)),
                        (r = t.ob.filter(function (m) {
                          return tt(m.language) == n;
                        })),
                        !r.length)
                      )
                        return p.return([]);
                      ((i = []), (s = new Set()), (o = x(r)), (u = o.next()));
                    case 2:
                      if (u.done) {
                        p.A(4);
                        break;
                      }
                      if (((l = u.value), l.segmentIndex)) {
                        p.A(5);
                        break;
                      }
                      return I(p, l.createSegmentIndex(), 5);
                    case 5:
                      (l.segmentIndex.Fb(function (m) {
                        var y = m.P()[0],
                          v = m.startTime + "-" + m.endTime + "-" + y;
                        ((m = { id: v, title: y, startTime: m.startTime, endTime: m.endTime }),
                          s.has(v) || (i.push(m), s.add(v)));
                      }),
                        (u = o.next()),
                        p.A(2));
                      break;
                    case 4:
                      return p.return(i);
                  }
                });
              }));
            function dd(e) {
              return Array.from(e.h.textTracks).filter(function (t) {
                return t.kind != "metadata" && t.kind != "chapters" && t.label != "Shaka Player TextTrack";
              });
            }
            function Nk(e) {
              return Array.from(e.h.textTracks).find(function (t) {
                return t.label == "Shaka Player TextTrack";
              });
            }
            function Ok(e) {
              return Array.from(e.h.textTracks).filter(function (t) {
                return t.kind == "metadata";
              });
            }
            ((h.wh = function (e) {
              ((e = !!e),
                this.$ != e &&
                  ((this.$ = e),
                  this.m == ln
                    ? (this.u.setTextVisibility(e),
                      this.g.streaming.alwaysStreamText ||
                        (e
                          ? this.l.B ||
                            ((e = wo(this.i.textStreams, this.Kd, this.Od, this.Nd)),
                            e.length > 0 && (Bc(this.l, e[0]), Pi(this), Pu(this)))
                          : uR(this.l)))
                    : this.h && this.h.src && this.h.textTracks && this.u.setTextVisibility(e),
                  l1(this)));
            }),
              (h.Tj = function () {
                if (this.G) var e = this.G.Qd();
                else {
                  if (this.O == null) return new Date();
                  if (this.O instanceof Date) return this.O;
                  e = this.O;
                }
                if (this.i && !this.xa()) {
                  var t = this.i.presentationTimeline;
                  return new Date(((t.m || t.i) + e) * 1e3);
                }
                return this.h && this.h.getStartDate
                  ? ((t = this.h.getStartDate()), isNaN(t.getTime()) ? null : new Date(t.getTime() + e * 1e3))
                  : null;
              }),
              (h.li = function () {
                if (this.i && !this.xa()) {
                  var e = this.i.presentationTimeline;
                  return ((e = e.m || e.i), e === null ? null : new Date(e * 1e3));
                }
                return this.h && this.h.getStartDate
                  ? ((e = this.h.getStartDate()), isNaN(e.getTime()) ? null : e)
                  : null;
              }),
              (h.df = function () {
                return this.W() && this.i ? this.i.presentationTimeline.df() : null;
              }),
              (h.Gc = function () {
                if (this.m == ln) return this.H.Gc();
                var e = { total: [], audio: [], video: [], text: [] };
                return (this.m == nr && (e.total = Ci(this.h.buffered)), e);
              }));
            function e1(e) {
              if (!e.h || !e.h.currentTime) return null;
              var t = e.li();
              return t ? Math.floor(Date.now() - (t.getTime() + e.h.currentTime * 1e3)) : null;
            }
            ((h.getBandwidthEstimate = function () {
              return this.o ? this.o.getBandwidthEstimate() : NaN;
            }),
              (h.getStats = function () {
                if (this.m != ln && this.m != nr)
                  return {
                    width: NaN,
                    height: NaN,
                    currentCodecs: "",
                    streamBandwidth: NaN,
                    decodedFrames: NaN,
                    droppedFrames: NaN,
                    corruptedFrames: NaN,
                    stallsDetected: NaN,
                    gapsJumped: NaN,
                    estimatedBandwidth: NaN,
                    completionPercent: NaN,
                    loadLatency: NaN,
                    manifestTimeSeconds: NaN,
                    drmTimeSeconds: NaN,
                    playTime: NaN,
                    pauseTime: NaN,
                    bufferingTime: NaN,
                    licenseTime: NaN,
                    liveLatency: NaN,
                    maxSegmentDuration: NaN,
                    manifestSizeBytes: NaN,
                    bytesDownloaded: NaN,
                    nonFatalErrorCount: NaN,
                    manifestPeriodCount: NaN,
                    manifestGapCount: NaN,
                    switchHistory: [],
                    stateHistory: [],
                  };
                hg(this);
                var e = this.h,
                  t = e.currentTime / e.duration;
                if (
                  (isNaN(t) || this.W() || NR(this.B, Math.round(100 * t)),
                  this.G && ((this.B.T = this.G.Lh()), (this.B.V = this.G.Nh())),
                  e.getVideoPlaybackQuality &&
                    ((t = e.getVideoPlaybackQuality()),
                    bR(this.B, Number(t.droppedVideoFrames), Number(t.totalVideoFrames)),
                    (this.B.N = Number(t.corruptedVideoFrames))),
                  (this.B.o = this.F ? HC(this.F) : NaN),
                  oT(this.B, e.videoWidth || NaN, e.videoHeight || NaN),
                  (this.B.l = ""),
                  this.W() && ((e = e1(this)), e != null && (this.B.F = e / 1e3)),
                  (t = this.qc().find(function (i) {
                    return i.active;
                  })),
                  (e = this.Lc().find(function (i) {
                    return i.active;
                  })),
                  t)
                ) {
                  if (t.bandwidth) {
                    var n = this.M ? this.M.i : 1,
                      r = n * t.bandwidth;
                    (e && e.bandwidth && (r += n * e.bandwidth), (this.B.B = r));
                  }
                  (t.width && t.height && oT(this.B, t.width || NaN, t.height || NaN),
                    (t = t.codecs),
                    e && (t += "," + (e.codecs || e.mimeType)),
                    t && (this.B.l = t));
                }
                return (
                  this.m != ln ||
                    this.xa() ||
                    (this.i &&
                      ((this.B.I = this.i.periodCount),
                      (this.B.H = this.i.gapCount),
                      this.i.presentationTimeline && (this.B.K = this.i.presentationTimeline.h)),
                    (e = this.o.getBandwidthEstimate()),
                    (this.B.u = e)),
                  this.m == nr && aT(this.B, NaN),
                  OR(this.B)
                );
              }),
              (h.Rd = function (e, t, n, r, i, s, o) {
                o = o === void 0 ? !1 : o;
                var u = this,
                  l,
                  p,
                  m,
                  y,
                  v,
                  w,
                  A,
                  E,
                  C,
                  k,
                  R,
                  L;
                return j(function (U) {
                  switch (U.g) {
                    case 1:
                      if (u.m != ln && u.m != nr) throw new H(1, 7, 7004);
                      if (
                        (n != "subtitles" &&
                          n != "captions" &&
                          je(
                            "Using a kind value different of `subtitles` or `captions` can cause unwanted issues.",
                          ),
                        r)
                      ) {
                        U.A(2);
                        break;
                      }
                      return I(U, fd(u, e), 3);
                    case 3:
                      r = U.h;
                    case 2:
                      if (((l = []), u.C && (l = u.C.getCuePoints()), u.m != nr)) {
                        U.A(4);
                        break;
                      }
                      return (
                        (p = Be()),
                        o && p.Ha() === "WEBKIT" && (n = "forced"),
                        I(U, Uk(u, e, t, n, r, s || "", l), 5)
                      );
                    case 5:
                      if (((m = U.h), m.track)) return (Pn(u), Pi(u), U.return(h0(m.track)));
                      throw new H(1, 2, 2012);
                    case 4:
                      if (
                        ((y = Ot),
                        (v = u.Ra()),
                        (w = v.end - v.start),
                        u.i && (w = u.i.presentationTimeline.getDuration()),
                        w == 1 / 0)
                      )
                        throw new H(1, 4, 4033);
                      if (!l.length) {
                        U.A(6);
                        break;
                      }
                      return I(U, hd(u, e), 7);
                    case 7:
                      ((A = U.h),
                        (E = t1(u, A, r, l)),
                        (C = new Blob([E], { type: "text/vtt" })),
                        (e = Sp(C)),
                        (r = "text/vtt"));
                    case 6:
                      if (
                        ((k = {
                          id: u.Fe++,
                          originalId: null,
                          groupId: null,
                          createSegmentIndex: function () {
                            return Promise.resolve();
                          },
                          segmentIndex: Nc(0, w, [e]),
                          mimeType: r || "",
                          codecs: i || "",
                          kind: n,
                          encrypted: !1,
                          drmInfos: [],
                          keyIds: new Set(),
                          language: t,
                          originalLanguage: t,
                          label: s || null,
                          type: y.Na,
                          primary: !1,
                          trickModeVideo: null,
                          dependencyStream: null,
                          emsgSchemeIdUris: null,
                          roles: [],
                          forced: !!o,
                          channelsCount: null,
                          audioSamplingRate: null,
                          spatialAudio: !1,
                          closedCaptions: null,
                          accessibilityPurpose: null,
                          external: !0,
                          fastSwitching: !1,
                          fullMimeTypes: new Set([Rt(r || "", i || "")]),
                          isAudioMuxedInVideo: !1,
                          baseOriginalId: null,
                        }),
                        (R = Rt(k.mimeType, k.codecs)),
                        (L = Qa(R)),
                        !L)
                      )
                        throw new H(2, 2, 2014, r);
                      return (u.i.textStreams.push(k), Pn(u), Pi(u), U.return(Us(k)));
                  }
                });
              }),
              (h.Pe = function (e, t) {
                var n = this,
                  r,
                  i,
                  s,
                  o,
                  u,
                  l,
                  p,
                  m,
                  y,
                  v,
                  w,
                  A,
                  E,
                  C,
                  k,
                  R,
                  L,
                  U;
                return j(function (G) {
                  switch (G.g) {
                    case 1:
                      if (n.m != ln && n.m != nr) throw new H(1, 7, 7004);
                      if (t) {
                        G.A(2);
                        break;
                      }
                      return I(G, fd(n, e), 3);
                    case 3:
                      t = G.h;
                    case 2:
                      if (t != "text/vtt") throw new H(1, 2, 2017, e);
                      if (
                        ((r = Ot),
                        (i = n.Ra()),
                        (s = i.end - i.start),
                        n.i && (s = n.i.presentationTimeline.getDuration()),
                        s == 1 / 0)
                      )
                        throw new H(1, 4, 4045);
                      return I(G, hd(n, e), 4);
                    case 4:
                      if (((o = G.h), (u = Ja(t)), !u)) throw new H(2, 2, 2014, t);
                      for (
                        l = u(),
                          p = { periodStart: 0, segmentStart: 0, segmentEnd: s, vttOffset: 0 },
                          m = De(o),
                          y = l.parseMedia(m, p, e, []),
                          v = [],
                          w = x(y),
                          A = w.next(),
                          E = {};
                        !A.done;
                        E = { Wf: void 0, nd: void 0 }, A = w.next()
                      )
                        ((E.nd = A.value),
                          (E.Wf = null),
                          (C = (function (b) {
                            return function () {
                              return (b.Wf == null && (b.Wf = qt([e], [b.nd.payload])), b.Wf || []);
                            };
                          })(E)),
                          (k = new Ce(E.nd.startTime, E.nd.endTime, C, 0, null, null, 0, 0, 1 / 0)),
                          E.nd.payload.includes("#xywh") &&
                            ((R = E.nd.payload.split("#xywh=")[1].split(",")),
                            R.length === 4 &&
                              k.Mf({
                                height: parseInt(R[3], 10),
                                positionX: parseInt(R[0], 10),
                                positionY: parseInt(R[1], 10),
                                width: parseInt(R[2], 10),
                              })),
                          v.push(k));
                      if (((L = t), !v.length)) {
                        G.A(5);
                        break;
                      }
                      return I(G, fd(n, v[0].P()[0]), 6);
                    case 6:
                      L = G.h;
                    case 5:
                      return (
                        (U = {
                          id: n.Fe++,
                          originalId: null,
                          groupId: null,
                          createSegmentIndex: function () {
                            return Promise.resolve();
                          },
                          segmentIndex: new Je(v),
                          mimeType: L || "",
                          codecs: "",
                          kind: "",
                          encrypted: !1,
                          drmInfos: [],
                          keyIds: new Set(),
                          language: "und",
                          originalLanguage: null,
                          label: null,
                          type: r.Yf,
                          primary: !1,
                          trickModeVideo: null,
                          dependencyStream: null,
                          emsgSchemeIdUris: null,
                          roles: [],
                          forced: !1,
                          channelsCount: null,
                          audioSamplingRate: null,
                          spatialAudio: !1,
                          closedCaptions: null,
                          tilesLayout: "1x1",
                          accessibilityPurpose: null,
                          external: !0,
                          fastSwitching: !1,
                          fullMimeTypes: new Set([Rt(L || "", "")]),
                          isAudioMuxedInVideo: !1,
                          baseOriginalId: null,
                        }),
                        n.m == nr ? n.Ke.push(U) : n.i.imageStreams.push(U),
                        Pn(n),
                        G.return($h(U))
                      );
                  }
                });
              }),
              (h.Oe = function (e, t, n) {
                var r = this,
                  i,
                  s,
                  o,
                  u,
                  l,
                  p,
                  m,
                  y,
                  v,
                  w,
                  A,
                  E,
                  C,
                  k,
                  R;
                return j(function (L) {
                  switch (L.g) {
                    case 1:
                      if (r.m != ln && r.m != nr) throw new H(1, 7, 7004);
                      if (n) {
                        L.A(2);
                        break;
                      }
                      return I(L, fd(r, e), 3);
                    case 3:
                      n = L.h;
                    case 2:
                      if (
                        ((i = Ot),
                        (s = r.Ra()),
                        (o = s.end - s.start),
                        r.i && (o = r.i.presentationTimeline.getDuration()),
                        o == 1 / 0)
                      )
                        throw new H(1, 4, 4055);
                      if (((u = Ja(n)), !u)) throw new H(2, 2, 2014, n);
                      return I(L, hd(r, e), 4);
                    case 4:
                      for (
                        l = L.h,
                          p = u(),
                          m = { periodStart: 0, segmentStart: 0, segmentEnd: o, vttOffset: 0 },
                          y = De(l),
                          v = p.parseMedia(y, m, e, []),
                          w = [],
                          A = x(v),
                          E = A.next(),
                          C = {};
                        !E.done;
                        C = { Xe: void 0 }, E = A.next()
                      )
                        ((C.Xe = E.value),
                          (k = new Ce(
                            C.Xe.startTime,
                            C.Xe.endTime,
                            (function (U) {
                              return function () {
                                return [U.Xe.payload];
                              };
                            })(C),
                            0,
                            null,
                            null,
                            0,
                            0,
                            1 / 0,
                          )),
                          w.push(k));
                      return (
                        (R = {
                          id: r.Fe++,
                          originalId: null,
                          groupId: null,
                          createSegmentIndex: function () {
                            return Promise.resolve();
                          },
                          segmentIndex: new Je(w),
                          mimeType: "text/plain",
                          codecs: "",
                          kind: "",
                          encrypted: !1,
                          drmInfos: [],
                          keyIds: new Set(),
                          language: t,
                          originalLanguage: t,
                          label: null,
                          type: i.Na,
                          primary: !1,
                          trickModeVideo: null,
                          dependencyStream: null,
                          emsgSchemeIdUris: null,
                          roles: [],
                          forced: !1,
                          channelsCount: null,
                          audioSamplingRate: null,
                          spatialAudio: !1,
                          closedCaptions: null,
                          accessibilityPurpose: null,
                          external: !0,
                          fastSwitching: !1,
                          fullMimeTypes: new Set([Rt("text/plain", "")]),
                          isAudioMuxedInVideo: !1,
                          baseOriginalId: null,
                        }),
                        r.ob.push(R),
                        Pn(r),
                        L.return(Us(R))
                      );
                  }
                });
              }));
            function fd(e, t) {
              var n;
              return j(function (r) {
                switch (r.g) {
                  case 1:
                    return (ee(r, 2), I(r, jo(t, e.N, e.g.streaming.retryParameters), 4));
                  case 4:
                    ((n = r.h), de(r, 3));
                    break;
                  case 2:
                    se(r);
                  case 3:
                    if (n) return r.return(n);
                    throw new H(1, 2, 2011, t);
                }
              });
            }
            function Uk(e, t, n, r, i, s, o) {
              var u, l, p, m;
              return j(function (y) {
                if (y.g == 1) return i != "text/vtt" || o.length ? I(y, hd(e, t), 3) : y.A(2);
                (y.g != 2 &&
                  ((u = y.h),
                  (l = t1(e, u, i, o)),
                  (p = new Blob([l], { type: "text/vtt" })),
                  (t = Sp(p)),
                  (i = "text/vtt")),
                  (m = document.createElement("track")));
                e: {
                  var v = e.K,
                    w = t;
                  try {
                    if (!v.g.enabled) {
                      var A = w;
                      break e;
                    }
                    var E = tg(v);
                    ((E.ot = sg), (E.su = !0));
                    var C = Ru(E);
                    A = ed(w, C);
                    break e;
                  } catch (k) {
                    (ur("CMCD_TEXT_TRACK_ERROR", "Could not generate text track CMCD data.", k), (A = w));
                    break e;
                  }
                  A = void 0;
                }
                return (
                  (m.src = A),
                  (m.label = s),
                  (m.kind = r),
                  (m.srclang = n),
                  e.h.getAttribute("crossorigin") || e.h.setAttribute("crossorigin", "anonymous"),
                  e.h.appendChild(m),
                  e.cg.push(m),
                  y.return(m)
                );
              });
            }
            function hd(e, t) {
              var n, r, i, s;
              return j(function (o) {
                if (o.g == 1) {
                  ((n = Ar), (r = e.g.streaming.retryParameters), (i = Ut([t], r)), (i.method = "GET"));
                  var u = e.K;
                  try {
                    u.g.enabled && zo(u, i, { ot: sg, su: !0 });
                  } catch (l) {
                    ur("CMCD_TEXT_ERROR", "Could not generate text CMCD data.", l);
                  }
                  return I(o, e.N.request(n, i).promise, 2);
                }
                return ((s = o.h), o.return(s.data));
              });
            }
            function t1(e, t, n, r) {
              var i = Ja(n);
              if (i)
                return (
                  (n = i()),
                  (e = { periodStart: 0, segmentStart: 0, segmentEnd: e.h.duration, vttOffset: 0 }),
                  (t = De(t)),
                  (t = n.parseMedia(t, e, null, [])),
                  ZR(t, r)
                );
              throw new H(2, 2, 2014, n);
            }
            ((h.fl = function (e, t) {
              ((this.ya.width = e), (this.ya.height = t));
            }),
              (h.kh = function (e) {
                if (this.m == ln) {
                  var t = this.l;
                  if (((e = e === void 0 ? 0.1 : e), t.l.g)) t = !1;
                  else if (t.F) t = !1;
                  else {
                    for (var n = x(t.h.values()), r = n.next(); !r.done; r = n.next())
                      ((r = r.value), !r.ce || r.Ka || r.qb || ((r.ce = !1), In(t, r, e)));
                    t = !0;
                  }
                } else t = !1;
                return t;
              }),
              (h.Lg = function () {
                return (
                  je(
                    "Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for.",
                  ),
                  this.i
                );
              }),
              (h.Qj = function () {
                return this.zc;
              }),
              (h.Lj = function () {
                var e = { video: null, audio: null, text: null };
                if (this.m != ln) return e;
                var t = this.l.o,
                  n = this.h.currentTime;
                t = x([t.video, t.audio, this.l.B]);
                for (var r = t.next(); !r.done; r = t.next())
                  if ((r = r.value) && r.segmentIndex) {
                    var i = r.segmentIndex.find(n);
                    ((i = r.segmentIndex.get(i)),
                      (i = {
                        codecs: i.codecs || r.codecs,
                        mimeType: i.mimeType || r.mimeType,
                        bandwidth: i.bandwidth || r.bandwidth,
                      }),
                      r.type == "video"
                        ? ((i.width = r.width), (i.height = r.height), (e.video = i))
                        : r.type == "audio"
                          ? (e.audio = i)
                          : r.type == Fe && (e.text = i));
                  }
                return e;
              }));
            function Qr(e) {
              var t = Ho();
              return (
                (t.streaming.failureCallback = function (n) {
                  if (e.W()) {
                    var r = null;
                    (n.code == 1001 || n.code == 1002
                      ? ((r = 1), e.g.streaming.lowLatencyMode && (r = 0.1))
                      : n.code == 1003 && (r = 0.1),
                      r != null && ((n.severity = 1), e.kh(r)));
                  }
                }),
                (t.textDisplayFactory = function () {
                  if (e.Be) {
                    var n = e.h;
                    n = !(
                      n.webkitDisplayingFullscreen ||
                      (n.webkitPresentationMode && n.webkitPresentationMode != "inline")
                    );
                  } else n = !1;
                  return n
                    ? new gn(e.h, e.Be)
                    : "track" in document.createElement("track")
                      ? new Wt(e)
                      : new pn();
                }),
                t
              );
            }
            h.Zi = function (e) {
              this.Be = e;
            };
            function jk(e, t) {
              for (var n = new Set(), r = x(t.textStreams), i = r.next(); !i.done; i = r.next())
                ((i = i.value),
                  (i.mimeType != "application/cea-608" && i.mimeType != "application/cea-708") ||
                    n.add(i.originalId));
              for (r = x(t.variants), i = r.next(); !i.done; i = r.next())
                if ((i = i.value.video) && i.closedCaptions) {
                  for (var s = x(i.closedCaptions.keys()), o = s.next(); !o.done; o = s.next())
                    if (((o = o.value), !n.has(o))) {
                      var u = o.startsWith("CC") ? "application/cea-608" : "application/cea-708",
                        l = new It(),
                        p = i.closedCaptions.get(o);
                      ((u = {
                        id: e.Fe++,
                        originalId: o,
                        groupId: null,
                        createSegmentIndex: function () {
                          return Promise.resolve();
                        },
                        segmentIndex: l,
                        mimeType: u,
                        codecs: "",
                        kind: "caption",
                        encrypted: !1,
                        drmInfos: [],
                        keyIds: new Set(),
                        language: p,
                        originalLanguage: p,
                        label: null,
                        type: Fe,
                        primary: !1,
                        trickModeVideo: null,
                        dependencyStream: null,
                        emsgSchemeIdUris: null,
                        roles: i.roles,
                        forced: !1,
                        channelsCount: null,
                        audioSamplingRate: null,
                        spatialAudio: !1,
                        closedCaptions: null,
                        accessibilityPurpose: null,
                        external: !1,
                        fastSwitching: !1,
                        fullMimeTypes: new Set([Rt(u, "")]),
                        isAudioMuxedInVideo: !1,
                        baseOriginalId: null,
                      }),
                        t.textStreams.push(u),
                        n.add(o));
                    }
                }
            }
            function Bk(e, t) {
              var n, r, i, s, o;
              return j(function (u) {
                return u.g == 1
                  ? ((n = e.audio),
                    (r = e.video),
                    (i = function (l, p) {
                      var m, y, v;
                      return j(function (w) {
                        return w.g == 1
                          ? l
                            ? l.segmentIndex
                              ? w.A(2)
                              : I(w, l.createSegmentIndex(), 2)
                            : w.return(null)
                          : ((y = (m = l.segmentIndex.Xb(p)) ? m.next().value : null),
                            y ? ((v = y.startTime), w.return(v)) : w.return(null));
                      });
                    }),
                    I(u, i(n, t), 2))
                  : u.g != 3
                    ? ((s = u.h), I(u, i(r, t), 3))
                    : ((o = u.h),
                      o != null && s != null
                        ? u.return(Math.max(o, s))
                        : o != null
                          ? u.return(o)
                          : s != null
                            ? u.return(s)
                            : u.return(t));
              });
            }
            function ku(e) {
              var t = e.Rg();
              if (e.B && e.R && e.G) {
                if (e.g.streaming.rebufferingGoal == 0) {
                  var n = e.M;
                  ((n.j = !1), Cp(n));
                } else ((n = e.M), (n.j = t), Cp(n));
                if (
                  (e.K &&
                    ((n = e.K),
                    t || n.F || (n.F = !0),
                    n.F && t && ((n.I = !0), mn(n, "ps", { dd: "r" })),
                    (n.J = t)),
                  hg(e),
                  (n = e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts),
                  e.g.streaming.liveSync.dynamicTargetLatency.enabled && t && e.Ne < n)
                ) {
                  n = e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;
                  var r = e.g.streaming.liveSync.targetLatencyTolerance,
                    i = e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;
                  e.V && (e.V = Math.min(e.V + ++e.Ne * i, n - r));
                }
              }
              ((t = new Map().set("buffering", t)), e.dispatchEvent(ct("buffering", t)));
            }
            function n1(e, t) {
              (e.dc.Qa(),
                e.dc.D(e.h, "timeupdate", function () {
                  var n = e.h.currentTime,
                    r = e.Ra(),
                    i = e.W(),
                    s = i ? e.g.streaming.safeSeekOffset : 0;
                  t > 0
                    ? i && t > 1 && Math.floor(n) >= Math.floor(r.end) && e.Sd()
                    : Math.floor(n) <= Math.floor(r.start + s) && e.Sd();
                }));
            }
            function hg(e) {
              if (e.B && e.R) {
                var t = e.B.g,
                  n = "playing";
                e.R.g == Bs ? (n = "buffering") : e.ge() ? (n = "ended") : e.h.paused && (n = "paused");
                var r = n;
                if (t.g == null) ((t.g = { timestamp: Date.now() / 1e3, state: r, duration: 0 }), (t = !0));
                else {
                  var i = Date.now() / 1e3;
                  ((t.g.duration = i - t.g.timestamp),
                    t.g.state == r
                      ? (t = !1)
                      : (t.h.push(t.g), (t.g = { timestamp: i, state: r, duration: 0 }), (t = !0)));
                }
                t && ((n = new Map().set("newstate", n)), e.dispatchEvent(ct("statechanged", n)));
              }
            }
            function r1(e) {
              var t = e.h.playbackRate,
                n = e.W();
              if (e.g.streaming.vodDynamicPlaybackRate && !n) {
                var r = e.g.streaming.vodDynamicPlaybackRateLowBufferRate,
                  i = e.ei();
                i <= e.g.streaming.vodDynamicPlaybackRateBufferRatio
                  ? t != r && e.xe(r, !1)
                  : i == 1 && t !== e.M.Tc() && e.Sd();
              }
              if (n && ((n = e.Ra()), Number.isFinite(n.end) && !(e.h.currentTime < n.start || e.h.paused))) {
                ((r = e.g.streaming.liveSync.targetLatencyTolerance),
                  (i = e.g.streaming.liveSync.dynamicTargetLatency.enabled));
                var s = e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;
                if (e.g.streaming.liveSync && e.g.streaming.liveSync.enabled)
                  var o = e.g.streaming.liveSync.targetLatency,
                    u = o + r,
                    l = Math.max(0, o - r),
                    p = e.g.streaming.liveSync.maxPlaybackRate,
                    m = e.g.streaming.liveSync.minPlaybackRate;
                else
                  e.i &&
                    e.i.serviceDescription &&
                    ((o = e.i.serviceDescription.targetLatency),
                    e.i.serviceDescription.targetLatency != null
                      ? (u = e.i.serviceDescription.targetLatency + r)
                      : e.i.serviceDescription.maxLatency != null && (u = e.i.serviceDescription.maxLatency),
                    e.i.serviceDescription.targetLatency != null
                      ? (l = Math.max(0, e.i.serviceDescription.targetLatency - r))
                      : e.i.serviceDescription.minLatency != null && (l = e.i.serviceDescription.minLatency),
                    (p = e.i.serviceDescription.maxPlaybackRate || e.g.streaming.liveSync.maxPlaybackRate),
                    (m = e.i.serviceDescription.minPlaybackRate || e.g.streaming.liveSync.minPlaybackRate));
                e.V || typeof o != "number" || (e.V = o);
                var y = e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;
                (i &&
                  e.cc &&
                  e.V !== null &&
                  typeof o == "number" &&
                  e.Ne < y &&
                  Date.now() - e.cc > s * 1e3 &&
                  ((s = e.g.streaming.liveSync.dynamicTargetLatency.minLatency),
                  (e.V = Math.max(e.V - (o - s) / 2, s + r)),
                  (e.cc = Date.now())),
                  i && e.V !== null && ((u = e.V + r), (l = e.V - r)),
                  (o = n.end - e.h.currentTime),
                  (r = 0),
                  e.m == nr &&
                    ((i = e.h.buffered),
                    i.length > 0 && ((r = i.end(i.length - 1)), (r = Math.max(p, r - n.end)))),
                  (n = e.g.streaming.liveSync.panicMode),
                  (i = e.g.streaming.liveSync.panicThreshold * 1e3),
                  (s = Date.now() - e.R.i),
                  n && !m && (m = e.g.streaming.liveSync.minPlaybackRate),
                  n && m && s <= i
                    ? t != m && e.xe(m, !1)
                    : u != null && p && o - r > u
                      ? (t != p && e.xe(p, !1), (e.cc = null))
                      : l != null && m && o - r < l
                        ? (t != m && e.xe(m, !1), (e.cc = null))
                        : t !== e.M.Tc() && (e.Sd(), (e.cc = Date.now())));
              }
            }
            function pd(e) {
              if (e.h) {
                var t = function (i, s) {
                    return (BT(i, s, 0.01) || s > i) && e.ag < i ? ((e.ag = i), !0) : !1;
                  },
                  n = e.Ra();
                if (((n = n.end - n.start), (n = n > 0 ? e.h.currentTime / n : 0), !isNaN(n))) {
                  if (((n *= 100), t(0, n))) var r = ct("started");
                  else
                    t(25, n)
                      ? (r = ct("firstquartile"))
                      : t(50, n)
                        ? (r = ct("midpoint"))
                        : t(75, n)
                          ? (r = ct("thirdquartile"))
                          : ((t(100, n) || n > 100) && (r = ct("complete")),
                            e.g && e.g.playRangeEnd != 1 / 0 && e.ge() && e.h.pause());
                  r && e.dispatchEvent(r);
                }
              }
            }
            function cs(e) {
              try {
                Y0(e.Ee, e.i);
              } catch (n) {
                return (Wo(e, n), !1);
              }
              var t = hc(e.i.variants);
              return (
                (t = e.J.create(t)),
                (e = e.o.setVariants(Array.from(t.values()))),
                typeof e == "boolean" ? e : !0
              );
            }
            function i1(e, t) {
              if (((t = t === void 0 ? !1 : t), cs(e))) {
                if (!e.g.abr.enabled) {
                  var n = e.J;
                  if (
                    (typeof n.getLastAdaptationSet != "function" &&
                      (qe(
                        "AdaptationSetCriteria w/o getLastAdaptationSet",
                        "Please use an AdaptationSetCriteria with getLastAdaptationSet.",
                      ),
                      (n.getLastAdaptationSet = function () {
                        return null;
                      })),
                    (n = n.getLastAdaptationSet()) && ((n = Array.from(n.values())), n.length))
                  ) {
                    var r = e.l.o;
                    if (
                      r &&
                      r.video &&
                      (n = n.find(function (i) {
                        return i.video == r.video;
                      }))
                    )
                      return n;
                  }
                }
                return e.o.chooseVariant(t);
              }
              return null;
            }
            function ds(e, t, n, r, i) {
              ((t = t === void 0 ? !0 : t),
                (n = n === void 0 ? 0 : n),
                (r = r === void 0 ? !1 : r),
                (i = i === void 0 ? !0 : i));
              var s = i1(e);
              s && _u(e, s, i, t, n, r);
            }
            function _u(e, t, n, r, i, s) {
              s = s === void 0 ? !1 : s;
              var o = e.l.o;
              if (t == o) r && qx(e.l, t, r, i, !0);
              else {
                var u = e.B.h;
                if (
                  (u.h != t &&
                    ((u.h = t),
                    u.g.push({
                      timestamp: Date.now() / 1e3,
                      id: t.id,
                      type: "variant",
                      fromAdaptation: n,
                      bandwidth: t.bandwidth,
                    })),
                  qx(e.l, t, r, i, s, n),
                  (r = null),
                  o && (r = Os(o)),
                  (o = Os(t)),
                  (o.active = !0),
                  e.T && ((i = e.T), (t = t.video)))
                ) {
                  switch ((t.dependencyStream && (t = t.dependencyStream), (s = 0), (u = -1), t.mimeType)) {
                    case "video/webm":
                      s = 1;
                      break;
                    case "video/mp4":
                      s = 2;
                  }
                  switch (e.ii()) {
                    case "DASH":
                      u = 1;
                      break;
                    case "HLS":
                      u = 0;
                  }
                  i.g &&
                    (i.g.setLevelSwitching(t.id, !0),
                    i.g.setContainerFormat(s),
                    i.j || i.g.setStreamingFormat(u));
                }
                (n
                  ? ((n = new Map().set("oldTrack", r).set("newTrack", o)),
                    (n = ct("adaptation", n)),
                    Ks(e, n))
                  : o1(e, r, o),
                  a1(e, r, o));
              }
            }
            function pg(e, t) {
              var n = Array.from(e.h.audioTracks).find(function (i) {
                return i.enabled;
              });
              if (((t.enabled = !0), n)) {
                t.id !== n.id && (n.enabled = !1);
                var r = s1(e);
                ((n = fc(n, r)), (t = fc(t, r)), o1(e, n, t), a1(e, n, t));
              }
            }
            function s1(e) {
              return e.h && e.h.videoTracks
                ? Array.from(e.h.videoTracks).find(function (t) {
                    return t.selected;
                  })
                : null;
            }
            function Pn(e) {
              var t = ct("trackschanged");
              (Ks(e, t), u1(e));
            }
            function o1(e, t, n) {
              ((t = new Map().set("oldTrack", t).set("newTrack", n)),
                (t = ct("variantchanged", t)),
                Ks(e, t));
            }
            function a1(e, t, n) {
              var r = !1;
              ((t && t.audioId == n.audioId && t.audioGroupId == n.audioGroupId) || (r = !0), r && u1(e));
            }
            function u1(e) {
              var t = ct("audiotrackschanged");
              Ks(e, t);
            }
            function Pi(e) {
              var t = ct("textchanged");
              Ks(e, t);
            }
            function l1(e) {
              var t = ct("texttrackvisibility");
              Ks(e, t);
            }
            function c1(e) {
              e.g.abr.enabled || gg(e);
              var t = new Map().set("newStatus", e.g.abr.enabled);
              Ks(e, ct("abrstatuschanged", t));
            }
            function Pu(e) {
              var t = e.Lc().find(function (n) {
                return n.active;
              });
              t && e.u && e.u.setTextLanguage && e.u.setTextLanguage(t.language);
            }
            function gg(e, t) {
              if (((t = t === void 0 ? !0 : t), e.m == ln)) {
                e.He.stop();
                for (var n = x(e.i.variants), r = n.next(); !r.done; r = n.next())
                  r.value.disabledUntilTime = 0;
                t && cs(e);
              }
            }
            h.disableStream = function (e, t) {
              if (!this.g.abr.enabled || this.m === Fr || !navigator.onLine || t == 0 || !this.i) return !1;
              if (
                this.i.variants.some(function (u) {
                  var l = u[e.type];
                  return l && l.id !== e.id && !u.disabledUntilTime
                    ? e.type == "audio"
                      ? e.language === l.language
                      : !0
                    : !1;
                })
              ) {
                for (var n = !1, r = !1, i = x(this.i.variants), s = i.next(); !s.done; s = i.next()) {
                  s = s.value;
                  var o = s[e.type];
                  o &&
                    (o.id === e.id
                      ? ((s.disabledUntilTime = Date.now() / 1e3 + t), (n = !0))
                      : o.trickModeVideo && o.trickModeVideo.id == e.id && (r = !0));
                }
                return !n && r
                  ? !1
                  : (this.He.Ea(1),
                    (t = this.Gc().video.reduce(function (u, l) {
                      return u + l.end - l.start;
                    }, 0)),
                    ds(this, !1, t, !0, !1),
                    !0);
              }
              return !1;
            };
            function Wo(e, t) {
              var n, r, i, s, o;
              return j(function (u) {
                switch (u.g) {
                  case 1:
                    if (e.m == Fr) return u.return();
                    if (
                      (t.severity === 1 && e.B.M++,
                      (n = !0),
                      !(e.Ua && e.i && e.l) ||
                        (t.code != 3016 &&
                          t.code != 3014 &&
                          t.code != 3015 &&
                          t.code != 3024 &&
                          t.code != 3018))
                    ) {
                      u.A(2);
                      break;
                    }
                    return (
                      (r = Be()),
                      r.Ha() === "WEBKIT" && t.code == 3016 ? u.return() : (ee(u, 3), I(u, zc(e.l), 5))
                    );
                  case 5:
                    ((i = u.h),
                      (n = !i),
                      i && ((s = ct("mediasourcerecovered")), e.dispatchEvent(s)),
                      de(u, 2));
                    break;
                  case 3:
                    (se(u), (n = !0));
                  case 2:
                    if (!n) return u.return();
                    (t.severity === 2 && gg(e, !1),
                      (o = ct("error", new Map().set("detail", t))),
                      e.dispatchEvent(o),
                      o.defaultPrevented && (t.handled = !0),
                      re(u));
                }
              });
            }
            h.addFont = function (e, t) {
              return wM(e, t);
            };
            function Du(e, t, n, r) {
              ((r = r === void 0 ? e : r),
                (e = new Map().set("detail", {
                  schemeIdUri: n.schemeIdUri,
                  value: n.value,
                  startTime: n.startTime,
                  endTime: n.endTime,
                  id: n.id,
                  timescale: n.timescale,
                  eventElement: n.eventElement,
                  eventNode: n.eventNode,
                })),
                r.dispatchEvent(ct(t, e)));
            }
            function d1(e, t, n, r) {
              ((r = r === void 0 ? !1 : r),
                (t = new Map()
                  .set("mediaQuality", {
                    bandwidth: t.bandwidth,
                    audioSamplingRate: t.audioSamplingRate,
                    codecs: t.codecs,
                    contentType: t.contentType,
                    frameRate: t.frameRate,
                    height: t.height,
                    mimeType: t.mimeType,
                    channelsCount: t.channelsCount,
                    pixelAspectRatio: t.pixelAspectRatio,
                    width: t.width,
                    label: t.label,
                    roles: t.roles,
                    language: t.language,
                  })
                  .set("position", n)),
                e.dispatchEvent(ct(r ? "audiotrackchanged" : "mediaqualitychanged", t)));
            }
            function mg(e, t) {
              if (((t = t === void 0 ? !0 : t), !e.h.error)) return t ? new H(2, 3, 3016) : null;
              var n = e.h.error.code;
              return !t && n == 1
                ? null
                : ((t = e.h.error.msExtendedCode) && (t < 0 && (t += 4294967296), (t = t.toString(16))),
                  new H(2, 3, 3016, n, t, e.h.error.message));
            }
            function Fk(e, t) {
              var n = ct("keystatuschanged");
              e.dispatchEvent(n);
              var r = Object.keys(t);
              r.length == 1 && r[0] == "" && ((r = ["00"]), (t = { "00": t[""] }));
              var i = r.length == 1 && r[0] == "00";
              if (((n = !1), r.length)) {
                r = e.keySystem();
                for (
                  var s = Co(e.g.drm.clearKeys),
                    o = function (A, E) {
                      ((A.allowedByKeySystem = !0), (E = x(E)));
                      for (var C = E.next(); !C.done; C = E.next())
                        ((C = C.value),
                          ((C = t[i ? "00" : C]) || e.F.H) &&
                            (A.allowedByKeySystem = A.allowedByKeySystem && !!C && !q0.includes(C)));
                    },
                    u = x(e.i.variants),
                    l = u.next();
                  !l.done;
                  l = u.next()
                ) {
                  l = l.value;
                  var p = CC(l);
                  p = x(p);
                  for (var m = p.next(); !m.done; m = p.next()) {
                    m = m.value;
                    var y = l.allowedByKeySystem;
                    if (m.keyIds.size)
                      if (m.drmInfos.length && !s.size && e.i.type == "HLS")
                        for (var v = x(m.drmInfos), w = v.next(); !w.done; w = v.next())
                          ((w = w.value),
                            w.keySystem == r && (w.keyIds.size ? o(l, w.keyIds) : o(l, m.keyIds)));
                      else o(l, m.keyIds);
                    y != l.allowedByKeySystem && (n = !0);
                  }
                }
              }
              n && (Pn(e), (n = e.l.o) && !n.allowedByKeySystem ? ds(e) : cs(e));
            }
            function yg(e, t, n) {
              (t > 0 && (e.W() || e.Yi(t)), (t = e.getDuration()), n < t && (e.W() || e.Ab(n)));
            }
            function Ks(e, t) {
              j(function (n) {
                if (n.g == 1) return I(n, Promise.resolve(), 2);
                (e.m != Fr && e.dispatchEvent(t), re(n));
              });
            }
            function f1(e) {
              var t = new Set();
              e = x(e);
              for (var n = e.next(); !n.done; n = e.next())
                ((n = n.value), n.language ? t.add(tt(n.language)) : t.add("und"));
              return t;
            }
            function h1(e) {
              for (var t = new Map(), n = new Map(), r = 0; r < e.length; r++) {
                var i = e[r],
                  s = "und",
                  o = [];
                (i.language && (s = tt(i.language)),
                  i.type == "variant" ? (o = i.audioRoles) : (o = i.roles),
                  (o && o.length) || (o = [""]),
                  t.has(s) || t.set(s, new Set()),
                  (o = x(o)));
                for (var u = o.next(); !u.done; u = o.next())
                  ((u = u.value),
                    t.get(s).add(u),
                    i.label && (n.has(s) || n.set(s, new Map()), n.get(s).set(u, i.label)));
              }
              var l = [];
              return (
                t.forEach(function (p, m) {
                  p = x(p);
                  for (var y = p.next(); !y.done; y = p.next()) {
                    y = y.value;
                    var v = null;
                    (n.has(m) && n.get(m).has(y) && (v = n.get(m).get(y)),
                      l.push({ language: m, role: y, label: v }));
                  }
                }),
                l
              );
            }
            ((h.xa = function () {
              return this.h && this.h.remote ? this.h.remote.state != "disconnected" : !1;
            }),
              (h.ge = function () {
                return !this.h || this.h.ended
                  ? !0
                  : this.Ua && !this.W() && this.h.currentTime >= this.Ra().end;
              }),
              fe("shaka.Player", te),
              (te.prototype.isEnded = te.prototype.ge),
              (te.prototype.isRemotePlayback = te.prototype.xa),
              (te.prototype.addFont = te.prototype.addFont),
              (te.prototype.setVideoContainer = te.prototype.Zi),
              (te.prototype.getFetchedPlaybackInfo = te.prototype.Lj),
              (te.prototype.getManifestParserFactory = te.prototype.Qj),
              (te.prototype.getManifest = te.prototype.Lg),
              (te.prototype.retryStreaming = te.prototype.kh),
              (te.prototype.setMaxHardwareResolution = te.prototype.fl),
              (te.prototype.addChaptersTrack = te.prototype.Oe),
              (te.prototype.addThumbnailsTrack = te.prototype.Pe),
              (te.prototype.addTextTrackAsync = te.prototype.Rd),
              (te.prototype.getStats = te.prototype.getStats),
              (te.prototype.getBufferedInfo = te.prototype.Gc),
              (te.prototype.getSegmentAvailabilityDuration = te.prototype.df),
              (te.prototype.getPresentationStartTimeAsDate = te.prototype.li),
              (te.prototype.getPlayheadTimeAsDate = te.prototype.Tj),
              (te.prototype.setTextTrackVisibility = te.prototype.wh),
              (te.prototype.getChaptersAsync = te.prototype.Gj),
              (te.prototype.getChapters = te.prototype.Fj),
              (te.prototype.getChaptersTracks = te.prototype.Hj),
              (te.prototype.isTextTrackVisible = te.prototype.Sg),
              (te.prototype.selectVariantsByLabel = te.prototype.Xk),
              (te.prototype.selectTextLanguage = te.prototype.oh),
              (te.prototype.selectAudioLanguage = te.prototype.Ti),
              (te.prototype.getTextLanguages = te.prototype.Zj),
              (te.prototype.getAudioLanguages = te.prototype.Cj),
              (te.prototype.getTextLanguagesAndRoles = te.prototype.$j),
              (te.prototype.getAudioLanguagesAndRoles = te.prototype.Dj),
              (te.prototype.getVideoTracks = te.prototype.getVideoTracks),
              (te.prototype.selectVideoTrack = te.prototype.Yk),
              (te.prototype.getAudioTracks = te.prototype.getAudioTracks),
              (te.prototype.selectAudioTrack = te.prototype.Wk),
              (te.prototype.selectVariantTrack = te.prototype.Jf),
              (te.prototype.selectTextTrack = te.prototype.ph),
              (te.prototype.getThumbnails = te.prototype.ck),
              (te.prototype.getAllThumbnails = te.prototype.Bj),
              (te.prototype.getImageTracks = te.prototype.Nj),
              (te.prototype.getTextTracks = te.prototype.Lc),
              (te.prototype.getVariantTracks = te.prototype.qc),
              (te.prototype.cancelTrickPlay = te.prototype.Sd),
              (te.prototype.trickPlay = te.prototype.xe),
              (te.prototype.useTrickPlayTrackIfAvailable = te.prototype.Kh),
              (te.prototype.getPlaybackRate = te.prototype.Ob),
              (te.prototype.isBuffering = te.prototype.Rg),
              (te.prototype.getKeyStatuses = te.prototype.$e),
              (te.prototype.getActiveSessionsMetadata = te.prototype.Kg),
              (te.prototype.getExpiration = te.prototype.Zd),
              (te.prototype.drmInfo = te.prototype.drmInfo),
              (te.prototype.keySystem = te.prototype.keySystem),
              (te.prototype.isFullyLoaded = te.prototype.nk),
              (te.prototype.goToLive = te.prototype.ik),
              (te.prototype.seekRange = te.prototype.Ra),
              (te.prototype.isVideoOnly = te.prototype.ti),
              (te.prototype.isAudioOnly = te.prototype.lk),
              (te.prototype.isInProgress = te.prototype.Vc),
              (te.prototype.isLive = te.prototype.W),
              (te.prototype.getQueueManager = te.prototype.mi),
              (te.prototype.getAdManager = te.prototype.di),
              (te.prototype.getAssetUri = te.prototype.rd),
              (te.prototype.getNetworkingEngine = te.prototype.Yb),
              (te.prototype.getMediaElement = te.prototype.bf),
              (te.prototype.getManifestType = te.prototype.ii),
              (te.prototype.getLoadMode = te.prototype.$d),
              (te.prototype.resetConfiguration = te.prototype.Oi),
              (te.prototype.getBufferFullness = te.prototype.ei),
              (te.prototype.getNonDefaultConfiguration = te.prototype.ki),
              (te.prototype.getConfigurationForLowLatency = te.prototype.Ij),
              (te.prototype.getConfiguration = te.prototype.getConfiguration),
              (te.prototype.configurationForLowLatency = te.prototype.yj),
              (te.prototype.configure = te.prototype.configure),
              (te.prototype.releaseAllMutexes = te.prototype.Ok),
              (te.prototype.destroyAllPreloads = te.prototype.rg),
              (te.prototype.preload = te.prototype.preload),
              (te.prototype.detachAndSavePreload = te.prototype.$h),
              (te.prototype.unloadAndSavePreload = te.prototype.jj),
              (te.prototype.load = te.prototype.load),
              (te.prototype.updateStartTime = te.prototype.ql),
              (te.prototype.unload = te.prototype.Cc),
              (te.prototype.detach = te.prototype.detach),
              (te.prototype.attachCanvas = te.prototype.qj),
              (te.prototype.attach = te.prototype.Vb),
              (te.probeSupport = function (e) {
                e = e === void 0 ? !0 : e;
                var t, n, r, i, s, o, u;
                return j(function (l) {
                  switch (l.g) {
                    case 1:
                      if (((t = {}), !e)) {
                        l.A(2);
                        break;
                      }
                      return I(l, KC(), 3);
                    case 3:
                      t = l.h;
                    case 2:
                      return ((n = sC()), (r = kM()), (i = Be()), I(l, i.lc(), 4));
                    case 4:
                      return (
                        (s = l.h),
                        (o = { manifest: n, media: r, drm: t, hardwareResolution: s }),
                        (u = g1),
                        u.forEach(function (p, m) {
                          o[m] = p();
                        }),
                        l.return(o)
                      );
                  }
                });
              }),
              (te.isBrowserSupported = function () {
                return (
                  g.Promise || je("A Promise implementation or polyfill is required"),
                  !(g.Promise && g.Uint8Array && Array.prototype.forEach) ||
                  (navigator.userAgent || "").includes("Trident/")
                    ? !1
                    : (Be(), oi() ? !0 : Hs().canPlayType("application/x-mpegurl") != "")
                );
              }),
              (te.setQueueManagerFactory = function (e) {
                yd = e;
              }),
              (te.setAdManagerFactory = function (e) {
                md = e;
              }),
              (te.registerSupportPlugin = FT),
              (te.prototype.destroy = te.prototype.destroy));
            var Fr = 0,
              gd = 1,
              ln = 2,
              nr = 3;
            ((te.LoadMode = { DESTROYED: Fr, NOT_LOADED: gd, MEDIA_SOURCE: ln, SRC_EQUALS: nr }),
              (te.version = "v4.16.12"));
            var p1 = ["4", "16"];
            Cv = new (function (e) {
              ((this.g = e), (this.i = J2), (this.h = Q2));
            })(new Ah(Number(p1[0]), Number(p1[1])));
            var g1 = new Map(),
              md = null,
              yd = null;
            function m1() {
              ((this.g = []), (this.i = this.m = this.l = this.j = this.h = 0));
            }
            function Vk(e) {
              return e.g.length
                ? e.g.reduce(function (t, n) {
                    return t + n;
                  }, 0) / e.g.length
                : 0;
            }
            function Me(e, t, n) {
              var r = this;
              ((this.g = e),
                (this.h = t),
                (this.m = n),
                (this.i = !1),
                (this.j = this.h.getVolume()),
                (this.l = new et()),
                this.l.D(this.h, google.ima.AdEvent.Type.PAUSED, function () {
                  r.i = !0;
                }),
                this.l.D(this.h, google.ima.AdEvent.Type.RESUMED, function () {
                  r.i = !1;
                }));
            }
            ((h = Me.prototype),
              (h.needsSkipUI = function () {
                return !1;
              }),
              (h.isClientRendering = function () {
                return !0;
              }),
              (h.hasCustomClick = function () {
                return !0;
              }),
              (h.isUsingAnotherMediaElement = function () {
                return !0;
              }),
              (h.getDuration = function () {
                return this.g.getDuration();
              }),
              (h.getMinSuggestedDuration = function () {
                return this.g.getMinSuggestedDuration();
              }),
              (h.getRemainingTime = function () {
                return this.h.getRemainingTime();
              }),
              (h.isPaused = function () {
                return this.i;
              }),
              (h.isSkippable = function () {
                return this.g.getSkipTimeOffset() >= 0;
              }),
              (h.getTimeUntilSkippable = function () {
                var e = this.g.getSkipTimeOffset();
                return ((e = this.getRemainingTime() - e), Math.max(e, 0));
              }),
              (h.canSkipNow = function () {
                return this.h.getAdSkippableState();
              }),
              (h.skip = function () {
                return this.h.skip();
              }),
              (h.pause = function () {
                return this.h.pause();
              }),
              (h.play = function () {
                return this.h.resume();
              }),
              (h.getVolume = function () {
                return this.h.getVolume();
              }),
              (h.setVolume = function (e) {
                return ((this.m.volume = e), this.h.setVolume(e));
              }),
              (h.isMuted = function () {
                return this.h.getVolume() == 0;
              }),
              (h.isLinear = function () {
                return this.g.isLinear();
              }),
              (h.resize = function (e, t) {
                this.h.resize(e, t);
              }),
              (h.setMuted = function (e) {
                (this.m.muted = e)
                  ? ((this.j = this.getVolume()), this.h.setVolume(0))
                  : this.h.setVolume(this.j);
              }),
              (h.getSequenceLength = function () {
                var e = this.g.getAdPodInfo();
                return e == null ? 1 : e.getTotalAds();
              }),
              (h.getPositionInSequence = function () {
                var e = this.g.getAdPodInfo();
                return e == null ? 1 : e.getAdPosition();
              }),
              (h.getTitle = function () {
                return this.g.getTitle();
              }),
              (h.getDescription = function () {
                return this.g.getDescription();
              }),
              (h.getVastMediaBitrate = function () {
                return this.g.getVastMediaBitrate();
              }),
              (h.getVastMediaHeight = function () {
                return this.g.getVastMediaHeight();
              }),
              (h.getVastMediaWidth = function () {
                return this.g.getVastMediaWidth();
              }),
              (h.getVastAdId = function () {
                return "";
              }),
              (h.getAdId = function () {
                return this.g.getAdId();
              }),
              (h.getCreativeAdId = function () {
                return this.g.getCreativeAdId();
              }),
              (h.getAdvertiserName = function () {
                return this.g.getAdvertiserName();
              }),
              (h.getMediaUrl = function () {
                return this.g.getMediaUrl();
              }),
              (h.getTimeOffset = function () {
                var e = this.g.getAdPodInfo();
                return e == null ? 0 : e.getTimeOffset();
              }),
              (h.getPodIndex = function () {
                var e = this.g.getAdPodInfo();
                return e == null ? 0 : e.getPodIndex();
              }),
              (h.release = function () {
                this.h = this.g = null;
              }),
              fe("shaka.ads.ClientSideAd", Me),
              (Me.prototype.release = Me.prototype.release),
              (Me.prototype.getPodIndex = Me.prototype.getPodIndex),
              (Me.prototype.getTimeOffset = Me.prototype.getTimeOffset),
              (Me.prototype.getMediaUrl = Me.prototype.getMediaUrl),
              (Me.prototype.getAdvertiserName = Me.prototype.getAdvertiserName),
              (Me.prototype.getCreativeAdId = Me.prototype.getCreativeAdId),
              (Me.prototype.getAdId = Me.prototype.getAdId),
              (Me.prototype.getVastAdId = Me.prototype.getVastAdId),
              (Me.prototype.getVastMediaWidth = Me.prototype.getVastMediaWidth),
              (Me.prototype.getVastMediaHeight = Me.prototype.getVastMediaHeight),
              (Me.prototype.getVastMediaBitrate = Me.prototype.getVastMediaBitrate),
              (Me.prototype.getDescription = Me.prototype.getDescription),
              (Me.prototype.getTitle = Me.prototype.getTitle),
              (Me.prototype.getPositionInSequence = Me.prototype.getPositionInSequence),
              (Me.prototype.getSequenceLength = Me.prototype.getSequenceLength),
              (Me.prototype.setMuted = Me.prototype.setMuted),
              (Me.prototype.resize = Me.prototype.resize),
              (Me.prototype.isLinear = Me.prototype.isLinear),
              (Me.prototype.isMuted = Me.prototype.isMuted),
              (Me.prototype.setVolume = Me.prototype.setVolume),
              (Me.prototype.getVolume = Me.prototype.getVolume),
              (Me.prototype.play = Me.prototype.play),
              (Me.prototype.pause = Me.prototype.pause),
              (Me.prototype.skip = Me.prototype.skip),
              (Me.prototype.canSkipNow = Me.prototype.canSkipNow),
              (Me.prototype.getTimeUntilSkippable = Me.prototype.getTimeUntilSkippable),
              (Me.prototype.isSkippable = Me.prototype.isSkippable),
              (Me.prototype.isPaused = Me.prototype.isPaused),
              (Me.prototype.getRemainingTime = Me.prototype.getRemainingTime),
              (Me.prototype.getMinSuggestedDuration = Me.prototype.getMinSuggestedDuration),
              (Me.prototype.getDuration = Me.prototype.getDuration),
              (Me.prototype.isUsingAnotherMediaElement = Me.prototype.isUsingAnotherMediaElement),
              (Me.prototype.hasCustomClick = Me.prototype.hasCustomClick),
              (Me.prototype.isClientRendering = Me.prototype.isClientRendering),
              (Me.prototype.needsSkipUI = Me.prototype.needsSkipUI));
            function vt() {}
            function y1(e, t) {
              var n = [];
              e = x(it(e, "Ad"));
              for (var r = e.next(); !r.done; r = e.next())
                if ((r = mt(r.value, "InLine")) && (r = mt(r, "Creatives"))) {
                  r = x(it(r, "Creative"));
                  for (var i = r.next(); !i.done; i = r.next()) {
                    i = i.value;
                    var s = mt(i, "Linear");
                    if ((s && Hk(n, t, s), (i = mt(i, "NonLinearAds")))) {
                      ((i = it(i, "NonLinear")), (i = x(i)));
                      for (var o = i.next(); !o.done; o = i.next())
                        e: {
                          s = n;
                          var u = t,
                            l = o.value,
                            p = mt(l, "StaticResource");
                          if (p) o = p.attributes.creativeType;
                          else {
                            if (((p = mt(l, "HTMLResource")), !p)) break e;
                            o = "text/html";
                          }
                          if ((p = _n(p))) {
                            o === "text/html" &&
                              (p = "data:text/html;charset=UTF-8," + encodeURIComponent(p));
                            var m = Le(l, "width", sn) || Le(l, "expandedWidth", sn),
                              y = Le(l, "height", sn) || Le(l, "expandedHeight", sn);
                            if (m || y) {
                              var v = null,
                                w = mt(l, "NonLinearClickThrough");
                              (w && (w = _n(w)) && (v = w),
                                (w = null),
                                (l = l.attributes.minSuggestedDuration) && (w = yo(l)),
                                (l = 0),
                                u != null && (l = u),
                                s.push({
                                  id: null,
                                  groupId: null,
                                  startTime: l,
                                  endTime: null,
                                  uri: p,
                                  mimeType: o,
                                  isSkippable: !1,
                                  skipOffset: null,
                                  skipFor: null,
                                  canJump: !1,
                                  resumeOffset: 0,
                                  playoutLimit: w,
                                  once: !0,
                                  pre: u == null,
                                  post: u == 1 / 0,
                                  timelineRange: !1,
                                  loop: !1,
                                  overlay: {
                                    viewport: { x: 0, y: 0 },
                                    topLeft: { x: 0, y: 0 },
                                    size: { x: m || 0, y: y || 0 },
                                  },
                                  displayOnBackground: !1,
                                  currentVideo: null,
                                  background: null,
                                  clickThroughUrl: v,
                                }));
                            }
                          }
                        }
                    }
                  }
                }
              return n;
            }
            function Hk(e, t, n) {
              var r = 0;
              t != null && (r = t);
              var i = null;
              n.attributes.skipoffset && ((i = yo(n.attributes.skipoffset)), isNaN(i) && (i = null));
              var s = mt(n, "MediaFiles");
              if (s) {
                var o = null;
                for (
                  (n = mt(n, "VideoClicks")) && (n = mt(n, "ClickThrough")) && (n = _n(n)) && (o = n),
                    s = n = it(s, "MediaFile"),
                    n = n.filter(function (l) {
                      return l.attributes.delivery == "streaming";
                    }),
                    n.length && (s = n),
                    s = s.sort(function (l, p) {
                      return (
                        (parseInt(p.attributes.height, 10) || 0) - (parseInt(l.attributes.height, 10) || 0)
                      );
                    }),
                    s = x(s),
                    n = s.next();
                  !n.done;
                  n = s.next()
                )
                  if (((n = n.value), !n.attributes.apiFramework)) {
                    var u = _n(n);
                    if (u) {
                      e.push({
                        id: null,
                        groupId: null,
                        startTime: r,
                        endTime: null,
                        uri: u,
                        mimeType: n.attributes.type || null,
                        isSkippable: i != null,
                        skipOffset: i,
                        skipFor: null,
                        canJump: !1,
                        resumeOffset: 0,
                        playoutLimit: null,
                        once: !0,
                        pre: t == null,
                        post: t == 1 / 0,
                        timelineRange: !1,
                        loop: !1,
                        overlay: null,
                        displayOnBackground: !1,
                        currentVideo: null,
                        background: null,
                        clickThroughUrl: o,
                      });
                      break;
                    }
                  }
              }
            }
            function Gk(e) {
              var t = [];
              e = x(it(e, "vmap:AdBreak"));
              for (var n = e.next(); !n.done; n = e.next()) {
                var r = n.value,
                  i = r.attributes.timeOffset;
                i &&
                  ((n = null),
                  i == "start" ? (n = null) : i == "end" ? (n = 1 / 0) : (n = yo(i)),
                  (r = mt(r, "vmap:AdSource")) &&
                    (r = mt(r, "vmap:AdTagURI")) &&
                    (r = Dt(r)) &&
                    t.push({ time: n, uri: r }));
              }
              return t;
            }
            (fe("shaka.ads.Utils", vt),
              (vt.ADS_LOADED = "ads-loaded"),
              (vt.AD_STARTED = "ad-started"),
              (vt.AD_FIRST_QUARTILE = "ad-first-quartile"),
              (vt.AD_MIDPOINT = "ad-midpoint"),
              (vt.AD_THIRD_QUARTILE = "ad-third-quartile"),
              (vt.AD_COMPLETE = "ad-complete"),
              (vt.AD_STOPPED = "ad-stopped"),
              (vt.AD_SKIPPED = "ad-skipped"),
              (vt.AD_VOLUME_CHANGED = "ad-volume-changed"),
              (vt.AD_MUTED = "ad-muted"),
              (vt.AD_PAUSED = "ad-paused"),
              (vt.AD_RESUMED = "ad-resumed"),
              (vt.AD_SKIP_STATE_CHANGED = "ad-skip-state-changed"),
              (vt.CUEPOINTS_CHANGED = "ad-cue-points-changed"),
              (vt.IMA_AD_MANAGER_LOADED = "ima-ad-manager-loaded"),
              (vt.IMA_STREAM_MANAGER_LOADED = "ima-stream-manager-loaded"),
              (vt.AD_CLICKED = "ad-clicked"),
              (vt.AD_PROGRESS = "ad-progress"),
              (vt.AD_BUFFERING = "ad-buffering"),
              (vt.AD_IMPRESSION = "ad-impression"),
              (vt.AD_DURATION_CHANGED = "ad-duration-changed"),
              (vt.AD_CLOSED = "ad-closed"),
              (vt.AD_LOADED = "ad-loaded"),
              (vt.ALL_ADS_COMPLETED = "all-ads-completed"),
              (vt.AD_LINEAR_CHANGED = "ad-linear-changed"),
              (vt.AD_METADATA = "ad-metadata"),
              (vt.AD_RECOVERABLE_ERROR = "ad-recoverable-error"),
              (vt.AD_ERROR = "ad-error"),
              (vt.AD_BREAK_READY = "ad-break-ready"),
              (vt.AD_INTERACTION = "ad-interaction"),
              (vt.AD_CONTENT_PAUSE_REQUESTED = "ad-content-pause-requested"),
              (vt.AD_CONTENT_RESUME_REQUESTED = "ad-content-resume-requested"),
              (vt.AD_CONTENT_ATTACH_REQUESTED = "ad-content-attach-requested"));
            function vd(e, t, n, r, i) {
              var s = this;
              ((this.u = e),
                (this.i = t),
                (this.G = !1),
                (this.B = this.o = null),
                (this.H = NaN),
                (this.l = i),
                (this.j = null),
                (this.h = new et()),
                google.ima.settings.setLocale(n),
                google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),
                (this.F = new google.ima.AdDisplayContainer(this.u, this.i)),
                this.F.initialize(),
                (this.m = new google.ima.AdsLoader(this.F)),
                this.m.getSettings().setPlayerType("shaka-player"),
                this.m.getSettings().setPlayerVersion("v4.16.12"),
                (this.g = null),
                (this.C = r || new google.ima.AdsRenderingSettings()),
                this.h.D(this.m, google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, function (o) {
                  zk(s, o);
                }),
                this.h.D(this.m, google.ima.AdErrorEvent.Type.AD_ERROR, function (o) {
                  v1(s, o);
                }),
                this.h.D(this.i, "ended", function () {
                  s.m.contentComplete();
                }),
                this.h.Aa(this.i, "play", function () {
                  s.G = !0;
                }));
            }
            ((vd.prototype.configure = function (e) {
              this.o = e;
            }),
              (vd.prototype.stop = function () {
                (this.g && this.g.stop(), this.u && fu(this.u));
              }),
              (vd.prototype.release = function () {
                (this.stop(),
                  this.B && this.B.disconnect(),
                  this.h && this.h.release(),
                  this.g && this.g.destroy(),
                  this.m.destroy(),
                  this.F.destroy());
              }));
            function v1(e, t) {
              (t.getError(),
                (t = new Map().set("originalEvent", t)),
                e.l(new we("ad-error", t)),
                xd(e, null),
                e.l(new we("ad-cue-points-changed", new Map().set("cuepoints", []))));
            }
            function zk(e, t) {
              if (
                (e.l(new we("ads-loaded", new Map().set("loadTime", Date.now() / 1e3 - e.H))),
                e.o.customPlayheadTracker)
              ) {
                var n = { currentTime: e.i.currentTime };
                ((e.g = t.getAdsManager(n, e.C)),
                  e.i.muted ? e.g.setVolume(0) : e.g.setVolume(e.i.volume),
                  e.h.D(e.i, "timeupdate", function () {
                    e.i.duration && (n.currentTime = e.i.currentTime);
                  }),
                  e.h.D(e.i, "volumechange", function () {
                    e.j && (e.j.setVolume(e.i.volume), e.i.muted && e.j.setMuted(!0));
                  }));
              } else e.g = t.getAdsManager(e.i, e.C);
              e.l(new we("ima-ad-manager-loaded", new Map().set("imaAdManager", e.g)));
              var r = e.g.getCuePoints();
              if (r.length) {
                ((t = []), (r = x(r)));
                for (var i = r.next(); !i.done; i = r.next()) t.push({ start: i.value, end: null });
                e.l(new we("ad-cue-points-changed", new Map().set("cuepoints", t)));
              }
              Xk(e);
              try {
                (e.g.init(e.i.offsetWidth, e.i.offsetHeight),
                  e.h.D(e.i, "loadeddata", function () {
                    e.g.resize(e.i.offsetWidth, e.i.offsetHeight);
                  }),
                  "ResizeObserver" in g
                    ? ((e.B = new ResizeObserver(function () {
                        e.g.resize(e.i.offsetWidth, e.i.offsetHeight);
                      })),
                      e.B.observe(e.i))
                    : e.h.D(document, "fullscreenchange", function () {
                        e.g.resize(e.i.offsetWidth, e.i.offsetHeight);
                      }),
                  e.G || e.o.skipPlayDetection
                    ? e.g.start()
                    : e.h.Aa(e.i, "play", function () {
                        ((e.G = !0), e.g.start());
                      }));
              } catch (s) {
                xd(e, null);
              }
            }
            function Xk(e) {
              function t(n, r) {
                ((n = new Map().set("originalEvent", n)), e.l(new we(r, n)));
              }
              (e.h.D(e.g, google.ima.AdErrorEvent.Type.AD_ERROR, function (n) {
                v1(e, n);
              }),
                e.h.D(e.g, google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED, function (n) {
                  x1(e, n);
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.STARTED, function (n) {
                  x1(e, n);
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.FIRST_QUARTILE, function (n) {
                  t(n, "ad-first-quartile");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.MIDPOINT, function (n) {
                  t(n, "ad-midpoint");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.THIRD_QUARTILE, function (n) {
                  t(n, "ad-third-quartile");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.COMPLETE, function (n) {
                  t(n, "ad-complete");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, function (n) {
                  xd(e, n);
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.ALL_ADS_COMPLETED, function (n) {
                  (t(n, "all-ads-completed"), xd(e, n));
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.SKIPPED, function (n) {
                  t(n, "ad-skipped");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.VOLUME_CHANGED, function (n) {
                  t(n, "ad-volume-changed");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.VOLUME_MUTED, function (n) {
                  t(n, "ad-muted");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.PAUSED, function (n) {
                  e.j && ((e.j.i = !0), t(n, "ad-paused"));
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.RESUMED, function (n) {
                  e.j && ((e.j.i = !1), t(n, "ad-resumed"));
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED, function (n) {
                  e.j && t(n, "ad-skip-state-changed");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.CLICK, function (n) {
                  t(n, "ad-clicked");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.AD_PROGRESS, function (n) {
                  t(n, "ad-progress");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.AD_BUFFERING, function (n) {
                  t(n, "ad-buffering");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.IMPRESSION, function (n) {
                  t(n, "ad-impression");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.DURATION_CHANGE, function (n) {
                  t(n, "ad-duration-changed");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.USER_CLOSE, function (n) {
                  t(n, "ad-closed");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.LOADED, function (n) {
                  t(n, "ad-loaded");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.LINEAR_CHANGED, function (n) {
                  t(n, "ad-linear-changed");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.AD_METADATA, function (n) {
                  t(n, "ad-metadata");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.LOG, function (n) {
                  t(n, "ad-recoverable-error");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.AD_BREAK_READY, function (n) {
                  t(n, "ad-break-ready");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.INTERACTION, function (n) {
                  t(n, "ad-interaction");
                }));
            }
            function x1(e, t) {
              var n = t.getAd();
              n
                ? ((e.j = new Me(n, e.g, e.i)),
                  t.type != google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED ||
                    e.o.supportsMultipleMediaElements ||
                    e.l(new we("ad-content-pause-requested")),
                  (t = new Map().set("ad", e.j).set("sdkAdObject", n).set("originalEvent", t)),
                  e.l(new we("ad-started", t)),
                  e.j.isLinear() &&
                    (e.u.setAttribute("ad-active", "true"),
                    e.o.customPlayheadTracker || e.i.pause(),
                    e.i.muted
                      ? ((t = e.j), (t.j = e.i.volume), t.h.setVolume(0))
                      : e.j.setVolume(e.i.volume)))
                : je("The IMA SDK fired a " + t.type + " event with no associated ad. Unable to play ad!");
            }
            function xd(e, t) {
              (t &&
                t.type == google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED &&
                !e.o.supportsMultipleMediaElements &&
                e.l(new we("ad-content-resume-requested")),
                e.l(new we("ad-stopped", new Map().set("originalEvent", t))),
                e.j &&
                  e.j.isLinear() &&
                  (e.u.removeAttribute("ad-active"), e.o.customPlayheadTracker || e.i.ended || e.i.play()));
            }
            function Re(e, t, n, r, i, s) {
              ((this.g = e),
                (this.h = t),
                (this.j = (this.i = t.isSkippable) ? t.skipOffset || 0 : t.skipOffset),
                (this.l = t.skipFor),
                (this.B = n),
                (this.o = r),
                (this.m = i),
                (this.u = s),
                (this.C = t.overlay));
            }
            ((h = Re.prototype),
              (h.needsSkipUI = function () {
                return !0;
              }),
              (h.isClientRendering = function () {
                return !0;
              }),
              (h.hasCustomClick = function () {
                return this.h.clickThroughUrl != null;
              }),
              (h.isUsingAnotherMediaElement = function () {
                return this.u;
              }),
              (h.getDuration = function () {
                var e = this.g.duration;
                return isNaN(e) ? -1 : e;
              }),
              (h.getMinSuggestedDuration = function () {
                return this.getDuration();
              }),
              (h.getRemainingTime = function () {
                var e = this.g.duration;
                return isNaN(e) ? -1 : e - this.g.currentTime;
              }),
              (h.isPaused = function () {
                return this.g.paused;
              }),
              (h.isSkippable = function () {
                return this.i && this.l != null
                  ? this.getDuration() - this.getRemainingTime() < this.j + this.l
                  : this.i;
              }),
              (h.getTimeUntilSkippable = function () {
                if (this.isSkippable()) {
                  var e = this.getRemainingTime() + this.j - this.getDuration();
                  return Math.max(e, 0);
                }
                return Math.max(this.getRemainingTime(), 0);
              }),
              (h.canSkipNow = function () {
                return this.i && this.getTimeUntilSkippable() == 0;
              }),
              (h.skip = function () {
                this.canSkipNow() && this.B();
              }),
              (h.pause = function () {
                return this.g.pause();
              }),
              (h.play = function () {
                return this.g.play();
              }),
              (h.getVolume = function () {
                return this.g.volume;
              }),
              (h.setVolume = function (e) {
                this.g.volume = e;
              }),
              (h.isMuted = function () {
                return this.g.muted;
              }),
              (h.isLinear = function () {
                return this.C == null;
              }),
              (h.resize = function () {}),
              (h.setMuted = function (e) {
                this.g.muted = e;
              }),
              (h.getSequenceLength = function () {
                return this.o;
              }),
              (h.getPositionInSequence = function () {
                return this.m;
              }),
              (h.getTitle = function () {
                return "";
              }),
              (h.getDescription = function () {
                return "";
              }),
              (h.getVastMediaBitrate = function () {
                return 0;
              }),
              (h.getVastMediaHeight = function () {
                return 0;
              }),
              (h.getVastMediaWidth = function () {
                return 0;
              }),
              (h.getVastAdId = function () {
                return "";
              }),
              (h.getAdId = function () {
                return this.h.id || "";
              }),
              (h.getCreativeAdId = function () {
                return "";
              }),
              (h.getAdvertiserName = function () {
                return "";
              }),
              (h.getMediaUrl = function () {
                return this.h.uri;
              }),
              (h.getTimeOffset = function () {
                return this.h.pre ? 0 : this.h.post ? -1 : this.h.startTime;
              }),
              (h.getPodIndex = function () {
                return 0;
              }),
              (h.release = function () {
                this.g = null;
              }),
              fe("shaka.ads.InterstitialAd", Re),
              (Re.prototype.release = Re.prototype.release),
              (Re.prototype.getPodIndex = Re.prototype.getPodIndex),
              (Re.prototype.getTimeOffset = Re.prototype.getTimeOffset),
              (Re.prototype.getMediaUrl = Re.prototype.getMediaUrl),
              (Re.prototype.getAdvertiserName = Re.prototype.getAdvertiserName),
              (Re.prototype.getCreativeAdId = Re.prototype.getCreativeAdId),
              (Re.prototype.getAdId = Re.prototype.getAdId),
              (Re.prototype.getVastAdId = Re.prototype.getVastAdId),
              (Re.prototype.getVastMediaWidth = Re.prototype.getVastMediaWidth),
              (Re.prototype.getVastMediaHeight = Re.prototype.getVastMediaHeight),
              (Re.prototype.getVastMediaBitrate = Re.prototype.getVastMediaBitrate),
              (Re.prototype.getDescription = Re.prototype.getDescription),
              (Re.prototype.getTitle = Re.prototype.getTitle),
              (Re.prototype.getPositionInSequence = Re.prototype.getPositionInSequence),
              (Re.prototype.getSequenceLength = Re.prototype.getSequenceLength),
              (Re.prototype.setMuted = Re.prototype.setMuted),
              (Re.prototype.resize = Re.prototype.resize),
              (Re.prototype.isLinear = Re.prototype.isLinear),
              (Re.prototype.isMuted = Re.prototype.isMuted),
              (Re.prototype.setVolume = Re.prototype.setVolume),
              (Re.prototype.getVolume = Re.prototype.getVolume),
              (Re.prototype.play = Re.prototype.play),
              (Re.prototype.pause = Re.prototype.pause),
              (Re.prototype.skip = Re.prototype.skip),
              (Re.prototype.canSkipNow = Re.prototype.canSkipNow),
              (Re.prototype.getTimeUntilSkippable = Re.prototype.getTimeUntilSkippable),
              (Re.prototype.isSkippable = Re.prototype.isSkippable),
              (Re.prototype.isPaused = Re.prototype.isPaused),
              (Re.prototype.getRemainingTime = Re.prototype.getRemainingTime),
              (Re.prototype.getMinSuggestedDuration = Re.prototype.getMinSuggestedDuration),
              (Re.prototype.getDuration = Re.prototype.getDuration),
              (Re.prototype.isUsingAnotherMediaElement = Re.prototype.isUsingAnotherMediaElement),
              (Re.prototype.hasCustomClick = Re.prototype.hasCustomClick),
              (Re.prototype.isClientRendering = Re.prototype.isClientRendering),
              (Re.prototype.needsSkipUI = Re.prototype.needsSkipUI));
            function ke(e, t, n) {
              ((this.g = e), (this.j = t), (this.h = n), (this.i = e.overlay == null));
            }
            ((h = ke.prototype),
              (h.needsSkipUI = function () {
                return !0;
              }),
              (h.isClientRendering = function () {
                return !0;
              }),
              (h.hasCustomClick = function () {
                return this.g.clickThroughUrl != null;
              }),
              (h.isUsingAnotherMediaElement = function () {
                return !1;
              }),
              (h.getDuration = function () {
                return -1;
              }),
              (h.getMinSuggestedDuration = function () {
                return this.getDuration();
              }),
              (h.getRemainingTime = function () {
                return -1;
              }),
              (h.isPaused = function () {
                return !1;
              }),
              (h.isSkippable = function () {
                return !1;
              }),
              (h.getTimeUntilSkippable = function () {
                return 0;
              }),
              (h.canSkipNow = function () {
                return !1;
              }),
              (h.skip = function () {}),
              (h.pause = function () {}),
              (h.play = function () {}),
              (h.getVolume = function () {
                return 1;
              }),
              (h.setVolume = function () {}),
              (h.isMuted = function () {
                return !1;
              }),
              (h.isLinear = function () {
                return this.i;
              }),
              (h.resize = function () {}),
              (h.setMuted = function () {}),
              (h.getSequenceLength = function () {
                return this.j;
              }),
              (h.getPositionInSequence = function () {
                return this.h;
              }),
              (h.getTitle = function () {
                return "";
              }),
              (h.getDescription = function () {
                return "";
              }),
              (h.getVastMediaBitrate = function () {
                return 0;
              }),
              (h.getVastMediaHeight = function () {
                return 0;
              }),
              (h.getVastMediaWidth = function () {
                return 0;
              }),
              (h.getVastAdId = function () {
                return "";
              }),
              (h.getAdId = function () {
                return this.g.id || "";
              }),
              (h.getCreativeAdId = function () {
                return "";
              }),
              (h.getAdvertiserName = function () {
                return "";
              }),
              (h.getMediaUrl = function () {
                return this.g.uri;
              }),
              (h.getTimeOffset = function () {
                return this.g.pre ? 0 : this.g.post ? -1 : this.g.startTime;
              }),
              (h.getPodIndex = function () {
                return 0;
              }),
              (h.release = function () {}),
              fe("shaka.ads.InterstitialStaticAd", ke),
              (ke.prototype.release = ke.prototype.release),
              (ke.prototype.getPodIndex = ke.prototype.getPodIndex),
              (ke.prototype.getTimeOffset = ke.prototype.getTimeOffset),
              (ke.prototype.getMediaUrl = ke.prototype.getMediaUrl),
              (ke.prototype.getAdvertiserName = ke.prototype.getAdvertiserName),
              (ke.prototype.getCreativeAdId = ke.prototype.getCreativeAdId),
              (ke.prototype.getAdId = ke.prototype.getAdId),
              (ke.prototype.getVastAdId = ke.prototype.getVastAdId),
              (ke.prototype.getVastMediaWidth = ke.prototype.getVastMediaWidth),
              (ke.prototype.getVastMediaHeight = ke.prototype.getVastMediaHeight),
              (ke.prototype.getVastMediaBitrate = ke.prototype.getVastMediaBitrate),
              (ke.prototype.getDescription = ke.prototype.getDescription),
              (ke.prototype.getTitle = ke.prototype.getTitle),
              (ke.prototype.getPositionInSequence = ke.prototype.getPositionInSequence),
              (ke.prototype.getSequenceLength = ke.prototype.getSequenceLength),
              (ke.prototype.setMuted = ke.prototype.setMuted),
              (ke.prototype.resize = ke.prototype.resize),
              (ke.prototype.isLinear = ke.prototype.isLinear),
              (ke.prototype.isMuted = ke.prototype.isMuted),
              (ke.prototype.setVolume = ke.prototype.setVolume),
              (ke.prototype.getVolume = ke.prototype.getVolume),
              (ke.prototype.play = ke.prototype.play),
              (ke.prototype.pause = ke.prototype.pause),
              (ke.prototype.skip = ke.prototype.skip),
              (ke.prototype.canSkipNow = ke.prototype.canSkipNow),
              (ke.prototype.getTimeUntilSkippable = ke.prototype.getTimeUntilSkippable),
              (ke.prototype.isSkippable = ke.prototype.isSkippable),
              (ke.prototype.isPaused = ke.prototype.isPaused),
              (ke.prototype.getRemainingTime = ke.prototype.getRemainingTime),
              (ke.prototype.getMinSuggestedDuration = ke.prototype.getMinSuggestedDuration),
              (ke.prototype.getDuration = ke.prototype.getDuration),
              (ke.prototype.isUsingAnotherMediaElement = ke.prototype.isUsingAnotherMediaElement),
              (ke.prototype.hasCustomClick = ke.prototype.hasCustomClick),
              (ke.prototype.isClientRendering = ke.prototype.isClientRendering),
              (ke.prototype.needsSkipUI = ke.prototype.needsSkipUI));
            function T1(e, t, n, r) {
              function i(o) {
                return o ? (o.overlay ? !0 : s.g.ended ? o.post : !s.g.paused) : !1;
              }
              var s = this;
              ((this.M = null),
                (this.m = e),
                (this.C = t),
                (this.g = n),
                (this.G = null),
                (this.u = !0),
                (this.h = this.g),
                (this.va = r),
                (this.ma = new Set()),
                (this.T = new Set()),
                (this.H = new Set()),
                (this.F = new Map()),
                (this.K = new Map()),
                (this.i = new te()),
                Sg(this),
                (this.I = new et()),
                (this.j = new et()),
                (this.J = !1),
                (this.$ = this.o = this.B = this.l = null),
                (this.ba = !1),
                (this.O = -1),
                (this.X = function () {
                  if (!s.J && s.l && !s.C.xa()) {
                    s.l = s.g.currentTime;
                    var o = Ko(s);
                    o && i(o) && Td(s, o, 1, 1, Date.now());
                  }
                }),
                (this.V = function () {
                  if (!(s.J || s.l || s.C.xa())) {
                    s.g.paused || (s.l = s.g.currentTime);
                    var o = Ko(s, !0);
                    (o || (o = Ko(s)), o && i(o) && Td(s, o, 1, 1, Date.now()));
                  }
                }),
                (this.oa = function () {
                  if (!s.J && s.l && !s.C.xa()) {
                    var o = s.g.currentTime;
                    s.B && !s.B.pre && !s.B.post && o < (s.B.endTime || s.B.startTime) && (s.B = null);
                  }
                }),
                (this.R = new Ve(this.X)),
                (this.N = new Ve(function () {
                  var o, u, l, p, m, y, v, w, A, E, C;
                  return j(function (k) {
                    switch (k.g) {
                      case 1:
                        if (!s.H.size || s.l == null) {
                          k.A(0);
                          break;
                        }
                        if (((o = s.C.$d()), o == Fr || o == gd)) return k.return();
                        ((u = !1), (l = Array.from(s.H)), (p = s.C.Ra()), (m = x(l)), (y = m.next()));
                      case 3:
                        if (y.done) {
                          k.A(5);
                          break;
                        }
                        if (((v = y.value), v == s.B)) {
                          k.A(4);
                          break;
                        }
                        if (((w = v.endTime || v.startTime), !(p.start - w >= 1))) {
                          ((A = v.startTime - s.l),
                            A > 0 &&
                              A <= 10 &&
                              (!s.F.has(v) &&
                                w1(v) &&
                                s.F.set(v, s.i.preload(v.uri, null, v.mimeType || void 0)),
                              E1(s, v)),
                            k.A(4));
                          break;
                        }
                        if (!s.F.has(v)) {
                          k.A(7);
                          break;
                        }
                        return I(k, s.F.get(v), 8);
                      case 8:
                        ((E = k.h) && E.destroy(), s.F.delete(v));
                      case 7:
                        (I1(s, v),
                          (C = v.id || JSON.stringify(v)),
                          s.T.has(C) && s.T.delete(C),
                          s.H.delete(v),
                          vg(s),
                          v.overlay || (u = !0));
                      case 4:
                        ((y = m.next()), k.A(3));
                        break;
                      case 5:
                        (u && Sd(s), re(k));
                    }
                  });
                })),
                this.configure(this.C.getConfiguration().ads));
            }
            ((h = T1.prototype),
              (h.configure = function (e) {
                ((this.M = e), this.J || xg(this));
              }));
            function Wk(e) {
              if (!e.ba && e.H.size) {
                if (
                  (e.I.D(e.g, "playing", e.V),
                  e.I.D(e.g, "timeupdate", e.V),
                  e.I.D(e.g, "seeked", e.oa),
                  e.I.D(e.g, "ended", e.X),
                  "requestVideoFrameCallback" in e.g && !A1())
                ) {
                  var t = e.g,
                    n = function () {
                      e.O != -1 && (e.X(), e.O != -1 && (e.O = t.requestVideoFrameCallback(n)));
                    };
                  e.O = t.requestVideoFrameCallback(n);
                } else e.R.Ea(0.025);
                (e.N && e.N.Ea(1), (e.ba = !0));
              }
            }
            function vg(e) {
              e.ba &&
                !e.H.size &&
                (e.I.Ma(e.g, "playing", e.V),
                e.I.Ma(e.g, "timeupdate", e.V),
                e.I.Ma(e.g, "seeked", e.oa),
                e.I.Ma(e.g, "ended", e.X),
                e.O != -1 && (e.g.cancelVideoFrameCallback(e.O), (e.O = -1)),
                e.R && e.R.stop(),
                e.N && e.N.stop(),
                (e.ba = !1));
            }
            function xg(e) {
              if (e.m && e.M) {
                var t = e.M.supportsMultipleMediaElements,
                  n = e.g;
                ((n.controls ||
                  (n.webkitPresentationMode && n.webkitPresentationMode !== "inline") ||
                  n.webkitDisplayingFullscreen) &&
                  (t = !1),
                  e.u == t &&
                    ((e.u = !t),
                    e.u
                      ? ((e.h = e.g), e.G && (e.G.parentElement && e.m.removeChild(e.G), (e.G = null)))
                      : (e.G ||
                          ((t = document.createElement(e.g.tagName)),
                          (t.autoplay = !0),
                          (t.style.position = "absolute"),
                          (t.style.top = "0"),
                          (t.style.left = "0"),
                          (t.style.width = "100%"),
                          (t.style.height = "100%"),
                          (t.style.display = "none"),
                          t.setAttribute("playsinline", ""),
                          (e.G = t)),
                        (e.h = e.G))));
              } else e.u = !0;
            }
            ((h.stop = function () {
              if (
                (this.j && this.j.Qa(),
                this.ma.clear(),
                this.T.clear(),
                this.H.clear(),
                this.i.rg(),
                this.F.size)
              ) {
                var e = Array.from(this.F.values());
                e = x(e);
                for (var t = e.next(); !t.done; t = e.next())
                  (t = t.value) &&
                    t.then(function (n) {
                      n && n.destroy();
                    });
              }
              if ((this.F.clear(), this.K.size))
                for (e = Array.from(this.K.keys()), e = x(e), t = e.next(); !t.done; t = e.next())
                  I1(this, t.value);
              (this.K.clear(),
                this.i.detach(),
                (this.J = !1),
                (this.B = this.l = null),
                (this.u = !0),
                (this.h = this.g),
                (this.G = null),
                Tg(this),
                vg(this),
                this.m && fu(this.m),
                this.o && (this.o.stop(), (this.o = null)));
            }),
              (h.release = function () {
                (this.stop(),
                  this.I && this.I.release(),
                  this.j && this.j.release(),
                  this.R && (this.R.stop(), (this.R = null)),
                  this.N && (this.N.stop(), (this.N = null)),
                  this.i.destroy());
              }),
              (h.td = function () {
                return this.i;
              }));
            function Kk(e, t) {
              var n, r, i;
              j(function (s) {
                if (s.g == 1) {
                  if (
                    ((n = null),
                    (r = t.values.find(function (o) {
                      return o.key == "ID";
                    })) && (n = r.data),
                    n)
                  ) {
                    if (e.ma.has(n)) return s.return();
                    e.ma.add(n);
                  }
                  return (
                    Sg(e),
                    (i = []),
                    t &&
                    t.values.find(function (o) {
                      return o.key == "X-OVERLAY-ID";
                    })
                      ? ((i = Qk(t)), s.A(2))
                      : I(s, Jk(e, t), 3)
                  );
                }
                (s.g != 2 && (i = s.h), i.length ? Lu(e, i) : je("Unsupported HLS interstitial", t), re(s));
              });
            }
            function $k(e, t) {
              var n = mt(t.eventNode, "OverlayEvent"),
                r = n.attributes.uri,
                i = n.attributes.mimeType,
                s = n.attributes.loop == "true",
                o = Le(n, "z", sn);
              if (r && o != 0) {
                var u = null,
                  l = mt(n, "Background");
                if (l) {
                  var p = l.attributes.uri;
                  p ? (u = "center / contain no-repeat url('" + p + "')") : (u = _n(l));
                }
                ((l = 1920), (p = 1080));
                var m = mt(n, "Viewport");
                if (m && ((l = Le(m, "x", sn)), l == null || ((p = Le(m, "y", sn)), p == null))) return;
                var y = { viewport: { x: l, y: p }, topLeft: { x: 0, y: 0 }, size: { x: l, y: p } },
                  v = mt(n, "Overlay");
                if (m && v) {
                  var w = mt(v, "TopLeft"),
                    A = mt(v, "Size");
                  if (w && A) {
                    if (((v = Le(w, "x", sn)), v == null || ((w = Le(w, "y", sn)), w == null))) return;
                    var E = Le(A, "x", sn);
                    if (E == null || ((A = Le(A, "y", sn)), A == null)) return;
                    ((y.topLeft.x = v), (y.topLeft.y = w), (y.size.x = E), (y.size.y = A));
                  }
                }
                if (
                  ((v = null),
                  (n = mt(n, "Squeeze")),
                  m && n && ((A = mt(n, "TopLeft")), (n = mt(n, "Size")), A && n))
                ) {
                  if (
                    ((m = Le(A, "x", sn)),
                    m == null ||
                      ((v = Le(A, "y", sn)), v == null) ||
                      ((A = Le(n, "x", sn)), A == null) ||
                      ((n = Le(n, "y", sn)), n == null))
                  )
                    return;
                  v = { viewport: { x: l, y: p }, topLeft: { x: m, y: v }, size: { x: A, y: n } };
                }
                Lu(e, [
                  {
                    id: t.id,
                    groupId: null,
                    startTime: t.startTime,
                    endTime: t.endTime,
                    uri: r,
                    mimeType: i,
                    isSkippable: !1,
                    skipOffset: null,
                    skipFor: null,
                    canJump: !0,
                    resumeOffset: null,
                    playoutLimit: null,
                    once: !1,
                    pre: !1,
                    post: !1,
                    timelineRange: !0,
                    loop: s,
                    overlay: y,
                    displayOnBackground: o == -1,
                    currentVideo: v,
                    background: u,
                    clickThroughUrl: null,
                  },
                ]);
              }
            }
            h.addAdUrlInterstitial = function (e) {
              var t = this,
                n,
                r,
                i,
                s,
                o,
                u,
                l,
                p,
                m;
              return j(function (y) {
                if (y.g == 1) return ((n = { type: 12 }), I(y, wg(t, e, n), 2));
                if (y.g != 3) {
                  if (((r = y.h), (i = Xa(r, "VAST,vmap:VMAP")), !i)) throw new H(2, 10, 10007);
                  if (((s = []), i.tagName == "VAST")) return ((s = y1(i, t.l)), y.A(3));
                  if (i.tagName != "vmap:VMAP") return y.A(3);
                  for (
                    o = function (v) {
                      var w, A;
                      return j(function (E) {
                        if (E.g == 1) return I(E, wg(t, v.uri, n), 2);
                        if (((w = E.h), (A = Xa(w, "VAST")), !A)) throw new H(2, 10, 10007);
                        (s.push.apply(s, Y(y1(A, v.time))), re(E));
                      });
                    },
                      u = [],
                      l = x(Gk(i)),
                      p = l.next();
                    !p.done;
                    p = l.next()
                  )
                    ((m = p.value), u.push(o(m)));
                  return u.length ? I(y, Promise.all(u), 3) : y.A(3);
                }
                (Lu(t, s), re(y));
              });
            };
            function Lu(e, t) {
              var n, r, i, s, o, u, l, p;
              j(function (m) {
                switch (m.g) {
                  case 1:
                    ((n = !1), (r = x(t)), (i = r.next()));
                  case 2:
                    if (i.done) {
                      m.A(4);
                      break;
                    }
                    if (((s = i.value), !s.uri)) {
                      (je("Missing URL in interstitial", s), m.A(3));
                      break;
                    }
                    if (s.mimeType) {
                      m.A(5);
                      break;
                    }
                    return (
                      ee(m, 6),
                      (o = e.i.Yb()),
                      I(m, jo(s.uri, o, e.C.getConfiguration().streaming.retryParameters), 8)
                    );
                  case 8:
                    ((s.mimeType = m.h), de(m, 5));
                    break;
                  case 6:
                    se(m);
                  case 5:
                    if (((u = s.id || JSON.stringify(s)), e.T.has(u))) {
                      m.A(3);
                      break;
                    }
                    (s.loop && !s.overlay && je("Loop is only supported in overlay interstitials", s),
                      s.overlay || (n = !0),
                      e.T.add(u),
                      e.H.add(s),
                      (l = !1),
                      s.pre && e.l == null
                        ? (l = !0)
                        : s.startTime != 0 || s.canJump
                          ? e.l != null && ((p = s.startTime - e.l), p > 0 && p <= 10 && (l = !0))
                          : (l = !0),
                      l &&
                        (!e.F.has(s) && w1(s) && e.F.set(s, e.i.preload(s.uri, null, s.mimeType || void 0)),
                        E1(e, s)));
                  case 3:
                    ((i = r.next()), m.A(2));
                    break;
                  case 4:
                    (n && Sd(e), Wk(e), re(m));
                }
              });
            }
            function Ko(e, t, n) {
              ((t = t === void 0 ? !1 : t), (n = n === void 0 ? null : n));
              var r = 0,
                i = null;
              if (e.H.size && e.l != null) {
                var s = e.g.ended,
                  o = Array.from(e.H).sort(function (y, v) {
                    return v.startTime - y.startTime;
                  }),
                  u = o;
                for (
                  u = t
                    ? o.filter(function (y) {
                        return y.pre;
                      })
                    : s
                      ? o.filter(function (y) {
                          return y.post;
                        })
                      : o.filter(function (y) {
                          return !y.pre && !y.post;
                        }),
                    o = x(u),
                    u = o.next();
                  !u.done;
                  u = o.next()
                ) {
                  u = u.value;
                  var l = !1;
                  if (t) l = u.pre;
                  else if (s) l = u.post;
                  else if (!u.pre && !u.post) {
                    var p = e.l - Math.round(u.startTime * 1e3) / 1e3,
                      m = 1;
                    (e.M.allowStartInMiddleOfInterstitial &&
                      u.endTime &&
                      u.endTime != 1 / 0 &&
                      (m = u.endTime - u.startTime),
                      (p > 0 || (p == 0 && e.l == 0)) &&
                        (p <= m || !u.canJump) &&
                        (l = !(n == null && e.B && !e.B.pre && !e.B.post && e.B.startTime >= u.startTime)));
                  }
                  l &&
                    (!e.B || u.startTime >= e.B.startTime) &&
                    (r == (n || 0)
                      ? (i = u)
                      : i &&
                        !u.canJump &&
                        Math.round(u.startTime * 1e3) / 1e3 - Math.round(i.startTime * 1e3) / 1e3 > 0.001 &&
                        ((i = u), (r = 0)),
                    r++);
                }
              }
              return i;
            }
            function Td(e, t, n, r, i, s) {
              ((s = s === void 0 ? 0 : s),
                (e.B = t),
                xg(e),
                e.u || !e.m || e.h.parentElement || e.m.appendChild(e.h),
                r == 1 &&
                  n == 1 &&
                  (n = Array.from(e.H).filter(function (o) {
                    return t.pre
                      ? o.pre == t.pre
                      : t.post
                        ? o.post == t.post
                        : Math.abs(o.startTime - t.startTime) < 0.001;
                  }).length),
                t.once && (s++, e.H.delete(t), vg(e), t.overlay || Sd(e)),
                t.mimeType && (t.mimeType.startsWith("image/") || t.mimeType === "text/html")
                  ? t.overlay
                    ? Yk(e, t, n, r, s)
                    : je("Unsupported interstitial", t)
                  : e.u && t.overlay
                    ? je("Unsupported interstitial", t)
                    : qk(e, t, n, r, i, s));
            }
            function Yk(e, t, n, r, i) {
              function s() {
                (e.o && (e.o.stop(), (e.o = null)),
                  e.m.removeChild(l),
                  Tg(e, t),
                  _t(e, "ad-stopped"),
                  e.j.Qa());
                var v = Ko(e, t.pre, r - i);
                v ? Td(e, v, n, ++r, Date.now(), i) : (e.J = !1);
              }
              e.J = !0;
              var o = t.overlay,
                u = t.mimeType == "text/html" ? "iframe" : "img",
                l = document.createElement(u);
              ((l.style.objectFit = "contain"),
                (l.style.position = "absolute"),
                (l.style.border = "none"),
                S1(e, t));
              var p = new ke(t, n, r);
              (_t(e, "ad-impression"),
                _t(e, "ad-started", new Map().set("ad", p)),
                u == "iframe"
                  ? (l.src = t.uri)
                  : ((l.src = t.uri),
                    (l.onerror = function (v) {
                      (_t(e, "ad-error", new Map().set("originalEvent", v)), s());
                    })),
                (p = o.viewport));
              var m = o.topLeft;
              ((o = o.size),
                p.x == 0 && p.y == 0
                  ? ((l.width = t.overlay.size.x),
                    (l.height = t.overlay.size.y),
                    (l.style.bottom = "10%"),
                    (l.style.left = "0"),
                    (l.style.right = "0"),
                    (l.style.width = "100%"),
                    t.overlay.size.y || u != "iframe" || (l.style.height = "auto"))
                  : ((l.style.height = (o.y / p.y) * 100 + "%"),
                    (l.style.left = (m.x / p.x) * 100 + "%"),
                    (l.style.top = (m.y / p.y) * 100 + "%"),
                    (l.style.width = (o.x / p.x) * 100 + "%")),
                e.m.appendChild(l));
              var y = Date.now();
              (e.o && e.o.stop(),
                (e.o = new Ve(function () {
                  (t.playoutLimit && (Date.now() - y) / 1e3 > t.playoutLimit) ||
                  (t.endTime && e.g.currentTime > t.endTime)
                    ? (_t(e, "ad-complete"), s())
                    : e.g.currentTime < t.startTime && (_t(e, "ad-skipped"), s());
                })),
                t.playoutLimit && !t.endTime ? e.o.ka(t.playoutLimit) : t.endTime && e.o.Ea(0.025),
                e.j.D(e.g, "seeked", function () {
                  var v = e.g.currentTime;
                  (v < t.startTime || (t.endTime && v > t.endTime)) &&
                    (e.o && e.o.stop(), _t(e, "ad-skipped"), s());
                }),
                t.clickThroughUrl &&
                  e.j.D(l, "click", function () {
                    t.clickThroughUrl && g.open(t.clickThroughUrl, "_blank");
                  }));
            }
            function qk(e, t, n, r, i, s) {
              var o, u, l, p, m, y, v, w, A, E, C, k, R, L, U, G, b, B, N, z, V;
              j(function (X) {
                switch (X.g) {
                  case 1:
                    if (
                      ((o = Date.now()),
                      (e.J = !0),
                      (u = !1),
                      (l = function () {
                        if (!e.u && !t.overlay && t.resumeOffset == null)
                          if (t.timelineRange && t.endTime && t.endTime != 1 / 0)
                            e.g.currentTime != t.endTime && (e.g.currentTime = t.endTime);
                          else {
                            var W = Date.now();
                            ((e.g.currentTime += (W - i) / 1e3), (i = W));
                          }
                      }),
                      (p = function (W) {
                        var ie, ne;
                        return j(function (q) {
                          if (q.g == 1) {
                            if ((l(), (ie = Ko(e, t.pre, r - s)), W && t.groupId))
                              for (; ie && ie.groupId == t.groupId; ) (r++, (ie = Ko(e, t.pre, r - s)));
                            return (
                              e.o &&
                                (!t.groupId || (ie && ie.groupId != t.groupId)) &&
                                (e.o.stop(), (e.o = null)),
                              Tg(e, t),
                              ie && !ie.overlay
                                ? q.A(2)
                                : (t.post && ((e.l = null), (e.B = null)),
                                  e.u ? I(q, e.i.detach(), 4) : I(q, e.i.Cc(), 4))
                            );
                          }
                          (q.g != 2 &&
                            (e.u &&
                              ((ne = t.resumeOffset),
                              ne == null &&
                                (ne =
                                  t.timelineRange && t.endTime && t.endTime != 1 / 0
                                    ? t.endTime - (e.l || 0)
                                    : (Date.now() - i) / 1e3),
                              _t(e, "ad-content-resume-requested", new Map().set("offset", ne))),
                            _t(e, "ad-stopped"),
                            e.j.Qa(),
                            (e.J = !1),
                            e.u ? Sd(e) : ((e.h.style.display = "none"), l(), e.g.ended || e.g.play())),
                            xg(e),
                            ie && (_t(e, "ad-stopped"), e.j.Qa(), Td(e, ie, n, ++r, i, s)),
                            re(q));
                        });
                      }),
                      (m = function (W) {
                        return j(function (ie) {
                          return u
                            ? ie.return()
                            : ((u = !0),
                              _t(e, "ad-error", new Map().set("originalEvent", W)),
                              I(ie, p(!1), 0));
                        });
                      }),
                      (y = function () {
                        return j(function (W) {
                          if (W.g == 1) return u ? W.return() : ((u = !0), I(W, p(!1), 2));
                          (_t(e, "ad-complete"), re(W));
                        });
                      }),
                      (e.$ = function () {
                        return j(function (W) {
                          return u ? W.return() : ((u = !0), _t(e, "ad-skipped"), I(W, p(!0), 0));
                        });
                      }),
                      (v = new Re(e.h, t, e.$, n, r, !e.u)),
                      e.u || (v.setMuted(e.g.muted), v.setVolume(e.g.volume)),
                      _t(e, "ad-started", new Map().set("ad", v)),
                      (w = v.canSkipNow()) && _t(e, "ad-skip-state-changed"),
                      e.j.Aa(e.i, "error", m),
                      e.j.D(e.h, "timeupdate", function () {
                        if (e.h.duration) {
                          var W = v.canSkipNow();
                          (w != W &&
                            v.getRemainingTime() > 0 &&
                            v.getDuration() > 0 &&
                            _t(e, "ad-skip-state-changed"),
                            (w = W),
                            !e.u &&
                              !t.overlay &&
                              t.resumeOffset == null &&
                              t.timelineRange &&
                              t.endTime &&
                              t.endTime != 1 / 0 &&
                              e.g.currentTime != t.endTime &&
                              e.C.Ra().end >= t.endTime &&
                              (e.g.currentTime = t.endTime));
                        }
                      }),
                      e.j.Aa(e.i, "firstquartile", function () {
                        (l(), _t(e, "ad-first-quartile"));
                      }),
                      e.j.Aa(e.i, "midpoint", function () {
                        (l(), _t(e, "ad-midpoint"));
                      }),
                      e.j.Aa(e.i, "thirdquartile", function () {
                        (l(), _t(e, "ad-third-quartile"));
                      }),
                      e.j.Aa(e.i, "complete", y),
                      e.j.D(e.h, "play", function () {
                        _t(e, "ad-resumed");
                      }),
                      e.j.D(e.h, "pause", function () {
                        var W = e.i.getConfiguration();
                        e.h.currentTime >= W.playRangeEnd ? y() : _t(e, "ad-paused");
                      }),
                      e.j.D(e.h, "volumechange", function () {
                        e.h.muted ? _t(e, "ad-muted") : _t(e, "ad-volume-changed");
                      }),
                      t.clickThroughUrl &&
                        ((A = e.m || e.h),
                        e.j.D(A, "click", function () {
                          t.clickThroughUrl &&
                            (v.isPaused() || v.pause(), g.open(t.clickThroughUrl, "_blank"));
                        })),
                      !e.u || r != 1)
                    ) {
                      X.A(2);
                      break;
                    }
                    return (
                      _t(e, "ad-content-pause-requested", new Map().set("saveLivePosition", !0)),
                      (E = new at()),
                      (C = function (W) {
                        return j(function (ie) {
                          if (ie.g == 1)
                            return W.state != "detach"
                              ? ie.A(0)
                              : A1()
                                ? I(
                                    ie,
                                    new Promise(function (ne) {
                                      return new Ve(ne).ka(0.1);
                                    }),
                                    3,
                                  )
                                : ie.A(3);
                          (E.resolve(), e.j.Ma(e.C, "onstatechange", C), re(ie));
                        });
                      }),
                      e.j.D(e.C, "onstatechange", C),
                      I(X, E, 2)
                    );
                  case 2:
                    return (
                      S1(e, t),
                      e.u ||
                        ((e.h.style.display = ""),
                        t.overlay
                          ? ((e.h.loop = t.loop),
                            (k = t.overlay.viewport),
                            (R = t.overlay.topLeft),
                            (L = t.overlay.size),
                            (e.h.style.height = (L.y / k.y) * 100 + "%"),
                            (e.h.style.left = (R.x / k.x) * 100 + "%"),
                            (e.h.style.top = (R.y / k.y) * 100 + "%"),
                            (e.h.style.width = (L.x / k.x) * 100 + "%"))
                          : (e.g.pause(),
                            t.resumeOffset != null &&
                              t.resumeOffset != 0 &&
                              (e.g.currentTime += t.resumeOffset),
                            (e.h.loop = !1),
                            (e.h.style.height = "100%"),
                            (e.h.style.left = "0"),
                            (e.h.style.top = "0"),
                            (e.h.style.width = "100%"))),
                      ee(X, 4),
                      Sg(e),
                      t.startTime &&
                        t.endTime &&
                        t.endTime != 1 / 0 &&
                        t.startTime != t.endTime &&
                        ((U = t.endTime - t.startTime), U > 0 && e.i.configure("playRangeEnd", U)),
                      t.playoutLimit &&
                        !e.o &&
                        ((e.o = new Ve(function () {
                          e.$();
                        }).ka(t.playoutLimit)),
                        e.i.configure("playRangeEnd", t.playoutLimit)),
                      I(X, e.i.Vb(e.h), 6)
                    );
                  case 6:
                    return (
                      (G = null),
                      t.pre ||
                        t.post ||
                        !e.M.allowStartInMiddleOfInterstitial ||
                        e.l == null ||
                        ((b = e.l - t.startTime), Math.abs(b) > 0.25 && (G = b)),
                      e.F.has(t) ? I(X, e.F.get(t), 10) : I(X, e.i.load(t.uri, G, t.mimeType || void 0), 8)
                    );
                  case 10:
                    return (
                      (B = X.h),
                      e.F.delete(t),
                      B ? I(X, e.i.load(B), 8) : I(X, e.i.load(t.uri, G, t.mimeType || void 0), 8)
                    );
                  case 8:
                    (t.overlay && e.g.paused ? e.h.pause() : e.h.play(),
                      (N = (Date.now() - o) / 1e3),
                      _t(e, "ads-loaded", new Map().set("loadTime", N)),
                      e.u && e.g.play(),
                      t.overlay &&
                        (t.pre ||
                          t.post ||
                          (e.C.W() && !(t.startTime > 0)) ||
                          ((z = function () {
                            var W = e.g.currentTime - t.startTime;
                            Math.abs(W - e.h.currentTime) > 0.1 && (e.h.currentTime = W);
                          }),
                          e.j.Aa(e.h, "playing", z),
                          e.j.D(e.g, "seeking", z)),
                        e.j.D(e.g, "seeked", function () {
                          var W = e.g.currentTime;
                          (W < t.startTime || (t.endTime && W > t.endTime)) && e.$();
                        })),
                      de(X, 0));
                    break;
                  case 4:
                    if (((V = se(X)), !e.J)) return X.return();
                    (m(V), re(X));
                }
              });
            }
            function S1(e, t) {
              if ((t.displayOnBackground && (e.g.style.zIndex = "1"), t.currentVideo != null)) {
                var n = t.currentVideo;
                e.g.style.transformOrigin = "top left";
                var r = !0,
                  i = [],
                  s = (n.topLeft.x / n.viewport.x) * 100;
                (s > 0 && s <= 100 && (i.push("translateX(" + s + "%)"), (r = !1)),
                  (s = (n.topLeft.y / n.viewport.y) * 100),
                  s > 0 && s <= 100 && (i.push("translateY(" + s + "%)"), (r = !1)),
                  (s = n.size.x / n.viewport.x),
                  s < 1 && i.push("scaleX(" + s + ")"),
                  (n = n.size.y / n.viewport.y),
                  s < 1 && i.push("scaleY(" + n + ")"),
                  i.length && (e.g.style.transform = i.join(" ")),
                  r && (e.g.style.transition = "transform 250ms"));
              }
              (e.m &&
                (t.clickThroughUrl
                  ? (e.m.setAttribute("ad-active", "true"), (e.m.style.pointerEvents = ""))
                  : (e.m.style.pointerEvents = "none"),
                t.background && (e.m.style.background = t.background)),
                e.G && (e.G.style.background = t.overlay ? "" : "rgb(0, 0, 0)"));
            }
            function Tg(e, t) {
              ((!t || t.displayOnBackground) && (e.g.style.zIndex = ""),
                (t && t.currentVideo == null) ||
                  ((e.g.style.transformOrigin = ""), (e.g.style.transition = ""), (e.g.style.transform = "")),
                e.m &&
                  (e.m.removeAttribute("ad-active"), (e.m.style.pointerEvents = ""), !t || t.background) &&
                  (e.m.style.background = ""),
                e.G && (e.G.style.background = ""));
            }
            function Jk(e, t) {
              var n,
                r,
                i,
                s,
                o,
                u,
                l,
                p,
                m,
                y,
                v,
                w,
                A,
                E,
                C,
                k,
                R,
                L,
                U,
                G,
                b,
                B,
                N,
                z,
                V,
                X,
                W,
                ie,
                ne,
                q,
                Z,
                ae,
                ce,
                be,
                Te,
                Ze,
                Oe,
                st,
                Xe,
                He,
                $e,
                Qe;
              return j(function (Ye) {
                switch (Ye.g) {
                  case 1:
                    if (
                      ((n = []),
                      !t ||
                        ((r = t.values.find(function (Ge) {
                          return Ge.key == "X-ASSET-URI";
                        })),
                        (i = t.values.find(function (Ge) {
                          return Ge.key == "X-ASSET-LIST";
                        })),
                        !r && !i))
                    )
                      return Ye.return(n);
                    if (
                      ((s = null),
                      (o = t.values.find(function (Ge) {
                        return Ge.key == "ID";
                      })) && (s = o.data),
                      (u = s == null ? Math.floor(t.startTime * 10) / 10 : t.startTime),
                      (l = t.endTime) &&
                        t.endTime != 1 / 0 &&
                        typeof t.endTime == "number" &&
                        (l = s == null ? Math.floor(t.endTime * 10) / 10 : t.endTime),
                      (p = t.values.find(function (Ge) {
                        return Ge.key == "X-RESTRICT";
                      })),
                      (y = m = !0),
                      p && p.data && ((v = p.data), (m = !v.includes("SKIP")), (y = !v.includes("JUMP"))),
                      (w = m ? 0 : null),
                      (A = t.values.find(function (Ge) {
                        return Ge.key == "X-ENABLE-SKIP-AFTER";
                      })) && ((E = A.data), (w = parseFloat(E)), isNaN(w) && (w = m ? 0 : null)),
                      (C = null),
                      (k = t.values.find(function (Ge) {
                        return Ge.key == "X-ENABLE-SKIP-FOR";
                      })) && ((R = k.data), (C = parseFloat(R)), isNaN(w) && (C = null)),
                      (L = null),
                      (U = t.values.find(function (Ge) {
                        return Ge.key == "X-RESUME-OFFSET";
                      })) && ((G = U.data), (L = parseFloat(G)), isNaN(L) && (L = null)),
                      (b = null),
                      (B = t.values.find(function (Ge) {
                        return Ge.key == "X-PLAYOUT-LIMIT";
                      })) && ((N = B.data), (b = parseFloat(N)), isNaN(b) && (b = null)),
                      (X = V = z = !1),
                      (W = t.values.find(function (Ge) {
                        return Ge.key == "CUE";
                      })) &&
                        ((ie = W.data),
                        (z = ie.includes("ONCE")),
                        (V = ie.includes("PRE")),
                        (X = ie.includes("POST"))),
                      (ne = !1),
                      (q = t.values.find(function (Ge) {
                        return Ge.key == "X-TIMELINE-OCCUPIES";
                      }))
                        ? ((Z = q.data), (ne = Z.includes("RANGE")))
                        : !U && e.C.W() && (ne = !V && !X),
                      r)
                    ) {
                      if (((ae = r.data), !ae)) return Ye.return(n);
                      (n.push({
                        id: s,
                        groupId: null,
                        startTime: u,
                        endTime: l,
                        uri: ae,
                        mimeType: null,
                        isSkippable: m,
                        skipOffset: w,
                        skipFor: C,
                        canJump: y,
                        resumeOffset: L,
                        playoutLimit: b,
                        once: z,
                        pre: V,
                        post: X,
                        timelineRange: ne,
                        loop: !1,
                        overlay: null,
                        displayOnBackground: !1,
                        currentVideo: null,
                        background: null,
                        clickThroughUrl: null,
                      }),
                        Ye.A(2));
                      break;
                    }
                    if (!i) {
                      Ye.A(2);
                      break;
                    }
                    return (
                      (ce = i.data),
                      ce ? (ee(Ye, 4), (be = { type: 11 }), I(Ye, wg(e, ce, be), 6)) : Ye.return(n)
                    );
                  case 6:
                    for (
                      Te = Ye.h,
                        Ze = St(Te),
                        Oe = JSON.parse(Ze),
                        (st = Oe["SKIP-CONTROL"]) &&
                          ((Xe = st["ENABLE-SKIP-AFTER"]),
                          typeof Xe == "number" && ((w = parseFloat(Xe)), isNaN(Xe) && (w = m ? 0 : null)),
                          (He = st["ENABLE-SKIP-FOR"]),
                          typeof He == "number" && ((C = parseFloat(He)), isNaN(He) && (C = null))),
                        $e = 0;
                      $e < Oe.ASSETS.length;
                      $e++
                    )
                      ((Qe = Oe.ASSETS[$e]),
                        Qe.URI &&
                          n.push({
                            id: s + "_shaka_asset_" + $e,
                            groupId: s,
                            startTime: u,
                            endTime: l,
                            uri: Qe.URI,
                            mimeType: null,
                            isSkippable: m,
                            skipOffset: w,
                            skipFor: C,
                            canJump: y,
                            resumeOffset: L,
                            playoutLimit: b,
                            once: z,
                            pre: V,
                            post: X,
                            timelineRange: ne,
                            loop: !1,
                            overlay: null,
                            displayOnBackground: !1,
                            currentVideo: null,
                            background: null,
                            clickThroughUrl: null,
                          }));
                    de(Ye, 2);
                    break;
                  case 4:
                    se(Ye);
                  case 2:
                    return Ye.return(n);
                }
              });
            }
            function Qk(e) {
              var t = [];
              if (!e) return t;
              var n = e.values.find(function (C) {
                return C.key == "X-ASSET-URI";
              });
              if (!n || ((n = n.data), !n)) return t;
              var r = null,
                i = e.values.find(function (C) {
                  return C.key == "X-OVERLAY-ID";
                });
              (i && (r = i.data), (i = r == null ? Math.floor(e.startTime * 10) / 10 : e.startTime));
              var s = e.endTime;
              e.endTime &&
                e.endTime != 1 / 0 &&
                typeof e.endTime == "number" &&
                (s = r == null ? Math.floor(e.endTime * 10) / 10 : e.endTime);
              var o = !1,
                u = !1,
                l = !1,
                p = e.values.find(function (C) {
                  return C.key == "CUE";
                });
              (p &&
                ((l = p.data), (o = l.includes("ONCE")), (u = l.includes("PRE")), (l = l.includes("POST"))),
                (p = null));
              var m = e.values.find(function (C) {
                return C.key == "X-ASSET-MIMETYPE";
              });
              (m && (p = m.data), (m = !1));
              var y = e.values.find(function (C) {
                return C.key == "X-LOOP";
              });
              (y && (m = y.data == "YES"), (y = 1));
              var v = e.values.find(function (C) {
                return C.key == "X-DEPTH";
              });
              (v && ((y = parseFloat(v.data)), isNaN(y) && (y = 1)), (v = null));
              var w = e.values.find(function (C) {
                return C.key == "X-BACKGROUND";
              });
              (w && (v = w.data), (w = 1920));
              var A = 1080,
                E = e.values.find(function (C) {
                  return C.key == "X-VIEWPORT";
                });
              if (E) {
                if (((A = E.data.split("x")), A.length != 2)) return t;
                ((w = parseFloat(A[0])), (A = parseFloat(A[1])));
              }
              if (
                ((w = { viewport: { x: w, y: A }, topLeft: { x: 0, y: 0 }, size: { x: w, y: A } }),
                (A = e.values.find(function (C) {
                  return C.key == "X-OVERLAY-POSITION";
                })))
              ) {
                if (((A = A.data.split("x")), A.length != 2)) return t;
                ((w.topLeft.x = parseFloat(A[0])), (w.topLeft.y = parseFloat(A[1])));
              }
              if (
                (A = e.values.find(function (C) {
                  return C.key == "X-OVERLAY-SIZE";
                }))
              ) {
                if (((A = A.data.split("x")), A.length != 2)) return t;
                ((w.size.x = parseFloat(A[0])), (w.size.y = parseFloat(A[1])));
              }
              if (
                ((A = null),
                (E = e.values.find(function (C) {
                  return C.key == "X-SQUEEZECURRENT";
                })) &&
                  ((A = parseFloat(E.data)),
                  isNaN(A) && (A = 1),
                  (A = {
                    viewport: { x: 1920, y: 1080 },
                    topLeft: { x: 0, y: 0 },
                    size: { x: 1920 * A, y: 1080 * A },
                  }),
                  (e = e.values.find(function (C) {
                    return C.key == "X-SQUEEZECURRENT-POSITION";
                  }))))
              ) {
                if (((e = e.data.split("x")), e.length != 2)) return t;
                ((A.topLeft.x = parseFloat(e[0])), (A.topLeft.y = parseFloat(e[1])));
              }
              return (
                t.push({
                  id: r,
                  groupId: null,
                  startTime: i,
                  endTime: s,
                  uri: n,
                  mimeType: p,
                  isSkippable: !1,
                  skipOffset: null,
                  skipFor: null,
                  canJump: !0,
                  resumeOffset: null,
                  playoutLimit: null,
                  once: o,
                  pre: u,
                  post: l,
                  timelineRange: !0,
                  loop: m,
                  overlay: w,
                  displayOnBackground: y == -1,
                  currentVideo: A,
                  background: v,
                  clickThroughUrl: null,
                }),
                t
              );
            }
            function Sd(e) {
              for (var t = [], n = x(e.H), r = n.next(), i = {}; !r.done; i = { Bc: void 0 }, r = n.next())
                ((r = r.value),
                  r.overlay ||
                    ((i.Bc = { start: r.startTime, end: null }),
                    r.pre
                      ? ((i.Bc.start = 0), (i.Bc.end = null))
                      : r.post
                        ? ((i.Bc.start = -1), (i.Bc.end = null))
                        : r.timelineRange && (i.Bc.end = r.endTime),
                    t.find(
                      (function (s) {
                        return function (o) {
                          return s.Bc.start == o.start && s.Bc.end == o.end;
                        };
                      })(i),
                    ) || t.push(i.Bc)));
              _t(e, "ad-cue-points-changed", new Map().set("cuepoints", t));
            }
            function Sg(e) {
              (e.i.configure(e.C.ki()),
                e.i.configure("ads.disableHLSInterstitial", !0),
                e.i.configure("ads.disableDASHInterstitial", !0),
                e.i.configure("playRangeEnd", 1 / 0),
                I0(e.C.Yb(), e.i.Yb()));
            }
            function wg(e, t, n) {
              var r, i, s;
              return j(function (o) {
                return o.g == 1
                  ? ((r = Ut([t], Br())), (i = e.C.Yb().request(7, r, n)), I(o, i.promise, 2))
                  : ((s = o.h), o.return(s.data));
              });
            }
            function w1(e) {
              return (e = e.mimeType) ? !e.startsWith("image/") && e !== "text/html" : !0;
            }
            function A1() {
              var e = Be().Oa();
              return e == "TV" || e == "CONSOLE" || e == "CAST";
            }
            function E1(e, t) {
              if (!(e.K.has(t) || (e.M && !e.M.allowPreloadOnDomElements))) {
                var n = function (s) {
                    var o = document.createElement("link");
                    return (
                      (o.rel = "preload"),
                      (o.href = s),
                      (o.as = "image"),
                      document.head.appendChild(o),
                      o
                    );
                  },
                  r = [];
                if (t.background) {
                  var i = t.background.match(/url\(('|")?([^'"()]+)('|")\)?/);
                  i && r.push(n(i[2]));
                }
                (t.mimeType && t.mimeType.startsWith("image/") && r.push(n(t.uri)), e.K.set(t, r));
              }
            }
            function I1(e, t) {
              if (e.K.has(t)) {
                var n = e.K.get(t);
                n = x(n);
                for (var r = n.next(); !r.done; r = n.next()) ((r = r.value), r.parentNode.removeChild(r));
                e.K.delete(t);
              }
            }
            function _t(e, t, n) {
              e.va(new we(t, n));
            }
            function Ie(e, t, n, r, i) {
              ((this.h = e),
                (this.j = yo(this.h.skipOffset)),
                (this.g = i),
                (this.i = t),
                (this.l = n),
                (this.o = r),
                (this.m = !1));
            }
            ((h = Ie.prototype),
              (h.needsSkipUI = function () {
                return !0;
              }),
              (h.isClientRendering = function () {
                return !1;
              }),
              (h.hasCustomClick = function () {
                return !1;
              }),
              (h.isUsingAnotherMediaElement = function () {
                return !1;
              }),
              (h.getDuration = function () {
                return this.h.durationInSeconds;
              }),
              (h.getMinSuggestedDuration = function () {
                return this.getDuration();
              }),
              (h.getRemainingTime = function () {
                return this.h.startTimeInSeconds + this.h.durationInSeconds - this.g.currentTime;
              }),
              (h.isPaused = function () {
                return this.g.paused;
              }),
              (h.isSkippable = function () {
                return typeof this.j == "number";
              }),
              (h.getTimeUntilSkippable = function () {
                if (typeof this.j != "number") return this.getRemainingTime();
                var e = this.getRemainingTime() + this.j - this.getDuration();
                return Math.max(e, 0);
              }),
              (h.canSkipNow = function () {
                return this.getTimeUntilSkippable() == 0;
              }),
              (h.skip = function () {
                ((this.m = !0), (this.g.currentTime += this.getRemainingTime()));
              }),
              (h.pause = function () {
                return this.g.pause();
              }),
              (h.play = function () {
                return this.g.play();
              }),
              (h.getVolume = function () {
                return this.g.volume;
              }),
              (h.setVolume = function (e) {
                this.g.volume = e;
              }),
              (h.isMuted = function () {
                return this.g.muted;
              }),
              (h.isLinear = function () {
                return this.o;
              }),
              (h.resize = function () {}),
              (h.setMuted = function (e) {
                this.g.muted = e;
              }),
              (h.getSequenceLength = function () {
                return this.l ? this.l : 1;
              }),
              (h.getPositionInSequence = function () {
                return this.i ? this.i : 1;
              }),
              (h.getTitle = function () {
                return this.h.adTitle;
              }),
              (h.getDescription = function () {
                return "";
              }),
              (h.getVastMediaBitrate = function () {
                return 0;
              }),
              (h.getVastMediaHeight = function () {
                return 0;
              }),
              (h.getVastMediaWidth = function () {
                return 0;
              }),
              (h.getVastAdId = function () {
                return this.h.vastAdId || "";
              }),
              (h.getAdId = function () {
                return this.h.adId;
              }),
              (h.getCreativeAdId = function () {
                return this.h.creativeId;
              }),
              (h.getAdvertiserName = function () {
                return "";
              }),
              (h.getMediaUrl = function () {
                return null;
              }),
              (h.getTimeOffset = function () {
                return 0;
              }),
              (h.getPodIndex = function () {
                return 0;
              }),
              (h.release = function () {
                this.l = this.i = this.g = this.h = null;
              }),
              fe("shaka.ads.MediaTailorAd", Ie),
              (Ie.prototype.release = Ie.prototype.release),
              (Ie.prototype.getPodIndex = Ie.prototype.getPodIndex),
              (Ie.prototype.getTimeOffset = Ie.prototype.getTimeOffset),
              (Ie.prototype.getMediaUrl = Ie.prototype.getMediaUrl),
              (Ie.prototype.getAdvertiserName = Ie.prototype.getAdvertiserName),
              (Ie.prototype.getCreativeAdId = Ie.prototype.getCreativeAdId),
              (Ie.prototype.getAdId = Ie.prototype.getAdId),
              (Ie.prototype.getVastAdId = Ie.prototype.getVastAdId),
              (Ie.prototype.getVastMediaWidth = Ie.prototype.getVastMediaWidth),
              (Ie.prototype.getVastMediaHeight = Ie.prototype.getVastMediaHeight),
              (Ie.prototype.getVastMediaBitrate = Ie.prototype.getVastMediaBitrate),
              (Ie.prototype.getDescription = Ie.prototype.getDescription),
              (Ie.prototype.getTitle = Ie.prototype.getTitle),
              (Ie.prototype.getPositionInSequence = Ie.prototype.getPositionInSequence),
              (Ie.prototype.getSequenceLength = Ie.prototype.getSequenceLength),
              (Ie.prototype.setMuted = Ie.prototype.setMuted),
              (Ie.prototype.resize = Ie.prototype.resize),
              (Ie.prototype.isLinear = Ie.prototype.isLinear),
              (Ie.prototype.isMuted = Ie.prototype.isMuted),
              (Ie.prototype.setVolume = Ie.prototype.setVolume),
              (Ie.prototype.getVolume = Ie.prototype.getVolume),
              (Ie.prototype.play = Ie.prototype.play),
              (Ie.prototype.pause = Ie.prototype.pause),
              (Ie.prototype.skip = Ie.prototype.skip),
              (Ie.prototype.canSkipNow = Ie.prototype.canSkipNow),
              (Ie.prototype.getTimeUntilSkippable = Ie.prototype.getTimeUntilSkippable),
              (Ie.prototype.isSkippable = Ie.prototype.isSkippable),
              (Ie.prototype.isPaused = Ie.prototype.isPaused),
              (Ie.prototype.getRemainingTime = Ie.prototype.getRemainingTime),
              (Ie.prototype.getMinSuggestedDuration = Ie.prototype.getMinSuggestedDuration),
              (Ie.prototype.getDuration = Ie.prototype.getDuration),
              (Ie.prototype.isUsingAnotherMediaElement = Ie.prototype.isUsingAnotherMediaElement),
              (Ie.prototype.hasCustomClick = Ie.prototype.hasCustomClick),
              (Ie.prototype.isClientRendering = Ie.prototype.isClientRendering),
              (Ie.prototype.needsSkipUI = Ie.prototype.needsSkipUI));
            function bu(e, t, n, r) {
              ((this.C = e),
                (this.K = t),
                (this.h = n),
                (this.l = null),
                (this.R = NaN),
                (this.i = r),
                (this.J = !1),
                (this.B = null),
                (this.j = []),
                (this.N = []),
                (this.M = this.F = this.g = null),
                (this.G = new Map()),
                (this.m = []),
                (this.u = []),
                (this.H = ""),
                (this.O = !0),
                (this.I = ""),
                (this.o = new et()));
            }
            ((bu.prototype.stop = function () {
              for (var e = x(this.m), t = e.next(); !t.done; t = e.next())
                ((t = t.value), this.o.Ma(t.target, t.type, t.listener));
              ($o(this),
                (this.m = []),
                (this.u = []),
                (this.H = ""),
                (this.O = !0),
                (this.I = ""),
                (this.B = null),
                (this.j = []),
                (this.N = []),
                this.G.clear());
            }),
              (bu.prototype.release = function () {
                (this.stop(), this.o && this.o.release());
              }),
              (bu.prototype.onManifestUpdated = function (e) {
                ((this.J = e), this.H != "" && (e_(this, this.H, this.O), (this.O = !1)));
              }),
              (bu.prototype.getCuePoints = function () {
                for (var e = [], t = x(this.j), n = t.next(); !n.done; n = t.next()) {
                  n = x(n.value.ads);
                  for (var r = n.next(); !r.done; r = n.next())
                    ((r = r.value),
                      e.push({
                        start: r.startTimeInSeconds,
                        end: r.startTimeInSeconds + r.durationInSeconds,
                      }));
                }
                return e;
              }));
            function Zk(e, t, n) {
              var r, i, s, o, u, l, p, m, y, v, w, A;
              j(function (E) {
                if (E.g == 1)
                  return (
                    (r = { type: 7 }),
                    (i = Ut([t], Br())),
                    (i.method = "POST"),
                    n && ((s = JSON.stringify(n)), (i.body = Or(s))),
                    (o = e.K.request(7, i, r)),
                    ee(E, 2),
                    I(E, o.promise, 4)
                  );
                if (E.g != 2) {
                  if (((u = E.h), (l = St(u.data)), (p = JSON.parse(l)), p.manifestUrl && p.trackingUrl))
                    ((m = new Pt(t)),
                      (y = new Pt(p.trackingUrl)),
                      (e.H = m.resolve(y).toString()),
                      (v = Date.now() / 1e3),
                      (w = v - e.R),
                      e.i(new we("ads-loaded", new Map().set("loadTime", w))),
                      (A = new Pt(p.manifestUrl)),
                      e.l.resolve(m.resolve(A).toString()),
                      (e.l = null));
                  else throw Error("Insufficient data from MediaTailor.");
                  return de(E, 0);
                }
                if ((se(E), !e.I.length))
                  return (
                    e.l.reject(
                      "MediaTailor request returned an error and there was no backup asset uri provided.",
                    ),
                    (e.l = null),
                    E.return()
                  );
                (e.l.resolve(e.I), (e.l = null), re(E));
              });
            }
            function e_(e, t, n) {
              var r, i, s, o, u, l, p, m, y, v, w, A, E, C, k, R;
              j(function (L) {
                if (L.g == 1)
                  return (
                    (r = { type: 8 }),
                    (i = Ut([t], Br())),
                    (s = e.K.request(7, i, r)),
                    ee(L, 2),
                    I(L, s.promise, 4)
                  );
                if (L.g != 2) {
                  if (((o = L.h), (u = []), (l = St(o.data)), (p = JSON.parse(l)), p.avails.length > 0)) {
                    if (JSON.stringify(e.j) != JSON.stringify(p.avails)) {
                      for (e.j = p.avails, m = x(e.j), y = m.next(); !y.done; y = m.next())
                        for (v = y.value, w = x(v.nonLinearAdsList), A = w.next(); !A.done; A = w.next())
                          for (E = A.value, C = x(E.nonLinearAdList), k = C.next(); !k.done; k = C.next())
                            ((R = k.value), t_(e, R));
                      ((u = e.getCuePoints()),
                        e.i(new we("ad-cue-points-changed", new Map().set("cuepoints", u))));
                    }
                  } else
                    (e.j.length && e.i(new we("ad-cue-points-changed", new Map().set("cuepoints", u))),
                      $o(e),
                      (e.j = []));
                  return (n && (e.J || u.length > 0) && n_(e), de(L, 0));
                }
                (se(L), re(L));
              });
            }
            function t_(e, t) {
              var n, r, i, s, o, u, l, p;
              j(function (m) {
                if (m.g == 1)
                  return !t.staticResource || ((n = C1(t)), e.G.get(n))
                    ? m.return()
                    : ((r = { type: 9 }),
                      (i = Ut([t.staticResource], Br())),
                      (s = e.K.request(7, i, r)),
                      ee(m, 2),
                      e.G.set(n, []),
                      I(m, s.promise, 4));
                if (m.g != 2)
                  return (
                    (o = m.h),
                    (u = St(o.data)),
                    (l = JSON.parse(u)),
                    (p = l.apps),
                    e.G.set(n, p),
                    de(m, 0)
                  );
                (se(m), e.G.delete(n), re(m));
              });
            }
            function C1(e) {
              return [
                e.adId,
                e.adParameters,
                e.adSystem,
                e.adTitle,
                e.creativeAdId,
                e.creativeId,
                e.creativeSequence,
                e.height,
                e.width,
                e.staticResource,
              ].join("");
            }
            function n_(e) {
              (R1(e),
                e.J ||
                  (M1(e),
                  e.o.D(e.h, "seeked", function () {
                    M1(e);
                  }),
                  e.o.D(e.h, "ended", function () {
                    $o(e);
                  })),
                e.o.D(e.h, "timeupdate", function () {
                  R1(e);
                }));
            }
            function M1(e) {
              var t = e.h.currentTime;
              if (t != 0 && e.B == null) {
                for (var n, r, i = x(e.j), s = i.next(); !s.done; s = i.next()) {
                  s = s.value;
                  for (var o = x(s.ads), u = o.next(); !u.done; u = o.next())
                    if (((u = u.value), !r)) u.startTimeInSeconds < t && ((r = u), (n = s));
                    else if (
                      u.startTimeInSeconds < t &&
                      u.startTimeInSeconds > r.startTimeInSeconds + r.durationInSeconds
                    ) {
                      ((r = u), (n = s));
                      break;
                    }
                }
                n && r && !e.N.includes(r.adId) && ((e.B = t), (e.h.currentTime = n.startTimeInSeconds));
              }
            }
            function R1(e) {
              if (e.h.duration && (e.g || e.j.length)) {
                var t = e.h.currentTime,
                  n = !1;
                if (e.g) {
                  n = !0;
                  var r = e.F,
                    i = r.startTimeInSeconds + 0.5 * r.durationInSeconds,
                    s = r.startTimeInSeconds + 0.75 * r.durationInSeconds;
                  (t >= r.startTimeInSeconds + 0.25 * r.durationInSeconds && !e.u.includes("firstQuartile")
                    ? (e.u.push("firstQuartile"), Dn(e, "firstQuartile"))
                    : t >= i && !e.u.includes("midpoint")
                      ? (e.u.push("midpoint"), Dn(e, "midpoint"))
                      : t >= s &&
                        !e.u.includes("thirdQuartile") &&
                        (e.u.push("thirdQuartile"), Dn(e, "thirdQuartile")),
                    (r = e.g.getRemainingTime()),
                    (i = e.g.getDuration()),
                    e.g.canSkipNow() && r > 0 && i > 0 && Dn(e, "skipStateChanged"),
                    i > 0 && (r <= 0 || r > i) && $o(e));
                }
                if (!e.g || !e.g.isLinear()) {
                  e: for (
                    r = x(e.j), i = r.next();
                    !i.done && ((i = i.value), !(e.g && e.g.isLinear()));
                    i = r.next()
                  )
                    for (s = 0; s < i.ads.length; s++) {
                      var o = i.ads[s],
                        u = o.startTimeInSeconds + o.durationInSeconds;
                      if (o.startTimeInSeconds <= t && u > t) {
                        if (e.N.includes(o.adId)) {
                          if (e.h.ended) continue;
                          e.h.currentTime = u;
                          break e;
                        }
                        ($o(e),
                          (e.M = i),
                          (e.g = new Ie(o, s + 1, i.ads.length, !0, e.h)),
                          (e.F = o),
                          s === 0 && Dn(e, "breakStart"),
                          k1(e));
                        break;
                      }
                    }
                  if (!e.g) {
                    for (r = x(e.j), i = r.next(); !i.done && ((i = i.value), !e.g); i = r.next())
                      for (s = 0; s < i.nonLinearAdsList.length; s++)
                        if (((o = i.nonLinearAdsList[s]), o.nonLinearAdList.length)) {
                          u = i.startTimeInSeconds;
                          var l = e.G.get(C1(o.nonLinearAdList[0]));
                          if (u <= t && l && l.length) {
                            ($o(e), (u = e), (l = x(l)));
                            for (var p = l.next(); !p.done; p = l.next())
                              if (((p = p.value), p.data.source.length)) {
                                var m = document.createElement("img");
                                ((m.src = p.data.source[0].url),
                                  (m.style.top = (p.placeholder.top || 0) + "%"),
                                  (m.style.height = 100 - (p.placeholder.top || 0) + "%"),
                                  (m.style.left = (p.placeholder.left || 0) + "%"),
                                  (m.style.maxWidth = 100 - (p.placeholder.left || 0) + "%"),
                                  (m.style.objectFit = "contain"),
                                  (m.style.position = "absolute"),
                                  u.C.appendChild(m));
                              }
                            ((e.M = i),
                              (e.g = new Ie(o, s + 1, i.ads.length, !1, e.h)),
                              (e.F = o),
                              s === 0 && Dn(e, "breakStart"),
                              k1(e));
                            break;
                          }
                        }
                  }
                  n &&
                    !e.g &&
                    ((t = e.h.currentTime), e.B && e.B > t && (e.h.currentTime = e.B), (e.B = null));
                }
              }
            }
            function $o(e) {
              if (e.g) {
                for (; e.C.lastChild; ) e.C.removeChild(e.C.firstChild);
                e.J || e.N.push(e.F.adId);
                var t = e.g.m;
                (t !== void 0 && t ? Dn(e, "skip") : Dn(e, "complete"), (t = x(e.m)));
                for (var n = t.next(); !n.done; n = t.next())
                  ((n = n.value), e.o.Ma(n.target, n.type, n.listener));
                ((e.m = []),
                  (e.u = []),
                  (t = e.g.getPositionInSequence()),
                  (n = e.g.getSequenceLength()),
                  t === n && Dn(e, "breakEnd"),
                  (e.g = null),
                  (e.F = null),
                  (e.M = null));
              }
            }
            function k1(e) {
              var t = !1;
              (e.h.paused ? (t = !0) : (Dn(e, "impression"), Dn(e, "start")),
                e.m.push({
                  target: e.h,
                  type: "volumechange",
                  listener: function () {
                    e.h.muted && Dn(e, "mute");
                  },
                }),
                e.m.push({
                  target: e.h,
                  type: "volumechange",
                  listener: function () {
                    e.h.muted || Dn(e, "unmute");
                  },
                }),
                e.m.push({
                  target: e.h,
                  type: "play",
                  listener: function () {
                    t ? (Dn(e, "impression"), Dn(e, "start"), (t = !1)) : Dn(e, "resume");
                  },
                }),
                e.m.push({
                  target: e.h,
                  type: "pause",
                  listener: function () {
                    Dn(e, "pause");
                  },
                }));
              for (var n = x(e.m), r = n.next(); !r.done; r = n.next())
                ((r = r.value), e.o.D(r.target, r.type, r.listener));
            }
            function Dn(e, t) {
              var n = e.F.trackingEvents.find(function (s) {
                return s.eventType == t;
              });
              if (
                (n ||
                  (n = e.M.adBreakTrackingEvents.find(function (s) {
                    return s.eventType == t;
                  })),
                n)
              ) {
                var r = { type: 10 };
                n = x(n.beaconUrls);
                for (var i = n.next(); !i.done; i = n.next())
                  (i = i.value) &&
                    i != "" &&
                    ((i = Ut([i], Br())), (i.method = "POST"), e.K.request(7, i, r));
              }
              switch (t) {
                case "impression":
                  e.i(new we("ad-impression"));
                  break;
                case "start":
                  e.i(new we("ad-started", new Map().set("ad", e.g)));
                  break;
                case "mute":
                  e.i(new we("ad-muted"));
                  break;
                case "unmute":
                  e.i(new we("ad-volume-changed"));
                  break;
                case "resume":
                  e.i(new we("ad-resumed"));
                  break;
                case "pause":
                  e.i(new we("ad-paused"));
                  break;
                case "firstQuartile":
                  e.i(new we("ad-first-quartile"));
                  break;
                case "midpoint":
                  e.i(new we("ad-midpoint"));
                  break;
                case "thirdQuartile":
                  e.i(new we("ad-third-quartile"));
                  break;
                case "complete":
                  (e.i(new we("ad-complete")), e.i(new we("ad-stopped")));
                  break;
                case "skip":
                  (e.i(new we("ad-skipped")), e.i(new we("ad-stopped")));
                  break;
                case "breakStart":
                  e.C.setAttribute("ad-active", "true");
                  break;
                case "breakEnd":
                  e.C.removeAttribute("ad-active");
                  break;
                case "skipStateChanged":
                  e.i(new we("ad-skip-state-changed"));
              }
            }
            function _e(e, t) {
              ((this.g = e), (this.i = null), (this.h = t));
            }
            ((h = _e.prototype),
              (h.needsSkipUI = function () {
                return !0;
              }),
              (h.isClientRendering = function () {
                return !1;
              }),
              (h.hasCustomClick = function () {
                return !0;
              }),
              (h.isUsingAnotherMediaElement = function () {
                return !1;
              }),
              (h.getDuration = function () {
                return this.i ? this.i.duration : -1;
              }),
              (h.getMinSuggestedDuration = function () {
                return this.getDuration();
              }),
              (h.getRemainingTime = function () {
                return this.i ? this.i.duration - this.i.currentTime : -1;
              }),
              (h.isPaused = function () {
                return this.h.paused;
              }),
              (h.isSkippable = function () {
                return this.g.isSkippable();
              }),
              (h.getTimeUntilSkippable = function () {
                var e = this.g.getSkipTimeOffset();
                return ((e = this.getRemainingTime() - e), Math.max(e, 0));
              }),
              (h.canSkipNow = function () {
                return this.getTimeUntilSkippable() == 0;
              }),
              (h.skip = function () {
                this.h.currentTime += this.getRemainingTime();
              }),
              (h.pause = function () {
                return this.h.pause();
              }),
              (h.play = function () {
                return this.h.play();
              }),
              (h.getVolume = function () {
                return this.h.volume;
              }),
              (h.setVolume = function (e) {
                this.h.volume = e;
              }),
              (h.isMuted = function () {
                return this.h.muted;
              }),
              (h.isLinear = function () {
                return !0;
              }),
              (h.resize = function () {}),
              (h.setMuted = function (e) {
                this.h.muted = e;
              }),
              (h.getSequenceLength = function () {
                var e = this.g.getAdPodInfo();
                return e == null ? 1 : e.getTotalAds();
              }),
              (h.getPositionInSequence = function () {
                var e = this.g.getAdPodInfo();
                return e == null ? 1 : e.getAdPosition();
              }),
              (h.getTitle = function () {
                return this.g.getTitle();
              }),
              (h.getDescription = function () {
                return this.g.getDescription();
              }),
              (h.getVastMediaBitrate = function () {
                return 0;
              }),
              (h.getVastMediaHeight = function () {
                return this.g.getVastMediaHeight();
              }),
              (h.getVastMediaWidth = function () {
                return this.g.getVastMediaWidth();
              }),
              (h.getVastAdId = function () {
                return "";
              }),
              (h.getAdId = function () {
                return this.g.getAdId();
              }),
              (h.getCreativeAdId = function () {
                return this.g.getCreativeAdId();
              }),
              (h.getAdvertiserName = function () {
                return this.g.getAdvertiserName();
              }),
              (h.getMediaUrl = function () {
                return null;
              }),
              (h.getTimeOffset = function () {
                var e = this.g.getAdPodInfo();
                return e == null ? 0 : e.getTimeOffset();
              }),
              (h.getPodIndex = function () {
                var e = this.g.getAdPodInfo();
                return e == null ? 0 : e.getPodIndex();
              }),
              (h.release = function () {
                this.h = this.i = this.g = null;
              }),
              fe("shaka.ads.ServerSideAd", _e),
              (_e.prototype.release = _e.prototype.release),
              (_e.prototype.getPodIndex = _e.prototype.getPodIndex),
              (_e.prototype.getTimeOffset = _e.prototype.getTimeOffset),
              (_e.prototype.getMediaUrl = _e.prototype.getMediaUrl),
              (_e.prototype.getAdvertiserName = _e.prototype.getAdvertiserName),
              (_e.prototype.getCreativeAdId = _e.prototype.getCreativeAdId),
              (_e.prototype.getAdId = _e.prototype.getAdId),
              (_e.prototype.getVastAdId = _e.prototype.getVastAdId),
              (_e.prototype.getVastMediaWidth = _e.prototype.getVastMediaWidth),
              (_e.prototype.getVastMediaHeight = _e.prototype.getVastMediaHeight),
              (_e.prototype.getVastMediaBitrate = _e.prototype.getVastMediaBitrate),
              (_e.prototype.getDescription = _e.prototype.getDescription),
              (_e.prototype.getTitle = _e.prototype.getTitle),
              (_e.prototype.getPositionInSequence = _e.prototype.getPositionInSequence),
              (_e.prototype.getSequenceLength = _e.prototype.getSequenceLength),
              (_e.prototype.setMuted = _e.prototype.setMuted),
              (_e.prototype.resize = _e.prototype.resize),
              (_e.prototype.isLinear = _e.prototype.isLinear),
              (_e.prototype.isMuted = _e.prototype.isMuted),
              (_e.prototype.setVolume = _e.prototype.setVolume),
              (_e.prototype.getVolume = _e.prototype.getVolume),
              (_e.prototype.play = _e.prototype.play),
              (_e.prototype.pause = _e.prototype.pause),
              (_e.prototype.skip = _e.prototype.skip),
              (_e.prototype.canSkipNow = _e.prototype.canSkipNow),
              (_e.prototype.getTimeUntilSkippable = _e.prototype.getTimeUntilSkippable),
              (_e.prototype.isSkippable = _e.prototype.isSkippable),
              (_e.prototype.isPaused = _e.prototype.isPaused),
              (_e.prototype.getRemainingTime = _e.prototype.getRemainingTime),
              (_e.prototype.getMinSuggestedDuration = _e.prototype.getMinSuggestedDuration),
              (_e.prototype.getDuration = _e.prototype.getDuration),
              (_e.prototype.isUsingAnotherMediaElement = _e.prototype.isUsingAnotherMediaElement),
              (_e.prototype.hasCustomClick = _e.prototype.hasCustomClick),
              (_e.prototype.isClientRendering = _e.prototype.isClientRendering),
              (_e.prototype.needsSkipUI = _e.prototype.needsSkipUI));
            function _1(e, t, n, r) {
              var i = this;
              ((this.u = e),
                (this.l = t),
                (this.j = null),
                (this.G = NaN),
                (this.i = r),
                (this.H = !1),
                (this.B = this.m = this.o = null),
                (this.C = ""),
                (this.F = []),
                (this.h = new et()),
                (e = new google.ima.dai.api.UiSettings()),
                e.setLocale(n),
                (this.g = new google.ima.dai.api.StreamManager(this.l, this.u, e)),
                this.i(new we("ima-stream-manager-loaded", new Map().set("imaStreamManager", this.g))),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.LOADED, function (s) {
                  r_(i, s);
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.ERROR, function () {
                  (i.C.length
                    ? i.j.resolve(i.C)
                    : i.j.reject(
                        "IMA Stream request returned an error and there was no backup asset uri provided.",
                      ),
                    (i.j = null));
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED, function () {}),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.STARTED, function (s) {
                  ((s = s.getAd()),
                    (i.m = new _e(s, i.l)),
                    i.B && (i.m.i = i.B),
                    i.i(new we("ad-started", new Map().set("ad", i.m))),
                    i.u.setAttribute("ad-active", "true"));
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED, function () {
                  i.u.removeAttribute("ad-active");
                  var s = i.l.currentTime;
                  i.o && i.o > s && ((i.l.currentTime = i.o), (i.o = null));
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.AD_PROGRESS, function (s) {
                  ((i.B = s.getStreamData().adProgressData), i.m && (i.m.i = i.B));
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE, function () {
                  i.i(new we("ad-first-quartile"));
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.MIDPOINT, function () {
                  i.i(new we("ad-midpoint"));
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE, function () {
                  i.i(new we("ad-third-quartile"));
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.COMPLETE, function () {
                  (i.i(new we("ad-complete")),
                    i.i(new we("ad-stopped")),
                    i.u.removeAttribute("ad-active"),
                    (i.m = null));
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.SKIPPED, function () {
                  (i.i(new we("ad-skipped")), i.i(new we("ad-stopped")));
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED, function (s) {
                  var o = s.getStreamData();
                  ((s = []), (o = x(o.cuepoints)));
                  for (var u = o.next(); !u.done; u = o.next())
                    ((u = u.value), s.push({ start: u.start, end: u.end }));
                  ((i.F = s), i.i(new we("ad-cue-points-changed", new Map().set("cuepoints", s))));
                }));
            }
            ((h = _1.prototype),
              (h.configure = function () {}),
              (h.stop = function () {
                ((this.C = ""), (this.o = null), (this.F = []));
              }),
              (h.release = function () {
                (this.stop(), this.h && this.h.release());
              }),
              (h.onCueMetadataChange = function (e) {
                if (e.key && e.data) {
                  var t = {};
                  ((t[e.key] = e.data), this.g.onTimedMetadata(t));
                }
              }),
              (h.getCuePoints = function () {
                return this.F;
              }));
            function r_(e, t) {
              (e.i(new we("ads-loaded", new Map().set("loadTime", Date.now() / 1e3 - e.G))),
                (t = t.getStreamData().url),
                e.j.resolve(t),
                (e.j = null),
                e.H ||
                  e.h.D(e.l, "seeked", function () {
                    var n = e.l.currentTime;
                    if (n != 0) {
                      e.g.streamTimeForContentTime(n);
                      var r = e.g.previousCuePointForStreamTime(n);
                      r && !r.played && ((e.o = n), (e.l.currentTime = r.start));
                    }
                  }));
            }
            function xe() {
              (ot.call(this),
                (this.h = this.i = this.j = this.g = null),
                (this.m = new m1()),
                (this.o = navigator.language),
                (this.l = null));
            }
            (J(xe, ot),
              (h = xe.prototype),
              (h.setLocale = function (e) {
                this.o = e;
              }),
              (h.configure = function (e) {
                ((this.l = e),
                  this.g && this.g.configure(this.l),
                  this.j && this.j.configure(this.l),
                  this.h && this.h.configure(this.l));
              }),
              (h.initInterstitial = function (e, t, n) {
                var r = this;
                (this.g && this.g.release(),
                  (this.g = new T1(e, t, n, function (i) {
                    return wd(r, i);
                  })),
                  this.g.configure(this.l));
              }),
              (h.initClientSide = function (e, t, n) {
                var r = this;
                if (!g.google || !google.ima || !google.ima.AdsLoader) throw new H(2, 10, 1e4);
                (this.j && this.j.release(),
                  (this.j = new vd(e, t, this.o, n, function (i) {
                    return wd(r, i);
                  })),
                  this.j.configure(this.l));
              }),
              (h.release = function () {
                (this.g && (this.g.release(), (this.g = null)),
                  this.j && (this.j.release(), (this.j = null)),
                  this.i && (this.i.release(), (this.i = null)),
                  this.h && (this.h.release(), (this.h = null)),
                  ot.prototype.release.call(this));
              }),
              (h.onAssetUnload = function () {
                (this.g && this.g.stop(),
                  this.j && this.j.stop(),
                  this.i && this.i.stop(),
                  this.h && this.h.stop(),
                  this.dispatchEvent(new we("ad-stopped")),
                  this.dispatchEvent(new we("ad-content-attach-requested")),
                  (this.m = new m1()));
              }),
              (h.requestClientSideAds = function (e) {
                if (!this.j) throw new H(1, 10, 10001);
                var t = this.j;
                (t.g && t.g.destroy(),
                  t.m && t.m.contentComplete(),
                  (t.H = Date.now() / 1e3),
                  t.m.requestAds(e));
              }),
              (h.updateClientSideAdsRenderingSettings = function (e) {
                if (!this.j) throw new H(1, 10, 10001);
                var t = this.j;
                ((t.C = e), t.g && t.g.updateAdsRenderingSettings(t.C));
              }),
              (h.initMediaTailor = function (e, t, n) {
                var r = this;
                (this.i && this.i.release(),
                  (this.i = new bu(e, t, n, function (i) {
                    return wd(r, i);
                  })));
              }),
              (h.requestMediaTailorStream = function (e, t, n) {
                if (!this.i) throw new H(1, 10, 10005);
                var r = this.i;
                return (
                  (n = n === void 0 ? "" : n),
                  r.l
                    ? (e = Promise.reject(new H(1, 10, 10004)))
                    : ((r.l = new at()), Zk(r, e, t), (r.I = n || ""), (r.R = Date.now() / 1e3), (e = r.l)),
                  e
                );
              }),
              (h.addMediaTailorTrackingUrl = function (e) {
                if (!this.i) throw new H(1, 10, 10005);
                var t = this.i;
                ((t.H = e), t.i(new we("ads-loaded", new Map().set("loadTime", 0))));
              }),
              (h.initServerSide = function (e, t) {
                var n = this;
                if (!g.google || !google.ima || !google.ima.dai) throw new H(2, 10, 10002);
                (this.h && this.h.release(),
                  (this.h = new _1(e, t, this.o, function (r) {
                    return wd(n, r);
                  })),
                  this.h.configure(this.l));
              }),
              (h.requestServerSideStream = function (e, t) {
                if (((t = t === void 0 ? "" : t), !this.h)) throw new H(1, 10, 10003);
                e.adTagParameters || (e.adTagParameters = {});
                var n = e.adTagParameters;
                return (
                  (n.mpt || n.mpv) &&
                    je(
                      'You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.',
                    ),
                  (e.adTagParameters.mpt = "shaka-player"),
                  (e.adTagParameters.mpv = "v4.16.12"),
                  (n = this.h),
                  n.j
                    ? (e = Promise.reject(new H(1, 10, 10004)))
                    : (e instanceof google.ima.dai.api.LiveStreamRequest && (n.H = !0),
                      (n.j = new at()),
                      n.g.requestStream(e),
                      (n.C = t || ""),
                      (n.G = Date.now() / 1e3),
                      (e = n.j)),
                  e
                );
              }),
              (h.replaceServerSideAdTagParameters = function (e) {
                if (!this.h) throw new H(1, 10, 10003);
                ((e.mpt || e.mpv) &&
                  je(
                    'You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.',
                  ),
                  (e.mpt = "Shaka Player"),
                  (e.mpv = "v4.16.12"),
                  this.h.g.replaceAdTagParameters(e));
              }),
              (h.getServerSideCuePoints = function () {
                return (
                  qe("AdManager.getServerSideCuePoints", "Please use getCuePoints function."),
                  this.getCuePoints()
                );
              }),
              (h.getCuePoints = function () {
                var e = [];
                return (
                  this.h && (e = e.concat(this.h.getCuePoints())),
                  this.i && (e = e.concat(this.i.getCuePoints())),
                  e
                );
              }),
              (h.getStats = function () {
                var e = this.m;
                return {
                  loadTimes: e.g,
                  averageLoadTime: Vk(e),
                  started: e.h,
                  overlayAds: e.j,
                  playedCompletely: e.l,
                  skipped: e.m,
                  errors: e.i,
                };
              }),
              (h.onManifestUpdated = function (e) {
                this.i && this.i.onManifestUpdated(e);
              }),
              (h.onDashTimedMetadata = function (e) {
                this.h &&
                  e.schemeIdUri == "urn:google:dai:2018" &&
                  this.h.g.processMetadata(
                    e.schemeIdUri,
                    e.eventNode ? e.eventNode.attributes.messageData : null,
                    e.startTime,
                  );
              }),
              (h.onHlsTimedMetadata = function (e, t) {
                this.h && this.h.g.processMetadata("ID3", e.data, t);
              }),
              (h.onCueMetadataChange = function (e) {
                this.h && this.h.onCueMetadataChange(e);
              }),
              (h.onHLSInterstitialMetadata = function (e, t, n) {
                (this.l && this.l.disableHLSInterstitial) ||
                  (this.g || this.initInterstitial(null, e, t), this.g && Kk(this.g, n));
              }),
              (h.onDASHInterstitialMetadata = function (e, t, n) {
                if (!this.l || !this.l.disableDASHInterstitial) {
                  var r = n.schemeIdUri;
                  if (
                    r == "urn:mpeg:dash:event:alternativeMPD:insert:2025" ||
                    r == "urn:mpeg:dash:event:alternativeMPD:replace:2025"
                  ) {
                    if (
                      (this.g || this.initInterstitial(null, e, t),
                      this.g &&
                        ((e = this.g),
                        (t = n.schemeIdUri == "urn:mpeg:dash:event:alternativeMPD:replace:2025"),
                        (r = n.schemeIdUri == "urn:mpeg:dash:event:alternativeMPD:insert:2025"),
                        t || r))
                    ) {
                      for (
                        var i = n.startTime,
                          s = n.endTime,
                          o = null,
                          u = 0,
                          l,
                          p = x(n.eventNode.children),
                          m = p.next();
                        !m.done;
                        m = p.next()
                      )
                        if (((m = m.value), m.tagName == "AlternativeMPD")) {
                          if ((m = m.attributes.uri)) {
                            l = m;
                            break;
                          }
                        } else if (m.tagName == "InsertPresentation" || m.tagName == "ReplacePresentation") {
                          var y = m.attributes.url;
                          if (y) {
                            ((l = kn(y)),
                              (p = Le(m, "maxDuration", sn)) && (o = p / n.timescale),
                              (p = Le(m, "returnOffset", sn)) && (u = p / n.timescale),
                              t && u && (s = i + u));
                            break;
                          }
                        }
                      l &&
                        Lu(e, [
                          {
                            id: n.id,
                            groupId: null,
                            startTime: i,
                            endTime: s,
                            uri: l,
                            mimeType: null,
                            isSkippable: !1,
                            skipOffset: null,
                            skipFor: null,
                            canJump: !0,
                            resumeOffset: r ? u : null,
                            playoutLimit: o,
                            once: !1,
                            pre: !1,
                            post: !1,
                            timelineRange: t && !r,
                            loop: !1,
                            overlay: null,
                            displayOnBackground: !1,
                            currentVideo: null,
                            background: null,
                            clickThroughUrl: null,
                          },
                        ]);
                    }
                  } else
                    (r == "urn:mpeg:dash:event:2012" || r == "urn:scte:dash:scte214-events") &&
                      n.eventNode &&
                      mt(n.eventNode, "OverlayEvent") &&
                      (this.g || this.initInterstitial(null, e, t), this.g && $k(this.g, n));
                }
              }),
              (h.addCustomInterstitial = function (e) {
                if (!this.g) throw new H(1, 10, 10006);
                Lu(this.g, [e]);
              }),
              (h.addAdUrlInterstitial = function (e) {
                if (!this.g) throw new H(1, 10, 10006);
                return this.g.addAdUrlInterstitial(e);
              }),
              (h.getInterstitialPlayer = function () {
                if (!this.g) throw new H(1, 10, 10006);
                return this.g.td();
              }));
            function wd(e, t) {
              if (t && t.type)
                switch (t.type) {
                  case "ads-loaded":
                    e.m.g.push(t.loadTime);
                    break;
                  case "ad-started":
                    e.m.h++;
                    var n = t.ad;
                    n && !n.isLinear() && e.m.j++;
                    break;
                  case "ad-complete":
                    e.m.l++;
                    break;
                  case "ad-skipped":
                    e.m.m++;
                    break;
                  case "ad-error":
                    e.m.i++;
                }
              e.dispatchEvent(t);
            }
            (fe("shaka.ads.AdManager", xe),
              (xe.prototype.getInterstitialPlayer = xe.prototype.getInterstitialPlayer),
              (xe.prototype.addAdUrlInterstitial = xe.prototype.addAdUrlInterstitial),
              (xe.prototype.addCustomInterstitial = xe.prototype.addCustomInterstitial),
              (xe.prototype.onDASHInterstitialMetadata = xe.prototype.onDASHInterstitialMetadata),
              (xe.prototype.onHLSInterstitialMetadata = xe.prototype.onHLSInterstitialMetadata),
              (xe.prototype.onCueMetadataChange = xe.prototype.onCueMetadataChange),
              (xe.prototype.onHlsTimedMetadata = xe.prototype.onHlsTimedMetadata),
              (xe.prototype.onDashTimedMetadata = xe.prototype.onDashTimedMetadata),
              (xe.prototype.onManifestUpdated = xe.prototype.onManifestUpdated),
              (xe.prototype.getStats = xe.prototype.getStats),
              (xe.prototype.getCuePoints = xe.prototype.getCuePoints),
              (xe.prototype.getServerSideCuePoints = xe.prototype.getServerSideCuePoints),
              (xe.prototype.replaceServerSideAdTagParameters = xe.prototype.replaceServerSideAdTagParameters),
              (xe.prototype.requestServerSideStream = xe.prototype.requestServerSideStream),
              (xe.prototype.initServerSide = xe.prototype.initServerSide),
              (xe.prototype.addMediaTailorTrackingUrl = xe.prototype.addMediaTailorTrackingUrl),
              (xe.prototype.requestMediaTailorStream = xe.prototype.requestMediaTailorStream),
              (xe.prototype.initMediaTailor = xe.prototype.initMediaTailor),
              (xe.prototype.updateClientSideAdsRenderingSettings =
                xe.prototype.updateClientSideAdsRenderingSettings),
              (xe.prototype.requestClientSideAds = xe.prototype.requestClientSideAds),
              (xe.prototype.onAssetUnload = xe.prototype.onAssetUnload),
              (xe.prototype.release = xe.prototype.release),
              (xe.prototype.initClientSide = xe.prototype.initClientSide),
              (xe.prototype.initInterstitial = xe.prototype.initInterstitial),
              (xe.prototype.configure = xe.prototype.configure),
              (xe.prototype.setLocale = xe.prototype.setLocale),
              (xe.ADS_LOADED = "ads-loaded"),
              (xe.AD_STARTED = "ad-started"),
              (xe.AD_FIRST_QUARTILE = "ad-first-quartile"),
              (xe.AD_MIDPOINT = "ad-midpoint"),
              (xe.AD_THIRD_QUARTILE = "ad-third-quartile"),
              (xe.AD_COMPLETE = "ad-complete"),
              (xe.AD_STOPPED = "ad-stopped"),
              (xe.AD_SKIPPED = "ad-skipped"),
              (xe.AD_VOLUME_CHANGED = "ad-volume-changed"),
              (xe.AD_MUTED = "ad-muted"),
              (xe.AD_PAUSED = "ad-paused"),
              (xe.AD_RESUMED = "ad-resumed"),
              (xe.AD_SKIP_STATE_CHANGED = "ad-skip-state-changed"),
              (xe.CUEPOINTS_CHANGED = "ad-cue-points-changed"),
              (xe.IMA_AD_MANAGER_LOADED = "ima-ad-manager-loaded"),
              (xe.IMA_STREAM_MANAGER_LOADED = "ima-stream-manager-loaded"),
              (xe.AD_CLICKED = "ad-clicked"),
              (xe.AD_PROGRESS = "ad-progress"),
              (xe.AD_BUFFERING = "ad-buffering"),
              (xe.AD_IMPRESSION = "ad-impression"),
              (xe.AD_DURATION_CHANGED = "ad-duration-changed"),
              (xe.AD_CLOSED = "ad-closed"),
              (xe.AD_LOADED = "ad-loaded"),
              (xe.ALL_ADS_COMPLETED = "all-ads-completed"),
              (xe.AD_LINEAR_CHANGED = "ad-linear-changed"),
              (xe.AD_METADATA = "ad-metadata"),
              (xe.AD_RECOVERABLE_ERROR = "ad-recoverable-error"),
              (xe.AD_ERROR = "ad-error"),
              (xe.AD_BREAK_READY = "ad-break-ready"),
              (xe.AD_INTERACTION = "ad-interaction"),
              (xe.AD_CONTENT_PAUSE_REQUESTED = "ad-content-pause-requested"),
              (xe.AD_CONTENT_RESUME_REQUESTED = "ad-content-resume-requested"),
              (xe.AD_CONTENT_ATTACH_REQUESTED = "ad-content-attach-requested"),
              (md = function () {
                return new xe();
              }));
            function Ag(e) {
              return JSON.stringify(e, function (t, n) {
                if (typeof n != "function") {
                  if (((t = n instanceof we), n instanceof Event || t)) {
                    var r = {};
                    for (s in n) {
                      var i = n[s];
                      i && typeof i == "object"
                        ? s == "detail"
                          ? (r[s] = i)
                          : i instanceof Event || i instanceof we
                            ? (r[s] = { __type__: "Event", event: Ag(i) })
                            : t && Array.isArray(i) && (r[s] = i)
                        : s in Event || (r[s] = i);
                    }
                    return r;
                  }
                  if (n instanceof Error) {
                    var s = new Set(["name", "message", "stack"]);
                    for (r in n) s.add(r);
                    for (t = x(Object.getOwnPropertyNames(n)), r = t.next(); !r.done; r = t.next())
                      s.add(r.value);
                    for (t = {}, s = x(s), r = s.next(); !r.done; r = s.next())
                      ((r = r.value), (t[r] = n[r]));
                    n = { __type__: "Error", contents: t };
                  } else if (n instanceof TimeRanges) {
                    for (
                      s = { __type__: "TimeRanges", length: n.length, start: [], end: [] },
                        n = x(Ci(n)),
                        t = n.next();
                      !t.done;
                      t = n.next()
                    )
                      ((t = t.value), (r = t.end), s.start.push(t.start), s.end.push(r));
                    n = s;
                  } else
                    n =
                      ArrayBuffer.isView(n) && n.BYTES_PER_ELEMENT === 1
                        ? { __type__: "Uint8Array", entries: Array.from(n) }
                        : typeof n == "number"
                          ? isNaN(n)
                            ? "NaN"
                            : isFinite(n)
                              ? n
                              : n < 0
                                ? "-Infinity"
                                : "Infinity"
                          : n;
                  return n;
                }
              });
            }
            function Ad(e) {
              return JSON.parse(e, function (t, n) {
                if (n == "NaN") var r = NaN;
                else if (n == "-Infinity") r = -1 / 0;
                else if (n == "Infinity") r = 1 / 0;
                else if (n && typeof n == "object" && n.__type__ == "TimeRanges") r = i_(n);
                else if (n && typeof n == "object" && n.__type__ == "Uint8Array")
                  r = new Uint8Array(n.entries);
                else if (n && typeof n == "object" && n.__type__ == "Error") {
                  ((t = n.contents), (n = Error(t.message)));
                  for (r in t) n[r] = t[r];
                  r = n;
                } else r = n && typeof n == "object" && n.__type__ == "Event" ? Ad(n.event) : n;
                return r;
              });
            }
            function i_(e) {
              return {
                length: e.length,
                start: function (t) {
                  return e.start[t];
                },
                end: function (t) {
                  return e.end[t];
                },
              };
            }
            var P1 =
                "ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(
                  " ",
                ),
              s_ =
                "buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(
                  " ",
                ),
              Eg = ["loop", "playbackRate"],
              o_ = ["pause", "play"],
              Ig = new Map()
                .set("getAssetUri", 2)
                .set("getAudioLanguages", 4)
                .set("getAudioLanguagesAndRoles", 4)
                .set("getBufferFullness", 1)
                .set("getBufferedInfo", 2)
                .set("getExpiration", 2)
                .set("getKeyStatuses", 2)
                .set("getPlaybackRate", 2)
                .set("getTextLanguages", 4)
                .set("getTextLanguagesAndRoles", 4)
                .set("isAudioOnly", 10)
                .set("isBuffering", 1)
                .set("isInProgress", 1)
                .set("isLive", 10)
                .set("isTextTrackVisible", 1)
                .set("isVideoOnly", 10)
                .set("keySystem", 10)
                .set("seekRange", 1)
                .set("getLoadMode", 10)
                .set("getManifestType", 10)
                .set("isFullyLoaded", 1)
                .set("isEnded", 1)
                .set("getBandwidthEstimate", 1)
                .set("isRemotePlayback", 1),
              Cg = new Map()
                .set("getConfiguration", 4)
                .set("getConfigurationForLowLatency", 4)
                .set("getStats", 5)
                .set("getAudioTracks", 2)
                .set("getChaptersTracks", 2)
                .set("getImageTracks", 2)
                .set("getVideoTracks", 2)
                .set("getTextTracks", 2)
                .set("getVariantTracks", 2),
              D1 = new Map()
                .set("getPlayheadTimeAsDate", 1)
                .set("getPresentationStartTimeAsDate", 20)
                .set("getSegmentAvailabilityDuration", 20),
              L1 = [
                [
                  "getConfiguration",
                  "configure",
                  "getConfigurationForLowLatency",
                  "configurationForLowLatency",
                ],
              ],
              b1 = [["isTextTrackVisible", "setTextTrackVisibility"]],
              a_ =
                "cancelTrickPlay configure configurationForLowLatency getChapters resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel selectVideoTrack setTextTrackVisibility trickPlay updateStartTime goToLive useTrickPlayTrackIfAvailable".split(
                  " ",
                ),
              u_ =
                "addChaptersTrack addTextTrackAsync addThumbnailsTrack getAllThumbnails getChaptersAsync getThumbnails attach attachCanvas detach load unload".split(
                  " ",
                );
            function Mg(e, t, n, r, i, s, o) {
              var u = this;
              ((this.H = e),
                (this.K = o),
                (this.l = new Ve(t)),
                (this.M = n),
                (this.u = !1),
                (this.B = r),
                (this.G = i),
                (this.N = s),
                (this.i = this.m = !1),
                (this.J = ""),
                (this.o = null),
                (this.C = function () {
                  return Rg(u);
                }),
                (this.F = function (l, p) {
                  switch (((l = Ad(p)), l.type)) {
                    case "event":
                      var m = l.targetName,
                        y = E0(l.event);
                      u.B(m, y);
                      break;
                    case "update":
                      m = l.update;
                      for (y in m) {
                        l = u.g[y] || {};
                        for (var v in m[y]) l[v] = m[y][v];
                      }
                      u.u && (u.M(), (u.u = !1));
                      break;
                    case "asyncComplete":
                      if (((v = l.id), (y = l.error), (p = l.res), (l = u.h.get(v)), u.h.delete(v), l))
                        if (y) {
                          v = new H(y.severity, y.category, y.code);
                          for (m in y) v[m] = y[m];
                          l.reject(v);
                        } else l.resolve(p);
                  }
                }),
                (this.g = { video: {}, player: {} }),
                (this.I = 0),
                (this.h = new Map()),
                (this.j = null),
                Ou.add(this));
            }
            ((h = Mg.prototype),
              (h.destroy = function () {
                return (
                  Ou.delete(this),
                  kg(this),
                  Vr && O1(this),
                  this.l && (this.l.stop(), (this.l = null)),
                  (this.G = this.B = null),
                  (this.i = this.m = !1),
                  (this.F = this.C = this.j = this.h = this.g = this.o = null),
                  Promise.resolve()
                );
              }),
              (h.wb = function () {
                return this.i;
              }),
              (h.eh = function () {
                return this.J;
              }),
              (h.init = function () {
                if (this.H.length)
                  if (g.chrome && chrome.cast && chrome.cast.isAvailable) {
                    ((this.m = !0), this.l.Jb());
                    var e = new chrome.cast.SessionRequest(this.H, [], null, this.K, null);
                    ((e = new chrome.cast.ApiConfig(
                      e,
                      function (t) {
                        for (var n = x(Ou), r = n.next(); !r.done; r = n.next()) {
                          r = r.value;
                          var i = t;
                          ((r.j = new at()), (r.u = !0), Ed(r, i));
                        }
                      },
                      function (t) {
                        for (var n = x(Ou), r = n.next(); !r.done; r = n.next())
                          ((r = r.value), (Id = t == "available"), r.l.Jb());
                      },
                      "origin_scoped",
                    )),
                      chrome.cast.initialize(
                        e,
                        function () {},
                        function () {},
                      ),
                      Id && this.l.ka(c_),
                      (e = Vr) && e.status != chrome.cast.SessionStatus.STOPPED
                        ? ((this.j = new at()), (this.u = !0), Ed(this, e))
                        : (Vr = null));
                  } else
                    g.__onGCastApiAvailable !== U1 &&
                      ((Cd = g.__onGCastApiAvailable || null), (g.__onGCastApiAvailable = U1));
              }),
              (h.qh = function (e) {
                ((this.o = e), this.i && Nu(this, { type: "appData", appData: this.o }));
              }),
              (h.cast = function () {
                var e = this;
                return j(function (t) {
                  if (!e.m) throw new H(1, 8, 8e3);
                  if (!Id) throw new H(1, 8, 8001);
                  if (e.i) throw new H(1, 8, 8002);
                  return (
                    (e.j = new at()),
                    chrome.cast.requestSession(
                      function (n) {
                        return Ed(e, n);
                      },
                      function (n) {
                        return N1(e, n);
                      },
                    ),
                    I(t, e.j, 0)
                  );
                });
              }));
            function l_(e) {
              e.i &&
                chrome.cast.requestSession(
                  function (t) {
                    return Ed(e, t);
                  },
                  function (t) {
                    return N1(e, t);
                  },
                );
            }
            ((h.qd = function () {
              if (this.i) {
                if ((kg(this), Vr)) {
                  O1(this);
                  try {
                    Vr.stop(
                      function () {},
                      function () {},
                    );
                  } catch (e) {}
                  Vr = null;
                }
                Rg(this);
              }
            }),
              (h.get = function (e, t) {
                var n = this;
                if (e == "video") {
                  if (o_.includes(t))
                    return function () {
                      return n.Mi.apply(n, [e, t].concat(Y(At.apply(0, arguments))));
                    };
                } else if (e == "player") {
                  if (D1.has(t) && !this.get("player", "isLive")()) return function () {};
                  if (a_.includes(t))
                    return function () {
                      return n.Mi.apply(n, [e, t].concat(Y(At.apply(0, arguments))));
                    };
                  if (u_.includes(t))
                    return function () {
                      return n.Pk.apply(n, [e, t].concat(Y(At.apply(0, arguments))));
                    };
                  if (Ig.has(t) || Cg.has(t))
                    return function () {
                      return n.g[e][t];
                    };
                }
                return this.g[e][t];
              }),
              (h.set = function (e, t, n) {
                ((this.g[e][t] = n), Nu(this, { type: "set", targetName: e, property: t, value: n }));
              }));
            function Ed(e, t) {
              var n = e.N();
              ((Vr = t),
                t.addUpdateListener(e.C),
                t.addMessageListener("urn:x-cast:com.google.shaka.v2", e.F),
                Rg(e),
                Nu(e, { type: "init", initState: n, appData: e.o }),
                e.j.resolve());
            }
            function N1(e, t) {
              var n = 8003;
              switch (t.code) {
                case "cancel":
                  n = 8004;
                  break;
                case "timeout":
                  n = 8005;
                  break;
                case "receiver_unavailable":
                  n = 8006;
              }
              e.j.reject(new H(2, 8, n, t));
            }
            ((h.Mi = function (e, t) {
              Nu(this, { type: "call", targetName: e, methodName: t, args: At.apply(2, arguments) });
            }),
              (h.Pk = function (e, t) {
                var n = At.apply(2, arguments),
                  r = new at(),
                  i = this.I.toString();
                (this.I++, this.h.set(i, r));
                try {
                  Nu(this, { type: "asyncCall", targetName: e, methodName: t, args: n, id: i });
                } catch (s) {
                  r.reject(s);
                }
                return r;
              }));
            function O1(e) {
              var t = Vr;
              (t.removeUpdateListener(e.C), t.removeMessageListener("urn:x-cast:com.google.shaka.v2", e.F));
            }
            function Rg(e) {
              var t = Vr ? Vr.status == "connected" : !1;
              if (e.i && !t) {
                e.G();
                for (var n in e.g) e.g[n] = {};
                kg(e);
              }
              ((e.i = t), (e.J = t ? Vr.receiver.friendlyName : ""), e.l.Jb());
            }
            function kg(e) {
              if (e.h)
                for (var t = x(e.h.keys()), n = t.next(); !n.done; n = t.next()) {
                  n = n.value;
                  var r = e.h.get(n);
                  (e.h.delete(n), r.reject(new H(1, 7, 7e3)));
                }
            }
            function Nu(e, t) {
              t = Ag(t);
              var n = Vr;
              try {
                n.sendMessage("urn:x-cast:com.google.shaka.v2", t, function () {}, As);
              } catch (r) {
                throw (
                  (t = new H(2, 8, 8005, r)),
                  (n = new we("error", new Map().set("detail", t))),
                  e.B("player", n),
                  e.qd(),
                  t
                );
              }
            }
            var c_ = 0.02,
              Id = !1,
              Vr = null,
              Cd = null,
              Ou = new Set();
            function U1(e) {
              if ((Cd ? (g.__onGCastApiAvailable = Cd) : delete g.__onGCastApiAvailable, (Cd = null), e))
                for (var t = x(Ou), n = t.next(); !n.done; n = t.next()) n.value.init();
              typeof g.__onGCastApiAvailable == "function" && g.__onGCastApiAvailable(e);
            }
            function jt(e, t, n, r) {
              ((r = r === void 0 ? !1 : r), ot.call(this));
              var i = this;
              ((this.i = e),
                (this.h = t),
                (this.l = this.o = this.m = this.u = this.j = null),
                (this.I = n),
                (this.H = r),
                (this.F = []),
                (this.C = []),
                (this.B = []),
                (this.G = new Map()),
                (this.g = null),
                g.chrome && Be().Oa() != "CAST"
                  ? ((this.g = new Mg(
                      n,
                      function () {
                        return F1(i);
                      },
                      function () {
                        return V1(i);
                      },
                      function (s, o) {
                        return G1(i, s, o);
                      },
                      function () {
                        return H1(i);
                      },
                      function () {
                        return B1(i);
                      },
                      r,
                    )),
                    d_(this))
                  : ((this.j = this.i), (this.u = this.h)));
            }
            (J(jt, ot),
              (h = jt.prototype),
              (h.destroy = function (e) {
                return (
                  this.g && e !== void 0 && e && this.g.qd(),
                  this.l && (this.l.release(), (this.l = null)),
                  (e = []),
                  this.h && (e.push(this.h.destroy()), (this.h = null)),
                  this.g && (e.push(this.g.destroy()), (this.g = null)),
                  (this.u = this.j = this.i = null),
                  ot.prototype.release.call(this),
                  Promise.all(e)
                );
              }),
              (h.gk = function () {
                return this.j;
              }),
              (h.td = function () {
                return this.u;
              }),
              (h.sj = function () {
                return this.g ? this.g.m && Id : !1;
              }),
              (h.wb = function () {
                return this.g ? this.g.wb() : !1;
              }),
              (h.eh = function () {
                return this.g ? this.g.eh() : "";
              }),
              (h.cast = function () {
                var e = this;
                return j(function (t) {
                  return t.g == 1
                    ? e.g
                      ? I(t, e.g.cast(), 2)
                      : t.return()
                    : e.h
                      ? I(t, e.h.Cc(), 0)
                      : t.return();
                });
              }),
              (h.qh = function (e) {
                this.g && this.g.qh(e);
              }),
              (h.il = function () {
                this.g && l_(this.g);
              }),
              (h.qd = function () {
                this.g && this.g.qd();
              }),
              (h.tj = function (e, t) {
                t = t === void 0 ? !1 : t;
                var n = this;
                return j(function (r) {
                  if (r.g == 1)
                    return (e == n.I && t == n.H) || ((n.I = e), (n.H = t), !n.g)
                      ? r.return()
                      : (n.g.qd(), I(r, n.g.destroy(), 2));
                  ((n.g = null),
                    (n.g = new Mg(
                      e,
                      function () {
                        return F1(n);
                      },
                      function () {
                        return V1(n);
                      },
                      function (i, s) {
                        return G1(n, i, s);
                      },
                      function () {
                        return H1(n);
                      },
                      function () {
                        return B1(n);
                      },
                      t,
                    )),
                    n.g.init(),
                    re(r));
                });
              }));
            function d_(e) {
              (e.g.init(), (e.l = new et()));
              for (var t = x(P1), n = t.next(); !n.done; n = t.next())
                e.l.D(e.i, n.value, function (s) {
                  e.g.wb() || ((s = E0(s)), e.m.dispatchEvent(s));
                });
              for (var r in mc)
                e.l.D(e.h, mc[r], function (s) {
                  e.g.wb() || e.o.dispatchEvent(s);
                });
              ((e.j = {}), (t = {}));
              for (var i in e.i)
                ((t = { ie: t.ie }),
                  (t.ie = i),
                  Object.defineProperty(e.j, t.ie, {
                    configurable: !1,
                    enumerable: !0,
                    get: (function (s) {
                      return function () {
                        return h_(e, s.ie);
                      };
                    })(t),
                    set: (function (s) {
                      return function (o) {
                        var u = s.ie;
                        e.g.wb() ? e.g.set("video", u, o) : (e.i[u] = o);
                      };
                    })(t),
                  }));
              ((e.u = {}),
                j1(e, function (s) {
                  Object.defineProperty(e.u, s, {
                    configurable: !1,
                    enumerable: !0,
                    get: function () {
                      return Md(e, s);
                    },
                  });
                }),
                f_(e),
                (e.m = new ot()),
                (e.m.Je = e.j),
                (e.o = new ot()),
                (e.o.Je = e.u),
                e.l.D(e.h, "unloading", function () {
                  (e.g && e.g.wb()) || _g(e);
                }));
            }
            function f_(e) {
              var t = new Map();
              j1(e, function (n, r) {
                t.has(r)
                  ? ((r = t.get(r)), n.length < r.length ? e.G.set(n, r) : e.G.set(r, n))
                  : t.set(r, n);
              });
            }
            function j1(e, t) {
              function n(l) {
                return l == "constructor" || typeof r[l] != "function" ? !1 : !i.has(l);
              }
              var r = e.h,
                i = new Set(),
                s;
              for (s in r) n(s) && (i.add(s), t(s, r[s]));
              for (e = Object.getPrototypeOf(r), s = Object.getPrototypeOf({}); e && e != s; ) {
                for (var o = x(Object.getOwnPropertyNames(e)), u = o.next(); !u.done; u = o.next())
                  ((u = u.value), n(u) && (i.add(u), t(u, r[u])));
                e = Object.getPrototypeOf(e);
              }
            }
            function B1(e) {
              var t = {
                video: {},
                player: {},
                playerAfterLoad: {},
                manifest: e.h.rd(),
                startTime: null,
                addThumbnailsTrackCalls: e.F,
                addTextTrackAsyncCalls: e.C,
                addChaptersTrackCalls: e.B,
              };
              e.i.pause();
              for (var n = x(Eg), r = n.next(); !r.done; r = n.next()) ((r = r.value), (t.video[r] = e.i[r]));
              for (
                e.i.ended || (t.startTime = e.i.currentTime), n = x(L1), r = n.next();
                !r.done;
                r = n.next()
              ) {
                var i = r.value;
                ((r = i[1]), (i = e.h[i[0]]()), (t.player[r] = i));
              }
              for (n = x(b1), r = n.next(); !r.done; r = n.next())
                ((i = r.value), (r = i[1]), (i = e.h[i[0]]()), (t.playerAfterLoad[r] = i));
              return t;
            }
            function F1(e) {
              var t = new we("caststatuschanged");
              e.dispatchEvent(t);
            }
            function V1(e) {
              var t = new we(e.j.paused ? "pause" : "play");
              e.m.dispatchEvent(t);
            }
            function H1(e) {
              for (var t = x(L1), n = t.next(); !n.done; n = t.next()) {
                var r = n.value;
                ((n = r[1]), (r = e.g.get("player", r[0])()), e.h[n](r));
              }
              var i = e.F,
                s = e.C,
                o = e.B;
              _g(e);
              var u = e.g.get("player", "getAssetUri")();
              ((r = e.g.get("video", "ended")), (t = Promise.resolve()));
              var l = e.i.autoplay;
              ((n = null), r || (n = e.g.get("video", "currentTime")));
              var p;
              (r = e.g.get("player", "getTextTracks")()) &&
                r.length &&
                (p = r.find(function (v) {
                  return v.active;
                }));
              var m = e.g.get("player", "isTextTrackVisible")();
              u && ((e.i.autoplay = !1), (t = e.h.load(u, n)));
              var y = {};
              for (n = x(Eg), r = n.next(); !r.done; r = n.next())
                ((r = r.value), (y[r] = e.g.get("video", r)));
              t.then(
                function () {
                  if (e.i) {
                    for (var v = x(i), w = v.next(); !w.done; w = v.next()) {
                      w = w.value;
                      var A;
                      (A = e.td()).Pe.apply(A, Y(w));
                    }
                    for (v = x(s), A = v.next(); !A.done; A = v.next()) {
                      A = A.value;
                      var E;
                      (E = e.td()).Rd.apply(E, Y(A));
                    }
                    for (E = x(o), v = E.next(); !v.done; v = E.next()) {
                      v = v.value;
                      var C;
                      (C = e.td()).Oe.apply(C, Y(v));
                    }
                    for (C = x(Eg), E = C.next(); !E.done; E = C.next()) ((E = E.value), (e.i[E] = y[E]));
                    for (C = x(b1), E = C.next(); !E.done; E = C.next())
                      ((v = E.value), (E = v[1]), (v = e.g.get("player", v[0])()), e.h[E](v));
                    (e.h.wh(m),
                      p && e.h.oh(p.language, p.roles, p.forced),
                      (e.i.autoplay = l),
                      u && e.i.play());
                  }
                },
                function (v) {
                  ((v = new Map().set("detail", v)), (v = new we("error", v)), e.h.dispatchEvent(v));
                },
              );
            }
            function h_(e, t) {
              if (t == "addEventListener")
                return function (r, i, s) {
                  return e.m.addEventListener(r, i, s);
                };
              if (t == "removeEventListener")
                return function (r, i, s) {
                  return e.m.removeEventListener(r, i, s);
                };
              if (e.g.wb() && Object.keys(e.g.g.video).length == 0) {
                var n = e.i[t];
                if (typeof n != "function") return n;
              }
              return e.g.wb()
                ? e.g.get("video", t)
                : ((t = e.i[t]), typeof t == "function" && (t = t.bind(e.i)), t);
            }
            function Md(e, t, n) {
              if (((n = n === void 0 ? !1 : n), e.G.has(t) && (t = e.G.get(t)), t == "addEventListener"))
                return function (r, i, s) {
                  return e.o.addEventListener(r, i, s);
                };
              if (t == "removeEventListener")
                return function (r, i, s) {
                  return e.o.removeEventListener(r, i, s);
                };
              if (t == "getMediaElement")
                return function () {
                  return e.j;
                };
              if (t == "getSharedConfiguration") return e.g.get("player", "getConfiguration");
              if (t == "getNetworkingEngine")
                return function () {
                  return e.h.Yb();
                };
              if (t == "getDrmEngine")
                return function () {
                  return e.h.F;
                };
              if (t == "getAdManager")
                return function () {
                  return e.h.di();
                };
              if (t == "getQueueManager")
                return function () {
                  return e.h.mi();
                };
              if (t == "setVideoContainer")
                return function (r) {
                  return e.h.Zi(r);
                };
              if (!n) {
                if (t == "addThumbnailsTrack")
                  return function () {
                    var r = At.apply(0, arguments);
                    return (e.F.push(r), Md(e, t, !0).apply(null, Y(r)));
                  };
                if (t == "addTextTrackAsync")
                  return function () {
                    var r = At.apply(0, arguments);
                    return (e.C.push(r), Md(e, t, !0).apply(null, Y(r)));
                  };
                if (t == "addChaptersTrack")
                  return function () {
                    var r = At.apply(0, arguments);
                    return (e.B.push(r), Md(e, t, !0).apply(null, Y(r)));
                  };
              }
              if (e.g.wb()) {
                if (t == "getManifest" || t == "drmInfo")
                  return function () {
                    return (je(t + "() does not work while casting!"), null);
                  };
                if (t == "attach" || t == "detach")
                  return function () {
                    return (je(t + "() does not work while casting!"), Promise.resolve());
                  };
                if (t == "getChapters")
                  return function () {
                    return (je(t + "() does not work while casting!"), []);
                  };
              }
              return (e.g.wb() && Object.keys(e.g.g.video).length == 0 && (Ig.has(t) || Cg.has(t))) ||
                !e.g.wb()
                ? e.h[t].bind(e.h)
                : e.g.get("player", t);
            }
            function G1(e, t, n) {
              e.g.wb() &&
                (t == "video"
                  ? e.m.dispatchEvent(n)
                  : t == "player" && (n.type == "unloading" && _g(e), e.o.dispatchEvent(n)));
            }
            function _g(e) {
              ((e.F = []), (e.C = []), (e.B = []));
            }
            (fe("shaka.cast.CastProxy", jt),
              (jt.prototype.changeReceiverId = jt.prototype.tj),
              (jt.prototype.forceDisconnect = jt.prototype.qd),
              (jt.prototype.suggestDisconnect = jt.prototype.il),
              (jt.prototype.setAppData = jt.prototype.qh),
              (jt.prototype.cast = jt.prototype.cast),
              (jt.prototype.receiverName = jt.prototype.eh),
              (jt.prototype.isCasting = jt.prototype.wb),
              (jt.prototype.canCast = jt.prototype.sj),
              (jt.prototype.getPlayer = jt.prototype.td),
              (jt.prototype.getVideo = jt.prototype.gk),
              (jt.prototype.destroy = jt.prototype.destroy));
            function yn(e, t, n, r) {
              ot.call(this);
              var i = this;
              ((this.h = e),
                (this.g = t),
                (this.j = new et()),
                (this.I = { video: e, player: t }),
                (this.G = n || function () {}),
                (this.J =
                  r ||
                  function (s) {
                    return s;
                  }),
                (this.i = null),
                (this.H = !1),
                (this.o = !0),
                (this.m = 0),
                (this.C = !1),
                (this.B = !0),
                (this.u = this.l = null),
                (this.F = new Ve(function () {
                  Pg(i);
                })),
                p_(this));
            }
            (J(yn, ot),
              (h = yn.prototype),
              (h.isConnected = function () {
                return this.H;
              }),
              (h.pk = function () {
                return this.o;
              }),
              (h.al = function (e) {
                this.i = e;
              }),
              (h.xj = function () {
                this.i = null;
              }),
              (h.cl = function (e) {
                (this.i || (this.i = { metadataType: cast.receiver.media.MetadataType.GENERIC }),
                  (this.i.title = e));
              }),
              (h.$k = function (e) {
                (this.i || (this.i = { metadataType: cast.receiver.media.MetadataType.GENERIC }),
                  (this.i.images = [{ url: e }]));
              }),
              (h.Zk = function (e) {
                (this.i || (this.i = {}),
                  (this.i.artist = e),
                  (this.i.metadataType = cast.receiver.media.MetadataType.MUSIC_TRACK));
              }),
              (h.destroy = function () {
                var e = this,
                  t,
                  n;
                return j(function (r) {
                  if (r.g == 1)
                    return (
                      e.j && (e.j.release(), (e.j = null)),
                      (t = []),
                      e.g && (t.push(e.g.destroy()), (e.g = null)),
                      e.F && (e.F.stop(), (e.F = null)),
                      (e.h = null),
                      (e.I = null),
                      (e.G = null),
                      (e.H = !1),
                      (e.o = !0),
                      (e.l = null),
                      (e.u = null),
                      ot.prototype.release.call(e),
                      I(r, Promise.all(t), 2)
                    );
                  ((n = cast.receiver.CastReceiverManager.getInstance()), n.stop(), re(r));
                });
              }));
            function p_(e) {
              var t = cast.receiver.CastReceiverManager.getInstance();
              ((t.onSenderConnected = function () {
                return z1(e);
              }),
                (t.onSenderDisconnected = function () {
                  return z1(e);
                }),
                (t.onSystemVolumeChanged = function () {
                  var i = cast.receiver.CastReceiverManager.getInstance().getSystemVolume();
                  (i &&
                    Di(e, { type: "update", update: { video: { volume: i.level, muted: i.muted } } }, e.l),
                    Di(e, { type: "event", targetName: "video", event: { type: "volumechange" } }, e.l));
                }),
                (e.u = t.getCastMessageBus("urn:x-cast:com.google.cast.media")),
                (e.u.onMessage = function (i) {
                  return y_(e, i);
                }),
                (e.l = t.getCastMessageBus("urn:x-cast:com.google.shaka.v2")),
                (e.l.onMessage = function (i) {
                  return m_(e, i);
                }),
                t.start(),
                (t = x(P1)));
              for (var n = t.next(); !n.done; n = t.next())
                e.j.D(e.h, n.value, function (i) {
                  return X1(e, "video", i);
                });
              for (var r in mc)
                e.j.D(e.g, mc[r], function (i) {
                  return X1(e, "player", i);
                });
              (e.j.D(e.h, "loadeddata", function () {
                e.C = !0;
              }),
                e.j.D(e.g, "loading", function () {
                  ((e.o = !1), Yo(e));
                }),
                e.j.D(e.h, "playing", function () {
                  ((e.o = !1), Yo(e));
                }),
                e.j.D(e.h, "pause", function () {
                  Yo(e);
                }),
                e.j.D(e.g, "unloading", function () {
                  ((e.o = !0), Yo(e));
                }),
                e.j.D(e.h, "ended", function () {
                  new Ve(function () {
                    e.h && e.h.ended && ((e.o = !0), Yo(e));
                  }).ka(x_);
                }));
            }
            function z1(e) {
              ((e.m = 0),
                (e.B = !0),
                (e.H = cast.receiver.CastReceiverManager.getInstance().getSenders().length != 0),
                Yo(e));
            }
            function Yo(e) {
              var t;
              j(function (n) {
                if (n.g == 1) return I(n, Promise.resolve(), 2);
                if (!e.g) return n.return();
                ((t = new we("caststatuschanged")), e.dispatchEvent(t), W1(e) || Li(e), re(n));
              });
            }
            function g_(e, t, n) {
              var r, i, s, o, u, l, p, m, y, v, w, A, E, C, k, R, L, U, G;
              j(function (b) {
                switch (b.g) {
                  case 1:
                    for (r in t.player) ((i = t.player[r]), e.g[r](i));
                    return (
                      e.G(n),
                      (s = e.h.autoplay),
                      t.manifest
                        ? ((e.h.autoplay = !1), ee(b, 5), I(b, e.g.load(t.manifest, t.startTime), 7))
                        : I(b, Promise.resolve(), 3)
                    );
                  case 7:
                    if (t.addThumbnailsTrackCalls)
                      for (o = x(t.addThumbnailsTrackCalls), u = o.next(); !u.done; u = o.next())
                        ((l = u.value), e.g.Pe.apply(e.g, Y(l)));
                    if (t.addTextTrackAsyncCalls)
                      for (p = x(t.addTextTrackAsyncCalls), m = p.next(); !m.done; m = p.next())
                        ((y = m.value), e.g.Rd.apply(e.g, Y(y)));
                    if (t.addChaptersTrackCalls)
                      for (v = x(t.addChaptersTrackCalls), w = v.next(); !w.done; w = v.next())
                        ((A = w.value), e.g.Oe.apply(e.g, Y(A)));
                    de(b, 3);
                    break;
                  case 5:
                    return (
                      (E = se(b)),
                      (C = new Map().set("detail", E)),
                      (k = new we("error", C)),
                      e.g && e.g.dispatchEvent(k),
                      b.return()
                    );
                  case 3:
                    if (!e.g) return b.return();
                    for (R in t.video) ((L = t.video[R]), (e.h[R] = L));
                    for (U in t.playerAfterLoad) ((G = t.playerAfterLoad[U]), e.g[U](G));
                    ((e.h.autoplay = s), t.manifest && (e.h.play(), Li(e)), re(b));
                }
              });
            }
            function X1(e, t, n) {
              e.g && (Pg(e), Di(e, { type: "event", targetName: t, event: n }, e.l));
            }
            function Pg(e) {
              e.F.ka(v_);
              for (var t = { video: {}, player: {} }, n = x(s_), r = n.next(); !r.done; r = n.next())
                ((r = r.value), (t.video[r] = e.h[r]));
              (e.g.W() &&
                D1.forEach(function (i, s) {
                  e.m % i == 0 && (t.player[s] = e.g[s]());
                }),
                Ig.forEach(function (i, s) {
                  e.m % i == 0 && (t.player[s] = e.g[s]());
                }),
                (n = cast.receiver.CastReceiverManager.getInstance().getSystemVolume()) &&
                  ((t.video.volume = n.level), (t.video.muted = n.muted)),
                Di(e, { type: "update", update: t }, e.l),
                Cg.forEach(function (i, s) {
                  e.m % i == 0 &&
                    ((i = { player: {} }),
                    (i.player[s] = e.g[s]()),
                    Di(e, { type: "update", update: i }, e.l));
                }),
                e.C && (e.m += 1),
                W1(e));
            }
            function W1(e) {
              return e.B && (e.h.duration || e.g.W()) ? (Dg(e), (e.B = !1), !0) : !1;
            }
            function Dg(e, t) {
              var n = { contentId: e.g.rd(), streamType: e.g.W() ? "LIVE" : "BUFFERED", contentType: "" };
              (e.g.W() || (n.duration = e.h.duration),
                e.i && (n.metadata = e.i),
                Li(e, t === void 0 ? 0 : t, n));
            }
            function m_(e, t) {
              var n = Ad(t.data);
              switch (n.type) {
                case "init":
                  ((e.m = 0), (e.C = !1), (e.B = !0), g_(e, n.initState, n.appData), Pg(e));
                  break;
                case "appData":
                  e.G(n.appData);
                  break;
                case "set":
                  var r = n.targetName,
                    i = n.property;
                  if (((n = n.value), r == "video")) {
                    if (((t = cast.receiver.CastReceiverManager.getInstance()), i == "volume")) {
                      t.setSystemVolumeLevel(n);
                      break;
                    } else if (i == "muted") {
                      t.setSystemVolumeMuted(n);
                      break;
                    }
                  }
                  e.I[r][i] = n;
                  break;
                case "call":
                  ((r = e.I[n.targetName]), r[n.methodName].apply(r, n.args));
                  break;
                case "asyncCall":
                  ((r = n.targetName),
                    (i = n.methodName),
                    r == "player" && i == "load" && ((e.m = 0), (e.C = !1)));
                  var s = n.id,
                    o = t.senderId;
                  ((t = e.I[r]),
                    (n = t[i].apply(t, n.args)),
                    r == "player" &&
                      i == "load" &&
                      (n = n.then(function () {
                        e.B = !0;
                      })),
                    n.then(
                      function (u) {
                        return K1(e, o, s, null, u);
                      },
                      function (u) {
                        return K1(e, o, s, u, null);
                      },
                    ));
              }
            }
            function y_(e, t) {
              var n = Ad(t.data);
              switch (n.type) {
                case "PLAY":
                  (e.h.play(), Li(e));
                  break;
                case "PAUSE":
                  (e.h.pause(), Li(e));
                  break;
                case "SEEK":
                  t = n.currentTime;
                  var r = n.resumeState;
                  (t != null && (e.h.currentTime = Number(t)),
                    r && r == "PLAYBACK_START"
                      ? (e.h.play(), Li(e))
                      : r && r == "PLAYBACK_PAUSE" && (e.h.pause(), Li(e)));
                  break;
                case "STOP":
                  e.g.Cc().then(function () {
                    e.g && Li(e);
                  });
                  break;
                case "GET_STATUS":
                  Dg(e, Number(n.requestId));
                  break;
                case "VOLUME":
                  ((r = n.volume), (t = r.level), (r = r.muted));
                  var i = e.h.volume,
                    s = e.h.muted;
                  (t != null && (e.h.volume = Number(t)),
                    r != null && (e.h.muted = r),
                    (i == e.h.volume && s == e.h.muted) || Li(e));
                  break;
                case "LOAD":
                  ((e.m = 0),
                    (e.C = !1),
                    (e.B = !1),
                    (t = n.media),
                    (r = n.currentTime),
                    (i = e.J(t.contentId)),
                    (s = n.autoplay || !0),
                    e.G(t.customData),
                    s && (e.h.autoplay = !0),
                    e.g
                      .load(i, r)
                      .then(function () {
                        e.g && Dg(e);
                      })
                      .catch(function (o) {
                        var u = "LOAD_FAILED";
                        (o.category == 7 && o.code == 7e3 && (u = "LOAD_CANCELLED"),
                          Di(e, { requestId: Number(n.requestId), type: u }, e.u));
                      }));
                  break;
                default:
                  Di(
                    e,
                    { requestId: Number(n.requestId), type: "INVALID_REQUEST", reason: "INVALID_COMMAND" },
                    e.u,
                  );
              }
            }
            function K1(e, t, n, r, i) {
              e.g && Di(e, { type: "asyncComplete", id: n, error: r, res: i }, e.l, t);
            }
            function Di(e, t, n, r) {
              e.H && ((e = Ag(t)), r ? n.getCastChannel(r).send(e) : n.broadcast(e));
            }
            function Li(e, t, n) {
              n = n === void 0 ? null : n;
              var r = {
                mediaSessionId: 0,
                playbackRate: e.h.playbackRate,
                playerState: e.o ? T_ : e.g.Rg() ? w_ : e.h.paused ? A_ : S_,
                currentTime: e.h.currentTime,
                supportedMediaCommands: 63,
                volume: { level: e.h.volume, muted: e.h.muted },
              };
              (n && (r.media = n),
                Di(e, { requestId: t === void 0 ? 0 : t, type: "MEDIA_STATUS", status: [r] }, e.u));
            }
            (fe("shaka.cast.CastReceiver", yn),
              (yn.prototype.destroy = yn.prototype.destroy),
              (yn.prototype.setContentArtist = yn.prototype.Zk),
              (yn.prototype.setContentImage = yn.prototype.$k),
              (yn.prototype.setContentTitle = yn.prototype.cl),
              (yn.prototype.clearContentMetadata = yn.prototype.xj),
              (yn.prototype.setContentMetadata = yn.prototype.al),
              (yn.prototype.isIdle = yn.prototype.pk),
              (yn.prototype.isConnected = yn.prototype.isConnected));
            var v_ = 0.5,
              x_ = 5,
              T_ = "IDLE",
              S_ = "PLAYING",
              w_ = "BUFFERING",
              A_ = "PAUSED";
            function $1(e, t, n, r, i) {
              if (r >= i) return null;
              for (var s = -1, o = -1, u = 0; u < n.length; u++)
                if (
                  n[u].some(function (U) {
                    return U != null && U.g.trim() != "";
                  })
                ) {
                  s = u;
                  break;
                }
              for (u = n.length - 1; u >= 0; u--)
                if (
                  n[u].some(function (U) {
                    return U != null && U.g.trim() != "";
                  })
                ) {
                  o = u;
                  break;
                }
              if (s === -1 || o === -1) return null;
              for (var l = (u = !1), p = "white", m = "black", y = Lg(r, i, u, l, p, m); s <= o; s++) {
                for (var v = n[s], w = -1, A = -1, E = 0; E < v.length; E++)
                  if (v[E] != null && v[E].g.trim() !== "") {
                    w = E;
                    break;
                  }
                for (E = v.length - 1; E >= 0; E--)
                  if (v[E] != null && v[E].g.trim() !== "") {
                    A = E;
                    break;
                  }
                if (w === -1 || A === -1) ((v = Y1(r, i)), e.nestedCues.push(v));
                else {
                  for (; w <= A; w++)
                    if ((E = v[w])) {
                      var C = E.l,
                        k = E.i,
                        R = E.j,
                        L = E.h;
                      ((C != u || k != l || R != p || L != m) &&
                        (y.payload && e.nestedCues.push(y),
                        (y = Lg(r, i, C, k, R, L)),
                        (u = C),
                        (l = k),
                        (p = R),
                        (m = L)),
                        (y.payload += E.g));
                    } else y.payload += " ";
                  (y.payload && e.nestedCues.push(y),
                    s !== o && ((y = Y1(r, i)), e.nestedCues.push(y)),
                    (y = Lg(r, i, u, l, p, m)));
                }
              }
              return e.nestedCues.length ? { cue: e, stream: t } : null;
            }
            function Lg(e, t, n, r, i, s) {
              return (
                (e = new pt(e, t, "")),
                n && e.textDecoration.push(vi),
                r && (e.fontStyle = xo),
                (e.color = i),
                (e.backgroundColor = s),
                e
              );
            }
            function Y1(e, t) {
              return ((e = new pt(e, t, "")), (e.lineBreak = !0), e);
            }
            function q1(e, t, n, r, i) {
              ((this.g = e), (this.l = t), (this.i = n), (this.h = r), (this.j = i));
            }
            function bg(e, t) {
              ((this.i = []),
                (this.g = 1),
                (this.h = 0),
                (this.F = e),
                (this.C = t),
                (this.j = this.m = !1),
                (this.l = "white"),
                (this.o = "black"),
                (this.u = this.B = null),
                Uu(this));
            }
            function Rd(e, t, n) {
              var r = "CC" + (((e.F << 1) | e.C) + 1),
                i = new pt(t, n, "");
              i.lineInterpretation = 1;
              var s = Z1.get(e.g);
              return (
                s && (i.line = s),
                e.u != null && e.B != null && (i.position = 10 + Math.min(70, e.u * 10) + e.B * 2.5),
                (t = $1(i, r, e.i, t, n)) &&
                  e.g + t.cue.nestedCues.length - 3 > 15 &&
                  (s = Z1.get(e.g + 3 - t.cue.nestedCues.length)) &&
                  (i.line = s),
                t
              );
            }
            function Uu(e) {
              (bi(e, 0, 15), (e.g = 1));
            }
            function qo(e, t, n) {
              if (!(n < 32 || n > 127)) {
                var r = "";
                switch (t) {
                  case 0:
                    r = Q1.has(n) ? Q1.get(n) : String.fromCharCode(n);
                    break;
                  case 1:
                    r = E_.get(n);
                    break;
                  case 2:
                    (e.i[e.g].pop(), (r = I_.get(n)));
                    break;
                  case 3:
                    (e.i[e.g].pop(), (r = C_.get(n)));
                }
                r && e.i[e.g].push(new q1(r, e.m, e.j, e.o, e.l));
              }
            }
            function J1(e, t, n, r) {
              if (!(n < 0 || t < 0))
                if (t >= n)
                  for (--r; r >= 0; r--)
                    e.i[t + r] = e.i[n + r].map(function (s) {
                      return s;
                    });
                else
                  for (var i = 0; i < r; i++)
                    e.i[t + i] = e.i[n + i].map(function (s) {
                      return s;
                    });
            }
            function bi(e, t, n) {
              for (var r = 0; r <= n; r++) e.i[t + r] = [];
            }
            var Q1 = new Map([
                [39, ""],
                [42, ""],
                [92, ""],
                [92, ""],
                [94, ""],
                [95, ""],
                [96, ""],
                [123, ""],
                [124, ""],
                [125, ""],
                [126, ""],
                [127, ""],
              ]),
              E_ = new Map([
                [48, ""],
                [49, ""],
                [50, ""],
                [51, ""],
                [52, ""],
                [53, ""],
                [54, ""],
                [55, ""],
                [56, ""],
                [57, " "],
                [58, ""],
                [59, ""],
                [60, ""],
                [61, ""],
                [62, ""],
                [63, ""],
              ]),
              I_ = new Map([
                [32, ""],
                [33, ""],
                [34, ""],
                [35, ""],
                [36, ""],
                [37, ""],
                [38, ""],
                [39, ""],
                [40, "*"],
                [41, "'"],
                [42, ""],
                [43, ""],
                [44, ""],
                [45, ""],
                [46, ""],
                [47, ""],
                [48, ""],
                [49, ""],
                [50, ""],
                [51, ""],
                [52, ""],
                [53, ""],
                [54, ""],
                [55, ""],
                [56, ""],
                [57, ""],
                [58, ""],
                [59, ""],
                [60, ""],
                [61, ""],
                [62, ""],
                [63, ""],
              ]),
              C_ = new Map([
                [32, ""],
                [33, ""],
                [34, ""],
                [35, ""],
                [36, ""],
                [37, ""],
                [38, ""],
                [39, ""],
                [40, ""],
                [41, "{"],
                [42, "}"],
                [43, "\\"],
                [44, "^"],
                [45, "_"],
                [46, "|"],
                [47, "~"],
                [48, ""],
                [49, ""],
                [50, ""],
                [51, ""],
                [52, ""],
                [53, ""],
                [54, ""],
                [55, ""],
                [56, ""],
                [57, ""],
                [58, ""],
                [59, ""],
                [60, ""],
                [61, ""],
                [62, ""],
                [63, ""],
              ]),
              Z1 = new Map([
                [1, 10],
                [2, 15.33],
                [3, 20.66],
                [4, 26],
                [5, 31.33],
                [6, 36.66],
                [7, 42],
                [8, 47.33],
                [9, 52.66],
                [10, 58],
                [11, 63.33],
                [12, 68.66],
                [13, 74],
                [14, 79.33],
                [15, 84.66],
              ]);
            function kd(e, t) {
              ((this.h = 0),
                (this.o = new bg(e, t)),
                (this.i = new bg(e, t)),
                (this.g = this.j = new bg(e, t)),
                (this.l = 0),
                (this.m = null));
            }
            function Ng(e, t, n) {
              e.g = e.i;
              var r = e.g,
                i = null;
              return (
                e.h !== 3 &&
                  e.h !== 4 &&
                  ((i = Rd(r, e.l, n)),
                  (n = e.i),
                  (n.g = n.h > 0 ? n.h : 0),
                  bi(n, 0, 15),
                  (n = e.j),
                  (n.g = n.h > 0 ? n.h : 0),
                  bi(n, 0, 15),
                  (r.g = 15)),
                (e.h = 3),
                (r.h = t),
                i
              );
            }
            function eS(e) {
              ((e.h = 1), (e.g = e.j), (e.g.h = 0));
            }
            function tS(e) {
              (ur("Cea608DataChannel", "CEA-608 text mode entered, but is unsupported"),
                (e.g = e.o),
                (e.h = 4));
            }
            var M_ = "black green blue cyan red yellow magenta black".split(" "),
              nS = "white green blue cyan red yellow magenta white_italics".split(" ");
            function Og(e, t) {
              ((this.J = t),
                (this.N = e),
                (this.K = this.l = !1),
                (this.m = this.o = this.H = this.M = this.I = 0),
                (this.G = 2),
                (this.i = []),
                (this.g = this.h = this.j = 0),
                (this.F = this.B = !1),
                (this.C = "white"),
                (this.u = "black"),
                Ug(this));
            }
            function Ug(e) {
              e.i = [];
              for (var t = 0; t < 16; t++) e.i.push(jg());
            }
            function jg() {
              for (var e = [], t = 0; t < 42; t++) e.push(null);
              return e;
            }
            function fs(e, t) {
              rS(e) && ((e.i[e.h][e.g] = new q1(t, e.F, e.B, e.u, e.C)), e.g++);
            }
            function rS(e) {
              var t = e.g < e.m && e.g >= 0;
              return e.h < e.o && e.h >= 0 && t;
            }
            Og.prototype.isVisible = function () {
              return this.l;
            };
            function R_(e) {
              for (var t = 0, n = 1; n < 16; n++, t++) e.i[t] = e.i[n];
              for (n = 0; n < 1; n++, t++) e.i[t] = jg();
            }
            function $s(e, t, n) {
              var r = new pt(e.j, t, "");
              r.textAlign = e.G === 0 ? "left" : e.G === 1 ? "right" : ii;
              var i = r.region;
              switch (
                (e.J && (i.id += "svc" + e.J),
                (i.id += "win" + e.N),
                (i.height = e.o),
                (i.width = e.m),
                (i.heightUnits = 2),
                (i.widthUnits = 2),
                (i.viewportAnchorX = e.I),
                (i.viewportAnchorY = e.M),
                (i.viewportAnchorUnits = e.K ? Jn : 2),
                e.H)
              ) {
                case 0:
                  ((i.regionAnchorX = 0), (i.regionAnchorY = 0));
                  break;
                case 1:
                  ((i.regionAnchorX = 50), (i.regionAnchorY = 0));
                  break;
                case 2:
                  ((i.regionAnchorX = 100), (i.regionAnchorY = 0));
                  break;
                case 3:
                  ((i.regionAnchorX = 0), (i.regionAnchorY = 50));
                  break;
                case 4:
                  ((i.regionAnchorX = 50), (i.regionAnchorY = 50));
                  break;
                case 5:
                  ((i.regionAnchorX = 100), (i.regionAnchorY = 50));
                  break;
                case 6:
                  ((i.regionAnchorX = 0), (i.regionAnchorY = 100));
                  break;
                case 7:
                  ((i.regionAnchorX = 50), (i.regionAnchorY = 100));
                  break;
                case 8:
                  ((i.regionAnchorX = 100), (i.regionAnchorY = 100));
              }
              return ((n = $1(r, "svc" + n, e.i, e.j, t)) && (e.j = t), n);
            }
            Og.prototype.display = function () {
              this.l = !0;
            };
            function k_() {
              ((this.i = []), (this.h = null), (this.g = 0));
            }
            function __(e, t) {
              t.type === 3
                ? ((e.g = (t.value & 63) * 2 - 1), (e.h = []))
                : e.h &&
                  (e.g > 0 && (e.h.push(t), e.g--),
                  e.g === 0 && (e.i.push(new ju(e.h)), (e.h = null), (e.g = 0)));
            }
            function ju(e) {
              ((this.g = 0), (this.h = e));
            }
            ((ju.prototype.Ia = function () {
              return this.g < this.h.length;
            }),
              (ju.prototype.Pa = function () {
                return this.g;
              }));
            function Kt(e) {
              if (!e.Ia()) throw new H(2, 2, 3e3);
              return e.h[e.g++];
            }
            ((ju.prototype.skip = function (e) {
              if (this.g + e > this.h.length) throw new H(2, 2, 3e3);
              this.g += e;
            }),
              (ju.prototype.Qi = function (e) {
                if (this.g - e < 0) throw new H(2, 2, 3e3);
                this.g -= e;
              }));
            function P_(e) {
              ((this.i = e), (this.h = [null, null, null, null, null, null, null, null]), (this.g = null));
            }
            function D_(e, t, n, r) {
              if (!e.g) return [];
              if (n == 24)
                return (
                  (n = Kt(t).value),
                  (r = Kt(t).value),
                  (n = (function (s) {
                    return s
                      .map(function (o) {
                        return ("0" + (o & 255).toString(16)).slice(-2);
                      })
                      .join("");
                  })([n, r])),
                  fs(e.g, String.fromCharCode(parseInt(n, 16))),
                  []
                );
              t = e.g;
              var i = null;
              switch (n) {
                case 8:
                  !rS(t) ||
                    (t.g <= 0 && t.h <= 0) ||
                    (t.g <= 0 ? ((t.g = t.m - 1), t.h--) : t.g--, (t.i[t.h][t.g] = null));
                  break;
                case 13:
                  (t.isVisible() && (i = $s(t, r, e.i)), t.h + 1 >= t.o ? R_(t) : t.h++, (t.g = 0));
                  break;
                case 14:
                  (t.isVisible() && (i = $s(t, r, e.i)), (t.i[t.h] = jg()), (t.g = 0));
                  break;
                case 12:
                  (t.isVisible() && (i = $s(t, r, e.i)), Ug(t), (t.h = 0), (t.g = 0));
              }
              return i ? [i] : [];
            }
            function L_(e, t, n, r) {
              if (n >= 128 && n <= 135) ((r = n & 7), e.h[r] && (e.g = e.h[r]));
              else {
                if (n === 136) {
                  ((n = Kt(t).value), (t = []), (n = x(Bu(e, n))));
                  for (var i = n.next(); !i.done; i = n.next()) {
                    if (((i = e.h[i.value]), i.isVisible())) {
                      var s = $s(i, r, e.i);
                      s && t.push(s);
                    }
                    Ug(i);
                  }
                  return t;
                }
                if (n === 137)
                  for (t = Kt(t).value, t = x(Bu(e, t)), n = t.next(); !n.done; n = t.next())
                    ((n = e.h[n.value]), n.isVisible() || (n.j = r), n.display());
                else {
                  if (n === 138) {
                    for (n = Kt(t).value, t = null, n = x(Bu(e, n)), i = n.next(); !i.done; i = n.next())
                      ((i = e.h[i.value]), i.isVisible() && (t = $s(i, r, e.i)), (i.l = !1));
                    return t ? [t] : [];
                  }
                  if (n === 139) {
                    for (n = Kt(t).value, t = null, n = x(Bu(e, n)), i = n.next(); !i.done; i = n.next())
                      ((i = e.h[i.value]), i.isVisible() ? (t = $s(i, r, e.i)) : (i.j = r), (i.l = !i.l));
                    return t ? [t] : [];
                  }
                  if (n === 140) return ((t = Kt(t).value), iS(e, t, r));
                  if (n === 143) return ((r = iS(e, 255, r)), sS(e), r);
                  if (n === 144)
                    (t.skip(1), (r = Kt(t).value), e.g && ((e.g.B = (r & 128) > 0), (e.g.F = (r & 64) > 0)));
                  else if (n === 145)
                    ((r = Kt(t).value),
                      (n = Kt(t).value),
                      t.skip(1),
                      e.g &&
                        ((t = oS((n & 48) >> 4, (n & 12) >> 2, n & 3)),
                        (e.g.C = oS((r & 48) >> 4, (r & 12) >> 2, r & 3)),
                        (e.g.u = t)));
                  else if (n === 146)
                    ((r = Kt(t).value),
                      (t = Kt(t).value),
                      e.g && ((e = e.g), (e.h = r & 15), (e.g = t & 63)));
                  else if (n === 151)
                    (t.skip(1), t.skip(1), (r = Kt(t).value), t.skip(1), e.g && (e.g.G = r & 3));
                  else if (n >= 152 && n <= 159) {
                    ((n = (n & 15) - 8),
                      (i = e.h[n] !== null),
                      i || ((s = new Og(n, e.i)), (s.j = r), (e.h[n] = s)),
                      (r = Kt(t).value),
                      (s = Kt(t).value));
                    var o = Kt(t).value,
                      u = Kt(t).value,
                      l = Kt(t).value;
                    ((t = Kt(t).value),
                      (i && (t & 7) === 0) ||
                        ((t = e.h[n]),
                        (t.h = 0),
                        (t.g = 0),
                        (t.F = !1),
                        (t.B = !1),
                        (t.C = "white"),
                        (t.u = "black")),
                      (t = e.h[n]),
                      (t.l = (r & 32) > 0),
                      (t.M = s & 127),
                      (t.I = o),
                      (t.H = (u & 240) >> 4),
                      (t.K = (s & 128) > 0),
                      (t.o = (u & 15) + 1),
                      (t.m = (l & 63) + 1),
                      (e.g = e.h[n]));
                  }
                }
              }
              return [];
            }
            function Bu(e, t) {
              for (var n = [], r = 0; r < 8; r++) ((t & 1) === 1 && e.h[r] && n.push(r), (t >>= 1));
              return n;
            }
            function iS(e, t, n) {
              var r = [];
              t = x(Bu(e, t));
              for (var i = t.next(); !i.done; i = t.next()) {
                i = i.value;
                var s = e.h[i];
                (s.isVisible() && (s = $s(s, n, e.i)) && r.push(s), (e.h[i] = null));
              }
              return r;
            }
            function sS(e) {
              ((e.g = null), (e.h = [null, null, null, null, null, null, null, null]));
            }
            function oS(e, t, n) {
              var r = { 0: 0, 1: 0, 2: 1, 3: 1 };
              return ((e = r[e]), (t = r[t]), (n = r[n]), b_[(e << 2) | (t << 1) | n]);
            }
            var aS = new Map([
                [32, " "],
                [33, ""],
                [37, ""],
                [42, ""],
                [44, ""],
                [48, ""],
                [49, ""],
                [50, ""],
                [51, ""],
                [52, ""],
                [53, ""],
                [57, ""],
                [58, ""],
                [60, ""],
                [61, ""],
                [63, ""],
                [118, ""],
                [119, ""],
                [120, ""],
                [121, ""],
                [122, ""],
                [123, ""],
                [124, ""],
                [125, ""],
                [126, ""],
                [127, ""],
              ]),
              b_ = "black blue green cyan red magenta yellow white".split(" ");
            function Jo() {
              ((this.h = []),
                (this.g = []),
                (this.i = new k_()),
                (this.l = 0),
                (this.m = new Map([
                  ["CC1", new kd(0, 0)],
                  ["CC2", new kd(0, 1)],
                  ["CC3", new kd(1, 0)],
                  ["CC4", new kd(1, 1)],
                ])),
                (this.u = this.o = 0),
                (this.j = new Map()),
                (this.C = !0),
                (this.B = new Set()),
                Bg(this));
            }
            Jo.prototype.clear = function () {
              ((this.l = 0), (this.h = []), (this.g = []));
              var e = this.i;
              ((e.i = []), (e.h = []), (e.g = 0), Bg(this), (e = x(this.j.values())));
              for (var t = e.next(); !t.done; t = e.next()) sS(t.value);
            };
            function Bg(e) {
              ((e.o = 0), (e.u = 0));
              for (var t = x(e.m.values()), n = t.next(); !n.done; n = t.next())
                ((n = n.value), (n.h = 0), (n.g = n.j), (n.m = null), Uu(n.i), Uu(n.j), Uu(n.o));
              e.C = !0;
            }
            ((Jo.prototype.extract = function (e, t) {
              if (this.C) {
                for (var n = x(this.m.values()), r = n.next(); !r.done; r = n.next()) r.value.l = t;
                this.C = !1;
              }
              if (
                ((e = new gt(e, 0)),
                !(e.getLength() < 8) &&
                  e.Y() === 181 &&
                  e.Ca() === 49 &&
                  e.U() === 1195456820 &&
                  e.Y() === 3 &&
                  ((n = e.Y()), (n & 64) !== 0))
              )
                for (n &= 31, e.skip(1), r = 0; r < n; r++) {
                  var i = e.Y(),
                    s = (i & 4) >> 2,
                    o = e.Y(),
                    u = e.Y();
                  s &&
                    ((i &= 3),
                    i === 0 || i === 1
                      ? this.h.push({ pts: t, type: i, Cb: o, kc: u, order: this.h.length })
                      : (this.g.push({ pts: t, type: i, value: o, order: this.g.length }),
                        this.g.push({ pts: t, type: 2, value: u, order: this.g.length })));
                }
            }),
              (Jo.prototype.decode = function () {
                function e(i, s) {
                  return i.pts - s.pts || i.order - s.order;
                }
                var t = [];
                (this.h.sort(e), this.g.sort(e));
                for (var n = x(this.h), r = n.next(); !r.done; r = n.next())
                  (r = N_(this, r.value)) && t.push(r);
                for (n = x(this.g), r = n.next(); !r.done; r = n.next()) __(this.i, r.value);
                for (n = x(this.i.i), r = n.next(); !r.done; r = n.next())
                  ((r = O_(this, r.value)), t.push.apply(t, Y(r)));
                return ((this.i.i = []), (this.h = []), (this.g = []), t);
              }));
            function N_(e, t) {
              var n = t.type;
              if ((t.Cb & 112) === 16) {
                var r = (t.Cb >> 3) & 1;
                n === 0 ? (e.o = r) : (e.u = r);
              }
              if (
                ((r = "CC" + (((n << 1) | (n ? e.u : e.o)) + 1)),
                (n = e.m.get(r)),
                (t.Cb === 255 && t.kc === 255) || (!t.Cb && !t.kc) || !uS(t.Cb) || !uS(t.kc))
              )
                return (++e.l >= 45 && Bg(e), null);
              ((e.l = 0), (t.Cb &= 127), (t.kc &= 127));
              var i = t.Cb;
              if ((i >= 1 && i <= 15) || (!t.Cb && !t.kc)) return null;
              if (((i = null), (t.Cb & 112) === 16))
                e: {
                  if ((e.B.add(r), (r = t.Cb), (e = t.kc), n.m === ((r << 8) | e))) n.m = null;
                  else if (((n.m = (r << 8) | e), (r & 240) === 16 && (e & 192) === 64)) {
                    ((t = [11, 11, 1, 2, 3, 4, 12, 13, 14, 15, 5, 6, 7, 8, 9, 10][
                      ((r & 7) << 1) | ((e >> 5) & 1)
                    ]),
                      (r = "white"),
                      (i = !1));
                    var s = null,
                      o = e > 95 ? e - 96 : e - 64;
                    (o <= 13
                      ? (r = nS[Math.floor(o / 2)])
                      : o <= 15
                        ? (i = !0)
                        : (s = Math.floor((o - 16) / 2)),
                      (e = (e & 1) === 1),
                      n.h !== 4 &&
                        ((o = n.g),
                        n.h === 3 &&
                          t !== o.g &&
                          ((n = 1 + t - o.h),
                          J1(o, n, 1 + o.g - o.h, o.h),
                          bi(o, 0, n - 1),
                          bi(o, t + 1, 15 - t)),
                        (o.g = t),
                        (o.m = e),
                        (o.j = i),
                        (o.l = r),
                        (o.u = s),
                        (o.o = "black")));
                  } else if ((r & 247) === 17 && (e & 240) === 32)
                    ((n.g.m = !1),
                      (n.g.j = !1),
                      (n.g.l = "white"),
                      qo(n.g, 0, 32),
                      (r = !1),
                      (t = nS[(e & 14) >> 1]),
                      t === "white_italics" && ((t = "white"), (r = !0)),
                      (n.g.m = (e & 1) === 1),
                      (n.g.j = r),
                      (n.g.l = t));
                  else if (((r & 247) === 16 && (e & 240) === 32) || ((r & 247) === 23 && (e & 255) === 45))
                    ((t = "black"), (r & 7) === 0 && (t = M_[(e & 14) >> 1]), (n.g.o = t));
                  else if ((r & 247) === 17 && (e & 240) === 48) qo(n.g, 1, e);
                  else if ((r & 246) === 18 && (e & 224) === 32) qo(n.g, r & 1 ? 3 : 2, e);
                  else {
                    if ((r & 246) === 20 && (e & 240) === 32) {
                      switch (((e = t.pts), (r = null), t.kc)) {
                        case 32:
                          eS(n);
                          break;
                        case 33:
                          ((n = n.g), n.i[n.g].pop());
                          break;
                        case 37:
                          r = Ng(n, 2, e);
                          break;
                        case 38:
                          r = Ng(n, 3, e);
                          break;
                        case 39:
                          r = Ng(n, 4, e);
                          break;
                        case 40:
                          qo(n.g, 0, 32);
                          break;
                        case 41:
                          ((n.h = 2), (n.g = n.i), (n.g.h = 0), (n.l = e));
                          break;
                        case 42:
                          (Uu(n.o), tS(n));
                          break;
                        case 43:
                          tS(n);
                          break;
                        case 44:
                          ((t = n.i), (r = null), n.h !== 4 && (r = Rd(t, n.l, e)), bi(t, 0, 15));
                          break;
                        case 45:
                          ((t = n.g),
                            n.h !== 3
                              ? (r = null)
                              : ((r = Rd(t, n.l, e)),
                                (i = t.g - t.h + 1),
                                J1(t, i - 1, i, t.h),
                                bi(t, 0, i - 1),
                                bi(t, t.g, 15 - t.g),
                                (n.l = e)));
                          break;
                        case 46:
                          bi(n.j, 0, 15);
                          break;
                        case 47:
                          ((t = null),
                            n.h !== 4 && (t = Rd(n.i, n.l, e)),
                            (r = n.j),
                            (n.j = n.i),
                            (n.i = r),
                            eS(n),
                            (n.l = e),
                            (r = t));
                      }
                      i = r;
                      break e;
                    }
                    (r == 23 || r == 31) && e >= 33 && e <= 35 && (n.g.B = e - 32);
                  }
                  i = null;
                }
              else ((e = t.kc), qo(n.g, 0, t.Cb), qo(n.g, 0, e));
              return i;
            }
            function O_(e, t) {
              var n = [];
              try {
                for (; t.Ia(); ) {
                  var r = Kt(t).value,
                    i = (r & 224) >> 5,
                    s = r & 31;
                  if ((i === 7 && s != 0 && (i = Kt(t).value & 63), i != 0)) {
                    (e.B.add("svc" + i), e.j.has(i) || e.j.set(i, new P_(i)));
                    for (var o = e.j.get(i), u = t.Pa(); t.Pa() - u < s; ) {
                      i = o;
                      var l = t,
                        p = Kt(l),
                        m = p.value,
                        y = p.pts;
                      if (m === 16) {
                        var v = Kt(l);
                        m = (m << 16) | v.value;
                      }
                      if (m >= 0 && m <= 31) var w = D_(i, l, m, y);
                      else if (m >= 128 && m <= 159) w = L_(i, l, m, y);
                      else {
                        if (m >= 4096 && m <= 4127)
                          ((i = l),
                            (l = m & 255),
                            l >= 8 && l <= 15
                              ? i.skip(1)
                              : l >= 16 && l <= 23
                                ? i.skip(2)
                                : l >= 24 && l <= 31 && i.skip(3));
                        else if (m >= 4224 && m <= 4255)
                          ((i = l),
                            (l = m & 255),
                            l >= 128 && l <= 135 ? i.skip(4) : l >= 136 && l <= 143 && i.skip(5));
                        else if (m >= 32 && m <= 127)
                          ((l = m), i.g && (l === 127 ? fs(i.g, "") : fs(i.g, String.fromCharCode(l))));
                        else if (m >= 160 && m <= 255) i.g && fs(i.g, String.fromCharCode(m));
                        else if (m >= 4128 && m <= 4223) {
                          if (((l = m & 255), i.g))
                            if (aS.has(l)) {
                              var A = aS.get(l);
                              fs(i.g, A);
                            } else fs(i.g, "_");
                        } else
                          m >= 4256 &&
                            m <= 4351 &&
                            i.g &&
                            ((m & 255) != 160 ? fs(i.g, "_") : fs(i.g, "[CC]"));
                        w = [];
                      }
                      n.push.apply(n, Y(w));
                    }
                  }
                }
              } catch (E) {
                if (E instanceof H && E.code === 3e3)
                  ur("CEA708_INVALID_DATA", "Buffer read out of bounds / invalid CEA-708 Data.");
                else throw E;
              }
              return n;
            }
            function uS(e) {
              for (var t = 0; e; ) ((t ^= e & 1), (e >>= 1));
              return t === 1;
            }
            ((Jo.prototype.getStreams = function () {
              return Array.from(this.B);
            }),
              fe("shaka.cea.CeaDecoder", Jo),
              (ks = function () {
                return new Jo();
              }));
            function lS(e) {
              for (var t = [], n = e, r = (e = 0); r < n.length; )
                (e == 2 && n[r] == 3
                  ? ((e = 0), (n = [].concat(Y(n))), n.splice(r, 1), (n = new Uint8Array(n)))
                  : n[r] == 0
                    ? e++
                    : (e = 0),
                  r++);
              for (e = n, r = 0; r < e.length; ) {
                for (n = 0; e[r] == 255; ) ((n += 255), r++);
                n += e[r++];
                for (var i = 0; e[r] == 255; ) ((i += 255), r++);
                ((i += e[r++]), n == 4 && t.push(e.subarray(r, r + i)), (r += i));
              }
              return t;
            }
            function _d() {
              ((this.j = new Map()), (this.i = this.h = 0), (this.g = Fg));
            }
            ((_d.prototype.init = function (e) {
              function t(s) {
                ((s = s.name), Pd.has(s) && (n.g = Pd.get(s)));
              }
              var n = this,
                r = [],
                i = [];
              if (
                (new ut()
                  .box("moov", Ue)
                  .box("mvex", Ue)
                  .S("trex", function (s) {
                    var o = s.reader;
                    (o.skip(4), o.skip(4), (s = o.U()), (o = o.U()), (n.h = s), (n.i = o));
                  })
                  .box("trak", Ue)
                  .S("tkhd", function (s) {
                    var o = s.reader;
                    ((s = s.version), s == 1 ? (o.skip(8), o.skip(8)) : (o.skip(4), o.skip(4)));
                    var u = o.U();
                    (s == 1 ? o.skip(8) : o.skip(4),
                      o.skip(4),
                      o.skip(8),
                      o.skip(2),
                      o.skip(2),
                      o.skip(2),
                      o.skip(2),
                      o.skip(36),
                      o.Ca(),
                      o.Ca(),
                      o.Ca(),
                      o.Ca(),
                      r.push(u));
                  })
                  .box("mdia", Ue)
                  .S("mdhd", function (s) {
                    ((s = Ic(s.reader, s.version)), i.push(s.timescale));
                  })
                  .box("minf", Ue)
                  .box("stbl", Ue)
                  .S("stsd", Ei)
                  .box("avc1", t)
                  .box("avc3", t)
                  .box("dvav", t)
                  .box("dva1", t)
                  .box("hev1", t)
                  .box("hvc1", t)
                  .box("dvh1", t)
                  .box("dvhe", t)
                  .box("vvc1", t)
                  .box("vvi1", t)
                  .box("dvc1", t)
                  .box("dvi1", t)
                  .box("encv", Zn)
                  .box("sinf", Ue)
                  .box("frma", function (s) {
                    ((s = op(s.reader).codec), Pd.has(s) && (n.g = Pd.get(s)));
                  })
                  .parse(e, !0, !0),
                !r.length || !i.length || r.length != i.length)
              )
                throw new H(2, 2, 2010);
              (this.g == Fg && je("Unable to determine bitstream format for CEA parsing!"),
                r.forEach(function (s, o) {
                  n.j.set(s, i[o]);
                }));
            }),
              (_d.prototype.parse = function (e) {
                var t = this;
                if (this.g == Fg) return [];
                var n = [],
                  r = 0,
                  i = [];
                return (
                  new ut()
                    .box("moof", function (s) {
                      ((r = s.start), (i = []), Ue(s));
                    })
                    .box("traf", function (s) {
                      (i.push({ baseMediaDecodeTime: null, Wd: t.h, Xd: t.i, Ii: [], timescale: 9e4 }),
                        Ue(s));
                    })
                    .S("trun", function (s) {
                      var o = i[i.length - 1];
                      ((s = Cc(s.reader, s.version, s.flags)), o.Ii.push(s));
                    })
                    .S("tfhd", function (s) {
                      var o = i[i.length - 1];
                      ((s = Ac(s.reader, s.flags)),
                        (o.Wd = s.Wd || t.h),
                        (o.Xd = s.Xd || t.i),
                        (s = s.trackId),
                        t.j.has(s) && (o.timescale = t.j.get(s)));
                    })
                    .S("tfdt", function (s) {
                      var o = i[i.length - 1];
                      ((s = Ec(s.reader, s.version)), (o.baseMediaDecodeTime = s.baseMediaDecodeTime));
                    })
                    .box("mdat", function (s) {
                      for (
                        var o = r - s.start - 8, u = s.reader.Pa(), l = x(i), p = l.next();
                        !p.done;
                        p = l.next()
                      )
                        ((p = p.value),
                          p.baseMediaDecodeTime === null
                            ? je("Unable to find base media decode time for CEA captions!")
                            : (s.reader.seek(u),
                              U_(t, s.reader, p.baseMediaDecodeTime, p.timescale, p.Wd, p.Xd, o, p.Ii, n)));
                    })
                    .parse(e, !1, !0),
                  n
                );
              }));
            function U_(e, t, n, r, i, s, o, u, l) {
              var p = 0,
                m = s,
                y = u.map(function (A) {
                  return A.mh;
                });
              for (
                y = [].concat.apply([], Y(y)), y.length && (m = y[0].sampleSize || s), t.skip(o + u[0].qg);
                t.Ia();
              ) {
                o = t.U();
                var v = t.Y(),
                  w = null;
                switch (((w = !1), (u = 1), e.g)) {
                  case Fu:
                    ((w = v & 31), (w = w == 6));
                    break;
                  case Vu:
                    ((u = 2), t.skip(1), (w = (v >> 1) & 63), (w = w == 39 || w == 40));
                    break;
                  case Hu:
                    ((u = 2), t.skip(1), (w = (v >> 1) & 63), (w = w == 23 || w == 24));
                    break;
                  default:
                    return;
                }
                if (w)
                  for (
                    v = 0,
                      p < y.length && (v = y[p].Gf || 0),
                      v = (n + v) / r,
                      u = t.Tb(o - u, !1),
                      u = x(lS(u)),
                      w = u.next();
                    !w.done;
                    w = u.next()
                  )
                    l.push({ packet: w.value, pts: v });
                else
                  try {
                    t.skip(o - u);
                  } catch (A) {
                    break;
                  }
                ((m -= o + 4),
                  m == 0 &&
                    ((n = p < y.length ? n + (y[p].nh || i) : n + i),
                    p++,
                    p < y.length ? (m = y[p].sampleSize || s) : (m = s)));
              }
            }
            fe("shaka.cea.Mp4CeaParser", _d);
            var Fg = 0,
              Fu = 1,
              Vu = 2,
              Hu = 3,
              Pd = new Map()
                .set("avc1", Fu)
                .set("avc3", Fu)
                .set("dvav", Fu)
                .set("dva1", Fu)
                .set("hev1", Vu)
                .set("hvc1", Vu)
                .set("dvh1", Vu)
                .set("dvhe", Vu)
                .set("vvc1", Hu)
                .set("vvi1", Hu)
                .set("dvc1", Hu)
                .set("dvi1", Hu);
            Ph("video/mp4", function () {
              return new _d();
            });
            function Dd() {
              this.g = null;
            }
            ((Dd.prototype.init = function () {}),
              (Dd.prototype.parse = function (e) {
                this.g ? this.g.clearData() : (this.g = new ft());
                var t = [];
                if (((e = De(e)), !Lo(e))) return t;
                e = this.g.parse(e);
                var n = e.Yd(),
                  r = e.ef();
                switch (((e = []), n.video)) {
                  case "avc":
                    e.push(6);
                    break;
                  case "hvc":
                    (e.push(39), e.push(40));
                }
                if (!e.length) return t;
                for (n = x(r), r = n.next(); !r.done; r = n.next())
                  if (((r = r.value), e.includes(r.type) && r.time != null))
                    for (var i = x(lS(r.data)), s = i.next(); !s.done; s = i.next())
                      t.push({ packet: s.value, pts: r.time });
                return t;
              }),
              fe("shaka.cea.TsCeaParser", Dd),
              Ph("video/mp2t", function () {
                return new Dd();
              }));
            function j_(e) {
              var t = 0,
                n = jn(e),
                r = n.getUint32(t, !0);
              if (r != e.byteLength) return [];
              e: {
                for (e = t + 4 + 2, t = []; e < n.byteLength - 1; ) {
                  ((r = n.getUint16(e, !0)), (e += 2));
                  var i = n.getUint16(e, !0);
                  if (((e += 2), (i & 1) != 0 || i + e > n.byteLength)) {
                    n = [];
                    break e;
                  }
                  var s = De(n, e, i);
                  (t.push({ type: r, value: s }), (e += i));
                }
                n = t;
              }
              return n;
            }
            function cS(e) {
              return (
                (e = Sr(Dt(e))),
                (e = j_(e).filter(function (t) {
                  return t.type === B_;
                })[0]),
                e ? ((e = Yi(e.value, !0)), (e = Ds(e, "WRMHEADER")) ? e : null) : null
              );
            }
            function Ld(e) {
              try {
                var t = cS(e);
                if (t)
                  e: {
                    for (var n = x(Yr(t, "DATA")), r = n.next(); !r.done; r = n.next()) {
                      var i = r.value;
                      if (i.children)
                        for (var s = x(i.children), o = s.next(); !o.done; o = s.next()) {
                          var u = o.value;
                          if (u.tagName == "LA_URL") {
                            var l = Dt(u);
                            break e;
                          }
                        }
                    }
                    l = "";
                  }
                else l = "";
                return l;
              } catch (p) {
                return "";
              }
            }
            var B_ = 1;
            function dS() {
              this.g = new Map();
            }
            dS.prototype.release = function () {
              this.g.clear();
            };
            function fS(e, t, n, r) {
              var i = H_(e, t),
                s = null;
              e = [];
              var o = [];
              t = null;
              var u = new Set(
                i.map(function (p) {
                  return p.keyId;
                }),
              );
              u.delete(null);
              var l = "cenc";
              if (u.size > 1) throw new H(2, 4, 4010);
              if (!n) {
                if (
                  ((o = i.filter(function (p) {
                    return p.Hd == "urn:mpeg:dash:sea:2012";
                  })),
                  o.length > 1)
                )
                  throw new H(2, 4, 4050);
                (o.length && (t = z_(o[0])),
                  (o = i.find(function (p) {
                    return p.Hd == "urn:mpeg:dash:mp4protection:2011";
                  })) &&
                    o.encryptionScheme &&
                    (l = o.encryptionScheme),
                  (o = i.filter(function (p) {
                    return p.Hd == "urn:mpeg:dash:mp4protection:2011"
                      ? ((s = p.init || s), !1)
                      : p.Hd != "urn:mpeg:dash:sea:2012";
                  })),
                  o.length && ((e = V_(s, l, o, r, u)), e.length == 0 && (e = [gi("", l, s)])));
              }
              if (i.length && !t && (n || !o.length))
                for (e = [], n = x(Object.values(r)), r = n.next(); !r.done; r = n.next())
                  ((r = r.value), r != "org.w3.clearkey" && ((r = gi(r, l, s)), e.push(r)));
              if ((u = Array.from(u)[0] || null))
                for (l = x(e), n = l.next(); !n.done; n = l.next())
                  for (n = x(n.value.initData), r = n.next(); !r.done; r = n.next()) r.value.keyId = u;
              return { Yh: u, Em: s, drmInfos: e, hg: t, ci: !0 };
            }
            function F_(e, t, n, r, i) {
              var s = fS(e, t, r, i);
              if (n.ci)
                ((e = n.drmInfos.length == 1 && !n.drmInfos[0].keySystem),
                  (t = s.drmInfos.length == 0),
                  (n.drmInfos.length == 0 || (e && !t)) && (n.drmInfos = s.drmInfos),
                  (n.ci = !1));
              else if (
                s.drmInfos.length > 0 &&
                ((n.drmInfos = n.drmInfos.filter(function (o) {
                  return s.drmInfos.some(function (u) {
                    return u.keySystem == o.keySystem;
                  });
                })),
                n.drmInfos.length == 0)
              )
                throw new H(2, 4, 4008);
              return s.Yh || n.Yh;
            }
            function bd(e) {
              var t = wr(e.node, "https://dashif.org/CPS", "Laurl");
              if (t && (t = Dt(t))) return t;
              if ((t = wr(e.node, "urn:microsoft:playready", "pro")) && Dt(t)) return Ld(t);
              if ((e = wr(e.node, "urn:mpeg:cenc:2013", "pssh")) && (e = Dt(e))) {
                ((t = Sr(e)), (e = 8), (t = jn(t)));
                var n = t.getUint8(e);
                return (
                  (e += 20),
                  n > 0 && (e += 4 + 16 * t.getUint32(e)),
                  (e = De(t, e + 4)),
                  (e = Kl(e)),
                  (e = Ds("<pro>" + e + "</pro>")),
                  Ld(e)
                );
              }
              return "";
            }
            function V_(e, t, n, r, i) {
              var s = [];
              n = x(n);
              for (var o = n.next(); !o.done; o = n.next()) {
                o = o.value;
                var u = r[o.Hd];
                if (u) {
                  var l;
                  if ((l = wr(o.node, "urn:microsoft:playready", "pro")) && Dt(l)) {
                    ((l = Dt(l)), (l = Sr(l)));
                    var p = new Uint8Array([
                      154, 4, 240, 121, 152, 64, 66, 134, 171, 146, 230, 91, 224, 136, 95, 149,
                    ]);
                    l = [{ initData: Sc(l, p, new Set(), 0), initDataType: "cenc", keyId: o.keyId }];
                  } else l = null;
                  if (((p = null), o.Hd === "urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e")) {
                    p = o;
                    var m = i;
                    if (m.size == 0) p = null;
                    else {
                      var y = new Uint8Array([
                          16, 119, 239, 236, 192, 178, 77, 2, 172, 227, 60, 30, 82, 226, 251, 75,
                        ]),
                        v = new Uint8Array([]);
                      p = [{ initData: Sc(v, y, m, 1), initDataType: "cenc", keyId: p.keyId }];
                    }
                  }
                  ((l = gi(u, t, o.init || e || l || p)), (u = X_.get(u)) && (l.licenseServerUri = u(o)));
                  e: {
                    if ((o = wr(o.node, "https://dashif.org/CPS", "Certurl")) && (o = Dt(o))) break e;
                    o = "";
                  }
                  ((l.serverCertificateUri = o), s.push(l));
                }
              }
              return s;
            }
            function H_(e, t) {
              var n = [];
              t = x(t);
              for (var r = t.next(); !r.done; r = t.next()) (r = G_(e, r.value)) && n.push(r);
              return n;
            }
            function G_(e, t) {
              var n = t.attributes.schemeIdUri,
                r = mi(t, "urn:mpeg:cenc:2013", "default_KID"),
                i = Hv(t, "urn:mpeg:cenc:2013", "pssh").map(_n),
                s = t.attributes.value;
              if (!n) return null;
              if (((n = n.toLowerCase()), r && ((r = r.replace(/-/g, "").toLowerCase()), r.includes(" "))))
                throw new H(2, 4, 4009);
              var o = [];
              try {
                o = i.map(function (u) {
                  if (!e.g.has(u)) {
                    var l = Sr(u);
                    e.g.set(u, l);
                  }
                  return { initDataType: "cenc", initData: e.g.get(u), keyId: null };
                });
              } catch (u) {
                throw new H(2, 4, 4007);
              }
              return { node: t, Hd: n, keyId: r, init: o.length > 0 ? o : null, encryptionScheme: s };
            }
            function z_(e) {
              if (!g.crypto || !g.crypto.subtle)
                throw (
                  je(
                    "Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)",
                  ),
                  new H(2, 4, 4042)
                );
              var t = wr(e.node, "urn:mpeg:dash:schema:sea:2012", "SegmentEncryption");
              if (!t) throw new H(2, 4, 4051);
              if (t.attributes.schemeIdUri != "urn:mpeg:dash:sea:aes128-cbc:2013") throw new H(2, 4, 4051);
              if (((t = wr(e.node, "urn:mpeg:dash:schema:sea:2012", "CryptoPeriod")), !t))
                throw new H(2, 4, 4051);
              if (((e = t.attributes.IV), (t = kn(t.attributes.keyUriTemplate)), !e || !t))
                throw new H(2, 4, 4051);
              if (((e = Ms(e.substr(2))), e.byteLength != 16)) throw new H(2, 4, 4048);
              return { wk: t, iv: e };
            }
            var X_ = new Map()
              .set("com.apple.fps", function (e) {
                if (g.shakaMediaKeysPolyfill === "apple") throw new H(2, 4, 4054);
                return (e = wr(e.node, "https://dashif.org/CPS", "Laurl")) && (e = Dt(e)) ? e : "";
              })
              .set("com.widevine.alpha", function (e) {
                var t = wr(e.node, "https://dashif.org/CPS", "Laurl");
                return t && (t = Dt(t))
                  ? t
                  : ((e = wr(e.node, "urn:microsoft", "laurl")) && kn(e.attributes.licenseUrl)) || "";
              })
              .set("com.microsoft.playready", bd)
              .set("com.microsoft.playready.recommendation", bd)
              .set("com.microsoft.playready.software", bd)
              .set("com.microsoft.playready.hardware", bd)
              .set("org.w3.clearkey", function (e) {
                var t = wr(e.node, "https://dashif.org/CPS", "Laurl");
                return t && (t = Dt(t))
                  ? t
                  : (e = wr(e.node, "http://dashif.org/guidelines/clearKey", "Laurl")) &&
                      e.attributes.Lic_type === "EME-1.0" &&
                      e &&
                      (e = Dt(e))
                    ? e
                    : "";
              });
            function Gu(e, t, n, r, i, s) {
              var o = new Map()
                .set("RepresentationID", t)
                .set("Number", n)
                .set("SubNumber", r)
                .set("Bandwidth", i)
                .set("Time", s);
              return e.replace(
                /\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,
                function (u, l, p, m) {
                  if (u == "$$") return "$";
                  var y = o.get(l);
                  if (y == null) return u;
                  switch (
                    (l == "RepresentationID" && p && (p = void 0),
                    l == "Time" &&
                      typeof y != "bigint" &&
                      (Math.abs(y - Math.round(y)) >= 0.2 &&
                        je("Calculated $Time$ values must be close to integers"),
                      (y = Math.round(y))),
                    m)
                  ) {
                    case void 0:
                    case "d":
                    case "i":
                    case "u":
                      u = y.toString();
                      break;
                    case "o":
                      u = y.toString(8);
                      break;
                    case "x":
                      u = y.toString(16);
                      break;
                    case "X":
                      u = y.toString(16).toUpperCase();
                      break;
                    default:
                      u = y.toString();
                  }
                  return ((p = g.parseInt(p, 10) || 1), Array(Math.max(0, p - u.length) + 1).join("0") + u);
                },
              );
            }
            function hS(e, t) {
              var n = Hr(e, t, "timescale"),
                r = 1;
              (n && (r = ri(n) || 1), (n = Hr(e, t, "duration")));
              var i = (n = ri(n || "")) ? n / r : null,
                s = Hr(e, t, "startNumber"),
                o = Number(Hr(e, t, "presentationTimeOffset")) || 0,
                u = on(s || "");
              if (((s == null || u == null) && (u = 1), (s = null), (t = Qo(e, t, "SegmentTimeline")))) {
                ((t = it(t, "S")), (s = r), (e = e.na.duration || 1 / 0));
                for (var l = u, p = [], m = -o, y = 0; y < t.length; ++y) {
                  var v = t[y],
                    w = t[y + 1],
                    A = Le(v, "t", on),
                    E = Le(v, "d", on),
                    C = Le(v, "r", sn);
                  if (((v = Le(v, "k", sn) || 0), A != null && (A -= o), E)) {
                    if (((A = A != null ? A : m), (C = C || 0), C < 0))
                      if (w) {
                        if (((w = Le(w, "t", on)), w == null)) break;
                        if (A >= w) break;
                        C = Math.ceil((w - A) / E) - 1;
                      } else {
                        if (e == 1 / 0) break;
                        if (A / s >= e) break;
                        C = Math.ceil((e * s - A) / E) - 1;
                      }
                    for (p.length > 0 && A != m && (p[p.length - 1].end = A / s), w = 0; w <= C; ++w)
                      ((m = A + E),
                        p.push({ start: A / s, Ld: A, end: m / s, Jh: m, wc: v, Vk: p.length + l }),
                        (A = m));
                  }
                }
                s = p;
              }
              return { timescale: r, Qf: n, gb: i, ve: u, ec: o / r || 0, gd: o, timeline: s };
            }
            function pS(e, t) {
              return [t(e.L), t(e.qa), t(e.sa)].filter(ts);
            }
            function Hr(e, t, n) {
              ((t = pS(e, t)), (e = null), (t = x(t)));
              for (var r = t.next(); !r.done && !(e = r.value.attributes[n]); r = t.next());
              return e;
            }
            function Qo(e, t, n) {
              ((t = pS(e, t)), (e = null), (t = x(t)));
              for (var r = t.next(); !r.done && !(e = mt(r.value, n)); r = t.next());
              return e;
            }
            function W_(e, t, n, r, i, s) {
              for (
                var o = mi(e, "http://www.w3.org/1999/xlink", "href"),
                  u = mi(e, "http://www.w3.org/1999/xlink", "actuate") || "onRequest",
                  l = x(Object.keys(e.attributes)),
                  p = l.next();
                !p.done;
                p = l.next()
              ) {
                p = p.value;
                var m = p.split(":"),
                  y = Lh("http://www.w3.org/1999/xlink");
                m[0] == y && delete e.attributes[p];
              }
              if (s >= 5) return ns(new H(2, 4, 4028));
              if (u != "onLoad") return ns(new H(2, 4, 4027));
              var v = qt([r], [o]);
              return i.request(0, Ut(v, t)).Xa(function (w) {
                if (((w = Xa(w.data, e.tagName)), !w)) return ns(new H(2, 4, 4001, o));
                for (e.children = []; w.children.length; ) {
                  var A = w.children.shift();
                  e.children.push(A);
                }
                A = x(Object.keys(w.attributes));
                for (var E = A.next(); !E.done; E = A.next())
                  ((E = E.value), (e.attributes[E] = w.attributes[E]));
                return Nd(e, t, n, v[0], i, s + 1);
              });
            }
            function Nd(e, t, n, r, i, s) {
              if (((s = s === void 0 ? 0 : s), mi(e, "http://www.w3.org/1999/xlink", "href"))) {
                var o = W_(e, t, n, r, i, s);
                return (
                  n &&
                    (o = o.Xa(void 0, function () {
                      return Nd(e, t, n, r, i, s);
                    })),
                  o
                );
              }
              o = [];
              for (var u = x(Vv(e)), l = u.next(), p = {}; !l.done; p = { Td: void 0 }, l = u.next())
                ((p.Td = l.value),
                  mi(p.Td, "http://www.w3.org/1999/xlink", "href") == "urn:mpeg:dash:resolve-to-zero:2013"
                    ? (e.children = e.children.filter(
                        (function (m) {
                          return function (y) {
                            return y !== m.Td;
                          };
                        })(p),
                      ))
                    : p.Td.tagName != "SegmentTimeline" && o.push(Nd(p.Td, t, n, r, i, s)));
              return A0(o).Xa(function () {
                return e;
              });
            }
            function K_(e, t, n, r, i, s, o, u) {
              var l,
                p = new ut().S("sidx", function (m) {
                  l = $_(t, r, i, s, o, n, m, u);
                });
              if ((e && p.parse(e), l)) return l;
              throw new H(2, 3, 3004);
            }
            function $_(e, t, n, r, i, s, o, u) {
              u = u === void 0 ? !1 : u;
              var l = [];
              o.reader.skip(4);
              var p = o.reader.U();
              if (p == 0) throw new H(2, 3, 3005);
              if (o.version == 0)
                var m = o.reader.U(),
                  y = o.reader.U();
              else ((m = o.reader.Ed()), (y = o.reader.Ed()));
              o.reader.skip(2);
              var v = o.reader.Ca();
              for (e = (u ? -o.size : e) + o.size + y, u = 0; u < v; u++) {
                var w = o.reader.U();
                ((y = (w & 2147483648) >>> 31), (w &= 2147483647));
                var A = o.reader.U();
                if ((o.reader.skip(4), y == 1)) throw new H(2, 3, 3006);
                (l.push(
                  new Ce(
                    m / p + n,
                    (m + A) / p + n,
                    function () {
                      return s;
                    },
                    e,
                    e + w - 1,
                    t,
                    n,
                    r,
                    i,
                  ),
                ),
                  (m += A),
                  (e += w));
              }
              return (o.parser.stop(), l);
            }
            function hs(e) {
              ((this.h = jn(e)), (this.g = new gt(this.h, 0)));
            }
            hs.prototype.Ia = function () {
              return this.g.Ia();
            };
            function Ni(e) {
              var t = gS(e);
              if (t.length > 7) throw new H(2, 3, 3002);
              var n = 0;
              t = x(t);
              for (var r = t.next(); !r.done; r = t.next()) n = 256 * n + r.value;
              t = gS(e);
              e: {
                r = x(Y_);
                for (var i = r.next(); !i.done; i = r.next())
                  if (fi(t, new Uint8Array(i.value))) {
                    r = !0;
                    break e;
                  }
                r = !1;
              }
              if (r) t = e.h.byteLength - e.g.Pa();
              else {
                if (t.length == 8 && t[1] & 224) throw new H(2, 3, 3001);
                for (i = r = 0; i < t.length; i++) {
                  var s = t[i];
                  r = i == 0 ? s & ((1 << (8 - t.length)) - 1) : 256 * r + s;
                }
                t = r;
              }
              return (
                (t = e.g.Pa() + t <= e.h.byteLength ? t : e.h.byteLength - e.g.Pa()),
                (r = jn(e.h, e.g.Pa(), t)),
                e.g.skip(t),
                new q_(n, r)
              );
            }
            function gS(e) {
              var t = e.g.Pa(),
                n = e.g.Y();
              if (n == 0) throw new H(2, 3, 3002);
              return ((n = 8 - Math.floor(Math.log2(n))), e.g.skip(n - 1), De(e.h, t, n));
            }
            var Y_ = [
              [255],
              [127, 255],
              [63, 255, 255],
              [31, 255, 255, 255],
              [15, 255, 255, 255, 255],
              [7, 255, 255, 255, 255, 255],
              [3, 255, 255, 255, 255, 255, 255],
              [1, 255, 255, 255, 255, 255, 255, 255],
            ];
            function q_(e, t) {
              ((this.id = e), (this.g = t));
            }
            function Vg(e) {
              if (e.g.byteLength > 8) throw new H(2, 3, 3002);
              if (e.g.byteLength == 8 && e.g.getUint8(0) & 224) throw new H(2, 3, 3001);
              for (var t = 0, n = 0; n < e.g.byteLength; n++) {
                var r = e.g.getUint8(n);
                t = 256 * t + r;
              }
              return t;
            }
            function J_(e, t, n, r, i, s, o) {
              if (((t = new hs(t)), Ni(t).id != 440786851)) throw new H(2, 3, 3008);
              var u = Ni(t);
              if (u.id != 408125543) throw new H(2, 3, 3009);
              ((t = u.g.byteOffset), (u = new hs(u.g)));
              for (var l = null; u.Ia(); ) {
                var p = Ni(u);
                if (p.id == 357149030) {
                  l = p;
                  break;
                }
              }
              if (!l) throw new H(2, 3, 3010);
              for (l = new hs(l.g), p = 1e6, u = null; l.Ia(); ) {
                var m = Ni(l);
                if (m.id == 2807729) p = Vg(m);
                else if (m.id == 17545)
                  if (m.g.byteLength == 4) u = m.g.getFloat32(0);
                  else if (m.g.byteLength == 8) u = m.g.getFloat64(0);
                  else throw new H(2, 3, 3003);
              }
              if (u == null) throw new H(2, 3, 3011);
              if (((l = p / 1e9), (u *= l), (e = Ni(new hs(e))), e.id != 475249515)) throw new H(2, 3, 3007);
              return Q_(e, t, l, u, n, r, i, s, o);
            }
            function Q_(e, t, n, r, i, s, o, u, l) {
              function p() {
                return i;
              }
              var m = [];
              e = new hs(e.g);
              for (var y = null, v = null; e.Ia(); ) {
                var w = Ni(e);
                if (w.id == 187) {
                  var A = Z_(w);
                  A &&
                    ((w = n * A.ol),
                    (A = t + A.Nk),
                    y != null && m.push(new Ce(y + o, w + o, p, v, A - 1, s, o, u, l)),
                    (y = w),
                    (v = A));
                }
              }
              return (y != null && m.push(new Ce(y + o, r + o, p, v, null, s, o, u, l)), m);
            }
            function Z_(e) {
              var t = new hs(e.g);
              if (((e = Ni(t)), e.id != 179)) throw new H(2, 3, 3013);
              if (((e = Vg(e)), (t = Ni(t)), t.id != 183)) throw new H(2, 3, 3012);
              t = new hs(t.g);
              for (var n = 0; t.Ia(); ) {
                var r = Ni(t);
                if (r.id == 241) {
                  n = Vg(r);
                  break;
                }
              }
              return { ol: e, Nk: n };
            }
            function mS(e, t, n) {
              if (((t = Qo(e, t, "Initialization")), !t)) return null;
              var r = e.L.bb(),
                i = t.attributes.sourceURL;
              (i && (r = qt(r, [kn(i)], e.Lb())), (i = 0));
              var s = null;
              return (
                (t = Le(t, "range", Ql)) && ((i = t.start), (s = t.end)),
                (n = new Vn(
                  function () {
                    return r;
                  },
                  i,
                  s,
                  TS(e),
                  null,
                  null,
                  n,
                  e.qa.encrypted,
                )),
                (n.codecs = e.L.codecs),
                (n.mimeType = e.L.mimeType),
                e.na && !e.na.kf && (n.g = e.na.start + e.na.duration),
                n
              );
            }
            function eP(e, t, n) {
              var r = Number(Hr(e, Zo, "presentationTimeOffset")) || 0,
                i = Hr(e, Zo, "timescale"),
                s = 1;
              i && (s = ri(i) || 1);
              var o = r / s || 0,
                u = mS(e, Zo, n);
              tP(e, u);
              var l = Ji(e);
              return {
                endTime: -1,
                timeline: -1,
                Sc: function () {
                  var p = Qo(l, Zo, "RepresentationIndex"),
                    m = l.L.bb();
                  return (
                    p && (p = kn(p.attributes.sourceURL)) && (m = qt(m, [p], l.Lb())),
                    (p = vS(l)),
                    yS(l, t, u, m, p.start, p.end, o)
                  );
                },
                timescale: s,
              };
            }
            function yS(e, t, n, r, i, s, o) {
              var u, l, p, m, y, v, w, A, E, C, k, R, L, U, G, b, B, N, z, V;
              return j(function (X) {
                if (X.g == 1)
                  return (
                    (u = e.presentationTimeline),
                    (l = !e.Eb || !e.na.kf),
                    (p = e.na.start),
                    (m = e.na.duration),
                    (y = e.L.mimeType.split("/")[1]),
                    (v = t),
                    (w = null),
                    (A = [v(r, i, s, !1), y == "webm" ? v(n.P(), n.startByte, n.endByte, !0) : null]),
                    (v = null),
                    I(X, Promise.all(A), 2)
                  );
                for (
                  E = X.h,
                    C = E[0],
                    k = E[1] || null,
                    R = null,
                    L = p - o,
                    U = p,
                    G = m ? p + m : 1 / 0,
                    b = e.L.bb(),
                    B =
                      b.length != r.length ||
                      b.some(function (W, ie) {
                        return W != r[ie];
                      }),
                    R = y == "mp4" ? K_(C, i, b, n, L, U, G, B) : J_(C, k, b, n, L, U, G),
                    N = x(R),
                    z = N.next();
                  !z.done;
                  z = N.next()
                )
                  ((V = z.value),
                    (V.codecs = e.L.codecs),
                    (V.mimeType = e.L.mimeType),
                    (V.bandwidth = e.bandwidth));
                return (u.me(R), (w = new Je(R)), l && w.pd(U, G, !0), X.return(w));
              });
            }
            function Zo(e) {
              return e.Id;
            }
            function vS(e) {
              var t = Qo(e, Zo, "RepresentationIndex");
              return ((e = Hr(e, Zo, "indexRange")), (e = Ql(e || "")), t && (e = Le(t, "range", Ql, e)), e);
            }
            function tP(e, t) {
              if ((xS(e, t), !vS(e))) throw new H(2, 4, 4002);
            }
            function xS(e, t) {
              var n = e.L.mimeType.split("/")[1];
              if (e.L.contentType != Fe && n != "mp4" && n != "webm") throw new H(2, 4, 4006);
              if (n == "webm" && !t) throw new H(2, 4, 4005);
            }
            function TS(e) {
              var t = e.L;
              return {
                bandwidth: e.bandwidth,
                audioSamplingRate: t.audioSamplingRate,
                codecs: t.codecs,
                contentType: t.contentType,
                frameRate: t.frameRate || null,
                height: t.height || null,
                mimeType: t.mimeType,
                channelsCount: t.yf,
                pixelAspectRatio: t.pixelAspectRatio || null,
                width: t.width || null,
                label: e.qa.label || null,
                roles: e.roles || null,
                language: e.qa.language || null,
              };
            }
            function nP(e, t, n) {
              var r = mS(e, SS, n),
                i = rP(e);
              if (!i.gb && !i.timeline && i.yd.length > 1) throw new H(2, 4, 4002);
              if (!i.gb && !e.na.duration && !i.timeline && i.yd.length == 1) throw new H(2, 4, 4002);
              if (i.timeline && i.timeline.length == 0) throw new H(2, 4, 4002);
              var s = null,
                o = null;
              e.sa.id && e.L.id && (o = t.get(e.sa.id + "," + e.L.id)) && (s = o.segmentIndex);
              var u = iP(
                e.na.start,
                e.na.duration,
                e.L.bb,
                i,
                r,
                n,
                e.L.mimeType,
                e.L.codecs,
                e.bandwidth,
                e.Lb,
              );
              return (
                (t = !s),
                s ? s.ke(u, e.presentationTimeline.Hb()) : (s = new Je(u)),
                e.presentationTimeline.me(u),
                (e.Eb && e.na.kf) || s.pd(e.na.start, e.na.duration ? e.na.start + e.na.duration : 1 / 0, t),
                o && (o.segmentIndex = s),
                {
                  endTime: -1,
                  timeline: -1,
                  Sc: function () {
                    return ((s && s.getNumReferences() != 0) || s.tf(u), Promise.resolve(s));
                  },
                  timescale: i.timescale,
                }
              );
            }
            function SS(e) {
              return e.Ac;
            }
            function rP(e) {
              var t = sP(e);
              e = hS(e, SS);
              var n = e.ve;
              n == 0 && (n = 1);
              var r = 0;
              return (
                e.gb
                  ? (r = e.gb * (n - 1))
                  : e.timeline && e.timeline.length > 0 && (r = e.timeline[0].start),
                {
                  gb: e.gb,
                  startTime: r,
                  ve: n,
                  ec: e.ec,
                  timescale: e.timescale,
                  timeline: e.timeline,
                  yd: t,
                }
              );
            }
            function iP(e, t, n, r, i, s, o, u, l, p) {
              var m = r.yd.length;
              r.timeline &&
                r.timeline.length != r.yd.length &&
                (m = Math.min(r.timeline.length, r.yd.length));
              for (
                var y = e - r.ec, v = t ? e + t : 1 / 0, w = [], A = r.startTime, E = {}, C = 0;
                C < m;
                E = { Sf: void 0, Hf: void 0 }, C++
              ) {
                E.Hf = r.yd[C];
                var k = A;
                ((A = void 0),
                  (A = r.gb != null ? k + r.gb : r.timeline ? r.timeline[C].end : k + t),
                  (E.Sf = null),
                  (E = new Ce(
                    e + k,
                    e + A,
                    (function (R) {
                      return function () {
                        return (R.Sf == null && (R.Sf = qt(n(), [R.Hf.Ck], p())), R.Sf);
                      };
                    })(E),
                    E.Hf.start,
                    E.Hf.end,
                    i,
                    y,
                    e,
                    v,
                    [],
                    "",
                    null,
                    null,
                    Ii,
                    s,
                  )),
                  (E.codecs = u),
                  (E.mimeType = o),
                  (E.bandwidth = l),
                  w.push(E));
              }
              return w;
            }
            function sP(e) {
              return [e.L.Ac, e.qa.Ac, e.sa.Ac]
                .filter(ts)
                .map(function (t) {
                  return it(t, "SegmentURL");
                })
                .reduce(function (t, n) {
                  return t.length > 0 ? t : n;
                })
                .map(function (t) {
                  t.attributes.indexRange && !e.Og && (e.Og = !0);
                  var n = kn(t.attributes.media);
                  return (
                    (t = Le(t, "mediaRange", Ql, { start: 0, end: null })),
                    { Ck: n, start: t.start, end: t.end }
                  );
                });
            }
            function wS(e, t, n, r, i, s, o, u, l, p) {
              l || e.L.hf || (e.L.hf = Hr(e, ps, "initialization"));
              var m = e.L.hf ? lP(e, o) : null,
                y = oP(e);
              aP(y);
              var v = Ji(e);
              if (y.fe)
                return (
                  xS(e, m),
                  {
                    endTime: -1,
                    timeline: -1,
                    Sc: function () {
                      var k = Gu(y.fe, v.L.originalId, null, null, v.bandwidth || null, null);
                      return ((k = qt(v.L.bb(), [k])), yS(v, t, m, k, 0, null, y.ec));
                    },
                    timescale: y.timescale,
                  }
                );
              if (y.gb)
                return (
                  r ||
                    e.qa.contentType === "image" ||
                    e.qa.contentType === "text" ||
                    ((r = e.na.start),
                    (p = e.sa.id),
                    (n = e.na.duration),
                    (p = (p = (p != null && s.get(p)) || n) ? r + p : 1 / 0),
                    e.presentationTimeline.Wg(y.gb),
                    e.presentationTimeline.Gi(r, p)),
                  {
                    endTime: -1,
                    timeline: -1,
                    Sc: function () {
                      return uP(v, y, i, m, s, o, u, e.L.If);
                    },
                    timescale: y.timescale,
                  }
                );
              var w = null;
              ((r = r = null),
                e.sa.id && e.L.id && ((r = e.sa.id + "," + e.L.id), (r = n.get(r))) && (w = r.segmentIndex));
              var A = e.na.start,
                E = e.na.duration ? A + e.na.duration : 1 / 0;
              if (w) ((p = w), AS(p, y, A, E, m, e.Eb), p.Ya(e.presentationTimeline.Hb()));
              else {
                if (((n = 0), (l = -1), e.sa.id != null && e.L.id != null)) {
                  var C = p.get(e.sa.id);
                  if (C) l = C.timeline;
                  else
                    for (p = x(p.values()), C = p.next(); !C.done; C = p.next())
                      if (((C = C.value), Math.abs(y.ec - C.endTime) <= Lv && C.gh.includes(e.L.id))) {
                        l = C.timeline;
                        break;
                      } else C.timeline >= n && (n = C.timeline + 1);
                }
                (l == -1 && (l = n),
                  (w = new zu(e.Eb, y, e.L.originalId, e.bandwidth, e.L.bb, e.Lb, A, E, m, o, e.L.If, l)));
              }
              return (
                y.timeline &&
                  e.qa.contentType !== "image" &&
                  e.qa.contentType !== "text" &&
                  e.presentationTimeline.Hi(w.h ? w.h.timeline : [], A),
                r && e.Eb && (r.segmentIndex = w),
                (r = (r = (r = y.timeline) && r[r.length - 1]) ? r.end + y.ec : -1),
                (p = -1),
                w instanceof zu && (p = w.We()),
                {
                  endTime: r,
                  timeline: p,
                  Sc: function () {
                    return (
                      w instanceof zu && w.getNumReferences() == 0 && AS(w, y, A, E, m, e.Eb),
                      Promise.resolve(w)
                    );
                  },
                  timescale: y.timescale,
                }
              );
            }
            function ps(e) {
              return e.Oc;
            }
            function oP(e) {
              var t = hS(e, ps),
                n = Hr(e, ps, "media"),
                r = Hr(e, ps, "index"),
                i = Hr(e, ps, "k"),
                s = 0;
              return (
                i && (s = parseInt(i, 10)),
                {
                  Qf: t.Qf,
                  gb: t.gb,
                  timescale: t.timescale,
                  ve: t.ve,
                  ec: t.ec,
                  gd: t.gd,
                  timeline: t.timeline,
                  bc: n && kn(n),
                  fe: r,
                  mimeType: e.L.mimeType,
                  codecs: e.L.codecs,
                  bandwidth: e.bandwidth,
                  Dk: s,
                }
              );
            }
            function aP(e) {
              var t = e.fe ? 1 : 0;
              if (((t += e.timeline ? 1 : 0), (t += e.gb ? 1 : 0), t == 0)) throw new H(2, 4, 4002);
              if ((t != 1 && (e.fe && (e.timeline = null), (e.Qf = null), (e.gb = null)), !e.fe && !e.bc))
                throw new H(2, 4, 4002);
            }
            function uP(e, t, n, r, i, s, o, u) {
              function l(W) {
                var ie = W - C,
                  ne = ie * E,
                  q = t.Qf,
                  Z = ie * q;
                ("BigInt" in g && Z > Number.MAX_SAFE_INTEGER && (Z = BigInt(ie) * BigInt(q)),
                  (ne += v),
                  (ie = ne + E),
                  (q = Math.min(ie, m())));
                var ae = [],
                  ce = t.Dk;
                if (ce)
                  for (var be = (q - ne) / ce, Te = {}, Ze = 0; Ze < ce; Te = { bj: void 0 }, Ze++) {
                    var Oe = ne + be * Ze,
                      st = Oe + be;
                    ((Te.bj = Ze),
                      (Te = new Ce(
                        Oe,
                        st,
                        (function (Xe) {
                          return function () {
                            var He = Gu(k, L, W, Xe.bj, R, Z);
                            return qt(U(), [He], G());
                          };
                        })(Te),
                        0,
                        null,
                        r,
                        b,
                        v,
                        m(),
                        [],
                        "",
                        null,
                        null,
                        Ii,
                        s,
                      )),
                      (Te.codecs = e.L.codecs),
                      (Te.mimeType = e.L.mimeType),
                      u == 0 ? Ze > 0 && Te.wd() : Ze % u != 0 && Te.wd(),
                      ae.push(Te));
                  }
                return (
                  (ne = new Ce(
                    ne,
                    q,
                    function () {
                      if (ce) return [];
                      var Xe = Gu(k, L, W, null, R, Z);
                      return qt(U(), [Xe], G());
                    },
                    0,
                    null,
                    r,
                    b,
                    v,
                    m(),
                    ae,
                    "",
                    null,
                    null,
                    Ii,
                    s,
                    ae.length > 0,
                  )),
                  (ne.codecs = e.L.codecs),
                  (ne.mimeType = e.L.mimeType),
                  (ne.bandwidth = e.bandwidth),
                  (ne.j = ie),
                  ne
                );
              }
              function p() {
                var W = [Math.max(y.Hb(), v), Math.min(y.Ic(), m())].map(function (ie) {
                  return ie - v;
                });
                return (
                  (W = [Math.ceil(W[0] / E), Math.ceil(W[1] / E) - 1]),
                  e.L.rb && W[1]++,
                  W.map(function (ie) {
                    return ie + C;
                  })
                );
              }
              function m() {
                var W = (w != null && i.get(w)) || A;
                return W ? v + W : 1 / 0;
              }
              var y = e.presentationTimeline,
                v = e.na.start,
                w = e.sa.id,
                A = e.na.duration,
                E = t.gb,
                C = t.ve,
                k = t.bc,
                R = e.bandwidth || null,
                L = e.L.originalId,
                U = e.L.bb,
                G = e.Lb,
                b = v - t.ec,
                B = p();
              ((n = e.Eb ? Math.max(B[0], B[1] - n + 1) : B[0]), (o = o || B[1]), (B = []));
              for (var N = n; N <= o; ++N) {
                var z = l(N);
                B.push(z);
              }
              var V = new Je(B);
              if (((B = y.Ic() < m()), (N = y.W()), B || N)) {
                var X = Math.max(n, o + 1);
                ((n = E),
                  e.L.rb && (n = 0.1),
                  V.Rf(n, function () {
                    var W = y.Hb();
                    V.Ya(W);
                    var ie = x(p());
                    (ie.next(), (ie = ie.next().value));
                    for (var ne = []; X <= ie; ) {
                      var q = l(X);
                      (ne.push(q), X++);
                    }
                    return W > m() && !ne.length ? null : ne;
                  }));
              }
              return Promise.resolve(V);
            }
            function lP(e, t) {
              var n = e.L.hf;
              if ((n || (n = Hr(e, ps, "initialization")), !n)) return null;
              n = kn(n);
              var r = e.L.originalId,
                i = e.bandwidth || null,
                s = e.L.bb,
                o = e.Lb;
              return (
                (t = new Vn(
                  function () {
                    var u = Gu(n, r, null, null, i, null);
                    return qt(s(), [u], o());
                  },
                  0,
                  null,
                  TS(e),
                  null,
                  null,
                  t,
                  e.qa.encrypted,
                )),
                (t.codecs = e.L.codecs),
                (t.mimeType = e.L.mimeType),
                e.na && !e.na.kf && (t.g = e.na.start + e.na.duration),
                t
              );
            }
            function zu(e, t, n, r, i, s, o, u, l, p, m, y) {
              (Je.call(this, []),
                (this.F = e),
                (this.h = t),
                (this.H = n),
                (this.C = r),
                (this.G = i),
                (this.J = s),
                (this.j = o),
                (this.l = u),
                (this.u = l),
                (this.B = p),
                (this.I = m),
                (this.K = y),
                Hg(this));
            }
            (J(zu, Je),
              (h = zu.prototype),
              (h.getNumReferences = function () {
                return this.h ? this.h.timeline.length : 0;
              }),
              (h.release = function () {
                (Je.prototype.release.call(this), (this.h = null));
              }),
              (h.Ya = function (e) {
                if (this.h) {
                  for (var t = 0, n = this.h.timeline, r = 0; r < n.length && n[r].end + this.j <= e; r += 1)
                    t += 1;
                  t > 0 &&
                    ((this.h.timeline = n.slice(t)),
                    this.g.length >= t && (this.g = this.g.slice(t)),
                    (this.i += t),
                    this.getNumReferences() === 0 && this.release());
                }
              }));
            function AS(e, t, n, r, i, s) {
              if ((cP(e, i), (e.F = s), e.h)) {
                if (e.h.gd !== t.gd)
                  for (n = t.gd - e.h.gd, i = 0; i < t.timeline.length; i++)
                    ((s = t.timeline[i]),
                      (s.Ld += n),
                      (s.Jh += n),
                      (s.start = (s.Ld + n) / t.timescale),
                      (s.end = (s.Jh + n) / t.timescale));
                if ((e.h.bc !== t.bc && (e.h.bc = t.bc), (n = e.h.timeline), n.length)) {
                  var o = n[n.length - 1];
                  t = t.timeline.filter(function (u) {
                    return u.end > o.end;
                  });
                } else t = t.timeline.slice();
                (t.length > 0 && e.h.timeline.push.apply(e.h.timeline, Y(t)), e.l !== r && (e.l = r));
              } else ((e.h = t), (e.j = n), (e.l = r));
              Hg(e);
            }
            function cP(e, t) {
              if (e.u !== t) {
                ((e.u = t), (e = x(e.g)));
                for (var n = e.next(); !n.done; n = e.next()) (n = n.value) && sx(n, t);
              }
            }
            function Hg(e) {
              if (e.h && !e.o) {
                for (var t = [], n = x(e.h.timeline), r = n.next(); !r.done; r = n.next())
                  ((r = r.value), r.start >= e.l || r.end <= 0 || t.push(r));
                ((e.h.timeline = t), e.Ya(e.j));
              }
            }
            ((h.find = function (e) {
              if (
                this.h &&
                this.h.timeline &&
                this.h.timeline.length &&
                e < this.h.timeline[0].start + this.j
              )
                return this.i;
              if (!this.h) return null;
              var t = this.h.timeline;
              if (e < this.j || e >= this.l) return null;
              for (var n = t.length - 1, r = 0; r < t.length; r++) {
                var i = t[r],
                  s = i.start + this.j;
                if (
                  ((i = r < n ? t[r + 1].start + this.j : this.l === 1 / 0 ? i.end + this.j : this.l),
                  e >= s && e < i)
                )
                  return r + this.i;
              }
              return null;
            }),
              (h.get = function (e) {
                var t = this;
                if (((e -= this.i), e < 0 || e >= this.getNumReferences() || !this.h)) return null;
                var n = this.g[e];
                if (!n) {
                  n = this.h.timeline[e];
                  var r = n.Vk,
                    i = n.Ld + this.h.gd,
                    s = this.j - this.h.ec,
                    o = this.j + n.end,
                    u = o;
                  e === this.getNumReferences() - 1 &&
                    this.l !== 1 / 0 &&
                    (u = this.F && Math.abs(u - this.l) > 0.1 ? Math.min(u, this.l) : this.l);
                  var l = this.h.codecs,
                    p = this.h.mimeType,
                    m = this.h.bandwidth,
                    y = [],
                    v = !1;
                  if ((n.wc && this.h && this.h.bc && (v = this.h.bc.includes("$SubNumber$")), v)) {
                    v = (n.end - n.start) / n.wc;
                    for (var w = {}, A = 0; A < n.wc; w = { Tf: void 0, cj: void 0 }, A++) {
                      var E = n.start + v * A,
                        C = E + v;
                      ((w.cj = A),
                        (w.Tf = null),
                        (w = new Ce(
                          this.j + E,
                          this.j + C,
                          (function (k) {
                            return function () {
                              return t.h
                                ? (k.Tf == null && (k.Tf = ES(t.h.bc, t.H, r, t.C, i, k.cj, t.G, t.J)), k.Tf)
                                : [];
                            };
                          })(w),
                          0,
                          null,
                          this.u,
                          s,
                          this.j,
                          this.l,
                          [],
                          "",
                          null,
                          null,
                          Ii,
                          this.B,
                        )),
                        (w.codecs = l),
                        (w.mimeType = p),
                        (w.bandwidth = m),
                        this.I == 0 ? A > 0 && w.wd() : A % this.I != 0 && w.wd(),
                        y.push(w));
                    }
                  }
                  ((n = new Ce(
                    this.j + n.start,
                    u,
                    function () {
                      return y.length > 0 || !t.h ? [] : ES(t.h.bc, t.H, r, t.C, i, null, t.G, t.J);
                    },
                    0,
                    null,
                    this.u,
                    s,
                    this.j,
                    this.l,
                    y,
                    "",
                    null,
                    null,
                    Ii,
                    this.B,
                    y.length > 0,
                  )),
                    (n.codecs = l),
                    (n.mimeType = p),
                    (n.j = o),
                    (n.bandwidth = m),
                    (this.g[e] = n));
                }
                return n;
              }),
              (h.Fb = function (e) {
                Hg(this);
                for (var t = 0; t < this.getNumReferences(); t++) {
                  var n = this.get(t + this.i);
                  n && e(n);
                }
              }));
            function ES(e, t, n, r, i, s, o, u) {
              return (
                (e = Gu(e, t, n, s, r || null, i)),
                qt(o(), [e], u()).map(function (l) {
                  return l.toString();
                })
              );
            }
            h.We = function () {
              return this.K;
            };
            function ea(e) {
              ((this.o = null),
                (this.B = e),
                (this.H = new Eo()),
                (this.i = []),
                (this.h = null),
                (this.m = []),
                (this.C = null),
                (this.G = []),
                (this.F = 300),
                (this.l = new Map()),
                (this.j = new Map()),
                (this.g = null),
                (this.u = "UNKNOWN"));
            }
            ((ea.prototype.configure = function (e) {
              this.o = e;
            }),
              (ea.prototype.destroy = function () {
                return (
                  (this.B = this.o = null),
                  (this.i = []),
                  (this.h = null),
                  (this.m = []),
                  (this.G = []),
                  this.l.clear(),
                  this.g != null && (this.g.stop(), (this.g = null)),
                  this.H.destroy()
                );
              }),
              (ea.prototype.setManifestType = function (e) {
                this.u = e;
              }));
            function Xu(e, t) {
              var n, r, i, s, o, u, l;
              return j(function (p) {
                if (p.g == 1)
                  return (
                    (n = qt(e.i, [dP(e, t)])),
                    (r = Ut(n, e.o.retryParameters)),
                    (i = e.B.networkingEngine.request(8, r)),
                    js(e.H, i),
                    ee(p, 2),
                    I(p, i.promise, 4)
                  );
                if (p.g != 2)
                  return (
                    (s = p.h),
                    (o = St(s.data)),
                    (u = JSON.parse(o)),
                    u.VERSION == 1 && fP(e, u, s.uri),
                    de(p, 0)
                  );
                if ((l = se(p)) && l.code == 7001) return p.return();
                (e.g != null && (e.g.stop(), (e.g = null)),
                  (e.g = new Ve(function () {
                    Xu(e, t);
                  })),
                  e.g.ka(e.F),
                  re(p));
              });
            }
            function dP(e, t) {
              if (!e.m.length) return t;
              t = new Pt(t);
              var n = e.C || e.m[0],
                r = Math.round(e.B.getBandwidthEstimate()),
                i = t.g;
              return (
                e.u == "DASH"
                  ? (i.add("_DASH_pathway", n), i.add("_DASH_throughput", String(r)))
                  : e.u == "HLS" && (i.add("_HLS_pathway", n), i.add("_HLS_throughput", String(r))),
                Rv(i) && Is(t, i),
                t.toString()
              );
            }
            function fP(e, t, n) {
              e.g != null && (e.g.stop(), (e.g = null));
              var r = t["RELOAD-URI"] || n;
              ((e.g = new Ve(function () {
                Xu(e, r);
              })),
                (n = t.TTL) && (e.F = n),
                e.g.ka(e.F),
                (e.m = t["PATHWAY-PRIORITY"] || []),
                (e.G = t["PATHWAY-CLONES"] || []));
            }
            function ta(e, t, n, r) {
              var i = e.l.get(t);
              (i || (i = new Map()), i.set(n, r), e.l.set(t, i));
            }
            ea.prototype.banLocation = function (e) {
              this.j.set(e, Date.now() + 6e4);
            };
            function Wu(e, t, n) {
              ((n = n === void 0 ? !1 : n), (t = e.l.get(t) || new Map()));
              for (var r = [], i = x(e.m), s = i.next(), o = {}; !s.done; o = { Cd: void 0 }, s = i.next())
                if (((o.Cd = s.value), (s = t.get(o.Cd)))) r.push({ ah: o.Cd, location: s });
                else if (
                  (s = e.G.find(
                    (function (l) {
                      return function (p) {
                        return p.Ol == l.Cd;
                      };
                    })(o),
                  ))
                ) {
                  var u = t.get(s["BASE-ID"]);
                  u &&
                    (s["URI-REPLACEMENT"].oj
                      ? ((u = new Pt(u)),
                        Hl(u, s["URI-REPLACEMENT"].oj),
                        r.push({ ah: o.Cd, location: u.toString() }))
                      : r.push({ ah: o.Cd, location: u }));
                }
              for (i = Date.now(), o = x(e.j.keys()), s = o.next(); !s.done; s = o.next())
                ((s = s.value), (u = e.j.get(s)), i > u && e.j.delete(s));
              if (
                ((r = r.filter(function (l) {
                  for (var p = x(e.j.keys()), m = p.next(); !m.done; m = p.next())
                    if (m.value.includes(new Pt(l.location).Db)) return !1;
                  return !0;
                })),
                r.length && (e.C = r[0].ah),
                (r = r.map(function (l) {
                  return l.location;
                })),
                !r.length && e.h)
              )
                for (i = x(e.h.split(",")), o = i.next(); !o.done; o = i.next())
                  (o = t.get(o.value)) && ((e.C = e.h), r.push(o));
              if (!r.length) for (t = x(t.values()), i = t.next(); !i.done; i = t.next()) r.push(i.value);
              return n ? r : qt(e.i, r);
            }
            function Gn() {
              ((this.l = []),
                (this.h = []),
                (this.g = []),
                (this.j = []),
                (this.i = []),
                (this.o = !1),
                (this.m = new Set()));
            }
            ((h = Gn.prototype),
              (h.release = function () {
                for (var e = x(this.h.concat(this.g, this.j, this.i)), t = e.next(); !t.done; t = e.next())
                  ((t = t.value), t.segmentIndex && t.segmentIndex.release());
                ((this.h = []),
                  (this.g = []),
                  (this.j = []),
                  (this.i = []),
                  (this.l = []),
                  (this.o = !1),
                  this.m.clear());
              }),
              (h.fk = function () {
                return this.l;
              }),
              (h.Mg = function () {
                return this.j.slice();
              }),
              (h.Mj = function () {
                return this.i;
              }),
              (h.Zh = function (e, t) {
                if (e) {
                  if (e.type == "audio")
                    for (var n = x(this.h), r = n.next(); !r.done; r = n.next())
                      ((r = r.value),
                        (r.matchedStreams = r.matchedStreams.filter(function (i) {
                          return i !== e;
                        })));
                  else if (e.type == "video")
                    for (n = x(this.g), r = n.next(); !r.done; r = n.next())
                      ((r = r.value),
                        (r.matchedStreams = r.matchedStreams.filter(function (i) {
                          return i !== e;
                        })),
                        r.trickModeVideo &&
                          (r.trickModeVideo.matchedStreams = r.trickModeVideo.matchedStreams.filter(
                            function (i) {
                              return i !== e;
                            },
                          )),
                        r.dependencyStream &&
                          (r.dependencyStream.matchedStreams = r.dependencyStream.matchedStreams.filter(
                            function (i) {
                              return i !== e;
                            },
                          )));
                  else if (e.type == Fe)
                    for (n = x(this.j), r = n.next(); !r.done; r = n.next())
                      ((r = r.value),
                        (r.matchedStreams = r.matchedStreams.filter(function (i) {
                          return i !== e;
                        })));
                  else if (e.type == "image")
                    for (n = x(this.i), r = n.next(); !r.done; r = n.next())
                      ((r = r.value),
                        (r.matchedStreams = r.matchedStreams.filter(function (i) {
                          return i !== e;
                        })));
                  (e.segmentIndex && e.closeSegmentIndex(), this.m.delete(t));
                }
              }));
            function IS(e, t) {
              var n = [],
                r = [],
                i = [],
                s = [];
              e = x(e);
              for (var o = e.next(); !o.done; o = e.next()) {
                var u = o.value;
                o = new Map(
                  u.audioStreams.map(function (y) {
                    return [Wg(y), y];
                  }),
                );
                var l = new Map(
                    u.videoStreams.map(function (y) {
                      return [Xg(y), y];
                    }),
                  ),
                  p = new Map(
                    u.textStreams.map(function (y) {
                      return [$u(y), y];
                    }),
                  );
                if (
                  ((u = new Map(
                    u.imageStreams.map(function (y) {
                      return [Yu(y), y];
                    }),
                  )),
                  t)
                ) {
                  var m = DS(Fe);
                  (p.set($u(m), m), (m = DS("image")), u.set(Yu(m), m));
                }
                (n.push(o), r.push(l), i.push(p), s.push(u));
              }
              return { Sh: n, mj: r, hj: i, pi: s };
            }
            h.lg = function (e, t, n) {
              n = n === void 0 ? !1 : n;
              var r = this,
                i,
                s,
                o,
                u,
                l,
                p,
                m,
                y,
                v,
                w,
                A,
                E,
                C,
                k,
                R,
                L,
                U,
                G,
                b,
                B,
                N,
                z,
                V,
                X,
                W,
                ie,
                ne,
                q,
                Z,
                ae,
                ce,
                be;
              return j(function (Te) {
                if (Te.g == 1) {
                  if (((i = Ot), !t && e.length == 1))
                    return (
                      (s = IS(e, !1)),
                      (o = s.Sh),
                      (u = s.mj),
                      (l = s.hj),
                      (p = s.pi),
                      (r.h = Array.from(o[0].values())),
                      (r.g = Array.from(u[0].values())),
                      (r.j = Array.from(l[0].values())),
                      (r.i = Array.from(p[0].values())),
                      Te.A(2)
                    );
                  for (m = n ? r.m.size : 0, y = -1, v = 0; v < e.length; v++)
                    ((w = e[v]), r.m.has(w.id) || (r.m.add(w.id), y == -1 && (y = v)));
                  return y == -1
                    ? Te.return()
                    : ((A = IS(e, !0)),
                      (E = A.Sh),
                      (C = A.mj),
                      (k = A.hj),
                      (R = A.pi),
                      I(
                        Te,
                        Promise.all([
                          gs(r, r.h, E, y, na, ms, m),
                          gs(r, r.g, C, y, na, ms, m),
                          gs(r, r.j, k, y, na, ms, m),
                          gs(r, r.i, R, y, na, ms, m),
                        ]),
                        2,
                      ));
                }
                if (((L = 0), (U = []), r.g.length && r.h.length))
                  for (X = x(r.h), W = X.next(); !W.done; W = X.next())
                    for (ie = W.value, ne = x(r.g), q = ne.next(); !q.done; q = ne.next())
                      ((Z = q.value),
                        (ae = Pv(ie.drmInfos, Z.drmInfos)),
                        (ie.drmInfos.length && Z.drmInfos.length && !ae.length) ||
                          ((ce = (ie.bandwidth || 0) + (Z.bandwidth || 0)),
                          ie.dependencyStream && (ce += ie.dependencyStream.bandwidth || 0),
                          Z.dependencyStream && (ce += Z.dependencyStream.bandwidth || 0),
                          (be = L++),
                          U.push({
                            id: be,
                            language: ie.language,
                            disabledUntilTime: 0,
                            primary: ie.primary,
                            audio: ie,
                            video: Z,
                            bandwidth: ce,
                            drmInfos: ae,
                            allowedByApplication: !0,
                            allowedByKeySystem: !0,
                            decodingInfos: [],
                          })));
                else
                  for (G = r.g.length ? r.g : r.h, b = x(G), B = b.next(); !B.done; B = b.next())
                    ((N = B.value),
                      (z = L++),
                      (V = N.bandwidth || 0),
                      N.dependencyStream && (V += N.dependencyStream.bandwidth || 0),
                      U.push({
                        id: z,
                        language: N.language,
                        disabledUntilTime: 0,
                        primary: N.primary,
                        audio: N.type == i.aa ? N : null,
                        video: N.type == i.wa ? N : null,
                        bandwidth: V,
                        drmInfos: N.drmInfos,
                        allowedByApplication: !0,
                        allowedByKeySystem: !0,
                        decodingInfos: [],
                      }));
                ((r.l = U), re(Te));
              });
            };
            function CS(e) {
              var t, n, r, i, s, o, u, l, p, m, y, v, w, A, E, C, k, R, L, U, G, b, B, N, z, V, X, W, ie, ne;
              return j(function (q) {
                switch (q.g) {
                  case 1:
                    if (((t = Ot), e.length == 1)) return q.return(e[0]);
                    for (
                      n = e.map(function (Z) {
                        return new Map(
                          Z.filter(function (ae) {
                            return ae.type === t.aa;
                          }).map(function (ae) {
                            return [Wg(ae), ae];
                          }),
                        );
                      }),
                        r = e.map(function (Z) {
                          return new Map(
                            Z.filter(function (ae) {
                              return ae.type === t.wa;
                            }).map(function (ae) {
                              return [Xg(ae), ae];
                            }),
                          );
                        }),
                        i = e.map(function (Z) {
                          return new Map(
                            Z.filter(function (ae) {
                              return ae.type === t.Na;
                            }).map(function (ae) {
                              return [$u(ae), ae];
                            }),
                          );
                        }),
                        s = e.map(function (Z) {
                          return new Map(
                            Z.filter(function (ae) {
                              return ae.type === t.Yf;
                            }).map(function (ae) {
                              return [Yu(ae), ae];
                            }),
                          );
                        }),
                        o = x(i),
                        u = o.next();
                      !u.done;
                      u = o.next()
                    )
                      ((l = u.value), (p = PS(t.Na)), l.set($u(p), p));
                    for (m = x(s), y = m.next(); !y.done; y = m.next())
                      ((v = y.value), (w = PS(t.Yf)), v.set(Yu(w), w));
                    return ((A = new Gn()), I(q, gs(A, [], n, 0, Od, Ud, 0), 2));
                  case 2:
                    return ((E = q.h), I(q, gs(A, [], r, 0, Od, Ud, 0), 3));
                  case 3:
                    return ((C = q.h), I(q, gs(A, [], i, 0, Od, Ud, 0), 4));
                  case 4:
                    return ((k = q.h), I(q, gs(A, [], s, 0, Od, Ud, 0), 5));
                  case 5:
                    if (((R = q.h), (L = 0), C.length && E.length))
                      for (N = x(E), z = N.next(); !z.done; z = N.next())
                        for (V = z.value, X = x(C), W = X.next(); !W.done; W = X.next())
                          ((ie = W.value), (ne = L++), ie.variantIds.push(ne), V.variantIds.push(ne));
                    else
                      for (U = C.concat(E), G = x(U), b = G.next(); !b.done; b = G.next())
                        ((B = b.value), (B.variantIds = [L++]));
                    return q.return(C.concat(E).concat(k).concat(R));
                }
              });
            }
            function gs(e, t, n, r, i, s, o) {
              var u, l, p, m, y, v, w, A, E, C, k, R, L, U, G, b, B, N, z;
              return j(function (V) {
                switch (V.g) {
                  case 1:
                    for (u = [], l = 0; l < n.length; l++)
                      l >= r ? u.push(new Set(n[l].values())) : u.push(new Set());
                    ((p = x(t)), (m = p.next()));
                  case 2:
                    if (m.done) {
                      V.A(4);
                      break;
                    }
                    return ((y = m.value), I(V, hP(e, y, n, r, s, u, o), 5));
                  case 5:
                    if (((v = V.h), !v)) throw new H(2, 4, 4037);
                    ((m = p.next()), V.A(2));
                    break;
                  case 4:
                    for (w = x(u), A = w.next(); !A.done; A = w.next())
                      for (E = A.value, C = x(E), k = C.next(); !k.done; k = C.next())
                        ((R = k.value), (L = pP(e, t, R, n, i, s, u)) && t.push(L));
                    for (U = x(u), G = U.next(); !G.done; G = U.next())
                      for (
                        b = G.value, B = x(b), N = B.next(), z = {};
                        !N.done;
                        z = { yh: void 0 }, N = B.next()
                      )
                        if (
                          ((z.yh = N.value),
                          !zg(z.yh) &&
                            t.some(
                              (function (X) {
                                return function (W) {
                                  return Gg(X.yh, W);
                                };
                              })(z),
                            ))
                        )
                          throw new H(2, 4, 4037);
                    return V.return(t);
                }
              });
            }
            function hP(e, t, n, r, i, s, o) {
              return j(function (u) {
                return u.g == 1
                  ? (kS(e, n, t, o > 0),
                    t.matchedStreams ? (t.segmentIndex ? I(u, MS(t, r + o), 2) : u.A(2)) : u.return(!1))
                  : (RS(t, r, i, s, o), u.return(!0));
              });
            }
            function MS(e, t) {
              var n, r, i, s, o, u;
              return j(function (l) {
                if (l.g == 1) {
                  for (n = [], r = e.matchedStreams, i = t; i < r.length; i++)
                    ((s = r[i]),
                      n.push(s.createSegmentIndex()),
                      s.trickModeVideo &&
                        !s.trickModeVideo.segmentIndex &&
                        n.push(s.trickModeVideo.createSegmentIndex()),
                      s.dependencyStream &&
                        !s.dependencyStream.segmentIndex &&
                        n.push(s.dependencyStream.createSegmentIndex()));
                  return I(l, Promise.all(n), 2);
                }
                if (e.segmentIndex instanceof It)
                  for (o = t; o < r.length; o++)
                    ((u = r[o]), u.segmentIndex && e.segmentIndex.h.push(u.segmentIndex));
                re(l);
              });
            }
            function pP(e, t, n, r, i, s, o) {
              if (zg(n)) return null;
              var u = i(n);
              return (
                kS(e, r, u),
                u.createSegmentIndex &&
                  ((u.createSegmentIndex = function () {
                    return j(function (l) {
                      return u.segmentIndex ? l.A(0) : ((u.segmentIndex = new It()), I(l, MS(u, 0), 0));
                    });
                  }),
                  (u.closeSegmentIndex = function () {
                    if (
                      (u.segmentIndex && (u.segmentIndex.release(), (u.segmentIndex = null)),
                      u.matchedStreams)
                    )
                      for (var l = x(u.matchedStreams), p = l.next(); !p.done; p = l.next()) {
                        p = p.value;
                        var m;
                        if ((m = p.segmentIndex)) {
                          e: {
                            m = x(t);
                            for (var y = m.next(); !y.done; y = m.next())
                              if (
                                ((y = y.value),
                                y !== u && y.segmentIndex && y.matchedStreams && y.matchedStreams.includes(p))
                              ) {
                                m = !0;
                                break e;
                              }
                            m = !1;
                          }
                          m = !m;
                        }
                        m && (p.segmentIndex.release(), (p.segmentIndex = null));
                      }
                  })),
                !u.matchedStreams || !u.matchedStreams.length ? null : (RS(u, 0, s, o, 0), u)
              );
            }
            function RS(e, t, n, r, i) {
              var s = e.matchedStreams;
              for (t += i; t < s.length; t++) {
                var o = s[t];
                n(e, o);
                var u = !0;
                if (
                  (e.type == "audio" && Ns(e.language, o.language) == 0 && (u = !1),
                  u && ((u = r[t - i]) && u.delete(o), o.fullMimeTypes))
                )
                  for (o = x(o.fullMimeTypes.values()), u = o.next(); !u.done; u = o.next())
                    e.fullMimeTypes.add(u.value);
              }
            }
            function na(e) {
              var t = Object.assign({}, e);
              return (
                (t.originalId = null),
                (t.createSegmentIndex = function () {
                  return Promise.resolve();
                }),
                (t.closeSegmentIndex = function () {}),
                (t.roles = t.roles.slice()),
                (t.segmentIndex = null),
                (t.emsgSchemeIdUris = []),
                (t.keyIds = new Set(e.keyIds)),
                (t.closedCaptions = e.closedCaptions ? new Map(e.closedCaptions) : null),
                (t.trickModeVideo = null),
                (t.dependencyStream = null),
                t
              );
            }
            function Od(e) {
              var t = Object.assign({}, e);
              return (
                (t.roles = t.roles.slice()),
                (t.keyIds = new Set(e.keyIds)),
                (t.segments = []),
                (t.variantIds = []),
                (t.closedCaptions = e.closedCaptions ? new Map(e.closedCaptions) : null),
                t
              );
            }
            function ms(e, t) {
              function n(o, u) {
                (o || (o = []), (u = x(u)));
                for (var l = u.next(); !l.done; l = u.next()) ((l = l.value), o.includes(l) || o.push(l));
                return o;
              }
              ((e.roles = n(e.roles, t.roles)),
                t.emsgSchemeIdUris && (e.emsgSchemeIdUris = n(e.emsgSchemeIdUris, t.emsgSchemeIdUris)));
              for (var r = x(t.keyIds), i = r.next(); !i.done; i = r.next()) e.keyIds.add(i.value);
              if (
                (e.originalId == null
                  ? (e.originalId = t.originalId)
                  : (r = t.originalId || "") && !e.originalId.endsWith(r) && (e.originalId += "," + r),
                (r = Pv(e.drmInfos, t.drmInfos)),
                t.drmInfos.length && e.drmInfos.length && !r.length)
              )
                throw new H(2, 4, 4038);
              if (((e.drmInfos = r), (e.encrypted = e.encrypted || t.encrypted), t.closedCaptions))
                for (
                  e.closedCaptions || (e.closedCaptions = new Map()), r = x(t.closedCaptions), i = r.next();
                  !i.done;
                  i = r.next()
                ) {
                  var s = x(i.value);
                  ((i = s.next().value), (s = s.next().value), e.closedCaptions.set(i, s));
                }
              (e.bandwidth && t.bandwidth && (e.bandwidth = Math.max(e.bandwidth, t.bandwidth)),
                t.trickModeVideo
                  ? (e.trickModeVideo ||
                      ((e.trickModeVideo = na(t.trickModeVideo)),
                      (e.trickModeVideo.matchedStreams = []),
                      (e.trickModeVideo.createSegmentIndex = function () {
                        if (e.trickModeVideo.segmentIndex) return Promise.resolve();
                        for (
                          var o = new It(), u = x(e.trickModeVideo.matchedStreams), l = u.next();
                          !l.done;
                          l = u.next()
                        )
                          o.h.push(l.value.segmentIndex);
                        return ((e.trickModeVideo.segmentIndex = o), Promise.resolve());
                      })),
                    e.trickModeVideo.matchedStreams.push(t.trickModeVideo),
                    ms(e.trickModeVideo, t.trickModeVideo))
                  : e.trickModeVideo && (e.trickModeVideo.matchedStreams.push(t), ms(e.trickModeVideo, t)),
                t.dependencyStream
                  ? (e.dependencyStream ||
                      ((e.dependencyStream = na(t.dependencyStream)),
                      (e.dependencyStream.matchedStreams = []),
                      (e.dependencyStream.createSegmentIndex = function () {
                        if (e.dependencyStream.segmentIndex) return Promise.resolve();
                        for (
                          var o = new It(), u = x(e.dependencyStream.matchedStreams), l = u.next();
                          !l.done;
                          l = u.next()
                        )
                          o.h.push(l.value.segmentIndex);
                        return ((e.dependencyStream.segmentIndex = o), Promise.resolve());
                      })),
                    e.dependencyStream.matchedStreams.push(t.dependencyStream),
                    ms(e.dependencyStream, t.dependencyStream))
                  : e.dependencyStream &&
                    (e.dependencyStream.matchedStreams.push(t), ms(e.dependencyStream, t)));
            }
            function Ud(e, t) {
              var n = e.roles;
              n || (n = []);
              for (var r = x(t.roles), i = r.next(); !i.done; i = r.next())
                ((i = i.value), n.includes(i) || n.push(i));
              for (e.roles = n, n = x(t.keyIds), r = n.next(); !r.done; r = n.next()) e.keyIds.add(r.value);
              if (
                ((e.encrypted = e.encrypted && t.encrypted),
                e.segments.push.apply(e.segments, Y(t.segments)),
                t.closedCaptions)
              )
                for (
                  e.closedCaptions || (e.closedCaptions = new Map()), t = x(t.closedCaptions), n = t.next();
                  !n.done;
                  n = t.next()
                )
                  ((r = x(n.value)), (n = r.next().value), (r = r.next().value), e.closedCaptions.set(n, r));
            }
            function kS(e, t, n, r) {
              ((r = r !== void 0 && r ? n.matchedStreams : []), (t = x(t)));
              for (var i = t.next(); !i.done; i = t.next()) {
                if (((i = gP(e, i.value, n)), !i)) return;
                r.push(i);
              }
              n.matchedStreams = r;
            }
            function gP(e, t, n) {
              var r = { audio: Wg, video: Xg, text: $u, image: Yu }[n.type],
                i = null,
                s = r(n);
              if (t.has(s)) i = t.get(s);
              else {
                s = {
                  audio: function (p, m) {
                    return Gg(p, m);
                  },
                  video: function (p, m) {
                    return Gg(p, m);
                  },
                  text: mP,
                  image: yP,
                }[n.type];
                for (
                  var o = { audio: vP, video: xP, text: TP, image: SP }[n.type],
                    u = x(t.values()),
                    l = u.next();
                  !l.done;
                  l = u.next()
                )
                  ((l = l.value),
                    !s(n, l) || n.fastSwitching != l.fastSwitching || (i && !o(n, i, l)) || (i = l));
              }
              return (e.o && !zg(i) && t.delete(r(i)), i);
            }
            function _S(e, t) {
              return e.mimeType != t.mimeType ? !1 : NS(e.codecs) === NS(t.codecs);
            }
            h.Xi = function (e) {
              this.o = e;
            };
            function Gg(e, t) {
              return !(e.drmInfos && !_v(e.drmInfos, t.drmInfos));
            }
            function mP(e, t) {
              return t.language
                ? !(e.forced !== t.forced || Ns(e.language, t.language) == 0 || t.kind != e.kind)
                : !0;
            }
            function yP() {
              return !0;
            }
            function vP(e, t, n) {
              var r = LS(e, t, n);
              if (r === rr) return !0;
              if (r === Mr) return !1;
              r = Ns(e.language, t.language);
              var i = Ns(e.language, n.language);
              if (i > r) return !0;
              if (i < r) return !1;
              if (t.label !== n.label) {
                if (e.label === t.label) return !1;
                if (e.label === n.label) return !0;
              }
              if (e.roles.length) {
                if (
                  ((r = t.roles.filter(function (s) {
                    return e.roles.includes(s);
                  })),
                  (i = n.roles.filter(function (s) {
                    return e.roles.includes(s);
                  })),
                  i.length > r.length)
                )
                  return !0;
                if (i.length < r.length) return !1;
                if (n.roles.length !== t.roles.length) return n.roles.length < t.roles.length;
              } else {
                if (!n.roles.length && t.roles.length) return !0;
                if (n.roles.length && !t.roles.length) return !1;
              }
              return !t.primary && n.primary
                ? !0
                : t.primary && !n.primary
                  ? !1
                  : ((r = Ku(e.channelsCount, t.channelsCount, n.channelsCount)),
                    r == rr
                      ? !0
                      : r == Mr
                        ? !1
                        : ((r = Ku(e.audioSamplingRate, t.audioSamplingRate, n.audioSamplingRate)),
                          r == rr
                            ? !0
                            : r == Mr
                              ? !1
                              : !!(e.bandwidth && bS(e.bandwidth, t.bandwidth, n.bandwidth) == rr)));
            }
            function xP(e, t, n) {
              var r = LS(e, t, n);
              if (r === rr) return !0;
              if (r === Mr) return !1;
              if (((r = Ku(e.width * e.height, t.width * t.height, n.width * n.height)), r == rr)) return !0;
              if (r == Mr) return !1;
              if (e.frameRate) {
                if (((r = Ku(e.frameRate, t.frameRate, n.frameRate)), r == rr)) return !0;
                if (r == Mr) return !1;
              }
              return !!(e.bandwidth && bS(e.bandwidth, t.bandwidth, n.bandwidth) == rr);
            }
            function TP(e, t, n) {
              var r = Ns(e.language, t.language),
                i = Ns(e.language, n.language);
              if (i > r) return !0;
              if (i < r) return !1;
              if (!t.primary && n.primary) return !0;
              if (t.primary && !n.primary) return !1;
              if (t.label !== n.label) {
                if (e.label === t.label) return !1;
                if (e.label === n.label) return !0;
              }
              if (e.roles.length) {
                if (
                  ((r = t.roles.filter(function (s) {
                    return e.roles.includes(s);
                  })),
                  (i = n.roles.filter(function (s) {
                    return e.roles.includes(s);
                  })),
                  i.length > r.length)
                )
                  return !0;
                if (i.length < r.length) return !1;
              } else {
                if (!n.roles.length && t.roles.length) return !0;
                if (n.roles.length && !t.roles.length) return !1;
              }
              return !(
                n.mimeType != e.mimeType ||
                n.codecs != e.codecs ||
                (t.mimeType == e.mimeType && t.codecs == e.codecs)
              );
            }
            function SP(e, t, n) {
              return Ku(e.width * e.height, t.width * t.height, n.width * n.height) == rr;
            }
            function PS(e) {
              return {
                id: 0,
                originalId: "",
                groupId: null,
                primary: !1,
                type: e,
                mimeType: "",
                codecs: "",
                language: "",
                originalLanguage: null,
                label: null,
                width: null,
                height: null,
                encrypted: !1,
                keyIds: new Set(),
                segments: [],
                variantIds: [],
                roles: [],
                forced: !1,
                channelsCount: null,
                audioSamplingRate: null,
                spatialAudio: !1,
                closedCaptions: null,
                external: !1,
                fastSwitching: !1,
                isAudioMuxedInVideo: !1,
                baseOriginalId: null,
              };
            }
            function DS(e) {
              return {
                id: 0,
                originalId: "",
                groupId: null,
                createSegmentIndex: function () {
                  return Promise.resolve();
                },
                segmentIndex: new Je([]),
                mimeType: "",
                codecs: "",
                encrypted: !1,
                drmInfos: [],
                keyIds: new Set(),
                language: "",
                originalLanguage: null,
                label: null,
                type: e,
                primary: !1,
                trickModeVideo: null,
                dependencyStream: null,
                emsgSchemeIdUris: null,
                roles: [],
                forced: !1,
                channelsCount: null,
                audioSamplingRate: null,
                spatialAudio: !1,
                closedCaptions: null,
                accessibilityPurpose: null,
                external: !1,
                fastSwitching: !1,
                fullMimeTypes: new Set(),
                isAudioMuxedInVideo: !1,
                baseOriginalId: null,
              };
            }
            function Ku(e, t, n) {
              if (t == e && e != n) return Mr;
              if (n == e && e != t) return rr;
              if (t > e) {
                if (n <= e || n - e < t - e) return rr;
                if (n - e > t - e) return Mr;
              } else {
                if (n > e) return Mr;
                if (e - n < e - t) return rr;
                if (e - n > e - t) return Mr;
              }
              return Kg;
            }
            function LS(e, t, n) {
              var r = e.mimeType === t.mimeType && e.codecs === t.codecs,
                i = e.mimeType === n.mimeType && e.codecs === n.codecs;
              return r && !i
                ? Mr
                : !r && i
                  ? rr
                  : ((t = _S(e, t)), (e = _S(e, n)), t && !e ? Mr : !t && e ? rr : Kg);
            }
            function bS(e, t, n) {
              return ((t = Math.abs(e - t)), (e = Math.abs(e - n)), e < t ? rr : t < e ? Mr : Kg);
            }
            function zg(e) {
              switch (e.type) {
                case Fe:
                  return !e.language;
                case "image":
                  return !e.tilesLayout;
                default:
                  return !1;
              }
            }
            function Xg(e) {
              return jd([
                e.fastSwitching,
                e.width,
                e.frameRate,
                e.codecs,
                e.mimeType,
                e.label,
                e.roles,
                e.closedCaptions ? Array.from(e.closedCaptions.entries()) : null,
                e.bandwidth,
                e.dependencyStream ? e.dependencyStream.baseOriginalId : null,
                Array.from(e.keyIds),
              ]);
            }
            function Wg(e) {
              return jd([
                e.fastSwitching,
                e.channelsCount,
                e.language,
                e.bandwidth,
                e.label,
                e.codecs,
                e.mimeType,
                e.roles,
                e.audioSamplingRate,
                e.primary,
                e.dependencyStream ? e.dependencyStream.baseOriginalId : null,
                Array.from(e.keyIds),
              ]);
            }
            function $u(e) {
              return jd([e.language, e.label, e.codecs, e.mimeType, e.bandwidth, e.roles]);
            }
            function Yu(e) {
              return jd([e.width, e.codecs, e.mimeType]);
            }
            function jd(e) {
              return JSON.stringify(e);
            }
            function NS(e) {
              if (!$g.has(e)) {
                var t = fn(e);
                $g.set(e, t);
              }
              return $g.get(e);
            }
            (fe("shaka.util.PeriodCombiner", Gn),
              (Gn.prototype.setUseStreamOnce = Gn.prototype.Xi),
              (Gn.prototype.combinePeriods = Gn.prototype.lg),
              (Gn.prototype.deleteStream = Gn.prototype.Zh),
              (Gn.prototype.getImageStreams = Gn.prototype.Mj),
              (Gn.prototype.getTextStreams = Gn.prototype.Mg),
              (Gn.prototype.getVariants = Gn.prototype.fk));
            var rr = 1,
              Kg = 0,
              Mr = -1,
              $g = new Map();
            function wP(e, t) {
              var n = new DOMParser(),
                r = AP.value()(e);
              e = null;
              try {
                e = n.parseFromString(r, "text/xml");
              } catch (i) {
                return null;
              }
              if (
                ((n = e.documentElement),
                !n || n.getElementsByTagName("parsererror").length || n.tagName != t)
              )
                return null;
              if (!("createNodeIterator" in document)) return n;
              for (t = document.createNodeIterator(e, NodeFilter.SHOW_ALL); (e = t.nextNode()); )
                if (e instanceof HTMLElement || e instanceof SVGElement) return null;
              return n;
            }
            function OS(e, t) {
              try {
                var n = ei(e);
                return wP(n, t);
              } catch (r) {
                return null;
              }
            }
            var AP = new xt(function () {
              if (typeof trustedTypes < "u") {
                var e = trustedTypes.createPolicy("shaka-player#xml", {
                  createHTML: function (t) {
                    return t;
                  },
                });
                return function (t) {
                  return e.createHTML(t);
                };
              }
              return function (t) {
                return t;
              };
            });
            function qu() {
              var e = this;
              ((this.j = this.g = null),
                (this.B = []),
                (this.h = null),
                (this.Fa = 1),
                (this.H = []),
                (this.l = { vf: "", type: "", profiles: [], uc: null, rb: 0, bb: null, qe: 0 }),
                (this.u = new Map()),
                (this.C = new Map()),
                (this.o = new Map()),
                (this.F = new Map()),
                (this.za = new Map()),
                (this.m = new Gn()),
                (this.K = 0),
                (this.Da = new Wr(5)),
                (this.M = new Ve(function () {
                  if (e.J && !e.g.continueLoadingWhenPaused && (e.I.Ma(e.J, "timeupdate"), e.J.paused)) {
                    e.I.Aa(e.J, "timeupdate", function () {
                      return GS(e);
                    });
                    return;
                  }
                  GS(e);
                })),
                (this.R = new Eo()),
                (this.O = null),
                (this.G = []),
                (this.ba = 1 / 0),
                (this.va = !1),
                (this.i = null),
                (this.N = 0),
                (this.T = !1),
                (this.I = new et()),
                (this.J = null),
                (this.V = !1),
                (this.$ = ""),
                (this.oa = function () {
                  return !1;
                }),
                (this.X = []),
                (this.ma = new Set()),
                (this.ya = new dS()));
            }
            ((h = qu.prototype),
              (h.configure = function (e, t) {
                var n = this.j && e.updatePeriod != this.g.updatePeriod && e.updatePeriod >= 0;
                ((this.g = e),
                  t && (this.oa = t),
                  n && this.h && this.h.presentationTimeline.W() && this.M.Jb(),
                  this.i && this.i.configure(this.g),
                  this.m && this.m.Xi(this.g.dash.useStreamOnceInPeriodFlattening));
              }),
              (h.start = function (e, t) {
                var n = this,
                  r;
                return j(function (i) {
                  if (i.g == 1)
                    return ((n.va = t.isLowLatencyMode()), (n.B = [e]), (n.j = t), I(i, Yg(n), 2));
                  if (((r = i.h), n.j && qg(n, r), !n.j)) throw new H(2, 7, 7001);
                  return i.return(n.h);
                });
              }),
              (h.stop = function () {
                for (var e = x(this.o.values()), t = e.next(); !t.done; t = e.next())
                  ((t = t.value), t.segmentIndex && t.segmentIndex.release());
                return (
                  this.m && this.m.release(),
                  (this.g = this.j = null),
                  (this.B = []),
                  (this.h = null),
                  this.o.clear(),
                  this.F.clear(),
                  this.u.clear(),
                  this.C.clear(),
                  (this.l = { vf: "", type: "", profiles: [], uc: null, rb: 0, bb: null, qe: 0 }),
                  (this.m = null),
                  this.M != null && (this.M.stop(), (this.M = null)),
                  this.i && this.i.destroy(),
                  this.I && (this.I.release(), (this.I = null)),
                  this.ma.clear(),
                  this.ya.release(),
                  this.R.destroy()
                );
              }),
              (h.update = function () {
                var e = this,
                  t;
                return j(function (n) {
                  if (n.g == 1) return (ee(n, 2), I(n, Yg(e), 4));
                  if (n.g != 2) return de(n, 0);
                  if (((t = se(n)), !e.j || !t)) return n.return();
                  (e.j.onError(t), re(n));
                });
              }),
              (h.onExpirationUpdated = function () {}),
              (h.onInitialVariantChosen = function (e) {
                if (this.h && this.h.presentationTimeline.W()) {
                  var t = e.video || e.audio;
                  if (t && t.segmentIndex) {
                    e = this.h.presentationTimeline.Ic();
                    var n = t.segmentIndex.find(e);
                    n != null && (t = t.segmentIndex.get(n)) && ((this.K = t.endTime - e), qg(this, 0));
                  }
                }
              }),
              (h.banLocation = function (e) {
                this.i && this.i.banLocation(e);
              }),
              (h.setMediaElement = function (e) {
                this.J = e;
              }));
            function Yg(e) {
              var t, n, r, i, s, o, u, l, p, m, y;
              return j(function (v) {
                return v.g == 1
                  ? ((t = 4),
                    (n = "MPD"),
                    (r = jP(e)),
                    (i = e.B),
                    r.length
                      ? ((i = r), (n = "Patch"), (t = 6))
                      : e.B.length > 1 && e.i && ((s = Wu(e.i, "Location", !0)), s.length && (i = s)),
                    (o = Ut(i, e.g.retryParameters)),
                    (u = Date.now()),
                    I(v, Qg(e, o, 0, { type: t }), 2))
                  : v.g != 3
                    ? ((l = v.h),
                      e.j
                        ? (l.uri && l.uri != l.originalUri && !e.B.includes(l.uri) && e.B.unshift(l.uri),
                          (p = new Pt(l.uri)),
                          (e.$ = p.g.toString()),
                          I(v, EP(e, l.data, l.uri, n), 3))
                        : v.return(0))
                    : ((m = Date.now()), (y = (m - u) / 1e3), e.Da.sample(1, y), e.ma.clear(), v.return(y));
              });
            }
            function EP(e, t, n, r) {
              var i, s, o, u, l, p, m, y, v, w;
              return j(function (A) {
                if (A.g == 1) {
                  if (((i = t), (s = e.g.dash.manifestPreprocessor), (o = Jc), s != o)) {
                    if (
                      (qe(
                        "manifest.dash.manifestPreprocessor configuration",
                        "Please Use manifest.dash.manifestPreprocessorTXml instead.",
                      ),
                      (u = OS(i, r)),
                      !u)
                    )
                      throw new H(2, 4, 4001, n);
                    (s(u), (i = Or(u.outerHTML)));
                  }
                  if (((l = Xa(i, r)), !l)) throw new H(2, 4, 4001, n);
                  return (
                    (p = e.g.dash.manifestPreprocessorTXml),
                    (m = Qc),
                    p != m && p(l),
                    r === "Patch"
                      ? A.return(IP(e, l))
                      : e.g.dash.disableXlinkProcessing
                        ? A.return(US(e, l, n))
                        : ((y = e.g.dash.xlinkFailGracefully),
                          (v = Nd(l, e.g.retryParameters, y, n, e.j.networkingEngine)),
                          js(e.R, v),
                          I(A, v.promise, 2))
                  );
                }
                return ((w = A.h), A.return(US(e, w, n)));
              });
            }
            function US(e, t, n) {
              var r,
                i,
                s,
                o,
                u,
                l,
                p,
                m,
                y,
                v,
                w,
                A,
                E,
                C,
                k,
                R,
                L,
                U,
                G,
                b,
                B,
                N,
                z,
                V,
                X,
                W,
                ie,
                ne,
                q,
                Z,
                ae,
                ce,
                be,
                Te,
                Ze,
                Oe,
                st,
                Xe,
                He,
                $e,
                Qe,
                Ye,
                Ge,
                We,
                Yt,
                Ht,
                vr,
                Wn,
                bn,
                Js,
                Ui,
                Gr,
                ua,
                la,
                Tf;
              return j(function (zr) {
                switch (zr.g) {
                  case 1:
                    for (
                      e.i && e.i.l.clear(),
                        r = [n],
                        i = [],
                        s = new Map(),
                        o = it(t, "Location"),
                        u = x(o),
                        l = u.next();
                      !l.done;
                      l = u.next()
                    )
                      ((p = l.value),
                        (m = p.attributes.serviceLocation),
                        (y = _n(p)) &&
                          ((v = qt(r, [y])[0]),
                          m && (e.i ? ta(e.i, "Location", m, v) : s.set(m, v)),
                          i.push(v)));
                    if (
                      (e.i
                        ? ((w = Wu(e.i, "Location", !0)), w.length > 0 && (r = e.B = w))
                        : i.length && (r = e.B = i),
                      (e.l.vf = t.attributes.id || ""),
                      (e.l.qe = Le(t, "publishTime", yi) || 0),
                      (e.H = it(t, "PatchLocation")),
                      (A = Promise.resolve()),
                      (E = mt(t, "ContentSteering")) && e.j)
                    )
                      for (
                        C = E.attributes.defaultServiceLocation,
                          e.i
                            ? ((e.i.i = r), (e.i.h = C))
                            : ((e.i = new ea(e.j)),
                              e.i.configure(e.g),
                              e.i.setManifestType("DASH"),
                              (e.i.i = r),
                              (e.i.h = C),
                              (k = _n(E)) &&
                                (Le(E, "queryBeforeStart", ec, !1) ? (A = Xu(e.i, k)) : Xu(e.i, k))),
                          R = x(s.keys()),
                          L = R.next();
                        !L.done;
                        L = R.next()
                      )
                        ((U = L.value), (G = s.get(U)), ta(e.i, "Location", U, G));
                    if (((b = it(t, "BaseURL")), (B = !1), e.i))
                      for (N = x(b), z = N.next(); !z.done; z = N.next())
                        ((V = z.value),
                          (X = V.attributes.serviceLocation),
                          (W = _n(V)),
                          X && W && (ta(e.i, "BaseURL", X, W), (B = !0)));
                    if (
                      (e.X.splice(0),
                      (B && e.i) || ((ie = b.map(_n)), e.X.push.apply(e.X, Y(qt(r, ie)))),
                      (ne = e.i),
                      (q = e.X),
                      (Z = BP),
                      (ae = Z.call(qu, ne, B, q)),
                      (e.l.bb = ae),
                      (ce = 0),
                      b && b.length && (ce = Le(b[0], "availabilityTimeOffset", Zl) || 0),
                      (e.l.rb = ce),
                      (e.K = Le(t, "minimumUpdatePeriod", ni, -1)),
                      (be = Le(t, "availabilityStartTime", yi)),
                      (Te = Le(t, "timeShiftBufferDepth", ni)),
                      (Ze = e.g.dash.ignoreSuggestedPresentationDelay),
                      (Oe = null),
                      Ze || (Oe = Le(t, "suggestedPresentationDelay", ni)),
                      (st = e.g.dash.ignoreMaxSegmentDuration),
                      (Xe = null),
                      st || (Xe = Le(t, "maxSegmentDuration", ni)),
                      (He = t.attributes.type || "static"),
                      e.h &&
                        e.h.presentationTimeline &&
                        (e.V = e.h.presentationTimeline.W() && He == "static"),
                      (e.l.type = He),
                      e.h)
                    )
                      for (
                        $e = e.h.presentationTimeline, Qe = $e.Hb(), Ye = x(e.o.values()), Ge = Ye.next();
                        !Ge.done;
                        Ge = Ye.next()
                      )
                        ((We = Ge.value), We.segmentIndex && We.segmentIndex.Ya(Qe));
                    else
                      ((Yt = e.g.dash.ignoreMinBufferTime),
                        (Ht = 0),
                        Yt || (Ht = Le(t, "minBufferTime", ni) || 0),
                        (vr = 0),
                        (vr =
                          Oe != null
                            ? Math.min(Oe, Te || 1 / 0)
                            : e.g.defaultPresentationDelay > 0
                              ? e.g.defaultPresentationDelay
                              : Math.min(Ht * 1.5, Te || 1 / 0)),
                        ($e = new Pe(be, vr, e.g.dash.autoCorrectDrift)));
                    return (
                      $e.cd(He == "static"),
                      $e.W() &&
                        !isNaN(e.g.availabilityWindowOverride) &&
                        (Te = e.g.availabilityWindowOverride),
                      Te == null && (Te = 1 / 0),
                      $e.Lf(Te),
                      (Wn = t.attributes.profiles || ""),
                      (e.l.profiles = Wn.split(",")),
                      (bn = {
                        Eb: He != "static",
                        presentationTimeline: $e,
                        sa: null,
                        na: null,
                        qa: null,
                        L: null,
                        bandwidth: 0,
                        Og: !1,
                        rb: ce,
                        uc: null,
                        profiles: Wn.split(","),
                        roles: null,
                        Lb: KS,
                      }),
                      I(zr, A, 2)
                    );
                  case 2:
                    return (
                      (e.N = 0),
                      (Js = VS(e, bn, ae, t, !1)),
                      (Ui = Js.duration),
                      (Gr = Js.periods),
                      ((He != "static" || e.V) && Js.ai) || $e.Ab(Ui || 1 / 0),
                      e.T && e.va && $e.Ui(e.ba),
                      $e.Wg(Xe || 1),
                      e.T && e.va && ((ua = Oe != null ? Oe : e.g.defaultPresentationDelay), $e.rh(ua)),
                      e.h
                        ? ((e.h.periodCount = Gr.length), (e.h.gapCount = e.N), I(zr, jS(e, Gr, !1), 4))
                        : I(zr, e.m.lg(Gr, bn.Eb), 6)
                    );
                  case 6:
                    var Sf = $e,
                      iy = e.m.l,
                      wf = e.m.Mg(),
                      ca = e.m.i,
                      ul = e.g.dash.sequenceMode,
                      Gt = mt(t, "ServiceDescription");
                    if (Gt) {
                      var sr = mt(Gt, "Latency");
                      if (((Gt = mt(Gt, "PlaybackRate")), sr || Gt)) {
                        var Nn = {};
                        (sr &&
                          ("target" in sr.attributes &&
                            (Nn.targetLatency = parseInt(sr.attributes.target, 10) / 1e3),
                          "max" in sr.attributes && (Nn.maxLatency = parseInt(sr.attributes.max, 10) / 1e3),
                          "min" in sr.attributes && (Nn.minLatency = parseInt(sr.attributes.min, 10) / 1e3)),
                          Gt &&
                            ("max" in Gt.attributes && (Nn.maxPlaybackRate = parseFloat(Gt.attributes.max)),
                            "min" in Gt.attributes && (Nn.minPlaybackRate = parseFloat(Gt.attributes.min))),
                          (sr = Nn));
                      } else sr = null;
                    } else sr = null;
                    e: {
                      if (((Gt = it(t, "SupplementalProperty")), Gt.length)) {
                        for (Gt = x(Gt), Nn = Gt.next(); !Nn.done; Nn = Gt.next())
                          if (((Nn = Nn.value), Nn.attributes.schemeIdUri == "urn:mpeg:dash:chaining:2016")) {
                            Gt = Nn.attributes.value;
                            break e;
                          }
                      }
                      Gt = null;
                    }
                    if (
                      ((e.h = {
                        presentationTimeline: Sf,
                        variants: iy,
                        textStreams: wf,
                        imageStreams: ca,
                        offlineSessionIds: [],
                        sequenceMode: ul,
                        ignoreManifestTimestampsInSegmentsMode: !1,
                        type: "DASH",
                        serviceDescription: sr,
                        nextUrl: Gt,
                        periodCount: Gr.length,
                        gapCount: e.N,
                        isLowLatency: e.T,
                        startTime: null,
                      }),
                      !$e.kj())
                    ) {
                      zr.A(7);
                      break;
                    }
                    return ((la = it(t, "UTCTiming")), I(zr, OP(e, ae, la), 8));
                  case 8:
                    if (((Tf = zr.h), !e.j)) return zr.return();
                    $e.Vi(Tf);
                  case 7:
                    ($e.qf(), e.m && !e.h.presentationTimeline.W() && e.m.release());
                  case 4:
                    (e.j.makeTextStreamsForClosedCaptions(e.h), MP(e), RP(e, Gr), re(zr));
                }
              });
            }
            function jS(e, t, n) {
              var r;
              return j(function (i) {
                if (i.g == 1) return I(i, e.m.lg(t, !0, n), 2);
                ((e.h.variants = e.m.l),
                  (r = e.m.Mg()),
                  r.length > 0 && (e.h.textStreams = r),
                  (e.h.imageStreams = e.m.i),
                  e.j.filter(e.h),
                  re(i));
              });
            }
            function IP(e, t) {
              var n, r, i, s, o, u, l, p, m, y, v, w, A, E, C, k, R, L, U, G, b, B, N, z, V, X, W;
              return j(function (ie) {
                if (ie.g == 1) {
                  if (
                    ((n = t.attributes.mpdId),
                    (r = Le(t, "originalPublishTime", yi)),
                    !n || n !== e.l.vf || r !== e.l.qe)
                  )
                    throw ((e.H = []), new H(1, 4, 4052));
                  for (i = [], s = [], o = new Set(), u = x(Vv(t)), l = u.next(); !l.done; l = u.next())
                    if (
                      ((p = l.value),
                      (m = tc(p.attributes.sel || "")),
                      (y = m[m.length - 1]),
                      (v = _n(p) || ""),
                      y.name === "MPD")
                    )
                      if (y.Dc === "mediaPresentationDuration") {
                        w = _n(p) || "";
                        var ne = ni(w);
                        if (ne != null) {
                          e.l.uc = ne;
                          for (var q = x(e.u.values()), Z = q.next(); !Z.done; Z = q.next()) Z.value.uc = ne;
                        }
                      } else if (y.Dc === "type") {
                        for (
                          e.h.presentationTimeline.cd(v == "static"),
                            e.l.type = v,
                            ne = x(e.u.values()),
                            q = ne.next();
                          !q.done;
                          q = ne.next()
                        )
                          q.value.Eb = v == "dynamic";
                        v == "static" && (e.K = -1);
                      } else
                        y.Dc === "publishTime"
                          ? (e.l.qe = yi(v) || 0)
                          : y.Dc === null && p.tagName === "add" && s.push(p);
                    else if (y.name === "PatchLocation") Gv(e.H, p);
                    else if (y.name === "Period")
                      p.tagName === "add" ? s.push(p) : p.tagName === "remove" && y.id && CP(e, y.id);
                    else if (y.name === "SegmentTemplate") {
                      if (((q = tc(p.attributes.sel || "")), (ne = q[q.length - 1]), ne.Dc)) {
                        ((q = BS(e, q)), (Z = _n(p) || ""));
                        for (var ae = x(q), ce = ae.next(); !ce.done; ce = ae.next())
                          ((ce = e.u.get(ce.value)), Xv(ce.L.Oc, p.tagName, ne.Dc, Z));
                        ne = q;
                      } else ne = [];
                      for (A = ne, E = x(A), C = E.next(); !C.done; C = E.next()) ((k = C.value), o.add(k));
                    } else if (y.name === "SegmentTimeline" || y.name === "S") {
                      for (
                        ne = tc(p.attributes.sel || ""), ne = BS(e, ne), q = x(ne), Z = q.next();
                        !Z.done;
                        Z = q.next()
                      )
                        ((Z = e.u.get(Z.value)),
                          (Z = Qo(Z, ps, "SegmentTimeline")),
                          (ae = it(Z, "S")),
                          Gv(ae, p),
                          (Z.children = ae));
                      for (R = ne, L = x(R), U = L.next(); !U.done; U = L.next()) ((G = U.value), o.add(G));
                    }
                  for (b = x(o), B = b.next(); !B.done; B = b.next()) ((N = B.value), FS(e, N));
                  for (z = x(s), V = z.next(); !V.done; V = z.next())
                    ((X = V.value),
                      i.push.apply(
                        i,
                        Y(
                          VS(
                            e,
                            {
                              Eb: e.l.type == "dynamic",
                              presentationTimeline: e.h.presentationTimeline,
                              sa: null,
                              na: null,
                              qa: null,
                              L: null,
                              bandwidth: 0,
                              Og: !1,
                              rb: e.l.rb,
                              profiles: e.l.profiles,
                              uc: e.l.uc,
                              roles: null,
                              Lb: KS,
                            },
                            e.l.bb,
                            X,
                            !0,
                          ).periods,
                        ),
                      ));
                  return i.length
                    ? ((e.h.periodCount += i.length), (e.h.gapCount = e.N), I(ie, jS(e, i, !0), 2))
                    : ie.A(2);
                }
                (e.l.type == "static" && ((W = e.l.uc), e.h.presentationTimeline.Ab(W || 1 / 0)), re(ie));
              });
            }
            function CP(e, t) {
              e.h.periodCount--;
              for (var n = x(e.u.keys()), r = n.next(); !r.done; r = n.next())
                if (((r = r.value), r.startsWith(t))) {
                  var i = e.u.get(r);
                  ((Qo(i, ps, "SegmentTimeline").children = []), FS(e, r), e.u.delete(r));
                }
              e.G = e.G.filter(function (s) {
                return s !== t;
              });
            }
            function BS(e, t) {
              var n = "",
                r = "",
                i = -1,
                s = "";
              t = x(t);
              for (var o = t.next(); !o.done; o = t.next())
                ((o = o.value),
                  o.name === "Period"
                    ? (n = o.id)
                    : o.name === "AdaptationSet"
                      ? ((r = o.id), o.position !== null && (i = o.position))
                      : o.name === "Representation" && (s = o.id));
              if (((t = []), s)) t.push(n + "," + s);
              else if (r)
                for (i = x(e.u.values()), e = i.next(); !e.done; e = i.next())
                  ((e = e.value), e.sa.id === n && e.qa.id === r && e.L.id && t.push(n + "," + e.L.id));
              else if (i > -1)
                for (r = x(e.u.values()), e = r.next(); !e.done; e = r.next())
                  ((e = e.value), e.sa.id === n && e.qa.position === i && e.L.id && t.push(n + "," + e.L.id));
              return t;
            }
            function FS(e, t) {
              var n = e.u.get(t),
                r = e.o.get(t);
              r.segmentIndex && r.segmentIndex.Ya(e.h.presentationTimeline.Hb());
              try {
                var i = wS(
                  n,
                  function (s, o, u, l) {
                    return XS(e, s, o, u, l);
                  },
                  e.o,
                  !0,
                  e.g.dash.initialSegmentLimit,
                  e.za,
                  n.L.aesKey,
                  null,
                  !0,
                  e.C,
                );
                r.createSegmentIndex = function () {
                  return j(function (s) {
                    if (s.g == 1) return r.segmentIndex ? s.A(0) : I(s, i.Sc(), 3);
                    ((r.segmentIndex = s.h), re(s));
                  });
                };
              } catch (s) {
                if (
                  ((t = n.L.contentType), (t != Fe && t != "application" && t != "image") || s.code != 4002)
                )
                  throw s;
              }
            }
            function VS(e, t, n, r, i) {
              var s = t.uc;
              s || ((s = Le(r, "mediaPresentationDuration", ni)), (e.l.uc = s));
              var o = 0;
              e.h && e.h.presentationTimeline && e.V && (o = e.h.presentationTimeline.Zb());
              var u = [],
                l = o;
              r = it(r, "Period");
              for (var p = 0; p < r.length; p++) {
                var m = r[p],
                  y = r[p + 1],
                  v = Le(m, "start", ni, l),
                  w = m.attributes.id,
                  A = Le(m, "duration", ni);
                v = p == 0 && v == 0 && e.V ? o : v;
                var E = null;
                if (y) {
                  var C = Le(y, "start", ni);
                  C != null && (E = C - v + o);
                } else s != null && (E = s - v + o);
                if (
                  ((C = Lv),
                  E && A && Math.abs(E - A) > C && E > A && e.N++,
                  E == null && (E = A),
                  !(e.O !== null && w !== null && v !== null && v < e.O) ||
                    e.G.includes(w) ||
                    p + 1 == r.length)
                ) {
                  if (
                    (v !== null && (e.O === null || v > e.O) && (e.O = v),
                    (l = kP(e, t, n, { start: v, duration: E, node: m, kf: E == null || !y })),
                    u.push(l),
                    t.sa.id && E && e.za.set(t.sa.id, E),
                    E == null)
                  ) {
                    l = null;
                    break;
                  }
                  l = v + E;
                }
              }
              if (i)
                for (t = x(u), n = t.next(); !n.done; n = t.next())
                  ((n = n.value.id), e.G.includes(n) || e.G.push(n));
              else
                e.G = u.map(function (k) {
                  return k.id;
                });
              return s != null
                ? { periods: u, duration: s + o, ai: !1 }
                : { periods: u, duration: l, ai: !0 };
            }
            function MP(e) {
              var t = Array.from(e.F.keys()).filter(function (u) {
                return !e.G.includes(u);
              });
              t = x(t);
              for (var n = t.next(); !n.done; n = t.next()) {
                n = n.value;
                for (var r = !0, i = x(e.F.get(n)), s = i.next(); !s.done; s = i.next()) {
                  s = s.value;
                  var o = e.o.get(s);
                  o &&
                    (o.segmentIndex && o.segmentIndex.getNumReferences() != 0
                      ? (r = !1)
                      : (e.m && e.m.Zh(o, n), e.o.delete(s)));
                }
                r && e.F.delete(n);
              }
            }
            function RP(e, t) {
              t = new Set(
                t.map(function (i) {
                  return i.id;
                }),
              );
              for (var n = x(e.C.keys()), r = n.next(); !r.done; r = n.next())
                ((r = r.value), t.has(r) || e.C.delete(r));
            }
            function kP(e, t, n, r) {
              ((t.sa = Jg(e, r.node, null, n)),
                (t.na = r),
                (t.sa.rb = t.rb),
                t.sa.id || (t.sa.id = "__shaka_period_" + r.start));
              var i = it(r.node, "EventStream");
              ((n = t.presentationTimeline.Hb()), (i = x(i)));
              for (var s = i.next(); !s.done; s = i.next()) UP(e, r.start, r.duration, s.value, n);
              for (n = it(r.node, "SupplementalProperty"), n = x(n), i = n.next(); !i.done; i = n.next())
                ((i = i.value),
                  i.attributes.schemeIdUri == "urn:mpeg:dash:urlparam:2014" && (i = Ju(e, i)) && (t.Lb = i));
              if (
                ((n = it(r.node, "AdaptationSet")
                  .map(function (w, A) {
                    return HS(e, t, A, w);
                  })
                  .filter(ts)),
                t.Eb)
              ) {
                ((i = []), (s = x(n)));
                for (var o = s.next(); !o.done; o = s.next()) {
                  o = x(o.value.Rk);
                  for (var u = o.next(); !u.done; u = o.next()) i.push(u.value);
                }
                if (i.length != new Set(i).size) throw new H(2, 4, 4018);
              }
              for (i = new Map(), s = x(n), o = s.next(); !o.done; o = s.next())
                for (o = x(o.value.Aj), u = o.next(); !u.done; u = o.next()) {
                  var l = x(u.value);
                  ((u = l.next().value), (l = l.next().value), i.set(u, l));
                }
              if (i.size)
                for (s = null, o = x(n), u = o.next(); !u.done; u = o.next()) {
                  ((u = u.value), (l = []));
                  for (var p = x(u.streams), m = p.next(), y = {}; !m.done; y = { Ah: void 0 }, m = p.next())
                    if (((y.Ah = m.value), i.has(y.Ah.originalId))) {
                      (s ||
                        (s = it(r.node, "AdaptationSet")
                          .map(function (w, A) {
                            return HS(e, t, A, w);
                          })
                          .filter(ts)),
                        (m = x(s)));
                      for (var v = m.next(); !v.done; v = m.next())
                        (v = v.value.streams.find(
                          (function (w) {
                            return function (A) {
                              return A.originalId == w.Ah.originalId;
                            };
                          })(y),
                        )) &&
                          ((v.dependencyStream = i.get(v.originalId)),
                          (v.originalId += v.dependencyStream.originalId),
                          l.push(v));
                    }
                  l.length && u.streams.push.apply(u.streams, Y(l));
                }
              if (
                ((r = n.filter(function (w) {
                  return !w.Hh;
                })),
                (n = n.filter(function (w) {
                  return w.Hh;
                })),
                !e.g.disableIFrames)
              ) {
                for (n = x(n), i = n.next(); !i.done; i = n.next())
                  for (i = i.value, s = i.Hh.split(" "), o = x(r), u = o.next(); !u.done; u = o.next())
                    if (((u = u.value), s.includes(u.id)))
                      for (u = x(u.streams), l = u.next(); !l.done; l = u.next()) g0(l.value, i.streams);
              }
              if (
                ((n = Bd(e.g.disableAudio, r, "audio")),
                (i = Bd(e.g.disableVideo, r, "video")),
                (s = Bd(e.g.disableText, r, Fe)),
                (r = Bd(e.g.disableThumbnails, r, "image")),
                i.length === 0 && n.length === 0)
              )
                throw new H(2, 4, 4004);
              return { id: t.sa.id, audioStreams: n, videoStreams: i, textStreams: s, imageStreams: r };
            }
            function Bd(e, t, n) {
              return e || !t.length
                ? []
                : t.reduce(function (r, i) {
                    return (i.contentType != n || r.push.apply(r, Y(i.streams)), r);
                  }, []);
            }
            function HS(e, t, n, r) {
              function i(W) {
                var ie = W.attributes["dvb:fontFamily"];
                ((W = W.attributes["dvb:url"]),
                  ie && W && ((W = qt(t.qa.bb(), [W], t.Lb())), e.j.addFont(ie, W[0])));
              }
              function s(W) {
                switch (W) {
                  case 1:
                  case 5:
                  case 6:
                  case 7:
                    return "srgb";
                  case 9:
                    return "rec2020";
                  case 11:
                  case 12:
                    return "p3";
                }
              }
              function o(W) {
                switch (W) {
                  case 1:
                  case 6:
                  case 13:
                  case 14:
                  case 15:
                    return "SDR";
                  case 16:
                    return "PQ";
                  case 18:
                    return "HLG";
                }
              }
              ((t.qa = Jg(e, r, t.sa, null)), (t.qa.position = n));
              var u = !1;
              n = it(r, "Role");
              var l = n
                  .map(function (W) {
                    return W.attributes.value;
                  })
                  .filter(ts),
                p = void 0,
                m = t.qa.contentType == Fe;
              (m && (p = "subtitle"), (n = x(n)));
              for (var y = n.next(); !y.done; y = n.next()) {
                y = y.value;
                var v = y.attributes.schemeIdUri;
                if (v == null || v == "urn:mpeg:dash:role:2011")
                  switch (((y = y.attributes.value), y)) {
                    case "main":
                      u = !0;
                      break;
                    case "caption":
                    case "subtitle":
                      p = y;
                  }
              }
              var w = it(r, "EssentialProperty");
              n = null;
              var A = !1;
              ((y = null), (v = !1), (w = x(w)));
              for (var E = w.next(); !E.done; E = w.next()) {
                E = E.value;
                var C = E.attributes.schemeIdUri;
                if (C == "http://dashif.org/guidelines/trickmode") n = E.attributes.value;
                else if (C == "urn:mpeg:mpegB:cicp:TransferCharacteristics")
                  var k = o(parseInt(E.attributes.value, 10));
                else if (C == "urn:mpeg:mpegB:cicp:ColourPrimaries")
                  var R = s(parseInt(E.attributes.value, 10));
                else
                  C != "urn:mpeg:mpegB:cicp:MatrixCoefficients" &&
                    (C == "urn:mpeg:dash:ssr:2023" && e.g.dash.enableFastSwitching
                      ? (A = !0)
                      : C == "urn:dvb:dash:fontdownload:2014"
                        ? i(E)
                        : (C == "urn:mpeg:dash:urlparam:2014" && (y = Ju(e, E))) || (v = !0));
              }
              if (v) return null;
              var L = null;
              for (v = it(r, "SupplementalProperty"), v = x(v), w = v.next(); !w.done; w = v.next())
                ((w = w.value),
                  (E = w.attributes.schemeIdUri),
                  E == "http://dashif.org/guidelines/last-segment-number"
                    ? (L = parseInt(w.attributes.value, 10) - 1)
                    : E == "urn:mpeg:mpegB:cicp:TransferCharacteristics"
                      ? (k = o(parseInt(w.attributes.value, 10)))
                      : E == "urn:mpeg:mpegB:cicp:ColourPrimaries"
                        ? (R = s(parseInt(w.attributes.value, 10)))
                        : E == "urn:dvb:dash:fontdownload:2014"
                          ? i(w)
                          : E == "urn:mpeg:dash:urlparam:2014" && (y = Ju(e, w)));
              (y && (t.Lb = y), (y = it(r, "Accessibility")));
              var U = new Map(),
                G;
              for (y = x(y), v = y.next(); !v.done; v = y.next())
                if (
                  ((w = v.value),
                  (v = w.attributes.schemeIdUri),
                  (w = w.attributes.value),
                  v != "urn:scte:dash:cc:cea-608:2015" || e.g.disableText)
                )
                  if (v != "urn:scte:dash:cc:cea-708:2015" || e.g.disableText)
                    v == "urn:mpeg:dash:role:2011"
                      ? w != null && (l.push(w), w == "captions" && (p = "caption"))
                      : v == "urn:tva:metadata:cs:AudioPurposeCS:2007" &&
                        (w == "1"
                          ? (G = "visually impaired")
                          : w == "2"
                            ? (G = "hard of hearing")
                            : w == "9" && (G = "spoken subtitles"));
                  else if (((v = 1), w != null))
                    for (w = x(w.split(";")), E = w.next(); !E.done; E = w.next()) {
                      C = E.value;
                      var b = (E = void 0);
                      (C.includes("=")
                        ? ((C = C.split("=")), (E = "svc" + C[0]), (b = C[1].split(",")[0].split(":").pop()))
                        : ((E = "svc" + v), v++, (b = C)),
                        U.set(E, tt(b)));
                    }
                  else U.set("svc1", "und");
                else if (((v = 1), w != null))
                  for (w = w.split(";"), E = x(w), C = E.next(); !C.done; C = E.next()) {
                    b = C.value;
                    var B = (C = void 0);
                    (b.includes("=")
                      ? ((b = b.split("=")),
                        (C = b[0].startsWith("CC") ? b[0] : "CC" + b[0]),
                        (B = b[1] || "und"))
                      : ((C = "CC" + v), w.length == 2 ? (v += 2) : v++, (B = b)),
                      U.set(C, tt(B)));
                  }
                else U.set("CC1", "und");
              y = it(r, "ContentProtection");
              var N = fS(e.ya, y, e.g.ignoreDrmInfo, e.g.dash.keySystemsByURI);
              t.qa.encrypted = y.length > 0;
              var z = tt(t.qa.language || "und"),
                V = t.qa.label,
                X = new Map();
              if (((r = it(r, "Representation")), !e.g.ignoreSupplementalCodecs)) {
                for (y = [], v = x(r), w = v.next(); !w.done; w = v.next())
                  ((E = w.value),
                    (w = mi(E, "urn:scte:dash:scte214-extensions", "supplementalCodecs")) &&
                      ((E = Ur(E)),
                      (E.attributes.codecs = w.split(" ").join(",")),
                      E.attributes.id &&
                        (E.attributes.supplementalId = E.attributes.id + "_supplementalCodecs"),
                      y.push(E)));
                r.push.apply(r, Y(y));
              }
              if (
                ((y = r
                  .map(function (W) {
                    var ie = _P(e, t, N, p, z, V, u, l, U, W, G, L);
                    return ie &&
                      ((ie.hdr = ie.hdr || k),
                      (ie.colorGamut = ie.colorGamut || R),
                      (ie.fastSwitching = A),
                      (W = W.attributes.dependencyId))
                      ? ((ie.baseOriginalId = W), X.set(W, ie), null)
                      : ie;
                  })
                  .filter(function (W) {
                    return !!W;
                  })),
                y.length == 0 && X.size == 0)
              ) {
                if (((n = t.qa.contentType == "image"), e.g.dash.ignoreEmptyAdaptationSet || m || n))
                  return null;
                throw new H(2, 4, 4003);
              }
              if (!t.qa.contentType || t.qa.contentType == "application")
                for (
                  t.qa.contentType = WS(y[0].mimeType, y[0].codecs), m = x(y), v = m.next();
                  !v.done;
                  v = m.next()
                )
                  v.value.type = t.qa.contentType;
              for (m = t.qa.id || "__fake__" + e.Fa++, v = x(y), w = v.next(); !w.done; w = v.next()) {
                for (w = w.value, E = x(N.drmInfos), C = E.next(); !C.done; C = E.next())
                  ((C = C.value),
                    (C.keyIds =
                      C.keyIds && w.keyIds
                        ? new Set([].concat(Y(C.keyIds), Y(w.keyIds)))
                        : C.keyIds || w.keyIds));
                e.g.enableAudioGroups && (w.groupId = m);
              }
              return (
                (r = r
                  .map(function (W) {
                    return W.attributes.supplementalId || W.attributes.id;
                  })
                  .filter(ts)),
                {
                  id: m,
                  contentType: t.qa.contentType,
                  language: z,
                  Fm: u,
                  streams: y,
                  drmInfos: N.drmInfos,
                  Hh: n,
                  Rk: r,
                  Aj: X,
                }
              );
            }
            function Ju(e, t) {
              if (
                (t = wr(t, "urn:mpeg:dash:schema:urlparam:2014", "UrlQueryInfo")) &&
                Le(t, "useMPDUrlQuery", ec, !1)
              ) {
                var n = t.attributes.queryTemplate;
                if (n)
                  return function () {
                    return n == "$querypart$"
                      ? e.$
                      : n
                          .split("&")
                          .map(function (r) {
                            if (r == "$querypart$") return e.$;
                            var i = /\$query:(.*?)\$/g.exec(r);
                            if (i && i.length == 2) {
                              i = i[1];
                              var s = new lo(e.$).get(i);
                              if (s.length) return i + "=" + s[0];
                            }
                            return r;
                          })
                          .join("&");
                  };
              }
              return null;
            }
            function _P(e, t, n, r, i, s, o, u, l, p, m, y) {
              t.L = Jg(e, p, t.qa, null);
              var v = t.L.id;
              if (((e.ba = Math.min(e.ba, t.L.rb)), (e.T = e.ba > 0), !NP(t.L))) return null;
              var w = t.na.start;
              ((t.bandwidth = Le(p, "bandwidth", ri) || 0), (t.roles = u));
              var A = it(p, "SupplementalProperty"),
                E = it(p, "EssentialProperty"),
                C = it(p, "ContentProtection");
              p = null;
              var k = E.find(function (q) {
                return q.attributes.schemeIdUri == "urn:mpeg:dash:urlparam:2014";
              });
              ((k ||
                (k = A.find(function (q) {
                  return q.attributes.schemeIdUri == "urn:mpeg:dash:urlparam:2014";
                }))) &&
                (p = Ju(e, k)),
                p && (t.Lb = p),
                (k = t.L.contentType),
                (p = k == Fe || k == "application"),
                (k = k == "image"),
                C.length && (t.qa.encrypted = !0));
              try {
                var R = void 0;
                if (n.hg) {
                  var L = t.L.bb,
                    U = t.Lb,
                    G = qt(L(), [n.hg.wk], U()),
                    b = Ut(G, e.g.retryParameters);
                  R = {
                    bitsKey: 128,
                    blockCipherMode: "CBC",
                    iv: n.hg.iv,
                    firstMediaSequenceNumber: 0,
                    fetchKey: function () {
                      var q, Z, ae;
                      return j(function (ce) {
                        if (ce.g == 1) return I(ce, Qg(e, b, 6), 2);
                        if (ce.g != 3) {
                          if (((q = ce.h), !q.data || q.data.byteLength != 16)) throw new H(2, 4, 4049);
                          return (
                            (Z = { name: "AES-CBC" }),
                            (ae = R),
                            I(ce, g.crypto.subtle.importKey("raw", q.data, Z, !0, ["decrypt"]), 3)
                          );
                        }
                        ((ae.cryptoKey = ce.h), (R.fetchKey = void 0), re(ce));
                      });
                    },
                  };
                }
                if (
                  ((t.L.aesKey = R),
                  (L = function (q, Z, ae, ce) {
                    return XS(e, q, Z, ae, ce);
                  }),
                  t.L.Id)
                )
                  var B = eP(t, L, R);
                else if (t.L.Ac) B = nP(t, e.o, R);
                else if (t.L.Oc) B = wS(t, L, e.o, !!e.h, e.g.dash.initialSegmentLimit, e.za, R, y, !1, e.C);
                else {
                  var N = t.na.duration || 0,
                    z = t.L.bb,
                    V = t.L.mimeType,
                    X = t.L.codecs;
                  B = {
                    endTime: -1,
                    timeline: -1,
                    Sc: function () {
                      var q = Nc(w, N, z());
                      return (
                        q.Fb(function (Z) {
                          ((Z.mimeType = V), (Z.codecs = X));
                        }),
                        Promise.resolve(q)
                      );
                    },
                    timescale: 1,
                  };
                }
              } catch (q) {
                if ((p || k) && q.code == 4002) return null;
                throw q;
              }
              ((y = F_(e.ya, C, n, e.g.ignoreDrmInfo, e.g.dash.keySystemsByURI)),
                (y = new Set(y ? [y] : [])),
                (C = !1),
                A.some(function (q) {
                  return (
                    q.attributes.schemeIdUri == "tag:dolby.com,2018:dash:EC3_ExtensionType:2018" &&
                    q.attributes.value == "JOC"
                  );
                }) && (C = !0),
                (A = !1),
                p && (A = u.includes("forced_subtitle") || u.includes("forced-subtitle")));
              var W;
              if (
                k &&
                ((E = E.find(function (q) {
                  return [
                    "http://dashif.org/thumbnail_tile",
                    "http://dashif.org/guidelines/thumbnail_tile",
                  ].includes(q.attributes.schemeIdUri);
                })) && (W = E.attributes.value),
                !W)
              )
                return null;
              var ie;
              ((p = t.L.codecs),
                t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10") &&
                  (p.includes("hvc1.2.4.L153.B0") || p.includes("hev1.2.4.L153.B0")) &&
                  (ie = "PQ"),
                (E = t.L.id ? t.sa.id + "," + t.L.id : ""),
                e.H.length && v && e.u.set(t.sa.id + "," + v, DP(t)),
                t.L.Cf && PP(e, t.L.Cf, B, t.presentationTimeline),
                B.endTime != -1 &&
                  t.sa.id != null &&
                  t.L.id != null &&
                  ((v = e.C.get(t.sa.id))
                    ? ((v.endTime = B.endTime),
                      v.gh.includes(t.L.id) || v.gh.push(t.L.id),
                      e.C.set(t.sa.id, v))
                    : e.C.set(t.sa.id, { endTime: B.endTime, timeline: B.timeline, gh: [t.L.id] })));
              var ne =
                E && e.o.has(E)
                  ? e.o.get(E)
                  : {
                      id: e.Fa++,
                      originalId: t.L.id,
                      groupId: null,
                      createSegmentIndex: function () {
                        return Promise.resolve();
                      },
                      closeSegmentIndex: function () {
                        ne.segmentIndex && (ne.segmentIndex.release(), (ne.segmentIndex = null));
                      },
                      segmentIndex: null,
                      mimeType: t.L.mimeType,
                      codecs: p,
                      frameRate: t.L.frameRate,
                      pixelAspectRatio: t.L.pixelAspectRatio,
                      bandwidth: t.bandwidth,
                      width: t.L.width,
                      height: t.L.height,
                      kind: r,
                      encrypted: n.drmInfos.length > 0,
                      drmInfos: n.drmInfos,
                      keyIds: y,
                      language: i,
                      originalLanguage: t.qa.language,
                      label: s,
                      type: t.qa.contentType,
                      primary: o,
                      trickModeVideo: null,
                      dependencyStream: null,
                      emsgSchemeIdUris: t.L.emsgSchemeIdUris,
                      roles: u,
                      forced: A,
                      channelsCount: t.L.yf,
                      audioSamplingRate: t.L.audioSamplingRate,
                      spatialAudio: C,
                      closedCaptions: l,
                      hdr: ie,
                      colorGamut: void 0,
                      videoLayout: void 0,
                      tilesLayout: W,
                      accessibilityPurpose: m,
                      external: !1,
                      fastSwitching: !1,
                      fullMimeTypes: new Set([Rt(t.L.mimeType, t.L.codecs)]),
                      isAudioMuxedInVideo: !1,
                      baseOriginalId: null,
                    };
              return (
                (ne.createSegmentIndex = function () {
                  var q;
                  return j(function (Z) {
                    if (Z.g == 1) return ne.segmentIndex ? Z.A(0) : ((q = ne), I(Z, B.Sc(), 3));
                    ((q.segmentIndex = Z.h), re(Z));
                  });
                }),
                E &&
                  t.Eb &&
                  !e.o.has(E) &&
                  ((t = t.sa.id || ""), e.F.has(t) || e.F.set(t, []), e.o.set(E, ne), e.F.get(t).push(E)),
                ne
              );
            }
            function PP(e, t, n, r) {
              if (!e.ma.has(t)) {
                e.ma.add(t);
                var i = Le(t, "presentationTime", on) || 0,
                  s = mt(t, "UTCTiming"),
                  o;
                ((o = s && s.attributes.schemeIdUri) &&
                  ((s = s.attributes.schemeIdUri),
                  (o = !(
                    s === "urn:mpeg:dash:utc:http-ntp:2014" ||
                    s === "urn:mpeg:dash:utc:ntp:2014" ||
                    s === "urn:mpeg:dash:utc:sntp:2014"
                  ))),
                  o
                    ? (t = (Le(t, "wallClockTime", yi) || 0) * 1e3)
                    : ((t = Le(t, "wallClockTime", on) || 0), (t = fx(t))),
                  (n = new Date(t - (i / n.timescale) * 1e3)),
                  (i = n.getTime() / 1e3),
                  isNaN(i) ||
                    (r.o || r.sh(i),
                    (r = new Map().set("detail", { wallClockTime: t, programStartDate: n })),
                    (r = new we("prft", r)),
                    e.j.onEvent(r)));
              }
            }
            function DP(e) {
              function t(n) {
                return n
                  ? ((n = Ji(n)), (n.Id = null), (n.Ac = null), (n.Oc = bh(n.Oc)), (n.Cf = null), n)
                  : null;
              }
              return (
                (e = Ji(e)),
                (e.sa = t(e.sa)),
                (e.qa = t(e.qa)),
                (e.L = t(e.L)),
                e.na && ((e.na = Ji(e.na)), (e.na.node = null)),
                e
              );
            }
            function GS(e) {
              var t, n;
              return j(function (r) {
                switch (r.g) {
                  case 1:
                    return ((t = 0), ee(r, 2), I(r, Yg(e), 4));
                  case 4:
                    ((t = r.h), de(r, 3));
                    break;
                  case 2:
                    if (((n = se(r)), e.j)) {
                      if (e.g.raiseFatalErrorOnManifestUpdateRequestFailure)
                        return (e.j.onError(n), r.return());
                      ((n.severity = 1), e.j.onError(n));
                    }
                  case 3:
                    if (!e.j) return r.return();
                    (e.j.onManifestUpdated(), qg(e, t), re(r));
                }
              });
            }
            function qg(e, t) {
              if (!(e.K < 0)) {
                var n = e.K;
                (e.g.updatePeriod >= 0 && (n = e.g.updatePeriod), e.M.ka(Math.max(n - t, xr(e.Da))));
              }
            }
            function Jg(e, t, n, r) {
              ((n = n || {
                contentType: "",
                mimeType: "",
                codecs: "",
                emsgSchemeIdUris: [],
                frameRate: void 0,
                pixelAspectRatio: void 0,
                yf: null,
                audioSamplingRate: null,
                rb: 0,
                If: 1,
                encrypted: !1,
              }),
                (r = r || n.bb));
              var i = t.attributes.id,
                s = t.attributes.supplementalId,
                o = it(t, "BaseURL"),
                u,
                l = !1;
              if (e.i)
                for (var p = x(o), m = p.next(); !m.done; m = p.next()) {
                  var y = m.value;
                  ((m = y.attributes.serviceLocation), (y = _n(y)), m && y && (ta(e.i, i, m, y), (l = !0)));
                }
              (l && e.i) || (u = o.map(_n));
              var v = e.i;
              ((e = t.attributes.contentType || n.contentType),
                (p = t.attributes.mimeType || n.mimeType),
                (m = Dp([t.attributes.codecs || n.codecs]).join(",")),
                (y = Le(t, "frameRate", uC) || n.frameRate));
              var w = t.attributes.sar || n.pixelAspectRatio,
                A = LP(it(t, "InbandEventStream"), n.emsgSchemeIdUris),
                E = it(t, "AudioChannelConfiguration");
              E = bP(E) || n.yf;
              var C = Le(t, "audioSamplingRate", on) || n.audioSamplingRate;
              e || (e = WS(p, m));
              var k = mt(t, "SegmentBase"),
                R = mt(t, "SegmentTemplate"),
                L = (k && Le(k, "availabilityTimeOffset", Zl)) || 0,
                U = (R && Le(R, "availabilityTimeOffset", Zl)) || 0,
                G = (o && o.length && Le(o[0], "availabilityTimeOffset", Zl)) || 0;
              ((L = n.rb + G + L + U),
                (U = null),
                (G = mt(t, "SegmentSequenceProperties")) && (G = Le(G, "cadence", ri)) && (U = G),
                (G = t.attributes.label));
              var b = it(t, "Label");
              return (
                b && b.length && ((b = b[0]), Dt(b) && (G = Dt(b))),
                {
                  bb: function () {
                    return qt(r(), o.length ? (v && l ? Wu(v, i) : u || []) : []);
                  },
                  Id: k || n.Id,
                  Ac: mt(t, "SegmentList") || n.Ac,
                  Oc: R || n.Oc,
                  Cf: mt(t, "ProducerReferenceTime") || n.Cf,
                  width: Le(t, "width", on) || n.width,
                  height: Le(t, "height", on) || n.height,
                  contentType: e,
                  mimeType: p,
                  codecs: m,
                  frameRate: y,
                  pixelAspectRatio: w,
                  emsgSchemeIdUris: A,
                  id: s || i,
                  originalId: i,
                  language: t.attributes.lang,
                  yf: E,
                  audioSamplingRate: C,
                  rb: L,
                  hf: null,
                  If: U || n.If,
                  label: G || null,
                  encrypted: !1,
                }
              );
            }
            function LP(e, t) {
              ((t = t.slice()), (e = x(e)));
              for (var n = e.next(); !n.done; n = e.next())
                ((n = n.value.attributes.schemeIdUri), t.includes(n) || t.push(n));
              return t;
            }
            function bP(e) {
              e = x(e);
              for (var t = e.next(); !t.done; t = e.next()) {
                t = t.value;
                var n = t.attributes.schemeIdUri;
                if (n && (t = t.attributes.value))
                  switch (n) {
                    case "urn:mpeg:dash:outputChannelPositionList:2012":
                      return t.trim().split(/ +/).length;
                    case "urn:mpeg:dash:23003:3:audio_channel_configuration:2011":
                    case "urn:dts:dash:audio_channel_configuration:2012":
                      if (((t = parseInt(t, 10)), !t)) continue;
                      return t;
                    case "tag:dolby.com,2015:dash:audio_channel_configuration:2015":
                      if (
                        ((n = [2, 1, 2, 2, 2, 2, 1, 2, 2, 1, 1, 1, 1, 2, 1, 1, 2, 2]),
                        (t = parseInt(t, 16)),
                        !t)
                      )
                        continue;
                      for (var r = 0, i = 0; i < n.length; i++) t & (1 << i) && (r += n[i]);
                      if (r) return r;
                      continue;
                    case "tag:dolby.com,2014:dash:audio_channel_configuration:2011":
                    case "urn:dolby:dash:audio_channel_configuration:2011":
                      if (
                        ((n = [1, 1, 1, 1, 1, 2, 2, 1, 1, 2, 2, 2, 1, 2, 1, 1].reverse()),
                        (t = parseInt(t, 16)),
                        !t)
                      )
                        continue;
                      for (i = r = 0; i < n.length; i++) t & (1 << i) && (r += n[i]);
                      if (r) return r;
                      continue;
                    case "urn:mpeg:mpegB:cicp:ChannelConfiguration":
                      if (
                        ((n = [0, 1, 2, 3, 4, 5, 6, 8, 2, 3, 4, 7, 8, 24, 8, 12, 10, 12, 14, 12, 14]),
                        (t = parseInt(t, 10)) && t > 0 && t < n.length)
                      )
                        return n[t];
                  }
              }
              return null;
            }
            function NP(e) {
              var t = e.Id ? 1 : 0;
              return (
                (t += e.Ac ? 1 : 0),
                (t += e.Oc ? 1 : 0),
                t == 0
                  ? e.contentType == Fe || e.contentType == "application"
                  : (t != 1 && (e.Id && (e.Ac = null), (e.Oc = null)), !0)
              );
            }
            function zS(e, t, n, r) {
              var i, s, o, u, l, p, m;
              return j(function (y) {
                if (y.g == 1)
                  return (
                    (i = [kn(n)]),
                    (s = qt(t(), i)),
                    (o = Ut(s, e.g.retryParameters)),
                    (o.method = r),
                    (u = e.j.networkingEngine.request(4, o, { isPreload: e.oa() })),
                    js(e.R, u),
                    I(y, u.promise, 2)
                  );
                if (((l = y.h), r == "HEAD")) {
                  if (!l.headers || !l.headers.date) return y.return(0);
                  p = l.headers.date;
                } else p = St(l.data);
                return ((m = Date.parse(p)), isNaN(m) ? y.return(0) : y.return(m - Date.now()));
              });
            }
            function OP(e, t, n) {
              var r, i, s, o, u, l, p, m;
              return j(function (y) {
                switch (y.g) {
                  case 1:
                    ((r = n.map(function (v) {
                      return { scheme: v.attributes.schemeIdUri, value: v.attributes.value };
                    })),
                      (i = e.g.dash.clockSyncUri),
                      !r.length && i && r.push({ scheme: "urn:mpeg:dash:utc:http-head:2014", value: i }),
                      (s = x(r)),
                      (o = s.next()));
                  case 2:
                    if (o.done) {
                      y.A(4);
                      break;
                    }
                    switch (((u = o.value), ee(y, 5), (l = u.scheme), (p = u.value), l)) {
                      case "urn:mpeg:dash:utc:http-head:2014":
                      case "urn:mpeg:dash:utc:http-head:2012":
                        return y.A(7);
                      case "urn:mpeg:dash:utc:http-xsdate:2014":
                      case "urn:mpeg:dash:utc:http-iso:2014":
                      case "urn:mpeg:dash:utc:http-xsdate:2012":
                      case "urn:mpeg:dash:utc:http-iso:2012":
                        return y.A(8);
                      case "urn:mpeg:dash:utc:direct:2014":
                      case "urn:mpeg:dash:utc:direct:2012":
                        return ((m = Date.parse(p)), y.return(isNaN(m) ? 0 : m - Date.now()));
                      case "urn:mpeg:dash:utc:http-ntp:2014":
                      case "urn:mpeg:dash:utc:ntp:2014":
                      case "urn:mpeg:dash:utc:sntp:2014":
                        je("NTP UTCTiming scheme is not supported");
                        break;
                      default:
                        je("Unrecognized scheme in UTCTiming element", l);
                    }
                    y.A(9);
                    break;
                  case 7:
                    return I(y, zS(e, t, p, "HEAD"), 10);
                  case 10:
                    return y.return(y.h);
                  case 8:
                    return I(y, zS(e, t, p, "GET"), 11);
                  case 11:
                    return y.return(y.h);
                  case 9:
                    de(y, 3);
                    break;
                  case 5:
                    se(y);
                  case 3:
                    ((o = s.next()), y.A(2));
                    break;
                  case 4:
                    return (
                      je(
                        "A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!",
                      ),
                      y.return(0)
                    );
                }
              });
            }
            function UP(e, t, n, r, i) {
              var s = r.attributes.schemeIdUri || "",
                o = r.attributes.value || "",
                u = Le(r, "timescale", on) || 1,
                l = Le(r, "presentationTimeOffset", on) || 0;
              r = x(it(r, "Event"));
              for (var p = r.next(); !p.done; p = r.next()) {
                p = p.value;
                var m = Le(p, "presentationTime", on) || 0,
                  y = Le(p, "duration", on) || 0;
                ((m = Math.max((m - l) / u + t, t)),
                  (y = m + y / u),
                  n != null && ((m = Math.min(m, t + n)), (y = Math.min(y, t + n))),
                  y < i ||
                    ((p = {
                      schemeIdUri: s,
                      value: o,
                      startTime: m,
                      endTime: y,
                      id: p.attributes.id || "",
                      timescale: u,
                      eventElement: Wv(p),
                      eventNode: bh(p),
                    }),
                    e.j.onTimelineRegionAdded(p)));
              }
            }
            function XS(e, t, n, r, i) {
              var s, o, u, l;
              return j(function (p) {
                return p.g == 1
                  ? ((s = Ar),
                    (o = i ? 0 : 1),
                    (u = xu(t, n, r, e.g.retryParameters)),
                    I(p, Qg(e, u, s, { type: o }), 2))
                  : ((l = p.h), p.return(l.data));
              });
            }
            function WS(e, t) {
              return ((t = Rt(e, t)), Qa(t) ? Fe : e.split("/")[0]);
            }
            function Qg(e, t, n, r) {
              return (
                r || (r = {}),
                (r.isPreload = e.oa()),
                (t = e.j.networkingEngine.request(n, t, r)),
                js(e.R, t),
                t.promise
              );
            }
            function jP(e) {
              var t = e.l.qe;
              if (!e.l.vf || !t || !e.H.length) return [];
              var n = Date.now() / 1e3,
                r = e.H.filter(function (i) {
                  return ((i = on(i.attributes.ttl)), !i || t + i > n);
                })
                  .map(_n)
                  .filter(ts);
              return r.length ? qt(e.B, r) : [];
            }
            function KS() {
              return "";
            }
            function BP(e, t, n) {
              return function () {
                return e && t ? Wu(e, "BaseURL") : n.slice();
              };
            }
            (fe("shaka.dash.DashParser", qu),
              Rs("application/dash+xml", function () {
                return new qu();
              }),
              Rs("video/vnd.mpeg.dash.mpd", function () {
                return new qu();
              }));
            function Fd() {}
            (fe("shaka.dependencies", Fd),
              (Fd.has = function (e) {
                return Zg.has(e);
              }),
              (Fd.add = function (e, t) {
                if (!YS[e]) throw Error(e + " is not supported");
                e == $S
                  ? qe("mux.js", "mux.js is no longer used in Shaka Player.")
                  : Zg.set(e, function () {
                      return t;
                    });
              }));
            var $S = "muxjs",
              YS = { Gm: $S, ISOBoxer: "ISOBoxer" };
            Fd.Allowed = YS;
            var Zg = new Map([
              [
                "ISOBoxer",
                function () {
                  return g.ISOBoxer;
                },
              ],
            ]);
            function rt() {
              ((this.j = new xt(function () {
                return ["Oculus", "Quest"].some(function (e) {
                  return navigator.userAgent.includes(e.toLowerCase());
                })
                  ? "VR"
                  : navigator.userAgent.match(/Smart( ?|_)TV/i) || navigator.userAgent.match(/Android ?TV/i)
                    ? "TV"
                    : navigator.userAgentData
                      ? navigator.userAgentData.mobile
                        ? "MOBILE"
                        : "DESKTOP"
                      : /(?:iPhone|iPad|iPod)/.test(navigator.userAgent)
                        ? "MOBILE"
                        : navigator.userAgentData && navigator.userAgentData.platform
                          ? navigator.userAgentData.platform.toLowerCase() == "android"
                            ? "MOBILE"
                            : "DESKTOP"
                          : navigator.userAgent.includes("Android")
                            ? "MOBILE"
                            : "DESKTOP";
              })),
                (this.l = new xt(function () {
                  return navigator.vendor.includes("Apple") &&
                    (navigator.userAgent.includes("Version/") || navigator.userAgent.includes("OS/"))
                    ? "WEBKIT"
                    : navigator.userAgent.includes("Edge/")
                      ? "EDGE"
                      : navigator.userAgent.includes("Chrome/")
                        ? "CHROMIUM"
                        : navigator.userAgent.includes("Firefox/")
                          ? "GECKO"
                          : "UNKNOWN";
                })));
            }
            function oi() {
              var e = g.ManagedMediaSource || g.MediaSource;
              return !!(e && e.isTypeSupported);
            }
            ((h = rt.prototype),
              (h.hc = function () {
                return !!navigator.mediaCapabilities;
              }),
              (h.Oa = function () {
                return this.j.value();
              }),
              (h.Ha = function () {
                return this.l.value();
              }),
              (h.Fd = function () {
                return !1;
              }),
              (h.ih = function () {
                return !1;
              }),
              (h.jf = function () {
                return !1;
              }),
              (h.Ni = function () {
                return !1;
              }),
              (h.se = function () {
                return !1;
              }),
              (h.fd = function () {
                return !0;
              }),
              (h.Ib = function () {
                var e = g.ManagedSourceBuffer || g.SourceBuffer;
                return !!e && !!e.prototype && !!e.prototype.changeType;
              }),
              (h.we = function () {
                return !0;
              }),
              (h.Si = function () {
                return 0;
              }),
              (h.lc = function () {
                return Promise.resolve({ width: 1 / 0, height: 1 / 0 });
              }),
              (h.$i = function () {
                return !1;
              }),
              (h.xh = function () {
                return !1;
              }),
              (h.Wa = function (e) {
                var t = this.Oa();
                return (
                  (t === "TV" || t === "CONSOLE" || t === "CAST") &&
                    ((e.ads.customPlayheadTracker = !0),
                    (e.ads.skipPlayDetection = !0),
                    (e.ads.supportsMultipleMediaElements = !1)),
                  e
                );
              }),
              (h.Ch = function () {
                return !!g.indexedDB;
              }),
              (h.Li = function () {
                return [];
              }),
              (h.sd = function (e) {
                return g.matchMedia !== void 0 && g.matchMedia("(color-gamut: p3)").matches
                  ? e
                    ? "HLG"
                    : "PQ"
                  : "SDR";
              }),
              (h.gj = function () {
                return !1;
              }),
              (h.Bi = function () {
                return !1;
              }),
              (h.Ff = function () {
                return !1;
              }),
              (h.Of = function () {
                return !0;
              }),
              (h.Ci = function () {
                return !1;
              }),
              (h.fj = function () {
                return !0;
              }),
              (h.ed = function () {
                return !1;
              }),
              (h.Vg = function (e) {
                return e === "com.apple.fps";
              }),
              (h.Nf = function () {
                return !0;
              }),
              (h.toString = function () {
                return "Device: " + this.Nb() + " v" + this.Ba() + "; Type: " + this.Oa();
              }));
            function em() {
              (rt.call(this),
                (this.g = new xt(function () {
                  var e = navigator.userAgent.match(/Version\/(\d+)/);
                  return e || (e = navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))
                    ? parseInt(e[1], 10)
                    : null;
                })),
                (this.h = new xt(function () {
                  return /(?:iPhone|iPad|iPod)/.test(navigator.userAgent) || navigator.maxTouchPoints > 1
                    ? "xr" in navigator
                      ? "APPLE_VR"
                      : "MOBILE"
                    : "xr" in navigator
                      ? "APPLE_VR"
                      : "DESKTOP";
                })));
            }
            (J(em, rt),
              (h = em.prototype),
              (h.Ba = function () {
                return this.g.value();
              }),
              (h.Nb = function () {
                return "Apple Browser";
              }),
              (h.Oa = function () {
                return this.h.value();
              }),
              (h.Ha = function () {
                return "WEBKIT";
              }),
              (h.hc = function () {
                return !1;
              }),
              (h.Fd = function (e, t) {
                return t === "audio";
              }),
              (h.jf = function () {
                return !0;
              }),
              (h.Ni = function (e) {
                return e === "audio";
              }),
              (h.Wa = function (e) {
                return (rt.prototype.Wa.call(this, e), (e.abr.minTimeToSwitch = 0.5), e);
              }),
              (h.gj = function () {
                return !0;
              }),
              (h.Nf = function () {
                return !1;
              }),
              (navigator.vendor || "").includes("Apple") &&
                (/(?:iPhone|iPad|iPod)/.test(navigator.userAgent) ||
                  navigator.maxTouchPoints > 1 ||
                  (navigator.userAgentData &&
                    navigator.userAgentData.platform &&
                    navigator.userAgentData.platform.toLowerCase() == "macos") ||
                  (navigator.platform && navigator.platform.toLowerCase().includes("mac"))) &&
                (Kr = function () {
                  return new em();
                }));
            function tm() {
              if (!qS()) throw Error("Not a Chromecast device!");
              (rt.call(this),
                (this.h = new xt(function () {
                  var e = navigator.userAgent.match(/Chrome\/(\d+)/);
                  return e ? parseInt(e[1], 10) : null;
                })),
                (this.g = new xt(function () {
                  var e =
                    (navigator.userAgentData && navigator.userAgentData.platform) || navigator.userAgent;
                  return (
                    (e = e.toLowerCase()),
                    e.includes("android") ? JS : e.includes("fuchsia") ? QS : nm
                  );
                })));
            }
            (J(tm, rt),
              (h = tm.prototype),
              (h.Ba = function () {
                return this.h.value();
              }),
              (h.Nb = function () {
                return "Chromecast with " + this.g.value();
              }),
              (h.Oa = function () {
                return "CAST";
              }),
              (h.Ha = function () {
                return "CHROMIUM";
              }),
              (h.hc = function () {
                return rt.prototype.hc.call(this) && this.g.value() !== nm;
              }),
              (h.Ib = function () {
                return rt.prototype.Ib.call(this) && this.g.value() !== nm;
              }),
              (h.Si = function () {
                switch (this.g.value()) {
                  case JS:
                    return 0;
                  case QS:
                    return 3;
                  default:
                    return 1;
                }
              }),
              (h.lc = function () {
                var e, t, n, r, i;
                return j(function (s) {
                  switch (s.g) {
                    case 1:
                      if (
                        ((e = g.cast && cast.__platform__ && cast.__platform__.canDisplayType),
                        (t = { width: 1280, height: 720 }),
                        ee(s, 2),
                        !(n = e))
                      ) {
                        s.A(4);
                        break;
                      }
                      return I(
                        s,
                        cast.__platform__.canDisplayType(
                          'video/mp4; codecs="avc1.640028"; width=3840; height=2160',
                        ),
                        5,
                      );
                    case 5:
                      n = s.h;
                    case 4:
                      if (n) {
                        ((t.width = 3840), (t.height = 2160), s.A(6));
                        break;
                      }
                      if (!(r = e)) {
                        s.A(7);
                        break;
                      }
                      return I(
                        s,
                        cast.__platform__.canDisplayType(
                          'video/mp4; codecs="avc1.640028"; width=1920; height=1080',
                        ),
                        8,
                      );
                    case 8:
                      r = s.h;
                    case 7:
                      r && ((t.width = 1920), (t.height = 1080));
                    case 6:
                      de(s, 3);
                      break;
                    case 2:
                      ((i = se(s)), An("Failed to check canDisplayType:", i));
                    case 3:
                      return s.return(t);
                  }
                });
              }),
              (h.Wa = function (e) {
                return (rt.prototype.Wa.call(this, e), (e.streaming.stallSkip = 0), e);
              }),
              (h.Ch = function () {
                return !1;
              }),
              (h.ed = function () {
                return !0;
              }));
            function qS() {
              return (
                navigator.userAgent.includes("CrKey") && !navigator.userAgent.includes("VIZIO SmartCast")
              );
            }
            var JS = "Android",
              QS = "Fuchsia",
              nm = "Linux";
            qS() &&
              (Kr = function () {
                return new tm();
              });
            function rm() {
              rt.call(this);
              var e = this;
              ((this.i = new xt(function () {
                var t = navigator.userAgent.match(/(Chrome|Firefox)\/(\d+)/);
                return t ? parseInt(t[2], 10) : null;
              })),
                (this.g = new xt(function () {
                  return navigator.userAgent.match(/Edge?\//)
                    ? "Edge"
                    : navigator.userAgent.includes("Chrome")
                      ? "Chrome"
                      : navigator.userAgent.includes("Firefox")
                        ? "Firefox"
                        : "Unknown";
                })),
                (this.h = new xt(function () {
                  return navigator.userAgentData && navigator.userAgentData.platform
                    ? navigator.userAgentData.platform.toLowerCase() == "windows"
                    : navigator.platform
                      ? navigator.platform.toLowerCase().includes("win32")
                      : !1;
                })),
                (this.u = new xt(function () {
                  return rt.prototype.Ib.call(e)
                    ? navigator.userAgent.match(/Edge?\//)
                      ? !e.h.value()
                      : !0
                    : !1;
                })),
                (this.o = new xt(function () {
                  return navigator.userAgent.includes("sony.hbbtv.tv");
                })),
                (this.m = new xt(function () {
                  return navigator.userAgentData && navigator.userAgentData.platform
                    ? navigator.userAgentData.platform.toLowerCase() == "android"
                    : !!navigator.userAgent.includes("Android");
                })));
            }
            (J(rm, rt),
              (h = rm.prototype),
              (h.Ba = function () {
                return this.i.value();
              }),
              (h.Nb = function () {
                return this.g.value();
              }),
              (h.Fd = function (e) {
                return Ch(e) ? this.g.value() === "Edge" && this.h.value() : !1;
              }),
              (h.ih = function () {
                return this.g.value() === "Edge" && this.h.value();
              }),
              (h.jf = function () {
                return this.g.value() === "Edge" && this.h.value();
              }),
              (h.Ib = function () {
                return this.u.value();
              }),
              (h.Wa = function (e) {
                if ((rt.prototype.Wa.call(this, e), this.h.value()))
                  switch (this.g.value()) {
                    case "Firefox":
                      e.drm.keySystemsMapping = {
                        "com.microsoft.playready": "com.microsoft.playready.recommendation",
                      };
                      break;
                    case "Chrome":
                      e.drm.keySystemsMapping = {
                        "com.microsoft.playready": "com.microsoft.playready.recommendation.3000",
                        "com.microsoft.playready.recommendation":
                          "com.microsoft.playready.recommendation.3000",
                      };
                  }
                return (
                  this.m.value() &&
                    ((e.drm.defaultAudioRobustnessForWidevine = ""),
                    (e.drm.defaultVideoRobustnessForWidevine = "")),
                  e
                );
              }),
              (h.Ff = function () {
                return this.g.value() === "Edge" || this.o.value();
              }),
              (h.ed = function () {
                if (this.Ha() === "GECKO") {
                  var e = this.Ba();
                  return e !== null ? e >= 100 : rt.prototype.ed.call(this);
                }
                return rt.prototype.ed.call(this);
              }),
              (h.Vg = function (e) {
                return this.Ha() === "GECKO"
                  ? e.startsWith("com.microsoft.playready.recommendation")
                  : rt.prototype.Vg.call(this, e);
              }),
              (wh = function () {
                return new rm();
              }));
            function im() {
              rt.apply(this, arguments);
            }
            (J(im, rt),
              (h = im.prototype),
              (h.Ba = function () {
                return null;
              }),
              (h.Nb = function () {
                return "Hisense";
              }),
              (h.Oa = function () {
                return "TV";
              }),
              (h.hc = function () {
                return !1;
              }),
              (h.lc = function () {
                var e = { width: 1920, height: 1080 },
                  t = null;
                if (g.Hisense_Get4KSupportState)
                  try {
                    t = g.Hisense_Get4KSupportState();
                  } catch (n) {}
                return (
                  t == null && (t = navigator.userAgent.includes("UHD")),
                  t && ((e.width = 3840), (e.height = 2160)),
                  Promise.resolve(e)
                );
              }),
              (h.Wa = function (e) {
                return (rt.prototype.Wa.call(this, e), (e.streaming.stallSkip = 0), e);
              }),
              (navigator.userAgent.includes("Hisense") || navigator.userAgent.includes("VIDAA")) &&
                (Kr = function () {
                  return new im();
                }));
            function sm() {
              (rt.call(this),
                (this.g = new xt(function () {
                  var e = navigator.userAgent.match(/PlayStation (\d+)/);
                  return e ? parseInt(e[1], 10) : null;
                })));
            }
            (J(sm, rt),
              (h = sm.prototype),
              (h.Nb = function () {
                return "PlayStation";
              }),
              (h.Oa = function () {
                return "CONSOLE";
              }),
              (h.Ha = function () {
                return "WEBKIT";
              }),
              (h.Ba = function () {
                return this.g.value();
              }),
              (h.hc = function () {
                return !1;
              }),
              (h.fd = function () {
                return !1;
              }),
              (h.Ib = function () {
                return !1;
              }),
              (h.xh = function () {
                return this.Ba() === 4;
              }),
              (h.lc = function () {
                var e, t, n, r, i;
                return j(function (s) {
                  switch (s.g) {
                    case 1:
                      return (
                        (e = { width: 1920, height: 1080 }),
                        (t = !1),
                        ee(s, 2),
                        I(s, g.msdk.device.getDisplayInfo(), 4)
                      );
                    case 4:
                      ((n = s.h), (t = n.resolution === "4K"), de(s, 3));
                      break;
                    case 2:
                      return (se(s), ee(s, 5), I(s, g.msdk.device.getDisplayInfoImmediate(), 7));
                    case 7:
                      ((r = s.h), (t = r.resolution === "4K"), de(s, 3));
                      break;
                    case 5:
                      ((i = se(s)), je("PlayStation: Failed to get the display info:", i));
                    case 3:
                      return (t && ((e.width = 3840), (e.height = 2160)), s.return(e));
                  }
                });
              }),
              (h.Wa = function (e) {
                return (
                  rt.prototype.Wa.call(this, e),
                  this.Ba() === 4 && e.drm.preferredKeySystems.push("com.microsoft.playready"),
                  (e.streaming.clearDecodingCache = !0),
                  e
                );
              }),
              (h.Ff = function () {
                return this.Ba() === 4;
              }),
              (h.Of = function () {
                return this.Ba() !== 4;
              }),
              navigator.userAgent.includes("PlayStation") &&
                (Kr = function () {
                  return new sm();
                }));
            function om() {
              rt.call(this);
              var e = navigator.userAgent.match(/Tizen (\d+).(\d+)/);
              ((this.g = e ? parseInt(e[1], 10) : null), (this.h = e ? parseInt(e[2], 10) : null));
            }
            (J(om, rt),
              (h = om.prototype),
              (h.Ba = function () {
                return this.g;
              }),
              (h.Nb = function () {
                return "Tizen";
              }),
              (h.Ha = function () {
                return "CHROMIUM";
              }),
              (h.Oa = function () {
                return "TV";
              }),
              (h.Fd = function () {
                return !0;
              }),
              (h.se = function () {
                return this.Ba() === 3;
              }),
              (h.hc = function () {
                return !1;
              }),
              (h.fd = function () {
                var e = this.Ba();
                return e !== null ? e >= 4 : rt.prototype.fd.call(this);
              }),
              (h.Ib = function () {
                return !1;
              }),
              (h.we = function () {
                return this.g && this.h
                  ? this.g === 5
                    ? this.h >= 5
                    : this.g > 5
                  : rt.prototype.we.call(this);
              }),
              (h.lc = function () {
                var e = g.devicePixelRatio;
                e = {
                  width: g.screen.width * e > 1920 ? 3840 : 1920,
                  height: g.screen.height * e > 1080 ? 2160 : 1080,
                };
                try {
                  if (webapis.systeminfo && webapis.systeminfo.getMaxVideoResolution) {
                    var t = webapis.systeminfo.getMaxVideoResolution();
                    ((e.width = t.width), (e.height = t.height));
                  } else
                    webapis.productinfo.is8KPanelSupported && webapis.productinfo.is8KPanelSupported()
                      ? ((e.width = 7680), (e.height = 4320))
                      : webapis.productinfo.isUdPanelSupported &&
                        webapis.productinfo.isUdPanelSupported() &&
                        ((e.width = 3840), (e.height = 2160));
                } catch (n) {
                  je("Tizen: Error detecting screen size, default screen size 1920x1080.");
                }
                return Promise.resolve(e);
              }),
              (h.Wa = function (e) {
                return (
                  rt.prototype.Wa.call(this, e),
                  (e.drm.ignoreDuplicateInitData = this.Ba() !== 2),
                  this.Ba() === 3 && (e.streaming.crossBoundaryStrategy = "reset_to_encrypted"),
                  (e.streaming.shouldFixTimestampOffset = !0),
                  (e.streaming.stallSkip = 0),
                  (e.streaming.gapPadding = 2),
                  e
                );
              }),
              (h.Li = function () {
                var e = [];
                return (this.g !== null && this.g < 5 && e.push("opus"), e);
              }),
              (h.sd = function (e) {
                try {
                  if (webapis.avinfo.isHdrTvSupport()) return e ? "HLG" : "PQ";
                } catch (t) {
                  return rt.prototype.sd.call(this, e);
                }
                return "SDR";
              }),
              (h.Bi = function () {
                return !0;
              }),
              (h.Ci = function () {
                return this.Ba() === 3;
              }),
              navigator.userAgent.includes("Tizen") &&
                (Kr = function () {
                  return new om();
                }));
            function ra() {
              rt.apply(this, arguments);
            }
            (J(ra, rt),
              (ra.prototype.Ba = function () {
                return null;
              }),
              (ra.prototype.Nb = function () {
                return "Vizio";
              }),
              (ra.prototype.Oa = function () {
                return "TV";
              }),
              (ra.prototype.hc = function () {
                return !1;
              }),
              navigator.userAgent.includes("VIZIO SmartCast") &&
                (Kr = function () {
                  return new ra();
                }));
            function am() {
              (rt.call(this),
                (this.i = new xt(function () {
                  return (
                    navigator.userAgent.includes("DT_STB_BCM") || navigator.userAgent.includes("Sky_STB")
                  );
                })),
                (this.h = new xt(function () {
                  return navigator.userAgent.includes("SOPOpenBrowser");
                })),
                (this.g = new xt(function () {
                  if (navigator.userAgent.includes("DT_STB_BCM")) return 11;
                  var e = navigator.userAgent.match(/Version\/(\d+)/);
                  return e || (e = navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))
                    ? parseInt(e[1], 10)
                    : null;
                })));
            }
            (J(am, rt),
              (h = am.prototype),
              (h.Ba = function () {
                return this.g.value();
              }),
              (h.Nb = function () {
                return "WebKit STB";
              }),
              (h.Oa = function () {
                return "TV";
              }),
              (h.Ha = function () {
                return "WEBKIT";
              }),
              (h.hc = function () {
                return !1;
              }),
              (h.fd = function () {
                var e = this.g.value();
                return e !== null ? e >= 15 : !0;
              }),
              (h.Fd = function () {
                return this.h.value();
              }),
              (h.lc = function () {
                return Promise.resolve({
                  width: g.screen.width * g.devicePixelRatio,
                  height: g.screen.height * g.devicePixelRatio,
                });
              }),
              (h.Of = function () {
                return !this.i.value();
              }),
              (h.Nf = function () {
                return !1;
              }),
              (navigator.userAgent.includes("SOPOpenBrowser") ||
                navigator.userAgent.includes("DT_STB_BCM") ||
                navigator.userAgent.includes("Sky_STB") ||
                !(
                  !(navigator.vendor || "").includes("Apple") ||
                  /(?:iPhone|iPad|iPod)/.test(navigator.userAgent) ||
                  navigator.maxTouchPoints > 1 ||
                  (navigator.userAgentData &&
                    navigator.userAgentData.platform &&
                    navigator.userAgentData.platform.toLowerCase() == "macos") ||
                  (navigator.platform && navigator.platform.toLowerCase().includes("mac"))
                )) &&
                (Kr = function () {
                  return new am();
                }));
            function um() {
              rt.call(this);
              var e = this;
              ((this.h = FP()), (this.g = null));
              try {
                var t = new PalmServiceBridge();
                ((t.onservicecallback = function (n) {
                  ((n = JSON.parse(n)),
                    (e.g =
                      n.configs["tv.model.supportHDR"] ||
                      n.configs["tv.config.supportDolbyHDRContents"] ||
                      !1));
                }),
                  t.call(
                    "luna://com.webos.service.config/getConfigs",
                    JSON.stringify({
                      configNames: ["tv.model.supportHDR", "tv.config.supportDolbyHDRContents"],
                    }),
                  ));
              } catch (n) {
                je("WebOS: getConfigs call failed", n);
              }
            }
            (J(um, rt),
              (h = um.prototype),
              (h.Ba = function () {
                return this.h;
              }),
              (h.Nb = function () {
                return "WebOS";
              }),
              (h.Oa = function () {
                return "TV";
              }),
              (h.Ha = function () {
                return "CHROMIUM";
              }),
              (h.hc = function () {
                return !1;
              }),
              (h.fd = function () {
                var e = this.Ba();
                return e !== null ? e > 3 : rt.prototype.fd.call(this);
              }),
              (h.Ib = function () {
                return !1;
              }),
              (h.we = function () {
                var e = this.Ba();
                return e !== null ? e > 3 : rt.prototype.we.call(this);
              }),
              (h.lc = function () {
                var e = { width: 1920, height: 1080 };
                try {
                  var t = JSON.parse(g.PalmSystem.deviceInfo);
                  ((e.width = Math.max(1920, t.screenWidth)), (e.height = Math.max(1080, t.screenHeight)));
                } catch (n) {
                  je("WebOS: Error detecting screen size, default screen size 1920x1080.");
                }
                return Promise.resolve(e);
              }),
              (h.Wa = function (e) {
                return (
                  rt.prototype.Wa.call(this, e),
                  this.Ba() === 3 && (e.streaming.crossBoundaryStrategy = "reset"),
                  (e.streaming.shouldFixTimestampOffset = !0),
                  (e.streaming.stallSkip = 0),
                  e
                );
              }),
              (h.sd = function (e) {
                return this.g == null
                  ? (je("WebOS: getConfigs call haven't finished"), rt.prototype.sd.call(this, e))
                  : this.g
                    ? e
                      ? "HLG"
                      : "PQ"
                    : "SDR";
              }));
            function FP() {
              var e = null,
                t = navigator.userAgent.match(/Chrome\/(\d+)/);
              switch ((t && (e = parseInt(t[1], 10)), e)) {
                case 38:
                  return 3;
                case 53:
                  return 4;
                case 68:
                  return 5;
                case 79:
                  return 6;
                case 87:
                  return 22;
                case 94:
                  return 23;
                case 108:
                  return 24;
                case 120:
                  return 25;
                default:
                  return null;
              }
            }
            if (
              ((h.fj = function () {
                return !1;
              }),
              (h.ed = function () {
                var e = this.Ba();
                return e !== null ? e >= 6 : rt.prototype.ed.call(this);
              }),
              navigator.userAgent.includes("Web0S"))
            ) {
              var VP = new um();
              Kr = function () {
                return VP;
              };
            }
            function lm() {
              (rt.call(this), (this.g = navigator.userAgent.includes("Edge/")));
              var e = navigator.userAgent.match(/Edge?\/(\d+)/);
              this.h = e ? parseInt(e[1], 10) : null;
            }
            (J(lm, rt),
              (h = lm.prototype),
              (h.Ba = function () {
                return this.h;
              }),
              (h.Nb = function () {
                return "Xbox";
              }),
              (h.Oa = function () {
                return "CONSOLE";
              }),
              (h.Ha = function () {
                return this.g ? "EDGE" : "CHROMIUM";
              }),
              (h.Fd = function () {
                return !0;
              }),
              (h.ih = function () {
                return !0;
              }),
              (h.jf = function () {
                return !0;
              }),
              (h.$i = function () {
                return this.g;
              }),
              (h.lc = function () {
                var e = { width: 1920, height: 1080 },
                  t = ZS();
                if (t)
                  try {
                    var n = new t.Media.Protection.ProtectionCapabilities(),
                      r = t.Media.Protection.ProtectionCapabilityResult;
                    t = null;
                    do
                      t = n.isTypeSupported(
                        'video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',
                        "com.microsoft.playready.recommendation",
                      );
                    while (t === r.maybe);
                    t === r.probably && ((e.width = 3840), (e.height = 2160));
                  } catch (i) {
                    je("Xbox: Error detecting screen size, default screen size 1920x1080.");
                  }
                return Promise.resolve(e);
              }),
              (h.Wa = function (e) {
                return (
                  rt.prototype.Wa.call(this, e),
                  (e.drm.parseInbandPsshEnabled = this.g),
                  e.drm.preferredKeySystems.push("com.microsoft.playready"),
                  this.g && (e.streaming.gapPadding = 0.01),
                  e
                );
              }),
              (h.Ff = function () {
                return !0;
              }),
              (h.Ch = function () {
                return !1;
              }));
            function ZS() {
              var e = null;
              try {
                e = typeof Windows < "u" ? Windows : chrome.webview.hostObjects.sync.Windows;
              } catch (t) {}
              return e;
            }
            (navigator.userAgent.includes("Xbox One") || ZS() !== null) &&
              (Kr = function () {
                return new lm();
              });
            function ew(e, t, n) {
              ((this.type = e), (this.ha = t), (this.segments = n || null));
            }
            function Vd(e, t, n, r) {
              ((this.id = e), (this.name = t), (this.attributes = n), (this.value = r === void 0 ? null : r));
            }
            Vd.prototype.toString = function (e) {
              function t(i) {
                return i.name + "=" + (isNaN(Number(i.value)) ? '"' + i.value + '"' : i.value);
              }
              var n = "#" + this.name,
                r = this.attributes
                  ? this.attributes
                      .filter(function (i) {
                        return e ? !e.has(i.name) : !0;
                      })
                      .map(t)
                  : [];
              return (this.value && r.unshift(this.value), r.length > 0 && (n += ":" + r.join(",")), n);
            };
            function cm(e, t) {
              return t
                ? e.toString()
                : ((t = new Set()
                    .add("AUDIO")
                    .add("VIDEO")
                    .add("SUBTITLES")
                    .add("PATHWAY-ID")
                    .add("GROUP-ID")
                    .add("URI")),
                  e.toString(t));
            }
            function ia(e, t) {
              return (
                e.attributes.find(function (n) {
                  return n.name === t;
                }) || null
              );
            }
            function Ae(e, t, n) {
              return (e = ia(e, t)) ? e.value : n || null;
            }
            function lt(e, t) {
              if (((e = ia(e, t)), !e)) throw new H(2, 4, 4023, t);
              return e.value;
            }
            function tw(e, t, n) {
              ((n = n === void 0 ? [] : n), (this.ha = t), (this.g = e), (this.wc = n));
            }
            function Hd(e, t) {
              ((this.name = e), (this.value = t));
            }
            function Rr(e, t) {
              return e.filter(function (n) {
                return n.name == t;
              });
            }
            function nw(e, t) {
              return e.filter(function (n) {
                return lt(n, "TYPE") == t;
              });
            }
            function Jt(e, t) {
              e = x(e);
              for (var n = e.next(); !n.done; n = e.next()) if (((n = n.value), n.name === t)) return n;
              return null;
            }
            function sa(e, t, n) {
              return ((n = n === void 0 ? 0 : n), (e = Jt(e, t)) ? Number(e.value) : n);
            }
            function ys(e, t, n) {
              return t ? rw(e, [t], n) : [];
            }
            function rw(e, t, n) {
              if (!t.length) return [];
              var r = t;
              return (
                n &&
                  n.size &&
                  (r = t.map(function (i) {
                    return iw(i, n);
                  })),
                qt(e, r)
              );
            }
            function iw(e, t) {
              if (!t || !t.size) return e;
              e = String(e).replace(/%7B/g, "{").replace(/%7D/g, "}");
              var n = e.match(/{\$\w*}/g);
              if (n) {
                n = x(n);
                for (var r = n.next(); !r.done; r = n.next()) {
                  r = r.value;
                  var i = r.slice(2, r.length - 1),
                    s = t.get(i);
                  if (s) e = e.replace(r, s);
                  else throw new H(2, 4, 4039, i);
                }
              }
              return e;
            }
            function HP() {
              this.g = 0;
            }
            function dm(e, t) {
              ((t = St(t)), (t = t.replace(/\r\n|\r(?=[^\n]|$)/gm, "\n").trim()));
              var n = t.split(/\n+/m);
              if (!zP.test(n[0])) throw new H(2, 4, 4015);
              t = 0;
              for (var r = !1, i = [], s = !0, o = 0; o < n.length; o++) {
                var u = n[o],
                  l = n[o + 1];
                if ((u.startsWith("#") && !u.startsWith("#EXT")) || s) s = !1;
                else {
                  if (
                    ((u = sw(e, u)),
                    r ||
                      (aw.has(u.name)
                        ? ((t = 1), (r = !0))
                        : u.name == "EXT-X-STREAM-INF" || u.name == "EXT-X-MEDIA"
                          ? (r = !0)
                          : uw.has(u.name) && ((t = 1), (r = !0))),
                    uw.has(u.name))
                  ) {
                    if (t != 1) throw new H(2, 4, 4017);
                    ((s = e), (e = Array(Math.max(100, Math.floor((n.length - o) / 2)))), (r = 0), (u = []));
                    var p = [];
                    for (l = null; o < n.length; o++) {
                      var m = n[o];
                      m.startsWith("#EXT")
                        ? ((m = sw(s, m)),
                          aw.has(m.name)
                            ? i.push(m)
                            : m.name == "EXT-X-MAP"
                              ? (l = m)
                              : m.name == "EXT-X-PART"
                                ? p.push(m)
                                : m.name == "EXT-X-PRELOAD-HINT"
                                  ? Ae(m, "TYPE") == "PART"
                                    ? p.push(m)
                                    : Ae(m, "TYPE") == "MAP" && ((m.name = "EXT-X-MAP"), (l = m))
                                  : u.push(m))
                        : (!m.startsWith("#") || m.startsWith("#EXT")) &&
                          ((m = m.trim()),
                          l && u.push(l),
                          (u = new tw(m, u, p)),
                          r < e.length ? (e[r++] = u) : (e.push(u), r++),
                          (u = []),
                          (p = []));
                    }
                    return (
                      p.length &&
                        (l && u.push(l),
                        (n = new tw("", u, p)),
                        r < e.length ? (e[r++] = n) : (e.push(n), r++)),
                      new ew(t, i, r < e.length ? e.slice(0, r) : e)
                    );
                  }
                  (i.push(u),
                    u.name == "EXT-X-STREAM-INF" && (u.attributes.push(new Hd("URI", l)), (s = !0)));
                }
              }
              return new ew(t, i);
            }
            function sw(e, t) {
              e = e.g++;
              var n = t.match(GP);
              if (!n) throw new H(2, 4, 4016, t);
              t = n[1];
              var r = n[2];
              n = [];
              var i;
              if (r) {
                r = new go(r);
                var s;
                for (ow.lastIndex = 0, (s = qi(r, ow)) && (i = s[1]), fm.lastIndex = 0, s = qi(r, fm); s; )
                  (n.push(new Hd(s[1], s[2] || s[3])), mo(r), (s = qi(r, fm)));
              }
              return new Vd(e, t, n, i);
            }
            var GP = /^#(EXT[^:]*)(?::(.*))?$/,
              zP = /^#EXTM3U($|[ \t\n])/m,
              ow = /^([^,=]+)(?:,|$)/g,
              fm = /([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g,
              aw = new Set(
                "EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(
                  " ",
                ),
              ),
              uw = new Set(
                "EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(
                  " ",
                ),
              );
            function lw() {}
            function cw(e, t) {
              try {
                var n = Gd(e);
                return Ao({
                  uri: e,
                  originalUri: e,
                  data: n.data,
                  headers: { "content-type": n.contentType },
                  originalRequest: t,
                });
              } catch (r) {
                return ns(r);
              }
            }
            function Gd(e) {
              var t = e.split(":");
              if (t.length < 2 || t[0] != "data") throw new H(2, 1, 1004, e);
              if (((t = t.slice(1).join(":").split(",")), t.length < 2)) throw new H(2, 1, 1004, e);
              var n = t[0];
              ((e = g.decodeURIComponent(t.slice(1).join(","))), (t = n.split(";")), (n = t[0]));
              var r = !1;
              t.length > 1 && t[t.length - 1] == "base64" && ((r = !0), t.pop());
              var i;
              return (r ? (i = Sr(e)) : (i = Or(e)), { data: i, contentType: n, Ih: t });
            }
            (fe("shaka.net.DataUriPlugin", lw), (lw.parse = cw), wi("data", cw));
            function zd() {
              var e = this;
              ((this.g = this.h = null),
                (this.G = 1),
                (this.B = new Map()),
                (this.M = new Map()),
                (this.C = new Map()),
                this.C.set("video", new Map()),
                this.C.set("audio", new Map()),
                this.C.set(Fe, new Map()),
                this.C.set("image", new Map()),
                (this.dc = new Map()
                  .set("com.apple.streamingkeydelivery", function (t, n, r) {
                    return vD(e, t, n, r);
                  })
                  .set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed", function (t) {
                    var n = lt(t, "METHOD");
                    if (["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(n)) {
                      var r = "cenc";
                      n == "SAMPLE-AES" && (r = "cbcs");
                      var i = lt(t, "URI");
                      if (((n = Gd(i.split("?")[0])), (i = i.split("?")[0]), !e.I.has(i))) {
                        var s = De(n.data);
                        e.I.set(i, s);
                      }
                      ((r = gi(
                        "com.widevine.alpha",
                        r,
                        [{ initDataType: "cenc", initData: e.I.get(i) }],
                        void 0,
                        n.Ih,
                      )),
                        (t = Ae(t, "KEYID")) && r.keyIds.add(t.toLowerCase().substr(2)),
                        (t = Promise.resolve(r)));
                    } else t = Promise.resolve(null);
                    return t;
                  })
                  .set("com.microsoft.playready", function (t) {
                    var n = lt(t, "METHOD");
                    if (["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(n)) {
                      var r = "cenc";
                      (n == "SAMPLE-AES" && (r = "cbcs"),
                        (t = lt(t, "URI")),
                        (n = Gd(t.split("?")[0])),
                        (t = De(n.data)));
                      var i = new Uint8Array([
                        154, 4, 240, 121, 152, 64, 66, 134, 171, 146, 230, 91, 224, 136, 95, 149,
                      ]);
                      ((i = Sc(t, i, new Set(), 0)),
                        (r = gi(
                          "com.microsoft.playready",
                          r,
                          [{ initDataType: "cenc", initData: i }],
                          void 0,
                          n.Ih,
                        )),
                        (t = Ds(["<PLAYREADY>", hi(t), "</PLAYREADY>"].join("\n"))) &&
                          (r.licenseServerUri = Ld(t)),
                        (r = Promise.resolve(r)));
                    } else r = Promise.resolve(null);
                    return r;
                  })
                  .set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c", function (t) {
                    var n = lt(t, "METHOD");
                    if (["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(n)) {
                      var r = "cenc";
                      n == "SAMPLE-AES" && (r = "cbcs");
                      var i = lt(t, "URI");
                      if (((n = Gd(i.split("?")[0])), (i = i.split("?")[0]), !e.I.has(i))) {
                        var s = De(n.data);
                        e.I.set(i, s);
                      }
                      ((r = gi(
                        "com.huawei.wiseplay",
                        r,
                        [{ initDataType: "cenc", initData: e.I.get(i) }],
                        void 0,
                        n.Ih,
                      )),
                        (t = Ae(t, "KEYID")) && r.keyIds.add(t.toLowerCase().substr(2)),
                        (t = Promise.resolve(r)));
                    } else t = Promise.resolve(null);
                    return t;
                  })),
                (this.ob = new Set()),
                (this.i = new Map()),
                (this.l = null),
                (this.H = ""),
                (this.ab = new HP()),
                (this.N = -1),
                (this.ma = 1 / 0),
                (this.ba = this.zc = this.kb = !1),
                (this.F = new Ve(function () {
                  if (e.X && !e.g.continueLoadingWhenPaused && (e.V.Ma(e.X, "timeupdate"), e.X.paused)) {
                    e.V.Aa(e.X, "timeupdate", function () {
                      return Pw(e);
                    });
                    return;
                  }
                  Pw(e);
                })),
                (this.Fa = Jd),
                (this.m = null),
                (this.eb = 0),
                (this.o = 1 / 0),
                (this.Ua = this.Ta = this.T = 0),
                (this.$ = new Eo()),
                (this.J = new Map()),
                (this.K = new Map()),
                (this.Da = new Map()),
                (this.va = new Map()),
                (this.O = new Map()),
                (this.ya = new Map()),
                (this.za = new Map()),
                (this.yc = this.oa = !1),
                (this.ac = new Wr(5)),
                (this.j = null),
                (this.R = !0),
                (this.V = new et()),
                (this.u = this.X = null),
                (this.cc = function () {
                  return !1;
                }),
                (this.I = new Map()));
            }
            ((h = zd.prototype),
              (h.configure = function (e, t) {
                var n = this.h && e.updatePeriod != this.g.updatePeriod && e.updatePeriod >= 0;
                ((this.g = e),
                  t && (this.cc = t),
                  this.j && this.j.configure(this.g),
                  n && this.m && this.m.presentationTimeline.W() && this.F.Jb());
              }),
              (h.start = function (e, t) {
                var n = this,
                  r;
                return j(function (i) {
                  return i.g == 1
                    ? ((n.h = t), (n.oa = t.isLowLatencyMode()), I(i, xm(n, [e]).promise, 2))
                    : i.g != 3
                      ? ((r = i.h), (n.H = r.uri), I(i, KP(n, r.data), 3))
                      : i.return(n.m);
                });
              }),
              (h.stop = function () {
                this.F && (this.F.stop(), (this.F = null));
                var e = [];
                return (
                  this.$ && (e.push(this.$.destroy()), (this.$ = null)),
                  (this.g = this.h = null),
                  this.ob.clear(),
                  (this.m = null),
                  this.i.clear(),
                  this.M.clear(),
                  this.K.clear(),
                  this.B.clear(),
                  this.Da.clear(),
                  this.va.clear(),
                  this.O.clear(),
                  this.ya.clear(),
                  this.za.clear(),
                  this.I.clear(),
                  this.j && this.j.destroy(),
                  this.V && (this.V.release(), (this.V = null)),
                  Promise.all(e)
                );
              }),
              (h.update = function () {
                var e = this,
                  t,
                  n,
                  r,
                  i,
                  s,
                  o,
                  u,
                  l,
                  p,
                  m;
                return j(function (y) {
                  if (y.g == 1) {
                    if (!Cn(e)) return y.return();
                    for (
                      t = [],
                        n = Array.from(e.i.values()),
                        e.o = 1 / 0,
                        e.m.gapCount = 0,
                        r = n.filter(function (v) {
                          return !v.stream.isAudioMuxedInVideo && v.stream.segmentIndex;
                        }),
                        i = x(r),
                        s = i.next();
                      !s.done;
                      s = i.next()
                    )
                      ((o = s.value), t.push(XP(e, o)));
                    return I(y, Promise.all(t), 2);
                  }
                  for (
                    vw(
                      e,
                      r.map(function (v) {
                        return v.stream;
                      }),
                    ),
                      u = r.some(function (v) {
                        return v.be == 0;
                      }),
                      r.length && !u && ($d(e, Jd), Xd(e)),
                      u && Xd(e),
                      l = x(r),
                      p = l.next();
                    !p.done;
                    p = l.next()
                  )
                    ((m = p.value),
                      m.stream.isAudioMuxedInVideo ||
                        !m.stream.segmentIndex ||
                        qr(m.stream.segmentIndex) ||
                        e.h.disableStream(m.stream));
                  re(y);
                });
              }));
            function hm(e, t) {
              return Cn(e) ? e.C.get(t.type) : t.rf;
            }
            function XP(e, t) {
              var n,
                r,
                i,
                s,
                o,
                u,
                l,
                p,
                m,
                y,
                v,
                w,
                A,
                E,
                C,
                k,
                R,
                L,
                U,
                G,
                b,
                B,
                N,
                z,
                V,
                X,
                W,
                ie,
                ne,
                q,
                Z,
                ae,
                ce,
                be,
                Te,
                Ze;
              return j(function (Oe) {
                switch (Oe.g) {
                  case 1:
                    if (t.stream.isAudioMuxedInVideo) return Oe.return();
                    for (n = [], r = x(t.P()), i = r.next(); !i.done; i = r.next())
                      ((s = i.value),
                        (o = new Pt(s)),
                        (u = o.g),
                        t.Ue &&
                          (t.Qb >= 0 && u.add("_HLS_msn", String(t.Qb)),
                          t.Rb >= 0 && u.add("_HLS_part", String(t.Rb))),
                        t.Ve && u.add("_HLS_skip", "YES"),
                        Rv(u) && Is(o, uo(u.toString())),
                        n.push(o.toString()));
                    return (ee(Oe, 2), I(Oe, xm(e, n, !0).promise, 4));
                  case 4:
                    ((l = Oe.h), de(Oe, 3));
                    break;
                  case 2:
                    throw ((p = se(Oe)), e.h && e.h.disableStream(t.stream), p);
                  case 3:
                    if (!t.stream.segmentIndex) return Oe.return();
                    if (((m = dm(e.ab, l.data)), m.type != 1)) throw new H(2, 4, 4017);
                    return (
                      (y = l.uri),
                      y == l.originalUri || t.P().includes(y) || t.Df.push(y),
                      (v = Rr(m.ha, "EXT-X-DEFINE")),
                      (w = pm(e, v, y)),
                      (A = t.stream),
                      (E = hm(e, t)),
                      I(Oe, ww(e, m, A.mimeType, t.P, w), 5)
                    );
                  case 5:
                    for (
                      C = Oe.h,
                        k = C.keyIds,
                        R = C.drmInfos,
                        L = C.encrypted,
                        U = C.Qh,
                        A.encrypted || !L || U || (A.encrypted = !0),
                        G = function (st, Xe) {
                          return (
                            st.size === Xe.size &&
                            [].concat(Y(st)).every(function (He) {
                              return Xe.has(He);
                            })
                          );
                        },
                        G(A.keyIds, k) || ((A.keyIds = k), (A.drmInfos = R), e.h.newDrmInfo(A)),
                        b = Rw(e, m, E, w, t.P, t.type),
                        B = b.segments,
                        (N = b.bandwidth) && (A.bandwidth = N),
                        z = Uc(A),
                        V = x(B),
                        X = V.next();
                      !X.done;
                      X = V.next()
                    )
                      ((W = X.value), W.ea && (W.ea.xd = z));
                    (A.segmentIndex.ke(B, e.l.Hb()),
                      B.length &&
                        ((ie = sa(m.ha, "EXT-X-MEDIA-SEQUENCE", 0)),
                        (q = (ne = Jt(m.ha, "EXT-X-SKIP")) ? Number(Ae(ne, "SKIPPED-SEGMENTS")) : 0),
                        (Z = Tw(ie, B)),
                        (ae = Z.Qb),
                        (ce = Z.Rb),
                        (t.Qb = ae + q),
                        (t.Rb = ce),
                        (be = E.get(ie)),
                        A.segmentIndex.Ya(be)),
                      (Te = qr(A.segmentIndex)) &&
                        ((t.Wc = Te.startTime), (Ze = B[B.length - 1]), (t.Mc = Ze.endTime)),
                      Jt(m.ha, "EXT-X-ENDLIST") && (t.be = !0),
                      mm(e, m),
                      ym(e, m.ha, A.type, w, t.P),
                      re(Oe));
                }
              });
            }
            ((h.onExpirationUpdated = function () {}),
              (h.onInitialVariantChosen = function () {}),
              (h.banLocation = function (e) {
                this.j && this.j.banLocation(e);
              }),
              (h.setMediaElement = function (e) {
                this.X = e;
              }));
            function dw(e, t, n) {
              n = n === void 0 ? !1 : n;
              for (var r = e.N == -1, i = x(t), s = i.next(); !s.done; s = i.next()) {
                s = s.value;
                var o = s.stream.segmentIndex,
                  u = hm(e, s);
                if ((o = qr(o))) {
                  u = x(u);
                  for (var l = u.next(); !l.done; l = u.next()) {
                    l = x(l.value);
                    var p = l.next().value;
                    if (l.next().value == o.startTime) {
                      (r && (e.N = Math.max(e.N, p)), (s.sg = p));
                      break;
                    }
                  }
                }
              }
              if (!(e.N < 0))
                for (t = x(t), r = t.next(); !r.done; r = t.next())
                  ((r = r.value),
                    (Qu(e, r.type) || n) &&
                      (i = r.stream.segmentIndex) &&
                      ((s = e.N - r.sg),
                      s > 0 &&
                        (i.g.splice(0, s), (i = qr(i))) &&
                        ((i = -i.startTime), r.stream.segmentIndex.offset(i), fw(e, r, i))));
            }
            function WP(e, t) {
              if (e.ma == 1 / 0) {
                t = x(t);
                for (var n = t.next(); !n.done; n = t.next())
                  ((n = qr(n.value.stream.segmentIndex)),
                    n != null && n.h != null && (e.ma = Math.min(e.ma, n.h)));
              }
              if (((t = e.ma), t != 1 / 0)) {
                n = x(e.i.values());
                for (var r = n.next(); !r.done; r = n.next())
                  if (((r = r.value), !Qu(e, r.type))) {
                    var i = r.stream.segmentIndex;
                    if (i != null) {
                      var s = qr(i);
                      if (s)
                        if (s.h == null)
                          An("Missing EXT-X-PROGRAM-DATE-TIME for stream", r.P(), "Expect AV sync issues!");
                        else
                          for (fw(e, r, s.h - t - s.startTime), r = x(i), i = r.next(); !i.done; i = r.next())
                            i.value.Dh(t);
                    }
                  }
              }
            }
            function fw(e, t, n) {
              if (!(Math.abs(n) < 0.001)) {
                ((t.Wc += n), (t.Mc += n), (e = hm(e, t)));
                for (var r = x(e), i = r.next(); !i.done; i = r.next()) {
                  var s = x(i.value);
                  ((i = s.next().value), (s = s.next().value), e.set(i, s + n));
                }
                t.P();
              }
            }
            function KP(e, t) {
              var n,
                r,
                i,
                s,
                o,
                u,
                l,
                p,
                m,
                y,
                v,
                w,
                A,
                E,
                C,
                k,
                R,
                L,
                U,
                G,
                b,
                B,
                N,
                z,
                V,
                X,
                W,
                ie,
                ne,
                q,
                Z,
                ae,
                ce,
                be,
                Te,
                Ze,
                Oe,
                st,
                Xe,
                He,
                $e,
                Qe,
                Ye;
              return j(function (Ge) {
                switch (Ge.g) {
                  case 1:
                    return (
                      (n = Ot),
                      (r = dm(e.ab, t)),
                      (i = Rr(r.ha, "EXT-X-DEFINE")),
                      (s = []),
                      (o = []),
                      (u = []),
                      (e.l = new Pe(null, 0)),
                      e.l.cd(!0),
                      (l = function () {
                        return [e.H];
                      }),
                      (p = null),
                      (m = new Map()),
                      r.type == 1
                        ? ((e.R = !1),
                          (ae = Rr(r.ha, "EXT-X-DEFINE")),
                          (m = pm(e, ae, e.H)),
                          (p = n.wa),
                          (ce = ""),
                          (be = new Map()),
                          I(
                            Ge,
                            xw(
                              e,
                              e.G++,
                              m,
                              r,
                              l,
                              "",
                              p,
                              ce,
                              !0,
                              "Media Playlist",
                              null,
                              be,
                              null,
                              !1,
                              null,
                              !1,
                            ),
                            7,
                          ))
                        : (YP(e, i),
                          (y = Rr(r.ha, "EXT-X-MEDIA")),
                          (v = Rr(r.ha, "EXT-X-STREAM-INF")),
                          (w = Rr(r.ha, "EXT-X-IMAGE-STREAM-INF")),
                          (A = Rr(r.ha, "EXT-X-I-FRAME-STREAM-INF")),
                          (E = Rr(r.ha, "EXT-X-SESSION-KEY")),
                          (C = Rr(r.ha, "EXT-X-SESSION-DATA")),
                          (k = Rr(r.ha, "EXT-X-CONTENT-STEERING")),
                          JP(e, C),
                          I(Ge, QP(e, k), 4))
                    );
                  case 4:
                    if (!e.g.ignoreSupplementalCodecs) {
                      for (R = [], L = x(v), U = L.next(), G = {}; !U.done; G = { dj: void 0 }, U = L.next())
                        ((b = U.value),
                          (B = Ae(b, "SUPPLEMENTAL-CODECS")) &&
                            ((G.dj = B.split(/\s*,\s*/).map(function (We) {
                              return We.split("/")[0];
                            })),
                            (N = b.attributes.map(
                              (function (We) {
                                return function (Yt) {
                                  var Ht = Yt.name,
                                    vr = Yt.value;
                                  return (
                                    Ht == "CODECS" &&
                                      ((vr = We.dj.join(",")),
                                      (Yt = Yt.value.split(",")),
                                      Yt.length > 1 && (Yt = Bn("audio", Yt)) && (vr += "," + Yt)),
                                    new Hd(Ht, vr)
                                  );
                                };
                              })(G),
                            )),
                            R.push(new Vd(b.id, b.name, N, null))));
                      for (
                        v.push.apply(v, Y(R)), z = [], V = x(A), X = V.next(), W = {};
                        !X.done;
                        W = { ej: void 0 }, X = V.next()
                      )
                        ((ie = X.value),
                          (ne = Ae(ie, "SUPPLEMENTAL-CODECS")) &&
                            ((W.ej = ne.split(/\s*,\s*/).map(function (We) {
                              return We.split("/")[0];
                            })),
                            (q = ie.attributes.map(
                              (function (We) {
                                return function (Yt) {
                                  var Ht = Yt.name;
                                  return (
                                    (Yt = Yt.value),
                                    Ht == "CODECS" && (Yt = We.ej.join(",")),
                                    new Hd(Ht, Yt)
                                  );
                                };
                              })(W),
                            )),
                            z.push(new Vd(ie.id, ie.name, q, null))));
                      A.push.apply(A, Y(z));
                    }
                    return (qP(e, v), cD(e, y), (Z = nD(e, A)), I(Ge, rD(e, v, E, y, l, e.B, Z), 5));
                  case 5:
                    return ((s = Ge.h), (o = ZP(e, y)), I(Ge, eD(e, w, A), 6));
                  case 6:
                    ((u = Ge.h), Ge.A(3));
                    break;
                  case 7:
                    ((Te = Ge.h),
                      e.i.set(e.H, Te),
                      Te.stream &&
                        ((Ze = Uc(Te.stream)),
                        Te.stream.segmentIndex.Fb(function (We) {
                          We.ea && (We.ea.xd = Ze);
                        })),
                      (p = Te.stream.type),
                      (Oe = !0),
                      ((e.g.disableAudio && Te.type == "audio") ||
                        (e.g.disableVideo && Te.type == "video" && !Te.stream.codecs.includes(","))) &&
                        (Oe = !1),
                      Oe &&
                        s.push({
                          id: 0,
                          language: tt(ce || "und"),
                          disabledUntilTime: 0,
                          primary: !0,
                          audio: Te.type == "audio" ? Te.stream : null,
                          video: Te.type == "video" ? Te.stream : null,
                          bandwidth: Te.stream.bandwidth || 0,
                          allowedByApplication: !0,
                          allowedByKeySystem: !0,
                          decodingInfos: [],
                        }));
                  case 3:
                    if (!e.h) throw new H(2, 7, 7001);
                    if (
                      (Ew(e, r),
                      r.type == 1 &&
                        (Cn(e) && (Iw(e, r), (st = e.o), e.F.ka(st)),
                        (Xe = Array.from(e.i.values())),
                        gm(e, Xe),
                        Xd(e),
                        ym(e, r.ha, p, m, l)),
                      (e.m = {
                        presentationTimeline: e.l,
                        variants: s,
                        textStreams: o,
                        imageStreams: u,
                        offlineSessionIds: [],
                        sequenceMode: e.g.hls.sequenceMode,
                        ignoreManifestTimestampsInSegmentsMode:
                          e.g.hls.ignoreManifestTimestampsInSegmentsMode,
                        type: "HLS",
                        serviceDescription: null,
                        nextUrl: null,
                        periodCount: 1,
                        gapCount: 0,
                        isLowLatency: !1,
                        startTime: e.u,
                      }),
                      e.ba || !e.g.hls.disableCodecGuessing)
                    ) {
                      Ge.A(8);
                      break;
                    }
                    for (He = [], $e = x(e.m.variants), Qe = $e.next(); !Qe.done; Qe = $e.next())
                      ((Ye = Qe.value),
                        Ye.audio && Ye.audio.codecs === "" && He.push(Ye.audio.createSegmentIndex()),
                        Ye.video && Ye.video.codecs === "" && He.push(Ye.video.createSegmentIndex()));
                    return I(Ge, Promise.all(He), 8);
                  case 8:
                    (e.h.makeTextStreamsForClosedCaptions(e.m), re(Ge));
                }
              });
            }
            function $P(e, t) {
              var n, r, i, s, o, u, l, p, m, y, v, w, A, E, C, k;
              return j(function (R) {
                if (R.g == 1)
                  return (
                    (n = Pp(e.g.hls.mediaPlaylistFullMimeType)),
                    t.length
                      ? ((r = kw(e, t)),
                        (i = r.segment),
                        (s = r.segmentIndex),
                        (o = i.P()),
                        (u = Bo(o[0])) && (l = Tm.get(u))
                          ? R.return(Pp(l))
                          : I(R, Promise.all([hw(e, i.ea, 0), hw(e, i, s)]), 2))
                      : R.return(n)
                  );
                if (
                  ((p = R.h),
                  (m = p[1].mimeType),
                  (y = p[0].data),
                  (v = p[1].data),
                  (w = "mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" ")),
                  (A = ["audio/mp4", "video/mp4", "video/iso.segment"]),
                  (E = i.ea || A.includes(m)),
                  !E && Lo(De(v)))
                ) {
                  var L = v,
                    U = e.g.disableAudio,
                    G = e.g.disableVideo,
                    b = e.g.disableText,
                    B = De(L),
                    N = new ft().parse(B),
                    z = N.Yd();
                  B = N.Ng();
                  var V = [],
                    X = !1,
                    W = !1;
                  if (!U)
                    switch (z.audio) {
                      case "aac":
                      case "aac-loas":
                        N.ub().length && (V.push("mp4a.40.2"), (X = !0));
                        break;
                      case "mp3":
                        N.ub().length && (V.push("mp4a.40.34"), (X = !0));
                        break;
                      case "ac3":
                        N.ub().length && (V.push("ac-3"), (X = !0));
                        break;
                      case "ec3":
                        N.ub().length && (V.push("ec-3"), (X = !0));
                        break;
                      case "opus":
                        N.ub().length && (V.push("opus"), (X = !0));
                    }
                  if (!G)
                    switch (z.video) {
                      case "avc":
                        (B.codec ? V.push(B.codec) : V.push("avc1.42E01E"), (W = !0));
                        break;
                      case "hvc":
                        (B.codec ? V.push(B.codec) : V.push("hvc1.1.6.L93.90"), (W = !0));
                        break;
                      case "av1":
                        (V.push("av01.0.01M.08"), (W = !0));
                    }
                  if (V.length) {
                    if (((U = X && !W), (G = new Map()), W && !b)) {
                      for (
                        b = new $r("video/mp2t"), b.Af(L), L = x(b.Zf()), W = L.next();
                        !W.done;
                        W = L.next()
                      )
                        ((W = W.value), G.set(W, W));
                      b.Pd();
                    }
                    B = {
                      type: U ? "audio" : "video",
                      mimeType: "video/mp2t",
                      codecs: V.join(", "),
                      language: null,
                      height: B.height,
                      width: B.width,
                      channelCount: null,
                      sampleRate: null,
                      closedCaptions: G,
                      ze: null,
                      colorGamut: null,
                      frameRate: B.frameRate,
                      timescale: null,
                    };
                  } else B = null;
                  if ((C = B)) return R.return(C);
                } else if ((E || w.includes(u)) && (k = tR(y, v, e.g.disableText))) return R.return(k);
                return m ? R.return(Pp(m)) : R.return(n);
              });
            }
            function hw(e, t, n) {
              var r, i, s, o, u, l;
              return j(function (p) {
                switch (p.g) {
                  case 1:
                    return t
                      ? ((r = Ar),
                        (i = xu(t.P(), t.Jc(), t.Hc(), e.g.retryParameters)),
                        (s = t instanceof Ce ? 1 : 0),
                        I(p, Oi(e, i, r, { type: s }).promise, 2))
                      : p.return({ mimeType: null, data: null });
                  case 2:
                    if (((o = p.h), (u = o.data), !t.aesKey)) {
                      p.A(3);
                      break;
                    }
                    return I(p, Lp(u, t.aesKey, n), 4);
                  case 4:
                    u = p.h;
                  case 3:
                    return (
                      t instanceof Ce ? t.ue(u, !0) : t.ue(u),
                      (l = o.headers["content-type"]) && (l = l.split(";")[0].toLowerCase()),
                      p.return({ mimeType: l, data: u })
                    );
                }
              });
            }
            function Xd(e) {
              if (Cn(e)) {
                if (e.Fa == Sm) {
                  for (var t = 1 / 0, n = 1 / 0, r = x(e.i.values()), i = r.next(); !i.done; i = r.next())
                    ((i = i.value),
                      i.stream.segmentIndex &&
                        i.stream.type != "text" &&
                        !i.stream.isAudioMuxedInVideo &&
                        ((t = Math.min(t, i.Mc)), (n = Math.min(n, i.Wc))));
                  ((t = t - n || 0),
                    isNaN(e.g.availabilityWindowOverride) || (t = e.g.availabilityWindowOverride),
                    e.l.Lf(t));
                }
              } else e.l.Ab(yw(e));
              if (!e.l.o)
                for (t = x(e.i.values()), n = t.next(); !n.done; n = t.next())
                  ((n = n.value),
                    !n.stream.segmentIndex ||
                      (n.type != "audio" && n.type != "video") ||
                      ((n = qr(n.stream.segmentIndex)) && n.h && e.l.sh(n.h)));
              e.l.qf();
            }
            function YP(e, t) {
              var n = new Pt(e.H).g;
              t = x(t);
              for (var r = t.next(); !r.done; r = t.next()) {
                var i = r.value;
                r = Ae(i, "NAME");
                var s = Ae(i, "VALUE");
                ((i = Ae(i, "QUERYPARAM")),
                  r && s && (e.B.has(r) || e.B.set(r, s)),
                  i && (r = n.get(i)[0]) && !e.B.has(r) && e.B.set(i, r));
              }
            }
            function pm(e, t, n) {
              n = new Pt(n).g;
              var r = new Map();
              t = x(t);
              for (var i = t.next(); !i.done; i = t.next()) {
                var s = i.value,
                  o = Ae(s, "NAME"),
                  u = Ae(s, "VALUE");
                ((i = Ae(s, "QUERYPARAM")),
                  (s = Ae(s, "IMPORT")),
                  o && u && (r.has(o) || r.set(o, u)),
                  i && (o = n.get(i)[0]) && !r.has(o) && r.set(i, o),
                  s && (i = e.B.get(s)) && r.set(s, i));
              }
              return r;
            }
            function qP(e, t) {
              t = x(t);
              for (var n = t.next(); !n.done; n = t.next()) {
                var r = n.value,
                  i = Ae(r, "AUDIO");
                n = Ae(r, "VIDEO");
                var s = Ae(r, "SUBTITLES");
                if (((r = pw(e, r)), s)) {
                  var o = Bn(Fe, r);
                  (e.K.set(s, o), Nr(r, o));
                }
                (i && ((s = Bn("audio", r)), s || (s = e.g.hls.defaultAudioCodec), e.K.set(i, s)),
                  n && ((i = Bn("video", r)), i || (i = e.g.hls.defaultVideoCodec), e.K.set(n, i)));
              }
            }
            function JP(e, t) {
              t = x(t);
              for (var n = t.next(); !n.done; n = t.next()) {
                var r = n.value,
                  i = Ae(r, "DATA-ID");
                n = Ae(r, "URI");
                var s = Ae(r, "LANGUAGE");
                ((r = Ae(r, "VALUE")),
                  (i = new Map().set("id", i)),
                  n && i.set("uri", ys([e.H], n, e.B)[0]),
                  s && i.set("language", s),
                  r && i.set("value", r),
                  (n = new we("sessiondata", i)),
                  e.h && e.h.onEvent(n));
              }
            }
            function QP(e, t) {
              var n, r, i, s, o, u;
              return j(function (l) {
                if (!e.h || !e.g) return l.return();
                for (r = x(t), i = r.next(); !i.done; i = r.next())
                  if (((s = i.value), (o = Ae(s, "PATHWAY-ID")), (u = Ae(s, "SERVER-URI")), o && u)) {
                    ((e.j = new ea(e.h)),
                      e.j.configure(e.g),
                      (e.j.i = [e.H]),
                      e.j.setManifestType("HLS"),
                      (e.j.h = o),
                      (n = Xu(e.j, u)));
                    break;
                  }
                return I(l, n, 0);
              });
            }
            function ZP(e, t) {
              var n = nw(t, "SUBTITLES"),
                r = {};
              t = x(n);
              for (var i = t.next(); !i.done; i = t.next()) {
                i = i.value;
                var s = cm(i, !e.j);
                r[s] ? r[s].push(i) : (r[s] = [i]);
              }
              if (((t = []), !e.g.disableText))
                for (var o in r)
                  try {
                    t.push(gw(e, r[o], new Map()).stream);
                  } catch (u) {
                    if (!e.g.hls.ignoreTextStreamFailures) throw u;
                  }
              for (o = x(n), n = o.next(); !n.done; n = o.next())
                if (((r = lt(n.value, "GROUP-ID")), (n = e.K.get(r)) && (r = e.M.get(r))))
                  for (r = x(r), i = r.next(); !i.done; i = r.next())
                    ((i = i.value),
                      (i.stream.codecs = n),
                      (i.stream.mimeType = vm(Fe, n) || Kd(Fe)),
                      oa(i.stream));
              return t.filter(function (u) {
                return u;
              });
            }
            function oa(e) {
              var t = new Set([Rt(e.mimeType, e.codecs)]);
              (e.segmentIndex &&
                e.segmentIndex.Fb(function (n) {
                  n.mimeType && t.add(Rt(n.mimeType, e.codecs));
                }),
                (e.fullMimeTypes = t));
            }
            function eD(e, t, n) {
              var r, i;
              return j(function (s) {
                return s.g == 1
                  ? ((r = t
                      .map(function (o) {
                        var u, l;
                        return j(function (p) {
                          if (p.g == 1)
                            return e.g.disableThumbnails ? p.return(null) : (ee(p, 2), I(p, dD(e, o), 4));
                          if (p.g != 2) return ((u = p.h), p.return(u.stream));
                          if (((l = se(p)), e.g.hls.ignoreImageStreamFailures)) return p.return(null);
                          throw l;
                        });
                      })
                      .concat(
                        n.map(function (o) {
                          if (e.g.disableThumbnails) return null;
                          try {
                            var u = mw(e, o);
                            return u.stream.type !== "image" ? null : u.stream;
                          } catch (l) {
                            if (e.g.hls.ignoreImageStreamFailures) return null;
                            throw l;
                          }
                        }),
                      )),
                    I(s, Promise.all(r), 2))
                  : ((i = s.h),
                    s.return(
                      i.filter(function (o) {
                        return o;
                      }),
                    ));
              });
            }
            function tD(e, t, n) {
              t = t.filter(function (u) {
                var l = Ae(u, "URI") || "";
                return ((u = Ae(u, "TYPE")), u != "SUBTITLES" && (l != "" || u == "AUDIO"));
              });
              var r = {};
              t = x(t);
              for (var i = t.next(); !i.done; i = t.next()) {
                i = i.value;
                var s = cm(i, !e.j);
                r[s] ? r[s].push(i) : (r[s] = [i]);
              }
              for (var o in r) gw(e, r[o], n, !1);
            }
            function nD(e, t) {
              return t
                .map(function (n) {
                  return ((n = mw(e, n)), n.stream.type !== "video" ? null : n.stream);
                })
                .filter(function (n) {
                  return n;
                });
            }
            function rD(e, t, n, r, i, s, o) {
              var u,
                l,
                p,
                m,
                y,
                v,
                w,
                A,
                E,
                C,
                k,
                R,
                L,
                U,
                G,
                b,
                B,
                N,
                z,
                V,
                X,
                W,
                ie,
                ne,
                q,
                Z,
                ae,
                ce,
                be,
                Te,
                Ze,
                Oe,
                st,
                Xe,
                He,
                $e;
              return j(function (Qe) {
                switch (Qe.g) {
                  case 1:
                    if (((u = []), (l = new Set()), e.g.ignoreDrmInfo || !(n.length > 0))) {
                      Qe.A(2);
                      break;
                    }
                    ((p = x(n)), (m = p.next()));
                  case 3:
                    if (m.done) {
                      Qe.A(2);
                      break;
                    }
                    if (
                      ((y = m.value),
                      (v = lt(y, "METHOD")),
                      (w = Ae(y, "KEYFORMAT") || "identity"),
                      (A = null),
                      v == "NONE")
                    ) {
                      Qe.A(4);
                      break;
                    }
                    if (Yd(v)) {
                      ((E = ys(i(), lt(y, "URI"), s)),
                        (C = E.sort().join("")),
                        e.O.has(C) ||
                          ((k = Ut(E, e.g.retryParameters)), (R = Oi(e, k, 6).promise), e.O.set(C, R)),
                        Qe.A(4));
                      break;
                    }
                    if (w == "identity") return I(Qe, Dw(e, y, "", i, null, s), 12);
                    if (((L = e.dc.get(w)), !L)) {
                      ((U = null), Qe.A(10));
                      break;
                    }
                    return I(Qe, L(y, "", null), 11);
                  case 11:
                    U = Qe.h;
                  case 10:
                    ((A = U), Qe.A(6));
                    break;
                  case 12:
                    A = Qe.h;
                  case 6:
                    if (A) {
                      if (A.keyIds)
                        for (G = x(A.keyIds), b = G.next(); !b.done; b = G.next()) ((B = b.value), l.add(B));
                      u.push(A);
                    }
                  case 4:
                    ((m = p.next()), Qe.A(3));
                    break;
                  case 2:
                    for (N = {}, z = x(t), V = z.next(); !V.done; V = z.next())
                      ((X = V.value), (W = cm(X, !e.j)), N[W] ? N[W].push(X) : (N[W] = [X]));
                    ie = [];
                    for (ne in N)
                      ((q = N[ne]),
                        (Z = q[0]),
                        (ae = Ae(Z, "FRAME-RATE")),
                        (ce = Number(lt(Z, "BANDWIDTH")) || Number(Ae(Z, "AVERAGE-BANDWIDTH"))),
                        (be = Ae(Z, "RESOLUTION")),
                        (Te = x(be ? be.split("x") : [null, null])),
                        (Ze = Te.next().value),
                        (Oe = Te.next().value),
                        (st = Ae(Z, "VIDEO-RANGE")),
                        (Xe = Ae(Z, "REQ-VIDEO-LAYOUT")) &&
                          Xe.includes(",") &&
                          ((He = Xe.split(",").filter(function (Ye) {
                            return Ye == "CH-STEREO" || Ye == "CH-MONO";
                          })),
                          (Xe = He[0])),
                        (Xe = Xe || "CH-MONO"),
                        ($e = iD(e, q, r)),
                        ie.push.apply(ie, Y(lD(e, $e.audio, $e.video, ce, Ze, Oe, ae, st, Xe, u, l, o))));
                    return Qe.return(
                      ie.filter(function (Ye) {
                        return Ye != null;
                      }),
                    );
                }
              });
            }
            function iD(e, t, n) {
              for (
                var r = { audio: [], video: [] },
                  i = new Map(),
                  s = [],
                  o = !1,
                  u = !1,
                  l = x(t),
                  p = l.next();
                !p.done;
                p = l.next()
              ) {
                var m = p.value;
                p = Ae(m, "AUDIO");
                var y = Ae(m, "VIDEO"),
                  v = p || y;
                v &&
                  (s.includes(v) || s.push(v),
                  (m = Ae(m, "PATHWAY-ID")) && i.set(v, m),
                  p ? (o = !0) : y && (u = !0));
              }
              (s.length &&
                n.length &&
                ((n = n.filter(function (A) {
                  return s.includes(lt(A, "GROUP-ID"));
                })),
                tD(e, n, i)),
                (n = (i = s.sort().join(",")) && e.M.has(i) ? e.M.get(i) : []),
                o ? r.audio.push.apply(r.audio, Y(n)) : u && r.video.push.apply(r.video, Y(n)),
                (u = !1));
              var w = t.map(function (A) {
                return lt(A, "URI");
              });
              return (
                (o = r.audio.find(function (A) {
                  return (
                    A &&
                    A.P().find(function (E) {
                      return w.includes(E);
                    })
                  );
                })),
                (n = pw(e, t[0])),
                (l = Bn("video", n)),
                (p = Bn("audio", n)) && !l
                  ? ((o = "audio"),
                    (u =
                      r.audio.length > 0 &&
                      !r.audio.some(function (A) {
                        return A.stream.isAudioMuxedInVideo;
                      })))
                  : !r.audio.length && !r.video.length && p && l
                    ? ((o = "video"), (n = [[l, p].join()]))
                    : r.audio.length && o
                      ? ((o = "audio"), (u = !0))
                      : (o = r.video.length && !r.audio.length ? "audio" : "video"),
                u ||
                  ((t = fD(e, t, n, o)),
                  i && e.g.enableAudioGroups && (t.stream.groupId = i),
                  t.stream.type == "audio" &&
                    o === "audio" &&
                    r.audio.some(function (A) {
                      return A.stream.isAudioMuxedInVideo;
                    }) &&
                    ((e = r.audio[0].stream),
                    (t.stream.language = e.language),
                    (t.stream.channelsCount = e.channelsCount),
                    (t.stream.label = e.label),
                    (t.stream.audioSamplingRate = e.audioSamplingRate),
                    (t.stream.originalId = e.originalId),
                    (t.stream.originalLanguage = e.originalLanguage)),
                  (r[t.stream.type] = [t])),
                r
              );
            }
            function pw(e, t) {
              return (
                (t = Ae(t, "CODECS") || ""),
                (e.ba = t.length > 0),
                e.ba ||
                  e.g.hls.disableCodecGuessing ||
                  ((t = []),
                  e.g.disableVideo || t.push(e.g.hls.defaultVideoCodec),
                  e.g.disableAudio || t.push(e.g.hls.defaultAudioCodec),
                  (t = t.join(","))),
                Dp(t.split(/\s*,\s*/))
              );
            }
            function sD(e) {
              return (e = Ae(e, "CHANNELS")) ? parseInt(e.split("/")[0], 10) : null;
            }
            function oD(e) {
              return (e = Ae(e, "SAMPLE-RATE")) ? parseInt(e, 10) : null;
            }
            function aD(e) {
              return (
                (e = Ae(e, "CHANNELS")),
                e ? ((e = e.split("/")), e.length != 2 ? !1 : e[1] === "JOC" || e[1].includes("ATMOS")) : !1
              );
            }
            function uD(e) {
              return ((e = lt(e, "TYPE").toLowerCase()), e == "subtitles" && (e = Fe), e);
            }
            function lD(e, t, n, r, i, s, o, u, l, p, m, y) {
              for (var v = x(n), w = v.next(); !w.done; w = v.next()) _w(w.value.stream, i, s, o, u, l, null);
              for (
                i = e.g.disableVideo,
                  (!n.length || i) && (n = [null]),
                  i &&
                    (t = t.filter(function (k) {
                      return !k.stream.isAudioMuxedInVideo;
                    })),
                  i = e.g.disableAudio,
                  (!t.length || i) && (t = [null]),
                  i = [],
                  t = x(t),
                  s = t.next();
                !s.done;
                s = t.next()
              )
                for (s = s.value, o = x(n), u = o.next(); !u.done; u = o.next()) {
                  var A = u.value;
                  ((u = s ? s.stream : null) && ((u.drmInfos = p), (u.keyIds = m)),
                    (l = A ? A.stream : null) &&
                      ((l.drmInfos = p), (l.keyIds = m), e.g.disableIFrames || g0(l, y)),
                    l && !u && (l.bandwidth = r),
                    !l && u && (u.bandwidth = r),
                    (v = s ? s.stream.drmInfos : null),
                    (w = A ? A.stream.drmInfos : null),
                    (A = A ? A.P().sort().join(",") : ""));
                  var E = s ? s.P().sort().join(",") : "",
                    C = [];
                  (u && u.codecs && C.push(u.codecs),
                    l && l.codecs && C.push(l.codecs),
                    (A = [A, E, C.sort()].join("-")),
                    (u && l && !_v(v, w)) ||
                      e.ob.has(A) ||
                      ((u = {
                        id: e.G++,
                        language: u ? u.language : "und",
                        disabledUntilTime: 0,
                        primary: (!!u && u.primary) || (!!l && l.primary),
                        audio: u,
                        video: l,
                        bandwidth: r,
                        allowedByApplication: !0,
                        allowedByKeySystem: !0,
                        decodingInfos: [],
                      }),
                      i.push(u),
                      e.ob.add(A)));
                }
              return i;
            }
            function cD(e, t) {
              ((t = nw(t, "CLOSED-CAPTIONS")), (e.R = t.length == 0), (t = x(t)));
              for (var n = t.next(); !n.done; n = t.next()) {
                var r = n.value,
                  i = Ae(r, "LANGUAGE");
                ((n = tt(i || "und")),
                  i || ((i = Ae(r, "NAME")) && (n = i)),
                  (i = lt(r, "GROUP-ID")),
                  (r = lt(r, "INSTREAM-ID").replace("SERVICE", "svc")),
                  e.J.get(i) || e.J.set(i, new Map()),
                  e.J.get(i).set(r, n));
              }
            }
            function gw(e, t, n, r) {
              r = r === void 0 ? !0 : r;
              for (
                var i = [], s = [], o = new Map(), u = x(t), l = u.next(), p = {};
                !l.done;
                p = { oi: void 0 }, l = u.next()
              ) {
                ((l = l.value),
                  (p.oi = ++e.G),
                  (p = (function (E) {
                    return function () {
                      return "shaka://hls-muxed" + E.oi;
                    };
                  })(p)));
                var m = r ? lt(l, "URI") : Ae(l, "URI") || p();
                ((p = lt(l, "GROUP-ID")),
                  i.push(m),
                  s.push(p),
                  o.set(p, m),
                  (l = Ae(l, "PATHWAY-ID")) && n.set(p, l));
              }
              if (((r = s.sort().join(",")), (l = t[0]), (t = ""), (u = uD(l)), u == Fe))
                t = Ae(l, "CODECS") || "";
              else
                for (s = x(s), p = s.next(); !p.done; p = s.next())
                  if (((p = p.value), e.K.has(p))) {
                    t = e.K.get(p);
                    break;
                  }
              if (((s = i.sort().join(",")), u == "audio" && r && (s += r), e.i.has(s))) return e.i.get(s);
              if (((p = e.G++), e.j))
                for (o = x(o), m = o.next(); !m.done; m = o.next()) {
                  var y = x(m.value);
                  ((m = y.next().value), (y = y.next().value), (m = n.get(m)) && ta(e.j, p, m, y));
                }
              ((n = Ae(l, "LANGUAGE")),
                (o = Ae(l, "NAME")),
                (m = Ae(l, "DEFAULT") == "YES"),
                (y = u == "audio" ? sD(l) : null));
              var v = u == "audio" ? aD(l) : !1,
                w = Ae(l, "CHARACTERISTICS"),
                A = Ae(l, "FORCED") == "YES";
              return (
                (l = u == "audio" ? oD(l) : null),
                (i = Wd(e, p, i, t, u, n, m, o, y, null, w, A, l, v)),
                i.stream && e.g.enableAudioGroups && (i.stream.groupId = r),
                e.M.has(r) ? e.M.get(r).push(i) : e.M.set(r, [i]),
                e.i.set(s, i),
                i
              );
            }
            function dD(e, t) {
              var n, r, i, s, o, u, l, p, m, y;
              return j(function (v) {
                return v.g == 1
                  ? ((n = lt(t, "URI")),
                    (r = Ae(t, "CODECS", "jpeg") || ""),
                    e.i.has(n)
                      ? v.return(e.i.get(n))
                      : ((i = Ae(t, "LANGUAGE")),
                        (s = Ae(t, "NAME")),
                        (o = Ae(t, "CHARACTERISTICS")),
                        (u = Wd(e, e.G++, [n], r, "image", i, !1, s, null, null, o, !1, null, !1)),
                        (l = Ae(t, "RESOLUTION")) ? I(v, u.stream.createSegmentIndex(), 3) : v.A(2)))
                  : (v.g != 2 &&
                      ((p = qr(u.stream.segmentIndex)),
                      (m = p.tilesLayout) &&
                        ((u.stream.width = Number(l.split("x")[0]) * Number(m.split("x")[0])),
                        (u.stream.height = Number(l.split("x")[1]) * Number(m.split("x")[1]))),
                      u.stream.closeSegmentIndex()),
                    (y = Ae(t, "BANDWIDTH")) && (u.stream.bandwidth = Number(y)),
                    e.i.set(n, u),
                    v.return(u));
              });
            }
            function mw(e, t) {
              var n = "video",
                r = lt(t, "URI"),
                i = Ae(t, "CODECS") || "";
              if ((i == "mjpg" && (n = "image"), e.i.has(r))) return e.i.get(r);
              var s = Ae(t, "LANGUAGE"),
                o = Ae(t, "NAME"),
                u = Ae(t, "CHARACTERISTICS");
              return (
                (n = Wd(e, e.G++, [r], i, n, s, !1, o, null, null, u, !1, null, !1)),
                (i = Ae(t, "RESOLUTION")),
                (s = x(i ? i.split("x") : [null, null])),
                (i = s.next().value),
                (s = s.next().value),
                (n.stream.width = Number(i) || void 0),
                (n.stream.height = Number(s) || void 0),
                (t = Ae(t, "BANDWIDTH")) && (n.stream.bandwidth = Number(t)),
                e.i.set(r, n),
                n
              );
            }
            function fD(e, t, n, r) {
              for (var i = e.G++, s = [], o = x(t), u = o.next(); !u.done; u = o.next()) {
                var l = u.value;
                ((u = lt(l, "URI")), (l = Ae(l, "PATHWAY-ID")), e.j && l && ta(e.j, i, l, u), s.push(u));
              }
              if (((o = s.sort().join(",") + n.sort().join(",")), e.i.has(o))) return e.i.get(o);
              u = s.join(",");
              e: {
                if (((t = Ae(t[0], "CLOSED-CAPTIONS")), r == "video")) {
                  if (e.g.disableText) {
                    ((e.R = !1), (t = null));
                    break e;
                  }
                  if (t) {
                    if (t != "NONE") {
                      t = e.J.get(t);
                      break e;
                    }
                    e.R = !1;
                  } else if (!t && e.J.size)
                    for (t = x(e.J.keys()), t = t.next(); !t.done; t = t.next()) {
                      t = e.J.get(t.value);
                      break e;
                    }
                }
                t = null;
              }
              return (
                (n = ho(r, n)),
                (r = Wd(e, i, s, n, r, null, !1, u, null, t, null, !1, null, !1)),
                e.i.set(o, r),
                r
              );
            }
            function Wd(e, t, n, r, i, s, o, u, l, p, m, y, v, w) {
              function A(U) {
                var G, b, B, N, z, V, X, W, ie, ne, q, Z, ae, ce, be, Te, Ze, Oe, st, Xe;
                return j(function (He) {
                  switch (He.g) {
                    case 1:
                      return ((G = Ot), ee(He, 2), I(He, U.promise, 4));
                    case 4:
                      if (((b = He.h), U.aborted)) return He.return();
                      if (
                        ((B = b.uri),
                        B != b.originalUri && ((N = k.P()), N.includes(B) || k.Df.push(B)),
                        (z = dm(e.ab, b.data)),
                        z.type != 1)
                      )
                        throw new H(2, 4, 4017);
                      return (
                        (V = Rr(z.ha, "EXT-X-DEFINE")),
                        (X = pm(e, V, B)),
                        (W = !1),
                        ((!e.ba && e.g.hls.disableCodecGuessing) ||
                          (e.R && i == G.wa && !e.g.hls.disableClosedCaptionsDetection)) &&
                          z.segments.length > 0 &&
                          ((e.R = !1), (W = !0)),
                        (ie = !e.ba && e.g.hls.disableCodecGuessing),
                        (ne = Cn(e)),
                        I(He, xw(e, 0, X, z, E, r, i, s, o, u, l, p, m, y, v, w, void 0, W, ie), 5)
                      );
                    case 5:
                      if (((q = He.h), U.aborted)) return He.return();
                      ((Z = q.stream),
                        Ew(e, z),
                        Cn(e) && !ne && Iw(e, z),
                        (k.Wc = q.Wc),
                        (k.Mc = q.Mc),
                        (k.Ve = q.Ve),
                        (k.Ue = q.Ue),
                        (k.be = q.be),
                        (k.rf = q.rf),
                        (k.Qb = q.Qb),
                        (k.Rb = q.Rb),
                        (C.segmentIndex = Z.segmentIndex),
                        (C.encrypted = Z.encrypted),
                        (C.drmInfos = Z.drmInfos),
                        (C.keyIds = Z.keyIds),
                        (C.mimeType = Z.mimeType),
                        (C.bandwidth = C.bandwidth || Z.bandwidth),
                        (C.codecs = C.codecs || Z.codecs),
                        (C.closedCaptions = C.closedCaptions || Z.closedCaptions),
                        (C.width = C.width || Z.width),
                        (C.height = C.height || Z.height),
                        (C.hdr = C.hdr || Z.hdr),
                        (C.colorGamut = C.colorGamut || Z.colorGamut),
                        (C.frameRate = C.frameRate || Z.frameRate),
                        C.language == "und" && Z.language != "und" && (C.language = Z.language),
                        (C.language = C.language || Z.language),
                        (C.channelsCount = C.channelsCount || Z.channelsCount),
                        (C.audioSamplingRate = C.audioSamplingRate || Z.audioSamplingRate),
                        oa(C),
                        C.drmInfos.length && e.h.newDrmInfo(C),
                        (ae = !1),
                        ((!p && C.closedCaptions) ||
                          (p && C.closedCaptions && p.size != C.closedCaptions.size)) &&
                          (ae = !0),
                        e.m && ae && e.h.makeTextStreamsForClosedCaptions(e.m),
                        i == G.Na &&
                          (ce = qr(Z.segmentIndex)) &&
                          ce.ea &&
                          ((C.mimeType = "application/mp4"), oa(C)),
                        (be = Uc(C)),
                        C.segmentIndex.Fb(function ($e) {
                          $e.ea && ($e.ea.xd = be);
                        }),
                        hD(e) &&
                          (e.zc
                            ? gm(e, [k])
                            : ((e.zc = !0),
                              (Te = Array.from(e.i.values())),
                              (Ze = Te.filter(function ($e) {
                                return $e.stream.segmentIndex;
                              })),
                              gm(e, Ze),
                              Xd(e),
                              (Oe = e.o),
                              Oe > 0 && e.F.ka(Oe))),
                        ym(e, z.ha, C.type, X, E),
                        e.m && (e.m.startTime = e.u),
                        de(He, 0));
                      break;
                    case 2:
                      if (((st = se(He)), C.closeSegmentIndex(), st.code === 7001)) return He.return();
                      if (((Xe = e.h.disableStream(C)), !Xe)) throw st;
                      re(He);
                  }
                });
              }
              function E() {
                return e.j && n.length > 1 ? Wu(e.j, t) : k.Df.concat(rw([e.H], n, e.B));
              }
              var C = Sw(e, r, i, s, o, u, l, p, m, y, v, w);
              n.some(function (U) {
                return U.startsWith("shaka://hls-muxed");
              }) && ((C.isAudioMuxedInVideo = !0), (C.mimeType = "video/mp2t"), oa(C));
              var k = {
                  stream: C,
                  type: i,
                  Df: [],
                  Wc: 0,
                  Mc: 0,
                  rf: new Map(),
                  Ve: !1,
                  Ue: !1,
                  be: !1,
                  sg: -1,
                  Qb: -1,
                  Rb: -1,
                  P: E,
                },
                R = null,
                L;
              return (
                (C.createSegmentIndex = function () {
                  return (
                    R ||
                    (C.isAudioMuxedInVideo
                      ? ((C.segmentIndex = new Je([])), Promise.resolve())
                      : ((L = xm(e, k.P(), !0)),
                        (R = new Promise(function (U) {
                          U(A(L));
                        }))))
                  );
                }),
                (C.closeSegmentIndex = function () {
                  (R && !C.segmentIndex && L.abort(),
                    C.segmentIndex && (C.segmentIndex.release(), (C.segmentIndex = null)),
                    (R = null));
                }),
                k
              );
            }
            function yw(e) {
              var t = 1 / 0;
              e = x(e.i.values());
              for (var n = e.next(); !n.done; n = e.next())
                ((n = n.value),
                  n.stream.segmentIndex &&
                    n.stream.type != "text" &&
                    !n.stream.isAudioMuxedInVideo &&
                    (t = Math.min(t, n.Mc)));
              return t;
            }
            function vw(e, t) {
              var n = [];
              t = x(t);
              for (var r = t.next(); !r.done; r = t.next())
                ((r = r.value),
                  r.segmentIndex &&
                    r.segmentIndex.Fb(function (i) {
                      n.push(i);
                    }));
              e.l.me(n);
            }
            function gm(e, t) {
              if (!Cn(e))
                for (var n = yw(e), r = x(t), i = r.next(); !i.done; i = r.next())
                  i.value.stream.segmentIndex.pd(0, n);
              (vw(
                e,
                t.map(function (s) {
                  return s.stream;
                }),
              ),
                (r = Array.from(e.i.values()).filter(function (s) {
                  return s.stream.segmentIndex;
                })),
                (n = r.some(function (s) {
                  return s.stream.type == "audio";
                })),
                (i = r.some(function (s) {
                  return s.stream.type == "video";
                })),
                (r = Cn(e) && !e.kb),
                (n = !Cn(e) && e.kb && !(n && i)),
                e.g.hls.ignoreManifestProgramDateTime || r || n
                  ? dw(e, t, r)
                  : (WP(e, t), e.g.hls.ignoreManifestProgramDateTimeForTypes.length > 0 && dw(e, t)));
            }
            function Qu(e, t) {
              return e.g.hls.ignoreManifestProgramDateTime
                ? !0
                : e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t);
            }
            function hD(e) {
              if (!e.m) return !1;
              var t = [],
                n = [];
              e = x(e.m.variants);
              for (var r = e.next(); !r.done; r = e.next())
                ((r = r.value), r.video && t.push(r.video), r.audio && n.push(r.audio));
              return !(
                (t.length > 0 &&
                  !t.some(function (i) {
                    return i.segmentIndex;
                  })) ||
                (n.length > 0 &&
                  !n.some(function (i) {
                    return i.segmentIndex;
                  }))
              );
            }
            function xw(e, t, n, r, i, s, o, u, l, p, m, y, v, w, A, E, C, k, R) {
              ((k = k === void 0 ? !0 : k), (R = R === void 0 ? !0 : R));
              var L,
                U,
                G,
                b,
                B,
                N,
                z,
                V,
                X,
                W,
                ie,
                ne,
                q,
                Z,
                ae,
                ce,
                be,
                Te,
                Ze,
                Oe,
                st,
                Xe,
                He,
                $e,
                Qe,
                Ye,
                Ge,
                We,
                Yt;
              return j(function (Ht) {
                switch (Ht.g) {
                  case 1:
                    if (
                      ((L = r.segments || []),
                      (U = L.every(function (vr) {
                        return !!Jt(vr.ha, "EXT-X-GAP");
                      })),
                      !L.length || U)
                    )
                      throw new H(2, 4, 4053);
                    if (
                      (pD(e, r),
                      Cn(e) && mm(e, r),
                      (G = Cn(e) ? e.C.get(o) : new Map()),
                      (b = Rw(e, r, G, n, i, o)),
                      (B = b.segments),
                      (N = b.bandwidth),
                      (ie = W = X = V = z = null),
                      !(B.length > 0 && k))
                    ) {
                      Ht.A(2);
                      break;
                    }
                    return I(Ht, $P(e, B), 3);
                  case 3:
                    ((ne = Ht.h),
                      o != ne.type && Cn(e) && (e.C.set(ne.type, e.C.get(o)), e.C.set(o, new Map())),
                      (o = ne.type),
                      (u = ne.language),
                      (m = ne.channelCount),
                      (A = ne.sampleRate),
                      e.g.disableText || (y = ne.closedCaptions),
                      (V = ne.height),
                      (z = ne.width),
                      (X = ne.ze),
                      (W = ne.colorGamut),
                      (ie = ne.frameRate),
                      R && ((C = ne.mimeType), (s = ne.codecs)));
                  case 2:
                    if (C) {
                      Ht.A(4);
                      break;
                    }
                    return I(Ht, yD(e, o, s, B), 5);
                  case 5:
                    ((C = Ht.h),
                      o != Fe || s || C != "application/mp4" || !B[0] || B[0].ea || (C = "text/vtt"));
                  case 4:
                    return I(Ht, ww(e, r, C, i, n), 6);
                  case 6:
                    if (
                      ((q = Ht.h),
                      (Z = q.drmInfos),
                      (ae = q.keyIds),
                      (ce = q.encrypted),
                      (be = q.Qh),
                      ce && !Z.length && !be)
                    )
                      throw new H(2, 4, 4026);
                    return (
                      (Te = Sw(e, s, o, u, l, p, m, y, v, w, A, E)),
                      (Te.encrypted = ce && !be),
                      (Te.drmInfos = Z),
                      (Te.keyIds = ae),
                      (Te.mimeType = C),
                      N && (Te.bandwidth = N),
                      oa(Te),
                      o == "video" && (z || V || X || W) && _w(Te, z, V, ie, X, null, W),
                      Cn(e) && mm(e, r),
                      (Ze = B[0].startTime),
                      (Oe = B[B.length - 1]),
                      (st = Oe.endTime),
                      (Xe = new Je(B)),
                      (Te.segmentIndex = Xe),
                      ($e = (He = Jt(r.ha, "EXT-X-SERVER-CONTROL")) ? ia(He, "CAN-SKIP-UNTIL") != null : !1),
                      (Qe = He ? ia(He, "CAN-BLOCK-RELOAD") != null : !1),
                      (Ye = sa(r.ha, "EXT-X-MEDIA-SEQUENCE", 0)),
                      (Ge = Tw(Ye, B)),
                      (We = Ge.Qb),
                      (Yt = Ge.Rb),
                      Ht.return({
                        stream: Te,
                        type: o,
                        Df: [],
                        P: i,
                        Wc: Ze,
                        Mc: st,
                        Ve: $e,
                        Ue: Qe,
                        be: !1,
                        sg: -1,
                        Qb: We,
                        Rb: Yt,
                        rf: G,
                      })
                    );
                }
              });
            }
            function Tw(e, t) {
              e = e + t.length - 1;
              var n = -1;
              if (!t.length) return (e++, { Qb: e, Rb: n });
              t = t[t.length - 1];
              var r = t.g;
              return t.g.length
                ? ((n = r.length - 1), r[r.length - 1].isPreload() || (e++, (n = 0)), { Qb: e, Rb: n })
                : (e++, t.o && (n = 0), { Qb: e, Rb: n });
            }
            function Sw(e, t, n, r, i, s, o, u, l, p, m, y) {
              var v = vm(n, t) || Kd(n),
                w = [];
              if (l) {
                l = x(l.split(","));
                for (var A = l.next(); !A.done; A = l.next()) w.push(A.value);
              }
              return (
                (A = void 0),
                (l = null),
                n == Fe
                  ? (A =
                      w.includes("public.accessibility.transcribes-spoken-dialog") &&
                      w.includes("public.accessibility.describes-music-and-sound")
                        ? "caption"
                        : "subtitle")
                  : w.includes("public.accessibility.describes-video") && (l = "visually impaired"),
                w.length || A !== "subtitle" || w.push("subtitle"),
                (A = null),
                n != "video" && (A = s),
                (e = {
                  id: e.G++,
                  originalId: s,
                  groupId: null,
                  createSegmentIndex: function () {
                    return Promise.resolve();
                  },
                  segmentIndex: null,
                  mimeType: v,
                  codecs: t,
                  kind: n == Fe ? "subtitle" : void 0,
                  encrypted: !1,
                  drmInfos: [],
                  keyIds: new Set(),
                  language: tt(r || "und"),
                  originalLanguage: r,
                  label: A,
                  type: n,
                  primary: i,
                  trickModeVideo: null,
                  dependencyStream: null,
                  emsgSchemeIdUris: null,
                  frameRate: void 0,
                  pixelAspectRatio: void 0,
                  width: void 0,
                  height: void 0,
                  bandwidth: void 0,
                  roles: w,
                  forced: p,
                  channelsCount: o,
                  audioSamplingRate: m,
                  spatialAudio: y,
                  closedCaptions: u,
                  hdr: void 0,
                  colorGamut: void 0,
                  videoLayout: void 0,
                  tilesLayout: void 0,
                  accessibilityPurpose: l,
                  external: !1,
                  fastSwitching: !1,
                  fullMimeTypes: new Set(),
                  isAudioMuxedInVideo: !1,
                  baseOriginalId: null,
                }),
                oa(e),
                e
              );
            }
            function ww(e, t, n, r, i) {
              var s, o, u, l, p, m, y, v, w, A, E, C, k, R, L, U, G, b, B, N, z, V, X, W, ie, ne, q, Z, ae;
              return j(function (ce) {
                switch (ce.g) {
                  case 1:
                    if (((s = new Map()), !e.g.ignoreDrmInfo && t.segments)) {
                      for (o = x(t.segments), u = o.next(); !u.done; u = o.next())
                        if (((l = u.value), (p = Rr(l.ha, "EXT-X-KEY")), (m = null), p.length))
                          for (m = Cw(e, t, l.ha, r, i), y = x(p), v = y.next(); !v.done; v = y.next())
                            ((w = v.value), s.set(w, m));
                    }
                    ((E = A = !1), (C = []), (k = new Set()), (R = x(s)), (L = R.next()));
                  case 2:
                    if (L.done) {
                      ce.A(4);
                      break;
                    }
                    if (
                      ((U = L.value),
                      (G = x(U)),
                      (b = G.next().value),
                      (B = G.next().value),
                      (N = b),
                      (z = B),
                      (V = lt(N, "METHOD")),
                      V == "NONE")
                    ) {
                      ce.A(3);
                      break;
                    }
                    if (((A = !0), (X = Ae(N, "KEYFORMAT") || "identity"), (W = null), Yd(V))) {
                      ((E = !0), ce.A(3));
                      break;
                    }
                    if (X == "identity") return I(ce, Dw(e, N, n, r, z, i), 11);
                    if (((ie = e.dc.get(X)), !ie)) {
                      ((ne = null), ce.A(9));
                      break;
                    }
                    return I(ce, ie(N, n, z), 10);
                  case 10:
                    ne = ce.h;
                  case 9:
                    ((W = ne), ce.A(6));
                    break;
                  case 11:
                    W = ce.h;
                  case 6:
                    if (W) {
                      if (W.keyIds)
                        for (q = x(W.keyIds), Z = q.next(); !Z.done; Z = q.next())
                          ((ae = Z.value), k.add(ae));
                      C.push(W);
                    }
                  case 3:
                    ((L = R.next()), ce.A(2));
                    break;
                  case 4:
                    return ce.return({ drmInfos: C, keyIds: k, encrypted: A, Qh: E });
                }
              });
            }
            function Aw(e, t, n, r, i) {
              if (!g.crypto || !g.crypto.subtle)
                throw (
                  je(
                    "Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)",
                  ),
                  new H(2, 4, 4042)
                );
              var s = 0,
                o = Ae(t, "IV", "");
              if (o) {
                var u = Ms(o.substr(2));
                if (u.byteLength != 16) throw new H(2, 4, 4048);
              } else s = sa(n.ha, "EXT-X-MEDIA-SEQUENCE", 0);
              var l = ys(r(), lt(t, "URI"), i),
                p = l.sort().join("");
              if (((n = t.toString() + "-" + s + "-" + p), !e.va.has(n))) {
                var m = { bitsKey: 128, blockCipherMode: "CBC", iv: u, firstMediaSequenceNumber: s };
                switch (lt(t, "METHOD")) {
                  case "AES-256":
                    m.bitsKey = 256;
                    break;
                  case "AES-256-CTR":
                    ((m.bitsKey = 256), (m.blockCipherMode = "CTR"));
                }
                ((m.fetchKey = function () {
                  var y, v, w, A;
                  return j(function (E) {
                    if (E.g == 1)
                      return (
                        e.O.has(p) ||
                          ((y = Ut(l, e.g.retryParameters)), (v = Oi(e, y, 6).promise), e.O.set(p, v)),
                        I(E, e.O.get(p), 2)
                      );
                    if (E.g != 3) {
                      if (((w = E.h), !w.data || w.data.byteLength != m.bitsKey / 8)) throw new H(2, 4, 4049);
                      return (
                        (A = { name: m.blockCipherMode == "CTR" ? "AES-CTR" : "AES-CBC", length: m.bitsKey }),
                        I(E, g.crypto.subtle.importKey("raw", w.data, A, !0, ["decrypt"]), 3)
                      );
                    }
                    ((m.cryptoKey = E.h), (m.fetchKey = void 0), re(E));
                  });
                }),
                  e.va.set(n, m));
              }
              return e.va.get(n);
            }
            function Ew(e, t) {
              e.u == null && (t = Jt(t.ha, "EXT-X-START")) && (e.u = Number(lt(t, "TIME-OFFSET")));
            }
            function pD(e, t) {
              var n = Jt(t.ha, "EXT-X-PLAYLIST-TYPE");
              ((t = Jt(t.ha, "EXT-X-ENDLIST")),
                (t = (n && n.value == "VOD") || t),
                (n = n && n.value == "EVENT" && !t),
                (n = !t && !n),
                t ? $d(e, Jd) : n ? $d(e, Sm) : $d(e, AD));
            }
            function mm(e, t) {
              var n = 1 / 0,
                r = t.segments;
              if (r.length)
                for (var i = r.length - 1; i >= 0; ) {
                  var s = Jt(r[i].ha, "EXTINF");
                  if (s) {
                    n = Number(s.value.split(",")[0]);
                    break;
                  }
                  i--;
                }
              if (((r = Jt(t.ha, "EXT-X-TARGETDURATION")), !r))
                throw new H(2, 4, 4024, "EXT-X-TARGETDURATION");
              ((r = Number(r.value)),
                (i = Jt(t.ha, "EXT-X-PART-INF")) && (e.T = Number(lt(i, "PART-TARGET"))),
                (t = Jt(t.ha, "EXT-X-SERVER-CONTROL")),
                e.oa && e.T
                  ? ((e.o = e.yc
                      ? e.T * 5 <= n
                        ? Math.min(e.T, e.o)
                        : Math.min(n, e.o)
                      : Math.min(e.T, e.o)),
                    (e.Ua = t ? Number(lt(t, "PART-HOLD-BACK")) : 0))
                  : ((e.o = Math.min(n, e.o)),
                    (n = t ? ia(t, "HOLD-BACK") : null),
                    (e.Ta = n ? Number(n.value) : 0)),
                (e.eb = Math.max(r, e.eb)));
            }
            function Iw(e, t) {
              var n = 0;
              if (e.g.defaultPresentationDelay) n = e.g.defaultPresentationDelay;
              else if (e.Ua) n = e.Ua;
              else if (e.Ta) n = e.Ta;
              else
                for (var r = t.segments.length, i = r - Math.min(r, e.g.hls.liveSegmentsDelay); i < r; i++) {
                  var s = Jt(t.segments[i].ha, "EXTINF");
                  n = s ? n + Number(s.value.split(",")[0]) : n + e.eb;
                }
              (e.u && e.u < 0 && ((n = Math.min(-e.u, n)), (e.u += n)), e.l.Wi(0), e.l.rh(n), e.l.cd(!1));
            }
            function Cw(e, t, n, r, i) {
              var s = Jt(n, "EXT-X-MAP");
              if (!s) return null;
              var o = lt(s, "URI"),
                u = ys(r(), o, i);
              if (((o = [u.toString(), Ae(s, "BYTERANGE", "")].join("-")), !e.Da.has(o))) {
                var l = void 0,
                  p = null,
                  m = !1;
                n = x(n);
                for (var y = n.next(); !y.done; y = n.next())
                  ((y = y.value),
                    y.name == "EXT-X-KEY"
                      ? ((m = lt(y, "METHOD")),
                        Yd(m) && y.id < s.id ? ((m = !1), (l = Aw(e, y, t, r, i))) : (m = m != "NONE"))
                      : y.name == "EXT-X-BYTERANGE" && y.id < s.id && (p = y));
                ((t = gD(u, s, p, l, m)), e.Da.set(o, t));
              }
              return e.Da.get(o);
            }
            function gD(e, t, n, r, i) {
              var s = 0,
                o = null;
              return (
                (t = Ae(t, "BYTERANGE")),
                !t && n && (t = n.value),
                t &&
                  ((s = t.split("@")),
                  (o = Number(s[0])),
                  (s = Number(s[1])),
                  (o = s + o - 1),
                  r && ((n = o + 1 - s), n % 16 && (o += 16 - (n % 16)))),
                new Vn(
                  function () {
                    return e;
                  },
                  s,
                  o,
                  null,
                  null,
                  null,
                  r,
                  i,
                )
              );
            }
            function mD(e, t, n, r, i, s, o, u, l, p) {
              var m = r.ha,
                y = Jt(m, "EXTINF"),
                v = 0,
                w = 0,
                A = null;
              r.wc.length && (e.m.isLowLatency = !0);
              var E = null;
              if (!e.g.hls.ignoreManifestProgramDateTime) {
                var C = Jt(m, "EXT-X-PROGRAM-DATE-TIME");
                C && C.value && ((E = yi(C.value)), (e.kb = !0));
              }
              var k = Ii;
              if ((Jt(m, "EXT-X-GAP") && (e.m.gapCount++, (k = 2)), !y)) {
                if (r.wc.length == 0) throw new H(2, 4, 4024, "EXTINF");
                if (!e.oa) return null;
              }
              var R = [];
              C = !1;
              var L = null,
                U = !1,
                G = !1;
              if (e.oa && r.wc.length) {
                v = t && g.ReadableStream && e.g.hls.allowLowLatencyByteRangeOptimization;
                for (var b = E, B = {}, N = 0; N < r.wc.length; B = { Uf: void 0, pe: void 0 }, N++) {
                  var z = r.wc[N],
                    V = N == 0 ? n : R[R.length - 1],
                    X = N == 0 ? i : V.endTime,
                    W = Number(Ae(z, "DURATION")) || e.T;
                  if (W) {
                    var ie = X + W,
                      ne = 0,
                      q = null;
                    if (
                      (z.name == "EXT-X-PRELOAD-HINT"
                        ? ((ne = (ne = Ae(z, "BYTERANGE-START")) ? Number(ne) : 0),
                          (V = Ae(z, "BYTERANGE-LENGTH"))
                            ? (q = ne + Number(V) - 1)
                            : ne && (q = Number.MAX_SAFE_INTEGER))
                        : ((ne = Ae(z, "BYTERANGE")),
                          (q = x(Mw(V, ne))),
                          (ne = q.next().value),
                          (q = q.next().value)),
                      (B.pe = Ae(z, "URI")),
                      B.pe)
                    ) {
                      ((V = Ii), Ae(z, "GAP") == "YES" && (e.m.gapCount++, (V = 2), (U = !0)), (B.Uf = null));
                      var Z = (function (ce) {
                        return function () {
                          return (ce.Uf == null && (ce.Uf = ys(u(), ce.pe, s)), ce.Uf);
                        };
                      })(B);
                      (v && ne >= 0 && q != null && ((L = Z), (C = !0)),
                        (X = new Ce(X, ie, Z, ne, q, t, 0, 0, 1 / 0, [], "", null, b, V, p)),
                        z.name == "EXT-X-PRELOAD-HINT" && (X.Ug(), (G = !0)),
                        Ae(z, "INDEPENDENT") != "YES" && N > 0 && X.wd(),
                        (z = l),
                        z ||
                          (R.length && R[0].mimeType
                            ? (z = R[0].mimeType)
                            : B.pe && ((B = Bo(B.pe)), (z = qd.get(o).get(B) || null))),
                        z && ((X.mimeType = z), bw.has(z) && (X.ea = null)),
                        R.push(X),
                        b && (b += W));
                    }
                  }
                }
              }
              if (y) {
                if (((y = Number(y.value.split(",")[0])), y == 0)) return null;
                v = i + y;
              } else if (R.length) v = R[R.length - 1].endTime;
              else return null;
              (C && (U || R[0].startByte != 0 ? ((C = !1), (L = null)) : (R = [])),
                (y = Jt(m, "EXT-X-BYTERANGE"))
                  ? ((A = x(Mw(n, y.value))), (w = A.next().value), (A = A.next().value))
                  : R.length && ((w = R[0].startByte), (A = R[R.length - 1].endByte)),
                (n = ""),
                (y = null),
                o == "image" &&
                  ((n = "1x1"), (o = Jt(m, "EXT-X-TILES"))) &&
                  ((n = lt(o, "LAYOUT")), (o = Ae(o, "DURATION")) && (y = Number(o))));
              var ae = null;
              return (
                (t = new Ce(
                  i,
                  v,
                  function () {
                    return L ? L() : (ae == null && (ae = ys(u(), r.g, s)), ae || []);
                  },
                  w,
                  A,
                  t,
                  0,
                  0,
                  1 / 0,
                  R,
                  n,
                  y,
                  E,
                  k,
                  p,
                  R.length > 0 && !!r.g,
                )),
                l && ((t.mimeType = l), bw.has(l) && (t.ea = null)),
                C && ((e.yc = !0), t.xi(), G && t.Ug()),
                t
              );
            }
            function Mw(e, t) {
              var n = 0,
                r = null;
              return (
                t &&
                  ((n = t.split("@")),
                  (t = Number(n[0])),
                  (n = n[1] ? Number(n[1]) : e.endByte + 1),
                  (r = n + t - 1)),
                [n, r]
              );
            }
            function ym(e, t, n, r, i) {
              if (n == "video" || n == "audio") {
                var s = e.l.m;
                if (s && !Qu(e, n))
                  for (
                    t = Rr(t, "EXT-X-DATERANGE"),
                      t = t
                        .filter(function (V) {
                          return ia(V, "START-DATE") != null;
                        })
                        .sort(function (V, X) {
                          return (
                            (V = lt(V, "START-DATE")),
                            (X = lt(X, "START-DATE")),
                            V < X ? -1 : V > X ? 1 : 0
                          );
                        }),
                      n = 0;
                    n < t.length;
                    n++
                  ) {
                    var o = t[n];
                    try {
                      var u = lt(o, "START-DATE"),
                        l = yi(u);
                      if (!isNaN(l)) {
                        var p = Math.max(0, l - s),
                          m = null,
                          y = Ae(o, "END-DATE");
                        if (y) {
                          var v = yi(y);
                          if (!isNaN(v) && ((m = v - s), m < 0)) continue;
                        }
                        if (m == null) {
                          var w = Ae(o, "DURATION") || Ae(o, "PLANNED-DURATION");
                          if (w) {
                            var A = parseFloat(w);
                            if ((isNaN(A) || (m = p + A), l - s + A < 0)) continue;
                          }
                        }
                        var E = Ae(o, "CLASS") || "com.apple.quicktime.HLS",
                          C = Ae(o, "END-ON-NEXT") == "YES";
                        if (m == null && C) {
                          for (var k = n + 1; k < t.length; k++) {
                            var R = Ae(t[k], "CLASS") || "com.apple.quicktime.HLS";
                            if (E == R) {
                              var L = lt(t[k], "START-DATE"),
                                U = yi(L);
                              if (!isNaN(U) && U && U > l) {
                                m = Math.max(0, U - s);
                                break;
                              }
                            }
                          }
                          if (m == null) continue;
                        }
                        k = ["CLASS", "START-DATE", "END-DATE", "DURATION", "END-ON-NEXT"];
                        for (var G = [], b = x(o.attributes), B = b.next(); !B.done; B = b.next()) {
                          var N = B.value;
                          if (!k.includes(N.name)) {
                            var z = iw(N.value, r);
                            ((N.name == "X-ASSET-URI" || N.name == "X-ASSET-LIST") &&
                              (z = ys(i(), N.value, r)[0]),
                              G.push({
                                key: N.name,
                                description: "",
                                data: z,
                                mimeType: null,
                                pictureType: null,
                              }));
                          }
                        }
                        G.length > 1 && e.h.onMetadata(E, p, m, G);
                      }
                    } catch (V) {}
                  }
              }
            }
            function Rw(e, t, n, r, i, s) {
              function o(V) {
                if (((V = Bo(V)), !V)) return null;
                var X = qd.get(s).get(V);
                return (X || (X = Tm.get(V)), X);
              }
              var u = t.segments,
                l = null,
                p = null,
                m = null,
                y = null,
                v = void 0,
                w = sa(t.ha, "EXT-X-DISCONTINUITY-SEQUENCE", -1),
                A = sa(t.ha, "EXT-X-MEDIA-SEQUENCE", 0),
                E = Jt(t.ha, "EXT-X-SKIP"),
                C = E ? Number(Ae(E, "SKIPPED-SEGMENTS")) : 0,
                k = A + C,
                R = 0;
              (Cn(e) && n.has(k) && (R = n.get(k)),
                R === 0 && e.Fa == Sm && n.size > 0 && !n.has(k) && e.l.i != null && (R = e.l.Hb()));
              var L = [],
                U = null;
              E = [];
              for (var G = 0; G < u.length; G++) {
                var b = u[G];
                ((k = Jt(b.ha, "EXT-X-MAP")) && k.id !== p && ((l = Cw(e, t, b.ha, i, r)), (p = k.id)),
                  (k = b.g));
                var B = "";
                (k && (B = Bo(k)),
                  B !== y && ((m = o(k)), (y = B)),
                  (B = G == 0 ? R : U.endTime),
                  (k = A + C + G),
                  Jt(b.ha, "EXT-X-DISCONTINUITY") && (w++, U && U.ea && (U.ea.g = B)));
                for (var N = x(b.ha), z = N.next(); !z.done; z = N.next())
                  ((z = z.value),
                    z.name == "EXT-X-KEY" && (Yd(lt(z, "METHOD")) ? (v = Aw(e, z, t, i, r)) : (v = void 0)));
                if ((n.set(k, B), (B = mD(e, l, U, b, B, r, s, i, m, v)))) {
                  if (
                    ((U = sa(b.ha, "EXT-X-BITRATE"))
                      ? (E.push({ bitrate: U, duration: B.endTime - B.startTime }), (B.bandwidth = U))
                      : B.endByte
                        ? (b = ap(B)) &&
                          ((U = B.endTime - B.startTime),
                          (b = (b * 8) / U / 1e3),
                          E.push({ bitrate: b, duration: U }),
                          (B.bandwidth = b))
                        : E.length &&
                          ((U = E.pop()),
                          (U.duration += B.endTime - B.startTime),
                          E.push(U),
                          (B.bandwidth = U.bitrate)),
                    B.bandwidth)
                  )
                    for (U = x(B.g), b = U.next(); !b.done; b = U.next()) b.value.bandwidth = B.bandwidth;
                  ((U = B), (B.i = w), (Qu(e, s) && e.N != null && k < e.N) || L.push(B));
                }
              }
              if (
                ((t = void 0),
                E.length &&
                  ((t = E.reduce(function (V, X) {
                    return V + X.duration;
                  }, 0)),
                  (t = Math.round(
                    (E.reduce(function (V, X) {
                      return V + X.bitrate * X.duration;
                    }, 0) /
                      t) *
                      1e3,
                  ))),
                (E = L.some(function (V) {
                  return V.h != null;
                })))
              ) {
                for (
                  n = {}, r = 0;
                  r < L.length;
                  n = { Ze: void 0, Ye: void 0, Re: void 0, Zc: void 0, Qe: void 0 }, r++
                )
                  if (((n.Zc = L[r]), n.Zc.h == null))
                    for (
                      n.Ye = 0,
                        n.Ze = r,
                        i = (function (V) {
                          return function () {
                            var X = L[V.Ze];
                            if (X) {
                              if (X.h != null) return X.h + V.Ye;
                              ((V.Ye -= X.endTime - X.startTime), (V.Ze += 1));
                            }
                            return null;
                          };
                        })(n),
                        n.Qe = 0,
                        n.Re = r,
                        u = (function (V) {
                          return function () {
                            var X = L[V.Re];
                            if (X) {
                              if ((X != V.Zc && (V.Qe += X.endTime - X.startTime), X.h != null))
                                return X.h + V.Qe;
                              --V.Re;
                            }
                            return null;
                          };
                        })(n);
                      n.Zc.h == null;
                    )
                      ((n.Zc.h = u()), n.Zc.h == null && (n.Zc.h = i()));
              }
              if (E)
                for (n = x(L), r = n.next(); !r.done; r = n.next())
                  for (i = r.value, r = i.h, i = x(i.g), u = i.next(); !u.done; u = i.next())
                    ((u = u.value), (u.h = r), (r += u.endTime - u.startTime));
              if (((n = e.ma), E && n != 1 / 0 && !Qu(e, s)))
                for (e = x(L), E = e.next(); !E.done; E = e.next()) E.value.Dh(n);
              return { segments: L, bandwidth: t };
            }
            function vm(e, t) {
              if (e == Fe) {
                if (t == "vtt" || t == "wvtt") return "text/vtt";
                if (t && t !== "") return "application/mp4";
              }
              return e != "image" || (t && t != "jpeg")
                ? e == "audio" && t == "mp4a.40.34"
                  ? "audio/mpeg"
                  : t == "mjpg"
                    ? "application/mp4"
                    : null
                : "image/jpeg";
            }
            function Kd(e) {
              return e == Fe ? "text/vtt" : qd.get(e).get("mp4");
            }
            function kw(e, t) {
              e = Cn(e) ? Math.trunc((t.length - 1) / 2) : 0;
              for (var n = t[e]; n.Kc() == 2 && e + 1 < t.length; ) (e++, (n = t[e]));
              return { segment: n, segmentIndex: e };
            }
            function yD(e, t, n, r) {
              var i, s, o, u, l, p, m, y, v, w, A, E, C;
              return j(function (k) {
                switch (k.g) {
                  case 1:
                    return (
                      (i = Ar),
                      (s = kw(e, r)),
                      (o = s.segment),
                      o.status == 2
                        ? k.return(Kd(t))
                        : ((l = o.P()),
                          (p = Bo(l[0])) && ((m = qd.get(t)), (y = m.get(p)) || (y = Tm.get(p)))
                            ? k.return(y)
                            : (u = vm(t, n))
                              ? k.return(u)
                              : ((w = 1),
                                (A = Ut(l, e.g.retryParameters)),
                                ee(k, 2),
                                (A.method = "HEAD"),
                                I(k, Oi(e, A, i, { type: w }).promise, 4)))
                    );
                  case 4:
                    ((E = k.h), (v = E.headers["content-type"]), de(k, 3));
                    break;
                  case 2:
                    if (((C = se(k)), !C || (C.code != 1002 && C.code != 1001))) {
                      k.A(3);
                      break;
                    }
                    return (
                      (A.method = "GET"),
                      e.g.hls.allowRangeRequestsToGuessMimeType && (A.headers.Range = "bytes=0-0"),
                      I(k, Oi(e, A, i, { type: w }).promise, 6)
                    );
                  case 6:
                    ((E = k.h), (v = E.headers["content-type"]));
                  case 3:
                    if (!v) {
                      k.A(7);
                      break;
                    }
                    if (((u = v.toLowerCase().split(";")[0]), u != "application/octet-stream")) {
                      k.A(8);
                      break;
                    }
                    if (E.data.byteLength) {
                      k.A(9);
                      break;
                    }
                    return ((A.method = "GET"), I(k, Oi(e, A, i, { type: w }).promise, 10));
                  case 10:
                    E = k.h;
                  case 9:
                    Lo(De(E.data)) && (u = "video/mp2t");
                  case 8:
                    if (u != "application/octet-stream") return k.return(u);
                  case 7:
                    return k.return(Kd(t));
                }
              });
            }
            function _w(e, t, n, r, i, s, o) {
              e &&
                ((e.width = Number(t) || void 0),
                (e.height = Number(n) || void 0),
                (e.frameRate = Number(r) || void 0),
                (e.hdr = i || void 0),
                (e.videoLayout = s || void 0),
                (e.colorGamut = o || void 0));
            }
            function xm(e, t, n) {
              return Oi(e, Ut(t, e.g.retryParameters), 0, { type: n ? 2 : 3 });
            }
            function Pw(e) {
              var t, n, r, i, s, o;
              return j(function (u) {
                switch (u.g) {
                  case 1:
                    return e.h ? (ee(u, 2), (t = Date.now()), I(u, e.update(), 4)) : u.return();
                  case 4:
                    ((n = Date.now()),
                      Cn(e) &&
                        ((r = (n - t) / 1e3),
                        e.ac.sample(1, r),
                        (i = e.g.updatePeriod > 0 ? e.g.updatePeriod : e.o),
                        (s = Math.max(0, i - xr(e.ac))),
                        e.F.ka(s)),
                      de(u, 3));
                    break;
                  case 2:
                    if (((o = se(u)), !e.h)) return u.return();
                    if (e.g.raiseFatalErrorOnManifestUpdateRequestFailure)
                      return (e.h.onError(o), u.return());
                    ((o.severity = 1), e.h.onError(o), e.F.ka(0.1));
                  case 3:
                    if (!e.h) return u.return();
                    (e.h.onManifestUpdated(), re(u));
                }
              });
            }
            function Cn(e) {
              return e.Fa != Jd;
            }
            function $d(e, t) {
              ((e.Fa = t), e.l && e.l.cd(!Cn(e)), Cn(e) || e.F.stop());
            }
            function Oi(e, t, n, r) {
              if (!e.$) throw new H(2, 7, 7001);
              return (
                r || (r = {}),
                (r.isPreload = e.cc()),
                (t = e.h.networkingEngine.request(n, t, r)),
                js(e.$, t),
                t
              );
            }
            function Yd(e) {
              return e == "AES-128" || e == "AES-256" || e == "AES-256-CTR";
            }
            function vD(e, t, n, r) {
              var i, s, o, u, l, p;
              return j(function (m) {
                if (m.g == 1) {
                  if (n == "video/mp2t") throw new H(2, 4, 4040);
                  if (g.shakaMediaKeysPolyfill === "apple") throw new H(2, 4, 4041);
                  if (((i = lt(t, "METHOD")), (s = ["SAMPLE-AES", "SAMPLE-AES-CTR"]), !s.includes(i)))
                    return m.return(null);
                  ((o = "cenc"),
                    i == "SAMPLE-AES" && (o = "cbcs"),
                    (u = lt(t, "URI")),
                    (l = gi("com.apple.fps", o, null, u)));
                  var y = new Pt(u).Db.replace(/-/g, "").toLowerCase();
                  return (p = y.length === 32 && /^[0-9a-f]+$/.test(y) ? y : null) || !r
                    ? m.A(2)
                    : I(m, Lw(e, r), 3);
                }
                return (m.g != 2 && (p = m.h), p && l.keyIds.add(p), m.return(l));
              });
            }
            function Dw(e, t, n, r, i, s) {
              var o, u, l, p, m, y, v, w, A, E, C, k;
              return j(function (R) {
                switch (R.g) {
                  case 1:
                    if (n == "video/mp2t") throw new H(2, 4, 4040);
                    if (g.shakaMediaKeysPolyfill === "apple") throw new H(2, 4, 4041);
                    if (((o = lt(t, "METHOD")), (u = ["SAMPLE-AES", "SAMPLE-AES-CTR"]), !u.includes(o)))
                      return R.return(null);
                    if (((l = ys(r(), lt(t, "URI"), s)), l[0].startsWith("data:text/plain;base64,"))) {
                      ((p = pi(Sr(l[0].split("data:text/plain;base64,").pop()))), R.A(2));
                      break;
                    }
                    return (
                      (m = l.sort().join("")),
                      e.ya.has(m) ||
                        ((y = Ut(l, e.g.retryParameters)), (v = Oi(e, y, 6).promise), e.ya.set(m, v)),
                      I(R, e.ya.get(m), 3)
                    );
                  case 3:
                    ((w = R.h), (p = pi(w.data)));
                  case 2:
                    if (((A = "00000000000000000000000000000000"), !i)) {
                      R.A(4);
                      break;
                    }
                    return I(R, Lw(e, i), 5);
                  case 5:
                    (E = R.h) && (A = E);
                  case 4:
                    return (
                      (C = new Map()),
                      C.set(A, p),
                      (k = "cenc"),
                      o == "SAMPLE-AES" && (k = "cbcs"),
                      R.return(Dv(C, k))
                    );
                }
              });
            }
            function Lw(e, t) {
              var n, r, i, s;
              return j(function (o) {
                return o.g == 1
                  ? ((n = null),
                    e.za.has(t)
                      ? ((n = e.za.get(t)), o.A(2))
                      : ((r = xu(t.P(), t.Jc(), t.Hc(), e.g.retryParameters)),
                        (i = Ar),
                        I(o, Oi(e, r, i, { type: 0 }).promise, 3)))
                  : (o.g != 2 && ((s = o.h), t.ue(s.data), (n = rR(s.data)), e.za.set(t, n)), o.return(n));
              });
            }
            fe("shaka.hls.HlsParser", zd);
            var Tm = new Map()
                .set("aac", "audio/aac")
                .set("ac3", "audio/ac3")
                .set("ec3", "audio/ec3")
                .set("mp3", "audio/mpeg"),
              xD = new Map()
                .set("mp4", "audio/mp4")
                .set("mp4a", "audio/mp4")
                .set("m4s", "audio/mp4")
                .set("m4i", "audio/mp4")
                .set("m4a", "audio/mp4")
                .set("m4f", "audio/mp4")
                .set("cmfa", "audio/mp4")
                .set("ts", "video/mp2t")
                .set("tsa", "video/mp2t"),
              TD = new Map()
                .set("mp4", "video/mp4")
                .set("mp4v", "video/mp4")
                .set("m4s", "video/mp4")
                .set("m4i", "video/mp4")
                .set("m4v", "video/mp4")
                .set("m4f", "video/mp4")
                .set("cmfv", "video/mp4")
                .set("ts", "video/mp2t")
                .set("tsv", "video/mp2t"),
              SD = new Map()
                .set("mp4", "application/mp4")
                .set("m4s", "application/mp4")
                .set("m4i", "application/mp4")
                .set("m4f", "application/mp4")
                .set("cmft", "application/mp4")
                .set("vtt", "text/vtt")
                .set("webvtt", "text/vtt")
                .set("ttml", "application/ttml+xml"),
              wD = new Map()
                .set("jpg", "image/jpeg")
                .set("png", "image/png")
                .set("svg", "image/svg+xml")
                .set("webp", "image/webp")
                .set("avif", "image/avif"),
              qd = new Map().set("audio", xD).set("video", TD).set("text", SD).set("image", wD),
              bw = new Set(["video/mp2t"].concat(Y(Ti))),
              Jd = "VOD",
              AD = "EVENT",
              Sm = "LIVE";
            (Rs("application/x-mpegurl", function () {
              return new zd();
            }),
              Rs("application/vnd.apple.mpegurl", function () {
                return new zd();
              }));
            function Qd(e) {
              return Ld(e);
            }
            var ED = new Map()
              .set("com.microsoft.playready", Qd)
              .set("com.microsoft.playready.recommendation", Qd)
              .set("com.microsoft.playready.software", Qd)
              .set("com.microsoft.playready.hardware", Qd);
            function wm() {
              var e = this;
              ((this.h = this.g = null),
                (this.l = []),
                (this.j = null),
                (this.u = 1),
                (this.i = null),
                (this.F = new Wr(5)),
                (this.o = new Ve(function () {
                  ID(e);
                })),
                (this.C = new Eo()),
                (this.m = new Map()),
                (this.B = function () {
                  return !1;
                }));
            }
            ((h = wm.prototype),
              (h.configure = function (e, t) {
                ((this.g = e), t && (this.B = t));
              }),
              (h.start = function (e, t) {
                var n = this;
                return j(function (r) {
                  if (r.g == 1) return ((n.l = [e]), (n.h = t), I(r, Am(n), 2));
                  if (!n.h) throw new H(2, 7, 7001);
                  return r.return(n.j);
                });
              }));
            function ID(e) {
              var t;
              j(function (n) {
                switch (n.g) {
                  case 1:
                    return (ee(n, 2), I(n, Am(e), 4));
                  case 4:
                    de(n, 3);
                    break;
                  case 2:
                    ((t = se(n)), e.h && ((t.severity = 1), e.h.onError(t)));
                  case 3:
                    if (!e.h) return n.return();
                    re(n);
                }
              });
            }
            ((h.stop = function () {
              return (
                (this.g = this.h = null),
                (this.l = []),
                (this.j = null),
                this.o != null && (this.o.stop(), (this.o = null)),
                this.m.clear(),
                this.C.destroy()
              );
            }),
              (h.update = function () {
                var e = this,
                  t;
                return j(function (n) {
                  if (n.g == 1) return (ee(n, 2), I(n, Am(e), 4));
                  if (n.g != 2) return de(n, 0);
                  if (((t = se(n)), !e.h || !t)) return n.return();
                  (e.h.onError(t), re(n));
                });
              }),
              (h.onExpirationUpdated = function () {}),
              (h.onInitialVariantChosen = function () {}),
              (h.banLocation = function () {}),
              (h.setMediaElement = function () {}));
            function Am(e) {
              var t, n, r, i, s, o, u;
              return j(function (l) {
                if (l.g == 1)
                  return (
                    (t = Ut(e.l, e.g.retryParameters)),
                    (n = e.h.networkingEngine),
                    (r = Date.now()),
                    (i = n.request(0, t, { type: 5, isPreload: e.B() })),
                    js(e.C, i),
                    I(l, i.promise, 2)
                  );
                if (((s = l.h), !e.h)) return l.return();
                s.uri && !e.l.includes(s.uri) && e.l.unshift(s.uri);
                var p = s.uri,
                  m = s.data,
                  y = e.g.mss.manifestPreprocessor;
                if (y != Jc) {
                  if (
                    (qe(
                      "manifest.mss.manifestPreprocessor configuration",
                      "Please Use manifest.mss.manifestPreprocessorTXml instead.",
                    ),
                    (m = OS(m, "SmoothStreamingMedia")),
                    !m)
                  )
                    throw new H(2, 4, 4046, p);
                  (y(m), (m = Or(m.outerHTML)));
                }
                var v = Xa(m, "SmoothStreamingMedia");
                if (!v) throw new H(2, 4, 4046, p);
                if (
                  ((p = e.g.mss.manifestPreprocessorTXml),
                  p != Qc && p(v),
                  e.i || (e.i = new Pe(null, 0)),
                  (p = Le(v, "IsLive", ec, !1)))
                )
                  throw new H(2, 4, 4047);
                (e.i.cd(!p),
                  (y = Le(v, "TimeScale", on, 1e7)),
                  (m = Le(v, "DVRWindowLength", on)),
                  p && (m === 0 || isNaN(m)) && (m = 1 / 0));
                var w = Le(v, "CanSeek", ec, !1);
                (m === 0 && w && (m = 1 / 0),
                  (w = null),
                  m && m > 0 && (w = m / y),
                  p && !isNaN(e.g.availabilityWindowOverride) && (w = e.g.availabilityWindowOverride),
                  w == null && (w = 1 / 0),
                  e.i.Lf(w),
                  (m = Le(v, "Duration", on, 1 / 0)),
                  p || e.i.Ab(m / y),
                  (p = { variants: [], textStreams: [], timescale: y, duration: m / y }));
                var A;
                for (
                  w = it(v, "Protection"), y = e.g.mss.keySystemsBySystemId, m = [], w = x(w), A = w.next();
                  !A.done;
                  A = w.next()
                )
                  m = m.concat(it(A.value, "ProtectionHeader"));
                if (m.length) {
                  for (w = [], A = 0; A < m.length; A++) {
                    var E = m[A],
                      C = E.attributes.SystemID.toLowerCase(),
                      k = y[C];
                    if (k) {
                      var R;
                      e: {
                        if ((R = cS(E))) {
                          R = x(Yr(R, "DATA"));
                          for (var L = R.next(); !L.done; L = R.next())
                            if ((L = mt(L.value, "KID"))) {
                              ((R = Sr(Dt(L))),
                                (R = new Uint8Array(
                                  [R[3], R[2], R[1], R[0], R[5], R[4], R[7], R[6]].concat(Y(R.slice(8))),
                                )),
                                (R = pi(R)));
                              break e;
                            }
                        }
                        R = null;
                      }
                      ((L = Sr(Dt(E))),
                        (C = Ms(C.replace(/-/g, ""))),
                        (C = [{ initData: Sc(L, C, new Set(), 0), initDataType: "cenc", keyId: R }]),
                        (C = gi(k, "cenc", C)),
                        R && C.keyIds.add(R),
                        (k = ED.get(k)) && (C.licenseServerUri = k(E)),
                        w.push(C));
                    }
                  }
                  y = w;
                } else y = [];
                for (
                  A = y, w = [], y = [], m = [], v = it(v, "StreamIndex"), v = x(v), E = v.next();
                  !E.done;
                  E = v.next()
                ) {
                  ((E = E.value),
                    (k = it(E, "QualityLevel")),
                    (C = p.timescale),
                    (R = p.duration),
                    (L = it(E, "c")));
                  for (var U = [], G = 0, b = 0; b < L.length; ++b) {
                    var B = L[b],
                      N = L[b + 1],
                      z = Le(B, "t", on),
                      V = Le(B, "d", on);
                    if (((B = Le(B, "r", sn)), !V)) break;
                    if (((z = z != null ? z : G), (B = B || 0) && B--, B < 0))
                      if (N) {
                        if (((N = Le(N, "t", on)), N == null)) break;
                        if (z >= N) break;
                        B = Math.ceil((N - z) / V) - 1;
                      } else {
                        if (R == 1 / 0) break;
                        if (z / C >= R) break;
                        B = Math.ceil((R * C - z) / V) - 1;
                      }
                    for (N = 0; N <= B; ++N)
                      ((G = z + V), U.push({ start: z / C, end: G / C, Ld: z }), (z = G));
                  }
                  for (C = U, k = x(k), R = k.next(); !R.done; R = k.next())
                    (R = CD(e, E, R.value, C, A, p)) &&
                      (R.type != "audio" || e.g.disableAudio
                        ? R.type != "video" || e.g.disableVideo
                          ? R.type != Fe || e.g.disableText || m.push(R)
                          : y.push(R)
                        : w.push(R));
                }
                for (v = [], w = x(w.length > 0 ? w : [null]), A = w.next(); !A.done; A = w.next())
                  for (A = A.value, E = x(y.length > 0 ? y : [null]), U = E.next(); !U.done; U = E.next())
                    ((k = v),
                      (C = k.push),
                      (R = e),
                      (L = A),
                      (U = U.value),
                      (b = 0),
                      L && L.bandwidth && L.bandwidth > 0 && (b += L.bandwidth),
                      U && U.bandwidth && U.bandwidth > 0 && (b += U.bandwidth),
                      (R = {
                        id: R.u++,
                        language: L ? L.language : "und",
                        disabledUntilTime: 0,
                        primary: (!!L && L.primary) || (!!U && U.primary),
                        audio: L,
                        video: U,
                        bandwidth: b,
                        allowedByApplication: !0,
                        allowedByKeySystem: !0,
                        decodingInfos: [],
                      }),
                      C.call(k, R));
                ((p.variants = v),
                  (p.textStreams = m),
                  e.j
                    ? ((e.j.variants = p.variants), (e.j.textStreams = p.textStreams), e.h.filter(e.j))
                    : ((e.j = {
                        presentationTimeline: e.i,
                        variants: p.variants,
                        textStreams: p.textStreams,
                        imageStreams: [],
                        offlineSessionIds: [],
                        sequenceMode: e.g.mss.sequenceMode,
                        ignoreManifestTimestampsInSegmentsMode: !1,
                        type: "MSS",
                        serviceDescription: null,
                        nextUrl: null,
                        periodCount: 1,
                        gapCount: 0,
                        isLowLatency: !1,
                        startTime: null,
                      }),
                      e.i.qf()),
                  Promise.resolve(),
                  (o = Date.now()),
                  (u = (o - r) / 1e3),
                  e.F.sample(1, u),
                  re(l));
              });
            }
            function CD(e, t, n, r, i, s) {
              var o = t.attributes.Type;
              if (o !== "audio" && o !== "video" && o !== "text")
                return (je("Ignoring unrecognized type:", o), null);
              var u = t.attributes.Language,
                l = e.u++,
                p = Le(n, "Bitrate", ri),
                m = Le(n, "MaxWidth", ri),
                y = Le(n, "MaxHeight", ri),
                v = Le(n, "Channels", ri),
                w = Le(n, "SamplingRate", ri),
                A = s.duration;
              r.length && (A = r[r.length - 1].end - r[0].start);
              var E = e.i.getDuration();
              (e.i.Ab(Math.min(A, E)),
                (E = t.attributes.Name) && (E += n.attributes.Index),
                E || (E = String(l)));
              var C = {
                id: l,
                originalId: E,
                groupId: null,
                createSegmentIndex: function () {
                  return Promise.resolve();
                },
                closeSegmentIndex: function () {
                  return Promise.resolve();
                },
                segmentIndex: null,
                mimeType: "",
                codecs: "",
                frameRate: void 0,
                pixelAspectRatio: void 0,
                bandwidth: p || 0,
                width: m || void 0,
                height: y || void 0,
                kind: "",
                encrypted: i.length > 0,
                drmInfos: i,
                keyIds: new Set(),
                language: tt(u || "und"),
                originalLanguage: u,
                label: "",
                type: "",
                primary: !1,
                trickModeVideo: null,
                dependencyStream: null,
                emsgSchemeIdUris: [],
                roles: [],
                forced: !1,
                channelsCount: v,
                audioSamplingRate: w,
                spatialAudio: !1,
                closedCaptions: null,
                hdr: void 0,
                colorGamut: void 0,
                videoLayout: void 0,
                tilesLayout: void 0,
                matchedStreams: [],
                mssPrivateData: { duration: A, timescale: s.timescale, codecPrivateData: null },
                accessibilityPurpose: null,
                external: !1,
                fastSwitching: !1,
                fullMimeTypes: new Set(),
                isAudioMuxedInVideo: !1,
                baseOriginalId: null,
              };
              if (
                ((i = t.attributes.Subtype) &&
                  ((i = DD.get(i)) && C.roles.push(i), i === "main" && (C.primary = !0)),
                (i = n.attributes.FourCC),
                (i === null || i === "") && (i = t.attributes.FourCC),
                !i)
              ) {
                if (o === "audio") i = "AAC";
                else if (o === "video")
                  return (
                    je(
                      'FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"',
                    ),
                    null
                  );
              }
              if (!PD.includes(i.toUpperCase())) return (je("Codec not supported:", i), null);
              switch (((n = MD(n, o, i, C)), (C.mssPrivateData.codecPrivateData = n), o)) {
                case "audio":
                  if (!n) return (je("Quality unsupported without CodecPrivateData", o), null);
                  ((C.type = "audio"), (C.mimeType = "mss/audio/mp4"), (C.codecs = RD(i, n)));
                  break;
                case "video":
                  if (!n) return (je("Quality unsupported without CodecPrivateData", o), null);
                  ((C.type = "video"), (C.mimeType = "mss/video/mp4"), (C.codecs = kD(n)));
                  break;
                case "text":
                  ((C.type = Fe),
                    (C.mimeType = "application/mp4"),
                    (i === "TTML" || i === "DFXP") && (C.codecs = "stpp"));
              }
              return (
                C.fullMimeTypes.add(Rt(C.mimeType, C.codecs)),
                (C.createSegmentIndex = function () {
                  if (C.segmentIndex) return Promise.resolve();
                  if (e.m.has(C.id)) var k = e.m.get(C.id);
                  else
                    ((k = []),
                      C.type == "video" && (k = C.mssPrivateData.codecPrivateData.split("00000001").slice(1)),
                      (k = {
                        id: C.id,
                        type: C.type,
                        codecs: C.codecs,
                        encrypted: C.encrypted,
                        timescale: C.mssPrivateData.timescale,
                        duration: C.mssPrivateData.duration,
                        Bb: k,
                        Ga: new Uint8Array([]),
                        Sa: new Uint8Array([]),
                        Za: 0,
                        $a: 0,
                        data: null,
                        stream: C,
                      }),
                      (k = ko(new Ro([k]))),
                      e.m.set(C.id, k));
                  return (
                    (k = _D(
                      e,
                      new Vn(
                        function () {
                          return [];
                        },
                        0,
                        null,
                        Uc(C),
                        C.mssPrivateData.timescale,
                        k,
                        null,
                        C.encrypted,
                      ),
                      C,
                      t,
                      r,
                    )),
                    (C.segmentIndex = new Je(k)),
                    Promise.resolve()
                  );
                }),
                (C.closeSegmentIndex = function () {
                  C.segmentIndex && (C.segmentIndex.release(), (C.segmentIndex = null));
                }),
                C
              );
            }
            function MD(e, t, n, r) {
              if ((e = e.attributes.CodecPrivateData)) return e;
              if (t !== "audio") return null;
              ((t = r.channelsCount || 2), (e = r.audioSamplingRate || 44100));
              var i = {
                96e3: 0,
                88200: 1,
                64e3: 2,
                48e3: 3,
                44100: 4,
                32e3: 5,
                24e3: 6,
                22050: 7,
                16e3: 8,
                12e3: 9,
                11025: 10,
                8e3: 11,
                7350: 12,
              };
              return (
                (r = i[e]),
                n === "AACH"
                  ? ((n = new Uint8Array(4)),
                    (e = i[e * 2]),
                    (n[0] = 40 | (r >> 1)),
                    (n[1] = (r << 7) | (t << 3) | (e >> 1)),
                    (n[2] = (e << 7) | 8),
                    (n[3] = 0),
                    (t = new Uint16Array(2)),
                    (t[0] = (n[0] << 8) + n[1]),
                    (t[1] = (n[2] << 8) + n[3]),
                    t[0].toString(16) + t[1].toString(16))
                  : ((n = new Uint8Array(2)),
                    (n[0] = 16 | (r >> 1)),
                    (n[1] = (r << 7) | (t << 3)),
                    (t = new Uint16Array(1)),
                    (t[0] = (n[0] << 8) + n[1]),
                    t[0].toString(16))
              );
            }
            function RD(e, t) {
              var n = 0;
              return (
                e === "AACH" && (n = 5),
                t
                  ? n === 0 && (n = (parseInt(t.substr(0, 2), 16) & 248) >> 3)
                  : ((n = 2), e === "AACH" && (n = 5)),
                "mp4a.40." + n
              );
            }
            function kD(e) {
              var t = /00000001[0-9]7/.exec(e);
              return t.length && e ? "avc1." + e.substr(e.indexOf(t[0]) + 10, 6) : "";
            }
            function _D(e, t, n, r, i) {
              var s = r.attributes.Url.replace("{bitrate}", String(n.bandwidth));
              ((r = []), (i = x(i)));
              for (var o = i.next(), u = {}; !o.done; u = { Pf: void 0 }, o = i.next())
                ((u.Pf = o.value),
                  r.push(
                    new Ce(
                      u.Pf.start,
                      u.Pf.end,
                      (function (l) {
                        return function () {
                          return qt(e.l, [s.replace("{start time}", String(l.Pf.Ld))]);
                        };
                      })(u),
                      0,
                      null,
                      t,
                      0,
                      0,
                      n.mssPrivateData.duration,
                    ),
                  ));
              return r;
            }
            fe("shaka.mss.MssParser", wm);
            var PD = "AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),
              DD = new Map().set("CAPT", "main").set("SUBT", "alternate").set("DESC", "main");
            Rs("application/vnd.ms-sstr+xml", function () {
              return new wm();
            });
            function Nw(e, t, n, r, i, s, o) {
              if ((n >= 200 && n <= 299 && n != 202) || n == 304)
                return {
                  uri: i || r,
                  originalUri: r,
                  data: t,
                  status: n,
                  headers: e,
                  fromCache: !!e["x-shaka-from-cache"],
                  originalRequest: s,
                };
              s = null;
              try {
                s = ei(t);
              } catch (u) {}
              throw new H(n == 401 || n == 403 ? 2 : 1, 1, 1001, r, n, s, e, o, i || r);
            }
            function Em() {}
            function Zd(e, t, n, r, i, s) {
              var o = new jD();
              try {
                Co(t.headers).forEach(function (m, y) {
                  o.append(y, m);
                });
              } catch (m) {
                return ns(new H(1, 1, 1002, e, m, n));
              }
              var u = new OD(),
                l = { Vh: !1, ij: !1 };
              if (
                ((e = LD(
                  e,
                  t,
                  n,
                  {
                    body: t.body || void 0,
                    headers: o,
                    method: t.method,
                    signal: u.signal,
                    credentials: t.allowCrossSiteCredentials ? "include" : void 0,
                  },
                  l,
                  r,
                  i,
                  t.streamDataCallback,
                  s.minBytesForProgressEvents || 0,
                )),
                (e = new kt(e, function () {
                  return ((l.Vh = !0), u.abort(), Promise.resolve());
                })),
                (t = t.retryParameters.timeout))
              ) {
                var p = new Ve(function () {
                  ((l.ij = !0), u.abort());
                });
                (p.ka(t / 1e3),
                  e.finally(function () {
                    p.stop();
                  }));
              }
              return e;
            }
            function LD(e, t, n, r, i, s, o, u, l) {
              var p, m, y, v, w, A, E, C, k, R, L, U, G, b, B;
              return j(function (N) {
                switch (N.g) {
                  case 1:
                    return (
                      (p = ND),
                      (m = UD),
                      (v = new ArrayBuffer(0)),
                      (A = w = 0),
                      (E = {}),
                      (C = Date.now()),
                      ee(N, 2),
                      I(N, p(e, r), 4)
                    );
                  case 4:
                    if (((y = N.h), (E = bD(y.headers)), o(E), r.method == "HEAD")) {
                      N.A(5);
                      break;
                    }
                    return (
                      (R = (k = y.headers.get("Content-Length")) ? parseInt(k, 10) : 0),
                      y.body
                        ? ((L = y.clone().body.getReader()),
                          (U = function (z) {
                            function V() {
                              var X, W, ie, ne;
                              return j(function (q) {
                                switch (q.g) {
                                  case 1:
                                    return (ee(q, 2), I(q, L.read(), 4));
                                  case 4:
                                    ((X = q.h), de(q, 3));
                                    break;
                                  case 2:
                                    return (se(q), q.return());
                                  case 3:
                                    if (X.done) {
                                      q.A(5);
                                      break;
                                    }
                                    if (((w += X.value.byteLength), !u)) {
                                      q.A(5);
                                      break;
                                    }
                                    return I(q, u(X.value), 5);
                                  case 5:
                                    ((W = Date.now()),
                                      (ie = w - A),
                                      ((W - C > 100 && ie >= l) || X.done) &&
                                        ((ne = X.done ? 0 : R - w), s(W - C, ie, ne), (A = w), (C = W)),
                                      X.done ? z.close() : (z.enqueue(X.value), V()),
                                      re(q));
                                }
                              });
                            }
                            V();
                          }),
                          new m({ start: U }),
                          I(N, y.arrayBuffer(), 8))
                        : I(N, y.arrayBuffer(), 9)
                    );
                  case 8:
                    ((v = N.h), N.A(5));
                    break;
                  case 9:
                    ((v = N.h), (G = Date.now()), s(G - C, v.byteLength, 0));
                  case 5:
                    (t.headers.Range &&
                      ((b = t.headers.Range.replace("bytes=", "")
                        .split("-")
                        .filter(function (z) {
                          return z;
                        })
                        .map(function (z) {
                          return parseInt(z, 10);
                        })),
                      b.length == 2 &&
                        v.byteLength != b[1] - b[0] + 1 &&
                        je("Payload length does not match range requested bytes", t, y)),
                      de(N, 3));
                    break;
                  case 2:
                    throw (
                      (B = se(N)),
                      i.Vh
                        ? new H(1, 1, 7001, e, n)
                        : i.ij
                          ? new H(1, 1, 1003, e, n)
                          : new H(1, 1, 1002, e, B, n)
                    );
                  case 3:
                    return N.return(Nw(E, v, y.status, e, y.url, t, n));
                }
              });
            }
            function bD(e) {
              var t = {};
              return (
                e.forEach(function (n, r) {
                  t[r.trim()] = n;
                }),
                t
              );
            }
            function Ow() {
              if (g.ReadableStream)
                try {
                  new ReadableStream({});
                } catch (e) {
                  return !1;
                }
              else return !1;
              if (g.Response) {
                if (!new Response("").body) return !1;
              } else return !1;
              return !(!g.fetch || "polyfill" in g.fetch || !g.AbortController);
            }
            (fe("shaka.net.HttpFetchPlugin", Em), (Em.isSupported = Ow), (Em.parse = Zd));
            var ND = g.fetch,
              OD = g.AbortController,
              UD = g.ReadableStream,
              jD = g.Headers;
            Ow() && (wi("http", Zd, 2, !0), wi("https", Zd, 2, !0), wi("blob", Zd, 2, !0));
            function Uw() {}
            function ef(e, t, n, r, i, s) {
              var o = new BD(),
                u = Date.now(),
                l = 0,
                p = new Promise(function (m, y) {
                  (o.open(t.method, e, !0),
                    (o.responseType = "arraybuffer"),
                    (o.timeout = t.retryParameters.timeout),
                    (o.withCredentials = t.allowCrossSiteCredentials));
                  var v = {};
                  ((o.onabort = function () {
                    y(new H(1, 1, 7001, e, n));
                  }),
                    (o.onreadystatechange = function () {
                      if (o.readyState === XMLHttpRequest.HEADERS_RECEIVED) {
                        var A = o.getAllResponseHeaders().trim().split("\r\n"),
                          E = {};
                        A = x(A);
                        for (var C = A.next(); !C.done; C = A.next())
                          ((C = C.value.split(": ")), (E[C[0].toLowerCase()] = C.slice(1).join(": ")));
                        ((v = E), i(v));
                      }
                    }),
                    (o.onload = function (A) {
                      var E = o.response;
                      try {
                        r(Date.now() - u, A.loaded - l, 0);
                        var C = Nw(v, E, o.status, e, o.responseURL, t, n);
                        m(C);
                      } catch (k) {
                        y(k);
                      }
                    }),
                    (o.onerror = function (A) {
                      y(new H(1, 1, 1002, e, A, n));
                    }),
                    (o.ontimeout = function () {
                      y(new H(1, 1, 1003, e, n));
                    }),
                    (o.onprogress = function (A) {
                      var E = Date.now(),
                        C = s.minBytesForProgressEvents || 0,
                        k = A.loaded - l;
                      ((E - u > 100 && k >= C) || (A.lengthComputable && A.loaded == A.total)) &&
                        (r(E - u, k, o.readyState == 4 ? 0 : A.total - A.loaded), (l = A.loaded), (u = E));
                    }));
                  for (var w in t.headers)
                    try {
                      o.setRequestHeader(w.toLowerCase(), t.headers[w]);
                    } catch (A) {
                      throw new H(1, 1, 1002, e, A, n);
                    }
                  o.send(t.body);
                });
              return new kt(p, function () {
                return (o.abort(), Promise.resolve());
              });
            }
            (fe("shaka.net.HttpXHRPlugin", Uw), (Uw.parse = ef));
            var BD = g.XMLHttpRequest;
            (wi("http", ef, 1, !0), wi("https", ef, 1, !0), wi("blob", ef, 1, !0));
            function jw(e, t, n, r, i) {
              ((this.g = e), (this.i = t), (this.groupId = n), (this.h = r), (this.j = i));
            }
            function Im(e) {
              var t = e.$b(!1);
              return t
                ? hi(t)
                : e
                    .P()
                    .map(function (n) {
                      return "{" + encodeURI(n.split("#xywh=")[0]) + "}";
                    })
                    .join("") +
                    ":" +
                    e.startByte +
                    ":" +
                    e.endByte;
            }
            function FD(e, t) {
              return xu(e.g.P(), e.g.startByte, e.g.endByte, t.streaming.retryParameters);
            }
            function Bw() {
              ((this.g = this.j = this.i = 0), (this.h = new Map()), (this.l = 0));
            }
            function Fw(e, t) {
              e.i += t;
              var n = e.l;
              return (e.l++, e.h.set(n, t), n);
            }
            Bw.prototype.close = function (e, t) {
              if (this.h.has(e)) {
                var n = this.h.get(e);
                (this.h.delete(e), (this.j += n), (this.g += t));
              }
            };
            function Vw(e) {
              return e.i == 0 ? 0 : e.j / e.i;
            }
            function Cm(e) {
              var t = this;
              ((this.u = e),
                (this.i = new Map()),
                (this.h = new Io(function () {
                  return Mm(t).catch(function () {});
                })),
                (this.j = []),
                (this.o = function () {}),
                (this.m = function () {}),
                (this.g = new Bw()),
                (this.l = !1));
            }
            Cm.prototype.destroy = function () {
              return this.h.destroy();
            };
            function VD(e, t, n) {
              ((e.o = t), (e.m = n));
            }
            function Mm(e) {
              e.l = !0;
              var t = e.j.map(function (n) {
                return n();
              });
              return ((e.j = []), Promise.all(t));
            }
            Cm.prototype.queue = function (e, t, n, r, i) {
              var s = this;
              dt(this.h);
              var o = (this.i.get(e) || Promise.resolve()).then(function () {
                var u, l, p, m, y, v, w;
                return j(function (A) {
                  if (A.g == 1) return I(A, zD(s, t), 2);
                  if (((u = A.h), s.h.g)) throw new H(2, 9, 7001);
                  if (r)
                    for (m in ((l = De(u)), (p = new Zh(l)), p.data))
                      ((y = Number(m)), (v = p.data[y]), (w = p.g[y]), s.m(v, w));
                  return (s.g.close(n, u.byteLength), s.o(Vw(s.g), s.g.g), A.return(i(u)));
                });
              });
              return (this.i.set(e, o), o);
            };
            function HD(e, t, n, r, i, s) {
              dt(e.h);
              var o = (e.i.get(t) || Promise.resolve()).then(function () {
                if (e.h.g) throw new H(2, 9, 7001);
                if (i) {
                  var u = De(n);
                  u = new Zh(u);
                  for (var l in u.data) {
                    var p = Number(l);
                    e.m(u.data[p], u.g[p]);
                  }
                }
                return (e.g.close(r, n.byteLength), e.o(Vw(e.g), e.g.g), s(n));
              });
              e.i.set(t, o);
            }
            function GD(e) {
              return j(function (t) {
                return t.g == 1 ? I(t, Promise.all(e.i.values()), 2) : t.return(e.g.g);
              });
            }
            function zD(e, t) {
              var n, r, i, s;
              return j(function (o) {
                return o.g == 1
                  ? ((n = Ar),
                    (r = e.u.request(n, t)),
                    (i = function () {
                      return r.abort();
                    }),
                    e.j.push(i),
                    I(o, r.promise, 2))
                  : ((s = o.h), Nr(e.j, i), o.return(s.data));
              });
            }
            function tf(e, t) {
              var n = this;
              ((this.i = e),
                (this.h = e.objectStore(t)),
                (this.g = new at()),
                (e.onabort = function (r) {
                  (r.preventDefault(), n.g.reject());
                }),
                (e.onerror = function (r) {
                  (r.preventDefault(), n.g.reject());
                }),
                (e.oncomplete = function () {
                  n.g.resolve();
                }));
            }
            tf.prototype.abort = function () {
              var e = this;
              return j(function (t) {
                if (t.g == 1) {
                  try {
                    e.i.abort();
                  } catch (n) {}
                  return (ee(t, 2), I(t, e.g, 4));
                }
                if (t.g != 2) return de(t, 0);
                (se(t), re(t));
              });
            };
            function Rm(e, t) {
              return new Promise(function (n, r) {
                var i = e.h.openCursor();
                ((i.onerror = r),
                  (i.onsuccess = function () {
                    var s;
                    return j(function (o) {
                      if (o.g == 1)
                        return i.result == null
                          ? (n(), o.return())
                          : ((s = i.result), I(o, t(s.key, s.value, s), 2));
                      (s.continue(), re(o));
                    });
                  }));
              });
            }
            ((tf.prototype.store = function () {
              return this.h;
            }),
              (tf.prototype.promise = function () {
                return this.g;
              }));
            function km(e) {
              ((this.h = e), (this.g = []));
            }
            km.prototype.destroy = function () {
              return Promise.all(
                this.g.map(function (e) {
                  return e.abort();
                }),
              );
            };
            function Ys(e, t) {
              return nf(e, t, "readwrite");
            }
            function nf(e, t, n) {
              n = e.h.transaction([t], n);
              var r = new tf(n, t);
              return (
                e.g.push(r),
                r.promise().then(
                  function () {
                    Nr(e.g, r);
                  },
                  function () {
                    Nr(e.g, r);
                  },
                ),
                r
              );
            }
            function qs(e, t, n) {
              ((this.h = new km(e)), (this.i = t), (this.g = n));
            }
            ((h = qs.prototype),
              (h.destroy = function () {
                return this.h.destroy();
              }),
              (h.hasFixedKeySpace = function () {
                return !0;
              }),
              (h.addSegments = function () {
                return Hw(this.i);
              }),
              (h.removeSegments = function (e, t) {
                return Gw(this, this.i, e, t);
              }),
              (h.getSegments = function (e) {
                var t = this,
                  n;
                return j(function (r) {
                  return r.g == 1
                    ? I(r, zw(t, t.i, e), 2)
                    : ((n = r.h),
                      r.return(
                        n.map(function (i) {
                          return t.Xh(i);
                        }),
                      ));
                });
              }),
              (h.addManifests = function () {
                return Hw(this.g);
              }),
              (h.updateManifest = function () {
                return Promise.reject(new H(2, 9, 9016, "Cannot modify values in " + this.g));
              }));
            function XD(e, t, n) {
              e = Ys(e.h, e.g);
              var r = e.store();
              return (
                (r.get(t).onsuccess = function () {
                  r.put(n, t);
                }),
                e.promise()
              );
            }
            ((h.updateManifestExpiration = function (e, t) {
              var n = Ys(this.h, this.g),
                r = n.store();
              return (
                (r.get(e).onsuccess = function (i) {
                  (i = i.target.result) && ((i.expiration = t), r.put(i, e));
                }),
                n.promise()
              );
            }),
              (h.removeManifests = function (e, t) {
                return Gw(this, this.g, e, t);
              }),
              (h.getManifests = function (e) {
                var t = this,
                  n;
                return j(function (r) {
                  return r.g == 1
                    ? I(r, zw(t, t.g, e), 2)
                    : ((n = r.h),
                      r.return(
                        Promise.all(
                          n.map(function (i) {
                            return t.Ud(i);
                          }),
                        ),
                      ));
                });
              }),
              (h.getAllManifests = function () {
                var e = this,
                  t,
                  n;
                return j(function (r) {
                  return r.g == 1
                    ? ((t = nf(e.h, e.g, "readonly")),
                      (n = new Map()),
                      I(
                        r,
                        Rm(t, function (i, s) {
                          var o;
                          return j(function (u) {
                            if (u.g == 1) return I(u, e.Ud(s), 2);
                            ((o = u.h), n.set(i, o), re(u));
                          });
                        }),
                        2,
                      ))
                    : r.g != 3
                      ? I(r, t.promise(), 3)
                      : r.return(n);
                });
              }),
              (h.Xh = function (e) {
                return e;
              }),
              (h.Ud = function (e) {
                return Promise.resolve(e);
              }));
            function Hw(e) {
              return Promise.reject(new H(2, 9, 9011, "Cannot add new value to " + e));
            }
            h.add = function (e, t) {
              var n = this,
                r,
                i,
                s,
                o,
                u,
                l,
                p;
              return j(function (m) {
                if (m.g == 1) {
                  for (
                    r = Ys(n.h, e), i = r.store(), s = [], o = x(t), u = o.next(), l = {};
                    !u.done;
                    l = { hh: void 0 }, u = o.next()
                  )
                    ((p = u.value),
                      (l.hh = i.add(p)),
                      (l.hh.onsuccess = (function (y) {
                        return function () {
                          s.push(y.hh.result);
                        };
                      })(l)));
                  return I(m, r.promise(), 2);
                }
                return m.return(s);
              });
            };
            function Gw(e, t, n, r) {
              ((e = Ys(e.h, t)), (t = e.store()), (n = x(n)));
              for (var i = n.next(), s = {}; !i.done; s = { Tg: void 0 }, i = n.next())
                ((s.Tg = i.value),
                  (t.delete(s.Tg).onsuccess = (function (o) {
                    return function () {
                      return r(o.Tg);
                    };
                  })(s)));
              return e.promise();
            }
            function zw(e, t, n) {
              var r, i, s, o, u, l, p;
              return j(function (m) {
                if (m.g == 1) {
                  for (
                    r = nf(e.h, t, "readonly"), i = r.store(), s = {}, o = [], u = x(n), l = u.next(), p = {};
                    !l.done;
                    p = { Ef: void 0, lf: void 0 }, l = u.next()
                  )
                    ((p.lf = l.value),
                      (p.Ef = i.get(p.lf)),
                      (p.Ef.onsuccess = (function (y) {
                        return function () {
                          (y.Ef.result == null && o.push(y.lf), (s[y.lf] = y.Ef.result));
                        };
                      })(p)));
                  return I(m, r.promise(), 2);
                }
                if (o.length) throw new H(2, 9, 9012, "Could not find values for " + o);
                return m.return(
                  n.map(function (y) {
                    return s[y];
                  }),
                );
              });
            }
            function Zu(e) {
              this.g = new km(e);
            }
            ((Zu.prototype.destroy = function () {
              return this.g.destroy();
            }),
              (Zu.prototype.getAll = function () {
                var e = this,
                  t,
                  n;
                return j(function (r) {
                  return r.g == 1
                    ? ((t = nf(e.g, "session-ids", "readonly")),
                      (n = []),
                      I(
                        r,
                        Rm(t, function (i, s) {
                          n.push(s);
                        }),
                        2,
                      ))
                    : r.g != 3
                      ? I(r, t.promise(), 3)
                      : r.return(n);
                });
              }),
              (Zu.prototype.add = function (e) {
                var t = Ys(this.g, "session-ids"),
                  n = t.store();
                e = x(e);
                for (var r = e.next(); !r.done; r = e.next()) n.add(r.value);
                return t.promise();
              }),
              (Zu.prototype.remove = function (e) {
                var t = this,
                  n;
                return j(function (r) {
                  return r.g == 1
                    ? ((n = Ys(t.g, "session-ids")),
                      I(
                        r,
                        Rm(n, function (i, s, o) {
                          e.includes(s.sessionId) && o.delete();
                        }),
                        2,
                      ))
                    : I(r, n.promise(), 0);
                });
              }));
            function zn() {
              this.g = new Map();
            }
            ((zn.prototype.destroy = function () {
              for (var e = [], t = x(this.g.values()), n = t.next(); !n.done; n = t.next())
                e.push(n.value.destroy());
              return (this.g.clear(), Promise.all(e));
            }),
              (zn.prototype.init = function () {
                var e = this;
                el.forEach(function (i, s) {
                  (i = i()) && e.g.set(s, i);
                });
                for (var t = [], n = x(this.g.values()), r = n.next(); !r.done; r = n.next())
                  t.push(r.value.init());
                return Promise.all(t);
              }));
            function Xw(e) {
              var t = null;
              if (
                (e.g.forEach(function (n, r) {
                  n.getCells().forEach(function (i, s) {
                    i.hasFixedKeySpace() || t || (t = { path: { Pb: r, cb: s }, cb: i });
                  });
                }),
                t)
              )
                return t;
              throw new H(2, 9, 9013, "Could not find a cell that supports add-operations");
            }
            function WD(e, t) {
              e.g.forEach(function (n, r) {
                n.getCells().forEach(function (i, s) {
                  t({ Pb: r, cb: s }, i);
                });
              });
            }
            function rf(e, t, n) {
              if (((e = e.g.get(t)), !e)) throw new H(2, 9, 9013, "Could not find mechanism with name " + t);
              if (((t = e.getCells().get(n)), !t))
                throw new H(2, 9, 9013, "Could not find cell with name " + n);
              return t;
            }
            function KD(e, t) {
              e.g.forEach(function (n) {
                t(n.getEmeSessionCell());
              });
            }
            function $D(e) {
              var t = Array.from(e.g.keys());
              if (!t.length) throw new H(2, 9, 9e3, "No supported storage mechanisms found");
              return e.g.get(t[0]).getEmeSessionCell();
            }
            function YD(e) {
              var t, n, r;
              return j(function (i) {
                return i.g == 1
                  ? ((t = Array.from(e.g.values())),
                    (n = t.length > 0),
                    n ||
                      ((r = el),
                      r.forEach(function (s) {
                        (s = s()) && t.push(s);
                      })),
                    I(
                      i,
                      Promise.all(
                        t.map(function (s) {
                          return s.erase();
                        }),
                      ),
                      2,
                    ))
                  : n
                    ? i.A(0)
                    : I(
                        i,
                        Promise.all(
                          t.map(function (s) {
                            return s.destroy();
                          }),
                        ),
                        0,
                      );
              });
            }
            function Ww(e, t) {
              el.set(e, t);
            }
            (fe("shaka.offline.StorageMuxer", zn),
              (zn.unregister = function (e) {
                el.delete(e);
              }),
              (zn.register = Ww),
              (zn.prototype.destroy = zn.prototype.destroy));
            var el = new Map();
            function tl() {
              qs.apply(this, arguments);
            }
            (J(tl, qs),
              (tl.prototype.updateManifestExpiration = function (e, t) {
                var n = this,
                  r,
                  i,
                  s;
                return j(function (o) {
                  return (
                    (r = Ys(n.h, n.g)),
                    (i = r.store()),
                    (s = new at()),
                    (i.get(e).onsuccess = function (u) {
                      (u = u.target.result)
                        ? ((u.expiration = t), i.put(u), s.resolve())
                        : s.reject(new H(2, 9, 9012, "Could not find values for " + e));
                    }),
                    I(o, Promise.all([r.promise(), s]), 0)
                  );
                });
              }),
              (tl.prototype.Ud = function (e) {
                var t, n, r, i, s, o;
                return j(function (u) {
                  if (u.g == 1) {
                    for (t = [], n = 0; n < e.periods.length; ++n)
                      ((r = n == e.periods.length - 1 ? e.duration : e.periods[n + 1].startTime),
                        (i = r - e.periods[n].startTime),
                        (s = qD(e.periods[n], i)),
                        t.push(s));
                    return I(u, CS(t), 2);
                  }
                  return (
                    (o = u.h),
                    u.return({
                      creationTime: 0,
                      originalManifestUri: e.originalManifestUri,
                      duration: e.duration,
                      size: e.size,
                      expiration: e.expiration == null ? 1 / 0 : e.expiration,
                      streams: o,
                      sessionIds: e.sessionIds,
                      drmInfo: e.drmInfo,
                      appMetadata: e.appMetadata,
                      sequenceMode: !1,
                    })
                  );
                });
              }));
            function qD(e, t) {
              QD(e);
              for (var n = x(e.streams), r = n.next(); !r.done; r = n.next());
              return e.streams.map(function (i) {
                return JD(i, e.startTime, t);
              });
            }
            function JD(e, t, n) {
              var r = e.initSegmentUri ? Kw(e.initSegmentUri) : null,
                i = t + e.presentationTimeOffset,
                s = t + n;
              return {
                id: e.id,
                originalId: null,
                groupId: null,
                primary: e.primary,
                type: e.contentType,
                mimeType: e.mimeType,
                codecs: e.codecs,
                frameRate: e.frameRate,
                pixelAspectRatio: void 0,
                hdr: void 0,
                colorGamut: void 0,
                videoLayout: void 0,
                kind: e.kind,
                language: e.language,
                originalLanguage: e.language || null,
                label: e.label,
                width: e.width,
                height: e.height,
                initSegmentKey: r,
                encrypted: e.encrypted,
                keyIds: new Set([e.keyId]),
                segments: e.segments.map(function (o) {
                  var u = Kw(o.uri);
                  return {
                    startTime: t + o.startTime,
                    endTime: t + o.endTime,
                    dataKey: u,
                    initSegmentKey: r,
                    appendWindowStart: t,
                    appendWindowEnd: s,
                    timestampOffset: i,
                    tilesLayout: "",
                    mimeType: null,
                    codecs: null,
                    thumbnailSprite: null,
                  };
                }),
                variantIds: e.variantIds,
                roles: [],
                forced: !1,
                audioSamplingRate: null,
                channelsCount: null,
                spatialAudio: !1,
                closedCaptions: null,
                tilesLayout: void 0,
                external: !1,
                fastSwitching: !1,
                isAudioMuxedInVideo: !1,
              };
            }
            tl.prototype.Xh = function (e) {
              return { data: e.data };
            };
            function Kw(e) {
              var t;
              if (
                (t = /^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e)) ||
                (t = /^offline:segment\/([0-9]+)$/.exec(e))
              )
                return Number(t[1]);
              throw new H(2, 9, 9004, "Could not parse uri " + e);
            }
            function QD(e) {
              var t = e.streams.filter(function (u) {
                return u.contentType == "audio";
              });
              if (
                ((e = e.streams.filter(function (u) {
                  return u.contentType == "video";
                })),
                !t.every(function (u) {
                  return u.variantIds;
                }) ||
                  !e.every(function (u) {
                    return u.variantIds;
                  }))
              ) {
                for (var n = x(t), r = n.next(); !r.done; r = n.next()) r.value.variantIds = [];
                for (n = x(e), r = n.next(); !r.done; r = n.next()) r.value.variantIds = [];
                if (((n = 0), e.length && !t.length)) {
                  r = n++;
                  for (var i = x(e), s = i.next(); !s.done; s = i.next()) s.value.variantIds.push(r);
                }
                if (!e.length && t.length)
                  for (r = n++, i = x(t), s = i.next(); !s.done; s = i.next()) s.value.variantIds.push(r);
                if (e.length && t.length)
                  for (t = x(t), r = t.next(); !r.done; r = t.next())
                    for (r = r.value, i = x(e), s = i.next(); !s.done; s = i.next()) {
                      s = s.value;
                      var o = n++;
                      (r.variantIds.push(o), s.variantIds.push(o));
                    }
              }
            }
            function sf() {
              qs.apply(this, arguments);
            }
            (J(sf, qs),
              (sf.prototype.Ud = function (e) {
                var t, n, r, i, s, o;
                return j(function (u) {
                  if (u.g == 1) {
                    for (t = [], n = 0; n < e.periods.length; ++n) {
                      ((r = n == e.periods.length - 1 ? e.duration : e.periods[n + 1].startTime),
                        (i = r - e.periods[n].startTime));
                      for (
                        var l = e.periods[n], p = [], m = x(l.streams), y = m.next();
                        !y.done;
                        y = m.next()
                      )
                        ((y = y.value),
                          y.variantIds.length != 0 && p.push(ZD(y, l.startTime, l.startTime + i)));
                      ((s = p), t.push(s));
                    }
                    return I(u, CS(t), 2);
                  }
                  return (
                    (o = u.h),
                    u.return({
                      appMetadata: e.appMetadata,
                      creationTime: 0,
                      drmInfo: e.drmInfo,
                      duration: e.duration,
                      expiration: e.expiration == null ? 1 / 0 : e.expiration,
                      originalManifestUri: e.originalManifestUri,
                      sessionIds: e.sessionIds,
                      size: e.size,
                      streams: o,
                      sequenceMode: !1,
                    })
                  );
                });
              }));
            function ZD(e, t, n) {
              return {
                id: e.id,
                originalId: e.originalId,
                groupId: null,
                primary: e.primary,
                type: e.contentType,
                mimeType: e.mimeType,
                codecs: e.codecs,
                frameRate: e.frameRate,
                pixelAspectRatio: e.pixelAspectRatio,
                hdr: void 0,
                colorGamut: void 0,
                videoLayout: void 0,
                kind: e.kind,
                language: e.language,
                originalLanguage: e.language || null,
                label: e.label,
                width: e.width,
                height: e.height,
                encrypted: e.encrypted,
                keyIds: new Set([e.keyId]),
                segments: e.segments.map(function (r) {
                  return {
                    startTime: t + r.startTime,
                    endTime: t + r.endTime,
                    initSegmentKey: e.initSegmentKey,
                    appendWindowStart: t,
                    appendWindowEnd: n,
                    timestampOffset: t - e.presentationTimeOffset,
                    dataKey: r.dataKey,
                    tilesLayout: "",
                    mimeType: null,
                    codecs: null,
                    thumbnailSprite: null,
                  };
                }),
                variantIds: e.variantIds,
                roles: [],
                forced: !1,
                audioSamplingRate: null,
                channelsCount: null,
                spatialAudio: !1,
                closedCaptions: null,
                tilesLayout: void 0,
                external: !1,
                fastSwitching: !1,
                isAudioMuxedInVideo: !1,
              };
            }
            function _m() {
              qs.apply(this, arguments);
            }
            (J(_m, qs),
              (h = _m.prototype),
              (h.hasFixedKeySpace = function () {
                return !1;
              }),
              (h.addSegments = function (e) {
                return this.add(this.i, e);
              }),
              (h.addManifests = function (e) {
                return this.add(this.g, e);
              }),
              (h.updateManifest = function (e, t) {
                return XD(this, e, t);
              }),
              (h.Ud = function (e) {
                return (e.expiration == null && (e.expiration = 1 / 0), Promise.resolve(e));
              }));
            function $w() {
              this.m = this.j = this.i = this.h = this.g = this.l = null;
            }
            ((h = $w.prototype),
              (h.init = function () {
                var e = this,
                  t = new at(),
                  n = !1,
                  r = new Ve(function () {
                    ((n = !0), t.reject(new H(2, 9, 9017)));
                  });
                typeof of == "number" && of > 0 && r.ka(of);
                var i = g.indexedDB.open("shaka_offline_db", 5);
                return (
                  (i.onsuccess = function () {
                    if (!n) {
                      r.stop();
                      var s = i.result;
                      e.l = s;
                      var o = s.objectStoreNames;
                      ((o =
                        o.contains("manifest") && o.contains("segment")
                          ? new tl(s, "segment", "manifest")
                          : null),
                        (e.g = o),
                        (o = s.objectStoreNames),
                        (o =
                          o.contains("manifest-v2") && o.contains("segment-v2")
                            ? new sf(s, "segment-v2", "manifest-v2")
                            : null),
                        (e.h = o),
                        (o = s.objectStoreNames),
                        (o =
                          o.contains("manifest-v3") && o.contains("segment-v3")
                            ? new sf(s, "segment-v3", "manifest-v3")
                            : null),
                        (e.i = o),
                        (o = s.objectStoreNames),
                        (o =
                          o.contains("manifest-v5") && o.contains("segment-v5")
                            ? new _m(s, "segment-v5", "manifest-v5")
                            : null),
                        (e.j = o),
                        (s = s.objectStoreNames.contains("session-ids") ? new Zu(s) : null),
                        (e.m = s),
                        t.resolve());
                    }
                  }),
                  (i.onupgradeneeded = function () {
                    for (
                      var s = i.result, o = x(["segment-v5", "manifest-v5", "session-ids"]), u = o.next();
                      !u.done;
                      u = o.next()
                    )
                      ((u = u.value),
                        s.objectStoreNames.contains(u) || s.createObjectStore(u, { autoIncrement: !0 }));
                  }),
                  (i.onerror = function (s) {
                    n || (r.stop(), t.reject(new H(2, 9, 9001, i.error)), s.preventDefault());
                  }),
                  t
                );
              }),
              (h.destroy = function () {
                var e = this;
                return j(function (t) {
                  switch (t.g) {
                    case 1:
                      if (!e.g) {
                        t.A(2);
                        break;
                      }
                      return I(t, e.g.destroy(), 2);
                    case 2:
                      if (!e.h) {
                        t.A(4);
                        break;
                      }
                      return I(t, e.h.destroy(), 4);
                    case 4:
                      if (!e.i) {
                        t.A(6);
                        break;
                      }
                      return I(t, e.i.destroy(), 6);
                    case 6:
                      if (!e.j) {
                        t.A(8);
                        break;
                      }
                      return I(t, e.j.destroy(), 8);
                    case 8:
                      if (!e.m) {
                        t.A(10);
                        break;
                      }
                      return I(t, e.m.destroy(), 10);
                    case 10:
                      (e.l && e.l.close(), re(t));
                  }
                });
              }),
              (h.getCells = function () {
                var e = new Map();
                return (
                  this.g && e.set("v1", this.g),
                  this.h && e.set("v2", this.h),
                  this.i && e.set("v3", this.i),
                  this.j && e.set("v5", this.j),
                  e
                );
              }),
              (h.getEmeSessionCell = function () {
                return this.m;
              }),
              (h.erase = function () {
                var e = this;
                return j(function (t) {
                  switch (t.g) {
                    case 1:
                      if (!e.g) {
                        t.A(2);
                        break;
                      }
                      return I(t, e.g.destroy(), 2);
                    case 2:
                      if (!e.h) {
                        t.A(4);
                        break;
                      }
                      return I(t, e.h.destroy(), 4);
                    case 4:
                      if (!e.i) {
                        t.A(6);
                        break;
                      }
                      return I(t, e.i.destroy(), 6);
                    case 6:
                      if (!e.j) {
                        t.A(8);
                        break;
                      }
                      return I(t, e.j.destroy(), 8);
                    case 8:
                      return (e.l && e.l.close(), I(t, e4(), 10));
                    case 10:
                      return (
                        (e.l = null),
                        (e.g = null),
                        (e.h = null),
                        (e.i = null),
                        (e.j = null),
                        I(t, e.init(), 0)
                      );
                  }
                });
              }));
            function e4() {
              var e = new at(),
                t = g.indexedDB.deleteDatabase("shaka_offline_db");
              return (
                (t.onblocked = function () {}),
                (t.onsuccess = function () {
                  e.resolve();
                }),
                (t.onerror = function (n) {
                  (e.reject(new H(2, 9, 9001, t.error)), n.preventDefault());
                }),
                e
              );
            }
            var of = 5;
            (fe("shaka.offline.indexeddb.StorageMechanismOpenTimeout", of),
              Ww("idb", function () {
                return Be().Ch() ? new $w() : null;
              }));
            function ai(e, t, n, r) {
              ((this.g = e),
                (this.i = t),
                (this.h = n),
                (this.l = r),
                (this.j = ["offline:", e, "/", t, "/", n, "/", r].join("")));
            }
            ((ai.prototype.Pb = function () {
              return this.i;
            }),
              (ai.prototype.cb = function () {
                return this.h;
              }),
              (ai.prototype.key = function () {
                return this.l;
              }),
              (ai.prototype.toString = function () {
                return this.j;
              }));
            function Pm(e) {
              if (((e = /^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)), e == null)) return null;
              var t = e[1];
              if (t != "manifest" && t != "segment") return null;
              var n = e[2];
              if (!n) return null;
              var r = e[3];
              return r && t != null ? new ai(t, n, r, Number(e[4])) : null;
            }
            function Yw(e, t) {
              ((this.h = e), (this.g = t));
            }
            function qw(e, t) {
              var n = new Pe(null, 0);
              n.Ab(t.duration);
              var r = t.streams.filter(function (p) {
                  return p.type == "audio";
                }),
                i = t.streams.filter(function (p) {
                  return p.type == "video";
                });
              ((r = t4(e, r, i, n)),
                (i = t.streams
                  .filter(function (p) {
                    return p.type == Fe;
                  })
                  .map(function (p) {
                    return af(e, p, n);
                  })));
              var s = t.streams
                  .filter(function (p) {
                    return p.type == "image";
                  })
                  .map(function (p) {
                    return af(e, p, n);
                  }),
                o = t.drmInfo ? [t.drmInfo] : [];
              if (t.drmInfo)
                for (var u = x(r.values()), l = u.next(); !l.done; l = u.next())
                  ((l = l.value),
                    l.audio && l.audio.encrypted && (l.audio.drmInfos = o),
                    l.video && l.video.encrypted && (l.video.drmInfos = o));
              return {
                presentationTimeline: n,
                offlineSessionIds: t.sessionIds,
                variants: Array.from(r.values()),
                textStreams: i,
                imageStreams: s,
                sequenceMode: t.sequenceMode || !1,
                ignoreManifestTimestampsInSegmentsMode: !1,
                type: t.type || "UNKNOWN",
                serviceDescription: null,
                nextUrl: null,
                periodCount: 1,
                gapCount: 0,
                isLowLatency: !1,
                startTime: null,
              };
            }
            function t4(e, t, n, r) {
              for (var i = new Set(), s = x(t), o = s.next(); !o.done; o = s.next()) {
                o = x(o.value.variantIds);
                for (var u = o.next(); !u.done; u = o.next()) i.add(u.value);
              }
              for (s = x(n), o = s.next(); !o.done; o = s.next())
                for (o = x(o.value.variantIds), u = o.next(); !u.done; u = o.next()) i.add(u.value);
              for (s = new Map(), i = x(i), o = i.next(); !o.done; o = i.next())
                ((o = o.value),
                  s.set(o, {
                    id: o,
                    language: "",
                    disabledUntilTime: 0,
                    primary: !1,
                    audio: null,
                    video: null,
                    bandwidth: 0,
                    allowedByApplication: !0,
                    allowedByKeySystem: !0,
                    decodingInfos: [],
                  }));
              for (t = x(t), i = t.next(); !i.done; i = t.next())
                for (o = i.value, i = af(e, o, r), o = x(o.variantIds), u = o.next(); !u.done; u = o.next())
                  ((u = s.get(u.value)),
                    (u.language = i.language),
                    (u.primary = u.primary || i.primary),
                    (u.audio = i));
              for (n = x(n), t = n.next(); !t.done; t = n.next())
                for (i = t.value, t = af(e, i, r), i = x(i.variantIds), o = i.next(); !o.done; o = i.next())
                  ((o = s.get(o.value)), (o.primary = o.primary || t.primary), (o.video = t));
              return s;
            }
            function af(e, t, n) {
              var r = t.segments.map(function (i) {
                return n4(e, i, t);
              });
              return (
                n.me(r),
                {
                  id: t.id,
                  originalId: t.originalId,
                  groupId: t.groupId,
                  createSegmentIndex: function () {
                    return Promise.resolve();
                  },
                  segmentIndex: new Je(r),
                  mimeType: t.mimeType,
                  codecs: t.codecs,
                  width: t.width || void 0,
                  height: t.height || void 0,
                  frameRate: t.frameRate,
                  pixelAspectRatio: t.pixelAspectRatio,
                  hdr: t.hdr,
                  colorGamut: t.colorGamut,
                  videoLayout: t.videoLayout,
                  kind: t.kind,
                  encrypted: t.encrypted,
                  drmInfos: [],
                  keyIds: t.keyIds,
                  language: t.language,
                  originalLanguage: t.originalLanguage || null,
                  label: t.label,
                  type: t.type,
                  primary: t.primary,
                  trickModeVideo: null,
                  dependencyStream: null,
                  emsgSchemeIdUris: null,
                  roles: t.roles,
                  forced: t.forced,
                  channelsCount: t.channelsCount,
                  audioSamplingRate: t.audioSamplingRate,
                  spatialAudio: t.spatialAudio,
                  closedCaptions: t.closedCaptions,
                  tilesLayout: t.tilesLayout,
                  mssPrivateData: t.mssPrivateData,
                  accessibilityPurpose: null,
                  external: t.external,
                  fastSwitching: t.fastSwitching,
                  fullMimeTypes: new Set([Rt(t.mimeType, t.codecs)]),
                  isAudioMuxedInVideo: t.isAudioMuxedInVideo || !1,
                  baseOriginalId: null,
                }
              );
            }
            function n4(e, t, n) {
              var r = new ai("segment", e.h, e.g, t.dataKey);
              return (
                (e = new Ce(
                  t.startTime,
                  t.endTime,
                  function () {
                    return [r.toString()];
                  },
                  0,
                  null,
                  t.initSegmentKey != null ? r4(e, t.initSegmentKey) : null,
                  t.timestampOffset,
                  t.appendWindowStart,
                  t.appendWindowEnd,
                  [],
                  t.tilesLayout || "",
                )),
                (e.mimeType = t.mimeType || n.mimeType || ""),
                (e.codecs = t.codecs || n.codecs || ""),
                t.thumbnailSprite && e.Mf(t.thumbnailSprite),
                e
              );
            }
            function r4(e, t) {
              var n = new ai("segment", e.h, e.g, t);
              return new Vn(
                function () {
                  return [n.toString()];
                },
                0,
                null,
              );
            }
            function Jw() {
              this.g = null;
            }
            ((h = Jw.prototype),
              (h.configure = function () {}),
              (h.start = function (e, t) {
                var n = this,
                  r,
                  i,
                  s,
                  o,
                  u,
                  l,
                  p;
                return j(function (m) {
                  switch (m.g) {
                    case 1:
                      if (((r = Pm(e)), (n.g = r), r == null || r.g != "manifest"))
                        throw new H(2, 1, 9004, e);
                      return ((i = new zn()), ge(m, 2), I(m, i.init(), 4));
                    case 4:
                      return I(m, rf(i, r.Pb(), r.cb()), 5);
                    case 5:
                      return ((s = m.h), I(m, s.getManifests([r.key()]), 6));
                    case 6:
                      return (
                        (o = m.h),
                        (u = o[0]),
                        (l = new Yw(r.Pb(), r.cb())),
                        (p = qw(l, u)),
                        t.makeTextStreamsForClosedCaptions(p),
                        m.return(p)
                      );
                    case 2:
                      return (ye(m), I(m, i.destroy(), 7));
                    case 7:
                      Ne(m, 0);
                  }
                });
              }),
              (h.stop = function () {
                return Promise.resolve();
              }),
              (h.update = function () {}),
              (h.onExpirationUpdated = function (e, t) {
                var n = this,
                  r,
                  i,
                  s,
                  o,
                  u,
                  l,
                  p;
                return j(function (m) {
                  switch (m.g) {
                    case 1:
                      return ((r = n.g), (i = new zn()), ee(m, 2, 3), I(m, i.init(), 5));
                    case 5:
                      return I(m, rf(i, r.Pb(), r.cb()), 6);
                    case 6:
                      return ((s = m.h), I(m, s.getManifests([r.key()]), 7));
                    case 7:
                      if (
                        ((o = m.h),
                        (u = o[0]),
                        (l = u.sessionIds.includes(e)),
                        (p = u.expiration == null || u.expiration > t),
                        !l || !p)
                      ) {
                        m.A(3);
                        break;
                      }
                      return I(m, s.updateManifestExpiration(r.key(), t), 3);
                    case 3:
                      return (ye(m), I(m, i.destroy(), 10));
                    case 10:
                      Ne(m, 0);
                      break;
                    case 2:
                      (se(m), m.A(3));
                  }
                });
              }),
              (h.onInitialVariantChosen = function () {}),
              (h.banLocation = function () {}),
              (h.setMediaElement = function () {}),
              Rs("application/x-offline-manifest", function () {
                return new Jw();
              }));
            function Qw() {}
            function Zw(e, t) {
              var n = Pm(e);
              return (
                n && n.g == "manifest"
                  ? ((e = {
                      uri: e,
                      originalUri: e,
                      data: new ArrayBuffer(0),
                      headers: { "content-type": "application/x-offline-manifest" },
                      originalRequest: t,
                    }),
                    (e = Ao(e)))
                  : (e = n && n.g == "segment" ? i4(n.key(), n, t) : ns(new H(2, 1, 9004, e))),
                e
              );
            }
            function i4(e, t, n) {
              var r = new zn();
              return Ao(void 0)
                .Xa(function () {
                  return r.init();
                })
                .Xa(function () {
                  return rf(r, t.Pb(), t.cb());
                })
                .Xa(function (i) {
                  return i.getSegments([t.key()]);
                })
                .Xa(function (i) {
                  return { uri: t, data: i[0].data, headers: {}, originalRequest: n };
                })
                .finally(function () {
                  return r.destroy();
                });
            }
            (fe("shaka.offline.OfflineScheme", Qw), (Qw.plugin = Zw), wi("offline", Zw));
            function eA(e, t, n) {
              var r, i, s, o, u, l;
              return j(function (p) {
                switch (p.g) {
                  case 1:
                    r = [];
                    for (var m = [], y = x(n), v = y.next(); !v.done; v = y.next()) {
                      v = v.value;
                      for (var w = !1, A = x(m), E = A.next(); !E.done; E = A.next())
                        if (((E = E.value), o4(E.info, v))) {
                          (E.sessionIds.push(v.sessionId), (w = !0));
                          break;
                        }
                      w || m.push({ info: v, sessionIds: [v.sessionId] });
                    }
                    ((i = x(m)), (s = i.next()));
                  case 2:
                    if (s.done) {
                      p.A(4);
                      break;
                    }
                    return ((o = s.value), (u = s4(e, t, o)), I(p, u, 5));
                  case 5:
                    ((l = p.h), (r = r.concat(l)), (s = i.next()), p.A(2));
                    break;
                  case 4:
                    return p.return(r);
                }
              });
            }
            function s4(e, t, n) {
              var r, i;
              return j(function (s) {
                switch (s.g) {
                  case 1:
                    return (
                      (r = new wc({
                        vc: t,
                        onError: function () {},
                        zf: function () {},
                        onExpirationUpdated: function () {},
                        onEvent: function () {},
                      })),
                      ee(s, 2),
                      r.configure(e),
                      I(
                        s,
                        jC(
                          r,
                          n.info.keySystem,
                          n.info.licenseUri,
                          n.info.serverCertificate,
                          n.info.audioCapabilities,
                          n.info.videoCapabilities,
                        ),
                        4,
                      )
                    );
                  case 4:
                    de(s, 3);
                    break;
                  case 2:
                    return (se(s), I(s, r.destroy(), 5));
                  case 5:
                    return s.return([]);
                  case 3:
                    return (
                      (i = []),
                      I(
                        s,
                        Promise.all(
                          n.sessionIds.map(function (o) {
                            return j(function (u) {
                              if (u.g == 1) return (ee(u, 2), I(u, VC(r, o), 4));
                              if (u.g != 2) return (i.push(o), de(u, 0));
                              (se(u), re(u));
                            });
                          }),
                        ),
                        6,
                      )
                    );
                  case 6:
                    return I(s, r.destroy(), 7);
                  case 7:
                    return s.return(i);
                }
              });
            }
            function o4(e, t) {
              function n(r, i) {
                return r.robustness == i.robustness && r.contentType == i.contentType;
              }
              return (
                e.keySystem == t.keySystem &&
                e.licenseUri == t.licenseUri &&
                Es(e.audioCapabilities, t.audioCapabilities, n) &&
                Es(e.videoCapabilities, t.videoCapabilities, n)
              );
            }
            function a4(e, t, n) {
              var r = t.presentationTimeline.getDuration();
              return (
                (t = tA(t)),
                {
                  offlineUri: null,
                  originalManifestUri: e,
                  duration: r,
                  size: 0,
                  expiration: 1 / 0,
                  tracks: t,
                  appMetadata: n,
                  isIncomplete: !1,
                }
              );
            }
            function Dm(e, t) {
              var n = qw(new Yw(e.Pb(), e.cb()), t),
                r = t.appMetadata || {};
              return (
                (n = tA(n)),
                {
                  offlineUri: e.toString(),
                  originalManifestUri: t.originalManifestUri,
                  duration: t.duration,
                  size: t.size,
                  expiration: t.expiration,
                  tracks: n,
                  appMetadata: r,
                  isIncomplete: t.isIncomplete || !1,
                }
              );
            }
            function tA(e) {
              var t = [],
                n = hc(e.variants);
              n = x(n);
              for (var r = n.next(); !r.done; r = n.next()) t.push(Os(r.value));
              for (e = x(e.textStreams), n = e.next(); !n.done; n = e.next()) t.push(Us(n.value));
              return t;
            }
            function u4() {
              this.g = new Map();
            }
            function l4(e, t) {
              var n = t.audio,
                r = t.video;
              if (
                (n && !r && e.g.set(n.id, n.bandwidth || t.bandwidth),
                !n && r && e.g.set(r.id, r.bandwidth || t.bandwidth),
                n && r)
              ) {
                var i = n.bandwidth || 393216,
                  s = r.bandwidth || t.bandwidth - i;
                (s <= 0 && (s = t.bandwidth), e.g.set(n.id, i), e.g.set(r.id, s));
              }
            }
            function c4(e, t) {
              e.g.set(t.id, t.bandwidth || 2048);
            }
            function nA(e, t) {
              return ((e = e.g.get(t)), e == null && (e = 0), e);
            }
            function en(e) {
              var t = this;
              if (e && e.constructor != te) throw new H(2, 9, 9008);
              ((this.g = this.h = null),
                e
                  ? ((this.h = e.g), (this.g = e.Yb()))
                  : ((this.h = Ho()), (this.g = new yt()), this.g.configure(this.h.networking)),
                (this.i = []),
                (this.l = []));
              var n = !e;
              ((this.j = new Io(function () {
                var r, i, s, o, u;
                return j(function (l) {
                  switch (l.g) {
                    case 1:
                      return I(
                        l,
                        Promise.all(
                          t.l.map(function (p) {
                            return Mm(p);
                          }),
                        ),
                        2,
                      );
                    case 2:
                      for (r = function () {}, i = [], s = x(t.i), o = s.next(); !o.done; o = s.next())
                        ((u = o.value), i.push(u.then(r, r)));
                      return I(l, Promise.all(i), 3);
                    case 3:
                      if (!n) {
                        l.A(4);
                        break;
                      }
                      return I(l, t.g.destroy(), 4);
                    case 4:
                      ((t.h = null), (t.g = null), re(l));
                  }
                });
              })),
                (this.m = 1e9));
            }
            function Lm() {
              if (oi(Be()))
                e: {
                  for (var e = x(el.values()), t = e.next(); !t.done; t = e.next())
                    if (((t = t.value), (t = t()))) {
                      (t.destroy(), (e = !0));
                      break e;
                    }
                  e = !1;
                }
              else e = !1;
              return e;
            }
            ((h = en.prototype),
              (h.destroy = function () {
                return this.j.destroy();
              }),
              (h.configure = function (e, t) {
                return (arguments.length == 2 && typeof e == "string" && (e = Kc(e, t)), ki(this.h, e));
              }),
              (h.getConfiguration = function () {
                var e = Ho();
                return (ki(e, this.h, Ho()), e);
              }),
              (h.Yb = function () {
                return this.g;
              }),
              (h.store = function (e, t, n, r, i) {
                var s = this,
                  o = this.getConfiguration(),
                  u = new Cm(this.g);
                return (
                  this.l.push(u),
                  (t = d4(
                    this,
                    e,
                    t || {},
                    r || [],
                    i || [],
                    function () {
                      var l;
                      return j(function (p) {
                        return p.g == 1
                          ? n
                            ? p.A(2)
                            : I(p, jo(e, s.g, o.manifest.retryParameters), 3)
                          : (p.g != 2 && (n = p.h), (l = Uv(e, n || null)), p.return(l()));
                      });
                    },
                    o,
                    u,
                  )),
                  (t = new kt(t, function () {
                    return Mm(u);
                  })),
                  t.finally(function () {
                    Nr(s.l, u);
                  }),
                  M4(this, t)
                );
              }));
            function d4(e, t, n, r, i, s, o, u) {
              var l, p, m, y, v, w, A, E, C, k, R, L, U, G, b, B, N, z, V, X, W, ie, ne, q;
              return j(function (Z) {
                switch (Z.g) {
                  case 1:
                    return (
                      uf(),
                      (p = l = null),
                      (m = new zn()),
                      (w = v = y = null),
                      ee(Z, 2, 3),
                      I(Z, s(), 5)
                    );
                  case 5:
                    return ((l = Z.h), I(Z, T4(e, t, l, o), 6));
                  case 6:
                    if (
                      ((A = Z.h),
                      lr(e),
                      (E = !A.presentationTimeline.W() && !A.presentationTimeline.Vc()),
                      !E)
                    )
                      throw new H(2, 9, 9005, t);
                    ((C = x(r)), (k = C.next()));
                  case 7:
                    if (k.done) {
                      Z.A(9);
                      break;
                    }
                    return ((R = k.value), I(Z, S4(e, R, A), 10));
                  case 10:
                    ((L = Z.h), A.imageStreams.push(L), lr(e), (k = C.next()), Z.A(7));
                    break;
                  case 9:
                    ((U = x(i)), (G = U.next()));
                  case 11:
                    return G.done
                      ? (z0(o.drm.clearKeys, A.variants),
                        (N = A.variants.some(function (ae) {
                          if (ae.audio) {
                            for (var ce = x(ae.audio.drmInfos), be = ce.next(); !be.done; be = ce.next())
                              if (be.value.licenseServerUri.startsWith("data:")) return !0;
                          }
                          if (ae.video) {
                            for (ae = x(ae.video.drmInfos), ce = ae.next(); !ce.done; ce = ae.next())
                              if (ce.value.licenseServerUri.startsWith("data:")) return !0;
                          }
                          return !1;
                        })),
                        (z = o.offline.usePersistentLicense),
                        N && (z = !1),
                        I(
                          Z,
                          e.md(
                            A,
                            function (ae) {
                              w = w || ae;
                            },
                            o,
                            z,
                          ),
                          15,
                        ))
                      : ((b = G.value), I(Z, w4(e, A, b.uri, b.language, b.kind, b.mime, b.codecs), 14));
                  case 14:
                    ((B = Z.h), A.textStreams.push(B), lr(e), (G = U.next()), Z.A(11));
                    break;
                  case 15:
                    if (((p = Z.h), lr(e), w)) throw w;
                    return I(Z, h4(A, p, o, z), 16);
                  case 16:
                    return I(Z, m.init(), 17);
                  case 17:
                    return (lr(e), I(Z, Xw(m), 18));
                  case 18:
                    return (
                      (y = Z.h),
                      lr(e),
                      (V = p4(p, A, t, n, o, u, z)),
                      (X = V.xk),
                      (W = V.Gh),
                      I(Z, y.cb.addManifests([X]), 19)
                    );
                  case 19:
                    if (((ie = Z.h), lr(e), (v = ie[0]), lr(e), w)) throw w;
                    return I(Z, f4(e, W, v, X, u, o, y.cb, A, p, z), 20);
                  case 20:
                    return (lr(e), oA(A, X, p, z), I(Z, y.cb.updateManifest(v, X), 21));
                  case 21:
                    return (lr(e), (ne = new ai("manifest", y.path.Pb, y.path.cb, v)), Z.return(Dm(ne, X)));
                  case 3:
                    return (ye(Z), I(Z, m.destroy(), 22));
                  case 22:
                    if (!l) {
                      Z.A(23);
                      break;
                    }
                    return I(Z, l.stop(), 23);
                  case 23:
                    if (!p) {
                      Z.A(25);
                      break;
                    }
                    return I(Z, p.destroy(), 25);
                  case 25:
                    Ne(Z, 0);
                    break;
                  case 2:
                    if (((q = se(Z)), v == null)) {
                      Z.A(27);
                      break;
                    }
                    return I(Z, rA(v), 27);
                  case 27:
                    throw w || q;
                }
              });
            }
            function f4(e, t, n, r, i, s, o, u, l, p) {
              var m, y, v, w, A, E, C, k, R, L, U;
              return j(function (G) {
                switch (G.g) {
                  case 1:
                    if (
                      ((m = {}),
                      (y = 0),
                      (v = function () {
                        if (e.j.g || i.l) throw new H(2, 9, 7001);
                      }),
                      (w = function (b, B) {
                        var N, z, V, X, W, ie, ne, q, Z;
                        return j(function (ae) {
                          if (ae.g == 1) {
                            for (N = x(b), z = N.next(), V = {}; !z.done; V = { mc: void 0 }, z = N.next())
                              ((V.mc = z.value),
                                v(),
                                (X = FD(V.mc, s)),
                                (W = V.mc.i),
                                (ie = V.mc.h),
                                (ne = (function (ce) {
                                  return function (be) {
                                    var Te, Ze, Oe, st;
                                    return j(function (Xe) {
                                      switch (Xe.g) {
                                        case 1:
                                          if (((Te = ce.mc.g), (Ze = Te.$b(!1)), !Te.aesKey || Ze)) {
                                            Xe.A(2);
                                            break;
                                          }
                                          return I(Xe, Lp(be, Te.aesKey, ce.mc.j), 3);
                                        case 3:
                                          be = Xe.h;
                                        case 2:
                                          return ((Oe = Im(Te)), I(Xe, o.addSegments([{ data: be }]), 4));
                                        case 4:
                                          ((st = Xe.h), v(), (m[Oe] = st[0]), (y += be.byteLength), re(Xe));
                                      }
                                    });
                                  };
                                })(V)),
                                (q = V.mc.g),
                                (Z = q.$b(!1))
                                  ? HD(i, V.mc.groupId, Z, W, ie, ne)
                                  : i.queue(V.mc.groupId, X, W, ie, ne));
                            return I(ae, GD(i), 2);
                          }
                          return (
                            v(),
                            !B || i.l ? ae.A(0) : (oA(u, r, l, p), I(ae, o.updateManifest(n, r), 0))
                          );
                        });
                      }),
                      (A = !1),
                      ee(G, 2),
                      !bm(u) || !A || sA(u))
                    ) {
                      G.A(4);
                      break;
                    }
                    return I(
                      G,
                      w(
                        t.filter(function (b) {
                          return b.h;
                        }),
                        !0,
                      ),
                      5,
                    );
                  case 5:
                    return (
                      v(),
                      (t = t.filter(function (b) {
                        return !b.h;
                      })),
                      (E = m),
                      (C = y),
                      (m = {}),
                      (y = 0),
                      I(
                        G,
                        iA(o, n, r, E, C, function () {
                          return lr(e);
                        }),
                        6,
                      )
                    );
                  case 6:
                    v();
                  case 4:
                    if (A) {
                      G.A(7);
                      break;
                    }
                    return I(G, w(t, !1), 8);
                  case 8:
                    return (
                      v(),
                      (k = m),
                      (R = y),
                      (m = {}),
                      (y = 0),
                      I(
                        G,
                        iA(o, n, r, k, R, function () {
                          return v();
                        }),
                        9,
                      )
                    );
                  case 9:
                    v();
                  case 7:
                    de(G, 0);
                    break;
                  case 2:
                    return (
                      (L = se(G)),
                      (U = Object.values(m)),
                      I(
                        G,
                        o.removeSegments(U, function () {}),
                        10,
                      )
                    );
                  case 10:
                    throw L;
                }
              });
            }
            function rA(e) {
              var t, n, r, i;
              return j(function (s) {
                switch (s.g) {
                  case 1:
                    return ((t = new zn()), I(s, t.init(), 2));
                  case 2:
                    return I(s, Xw(t), 3);
                  case 3:
                    return (
                      (n = s.h),
                      (r = new ai("manifest", n.path.Pb, n.path.cb, e)),
                      I(s, t.destroy(), 4)
                    );
                  case 4:
                    return ((i = new en()), I(s, i.remove(r.toString()), 0));
                }
              });
            }
            function iA(e, t, n, r, i, s) {
              var o, u, l, p, m, y, v, w, A, E, C;
              return j(function (k) {
                switch (k.g) {
                  case 1:
                    for (o = !1, ee(k, 2), u = !0, l = x(n.streams), p = l.next(); !p.done; p = l.next())
                      for (m = p.value, y = x(m.segments), v = y.next(); !v.done; v = y.next())
                        ((w = v.value),
                          (A = w.pendingSegmentRefId ? r[w.pendingSegmentRefId] : null),
                          A != null && ((w.dataKey = A), (w.pendingSegmentRefId = void 0)),
                          (A = w.pendingInitSegmentRefId ? r[w.pendingInitSegmentRefId] : null),
                          A != null && ((w.initSegmentKey = A), (w.pendingInitSegmentRefId = void 0)),
                          w.pendingSegmentRefId && (u = !1),
                          w.pendingInitSegmentRefId && (u = !1));
                    return ((n.size += i), u && (n.isIncomplete = !1), I(k, e.updateManifest(t, n), 4));
                  case 4:
                    ((o = !0), s(), de(k, 0));
                    break;
                  case 2:
                    return ((E = se(k)), I(k, rA(t), 5));
                  case 5:
                    if (o) {
                      k.A(6);
                      break;
                    }
                    return (
                      (C = Object.values(r)),
                      I(
                        k,
                        e.removeSegments(C, function () {}),
                        6,
                      )
                    );
                  case 6:
                    throw E;
                }
              });
            }
            function h4(e, t, n, r) {
              var i, s, o, u, l, p, m, y, v, w, A, E, C, k, R, L, U, G, b, B, N, z, V, X, W, ie, ne, q, Z, ae;
              return j(function (ce) {
                switch (ce.g) {
                  case 1:
                    return (
                      (i = { width: 1 / 0, height: 1 / 0 }),
                      vC(e, n.restrictions, i),
                      I(ce, l0(t, e, r, n.drm.preferredKeySystems, n.drm.keySystemsMapping), 2)
                    );
                  case 2:
                    for (
                      s = [],
                        o = n.preferredDecodingAttributes,
                        u = n.preferredVideoCodecs,
                        l = n.preferredAudioCodecs,
                        p = n.preferredTextFormats,
                        u0(e, u, l, o, p),
                        m = x(e.variants),
                        y = m.next();
                      !y.done;
                      y = m.next()
                    )
                      ((v = y.value), s.push(Os(v)));
                    for (w = x(e.textStreams), A = w.next(); !A.done; A = w.next())
                      ((E = A.value), s.push(Us(E)));
                    for (C = x(e.imageStreams), k = C.next(); !k.done; k = C.next())
                      ((R = k.value), s.push($h(R)));
                    return I(ce, n.offline.trackSelectionCallback(s), 3);
                  case 3:
                    for (
                      L = ce.h, U = e.presentationTimeline.getDuration(), G = 0, b = x(L), B = b.next();
                      !B.done;
                      B = b.next()
                    )
                      ((N = B.value), (z = (N.bandwidth * U) / 8), (G += z));
                    return (ee(ce, 4), I(ce, n.offline.downloadSizeCallback(G), 6));
                  case 6:
                    if (((V = ce.h), !V)) throw new H(2, 9, 9014);
                    de(ce, 5);
                    break;
                  case 4:
                    throw ((X = se(ce)), X instanceof H ? X : new H(2, 9, 9015));
                  case 5:
                    for (
                      W = new Set(), ie = new Set(), ne = new Set(), q = x(L), Z = q.next();
                      !Z.done;
                      Z = q.next()
                    )
                      ((ae = Z.value),
                        ae.type == "variant" && W.add(ae.id),
                        ae.type == "text" && ie.add(ae.id),
                        ae.type == "image" && ne.add(ae.id));
                    ((e.variants = e.variants.filter(function (be) {
                      return W.has(be.id);
                    })),
                      (e.textStreams = e.textStreams.filter(function (be) {
                        return ie.has(be.id);
                      })),
                      (e.imageStreams = e.imageStreams.filter(function (be) {
                        return ne.has(be.id);
                      })),
                      _4(e),
                      re(ce));
                }
              });
            }
            function p4(e, t, n, r, i, s, o) {
              var u = a4(n, t, r),
                l = i.offline.progressCallback;
              VD(
                s,
                function (A, E) {
                  ((u.size = E), l(u, A));
                },
                function (A, E) {
                  p && o && m == E && iu(e, "cenc", A);
                },
              );
              var p = bm(t) && !sA(t),
                m = null;
              p && (m = P4.get(e.g.keySystem));
              for (var y = new u4(), v = x(t.textStreams), w = v.next(); !w.done; w = v.next())
                y.g.set(w.value.id, 52);
              for (v = x(t.imageStreams), w = v.next(); !w.done; w = v.next()) c4(y, w.value);
              for (v = x(t.variants), w = v.next(); !w.done; w = v.next()) l4(y, w.value);
              return (
                (s = E4(s, y, t, i)),
                (i = s.streams),
                (s = s.Gh),
                (y = e.g) && o && (y.initData = []),
                {
                  xk: {
                    creationTime: Date.now(),
                    originalManifestUri: n,
                    duration: t.presentationTimeline.getDuration(),
                    size: 0,
                    expiration: e.Zd(),
                    streams: i,
                    sessionIds: o ? U0(e) : [],
                    drmInfo: y,
                    appMetadata: r,
                    isIncomplete: !0,
                    sequenceMode: t.sequenceMode,
                    type: t.type,
                  },
                  Gh: s,
                }
              );
            }
            function bm(e) {
              return e.variants.some(function (t) {
                var n = t.audio && t.audio.encrypted;
                return (t.video && t.video.encrypted) || n;
              });
            }
            function sA(e) {
              return e.variants.some(function (t) {
                return (t.video ? t.video.drmInfos : [])
                  .concat(t.audio ? t.audio.drmInfos : [])
                  .some(function (n) {
                    return n.initData && n.initData.length;
                  });
              });
            }
            function oA(e, t, n, r) {
              if (
                ((t.expiration = n.Zd()), (n = U0(n)), (t.sessionIds = r ? n : []), bm(e) && r && !n.length)
              )
                throw new H(2, 9, 9007);
            }
            h.remove = function (e) {
              return Nm(this, g4(this, e));
            };
            function g4(e, t) {
              var n, r, i, s, o, u;
              return j(function (l) {
                switch (l.g) {
                  case 1:
                    if ((uf(), (n = Pm(t)), n == null || n.g != "manifest")) throw new H(2, 9, 9004, t);
                    return ((r = n), (i = new zn()), ge(l, 2), I(l, i.init(), 4));
                  case 4:
                    return I(l, rf(i, r.Pb(), r.cb()), 5);
                  case 5:
                    return ((s = l.h), I(l, s.getManifests([r.key()]), 6));
                  case 6:
                    return ((o = l.h), (u = o[0]), I(l, Promise.all([m4(e, u, i), y4(s, r, u)]), 2));
                  case 2:
                    return (ye(l), I(l, i.destroy(), 8));
                  case 8:
                    Ne(l, 0);
                }
              });
            }
            function aA(e, t) {
              for (var n = [], r = x(e.streams), i = r.next(); !i.done; i = r.next())
                ((i = i.value),
                  t && i.type == "video"
                    ? n.push({ contentType: Rt(i.mimeType, i.codecs), robustness: e.drmInfo.videoRobustness })
                    : t ||
                      i.type != "audio" ||
                      n.push({
                        contentType: Rt(i.mimeType, i.codecs),
                        robustness: e.drmInfo.audioRobustness,
                      }));
              return n;
            }
            function m4(e, t, n) {
              return j(function (r) {
                return I(r, k4(e.g, e.h.drm, n, t), 0);
              });
            }
            function y4(e, t, n) {
              function r() {}
              var i = R4(n);
              return (Dm(t, n), Promise.all([e.removeSegments(i, r), e.removeManifests([t.key()], r)]));
            }
            h.Qk = function () {
              return Nm(this, v4(this));
            };
            function v4(e) {
              var t, n, r, i, s, o, u, l, p, m;
              return j(function (y) {
                switch (y.g) {
                  case 1:
                    return (
                      uf(),
                      (t = e.g),
                      (n = e.h.drm),
                      (r = new zn()),
                      (i = !1),
                      ge(y, 2),
                      I(y, r.init(), 4)
                    );
                  case 4:
                    ((s = []),
                      KD(r, function (v) {
                        return s.push(v);
                      }),
                      (o = x(s)),
                      (u = o.next()));
                  case 5:
                    if (u.done) {
                      y.A(2);
                      break;
                    }
                    return ((l = u.value), I(y, l.getAll(), 8));
                  case 8:
                    return ((p = y.h), I(y, eA(n, t, p), 9));
                  case 9:
                    return ((m = y.h), I(y, l.remove(m), 10));
                  case 10:
                    (m.length != p.length && (i = !0), (u = o.next()), y.A(5));
                    break;
                  case 2:
                    return (ye(y), I(y, r.destroy(), 11));
                  case 11:
                    Ne(y, 3);
                    break;
                  case 3:
                    return y.return(!i);
                }
              });
            }
            h.list = function () {
              return Nm(this, x4());
            };
            function x4() {
              var e, t, n;
              return j(function (r) {
                switch (r.g) {
                  case 1:
                    return (uf(), (e = []), (t = new zn()), ge(r, 2), I(r, t.init(), 4));
                  case 4:
                    return (
                      (n = Promise.resolve()),
                      WD(t, function (i, s) {
                        n = n.then(function () {
                          var o;
                          return j(function (u) {
                            if (u.g == 1) return I(u, s.getAllManifests(), 2);
                            ((o = u.h),
                              o.forEach(function (l, p) {
                                ((l = Dm(new ai("manifest", i.Pb, i.cb, p), l)), e.push(l));
                              }),
                              re(u));
                          });
                        });
                      }),
                      I(r, n, 2)
                    );
                  case 2:
                    return (ye(r), I(r, t.destroy(), 6));
                  case 6:
                    Ne(r, 3);
                    break;
                  case 3:
                    return r.return(e);
                }
              });
            }
            function T4(e, t, n, r) {
              var i, s, o, u, l;
              return j(function (p) {
                if (p.g == 1)
                  return (
                    (i = null),
                    (s = e.g),
                    (o = {
                      networkingEngine: s,
                      filter: function () {
                        return Promise.resolve();
                      },
                      makeTextStreamsForClosedCaptions: function () {},
                      onTimelineRegionAdded: function () {},
                      onEvent: function () {},
                      onError: function (m) {
                        i = m;
                      },
                      isLowLatencyMode: function () {
                        return !1;
                      },
                      updateDuration: function () {},
                      newDrmInfo: function () {},
                      onManifestUpdated: function () {},
                      getBandwidthEstimate: function () {
                        return r.abr.defaultBandwidthEstimate;
                      },
                      onMetadata: function () {},
                      disableStream: function () {},
                      addFont: function () {},
                    }),
                    n.configure(r.manifest),
                    lr(e),
                    I(p, n.start(t, o), 2)
                  );
                if (p.g != 3)
                  return (
                    (u = p.h),
                    lr(e),
                    (l = lA(u)),
                    I(
                      p,
                      Promise.all(
                        Jh(l, function (m) {
                          return m.createSegmentIndex();
                        }),
                      ),
                      3,
                    )
                  );
                if ((lr(e), i)) throw i;
                return p.return(u);
              });
            }
            function S4(e, t, n) {
              var r, i, s, o, u, l, p, m, y, v, w, A, E, C, k;
              return j(function (R) {
                switch (R.g) {
                  case 1:
                    return I(R, uA(e, t), 2);
                  case 2:
                    if (((r = R.h), r != "text/vtt")) throw new H(1, 2, 2017, t);
                    return I(R, A4(t, e.g, e.h.streaming.retryParameters), 3);
                  case 3:
                    if (((i = R.h), (s = Ja(r)), !s)) throw new H(2, 2, 2014, r);
                    for (
                      o = s(),
                        u = {
                          periodStart: 0,
                          segmentStart: 0,
                          segmentEnd: n.presentationTimeline.getDuration(),
                          vttOffset: 0,
                        },
                        l = De(i),
                        p = o.parseMedia(l, u, t, []),
                        m = [],
                        y = x(p),
                        v = y.next(),
                        w = {};
                      !v.done;
                      w = { Vf: void 0, od: void 0 }, v = y.next()
                    )
                      ((w.od = v.value),
                        (w.Vf = null),
                        (A = (function (L) {
                          return function () {
                            return (L.Vf == null && (L.Vf = qt([t], [L.od.payload])), L.Vf || []);
                          };
                        })(w)),
                        (E = new Ce(w.od.startTime, w.od.endTime, A, 0, null, null, 0, 0, 1 / 0)),
                        w.od.payload.includes("#xywh") &&
                          ((C = w.od.payload.split("#xywh=")[1].split(",")),
                          C.length === 4 &&
                            E.Mf({
                              height: parseInt(C[3], 10),
                              positionX: parseInt(C[0], 10),
                              positionY: parseInt(C[1], 10),
                              width: parseInt(C[2], 10),
                            })),
                        m.push(E));
                    if (((k = r), !m.length)) {
                      R.A(4);
                      break;
                    }
                    return I(R, jo(m[0].P()[0], e.g, e.h.manifest.retryParameters), 5);
                  case 5:
                    k = R.h;
                  case 4:
                    return R.return({
                      id: e.m++,
                      originalId: null,
                      groupId: null,
                      createSegmentIndex: function () {
                        return Promise.resolve();
                      },
                      segmentIndex: new Je(m),
                      mimeType: k || "",
                      codecs: "",
                      kind: "",
                      encrypted: !1,
                      drmInfos: [],
                      keyIds: new Set(),
                      language: "und",
                      originalLanguage: null,
                      label: null,
                      type: "image",
                      primary: !1,
                      trickModeVideo: null,
                      dependencyStream: null,
                      emsgSchemeIdUris: null,
                      roles: [],
                      forced: !1,
                      channelsCount: null,
                      audioSamplingRate: null,
                      spatialAudio: !1,
                      closedCaptions: null,
                      tilesLayout: "1x1",
                      accessibilityPurpose: null,
                      external: !0,
                      fastSwitching: !1,
                      fullMimeTypes: new Set([Rt(k || "", "")]),
                      isAudioMuxedInVideo: !1,
                      baseOriginalId: null,
                    });
                }
              });
            }
            function w4(e, t, n, r, i, s, o) {
              var u, l, p;
              return j(function (m) {
                if (m.g == 1) return s ? m.A(2) : I(m, uA(e, n), 3);
                if (
                  (m.g != 2 && (s = m.h),
                  (u = {
                    id: e.m++,
                    originalId: null,
                    groupId: null,
                    createSegmentIndex: function () {
                      return Promise.resolve();
                    },
                    segmentIndex: Nc(0, t.presentationTimeline.getDuration(), [n]),
                    mimeType: s || "",
                    codecs: o || "",
                    kind: i,
                    encrypted: !1,
                    drmInfos: [],
                    keyIds: new Set(),
                    language: r,
                    originalLanguage: r,
                    label: null,
                    type: Fe,
                    primary: !1,
                    trickModeVideo: null,
                    dependencyStream: null,
                    emsgSchemeIdUris: null,
                    roles: [],
                    forced: !1,
                    channelsCount: null,
                    audioSamplingRate: null,
                    spatialAudio: !1,
                    closedCaptions: null,
                    accessibilityPurpose: null,
                    external: !0,
                    fastSwitching: !1,
                    fullMimeTypes: new Set([Rt(s || "", o || "")]),
                    isAudioMuxedInVideo: !1,
                    baseOriginalId: null,
                  }),
                  (l = Rt(u.mimeType, u.codecs)),
                  (p = Qa(l)),
                  !p)
                )
                  throw new H(2, 2, 2014, s);
                return m.return(u);
              });
            }
            function uA(e, t) {
              var n;
              return j(function (r) {
                switch (r.g) {
                  case 1:
                    return (ee(r, 2), I(r, jo(t, e.g, e.h.streaming.retryParameters), 4));
                  case 4:
                    ((n = r.h), de(r, 3));
                    break;
                  case 2:
                    se(r);
                  case 3:
                    if (n) return r.return(n);
                    throw new H(1, 2, 2011, t);
                }
              });
            }
            function A4(e, t, n) {
              var r, i, s;
              return j(function (o) {
                return o.g == 1
                  ? ((r = Ar), (i = Ut([e], n)), (i.method = "GET"), I(o, t.request(r, i).promise, 2))
                  : ((s = o.h), o.return(s.data));
              });
            }
            h.md = function (e, t, n, r) {
              var i = this,
                s;
              return j(function (o) {
                return o.g == 1
                  ? ((s = new wc({
                      vc: i.g,
                      onError: t,
                      zf: function () {},
                      onExpirationUpdated: function () {},
                      onEvent: function () {},
                    })),
                    s.configure(n.drm),
                    I(o, UC(s, e.variants, r), 2))
                  : o.g != 3
                    ? I(o, O0(s), 3)
                    : o.return(s);
              });
            };
            function E4(e, t, n, r) {
              var i = new Map(),
                s = lA(n),
                o = new Map();
              s = x(s);
              for (var u = s.next(); !u.done; u = s.next()) {
                u = u.value;
                var l = I4(e, t, n, u, r, i);
                o.set(u.id, l);
              }
              for (e = x(n.variants), t = e.next(); !t.done; t = e.next())
                ((t = t.value),
                  t.audio && o.get(t.audio.id).variantIds.push(t.id),
                  t.video && o.get(t.video.id).variantIds.push(t.id));
              return { streams: Array.from(o.values()), Gh: Array.from(i.values()) };
            }
            function I4(e, t, n, r, i, s) {
              var o = {
                  id: r.id,
                  originalId: r.originalId,
                  groupId: r.groupId,
                  primary: r.primary,
                  type: r.type,
                  mimeType: r.mimeType,
                  codecs: r.codecs,
                  frameRate: r.frameRate,
                  pixelAspectRatio: r.pixelAspectRatio,
                  hdr: r.hdr,
                  colorGamut: r.colorGamut,
                  videoLayout: r.videoLayout,
                  kind: r.kind,
                  language: r.language,
                  originalLanguage: r.originalLanguage,
                  label: r.label,
                  width: r.width || null,
                  height: r.height || null,
                  encrypted: r.encrypted,
                  keyIds: r.keyIds,
                  segments: [],
                  variantIds: [],
                  roles: r.roles,
                  forced: r.forced,
                  channelsCount: r.channelsCount,
                  audioSamplingRate: r.audioSamplingRate,
                  spatialAudio: r.spatialAudio,
                  closedCaptions: r.closedCaptions,
                  tilesLayout: r.tilesLayout,
                  mssPrivateData: r.mssPrivateData,
                  external: r.external,
                  fastSwitching: r.fastSwitching,
                  isAudioMuxedInVideo: r.isAudioMuxedInVideo,
                },
                u = i.offline.numberOfParallelDownloads,
                l = u === 0 ? r.id : 0;
              return (
                C4(r, n.presentationTimeline.Hb(), function (p, m) {
                  var y = Im(p),
                    v = void 0;
                  if (!s.has(y)) {
                    var w = p.endTime - p.startTime;
                    ((w = nA(t, r.id) * w), (w = Fw(e.g, w)), s.set(y, new jw(p, w, l, !1, m)));
                  }
                  (p.ea &&
                    ((v = Im(p.ea)),
                    s.has(v) ||
                      ((w = nA(t, r.id) * 0.5), (w = Fw(e.g, w)), s.set(v, new jw(p.ea, w, l, !0, m)))),
                    o.segments.push({
                      pendingInitSegmentRefId: v,
                      initSegmentKey: v ? 0 : null,
                      startTime: p.startTime,
                      endTime: p.endTime,
                      appendWindowStart: p.appendWindowStart,
                      appendWindowEnd: p.appendWindowEnd,
                      timestampOffset: p.timestampOffset,
                      tilesLayout: p.tilesLayout,
                      pendingSegmentRefId: y,
                      dataKey: 0,
                      mimeType: p.mimeType,
                      codecs: p.codecs,
                      thumbnailSprite: p.thumbnailSprite,
                    }),
                    u !== 0 && (l = (l + 1) % u));
                }),
                o
              );
            }
            function C4(e, t, n) {
              if (((t = e.segmentIndex.find(t)), t != null))
                for (var r = e.segmentIndex.get(t); r; ) (n(r, t), (r = e.segmentIndex.get(++t)));
            }
            function lr(e) {
              if (e.j.g) throw new H(2, 9, 7001);
            }
            function uf() {
              if (!Lm()) throw new H(2, 9, 9e3);
            }
            function Nm(e, t) {
              return j(function (n) {
                return n.g == 1
                  ? (e.i.push(t), ge(n, 2), I(n, t, 4))
                  : n.g != 2
                    ? n.return(n.h)
                    : (ye(n), Nr(e.i, t), Ne(n, 0));
              });
            }
            function M4(e, t) {
              var n = t.promise;
              return (
                e.i.push(n),
                t.finally(function () {
                  Nr(e.i, n);
                })
              );
            }
            function R4(e) {
              var t = new Set();
              e = x(e.streams);
              for (var n = e.next(); !n.done; n = e.next()) {
                n = x(n.value.segments);
                for (var r = n.next(); !r.done; r = n.next())
                  ((r = r.value), r.initSegmentKey != null && t.add(r.initSegmentKey), t.add(r.dataKey));
              }
              return Array.from(t);
            }
            function k4(e, t, n, r) {
              var i, s, o;
              return j(function (u) {
                return u.g == 1
                  ? r.drmInfo
                    ? ((i = $D(n)),
                      (s = r.sessionIds.map(function (l) {
                        return {
                          sessionId: l,
                          keySystem: r.drmInfo.keySystem,
                          licenseUri: r.drmInfo.licenseServerUri,
                          serverCertificate: r.drmInfo.serverCertificate,
                          audioCapabilities: aA(r, !1),
                          videoCapabilities: aA(r, !0),
                        };
                      })),
                      I(u, eA(t, e, s), 2))
                    : u.return()
                  : u.g != 3
                    ? ((o = u.h), I(u, i.remove(o), 3))
                    : I(
                        u,
                        i.add(
                          s.filter(function (l) {
                            return !o.includes(l.sessionId);
                          }),
                        ),
                        0,
                      );
              });
            }
            function lA(e) {
              for (var t = new Set(), n = x(e.variants), r = n.next(); !r.done; r = n.next())
                ((r = r.value), r.audio && t.add(r.audio), r.video && t.add(r.video));
              for (n = x(e.textStreams), r = n.next(); !r.done; r = n.next()) t.add(r.value);
              for (e = x(e.imageStreams), n = e.next(); !n.done; n = e.next()) t.add(n.value);
              return t;
            }
            function _4(e) {
              e.variants.map(function (s) {
                return s.video;
              });
              var t = new Set(
                e.variants.map(function (s) {
                  return s.audio;
                }),
              );
              e = e.textStreams;
              for (var n = x(t), r = n.next(); !r.done; r = n.next()) {
                r = x(t);
                for (var i = r.next(); !i.done; i = r.next());
              }
              for (t = x(e), n = t.next(); !n.done; n = t.next())
                for (n = x(e), r = n.next(); !r.done; r = n.next());
            }
            (fe("shaka.offline.Storage", en),
              (en.deleteAll = function () {
                var e;
                return j(function (t) {
                  return t.g == 1
                    ? ((e = new zn()), ge(t, 2), I(t, YD(e), 2))
                    : t.g != 5
                      ? (ye(t), I(t, e.destroy(), 5))
                      : Ne(t, 0);
                });
              }),
              (en.prototype.list = en.prototype.list),
              (en.prototype.removeEmeSessions = en.prototype.Qk),
              (en.prototype.remove = en.prototype.remove),
              (en.prototype.store = en.prototype.store),
              (en.prototype.getNetworkingEngine = en.prototype.Yb),
              (en.prototype.getConfiguration = en.prototype.getConfiguration),
              (en.prototype.configure = en.prototype.configure),
              (en.prototype.destroy = en.prototype.destroy),
              (en.support = Lm));
            var P4 = new Map()
              .set("org.w3.clearkey", "1077efecc0b24d02ace33c1e52e2fb4b")
              .set("com.widevine.alpha", "edef8ba979d64acea3c827dcd51d21ed")
              .set("com.microsoft.playready", "9a04f07998404286ab92e65be0885f95")
              .set("com.microsoft.playready.recommendation", "9a04f07998404286ab92e65be0885f95")
              .set("com.microsoft.playready.software", "9a04f07998404286ab92e65be0885f95")
              .set("com.microsoft.playready.hardware", "9a04f07998404286ab92e65be0885f95")
              .set("com.huawei.wiseplay", "3d5e6d359b9a41e8b843dd3c6e72c42c");
            FT("offline", Lm);
            function Xn() {}
            function cr(e, t) {
              for (e = { priority: t || 0, callback: e }, t = 0; t < nl.length; t++)
                if (nl[t].priority < e.priority) {
                  nl.splice(t, 0, e);
                  return;
                }
              nl.push(e);
            }
            (fe("shaka.polyfill", Xn),
              (Xn.register = cr),
              (Xn.installAll = function () {
                for (var e = x(nl), t = e.next(); !t.done; t = e.next()) {
                  t = t.value;
                  try {
                    t.callback();
                  } catch (n) {
                    je("Error installing polyfill!", n);
                  }
                }
              }));
            var nl = [];
            function lf(e, t, n) {
              ((this.g = e), (this.i = t || null), (this.h = n || null), (this.keySystem = e.keySystem));
            }
            ((lf.prototype.getConfiguration = function () {
              var e = this.g.getConfiguration();
              if (e.videoCapabilities)
                for (var t = x(e.videoCapabilities), n = t.next(); !n.done; n = t.next())
                  n.value.encryptionScheme = this.i;
              if (e.audioCapabilities)
                for (t = x(e.audioCapabilities), n = t.next(); !n.done; n = t.next())
                  n.value.encryptionScheme = this.h;
              return e;
            }),
              (lf.prototype.createMediaKeys = function () {
                return this.g.createMediaKeys();
              }));
            function cA(e) {
              return e.startsWith("com.apple")
                ? "cbcs"
                : e.startsWith("com.widevine") ||
                    e.startsWith("com.microsoft") ||
                    e.startsWith("com.chromecast") ||
                    e.startsWith("org.w3") ||
                    e.startsWith("com.huawei")
                  ? "cenc"
                  : (je("EmeEncryptionSchemePolyfill: Unknown key system:", e, "Please contribute!"), null);
            }
            function dA(e) {
              if (!e) return !1;
              e = e.getConfiguration();
              var t = e.audioCapabilities && e.audioCapabilities[0];
              return !!(
                (e = (e.videoCapabilities && e.videoCapabilities[0]) || t) && e.encryptionScheme !== void 0
              );
            }
            function Om(e, t) {
              return !!(!e || e == t || ((e == "cbcs" || e == "cbcs-1-9") && Be().ed()));
            }
            function fA() {}
            var rl;
            function hA() {
              Be().Of() &&
                !rl &&
                !navigator.emeEncryptionSchemePolyfilled &&
                navigator.requestMediaKeySystemAccess &&
                MediaKeySystemAccess.prototype.getConfiguration &&
                ((rl = navigator.requestMediaKeySystemAccess),
                (navigator.requestMediaKeySystemAccess = D4),
                (navigator.emeEncryptionSchemePolyfilled = !0));
            }
            function D4(e, t) {
              var n = this,
                r;
              return j(function (i) {
                return i.g == 1
                  ? I(i, rl.call(n, e, t), 2)
                  : ((r = i.h),
                    dA(r)
                      ? ((navigator.requestMediaKeySystemAccess = rl), i.return(r))
                      : ((navigator.requestMediaKeySystemAccess = pA), i.return(pA.call(n, e, t))));
              });
            }
            function pA(e, t) {
              var n = this,
                r,
                i,
                s,
                o,
                u,
                l,
                p,
                m,
                y,
                v,
                w,
                A;
              return j(function (E) {
                if (E.g == 1) {
                  for (r = cA(e), i = [], s = x(t), o = s.next(); !o.done; o = s.next())
                    ((u = o.value),
                      (l = gA(u.videoCapabilities, r)),
                      (p = gA(u.audioCapabilities, r)),
                      (u.videoCapabilities && u.videoCapabilities.length && !l.length) ||
                        (u.audioCapabilities && u.audioCapabilities.length && !p.length) ||
                        ((m = Object.assign({}, u)),
                        (m.videoCapabilities = l),
                        (m.audioCapabilities = p),
                        i.push(m)));
                  if (!i.length)
                    throw (
                      (y = Error("Unsupported keySystem or supportedConfigurations.")),
                      (y.name = "NotSupportedError"),
                      (y.code = DOMException.NOT_SUPPORTED_ERR),
                      y
                    );
                  return I(E, rl.call(n, e, i), 2);
                }
                return (
                  (v = E.h),
                  (A = w = null),
                  i[0] &&
                    (i[0].videoCapabilities && (w = i[0].videoCapabilities[0].encryptionScheme),
                    i[0].audioCapabilities && (A = i[0].audioCapabilities[0].encryptionScheme)),
                  E.return(new lf(v, w, A))
                );
              });
            }
            function gA(e, t) {
              return (
                e &&
                e.filter(function (n) {
                  return Om(n.encryptionScheme, t);
                })
              );
            }
            ((Xn.EmeEncryptionScheme = fA), (fA.install = hA), cr(hA));
            function mA() {}
            var il;
            function yA() {
              Be().Of() &&
                !il &&
                !navigator.mediaCapabilitiesEncryptionSchemePolyfilled &&
                navigator.mediaCapabilities &&
                ((il = navigator.mediaCapabilities.decodingInfo),
                (navigator.mediaCapabilities.decodingInfo = L4),
                (navigator.mediaCapabilitiesEncryptionSchemePolyfilled = !0));
            }
            function L4(e) {
              var t = this,
                n,
                r;
              return j(function (i) {
                switch (i.g) {
                  case 1:
                    return I(i, il.call(t, e), 2);
                  case 2:
                    if (((n = i.h), !n.supported || !e.keySystemConfiguration)) return i.return(n);
                    if (((r = n.keySystemAccess), dA(r)))
                      return ((navigator.mediaCapabilities.decodingInfo = il), i.return(n));
                    if (((navigator.mediaCapabilities.decodingInfo = vA), r)) {
                      i.A(3);
                      break;
                    }
                    return I(i, xA(e), 4);
                  case 4:
                    return ((n.keySystemAccess = i.h), i.return(n));
                  case 3:
                    return i.return(vA.call(t, e));
                }
              });
            }
            function vA(e) {
              var t = this,
                n,
                r,
                i,
                s,
                o,
                u,
                l;
              return j(function (p) {
                switch (p.g) {
                  case 1:
                    return (
                      (r = n = null),
                      !e.keySystemConfiguration ||
                      ((i = e.keySystemConfiguration),
                      (s = i.keySystem),
                      (r = i.audio && i.audio.encryptionScheme),
                      (n = i.video && i.video.encryptionScheme),
                      (o = cA(s)),
                      (u = {
                        powerEfficient: !1,
                        smooth: !1,
                        supported: !1,
                        keySystemAccess: null,
                        configuration: e,
                      }),
                      Om(r, o) && Om(n, o))
                        ? I(p, il.call(t, e), 2)
                        : p.return(u)
                    );
                  case 2:
                    if (((l = p.h), l.keySystemAccess)) {
                      ((l.keySystemAccess = new lf(l.keySystemAccess, n, r)), p.A(3));
                      break;
                    }
                    if (!e.keySystemConfiguration) {
                      p.A(3);
                      break;
                    }
                    return I(p, xA(e), 5);
                  case 5:
                    l.keySystemAccess = p.h;
                  case 3:
                    return p.return(l);
                }
              });
            }
            function xA(e) {
              var t, n;
              return j(function (r) {
                if (r.g == 1) {
                  var i = e.keySystemConfiguration,
                    s = [],
                    o = [];
                  return (
                    i.audio &&
                      s.push({
                        robustness: i.audio.robustness || "",
                        contentType: e.audio.contentType,
                        encryptionScheme: i.audio.encryptionScheme,
                      }),
                    i.video &&
                      o.push({
                        robustness: i.video.robustness || "",
                        contentType: e.video.contentType,
                        encryptionScheme: i.video.encryptionScheme,
                      }),
                    (i = {
                      initDataTypes: i.initDataType ? [i.initDataType] : [],
                      distinctiveIdentifier: i.distinctiveIdentifier,
                      persistentState: i.persistentState,
                      sessionTypes: i.sessionTypes,
                    }),
                    s.length && (i.audioCapabilities = s),
                    o.length && (i.videoCapabilities = o),
                    (t = i),
                    I(r, navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem, [t]), 2)
                  );
                }
                return ((n = r.h), r.return(n));
              });
            }
            ((Xn.MCapEncryptionScheme = mA), (mA.install = yA), cr(yA, -2));
            function cf() {}
            function TA() {
              Be().hc() ||
                (navigator.mediaCapabilities || (navigator.mediaCapabilities = {}),
                (cf.originalMcap = navigator.mediaCapabilities),
                (navigator.mediaCapabilities.decodingInfo = b4));
            }
            function b4(e) {
              var t, n, r, i, s, o, u, l, p, m, y;
              return j(function (v) {
                switch (v.g) {
                  case 1:
                    if (
                      ((t = {
                        supported: !1,
                        powerEfficient: !0,
                        smooth: !0,
                        keySystemAccess: null,
                        configuration: e,
                      }),
                      Be(),
                      (n = e.video),
                      (r = e.audio),
                      e.type != "media-source")
                    ) {
                      if (e.type == "file") {
                        if (
                          (n && ((i = n.contentType), (s = Hs().canPlayType(i) != ""), !s)) ||
                          (r && ((o = r.contentType), (u = Hs().canPlayType(o) != ""), !u))
                        )
                          return v.return(t);
                      } else return v.return(t);
                      v.A(2);
                      break;
                    }
                    if (!oi()) return v.return(t);
                    if (!n) {
                      v.A(3);
                      break;
                    }
                    return I(v, N4(n), 4);
                  case 4:
                    if (((l = v.h), !l)) return v.return(t);
                  case 3:
                    if (r) {
                      var w = Be().Oa(),
                        A = r.contentType;
                      if (
                        (w === "CAST" && r.spatialRendering && (A += "; spatialRendering=true"),
                        (p = En(A)),
                        !p)
                      )
                        return v.return(t);
                    }
                  case 2:
                    return e.keySystemConfiguration
                      ? ((m = e.keySystemConfiguration), I(v, O4(n, r, m), 6))
                      : ((t.supported = !0), v.return(t));
                  case 6:
                    (y = v.h) && ((t.supported = !0), (t.keySystemAccess = y));
                  case 5:
                    return v.return(t);
                }
              });
            }
            function N4(e) {
              var t, n, r;
              return j(function (i) {
                return i.g == 1
                  ? ((t = Be()), (n = t.Oa()), n !== "CAST" ? i.A(2) : I(i, U4(e), 3))
                  : i.g != 2
                    ? ((r = i.h), i.return(r))
                    : i.return(En(e.contentType));
              });
            }
            function O4(e, t, n) {
              var r, i, s, o, u, l, p, m, y, v, w, A;
              return j(function (E) {
                switch (E.g) {
                  case 1:
                    ((r = []),
                      (i = []),
                      (s = []),
                      n.audio &&
                        ((o = { robustness: n.audio.robustness || "", contentType: t.contentType }),
                        Be().Bi() &&
                          t.contentType.includes('codecs="ac-3"') &&
                          (o.contentType = 'audio/mp4; codecs="ec-3"'),
                        n.audio.encryptionScheme &&
                          ((o.encryptionScheme = n.audio.encryptionScheme), s.push(n.audio.encryptionScheme)),
                        r.push(o)),
                      n.video &&
                        ((u = { robustness: n.video.robustness || "", contentType: e.contentType }),
                        n.video.encryptionScheme &&
                          ((u.encryptionScheme = n.video.encryptionScheme), s.push(n.video.encryptionScheme)),
                        i.push(u)),
                      (l = {
                        initDataTypes: [n.initDataType],
                        distinctiveIdentifier: n.distinctiveIdentifier,
                        persistentState: n.persistentState,
                        sessionTypes: n.sessionTypes,
                      }),
                      r.length && (l.audioCapabilities = r),
                      i.length && (l.videoCapabilities = i),
                      (p = e ? e.contentType : ""),
                      (m = t ? t.contentType : ""),
                      (y = Qn(p) + ";" + es(p)),
                      (v = Qn(m) + ";" + es(m)),
                      (w = n.keySystem),
                      (A = null),
                      ee(E, 2));
                    var C = Mh(y, v, w, s);
                    if (fo.has(C)) {
                      ((C = Mh(y, v, w, s)), (A = fo.get(C) || null), E.A(4));
                      break;
                    }
                    return I(E, navigator.requestMediaKeySystemAccess(n.keySystem, [l]), 5);
                  case 5:
                    C = A = E.h;
                    var k = Mh(y, v, w, s);
                    fo.set(k, C);
                  case 4:
                    de(E, 3);
                    break;
                  case 2:
                    se(E);
                  case 3:
                    return E.return(A);
                }
              });
            }
            function U4(e) {
              var t, n, r, i, s;
              return j(function (o) {
                if (o.g == 1) {
                  if (!(g.cast && cast.__platform__ && cast.__platform__.canDisplayType))
                    return o.return(En(e.contentType));
                  switch (
                    ((t = e.contentType),
                    e.width &&
                      e.height &&
                      e.width > 1280 &&
                      e.height > 720 &&
                      (t += "; width=" + e.width + "; height=" + e.height),
                    e.framerate &&
                      ((n = Math.round(e.framerate)), n < 24 || n > 30) &&
                      (t += "; framerate=" + e.framerate),
                    (r = e.transferFunction || ""),
                    r)
                  ) {
                    case "":
                    case "srgb":
                      break;
                    case "pq":
                      t += "; eotf=smpte2084";
                      break;
                    case "hlg":
                      t += "; eotf=arib-std-b67";
                      break;
                    default:
                      return o.return(!1);
                  }
                  return (
                    (i = !1),
                    (s = j4),
                    s.has(t) ? ((i = s.get(t)), o.A(2)) : I(o, cast.__platform__.canDisplayType(t), 3)
                  );
                }
                return (o.g != 2 && ((i = o.h), s.set(t, i)), o.return(i));
              });
            }
            ((Xn.MediaCapabilities = cf), (cf.install = TA), (cf.originalMcap = null));
            var j4 = new Map();
            cr(TA, -1);
            function SA() {}
            function wA() {
              var e = Be(),
                t = e.Ha() === "WEBKIT" ? e.Ba() : null;
              for (
                (g.MediaSource || g.ManagedMediaSource) &&
                  t &&
                  g.MediaSource &&
                  (t <= 12 ? (AA(), B4()) : t <= 15 && AA()),
                  e = x(e.Li()),
                  t = e.next();
                !t.done;
                t = e.next()
              )
                V4(t.value);
              ((g.MediaSource || g.ManagedMediaSource) && F4(),
                g.MediaSource &&
                  MediaSource.isTypeSupported('video/webm; codecs="vp9"') &&
                  !MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"') &&
                  H4());
            }
            function AA() {
              var e = MediaSource.prototype.addSourceBuffer;
              MediaSource.prototype.addSourceBuffer = function () {
                var t = e.apply(this, At.apply(0, arguments));
                return ((t.abort = function () {}), t);
              };
            }
            function B4() {
              var e = SourceBuffer.prototype.remove;
              SourceBuffer.prototype.remove = function (t, n) {
                return e.call(this, t, n - 0.001);
              };
            }
            function F4() {
              if (g.MediaSource) {
                var e = MediaSource.isTypeSupported.bind(MediaSource);
                MediaSource.isTypeSupported = function (n) {
                  return qa(n) != "mp2t" && e(n);
                };
              }
              if (g.ManagedMediaSource) {
                var t = ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);
                g.ManagedMediaSource.isTypeSupported = function (n) {
                  return qa(n) != "mp2t" && t(n);
                };
              }
            }
            function V4(e) {
              var t = MediaSource.isTypeSupported.bind(MediaSource);
              if (
                ((MediaSource.isTypeSupported = function (r) {
                  return es(r) != e && t(r);
                }),
                g.ManagedMediaSource)
              ) {
                var n = ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);
                g.ManagedMediaSource.isTypeSupported = function (r) {
                  return es(r) != e && n(r);
                };
              }
            }
            function H4() {
              var e = MediaSource.isTypeSupported;
              Be().fj() &&
                (MediaSource.isTypeSupported = function (t) {
                  var n = t.split(/ *; */),
                    r = n.findIndex(function (o) {
                      return o.startsWith("codecs=");
                    });
                  if (r < 0) return e(t);
                  var i = n[r]
                      .replace("codecs=", "")
                      .replace(/"/g, "")
                      .split(/\s*,\s*/),
                    s = i.findIndex(function (o) {
                      return o.startsWith("vp09");
                    });
                  return (
                    s >= 0 && ((i[s] = "vp9"), (n[r] = 'codecs="' + i.join(",") + '"'), (t = n.join("; "))),
                    e(t)
                  );
                });
            }
            ((Xn.MediaSource = SA), (SA.install = wA), cr(wA));
            function Um() {}
            var jm, Bm, Fm, Vm, Hm, Gm;
            function EA(e) {
              g.HTMLVideoElement &&
                g.WebKitMediaKeys &&
                g.shakaMediaKeysPolyfill != Xm &&
                (e !== void 0 &&
                  e &&
                  ((jm = !0),
                  (Bm = Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype, "mediaKeys")),
                  (Fm = HTMLMediaElement.prototype.setMediaKeys),
                  (Vm = g.MediaKeys),
                  (Hm = g.MediaKeySystemAccess),
                  (Gm = navigator.requestMediaKeySystemAccess)),
                delete HTMLMediaElement.prototype.mediaKeys,
                (HTMLMediaElement.prototype.mediaKeys = null),
                (HTMLMediaElement.prototype.setMediaKeys = z4),
                (g.MediaKeys = sl),
                (g.MediaKeySystemAccess = df),
                (navigator.requestMediaKeySystemAccess = G4),
                (g.shakaMediaKeysPolyfill = Xm),
                pc.clear(),
                fo.clear());
            }
            function G4(e, t) {
              try {
                var n = new df(e, t);
                return Promise.resolve(n);
              } catch (r) {
                return Promise.reject(r);
              }
            }
            function z4(e) {
              var t = this.mediaKeys;
              return (
                t && t != e && IA(t, null),
                delete this.mediaKeys,
                (this.mediaKeys = e) ? IA(e, this) : Promise.resolve()
              );
            }
            function X4(e) {
              if (((e = De(e.initData)), jn(e).getUint32(0, !0) + 4 != e.byteLength))
                throw new RangeError("Malformed FairPlay init data");
              ((e = Yi(e.subarray(4), !0)), (e = Or(e)));
              var t = new Event("encrypted");
              ((t.initDataType = "skd"), (t.initData = Tr(e)), this.dispatchEvent(t));
            }
            ((Xn.PatchedMediaKeysApple = Um),
              (Um.uninstall = function () {
                g.shakaMediaKeysPolyfill == Xm &&
                  jm &&
                  ((jm = !1),
                  Object.defineProperty(HTMLMediaElement.prototype, "mediaKeys", Bm),
                  (HTMLMediaElement.prototype.setMediaKeys = Fm),
                  (g.MediaKeys = Vm),
                  (g.MediaKeySystemAccess = Hm),
                  (navigator.requestMediaKeySystemAccess = Gm),
                  (Bm = Gm = Fm = Hm = Vm = null),
                  (g.shakaMediaKeysPolyfill = ""),
                  pc.clear(),
                  fo.clear());
              }),
              (Um.install = EA));
            function df(e, t) {
              if (((this.keySystem = e), e.startsWith("com.apple.fps")))
                for (e = x(t), t = e.next(); !t.done; t = e.next()) {
                  var n = t.value;
                  if (n.persistentState == "required") t = null;
                  else {
                    t = {
                      audioCapabilities: [],
                      videoCapabilities: [],
                      persistentState: "optional",
                      distinctiveIdentifier: "optional",
                      initDataTypes: n.initDataTypes,
                      sessionTypes: ["temporary"],
                      label: n.label,
                    };
                    var r = !1,
                      i = !1;
                    if (n.audioCapabilities)
                      for (var s = x(n.audioCapabilities), o = s.next(); !o.done; o = s.next())
                        ((o = o.value),
                          o.contentType &&
                            ((r = !0),
                            WebKitMediaKeys.isTypeSupported(this.keySystem, o.contentType.split(";")[0]) &&
                              (t.audioCapabilities.push(o), (i = !0))));
                    if (n.videoCapabilities)
                      for (n = x(n.videoCapabilities), s = n.next(); !s.done; s = n.next())
                        ((s = s.value),
                          s.contentType &&
                            ((r = !0),
                            WebKitMediaKeys.isTypeSupported(this.keySystem, s.contentType.split(";")[0]) &&
                              (t.videoCapabilities.push(s), (i = !0))));
                    (r || (i = WebKitMediaKeys.isTypeSupported(this.keySystem, "video/mp4")),
                      (t = i ? t : null));
                  }
                  if (t) {
                    this.g = t;
                    return;
                  }
                }
              throw (
                (e = Error("Unsupported keySystem")),
                (e.name = "NotSupportedError"),
                (e.code = DOMException.NOT_SUPPORTED_ERR),
                e
              );
            }
            ((df.prototype.createMediaKeys = function () {
              var e = new sl(this.keySystem);
              return Promise.resolve(e);
            }),
              (df.prototype.getConfiguration = function () {
                return this.g;
              }));
            function sl(e) {
              ((this.h = new WebKitMediaKeys(e)), (this.g = new et()));
            }
            ((sl.prototype.createSession = function (e) {
              if (((e = e || "temporary"), e != "temporary"))
                throw new TypeError("Session type " + e + " is unsupported on this platform.");
              return new zm(this.h);
            }),
              (sl.prototype.setServerCertificate = function () {
                return Promise.resolve(!1);
              }));
            function IA(e, t) {
              if ((e.g.Qa(), !t)) return Promise.resolve();
              e.g.D(t, "webkitneedkey", X4);
              try {
                return (
                  Uo(t, HTMLMediaElement.HAVE_METADATA, e.g, function () {
                    t.webkitSetMediaKeys(e.h);
                  }),
                  Promise.resolve()
                );
              } catch (n) {
                return Promise.reject(n);
              }
            }
            sl.prototype.getStatusForPolicy = function () {
              return Promise.resolve("usable");
            };
            function zm(e) {
              (ot.call(this),
                (this.i = null),
                (this.l = e),
                (this.g = this.h = null),
                (this.j = new et()),
                (this.sessionId = ""),
                (this.expiration = NaN),
                (this.closed = new at()),
                (this.keyStatuses = new CA()),
                (this.onkeystatuseschange = null));
            }
            (J(zm, ot),
              (h = zm.prototype),
              (h.generateRequest = function (e, t) {
                var n = this;
                this.h = new at();
                try {
                  var r = this.l.createSession("video/mp4", De(t));
                  ((this.i = r),
                    (this.sessionId = r.sessionId || ""),
                    this.j.D(this.i, "webkitkeymessage", function (i) {
                      (n.h && (n.h.resolve(), (n.h = null)),
                        (i = new Map()
                          .set(
                            "messageType",
                            n.keyStatuses.Kc() == null ? "license-request" : "license-renewal",
                          )
                          .set("message", Tr(i.message))),
                        (i = new we("message", i)),
                        n.dispatchEvent(i));
                    }),
                    this.j.D(r, "webkitkeyadded", function () {
                      n.g && (ff(n, "usable"), n.g.resolve(), (n.g = null));
                    }),
                    this.j.D(r, "webkitkeyerror", function () {
                      var i = Error("EME PatchedMediaKeysApple key error");
                      if (((i.errorCode = n.i.error), n.h != null)) (n.h.reject(i), (n.h = null));
                      else if (n.g != null) (n.g.reject(i), (n.g = null));
                      else
                        switch (n.i.error.code) {
                          case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:
                          case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:
                            ff(n, "output-not-allowed");
                            break;
                          default:
                            ff(n, "internal-error");
                        }
                    }),
                    ff(this, "status-pending"));
                } catch (i) {
                  this.h.reject(i);
                }
                return this.h;
              }),
              (h.load = function () {
                return Promise.reject(Error("MediaKeySession.load not yet supported"));
              }),
              (h.update = function (e) {
                this.g = new at();
                try {
                  this.i.update(De(e));
                } catch (t) {
                  this.g.reject(t);
                }
                return this.g;
              }),
              (h.close = function () {
                try {
                  (this.i.close(), this.closed.resolve(), this.j.Qa());
                } catch (e) {
                  this.closed.reject(e);
                }
                return this.closed;
              }),
              (h.remove = function () {
                return Promise.reject(
                  Error(
                    "MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform",
                  ),
                );
              }));
            function ff(e, t) {
              var n = e.keyStatuses;
              ((n.size = t == null ? 0 : 1),
                (n.g = t),
                (t = new we("keystatuseschange")),
                e.dispatchEvent(t),
                e.onkeystatuseschange && e.onkeystatuseschange(t));
            }
            function CA() {
              ((this.size = 0), (this.g = void 0));
            }
            ((h = CA.prototype),
              (h.Kc = function () {
                return this.g;
              }),
              (h.forEach = function (e) {
                this.g && e(this.g, Xl.value());
              }),
              (h.get = function (e) {
                if (this.has(e)) return this.g;
              }),
              (h.has = function (e) {
                var t = Xl.value();
                return !!(this.g && fi(e, t));
              }),
              (h.entries = function () {}),
              (h.keys = function () {}),
              (h.values = function () {}));
            var Xm = "apple";
            cr(function () {
              g.HTMLVideoElement &&
                g.WebKitMediaKeys &&
                ((navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration) ||
                  EA());
            });
            function MA() {}
            function RA() {
              if (g.MediaKeys) {
                var e = Be();
                (MediaKeys.prototype.setServerCertificate && e.we()) ||
                  (MediaKeys.prototype.setServerCertificate = W4);
              }
            }
            function W4() {
              return Promise.resolve(!1);
            }
            ((Xn.PatchedMediaKeysCert = MA), (MA.install = RA), cr(RA));
            function kA() {}
            function _A() {
              if (
                !(
                  !g.HTMLVideoElement ||
                  (navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration)
                )
              ) {
                if (HTMLMediaElement.prototype.webkitGenerateKeyRequest) qm = "webkit";
                else if (!HTMLMediaElement.prototype.generateKeyRequest) return;
                ((navigator.requestMediaKeySystemAccess = K4),
                  delete HTMLMediaElement.prototype.mediaKeys,
                  (HTMLMediaElement.prototype.mediaKeys = null),
                  (HTMLMediaElement.prototype.setMediaKeys = $4),
                  (g.MediaKeys = ol),
                  (g.MediaKeySystemAccess = hf),
                  (g.shakaMediaKeysPolyfill = Y4));
              }
            }
            function Wm(e) {
              var t = qm;
              return t ? t + e.charAt(0).toUpperCase() + e.slice(1) : e;
            }
            function K4(e, t) {
              try {
                var n = new hf(e, t);
                return Promise.resolve(n);
              } catch (r) {
                return Promise.reject(r);
              }
            }
            function $4(e) {
              var t = this.mediaKeys;
              return (
                t && t != e && PA(t, null),
                delete this.mediaKeys,
                (this.mediaKeys = e) && PA(e, this),
                Promise.resolve()
              );
            }
            ((Xn.PatchedMediaKeysWebkit = kA), (kA.install = _A));
            function hf(e, t) {
              this.g = this.keySystem = e;
              var n = !1;
              e == "org.w3.clearkey" && ((this.g = "webkit-org.w3.clearkey"), (n = !1));
              var r = !1,
                i = document.getElementsByTagName("video");
              ((i = i.length ? i[0] : document.createElement("video")), (t = x(t)));
              for (var s = t.next(); !s.done; s = t.next()) {
                s = s.value;
                var o = {
                    audioCapabilities: [],
                    videoCapabilities: [],
                    persistentState: "optional",
                    distinctiveIdentifier: "optional",
                    initDataTypes: s.initDataTypes,
                    sessionTypes: ["temporary"],
                    label: s.label,
                  },
                  u = !1;
                if (s.audioCapabilities)
                  for (var l = x(s.audioCapabilities), p = l.next(); !p.done; p = l.next())
                    ((p = p.value),
                      p.contentType &&
                        ((u = !0),
                        i.canPlayType(p.contentType.split(";")[0], this.g) &&
                          (o.audioCapabilities.push(p), (r = !0))));
                if (s.videoCapabilities)
                  for (l = x(s.videoCapabilities), p = l.next(); !p.done; p = l.next())
                    ((p = p.value),
                      p.contentType &&
                        ((u = !0),
                        i.canPlayType(p.contentType, this.g) && (o.videoCapabilities.push(p), (r = !0))));
                if (
                  (u || (r = i.canPlayType("video/mp4", this.g) || i.canPlayType("video/webm", this.g)),
                  s.persistentState == "required" &&
                    (n
                      ? ((o.persistentState = "required"), (o.sessionTypes = ["persistent-license"]))
                      : (r = !1)),
                  r)
                ) {
                  this.h = o;
                  return;
                }
              }
              throw (
                (n = "Unsupported keySystem"),
                (e == "org.w3.clearkey" || e == "com.widevine.alpha") &&
                  (n = "None of the requested configurations were supported."),
                (e = Error(n)),
                (e.name = "NotSupportedError"),
                (e.code = DOMException.NOT_SUPPORTED_ERR),
                e
              );
            }
            ((hf.prototype.createMediaKeys = function () {
              var e = new ol(this.g);
              return Promise.resolve(e);
            }),
              (hf.prototype.getConfiguration = function () {
                return this.h;
              }));
            function ol(e) {
              ((this.l = e), (this.h = null), (this.g = new et()), (this.i = []), (this.j = new Map()));
            }
            function PA(e, t) {
              ((e.h = t), e.g.Qa());
              var n = qm;
              t &&
                (e.g.D(t, n + "needkey", function (r) {
                  var i = new CustomEvent("encrypted");
                  ((i.initDataType = "cenc"), (i.initData = Tr(r.initData)), e.h.dispatchEvent(i));
                }),
                e.g.D(t, n + "keymessage", function (r) {
                  var i = Km(e, r.sessionId);
                  i &&
                    ((r = new Map()
                      .set("messageType", i.keyStatuses.Kc() == null ? "licenserequest" : "licenserenewal")
                      .set("message", r.message)),
                    (r = new we("message", r)),
                    i.h && (i.h.resolve(), (i.h = null)),
                    i.dispatchEvent(r));
                }),
                e.g.D(t, n + "keyadded", function (r) {
                  (r = Km(e, r.sessionId)) && r.ready();
                }),
                e.g.D(t, n + "keyerror", function (r) {
                  var i = Km(e, r.sessionId);
                  if (i) {
                    var s = Error("EME v0.1b key error"),
                      o = r.errorCode;
                    ((o.systemCode = r.systemCode),
                      (s.errorCode = o),
                      !r.sessionId && i.h
                        ? (r.systemCode == 45 && (s.message = "Unsupported session type."),
                          i.h.reject(s),
                          (i.h = null))
                        : r.sessionId && i.g
                          ? (i.g.reject(s), (i.g = null))
                          : ((s = r.systemCode),
                            r.errorCode.code == MediaKeyError.MEDIA_KEYERR_OUTPUT
                              ? pf(i, "output-restricted")
                              : s == 1
                                ? pf(i, "expired")
                                : pf(i, "internal-error")));
                  }
                }));
            }
            ((ol.prototype.createSession = function (e) {
              if (((e = e || "temporary"), e != "temporary" && e != "persistent-license"))
                throw new TypeError("Session type " + e + " is unsupported on this platform.");
              var t = this.h || document.createElement("video");
              return (t.src || (t.src = "about:blank"), (e = new $m(t, this.l, e)), this.i.push(e), e);
            }),
              (ol.prototype.setServerCertificate = function () {
                return Promise.resolve(!1);
              }),
              (ol.prototype.getStatusForPolicy = function () {
                return Promise.resolve("usable");
              }));
            function Km(e, t) {
              var n = e.j.get(t);
              return n || ((n = e.i.shift()) ? ((n.sessionId = t), e.j.set(t, n), n) : null);
            }
            function $m(e, t, n) {
              (ot.call(this),
                (this.j = e),
                (this.m = !1),
                (this.g = this.h = null),
                (this.i = t),
                (this.l = n),
                (this.sessionId = ""),
                (this.expiration = NaN),
                (this.closed = new at()),
                (this.keyStatuses = new LA()),
                (this.onkeystatuseschange = null));
            }
            (J($m, ot),
              (h = $m.prototype),
              (h.ready = function () {
                (pf(this, "usable"), this.g && this.g.resolve(), (this.g = null));
              }));
            function DA(e, t, n) {
              if (e.m) return Promise.reject(Error("The session is already initialized."));
              e.m = !0;
              try {
                if (e.l == "persistent-license")
                  if (n) var r = De(Or("LOAD_SESSION|" + n));
                  else {
                    var i = Or("PERSISTENT|");
                    r = Nt(i, t);
                  }
                else r = De(t);
              } catch (o) {
                return Promise.reject(o);
              }
              e.h = new at();
              var s = Wm("generateKeyRequest");
              try {
                e.j[s](e.i, r);
              } catch (o) {
                if (o.name != "InvalidStateError") return ((e.h = null), Promise.reject(o));
                new Ve(function () {
                  try {
                    e.j[s](e.i, r);
                  } catch (u) {
                    (e.h.reject(u), (e.h = null));
                  }
                }).ka(0.01);
              }
              return e.h;
            }
            function Ym(e, t, n) {
              if (e.g)
                e.g
                  .then(function () {
                    return Ym(e, t, n);
                  })
                  .catch(function () {
                    return Ym(e, t, n);
                  });
              else {
                if (((e.g = t), e.i == "webkit-org.w3.clearkey")) {
                  var r = St(n),
                    i = JSON.parse(r);
                  (i.keys[0].kty != "oct" &&
                    (e.g.reject(Error("Response is not a valid JSON Web Key Set.")), (e.g = null)),
                    (r = Sr(i.keys[0].k)),
                    (i = Sr(i.keys[0].kid)));
                } else ((r = De(n)), (i = null));
                var s = Wm("addKey");
                try {
                  e.j[s](e.i, r, i, e.sessionId);
                } catch (o) {
                  (e.g.reject(o), (e.g = null));
                }
              }
            }
            function pf(e, t) {
              var n = e.keyStatuses;
              ((n.size = t == null ? 0 : 1),
                (n.g = t),
                (t = new we("keystatuseschange")),
                e.dispatchEvent(t),
                e.onkeystatuseschange && e.onkeystatuseschange(t));
            }
            ((h.generateRequest = function (e, t) {
              return DA(this, t, null);
            }),
              (h.load = function (e) {
                return this.l == "persistent-license"
                  ? DA(this, null, e)
                  : Promise.reject(Error("Not a persistent session."));
              }),
              (h.update = function (e) {
                var t = new at();
                return (Ym(this, t, e), t);
              }),
              (h.close = function () {
                if (this.l != "persistent-license") {
                  if (!this.sessionId)
                    return (this.closed.reject(Error("The session is not callable.")), this.closed);
                  var e = Wm("cancelKeyRequest");
                  try {
                    this.j[e](this.i, this.sessionId);
                  } catch (t) {}
                }
                return (this.closed.resolve(), this.closed);
              }),
              (h.remove = function () {
                return this.l != "persistent-license"
                  ? Promise.reject(Error("Not a persistent session."))
                  : this.close();
              }));
            function LA() {
              ((this.size = 0), (this.g = void 0));
            }
            ((h = LA.prototype),
              (h.Kc = function () {
                return this.g;
              }),
              (h.forEach = function (e) {
                this.g && e(this.g, Xl.value());
              }),
              (h.get = function (e) {
                if (this.has(e)) return this.g;
              }),
              (h.has = function (e) {
                var t = Xl.value();
                return !!(this.g && fi(e, t));
              }),
              (h.entries = function () {}),
              (h.keys = function () {}),
              (h.values = function () {}));
            var qm = "",
              Y4 = "webkit";
            cr(_A);
            function bA() {}
            function NA() {
              g.crypto && ("randomUUID" in g.crypto || (g.crypto.randomUUID = q4));
            }
            function q4() {
              var e = URL.createObjectURL(new Blob()),
                t = e.toString();
              return (URL.revokeObjectURL(e), t.substr(t.lastIndexOf("/") + 1));
            }
            ((Xn.RandomUUID = bA), (bA.install = NA), cr(NA));
            function OA() {}
            function UA() {
              var e = Symbol.prototype;
              "description" in e || Object.defineProperty(e, "description", { get: J4 });
            }
            function J4() {
              var e = /\((.*)\)/.exec(this.toString());
              return e ? e[1] : void 0;
            }
            ((Xn.Symbol = OA), (OA.install = UA), cr(UA));
            function jA() {}
            function BA() {
              for (
                var e = x([
                    Uint8Array,
                    Uint8ClampedArray,
                    Uint16Array,
                    Uint32Array,
                    Int8Array,
                    Int16Array,
                    Int32Array,
                    Float32Array,
                    Float64Array,
                  ]),
                  t = e.next();
                !t.done;
                t = e.next()
              )
                ((t = t.value),
                  t.prototype.indexOf || (t.prototype.indexOf = Q4),
                  t.prototype.lastIndexOf || (t.prototype.lastIndexOf = Z4),
                  t.prototype.includes || (t.prototype.includes = eL));
            }
            function Q4(e, t) {
              return Array.prototype.indexOf.call(this, e, t);
            }
            function Z4(e, t) {
              return Array.prototype.lastIndexOf.call(this, e, t);
            }
            function eL(e, t) {
              return this.indexOf(e, t) !== -1;
            }
            ((Xn.TypedArray = jA), (jA.install = BA), cr(BA));
            function FA() {}
            function VA() {
              if (g.HTMLMediaElement) {
                var e = HTMLMediaElement.prototype.play;
                HTMLMediaElement.prototype.play = function () {
                  var t = e.apply(this);
                  return (t && t.catch(function () {}), t);
                };
              }
            }
            ((Xn.VideoPlayPromise = FA), (FA.install = VA), cr(VA));
            function HA() {}
            function GA() {
              if (g.HTMLVideoElement) {
                var e = HTMLVideoElement.prototype;
                !e.getVideoPlaybackQuality &&
                  ("webkitDroppedFrameCount" in e || typeof Hs().webkitDroppedFrameCount == "number") &&
                  (e.getVideoPlaybackQuality = tL);
              }
            }
            function tL() {
              return {
                droppedVideoFrames: this.webkitDroppedFrameCount,
                totalVideoFrames: this.webkitDecodedFrameCount,
                corruptedVideoFrames: 0,
                creationTime: NaN,
                totalFrameDelay: 0,
              };
            }
            ((Xn.VideoPlaybackQuality = HA), (HA.install = GA), cr(GA));
            function zA() {}
            function XA() {
              if (!g.VTTCue && g.TextTrackCue) {
                var e = null,
                  t = TextTrackCue.length;
                if (t == 3) e = Jm;
                else if (t == 6) e = nL;
                else {
                  try {
                    var n = !!Jm(1, 2, "");
                  } catch (r) {
                    n = !1;
                  }
                  n && (e = Jm);
                }
                e &&
                  (g.VTTCue = function (r, i, s) {
                    return e(r, i, s);
                  });
              }
            }
            function Jm(e, t, n) {
              return new g.TextTrackCue(e, t, n);
            }
            function nL(e, t, n) {
              return new g.TextTrackCue(e + "-" + t + "-" + n, e, t, n);
            }
            ((Xn.VTTCue = zA), (zA.install = XA), cr(XA));
            function Qt(e) {
              (ot.call(this),
                (this.g = e),
                (this.m = null),
                (this.h = []),
                (this.j = -1),
                (this.i = this.l = null),
                (this.o = new et()));
            }
            (J(Qt, ot),
              (h = Qt.prototype),
              (h.destroy = function () {
                var e = this;
                return j(function (t) {
                  if (t.g == 1) return I(t, e.removeAllItems(), 2);
                  ((e.g = null), e.o && (e.o.release(), (e.o = null)), ot.prototype.release.call(e), re(t));
                });
              }),
              (h.configure = function (e) {
                this.m = e;
              }),
              (h.getConfiguration = function () {
                return this.m;
              }),
              (h.getCurrentItem = function () {
                return this.h.length && this.j >= 0 && this.j < this.h.length ? this.h[this.j] : null;
              }),
              (h.getCurrentItemIndex = function () {
                return this.j;
              }),
              (h.getItems = function () {
                return this.h.slice();
              }),
              (h.insertItems = function (e) {
                (this.h.push.apply(this.h, Y(e)), this.dispatchEvent(new we("itemsinserted")));
              }),
              (h.removeAllItems = function () {
                var e = this,
                  t,
                  n,
                  r,
                  i;
                return j(function (s) {
                  if (s.g == 1) return (e.o.Qa(), e.h.length && e.j >= 0 ? I(s, e.g.Cc(), 2) : s.A(2));
                  if (s.g != 4) {
                    for (
                      t = [],
                        e.i && (e.i.preloadManager.l || t.push(e.i.preloadManager.destroy()), (e.i = null)),
                        e.l && (e.l.preloadManager.l || t.push(e.l.preloadManager.destroy()), (e.l = null)),
                        n = x(e.h),
                        r = n.next();
                      !r.done;
                      r = n.next()
                    )
                      ((i = r.value),
                        i.preloadManager && !i.preloadManager.l && t.push(i.preloadManager.destroy()));
                    return t.length ? I(s, Promise.all(t), 4) : s.A(4);
                  }
                  ((e.h = []), (e.j = -1), e.dispatchEvent(new we("itemsremoved")), re(s));
                });
              }),
              (h.playItem = function (e) {
                var t = this,
                  n,
                  r,
                  i,
                  s,
                  o,
                  u,
                  l,
                  p,
                  m,
                  y,
                  v,
                  w,
                  A,
                  E,
                  C,
                  k,
                  R;
                return j(function (L) {
                  switch (L.g) {
                    case 1:
                      if ((t.o.Qa(), !t.h.length || e >= t.h.length)) throw new H(2, 7, 7007);
                      if (
                        ((n = t.getCurrentItem()),
                        (r = t.h[e]),
                        t.j != e && ((t.j = e), t.dispatchEvent(new we("currentitemchanged"))),
                        (i = t.g.bf()),
                        (s = t.m ? t.m.preloadNextUrlWindow : 0),
                        s > 0 &&
                          ((o = !1),
                          t.o.D(i, "timeupdate", function () {
                            var U, G, b, B;
                            return j(function (N) {
                              switch (N.g) {
                                case 1:
                                  if (t.l || t.h.length <= 1 || o || t.g.W() || !i.duration)
                                    return N.return();
                                  if (((U = t.g.Ra().end - i.currentTime), isNaN(U))) {
                                    N.A(0);
                                    break;
                                  }
                                  if (!(U <= s)) {
                                    N.A(0);
                                    break;
                                  }
                                  if (
                                    ((G = t.m && t.m.repeatMode),
                                    (b = null),
                                    t.j + 1 < t.h.length ? (b = t.h[t.j + 1]) : G == 1 && (b = t.h[0]),
                                    !b || (b.preloadManager && !b.preloadManager.l))
                                  ) {
                                    N.A(0);
                                    break;
                                  }
                                  return (
                                    (o = !0),
                                    (B = null),
                                    ee(N, 5),
                                    I(N, t.g.preload(b.manifestUri, b.startTime, b.mimeType, b.config), 7)
                                  );
                                case 7:
                                  ((B = N.h), de(N, 6));
                                  break;
                                case 5:
                                  (se(N), (B = null));
                                case 6:
                                  ((t.l = { item: b, preloadManager: B }), (o = !1), re(N));
                              }
                            });
                          })),
                        t.o.D(t.g, "complete", function () {
                          var U = t.m && t.m.repeatMode,
                            G = !1;
                          if (U == 2) G = !0;
                          else {
                            var b = t.j + 1;
                            b < t.h.length
                              ? t.playItem(b)
                              : U == 1 && (t.h.length == 1 ? (G = !0) : t.playItem(0));
                          }
                          G &&
                            (i.paused
                              ? ((i.currentTime = t.g.Ra().start), i.play())
                              : t.o.D(i, "paused", function () {
                                  ((i.currentTime = t.g.Ra().start), i.play());
                                }));
                        }),
                        (u = r.manifestUri),
                        r.preloadManager && !r.preloadManager.l && (u = r.preloadManager),
                        (l = !1),
                        t.l && t.l.item == r && t.l.preloadManager
                          ? (u = t.l.preloadManager)
                          : t.i &&
                            t.i.item == r &&
                            t.i.preloadManager &&
                            ((u = t.i.preloadManager), (l = !0)),
                        !t.i)
                      ) {
                        L.A(2);
                        break;
                      }
                      if (l || t.i.preloadManager.l) {
                        L.A(3);
                        break;
                      }
                      return I(L, t.i.preloadManager.destroy(), 3);
                    case 3:
                      t.i = null;
                    case 2:
                      if (!(t.m && t.m.preloadPrevItem && n && t.g.$d() === ln)) {
                        L.A(5);
                        break;
                      }
                      return ((p = null), ee(L, 6), I(L, t.g.jj(), 8));
                    case 8:
                      ((p = L.h), de(L, 7));
                      break;
                    case 6:
                      (se(L), (p = null));
                    case 7:
                      t.i = { item: n, preloadManager: p };
                    case 5:
                      return (
                        r.config && (t.g.Oi(), t.g.configure(r.config)),
                        I(L, t.g.load(u, r.startTime, r.mimeType), 9)
                      );
                    case 9:
                      if (((t.l = null), r.extraText))
                        for (m = x(r.extraText), y = m.next(); !y.done; y = m.next())
                          ((v = y.value),
                            v.mime
                              ? t.g.Rd(v.uri, v.language, v.kind, v.mime, v.codecs)
                              : t.g.Rd(v.uri, v.language, v.kind));
                      if (r.extraThumbnail)
                        for (w = x(r.extraThumbnail), A = w.next(); !A.done; A = w.next())
                          ((E = A.value), t.g.Pe(E));
                      if (r.extraChapter)
                        for (C = x(r.extraChapter), k = C.next(); !k.done; k = C.next())
                          ((R = k.value), t.g.Oe(R.uri, R.language, R.mime));
                      re(L);
                  }
                });
              }),
              fe("shaka.queue.QueueManager", Qt),
              (Qt.prototype.playItem = Qt.prototype.playItem),
              (Qt.prototype.removeAllItems = Qt.prototype.removeAllItems),
              (Qt.prototype.insertItems = Qt.prototype.insertItems),
              (Qt.prototype.getItems = Qt.prototype.getItems),
              (Qt.prototype.getCurrentItemIndex = Qt.prototype.getCurrentItemIndex),
              (Qt.prototype.getCurrentItem = Qt.prototype.getCurrentItem),
              (Qt.prototype.getConfiguration = Qt.prototype.getConfiguration),
              (Qt.prototype.configure = Qt.prototype.configure),
              (Qt.prototype.destroy = Qt.prototype.destroy),
              (yd = function (e) {
                return new Qt(e);
              }));
            function dr() {}
            ((dr.prototype.parseInit = function () {}),
              (dr.prototype.setSequenceMode = function () {}),
              (dr.prototype.setManifestType = function () {}),
              (dr.prototype.parseMedia = function (e, t) {
                var n = null,
                  r = [];
                ((e = St(e).split(/\r?\n/)), (e = x(e)));
                for (var i = e.next(); !i.done; i = e.next())
                  if ((i = i.value) && !/^\s+$/.test(i) && (i = rL.exec(i))) {
                    var s = iL.exec(i[1]);
                    ((s = parseInt(s[1], 10) * 60 + parseFloat(s[2].replace(",", "."))),
                      (i = new pt(s, t.segmentEnd ? t.segmentEnd : s + 2, i[2])),
                      n && ((n.endTime = s), r.push(n)),
                      (n = i));
                  }
                return (n && r.push(n), r);
              }),
              fe("shaka.text.LrcTextParser", dr),
              (dr.prototype.parseMedia = dr.prototype.parseMedia),
              (dr.prototype.setManifestType = dr.prototype.setManifestType),
              (dr.prototype.setSequenceMode = dr.prototype.setSequenceMode),
              (dr.prototype.parseInit = dr.prototype.parseInit));
            var rL = /^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,
              iL = /^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;
            an("application/x-subtitle-lrc", function () {
              return new dr();
            });
            function ir() {
              this.g = "UNKNOWN";
            }
            ((ir.prototype.parseInit = function () {}),
              (ir.prototype.setSequenceMode = function () {}),
              (ir.prototype.setManifestType = function (e) {
                this.g = e;
              }),
              (ir.prototype.parseMedia = function (e, t, n, r) {
                var i = St(e);
                if (((e = []), i == "")) return e;
                var s = Ds(i, "tt", !0);
                if (!s) throw new H(2, 2, 2005, "Failed to parse TTML.");
                if (((i = Yr(s, "body")[0]), !i)) return [];
                var o = ti(s, al, "frameRate"),
                  u = ti(s, al, "subFrameRate"),
                  l = ti(s, al, "frameRateMultiplier"),
                  p = ti(s, al, "tickRate"),
                  m = ti(s, al, "cellResolution"),
                  y = s.attributes["xml:space"] || "default",
                  v = ti(s, yf, "extent");
                if (y != "default" && y != "preserve")
                  throw new H(2, 2, 2005, "Invalid xml:space value: " + y);
                ((y = y == "default"),
                  (o = new lL(o, u, l, p)),
                  (m = uL(m)),
                  (u = Yr(s, "metadata")[0]),
                  (u = (u ? u.children : []).filter(function (E) {
                    return E != "\n";
                  })),
                  (l = Yr(s, "style")),
                  (s = Yr(s, "region")),
                  (p = []));
                for (var w = x(s), A = w.next(); !A.done; A = w.next())
                  (A = sL(this, A.value, l, v)) && p.push(A);
                if (it(i, "p").length) throw new H(2, 2, 2001, "<p> can only be inside <div> in TTML");
                for (v = x(it(i, "div")), w = v.next(); !w.done; w = v.next())
                  if (it(w.value, "span").length)
                    throw new H(2, 2, 2001, "<span> can only be inside <p> in TTML");
                return (
                  (t = WA(this, i, t, o, u, l, s, p, y, m, null, !1, n, r)) &&
                    (t.backgroundColor || (t.backgroundColor = "transparent"), e.push(t)),
                  e
                );
              }));
            function WA(e, t, n, r, i, s, o, u, l, p, m, y, v, w) {
              var A = m;
              if (Jl(t)) {
                if (!y) return null;
                var E = { tagName: "span", children: [Dt(t)], attributes: {}, parent: null };
              } else E = t;
              for (
                var C = null, k = x(nE), R = k.next();
                !R.done && !(C = mf(E, "backgroundImage", i, "#", R.value)[0]);
                R = k.next()
              );
              ((k = null), (R = ti(E, nE, "backgroundImage")));
              var L = /^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;
              if (R && L.test(R)) {
                if (((k = parseInt(R.split(":").pop(), 10) - 1), k >= w.length)) return null;
                k = w[k];
              } else
                v &&
                  R &&
                  !R.startsWith("#") &&
                  ((L = new Pt(v)), (R = new Pt(R)), (R = L.resolve(R).toString()) && (k = R));
              if (
                ((t.tagName == "p" || C || k) && (y = !0),
                (t = y),
                (R = (E.attributes["xml:space"] || (l ? "default" : "preserve")) == "default"),
                (L = E.children.every(Jl)),
                (l = []),
                !L)
              )
                for (var U = x(E.children), G = U.next(); !G.done; G = U.next())
                  (G = WA(e, G.value, n, r, i, s, o, u, R, p, E, y, v, w)) && l.push(G);
              if (
                ((i = m != null),
                (v = Dt(E)),
                (v = E.children.length && v && /\S/.test(v)),
                (U = E.attributes.begin || E.attributes.end || E.attributes.dur),
                !(U || v || E.tagName == "br" || l.length != 0 || (i && !R)))
              )
                return null;
              for (w = YA(E, r), v = w.start, w = w.end; A && A.tagName && A.tagName != "tt"; )
                ((w = aL(A, r, v, w)), (v = w.start), (w = w.end), (A = A.parent));
              if (
                (v == null && (v = 0),
                (v += n.periodStart),
                (w = w == null ? 1 / 0 : w + n.periodStart),
                e.g !== "HLS" && ((v = Math.max(v, n.segmentStart)), (w = Math.min(w, n.segmentEnd))),
                !U && l.length > 0)
              )
                for (v = 1 / 0, w = 0, n = x(l), r = n.next(); !r.done; r = n.next())
                  ((r = r.value), (v = Math.min(v, r.startTime)), (w = Math.max(w, r.endTime)));
              if (E.tagName == "br") return ((e = new pt(v, w, "")), (e.lineBreak = !0), e);
              if (
                ((n = ""),
                L && ((n = kn(Dt(E) || "")), R && (n = n.replace(/\s+/g, " "))),
                (n = new pt(v, w, n)),
                (n.nestedCues = l),
                y || (n.isContainer = !0),
                p && (n.cellResolution = p),
                (p = mf(E, "region", o, "")[0]),
                E.attributes.region && p && p.attributes["xml:id"])
              ) {
                var b = p.attributes["xml:id"];
                n.region = u.filter(function (B) {
                  return B.id == b;
                })[0];
              }
              return (
                (u = p),
                m && i && !E.attributes.region && !E.attributes.style && (u = mf(m, "region", o, "")[0]),
                oL(e, n, E, u, C, k, s, t, l.length == 0),
                n
              );
            }
            function sL(e, t, n, r) {
              var i = new _s(),
                s = t.attributes["xml:id"];
              if (!s) return null;
              ((i.id = s),
                (s = null),
                r && (s = ny.exec(r) || ry.exec(r)),
                (r = s ? Number(s[1]) : null),
                (s = s ? Number(s[2]) : null));
              var o,
                u = gf(e, t, n, "extent");
              if (u) {
                var l = (o = ny.exec(u)) || ry.exec(u);
                l != null &&
                  ((i.width = Number(l[1])),
                  (i.height = Number(l[2])),
                  o ||
                    (r != null && (i.width = (i.width * 100) / r),
                    s != null && (i.height = (i.height * 100) / s)),
                  (i.widthUnits = o || r != null ? Jn : 0),
                  (i.heightUnits = o || s != null ? Jn : 0));
              }
              return (
                (e = gf(e, t, n, "origin")) &&
                  ((l = (o = ny.exec(e)) || ry.exec(e)),
                  l != null &&
                    ((i.viewportAnchorX = Number(l[1])),
                    (i.viewportAnchorY = Number(l[2])),
                    o
                      ? u ||
                        ((i.width = 100 - i.viewportAnchorX),
                        (i.widthUnits = Jn),
                        (i.height = 100 - i.viewportAnchorY),
                        (i.heightUnits = Jn))
                      : (s != null && (i.viewportAnchorY = (i.viewportAnchorY * 100) / s),
                        r != null && (i.viewportAnchorX = (i.viewportAnchorX * 100) / r)),
                    (i.viewportAnchorUnits = o || r != null ? Jn : 0))),
                i
              );
            }
            function Qm(e) {
              var t = e.match(/rgba\(([^)]+)\)/);
              return t && ((t = t[1].split(",")), t.length == 4)
                ? ((t[3] = String(Number(t[3]) / 255)), "rgba(" + t.join(",") + ")")
                : e;
            }
            function oL(e, t, n, r, i, s, o, u, l) {
              if (
                ((u = u || l),
                vn(e, n, r, o, "direction", u) == "rtl" && (t.direction = "rtl"),
                (l = vn(e, n, r, o, "writingMode", u)),
                l == "tb" || l == "tblr"
                  ? (t.writingMode = "vertical-lr")
                  : l == "tbrl"
                    ? (t.writingMode = "vertical-rl")
                    : l == "rltb" || l == "rl"
                      ? (t.direction = "rtl")
                      : l && (t.direction = $a),
                (l = vn(e, n, r, o, "textAlign", !0))
                  ? ((t.positionAlign = fL.get(l)),
                    (t.lineAlign = dL.get(l)),
                    (t.textAlign = Uh[l.toUpperCase()]))
                  : (t.textAlign = ii),
                (l = vn(e, n, r, o, "displayAlign", !0)) && (t.displayAlign = qv[l.toUpperCase()]),
                (l = vn(e, n, r, o, "color", u)) && (t.color = Qm(l)),
                (l = vn(e, n, r, o, "backgroundColor", u)) && (t.backgroundColor = Qm(l)),
                (l = vn(e, n, r, o, "border", u)) && (t.border = l),
                (l = vn(e, n, r, o, "fontFamily", u)))
              )
                switch (l) {
                  case "monospaceSerif":
                    t.fontFamily = "Courier New,Liberation Mono,Courier,monospace";
                    break;
                  case "proportionalSansSerif":
                    t.fontFamily = "Arial,Helvetica,Liberation Sans,sans-serif";
                    break;
                  case "sansSerif":
                    t.fontFamily = "sans-serif";
                    break;
                  case "monospaceSansSerif":
                    t.fontFamily = "Consolas,monospace";
                    break;
                  case "proportionalSerif":
                    t.fontFamily = "serif";
                    break;
                  default:
                    t.fontFamily = l
                      .split(",")
                      .filter(function (p) {
                        return p != "default";
                      })
                      .join(",");
                }
              switch (
                ((l = vn(e, n, r, o, "fontWeight", u)) && l == "bold" && (t.fontWeight = vo),
                (l = vn(e, n, r, o, "wrapOption", u)),
                (t.wrapLine = !(l && l == "noWrap")),
                (l = vn(e, n, r, o, "lineHeight", u)) && l.match(aa) && (t.lineHeight = l),
                (l = vn(e, n, r, o, "fontSize", u)) && (l.match(aa) || l.match(cL)) && (t.fontSize = l),
                (l = vn(e, n, r, o, "fontStyle", u)) && (t.fontStyle = e0[l.toUpperCase()]),
                i
                  ? ((s = i.attributes.imageType || i.attributes.imagetype),
                    (l = i.attributes.encoding),
                    (i = Dt(i).trim()),
                    s == "PNG" && l == "Base64" && i && (t.backgroundImage = "data:image/png;base64," + i))
                  : s && (t.backgroundImage = s),
                (i = vn(e, n, r, o, "textOutline", u)) &&
                  ((i = i.split(" ")),
                  i[0].match(aa)
                    ? (t.textStrokeColor = t.color)
                    : ((t.textStrokeColor = Qm(i[0])), i.shift()),
                  i[0] && i[0].match(aa) ? (t.textStrokeWidth = i[0]) : (t.textStrokeColor = "")),
                (i = vn(e, n, r, o, "letterSpacing", u)) && i.match(aa) && (t.letterSpacing = i),
                (i = vn(e, n, r, o, "linePadding", u)) && i.match(aa) && (t.linePadding = i),
                (i = vn(e, n, r, o, "opacity", u)) && (t.opacity = parseFloat(i)),
                (i = gf(e, r, o, "textDecoration")) && KA(t, i),
                (i = Zm(e, n, o, "textDecoration")) && KA(t, i),
                (i = vn(e, n, r, o, "textCombine", u)) && (t.textCombineUpright = i),
                vn(e, n, r, o, "ruby", u))
              ) {
                case "container":
                  t.rubyTag = "ruby";
                  break;
                case "text":
                  t.rubyTag = "rt";
              }
            }
            function KA(e, t) {
              t = x(t.split(" "));
              for (var n = t.next(); !n.done; n = t.next())
                switch (n.value) {
                  case "underline":
                    e.textDecoration.includes(vi) || e.textDecoration.push(vi);
                    break;
                  case "noUnderline":
                    e.textDecoration.includes(vi) && Nr(e.textDecoration, vi);
                    break;
                  case "lineThrough":
                    e.textDecoration.includes("lineThrough") || e.textDecoration.push("lineThrough");
                    break;
                  case "noLineThrough":
                    e.textDecoration.includes("lineThrough") && Nr(e.textDecoration, "lineThrough");
                    break;
                  case "overline":
                    e.textDecoration.includes("overline") || e.textDecoration.push("overline");
                    break;
                  case "noOverline":
                    e.textDecoration.includes("overline") && Nr(e.textDecoration, "overline");
                }
            }
            function vn(e, t, n, r, i, s) {
              return ((s = s === void 0 ? !0 : s), (t = Zm(e, t, r, i)) ? t : s ? gf(e, n, r, i) : null);
            }
            function gf(e, t, n, r) {
              if (!t) return null;
              var i = ti(t, yf, r);
              return i || $A(e, t, n, r);
            }
            function Zm(e, t, n, r) {
              var i = ti(t, yf, r);
              return i || $A(e, t, n, r);
            }
            function $A(e, t, n, r) {
              t = mf(t, "style", n, "");
              for (var i = null, s = 0; s < t.length; s++) {
                var o = mi(t[s], "urn:ebu:tt:style", r);
                (o || (o = ti(t[s], yf, r)), o || (o = Zm(e, t[s], n, r)), o && (i = o));
              }
              return i;
            }
            function mf(e, t, n, r, i) {
              var s = [];
              if (!e || n.length < 1) return s;
              var o = e;
              for (e = null; !e && !(e = i ? mi(o, i, t) : o.attributes[t]) && ((o = o.parent), o); );
              if ((t = e)) {
                for (t = x(t.split(" ")), i = t.next(); !i.done; i = t.next())
                  for (i = i.value, e = x(n), o = e.next(); !o.done; o = e.next())
                    if (((o = o.value), r + o.attributes["xml:id"] == i)) {
                      s.push(o);
                      break;
                    }
              }
              return s;
            }
            function aL(e, t, n, r) {
              return (
                (e = YA(e, t)),
                n == null ? (n = e.start) : e.start != null && (n += e.start),
                r == null ? (r = e.end) : e.start != null && (r += e.start),
                { start: n, end: r }
              );
            }
            function YA(e, t) {
              var n = ey(e.attributes.begin, t),
                r = ey(e.attributes.end, t);
              return (
                (e = ey(e.attributes.dur, t)),
                r == null && e != null && (r = n + e),
                { start: n, end: r }
              );
            }
            function ey(e, t) {
              var n = null;
              if (qA.test(e)) {
                ((e = qA.exec(e)), (n = Number(e[1])));
                var r = Number(e[2]),
                  i = Number(e[3]),
                  s = Number(e[4]);
                ((s += (Number(e[5]) || 0) / t.h), (i += s / t.frameRate), (n = i + r * 60 + n * 3600));
              } else if (JA.test(e)) n = ty(JA, e);
              else if (QA.test(e)) n = ty(QA, e);
              else if (ZA.test(e)) ((e = ZA.exec(e)), (n = Number(e[1]) / t.frameRate));
              else if (eE.test(e)) ((e = eE.exec(e)), (n = Number(e[1]) / t.g));
              else if (tE.test(e)) n = ty(tE, e);
              else if (e) throw new H(2, 2, 2001, "Could not parse cue time range in TTML");
              return n;
            }
            function ty(e, t) {
              return (
                (e = e.exec(t)),
                e == null || e[0] == ""
                  ? null
                  : (Number(e[4]) || 0) / 1e3 +
                    (Number(e[3]) || 0) +
                    (Number(e[2]) || 0) * 60 +
                    (Number(e[1]) || 0) * 3600
              );
            }
            function uL(e) {
              return e && (e = /^(\d+) (\d+)$/.exec(e))
                ? { columns: parseInt(e[1], 10), rows: parseInt(e[2], 10) }
                : null;
            }
            (fe("shaka.text.TtmlTextParser", ir),
              (ir.prototype.parseMedia = ir.prototype.parseMedia),
              (ir.prototype.setManifestType = ir.prototype.setManifestType),
              (ir.prototype.setSequenceMode = ir.prototype.setSequenceMode),
              (ir.prototype.parseInit = ir.prototype.parseInit));
            function lL(e, t, n, r) {
              ((this.frameRate = Number(e) || 30),
                (this.h = Number(t) || 1),
                (this.g = Number(r)),
                this.g == 0 && (this.g = e ? this.frameRate * this.h : 1),
                n && (e = /^(\d+) (\d+)$/g.exec(n)) && (this.frameRate *= Number(e[1]) / Number(e[2])));
            }
            var ny = /^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,
              cL = /^(\d{1,4}(?:\.\d+)?|100)%$/,
              aa = /^(\d+px|\d+em|\d*\.?\d+c)$/,
              ry = /^(\d+)px (\d+)px$/,
              qA = /^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,
              JA = /^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,
              QA = /^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,
              ZA = /^(\d*(?:\.\d*)?)f$/,
              eE = /^(\d*(?:\.\d*)?)t$/,
              tE = RegExp(
                "^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$",
              ),
              dL = new Map()
                .set("left", bs)
                .set("center", "center")
                .set("right", "end")
                .set("start", bs)
                .set("end", "end"),
              fL = new Map().set("left", "line-left").set("center", "center").set("right", "line-right"),
              al = ["http://www.w3.org/ns/ttml#parameter", "http://www.w3.org/2006/10/ttaf1#parameter"],
              yf = ["http://www.w3.org/ns/ttml#styling", "http://www.w3.org/2006/10/ttaf1#styling"],
              nE = [
                "http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",
                "http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt",
              ];
            an("application/ttml+xml", function () {
              return new ir();
            });
            function $t() {
              this.g = new ir();
            }
            (($t.prototype.parseInit = function (e) {
              var t = !1;
              if (
                (new ut()
                  .box("moov", Ue)
                  .box("trak", Ue)
                  .box("mdia", Ue)
                  .box("minf", Ue)
                  .box("stbl", Ue)
                  .S("stsd", Ei)
                  .box("stpp", function (n) {
                    ((t = !0), n.parser.stop());
                  })
                  .parse(e),
                !t)
              )
                throw new H(2, 2, 2007);
            }),
              ($t.prototype.setSequenceMode = function (e) {
                this.g.setSequenceMode(e);
              }),
              ($t.prototype.setManifestType = function (e) {
                this.g.setManifestType(e);
              }),
              ($t.prototype.parseMedia = function (e, t, n) {
                var r = [],
                  i = null,
                  s = [],
                  o = new Map(),
                  u = [];
                if (
                  (new ut()
                    .box("moof", Ue)
                    .box("traf", Ue)
                    .S("tfhd", function (k) {
                      i = Ac(k.reader, k.flags).Xd;
                    })
                    .S("trun", function (k) {
                      ((k = Cc(k.reader, k.version, k.flags)), (k = x(k.mh)));
                      for (var R = k.next(); !R.done; R = k.next()) u.push(R.value.sampleSize || i || 0);
                    })
                    .S("subs", function (k) {
                      for (var R = k.reader, L = R.U(), U = -1, G = 0; G < L; G++) {
                        var b = R.U();
                        ((U += b), (b = R.Ca()));
                        for (var B = [], N = 0; N < b; N++)
                          (k.version == 1 ? B.push(R.U()) : B.push(R.Ca()), R.Y(), R.Y(), R.U());
                        o.set(U, B);
                      }
                    })
                    .box(
                      "mdat",
                      Mo(function (k) {
                        s.push(k);
                      }, !1),
                    )
                    .parse(e, !1),
                  s.length == 0)
                )
                  throw new H(2, 2, 2007);
                for (var l = Nt.apply(dn, Y(s)), p = 0, m = 0; m < u.length; m++) {
                  var y = De(l, p, u[m]);
                  p += u[m];
                  var v = o.get(m);
                  if (v && v.length) {
                    y = De(y, 0, v[0]);
                    for (var w = [], A = v[0], E = 1; E < v.length; E++) {
                      var C = De(e, A, v[E]);
                      ((C = Kl(C)), w.push("data:image/png;base64," + C), (A += v[E]));
                    }
                    r = r.concat(this.g.parseMedia(y, t, n, w));
                  } else r = r.concat(this.g.parseMedia(y, t, n, []));
                }
                return r;
              }),
              fe("shaka.text.Mp4TtmlParser", $t),
              ($t.prototype.parseMedia = $t.prototype.parseMedia),
              ($t.prototype.setManifestType = $t.prototype.setManifestType),
              ($t.prototype.setSequenceMode = $t.prototype.setSequenceMode),
              ($t.prototype.parseInit = $t.prototype.parseInit),
              an('application/mp4; codecs="stpp"', function () {
                return new $t();
              }),
              an('application/mp4; codecs="stpp.ttml"', function () {
                return new $t();
              }),
              an('application/mp4; codecs="stpp.ttml.im1i"', function () {
                return new $t();
              }),
              an('application/mp4; codecs="stpp.ttml.im1t"', function () {
                return new $t();
              }),
              an('application/mp4; codecs="stpp.ttml.im2i"', function () {
                return new $t();
              }),
              an('application/mp4; codecs="stpp.ttml.im2t"', function () {
                return new $t();
              }),
              an('application/mp4; codecs="stpp.ttml.etd1"', function () {
                return new $t();
              }),
              an('application/mp4; codecs="stpp.ttml.etd1|im1t"', function () {
                return new $t();
              }),
              an('application/mp4; codecs="stpp.ttml.im1t|etd1"', function () {
                return new $t();
              }),
              an('application/mp4; codecs="stpp.TTML.im1t"', function () {
                return new $t();
              }));
            function Ln() {
              this.g = "UNKNOWN";
            }
            ((Ln.prototype.parseInit = function () {}),
              (Ln.prototype.setSequenceMode = function () {}),
              (Ln.prototype.setManifestType = function (e) {
                this.g = e;
              }),
              (Ln.prototype.parseMedia = function (e, t) {
                ((e = St(e)), (e = e.replace(/\r\n|\r(?=[^\n]|$)/gm, "\n")));
                var n = e.split(/\n{2,}/m);
                if (!/^WEBVTT($|[ \t\n])/m.test(n[0])) throw new H(2, 2, 2e3);
                if (((e = t.vttOffset), this.g == "HLS" && n[0].includes("X-TIMESTAMP-MAP"))) {
                  var r = n[0];
                  if (
                    ((e = r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m)),
                    (r = r.match(/MPEGTS:(\d+)/m)),
                    !e || !r)
                  )
                    throw new H(2, 2, 2e3);
                  if (((e = yo(e[1])), e == null)) throw new H(2, 2, 2e3);
                  r = Number(r[1]);
                  for (var i = t.segmentStart - t.periodStart; i >= 95443.7176888889; )
                    ((i -= 95443.7176888889), (r += 8589934592));
                  e = t.periodStart + r / 9e4 - e;
                }
                for (t = [], r = x(n[0].split("\n")), i = r.next(); !i.done; i = r.next())
                  if (((i = i.value), /^Region:/.test(i))) {
                    i = new go(i);
                    var s = new _s();
                    (Ps(i), mo(i));
                    for (var o = Ps(i); o; ) {
                      var u = s,
                        l = o;
                      ((o = /^id=(.*)$/.exec(l))
                        ? (u.id = o[1])
                        : (o = /^width=(\d{1,2}|100)%$/.exec(l))
                          ? (u.width = Number(o[1]))
                          : (o = /^lines=(\d+)$/.exec(l))
                            ? ((u.height = Number(o[1])), (u.heightUnits = 2))
                            : (o = /^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))
                              ? ((u.regionAnchorX = Number(o[1])), (u.regionAnchorY = Number(o[2])))
                              : (o = /^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))
                                ? ((u.viewportAnchorX = Number(o[1])), (u.viewportAnchorY = Number(o[2])))
                                : /^scroll=up$/.exec(l) && (u.scroll = "up"),
                        mo(i),
                        (o = Ps(i)));
                    }
                    t.push(s);
                  }
                for (r = new Map(), $v(r), i = [], n = x(n.slice(1)), s = n.next(); !s.done; s = n.next()) {
                  if (
                    ((s = s.value.split("\n")),
                    (s.length != 1 || s[0]) && !/^NOTE($|[ \t])/.test(s[0]) && s[0] == "STYLE")
                  ) {
                    for (u = [], o = -1, l = 1; l < s.length; l++)
                      (s[l].includes("::cue") && (u.push([]), (o = u.length - 1)),
                        o != -1 && (u[o].push(s[l]), s[l].includes("}") && (o = -1)));
                    for (u = x(u), o = u.next(); !o.done; o = u.next()) {
                      var p = o.value;
                      ((o = "global"),
                        (l = p[0].match(/\((.*)\)/)) && (o = l.pop()),
                        (l = p.slice(1, -1)),
                        p[0].includes("}") && (p = /\{(.*?)\}/.exec(p[0])) && (l = p[1].split(";")),
                        (p = r.get(o)) || (p = new pt(0, 0, "")));
                      for (var m = !1, y = 0; y < l.length; y++) {
                        var v = /^\s*([^:]+):\s*(.*)/.exec(l[y]);
                        if (v) {
                          var w = v[2].trim().replace(";", "");
                          switch (v[1].trim()) {
                            case "background-color":
                            case "background":
                              ((m = !0), (p.backgroundColor = w));
                              break;
                            case "color":
                              ((m = !0), (p.color = w));
                              break;
                            case "font-family":
                              ((m = !0), (p.fontFamily = w));
                              break;
                            case "font-size":
                              ((m = !0), (p.fontSize = w));
                              break;
                            case "font-weight":
                              (parseInt(w, 10) >= 700 || w == "bold") && ((m = !0), (p.fontWeight = vo));
                              break;
                            case "font-style":
                              switch (w) {
                                case "normal":
                                  ((m = !0), (p.fontStyle = Bh));
                                  break;
                                case "italic":
                                  ((m = !0), (p.fontStyle = xo));
                                  break;
                                case "oblique":
                                  ((m = !0), (p.fontStyle = "oblique"));
                              }
                              break;
                            case "opacity":
                              ((m = !0), (p.opacity = parseFloat(w)));
                              break;
                            case "text-combine-upright":
                              ((m = !0), (p.textCombineUpright = w));
                              break;
                            case "text-shadow":
                              ((m = !0), (p.textShadow = w));
                              break;
                            case "white-space":
                              ((m = !0), (p.wrapLine = w != "noWrap"));
                          }
                        }
                      }
                      m && r.set(o, p);
                    }
                  }
                  if (
                    ((p = s),
                    (m = e),
                    (p.length == 1 && !p[0]) ||
                      /^NOTE($|[ \t])/.test(p[0]) ||
                      p[0] == "STYLE" ||
                      p[0] == "REGION")
                  )
                    s = null;
                  else if (
                    ((s = null),
                    p[0].includes("-->") || ((s = p[0]), p.splice(0, 1)),
                    (u = new go(p[0])),
                    (o = za(u)),
                    (y = qi(u, /[ \t]+--\x3e[ \t]+/g)),
                    (l = za(u)),
                    o == null || y == null || l == null)
                  )
                    (je("Failed to parse VTT time code. Cue skipped:", s, p), (s = null));
                  else {
                    for (
                      o += m,
                        l += m,
                        o < 0 && (o = 0),
                        m = p.slice(1).join("\n").trim(),
                        r.has("global")
                          ? ((p = r.get("global").clone()),
                            (p.startTime = o),
                            (p.endTime = l),
                            (p.payload = m))
                          : (p = new pt(o, l, m)),
                        mo(u),
                        o = Ps(u);
                      o;
                    )
                      (rE(p, o, t), mo(u), (o = Ps(u)));
                    (rc(p, r), s != null && (p.id = s), (s = p));
                  }
                  s && i.push(s);
                }
                return i;
              }));
            function rE(e, t, n) {
              var r;
              (r = /^align:(start|middle|center|end|left|right)$/.exec(t))
                ? ((t = r[1]), t == "middle" ? (e.textAlign = ii) : (e.textAlign = Uh[t.toUpperCase()]))
                : (r = /^vertical:(lr|rl)$/.exec(t))
                  ? (e.writingMode = r[1] == "lr" ? "vertical-lr" : "vertical-rl")
                  : (r = /^size:([\d.]+)%$/.exec(t))
                    ? (e.size = Number(r[1]))
                    : (r =
                          /^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(
                            t,
                          ))
                      ? ((e.position = Number(r[1])),
                        r[2] &&
                          ((t = r[2]),
                          (e.positionAlign =
                            t == "line-left" || t == "start"
                              ? "line-left"
                              : t == "line-right" || t == "end"
                                ? "line-right"
                                : t == "center" || t == "middle"
                                  ? "center"
                                  : ic)))
                      : (r = /^region:(.*)$/.exec(t))
                        ? (t = hL(n, r[1])) && (e.region = t)
                        : (n = /^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))
                          ? ((e.lineInterpretation = 1),
                            (e.line = Number(n[1])),
                            n[2] && (e.lineAlign = jh[n[2].toUpperCase()]))
                          : (n = /^line:(-?\d+)(?:,(start|end|center))?$/.exec(t)) &&
                            ((e.lineInterpretation = Ya),
                            (e.line = Number(n[1])),
                            n[2] && (e.lineAlign = jh[n[2].toUpperCase()]));
            }
            function hL(e, t) {
              return (
                (e = e.filter(function (n) {
                  return n.id == t;
                })),
                e.length ? e[0] : null
              );
            }
            (fe("shaka.text.VttTextParser", Ln),
              (Ln.prototype.parseMedia = Ln.prototype.parseMedia),
              (Ln.prototype.setManifestType = Ln.prototype.setManifestType),
              (Ln.prototype.setSequenceMode = Ln.prototype.setSequenceMode),
              (Ln.prototype.parseInit = Ln.prototype.parseInit),
              an("text/vtt", function () {
                return new Ln();
              }),
              an('text/vtt; codecs="vtt"', function () {
                return new Ln();
              }),
              an('text/vtt; codecs="wvtt"', function () {
                return new Ln();
              }));
            function fr() {
              this.g = null;
            }
            ((fr.prototype.parseInit = function (e) {
              var t = this,
                n = !1;
              if (
                (new ut()
                  .box("moov", Ue)
                  .box("trak", Ue)
                  .box("mdia", Ue)
                  .S("mdhd", function (r) {
                    ((r = Ic(r.reader, r.version)), (t.g = r.timescale));
                  })
                  .box("minf", Ue)
                  .box("stbl", Ue)
                  .S("stsd", Ei)
                  .box("wvtt", function () {
                    n = !0;
                  })
                  .parse(e),
                !this.g)
              )
                throw new H(2, 2, 2008);
              if (!n) throw new H(2, 2, 2008);
            }),
              (fr.prototype.setSequenceMode = function () {}),
              (fr.prototype.setManifestType = function () {}),
              (fr.prototype.parseMedia = function (e, t) {
                if (!e.length) return [];
                if (!this.g) throw new H(2, 2, 2008);
                var n = 0,
                  r = [],
                  i,
                  s = [],
                  o = !1,
                  u = !1,
                  l = !1,
                  p = null;
                if (
                  (new ut()
                    .box("moof", Ue)
                    .box("traf", Ue)
                    .S("tfdt", function (L) {
                      ((o = !0), (n = Ec(L.reader, L.version).baseMediaDecodeTime));
                    })
                    .S("tfhd", function (L) {
                      p = Ac(L.reader, L.flags).Wd;
                    })
                    .S("trun", function (L) {
                      ((u = !0), (r = Cc(L.reader, L.version, L.flags).mh));
                    })
                    .box(
                      "mdat",
                      Mo(function (L) {
                        ((l = !0), (i = L));
                      }, !1),
                    )
                    .parse(e, !1),
                  !l && !o && !u)
                )
                  throw new H(2, 2, 2008);
                e = n;
                for (var m = new gt(i, 0), y = x(r), v = y.next(); !v.done; v = y.next()) {
                  v = v.value;
                  var w = v.nh || p,
                    A = v.Gf ? n + v.Gf : e;
                  e = A + (w || 0);
                  var E = 0;
                  do {
                    var C = m.U();
                    E += C;
                    var k = m.U(),
                      R = null;
                    (Tc(k) == "vttc" ? C > 8 && (R = m.Tb(C - 8, !1)) : m.skip(C - 8),
                      w &&
                        R &&
                        ((C = pL(R, t.periodStart + A / this.g, t.periodStart + e / this.g)), s.push(C)));
                  } while (v.sampleSize && E < v.sampleSize);
                }
                return s.filter(ts);
              }));
            function pL(e, t, n) {
              var r, i, s;
              return (
                new ut()
                  .box(
                    "payl",
                    Mo(function (o) {
                      r = St(o);
                    }, !1),
                  )
                  .box(
                    "iden",
                    Mo(function (o) {
                      i = St(o);
                    }, !1),
                  )
                  .box(
                    "sttg",
                    Mo(function (o) {
                      s = St(o);
                    }, !1),
                  )
                  .parse(e),
                r ? gL(r, i, s, t, n) : null
              );
            }
            function gL(e, t, n, r, i) {
              if (((e = new pt(r, i, e)), rc(e), t && (e.id = t), n))
                for (t = new go(n), n = Ps(t); n; ) (rE(e, n, []), mo(t), (n = Ps(t)));
              return e;
            }
            (fe("shaka.text.Mp4VttParser", fr),
              (fr.prototype.parseMedia = fr.prototype.parseMedia),
              (fr.prototype.setManifestType = fr.prototype.setManifestType),
              (fr.prototype.setSequenceMode = fr.prototype.setSequenceMode),
              (fr.prototype.parseInit = fr.prototype.parseInit),
              an('application/mp4; codecs="wvtt"', function () {
                return new fr();
              }));
            function hr() {}
            ((hr.prototype.parseInit = function () {}),
              (hr.prototype.setSequenceMode = function () {}),
              (hr.prototype.setManifestType = function () {}),
              (hr.prototype.parseMedia = function (e) {
                var t = St(e).replace(/\r+/g, "");
                if (((t = t.trim()), (e = []), t == "")) return e;
                t = x(t.split("\n\n"));
                for (var n = t.next(); !n.done; n = t.next()) {
                  n = n.value.split("\n");
                  var r = new go(n[0]),
                    i = za(r),
                    s = qi(r, /,/g);
                  if (((r = za(r)), i == null || s == null || r == null))
                    throw new H(2, 2, 2001, "Could not parse cue time range in SubViewer");
                  e.push(new pt(i, r, n.slice(1).join("\n").trim()));
                }
                return e;
              }),
              fe("shaka.text.SbvTextParser", hr),
              (hr.prototype.parseMedia = hr.prototype.parseMedia),
              (hr.prototype.setManifestType = hr.prototype.setManifestType),
              (hr.prototype.setSequenceMode = hr.prototype.setSequenceMode),
              (hr.prototype.parseInit = hr.prototype.parseInit),
              an("text/x-subviewer", function () {
                return new hr();
              }));
            function pr() {
              this.g = new Ln();
            }
            ((pr.prototype.parseInit = function () {}),
              (pr.prototype.setSequenceMode = function () {}),
              (pr.prototype.setManifestType = function () {}),
              (pr.prototype.parseMedia = function (e, t, n) {
                var r = St(e);
                if (((e = "WEBVTT\n\n"), r != "")) {
                  ((r = r.replace(/\r+/g, "")), (r = r.trim()), (r = x(r.split("\n\n"))));
                  for (var i = r.next(); !i.done; i = r.next())
                    ((i = i.value.split(/\n/)),
                      i[0].match(/\d+/) && i.shift(),
                      (i[0] = i[0].replace(/,/g, ".")),
                      (e +=
                        i
                          .join("\n")
                          .replace(/{b}/g, "<b>")
                          .replace(/{\/b}/g, "</b>")
                          .replace(/{i}/g, "<i>")
                          .replace(/{\/i}/g, "</i>")
                          .replace(/{u}/g, "<u>")
                          .replace(/{\/u}/g, "</u>") + "\n\n"));
                }
                return ((e = De(Or(e))), this.g.parseMedia(e, t, n, []));
              }),
              fe("shaka.text.SrtTextParser", pr),
              (pr.prototype.parseMedia = pr.prototype.parseMedia),
              (pr.prototype.setManifestType = pr.prototype.setManifestType),
              (pr.prototype.setSequenceMode = pr.prototype.setSequenceMode),
              (pr.prototype.parseInit = pr.prototype.parseInit),
              an("text/srt", function () {
                return new pr();
              }));
            function gr() {}
            ((gr.prototype.parseInit = function () {}),
              (gr.prototype.setSequenceMode = function () {}),
              (gr.prototype.setManifestType = function () {}),
              (gr.prototype.parseMedia = function (e) {
                var t = "",
                  n = "",
                  r = null,
                  i = null;
                for (i = St(e).split(/\r?\n\s*\r?\n/), e = x(i), i = e.next(); !i.done; i = e.next()) {
                  var s = i.value;
                  ((i = s),
                    (s = yL.exec(s)) && ((r = s[1]), (i = s[2])),
                    r == "V4 Styles" || r == "V4+ Styles"
                      ? ((t = i), (t = n ? t + ("\n" + i) : i))
                      : r == "Events" && (n = n ? n + ("\n" + i) : i));
                }
                for (r = [], i = null, t = x(t.split(/\r?\n/)), e = t.next(); !e.done; e = t.next())
                  if (((e = e.value), !/^\s*;/.test(e) && (s = oE.exec(e)))) {
                    if (((e = s[1].trim()), (s = s[2].trim()), e == "Format")) i = s.split(vf);
                    else if (e == "Style") {
                      ((e = s.split(vf)), (s = {}));
                      for (var o = 0; o < i.length && o < e.length; o++) s[i[o]] = e[o];
                      r.push(s);
                    }
                  }
                for (
                  i = [], t = null, n = x(n.split(/\r?\n/)), s = n.next(), e = {};
                  !s.done;
                  e = { aj: void 0 }, s = n.next()
                )
                  if (((s = s.value), !/^\s*;/.test(s) && (o = oE.exec(s)))) {
                    if (((s = o[1].trim()), (o = o[2].trim()), s == "Format")) t = o.split(vf);
                    else if (s == "Dialogue") {
                      ((o = o.split(vf)), (s = {}));
                      for (var u = 0; u < t.length && u < o.length; u++) s[t[u]] = o[u];
                      u = sE(s.Start);
                      var l = sE(s.End);
                      ((o = new pt(
                        u,
                        l,
                        o
                          .slice(t.length - 1)
                          .join(",")
                          .replace(/\\N/g, "\n")
                          .replace(/\{[^}]+\}/g, ""),
                      )),
                        (e.aj = s.Style),
                        (e = r.find(
                          (function (p) {
                            return function (m) {
                              return m.Name == p.aj;
                            };
                          })(e),
                        )) && mL(o, e),
                        i.push(o));
                    }
                  }
                return i;
              }));
            function mL(e, t) {
              var n = t.Fontname;
              if (
                (n && (e.fontFamily = n),
                (n = t.Fontsize) && (e.fontSize = n + "px"),
                (n = t.PrimaryColour) && (n = iE(n)) && (e.color = n),
                (n = t.BackColour) && (n = iE(n)) && (e.backgroundColor = n),
                t.Bold && (e.fontWeight = vo),
                t.Italic && (e.fontStyle = xo),
                t.Underline && e.textDecoration.push(vi),
                (n = t.Spacing) && (e.letterSpacing = n + "px"),
                (n = t.Alignment))
              )
                switch (parseInt(n, 10)) {
                  case 1:
                    ((e.displayAlign = Ka), (e.textAlign = "start"));
                    break;
                  case 2:
                    ((e.displayAlign = Ka), (e.textAlign = ii));
                    break;
                  case 3:
                    ((e.displayAlign = Ka), (e.textAlign = "end"));
                    break;
                  case 5:
                    ((e.displayAlign = "before"), (e.textAlign = "start"));
                    break;
                  case 6:
                    ((e.displayAlign = "before"), (e.textAlign = ii));
                    break;
                  case 7:
                    ((e.displayAlign = "before"), (e.textAlign = "end"));
                    break;
                  case 9:
                    ((e.displayAlign = "center"), (e.textAlign = "start"));
                    break;
                  case 10:
                    ((e.displayAlign = "center"), (e.textAlign = ii));
                    break;
                  case 11:
                    ((e.displayAlign = "center"), (e.textAlign = "end"));
                }
              (t = t.AlphaLevel) && (e.opacity = parseFloat(t));
            }
            function iE(e) {
              return (
                (e = parseInt(e.replace("&H", ""), 16)),
                e >= 0
                  ? "rgba(" +
                    (e & 255) +
                    "," +
                    ((e >> 8) & 255) +
                    "," +
                    ((e >> 16) & 255) +
                    "," +
                    (((e >> 24) & 255) ^ 255) / 255 +
                    ")"
                  : null
              );
            }
            function sE(e) {
              return (
                (e = vL.exec(e)),
                (e[1] ? parseInt(e[1].replace(":", ""), 10) : 0) * 3600 +
                  parseInt(e[2], 10) * 60 +
                  parseFloat(e[3])
              );
            }
            (fe("shaka.text.SsaTextParser", gr),
              (gr.prototype.parseMedia = gr.prototype.parseMedia),
              (gr.prototype.setManifestType = gr.prototype.setManifestType),
              (gr.prototype.setSequenceMode = gr.prototype.setSequenceMode),
              (gr.prototype.parseInit = gr.prototype.parseInit));
            var yL = /^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,
              oE = /^\s*([^:]+):\s*(.*)/,
              vf = /\s*,\s*/,
              vL = /^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;
            an("text/x-ssa", function () {
              return new gr();
            });
            function aE(e, t) {
              var n = e[t + 1] & 1 ? 7 : 9;
              return t + n <= e.length &&
                ((e = (((e[t + 3] & 3) << 11) | (e[t + 4] << 3) | ((e[t + 5] & 224) >>> 5)) - n), e > 0)
                ? { ee: n, ra: e }
                : null;
            }
            function uE(e, t) {
              var n = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350],
                r = (e[t + 2] & 60) >>> 2;
              if (r > n.length - 1) return null;
              var i = ((e[t + 2] & 192) >>> 6) + 1,
                s = (e[t + 2] & 1) << 2;
              return (
                (s |= (e[t + 3] & 192) >>> 6),
                { sampleRate: n[r], channelCount: s, codec: "mp4a.40." + i }
              );
            }
            function lE(e, t) {
              if (t + 1 < e.length && e[t] === 255 && (e[t + 1] & 246) === 240) {
                var n = e[t + 1] & 1 ? 7 : 9;
                if (t + n >= e.length) return !1;
                var r = ((e[t + 3] & 3) << 11) | (e[t + 4] << 3) | ((e[t + 5] & 224) >>> 5);
                return r <= n
                  ? !1
                  : ((t += r),
                    t === e.length || (t + 1 < e.length && e[t] === 255 && (e[t + 1] & 246) === 240));
              }
              return !1;
            }
            function xL(e, t) {
              switch (e) {
                case "mp4a.40.2":
                  if (t === 1) return new Uint8Array([0, 200, 0, 128, 35, 128]);
                  if (t === 2) return new Uint8Array([33, 0, 73, 144, 2, 25, 0, 35, 128]);
                  if (t === 3) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 142]);
                  if (t === 4)
                    return new Uint8Array([
                      0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 128, 44, 128, 8, 2, 56,
                    ]);
                  if (t === 5)
                    return new Uint8Array([
                      0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 56,
                    ]);
                  if (t === 6)
                    return new Uint8Array([
                      0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 0, 178,
                      0, 32, 8, 224,
                    ]);
                  break;
                default:
                  if (t === 1)
                    return new Uint8Array([
                      1, 64, 34, 128, 163, 78, 230, 128, 186, 8, 0, 0, 0, 28, 6, 241, 193, 10, 90, 90, 90, 90,
                      90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                      90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94,
                    ]);
                  if (t === 2 || t === 3)
                    return new Uint8Array([
                      1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90,
                      90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                      90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94,
                    ]);
              }
              return null;
            }
            function mr(e) {
              ((this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null));
            }
            ((h = mr.prototype),
              (h.destroy = function () {
                this.g.clear();
              }),
              (h.isSupported = function (e) {
                return e.toLowerCase().split(";")[0] == "audio/aac" ? En(this.convertCodecs("audio", e)) : !1;
              }),
              (h.convertCodecs = function (e, t) {
                return t.toLowerCase().split(";")[0] == "audio/aac"
                  ? 'audio/mp4; codecs="' + (Fn(t) || "mp4a.40.2") + '"'
                  : t;
              }),
              (h.getOriginalMimeType = function () {
                return this.j;
              }),
              (h.transmux = function (e, t, n, r) {
                for (var i = De(e), s = Po(i), o = s.length; o < i.length && !lE(i, o); o++);
                if (
                  ((e = n.endTime * 1e3),
                  (s = Gs(s)),
                  s.length &&
                    n &&
                    (s = s.find(function (m) {
                      return m.description === "com.apple.streaming.transportStreamTimestamp";
                    })) &&
                    (e = s.data),
                  (s = uE(i, o)),
                  !s)
                )
                  return Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
                ((t.audioSamplingRate = s.sampleRate), (t.channelsCount = s.channelCount));
                for (var u = []; o < i.length; ) {
                  var l = aE(i, o);
                  if (!l) return Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
                  var p = l.ee + l.ra;
                  (o + p <= i.length &&
                    u.push({
                      data: i.subarray(o + l.ee, o + p),
                      size: l.ra,
                      duration: 1024,
                      sb: 0,
                      flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                    }),
                    (o += p));
                }
                return (
                  (i = s.sampleRate),
                  (e = Math.floor((e * i) / 1e3)),
                  (r = {
                    id: t.id,
                    type: "audio",
                    codecs: s.codec,
                    encrypted: t.encrypted && t.drmInfos.length > 0,
                    timescale: i,
                    duration: r,
                    Bb: [],
                    Ga: new Uint8Array([]),
                    Sa: new Uint8Array([]),
                    Za: 0,
                    $a: 0,
                    data: { sequenceNumber: this.h, baseMediaDecodeTime: e, zb: u },
                    stream: t,
                  }),
                  (r = new Ro([r])),
                  (n = t.id + "_" + n.i),
                  this.g.has(n) ? (t = this.g.get(n)) : ((t = ko(r)), this.g.set(n, t)),
                  (n = this.i !== t),
                  (r = lu(r)),
                  (this.i = t),
                  this.h++,
                  Promise.resolve({ data: r, init: n ? t : null })
                );
              }),
              fe("shaka.transmuxer.AacTransmuxer", mr),
              (mr.prototype.transmux = mr.prototype.transmux),
              (mr.prototype.getOriginalMimeType = mr.prototype.getOriginalMimeType),
              (mr.prototype.convertCodecs = mr.prototype.convertCodecs),
              (mr.prototype.isSupported = mr.prototype.isSupported),
              (mr.prototype.destroy = mr.prototype.destroy),
              xi(
                "audio/aac",
                function () {
                  return new mr("audio/aac");
                },
                Zi,
              ));
            function cE(e, t) {
              if (t + 8 > e.length || e[t] !== 11 || e[t + 1] !== 119) return null;
              var n = e[t + 4] >> 6;
              if (n >= 3) return null;
              var r = e[t + 4] & 63,
                i =
                  [
                    64, 69, 96, 64, 70, 96, 80, 87, 120, 80, 88, 120, 96, 104, 144, 96, 105, 144, 112, 121,
                    168, 112, 122, 168, 128, 139, 192, 128, 140, 192, 160, 174, 240, 160, 175, 240, 192, 208,
                    288, 192, 209, 288, 224, 243, 336, 224, 244, 336, 256, 278, 384, 256, 279, 384, 320, 348,
                    480, 320, 349, 480, 384, 417, 576, 384, 418, 576, 448, 487, 672, 448, 488, 672, 512, 557,
                    768, 512, 558, 768, 640, 696, 960, 640, 697, 960, 768, 835, 1152, 768, 836, 1152, 896,
                    975, 1344, 896, 976, 1344, 1024, 1114, 1536, 1024, 1115, 1536, 1152, 1253, 1728, 1152,
                    1254, 1728, 1280, 1393, 1920, 1280, 1394, 1920,
                  ][r * 3 + n] * 2;
              if (t + i > e.length) return null;
              var s = e[t + 6] >> 5,
                o = 0;
              (s === 2 ? (o += 2) : (s & 1 && s !== 1 && (o += 2), s & 4 && (o += 2)),
                (o = (((e[t + 6] << 8) | e[t + 7]) >> (12 - o)) & 1));
              var u = e[t + 5] & 7;
              return (
                (e = new Uint8Array([
                  (n << 6) | ((e[t + 5] >> 3) << 1) | (u >> 2),
                  ((u & 3) << 6) | (s << 3) | (o << 2) | (r >> 4),
                  (r << 4) & 224,
                ])),
                {
                  sampleRate: [48e3, 44100, 32e3][n],
                  channelCount: [2, 1, 2, 3, 3, 4, 4, 5][s] + o,
                  Ga: e,
                  ra: i,
                }
              );
            }
            function TL(e, t) {
              if (e[t] === 11 && e[t + 1] === 119) {
                var n = 0,
                  r = 5;
                t += r;
                for (var i, s; r > 0; ) {
                  s = e[t];
                  var o = Math.min(r, 8),
                    u = 8 - o;
                  ((i = (4278190080 >>> (24 + u)) << u),
                    (i = (s & i) >> u),
                    (n = n ? (n << o) | i : i),
                    (t += 1),
                    (r -= o));
                }
                if (n < 16) return !0;
              }
              return !1;
            }
            function kr(e) {
              ((this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null));
            }
            ((h = kr.prototype),
              (h.destroy = function () {
                this.g.clear();
              }),
              (h.isSupported = function (e) {
                return e.toLowerCase().split(";")[0] == "audio/ac3" ? En(this.convertCodecs("audio", e)) : !1;
              }),
              (h.convertCodecs = function (e, t) {
                return t.toLowerCase().split(";")[0] == "audio/ac3"
                  ? Be().se()
                    ? 'audio/mp4; codecs="ec-3"'
                    : 'audio/mp4; codecs="ac-3"'
                  : t;
              }),
              (h.getOriginalMimeType = function () {
                return this.j;
              }),
              (h.transmux = function (e, t, n, r) {
                e = De(e);
                for (var i = Po(e), s = i.length; s < e.length && !TL(e, s); s++);
                var o = n.endTime * 1e3;
                ((i = Gs(i)),
                  i.length &&
                    n &&
                    (i = i.find(function (m) {
                      return m.description === "com.apple.streaming.transportStreamTimestamp";
                    })) &&
                    (o = i.data),
                  (i = 0));
                for (var u = new Uint8Array([]), l = []; s < e.length; ) {
                  var p = cE(e, s);
                  if (!p) return Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
                  ((t.audioSamplingRate = p.sampleRate),
                    (t.channelsCount = p.channelCount),
                    (i = p.sampleRate),
                    (u = p.Ga),
                    l.push({
                      data: e.subarray(s, s + p.ra),
                      size: p.ra,
                      duration: 1536,
                      sb: 0,
                      flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                    }),
                    (s += p.ra));
                }
                return (
                  (e = Math.floor((o * i) / 1e3)),
                  (r = {
                    id: t.id,
                    type: "audio",
                    codecs: "ac-3",
                    encrypted: t.encrypted && t.drmInfos.length > 0,
                    timescale: i,
                    duration: r,
                    Bb: [],
                    Ga: u,
                    Sa: new Uint8Array([]),
                    Za: 0,
                    $a: 0,
                    data: { sequenceNumber: this.h, baseMediaDecodeTime: e, zb: l },
                    stream: t,
                  }),
                  (r = new Ro([r])),
                  (n = t.id + "_" + n.i),
                  this.g.has(n) ? (t = this.g.get(n)) : ((t = ko(r)), this.g.set(n, t)),
                  (n = this.i !== t),
                  (r = lu(r)),
                  (this.i = t),
                  this.h++,
                  Promise.resolve({ data: r, init: n ? t : null })
                );
              }),
              fe("shaka.transmuxer.Ac3Transmuxer", kr),
              (kr.prototype.transmux = kr.prototype.transmux),
              (kr.prototype.getOriginalMimeType = kr.prototype.getOriginalMimeType),
              (kr.prototype.convertCodecs = kr.prototype.convertCodecs),
              (kr.prototype.isSupported = kr.prototype.isSupported),
              (kr.prototype.destroy = kr.prototype.destroy),
              xi(
                "audio/ac3",
                function () {
                  return new kr("audio/ac3");
                },
                Zi,
              ));
            function dE(e, t) {
              if (t + 8 > e.length || ((e[t] << 8) | (e[t + 1] << 0)) !== 2935) return null;
              var n = new Mi(e.subarray(t + 2));
              (tr(n, 2), tr(n, 3));
              var r = (ze(n, 11) + 1) << 1,
                i = ze(n, 2);
              if (i == 3) {
                ((i = ze(n, 2)), (i = [24e3, 22060, 16e3][i]));
                var s = 3;
              } else ((i = [48e3, 44100, 32e3][i]), (s = ze(n, 2)));
              var o = ze(n, 3),
                u = ze(n, 1);
              return (
                (n = ze(n, 5)),
                t + r > e.byteLength
                  ? null
                  : ((e = Math.floor((r * i) / ([1, 2, 3, 6][s] * 16))),
                    (e = new Uint8Array([
                      (e & 8160) >> 5,
                      (e & 31) << 3,
                      (i << 6) | (n << 1) | 0,
                      0 | (o << 1) | (u << 0),
                      0,
                    ])),
                    { sampleRate: i, channelCount: [2, 1, 2, 3, 3, 4, 4, 5][o] + u, Ga: e, ra: r })
              );
            }
            function _r(e) {
              ((this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null));
            }
            ((h = _r.prototype),
              (h.destroy = function () {
                this.g.clear();
              }),
              (h.isSupported = function (e) {
                return e.toLowerCase().split(";")[0] == "audio/ec3" ? En(this.convertCodecs("audio", e)) : !1;
              }),
              (h.convertCodecs = function (e, t) {
                return t.toLowerCase().split(";")[0] == "audio/ec3" ? 'audio/mp4; codecs="ec-3"' : t;
              }),
              (h.getOriginalMimeType = function () {
                return this.j;
              }),
              (h.transmux = function (e, t, n, r) {
                e = De(e);
                for (
                  var i = Po(e), s = i.length;
                  s < e.length && ((e[s] << 8) | (e[s + 1] << 0)) !== 2935;
                  s++
                );
                var o = n.endTime * 1e3;
                ((i = Gs(i)),
                  i.length &&
                    n &&
                    (i = i.find(function (m) {
                      return m.description === "com.apple.streaming.transportStreamTimestamp";
                    })) &&
                    (o = i.data),
                  (i = 0));
                for (var u = new Uint8Array([]), l = []; s < e.length; ) {
                  var p = dE(e, s);
                  if (!p) return Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
                  ((t.audioSamplingRate = p.sampleRate),
                    (t.channelsCount = p.channelCount),
                    (i = p.sampleRate),
                    (u = p.Ga),
                    l.push({
                      data: e.subarray(s, s + p.ra),
                      size: p.ra,
                      duration: 1536,
                      sb: 0,
                      flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                    }),
                    (s += p.ra));
                }
                return (
                  (e = Math.floor((o * i) / 1e3)),
                  (r = {
                    id: t.id,
                    type: "audio",
                    codecs: "ec-3",
                    encrypted: t.encrypted && t.drmInfos.length > 0,
                    timescale: i,
                    duration: r,
                    Bb: [],
                    Ga: u,
                    Sa: new Uint8Array([]),
                    Za: 0,
                    $a: 0,
                    data: { sequenceNumber: this.h, baseMediaDecodeTime: e, zb: l },
                    stream: t,
                  }),
                  (r = new Ro([r])),
                  (n = t.id + "_" + n.i),
                  this.g.has(n) ? (t = this.g.get(n)) : ((t = ko(r)), this.g.set(n, t)),
                  (n = this.i !== t),
                  (r = lu(r)),
                  (this.i = t),
                  this.h++,
                  Promise.resolve({ data: r, init: n ? t : null })
                );
              }),
              fe("shaka.transmuxer.Ec3Transmuxer", _r),
              (_r.prototype.transmux = _r.prototype.transmux),
              (_r.prototype.getOriginalMimeType = _r.prototype.getOriginalMimeType),
              (_r.prototype.convertCodecs = _r.prototype.convertCodecs),
              (_r.prototype.isSupported = _r.prototype.isSupported),
              (_r.prototype.destroy = _r.prototype.destroy),
              xi(
                "audio/ec3",
                function () {
                  return new _r("audio/ec3");
                },
                Zi,
              ));
            function SL(e) {
              if (!e.length) return null;
              var t = e.find(function (E) {
                return E.type == 7;
              });
              if (
                ((e = e.find(function (E) {
                  return E.type == 8;
                })),
                !t || !e)
              )
                return null;
              var n = new Mi(t.data),
                r = nt(n);
              if (
                (nt(n),
                nt(n),
                un(n),
                AL.includes(r) && ((r = Se(n)), r === 3 && tr(n, 1), un(n), un(n), tr(n, 1), Ee(n)))
              ) {
                r = r !== 3 ? 8 : 12;
                for (var i = 0; i < r; i++) Ee(n) && (i < 6 ? _c(n, 16) : _c(n, 64));
              }
              if ((un(n), (r = Se(n)), r === 0)) Se(n);
              else if (r === 1) for (tr(n, 1), un(n), un(n), r = Se(n), i = 0; i < r; i++) un(n);
              (un(n), tr(n, 1));
              var s = Se(n),
                o = Se(n),
                u = ze(n, 1);
              (u === 0 && tr(n, 1), tr(n, 1));
              var l = 0,
                p = 0,
                m = 0,
                y = 0;
              if (
                (Ee(n) && ((l = Se(n)), (p = Se(n)), (m = Se(n)), (y = Se(n))), (i = r = 1), Ee(n) && Ee(n))
              ) {
                var v = nt(n),
                  w = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2],
                  A = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1];
                v > 0 && v <= 16
                  ? ((r = w[v - 1]), (i = A[v - 1]))
                  : v === 255 && ((r = ze(n, 16)), (i = ze(n, 16)));
              }
              return (
                (n = (2 - u) * (o + 1) * 16 - m * 2 - y * 2),
                (s = (s + 1) * 16 - l * 2 - p * 2),
                (l = []),
                (t = t.fullData),
                l.push((t.byteLength >>> 8) & 255),
                l.push(t.byteLength & 255),
                (l = l.concat.apply(l, Y(t))),
                (t = []),
                (e = e.fullData),
                t.push((e.byteLength >>> 8) & 255),
                t.push(e.byteLength & 255),
                (t = t.concat.apply(t, Y(e))),
                (e = new Uint8Array([1, l[3], l[4], l[5], 255, 225].concat(l, [1], t))),
                { height: n, width: s, Sa: e, Za: r, $a: i }
              );
            }
            function wL(e) {
              function t(A) {
                i = {
                  data: new Uint8Array([]),
                  frame: !1,
                  isKeyframe: !1,
                  pts: A.pts,
                  dts: A.dts,
                  nalus: [],
                };
              }
              function n() {
                if (i && i.nalus.length && i.frame) {
                  for (var A = [], E = x(i.nalus), C = E.next(); !C.done; C = E.next()) {
                    C = C.value;
                    var k = C.fullData.byteLength,
                      R = new Uint8Array(4);
                    ((R[0] = (k >> 24) & 255),
                      (R[1] = (k >> 16) & 255),
                      (R[2] = (k >> 8) & 255),
                      (R[3] = k & 255),
                      A.push(R),
                      A.push(C.fullData));
                  }
                  ((i.data = Nt.apply(dn, Y(A))), r.push(i));
                }
              }
              for (var r = [], i = null, s = !1, o = 0; o < e.length; o++) {
                var u = e[o],
                  l = u.nalus,
                  p = !1;
                (i && l.length && !s && (n(), t(u)), (l = x(u.nalus)));
                for (var m = l.next(); !m.done; m = l.next()) {
                  m = m.value;
                  var y = !1;
                  switch (m.type) {
                    case 1:
                      var v = !1;
                      y = !0;
                      var w = m.data;
                      (p &&
                        w.length > 4 &&
                        ((w = EM(new Mi(w))), w === 2 || w === 4 || w === 7 || w === 9) &&
                        (v = !0),
                        v && i && i.frame && !i.isKeyframe && (n(), (i = null)),
                        i || t(u),
                        (i.frame = !0),
                        (i.isKeyframe = v));
                      break;
                    case 5:
                      ((y = !0),
                        i && i.frame && !i.isKeyframe && (n(), (i = null)),
                        i || t(u),
                        (i.frame = !0),
                        (i.isKeyframe = !0));
                      break;
                    case 6:
                      y = !0;
                      break;
                    case 7:
                      p = y = !0;
                      break;
                    case 8:
                      y = !0;
                      break;
                    case 9:
                      ((s = y = !0), i && i.frame && (n(), (i = null)), i || t(u));
                      break;
                    case 12:
                      y = !0;
                      break;
                    default:
                      y = !1;
                  }
                  i && y && i.nalus.push(m);
                }
              }
              return (n(), r);
            }
            var AL = [100, 110, 122, 244, 44, 83, 86, 118, 128, 138, 139, 134];
            function EL(e) {
              if (!e.length) return null;
              var t = e.find(function (o) {
                  return o.type == 32;
                }),
                n = e.find(function (o) {
                  return o.type == 33;
                }),
                r = e.find(function (o) {
                  return o.type == 34;
                });
              if (!t || !n || !r) return null;
              var i = IL(t.fullData);
              e = CL(n.fullData);
              var s = ML(r.fullData);
              return (
                (t = RL(t.fullData, n.fullData, r.fullData, {
                  Xg: i.Xg,
                  Eh: i.Eh,
                  Ig: e.Ig,
                  Jg: e.Jg,
                  Cg: e.Cg,
                  Hg: e.Hg,
                  Dg: e.Dg,
                  Eg: e.Eg,
                  Fg: e.Fg,
                  Gg: e.Gg,
                  wg: e.wg,
                  xg: e.xg,
                  yg: e.yg,
                  zg: e.zg,
                  Ag: e.Ag,
                  Bg: e.Bg,
                  uf: e.uf,
                  kg: e.kg,
                  jg: e.jg,
                  ig: e.ig,
                  Zg: s.Zg,
                  vg: e.vg,
                  ug: e.ug,
                })),
                { height: e.height, width: e.width, Sa: t, Za: e.Uk, $a: e.Tk }
              );
            }
            function IL(e) {
              var t = new Mi(e, !0);
              return (
                nt(t),
                nt(t),
                ze(t, 4),
                ze(t, 2),
                ze(t, 6),
                (e = ze(t, 3)),
                (t = Ee(t)),
                { Xg: e + 1, Eh: t }
              );
            }
            function CL(e) {
              ((e = new Mi(e, !0)), nt(e), nt(e));
              var t = 0,
                n = 0,
                r = 0,
                i = 0;
              ze(e, 4);
              var s = ze(e, 3);
              Ee(e);
              for (
                var o = ze(e, 2),
                  u = ze(e, 1),
                  l = ze(e, 5),
                  p = nt(e),
                  m = nt(e),
                  y = nt(e),
                  v = nt(e),
                  w = nt(e),
                  A = nt(e),
                  E = nt(e),
                  C = nt(e),
                  k = nt(e),
                  R = nt(e),
                  L = nt(e),
                  U = [],
                  G = [],
                  b = 0;
                b < s;
                b++
              )
                (U.push(Ee(e)), G.push(Ee(e)));
              if (s > 0) for (b = s; b < 8; b++) ze(e, 2);
              for (b = 0; b < s; b++) (U[b] && ze(e, 88), G[b] && nt(e));
              (Se(e),
                (U = Se(e)),
                U == 3 && ze(e, 1),
                (G = Se(e)),
                (b = Se(e)),
                Ee(e) && ((t += Se(e)), (n += Se(e)), (r += Se(e)), (i += Se(e))));
              var B = Se(e),
                N = Se(e),
                z = Se(e);
              if (Ee(e)) for (var V = 0; V <= s; V++) (Se(e), Se(e), Se(e));
              else (Se(e), Se(e), Se(e));
              if ((Se(e), Se(e), Se(e), Se(e), Se(e), Se(e), Ee(e) && Ee(e)))
                for (V = 0; V < 4; V++)
                  for (var X = 0; X < (V === 3 ? 2 : 6); X++)
                    if (Ee(e)) {
                      var W = Math.min(64, 1 << (4 + (V << 1)));
                      V > 1 && Do(e);
                      for (var ie = 0; ie < W; ie++) Do(e);
                    } else Se(e);
              for (Ee(e), Ee(e), Ee(e) && (nt(e), Se(e), Se(e), Ee(e)), V = Se(e), W = X = 0; W < V; W++)
                if (((ie = !1), W !== 0 && (ie = Ee(e)), ie)) {
                  (W === V && Se(e), Ee(e), Se(e));
                  for (var ne = (ie = 0); ne <= X; ne++) {
                    var q = Ee(e),
                      Z = !1;
                    (q || (Z = Ee(e)), (q || Z) && ie++);
                  }
                  X = ie;
                } else {
                  for (ne = Se(e), ie = Se(e), X = ne + ie, q = 0; q < ne; q++) (Se(e), Ee(e));
                  for (ne = 0; ne < ie; ne++) (Se(e), Ee(e));
                }
              if (Ee(e))
                for (V = Se(e), X = 0; X < V; X++) {
                  for (W = 0; W < z + 4; W++) ze(e, 1);
                  ze(e, 1);
                }
              if (((V = z = 1), (X = !0), (W = 1), (ne = ie = 0), Ee(e), Ee(e), Ee(e))) {
                if (Ee(e)) {
                  ((q = nt(e)), (Z = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2]));
                  var ae = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1];
                  q > 0 && q <= 16
                    ? ((z = Z[q - 1]), (V = ae[q - 1]))
                    : q === 255 && ((z = ze(e, 16)), (V = ze(e, 16)));
                }
                if (
                  (Ee(e) && Ee(e),
                  Ee(e) && (ze(e, 3), Ee(e), Ee(e) && (nt(e), nt(e), nt(e))),
                  Ee(e) && (Se(e), Se(e)),
                  Ee(e),
                  Ee(e),
                  Ee(e),
                  (q = Ee(e)) && (un(e), un(e), un(e), un(e)),
                  Ee(e) && ((W = ze(e, 32)), (ie = ze(e, 32)), Ee(e) && Se(e), Ee(e)))
                ) {
                  ((ae = !1),
                    (q = Ee(e)),
                    (Z = Ee(e)),
                    (q || Z) &&
                      ((ae = Ee(e)) && (nt(e), ze(e, 5), Ee(e), ze(e, 5)),
                      ze(e, 4),
                      ze(e, 4),
                      ae && ze(e, 4),
                      ze(e, 5),
                      ze(e, 5),
                      ze(e, 5)));
                  for (var ce = 0; ce <= s; ce++) {
                    X = Ee(e);
                    var be = !0,
                      Te = 1;
                    X || (be = Ee(e));
                    var Ze = !1;
                    if ((be ? Se(e) : (Ze = Ee(e)), Ze || (Te = Se(e) + 1), q)) {
                      for (be = 0; be < Te; be++) (Se(e), Se(e), ae && (Se(e), Se(e)));
                      Ee(e);
                    }
                    if (Z) {
                      for (be = 0; be < Te; be++) (Se(e), Se(e), ae && (Se(e), Se(e)));
                      Ee(e);
                    }
                  }
                }
                Ee(e) && (Ee(e), Ee(e), Ee(e), (ne = Se(e)), Se(e), Se(e), Se(e), Se(e));
              }
              return {
                Cg: L,
                Ig: o,
                Jg: u,
                Hg: l,
                Dg: p,
                Eg: m,
                Fg: y,
                Gg: v,
                wg: w,
                xg: A,
                yg: E,
                zg: C,
                Ag: k,
                Bg: R,
                uf: ne,
                kg: U,
                jg: B,
                ig: N,
                width: G - (t + n) * (U === 1 || U === 2 ? 2 : 1),
                height: b - (r + i) * (U === 1 ? 2 : 1),
                Uk: z,
                Tk: V,
                vg: ie / W,
                ug: X,
              };
            }
            function ML(e) {
              var t = new Mi(e, !0);
              (nt(t),
                nt(t),
                Se(t),
                Se(t),
                Ee(t),
                Ee(t),
                ze(t, 3),
                Ee(t),
                Ee(t),
                Se(t),
                Se(t),
                Do(t),
                Ee(t),
                Ee(t),
                Ee(t) && Se(t),
                Do(t),
                Do(t),
                Ee(t),
                Ee(t),
                Ee(t),
                Ee(t),
                (e = Ee(t)),
                (t = Ee(t)));
              var n = 1;
              return (t && e ? (n = 0) : t ? (n = 3) : e && (n = 2), { Zg: n });
            }
            function RL(e, t, n, r) {
              var i = new Uint8Array(23 + (5 + e.byteLength) + (5 + t.byteLength) + (5 + n.byteLength));
              for (
                i[0] = 1,
                  i[1] = ((r.Ig & 3) << 6) | ((r.Jg ? 1 : 0) << 5) | (r.Hg & 31),
                  i[2] = r.Dg,
                  i[3] = r.Eg,
                  i[4] = r.Fg,
                  i[5] = r.Gg,
                  i[6] = r.wg,
                  i[7] = r.xg,
                  i[8] = r.yg,
                  i[9] = r.zg,
                  i[10] = r.Ag,
                  i[11] = r.Bg,
                  i[12] = r.Cg,
                  i[13] = 240 | ((r.uf & 3840) >> 8),
                  i[14] = r.uf & 255,
                  i[15] = 252 | (r.Zg & 3),
                  i[16] = 252 | (r.kg & 3),
                  i[17] = 248 | (r.jg & 7),
                  i[18] = 248 | (r.ig & 7),
                  i[19] = 0,
                  i[20] = parseInt(r.vg, 10),
                  i[21] = (((r.ug ? 1 : 0) & 3) << 6) | ((r.Xg & 7) << 3) | ((r.Eh ? 1 : 0) << 2) | 3,
                  i[22] = 3,
                  e = [e, t, n],
                  t = 23,
                  n = e.length - 1,
                  r = 0;
                r < e.length;
                r += 1
              )
                (i.set(new Uint8Array([(32 + r) | (r === n ? 128 : 0), 0, 1]), t),
                  (t += 3),
                  i.set(new Uint8Array([e[r].byteLength >> 8, e[r].byteLength & 255]), t),
                  (t += 2),
                  i.set(e[r], t),
                  (t += e[r].byteLength));
              return i;
            }
            function xf(e, t) {
              var n = (e[t + 1] >> 3) & 3,
                r = (e[t + 1] >> 1) & 3,
                i = (e[t + 2] >> 4) & 15,
                s = (e[t + 2] >> 2) & 3;
              if (n !== 1 && i !== 0 && i !== 15 && s !== 3) {
                var o = e[t + 3] >> 6;
                ((i = kL[(n === 3 ? 3 - r : r === 3 ? 3 : 4) * 14 + i - 1] * 1e3),
                  (s = _L[(n === 3 ? 0 : n === 2 ? 1 : 2) * 3 + s]),
                  (n = PL[n][r]));
                var u = DL[r],
                  l = Math.floor((n * i) / s + ((e[t + 2] >> 1) & 1)) * u,
                  p = (navigator.userAgent || "").match(/Chrome\/(\d+)/i);
                return (
                  (p = p ? parseInt(p[1], 10) : 0) &&
                    p <= 87 &&
                    r === 2 &&
                    i >= 224e3 &&
                    o === 0 &&
                    (e[t + 3] |= 128),
                  { sampleRate: s, channelCount: o === 3 ? 1 : 2, ra: l, Sk: n * 8 * u }
                );
              }
              return null;
            }
            function fE(e, t) {
              return e[t] === 255 && (e[t + 1] & 224) === 224 && (e[t + 1] & 6) !== 0;
            }
            function hE(e, t) {
              if (t + 1 < e.length && fE(e, t)) {
                var n = xf(e, t),
                  r = 4;
                return (n && n.ra && (r = n.ra), (t += r), t === e.length || (t + 1 < e.length && fE(e, t)));
              }
              return !1;
            }
            var kL = [
                32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, 32, 48, 56, 64, 80, 96,
                112, 128, 160, 192, 224, 256, 320, 384, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224,
                256, 320, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 8, 16, 24, 32, 40,
                48, 56, 64, 80, 96, 112, 128, 144, 160,
              ],
              _L = [44100, 48e3, 32e3, 22050, 24e3, 16e3, 11025, 12e3, 8e3],
              PL = [
                [0, 72, 144, 12],
                [0, 0, 0, 0],
                [0, 72, 144, 12],
                [0, 144, 144, 12],
              ],
              DL = [0, 1, 1, 4];
            function Pr(e) {
              ((this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null));
            }
            ((h = Pr.prototype),
              (h.destroy = function () {
                this.g.clear();
              }),
              (h.isSupported = function (e) {
                return e.toLowerCase().split(";")[0] == "audio/mpeg"
                  ? En(this.convertCodecs("audio", e))
                  : !1;
              }),
              (h.convertCodecs = function (e, t) {
                return t.toLowerCase().split(";")[0] == "audio/mpeg" ? 'audio/mp4; codecs="mp3"' : t;
              }),
              (h.getOriginalMimeType = function () {
                return this.j;
              }),
              (h.transmux = function (e, t, n, r) {
                for (var i = De(e), s = Po(i).length; s < i.length && !hE(i, s); s++);
                var o;
                for (e = []; s < i.length; ) {
                  var u = xf(i, s);
                  if (!u) return Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
                  (o || (o = u),
                    s + u.ra <= i.length &&
                      e.push({
                        data: i.subarray(s, s + u.ra),
                        size: u.ra,
                        duration: 1152,
                        sb: 0,
                        flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                      }),
                    (s += u.ra));
                }
                return o
                  ? ((i = ((o.Sk * 9e4) / o.sampleRate) * this.h),
                    (r = {
                      id: t.id,
                      type: "audio",
                      codecs: "mp3",
                      encrypted: t.encrypted && t.drmInfos.length > 0,
                      timescale: o.sampleRate,
                      duration: r,
                      Bb: [],
                      Ga: new Uint8Array([]),
                      Sa: new Uint8Array([]),
                      Za: 0,
                      $a: 0,
                      data: { sequenceNumber: this.h, baseMediaDecodeTime: i, zb: e },
                      stream: t,
                    }),
                    (r = new Ro([r])),
                    (n = t.id + "_" + n.i),
                    this.g.has(n) ? (t = this.g.get(n)) : ((t = ko(r)), this.g.set(n, t)),
                    (n = this.i !== t),
                    (r = lu(r)),
                    (this.i = t),
                    this.h++,
                    Promise.resolve({ data: r, init: n ? t : null }))
                  : Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
              }),
              fe("shaka.transmuxer.Mp3Transmuxer", Pr),
              (Pr.prototype.transmux = Pr.prototype.transmux),
              (Pr.prototype.getOriginalMimeType = Pr.prototype.getOriginalMimeType),
              (Pr.prototype.convertCodecs = Pr.prototype.convertCodecs),
              (Pr.prototype.isSupported = Pr.prototype.isSupported),
              (Pr.prototype.destroy = Pr.prototype.destroy),
              xi(
                "audio/mpeg",
                function () {
                  return new Pr("audio/mpeg");
                },
                Zi,
              ));
            function Dr(e) {
              ((this.h = e), (this.g = null));
            }
            ((h = Dr.prototype),
              (h.destroy = function () {}),
              (h.isSupported = function (e) {
                if (e.toLowerCase().split(";")[0] != "video/mp2t") return !1;
                var t = Fn(e).split(","),
                  n = Bn("audio", t);
                return (
                  (t = Bn("video", t)),
                  !n || t || fn(n) != "mp3" ? !1 : En(this.convertCodecs("audio", e))
                );
              }),
              (h.convertCodecs = function (e, t) {
                return t.toLowerCase().split(";")[0] == "video/mp2t" ? "audio/mpeg" : t;
              }),
              (h.getOriginalMimeType = function () {
                return this.h;
              }),
              (h.transmux = function (e, t, n, r, i) {
                if (
                  (this.g ? this.g.clearData() : (this.g = new ft()),
                  this.g.Kf(n.i),
                  (e = De(e)),
                  (e = this.g.parse(e)),
                  e.Yd().audio != "mp3" || i != "audio")
                )
                  return Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
                for (n = new Uint8Array([]), i = x(e.ub()), e = i.next(); !e.done; e = i.next())
                  if ((e = e.value.data))
                    for (t = 0; t < e.length; )
                      (r = xf(e, t))
                        ? (t + r.ra <= e.length && (n = Nt(n, e.subarray(t, t + r.ra))), (t += r.ra))
                        : t++;
                return Promise.resolve(n);
              }),
              fe("shaka.transmuxer.MpegTsTransmuxer", Dr),
              (Dr.prototype.transmux = Dr.prototype.transmux),
              (Dr.prototype.getOriginalMimeType = Dr.prototype.getOriginalMimeType),
              (Dr.prototype.convertCodecs = Dr.prototype.convertCodecs),
              (Dr.prototype.isSupported = Dr.prototype.isSupported),
              (Dr.prototype.destroy = Dr.prototype.destroy),
              xi(
                "video/mp2t",
                function () {
                  return new Dr("video/mp2t");
                },
                Vh,
              ));
            /*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/ function yr(e) {
              ((this.h = e), (this.g = Zg.get("ISOBoxer")()) && LL(this));
            }
            function LL(e) {
              function t() {
                (this._procFullBox(),
                  this.flags & 1 &&
                    (this._procField("AlgorithmID", "uint", 24),
                    this._procField("IV_size", "uint", 8),
                    this._procFieldArray("KID", 16, "uint", 8)),
                  this._procField("sample_count", "uint", 32),
                  this._procEntries("entry", this.sample_count, function (n) {
                    (this._procEntryField(n, "InitializationVector", "data", 8),
                      this.flags & 2 &&
                        (this._procEntryField(n, "NumberOfEntries", "uint", 16),
                        this._procSubEntries(n, "clearAndCryptedData", n.NumberOfEntries, function (r) {
                          (this._procEntryField(r, "BytesOfClearData", "uint", 16),
                            this._procEntryField(r, "BytesOfEncryptedData", "uint", 32));
                        })));
                  }));
              }
              (e.g.addBoxProcessor("saio", function () {
                (this._procFullBox(),
                  this.flags & 1 &&
                    (this._procField("aux_info_type", "uint", 32),
                    this._procField("aux_info_type_parameter", "uint", 32)),
                  this._procField("entry_count", "uint", 32),
                  this._procFieldArray("offset", this.entry_count, "uint", this.version === 1 ? 64 : 32));
              }),
                e.g.addBoxProcessor("saiz", function () {
                  (this._procFullBox(),
                    this.flags & 1 &&
                      (this._procField("aux_info_type", "uint", 32),
                      this._procField("aux_info_type_parameter", "uint", 32)),
                    this._procField("default_sample_info_size", "uint", 8),
                    this._procField("sample_count", "uint", 32),
                    this.default_sample_info_size === 0 &&
                      this._procFieldArray("sample_info_size", this.sample_count, "uint", 8));
                }),
                e.g.addBoxProcessor("senc", t),
                e.g.addBoxProcessor("uuid", function () {
                  for (var n = !0, r = 0; r < 16; r++) this.usertype[r] !== bL[r] && (n = !1);
                  n && (this._parsing && (this.type = "sepiff"), t.call(this));
                }));
            }
            ((h = yr.prototype),
              (h.destroy = function () {}),
              (h.isSupported = function (e, t) {
                var n = e.startsWith("mss/");
                return !this.g || !n
                  ? !1
                  : t
                    ? En(this.convertCodecs(t, e))
                    : ((t = this.convertCodecs("audio", e)),
                      (e = this.convertCodecs("video", e)),
                      En(t) || En(e));
              }),
              (h.convertCodecs = function (e, t) {
                return t.replace("mss/", "");
              }),
              (h.getOriginalMimeType = function () {
                return this.h;
              }),
              (h.transmux = function (e, t, n) {
                if (!n) return Promise.resolve(De(e));
                if (!t.mssPrivateData) return Promise.reject(new H(2, 3, 3020, n ? n.P()[0] : null));
                try {
                  var r,
                    i = this.g.parseBuffer(e),
                    s = i.fetch("tfhd");
                  s.track_ID = t.id + 1;
                  var o = i.fetch("tfdt"),
                    u = i.fetch("traf");
                  o === null &&
                    ((o = this.g.createFullBox("tfdt", u, s)),
                    (o.version = 1),
                    (o.flags = 0),
                    (o.baseMediaDecodeTime = Math.floor(n.startTime * t.mssPrivateData.timescale)));
                  var l = i.fetch("trun"),
                    p = i.fetch("tfxd");
                  p && p._parent.boxes.splice(p._parent.boxes.indexOf(p), 1);
                  var m = i.fetch("tfrf");
                  m && m._parent.boxes.splice(m._parent.boxes.indexOf(m), 1);
                  var y = i.fetch("sepiff");
                  if (y !== null) {
                    ((y.type = "senc"), (y.usertype = void 0));
                    var v = i.fetch("saio");
                    if (v === null) {
                      ((v = this.g.createFullBox("saio", u)),
                        (v.version = 0),
                        (v.flags = 0),
                        (v.entry_count = 1),
                        (v.offset = [0]));
                      var w = this.g.createFullBox("saiz", u);
                      if (
                        ((w.version = 0),
                        (w.flags = 0),
                        (w.sample_count = y.sample_count),
                        (w.default_sample_info_size = 0),
                        (w.sample_info_size = []),
                        y.flags & 2)
                      )
                        for (r = 0; r < y.sample_count; r += 1)
                          w.sample_info_size[r] = 10 + 6 * y.entry[r].NumberOfEntries;
                      else w.default_sample_info_size = 8;
                    }
                  }
                  ((s.flags &= 16777214), (s.flags |= 131072), (l.flags |= 1));
                  var A = i.fetch("moof");
                  l.data_offset = A.getLength() + 8;
                  var E = i.fetch("saio");
                  E !== null && (E.offset[0] = pE(A, "traf") + pE(u, "senc") + 16);
                  var C = De(i.write());
                  return Promise.resolve(C);
                } catch (k) {
                  return k instanceof H
                    ? Promise.reject(k)
                    : Promise.reject(new H(2, 3, 3022, n ? n.P()[0] : null));
                }
              }));
            function pE(e, t) {
              for (var n = 8, r = 0; r < e.boxes.length && e.boxes[r].type !== t; r++) n += e.boxes[r].size;
              return n;
            }
            (fe("shaka.transmuxer.MssTransmuxer", yr),
              (yr.prototype.transmux = yr.prototype.transmux),
              (yr.prototype.getOriginalMimeType = yr.prototype.getOriginalMimeType),
              (yr.prototype.convertCodecs = yr.prototype.convertCodecs),
              (yr.prototype.isSupported = yr.prototype.isSupported),
              (yr.prototype.destroy = yr.prototype.destroy));
            var bL = new Uint8Array([162, 57, 79, 82, 90, 155, 79, 20, 162, 68, 108, 66, 124, 100, 141, 244]);
            (xi(
              "mss/audio/mp4",
              function () {
                return new yr("mss/audio/mp4");
              },
              Zi,
            ),
              xi(
                "mss/video/mp4",
                function () {
                  return new yr("mss/video/mp4");
                },
                Zi,
              ));
            function Lr(e) {
              ((this.m = e), (this.g = 0), (this.j = new Map()), (this.l = this.i = this.h = null));
            }
            ((h = Lr.prototype),
              (h.destroy = function () {
                (this.j.clear(), this.i && this.i.destroy());
              }),
              (h.isSupported = function (e, t) {
                if (e.toLowerCase().split(";")[0] != "video/mp2t") return !1;
                var n = e;
                t && (n = this.convertCodecs(t, e));
                var r = Fn(n).split(",");
                return (
                  (n = Bn("audio", r)),
                  (r = Bn("video", r)),
                  (n && ((n = fn(n)), !NL.includes(n))) || (r && ((n = fn(r)), !OL.includes(n)))
                    ? !1
                    : t
                      ? En(this.convertCodecs(t, e))
                      : ((t = this.convertCodecs("audio", e)),
                        (e = this.convertCodecs("video", e)),
                        En(t) || En(e))
                );
              }),
              (h.convertCodecs = function (e, t) {
                return t.toLowerCase().split(";")[0] == "video/mp2t"
                  ? ((t = Fn(t)
                      .replace("mp4a.40.34", "mp3")
                      .split(",")
                      .map(function (n) {
                        return nu(n, "audio/mp4");
                      })
                      .map(f0)
                      .join(",")),
                    e == "audio" ? 'audio/mp4; codecs="' + t + '"' : 'video/mp4; codecs="' + t + '"')
                  : t;
              }),
              (h.getOriginalMimeType = function () {
                return this.m;
              }),
              (h.transmux = function (e, t, n, r, i) {
                var s = De(e);
                if (i == "audio" && !Lo(s)) {
                  for (var o = Po(s), u = o.length; u < s.length; u++)
                    if (hE(s, u)) return Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
                  for (u = o.length; u < s.length; u++)
                    if (lE(s, u))
                      return (this.i || (this.i = new mr("audio/aac")), this.i.transmux(e, t, n, r, i));
                  return Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
                }
                (this.h ? this.h.clearData() : (this.h = new ft()), this.h.Kf(n.i));
                var l = this.h.parse(s),
                  p = [],
                  m = l.Yd();
                try {
                  var y = null;
                  if (i == "video") {
                    switch (m.video) {
                      case "avc":
                        var v = [],
                          w = null,
                          A = l.ud(),
                          E = wL(A);
                        if (!E.length) throw new H(2, 3, 3023, n ? n.P()[0] : null);
                        for (var C = 0; C < E.length; C++) {
                          var k = E[C];
                          w == null && (w = k.dts);
                          var R = void 0;
                          ((R =
                            C + 1 < E.length
                              ? (E[C + 1].dts || 0) - (k.dts || 0)
                              : E.length > 1
                                ? (k.dts || 0) - (E[C - 1].dts || 0)
                                : (n.endTime - n.startTime) * 9e4),
                            v.push({
                              data: k.data,
                              size: k.data.byteLength,
                              duration: R,
                              sb: Math.round((k.pts || 0) - (k.dts || 0)),
                              flags: {
                                xb: 0,
                                mb: 0,
                                jb: 0,
                                hb: 0,
                                ib: k.isKeyframe ? 2 : 1,
                                yb: k.isKeyframe ? 0 : 1,
                              },
                            }));
                        }
                        for (var L = [], U = x(A), G = U.next(); !G.done; G = U.next())
                          L.push.apply(L, Y(G.value.nalus));
                        var b = SL(L);
                        if (!b || w == null) throw new H(2, 3, 3018, n ? n.P()[0] : null);
                        ((t.height = b.height),
                          (t.width = b.width),
                          (y = {
                            id: t.id,
                            type: "video",
                            codecs: "avc1",
                            encrypted: t.encrypted && t.drmInfos.length > 0,
                            timescale: 9e4,
                            duration: r,
                            Bb: [],
                            Ga: new Uint8Array([]),
                            Sa: b.Sa,
                            Za: b.Za,
                            $a: b.$a,
                            data: { sequenceNumber: this.g, baseMediaDecodeTime: w, zb: v },
                            stream: t,
                          }));
                        break;
                      case "hvc":
                        var B = [],
                          N = null,
                          z = [],
                          V = l.ud();
                        if (!V.length) throw new H(2, 3, 3023, n ? n.P()[0] : null);
                        for (var X = 0; X < V.length; X++) {
                          var W = V[X],
                            ie = W.nalus;
                          z.push.apply(z, Y(ie));
                          for (
                            var ne = !1, q = [], Z = !1, ae = x(ie), ce = ae.next();
                            !ce.done;
                            ce = ae.next()
                          ) {
                            var be = ce.value;
                            switch (be.type) {
                              case 1:
                              case 0:
                                var Te = (Z = !0);
                                break;
                              case 19:
                              case 20:
                              case 21:
                                ne = Te = Z = !0;
                                break;
                              case 32:
                                Te = !0;
                                break;
                              case 33:
                                Te = !0;
                                break;
                              case 34:
                                Te = !0;
                                break;
                              case 35:
                                Z = Te = !0;
                                break;
                              case 39:
                              case 40:
                                Te = !0;
                                break;
                              default:
                                Te = !1;
                            }
                            if (Z && Te) {
                              var Ze = be.fullData.byteLength,
                                Oe = new Uint8Array(4);
                              ((Oe[0] = (Ze >> 24) & 255),
                                (Oe[1] = (Ze >> 16) & 255),
                                (Oe[2] = (Ze >> 8) & 255),
                                (Oe[3] = Ze & 255),
                                q.push(Oe),
                                q.push(be.fullData));
                            }
                          }
                          var st = q.length ? { data: Nt.apply(dn, Y(q)), isKeyframe: ne } : null;
                          if (st) {
                            N == null && W.dts != null && (N = W.dts);
                            var Xe = void 0;
                            ((Xe =
                              X + 1 < V.length
                                ? (V[X + 1].dts || 0) - (W.dts || 0)
                                : V.length > 1
                                  ? (W.dts || 0) - (V[X - 1].dts || 0)
                                  : (n.endTime - n.startTime) * 9e4),
                              B.push({
                                data: st.data,
                                size: st.data.byteLength,
                                duration: Xe,
                                sb: Math.round((W.pts || 0) - (W.dts || 0)),
                                flags: {
                                  xb: 0,
                                  mb: 0,
                                  jb: 0,
                                  hb: 0,
                                  ib: st.isKeyframe ? 2 : 1,
                                  yb: st.isKeyframe ? 0 : 1,
                                },
                              }));
                          }
                        }
                        var He = EL(z);
                        if (!He || N == null) throw new H(2, 3, 3018, n ? n.P()[0] : null);
                        ((t.height = He.height),
                          (t.width = He.width),
                          (y = {
                            id: t.id,
                            type: "video",
                            codecs: "hvc1",
                            encrypted: t.encrypted && t.drmInfos.length > 0,
                            timescale: 9e4,
                            duration: r,
                            Bb: [],
                            Ga: new Uint8Array([]),
                            Sa: He.Sa,
                            Za: He.Za,
                            $a: He.$a,
                            data: { sequenceNumber: this.g, baseMediaDecodeTime: N, zb: B },
                            stream: t,
                          }));
                    }
                    y && (p.push(y), (y = null));
                  }
                  if (i == "audio") {
                    switch (m.audio) {
                      case "aac":
                        for (
                          var $e = [], Qe, Ye = null, Ge = null, We = null, Yt = x(l.ub()), Ht = Yt.next();
                          !Ht.done;
                          Ht = Yt.next()
                        ) {
                          var vr = Ht.value,
                            Wn = vr.data;
                          if (Wn) {
                            var bn = 0;
                            if (Ge == -1 && We) ((Wn = Nt(We, vr.data)), (Ge = null));
                            else if (Ge != null && We) {
                              bn = Math.max(0, Ge);
                              var Js = Nt(We, Wn.subarray(0, bn));
                              ($e.push({
                                data: Js,
                                size: Js.byteLength,
                                duration: 1024,
                                sb: 0,
                                flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                              }),
                                (Ge = We = null));
                            }
                            if (((Qe = uE(Wn, bn)), !Qe)) throw new H(2, 3, 3018, n ? n.P()[0] : null);
                            for (
                              t.audioSamplingRate = Qe.sampleRate,
                                t.channelsCount = Qe.channelCount,
                                Ye == null && vr.pts !== null && (Ye = vr.pts);
                              bn < Wn.length;
                            ) {
                              var Ui = aE(Wn, bn);
                              if (!Ui) {
                                ((We = Wn.subarray(bn, Wn.length)), (Ge = -1));
                                break;
                              }
                              var Gr = Ui.ee + Ui.ra;
                              ((Ge = Math.max(0, bn + Gr - Wn.length)),
                                Ge != 0
                                  ? (We = Wn.subarray(bn + Ui.ee, bn + Gr))
                                  : bn + Gr <= Wn.length &&
                                    $e.push({
                                      data: Wn.subarray(bn + Ui.ee, bn + Gr),
                                      size: Ui.ra,
                                      duration: 1024,
                                      sb: 0,
                                      flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                                    }),
                                (bn += Gr));
                            }
                          }
                        }
                        if (!Qe || Ye == null) {
                          Ye = n.startTime * 9e4;
                          var ua = Bn("audio", t.codecs.split(","));
                          if (!ua || !t.channelsCount || !t.audioSamplingRate)
                            throw new H(2, 3, 3018, n ? n.P()[0] : null);
                          Qe = { sampleRate: t.audioSamplingRate, channelCount: t.channelsCount, codec: ua };
                          var la = xL(ua, t.channelsCount);
                          if (!la) throw new H(2, 3, 3018, n ? n.P()[0] : null);
                          for (var Tf = Ye + (n.endTime - n.startTime) * 9e4, zr = Ye; zr < Tf; )
                            ($e.push({
                              data: la,
                              size: la.byteLength,
                              duration: 1024,
                              sb: 0,
                              flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                            }),
                              (zr += (1024 / Qe.sampleRate) * 9e4));
                        }
                        var Sf = Qe.sampleRate,
                          iy = (Ye / 9e4) * Sf;
                        y = {
                          id: t.id,
                          type: "audio",
                          codecs: Qe.codec,
                          encrypted: t.encrypted && t.drmInfos.length > 0,
                          timescale: Sf,
                          duration: r,
                          Bb: [],
                          Ga: new Uint8Array([]),
                          Sa: new Uint8Array([]),
                          Za: 0,
                          $a: 0,
                          data: { sequenceNumber: this.g, baseMediaDecodeTime: iy, zb: $e },
                          stream: t,
                        };
                        break;
                      case "ac3":
                        for (
                          var wf = [],
                            ca = 0,
                            ul = new Uint8Array([]),
                            Gt = null,
                            sr = x(l.ub()),
                            Nn = sr.next();
                          !Nn.done;
                          Nn = sr.next()
                        ) {
                          var sy = Nn.value,
                            oy = sy.data;
                          Gt == null && sy.pts !== null && (Gt = sy.pts);
                          for (var da = 0; da < oy.length; ) {
                            var vs = cE(oy, da);
                            vs
                              ? ((t.audioSamplingRate = vs.sampleRate),
                                (t.channelsCount = vs.channelCount),
                                (ca = vs.sampleRate),
                                (ul = vs.Ga),
                                wf.push({
                                  data: oy.subarray(da, da + vs.ra),
                                  size: vs.ra,
                                  duration: 1536,
                                  sb: 0,
                                  flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                                }),
                                (da += vs.ra))
                              : da++;
                          }
                        }
                        if (ca == 0 || ul.byteLength == 0 || Gt == null)
                          throw new H(2, 3, 3018, n ? n.P()[0] : null);
                        var UL = (Gt / 9e4) * ca;
                        y = {
                          id: t.id,
                          type: "audio",
                          codecs: "ac-3",
                          encrypted: t.encrypted && t.drmInfos.length > 0,
                          timescale: ca,
                          duration: r,
                          Bb: [],
                          Ga: ul,
                          Sa: new Uint8Array([]),
                          Za: 0,
                          $a: 0,
                          data: { sequenceNumber: this.g, baseMediaDecodeTime: UL, zb: wf },
                          stream: t,
                        };
                        break;
                      case "ec3":
                        for (
                          var mE = [],
                            Af = 0,
                            ay = new Uint8Array([]),
                            Ef = null,
                            yE = x(l.ub()),
                            uy = yE.next();
                          !uy.done;
                          uy = yE.next()
                        ) {
                          var ly = uy.value,
                            cy = ly.data;
                          Ef == null && ly.pts !== null && (Ef = ly.pts);
                          for (var fa = 0; fa < cy.length; ) {
                            var xs = dE(cy, fa);
                            xs
                              ? ((t.audioSamplingRate = xs.sampleRate),
                                (t.channelsCount = xs.channelCount),
                                (Af = xs.sampleRate),
                                (ay = xs.Ga),
                                mE.push({
                                  data: cy.subarray(fa, fa + xs.ra),
                                  size: xs.ra,
                                  duration: 1536,
                                  sb: 0,
                                  flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                                }),
                                (fa += xs.ra))
                              : fa++;
                          }
                        }
                        if (Af == 0 || ay.byteLength == 0 || Ef == null)
                          throw new H(2, 3, 3018, n ? n.P()[0] : null);
                        var jL = (Ef / 9e4) * Af;
                        y = {
                          id: t.id,
                          type: "audio",
                          codecs: "ec-3",
                          encrypted: t.encrypted && t.drmInfos.length > 0,
                          timescale: Af,
                          duration: r,
                          Bb: [],
                          Ga: ay,
                          Sa: new Uint8Array([]),
                          Za: 0,
                          $a: 0,
                          data: { sequenceNumber: this.g, baseMediaDecodeTime: jL, zb: mE },
                          stream: t,
                        };
                        break;
                      case "mp3":
                        for (
                          var vE = [], If, Cf = null, xE = x(l.ub()), dy = xE.next();
                          !dy.done;
                          dy = xE.next()
                        ) {
                          var fy = dy.value,
                            ll = fy.data;
                          if (ll) {
                            Cf == null && fy.pts !== null && (Cf = fy.pts);
                            for (var Qs = 0; Qs < ll.length; ) {
                              var ha = xf(ll, Qs);
                              ha
                                ? (If || (If = ha),
                                  Qs + ha.ra <= ll.length &&
                                    vE.push({
                                      data: ll.subarray(Qs, Qs + ha.ra),
                                      size: ha.ra,
                                      duration: 1152,
                                      sb: 0,
                                      flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                                    }),
                                  (Qs += ha.ra))
                                : Qs++;
                            }
                          }
                        }
                        if (!If || Cf == null) throw new H(2, 3, 3018, n ? n.P()[0] : null);
                        var TE = If.sampleRate,
                          BL = (Cf / 9e4) * TE;
                        y = {
                          id: t.id,
                          type: "audio",
                          codecs: "mp3",
                          encrypted: t.encrypted && t.drmInfos.length > 0,
                          timescale: TE,
                          duration: r,
                          Bb: [],
                          Ga: new Uint8Array([]),
                          Sa: new Uint8Array([]),
                          Za: 0,
                          $a: 0,
                          data: { sequenceNumber: this.g, baseMediaDecodeTime: BL, zb: vE },
                          stream: t,
                        };
                        break;
                      case "opus":
                        var SE = [],
                          Mf = null,
                          ui = l.H;
                        if (!ui) throw new H(2, 3, 3018, n ? n.P()[0] : null);
                        var On = [];
                        switch (ui.uj) {
                          case 1:
                          case 2:
                            On = [0];
                            break;
                          case 0:
                            On = [255, 1, 1, 0, 1];
                            break;
                          case 128:
                            On = [255, 2, 0, 0, 1];
                            break;
                          case 3:
                            On = [1, 2, 1, 0, 2, 1];
                            break;
                          case 4:
                            On = [1, 2, 2, 0, 1, 2, 3];
                            break;
                          case 5:
                            On = [1, 3, 2, 0, 4, 1, 2, 3];
                            break;
                          case 6:
                            On = [1, 4, 2, 0, 4, 1, 2, 3, 5];
                            break;
                          case 7:
                            On = [1, 4, 2, 0, 4, 1, 2, 3, 5, 6];
                            break;
                          case 8:
                            On = [1, 5, 3, 0, 6, 1, 2, 3, 4, 5, 7];
                            break;
                          case 130:
                            On = [1, 1, 2, 0, 1];
                            break;
                          case 131:
                            On = [1, 1, 3, 0, 1, 2];
                            break;
                          case 132:
                            On = [1, 1, 4, 0, 1, 2, 3];
                            break;
                          case 133:
                            On = [1, 1, 5, 0, 1, 2, 3, 4];
                            break;
                          case 134:
                            On = [1, 1, 6, 0, 1, 2, 3, 4, 5];
                            break;
                          case 135:
                            On = [1, 1, 7, 0, 1, 2, 3, 4, 5, 6];
                            break;
                          case 136:
                            On = [1, 1, 8, 0, 1, 2, 3, 4, 5, 6, 7];
                        }
                        for (
                          var wE = new Uint8Array(
                              [
                                0,
                                ui.channelCount,
                                0,
                                0,
                                (ui.sampleRate >>> 24) & 255,
                                (ui.sampleRate >>> 17) & 255,
                                (ui.sampleRate >>> 8) & 255,
                                (ui.sampleRate >>> 0) & 255,
                                0,
                                0,
                              ].concat(Y(On)),
                            ),
                            AE = ui.sampleRate,
                            EE = x(l.ub()),
                            hy = EE.next();
                          !hy.done;
                          hy = EE.next()
                        ) {
                          var py = hy.value,
                            pa = py.data;
                          Mf == null && py.pts !== null && (Mf = py.pts);
                          for (var cl = 0; cl < pa.length; ) {
                            for (
                              var FL = (pa[cl + 1] & 16) !== 0,
                                VL = (pa[cl + 1] & 8) !== 0,
                                ji = cl + 2,
                                Rf = 0;
                              pa[ji] === 255;
                            )
                              ((Rf += 255), (ji += 1));
                            ((Rf += pa[ji]), (ji += 1), (ji += FL ? 2 : 0), (ji += VL ? 2 : 0));
                            var IE = pa.slice(ji, ji + Rf);
                            (SE.push({
                              data: IE,
                              size: IE.byteLength,
                              duration: 960,
                              sb: 0,
                              flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                            }),
                              (cl = ji + Rf));
                          }
                        }
                        if (wE.byteLength == 0 || Mf == null) throw new H(2, 3, 3018, n ? n.P()[0] : null);
                        ((t.audioSamplingRate = ui.sampleRate), (t.channelsCount = ui.channelCount));
                        var HL = (Mf / 9e4) * AE;
                        y = {
                          id: t.id,
                          type: "audio",
                          codecs: "opus",
                          encrypted: t.encrypted && t.drmInfos.length > 0,
                          timescale: AE,
                          duration: r,
                          Bb: [],
                          Ga: wE,
                          Sa: new Uint8Array([]),
                          Za: 0,
                          $a: 0,
                          data: { sequenceNumber: this.g, baseMediaDecodeTime: HL, zb: SE },
                          stream: t,
                        };
                    }
                    y && (p.push(y), (y = null));
                  }
                } catch (my) {
                  return my && my.code == 3023 ? Promise.resolve(new Uint8Array([])) : Promise.reject(my);
                }
                if (!p.length) return Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
                var CE = new Ro(p),
                  gy = t.id + "_" + n.i;
                if (this.j.has(gy)) var dl = this.j.get(gy);
                else ((dl = ko(CE)), this.j.set(gy, dl));
                var GL = this.l !== dl,
                  zL = lu(CE);
                return ((this.l = dl), this.g++, Promise.resolve({ data: zL, init: GL ? dl : null }));
              }),
              fe("shaka.transmuxer.TsTransmuxer", Lr),
              (Lr.prototype.transmux = Lr.prototype.transmux),
              (Lr.prototype.getOriginalMimeType = Lr.prototype.getOriginalMimeType),
              (Lr.prototype.convertCodecs = Lr.prototype.convertCodecs),
              (Lr.prototype.isSupported = Lr.prototype.isSupported),
              (Lr.prototype.destroy = Lr.prototype.destroy));
            var NL = ["aac", "ac-3", "ec-3", "mp3", "opus"],
              OL = ["avc", "hevc"];
            xi(
              "video/mp2t",
              function () {
                return new Lr("video/mp2t");
              },
              Hh,
            );
            function gE() {}
            (J(gE, Hn), fe("shaka.util.FairPlayUtils", gE));
          }).call(a, c, c, void 0);
          for (var d in a.shaka) f[d] = a.shaka[d];
        })();
      })(by)),
    by
  );
}
uB();
const sv = {
    lightning: {
      debug: !0,
      focusDebug: !1,
      fontSettings: { fontFamily: "Roboto", color: 4294967295, fontSize: 40 },
      animationSettings: { easing: "ease-in-out", duration: 250 },
      rendererOptions: {
        appHeight: 1080,
        appWidth: 1920,
        numImageWorkers: 2,
        fontEngines: [oB],
        renderEngine: m3,
        inspector: void 0,
        deviceLogicalPixelRatio: 1,
        devicePhysicalPixelRatio: 1,
        boundsMargin: 20,
        createImageBitmapSupport: "auto",
      },
    },
    keys: {
      Back: ["b", 66],
      Left: ["ArrowLeft", 37],
      Right: ["ArrowRight", 39],
      Up: ["ArrowUp", 38],
      Down: ["ArrowDown", 40],
      Enter: ["Enter", 13],
      Play: ["p", 80],
      Pause: ["a", 65],
      Menu: ["m"],
      PlayPause: ["t", 84],
      FastForward: ["f", 70],
      FastForward10: ["d", 68],
      Rewind: ["r", 82],
      Rewind10: ["e", 69],
      Stop: ["s", 83],
      Key0: ["0", 96, 48],
      Key1: ["1", 97, 49],
      Key2: ["2", 98, 50],
      Key3: ["3", 99, 51],
      Key4: ["4", 100, 52],
      Key5: ["5", 101, 53],
      Key6: ["6", 102, 54],
      Key7: ["7", 103, 55],
      Key8: ["8", 104, 56],
      Key9: ["9", 105, 57],
    },
    keyHoldOptions: { userKeyHoldMap: { EnterHold: ["Enter", 13], BackHold: ["b", 66] }, holdThreshold: 1e3 },
  },
  lB =
    "eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxODU4MjY0ZTM2ZWQ1NzZkYzM3ZDU5MjJmNzM3MWRmNiIsIm5iZiI6MTY2NzIzOTgzMS45MDIwMDAyLCJzdWIiOiI2MzYwMGY5NzFkYmM4ODAwOTBmNTIxMDAiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.LXx9-LdX9JsiY0DhpmjYcYitlqPJqntNHVv-HGZXpww",
  cB = "https://api.themoviedb.org/3";
let z2;
const dB = new URLSearchParams(window.location.search);
dB.get("posterSize");
const fB = { headers: { "Content-Type": "application/json", Authorization: "Bearer " + lB } };
function hB(f, c = {}) {
  return z2 ? ov(f, c) : X2().then(() => ov(f, c));
}
function ov(f, c = {}) {
  return fetch(cB + f, { ...fB, ...c }).then(a => a.json());
}
function X2() {
  return ov("/configuration").then(f => {
    var c;
    return ((z2 = f), (c = f.images) == null || c.secure_base_url, f);
  });
}
const W2 = { get: hB, loadConfig: X2 };
async function pB(f) {
  try {
    const c = await W2.get("/discover/movie");
    return (f ? c.results.slice(0, 5) : c.results).map(d => ({
      title: d.title,
      poster_path: d.poster_path,
      overview: d.overview,
      backdrop_path: d.backdrop_path,
      id: d.id,
    }));
  } catch (c) {
    throw (console.error(c), c);
  }
}
async function gB(f) {
  try {
    const c = await W2.get("/discover/tv");
    return (f ? c.results.slice(0, 5) : c.results).map(d => ({
      title: d.name,
      poster_path: d.poster_path,
      overview: d.overview,
      backdrop_path: d.backdrop_path,
      id: d.id,
    }));
  } catch (c) {
    throw (console.error(c), c);
  }
}
function Ny() {
  const f = [];
  return (
    f.push({ title: "MOVIES", items: Wy(() => pB(!0))[0] }),
    f.push({ title: "SERIES", items: Wy(() => gB(!0))[0] }),
    { rows: f }
  );
}
const [mB, K2] = Un("");
function yB() {
  return Lt(Ss, {
    id: "background",
    width: 1920,
    height: 1080,
    get src() {
      return mB();
    },
  });
}
const vB = "" + new URL("logo-CWMc854L.png", import.meta.url).href,
  av = {
    container: { display: "flex", flexDirection: "row", justifyContent: "center", alignItems: "center" },
  };
av.text = {
  fontFamily: "Roboto",
  fontSize: 32,
  height: 50,
  color: 4294967295,
  $focus: { color: 1484815871 },
};
function xB(f) {
  return Lt(
    Ss,
    mv(f, {
      forwardStates: !0,
      get style() {
        return av.container;
      },
      get children() {
        return Lt(a2, {
          get style() {
            return av.text;
          },
          get children() {
            return f.children;
          },
        });
      },
    }),
  );
}
const TB = [
    { label: "Home", path: "/" },
    { label: "Movies", path: "/movies" },
  ],
  SB = f => {
    const c = p2();
    return Lt(Ss, {
      get children() {
        return [
          Lt(yB, {}),
          Lt(Ss, { x: 32, y: 32, src: vB, width: 301, height: 60 }),
          Lt(SO, {
            x: 400,
            y: 37,
            gap: 20,
            autofocus: !0,
            get children() {
              return Lt(Q3, {
                each: TB,
                children: a =>
                  Lt(
                    xB,
                    mv(f, {
                      width: 118,
                      height: 49,
                      onEnter: () => c(a.path),
                      onClick: () => c(a.path),
                      get children() {
                        return a.label;
                      },
                    }),
                  ),
              });
            },
          }),
          Lt(Ss, {
            y: 0,
            get children() {
              return f.children;
            },
          }),
        ];
      },
    });
  },
  wB = "" + new URL("background-D7NRJyvC.jpg", import.meta.url).href,
  AB = f => (K2(wB), Lt(Ss, {})),
  EB = () => (
    K2(" "),
    Lt(Ss, {
      get children() {
        return Lt(a2, { children: "Movie Page" });
      },
    })
  );
qj(zt, sv.lightning);
const { render: IB } = oN();
w3(AO);
IB(
  () => (
    DN(sv.keys, sv.keyHoldOptions),
    Lt(dO, {
      root: wO,
      get children() {
        return [
          Lt(Vf, {
            path: "",
            component: SB,
            get children() {
              return [
                Lt(Vf, { path: "/", component: AB, preload: Ny }),
                Lt(Vf, { path: "/movies", component: EB, preload: Ny }),
              ];
            },
          }),
          Lt(Vf, {
            path: "/details/:id",
            get component() {
              return q3(() => YL(() => import("./index-BnWuu0Fl.js"), [], import.meta.url));
            },
            preload: Ny,
          }),
        ];
      },
    })
  ),
);
export { a2 as T, Ss as V, MB as __vite_legacy_guard, Lt as c };
