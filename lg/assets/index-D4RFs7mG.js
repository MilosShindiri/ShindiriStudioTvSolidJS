var ob = Object.defineProperty;
var ab = (d, c, a) =>
  c in d ? ob(d, c, { enumerable: !0, configurable: !0, writable: !0, value: a }) : (d[c] = a);
var _ = (d, c, a) => ab(d, typeof c != "symbol" ? c + "" : c, a);
function sj() {
  (import.meta.url, import("_").catch(() => 1), (async function* () {})().next());
}
(function () {
  const c = document.createElement("link").relList;
  if (c && c.supports && c.supports("modulepreload")) return;
  for (const g of document.querySelectorAll('link[rel="modulepreload"]')) f(g);
  new MutationObserver(g => {
    for (const T of g)
      if (T.type === "childList")
        for (const S of T.addedNodes) S.tagName === "LINK" && S.rel === "modulepreload" && f(S);
  }).observe(document, { childList: !0, subtree: !0 });
  function a(g) {
    const T = {};
    return (
      g.integrity && (T.integrity = g.integrity),
      g.referrerPolicy && (T.referrerPolicy = g.referrerPolicy),
      g.crossOrigin === "use-credentials"
        ? (T.credentials = "include")
        : g.crossOrigin === "anonymous"
          ? (T.credentials = "omit")
          : (T.credentials = "same-origin"),
      T
    );
  }
  function f(g) {
    if (g.ep) return;
    g.ep = !0;
    const T = a(g);
    fetch(g.href, T);
  }
})();
function ub(d, c = !1, a) {
  const f = {
      alpha: !0,
      antialias: !1,
      depth: !1,
      stencil: !0,
      desynchronized: !1,
      powerPreference: "high-performance",
      premultipliedAlpha: !0,
      preserveDrawingBuffer: !1,
    },
    g = d.getContext(c ? "webgl2" : "webgl", f) || d.getContext("experimental-webgl", f);
  if (!g) throw new Error("Unable to create WebGL context");
  return a
    ? new Proxy(g, {
        get(T, S) {
          const h = T[S];
          return typeof h == "function" ? (a.increment(String(S)), h.bind(T)) : h;
        },
      })
    : g;
}
function Zy(d, c, a) {
  const f = Math.trunc(d >>> 24),
    g = Math.trunc((d >>> 16) & 255),
    T = Math.trunc((d >>> 8) & 255),
    S = Math.trunc(d & 255),
    h = Math.trunc(c >>> 24),
    M = Math.trunc((c >>> 16) & 255),
    P = Math.trunc((c >>> 8) & 255),
    N = Math.trunc(c & 255),
    D = Math.round(h * a + f * (1 - a)),
    V = Math.round(M * a + g * (1 - a)),
    K = Math.round(P * a + T * (1 - a)),
    J = Math.round(N * a + S * (1 - a));
  return ((D << 24) | (V << 16) | (K << 8) | J) >>> 0;
}
function lb(d, c) {
  const a = d >>> 24,
    f = (d >>> 16) & 255,
    g = (d >>> 8) & 255,
    T = Math.trunc((d & 255) * c);
  return ((a << 24) | (f << 16) | (g << 8) | T) >>> 0;
}
let G2 = !0;
function cb(d) {
  G2 = d === "webgl";
}
function Uf(d, c, a = !1) {
  const f = ((d & 255) / 255) * c,
    g = G2 ? f : 1,
    T = Math.trunc((d >>> 24) * g),
    S = Math.trunc(((d >>> 16) & 255) * g),
    h = Math.trunc(((d >>> 8) & 255) * g),
    M = Math.trunc(f * 255);
  return a ? ((M << 24) | (h << 16) | (S << 8) | T) >>> 0 : ((T << 24) | (S << 16) | (h << 8) | M) >>> 0;
}
function sh(d, c) {
  return Object.prototype.hasOwnProperty.call(d, c);
}
const db = !0;
let fb = 1;
function hb() {
  return fb++;
}
class As {
  constructor() {
    _(this, "eventListeners", {});
  }
  on(c, a) {
    let f = this.eventListeners[c];
    (f || (f = []), f.push(a), (this.eventListeners[c] = f));
  }
  off(c, a) {
    const f = this.eventListeners[c];
    if (!f) return;
    if (!a) {
      delete this.eventListeners[c];
      return;
    }
    const g = f.indexOf(a);
    g >= 0 && f.splice(g, 1);
  }
  once(c, a) {
    const f = (g, T) => {
      (this.off(c, f), a(g, T));
    };
    this.on(c, f);
  }
  emit(c, a) {
    const f = this.eventListeners[c];
    f &&
      [...f].forEach(g => {
        g(this, a);
      });
  }
  removeAllListeners() {
    this.eventListeners = {};
  }
}
var $n;
(function (d) {
  ((d[(d.generic = 0)] = "generic"),
    (d[(d.color = 1)] = "color"),
    (d[(d.image = 2)] = "image"),
    (d[(d.noise = 3)] = "noise"),
    (d[(d.renderToTexture = 4)] = "renderToTexture"),
    (d[(d.subTexture = 5)] = "subTexture"));
})($n || ($n = {}));
const Ah = class Ah extends As {
  constructor(a) {
    super();
    _(this, "txManager");
    _(this, "_dimensions", null);
    _(this, "_error", null);
    _(this, "state", "initial");
    _(this, "renderableOwners", []);
    _(this, "renderable", !1);
    _(this, "type", $n.generic);
    _(this, "preventCleanup", !1);
    _(this, "ctxTexture");
    _(this, "textureData", null);
    _(this, "memUsed", 0);
    _(this, "retryCount", 0);
    _(this, "maxRetryCount");
    _(this, "createdAt", Date.now());
    _(this, "gracePeriodExpired", !1);
    ((this.txManager = a), (this.maxRetryCount = a.maxRetryCount));
  }
  get dimensions() {
    return this._dimensions;
  }
  get error() {
    return this._error;
  }
  isWithinStartupGracePeriod() {
    return this.gracePeriodExpired
      ? !1
      : Date.now() - this.createdAt >= Ah.STARTUP_GRACE_PERIOD
        ? ((this.gracePeriodExpired = !0), !1)
        : !0;
  }
  canBeCleanedUp() {
    return !(
      this.preventCleanup ||
      this.isWithinStartupGracePeriod() ||
      this.renderable === !0 ||
      this.renderableOwners.length > 0
    );
  }
  setRenderableOwner(a, f) {
    var S, h;
    const g = this.renderableOwners.length,
      T = this.renderableOwners.indexOf(a);
    if (f === !0) {
      T === -1 && this.renderableOwners.push(a);
      const M = this.renderableOwners.length;
      g !== M &&
        M === 1 &&
        ((this.renderable = !0), (S = this.onChangeIsRenderable) == null || S.call(this, !0), this.load());
    } else {
      T !== -1 && this.renderableOwners.splice(T, 1);
      const M = this.renderableOwners.length;
      g !== M &&
        M === 0 &&
        ((this.renderable = !1), (h = this.onChangeIsRenderable) == null || h.call(this, !1));
    }
  }
  load() {
    this.retryCount > this.maxRetryCount || this.txManager.loadTexture(this);
  }
  loadCtxTexture() {
    return (
      this.ctxTexture === void 0 && (this.ctxTexture = this.txManager.renderer.createCtxTexture(this)),
      this.ctxTexture
    );
  }
  free() {
    var a;
    (a = this.ctxTexture) == null || a.free();
  }
  release() {
    var a;
    ((a = this.ctxTexture) == null || a.release(), (this.ctxTexture = void 0), this.freeTextureData());
  }
  destroy() {
    (this.state === "loaded" && this.free(), this.freeTextureData());
  }
  freeTextureData() {
    queueMicrotask(() => {
      this.textureData = null;
    });
  }
  setState(a, f) {
    if (this.state === a) return;
    let g = null;
    (a === "loaded"
      ? ((this._error = null),
        f !== void 0 &&
          "width" in f &&
          "height" in f &&
          f.width !== void 0 &&
          f.height !== void 0 &&
          (this._dimensions = f),
        (g = this._dimensions))
      : a === "failed"
        ? ((this._error = f),
          (g = this._error),
          (this.retryCount += 1),
          queueMicrotask(() => {
            this.release();
          }))
        : a === "loading"
          ? ((this._error = null), (this._dimensions = null))
          : (this._error = null),
      (this.state = a),
      this.emit(a, g));
  }
  async getTextureData() {
    return (
      this.textureData === null && (this.textureData = await this.getTextureSource()),
      this.textureData
    );
  }
  static makeCacheKey(a) {
    return !1;
  }
  static resolveDefaults(a) {
    return {};
  }
  retry() {
    (this.release(), (this.retryCount = 0), this.load());
  }
};
_(Ah, "STARTUP_GRACE_PERIOD", 2e3);
let ro = Ah;
const pb = /^(data|ftps?|https?):/,
  Ch = d => {
    const c = d >>> 24,
      a = (d >>> 16) & 255,
      f = (d >>> 8) & 255,
      g = d & 255;
    return [c / 255, a / 255, f / 255, g / 255];
  };
function Ca(d, c, a, f, g) {
  return g ? ((g.x1 = d), (g.y1 = c), (g.x2 = a), (g.y2 = f), g) : { x1: d, y1: c, x2: a, y2: f };
}
function Py(d, c) {
  return d.x1 < c.x2 && d.x2 > c.x1 && d.y1 < c.y2 && d.y2 > c.y1;
}
function gb(d, c) {
  return c
    ? ((c.x = d.x1), (c.y = d.y1), (c.width = d.x2 - d.x1), (c.height = d.y2 - d.y1), c)
    : { x: d.x1, y: d.y1, width: d.x2 - d.x1, height: d.y2 - d.y1 };
}
function z2(d, c, a) {
  const f = Math.max(d.x, c.x),
    g = Math.max(d.y, c.y),
    T = Math.min(d.x + d.width, c.x + c.width) - f,
    S = Math.min(d.y + d.height, c.y + c.height) - g;
  return T > 0 && S > 0
    ? a
      ? ((a.x = f), (a.y = g), (a.width = T), (a.height = S), a)
      : { x: f, y: g, width: T, height: S }
    : a
      ? ((a.x = 0), (a.y = 0), (a.width = 0), (a.height = 0), a)
      : { x: 0, y: 0, width: 0, height: 0 };
}
function X2(d, c) {
  return c
    ? ((c.x = d.x), (c.y = d.y), (c.width = d.width), (c.height = d.height), c)
    : { x: d.x, y: d.y, width: d.width, height: d.height };
}
function mb(d, c) {
  return d === c
    ? !0
    : d === null || c === null
      ? !1
      : d.x === c.x && d.y === c.y && d.width === c.width && d.height === c.height;
}
function Dy(d, c) {
  return d.x1 <= c.x2 && d.y1 <= c.y2 && d.x2 >= c.x1 && d.y2 >= c.y1;
}
function yb(d, c) {
  return d.x1 < c.x1 && d.x2 > c.x2 && d.y1 < c.y1 && d.y2 > c.y2;
}
function vb(d, c, a) {
  return !(d < a.x1 || d > a.x2 || c < a.y1 || c > a.y2);
}
function xb(d) {
  return d.x1 < d.x2 && d.y1 < d.y2;
}
function ev(d, c) {
  return Ca(d.x1 - c[3], d.y1 - c[0], d.x2 + c[1], d.y2 + c[2]);
}
function Tb(d) {
  if (self.location.protocol === "file:" && !pb.test(d)) {
    const a = self.location.pathname.split("/");
    a.pop();
    const f = a.join("/"),
      g = self.location.protocol + "//" + f;
    return (d.charAt(0) === "." && (d = d.slice(1)), d.charAt(0) === "/" && (d = d.slice(1)), g + "/" + d);
  }
  return new URL(d, self.location.href).href;
}
function Ly(d) {
  return d.startsWith("data:") === !0;
}
function wb(d) {
  var M, P;
  d = d.replace(/^data:/, "");
  const c = ((M = d.match(/image\/[^;]+/)) == null ? void 0 : M[0]) || "",
    a = d.replace(/^[^,]+,/, ""),
    f = 1024,
    g = atob(a),
    T = g.length,
    S = Math.ceil(T / f),
    h = new Array(S);
  for (let N = 0; N < S; ++N) {
    const D = N * f,
      V = Math.min(D + f, T),
      K = new Array(V - D);
    for (let J = D, Z = 0; J < V; ++Z, ++J) K[Z] = (P = g[J]) == null ? void 0 : P.charCodeAt(0);
    h[N] = new Uint8Array(K);
  }
  return new Blob(h, { type: c });
}
class Tn {
  constructor() {
    _(this, "ta");
    _(this, "tb");
    _(this, "tx");
    _(this, "tc");
    _(this, "td");
    _(this, "ty");
    _(this, "_floatArr", null);
    _(this, "mutation");
    ((this.ta = 0),
      (this.tb = 0),
      (this.tx = 0),
      (this.tc = 0),
      (this.td = 0),
      (this.ty = 0),
      (this.mutation = !0));
  }
  static get temp() {
    return Sb;
  }
  static multiply(c, a, f) {
    const g = c.ta * a.ta + c.tb * a.tc,
      T = c.ta * a.tb + c.tb * a.td,
      S = c.ta * a.tx + c.tb * a.ty + c.tx,
      h = c.tc * a.ta + c.td * a.tc,
      M = c.tc * a.tb + c.td * a.td,
      P = c.tc * a.tx + c.td * a.ty + c.ty;
    return (
      f || (f = new Tn()),
      (f.ta = g),
      (f.tb = T),
      (f.tx = S),
      (f.tc = h),
      (f.td = M),
      (f.ty = P),
      (f.mutation = !0),
      f
    );
  }
  static identity(c) {
    return (
      c || (c = new Tn()),
      (c.ta = 1),
      (c.tb = 0),
      (c.tx = 0),
      (c.tc = 0),
      (c.td = 1),
      (c.ty = 0),
      (c.mutation = !0),
      c
    );
  }
  static translate(c, a, f) {
    return (
      f || (f = new Tn()),
      (f.ta = 1),
      (f.tb = 0),
      (f.tx = c),
      (f.tc = 0),
      (f.td = 1),
      (f.ty = a),
      (f.mutation = !0),
      f
    );
  }
  static scale(c, a, f) {
    return (
      f || (f = new Tn()),
      (f.ta = c),
      (f.tb = 0),
      (f.tx = 0),
      (f.tc = 0),
      (f.td = a),
      (f.ty = 0),
      (f.mutation = !0),
      f
    );
  }
  static rotate(c, a) {
    const f = Math.cos(c),
      g = Math.sin(c);
    return (
      a || (a = new Tn()),
      (a.ta = f),
      (a.tb = -g),
      (a.tx = 0),
      (a.tc = g),
      (a.td = f),
      (a.ty = 0),
      (a.mutation = !0),
      a
    );
  }
  static copy(c, a) {
    return (
      a || (a = new Tn()),
      (a.ta = c.ta),
      (a.tc = c.tc),
      (a.tb = c.tb),
      (a.td = c.td),
      (a.tx = c.tx),
      (a.ty = c.ty),
      (a.mutation = !0),
      a
    );
  }
  translate(c, a) {
    return (
      (this.tx = this.ta * c + this.tb * a + this.tx),
      (this.ty = this.tc * c + this.td * a + this.ty),
      (this.mutation = !0),
      this
    );
  }
  scale(c, a) {
    return (
      (this.ta = this.ta * c),
      (this.tb = this.tb * a),
      (this.tc = this.tc * c),
      (this.td = this.td * a),
      (this.mutation = !0),
      this
    );
  }
  rotate(c) {
    if (c === 0 || !((c % Math.PI) * 2)) return this;
    const a = Math.cos(c),
      f = Math.sin(c),
      g = this.ta * a + this.tb * f,
      T = this.tb * a - this.ta * f,
      S = this.tc * a + this.td * f,
      h = this.td * a - this.tc * f;
    return ((this.ta = g), (this.tb = T), (this.tc = S), (this.td = h), (this.mutation = !0), this);
  }
  multiply(c) {
    return Tn.multiply(this, c, this);
  }
  getFloatArr() {
    return (
      this._floatArr || (this._floatArr = new Float32Array(9)),
      this.mutation &&
        ((this._floatArr[0] = this.ta),
        (this._floatArr[1] = this.tc),
        (this._floatArr[2] = 0),
        (this._floatArr[3] = this.tb),
        (this._floatArr[4] = this.td),
        (this._floatArr[5] = 0),
        (this._floatArr[6] = this.tx),
        (this._floatArr[7] = this.ty),
        (this._floatArr[8] = 1),
        (this.mutation = !1)),
      this._floatArr
    );
  }
}
const Sb = new Tn(),
  Ff = 0,
  Bf = 2,
  jf = 4,
  Vf = 6,
  Hf = 1,
  Gf = 3,
  zf = 5,
  Xf = 7;
class Ma {
  constructor(c) {
    _(this, "data");
    ((this.data = new Float32Array(8)),
      c &&
        ((this.data[Ff] = c[Ff]),
        (this.data[Bf] = c[Bf]),
        (this.data[jf] = c[jf]),
        (this.data[Vf] = c[Vf]),
        (this.data[Hf] = c[Hf]),
        (this.data[Gf] = c[Gf]),
        (this.data[zf] = c[zf]),
        (this.data[Xf] = c[Xf])));
  }
  static translate(c, a, f, g, T, S, h, M, P) {
    return (
      P || (P = new Ma()),
      (P.data[Ff] = c),
      (P.data[Bf] = f),
      (P.data[jf] = T),
      (P.data[Vf] = h),
      (P.data[Hf] = a),
      (P.data[Gf] = g),
      (P.data[zf] = S),
      (P.data[Xf] = M),
      P
    );
  }
  get x1() {
    return this.data[Ff];
  }
  get x2() {
    return this.data[Bf];
  }
  get x3() {
    return this.data[jf];
  }
  get x4() {
    return this.data[Vf];
  }
  get y1() {
    return this.data[Hf];
  }
  get y2() {
    return this.data[Gf];
  }
  get y3() {
    return this.data[zf];
  }
  get y4() {
    return this.data[Xf];
  }
}
const W2 = (d, c, a, f) => {
    const g = 3 * d,
      T = 3 * (a - d) - g,
      S = 1 - g - T,
      h = 3 * c,
      M = 3 * (f - c) - h,
      P = 1 - h - M;
    return function (N) {
      if (N >= 1) return 1;
      if (N <= 0) return 0;
      let D = 0.5,
        V,
        K,
        J;
      for (let le = 0; le < 20; le++) {
        if (((V = D * (D * (D * S + T) + g)), (J = N - V), J > -1e-8 && J < 1e-8))
          return D * (D * (D * P + M) + h);
        if (((K = D * (D * (3 * S) + 2 * T) + g), K > 1e-10 && K < 1e-10)) break;
        D += J / K;
      }
      let Z = 0,
        ue = 1;
      for (let le = 0; le < 20; le++) {
        if (((D = 0.5 * (Z + ue)), (V = D * (D * (D * S + T) + g)), (J = N - V), J > -1e-8 && J < 1e-8))
          return D * (D * (D * P + M) + h);
        J < 0 ? (ue = D) : (Z = D);
      }
    };
  },
  Qf = {},
  Ab = {
    ease: [0.25, 0.1, 0.25, 1],
    "ease-in": [0.42, 0, 1, 1],
    "ease-out": [0, 0, 0.58, 1],
    "ease-in-out": [0.42, 0, 0.58, 1],
    "ease-in-sine": [0.12, 0, 0.39, 0],
    "ease-out-sine": [0.12, 0, 0.39, 0],
    "ease-in-out-sine": [0.37, 0, 0.63, 1],
    "ease-in-cubic": [0.32, 0, 0.67, 0],
    "ease-out-cubic": [0.33, 1, 0.68, 1],
    "ease-in-out-cubic": [0.65, 0, 0.35, 1],
    "ease-in-circ": [0.55, 0, 1, 0.45],
    "ease-out-circ": [0, 0.55, 0.45, 1],
    "ease-in-out-circ": [0.85, 0, 0.15, 1],
    "ease-in-back": [0.36, 0, 0.66, -0.56],
    "ease-out-back": [0.34, 1.56, 0.64, 1],
    "ease-in-out-back": [0.68, -0.6, 0.32, 1.6],
  },
  Zf = d => d,
  Eb = d => {
    const c = /-?\d*\.?\d+/g,
      a = d.match(c);
    if (a) {
      const [f, g, T, S] = a,
        h = parseFloat(f || "0.42"),
        M = parseFloat(g || "0"),
        P = parseFloat(T || "1"),
        N = parseFloat(S || "1"),
        D = W2(h, M, P, N);
      return ((Qf[d] = D), D);
    }
    return (console.warn("Unknown cubic-bezier timing: " + d), Zf);
  },
  K2 = d => {
    if (d === "linear") return Zf;
    if (Qf[d] !== void 0) return Qf[d] || Zf;
    if (d === "step-start") return () => 1;
    if (d === "step-end") return a => (a === 1 ? 1 : 0);
    const c = Ab[d];
    if (c !== void 0) {
      const [a, f, g, T] = c,
        S = W2(a, f, g, T);
      return ((Qf[d] = S), S);
    }
    return d.startsWith("cubic-bezier") ? Eb(d) : (console.warn("Unknown timing function: " + d), Zf);
  };
function zE(d) {
  return (d / 1024 / 1024).toFixed(2);
}
class Ib extends As {
  constructor(a, f, g) {
    var h, M, P, N, D, V;
    super();
    _(this, "node");
    _(this, "props");
    _(this, "settings");
    _(this, "progress", 0);
    _(this, "delayFor", 0);
    _(this, "delay", 0);
    _(this, "timingFunction");
    _(this, "propValuesMap", {});
    _(this, "dynPropValuesMap");
    ((this.node = a), (this.props = f));
    for (const K in f)
      if (K !== "shaderProps")
        (this.propValuesMap.props === void 0 && (this.propValuesMap.props = {}),
          (this.propValuesMap.props[K] = { start: a[K] || 0, target: f[K] }));
      else if (a.shader.type !== "DynamicShader") {
        this.propValuesMap.shaderProps = {};
        for (const J in f.shaderProps)
          this.propValuesMap.shaderProps[J] = { start: a.shader.props[J], target: f.shaderProps[J] };
      } else {
        const J = Object.keys(f.shaderProps),
          Z = J.length;
        this.dynPropValuesMap = {};
        for (let ue = 0; ue < Z; ue++) {
          const le = J[ue],
            q = f.shaderProps[le];
          this.dynPropValuesMap[le] = {};
          const se = Object.entries(q),
            x = se.length;
          for (let Y = 0; Y < x; Y++) {
            const [ye, fe] = se[Y];
            this.dynPropValuesMap[le][ye] = { start: a.shader.props[le][ye], target: fe };
          }
        }
      }
    const T = g.easing || "linear",
      S = (h = g.delay) != null ? h : 0;
    ((this.settings = {
      duration: (M = g.duration) != null ? M : 0,
      delay: S,
      easing: T,
      loop: (P = g.loop) != null ? P : !1,
      repeat: (N = g.repeat) != null ? N : 0,
      repeatDelay: (D = g.repeatDelay) != null ? D : 0,
      stopMethod: (V = g.stopMethod) != null ? V : !1,
    }),
      (this.timingFunction = K2(T)),
      (this.delayFor = S),
      (this.delay = S));
  }
  reset() {
    ((this.progress = 0), (this.delayFor = this.settings.delay || 0), this.update(0));
  }
  restoreValues(a, f) {
    const g = Object.entries(f),
      T = g.length;
    for (let S = 0; S < T; S++) {
      const [h, M] = g[S];
      a[h] = M.start;
    }
  }
  restore() {
    if (
      (this.reset(),
      this.propValuesMap.props !== void 0 && this.restoreValues(this.node, this.propValuesMap.props),
      this.propValuesMap.shaderProps !== void 0 &&
        this.restoreValues(this.node.shader.props, this.propValuesMap.shaderProps),
      this.dynPropValuesMap !== void 0)
    ) {
      const a = Object.keys(this.dynPropValuesMap),
        f = a.length;
      if (f > 0)
        for (let g = 0; g < f; g++) {
          const T = a[g];
          this.restoreValues(this.node.shader.props[T], this.dynPropValuesMap[T]);
        }
    }
  }
  reverseValues(a) {
    const f = Object.entries(a),
      g = f.length;
    for (let T = 0; T < g; T++) {
      const [S, h] = f[T];
      a[S] = { start: h.target, target: h.start };
    }
  }
  reverse() {
    if (
      ((this.progress = 0),
      this.propValuesMap.props !== void 0 && this.reverseValues(this.propValuesMap.props),
      this.propValuesMap.shaderProps !== void 0 && this.reverseValues(this.propValuesMap.shaderProps),
      this.dynPropValuesMap !== void 0)
    ) {
      const a = Object.keys(this.dynPropValuesMap),
        f = a.length;
      if (f > 0)
        for (let g = 0; g < f; g++) {
          const T = a[g];
          this.reverseValues(this.dynPropValuesMap[T]);
        }
    }
    this.settings.loop || (this.settings.stopMethod = !1);
  }
  applyEasing(a, f, g) {
    return (this.timingFunction(a) || a) * (g - f) + f;
  }
  updateValue(a, f, g, T) {
    if (this.progress === 1) return f;
    if (this.progress === 0) return g;
    const S = f;
    if (a.indexOf("color") !== -1) {
      if (g === S) return g;
      if (T) {
        const h = this.timingFunction(this.progress) || this.progress;
        return Zy(g, S, h);
      }
      return Zy(g, S, this.progress);
    }
    return T ? this.applyEasing(this.progress, g, S) : g + (S - g) * this.progress;
  }
  updateValues(a, f, g) {
    const T = Object.entries(f),
      S = T.length;
    for (let h = 0; h < S; h++) {
      const [M, P] = T[h];
      a[M] = this.updateValue(M, P.target, P.start, g);
    }
  }
  update(a) {
    const { duration: f, loop: g, easing: T, stopMethod: S } = this.settings,
      { delayFor: h } = this;
    if (this.node.destroyed) {
      this.emit("destroyed", {});
      return;
    }
    if (f === 0 && h === 0) {
      this.emit("finished", {});
      return;
    }
    if (this.delayFor > 0) {
      if (((this.delayFor -= a), this.delayFor >= 0)) return;
      ((a = -this.delayFor), (this.delayFor = 0));
    }
    if (f === 0) {
      this.emit("finished", {});
      return;
    }
    if (
      (this.progress === 0 && this.emit("animating", {}),
      (this.progress += a / f),
      this.progress > 1 && ((this.progress = g ? 0 : 1), (this.delayFor = this.delay), S))
    ) {
      this.emit("finished", {});
      return;
    }
    if (
      (this.propValuesMap.props !== void 0 && this.updateValues(this.node, this.propValuesMap.props, T),
      this.propValuesMap.shaderProps !== void 0 &&
        this.updateValues(this.node.shader.props, this.propValuesMap.shaderProps, T),
      this.dynPropValuesMap !== void 0)
    ) {
      const M = Object.keys(this.dynPropValuesMap),
        P = M.length;
      if (P > 0)
        for (let N = 0; N < P; N++) {
          const D = M[N];
          this.updateValues(this.node.shader.props[D], this.dynPropValuesMap[D], T);
        }
    }
    (this.progress < 1 && this.emit("tick", { progress: this.progress }),
      this.progress === 1 && this.emit("finished", {}));
  }
}
class Cb extends As {
  constructor(a, f) {
    super();
    _(this, "manager");
    _(this, "animation");
    _(this, "stoppedPromise");
    _(this, "stoppedResolve", null);
    _(this, "state");
    ((this.manager = a),
      (this.animation = f),
      (this.state = "stopped"),
      (this.stoppedPromise = Promise.resolve()),
      (this.onAnimating = this.onAnimating.bind(this)),
      (this.onFinished = this.onFinished.bind(this)),
      (this.onTick = this.onTick.bind(this)),
      (this.onDestroy = this.onDestroy.bind(this)));
  }
  start() {
    return (
      this.state !== "running" &&
        this.state !== "scheduled" &&
        (this.makeStoppedPromise(), this.registerAnimation(), (this.state = "scheduled")),
      this
    );
  }
  stop() {
    return (
      this.unregisterAnimation(),
      this.stoppedResolve !== null &&
        (this.stoppedResolve(), (this.stoppedResolve = null), this.emit("stopped", this)),
      this.animation.reset(),
      (this.state = "stopped"),
      this
    );
  }
  pause() {
    return (this.unregisterAnimation(), (this.state = "paused"), this);
  }
  restore() {
    return ((this.stoppedResolve = null), this.animation.restore(), this);
  }
  waitUntilStopped() {
    return this.stoppedPromise;
  }
  registerAnimation() {
    (this.animation.once("finished", this.onFinished),
      this.animation.on("animating", this.onAnimating),
      this.animation.on("tick", this.onTick),
      this.animation.on("destroyed", this.onDestroy),
      this.manager.registerAnimation(this.animation));
  }
  unregisterAnimation() {
    (this.manager.unregisterAnimation(this.animation),
      this.animation.off("finished", this.onFinished),
      this.animation.off("animating", this.onAnimating),
      this.animation.off("tick", this.onTick),
      this.animation.off("destroy", this.onDestroy));
  }
  makeStoppedPromise() {
    this.stoppedResolve === null &&
      (this.stoppedPromise = new Promise(a => {
        this.stoppedResolve = a;
      }));
  }
  onDestroy() {
    (this.unregisterAnimation(), (this.state = "stopped"));
  }
  onFinished() {
    const { loop: a, stopMethod: f } = this.animation.settings;
    if (f === "reverse") {
      (this.animation.once("finished", this.onFinished), this.animation.reverse());
      return;
    }
    a ||
      (this.unregisterAnimation(),
      this.stoppedResolve !== null && (this.stoppedResolve(), (this.stoppedResolve = null)),
      this.emit("stopped", this),
      (this.state = "stopped"));
  }
  onAnimating() {
    ((this.state = "running"), this.emit("animating", this));
  }
  onTick(a, f) {
    this.emit("tick", f);
  }
}
var Rn;
(function (d) {
  ((d[(d.Init = 0)] = "Init"),
    (d[(d.OutOfBounds = 2)] = "OutOfBounds"),
    (d[(d.InBounds = 4)] = "InBounds"),
    (d[(d.InViewport = 8)] = "InViewport"));
})(Rn || (Rn = {}));
const Bl = new Map();
Bl.set(Rn.Init, "init");
Bl.set(Rn.OutOfBounds, "outOfBounds");
Bl.set(Rn.InBounds, "inBounds");
Bl.set(Rn.InViewport, "inViewport");
var he;
(function (d) {
  ((d[(d.Children = 1)] = "Children"),
    (d[(d.ScaleRotate = 2)] = "ScaleRotate"),
    (d[(d.Local = 4)] = "Local"),
    (d[(d.Global = 8)] = "Global"),
    (d[(d.Clipping = 16)] = "Clipping"),
    (d[(d.CalculatedZIndex = 32)] = "CalculatedZIndex"),
    (d[(d.ZIndexSortedChildren = 64)] = "ZIndexSortedChildren"),
    (d[(d.PremultipliedColors = 128)] = "PremultipliedColors"),
    (d[(d.WorldAlpha = 256)] = "WorldAlpha"),
    (d[(d.RenderState = 512)] = "RenderState"),
    (d[(d.IsRenderable = 1024)] = "IsRenderable"),
    (d[(d.RenderTexture = 2048)] = "RenderTexture"),
    (d[(d.ParentRenderTexture = 4096)] = "ParentRenderTexture"),
    (d[(d.RenderBounds = 8192)] = "RenderBounds"),
    (d[(d.None = 0)] = "None"),
    (d[(d.All = 14335)] = "All"));
})(he || (he = {}));
class tv extends As {
  constructor(a, f) {
    super();
    _(this, "stage");
    _(this, "children", []);
    _(this, "_id", hb());
    _(this, "props");
    _(this, "updateType", he.All);
    _(this, "childUpdateType", he.None);
    _(this, "globalTransform");
    _(this, "scaleRotateTransform");
    _(this, "localTransform");
    _(this, "sceneGlobalTransform");
    _(this, "renderCoords");
    _(this, "sceneRenderCoords");
    _(this, "renderBound");
    _(this, "strictBound");
    _(this, "preloadBound");
    _(this, "clippingRect", { x: 0, y: 0, width: 0, height: 0, valid: !1 });
    _(this, "isRenderable", !1);
    _(this, "renderState", Rn.Init);
    _(this, "worldAlpha", 1);
    _(this, "premultipliedColorTl", 0);
    _(this, "premultipliedColorTr", 0);
    _(this, "premultipliedColorBl", 0);
    _(this, "premultipliedColorBr", 0);
    _(this, "calcZIndex", 0);
    _(this, "hasRTTupdates", !1);
    _(this, "parentHasRenderTexture", !1);
    _(this, "rttParent", null);
    _(this, "destroyed", !1);
    _(this, "onTextureLoaded", (a, f) => {
      var g, T;
      (this.autosizeNode(f),
        this.setUpdateType(he.IsRenderable),
        this.stage.requestRender(),
        this.parentHasRenderTexture && this.notifyParentRTTOfUpdate(),
        f.width > 1 && f.height > 1 && this.emit("loaded", { type: "texture", dimensions: f }),
        ((T = (g = this.props.textureOptions) == null ? void 0 : g.resizeMode) == null ? void 0 : T.type) ===
          "contain" && this.setUpdateType(he.Local));
    });
    _(this, "onTextureFailed", (a, f) => {
      ((this.isRenderable = !1),
        this.updateTextureOwnership(!1),
        this.setUpdateType(he.IsRenderable),
        this.parentHasRenderTexture && this.notifyParentRTTOfUpdate(),
        this.texture !== null &&
          this.texture.retryCount > this.texture.maxRetryCount &&
          this.emit("failed", { type: "texture", error: f }));
    });
    _(this, "onTextureFreed", () => {
      ((this.isRenderable = !1),
        this.updateTextureOwnership(!1),
        this.setUpdateType(he.IsRenderable),
        this.parentHasRenderTexture && this.notifyParentRTTOfUpdate(),
        this.emit("freed", { type: "texture" }));
    });
    ((this.stage = a),
      (this.props = { ...f, parent: null, texture: null, src: null, rtt: !1 }),
      (this.parent = f.parent),
      (this.texture = f.texture),
      (this.src = f.src),
      (this.rtt = f.rtt),
      (this.interactive = f.interactive),
      f.boundsMargin &&
        (this.boundsMargin = Array.isArray(f.boundsMargin)
          ? f.boundsMargin
          : [f.boundsMargin, f.boundsMargin, f.boundsMargin, f.boundsMargin]),
      this.setUpdateType(he.ScaleRotate | he.Local | he.RenderBounds | he.RenderState),
      this.stage.defaultTexture &&
        this.stage.defaultTexture.state !== "loaded" &&
        this.stage.defaultTexture.once("loaded", () => {
          this.setUpdateType(he.IsRenderable);
        }));
  }
  loadTexture() {
    const { texture: a } = this.props;
    queueMicrotask(() => {
      var f, g;
      if (
        (this.textureOptions.preload === !0 && this.stage.txManager.loadTexture(a),
        (a.preventCleanup =
          (g = (f = this.props.textureOptions) == null ? void 0 : f.preventCleanup) != null ? g : !1),
        a.on("loaded", this.onTextureLoaded),
        a.on("failed", this.onTextureFailed),
        a.on("freed", this.onTextureFreed),
        a.state === "loaded"
          ? (a.dimensions, this.onTextureLoaded(a, a.dimensions))
          : a.state === "failed"
            ? (a.error, this.onTextureFailed(a, a.error))
            : a.state === "freed" && this.onTextureFreed(a),
        this.parentHasRenderTexture)
      ) {
        this.notifyParentRTTOfUpdate();
        return;
      }
    });
  }
  unloadTexture() {
    this.texture !== null &&
      (this.texture.off("loaded", this.onTextureLoaded),
      this.texture.off("failed", this.onTextureFailed),
      this.texture.off("freed", this.onTextureFreed),
      this.texture.setRenderableOwner(this._id, !1));
  }
  autosizeNode(a) {
    this.autosize && ((this.width = a.width), (this.height = a.height));
  }
  setUpdateType(a) {
    this.updateType |= a;
    const f = this.props.parent;
    f && (f.updateType & he.Children) === 0 && f.setUpdateType(he.Children);
  }
  sortChildren() {
    this.children.sort((a, f) => a.calcZIndex - f.calcZIndex);
  }
  updateScaleRotateTransform() {
    const { rotation: a, scaleX: f, scaleY: g } = this.props;
    if (a === 0 && f === 1 && g === 1) {
      this.scaleRotateTransform = void 0;
      return;
    }
    this.scaleRotateTransform = Tn.rotate(a, this.scaleRotateTransform).scale(f, g);
  }
  updateLocalTransform() {
    var P, N;
    const { x: a, y: f, width: g, height: T } = this.props,
      S = this.props.mountX * g,
      h = this.props.mountY * T;
    if (this.scaleRotateTransform) {
      const D = this.props.pivotX * g,
        V = this.props.pivotY * T;
      this.localTransform = Tn.translate(a - S + D, f - h + V, this.localTransform)
        .multiply(this.scaleRotateTransform)
        .translate(-D, -V);
    } else this.localTransform = Tn.translate(a - S, f - h, this.localTransform);
    const M = this.props.texture;
    if (
      M &&
      M.dimensions &&
      ((N = (P = this.props.textureOptions) == null ? void 0 : P.resizeMode) == null ? void 0 : N.type) ===
        "contain"
    ) {
      let D = 1,
        V = 1,
        K = 0,
        J = 0;
      const { width: Z, height: ue } = M.dimensions,
        le = Z / ue,
        q = g / T;
      if (le > q) {
        const se = g / Z,
          x = ue * se;
        ((J = (T - x) / 2), (V = x / T));
      } else {
        const se = T / ue,
          x = Z * se;
        ((K = (g - x) / 2), (D = x / g));
      }
      this.localTransform.translate(K, J).scale(D, V);
    }
    this.setUpdateType(he.Global);
  }
  update(a, f) {
    (this.updateType & he.ScaleRotate && (this.updateScaleRotateTransform(), this.setUpdateType(he.Local)),
      this.updateType & he.Local && (this.updateLocalTransform(), this.setUpdateType(he.Global)));
    const g = this.props.parent;
    let T = null;
    if (
      (this.updateType & he.RenderTexture && this.rtt && (this.hasRTTupdates = !0),
      this.updateType & he.Global &&
        (this.localTransform,
        this.parentHasRenderTexture === !0 && (g == null ? void 0 : g.rtt) === !0
          ? ((this.globalTransform = Tn.identity()),
            (this.sceneGlobalTransform = Tn.copy(
              (g == null ? void 0 : g.globalTransform) || Tn.identity(),
            ).multiply(this.localTransform)))
          : this.parentHasRenderTexture === !0 && (g == null ? void 0 : g.rtt) === !1
            ? ((this.sceneGlobalTransform = Tn.copy(
                (g == null ? void 0 : g.sceneGlobalTransform) || this.localTransform,
              ).multiply(this.localTransform)),
              (this.globalTransform = Tn.copy(
                (g == null ? void 0 : g.globalTransform) || this.localTransform,
                this.globalTransform,
              )))
            : (this.globalTransform = Tn.copy(
                (g == null ? void 0 : g.globalTransform) || this.localTransform,
                this.globalTransform,
              )),
        g !== null && this.globalTransform.multiply(this.localTransform),
        this.calculateRenderCoords(),
        this.updateBoundingRect(),
        this.setUpdateType(he.RenderState | he.Children),
        (this.childUpdateType |= he.Global),
        this.clipping === !0 &&
          (this.setUpdateType(he.Clipping | he.RenderBounds), (this.childUpdateType |= he.RenderBounds))),
      this.updateType & he.RenderBounds &&
        (this.createRenderBounds(),
        this.setUpdateType(he.RenderState),
        this.setUpdateType(he.Children),
        (this.childUpdateType |= he.RenderBounds)),
      this.updateType & he.RenderState &&
        ((T = this.checkRenderBounds()),
        this.setUpdateType(he.IsRenderable),
        T !== Rn.OutOfBounds && this.updateRenderState(T)),
      this.updateType & he.WorldAlpha &&
        (g ? (this.worldAlpha = g.worldAlpha * this.props.alpha) : (this.worldAlpha = this.props.alpha),
        this.setUpdateType(he.Children | he.PremultipliedColors | he.IsRenderable),
        (this.childUpdateType |= he.WorldAlpha)),
      this.updateType & he.IsRenderable && this.updateIsRenderable(),
      this.updateType & he.Clipping &&
        (this.calculateClippingRect(f),
        this.setUpdateType(he.Children),
        (this.childUpdateType |= he.Clipping),
        (this.childUpdateType |= he.RenderBounds)),
      this.updateType & he.PremultipliedColors &&
        ((this.premultipliedColorTl = Uf(this.props.colorTl, this.worldAlpha, !0)),
        this.props.colorTl === this.props.colorTr &&
        this.props.colorBl === this.props.colorBr &&
        this.props.colorTl === this.props.colorBl
          ? (this.premultipliedColorTr =
              this.premultipliedColorBl =
              this.premultipliedColorBr =
                this.premultipliedColorTl)
          : ((this.premultipliedColorTr = Uf(this.props.colorTr, this.worldAlpha, !0)),
            (this.premultipliedColorBl = Uf(this.props.colorBl, this.worldAlpha, !0)),
            (this.premultipliedColorBr = Uf(this.props.colorBr, this.worldAlpha, !0)))),
      g !== null &&
        this.updateType & he.CalculatedZIndex &&
        (this.calculateZIndex(), g.setUpdateType(he.ZIndexSortedChildren)),
      this.props.strictBounds === !0 && this.renderState === Rn.OutOfBounds)
    ) {
      this.updateType &= ~he.RenderBounds;
      return;
    }
    if (this.updateType & he.Children && this.children.length > 0)
      for (let S = 0, h = this.children.length; S < h; S++) {
        const M = this.children[S];
        if ((M.setUpdateType(this.childUpdateType), M.updateType === 0)) continue;
        let P = this.clippingRect;
        (this.rtt === !0 && (P = { x: 0, y: 0, width: 0, height: 0, valid: !1 }), M.update(a, P));
      }
    (this.parentHasRenderTexture && this.updateType > 0 && this.notifyParentRTTOfUpdate(),
      this.updateType & he.ZIndexSortedChildren && this.sortChildren(),
      T === Rn.OutOfBounds &&
        (this.updateRenderState(T),
        this.updateIsRenderable(),
        this.rtt === !0 && T === Rn.OutOfBounds && this.notifyChildrenRTTOfUpdate(T)),
      (this.updateType = 0),
      (this.childUpdateType = 0));
  }
  findParentRTTNode() {
    let a = this.parent;
    for (; a && !a.rtt; ) a = a.parent;
    return a;
  }
  getRTTParentRenderState() {
    const a = this.rttParent || this.findParentRTTNode();
    return a ? a.renderState : null;
  }
  notifyChildrenRTTOfUpdate(a) {
    for (const f of this.children)
      (f.updateRenderState(a), f.updateIsRenderable(), f.notifyChildrenRTTOfUpdate(a));
  }
  notifyParentRTTOfUpdate() {
    if (this.parent === null) return;
    const a = this.rttParent || this.findParentRTTNode();
    a &&
      ((a.hasRTTupdates = !0),
      a.setUpdateType(he.RenderTexture),
      a.parentHasRenderTexture === !0 && a.notifyParentRTTOfUpdate());
  }
  checkRenderBounds() {
    return (
      this.renderBound,
      this.strictBound,
      this.preloadBound,
      Dy(this.renderBound, this.strictBound)
        ? Rn.InViewport
        : Dy(this.renderBound, this.preloadBound)
          ? Rn.InBounds
          : yb(this.renderBound, this.strictBound)
            ? Rn.InViewport
            : this.parent !== null && (this.props.width === 0 || this.props.height === 0)
              ? this.parent.renderState
              : Rn.OutOfBounds
    );
  }
  updateBoundingRect() {
    const a = this.sceneGlobalTransform || this.globalTransform,
      f = this.sceneRenderCoords || this.renderCoords,
      { tb: g, tc: T } = a,
      { x1: S, y1: h, x3: M, y3: P } = f;
    if (g === 0 || T === 0) this.renderBound = Ca(S, h, M, P, this.renderBound);
    else {
      const { x2: N, x4: D, y2: V, y4: K } = f;
      this.renderBound = Ca(
        Math.min(S, N, M, D),
        Math.min(h, V, P, K),
        Math.max(S, N, M, D),
        Math.max(h, V, P, K),
        this.renderBound,
      );
    }
  }
  createRenderBounds() {
    if ((this.stage, this.parent !== null && this.parent.strictBound !== void 0)) {
      const N = this.parent.strictBound;
      ((this.strictBound = Ca(N.x1, N.y1, N.x2, N.y2)),
        (this.preloadBound = ev(this.strictBound, this.boundsMargin)));
    } else ((this.strictBound = this.stage.strictBound), (this.preloadBound = this.stage.preloadBound));
    if (
      this.props.clipping === !1 ||
      this.renderBound === void 0 ||
      Dy(this.renderBound, this.strictBound) === !1
    )
      return;
    const { x: a, y: f, width: g, height: T } = this.props,
      { tx: S, ty: h } = this.sceneGlobalTransform || this.globalTransform || {},
      M = S != null ? S : a,
      P = h != null ? h : f;
    ((this.strictBound = Ca(M, P, M + g, P + T, this.strictBound)),
      (this.preloadBound = ev(this.strictBound, this.boundsMargin)));
  }
  updateRenderState(a) {
    if (a === this.renderState) return;
    const f = this.renderState;
    this.renderState = a;
    const g = Bl.get(a);
    this.emit(g, { previous: f, current: a });
  }
  updateIsRenderable() {
    let a = !1,
      f = !1;
    if (this.checkBasicRenderability() === !1) {
      (this.updateTextureOwnership(!1), this.setRenderable(!1));
      return;
    }
    if (this.texture !== null) {
      if (this.texture.retryCount > this.texture.maxRetryCount) {
        (this.updateTextureOwnership(!1), this.setRenderable(!1));
        return;
      }
      ((f = !0), (a = this.texture.state === "loaded"));
    } else
      (this.hasShader() || this.hasColorProperties() === !0) &&
        this.hasDimensions() === !0 &&
        this.stage.defaultTexture &&
        this.stage.defaultTexture.state === "loaded" &&
        (a = !0);
    (this.updateTextureOwnership(f), this.setRenderable(a));
  }
  checkBasicRenderability() {
    return !(this.worldAlpha === 0 || this.isOutOfBounds() === !0);
  }
  setRenderable(a) {
    this.isRenderable = a;
  }
  updateTextureOwnership(a) {
    var f;
    (f = this.texture) == null || f.setRenderableOwner(this._id, a);
  }
  isOutOfBounds() {
    return this.renderState <= Rn.OutOfBounds;
  }
  hasDimensions() {
    return this.props.width !== 0 && this.props.height !== 0;
  }
  hasColorProperties() {
    return (
      this.props.color !== 0 ||
      this.props.colorTop !== 0 ||
      this.props.colorBottom !== 0 ||
      this.props.colorLeft !== 0 ||
      this.props.colorRight !== 0 ||
      this.props.colorTl !== 0 ||
      this.props.colorTr !== 0 ||
      this.props.colorBl !== 0 ||
      this.props.colorBr !== 0
    );
  }
  hasShader() {
    return this.props.shader !== null;
  }
  calculateRenderCoords() {
    const { width: a, height: f } = this,
      { tx: g, ty: T, ta: S, tb: h, tc: M, td: P } = this.globalTransform;
    if (h === 0 && M === 0) {
      const ue = g,
        le = g + a * S,
        q = T,
        se = T + f * P;
      this.renderCoords = Ma.translate(ue, q, le, q, le, se, ue, se, this.renderCoords);
    } else
      this.renderCoords = Ma.translate(
        g,
        T,
        g + a * S,
        T + a * M,
        g + a * S + f * h,
        T + a * M + f * P,
        g + f * h,
        T + f * P,
        this.renderCoords,
      );
    if (this.sceneGlobalTransform === void 0) return;
    const { tx: N, ty: D, ta: V, tb: K, tc: J, td: Z } = this.sceneGlobalTransform;
    if (K === 0 && J === 0) {
      const ue = N,
        le = N + a * V,
        q = D,
        se = D + f * Z;
      this.sceneRenderCoords = Ma.translate(ue, q, le, q, le, se, ue, se, this.sceneRenderCoords);
    } else
      this.sceneRenderCoords = Ma.translate(
        N,
        D,
        N + a * V,
        D + a * J,
        N + a * V + f * K,
        D + a * J + f * Z,
        N + f * K,
        D + f * Z,
        this.sceneRenderCoords,
      );
  }
  calculateClippingRect(a) {
    this.globalTransform;
    const { clippingRect: f, props: g, globalTransform: T } = this,
      { clipping: S } = g,
      h = T.tb !== 0 || T.tc !== 0;
    (S === !0 && h === !1
      ? ((f.x = T.tx),
        (f.y = T.ty),
        (f.width = this.width * T.ta),
        (f.height = this.height * T.td),
        (f.valid = !0))
      : (f.valid = !1),
      a.valid === !0 && f.valid === !0 ? z2(a, f, f) : a.valid === !0 && (X2(a, f), (f.valid = !0)));
  }
  calculateZIndex() {
    var S, h;
    const a = this.props,
      f = a.zIndex || 0,
      g = ((S = a.parent) == null ? void 0 : S.zIndex) || 0;
    let T = f;
    ((h = a.parent) != null && h.zIndexLocked && (T = f < g ? f : g), (this.calcZIndex = T));
  }
  destroy() {
    var a;
    if (this.destroyed !== !0) {
      for (
        this.destroyed = !0,
          this.unloadTexture(),
          this.clippingRect.valid = !1,
          this.isRenderable = !1,
          this.renderCoords = void 0,
          this.renderBound = void 0,
          this.strictBound = void 0,
          this.preloadBound = void 0,
          this.globalTransform = void 0,
          this.scaleRotateTransform = void 0,
          this.localTransform = void 0,
          this.props.texture = null,
          this.props.shader = this.stage.defShaderCtr;
        this.children.length > 0;
      )
        (a = this.children[0]) == null || a.destroy();
      ((this.parent = null), this.rtt && this.stage.renderer.removeRTTNode(this), this.removeAllListeners());
    }
  }
  renderQuads(a) {
    (this.parentHasRenderTexture &&
      (!a.renderToTextureActive || this.parentRenderTexture !== a.activeRttNode)) ||
      (this.globalTransform,
      this.renderCoords,
      a.addQuad({
        width: this.props.width,
        height: this.props.height,
        colorTl: this.premultipliedColorTl,
        colorTr: this.premultipliedColorTr,
        colorBl: this.premultipliedColorBl,
        colorBr: this.premultipliedColorBr,
        texture: this.texture || this.stage.defaultTexture,
        textureOptions: this.textureOptions,
        zIndex: this.zIndex,
        shader: this.shader.shader,
        shaderProps: this.shader.getResolvedProps(),
        alpha: this.worldAlpha,
        clippingRect: this.clippingRect,
        tx: this.globalTransform.tx,
        ty: this.globalTransform.ty,
        ta: this.globalTransform.ta,
        tb: this.globalTransform.tb,
        tc: this.globalTransform.tc,
        td: this.globalTransform.td,
        renderCoords: this.renderCoords,
        rtt: this.rtt,
        parentHasRenderTexture: this.parentHasRenderTexture,
        framebufferDimensions: this.framebufferDimensions,
      }));
  }
  get id() {
    return this._id;
  }
  get data() {
    return this.props.data;
  }
  set data(a) {
    this.props.data = a;
  }
  get x() {
    return this.props.x;
  }
  set x(a) {
    this.props.x !== a && ((this.props.x = a), this.setUpdateType(he.Local));
  }
  get absX() {
    var a, f, g;
    return (
      this.props.x +
      -this.props.width * this.props.mountX +
      (((a = this.props.parent) == null ? void 0 : a.absX) ||
        ((g = (f = this.props.parent) == null ? void 0 : f.globalTransform) == null ? void 0 : g.tx) ||
        0)
    );
  }
  get absY() {
    var a, f;
    return (
      this.props.y +
      -this.props.height * this.props.mountY +
      ((f = (a = this.props.parent) == null ? void 0 : a.absY) != null ? f : 0)
    );
  }
  get y() {
    return this.props.y;
  }
  set y(a) {
    this.props.y !== a && ((this.props.y = a), this.setUpdateType(he.Local));
  }
  get width() {
    return this.props.width;
  }
  set width(a) {
    this.props.width !== a &&
      ((this.props.width = a),
      this.setUpdateType(he.Local),
      this.props.rtt &&
        ((this.texture = this.stage.txManager.createTexture("RenderTexture", {
          width: this.width,
          height: this.height,
        })),
        this.setUpdateType(he.RenderTexture)));
  }
  get height() {
    return this.props.height;
  }
  set height(a) {
    this.props.height !== a &&
      ((this.props.height = a),
      this.setUpdateType(he.Local),
      this.props.rtt &&
        ((this.texture = this.stage.txManager.createTexture("RenderTexture", {
          width: this.width,
          height: this.height,
        })),
        this.setUpdateType(he.RenderTexture)));
  }
  get scale() {
    return this.scaleX;
  }
  set scale(a) {
    ((this.scaleX = a), (this.scaleY = a));
  }
  get scaleX() {
    return this.props.scaleX;
  }
  set scaleX(a) {
    this.props.scaleX !== a && ((this.props.scaleX = a), this.setUpdateType(he.ScaleRotate));
  }
  get scaleY() {
    return this.props.scaleY;
  }
  set scaleY(a) {
    this.props.scaleY !== a && ((this.props.scaleY = a), this.setUpdateType(he.ScaleRotate));
  }
  get mount() {
    return this.props.mount;
  }
  set mount(a) {
    (this.props.mountX !== a || this.props.mountY !== a) &&
      ((this.props.mountX = a),
      (this.props.mountY = a),
      (this.props.mount = a),
      this.setUpdateType(he.Local));
  }
  get mountX() {
    return this.props.mountX;
  }
  set mountX(a) {
    this.props.mountX !== a && ((this.props.mountX = a), this.setUpdateType(he.Local));
  }
  get mountY() {
    return this.props.mountY;
  }
  set mountY(a) {
    this.props.mountY !== a && ((this.props.mountY = a), this.setUpdateType(he.Local));
  }
  get pivot() {
    return this.props.pivot;
  }
  set pivot(a) {
    (this.props.pivotX !== a || this.props.pivotY !== a) &&
      ((this.props.pivotX = a),
      (this.props.pivotY = a),
      (this.props.pivot = a),
      this.setUpdateType(he.Local));
  }
  get pivotX() {
    return this.props.pivotX;
  }
  set pivotX(a) {
    this.props.pivotX !== a && ((this.props.pivotX = a), this.setUpdateType(he.Local));
  }
  get pivotY() {
    return this.props.pivotY;
  }
  set pivotY(a) {
    this.props.pivotY !== a && ((this.props.pivotY = a), this.setUpdateType(he.Local));
  }
  get rotation() {
    return this.props.rotation;
  }
  set rotation(a) {
    this.props.rotation !== a && ((this.props.rotation = a), this.setUpdateType(he.ScaleRotate));
  }
  get alpha() {
    return this.props.alpha;
  }
  set alpha(a) {
    ((this.props.alpha = a),
      this.setUpdateType(he.PremultipliedColors | he.WorldAlpha | he.Children | he.IsRenderable),
      (this.childUpdateType |= he.WorldAlpha));
  }
  get autosize() {
    return this.props.autosize;
  }
  set autosize(a) {
    this.props.autosize = a;
  }
  get boundsMargin() {
    var a, f, g;
    return (g =
      (f = this.props.boundsMargin) != null ? f : (a = this.parent) == null ? void 0 : a.boundsMargin) != null
      ? g
      : this.stage.boundsMargin;
  }
  set boundsMargin(a) {
    if (a !== this.props.boundsMargin) {
      if (a === null) this.props.boundsMargin = a;
      else {
        const f = Array.isArray(a) ? a : [a, a, a, a];
        this.props.boundsMargin = f;
      }
      this.setUpdateType(he.RenderBounds);
    }
  }
  get clipping() {
    return this.props.clipping;
  }
  set clipping(a) {
    ((this.props.clipping = a),
      this.setUpdateType(he.Clipping | he.RenderBounds | he.Children),
      (this.childUpdateType |= he.Global | he.Clipping));
  }
  get color() {
    return this.props.color;
  }
  set color(a) {
    ((this.colorTop = a),
      (this.colorBottom = a),
      (this.colorLeft = a),
      (this.colorRight = a),
      (this.props.color = a),
      this.setUpdateType(he.PremultipliedColors));
  }
  get colorTop() {
    return this.props.colorTop;
  }
  set colorTop(a) {
    ((this.props.colorTl !== a || this.props.colorTr !== a) && ((this.colorTl = a), (this.colorTr = a)),
      (this.props.colorTop = a),
      this.setUpdateType(he.PremultipliedColors));
  }
  get colorBottom() {
    return this.props.colorBottom;
  }
  set colorBottom(a) {
    ((this.props.colorBl !== a || this.props.colorBr !== a) && ((this.colorBl = a), (this.colorBr = a)),
      (this.props.colorBottom = a),
      this.setUpdateType(he.PremultipliedColors));
  }
  get colorLeft() {
    return this.props.colorLeft;
  }
  set colorLeft(a) {
    ((this.props.colorTl !== a || this.props.colorBl !== a) && ((this.colorTl = a), (this.colorBl = a)),
      (this.props.colorLeft = a),
      this.setUpdateType(he.PremultipliedColors));
  }
  get colorRight() {
    return this.props.colorRight;
  }
  set colorRight(a) {
    ((this.props.colorTr !== a || this.props.colorBr !== a) && ((this.colorTr = a), (this.colorBr = a)),
      (this.props.colorRight = a),
      this.setUpdateType(he.PremultipliedColors));
  }
  get colorTl() {
    return this.props.colorTl;
  }
  set colorTl(a) {
    ((this.props.colorTl = a), this.setUpdateType(he.PremultipliedColors));
  }
  get colorTr() {
    return this.props.colorTr;
  }
  set colorTr(a) {
    ((this.props.colorTr = a), this.setUpdateType(he.PremultipliedColors));
  }
  get colorBl() {
    return this.props.colorBl;
  }
  set colorBl(a) {
    ((this.props.colorBl = a), this.setUpdateType(he.PremultipliedColors));
  }
  get colorBr() {
    return this.props.colorBr;
  }
  set colorBr(a) {
    ((this.props.colorBr = a), this.setUpdateType(he.PremultipliedColors));
  }
  get zIndexLocked() {
    return this.props.zIndexLocked || 0;
  }
  set zIndexLocked(a) {
    ((this.props.zIndexLocked = a), this.setUpdateType(he.CalculatedZIndex | he.Children));
    for (let f = 0, g = this.children.length; f < g; f++) this.children[f].setUpdateType(he.CalculatedZIndex);
  }
  get zIndex() {
    return this.props.zIndex;
  }
  set zIndex(a) {
    ((this.props.zIndex = a), this.setUpdateType(he.CalculatedZIndex | he.Children));
    for (let f = 0, g = this.children.length; f < g; f++) this.children[f].setUpdateType(he.CalculatedZIndex);
  }
  get parent() {
    return this.props.parent;
  }
  set parent(a) {
    const f = this.props.parent;
    if (f !== a) {
      if (((this.props.parent = a), f)) {
        const g = f.children.indexOf(this);
        (f.children.splice(g, 1), f.setUpdateType(he.Children | he.ZIndexSortedChildren));
      }
      (a &&
        (a.children.push(this),
        this.setUpdateType(he.All),
        a.setUpdateType(he.Children | he.ZIndexSortedChildren),
        (a.rtt || a.parentHasRenderTexture) && this.applyRTTInheritance(a)),
        this.updateScaleRotateTransform(),
        this.setUpdateType(he.RenderBounds | he.Children));
    }
  }
  get preventCleanup() {
    return this.props.textureOptions.preventCleanup || !1;
  }
  set preventCleanup(a) {
    this.props.textureOptions.preventCleanup = a;
  }
  get rtt() {
    return this.props.rtt;
  }
  set rtt(a) {
    this.props.rtt !== a &&
      ((this.props.rtt = a),
      a === !0 ? (this.initRenderTexture(), this.markChildrenWithRTT()) : this.cleanupRenderTexture(),
      this.setUpdateType(he.RenderTexture),
      this.parentHasRenderTexture === !0 && this.notifyParentRTTOfUpdate());
  }
  initRenderTexture() {
    ((this.texture = this.stage.txManager.createTexture("RenderTexture", {
      width: this.width,
      height: this.height,
    })),
      this.stage.renderer.renderToTexture(this));
  }
  cleanupRenderTexture() {
    (this.unloadTexture(), this.clearRTTInheritance(), (this.hasRTTupdates = !1), (this.texture = null));
  }
  markChildrenWithRTT(a = null) {
    const f = a || this;
    for (const g of f.children)
      (g.setUpdateType(he.All), (g.parentHasRenderTexture = !0), g.markChildrenWithRTT());
  }
  applyRTTInheritance(a) {
    (a.rtt && a.setUpdateType(he.RenderTexture), this.markChildrenWithRTT(a));
  }
  clearRTTInheritance() {
    if (!this.rtt)
      for (const a of this.children)
        ((a.parentHasRenderTexture = !1),
          (a.rttParent = null),
          a.setUpdateType(he.All),
          a.clearRTTInheritance());
  }
  get shader() {
    return this.props.shader;
  }
  set shader(a) {
    this.props.shader !== a && ((this.props.shader = a), this.setUpdateType(he.IsRenderable));
  }
  get src() {
    return this.props.src;
  }
  set src(a) {
    if (this.props.src !== a) {
      if (((this.props.src = a), !a)) {
        this.texture = null;
        return;
      }
      this.texture = this.stage.txManager.createTexture("ImageTexture", {
        src: a,
        width: this.props.width,
        height: this.props.height,
        type: this.props.imageType,
        sx: this.props.srcX,
        sy: this.props.srcY,
        sw: this.props.srcWidth,
        sh: this.props.srcHeight,
        maxRetryCount: this.props.textureOptions.maxRetryCount,
      });
    }
  }
  set imageType(a) {
    this.props.imageType !== a && (this.props.imageType = a);
  }
  get imageType() {
    return this.props.imageType || null;
  }
  get srcHeight() {
    return this.props.srcHeight;
  }
  set srcHeight(a) {
    this.props.srcHeight = a;
  }
  get srcWidth() {
    return this.props.srcWidth;
  }
  set srcWidth(a) {
    this.props.srcWidth = a;
  }
  get srcX() {
    return this.props.srcX;
  }
  set srcX(a) {
    this.props.srcX = a;
  }
  get srcY() {
    return this.props.srcY;
  }
  set srcY(a) {
    this.props.srcY = a;
  }
  get framebufferDimensions() {
    return this.parentHasRenderTexture && !this.rtt && this.parent
      ? this.parent.framebufferDimensions
      : { width: this.width, height: this.height };
  }
  get parentRenderTexture() {
    let a = this.parent;
    for (; a; ) {
      if (a.rtt) return a;
      a = a.parent;
    }
    return null;
  }
  get texture() {
    return this.props.texture;
  }
  set texture(a) {
    if (this.props.texture === a) return;
    (this.props.texture && this.unloadTexture(),
      (this.props.texture = a),
      a !== null && (a.setRenderableOwner(this._id, this.isRenderable), this.loadTexture()),
      this.setUpdateType(he.IsRenderable));
  }
  set textureOptions(a) {
    this.props.textureOptions = a;
  }
  get textureOptions() {
    return this.props.textureOptions;
  }
  get strictBounds() {
    return this.props.strictBounds;
  }
  set strictBounds(a) {
    a !== this.props.strictBounds &&
      ((this.props.strictBounds = a),
      this.setUpdateType(he.RenderBounds | he.Children),
      (this.childUpdateType |= he.RenderBounds | he.Children));
  }
  set interactive(a) {
    ((this.props.interactive = a), a === !0 && this.stage.interactiveNodes.add(this));
  }
  get interactive() {
    return this.props.interactive;
  }
  animate(a, f) {
    const g = new Ib(this, a, f);
    return new Cb(this.stage.animationManager, g);
  }
  flush() {}
}
const Mb = d => {
    let c = !1,
      a = 0;
    const f = (g = 0) => {
      const T = d.targetFrameTime;
      if (T > 0 && g - a < T) {
        const S = T - (g - a);
        setTimeout(() => requestAnimationFrame(f), S);
        return;
      }
      if (((a = g), d.updateFrameTime(), d.updateAnimations(), !d.hasSceneUpdates())) {
        (d.calculateFps(),
          T > 0
            ? setTimeout(() => requestAnimationFrame(f), Math.max(T, 16.666666666666668))
            : setTimeout(() => requestAnimationFrame(f), 16.666666666666668),
          c || (d.eventBus.emit("idle"), (c = !0)),
          d.txMemManager.checkCleanup() === !0 && d.txMemManager.cleanup(),
          d.flushFrameEvents());
        return;
      }
      if (((c = !1), d.drawFrame(), d.flushFrameEvents(), T > 0)) {
        const S = Math.max(0, T - (performance.now() - g));
        setTimeout(() => requestAnimationFrame(f), S);
      } else requestAnimationFrame(f);
    };
    requestAnimationFrame(f);
  },
  eh = () => (performance ? performance.now() : Date.now());
class Rb {
  constructor() {
    _(this, "activeAnimations", new Set());
  }
  registerAnimation(c) {
    this.activeAnimations.add(c);
  }
  unregisterAnimation(c) {
    this.activeAnimations.delete(c);
  }
  update(c) {
    this.activeAnimations.forEach(a => {
      a.update(c);
    });
  }
}
function kb() {
  function d(a) {
    return a.indexOf("image/png") !== -1;
  }
  function c(a, f, g, T, S, h, M) {
    return new Promise(function (P, N) {
      var D = new XMLHttpRequest();
      (D.open("GET", a, !0),
        (D.responseType = "blob"),
        (D.onload = function () {
          if (D.status !== 200 && D.status !== 0)
            return N(new Error("Failed to load image: " + D.statusText));
          var V = D.response;
          (f !== void 0 || d(V.type),
            createImageBitmap(V)
              .then(function (K) {
                P({ data: K, premultiplyAlpha: f });
              })
              .catch(function (K) {
                N(K);
              }));
        }),
        (D.onerror = function () {
          N(new Error("Network error occurred while trying to fetch the image."));
        }),
        D.send());
    });
  }
  self.onmessage = a => {
    var f = a.data.src,
      g = a.data.id,
      T = a.data.premultiplyAlpha;
    (a.data.sx,
      a.data.sy,
      a.data.sw,
      a.data.sh,
      c(f, T)
        .then(function (S) {
          self.postMessage({ id: g, src: f, data: S }, [S.data]);
        })
        .catch(function (S) {
          self.postMessage({ id: g, src: f, error: S.message });
        }));
  };
}
class _b {
  constructor(c, a) {
    _(this, "imageWorkersEnabled", !0);
    _(this, "messageManager", {});
    _(this, "workers", []);
    _(this, "workerIndex", 0);
    _(this, "nextId", 0);
    ((this.workers = this.createWorkers(c, a)),
      this.workers.forEach(f => {
        f.onmessage = this.handleMessage.bind(this);
      }));
  }
  handleMessage(c) {
    const { id: a, data: f, error: g } = c.data,
      T = this.messageManager[a];
    if (T) {
      const [S, h] = T;
      (delete this.messageManager[a], g ? h(new Error(g)) : S(f));
    }
  }
  createWorkers(c = 1, a) {
    let f = "(".concat(kb.toString(), ")()");
    (a.options === !0 &&
      (f = f.replace(
        "var supportsOptionsCreateImageBitmap = false;",
        "var supportsOptionsCreateImageBitmap = true;",
      )),
      a.full === !0 &&
        ((f = f.replace(
          "var supportsOptionsCreateImageBitmap = false;",
          "var supportsOptionsCreateImageBitmap = true;",
        )),
        (f = f.replace(
          "var supportsFullCreateImageBitmap = false;",
          "var supportsFullCreateImageBitmap = true;",
        ))),
      (f = f.replace('"use strict";', "")));
    const g = new Blob([f], { type: "application/javascript" }),
      T = (self.URL ? URL : webkitURL).createObjectURL(g),
      S = [];
    for (let h = 0; h < c; h++) S.push(new Worker(T));
    return S;
  }
  getNextWorker() {
    const c = this.workers[this.workerIndex];
    return ((this.workerIndex = (this.workerIndex + 1) % this.workers.length), c);
  }
  getImage(c, a, f, g, T, S) {
    return new Promise((h, M) => {
      try {
        if (this.workers) {
          const P = this.nextId++;
          this.messageManager[P] = [h, M];
          const N = this.getNextWorker();
          N && N.postMessage({ id: P, src: c, premultiplyAlpha: a, sx: f, sy: g, sw: T, sh: S });
        }
      } catch (P) {
        M(P);
      }
    });
  }
}
const Ml = class Ml extends ro {
  constructor(a, f) {
    super(a);
    _(this, "type", $n.color);
    _(this, "props");
    this.props = Ml.resolveDefaults(f);
  }
  get color() {
    return this.props.color;
  }
  set color(a) {
    this.props.color = a;
  }
  async getTextureSource() {
    const a = new Uint8Array(4);
    return (
      this.color === 4294967295
        ? ((a[0] = 255), (a[1] = 255), (a[2] = 255), (a[3] = 255))
        : ((a[0] = (this.color >> 16) & 255),
          (a[1] = (this.color >> 8) & 255),
          (a[2] = this.color & 255),
          (a[3] = (this.color >>> 24) & 255)),
      { data: a, premultiplyAlpha: !0 }
    );
  }
  static makeCacheKey(a) {
    const f = Ml.resolveDefaults(a);
    return "ColorTexture,".concat(f.color);
  }
  static resolveDefaults(a) {
    return { color: a.color || 4294967295 };
  }
};
_(Ml, "z$__type__Props");
let oh = Ml;
function Pb(d) {
  return /\.(ktx|pvr)$/.test(d);
}
const Db = 55727696,
  Lb = {
    0: 35841,
    1: 35843,
    2: 35840,
    3: 35842,
    6: 36196,
    7: 33776,
    8: 33778,
    9: 33778,
    10: 33779,
    11: 33779,
  },
  bb = 1554098963,
  Nb = { "4x4": 37808, "5x5": 37809, "6x6": 37810, "8x8": 37811, "10x10": 37812, "12x12": 37813 },
  XE = [171, 75, 84, 88, 32, 49, 49, 187, 13, 10, 26, 10],
  WE = async d => {
    try {
      const c = await fetch(d);
      if (!c.ok)
        throw new Error("Failed to fetch compressed texture: ".concat(c.status, " ").concat(c.statusText));
      const a = await c.arrayBuffer();
      if (a.byteLength < 16)
        throw new Error(
          "File too small to be a valid compressed texture (".concat(
            a.byteLength,
            " bytes). Expected at least 16 bytes for header inspection.",
          ),
        );
      const f = new DataView(a),
        g = f.getUint32(0, !0);
      if (g === Db) return Vb(f);
      if (g === bb) return Ob(f);
      let T = !0;
      for (let S = 0; S < XE.length; S++)
        if (f.getUint8(S) !== XE[S]) {
          T = !1;
          break;
        }
      if (T === !0) return Fb(f);
      throw new Error("Unrecognized compressed texture format");
    } catch (c) {
      throw new Error("Failed to load compressed texture from ".concat(d, ": ").concat(c));
    }
  };
function KE(d, c) {
  return d.getUint8(c) + (d.getUint8(c + 1) << 8) + (d.getUint8(c + 2) << 16);
}
const Ob = async function (d) {
    const c = d.getUint8(4),
      a = d.getUint8(5),
      f = KE(d, 7),
      g = KE(d, 10);
    if (f === 0 || g === 0) throw new Error("Invalid ASTC texture dimensions: ".concat(f, "x").concat(g));
    const T = Math.ceil(f / c) * Math.ceil(g / a) * 16,
      S = d.byteLength - 16;
    if (T !== S) throw new Error("Invalid ASTC texture data size: expected ".concat(T, ", got ").concat(S));
    const h = Nb["".concat(c, "x").concat(a)];
    if (h === void 0) throw new Error("Unsupported ASTC block size: ".concat(c, "x").concat(a));
    const M = d.buffer,
      P = [];
    return (
      P.push(M.slice(16)),
      {
        data: { blockInfo: Pl[h], glInternalFormat: h, mipmaps: P, width: f, height: g, type: "astc" },
        premultiplyAlpha: !1,
      }
    );
  },
  Ub = function (d, c, a) {
    if (d.getExtension("WEBGL_compressed_texture_astc") === null)
      throw new Error("ASTC compressed textures not supported by this device");
    d.bindTexture(c);
    const { glInternalFormat: f, mipmaps: g, width: T, height: S } = a,
      h = new Uint8Array(g[0]);
    (d.compressedTexImage2D(0, f, T, S, 0, h),
      d.texParameteri(d.TEXTURE_WRAP_S, d.CLAMP_TO_EDGE),
      d.texParameteri(d.TEXTURE_WRAP_T, d.CLAMP_TO_EDGE),
      d.texParameteri(d.TEXTURE_MAG_FILTER, d.LINEAR),
      d.texParameteri(d.TEXTURE_MIN_FILTER, d.LINEAR));
  },
  Fb = async function (d) {
    const c = d.getUint32(12, !0),
      a = c === 67305985;
    if (a === !1 && c !== 16909060) throw new Error("Invalid KTX endianness value");
    const f = d.getUint32(16, a),
      g = d.getUint32(24, a);
    if (f !== 0 || g !== 0)
      throw new Error("KTX texture is not compressed (glType: ".concat(f, ", glFormat: ").concat(g, ")"));
    const T = d.getUint32(28, a);
    if (Pl[T] === void 0)
      throw new Error("Unsupported KTX compressed texture format: 0x".concat(T.toString(16)));
    const S = d.getUint32(36, a),
      h = d.getUint32(40, a);
    if (S === 0 || h === 0) throw new Error("Invalid KTX texture dimensions: ".concat(S, "x").concat(h));
    const M = d.getUint32(56, a);
    if (M === 0) throw new Error("KTX texture has no mipmap levels");
    const P = d.getUint32(60, a),
      N = [],
      D = d.buffer;
    let V = 64 + P;
    if (V > d.byteLength) throw new Error("Invalid KTX file: key/value data exceeds file size");
    for (let K = 0; K < M; K++) {
      const J = d.getUint32(V, a);
      V += 4;
      const Z = V + J;
      (N.push(D.slice(V, Z)), (V = Z), V % 4 !== 0 && (V += 4 - (V % 4)));
    }
    return {
      data: { blockInfo: Pl[T], glInternalFormat: T, mipmaps: N, width: S, height: h, type: "ktx" },
      premultiplyAlpha: !1,
    };
  },
  Bb = function (d, c, a) {
    const { glInternalFormat: f, mipmaps: g, width: T, height: S, blockInfo: h } = a;
    d.bindTexture(c);
    const M = h.width,
      P = h.height;
    let N = T,
      D = S;
    for (let V = 0; V < g.length; V++) {
      let K = new Uint8Array(g[V]);
      const J = Math.ceil(N / M) * M,
        Z = Math.ceil(D / P) * P,
        ue = Math.ceil(N / M) * Math.ceil(D / P) * h.bytes;
      if (K.byteLength < ue) {
        const le = new Uint8Array(ue);
        (le.set(K), (K = le));
      }
      (d.compressedTexImage2D(V, f, J, Z, 0, K), (N = Math.max(1, N >> 1)), (D = Math.max(1, D >> 1)));
    }
    (d.texParameteri(d.TEXTURE_WRAP_S, d.CLAMP_TO_EDGE),
      d.texParameteri(d.TEXTURE_WRAP_T, d.CLAMP_TO_EDGE),
      d.texParameteri(d.TEXTURE_MAG_FILTER, d.LINEAR),
      d.texParameteri(d.TEXTURE_MIN_FILTER, g.length > 1 ? d.LINEAR_MIPMAP_LINEAR : d.LINEAR));
  };
function jb(d, c, a) {
  const f = a === 2 ? 16 : 8,
    g = 8,
    T = Math.max(d, f),
    S = Math.max(c, g);
  return (T * S * a) / 8;
}
const Vb = async function (d) {
    const c = d.getUint32(8, !0),
      a = Lb[c];
    if (a === void 0) throw new Error("Unsupported PVR pixel format: 0x".concat(c.toString(16)));
    const f = d.getInt32(24, !0),
      g = d.getInt32(28, !0);
    if (g === 0 || f === 0) throw new Error("Invalid PVR texture dimensions: ".concat(g, "x").concat(f));
    const T = d.getInt32(44, !0),
      S = d.getUint32(48, !0),
      h = d.buffer;
    let M = 52 + S;
    if (M > h.byteLength) throw new Error("Invalid PVR file: metadata exceeds file size");
    const P = [],
      N = Pl[a];
    for (let D = 0; D < T; D++) {
      const V = d.getUint32(M, !0),
        K = h.byteLength - (M + 4);
      if (V > 0 && V <= K) {
        M += 4;
        const J = M,
          Z = M + V;
        (P.push(h.slice(J, Z)), (M = Z), (M = (M + 3) & -4));
        continue;
      }
      if (c === 0 || c === 1 || c === 2 || c === 3) {
        const J = c === 0 || c === 1 ? 2 : 4,
          Z = jb(g >> D, f >> D, J);
        (P.push(h.slice(M, M + Z)), (M += Z), (M = (M + 3) & -4));
        continue;
      }
      if (N !== void 0) {
        const J = Math.ceil((g >> D) / N.width),
          Z = Math.ceil((f >> D) / N.height),
          ue = J * Z * N.bytes;
        (P.push(h.slice(M, M + ue)), (M += ue), (M = (M + 3) & -4));
      }
    }
    return {
      data: { blockInfo: Pl[a], glInternalFormat: a, mipmaps: P, width: g, height: f, type: "pvr" },
      premultiplyAlpha: !1,
    };
  },
  Hb = function (d, c, a) {
    const { glInternalFormat: f, mipmaps: g, width: T, height: S } = a;
    d.bindTexture(c);
    let h = T,
      M = S;
    for (let P = 0; P < g.length; P++)
      (d.compressedTexImage2D(P, f, h, M, 0, new Uint8Array(g[P])),
        (h = Math.max(1, h >> 1)),
        (M = Math.max(1, M >> 1)));
    (d.texParameteri(d.TEXTURE_WRAP_S, d.CLAMP_TO_EDGE),
      d.texParameteri(d.TEXTURE_WRAP_T, d.CLAMP_TO_EDGE),
      d.texParameteri(d.TEXTURE_MAG_FILTER, d.LINEAR),
      d.texParameteri(d.TEXTURE_MIN_FILTER, g.length > 1 ? d.LINEAR_MIPMAP_LINEAR : d.LINEAR));
  },
  eo = { width: 4, height: 4, bytes: 8 },
  ga = { width: 4, height: 4, bytes: 16 },
  $E = { width: 5, height: 5, bytes: 16 },
  YE = { width: 6, height: 6, bytes: 16 },
  qE = { width: 8, height: 4, bytes: 8 },
  JE = { width: 8, height: 8, bytes: 16 },
  QE = { width: 10, height: 10, bytes: 16 },
  ZE = { width: 12, height: 12, bytes: 16 },
  Pl = {
    33776: eo,
    33777: eo,
    33778: ga,
    33779: ga,
    36196: eo,
    37492: eo,
    37493: eo,
    37496: ga,
    37497: ga,
    35840: eo,
    35842: eo,
    35841: qE,
    35843: qE,
    37808: ga,
    37840: ga,
    37809: $E,
    37841: $E,
    37810: YE,
    37842: YE,
    37811: JE,
    37843: JE,
    37812: QE,
    37844: QE,
    37813: ZE,
    37845: ZE,
  },
  Gb = { ktx: Bb, pvr: Hb, astc: Ub };
function zb(d) {
  return /\.(svg)(\?.*)?$/.test(d);
}
const e2 = (d, c, a, f, g, T, S) =>
  new Promise((h, M) => {
    const P = document.createElement("canvas"),
      N = P.getContext("2d");
    N.imageSmoothingEnabled = !0;
    const D = new Image();
    ((D.onload = () => {
      const V = f != null ? f : 0,
        K = g != null ? g : 0,
        J = c || D.width,
        Z = a || D.height;
      ((P.width = J),
        (P.height = Z),
        N.drawImage(D, 0, 0, J, Z),
        h({ data: N.getImageData(V, K, T != null ? T : J, S != null ? S : Z), premultiplyAlpha: !1 }));
    }),
      (D.onerror = V => {
        M(V);
      }),
      (D.src = d));
  });
function $2(d, c = "") {
  return new Promise((a, f) => {
    const g = new XMLHttpRequest();
    ((g.responseType = c),
      (g.onreadystatechange = function () {
        g.readyState == XMLHttpRequest.DONE &&
          (g.status === 0 || g.status === 200 ? a(g.response) : f(g.statusText));
      }),
      g.open("GET", d, !0),
      g.send(null));
  });
}
const Rl = class Rl extends ro {
  constructor(a, f) {
    var T;
    const g = Rl.resolveDefaults(f);
    super(a);
    _(this, "type", $n.image);
    _(this, "props");
    ((this.props = g),
      (this.maxRetryCount = (T = g.maxRetryCount) != null ? T : this.txManager.maxRetryCount));
  }
  hasAlphaChannel(a) {
    return a.indexOf("image/png") !== -1;
  }
  async loadImageFallback(a, f) {
    const g = new Image();
    return (
      typeof a == "string" && Ly(a) === !1 && (g.crossOrigin = "anonymous"),
      new Promise((T, S) => {
        ((g.onload = () => {
          T({ data: g, premultiplyAlpha: f });
        }),
          (g.onerror = h => {
            const M =
              h instanceof Error
                ? h.message
                : h instanceof Event
                  ? "Image loading failed for ".concat(g.src)
                  : "Unknown image loading error";
            S(new Error("Image loading failed: ".concat(M)));
          }),
          a instanceof Blob ? (g.src = URL.createObjectURL(a)) : (g.src = a));
      })
    );
  }
  async createImageBitmap(a, f, g, T, S, h) {
    const M = f != null ? f : a.type.includes("image/png"),
      P = this.txManager.imageBitmapSupported;
    if (P.full === !0 && S !== null && h !== null)
      try {
        return {
          data: await createImageBitmap(a, g || 0, T || 0, S, h, {
            premultiplyAlpha: M ? "premultiply" : "none",
            colorSpaceConversion: "none",
            imageOrientation: "none",
          }),
          premultiplyAlpha: M,
        };
      } catch (N) {
        throw new Error("Failed to create image bitmap with crop: ".concat(N));
      }
    else if (P.basic === !0)
      try {
        return { data: await createImageBitmap(a), premultiplyAlpha: M };
      } catch (N) {
        throw new Error("Failed to create basic image bitmap: ".concat(N));
      }
    try {
      return {
        data: await createImageBitmap(a, {
          premultiplyAlpha: M ? "premultiply" : "none",
          colorSpaceConversion: "none",
          imageOrientation: "none",
        }),
        premultiplyAlpha: M,
      };
    } catch (N) {
      throw new Error("Failed to create image bitmap with options: ".concat(N));
    }
  }
  async loadImage(a) {
    const { premultiplyAlpha: f, sx: g, sy: T, sw: S, sh: h } = this.props;
    if (this.txManager.hasCreateImageBitmap === !0) {
      if (Ly(a) === !1 && this.txManager.hasWorker === !0 && this.txManager.imageWorkerManager !== null)
        try {
          return this.txManager.imageWorkerManager.getImage(a, f, g, T, S, h);
        } catch (P) {
          throw new Error("Failed to load image via worker: ".concat(P));
        }
      let M;
      if (Ly(a) === !0) M = wb(a);
      else
        try {
          M = await $2(a, "blob");
        } catch (P) {
          throw new Error("Failed to fetch image blob from ".concat(a, ": ").concat(P));
        }
      return this.createImageBitmap(M, f, g, T, S, h);
    }
    return this.loadImageFallback(a, f != null ? f : !0);
  }
  async getTextureSource() {
    var f;
    let a;
    try {
      a = await this.determineImageTypeAndLoadImage();
    } catch (g) {
      return (this.setState("failed", g), { data: null });
    }
    return a.data === null
      ? (this.setState("failed", Error("ImageTexture: No image data")), { data: null })
      : { data: a.data, premultiplyAlpha: (f = this.props.premultiplyAlpha) != null ? f : !0 };
  }
  determineImageTypeAndLoadImage() {
    const { src: a, premultiplyAlpha: f, type: g } = this.props;
    if (a === null) return { data: null };
    if (typeof a != "string") {
      if (a instanceof Blob)
        if (this.txManager.hasCreateImageBitmap === !0) {
          const { sx: S, sy: h, sw: M, sh: P } = this.props;
          return this.createImageBitmap(a, f, S, h, M, P);
        } else return this.loadImageFallback(a, f != null ? f : !0);
      return a instanceof ImageData ? { data: a, premultiplyAlpha: f } : { data: a(), premultiplyAlpha: f };
    }
    const T = Tb(a);
    return g === "regular"
      ? this.loadImage(T)
      : g === "svg"
        ? e2(
            T,
            this.props.width,
            this.props.height,
            this.props.sx,
            this.props.sy,
            this.props.sw,
            this.props.sh,
          )
        : zb(a) === !0
          ? e2(
              T,
              this.props.width,
              this.props.height,
              this.props.sx,
              this.props.sy,
              this.props.sw,
              this.props.sh,
            )
          : g === "compressed" || Pb(a) === !0
            ? WE(T)
            : this.loadImage(T);
  }
  static makeCacheKey(a) {
    var S, h, M;
    const f = Rl.resolveDefaults(a),
      g = f.key || f.src;
    if (typeof g != "string") return !1;
    let T = "";
    return (
      f.sh !== null &&
        f.sw !== null &&
        ((T += ","),
        (T += (S = f.sx) != null ? S : ""),
        (T += (h = f.sy) != null ? h : ""),
        (T += f.sw || ""),
        (T += f.sh || "")),
      "ImageTexture,"
        .concat(g, ",")
        .concat((M = f.premultiplyAlpha) != null ? M : "true")
        .concat(T)
    );
  }
  static resolveDefaults(a) {
    var f, g, T, S, h, M, P, N, D, V, K;
    return {
      src: (f = a.src) != null ? f : "",
      premultiplyAlpha: (g = a.premultiplyAlpha) != null ? g : !0,
      key: (T = a.key) != null ? T : null,
      type: (S = a.type) != null ? S : null,
      width: (h = a.width) != null ? h : null,
      height: (M = a.height) != null ? M : null,
      sx: (P = a.sx) != null ? P : null,
      sy: (N = a.sy) != null ? N : null,
      sw: (D = a.sw) != null ? D : null,
      sh: (V = a.sh) != null ? V : null,
      maxRetryCount: (K = a.maxRetryCount) != null ? K : null,
    };
  }
};
_(Rl, "z$__type__Props");
let Dl = Rl;
const kl = class kl extends ro {
  constructor(a, f) {
    super(a);
    _(this, "props");
    _(this, "type", $n.noise);
    this.props = kl.resolveDefaults(f);
  }
  async getTextureSource() {
    const { width: a, height: f } = this.props,
      g = a * f * 4,
      T = new Uint8ClampedArray(g);
    for (let S = 0; S < g; S += 4) {
      const h = Math.floor(Math.random() * 256);
      ((T[S] = h), (T[S + 1] = h), (T[S + 2] = h), (T[S + 3] = 255));
    }
    return { data: new ImageData(T, a, f) };
  }
  static makeCacheKey(a) {
    if (a.cacheId === void 0) return !1;
    const f = kl.resolveDefaults(a);
    return "NoiseTexture,".concat(f.width, ",").concat(f.height, ",").concat(f.cacheId);
  }
  static resolveDefaults(a) {
    var f, g, T;
    return {
      width: (f = a.width) != null ? f : 128,
      height: (g = a.height) != null ? g : 128,
      cacheId: (T = a.cacheId) != null ? T : 0,
    };
  }
};
_(kl, "z$__type__Props");
let nv = kl,
  Xb = 0;
const Eh = class Eh extends ro {
  constructor(a, f) {
    super(a);
    _(this, "props");
    _(this, "parentTexture");
    _(this, "type", $n.subTexture);
    _(this, "subtextureId", "subtexture-".concat(Xb++));
    _(this, "onParentTxLoaded", () => {
      this.forwardParentTxState("loaded", { width: this.props.width, height: this.props.height });
    });
    _(this, "onParentTxFailed", (a, f) => {
      ((this.retryCount = this.parentTexture.retryCount - 1), this.forwardParentTxState("failed", f));
    });
    _(this, "onParentTxLoading", () => {
      this.forwardParentTxState("loading");
    });
    _(this, "onParentTxFreed", () => {
      this.forwardParentTxState("freed");
    });
    ((this.props = Eh.resolveDefaults(f || {})),
      this.props.texture,
      this.props.texture instanceof Dl,
      (this.parentTexture = a.resolveParentTexture(this.props.texture)),
      this.renderableOwners.length > 0 && this.parentTexture.setRenderableOwner(this.subtextureId, !0),
      queueMicrotask(() => {
        const g = this.parentTexture;
        (g.state === "loaded" && g.dimensions
          ? this.onParentTxLoaded(g, g.dimensions)
          : g.state === "loading"
            ? this.onParentTxLoading()
            : g.state === "failed" && g.error
              ? this.onParentTxFailed(g, g.error)
              : g.state === "freed" && this.onParentTxFreed(),
          g.on("loading", this.onParentTxLoading),
          g.on("loaded", this.onParentTxLoaded),
          g.on("failed", this.onParentTxFailed),
          g.on("freed", this.onParentTxFreed));
      }));
  }
  forwardParentTxState(a, f) {
    this.setState(a, f);
  }
  onChangeIsRenderable(a) {
    this.parentTexture.setRenderableOwner(this.subtextureId, a);
  }
  async getTextureSource() {
    return { data: this.props };
  }
  static makeCacheKey(a) {
    return !1;
  }
  static resolveDefaults(a) {
    return { texture: a.texture, x: a.x || 0, y: a.y || 0, width: a.width || 0, height: a.height || 0 };
  }
};
_(Eh, "z$__type__Props");
let ah = Eh;
const Ih = class Ih extends ro {
  constructor(a, f) {
    super(a);
    _(this, "props");
    _(this, "type", $n.renderToTexture);
    this.props = Ih.resolveDefaults(f || {});
  }
  get width() {
    return this.props.width;
  }
  set width(a) {
    this.props.width = a;
  }
  get height() {
    return this.props.height;
  }
  set height(a) {
    this.props.height = a;
  }
  async getTextureSource() {
    return { data: null, premultiplyAlpha: null };
  }
  static resolveDefaults(a) {
    return { width: a.width || 256, height: a.height || 256 };
  }
};
_(Ih, "z$__type__Props");
let uh = Ih;
async function Wb() {
  var g, T, S;
  const d = new Uint8Array([
      137, 80, 78, 71, 13, 10, 26, 10, 0, 0, 0, 13, 73, 72, 68, 82, 0, 0, 0, 1, 0, 0, 0, 1, 1, 3, 0, 0, 0, 37,
      219, 86, 202, 0, 0, 0, 3, 80, 76, 84, 69, 0, 0, 0, 167, 122, 61, 218, 0, 0, 0, 1, 116, 82, 78, 83, 0,
      64, 230, 216, 102, 0, 0, 0, 10, 73, 68, 65, 84, 8, 215, 99, 96, 0, 0, 0, 2, 0, 1, 226, 33, 188, 51, 0,
      0, 0, 0, 73, 69, 78, 68, 174, 66, 96, 130,
    ]),
    c = { basic: !1, options: !1, full: !1 },
    a = new Blob([d], { type: "image/png" }),
    f = await createImageBitmap(a);
  ((g = f.close) == null || g.call(f), (c.basic = !0));
  try {
    const h = { premultiplyAlpha: "none" },
      M = await createImageBitmap(a, h);
    ((T = M.close) == null || T.call(M), (c.options = !0));
  } catch (h) {}
  try {
    const h = await createImageBitmap(a, 0, 0, 1, 1, { premultiplyAlpha: "none" });
    ((S = h.close) == null || S.call(h), (c.full = !0));
  } catch (h) {}
  return c;
}
var Gi;
(function (d) {
  ((d.MEMORY_THRESHOLD_EXCEEDED = "MEMORY_THRESHOLD_EXCEEDED"),
    (d.TEXTURE_DATA_NULL = "TEXTURE_DATA_NULL"),
    (d.TEXTURE_TYPE_NOT_REGISTERED = "TEXTURE_TYPE_NOT_REGISTERED"));
})(Gi || (Gi = {}));
const Kb = {
  [Gi.MEMORY_THRESHOLD_EXCEEDED]: "Memory threshold exceeded",
  [Gi.TEXTURE_DATA_NULL]: "Texture data is null",
  [Gi.TEXTURE_TYPE_NOT_REGISTERED]: "Texture type is not registered",
};
class by extends Error {
  constructor(a, f) {
    const g = Object.values(Gi).includes(a),
      T = g ? a : void 0;
    let S;
    g && T ? (S = f != null ? f : Kb[T]) : (S = String(a));
    super(S);
    _(this, "code");
    ((this.name = new.target.name), T && (this.code = T));
  }
}
class $b extends As {
  constructor(a, f) {
    super();
    _(this, "keyCache", new Map());
    _(this, "inverseKeyCache", new WeakMap());
    _(this, "txConstructors", {});
    _(this, "maxRetryCount");
    _(this, "priorityQueue", []);
    _(this, "uploadTextureQueue", []);
    _(this, "initialized", !1);
    _(this, "stage");
    _(this, "numImageWorkers");
    _(this, "imageWorkerManager", null);
    _(this, "hasCreateImageBitmap", !!self.createImageBitmap);
    _(this, "imageBitmapSupported", { basic: !1, options: !1, full: !1 });
    _(this, "hasWorker", !!self.Worker);
    _(this, "renderer");
    _(this, "frameTime", 0);
    const { numImageWorkers: g, createImageBitmapSupport: T, maxRetryCount: S } = f;
    ((this.stage = a),
      (this.numImageWorkers = g),
      (this.maxRetryCount = S),
      T === "auto"
        ? Wb()
            .then(h => {
              this.initialize(h);
            })
            .catch(() => {
              (console.warn(
                "[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower.",
              ),
                (this.initialized = !0),
                this.emit("initialized"));
            })
        : this.initialize({ basic: T === "basic", options: T === "options", full: T === "full" }),
      this.registerTextureType("ImageTexture", Dl),
      this.registerTextureType("ColorTexture", oh),
      this.registerTextureType("NoiseTexture", nv),
      this.registerTextureType("SubTexture", ah),
      this.registerTextureType("RenderTexture", uh));
  }
  registerTextureType(a, f) {
    this.txConstructors[a] = f;
  }
  initialize(a) {
    ((this.hasCreateImageBitmap = a.basic || a.options || a.full),
      (this.imageBitmapSupported = a),
      this.hasCreateImageBitmap ||
        console.warn(
          "[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower.",
        ),
      this.hasCreateImageBitmap && this.hasWorker && this.numImageWorkers > 0
        ? (this.imageWorkerManager = new _b(this.numImageWorkers, a))
        : console.warn(
            "[Lightning] Imageworker is 0 or not supported on this browser. Image loading will be slower.",
          ),
      (this.initialized = !0),
      this.emit("initialized"));
  }
  enqueueUploadTexture(a) {
    this.uploadTextureQueue.includes(a) === !1 && this.uploadTextureQueue.push(a);
  }
  createTexture(a, f) {
    let g;
    const T = this.txConstructors[a];
    if (!T) throw new by(Gi.TEXTURE_TYPE_NOT_REGISTERED, 'Texture type "'.concat(a, '" is not registered'));
    const S = T.makeCacheKey(f);
    return (
      S && this.keyCache.has(S)
        ? (g = this.keyCache.get(S))
        : ((g = new T(this, f)), S && this.initTextureToCache(g, S)),
      g
    );
  }
  async loadTexture(a, f) {
    if (a.type === $n.subTexture || a.state === "loaded" || a.state === "loading") return;
    if (this.initialized === !1) {
      this.priorityQueue.push(a);
      return;
    }
    if (
      (a.setState("loading"),
      (await a.getTextureData().catch(S => (console.error(S), a.setState("failed"), null))) === null ||
        a.state === "failed")
    )
      return;
    if ((a.type !== $n.image || f === !0) === !0) {
      await this.uploadTexture(a).catch(S => {
        (console.error("Failed to upload texture:", S), a.setState("failed"));
      });
      return;
    }
    this.enqueueUploadTexture(a);
  }
  async uploadTexture(a) {
    if (
      this.stage.txMemManager.doNotExceedCriticalThreshold === !0 &&
      this.stage.txMemManager.criticalCleanupRequested === !0
    ) {
      a.setState("failed", new by(Gi.MEMORY_THRESHOLD_EXCEEDED));
      return;
    }
    if (a.state === "failed" || a.state === "freed" || a.state === "loaded") return;
    if (a.textureData === null) {
      a.setState("failed", new by(Gi.TEXTURE_DATA_NULL, "Texture data is null, cannot upload texture"));
      return;
    }
    const f = a.loadCtxTexture();
    if (f !== null && f.state === "loaded") {
      a.setState("loaded");
      return;
    }
    await f.load();
  }
  isProcessingTexture(a) {
    return this.uploadTextureQueue.includes(a) === !0;
  }
  async processSome(a) {
    if (this.initialized === !1) return;
    const f = eh();
    for (; this.priorityQueue.length > 0 && eh() - f < a; ) {
      const g = this.priorityQueue.pop();
      try {
        (await g.getTextureData(), await this.uploadTexture(g));
      } catch (T) {
        console.error("Failed to process priority texture:", T);
      }
    }
    for (; this.uploadTextureQueue.length > 0 && eh() - f < a; ) {
      const g = this.uploadTextureQueue.shift();
      try {
        await this.uploadTexture(g);
      } catch (T) {
        console.error("Failed to upload texture:", T);
      }
    }
  }
  hasUpdates() {
    return this.uploadTextureQueue.length > 0;
  }
  initTextureToCache(a, f) {
    const { keyCache: g, inverseKeyCache: T } = this;
    (g.set(f, a), T.set(a, f));
  }
  getTextureFromCache(a) {
    return this.keyCache.get(a);
  }
  removeTextureFromCache(a) {
    const { inverseKeyCache: f, keyCache: g } = this,
      T = f.get(a);
    T && g.delete(T);
  }
  resolveParentTexture(a) {
    if (!(a != null && a.props)) return a;
    const f = Dl.makeCacheKey(a.props),
      g = f ? this.getTextureFromCache(f) : void 0;
    return g != null ? g : a;
  }
}
const Yb = { normal: 400, bold: 700, bolder: 900, lighter: 100 },
  t2 = d => (typeof d == "number" ? d : Yb[d] || 400);
function qb(d, c, a, f, g) {
  let T = t2(a);
  for (const S of d) {
    const h = S[c];
    if (!h) continue;
    if (h.size === 1)
      return (
        console.warn(
          "TrFontManager: Only one font face found for family: '".concat(
            c,
            "' - will be used for all weights and styles",
          ),
        ),
        h.values().next().value
      );
    const M = new Map();
    for (const N of h) {
      const D = t2(N.descriptors.weight);
      if (D === T && N.descriptors.style === f && N.descriptors.stretch === g) return N;
      M.set(D, N);
    }
    const P = "TrFontManager: No exact match: '"
      .concat(c, " Weight: ")
      .concat(T, " Style: ")
      .concat(f, " Stretch: ")
      .concat(g, "'");
    if ((console.error(P), T === 400 && M.has(500))) return M.get(500);
    if (T === 500 && M.has(400)) return M.get(400);
    if (T < 400) {
      for (; T > 0; ) {
        if (M.has(T)) return M.get(T);
        T -= 100;
      }
      T = 600;
    }
    for (; T < 1e3; ) {
      if (M.has(T)) return M.get(T);
      T += 100;
    }
    for (T = 500; T > 0; ) {
      if (M.has(T)) return M.get(T);
      T -= 100;
    }
  }
}
class Jb {
  constructor(c) {
    _(this, "textRenderers");
    _(this, "fontCache", new Map());
    this.textRenderers = c;
  }
  addFontFace(c) {
    for (const a in this.textRenderers) {
      const f = this.textRenderers[a];
      f && f.isFontFaceSupported(c) && f.addFontFace(c);
    }
  }
  resolveFontFace(c, a, f) {
    const { fontFamily: g, fontWeight: T, fontStyle: S, fontStretch: h } = a,
      M = "".concat(f, "_").concat(g, "_").concat(S, "_").concat(T, "_").concat(h);
    if (this.fontCache.has(M) === !0) return this.fontCache.get(M);
    const P = qb(c, g, T, S, h);
    return (P !== void 0 && this.fontCache.set(M, P), P);
  }
}
class Y2 {
  static makeCacheKey(c) {
    return !1;
  }
  static resolveDefaults(c) {
    return {};
  }
}
function n2(d, c, a) {
  const f = d.createShader(c);
  if (!f) {
    const T = d.getError();
    throw new Error(
      "Unable to create the shader: "
        .concat(c === d.VERTEX_SHADER ? "VERTEX_SHADER" : "FRAGMENT_SHADER", ".")
        .concat(T ? " WebGlContext Error: ".concat(T) : ""),
    );
  }
  if ((d.shaderSource(f, a), d.compileShader(f), !!d.getShaderParameter(f, d.COMPILE_STATUS))) return f;
  (console.error(d.getShaderInfoLog(f)), d.deleteShader(f));
}
function Qb(d, c, a) {
  const f = d.createProgram();
  if (!f) throw new Error("Unable to create program");
  if (
    (d.attachShader(f, c), d.attachShader(f, a), d.linkProgram(f), !!d.getProgramParameter(f, d.LINK_STATUS))
  )
    return f;
  (console.warn(d.getProgramInfoLog(f)), d.deleteProgram(f));
}
class so extends Y2 {
  constructor(a) {
    super();
    _(this, "buffersBound", !1);
    _(this, "program");
    _(this, "vao");
    _(this, "renderer");
    _(this, "glw");
    _(this, "attributeLocations");
    _(this, "uniformLocations");
    _(this, "supportsIndexedTextures");
    const f = (this.renderer = a.renderer),
      g = (this.glw = this.renderer.glw);
    this.supportsIndexedTextures = a.supportsIndexedTextures || !1;
    const T = g.isWebGl2(),
      S = (T && a.webgl2Extensions) || (!T && a.webgl1Extensions) || [],
      h = T ? "2.0" : "1.0";
    S.forEach(Z => {
      if (!g.getExtension(Z))
        throw new Error(
          'Shader "'
            .concat(this.constructor.name, '" requires extension "')
            .concat(Z, '" for WebGL ')
            .concat(h, " but wasn't found"),
        );
    });
    const M = a.shaderSources || this.constructor.shaderSources;
    if (M)
      T &&
        M != null &&
        M.webGl2 &&
        ((M.fragment = M.webGl2.fragment), (M.vertex = M.webGl2.vertex), delete M.webGl2);
    else throw new Error('Shader "'.concat(this.constructor.name, '" is missing shaderSources.'));
    const P = f.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,
      N = M.vertex instanceof Function ? M.vertex(P) : M.vertex,
      D = M.fragment instanceof Function ? M.fragment(P) : M.fragment,
      V = n2(g, g.VERTEX_SHADER, N),
      K = n2(g, g.FRAGMENT_SHADER, D);
    if (!V || !K)
      throw new Error(
        "Unable to create the following shader(s): ".concat(
          [!V && "VERTEX_SHADER", !K && "FRAGMENT_SHADER"].filter(Boolean).join(" and "),
        ),
      );
    const J = Qb(g, V, K);
    if (!J) throw new Error("Unable to create program");
    ((this.program = J),
      (this.attributeLocations = g.getAttributeLocations(this.program)),
      (this.uniformLocations = g.getUniformLocations(this.program)));
  }
  disableAttribute(a) {
    this.glw.disableVertexAttribArray(a);
  }
  disableAttributes() {
    const a = this.glw,
      f = this.attributeLocations.length;
    for (let g = 0; g < f; g++) a.disableVertexAttribArray(g);
  }
  canBatchShaderProps(a, f) {
    return !1;
  }
  bindRenderOp(a, f) {
    var h;
    (this.bindBufferCollection(a.buffers),
      a.textures.length > 0 && (h = a.textures[0]) != null && h.ctxTexture && this.bindTextures(a.textures));
    const { glw: g, parentHasRenderTexture: T, renderToTexture: S } = a;
    if (!(S && T)) {
      if (T) {
        const { width: M, height: P } = a.framebufferDimensions || {};
        (g.uniform1f(this.getUniformLocation("u_pixelRatio"), 1),
          g.uniform2f(this.getUniformLocation("u_resolution"), M != null ? M : 0, P != null ? P : 0));
      } else
        (g.uniform1f(this.getUniformLocation("u_pixelRatio"), a.options.pixelRatio),
          g.uniform2f(this.getUniformLocation("u_resolution"), g.canvas.width, g.canvas.height));
      if (f) {
        if (sh(f, "$dimensions")) {
          let M = f.$dimensions;
          (M || (M = a.dimensions), g.uniform2f(this.getUniformLocation("u_dimensions"), M.width, M.height));
        }
        if (sh(f, "$alpha")) {
          let M = f.$alpha;
          (M || (M = a.alpha), g.uniform1f(this.getUniformLocation("u_alpha"), M));
        }
        this.bindProps(f);
      }
    }
  }
  getUniformLocation(a) {
    return this.uniformLocations[a] || null;
  }
  bindBufferCollection(a) {
    const { glw: f } = this,
      g = this.attributeLocations,
      T = g.length;
    for (let S = 0; S < T; S++) {
      const h = g[S],
        M = a.getBuffer(h),
        P = a.getAttributeInfo(h);
      M === void 0 ||
        P === void 0 ||
        (f.enableVertexAttribArray(S),
        f.vertexAttribPointer(M, S, P.size, P.type, P.normalized, P.stride, P.offset));
    }
  }
  bindProps(a) {}
  bindTextures(a) {}
  attach() {
    (this.glw.useProgram(this.program),
      this.glw.isWebGl2() && this.vao && this.glw.bindVertexArray(this.vao));
  }
  detach() {
    this.disableAttributes();
  }
}
_(so, "shaderSources");
class q2 extends so {
  constructor(c) {
    super({ renderer: c });
  }
  bindTextures(c) {
    const { glw: a } = this;
    (a.activeTexture(0), a.bindTexture(c[0].ctxTexture));
  }
}
_(q2, "shaderSources", {
  vertex:
    "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_nodeCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying vec2 v_nodeCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio;\n        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);\n\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_nodeCoordinate = a_nodeCoordinate;\n\n        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);\n        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;\n      }\n    ",
  fragment:
    "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    ",
});
class J2 extends so {
  constructor(a) {
    super({ renderer: a });
    _(this, "supportsIndexedTextures", !0);
  }
  bindTextures(a) {
    const { renderer: f, glw: g } = this;
    if (a.length > f.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)
      throw new Error(
        "DefaultShaderBatched: Cannot bind more than ".concat(
          f.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,
          " textures",
        ),
      );
    a.forEach((S, h) => {
      (g.activeTexture(h), g.bindTexture(S.ctxTexture));
    });
    const T = Array.from(Array(a.length).keys());
    this.glw.uniform1iv(this.getUniformLocation("u_textures[0]"), T);
  }
}
_(J2, "shaderSources", {
  vertex:
    "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",
  fragment: a =>
    "\n      #define txUnits "
      .concat(
        a,
        "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[",
      )
      .concat(a, "], int idx, vec2 uv) {\n        ")
      .concat(
        Array.from(Array(a).keys())
          .map(f =>
            "\n          "
              .concat(f !== 0 ? "else " : "", "if (idx == ")
              .concat(f, ") {\n            return texture2D(textures[")
              .concat(f, "], uv);\n          }\n        "),
          )
          .join(""),
        "\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    ",
      ),
});
class _n {
  constructor(c) {
    _(this, "priority", 1);
    _(this, "name", "");
    _(this, "ref");
    _(this, "target");
    _(this, "passParameters", "");
    _(this, "declaredUniforms", "");
    _(this, "uniformInfo", {});
    const { ref: a, target: f, props: g = {} } = c;
    ((this.ref = a), (this.target = f));
    const T = {},
      S = [];
    let h = "";
    const M = this.constructor.uniforms || {};
    for (const P in M) {
      const N = M[P],
        D = N.type,
        V = "".concat(a, "_").concat(P);
      let K = "";
      (N.size && (K = "[".concat(N.size(g), "]")),
        S.push(V),
        (h += "uniform ".concat(D, " ").concat(V).concat(K, ";")),
        (T[P] = { name: V, uniform: M[P].method }));
    }
    ((this.passParameters = S.join(",")), (this.declaredUniforms = h), (this.uniformInfo = T));
  }
  static getEffectKey(c) {
    return "";
  }
  static getMethodParameters(c, a) {
    const f = [];
    for (const g in c) {
      const T = c[g];
      let S = "";
      (T.size && (S = "[".concat(T.size(a), "]")), f.push("".concat(T.type, " ").concat(g).concat(S)));
    }
    return f.join(",");
  }
  static resolveDefaults(c) {
    return {};
  }
  static makeEffectKey(c) {
    return !1;
  }
}
(_(_n, "uniforms", {}), _(_n, "methods"), _(_n, "onShaderMask"), _(_n, "onColorize"), _(_n, "onEffectMask"));
const Ny = new Map(),
  Zb = (d, c) => {
    const a = JSON.stringify(d);
    if (Ny.has(a)) return Ny.get(a);
    d = d != null ? d : [];
    const f = [],
      g = d.length;
    let T = 0;
    for (; T < g; T++) {
      const { name: S, type: h, props: M } = d[T],
        P = { name: S, type: h, props: {} },
        N = c[h],
        D = N.resolveDefaults(M),
        V = N.uniforms,
        K = Object.keys(V),
        J = K.length;
      let Z = 0;
      for (; Z < J; Z++) {
        const ue = K[Z],
          le = V[ue],
          q = {
            value: D[ue],
            programValue: void 0,
            method: le.method,
            updateOnBind: le.updateOnBind || !1,
            hasValidator: le.validator !== void 0,
            hasProgramValueUpdater: le.updateProgramValue !== void 0,
          },
          se = (q.hasValidator && le.validator(D[ue], D)) || D[ue];
        (D[ue] !== se && (q.validatedValue = se),
          q.hasProgramValueUpdater && le.updateProgramValue(q),
          q.programValue === void 0 && (q.programValue = q.value),
          (P.props[ue] = q));
      }
      f.push(P);
    }
    return (Ny.set(a, f), f);
  },
  Hi = class Hi extends so {
    constructor(a, f, g) {
      const T = Hi.createShader(f, g);
      super({ renderer: a, shaderSources: { vertex: T.vertex, fragment: T.fragment } });
      _(this, "effects", []);
      this.effects = T.effects;
    }
    bindTextures(a) {
      const { glw: f } = this;
      (f.activeTexture(0), f.bindTexture(a[0].ctxTexture));
    }
    bindUniformMethods(a) {
      const f = this.glw,
        g = a.effects,
        T = g.length;
      for (let S = 0; S < T; S++) {
        const h = this.effects[S].uniformInfo,
          M = g[S],
          P = Object.keys(M.props),
          N = P.length;
        for (let D = 0; D < N; D++) {
          const V = P[D],
            K = M.props[V].method,
            J = this.getUniformLocation(h[V].name);
          if (
            K === "uniform2fv" ||
            K === "uniform2iv" ||
            K === "uniform3iv" ||
            K === "uniform4fv" ||
            K === "uniform4iv" ||
            K === "uniformMatrix2fv" ||
            K === "uniformMatrix3fv" ||
            K === "uniformMatrix4fv" ||
            K === "uniform1f" ||
            K === "uniform1fv" ||
            K === "uniform1i" ||
            K === "uniform1iv"
          ) {
            M.props[V].setUniformValue = function () {
              f[K](J, this.programValue);
            };
            continue;
          }
          if (K === "uniform2f" || K === "uniform2i") {
            M.props[V].setUniformValue = function () {
              f[K](J, this.programValue[0], this.programValue[1]);
            };
            continue;
          }
          if (K === "uniform3f" || K === "uniform3i") {
            M.props[V].setUniformValue = function () {
              f[K](J, this.programValue[0], this.programValue[1], this.programValue[2]);
            };
            continue;
          }
          if (K === "uniform4f" || K === "uniform4i") {
            M.props[V].setUniformValue = function () {
              f[K](J, this.programValue[0], this.programValue[1], this.programValue[2], this.programValue[3]);
            };
            continue;
          }
        }
      }
    }
    bindProps(a) {
      var S;
      const f = a.effects,
        g = f.length;
      let T = 0;
      for (; T < g; T++) {
        const h = f[T],
          M = Object.keys(h.props),
          P = M.length;
        let N = 0;
        for (; N < P; N++) {
          const D = M[N],
            V = h.props[D];
          if (V.updateOnBind === !0) {
            const K =
              (S = this.renderer.shManager.getRegisteredEffects()[h.type]) == null ? void 0 : S.uniforms[D];
            K == null || K.updateProgramValue(h.props[D], a);
          }
          V.setUniformValue();
        }
      }
    }
    canBatchShaderProps(a, f) {
      if (
        a.$alpha !== f.$alpha ||
        a.$dimensions.width !== f.$dimensions.width ||
        a.$dimensions.height !== f.$dimensions.height ||
        a.effects.length !== f.effects.length
      )
        return !1;
      const g = a.effects.length;
      let T = 0;
      for (; T < g; T++) {
        const S = a.effects[T],
          h = f.effects[T];
        if (S.type !== h.type) return !1;
        for (const M in S.props)
          if ((h.props && !h.props[M]) || S.props[M].value !== h.props[M].value) return !1;
      }
      return !0;
    }
    static createShader(a, f) {
      const g = {},
        T = {};
      let S = "";
      const h = [],
        M = [],
        P = a.effects.map(J => {
          const Z = f[J.type],
            ue = Z.getEffectKey(J.props || {});
          g[ue] = g[ue] ? ++g[ue] : 1;
          const le = g[ue];
          le === 1 && M.push({ key: ue, type: J.type, props: J.props });
          const q = new Z({ ref: "".concat(ue).concat(le === 1 ? "" : le), target: ue, props: J.props });
          return ((S += q.declaredUniforms), h.push(...Object.values(q.uniformInfo)), q);
        });
      let N = "";
      M == null ||
        M.forEach(J => {
          var fe;
          const Z = f[J.type],
            ue = Z.resolveDefaults((fe = J.props) != null ? fe : {}),
            le = [];
          for (const xe in Z.methods) {
            let E = xe;
            const re = Z.methods[xe];
            (T[xe] && T[xe] !== re && (E = Hi.resolveMethodDuplicate(xe, re, T)),
              (T[E] = re.replace("function", E)),
              le.push({ m: xe, cm: E }));
          }
          let q = Z.onShaderMask instanceof Function ? Z.onShaderMask(ue) : Z.onShaderMask,
            se = Z.onColorize instanceof Function ? Z.onColorize(ue) : Z.onColorize,
            x = Z.onEffectMask instanceof Function ? Z.onEffectMask(ue) : Z.onEffectMask;
          le.forEach(xe => {
            const { m: E, cm: re } = xe,
              te = new RegExp("\\$".concat(E), "g");
            (q && (q = q.replace(te, re)), se && (se = se.replace(te, re)), x && (x = x.replace(te, re)));
          });
          const Y = Z.getMethodParameters(Z.uniforms, ue),
            ye = Y.length > 0 ? ", ".concat(Y) : "";
          (q &&
            (N += "\n        float fx_"
              .concat(J.key, "_onShaderMask(float shaderMask ")
              .concat(ye, ") {\n          ")
              .concat(q, "\n        }\n        ")),
            se &&
              (N += "\n          vec4 fx_"
                .concat(J.key, "_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor")
                .concat(ye, ") {\n            ")
                .concat(se, "\n          }\n        ")),
            x &&
              (N += "\n          vec4 fx_"
                .concat(J.key, "_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor")
                .concat(ye, ") {\n            ")
                .concat(x, "\n          }\n        ")));
        });
      let D = "";
      for (const J in T) D += T[J];
      let V = "mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",
        K = "\n\n    ";
      for (let J = 0; J < P.length; J++) {
        const Z = P[J],
          ue = Z.passParameters.length > 0 ? ", ".concat(Z.passParameters) : "",
          le = f[Z.name];
        (le.onShaderMask &&
          (K += "\n        shaderMask = fx_"
            .concat(Z.target, "_onShaderMask(shaderMask ")
            .concat(ue, ");\n        ")),
          le.onColorize &&
            (K += "\n        maskColor = fx_"
              .concat(Z.target, "_onColorize(shaderMask, maskColor, shaderColor")
              .concat(ue, ");\n        ")),
          le.onEffectMask &&
            (V = "fx_".concat(Z.target, "_onEffectMask(shaderMask, maskColor, shaderColor").concat(ue, ")")));
        const q = P[J + 1];
        (q === void 0 || f[q.name].onEffectMask) &&
          (K += "\n          shaderColor = ".concat(V, ";\n        "));
      }
      return { effects: P, uniforms: h, fragment: Hi.fragment(S, D, N, K), vertex: Hi.vertex() };
    }
    static resolveMethodDuplicate(a, f, g, T = 0) {
      const S = a + (T > 0 ? T : "");
      return g[S] && g[S] !== f ? this.resolveMethodDuplicate(a, f, g, ++T) : S;
    }
    static resolveDefaults(a, f) {
      var g;
      return {
        effects: Zb((g = a.effects) != null ? g : [], f),
        $dimensions: { width: 0, height: 0 },
        $alpha: 0,
      };
    }
    static makeCacheKey(a, f) {
      var T;
      let g = "";
      return (
        (T = a.effects) == null ||
          T.forEach(S => {
            const M = f[S.type].getEffectKey(S.props || {});
            g += ",".concat(M);
          }),
        "DynamicShader".concat(g)
      );
    }
  };
(_(Hi, "z$__type__Props"),
  _(
    Hi,
    "vertex",
    () =>
      "\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_nodeCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n    varying vec2 v_nodeCoordinate;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n      v_nodeCoordinate = a_nodeCoordinate;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  ",
  ),
  _(Hi, "fragment", (a, f, g, T) =>
    "\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    "
      .concat(
        a,
        "\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying vec2 v_nodeCoordinate;\n\n    ",
      )
      .concat(f, "\n\n    ")
      .concat(
        g,
        "\n\n    void main() {\n      vec2 p = v_nodeCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ",
      )
      .concat(T, "\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  "),
  ));
let Ra = Hi;
class rv extends so {
  constructor(c) {
    super({ renderer: c });
  }
  static resolveDefaults(c) {
    return { radius: c.radius || 10, $dimensions: { width: 0, height: 0 } };
  }
  bindTextures(c) {
    const { glw: a } = this;
    (a.activeTexture(0), a.bindTexture(c[0].ctxTexture));
  }
  bindProps(c) {
    const a = Math.min(c.$dimensions.width, c.$dimensions.height) / (2 * c.radius);
    this.glw.uniform1f(this.getUniformLocation("u_radius"), c.radius * Math.min(a, 1));
  }
  canBatchShaderProps(c, a) {
    return (
      c.radius === a.radius &&
      c.$dimensions.width === a.$dimensions.width &&
      c.$dimensions.height === a.$dimensions.height
    );
  }
}
(_(rv, "z$__type__Props"),
  _(rv, "shaderSources", {
    vertex:
      "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute vec2 a_nodeCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying vec2 v_nodeCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_nodeCoordinate = a_nodeCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",
    fragment:
      "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying vec2 v_nodeCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_nodeCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    ",
  }));
const e3 = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]),
  _l = class _l extends so {
    constructor(c) {
      super({ renderer: c });
    }
    bindTextures(c) {
      const { glw: a } = this;
      (a.activeTexture(0), a.bindTexture(c[0].ctxTexture));
    }
    bindProps(c) {
      const a = _l.resolveDefaults(c);
      for (const f in a)
        if (f === "transform") this.glw.uniformMatrix3fv(this.getUniformLocation("u_transform"), a[f]);
        else if (f === "scrollY") this.glw.uniform1f(this.getUniformLocation("u_scrollY"), a[f]);
        else if (f === "color") {
          const g = Ch(a.color);
          this.glw.uniform4fv(this.getUniformLocation("u_color"), g);
        } else
          f === "size"
            ? this.glw.uniform1f(this.getUniformLocation("u_size"), a[f])
            : f === "distanceRange"
              ? this.glw.uniform1f(this.getUniformLocation("u_distanceRange"), a[f])
              : f === "debug" && this.glw.uniform1i(this.getUniformLocation("u_debug"), a[f] ? 1 : 0);
    }
    static resolveDefaults(c = {}) {
      var a, f, g, T, S, h;
      return {
        transform: (a = c.transform) != null ? a : e3,
        scrollY: (f = c.scrollY) != null ? f : 0,
        color: (g = c.color) != null ? g : 4294967295,
        size: (T = c.size) != null ? T : 16,
        distanceRange: (S = c.distanceRange) != null ? S : 1,
        debug: (h = c.debug) != null ? h : !1,
      };
    }
  };
(_(_l, "z$__type__Props"),
  _(_l, "shaderSources", {
    vertex:
      "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n\n        // Calculate screen space with pixel ratio\n        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n\n        gl_Position = vec4(screenSpace, 0.0, 1.0);\n        v_texcoord = a_textureCoordinate;\n\n      }\n    ",
    fragment:
      "\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    ",
  }));
let iv = _l;
const _a = d => {
    d.programValue === void 0 && (d.programValue = new Float32Array(4));
    const c = d.value,
      a = d.programValue;
    ((a[0] = (c >>> 24) / 255),
      (a[1] = ((c >>> 16) & 255) / 255),
      (a[2] = ((c >>> 8) & 255) / 255),
      (a[3] = (c & 255) / 255));
  },
  t3 = d => {
    const c = d.validatedValue || d.value;
    if (d.programValue instanceof Float32Array) {
      const a = d.programValue;
      ((a[0] = c[0]), (a[1] = c[1]));
    } else d.programValue = new Float32Array(c);
  },
  n3 = d => {
    const c = d.validatedValue || d.value;
    if (d.programValue instanceof Float32Array) {
      const a = d.programValue;
      ((a[0] = c[0]), (a[1] = c[1]), (a[2] = c[2]), (a[3] = c[3]));
    } else d.programValue = new Float32Array(c);
  },
  Q2 = d => {
    const c = d.validatedValue || d.value;
    if (d.programValue instanceof Float32Array) {
      const a = c.length,
        f = d.programValue;
      for (let g = 0; g < a; g++) f[g] = c[g];
    } else d.programValue = new Float32Array(c);
  },
  Iv = d => {
    const c = Array.isArray(d);
    if (c) {
      if (c && d.length === 4) return d;
      if (c && d.length === 2) return [d[0], d[1], d[0], d[1]];
      if (c && d.length === 3) return [d[0], d[1], d[2], d[0]];
    } else return [d, d, d, d];
    return [d[0], d[0], d[0], d[0]];
  },
  Z2 = (d, c) => {
    d.programValue === void 0 && (d.programValue = new Float32Array(4));
    const a = d.programValue,
      f = d.validatedValue || d.value;
    if (c === void 0 && d.$dimensions === void 0) {
      ((a[0] = f[0]), (a[1] = f[1]), (a[2] = f[2]), (a[3] = f[3]));
      return;
    }
    let g = d.$dimensions;
    if (c !== void 0) {
      const { $dimensions: V } = c;
      if (g !== void 0 && (g.width === V.width || g.height === V.height)) return;
      g === void 0 &&
        ((g = { width: V == null ? void 0 : V.width, height: V == null ? void 0 : V.height }),
        (d.$dimensions = g));
    }
    const { width: T, height: S } = g,
      [h, M, P, N] = f,
      D = Math.min(
        Math.min(
          Math.min(T / Math.max(T, h + M), T / Math.max(T, P + N)),
          Math.min(S / Math.max(S, h + P), S / Math.max(S, M + N)),
        ),
        1,
      );
    ((a[0] = h * D), (a[1] = M * D), (a[2] = P * D), (a[3] = N * D));
  };
class ya extends _n {
  constructor() {
    super(...arguments);
    _(this, "name", "radius");
  }
  static getEffectKey() {
    return "radius";
  }
  static resolveDefaults(a) {
    var f;
    return { radius: (f = a.radius) != null ? f : 10 };
  }
}
(_(ya, "z$__type__Props"),
  _(ya, "uniforms", {
    radius: {
      value: 0,
      method: "uniform4fv",
      type: "vec4",
      updateOnBind: !0,
      validator: Iv,
      updateProgramValue: Z2,
    },
  }),
  _(ya, "methods", {
    fillMask: "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
    boxDist:
      "\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    ",
  }),
  _(
    ya,
    "onShaderMask",
    "\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_nodeCoordinate.x, 0.5) * step(v_nodeCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_nodeCoordinate.x) * step(v_nodeCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_nodeCoordinate.x) * step(0.5, v_nodeCoordinate.y);\n  r = r + radius[3] * step(v_nodeCoordinate.x, 0.5) * step(0.5, v_nodeCoordinate.y);\n  return $boxDist(v_nodeCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  ",
  ),
  _(ya, "onEffectMask", "\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  "));
class yl extends _n {
  constructor() {
    super(...arguments);
    _(this, "name", "border");
  }
  static getEffectKey() {
    return "border";
  }
  static resolveDefaults(a) {
    var f, g;
    return { width: (f = a.width) != null ? f : 10, color: (g = a.color) != null ? g : 4294967295 };
  }
}
(_(yl, "z$__type__Props"),
  _(yl, "uniforms", {
    width: { value: 0, method: "uniform1f", type: "float" },
    color: { value: 4294967295, updateProgramValue: _a, method: "uniform4fv", type: "vec4" },
  }),
  _(
    yl,
    "onEffectMask",
    "\n  float intR = shaderMask + 1.0;\n  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);\n  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);\n  ",
  ),
  _(yl, "onColorize", "\n    return color;\n  "));
class va extends _n {
  constructor() {
    super(...arguments);
    _(this, "name", "linearGradient");
  }
  static getEffectKey(a) {
    return a.colors.value
      ? "linearGradient".concat(a.colors.value.length)
      : "linearGradient".concat(a.colors.length);
  }
  static resolveDefaults(a) {
    var T, S;
    const f = (T = a.colors) != null ? T : [4278190080, 4294967295];
    let g = a.stops || [];
    if (g.length === 0 || g.length !== f.length) {
      const h = f.length;
      let M = 0;
      const P = g;
      for (; M < h; M++)
        g[M]
          ? ((P[M] = g[M]),
            g[M - 1] === void 0 && P[M - 2] !== void 0 && (P[M - 1] = P[M - 2] + (g[M] - P[M - 2]) / 2))
          : (P[M] = M * (1 / (f.length - 1)));
      g = P;
    }
    return { colors: f, stops: g, angle: (S = a.angle) != null ? S : 0 };
  }
}
(_(va, "z$__type__Props"),
  _(va, "uniforms", {
    angle: { value: 0, method: "uniform1f", type: "float" },
    colors: {
      value: 4294967295,
      validator: a => a.reduce((f, g) => f.concat(Ch(g)), []),
      updateProgramValue: Q2,
      size: a => a.colors.length,
      method: "uniform4fv",
      type: "vec4",
    },
    stops: { value: [], size: a => a.colors.length, method: "uniform1fv", type: "float" },
  }),
  _(va, "methods", {
    calcPoint:
      "\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    ",
  }),
  _(va, "ColorLoop", a => {
    let f = "";
    for (let g = 2; g < a; g++)
      f += "colorOut = mix(colorOut, colors["
        .concat(g, "], clamp((dist - stops[")
        .concat(g - 1, "]) / (stops[")
        .concat(g, "] - stops[")
        .concat(g - 1, "]), 0.0, 1.0));");
    return f;
  }),
  _(va, "onColorize", a => {
    const f = a.colors.length || 1;
    return "\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_nodeCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      //return early if dist is lower or equal to first stop\n      if(dist <= stops[0]) {\n        return mix(maskColor, colors[0], clamp(colors[0].a, 0.0, 1.0));\n      }\n      const int amount = ".concat(
      f,
      ";\n      const int last = amount - 1;\n\n      if(dist >= stops[last]) {\n        return mix(maskColor, colors[last], clamp(colors[last].a, 0.0, 1.0));\n      }\n\n      for(int i = 0; i < last; i++) {\n        float left = stops[i];\n        float right = stops[i + 1];\n        if(dist >= left && dist <= right) {\n          float localDist = smoothstep(left, right, dist);\n          vec4 colorOut = mix(colors[i], colors[i + 1], localDist);\n          return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n        }\n      }\n\n      //final fallback\n      return mix(maskColor, colors[last], clamp(colors[last].a, 0.0, 1.0));\n    ",
    );
  }));
class sv extends _n {
  constructor() {
    super(...arguments);
    _(this, "name", "grayscale");
  }
  static getEffectKey() {
    return "grayscale";
  }
  static resolveDefaults(a) {
    var f;
    return { amount: (f = a.amount) != null ? f : 1 };
  }
}
(_(sv, "uniforms", { amount: { value: 1, method: "uniform1f", type: "float" } }),
  _(
    sv,
    "onColorize",
    "\n    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;\n    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);\n  ",
  ));
class xa extends _n {
  constructor() {
    super(...arguments);
    _(this, "name", "borderRight");
  }
  static getEffectKey() {
    return "borderRight";
  }
  static resolveDefaults(a) {
    var f, g;
    return { width: (f = a.width) != null ? f : 10, color: (g = a.color) != null ? g : 4294967295 };
  }
}
(_(xa, "z$__type__Props"),
  _(xa, "uniforms", {
    width: { value: 0, method: "uniform1f", type: "float" },
    color: { value: 4294967295, updateProgramValue: _a, method: "uniform4fv", type: "vec4" },
  }),
  _(xa, "methods", {
    fillMask: "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
    rectDist:
      "\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    ",
  }),
  _(
    xa,
    "onEffectMask",
    "\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_nodeCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  ",
  ),
  _(xa, "onColorize", "\n    return color;\n  "));
class Ta extends _n {
  constructor() {
    super(...arguments);
    _(this, "name", "borderTop");
  }
  static getEffectKey() {
    return "borderTop";
  }
  static resolveDefaults(a) {
    var f, g;
    return { width: (f = a.width) != null ? f : 10, color: (g = a.color) != null ? g : 4294967295 };
  }
}
(_(Ta, "z$__type__Props"),
  _(Ta, "uniforms", {
    width: { value: 0, method: "uniform1f", type: "float" },
    color: { value: 4294967295, updateProgramValue: _a, method: "uniform4fv", type: "vec4" },
  }),
  _(Ta, "methods", {
    fillMask: "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
    rectDist:
      "\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    ",
  }),
  _(
    Ta,
    "onEffectMask",
    "\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_nodeCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  ",
  ),
  _(Ta, "onColorize", "\n    return color;\n  "));
class wa extends _n {
  constructor() {
    super(...arguments);
    _(this, "name", "borderBottom");
  }
  static getEffectKey() {
    return "borderBottom";
  }
  static resolveDefaults(a) {
    var f, g;
    return { width: (f = a.width) != null ? f : 10, color: (g = a.color) != null ? g : 4294967295 };
  }
}
(_(wa, "z$__type__Props"),
  _(wa, "uniforms", {
    width: { value: 0, method: "uniform1f", type: "float" },
    color: { value: 4294967295, updateProgramValue: _a, method: "uniform4fv", type: "vec4" },
  }),
  _(wa, "methods", {
    fillMask: "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
    rectDist:
      "\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    ",
  }),
  _(
    wa,
    "onEffectMask",
    "\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_nodeCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  ",
  ),
  _(wa, "onColorize", "\n    return color;\n  "));
class Sa extends _n {
  constructor() {
    super(...arguments);
    _(this, "name", "borderLeft");
  }
  static getEffectKey() {
    return "borderLeft";
  }
  static resolveDefaults(a) {
    var f, g;
    return { width: (f = a.width) != null ? f : 10, color: (g = a.color) != null ? g : 4294967295 };
  }
}
(_(Sa, "z$__type__Props"),
  _(Sa, "uniforms", {
    width: { value: 0, method: "uniform1f", type: "float" },
    color: { value: 4294967295, updateProgramValue: _a, method: "uniform4fv", type: "vec4" },
  }),
  _(Sa, "methods", {
    fillMask: "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
    rectDist:
      "\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    ",
  }),
  _(
    Sa,
    "onEffectMask",
    "\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_nodeCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  ",
  ),
  _(Sa, "onColorize", "\n    return color;\n  "));
class vl extends _n {
  constructor() {
    super(...arguments);
    _(this, "name", "glitch");
  }
  static getEffectKey(a) {
    return "glitch";
  }
  static resolveDefaults(a) {
    var f, g, T, S, h;
    return {
      amplitude: (f = a.amplitude) != null ? f : 0.2,
      narrowness: (g = a.narrowness) != null ? g : 4,
      blockiness: (T = a.blockiness) != null ? T : 2,
      minimizer: (S = a.minimizer) != null ? S : 8,
      time: (h = a.time) != null ? h : Date.now(),
    };
  }
}
(_(vl, "z$__type__Props"),
  _(vl, "uniforms", {
    amplitude: { value: 0, method: "uniform1f", type: "float" },
    narrowness: { value: 0, method: "uniform1f", type: "float" },
    blockiness: { value: 0, method: "uniform1f", type: "float" },
    minimizer: { value: 0, method: "uniform1f", type: "float" },
    time: {
      value: 0,
      method: "uniform1f",
      updateOnBind: !0,
      updateProgramValue: a => {
        const f = (a.value = (Date.now() - a.value) % 1e3);
        a.programValue = f;
      },
      type: "float",
    },
  }),
  _(vl, "methods", {
    rand: "\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",
    noise:
      "\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",
    fbm: "\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    ",
  }),
  _(
    vl,
    "onColorize",
    "\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ",
  ));
class th extends _n {
  constructor() {
    super(...arguments);
    _(this, "name", "fadeOut");
  }
  static getEffectKey() {
    return "fadeOut";
  }
  static resolveDefaults(a) {
    var f;
    return { fade: (f = a.fade) != null ? f : 10 };
  }
}
(_(th, "z$__type__Props"),
  _(th, "uniforms", {
    fade: { value: 0, method: "uniform4fv", type: "vec4", validator: Iv, updateProgramValue: n3 },
  }),
  _(
    th,
    "onColorize",
    "\n  vec2 point = v_nodeCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_nodeCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_nodeCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_nodeCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_nodeCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ",
  ));
class Aa extends _n {
  constructor() {
    super(...arguments);
    _(this, "name", "radialGradient");
  }
  static getEffectKey(a) {
    return a.colors.value
      ? "radialGradient".concat(a.colors.value.length)
      : "radialGradient".concat(a.colors.length);
  }
  static resolveDefaults(a) {
    var T, S, h, M, P;
    const f = (T = a.colors) != null ? T : [4278190080, 4294967295];
    let g = a.stops || [];
    if (g.length === 0 || g.length !== f.length) {
      const N = f.length;
      let D = 0;
      const V = g;
      for (; D < N; D++)
        g[D]
          ? ((V[D] = g[D]),
            g[D - 1] === void 0 && V[D - 2] !== void 0 && (V[D - 1] = V[D - 2] + (g[D] - V[D - 2]) / 2))
          : (V[D] = D * (1 / (f.length - 1)));
      g = V;
    }
    return {
      colors: f,
      stops: g,
      width: (S = a.width) != null ? S : 0,
      height: (M = (h = a.height) != null ? h : a.width) != null ? M : 0,
      pivot: (P = a.pivot) != null ? P : [0.5, 0.5],
    };
  }
}
(_(Aa, "z$__type__Props"),
  _(Aa, "uniforms", {
    width: { value: 0, method: "uniform1f", type: "float" },
    height: { value: 0, method: "uniform1f", type: "float" },
    pivot: { value: [0.5, 0.5], updateProgramValue: t3, method: "uniform2fv", type: "vec2" },
    colors: {
      value: 4294967295,
      validator: a => a.reduce((f, g) => f.concat(Ch(g)), []),
      updateProgramValue: Q2,
      size: a => a.colors.length,
      method: "uniform4fv",
      type: "vec4",
    },
    stops: { value: [], size: a => a.colors.length, method: "uniform1fv", type: "float" },
  }),
  _(Aa, "methods", {
    getGradientColor:
      "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
  }),
  _(Aa, "ColorLoop", a => {
    let f = "";
    for (let g = 2; g < a; g++)
      f += "colorOut = mix(colorOut, colors["
        .concat(g, "], clamp((dist - stops[")
        .concat(g - 1, "]) / (stops[")
        .concat(g, "] - stops[")
        .concat(g - 1, "]), 0.0, 1.0));");
    return f;
  }),
  _(Aa, "onColorize", a => {
    const f = a.colors.length || 1;
    return "\n      vec2 point = v_nodeCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      dist = clamp(dist, 0.0, 1.0);\n      //return early if dist is lower or equal to first stop\n      if(dist <= stops[0]) {\n        return mix(maskColor, colors[0], clamp(colors[0].a, 0.0, 1.0));\n      }\n      const int amount = ".concat(
      f,
      ";\n      const int last = amount - 1;\n\n      if(dist >= stops[last]) {\n        return mix(maskColor, colors[last], clamp(colors[last].a, 0.0, 1.0));\n      }\n\n      for(int i = 0; i < last; i++) {\n        float left = stops[i];\n        float right = stops[i + 1];\n        if(dist >= left && dist <= right) {\n          float localDist = smoothstep(left, right, dist);\n          vec4 colorOut = mix(colors[i], colors[i + 1], localDist);\n          return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n        }\n      }\n\n      //final fallback\n      return mix(maskColor, colors[last], clamp(colors[last].a, 0.0, 1.0));\n    ",
    );
  }));
class Ea extends _n {
  constructor() {
    super(...arguments);
    _(this, "name", "radialProgress");
  }
  static getEffectKey() {
    return "radialProgress";
  }
  static resolveDefaults(a) {
    var f, g, T, S, h, M, P;
    return {
      width: (f = a.width) != null ? f : 10,
      progress: (g = a.progress) != null ? g : 0.5,
      offset: (T = a.offset) != null ? T : 0,
      range: (S = a.range) != null ? S : Math.PI * 2,
      rounded: (h = a.rounded) != null ? h : !1,
      radius: (M = a.radius) != null ? M : 1,
      color: (P = a.color) != null ? P : 4294967295,
    };
  }
}
(_(Ea, "z$__type__Props"),
  _(Ea, "uniforms", {
    width: { value: 0, method: "uniform1f", type: "float" },
    progress: { value: 0.5, method: "uniform1f", type: "float" },
    offset: { value: 0, method: "uniform1f", type: "float" },
    range: { value: 0, method: "uniform1f", type: "float" },
    rounded: { value: 0, method: "uniform1f", type: "float", validator: a => (a ? 1 : 0) },
    radius: { value: 1, method: "uniform1f", type: "float" },
    color: { value: 4294967295, updateProgramValue: _a, method: "uniform4fv", type: "vec4" },
  }),
  _(Ea, "methods", {
    rotateUV:
      "\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",
    drawDot:
      "\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    ",
  }),
  _(
    Ea,
    "onEffectMask",
    "\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_nodeCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  ",
  ),
  _(Ea, "onColorize", "\n    return color;\n  "));
class Ia extends _n {
  constructor() {
    super(...arguments);
    _(this, "name", "holePunch");
  }
  static getEffectKey() {
    return "holePunch";
  }
  static resolveDefaults(a) {
    var f;
    return {
      x: a.x || 0,
      y: a.y || 0,
      width: a.width || 50,
      height: a.height || 50,
      radius: (f = a.radius) != null ? f : 0,
    };
  }
}
(_(Ia, "z$__type__Props"),
  _(Ia, "uniforms", {
    x: { value: 0, method: "uniform1f", type: "float" },
    y: { value: 0, method: "uniform1f", type: "float" },
    width: { value: 0, method: "uniform1f", type: "float" },
    height: { value: 0, method: "uniform1f", type: "float" },
    radius: {
      value: 0,
      method: "uniform4fv",
      type: "vec4",
      updateOnBind: !0,
      validator: Iv,
      updateProgramValue: Z2,
    },
  }),
  _(Ia, "methods", {
    fillMask: "\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",
    boxDist:
      "\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    ",
  }),
  _(
    Ia,
    "onShaderMask",
    "\n  vec2 halfDimensions = u_dimensions * 0.5;\n  vec2 size = vec2(width, height) * 0.5;\n  vec2 basePos = v_nodeCoordinate.xy * u_dimensions.xy - vec2(x, y);\n  vec2 pos = basePos - size;\n  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);\n  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);\n  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);\n  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);\n  return $boxDist(pos, size, r);\n  ",
  ),
  _(Ia, "onEffectMask", "\n  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));\n  "));
class r3 extends Y2 {
  constructor(a) {
    super();
    _(this, "shType");
    this.shType = a;
  }
  bindRenderOp() {}
  bindProps() {}
  attach() {}
  detach() {}
}
class i3 {
  constructor(c, a, f, g) {
    _(this, "type");
    _(this, "shader");
    _(this, "resolvedProps");
    _(this, "props");
    ((this.type = c), (this.shader = a), (this.resolvedProps = f));
    const T = Object.keys(f),
      S = T.length,
      h = {};
    for (let M = 0; M < S; M++) {
      const P = T[M];
      Object.defineProperty(h, P, {
        get: () => this.resolvedProps[P],
        set: N => {
          ((this.resolvedProps[P] = N), g.requestRender());
        },
      });
    }
    this.props = h;
  }
  getResolvedProps() {
    return this.resolvedProps;
  }
}
class s3 {
  constructor(c, a, f) {
    _(this, "shader");
    _(this, "resolvedProps");
    _(this, "props");
    _(this, "type");
    ((this.shader = c), (this.type = "DynamicShader"), (this.resolvedProps = a));
    const g = f.getRegisteredEffects(),
      T = {},
      S = a.effects,
      h = S.length;
    for (let M = 0; M < h; M++) {
      const { name: P, props: N, type: D } = S[M];
      if (P === void 0) continue;
      const V = {},
        K = Object.keys(N),
        J = K.length;
      for (let Z = 0; Z < J; Z++) {
        const ue = K[Z];
        Object.defineProperty(V, ue, {
          get: () => this.resolvedProps.effects[M].props[ue].value,
          set: le => {
            var se, x;
            const q = this.resolvedProps.effects[M].props[ue];
            ((q.value = le),
              q.hasValidator &&
                (le = q.validatedValue = (se = g[D].uniforms[ue]) == null ? void 0 : se.validator(le, N)),
              q.hasProgramValueUpdater
                ? (x = g[D].uniforms[ue]) == null || x.updateProgramValue(q)
                : (q.programValue = le),
              f.renderer.stage.requestRender());
          },
        });
      }
      Object.defineProperty(T, P, { get: () => V });
    }
    this.props = T;
  }
  getResolvedProps() {
    return this.resolvedProps;
  }
}
class o3 {
  constructor() {
    _(this, "shCache", new Map());
    _(this, "shConstructors", {});
    _(this, "attachedShader", null);
    _(this, "effectConstructors", {});
    _(this, "renderer");
    (this.registerShaderType("DefaultShader", q2),
      this.registerShaderType("DefaultShaderBatched", J2),
      this.registerShaderType("RoundedRectangle", rv),
      this.registerShaderType("DynamicShader", Ra),
      this.registerShaderType("SdfShader", iv),
      this.registerEffectType("border", yl),
      this.registerEffectType("borderBottom", wa),
      this.registerEffectType("borderLeft", Sa),
      this.registerEffectType("borderRight", xa),
      this.registerEffectType("borderTop", Ta),
      this.registerEffectType("fadeOut", th),
      this.registerEffectType("linearGradient", va),
      this.registerEffectType("radialGradient", Aa),
      this.registerEffectType("grayscale", sv),
      this.registerEffectType("glitch", vl),
      this.registerEffectType("radius", ya),
      this.registerEffectType("radialProgress", Ea),
      this.registerEffectType("holePunch", Ia));
  }
  registerShaderType(c, a) {
    this.shConstructors[c] = a;
  }
  registerEffectType(c, a) {
    this.effectConstructors[c] = a;
  }
  getRegisteredEffects() {
    return this.effectConstructors;
  }
  getRegisteredShaders() {
    return this.shConstructors;
  }
  loadShader(c, a) {
    if (!this.renderer) throw new Error("Renderer is not been defined");
    const f = this.shConstructors[c];
    if (!f) throw new Error('Shader type "'.concat(c, '" is not registered'));
    if (this.renderer.mode === "canvas" && f.prototype instanceof so)
      return this._createShaderCtr(c, new r3(c), a);
    if (c === "DynamicShader") return this.loadDynamicShader(a);
    const g = f.resolveDefaults(a),
      T = f.makeCacheKey(g) || f.name;
    if (T && this.shCache.has(T)) return this._createShaderCtr(c, this.shCache.get(T), g);
    const S = new f(this.renderer, a);
    return (T && this.shCache.set(T, S), this._createShaderCtr(c, S, g));
  }
  loadDynamicShader(c) {
    if (!this.renderer) throw new Error("Renderer is not been defined");
    const a = Ra.resolveDefaults(c, this.effectConstructors),
      f = Ra.makeCacheKey(a, this.effectConstructors);
    if (f && this.shCache.has(f)) return this._createDynShaderCtr(this.shCache.get(f), a);
    const g = new Ra(this.renderer, c, this.effectConstructors);
    return (f && this.shCache.set(f, g), this._createDynShaderCtr(g, a));
  }
  _createShaderCtr(c, a, f) {
    return new i3(c, a, f, this.renderer.stage);
  }
  _createDynShaderCtr(c, a) {
    return (c.bindUniformMethods(a), new s3(c, a, this));
  }
  useShader(c) {
    this.attachedShader !== c &&
      (this.attachedShader && this.attachedShader.detach(), c.attach(), (this.attachedShader = c));
  }
}
const a3 = {
  x: (d, c) => {
    d.props.x = c;
  },
  y: (d, c) => {
    d.props.y = c;
  },
  width: (d, c) => {
    d.props.width = c;
  },
  height: (d, c) => {
    d.props.height = c;
  },
  color: (d, c) => {
    d.props.color = c;
  },
  zIndex: (d, c) => {
    d.props.zIndex = c;
  },
  fontFamily: (d, c) => {
    d.props.fontFamily = c;
  },
  fontWeight: (d, c) => {
    d.props.fontWeight = c;
  },
  fontStyle: (d, c) => {
    d.props.fontStyle = c;
  },
  fontStretch: (d, c) => {
    d.props.fontStretch = c;
  },
  fontSize: (d, c) => {
    d.props.fontSize = c;
  },
  text: (d, c) => {
    d.props.text = c;
  },
  textAlign: (d, c) => {
    d.props.textAlign = c;
  },
  contain: (d, c) => {
    d.props.contain = c;
  },
  offsetY: (d, c) => {
    d.props.offsetY = c;
  },
  scrollable: (d, c) => {
    d.props.scrollable = c;
  },
  scrollY: (d, c) => {
    d.props.scrollY = c;
  },
  letterSpacing: (d, c) => {
    d.props.letterSpacing = c;
  },
  lineHeight: (d, c) => {
    d.props.lineHeight = c;
  },
  maxLines: (d, c) => {
    d.props.maxLines = c;
  },
  textBaseline: (d, c) => {
    d.props.textBaseline = c;
  },
  verticalAlign: (d, c) => {
    d.props.verticalAlign = c;
  },
  overflowSuffix: (d, c) => {
    d.props.overflowSuffix = c;
  },
  debug: (d, c) => {
    d.props.debug = c;
  },
};
class eI {
  constructor(c) {
    _(this, "stage");
    _(this, "set");
    this.stage = c;
    const a = { ...a3, ...this.getPropertySetters() },
      f = {};
    (Object.keys(a).forEach(g => {
      Object.defineProperty(f, g, {
        value: (T, S) => {
          T.props[g] !== S && (a[g](T, S), this.stage.requestRender());
        },
        writable: !1,
        configurable: !1,
      });
    }),
      (this.set = f));
  }
  setStatus(c, a, f) {
    c.status !== a && ((c.status = a), c.emitter.emit(a, f));
  }
  setIsRenderable(c, a) {
    c.isRenderable = a;
  }
  destroyState(c) {
    (this.setStatus(c, "destroyed"), c.emitter.removeAllListeners());
  }
  scheduleUpdateState(c) {
    c.updateScheduled ||
      ((c.updateScheduled = !0),
      queueMicrotask(() => {
        c.status !== "destroyed" && ((c.updateScheduled = !1), this.updateState(c));
      }));
  }
}
class u3 {
  constructor() {
    _(this, "data", {});
  }
  reset() {
    this.data = {};
  }
  increment(c) {
    (this.data[c] || (this.data[c] = 0), this.data[c]++);
  }
  getData() {
    return { ...this.data };
  }
}
class l3 {
  constructor(c, a) {
    _(this, "stage");
    _(this, "memUsed", 0);
    _(this, "loadedTextures", []);
    _(this, "criticalThreshold");
    _(this, "targetThreshold");
    _(this, "cleanupInterval");
    _(this, "debugLogging");
    _(this, "lastCleanupTime", 0);
    _(this, "baselineMemoryAllocation");
    _(this, "hasWarnedAboveCritical", !1);
    _(this, "criticalCleanupRequested", !1);
    _(this, "doNotExceedCriticalThreshold");
    _(this, "frameTime", 0);
    this.stage = c;
    const { criticalThreshold: f, doNotExceedCriticalThreshold: g } = a;
    ((this.doNotExceedCriticalThreshold = g || !1), (this.criticalThreshold = Math.round(f)));
    const T = Math.max(0, Math.min(1, a.targetThresholdLevel));
    if (
      ((this.cleanupInterval = a.cleanupInterval),
      (this.debugLogging = a.debugLogging),
      (this.baselineMemoryAllocation = Math.round(a.baselineMemoryAllocation)),
      (this.targetThreshold = Math.max(Math.round(f * T), this.baselineMemoryAllocation)),
      (this.memUsed = Math.round(a.baselineMemoryAllocation)),
      a.debugLogging)
    ) {
      let S = 0;
      setInterval(() => {
        S !== this.memUsed &&
          ((S = this.memUsed),
          console.log(
            "[TextureMemoryManager] Memory used: "
              .concat(zE(this.memUsed), " mb / ")
              .concat(zE(this.criticalThreshold), " mb (")
              .concat(((this.memUsed / this.criticalThreshold) * 100).toFixed(1), "%)"),
          ));
      }, 1e3);
    }
    f === 0 && (this.setTextureMemUse = () => {});
  }
  setTextureMemUse(c, a) {
    if (((this.memUsed -= c.memUsed), a === 0)) {
      const f = this.loadedTextures.indexOf(c);
      (f !== -1 && (this.loadedTextures[f] = null), (c.memUsed = 0));
      return;
    } else if (((c.memUsed = a), (this.memUsed += a), this.loadedTextures.indexOf(c) === -1)) {
      const f = this.loadedTextures.indexOf(null);
      f !== -1 ? (this.loadedTextures[f] = c) : this.loadedTextures.push(c);
    }
    this.memUsed > this.criticalThreshold && (this.criticalCleanupRequested = !0);
  }
  checkCleanup() {
    return (
      this.criticalCleanupRequested ||
      (this.memUsed > this.targetThreshold && this.frameTime - this.lastCleanupTime >= this.cleanupInterval)
    );
  }
  checkCriticalCleanup() {
    return this.memUsed > this.criticalThreshold;
  }
  destroyTexture(c) {
    this.debugLogging === !0 &&
      console.log("[TextureMemoryManager] Destroying texture. State: ".concat(c.state));
    const a = this.loadedTextures.indexOf(c);
    (a !== -1 && (this.loadedTextures[a] = null),
      this.stage.txManager.removeTextureFromCache(c),
      c.destroy(),
      (this.memUsed -= c.memUsed),
      (c.memUsed = 0));
  }
  cleanup() {
    const c = this.criticalCleanupRequested;
    ((this.lastCleanupTime = this.frameTime),
      c === !0 &&
        this.stage.queueFrameEvent("criticalCleanup", {
          memUsed: this.memUsed,
          criticalThreshold: this.criticalThreshold,
        }),
      this.debugLogging === !0 &&
        console.log("[TextureMemoryManager] Cleaning up textures. Critical: ".concat(c, ".")));
    const a = c ? this.criticalThreshold : this.targetThreshold;
    let f = this.memUsed;
    for (let g = 0; g < this.loadedTextures.length && !(f < a); g++) {
      const T = this.loadedTextures[g];
      if (!T) continue;
      if (
        (T.type === $n.image || T.type === $n.noise || T.type === $n.renderToTexture) &&
        T.canBeCleanedUp() === !0
      ) {
        const h = T.memUsed;
        (this.destroyTexture(T), (f -= h));
      }
    }
    this.memUsed >= this.criticalThreshold
      ? (this.stage.queueFrameEvent("criticalCleanupFailed", {
          memUsed: this.memUsed,
          criticalThreshold: this.criticalThreshold,
        }),
        !this.hasWarnedAboveCritical &&
          (this.debugLogging === !0 || db === !1) &&
          (console.warn(
            "[TextureMemoryManager] Memory usage above critical threshold after cleanup: ".concat(
              this.memUsed,
            ),
          ),
          (this.hasWarnedAboveCritical = !0)))
      : ((this.criticalCleanupRequested = !1), (this.hasWarnedAboveCritical = !1));
  }
  getMemoryInfo() {
    let c = 0,
      a = this.baselineMemoryAllocation;
    for (const g of this.loadedTextures) g && g.renderable && ((c += 1), (a += g.memUsed));
    const f = this.loadedTextures.filter(g => g !== null).length;
    return {
      criticalThreshold: this.criticalThreshold,
      targetThreshold: this.targetThreshold,
      renderableMemUsed: a,
      memUsed: this.memUsed,
      renderableTexturesLoaded: c,
      loadedTextures: f,
      baselineMemoryAllocation: this.baselineMemoryAllocation,
    };
  }
}
class c3 {
  constructor(c, a) {
    _(this, "textureSource");
    _(this, "memManager");
    _(this, "state", "freed");
    ((this.memManager = c), (this.textureSource = a));
  }
  setTextureMemUse(c) {
    this.memManager.setTextureMemUse(this.textureSource, c);
  }
  get renderable() {
    return this.textureSource.renderable;
  }
}
class d3 {
  constructor(c) {
    _(this, "options");
    _(this, "mode");
    _(this, "stage");
    _(this, "txManager");
    _(this, "txMemManager");
    _(this, "shManager");
    _(this, "rttNodes", []);
    ((this.options = c),
      (this.stage = c.stage),
      (this.txManager = c.txManager),
      (this.txMemManager = c.txMemManager),
      (this.shManager = c.shManager));
  }
}
class f3 extends tv {
  constructor(a, f, g) {
    super(a, f);
    _(this, "textRenderer");
    _(this, "trState");
    _(this, "_textRendererOverride", null);
    _(this, "onTextLoaded", () => {
      const { contain: a } = this,
        f = this.trState.props.width,
        g = this.trState.props.height,
        T = this.trState.textW || 0,
        S = this.trState.textH || 0;
      (a === "both"
        ? ((this.props.width = f), (this.props.height = g))
        : a === "width"
          ? ((this.props.width = f), (this.props.height = S))
          : a === "none" && ((this.props.width = T), (this.props.height = S)),
        this.updateLocalTransform(),
        this.stage.requestRender(),
        this.emit("loaded", {
          type: "text",
          dimensions: { width: this.trState.textW || 0, height: this.trState.textH || 0 },
        }));
    });
    _(this, "onTextFailed", (a, f) => {
      this.emit("failed", { type: "text", error: f });
    });
    ((this._textRendererOverride = f.textRendererOverride), (this.textRenderer = g));
    const T = this.createState({
      x: 0,
      y: 0,
      width: f.width,
      height: f.height,
      textAlign: f.textAlign,
      color: f.color,
      zIndex: f.zIndex,
      contain: f.contain,
      scrollable: f.scrollable,
      scrollY: f.scrollY,
      offsetY: f.offsetY,
      letterSpacing: f.letterSpacing,
      debug: f.debug,
      fontFamily: f.fontFamily,
      fontSize: f.fontSize,
      fontStretch: f.fontStretch,
      fontStyle: f.fontStyle,
      fontWeight: f.fontWeight,
      text: f.text,
      lineHeight: f.lineHeight,
      maxLines: f.maxLines,
      textBaseline: f.textBaseline,
      verticalAlign: f.verticalAlign,
      overflowSuffix: f.overflowSuffix,
    });
    this.trState = T;
  }
  get width() {
    return this.props.width;
  }
  set width(a) {
    ((this.props.width = a),
      this.textRenderer.set.width(this.trState, a),
      this.contain === "none" && this.setUpdateType(he.Local));
  }
  get height() {
    return this.props.height;
  }
  set height(a) {
    ((this.props.height = a),
      this.textRenderer.set.height(this.trState, a),
      this.contain !== "both" && this.setUpdateType(he.Local));
  }
  get color() {
    return this.trState.props.color;
  }
  set color(a) {
    this.textRenderer.set.color(this.trState, a);
  }
  get text() {
    return this.trState.props.text;
  }
  set text(a) {
    this.textRenderer.set.text(this.trState, a);
  }
  get textRendererOverride() {
    return this._textRendererOverride;
  }
  set textRendererOverride(a) {
    ((this._textRendererOverride = a), this.textRenderer.destroyState(this.trState));
    const f = this.stage.resolveTextRenderer(this.trState.props, this._textRendererOverride);
    if (!f) {
      console.warn("Text Renderer not found for font", this.trState.props.fontFamily);
      return;
    }
    ((this.textRenderer = f), (this.trState = this.createState(this.trState.props)));
  }
  get fontSize() {
    return this.trState.props.fontSize;
  }
  set fontSize(a) {
    this.textRenderer.set.fontSize(this.trState, a);
  }
  get fontFamily() {
    return this.trState.props.fontFamily;
  }
  set fontFamily(a) {
    this.textRenderer.set.fontFamily(this.trState, a);
  }
  get fontStretch() {
    return this.trState.props.fontStretch;
  }
  set fontStretch(a) {
    this.textRenderer.set.fontStretch(this.trState, a);
  }
  get fontStyle() {
    return this.trState.props.fontStyle;
  }
  set fontStyle(a) {
    this.textRenderer.set.fontStyle(this.trState, a);
  }
  get fontWeight() {
    return this.trState.props.fontWeight;
  }
  set fontWeight(a) {
    this.textRenderer.set.fontWeight(this.trState, a);
  }
  get textAlign() {
    return this.trState.props.textAlign;
  }
  set textAlign(a) {
    this.textRenderer.set.textAlign(this.trState, a);
  }
  get contain() {
    return this.trState.props.contain;
  }
  set contain(a) {
    this.textRenderer.set.contain(this.trState, a);
  }
  get scrollable() {
    return this.trState.props.scrollable;
  }
  set scrollable(a) {
    this.textRenderer.set.scrollable(this.trState, a);
  }
  get scrollY() {
    return this.trState.props.scrollY;
  }
  set scrollY(a) {
    this.textRenderer.set.scrollY(this.trState, a);
  }
  get offsetY() {
    return this.trState.props.offsetY;
  }
  set offsetY(a) {
    this.textRenderer.set.offsetY(this.trState, a);
  }
  get letterSpacing() {
    return this.trState.props.letterSpacing;
  }
  set letterSpacing(a) {
    this.textRenderer.set.letterSpacing(this.trState, a);
  }
  get lineHeight() {
    return this.trState.props.lineHeight;
  }
  set lineHeight(a) {
    this.textRenderer.set.lineHeight(this.trState, a);
  }
  get maxLines() {
    return this.trState.props.maxLines;
  }
  set maxLines(a) {
    this.textRenderer.set.maxLines(this.trState, a);
  }
  get textBaseline() {
    return this.trState.props.textBaseline;
  }
  set textBaseline(a) {
    this.textRenderer.set.textBaseline(this.trState, a);
  }
  get verticalAlign() {
    return this.trState.props.verticalAlign;
  }
  set verticalAlign(a) {
    this.textRenderer.set.verticalAlign(this.trState, a);
  }
  get overflowSuffix() {
    return this.trState.props.overflowSuffix;
  }
  set overflowSuffix(a) {
    this.textRenderer.set.overflowSuffix(this.trState, a);
  }
  get debug() {
    return this.trState.props.debug;
  }
  set debug(a) {
    this.textRenderer.set.debug(this.trState, a);
  }
  update(a, f) {
    (super.update(a, f),
      this.globalTransform,
      this.textRenderer.set.x(this.trState, this.globalTransform.tx),
      this.textRenderer.set.y(this.trState, this.globalTransform.ty));
  }
  checkBasicRenderability() {
    return this.worldAlpha === 0 || this.isOutOfBounds() === !0
      ? !1
      : !!(this.trState && this.trState.props.text !== "");
  }
  setRenderable(a) {
    (super.setRenderable(a), this.textRenderer.setIsRenderable(this.trState, a));
  }
  renderQuads(a) {
    var f;
    if ((this.globalTransform, !this.textRenderer.renderQuads)) {
      super.renderQuads(a);
      return;
    }
    (this.parentHasRenderTexture &&
      (!a.renderToTextureActive || this.parentRenderTexture !== a.activeRttNode)) ||
      (this.parentHasRenderTexture &&
        (f = this.props.parent) != null &&
        f.rtt &&
        ((this.globalTransform = Tn.identity()),
        this.localTransform && this.globalTransform.multiply(this.localTransform)),
      this.globalTransform,
      this.textRenderer.renderQuads(
        this.trState,
        this.globalTransform,
        this.clippingRect,
        this.worldAlpha,
        this.parentHasRenderTexture,
        this.framebufferDimensions,
      ));
  }
  destroy() {
    (super.destroy(), this.textRenderer.destroyState(this.trState));
  }
  createState(a) {
    const f = this.textRenderer.createState(a, this);
    return (
      f.emitter.on("loaded", this.onTextLoaded),
      f.emitter.on("failed", this.onTextFailed),
      this.textRenderer.scheduleUpdateState(f),
      f
    );
  }
}
function h3(d) {
  const c = { boolean: !0, string: !0, number: !0, undefined: !0 },
    a = Object.keys(d);
  for (let f = 0; f < a.length; f++) {
    const g = a[f];
    if (!g) continue;
    const T = d[g],
      S = typeof T;
    (S === "string" &&
      T.length > 2048 &&
      (console.warn(
        "Custom Data value for ".concat(g, " is too long, it will be truncated to 2048 characters"),
      ),
      (d[g] = T.substring(0, 2048))),
      c[S] ||
        (console.warn(
          "Custom Data value for ".concat(g, " is not a boolean, string, or number, it will be ignored"),
        ),
        delete d[g]));
  }
  return d;
}
const p3 = 2e6;
class g3 {
  constructor(c) {
    _(this, "options");
    _(this, "animationManager");
    _(this, "txManager");
    _(this, "txMemManager");
    _(this, "fontManager");
    _(this, "textRenderers");
    _(this, "shManager");
    _(this, "renderer");
    _(this, "root");
    _(this, "interactiveNodes", new Set());
    _(this, "boundsMargin");
    _(this, "defShaderCtr");
    _(this, "strictBound");
    _(this, "preloadBound");
    _(this, "strictBounds");
    _(this, "defaultTexture", null);
    _(this, "targetFrameTime", 0);
    _(this, "eventBus");
    _(this, "deltaTime", 0);
    _(this, "lastFrameTime", 0);
    _(this, "currentFrameTime", 0);
    _(this, "fpsNumFrames", 0);
    _(this, "fpsElapsedTime", 0);
    _(this, "numQuadsRendered", 0);
    _(this, "renderRequested", !1);
    _(this, "frameEventQueue", []);
    _(this, "fontResolveMap", {});
    _(this, "contextSpy", null);
    this.options = c;
    const {
      canvas: a,
      clearColor: f,
      appWidth: g,
      appHeight: T,
      boundsMargin: S,
      enableContextSpy: h,
      forceWebGL2: M,
      numImageWorkers: P,
      textureMemory: N,
      renderEngine: D,
      fontEngines: V,
      createImageBitmapSupport: K,
      maxRetryCount: J,
    } = c;
    ((this.eventBus = c.eventBus),
      (this.targetFrameTime = c.targetFPS > 0 ? 1e3 / c.targetFPS : 0),
      (this.txManager = new $b(this, { numImageWorkers: P, createImageBitmapSupport: K, maxRetryCount: J })),
      this.txManager.on("initialized", () => {
        this.requestRender();
      }),
      (this.txMemManager = new l3(this, N)),
      (this.shManager = new o3()),
      (this.animationManager = new Rb()),
      (this.contextSpy = h ? new u3() : null),
      (this.strictBounds = c.strictBounds));
    let Z = [0, 0, 0, 0];
    (S && (Z = Array.isArray(S) ? S : [S, S, S, S]),
      (this.boundsMargin = Z),
      (this.strictBound = Ca(0, 0, g, T)),
      (this.preloadBound = ev(this.strictBound, Z)));
    const ue = {
      stage: this,
      canvas: a,
      pixelRatio: c.devicePhysicalPixelRatio * c.deviceLogicalPixelRatio,
      clearColor: f != null ? f : 4278190080,
      bufferMemory: p3,
      txManager: this.txManager,
      txMemManager: this.txMemManager,
      shManager: this.shManager,
      contextSpy: this.contextSpy,
      forceWebGL2: M,
    };
    this.renderer = new D(ue);
    const le = this.renderer.mode || "webgl";
    (this.createDefaultTexture(),
      (this.defShaderCtr = this.renderer.getDefShaderCtr()),
      cb(le),
      (this.txManager.renderer = this.renderer),
      (this.textRenderers = {}),
      V.forEach(se => {
        const x = new se(this),
          Y = x.type;
        if (Y === "sdf" && le === "canvas") {
          console.warn("SdfTextRenderer is not compatible with Canvas renderer. Skipping...");
          return;
        }
        x instanceof eI &&
          (Y === "canvas" ? (this.textRenderers.canvas = x) : Y === "sdf" && (this.textRenderers.sdf = x));
      }),
      Object.keys(this.textRenderers).length === 0 &&
        console.warn("No text renderers available. Your text will not render."),
      (this.fontManager = new Jb(this.textRenderers)));
    const q = new tv(this, {
      x: 0,
      y: 0,
      width: g,
      height: T,
      alpha: 1,
      autosize: !1,
      boundsMargin: null,
      clipping: !1,
      color: 0,
      colorTop: 0,
      colorBottom: 0,
      colorLeft: 0,
      colorRight: 0,
      colorTl: 0,
      colorTr: 0,
      colorBl: 0,
      colorBr: 0,
      zIndex: 0,
      zIndexLocked: 0,
      scaleX: 1,
      scaleY: 1,
      mountX: 0,
      mountY: 0,
      mount: 0,
      pivot: 0.5,
      pivotX: 0.5,
      pivotY: 0.5,
      rotation: 0,
      parent: null,
      texture: null,
      textureOptions: {},
      shader: this.defShaderCtr,
      rtt: !1,
      src: null,
      scale: 1,
      preventCleanup: !1,
      strictBounds: this.strictBounds,
    });
    ((this.root = q), Mb(this));
  }
  setClearColor(c) {
    (this.renderer.updateClearColor(c), (this.renderRequested = !0));
  }
  updateTargetFrameTime() {
    this.targetFrameTime = this.options.targetFPS > 0 ? 1e3 / this.options.targetFPS : 0;
  }
  updateFrameTime() {
    const c = eh();
    ((this.lastFrameTime = this.currentFrameTime),
      (this.currentFrameTime = c),
      (this.deltaTime = this.lastFrameTime ? c - this.lastFrameTime : 100 / 6),
      (this.txManager.frameTime = c),
      (this.txMemManager.frameTime = c),
      this.eventBus.emit("frameTick", { time: this.currentFrameTime, delta: this.deltaTime }));
  }
  createDefaultTexture() {
    ((this.defaultTexture = this.txManager.createTexture("ColorTexture", { color: 4294967295 })),
      this.defaultTexture instanceof oh,
      this.txManager.loadTexture(this.defaultTexture, !0),
      this.defaultTexture.setRenderableOwner("stage", !0),
      this.defaultTexture.once("loaded", () => {
        this.requestRender();
      }));
  }
  updateAnimations() {
    const { animationManager: c } = this;
    this.root && c.update(this.deltaTime);
  }
  hasSceneUpdates() {
    return !!this.root.updateType || this.renderRequested || this.txManager.hasUpdates();
  }
  drawFrame() {
    const { renderer: c, renderRequested: a } = this;
    (this.root.updateType !== 0 && this.root.update(this.deltaTime, this.root.clippingRect),
      this.txManager.processSome(this.options.textureProcessingTimeLimit).catch(f => {
        console.error("Error processing textures:", f);
      }),
      c.reset(),
      c.rttNodes.length > 0 && c.renderRTTNodes(),
      this.addQuads(this.root),
      c == null || c.render(),
      this.calculateFps(),
      this.calculateQuads(),
      a && (this.renderRequested = !1),
      this.txMemManager.criticalCleanupRequested === !0 && this.txMemManager.cleanup());
  }
  queueFrameEvent(c, a) {
    this.frameEventQueue.push([c, a]);
  }
  flushFrameEvents() {
    for (const [c, a] of this.frameEventQueue) this.eventBus.emit(c, a);
    this.frameEventQueue = [];
  }
  calculateFps() {
    var a, f, g;
    const { fpsUpdateInterval: c } = this.options;
    if (c && (this.fpsNumFrames++, (this.fpsElapsedTime += this.deltaTime), this.fpsElapsedTime >= c)) {
      const T = Math.round((this.fpsNumFrames * 1e3) / this.fpsElapsedTime);
      ((this.fpsNumFrames = 0),
        (this.fpsElapsedTime = 0),
        this.queueFrameEvent("fpsUpdate", {
          fps: T,
          contextSpyData: (f = (a = this.contextSpy) == null ? void 0 : a.getData()) != null ? f : null,
        }),
        (g = this.contextSpy) == null || g.reset());
    }
  }
  calculateQuads() {
    const c = this.renderer.getQuadCount();
    c &&
      c !== this.numQuadsRendered &&
      ((this.numQuadsRendered = c), this.queueFrameEvent("quadsUpdate", { quads: c }));
  }
  addQuads(c) {
    (this.renderer, c.isRenderable === !0 && c.renderQuads(this.renderer));
    for (let a = 0; a < c.children.length; a++) {
      const f = c.children[a];
      f !== void 0 &&
        (f.worldAlpha === 0 ||
          (f.strictBounds === !0 && f.renderState === Rn.OutOfBounds) ||
          this.addQuads(f));
    }
  }
  requestRender() {
    this.renderRequested = !0;
  }
  findNodesAtPoint(c) {
    const a = c.x / this.options.deviceLogicalPixelRatio,
      f = c.y / this.options.deviceLogicalPixelRatio,
      g = [];
    for (const T of this.interactiveNodes)
      T.isRenderable !== !1 && vb(a, f, T.renderBound) === !0 && g.push(T);
    return g;
  }
  getNodeFromPosition(c) {
    const a = this.findNodesAtPoint(c);
    if (a.length === 0) return null;
    let f = a[0];
    for (let g = 0; g < a.length; g++) a[g].zIndex > f.zIndex && (f = a[g]);
    return f || null;
  }
  resolveTextRenderer(c, a = null) {
    const f = ""
      .concat(c.fontFamily)
      .concat(c.fontStyle)
      .concat(c.fontWeight)
      .concat(c.fontStretch)
      .concat(a || "");
    if (this.fontResolveMap[f] !== void 0) return this.fontResolveMap[f];
    let g = a,
      T = !1;
    if (g) {
      const h = this.textRenderers[g];
      h
        ? h.canRenderFont(c) ||
          (console.warn("Cannot use override text renderer '".concat(g, "' for font"), c),
          (g = null),
          (T = !0))
        : (console.warn("Text renderer override '".concat(g, "' not found.")), (g = null), (T = !0));
    }
    if (!g) {
      for (const [h, M] of Object.entries(this.textRenderers))
        if (M.canRenderFont(c)) {
          g = h;
          break;
        }
      !g && this.textRenderers.canvas !== void 0 && (g = "canvas");
    }
    if ((T && console.warn("Falling back to text renderer ".concat(String(g))), !g)) return null;
    const S = this.textRenderers[g];
    return ((this.fontResolveMap[f] = S), S);
  }
  createShaderCtr(c, a) {
    return this.shManager.loadShader(c, a);
  }
  createNode(c) {
    const a = this.resolveNodeDefaults(c);
    return new tv(this, a);
  }
  createTextNode(c) {
    var T, S, h, M, P, N, D, V, K, J, Z, ue, le, q, se, x, Y, ye;
    const a = (T = c.fontSize) != null ? T : 16,
      f = {
        ...this.resolveNodeDefaults(c),
        text: (S = c.text) != null ? S : "",
        textRendererOverride: (h = c.textRendererOverride) != null ? h : null,
        fontSize: a,
        fontFamily: (M = c.fontFamily) != null ? M : "sans-serif",
        fontStyle: (P = c.fontStyle) != null ? P : "normal",
        fontWeight: (N = c.fontWeight) != null ? N : "normal",
        fontStretch: (D = c.fontStretch) != null ? D : "normal",
        textAlign: (V = c.textAlign) != null ? V : "left",
        contain: (K = c.contain) != null ? K : "none",
        scrollable: (J = c.scrollable) != null ? J : !1,
        scrollY: (Z = c.scrollY) != null ? Z : 0,
        offsetY: (ue = c.offsetY) != null ? ue : 0,
        letterSpacing: (le = c.letterSpacing) != null ? le : 0,
        lineHeight: c.lineHeight,
        maxLines: (q = c.maxLines) != null ? q : 0,
        textBaseline: (se = c.textBaseline) != null ? se : "alphabetic",
        verticalAlign: (x = c.verticalAlign) != null ? x : "middle",
        overflowSuffix: (Y = c.overflowSuffix) != null ? Y : "...",
        debug: (ye = c.debug) != null ? ye : {},
        shaderProps: null,
      },
      g = this.resolveTextRenderer(f, c.textRendererOverride);
    if (!g) throw new Error("No compatible text renderer found for ".concat(f.fontFamily));
    return new f3(this, f, g);
  }
  setBoundsMargin(c) {
    ((this.boundsMargin = Array.isArray(c) ? c : [c, c, c, c]), this.root.setUpdateType(he.RenderBounds));
  }
  resolveNodeDefaults(c) {
    var M,
      P,
      N,
      D,
      V,
      K,
      J,
      Z,
      ue,
      le,
      q,
      se,
      x,
      Y,
      ye,
      fe,
      xe,
      E,
      re,
      te,
      ge,
      pe,
      oe,
      ve,
      Oe,
      gt,
      rn,
      Zt,
      jt,
      dn,
      wn,
      F,
      It,
      qn,
      bt,
      Sn,
      Vt,
      An,
      Nr,
      ar,
      de,
      $r,
      Tr,
      ur,
      hi,
      En,
      Be,
      lr,
      Es,
      bh,
      Nh,
      Fa,
      Ba;
    const a = (M = c.color) != null ? M : 4294967295,
      f = (D = (N = (P = c.colorTl) != null ? P : c.colorTop) != null ? N : c.colorLeft) != null ? D : a,
      g = (J = (K = (V = c.colorTr) != null ? V : c.colorTop) != null ? K : c.colorRight) != null ? J : a,
      T =
        (le = (ue = (Z = c.colorBl) != null ? Z : c.colorBottom) != null ? ue : c.colorLeft) != null ? le : a,
      S =
        (x = (se = (q = c.colorBr) != null ? q : c.colorBottom) != null ? se : c.colorRight) != null ? x : a;
    let h = {};
    return (
      this.options.inspector === !0 && (h = h3((Y = c.data) != null ? Y : {})),
      {
        x: (ye = c.x) != null ? ye : 0,
        y: (fe = c.y) != null ? fe : 0,
        width: (xe = c.width) != null ? xe : 0,
        height: (E = c.height) != null ? E : 0,
        alpha: (re = c.alpha) != null ? re : 1,
        autosize: (te = c.autosize) != null ? te : !1,
        boundsMargin: (ge = c.boundsMargin) != null ? ge : null,
        clipping: (pe = c.clipping) != null ? pe : !1,
        color: a,
        colorTop: (oe = c.colorTop) != null ? oe : a,
        colorBottom: (ve = c.colorBottom) != null ? ve : a,
        colorLeft: (Oe = c.colorLeft) != null ? Oe : a,
        colorRight: (gt = c.colorRight) != null ? gt : a,
        colorBl: T,
        colorBr: S,
        colorTl: f,
        colorTr: g,
        zIndex: (rn = c.zIndex) != null ? rn : 0,
        zIndexLocked: (Zt = c.zIndexLocked) != null ? Zt : 0,
        parent: (jt = c.parent) != null ? jt : null,
        texture: (dn = c.texture) != null ? dn : null,
        textureOptions: (wn = c.textureOptions) != null ? wn : {},
        shader: (F = c.shader) != null ? F : this.defShaderCtr,
        src: (It = c.src) != null ? It : null,
        srcHeight: c.srcHeight,
        srcWidth: c.srcWidth,
        srcX: c.srcX,
        srcY: c.srcY,
        scale: (qn = c.scale) != null ? qn : null,
        scaleX: (Sn = (bt = c.scaleX) != null ? bt : c.scale) != null ? Sn : 1,
        scaleY: (An = (Vt = c.scaleY) != null ? Vt : c.scale) != null ? An : 1,
        mount: (Nr = c.mount) != null ? Nr : 0,
        mountX: (de = (ar = c.mountX) != null ? ar : c.mount) != null ? de : 0,
        mountY: (Tr = ($r = c.mountY) != null ? $r : c.mount) != null ? Tr : 0,
        pivot: (ur = c.pivot) != null ? ur : 0.5,
        pivotX: (En = (hi = c.pivotX) != null ? hi : c.pivot) != null ? En : 0.5,
        pivotY: (lr = (Be = c.pivotY) != null ? Be : c.pivot) != null ? lr : 0.5,
        rotation: (Es = c.rotation) != null ? Es : 0,
        rtt: (bh = c.rtt) != null ? bh : !1,
        data: h,
        preventCleanup: (Nh = c.preventCleanup) != null ? Nh : !1,
        imageType: c.imageType,
        interactive: (Fa = c.interactive) != null ? Fa : !1,
        strictBounds: (Ba = c.strictBounds) != null ? Ba : this.strictBounds,
      }
    );
  }
  cleanup() {
    this.txMemManager.cleanup();
  }
}
class m3 extends As {
  constructor(a, f) {
    var Z, ue, le, q, se, x, Y, ye, fe, xe, E, re, te;
    super();
    _(this, "root");
    _(this, "canvas");
    _(this, "settings");
    _(this, "stage");
    _(this, "inspector", null);
    const g = {
        criticalThreshold: ((Z = a.textureMemory) == null ? void 0 : Z.criticalThreshold) || 124e6,
        targetThresholdLevel: ((ue = a.textureMemory) == null ? void 0 : ue.targetThresholdLevel) || 0.5,
        cleanupInterval: ((le = a.textureMemory) == null ? void 0 : le.cleanupInterval) || 5e3,
        debugLogging: ((q = a.textureMemory) == null ? void 0 : q.debugLogging) || !1,
        baselineMemoryAllocation:
          ((se = a.textureMemory) == null ? void 0 : se.baselineMemoryAllocation) || 26e6,
        doNotExceedCriticalThreshold:
          ((x = a.textureMemory) == null ? void 0 : x.doNotExceedCriticalThreshold) || !1,
      },
      T = {
        appWidth: a.appWidth || 1920,
        appHeight: a.appHeight || 1080,
        textureMemory: g,
        boundsMargin: a.boundsMargin || 0,
        deviceLogicalPixelRatio: a.deviceLogicalPixelRatio || 1,
        devicePhysicalPixelRatio: a.devicePhysicalPixelRatio || window.devicePixelRatio,
        clearColor: (Y = a.clearColor) != null ? Y : 0,
        fpsUpdateInterval: a.fpsUpdateInterval || 0,
        targetFPS: a.targetFPS || 0,
        numImageWorkers: a.numImageWorkers !== void 0 ? a.numImageWorkers : 2,
        enableContextSpy: (ye = a.enableContextSpy) != null ? ye : !1,
        forceWebGL2: (fe = a.forceWebGL2) != null ? fe : !1,
        inspector: (xe = a.inspector) != null ? xe : !1,
        renderEngine: a.renderEngine,
        quadBufferSize: (E = a.quadBufferSize) != null ? E : 4 * 1024 * 1024,
        fontEngines: a.fontEngines,
        strictBounds: (re = a.strictBounds) != null ? re : !0,
        textureProcessingTimeLimit: a.textureProcessingTimeLimit || 42,
        canvas: a.canvas || document.createElement("canvas"),
        createImageBitmapSupport: a.createImageBitmapSupport || "full",
        maxRetryCount: (te = a.maxRetryCount) != null ? te : 5,
      };
    this.settings = T;
    const {
        appWidth: S,
        appHeight: h,
        deviceLogicalPixelRatio: M,
        devicePhysicalPixelRatio: P,
        inspector: N,
        canvas: D,
      } = T,
      V = S * M,
      K = h * M;
    ((this.canvas = D),
      (D.width = V * P),
      (D.height = K * P),
      (D.style.width = "".concat(V, "px")),
      (D.style.height = "".concat(K, "px")),
      (this.stage = new g3({
        appWidth: this.settings.appWidth,
        appHeight: this.settings.appHeight,
        boundsMargin: this.settings.boundsMargin,
        clearColor: this.settings.clearColor,
        canvas: this.canvas,
        deviceLogicalPixelRatio: this.settings.deviceLogicalPixelRatio,
        devicePhysicalPixelRatio: this.settings.devicePhysicalPixelRatio,
        enableContextSpy: this.settings.enableContextSpy,
        forceWebGL2: this.settings.forceWebGL2,
        fpsUpdateInterval: this.settings.fpsUpdateInterval,
        targetFPS: this.settings.targetFPS,
        numImageWorkers: this.settings.numImageWorkers,
        renderEngine: this.settings.renderEngine,
        textureMemory: g,
        eventBus: this,
        quadBufferSize: this.settings.quadBufferSize,
        fontEngines: this.settings.fontEngines,
        inspector: this.settings.inspector !== null,
        strictBounds: this.settings.strictBounds,
        textureProcessingTimeLimit: this.settings.textureProcessingTimeLimit,
        createImageBitmapSupport: this.settings.createImageBitmapSupport,
        maxRetryCount: this.settings.maxRetryCount,
      })),
      (this.root = this.stage.root));
    let J;
    if ((typeof f == "string" ? (J = document.getElementById(f)) : (J = f), !J))
      throw new Error("Could not find target element");
    J.appendChild(D);
  }
  createNode(a) {
    const f = this.stage.createNode(a);
    return this.inspector ? this.inspector.createNode(f) : f;
  }
  createTextNode(a) {
    const f = this.stage.createTextNode(a);
    return this.inspector ? this.inspector.createTextNode(f) : f;
  }
  destroyNode(a) {
    return (this.inspector && this.inspector.destroyNode(a.id), a.destroy());
  }
  createTexture(a, f) {
    return this.stage.txManager.createTexture(a, f);
  }
  createShader(a, f) {
    return this.stage.shManager.loadShader(a, f);
  }
  createDynamicShader(a) {
    return this.stage.shManager.loadDynamicShader({ effects: a });
  }
  createEffect(a, f, g) {
    return { name: g, type: a, props: f };
  }
  getNodeById(a) {
    var T;
    const f = (T = this.stage) == null ? void 0 : T.root;
    if (!f) return null;
    const g = S => {
      if (S.id === a) return S;
      for (const h of S.children) {
        const M = g(h);
        if (M) return M;
      }
      return null;
    };
    return g(f);
  }
  toggleFreeze() {
    throw new Error("Not implemented");
  }
  advanceFrame() {
    throw new Error("Not implemented");
  }
  getBufferInfo() {
    return this.stage.renderer.getBufferInfo();
  }
  rerender() {
    this.stage.requestRender();
  }
  cleanup() {
    this.stage.cleanup();
  }
  setClearColor(a) {
    this.stage.setClearColor(a);
  }
  get targetFPS() {
    return this.stage.options.targetFPS;
  }
  set targetFPS(a) {
    ((this.stage.options.targetFPS = a > 0 ? a : 0), this.stage.updateTargetFrameTime());
  }
}
class tI extends As {
  constructor(a) {
    super();
    _(this, "fontFamily");
    _(this, "descriptors");
    _(this, "loaded", !1);
    _(this, "metrics", null);
    const { fontFamily: f, descriptors: g, metrics: T } = a;
    (T &&
      (this.metrics = {
        ascender: T.ascender / T.unitsPerEm,
        descender: T.descender / T.unitsPerEm,
        lineGap: T.lineGap / T.unitsPerEm,
      }),
      (this.fontFamily = f),
      (this.descriptors = { style: "normal", weight: "normal", stretch: "normal", ...g }));
  }
  static convertToCssFontFaceDescriptors(a) {
    return {
      style: a.style,
      weight: typeof a.weight == "number" ? "".concat(a.weight) : a.weight,
      stretch: a.stretch,
      unicodeRange: a.unicodeRange,
      featureSettings: a.featureSettings,
      display: a.display,
    };
  }
}
class y3 extends tI {
  constructor(a) {
    super(a);
    _(this, "fontFace");
    _(this, "fontUrl");
    const { fontFamily: f, fontUrl: g } = a,
      T = g.replace(/\(|\)/g, ""),
      S = this.descriptors;
    let h = {
      style: S.style,
      weight: typeof S.weight == "number" ? "".concat(S.weight) : S.weight,
      stretch: S.stretch,
      unicodeRange: S.unicodeRange,
      featureSettings: S.featureSettings,
      display: S.display,
    };
    for (const P in h) {
      const N = P;
      h[N] === void 0 && delete h[N];
    }
    const M = new FontFace(f, "url(".concat(T, ")"), h);
    (T.length > 0
      ? M.load()
          .then(() => {
            ((this.loaded = !0), this.emit("loaded"));
          })
          .catch(console.error)
      : ((this.loaded = !0), this.emit("loaded")),
      (this.fontFace = M),
      (this.fontUrl = g));
  }
}
class v3 {}
class nI extends v3 {
  constructor(a, f, g, T, S, h, M, P, N, D, V, K, J) {
    super();
    _(this, "glw");
    _(this, "options");
    _(this, "buffers");
    _(this, "shader");
    _(this, "shaderProps");
    _(this, "alpha");
    _(this, "clippingRect");
    _(this, "dimensions");
    _(this, "bufferIdx");
    _(this, "zIndex");
    _(this, "renderToTexture");
    _(this, "parentHasRenderTexture");
    _(this, "framebufferDimensions");
    _(this, "length", 0);
    _(this, "numQuads", 0);
    _(this, "textures", []);
    _(this, "maxTextures");
    ((this.glw = a),
      (this.options = f),
      (this.buffers = g),
      (this.shader = T),
      (this.shaderProps = S),
      (this.alpha = h),
      (this.clippingRect = M),
      (this.dimensions = P),
      (this.bufferIdx = N),
      (this.zIndex = D),
      (this.renderToTexture = V),
      (this.parentHasRenderTexture = K),
      (this.framebufferDimensions = J),
      (this.maxTextures = T.supportsIndexedTextures ? a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS) : 1));
  }
  addTexture(a) {
    const { textures: f, maxTextures: g } = this;
    let T = -1;
    const S = f.length;
    for (let h = 0; h < S; h++)
      if (f[h] === a) {
        T = h;
        break;
      }
    return T !== -1 ? T : S >= g ? 4294967295 : (this.textures.push(a), S);
  }
  draw() {
    const { glw: a, shader: f, shaderProps: g, options: T } = this,
      { shManager: S } = T;
    (S.useShader(f), f.bindRenderOp(this, g));
    const h = (this.bufferIdx / 32) * 6 * 2;
    if (this.clippingRect.valid) {
      const { x: M, y: P, width: N, height: D } = this.clippingRect,
        V = this.parentHasRenderTexture ? 1 : T.pixelRatio,
        K = T.canvas.height,
        J = Math.round(M * V),
        Z = Math.round(N * V),
        ue = Math.round(D * V);
      let le = Math.round(K - ue - P * V);
      (this.parentHasRenderTexture &&
        (le = this.framebufferDimensions ? this.framebufferDimensions.height - this.dimensions.height : 0),
        a.setScissorTest(!0),
        a.scissor(J, le, Z, ue));
    } else a.setScissorTest(!1);
    a.drawElements(a.TRIANGLES, 6 * this.numQuads, a.UNSIGNED_SHORT, h);
  }
}
function x3(d) {
  const c = {
    MAX_RENDERBUFFER_SIZE: 0,
    MAX_TEXTURE_SIZE: 0,
    MAX_VIEWPORT_DIMS: 0,
    MAX_VERTEX_TEXTURE_IMAGE_UNITS: 0,
    MAX_TEXTURE_IMAGE_UNITS: 0,
    MAX_COMBINED_TEXTURE_IMAGE_UNITS: 0,
    MAX_VERTEX_ATTRIBS: 0,
    MAX_VARYING_VECTORS: 0,
    MAX_VERTEX_UNIFORM_VECTORS: 0,
    MAX_FRAGMENT_UNIFORM_VECTORS: 0,
  };
  return (
    Object.keys(c).forEach(f => {
      c[f] = d.getParameter(d[f]);
    }),
    c
  );
}
function T3(d) {
  const c = {
    ANGLE_instanced_arrays: null,
    WEBGL_compressed_texture_s3tc: null,
    WEBGL_compressed_texture_astc: null,
    WEBGL_compressed_texture_etc: null,
    WEBGL_compressed_texture_etc1: null,
    WEBGL_compressed_texture_pvrtc: null,
    WEBKIT_WEBGL_compressed_texture_pvrtc: null,
    WEBGL_compressed_texture_s3tc_srgb: null,
    OES_vertex_array_object: null,
  };
  return (
    Object.keys(c).forEach(f => {
      c[f] = d.getExtension(f);
    }),
    c
  );
}
function w3(d, c) {
  const a = ~~(c / 80),
    f = new Uint16Array(a * 6);
  for (let T = 0, S = 0; T < a; T += 6, S += 4)
    ((f[T] = S),
      (f[T + 1] = S + 1),
      (f[T + 2] = S + 2),
      (f[T + 3] = S + 2),
      (f[T + 4] = S + 1),
      (f[T + 5] = S + 3));
  const g = d.createBuffer();
  d.elementArrayBufferData(g, f, d.STATIC_DRAW);
}
function S3(d) {
  return (
    d !== null &&
    ((typeof d == "object" && d.constructor && d.constructor.name === "HTMLImageElement") ||
      (typeof HTMLImageElement < "u" && d instanceof HTMLImageElement))
  );
}
const A3 = new Uint8Array([0, 0, 0, 0]);
class Cv extends c3 {
  constructor(a, f, g) {
    super(f, g);
    _(this, "glw");
    _(this, "_nativeCtxTexture", null);
    _(this, "_w", 0);
    _(this, "_h", 0);
    _(this, "txCoordX1", 0);
    _(this, "txCoordY1", 0);
    _(this, "txCoordX2", 1);
    _(this, "txCoordY2", 1);
    this.glw = a;
  }
  checkGLError() {
    if (this.state === "failed") return !0;
    const a = this.glw.getError();
    return a !== 0
      ? ((this.state = "failed"),
        this.textureSource.setState("failed", new Error("WebGL Error: ".concat(a))),
        !0)
      : !1;
  }
  get ctxTexture() {
    return this.state === "freed" ? (this.load(), null) : (this._nativeCtxTexture, this._nativeCtxTexture);
  }
  get w() {
    return this._w;
  }
  get h() {
    return this._h;
  }
  async load() {
    if (this.state === "loading" || this.state === "loaded") return Promise.resolve();
    if (
      ((this.state = "loading"),
      this.textureSource.setState("loading"),
      (this._nativeCtxTexture = this.createNativeCtxTexture()),
      this._nativeCtxTexture === null)
    ) {
      ((this.state = "failed"),
        this.textureSource.setState("failed", new Error("WebGL Texture creation failed")));
      return;
    }
    try {
      const { width: a, height: f } = await this.onLoadRequest();
      if (this.state === "freed") return;
      ((this.state = "loaded"),
        (this._w = a),
        (this._h = f),
        this.textureSource.setState("loaded", { width: a, height: f }),
        this.textureSource.freeTextureData());
    } catch (a) {
      if (this.state === "freed") return;
      ((this.state = "failed"), this.textureSource.setState("failed"));
    }
  }
  async onLoadRequest() {
    var N, D;
    const { glw: a } = this,
      f = this.textureSource.textureData;
    if (this.state === "failed") return { width: 0, height: 0 };
    if (f === null || this._nativeCtxTexture === null)
      return (
        (this.state = "failed"),
        this.textureSource.setState("failed", new Error("No texture data available")),
        { width: 0, height: 0 }
      );
    (a.texImage2D(0, a.RGBA, 1, 1, 0, a.RGBA, a.UNSIGNED_BYTE, null), this.setTextureMemUse(A3.byteLength));
    let g = 0,
      T = 0;
    if ((a.activeTexture(0), this.checkGLError() === !0)) return { width: 0, height: 0 };
    const S = f.data,
      h = a.RGBA,
      M = 4,
      P = 1.1;
    if ((typeof ImageBitmap < "u" && S instanceof ImageBitmap) || S instanceof ImageData || S3(S)) {
      if (
        ((g = S.width),
        (T = S.height),
        a.bindTexture(this._nativeCtxTexture),
        a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !!f.premultiplyAlpha),
        a.texImage2D(0, h, h, a.UNSIGNED_BYTE, S),
        this.checkGLError() === !0)
      )
        return { width: 0, height: 0 };
      this.setTextureMemUse(T * g * M * P);
    } else if (S && "mipmaps" in S && S.mipmaps) {
      const { mipmaps: V, type: K, blockInfo: J } = S;
      if ((Gb[K](a, this._nativeCtxTexture, S), this.checkGLError() === !0)) return { width: 0, height: 0 };
      ((g = S.width),
        (T = S.height),
        (this.txCoordX2 = g / (Math.ceil(g / J.width) * J.width)),
        (this.txCoordY2 = T / (Math.ceil(T / J.height) * J.height)),
        this.setTextureMemUse((D = (N = V[0]) == null ? void 0 : N.byteLength) != null ? D : 0));
    } else if (S && S instanceof Uint8Array) {
      if (
        ((g = 1),
        (T = 1),
        a.bindTexture(this._nativeCtxTexture),
        a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !!f.premultiplyAlpha),
        a.texImage2D(0, h, g, T, 0, h, a.UNSIGNED_BYTE, S),
        this.checkGLError() === !0)
      )
        return { width: 0, height: 0 };
      this.setTextureMemUse(g * T * M);
    } else
      return (
        console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned", f),
        (this.state = "failed"),
        this.textureSource.setState("failed", new Error("Unexpected texture data")),
        { width: 0, height: 0 }
      );
    return { width: g, height: T };
  }
  free() {
    this.state !== "freed" && ((this.state = "freed"), this.textureSource.setState("freed"), this.release());
  }
  release() {
    ((this._w = 0),
      (this._h = 0),
      this._nativeCtxTexture !== null &&
        (this.glw.deleteTexture(this._nativeCtxTexture),
        this.setTextureMemUse(0),
        (this._nativeCtxTexture = null)),
      this.textureSource.freeTextureData());
  }
  createNativeCtxTexture() {
    const { glw: a } = this,
      f = a.createTexture();
    return !f ||
      (a.activeTexture(0),
      a.bindTexture(f),
      a.texParameteri(a.TEXTURE_MAG_FILTER, a.LINEAR),
      a.texParameteri(a.TEXTURE_MIN_FILTER, a.LINEAR),
      a.texParameteri(a.TEXTURE_WRAP_S, a.CLAMP_TO_EDGE),
      a.texParameteri(a.TEXTURE_WRAP_T, a.CLAMP_TO_EDGE),
      a.getError() !== 0)
      ? null
      : f;
  }
}
class E3 extends Cv {
  constructor(c, a, f) {
    super(c, a, f);
  }
  async onLoadRequest() {
    var a, f;
    const c = this.textureSource.textureData;
    return c.data instanceof Uint8Array
      ? { width: 1, height: 1 }
      : {
          width: ((a = c.data) == null ? void 0 : a.width) || 0,
          height: ((f = c.data) == null ? void 0 : f.height) || 0,
        };
  }
}
class rI {
  constructor(c) {
    _(this, "config");
    this.config = c;
  }
  getBuffer(c) {
    var a;
    return (a = this.config.find(f => f.attributes[c])) == null ? void 0 : a.buffer;
  }
  getAttributeInfo(c) {
    var a;
    return (a = this.config.find(f => f.attributes[c])) == null ? void 0 : a.attributes[c];
  }
}
function I3(d) {
  return self.WebGL2RenderingContext && d instanceof self.WebGL2RenderingContext;
}
class C3 {
  constructor(c) {
    _(this, "gl");
    _(this, "activeTextureUnit", 0);
    _(this, "texture2dUnits");
    _(this, "texture2dParams", new WeakMap());
    _(this, "scissorEnabled");
    _(this, "scissorX");
    _(this, "scissorY");
    _(this, "scissorWidth");
    _(this, "scissorHeight");
    _(this, "blendEnabled");
    _(this, "blendSrcRgb");
    _(this, "blendDstRgb");
    _(this, "blendSrcAlpha");
    _(this, "blendDstAlpha");
    _(this, "boundArrayBuffer");
    _(this, "boundElementArrayBuffer");
    _(this, "curProgram");
    _(this, "canvas");
    _(this, "MAX_RENDERBUFFER_SIZE");
    _(this, "MAX_TEXTURE_SIZE");
    _(this, "MAX_VIEWPORT_DIMS");
    _(this, "MAX_VERTEX_TEXTURE_IMAGE_UNITS");
    _(this, "MAX_TEXTURE_IMAGE_UNITS");
    _(this, "MAX_COMBINED_TEXTURE_IMAGE_UNITS");
    _(this, "MAX_VERTEX_ATTRIBS");
    _(this, "MAX_VARYING_VECTORS");
    _(this, "MAX_VERTEX_UNIFORM_VECTORS");
    _(this, "MAX_FRAGMENT_UNIFORM_VECTORS");
    _(this, "TEXTURE_MAG_FILTER");
    _(this, "TEXTURE_MIN_FILTER");
    _(this, "TEXTURE_WRAP_S");
    _(this, "TEXTURE_WRAP_T");
    _(this, "LINEAR");
    _(this, "LINEAR_MIPMAP_LINEAR");
    _(this, "CLAMP_TO_EDGE");
    _(this, "RGB");
    _(this, "RGBA");
    _(this, "UNSIGNED_BYTE");
    _(this, "UNPACK_PREMULTIPLY_ALPHA_WEBGL");
    _(this, "UNPACK_FLIP_Y_WEBGL");
    _(this, "FLOAT");
    _(this, "TRIANGLES");
    _(this, "UNSIGNED_SHORT");
    _(this, "ONE");
    _(this, "ONE_MINUS_SRC_ALPHA");
    _(this, "VERTEX_SHADER");
    _(this, "FRAGMENT_SHADER");
    _(this, "STATIC_DRAW");
    _(this, "COMPILE_STATUS");
    _(this, "LINK_STATUS");
    _(this, "DYNAMIC_DRAW");
    _(this, "COLOR_ATTACHMENT0");
    _(this, "INVALID_ENUM");
    _(this, "INVALID_OPERATION");
    ((this.gl = c), (this.activeTextureUnit = c.getParameter(c.ACTIVE_TEXTURE) - c.TEXTURE0));
    const a = c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS);
    ((this.texture2dUnits = new Array(a)
      .fill(void 0)
      .map((g, T) => (this.activeTexture(T), c.getParameter(c.TEXTURE_BINDING_2D)))),
      this.activeTexture(this.activeTextureUnit),
      (this.scissorEnabled = c.isEnabled(c.SCISSOR_TEST)));
    const f = c.getParameter(c.SCISSOR_BOX);
    ((this.scissorX = f[0]),
      (this.scissorY = f[1]),
      (this.scissorWidth = f[2]),
      (this.scissorHeight = f[3]),
      (this.blendEnabled = c.isEnabled(c.BLEND)),
      (this.blendSrcRgb = c.getParameter(c.BLEND_SRC_RGB)),
      (this.blendDstRgb = c.getParameter(c.BLEND_DST_RGB)),
      (this.blendSrcAlpha = c.getParameter(c.BLEND_SRC_ALPHA)),
      (this.blendDstAlpha = c.getParameter(c.BLEND_DST_ALPHA)),
      (this.boundArrayBuffer = c.getParameter(c.ARRAY_BUFFER_BINDING)),
      (this.boundElementArrayBuffer = c.getParameter(c.ELEMENT_ARRAY_BUFFER_BINDING)),
      (this.curProgram = c.getParameter(c.CURRENT_PROGRAM)),
      (this.canvas = c.canvas),
      (this.MAX_RENDERBUFFER_SIZE = c.MAX_RENDERBUFFER_SIZE),
      (this.MAX_TEXTURE_SIZE = c.MAX_TEXTURE_SIZE),
      (this.MAX_VIEWPORT_DIMS = c.MAX_VIEWPORT_DIMS),
      (this.MAX_VERTEX_TEXTURE_IMAGE_UNITS = c.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
      (this.MAX_TEXTURE_IMAGE_UNITS = c.MAX_TEXTURE_IMAGE_UNITS),
      (this.MAX_COMBINED_TEXTURE_IMAGE_UNITS = c.MAX_COMBINED_TEXTURE_IMAGE_UNITS),
      (this.MAX_VERTEX_ATTRIBS = c.MAX_VERTEX_ATTRIBS),
      (this.MAX_VARYING_VECTORS = c.MAX_VARYING_VECTORS),
      (this.MAX_VERTEX_UNIFORM_VECTORS = c.MAX_VERTEX_UNIFORM_VECTORS),
      (this.MAX_FRAGMENT_UNIFORM_VECTORS = c.MAX_FRAGMENT_UNIFORM_VECTORS),
      (this.TEXTURE_MAG_FILTER = c.TEXTURE_MAG_FILTER),
      (this.TEXTURE_MIN_FILTER = c.TEXTURE_MIN_FILTER),
      (this.TEXTURE_WRAP_S = c.TEXTURE_WRAP_S),
      (this.TEXTURE_WRAP_T = c.TEXTURE_WRAP_T),
      (this.LINEAR = c.LINEAR),
      (this.LINEAR_MIPMAP_LINEAR = c.LINEAR_MIPMAP_LINEAR),
      (this.CLAMP_TO_EDGE = c.CLAMP_TO_EDGE),
      (this.RGB = c.RGB),
      (this.RGBA = c.RGBA),
      (this.UNSIGNED_BYTE = c.UNSIGNED_BYTE),
      (this.UNPACK_PREMULTIPLY_ALPHA_WEBGL = c.UNPACK_PREMULTIPLY_ALPHA_WEBGL),
      (this.UNPACK_FLIP_Y_WEBGL = c.UNPACK_FLIP_Y_WEBGL),
      (this.FLOAT = c.FLOAT),
      (this.TRIANGLES = c.TRIANGLES),
      (this.UNSIGNED_SHORT = c.UNSIGNED_SHORT),
      (this.ONE = c.ONE),
      (this.ONE_MINUS_SRC_ALPHA = c.ONE_MINUS_SRC_ALPHA),
      (this.MAX_VERTEX_TEXTURE_IMAGE_UNITS = c.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
      (this.TRIANGLES = c.TRIANGLES),
      (this.UNSIGNED_SHORT = c.UNSIGNED_SHORT),
      (this.VERTEX_SHADER = c.VERTEX_SHADER),
      (this.FRAGMENT_SHADER = c.FRAGMENT_SHADER),
      (this.STATIC_DRAW = c.STATIC_DRAW),
      (this.COMPILE_STATUS = c.COMPILE_STATUS),
      (this.LINK_STATUS = c.LINK_STATUS),
      (this.DYNAMIC_DRAW = c.DYNAMIC_DRAW),
      (this.COLOR_ATTACHMENT0 = c.COLOR_ATTACHMENT0),
      (this.INVALID_ENUM = c.INVALID_ENUM),
      (this.INVALID_OPERATION = c.INVALID_OPERATION));
  }
  isWebGl2() {
    return I3(this.gl);
  }
  activeTexture(c) {
    const { gl: a } = this;
    this.activeTextureUnit !== c && (a.activeTexture(c + a.TEXTURE0), (this.activeTextureUnit = c));
  }
  bindTexture(c) {
    const { gl: a, activeTextureUnit: f, texture2dUnits: g } = this;
    g[f] !== c && ((g[f] = c), a.bindTexture(this.gl.TEXTURE_2D, c));
  }
  _getActiveTexture() {
    const { activeTextureUnit: c, texture2dUnits: a } = this;
    return a[c];
  }
  texParameteri(c, a) {
    const { gl: f, texture2dParams: g } = this,
      T = this._getActiveTexture();
    if (!T) throw new Error("No active texture");
    let S = g.get(T);
    (S || ((S = {}), g.set(T, S)), S[c] !== a && ((S[c] = a), f.texParameteri(f.TEXTURE_2D, c, a)));
  }
  texImage2D(c, a, f, g, T, S, h, M) {
    const { gl: P } = this;
    S ? P.texImage2D(P.TEXTURE_2D, c, a, f, g, T, S, h, M) : P.texImage2D(P.TEXTURE_2D, c, a, f, g, T);
  }
  compressedTexImage2D(c, a, f, g, T, S) {
    const { gl: h } = this;
    h.compressedTexImage2D(h.TEXTURE_2D, c, a, f, g, T, S);
  }
  pixelStorei(c, a) {
    const { gl: f } = this;
    f.pixelStorei(c, a);
  }
  generateMipmap() {
    const { gl: c } = this;
    c.generateMipmap(c.TEXTURE_2D);
  }
  createTexture() {
    const { gl: c } = this;
    return c.createTexture();
  }
  deleteTexture(c) {
    const { gl: a } = this;
    (c && this.texture2dParams.delete(c), a.deleteTexture(c));
  }
  deleteFramebuffer(c) {
    this.gl.deleteFramebuffer(c);
  }
  viewport(c, a, f, g) {
    const { gl: T } = this;
    T.viewport(c, a, f, g);
  }
  clearColor(c, a, f, g) {
    const { gl: T } = this;
    T.clearColor(c, a, f, g);
  }
  setScissorTest(c) {
    const { gl: a, scissorEnabled: f } = this;
    c !== f && (c ? a.enable(a.SCISSOR_TEST) : a.disable(a.SCISSOR_TEST), (this.scissorEnabled = c));
  }
  scissor(c, a, f, g) {
    const { gl: T, scissorX: S, scissorY: h, scissorWidth: M, scissorHeight: P } = this;
    (c !== S || a !== h || f !== M || g !== P) &&
      (T.scissor(c, a, f, g),
      (this.scissorX = c),
      (this.scissorY = a),
      (this.scissorWidth = f),
      (this.scissorHeight = g));
  }
  setBlend(c) {
    const { gl: a, blendEnabled: f } = this;
    c !== f && (c ? a.enable(a.BLEND) : a.disable(a.BLEND), (this.blendEnabled = c));
  }
  blendFunc(c, a) {
    const { gl: f, blendSrcRgb: g, blendDstRgb: T, blendSrcAlpha: S, blendDstAlpha: h } = this;
    (c !== g || a !== T || c !== S || a !== h) &&
      (f.blendFunc(c, a),
      (this.blendSrcRgb = c),
      (this.blendDstRgb = a),
      (this.blendSrcAlpha = c),
      (this.blendDstAlpha = a));
  }
  createBuffer() {
    const { gl: c } = this;
    return c.createBuffer();
  }
  createFramebuffer() {
    const { gl: c } = this;
    return c.createFramebuffer();
  }
  bindFramebuffer(c) {
    const { gl: a } = this;
    a.bindFramebuffer(a.FRAMEBUFFER, c);
  }
  framebufferTexture2D(c, a, f) {
    const { gl: g } = this;
    g.framebufferTexture2D(g.FRAMEBUFFER, c, g.TEXTURE_2D, a, f);
  }
  clear() {
    const { gl: c } = this;
    c.clear(c.COLOR_BUFFER_BIT);
  }
  arrayBufferData(c, a, f) {
    const { gl: g, boundArrayBuffer: T } = this;
    (T !== c && (g.bindBuffer(g.ARRAY_BUFFER, c), (this.boundArrayBuffer = c)),
      g.bufferData(g.ARRAY_BUFFER, a, f));
  }
  elementArrayBufferData(c, a, f) {
    const { gl: g, boundElementArrayBuffer: T } = this;
    (T !== c && (g.bindBuffer(g.ELEMENT_ARRAY_BUFFER, c), (this.boundElementArrayBuffer = c)),
      g.bufferData(g.ELEMENT_ARRAY_BUFFER, a, f));
  }
  vertexAttribPointer(c, a, f, g, T, S, h) {
    const { gl: M, boundArrayBuffer: P } = this;
    (P !== c && (M.bindBuffer(M.ARRAY_BUFFER, c), (this.boundArrayBuffer = c)),
      M.vertexAttribPointer(a, f, g, T, S, h));
  }
  getUniformLocations(c) {
    const a = this.gl,
      f = a.getProgramParameter(c, a.ACTIVE_UNIFORMS),
      g = {};
    for (let T = 0; T < f; T++) {
      let h = a.getActiveUniform(c, T).name.replace(/\[.*?\]/g, "");
      g[h] = a.getUniformLocation(c, h);
    }
    return g;
  }
  getAttributeLocations(c) {
    const a = this.gl,
      f = a.getProgramParameter(c, a.ACTIVE_ATTRIBUTES),
      g = [];
    for (let T = 0; T < f; T++) {
      const { name: S } = a.getActiveAttrib(c, T);
      g[a.getAttribLocation(c, S)] = S;
    }
    return g;
  }
  useProgram(c) {
    const { gl: a, curProgram: f } = this;
    f !== c && (a.useProgram(c), (this.curProgram = c));
  }
  uniform1f(c, a) {
    const { gl: f } = this;
    f.uniform1f(c, a);
  }
  uniform1fv(c, a) {
    const { gl: f } = this;
    f.uniform1fv(c, a);
  }
  uniform1i(c, a) {
    const { gl: f } = this;
    f.uniform1i(c, a);
  }
  uniform1iv(c, a) {
    const { gl: f } = this;
    f.uniform1iv(c, a);
  }
  uniform2f(c, a, f) {
    const { gl: g } = this;
    g.uniform2f(c, a, f);
  }
  uniform2fv(c, a) {
    const { gl: f } = this;
    f.uniform2fv(c, a);
  }
  uniform2i(c, a, f) {
    const { gl: g } = this;
    g.uniform2i(c, a, f);
  }
  uniform2iv(c, a) {
    const { gl: f } = this;
    f.uniform2iv(c, a);
  }
  uniform3f(c, a, f, g) {
    const { gl: T } = this;
    T.uniform3f(c, a, f, g);
  }
  uniform3fv(c, a) {
    const { gl: f } = this;
    f.uniform3fv(c, a);
  }
  uniform3i(c, a, f, g) {
    const { gl: T } = this;
    T.uniform3i(c, a, f, g);
  }
  uniform3iv(c, a) {
    const { gl: f } = this;
    f.uniform3iv(c, a);
  }
  uniform4f(c, a, f, g, T) {
    const { gl: S } = this;
    S.uniform4f(c, a, f, g, T);
  }
  uniform4fv(c, a) {
    const { gl: f } = this;
    f.uniform4fv(c, a);
  }
  uniform4i(c, a, f, g, T) {
    const { gl: S } = this;
    S.uniform4i(c, a, f, g, T);
  }
  uniform4iv(c, a) {
    const { gl: f } = this;
    f.uniform4iv(c, a);
  }
  uniformMatrix2fv(c, a) {
    const { gl: f } = this;
    f.uniformMatrix2fv(c, !1, a);
  }
  uniformMatrix3fv(c, a) {
    const { gl: f } = this;
    f.uniformMatrix3fv(c, !1, a);
  }
  uniformMatrix4fv(c, a) {
    const { gl: f } = this;
    f.uniformMatrix4fv(c, !1, a);
  }
  getParameter(c) {
    const { gl: a } = this;
    return a.getParameter(c);
  }
  drawElements(c, a, f, g) {
    const { gl: T } = this;
    T.drawElements(c, a, f, g);
  }
  getExtension(c) {
    const { gl: a } = this;
    return a.getExtension(c);
  }
  getError() {
    const { gl: c } = this;
    return c.getError();
  }
  createVertexArray() {
    const { gl: c } = this;
    return c.createVertexArray();
  }
  bindVertexArray(c) {
    const { gl: a } = this;
    a.bindVertexArray(c);
  }
  getAttribLocation(c, a) {
    const { gl: f } = this;
    return f.getAttribLocation(c, a);
  }
  getUniformLocation(c, a) {
    const { gl: f } = this;
    return f.getUniformLocation(c, a);
  }
  enableVertexAttribArray(c) {
    const { gl: a } = this;
    a.enableVertexAttribArray(c);
  }
  disableVertexAttribArray(c) {
    const { gl: a } = this;
    a.disableVertexAttribArray(c);
  }
  createShader(c) {
    const { gl: a } = this;
    return a.createShader(c);
  }
  compileShader(c) {
    const { gl: a } = this;
    a.compileShader(c);
  }
  attachShader(c, a) {
    const { gl: f } = this;
    f.attachShader(c, a);
  }
  linkProgram(c) {
    const { gl: a } = this;
    a.linkProgram(c);
  }
  deleteProgram(c) {
    const { gl: a } = this;
    a.deleteProgram(c);
  }
  getShaderParameter(c, a) {
    const { gl: f } = this;
    return f.getShaderParameter(c, a);
  }
  getShaderInfoLog(c) {
    const { gl: a } = this;
    return a.getShaderInfoLog(c);
  }
  createProgram() {
    const { gl: c } = this;
    return c.createProgram();
  }
  getProgramParameter(c, a) {
    const { gl: f } = this;
    return f.getProgramParameter(c, a);
  }
  getProgramInfoLog(c) {
    const { gl: a } = this;
    return a.getProgramInfoLog(c);
  }
  shaderSource(c, a) {
    const { gl: f } = this;
    f.shaderSource(c, a);
  }
  deleteShader(c) {
    const { gl: a } = this;
    a.deleteShader(c);
  }
  checkError(c) {
    const a = this.getError();
    if (a !== 0) {
      let f = "UNKNOWN_ERROR";
      switch (a) {
        case this.INVALID_ENUM:
          f = "INVALID_ENUM";
          break;
        case 1281:
          f = "INVALID_VALUE";
          break;
        case this.INVALID_OPERATION:
          f = "INVALID_OPERATION";
          break;
        case 1285:
          f = "OUT_OF_MEMORY";
          break;
        case 37442:
          f = "CONTEXT_LOST_WEBGL";
          break;
      }
      const g = "WebGL ".concat(f, " (0x").concat(a.toString(16), ") during ").concat(c);
      return { error: a, errorName: f, message: g };
    }
    return null;
  }
}
class M3 extends Cv {
  constructor(a, f, g) {
    super(a, f, g);
    _(this, "framebuffer", null);
  }
  async onLoadRequest() {
    const { glw: a } = this,
      f = (this._nativeCtxTexture = this.createNativeCtxTexture());
    if (!f) throw new Error("Failed to create native texture for RenderTexture");
    const { width: g, height: T } = this.textureSource;
    return (
      (this.framebuffer = a.createFramebuffer()),
      a.texImage2D(0, a.RGBA, g, T, 0, a.RGBA, a.UNSIGNED_BYTE, null),
      this.setTextureMemUse(g * T * 4),
      a.bindFramebuffer(this.framebuffer),
      a.framebufferTexture2D(a.COLOR_ATTACHMENT0, f, 0),
      a.bindFramebuffer(null),
      { width: g, height: T }
    );
  }
  free() {
    (super.free(), this.glw.deleteFramebuffer(this.framebuffer), (this.framebuffer = null));
  }
}
class R3 extends d3 {
  constructor(a) {
    super(a);
    _(this, "glw");
    _(this, "system");
    _(this, "quadBuffer");
    _(this, "fQuadBuffer");
    _(this, "uiQuadBuffer");
    _(this, "renderOps", []);
    _(this, "curBufferIdx", 0);
    _(this, "curRenderOp", null);
    _(this, "rttNodes", []);
    _(this, "activeRttNode", null);
    _(this, "defShaderCtrl");
    _(this, "defaultShader");
    _(this, "quadBufferCollection");
    _(this, "clearColor", { raw: 0, normalized: [0, 0, 0, 0] });
    _(this, "quadBufferUsage", 0);
    _(this, "numQuadsRendered", 0);
    _(this, "renderToTextureActive", !1);
    ((this.quadBuffer = new ArrayBuffer(this.stage.options.quadBufferSize)),
      (this.fQuadBuffer = new Float32Array(this.quadBuffer)),
      (this.uiQuadBuffer = new Uint32Array(this.quadBuffer)),
      (this.mode = "webgl"));
    const { canvas: f, clearColor: g, bufferMemory: T } = a,
      S = ub(f, a.forceWebGL2, a.contextSpy),
      h = (this.glw = new C3(S));
    (h.viewport(0, 0, f.width, f.height),
      this.updateClearColor(g),
      h.setBlend(!0),
      h.blendFunc(h.ONE, h.ONE_MINUS_SRC_ALPHA),
      w3(h, T),
      (this.system = { parameters: x3(this.glw), extensions: T3(this.glw) }),
      (this.shManager.renderer = this),
      (this.defShaderCtrl = this.shManager.loadShader("DefaultShader")),
      (this.defaultShader = this.defShaderCtrl.shader));
    const M = h.createBuffer(),
      P = 8 * Float32Array.BYTES_PER_ELEMENT;
    this.quadBufferCollection = new rI([
      {
        buffer: M,
        attributes: {
          a_position: { name: "a_position", size: 2, type: h.FLOAT, normalized: !1, stride: P, offset: 0 },
          a_textureCoordinate: {
            name: "a_textureCoordinate",
            size: 2,
            type: h.FLOAT,
            normalized: !1,
            stride: P,
            offset: 2 * Float32Array.BYTES_PER_ELEMENT,
          },
          a_color: {
            name: "a_color",
            size: 4,
            type: h.UNSIGNED_BYTE,
            normalized: !0,
            stride: P,
            offset: 4 * Float32Array.BYTES_PER_ELEMENT,
          },
          a_textureIndex: {
            name: "a_textureIndex",
            size: 1,
            type: h.FLOAT,
            normalized: !1,
            stride: P,
            offset: 5 * Float32Array.BYTES_PER_ELEMENT,
          },
          a_nodeCoordinate: {
            name: "a_nodeCoordinate",
            size: 2,
            type: h.FLOAT,
            normalized: !1,
            stride: P,
            offset: 6 * Float32Array.BYTES_PER_ELEMENT,
          },
        },
      },
    ]);
  }
  reset() {
    const { glw: a } = this;
    ((this.curBufferIdx = 0),
      (this.curRenderOp = null),
      (this.renderOps.length = 0),
      a.setScissorTest(!1),
      a.clear());
  }
  getShaderManager() {
    return this.shManager;
  }
  createCtxTexture(a) {
    return a instanceof ah
      ? new E3(this.glw, this.txMemManager, a)
      : a instanceof uh
        ? new M3(this.glw, this.txMemManager, a)
        : new Cv(this.glw, this.txMemManager, a);
  }
  addQuad(a) {
    var ue, le;
    const { fQuadBuffer: f, uiQuadBuffer: g } = this;
    let T = a.texture;
    if (a.shader !== this.defaultShader) {
      if (sh(a.shaderProps, "$dimensions") == !0) {
        const q = a.shaderProps.$dimensions;
        ((q.width = a.width), (q.height = a.height));
      }
      sh(a.shaderProps, "$alpha") === !0 && (a.shaderProps.$alpha = a.alpha);
    }
    let { curBufferIdx: S, curRenderOp: h } = this;
    const M = { width: a.width, height: a.height };
    this.reuseRenderOp(a) === !1 &&
      (this.newRenderOp(
        a.shader,
        a.shaderProps,
        a.alpha,
        M,
        a.clippingRect,
        S,
        a.rtt,
        a.parentHasRenderTexture,
        a.framebufferDimensions,
      ),
      (h = this.curRenderOp));
    let P,
      N = 0,
      D = 0,
      V = 1,
      K = 1;
    if (T.type === $n.subTexture) {
      const { x: q, y: se, width: x, height: Y } = T.props,
        { width: ye = 0, height: fe = 0 } = T.parentTexture.dimensions || { width: 0, height: 0 };
      ((N = q / ye),
        (V = N + x / ye),
        (D = se / fe),
        (K = D + Y / fe),
        (T = T.parentTexture),
        (P = T.ctxTexture));
    } else ((P = T.ctxTexture), (N = P.txCoordX1), (D = P.txCoordY1), (V = P.txCoordX2), (K = P.txCoordY2));
    if (
      T.type === $n.image &&
      a.textureOptions !== null &&
      a.textureOptions.resizeMode !== void 0 &&
      T.dimensions !== null
    ) {
      const q = a.textureOptions.resizeMode,
        { width: se, height: x } = T.dimensions;
      if (q.type === "cover") {
        const Y = a.width / se,
          ye = a.height / x,
          fe = Math.max(Y, ye),
          xe = 1 / fe;
        if (fe && Y && Y < fe) {
          const E = xe * a.width;
          ((N = (1 - E / se) * ((ue = q.clipX) != null ? ue : 0.5)), (V = N + E / se));
        }
        if (fe && ye && ye < fe) {
          const E = xe * a.height;
          ((D = (1 - E / x) * ((le = q.clipY) != null ? le : 0.5)), (K = D + E / x));
        }
      }
    }
    let J = 0;
    (a.textureOptions !== null &&
      (a.textureOptions.flipX === !0 && ([N, V] = [V, N]), (J = +(a.textureOptions.flipY || !1))),
      J ^ +(T.type === $n.renderToTexture) && ([D, K] = [K, D]));
    const Z = this.addTexture(P, S);
    if ((this.curRenderOp, a.renderCoords))
      ((f[S++] = a.renderCoords.x1),
        (f[S++] = a.renderCoords.y1),
        (f[S++] = N),
        (f[S++] = D),
        (g[S++] = a.colorTl),
        (f[S++] = Z),
        (f[S++] = 0),
        (f[S++] = 0),
        (f[S++] = a.renderCoords.x2),
        (f[S++] = a.renderCoords.y2),
        (f[S++] = V),
        (f[S++] = D),
        (g[S++] = a.colorTr),
        (f[S++] = Z),
        (f[S++] = 1),
        (f[S++] = 0),
        (f[S++] = a.renderCoords.x4),
        (f[S++] = a.renderCoords.y4),
        (f[S++] = N),
        (f[S++] = K),
        (g[S++] = a.colorBl),
        (f[S++] = Z),
        (f[S++] = 0),
        (f[S++] = 1),
        (f[S++] = a.renderCoords.x3),
        (f[S++] = a.renderCoords.y3),
        (f[S++] = V),
        (f[S++] = K),
        (g[S++] = a.colorBr),
        (f[S++] = Z),
        (f[S++] = 1),
        (f[S++] = 1));
    else if (a.tb !== 0 || a.tc !== 0)
      ((f[S++] = a.tx),
        (f[S++] = a.ty),
        (f[S++] = N),
        (f[S++] = D),
        (g[S++] = a.colorTl),
        (f[S++] = Z),
        (f[S++] = 0),
        (f[S++] = 0),
        (f[S++] = a.tx + a.width * a.ta),
        (f[S++] = a.ty + a.width * a.tc),
        (f[S++] = V),
        (f[S++] = D),
        (g[S++] = a.colorTr),
        (f[S++] = Z),
        (f[S++] = 1),
        (f[S++] = 0),
        (f[S++] = a.tx + a.height * a.tb),
        (f[S++] = a.ty + a.height * a.td),
        (f[S++] = N),
        (f[S++] = K),
        (g[S++] = a.colorBl),
        (f[S++] = Z),
        (f[S++] = 0),
        (f[S++] = 1),
        (f[S++] = a.tx + a.width * a.ta + a.height * a.tb),
        (f[S++] = a.ty + a.width * a.tc + a.height * a.td),
        (f[S++] = V),
        (f[S++] = K),
        (g[S++] = a.colorBr),
        (f[S++] = Z),
        (f[S++] = 1),
        (f[S++] = 1));
    else {
      const q = a.tx + a.width * a.ta,
        se = a.ty + a.height * a.td;
      ((f[S++] = a.tx),
        (f[S++] = a.ty),
        (f[S++] = N),
        (f[S++] = D),
        (g[S++] = a.colorTl),
        (f[S++] = Z),
        (f[S++] = 0),
        (f[S++] = 0),
        (f[S++] = q),
        (f[S++] = a.ty),
        (f[S++] = V),
        (f[S++] = D),
        (g[S++] = a.colorTr),
        (f[S++] = Z),
        (f[S++] = 1),
        (f[S++] = 0),
        (f[S++] = a.tx),
        (f[S++] = se),
        (f[S++] = N),
        (f[S++] = K),
        (g[S++] = a.colorBl),
        (f[S++] = Z),
        (f[S++] = 0),
        (f[S++] = 1),
        (f[S++] = q),
        (f[S++] = se),
        (f[S++] = V),
        (f[S++] = K),
        (g[S++] = a.colorBr),
        (f[S++] = Z),
        (f[S++] = 1),
        (f[S++] = 1));
    }
    (this.curRenderOp.numQuads++, (this.curBufferIdx = S));
  }
  newRenderOp(a, f, g, T, S, h, M, P, N) {
    const D = new nI(this.glw, this.options, this.quadBufferCollection, a, f, g, S, T, h, 0, M, P, N);
    ((this.curRenderOp = D), this.renderOps.push(D));
  }
  addTexture(a, f, g) {
    const { curRenderOp: T } = this,
      S = T.addTexture(a);
    if (S === 4294967295) {
      if (g) throw new Error("Unable to add texture to render op");
      return (
        this.newRenderOp(T.shader, T.shaderProps, T.alpha, T.dimensions, T.clippingRect, f),
        this.addTexture(a, f, !0)
      );
    }
    return S;
  }
  reuseRenderOp(a) {
    var M;
    const { shader: f, shaderProps: g, parentHasRenderTexture: T, rtt: S, clippingRect: h } = a;
    return !(
      ((M = this.curRenderOp) == null ? void 0 : M.shader) !== f ||
      mb(this.curRenderOp.clippingRect, h) === !1 ||
      T === !0 ||
      S === !0 ||
      (this.curRenderOp.shader !== this.defaultShader &&
        this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps, g) === !1)
    );
  }
  addRenderOp(a) {
    (this.renderOps.push(a), (this.curRenderOp = null));
  }
  render(a = "screen") {
    const { glw: f, quadBuffer: g } = this,
      T = new Float32Array(g, 0, this.curBufferIdx),
      S = this.quadBufferCollection.getBuffer("a_position") || null;
    f.arrayBufferData(S, T, f.STATIC_DRAW);
    for (let M = 0, P = this.renderOps.length; M < P; M++) this.renderOps[M].draw();
    this.quadBufferUsage = this.curBufferIdx * T.BYTES_PER_ELEMENT;
    const h = 4 * (8 * T.BYTES_PER_ELEMENT);
    this.numQuadsRendered = this.quadBufferUsage / h;
  }
  getQuadCount() {
    return this.numQuadsRendered;
  }
  renderToTexture(a) {
    for (let f = 0; f < this.rttNodes.length; f++) if (this.rttNodes[f] === a) return;
    this.insertRTTNodeInOrder(a);
  }
  insertRTTNodeInOrder(a) {
    let f = this.rttNodes.length,
      g = a;
    for (; g && g.parent; ) {
      const S = this.rttNodes.indexOf(g.parent);
      if (S !== -1) {
        f = S;
        break;
      }
      g = g.parent;
    }
    const T = this.findMaxChildRTTIndex(a);
    (T !== -1 && (f = Math.max(f, T + 1)), this.rttNodes.splice(f, 0, a));
  }
  findMaxChildRTTIndex(a) {
    let f = -1;
    const g = T => {
      const S = this.rttNodes.indexOf(T);
      S !== -1 && (f = Math.max(f, S));
      for (const h of T.children) g(h);
    };
    return (g(a), f);
  }
  renderRTTNodes() {
    const { glw: a } = this,
      { txManager: f } = this.stage;
    for (let T = 0; T < this.rttNodes.length; T++) {
      const S = this.rttNodes[T];
      if (
        S === void 0 ||
        S.hasRTTupdates === !1 ||
        S.worldAlpha === 0 ||
        (S.strictBounds === !0 && S.renderState === Rn.OutOfBounds) ||
        S.texture === null ||
        S.texture.state !== "loaded"
      )
        continue;
      ((this.activeRttNode = S), S.texture);
      const h = S.texture.ctxTexture;
      ((this.renderToTextureActive = !0),
        a.bindFramebuffer(h.framebuffer),
        a.viewport(0, 0, h.w, h.h),
        a.clearColor(0, 0, 0, 0),
        a.clear());
      for (let M = 0; M < S.children.length; M++) {
        const P = S.children[M];
        P !== void 0 && (this.stage.addQuads(P), (P.hasRTTupdates = !1));
      }
      (this.render(), (this.renderOps.length = 0), (S.hasRTTupdates = !1));
    }
    const g = this.clearColor.normalized;
    (a.clearColor(g[0], g[1], g[2], g[3]),
      a.bindFramebuffer(null),
      a.viewport(0, 0, this.glw.canvas.width, this.glw.canvas.height),
      (this.renderToTextureActive = !1));
  }
  removeRTTNode(a) {
    const f = this.rttNodes.indexOf(a);
    f !== -1 && this.rttNodes.splice(f, 1);
  }
  getBufferInfo() {
    return { totalAvailable: this.stage.options.quadBufferSize, totalUsed: this.quadBufferUsage };
  }
  getDefShaderCtr() {
    return this.defShaderCtrl;
  }
  updateClearColor(a) {
    if (this.clearColor.raw === a) return;
    const f = this.glw,
      g = Ch(a);
    (f.clearColor(g[0], g[1], g[2], g[3]), (this.clearColor = { raw: a, normalized: g }), f.clear());
  }
}
const k3 = { LINE_FEED: 10 };
class _3 {}
class P3 extends _3 {
  constructor(a, f) {
    super();
    _(this, "data");
    _(this, "glyphMap");
    _(this, "kernings");
    ((this.data = a), (this.glyphMap = f));
    const g = (this.kernings = {});
    (a.kernings.forEach(T => {
      const S = T.second,
        h = (g[S] = g[S] || {});
      h[T.first] = T.amount;
    }),
      (this.kernings = g));
  }
  *shapeText(a, f) {
    var S;
    let g, T;
    for (; (g = f.peek()) && !g.done; ) {
      const h = g.value,
        M = this.glyphMap.get(h);
      if ((f.next(), M !== void 0)) {
        const P =
          T !== void 0 ? (((S = this.kernings[M.id]) == null ? void 0 : S[T]) || 0) + a.letterSpacing : 0;
        ((T = M.id),
          yield {
            mapped: !0,
            glyphId: M.id,
            codepoint: h,
            cluster: f.lastIndex,
            xAdvance: M.xadvance + P,
            yAdvance: 0,
            xOffset: M.xoffset + P,
            yOffset: M.yoffset,
            xBearing: 0,
            yBearing: 0,
            width: M.width,
            height: M.height,
          });
      } else (h === k3.LINE_FEED && (T = void 0), yield { mapped: !1, codepoint: h, cluster: f.lastIndex });
    }
  }
}
class iI extends tI {
  constructor(a, f) {
    super(f);
    _(this, "type");
    _(this, "texture");
    _(this, "maxCharHeight", 0);
    _(this, "shaper");
    _(this, "glyphMap", new Map());
    _(this, "data");
    const { atlasUrl: g, atlasDataUrl: T, stage: S } = f;
    ((this.type = a),
      S.renderer,
      (this.texture = S.txManager.createTexture("ImageTexture", { src: g, premultiplyAlpha: !1 })),
      S.txManager.loadTexture(this.texture, !0),
      (this.texture.preventCleanup = !0),
      this.texture.on("loaded", () => {
        (this.checkLoaded(), S.requestRender());
      }),
      $2(T)
        .then(h => {
          var P;
          ((this.data = JSON.parse(h)), this.data);
          let M = 0;
          if (
            (this.data.chars.forEach(N => {
              this.glyphMap.set(N.id, N);
              const D = N.yoffset + N.height;
              D > M && (M = D);
            }),
            (this.maxCharHeight = M),
            (this.shaper = new P3(this.data, this.glyphMap)),
            !this.metrics)
          )
            if ((P = this.data) != null && P.lightningMetrics) {
              const { ascender: N, descender: D, lineGap: V, unitsPerEm: K } = this.data.lightningMetrics;
              this.metrics = { ascender: N / K, descender: D / K, lineGap: V / K };
            } else
              throw new Error(
                "Font metrics not found in ".concat(this.type, " font ").concat(this.fontFamily, ". ") +
                  "Make sure you are using the latest version of the Lightning 3 `msdf-generator` tool to generate your SDF fonts.",
              );
          this.checkLoaded();
        })
        .catch(console.error));
  }
  getAtlasEntry(a) {
    const f = this.glyphMap.get(a);
    if (f === void 0) throw new Error("Glyph ".concat(a, " not found in font ").concat(this.fontFamily));
    return { x: f.x, y: f.y, width: f.width, height: f.height };
  }
  checkLoaded() {
    this.loaded ||
      (this.texture.state === "loaded" && this.data && ((this.loaded = !0), this.emit("loaded")));
  }
}
const D3 = { LEGACY: !1 },
  Oy = !!D3,
  nn = {
    debug: !1,
    focusDebug: !1,
    keyDebug: !1,
    animationsEnabled: !0,
    animationSettings: { duration: 250, easing: "ease-in-out" },
    fontSettings: { fontFamily: "Ubuntu", fontSize: 100 },
    setActiveElement: () => {},
    focusStateKey: "$focus",
    lockStyles: !0,
  };
let Kr;
function L3(d, c = "app") {
  return ((Kr = new m3(d, c)), Kr);
}
function b3(d) {
  for (const c of d)
    Kr.stage.renderer.mode === "webgl" && "type" in c && (c.type === "msdf" || c.type === "ssdf")
      ? Kr.stage.fontManager.addFontFace(new iI(c.type, { ...c, stage: Kr.stage }))
      : "fontUrl" in c && Kr.stage.fontManager.addFontFace(new y3(c));
}
const ka = { Element: "element", TextNode: "textNode", Text: "text" };
function Uy(d, c, ...a) {}
const Fy = d => d instanceof Function,
  xl = d => typeof d == "function";
function ov(d) {
  return Array.isArray(d);
}
function r2(d) {
  return typeof d == "string";
}
function N3(d) {
  return typeof d == "number";
}
function i2(d) {
  return "destroy" in d && typeof d.destroy == "function";
}
function ma(d) {
  return d instanceof Ts;
}
function Al(d) {
  return d._type === ka.TextNode;
}
function O3(d) {
  return d._type === ka.Text;
}
function U3(d, c) {
  for (const a of c) if (a in d) return !0;
  return !1;
}
function sI(d) {
  var c;
  return (c = d == null ? void 0 : d.states) == null ? void 0 : c.has(nn.focusStateKey);
}
class s2 extends Array {
  constructor(a, f = {}) {
    var c = (...cj) => (super(...cj), _(this, "onChange"), this);
    return (
      ov(f)
        ? c(...f)
        : r2(f)
          ? c(f)
          : c(
              ...Object.entries(f)
                .filter(([g, T]) => T)
                .map(([g]) => g),
            ),
      (this.onChange = a),
      this
    );
  }
  has(a) {
    return this.indexOf(a) >= 0 || this.indexOf("$".concat(a)) >= 0;
  }
  is(a) {
    return this.indexOf(a) >= 0;
  }
  add(a) {
    this.has(a) || (this.push(a), this.onChange());
  }
  toggle(a, f) {
    f === !0 ? this.add(a) : f === !1 ? this.remove(a) : this.has(a) ? this.remove(a) : this.add(a);
  }
  merge(a) {
    if (ov(a)) ((this.length = 0), this.push(...a));
    else if (r2(a)) ((this.length = 0), this.push(a));
    else
      for (const f in a)
        if (a[f]) this.has(f) || this.push(f);
        else {
          const T = this.indexOf(f);
          T >= 0 && this.splice(T, 1);
        }
    return this;
  }
  remove(a) {
    const f = this.indexOf(a);
    f >= 0 && (this.splice(f, 1), this.onChange());
  }
}
function o2(d) {
  var xe, E, re;
  const a = (d.flexDirection || "row") === "row",
    f = a ? "width" : "height",
    g = a ? "height" : "width",
    T = a ? "marginLeft" : "marginTop",
    S = a ? "marginTop" : "marginLeft",
    h = a ? "marginRight" : "marginBottom",
    M = a ? "marginBottom" : "marginRight",
    P = [];
  let N = !1,
    D = 0;
  for (let te = 0; te < d.children.length; te++) {
    const ge = d.children[te];
    if (Al(ge) && ge.text && !(ge.width || ge.height)) return !1;
    if (O3(ge) || ge.flexItem === !1) continue;
    const pe = ge.flexOrder;
    pe !== void 0 && (N = !0);
    const oe = ge.flexGrow,
      ve = oe !== void 0 && oe >= 0;
    ve && (D += oe);
    const Oe = ge[f] || 0,
      gt = ge[T] || 0,
      rn = ge[h] || 0;
    P.push({
      node: ge,
      mainSize: Oe,
      marginStart: gt,
      marginEnd: rn,
      totalMainSizeOnAxis: Oe + gt + rn,
      isGrowItem: ve,
      flexGrowValue: ve ? oe : 0,
      flexOrder: pe || 0,
      crossSize: ge[g] || 0,
      crossMarginStart: ge[S] || 0,
      crossMarginEnd: ge[M] || 0,
    });
  }
  N ? P.sort((te, ge) => te.flexOrder - ge.flexOrder) : d.direction === "rtl" && P.reverse();
  const V = P.length;
  if (V === 0) return !1;
  const K = a ? "x" : "y",
    J = a ? "y" : "x",
    Z = d[f] || 0;
  let ue = d[g] || 0;
  const le = d.gap || 0,
    q = d.justifyContent || "flexStart";
  let se = !1;
  if (D > 0 && V > 1) {
    d.flexBoundary = d.flexBoundary || "fixed";
    let te = 0;
    for (const oe of P) te += oe.mainSize + oe.marginStart + oe.marginEnd;
    const ge = V > 0 ? le * (V - 1) : 0,
      pe = Z - te - ge;
    if (pe > 0) {
      for (const oe of P)
        if (oe.isGrowItem && oe.flexGrowValue > 0) {
          const ve = (oe.flexGrowValue / D) * pe,
            Oe = oe.mainSize + ve;
          ((oe.node[f] = Oe),
            (oe.mainSize = Oe),
            (oe.totalMainSizeOnAxis = Oe + oe.marginStart + oe.marginEnd));
        }
      d._containsFlexGrow = d._containsFlexGrow ? null : !0;
    } else
      d._containsFlexGrow
        ? (d._containsFlexGrow = null)
        : console.warn("No available space for flex-grow items to expand, or items overflow.");
  }
  let x = 0;
  if (q === "center" || q === "spaceBetween" || q === "spaceEvenly" || q === "spaceAround")
    for (const te of P) x += te.totalMainSizeOnAxis;
  const Y = d.alignItems || (d.flexWrap ? "flexStart" : void 0),
    ye = ue
      ? (te, ge = 0) => {
          const pe = te.node.alignSelf || Y;
          pe &&
            (pe === "flexStart"
              ? (te.node[J] = ge + te.crossMarginStart)
              : pe === "center"
                ? (te.node[J] = ge + (ue - te.crossSize) / 2 + te.crossMarginStart)
                : pe === "flexEnd" && (te.node[J] = ge + ue - te.crossSize - te.crossMarginEnd));
        }
      : (te, ge = 0) => {};
  if (a && d._calcHeight && !d.flexCrossBoundary) {
    const ge = P.reduce((pe, oe) => Math.max(pe, oe.crossSize), 0) || d.height;
    ge !== d.height && ((se = !0), (d.height = ue = ge));
  }
  let fe = d.padding || 0;
  if (q === "flexStart") {
    if (d.flexWrap === "wrap") {
      let te = 0;
      const ge = ((xe = P[0]) == null ? void 0 : xe.crossSize) || ue,
        pe = a ? ((E = d.columnGap) != null ? E : le) : (re = d.rowGap) != null ? re : le;
      for (const ve of P)
        (fe + ve.totalMainSizeOnAxis > Z && fe > (d.padding || 0) && ((fe = d.padding || 0), (te += ge + pe)),
          (ve.node[K] = fe + ve.marginStart),
          (fe += ve.totalMainSizeOnAxis + le),
          ye(ve, te));
      const oe = te + ge;
      d[g] !== oe && ((d["preFlex".concat(g)] = d[g]), (d[g] = oe), (se = !0));
    } else
      for (const te of P) ((te.node[K] = fe + te.marginStart), (fe += te.totalMainSizeOnAxis + le), ye(te));
    if (d.flexBoundary !== "fixed" && d.flexWrap !== "wrap") {
      const te = fe - le + (d.padding || 0);
      if (te !== Z) return ((d["preFlex".concat(f)] = Z), (d[f] = te), !0);
    }
  } else if (q === "flexEnd") {
    fe = Z - (d.padding || 0);
    for (let te = V - 1; te >= 0; te--) {
      const ge = P[te];
      ((ge.node[K] = fe - ge.mainSize - ge.marginEnd), (fe -= ge.totalMainSizeOnAxis + le), ye(ge));
    }
  } else if (q === "center") {
    fe = (Z - (x + le * (V - 1))) / 2 + (d.padding || 0);
    for (const te of P) ((te.node[K] = fe + te.marginStart), (fe += te.totalMainSizeOnAxis + le), ye(te));
  } else if (q === "spaceBetween") {
    const te = V > 1 ? (Z - x - (d.padding || 0) * 2) / (V - 1) : 0;
    fe = d.padding || 0;
    for (const ge of P) ((ge.node[K] = fe + ge.marginStart), (fe += ge.totalMainSizeOnAxis + te), ye(ge));
  } else if (q === "spaceAround") {
    const te = V > 0 ? (Z - x - (d.padding || 0) * 2) / V : 0;
    fe = (d.padding || 0) + te / 2;
    for (const ge of P) ((ge.node[K] = fe + ge.marginStart), (fe += ge.totalMainSizeOnAxis + te), ye(ge));
  } else if (q === "spaceEvenly") {
    const te = (Z - x - (d.padding || 0) * 2) / (V + 1);
    fe = te + (d.padding || 0);
    for (const ge of P) ((ge.node[K] = fe + ge.marginStart), (fe += ge.totalMainSizeOnAxis + te), ye(ge));
  }
  return se;
}
const Tl = {
    ArrowLeft: "Left",
    ArrowRight: "Right",
    ArrowUp: "Up",
    ArrowDown: "Down",
    Enter: "Enter",
    l: "Last",
    " ": "Space",
    Backspace: "Back",
    Escape: "Escape",
  },
  av = {},
  a2 = (d, c) => {
    for (const [a, f] of Object.entries(d))
      Array.isArray(f)
        ? f.forEach(g => {
            c[g] = a;
          })
        : f === null
          ? delete c[a]
          : (c[f] = a);
  };
let u2 = !0;
const F3 = (d, c) => {
  if (u2) {
    const a = document.createElement("style");
    ((a.type = "text/css"),
      (a.innerHTML =
        '\n      [data-focus="3"] {\n        border: 2px solid rgba(255, 33, 33, 0.2);\n        border-radius: 5px;\n        transition: border-color 0.3s ease;\n      }\n\n      [data-focus="2"] {\n        border: 2px solid rgba(255, 33, 33, 0.4);\n        border-radius: 5px;\n        transition: border-color 0.3s ease;\n      }\n\n      [data-focus="1"] {\n        border: 4px solid rgba(255, 33, 33, 0.9);\n        border-radius: 5px;\n        transition: border-color 0.5s ease;\n      }\n    '),
      document.head.appendChild(a),
      (u2 = !1));
  }
  (d.forEach(a => {
    a.data = { ...a.data, focus: void 0 };
  }),
    c.forEach((a, f) => {
      a.data = { ...a.data, focus: f + 1 };
    }));
};
let l2;
const B3 = d => {
  (j3(d, l2), (l2 = d), nn.setActiveElement(d));
};
let no = [];
const j3 = (d, c) => {
  var g, T;
  let a = d;
  const f = [];
  for (; a; )
    ((!a.states.has(nn.focusStateKey) || a === d) &&
      (a.states.add(nn.focusStateKey),
      (g = a.onFocus) == null || g.call(a, d, c),
      (T = a.onFocusChanged) == null || T.call(a, !0, d, c)),
      f.push(a),
      (a = a.parent));
  return (
    no.forEach(S => {
      var h, M;
      f.includes(S) ||
        (S.states.remove(nn.focusStateKey),
        (h = S.onBlur) == null || h.call(S, d, c),
        (M = S.onFocusChanged) == null || M.call(S, !1, d, c));
    }),
    nn.focusDebug && F3(no, f),
    (no = f),
    f
  );
};
let c2 = 0,
  d2;
const Wf = (d, c, a = !1, f = !1) => {
    const g = performance.now(),
      T = d.key || d.keyCode,
      S = d2 === T;
    if (((d2 = T), !f && nn.throttleInput)) {
      if (S && g - c2 < nn.throttleInput) return !1;
      c2 = g;
    }
    let h;
    const M = no.length,
      P = "onCapture".concat(c || d.key) + f ? "Release" : "",
      N = f ? "onCaptureKeyRelease" : "onCaptureKey";
    for (let J = M - 1; J >= 0; J--) {
      const Z = no[J];
      if (
        Z.throttleInput &&
        S &&
        Z._lastAnyKeyPressTime !== void 0 &&
        g - Z._lastAnyKeyPressTime < Z.throttleInput
      )
        return !0;
      const ue = Z[P] || Z[N];
      if (xl(ue) && ue.call(Z, d, Z, h, c) === !0) return ((Z._lastAnyKeyPressTime = g), !0);
    }
    let D, V, K;
    (c && ((D = "on".concat(c)), (V = "on".concat(c, "Release"))), f || (K = a ? "onKeyHold" : "onKeyPress"));
    for (let J = 0; J < M; J++) {
      const Z = no[J];
      if (
        (h || (h = Z),
        Z.throttleInput &&
          S &&
          Z._lastAnyKeyPressTime !== void 0 &&
          g - Z._lastAnyKeyPressTime < Z.throttleInput)
      )
        return !0;
      let ue = !1;
      if (f && V) {
        const le = Z[V];
        xl(le) && le.call(Z, d, Z, h) === !0 && (ue = !0);
      } else if (!f && D) {
        const le = Z[D];
        xl(le) && le.call(Z, d, Z, h) === !0 && (ue = !0);
      }
      if (!ue && K) {
        const le = Z[K];
        xl(le) && le.call(Z, d, c, Z, h) === !0 && (ue = !0);
      }
      if (ue) return ((Z._lastAnyKeyPressTime = g), !0);
    }
    return !1;
  },
  V3 = 500,
  Vi = {},
  H3 = (d, c, a) => {
    if (c) {
      const f = c.key || c.keyCode,
        g = av[c.key] || av[c.keyCode],
        T = Tl[c.key] || Tl[c.keyCode];
      if (g) {
        Vi[f] ||
          (Vi[f] = window.setTimeout(() => {
            ((Vi[f] = !0), Wf(c, g, !0));
          }, d));
        return;
      }
      Wf(c, T, !1);
    } else if (a) {
      const f = a.key || a.keyCode,
        g = Tl[a.key] || Tl[a.keyCode];
      (Vi[f] === !0 ? delete Vi[f] : Vi[f] && (clearTimeout(Vi[f]), delete Vi[f], Wf(a, g, !1)),
        Wf(a, g, !1, !0));
    }
  },
  G3 = ({
    userKeyMap: d,
    keyHoldOptions: c,
    ownerContext: a = f => {
      f();
    },
  } = {}) => {
    (d && a2(d, Tl), c != null && c.userKeyHoldMap && a2(c.userKeyHoldMap, av));
    const f = (c == null ? void 0 : c.holdThreshold) || V3,
      g = H3.bind(null, f),
      T = h =>
        a(() => {
          g(h, void 0);
        }),
      S = h =>
        a(() => {
          g(void 0, h);
        });
    return (
      document.addEventListener("keyup", S),
      document.addEventListener("keydown", T),
      {
        cleanup: () => {
          (document.removeEventListener("keydown", T), document.removeEventListener("keyup", S));
          for (const [h, M] of Object.entries(Vi)) M && M !== !0 && clearTimeout(M);
        },
        focusPath: () => no,
      }
    );
  };
class z3 {
  constructor() {
    _(this, "nodeConfigs", []);
    _(this, "isRegistered", !1);
    _(this, "stage");
  }
  register(c) {
    this.isRegistered ||
      ((this.isRegistered = !0), (this.stage = c), c.animationManager.registerAnimation(this));
  }
  add(c, a, f, g) {
    var V, K;
    const T = this.nodeConfigs.find(J => J.node === c && J.propName === a),
      S = (V = g.duration) != null ? V : 0,
      h = (K = g.delay) != null ? K : 0,
      M = g.easing || "linear",
      P = K2(M),
      N = f,
      D = c[a];
    T
      ? ((T.duration = S),
        (T.delay = h),
        (T.easing = M),
        (T.timingFunction = P),
        (T.targetValue = N),
        (T.startValue = D),
        (T.progress = 0),
        (T.delayFor = h))
      : this.nodeConfigs.push({
          node: c,
          duration: S,
          delay: h,
          easing: M,
          progress: 0,
          delayFor: h,
          timingFunction: P,
          propName: a,
          startValue: D,
          targetValue: N,
        });
  }
  update(c) {
    var a;
    for (let f = this.nodeConfigs.length - 1; f >= 0; f--) {
      const g = this.nodeConfigs[f],
        { node: T, duration: S, timingFunction: h, propName: M, startValue: P, targetValue: N } = g;
      let D = c;
      if (g.delayFor > 0) {
        if (((g.delayFor -= D), g.delayFor >= 0)) continue;
        ((D = -g.delayFor), (g.delayFor = 0));
      }
      S > 0
        ? ((g.progress += D / S), (g.progress = Math.max(0, Math.min(1, g.progress))))
        : S === 0 && g.delayFor <= 0 && (g.progress = 1);
      const V = h(g.progress) || g.progress;
      let K;
      (g.progress === 1 ? (K = N) : M.includes("color") ? (K = Zy(P, N, V)) : (K = P + (N - P) * V),
        (T.lng[M] = K),
        g.progress === 1 && this.nodeConfigs.splice(f, 1),
        this.nodeConfigs.length === 0 &&
          ((a = this.stage) == null || a.animationManager.unregisterAnimation(this),
          (this.isRegistered = !1)));
    }
  }
}
const f2 = new z3();
let Ll = !1;
const bl = new Set();
function oI() {
  Ll = !1;
  const d = [...bl];
  bl.clear();
  for (let c = d.length - 1; c >= 0; c--) d[c].updateLayout();
}
function h2(d) {
  (bl.add(d), Ll || ((Ll = !0), queueMicrotask(oI)));
}
function By(d, c) {
  const a = [];
  for (let f in c) {
    const g = c[f];
    (f === "rounded" && (f = "radius"), typeof g == "object" && a.push(Kr.createEffect(f, g, f)));
  }
  return Kr.createShader("DynamicShader", { effects: a });
}
function hl(d = "") {
  return {
    set(c) {
      (N3(c) && (c = { width: c, color: 255 }),
        (this.effects = this.effects
          ? { ...(this.effects || {}), ["border".concat(d)]: c }
          : { ["border".concat(d)]: c }));
    },
    get() {
      var c;
      return (c = this.effects) == null ? void 0 : c["border".concat(d)];
    },
  };
}
const X3 = [
    "alpha",
    "color",
    "colorTop",
    "colorRight",
    "colorLeft",
    "colorBottom",
    "colorTl",
    "colorTr",
    "colorBl",
    "colorBr",
    "height",
    "fontSize",
    "lineHeight",
    "mount",
    "mountX",
    "mountY",
    "pivot",
    "pivotX",
    "pivotY",
    "rotation",
    "scale",
    "scaleX",
    "scaleY",
    "width",
    "worldX",
    "worldY",
    "x",
    "y",
    "zIndex",
    "zIndexLocked",
  ],
  W3 = [
    "absX",
    "absY",
    "autosize",
    "clipping",
    "contain",
    "data",
    "destroyed",
    "fontFamily",
    "fontStretch",
    "fontStyle",
    "fontWeight",
    "imageType",
    "letterSpacing",
    "maxLines",
    "offsetY",
    "overflowSuffix",
    "preventCleanup",
    "rtt",
    "scrollable",
    "scrollY",
    "srcHeight",
    "srcWidth",
    "srcX",
    "srcY",
    "strictBounds",
    "text",
    "textAlign",
    "textBaseline",
    "textOverflow",
    "texture",
    "textureOptions",
    "verticalAlign",
    "wordWrap",
  ];
class Ts extends Object {
  constructor(c) {
    (super(),
      (this._type = c === "text" ? ka.TextNode : ka.Element),
      (this.rendered = !1),
      (this.lng = {}),
      (this.children = []));
  }
  get effects() {
    return this._effects;
  }
  set effects(c) {
    ((this._effects = c), Oy && this.rendered && (this.lng.shader = By(this, c)));
  }
  set id(c) {
    var a;
    ((this._id = c),
      (a = nn.rendererOptions) != null && a.inspector && (this.data = { ...this.data, testId: c }));
  }
  get id() {
    return this._id;
  }
  get parent() {
    return this._parent;
  }
  set parent(c) {
    var a;
    ((this._parent = c),
      this.rendered && c != null && c.rendered && (this.lng.parent = (a = c.lng) != null ? a : null));
  }
  insertChild(c, a) {
    if (
      (c.parent && (c.parent.removeChild(c), this.rendered || (this._hasRenderedChildren = !0)),
      (c.parent = this),
      a)
    ) {
      this.removeChild(c);
      const f = this.children.indexOf(a);
      if (f >= 0) {
        this.children.splice(f, 0, c);
        return;
      }
    }
    this.children.push(c);
  }
  removeChild(c) {
    var f;
    const a = this.children.indexOf(c);
    a >= 0 && (this.children.splice(a, 1), (f = c.onRemove) == null || f.call(c, c));
  }
  get selectedNode() {
    const c = this.selected || 0;
    for (let a = c; a < this.children.length; a++) {
      const f = this.children[a];
      if (ma(f)) return ((this.selected = a), f);
    }
  }
  set shader(c) {
    this.lng.shader = ov(c) ? Kr.createShader(...c) : c;
  }
  _sendToLightningAnimatable(c, a) {
    if (
      this.transition &&
      this.rendered &&
      nn.animationsEnabled &&
      (this.transition === !0 || this.transition[c])
    ) {
      const f = this.transition === !0 || this.transition[c] === !0 ? void 0 : this.transition[c];
      if (nn.simpleAnimationsEnabled) {
        (f2.add(this, c, a, f || this.animationSettings), f2.register(Kr.stage));
        return;
      } else {
        const g = this.animate({ [c]: a }, f);
        if (this.onAnimation) {
          const T = Object.keys(this.onAnimation);
          for (const S of T) {
            const h = this.onAnimation[S];
            g.on(S, (M, P) => {
              h.call(this, M, c, a, P);
            });
          }
        }
        return g.start();
      }
    }
    this.lng[c] = a;
  }
  animate(c, a) {
    return this.lng.animate(c, a || this.animationSettings || {});
  }
  chain(c, a) {
    return (
      this._animationRunning && ((this._animationQueue = []), (this._animationRunning = !1)),
      a
        ? (this._animationQueueSettings = a)
        : this._animationQueueSettings || (this._animationQueueSettings = a || this.animationSettings),
      (a = a || this._animationQueueSettings),
      (this._animationQueue = this._animationQueue || []),
      this._animationQueue.push({ props: c, animationSettings: a }),
      this
    );
  }
  async start() {
    let c = this._animationQueue.shift();
    for (; c; )
      ((this._animationRunning = !0),
        await this.animate(c.props, c.animationSettings).start().waitUntilStopped(),
        (c = this._animationQueue.shift()));
    ((this._animationRunning = !1), (this._animationQueueSettings = void 0));
  }
  emit(c, ...a) {
    let f = this;
    const g = "on".concat(c.charAt(0).toUpperCase()).concat(c.slice(1));
    for (; f; ) {
      const T = f[g];
      if (xl(T) && T.call(f, this, ...a) === !0) return !0;
      f = f.parent;
    }
    return !1;
  }
  setFocus() {
    if (this.rendered) {
      if (this.forwardFocus !== void 0)
        if (Fy(this.forwardFocus)) {
          if (this.forwardFocus.call(this, this) !== !1) return;
        } else {
          const c = typeof this.forwardFocus == "number" ? this.forwardFocus : null,
            a = this.children;
          if (c !== null && c < a.length) {
            const f = a[c];
            ma(f) && f.setFocus();
            return;
          }
        }
      queueMicrotask(() => B3(this));
    } else this._autofocus = !0;
  }
  _layoutOnLoad() {
    this.lng.on("loaded", () => {
      this.parent.updateLayout();
    });
  }
  getText() {
    let c = "";
    for (let a = 0; a < this.children.length; a++) c += this.children[a].text;
    return c;
  }
  destroy() {
    if (this.onDestroy) {
      const c = this.onDestroy(this);
      c instanceof Promise ? c.then(() => this._destroy()) : this._destroy();
    } else this._destroy();
  }
  _destroy() {
    var c;
    i2(this.lng) &&
      (this.lng.destroy(), (c = this.parent) != null && c.requiresLayout() && this.parent.updateLayout());
  }
  set style(c) {
    if (!(nn.lockStyles && this._style) && c) {
      this._style = c;
      for (const a in this._style) this[a] === void 0 && (this[a] = this._style[a]);
    }
  }
  get style() {
    return this._style;
  }
  get hasChildren() {
    return this.children.length > 0;
  }
  set src(c) {
    typeof c == "string"
      ? ((this.lng.src = c), !this.color && this.rendered && (this.color = 4294967295))
      : (this.color = 0);
  }
  get src() {
    return this.lng.src;
  }
  getChildById(c) {
    return this.children.find(a => a.id === c);
  }
  searchChildrenById(c) {
    for (let a = 0; a < this.children.length; a++) {
      const f = this.children[a];
      if (ma(f)) {
        if (f.id === c) return f;
        const g = f.searchChildrenById(c);
        if (g) return g;
      }
    }
  }
  set states(c) {
    ((this._states = this._states ? this._states.merge(c) : new s2(this._stateChanged.bind(this), c)),
      this.rendered && this._stateChanged());
  }
  get states() {
    return ((this._states = this._states || new s2(this._stateChanged.bind(this))), this._states);
  }
  get animationSettings() {
    return this._animationSettings || nn.animationSettings;
  }
  set animationSettings(c) {
    this._animationSettings = c;
  }
  set hidden(c) {
    this.alpha = c ? 0 : 1;
  }
  get hidden() {
    return this.alpha === 0;
  }
  get h() {
    return this.height;
  }
  set h(c) {
    this.height = c;
  }
  get w() {
    return this.width;
  }
  set w(c) {
    this.width = c;
  }
  set autofocus(c) {
    ((this._autofocus = c), c && queueMicrotask(() => this.setFocus()));
  }
  get autofocus() {
    return this._autofocus;
  }
  requiresLayout() {
    return this.display === "flex" || this.onLayout;
  }
  set updateLayoutOn(c) {
    this.updateLayout();
  }
  get updateLayoutOn() {
    return null;
  }
  updateLayout() {
    if (this.hasChildren) {
      if (this.display === "flex" && this.flexGrow && this.width === 0) return;
      const c = this.display === "flex" && o2(this);
      bl.delete(this);
      const a = Fy(this.onLayout) && this.onLayout.call(this, this);
      ((c || a) && this.parent && h2(this.parent),
        this._containsFlexGrow === !0 &&
          this.children.forEach(f => {
            f.display === "flex" && ma(f) && (o2(f), Fy(f.onLayout) && f.onLayout.call(f, f), h2(this));
          }));
    }
  }
  _stateChanged() {
    if (this.forwardStates) {
      const a = this.states.slice();
      this.children.forEach(f => {
        f.states = a;
      });
    }
    const c = this.states;
    if (this._undoStyles || U3(this, c)) {
      let a;
      this._undoStyles &&
        this._undoStyles.length &&
        ((a = {}),
        this._undoStyles.forEach(T => {
          a[T] = this.style[T];
        }));
      const f = c.length;
      if (f === 0) {
        (Object.assign(this, a), (this._undoStyles = []));
        return;
      }
      let g;
      (f === 1
        ? ((g = this[c[0]]), (g = a ? { ...a, ...g } : g))
        : (g = c.reduce((T, S) => {
            const h = this[S];
            return h ? { ...T, ...h } : T;
          }, a || {})),
        g
          ? ((this._undoStyles = Object.keys(g)),
            g.transition !== void 0 && (this.transition = g.transition),
            Object.assign(this, g))
          : (this._undoStyles = []));
    }
  }
  render(c) {
    var h, M, P, N;
    const a = this,
      f = this.parent;
    if (!f) {
      console.warn("Parent not set - no node created for: ", this);
      return;
    }
    if (!f.rendered) {
      console.warn("Parent not rendered yet: ", this);
      return;
    }
    if ((f.requiresLayout() && bl.add(f), this.rendered)) {
      (h = this.onRender) == null || h.call(this, this);
      return;
    }
    this._states && this._stateChanged();
    const g = a.lng,
      T = f.width || 0,
      S = f.height || 0;
    if (
      ((g.x = g.x || 0),
      (g.y = g.y || 0),
      (g.parent = f.lng),
      (this.right || this.right === 0) && ((g.x = T - this.right), (g.mountX = 1)),
      (this.bottom || this.bottom === 0) && ((g.y = S - this.bottom), (g.mountY = 1)),
      this.center && (this.centerX = this.centerY = !0),
      this.centerX && ((g.x += T / 2), (g.mountX = 0.5)),
      this.centerY && ((g.y += S / 2), (g.mountY = 0.5)),
      Al(a))
    ) {
      const D = g;
      if (nn.fontSettings) for (const V in nn.fontSettings) D[V] === void 0 && (D[V] = nn.fontSettings[V]);
      ((D.text = D.text || a.getText()),
        D.textAlign && !D.contain && console.warn("Text align requires contain: ", a.getText()),
        D.contain &&
          (D.width || (D.width = T - D.x - (D.marginRight || 0)),
          D.contain === "both" && !D.height && !D.maxLines
            ? (D.height = S - D.y - (D.marginBottom || 0))
            : D.maxLines === 1 && (D.height = D.height || D.lineHeight || D.fontSize)),
        Oy && a._effects && (g.shader = By(a, a._effects)),
        (a.lng = Kr.createTextNode(g)),
        f.requiresLayout() && (!g.width || !g.height) && a._layoutOnLoad());
    } else if (
      (g.texture ||
        (isNaN(g.width) && ((g.width = a.flexGrow ? 0 : T - g.x), (a._calcWidth = !0)),
        isNaN(g.height) && ((g.height = S - g.y), (a._calcHeight = !0)),
        g.rtt && !g.color && (g.color = 4294967295),
        !g.color && !g.src && (g.color = 0)),
      Oy && a._effects && (g.shader = By(a, a._effects)),
      (a.lng = Kr.createNode(g)),
      a._hasRenderedChildren)
    ) {
      a._hasRenderedChildren = !1;
      for (const D of a.children) ma(D) && i2(D.lng) && (D.lng.parent = a.lng);
    }
    if (
      ((a.rendered = !0),
      a.autosize && f.requiresLayout() && a._layoutOnLoad(),
      (M = this.onCreate) == null || M.call(this, this),
      (P = this.onRender) == null || P.call(this, this),
      a.onEvent)
    )
      for (const [D, V] of Object.entries(a.onEvent)) a.lng.on(D, (K, J) => V.call(a, a, J));
    if (((N = a.lng) != null && N.div && (a.lng.div.element = a), a._type === ka.Element)) {
      const D = a.children.length;
      for (let V = 0; V < D; V++) {
        const K = a.children[V];
        ma(K) && K.render();
      }
    }
    (c && !Ll && ((Ll = !0), queueMicrotask(oI)), a._autofocus && a.setFocus());
  }
}
for (const d of X3)
  Object.defineProperty(Ts.prototype, d, {
    get() {
      return this.lng[d];
    },
    set(c) {
      this._sendToLightningAnimatable(d, c);
    },
  });
for (const d of W3)
  Object.defineProperty(Ts.prototype, d, {
    get() {
      return this.lng[d];
    },
    set(c) {
      this.lng[d] = c;
    },
  });
function jy(d) {
  return {
    set(c) {
      this.effects = this.effects ? { ...this.effects, [d]: c } : { [d]: c };
    },
    get() {
      var c;
      return (c = this.effects) == null ? void 0 : c[d];
    },
  };
}
Object.defineProperties(Ts.prototype, {
  border: hl(),
  borderLeft: hl("Left"),
  borderRight: hl("Right"),
  borderTop: hl("Top"),
  borderBottom: hl("Bottom"),
  linearGradient: jy("linearGradient"),
  radialGradient: jy("radialGradient"),
  radialProgress: jy("radialProgressGradient"),
  rounded: {
    set(d) {
      this.effects = this.effects ? { ...this.effects, radius: { radius: d } } : { radius: { radius: d } };
    },
    get() {
      var d, c;
      return (c = (d = this.effects) == null ? void 0 : d.radius) == null ? void 0 : c.radius;
    },
  },
  borderRadius: {
    set(d) {
      this.effects = this.effects ? { ...this.effects, radius: { radius: d } } : { radius: { radius: d } };
    },
    get() {
      var d, c;
      return (c = (d = this.effects) == null ? void 0 : d.radius) == null ? void 0 : c.radius;
    },
  },
});
const K3 = !1,
  $3 = (d, c) => d === c,
  uv = Symbol("solid-proxy"),
  Y3 = typeof Proxy == "function",
  q3 = Symbol("solid-track"),
  lh = { equals: $3 };
let aI = hI;
const Xi = 1,
  ch = 2,
  uI = { owned: null, cleanups: null, context: null, owner: null },
  Vy = {};
var St = null;
let Hy = null,
  J3 = null,
  kt = null,
  Yn = null,
  zi = null,
  Mh = 0;
function ws(d, c) {
  const a = kt,
    f = St,
    g = d.length === 0,
    T = f,
    S = g ? uI : { owned: null, cleanups: null, context: T ? T.context : null, owner: T },
    h = g ? d : () => d(() => or(() => Nl(S)));
  ((St = S), (kt = null));
  try {
    return fi(h, !0);
  } finally {
    ((kt = a), (St = f));
  }
}
function Qt(d, c) {
  c = c ? Object.assign({}, lh, c) : lh;
  const a = { value: d, observers: null, observerSlots: null, comparator: c.equals || void 0 },
    f = g => (typeof g == "function" && (g = g(a.value)), fI(a, g));
  return [dI.bind(a), f];
}
function Q3(d, c, a) {
  const f = Rh(d, c, !0, Xi);
  ba(f);
}
function ti(d, c, a) {
  const f = Rh(d, c, !1, Xi);
  ba(f);
}
function Pa(d, c, a) {
  aI = sN;
  const f = Rh(d, c, !1, Xi);
  ((f.user = !0), zi ? zi.push(f) : ba(f));
}
function cn(d, c, a) {
  a = a ? Object.assign({}, lh, a) : lh;
  const f = Rh(d, c, !0, 0);
  return (
    (f.observers = null),
    (f.observerSlots = null),
    (f.comparator = a.equals || void 0),
    ba(f),
    dI.bind(f)
  );
}
function Z3(d) {
  return d && typeof d == "object" && "then" in d;
}
function dh(d, c, a) {
  let f, g, T;
  typeof c == "function" ? ((f = d), (g = c), (T = {})) : ((f = !0), (g = d), (T = c || {}));
  let S = null,
    h = Vy,
    M = !1,
    P = "initialValue" in T,
    N = typeof f == "function" && cn(f);
  const D = new Set(),
    [V, K] = (T.storage || Qt)(T.initialValue),
    [J, Z] = Qt(void 0),
    [ue, le] = Qt(void 0, { equals: !1 }),
    [q, se] = Qt(P ? "ready" : "unresolved");
  function x(E, re, te, ge) {
    return (
      S === E &&
        ((S = null),
        ge !== void 0 && (P = !0),
        (E === h || re === h) && T.onHydrated && queueMicrotask(() => T.onHydrated(ge, { value: re })),
        (h = Vy),
        Y(re, te)),
      re
    );
  }
  function Y(E, re) {
    fi(() => {
      (re === void 0 && K(() => E), se(re !== void 0 ? "errored" : P ? "ready" : "unresolved"), Z(re));
      for (const te of D.keys()) te.decrement();
      D.clear();
    }, !1);
  }
  function ye() {
    const E = nN,
      re = V(),
      te = J();
    if (te !== void 0 && !S) throw te;
    return (kt && kt.user, re);
  }
  function fe(E = !0) {
    if (E !== !1 && M) return;
    M = !1;
    const re = N ? N() : f;
    if (re == null || re === !1) {
      x(S, or(V));
      return;
    }
    let te;
    const ge =
      h !== Vy
        ? h
        : or(() => {
            try {
              return g(re, { value: V(), refetching: E });
            } catch (pe) {
              te = pe;
            }
          });
    if (te !== void 0) {
      x(S, void 0, nh(te), re);
      return;
    } else if (!Z3(ge)) return (x(S, ge, void 0, re), ge);
    return (
      (S = ge),
      "v" in ge
        ? (ge.s === 1 ? x(S, ge.v, void 0, re) : x(S, void 0, nh(ge.v), re), ge)
        : ((M = !0),
          queueMicrotask(() => (M = !1)),
          fi(() => {
            (se(P ? "refreshing" : "pending"), le());
          }, !1),
          ge.then(
            pe => x(ge, pe, void 0, re),
            pe => x(ge, void 0, nh(pe), re),
          ))
    );
  }
  Object.defineProperties(ye, {
    state: { get: () => q() },
    error: { get: () => J() },
    loading: {
      get() {
        const E = q();
        return E === "pending" || E === "refreshing";
      },
    },
    latest: {
      get() {
        if (!P) return ye();
        const E = J();
        if (E && !S) throw E;
        return V();
      },
    },
  });
  let xe = St;
  return (N ? Q3(() => ((xe = St), fe(!1))) : fe(!1), [ye, { refetch: E => La(xe, () => fe(E)), mutate: K }]);
}
function eN(d) {
  return fi(d, !1);
}
function or(d) {
  if (kt === null) return d();
  const c = kt;
  kt = null;
  try {
    return d();
  } finally {
    kt = c;
  }
}
function Da(d, c, a) {
  const f = Array.isArray(d);
  let g,
    T = a && a.defer;
  return S => {
    let h;
    if (f) {
      h = Array(d.length);
      for (let P = 0; P < d.length; P++) h[P] = d[P]();
    } else h = d();
    if (T) return ((T = !1), S);
    const M = or(() => c(h, g, S));
    return ((g = h), M);
  };
}
function lI(d) {
  Pa(() => or(d));
}
function jl(d) {
  return (St === null || (St.cleanups === null ? (St.cleanups = [d]) : St.cleanups.push(d)), d);
}
function oo() {
  return St;
}
function La(d, c) {
  const a = St,
    f = kt;
  ((St = d), (kt = null));
  try {
    return fi(c, !0);
  } catch (g) {
    kv(g);
  } finally {
    ((St = a), (kt = f));
  }
}
function tN(d) {
  const c = kt,
    a = St;
  return Promise.resolve().then(() => {
    ((kt = c), (St = a), fi(d, !1), (kt = St = null));
  });
}
const [oj, aj] = Qt(!1);
function Mv(d, c) {
  const a = Symbol("context");
  return { id: a, Provider: oN(a), defaultValue: d };
}
function cI(d) {
  let c;
  return St && St.context && (c = St.context[d.id]) !== void 0 ? c : d.defaultValue;
}
function Rv(d) {
  const c = cn(d),
    a = cn(() => lv(c()));
  return (
    (a.toArray = () => {
      const f = a();
      return Array.isArray(f) ? f : f != null ? [f] : [];
    }),
    a
  );
}
let nN;
function dI() {
  if (this.sources && this.state)
    if (this.state === Xi) ba(this);
    else {
      const d = Yn;
      ((Yn = null), fi(() => hh(this), !1), (Yn = d));
    }
  if (kt) {
    const d = this.observers ? this.observers.length : 0;
    (kt.sources
      ? (kt.sources.push(this), kt.sourceSlots.push(d))
      : ((kt.sources = [this]), (kt.sourceSlots = [d])),
      this.observers
        ? (this.observers.push(kt), this.observerSlots.push(kt.sources.length - 1))
        : ((this.observers = [kt]), (this.observerSlots = [kt.sources.length - 1])));
  }
  return this.value;
}
function fI(d, c, a) {
  let f = d.value;
  return (
    (!d.comparator || !d.comparator(f, c)) &&
      ((d.value = c),
      d.observers &&
        d.observers.length &&
        fi(() => {
          for (let g = 0; g < d.observers.length; g += 1) {
            const T = d.observers[g],
              S = Hy && Hy.running;
            (S && Hy.disposed.has(T),
              (S ? !T.tState : !T.state) && (T.pure ? Yn.push(T) : zi.push(T), T.observers && pI(T)),
              S || (T.state = Xi));
          }
          if (Yn.length > 1e6) throw ((Yn = []), new Error());
        }, !1)),
    c
  );
}
function ba(d) {
  if (!d.fn) return;
  Nl(d);
  const c = Mh;
  rN(d, d.value, c);
}
function rN(d, c, a) {
  let f;
  const g = St,
    T = kt;
  kt = St = d;
  try {
    f = d.fn(c);
  } catch (S) {
    return (
      d.pure && ((d.state = Xi), d.owned && d.owned.forEach(Nl), (d.owned = null)),
      (d.updatedAt = a + 1),
      kv(S)
    );
  } finally {
    ((kt = T), (St = g));
  }
  (!d.updatedAt || d.updatedAt <= a) &&
    (d.updatedAt != null && "observers" in d ? fI(d, f) : (d.value = f), (d.updatedAt = a));
}
function Rh(d, c, a, f = Xi, g) {
  const T = {
    fn: d,
    state: f,
    updatedAt: null,
    owned: null,
    sources: null,
    sourceSlots: null,
    cleanups: null,
    value: c,
    owner: St,
    context: St ? St.context : null,
    pure: a,
  };
  return (St === null || (St !== uI && (St.owned ? St.owned.push(T) : (St.owned = [T]))), T);
}
function fh(d) {
  if (d.state === 0) return;
  if (d.state === ch) return hh(d);
  if (d.suspense && or(d.suspense.inFallback)) return d.suspense.effects.push(d);
  const c = [d];
  for (; (d = d.owner) && (!d.updatedAt || d.updatedAt < Mh); ) d.state && c.push(d);
  for (let a = c.length - 1; a >= 0; a--)
    if (((d = c[a]), d.state === Xi)) ba(d);
    else if (d.state === ch) {
      const f = Yn;
      ((Yn = null), fi(() => hh(d, c[0]), !1), (Yn = f));
    }
}
function fi(d, c) {
  if (Yn) return d();
  let a = !1;
  (c || (Yn = []), zi ? (a = !0) : (zi = []), Mh++);
  try {
    const f = d();
    return (iN(a), f);
  } catch (f) {
    (a || (zi = null), (Yn = null), kv(f));
  }
}
function iN(d) {
  if ((Yn && (hI(Yn), (Yn = null)), d)) return;
  const c = zi;
  ((zi = null), c.length && fi(() => aI(c), !1));
}
function hI(d) {
  for (let c = 0; c < d.length; c++) fh(d[c]);
}
function sN(d) {
  let c,
    a = 0;
  for (c = 0; c < d.length; c++) {
    const f = d[c];
    f.user ? (d[a++] = f) : fh(f);
  }
  for (c = 0; c < a; c++) fh(d[c]);
}
function hh(d, c) {
  d.state = 0;
  for (let a = 0; a < d.sources.length; a += 1) {
    const f = d.sources[a];
    if (f.sources) {
      const g = f.state;
      g === Xi ? f !== c && (!f.updatedAt || f.updatedAt < Mh) && fh(f) : g === ch && hh(f, c);
    }
  }
}
function pI(d) {
  for (let c = 0; c < d.observers.length; c += 1) {
    const a = d.observers[c];
    a.state || ((a.state = ch), a.pure ? Yn.push(a) : zi.push(a), a.observers && pI(a));
  }
}
function Nl(d) {
  let c;
  if (d.sources)
    for (; d.sources.length; ) {
      const a = d.sources.pop(),
        f = d.sourceSlots.pop(),
        g = a.observers;
      if (g && g.length) {
        const T = g.pop(),
          S = a.observerSlots.pop();
        f < g.length && ((T.sourceSlots[S] = f), (g[f] = T), (a.observerSlots[f] = S));
      }
    }
  if (d.tOwned) {
    for (c = d.tOwned.length - 1; c >= 0; c--) Nl(d.tOwned[c]);
    delete d.tOwned;
  }
  if (d.owned) {
    for (c = d.owned.length - 1; c >= 0; c--) Nl(d.owned[c]);
    d.owned = null;
  }
  if (d.cleanups) {
    for (c = d.cleanups.length - 1; c >= 0; c--) d.cleanups[c]();
    d.cleanups = null;
  }
  d.state = 0;
}
function nh(d) {
  return d instanceof Error ? d : new Error(typeof d == "string" ? d : "Unknown error", { cause: d });
}
function kv(d, c = St) {
  throw nh(d);
}
function lv(d) {
  if (typeof d == "function" && !d.length) return lv(d());
  if (Array.isArray(d)) {
    const c = [];
    for (let a = 0; a < d.length; a++) {
      const f = lv(d[a]);
      Array.isArray(f) ? c.push.apply(c, f) : c.push(f);
    }
    return c;
  }
  return d;
}
function oN(d, c) {
  return function (f) {
    let g;
    return (
      ti(
        () => (g = or(() => ((St.context = { ...St.context, [d]: f.value }), Rv(() => f.children)))),
        void 0,
      ),
      g
    );
  };
}
const aN = Symbol("fallback");
function p2(d) {
  for (let c = 0; c < d.length; c++) d[c]();
}
function uN(d, c, a = {}) {
  let f = [],
    g = [],
    T = [],
    S = 0,
    h = c.length > 1 ? [] : null;
  return (
    jl(() => p2(T)),
    () => {
      let M = d() || [],
        P = M.length,
        N,
        D;
      return (
        M[q3],
        or(() => {
          let K, J, Z, ue, le, q, se, x, Y;
          if (P === 0)
            (S !== 0 && (p2(T), (T = []), (f = []), (g = []), (S = 0), h && (h = [])),
              a.fallback && ((f = [aN]), (g[0] = ws(ye => ((T[0] = ye), a.fallback()))), (S = 1)));
          else if (S === 0) {
            for (g = new Array(P), D = 0; D < P; D++) ((f[D] = M[D]), (g[D] = ws(V)));
            S = P;
          } else {
            for (
              Z = new Array(P), ue = new Array(P), h && (le = new Array(P)), q = 0, se = Math.min(S, P);
              q < se && f[q] === M[q];
              q++
            );
            for (se = S - 1, x = P - 1; se >= q && x >= q && f[se] === M[x]; se--, x--)
              ((Z[x] = g[se]), (ue[x] = T[se]), h && (le[x] = h[se]));
            for (K = new Map(), J = new Array(x + 1), D = x; D >= q; D--)
              ((Y = M[D]), (N = K.get(Y)), (J[D] = N === void 0 ? -1 : N), K.set(Y, D));
            for (N = q; N <= se; N++)
              ((Y = f[N]),
                (D = K.get(Y)),
                D !== void 0 && D !== -1
                  ? ((Z[D] = g[N]), (ue[D] = T[N]), h && (le[D] = h[N]), (D = J[D]), K.set(Y, D))
                  : T[N]());
            for (D = q; D < P; D++)
              D in Z ? ((g[D] = Z[D]), (T[D] = ue[D]), h && ((h[D] = le[D]), h[D](D))) : (g[D] = ws(V));
            ((g = g.slice(0, (S = P))), (f = M.slice(0)));
          }
          return g;
        })
      );
      function V(K) {
        if (((T[D] = K), h)) {
          const [J, Z] = Qt(D);
          return ((h[D] = Z), c(M[D], J));
        }
        return c(M[D]);
      }
    }
  );
}
function gI(d, c) {
  return or(() => d(c || {}));
}
function Kf() {
  return !0;
}
const lN = {
  get(d, c, a) {
    return c === uv ? a : d.get(c);
  },
  has(d, c) {
    return c === uv ? !0 : d.has(c);
  },
  set: Kf,
  deleteProperty: Kf,
  getOwnPropertyDescriptor(d, c) {
    return {
      configurable: !0,
      enumerable: !0,
      get() {
        return d.get(c);
      },
      set: Kf,
      deleteProperty: Kf,
    };
  },
  ownKeys(d) {
    return d.keys();
  },
};
function Gy(d) {
  return (d = typeof d == "function" ? d() : d) ? d : {};
}
function cN() {
  for (let d = 0, c = this.length; d < c; ++d) {
    const a = this[d]();
    if (a !== void 0) return a;
  }
}
function _v(...d) {
  let c = !1;
  for (let S = 0; S < d.length; S++) {
    const h = d[S];
    ((c = c || (!!h && uv in h)), (d[S] = typeof h == "function" ? ((c = !0), cn(h)) : h));
  }
  if (Y3 && c)
    return new Proxy(
      {
        get(S) {
          for (let h = d.length - 1; h >= 0; h--) {
            const M = Gy(d[h])[S];
            if (M !== void 0) return M;
          }
        },
        has(S) {
          for (let h = d.length - 1; h >= 0; h--) if (S in Gy(d[h])) return !0;
          return !1;
        },
        keys() {
          const S = [];
          for (let h = 0; h < d.length; h++) S.push(...Object.keys(Gy(d[h])));
          return [...new Set(S)];
        },
      },
      lN,
    );
  const a = {},
    f = Object.create(null);
  for (let S = d.length - 1; S >= 0; S--) {
    const h = d[S];
    if (!h) continue;
    const M = Object.getOwnPropertyNames(h);
    for (let P = M.length - 1; P >= 0; P--) {
      const N = M[P];
      if (N === "__proto__" || N === "constructor") continue;
      const D = Object.getOwnPropertyDescriptor(h, N);
      if (!f[N])
        f[N] = D.get
          ? { enumerable: !0, configurable: !0, get: cN.bind((a[N] = [D.get.bind(h)])) }
          : D.value !== void 0
            ? D
            : void 0;
      else {
        const V = a[N];
        V && (D.get ? V.push(D.get.bind(h)) : D.value !== void 0 && V.push(() => D.value));
      }
    }
  }
  const g = {},
    T = Object.keys(f);
  for (let S = T.length - 1; S >= 0; S--) {
    const h = T[S],
      M = f[h];
    M && M.get ? Object.defineProperty(g, h, M) : (g[h] = M ? M.value : void 0);
  }
  return g;
}
const dN = d => "Stale read from <".concat(d, ">.");
function Ol(d) {
  const c = "fallback" in d && { fallback: () => d.fallback };
  return cn(uN(() => d.each, d.children, c || void 0));
}
function Vl(d) {
  const c = d.keyed,
    a = cn(() => d.when, void 0, void 0),
    f = c ? a : cn(a, void 0, { equals: (g, T) => !g == !T });
  return cn(
    () => {
      const g = f();
      if (g) {
        const T = d.children;
        return typeof T == "function" && T.length > 0
          ? or(() =>
              T(
                c
                  ? g
                  : () => {
                      if (!or(f)) throw dN("Show");
                      return a();
                    },
              ),
            )
          : T;
      }
      return d.fallback;
    },
    void 0,
    void 0,
  );
}
const [Pv, mI] = Qt(void 0);
function yI(d, c) {
  return d ? (c ? { ...c, ...d } : d) : c;
}
const fN = (d, c, a) => (c < a ? Math.min(Math.max(d, c), a) : Math.min(Math.max(d, a), c)),
  hN = d => cn(() => d());
function pN({
  createElement: d,
  createTextNode: c,
  isTextNode: a,
  replaceText: f,
  insertNode: g,
  removeNode: T,
  setProperty: S,
  getParentNode: h,
  getFirstChild: M,
  getNextSibling: P,
}) {
  function N(q, se, x, Y) {
    if ((x !== void 0 && !Y && (Y = []), typeof se != "function")) return D(q, se, Y, x);
    ti(ye => D(q, se(), ye, x), Y);
  }
  function D(q, se, x, Y, ye) {
    for (; typeof x == "function"; ) x = x();
    if (se === x) return x;
    const fe = typeof se,
      xe = Y !== void 0;
    if (fe === "string" || fe === "number")
      if ((fe === "number" && (se = se.toString()), xe)) {
        let E = x[0];
        (E && a(E) ? f(E, se) : (E = c(se)), (x = J(q, x, Y, E)));
      } else x !== "" && typeof x == "string" ? f(M(q), (x = se)) : (J(q, x, Y, c(se)), (x = se));
    else if (se == null || fe === "boolean") x = J(q, x, Y);
    else {
      if (fe === "function")
        return (
          ti(() => {
            let E = se();
            for (; typeof E == "function"; ) E = E();
            x = D(q, E, x, Y);
          }),
          () => x
        );
      if (Array.isArray(se)) {
        const E = [];
        if (V(E, se, ye)) return (ti(() => (x = D(q, E, x, Y, !0))), () => x);
        if (E.length === 0) {
          const re = J(q, x, Y);
          if (xe) return (x = re);
        } else
          Array.isArray(x)
            ? x.length === 0
              ? Z(q, E, Y)
              : K(q, x, E)
            : x == null || x === ""
              ? Z(q, E)
              : K(q, (xe && x) || [M(q)], E);
        x = E;
      } else {
        if (Array.isArray(x)) {
          if (xe) return (x = J(q, x, Y, se));
          J(q, x, null, se);
        } else x == null || x === "" || !M(q) ? g(q, se) : ue(q, se, M(q));
        x = se;
      }
    }
    return x;
  }
  function V(q, se, x) {
    let Y = !1;
    for (let ye = 0, fe = se.length; ye < fe; ye++) {
      let xe = se[ye],
        E;
      if (!(xe == null || xe === !0 || xe === !1))
        if (Array.isArray(xe)) Y = V(q, xe) || Y;
        else if ((E = typeof xe) == "string" || E === "number") q.push(c(xe));
        else if (E === "function")
          if (x) {
            for (; typeof xe == "function"; ) xe = xe();
            Y = V(q, Array.isArray(xe) ? xe : [xe]) || Y;
          } else (q.push(xe), (Y = !0));
        else q.push(xe);
    }
    return Y;
  }
  function K(q, se, x) {
    let Y = x.length,
      ye = se.length,
      fe = Y,
      xe = 0,
      E = 0,
      re = P(se[ye - 1]),
      te = null;
    for (; xe < ye || E < fe; ) {
      if (se[xe] === x[E]) {
        (xe++, E++);
        continue;
      }
      for (; se[ye - 1] === x[fe - 1]; ) (ye--, fe--);
      if (ye === xe) {
        const ge = fe < Y ? (E ? P(x[E - 1]) : x[fe - E]) : re;
        for (; E < fe; ) g(q, x[E++], ge);
      } else if (fe === E) for (; xe < ye; ) ((!te || !te.has(se[xe])) && T(q, se[xe]), xe++);
      else if (se[xe] === x[fe - 1] && x[E] === se[ye - 1]) {
        const ge = P(se[--ye]);
        (g(q, x[E++], P(se[xe++])), g(q, x[--fe], ge), (se[ye] = x[fe]));
      } else {
        if (!te) {
          te = new Map();
          let pe = E;
          for (; pe < fe; ) te.set(x[pe], pe++);
        }
        const ge = te.get(se[xe]);
        if (ge != null)
          if (E < ge && ge < fe) {
            let pe = xe,
              oe = 1,
              ve;
            for (; ++pe < ye && pe < fe && !((ve = te.get(se[pe])) == null || ve !== ge + oe); ) oe++;
            if (oe > ge - E) {
              const Oe = se[xe];
              for (; E < ge; ) g(q, x[E++], Oe);
            } else ue(q, x[E++], se[xe++]);
          } else xe++;
        else T(q, se[xe++]);
      }
    }
  }
  function J(q, se, x, Y) {
    if (x === void 0) {
      let fe;
      for (; (fe = M(q)); ) T(q, fe);
      return (Y && g(q, Y), "");
    }
    const ye = Y || c("");
    if (se.length) {
      let fe = !1;
      for (let xe = se.length - 1; xe >= 0; xe--) {
        const E = se[xe];
        if (ye !== E) {
          const re = h(E) === q;
          !fe && !xe ? (re ? ue(q, ye, E) : g(q, ye, x)) : re && T(q, E);
        } else fe = !0;
      }
    } else g(q, ye, x);
    return [ye];
  }
  function Z(q, se, x) {
    for (let Y = 0, ye = se.length; Y < ye; Y++) g(q, se[Y], x);
  }
  function ue(q, se, x) {
    (g(q, se, x), T(q, x));
  }
  function le(q, se, x = {}, Y) {
    return (
      se || (se = {}),
      Y || ti(() => (x.children = D(q, se.children, x.children))),
      ti(() => se.ref && se.ref(q)),
      ti(() => {
        for (const ye in se) {
          if (ye === "children" || ye === "ref") continue;
          const fe = se[ye];
          fe !== x[ye] && (S(q, ye, fe, x[ye]), (x[ye] = fe));
        }
      }),
      x
    );
  }
  return {
    render(q, se) {
      let x;
      return (
        ws(Y => {
          ((x = Y), N(se, q()));
        }),
        x
      );
    },
    insert: N,
    spread(q, se, x) {
      typeof se == "function" ? ti(Y => le(q, se(), Y, x)) : le(q, se, void 0, x);
    },
    createElement: d,
    createTextNode: c,
    insertNode: g,
    setProp(q, se, x, Y) {
      return (S(q, se, x, Y), x);
    },
    mergeProps: _v,
    effect: ti,
    memo: hN,
    createComponent: gI,
    use(q, se, x) {
      return or(() => q(se, x));
    },
  };
}
function gN(d) {
  const c = pN(d);
  return ((c.mergeProps = _v), c);
}
Object.defineProperty(Ts.prototype, "preserve", {
  get() {
    return this._queueDelete === 0;
  },
  set(d) {
    this._queueDelete = d ? 0 : void 0;
  },
});
let cv = [];
function mN() {
  for (let d of cv) (Number(d._queueDelete) < 0 && d.destroy(), (d._queueDelete = void 0));
  cv.length = 0;
}
function g2(d, c) {
  d._queueDelete === void 0
    ? ((d._queueDelete = c), cv.push(d) === 1 && queueMicrotask(mN))
    : (d._queueDelete += c);
}
const vI = {
    createElement(d) {
      return new Ts(d);
    },
    createTextNode(d) {
      return { _type: ka.Text, text: d };
    },
    replaceText(d, c) {
      (Uy("Replace Text: ", d, c), (d.text = c));
      const a = d.parent;
      a.text = a.getText();
    },
    setProperty(d, c, a = !0) {
      d[c] = a;
    },
    insertNode(d, c, a) {
      Uy("INSERT: ", d, c, a);
      let f = c.parent;
      (d.insertChild(c, a),
        c instanceof Ts
          ? (c.parent.rendered && c.render(!0), f !== void 0 && g2(c, 1))
          : Al(d) && (d.text = d.getText()));
    },
    isTextNode(d) {
      return Al(d);
    },
    removeNode(d, c) {
      (Uy("REMOVE: ", d, c), d.removeChild(c), c instanceof Ts ? g2(c, -1) : Al(d) && (d.text = d.getText()));
    },
    getParentNode(d) {
      return d.parent;
    },
    getFirstChild(d) {
      return d.children[0];
    },
    getNextSibling(d) {
      const c = d.parent.children || [],
        a = c.indexOf(d) + 1;
      if (a < c.length) return c[a];
    },
  },
  xI = gN(vI);
let $f;
const rh = vI.createElement("App"),
  yN = function (d) {
    return xI.render(d, rh);
  };
function vN(d, c) {
  const a = nn.rendererOptions;
  return (
    ($f = L3(a, "app")),
    (nn.setActiveElement = mI),
    (rh.lng = $f.root),
    (rh.rendered = !0),
    $f.on("idle", () => {
      ((Dv = !0), wI());
    }),
    { renderer: $f, rootNode: rh, render: yN }
  );
}
const { memo: TI, createComponent: me, createElement: Hl, spread: Gl, setProp: pl, mergeProps: zl } = xI,
  m2 = [];
let Dv = !1;
ws(() => {
  ti(() => {
    (Pv(), (Dv = !1));
  });
});
function wI() {
  Dv &&
    m2.length &&
    setTimeout(() => {
      const d = m2.shift();
      d && (d(), wI());
    }, nn.taskDelay || 50);
}
const at = d => {
    const c = Hl("node");
    return (Gl(c, d, !1), c);
  },
  kn = d => {
    const c = Hl("text");
    return (Gl(c, d, !1), c);
  };
const xN = !1;
function SI() {
  let d = new Set();
  function c(g) {
    return (d.add(g), () => d.delete(g));
  }
  let a = !1;
  function f(g, T) {
    if (a) return !(a = !1);
    const S = { to: g, options: T, defaultPrevented: !1, preventDefault: () => (S.defaultPrevented = !0) };
    for (const h of d)
      h.listener({
        ...S,
        from: h.location,
        retry: M => {
          (M && (a = !0), h.navigate(g, { ...T, resolve: !1 }));
        },
      });
    return !S.defaultPrevented;
  }
  return { subscribe: c, confirm: f };
}
let dv;
function Lv() {
  ((!window.history.state || window.history.state._depth == null) &&
    window.history.replaceState({ ...window.history.state, _depth: window.history.length - 1 }, ""),
    (dv = window.history.state._depth));
}
Lv();
function TN(d) {
  return { ...d, _depth: window.history.state && window.history.state._depth };
}
function wN(d, c) {
  let a = !1;
  return () => {
    const f = dv;
    Lv();
    const g = f == null ? null : dv - f;
    if (a) {
      a = !1;
      return;
    }
    g && c(g) ? ((a = !0), window.history.go(-g)) : d();
  };
}
const SN = /^(?:[a-z0-9]+:)?\/\//i,
  AN = /^\/+|(\/)\/+$/g,
  EN = "http://sr";
function El(d, c = !1) {
  const a = d.replace(AN, "$1");
  return a ? (c || /^[?#]/.test(a) ? a : "/" + a) : "";
}
function ih(d, c, a) {
  if (SN.test(c)) return;
  const f = El(d),
    g = a && El(a);
  let T = "";
  return (
    !g || c.startsWith("/")
      ? (T = f)
      : g.toLowerCase().indexOf(f.toLowerCase()) !== 0
        ? (T = f + g)
        : (T = g),
    (T || "/") + El(c, !T)
  );
}
function IN(d, c) {
  if (d == null) throw new Error(c);
  return d;
}
function CN(d, c) {
  return El(d).replace(/\/*(\*.*)?$/g, "") + El(c);
}
function AI(d) {
  const c = {};
  return (
    d.searchParams.forEach((a, f) => {
      f in c ? (Array.isArray(c[f]) ? c[f].push(a) : (c[f] = [c[f], a])) : (c[f] = a);
    }),
    c
  );
}
function MN(d, c, a) {
  const [f, g] = d.split("/*", 2),
    T = f.split("/").filter(Boolean),
    S = T.length;
  return h => {
    const M = h.split("/").filter(Boolean),
      P = M.length - S;
    if (P < 0 || (P > 0 && g === void 0 && !c)) return null;
    const N = { path: S ? "" : "/", params: {} },
      D = V => (a === void 0 ? void 0 : a[V]);
    for (let V = 0; V < S; V++) {
      const K = T[V],
        J = K[0] === ":",
        Z = J ? M[V] : M[V].toLowerCase(),
        ue = J ? K.slice(1) : K.toLowerCase();
      if (J && zy(Z, D(ue))) N.params[ue] = Z;
      else if (J || !zy(Z, ue)) return null;
      N.path += "/".concat(Z);
    }
    if (g) {
      const V = P ? M.slice(-P).join("/") : "";
      if (zy(V, D(g))) N.params[g] = V;
      else return null;
    }
    return N;
  };
}
function zy(d, c) {
  const a = f => f === d;
  return c === void 0
    ? !0
    : typeof c == "string"
      ? a(c)
      : typeof c == "function"
        ? c(d)
        : Array.isArray(c)
          ? c.some(a)
          : c instanceof RegExp
            ? c.test(d)
            : !1;
}
function RN(d) {
  const [c, a] = d.pattern.split("/*", 2),
    f = c.split("/").filter(Boolean);
  return f.reduce((g, T) => g + (T.startsWith(":") ? 2 : 3), f.length - (a === void 0 ? 0 : 1));
}
function EI(d) {
  const c = new Map(),
    a = oo();
  return new Proxy(
    {},
    {
      get(f, g) {
        return (
          c.has(g) ||
            La(a, () =>
              c.set(
                g,
                cn(() => d()[g]),
              ),
            ),
          c.get(g)()
        );
      },
      getOwnPropertyDescriptor() {
        return { enumerable: !0, configurable: !0 };
      },
      ownKeys() {
        return Reflect.ownKeys(d());
      },
      has(f, g) {
        return g in d();
      },
    },
  );
}
function II(d) {
  let c = /(\/?\:[^\/]+)\?/.exec(d);
  if (!c) return [d];
  let a = d.slice(0, c.index),
    f = d.slice(c.index + c[0].length);
  const g = [a, (a += c[1])];
  for (; (c = /^(\/\:[^\/]+)\?/.exec(f)); ) (g.push((a += c[1])), (f = f.slice(c[0].length)));
  return II(f).reduce((T, S) => [...T, ...g.map(h => h + S)], []);
}
const kN = 100,
  CI = Mv(),
  MI = Mv(),
  bv = () => IN(cI(CI), "<A> and 'use' router primitives can be only used inside a Route."),
  Xl = () => bv().navigatorFactory(),
  _N = () => bv().location,
  PN = () => bv().params;
function DN(d, c = "") {
  const { component: a, preload: f, load: g, children: T, info: S } = d,
    h = !T || (Array.isArray(T) && !T.length),
    M = { key: d, component: a, preload: f || g, info: S };
  return RI(d.path).reduce((P, N) => {
    for (const D of II(N)) {
      const V = CN(c, D);
      let K = h ? V : V.split("/*", 1)[0];
      ((K = K.split("/")
        .map(J => (J.startsWith(":") || J.startsWith("*") ? J : encodeURIComponent(J)))
        .join("/")),
        P.push({ ...M, originalPath: N, pattern: K, matcher: MN(K, !h, d.matchFilters) }));
    }
    return P;
  }, []);
}
function LN(d, c = 0) {
  return {
    routes: d,
    score: RN(d[d.length - 1]) * 1e4 - c,
    matcher(a) {
      const f = [];
      for (let g = d.length - 1; g >= 0; g--) {
        const T = d[g],
          S = T.matcher(a);
        if (!S) return null;
        f.unshift({ ...S, route: T });
      }
      return f;
    },
  };
}
function RI(d) {
  return Array.isArray(d) ? d : [d];
}
function kI(d, c = "", a = [], f = []) {
  const g = RI(d);
  for (let T = 0, S = g.length; T < S; T++) {
    const h = g[T];
    if (h && typeof h == "object") {
      h.hasOwnProperty("path") || (h.path = "");
      const M = DN(h, c);
      for (const P of M) {
        a.push(P);
        const N = Array.isArray(h.children) && h.children.length === 0;
        if (h.children && !N) kI(h.children, P.pattern, a, f);
        else {
          const D = LN([...a], f.length);
          f.push(D);
        }
        a.pop();
      }
    }
  }
  return a.length ? f : f.sort((T, S) => S.score - T.score);
}
function Xy(d, c) {
  for (let a = 0, f = d.length; a < f; a++) {
    const g = d[a].matcher(c);
    if (g) return g;
  }
  return [];
}
function bN(d, c, a) {
  const f = new URL(EN),
    g = cn(
      N => {
        const D = d();
        try {
          return new URL(D, f);
        } catch (V) {
          return (console.error("Invalid path ".concat(D)), N);
        }
      },
      f,
      { equals: (N, D) => N.href === D.href },
    ),
    T = cn(() => g().pathname),
    S = cn(() => g().search, !0),
    h = cn(() => g().hash),
    M = () => "",
    P = Da(S, () => AI(g()));
  return {
    get pathname() {
      return T();
    },
    get search() {
      return S();
    },
    get hash() {
      return h();
    },
    get state() {
      return c();
    },
    get key() {
      return M();
    },
    query: a ? a(P) : EI(P),
  };
}
let to;
function NN() {
  return to;
}
function ON(d, c, a, f = {}) {
  const {
      signal: [g, T],
      utils: S = {},
    } = d,
    h = S.parsePath || (oe => oe),
    M = S.renderPath || (oe => oe),
    P = S.beforeLeave || SI(),
    N = ih("", f.base || "");
  if (N === void 0) throw new Error("".concat(N, " is not a valid base path"));
  N && !g().value && T({ value: N, replace: !0, scroll: !1 });
  const [D, V] = Qt(!1);
  let K;
  const J = (oe, ve) => {
      (ve.value === Z() && ve.state === le()) ||
        (K === void 0 && V(!0),
        (to = oe),
        (K = ve),
        tN(() => {
          K === ve && (ue(K.value), q(K.state), Y[1](Oe => Oe.filter(gt => gt.pending)));
        }).finally(() => {
          K === ve &&
            eN(() => {
              ((to = void 0), oe === "navigate" && ge(K), V(!1), (K = void 0));
            });
        }));
    },
    [Z, ue] = Qt(g().value),
    [le, q] = Qt(g().state),
    se = bN(Z, le, S.queryWrapper),
    x = [],
    Y = Qt([]),
    ye = cn(() =>
      typeof f.transformUrl == "function" ? Xy(c(), f.transformUrl(se.pathname)) : Xy(c(), se.pathname),
    ),
    fe = () => {
      const oe = ye(),
        ve = {};
      for (let Oe = 0; Oe < oe.length; Oe++) Object.assign(ve, oe[Oe].params);
      return ve;
    },
    xe = S.paramsWrapper ? S.paramsWrapper(fe, c) : EI(fe),
    E = {
      pattern: N,
      path: () => N,
      outlet: () => null,
      resolvePath(oe) {
        return ih(N, oe);
      },
    };
  return (
    ti(Da(g, oe => J("native", oe), { defer: !0 })),
    {
      base: E,
      location: se,
      params: xe,
      isRouting: D,
      renderPath: M,
      parsePath: h,
      navigatorFactory: te,
      matches: ye,
      beforeLeave: P,
      preloadRoute: pe,
      singleFlight: f.singleFlight === void 0 ? !0 : f.singleFlight,
      submissions: Y,
    }
  );
  function re(oe, ve, Oe) {
    or(() => {
      if (typeof ve == "number") {
        ve && (S.go ? S.go(ve) : console.warn("Router integration does not support relative routing"));
        return;
      }
      const gt = !ve || ve[0] === "?",
        {
          replace: rn,
          resolve: Zt,
          scroll: jt,
          state: dn,
        } = { replace: !1, resolve: !gt, scroll: !0, ...Oe },
        wn = Zt ? oe.resolvePath(ve) : ih((gt && se.pathname) || "", ve);
      if (wn === void 0) throw new Error("Path '".concat(ve, "' is not a routable path"));
      if (x.length >= kN) throw new Error("Too many redirects");
      const F = Z();
      (wn !== F || dn !== le()) &&
        (xN ||
          (P.confirm(wn, Oe) &&
            (x.push({ value: F, replace: rn, scroll: jt, state: le() }),
            J("navigate", { value: wn, state: dn }))));
    });
  }
  function te(oe) {
    return ((oe = oe || cI(MI) || E), (ve, Oe) => re(oe, ve, Oe));
  }
  function ge(oe) {
    const ve = x[0];
    ve && (T({ ...oe, replace: ve.replace, scroll: ve.scroll }), (x.length = 0));
  }
  function pe(oe, ve) {
    const Oe = Xy(c(), oe.pathname),
      gt = to;
    to = "preload";
    for (let rn in Oe) {
      const { route: Zt, params: jt } = Oe[rn];
      Zt.component && Zt.component.preload && Zt.component.preload();
      const { preload: dn } = Zt;
      ve &&
        dn &&
        La(a(), () =>
          dn({
            params: jt,
            location: {
              pathname: oe.pathname,
              search: oe.search,
              hash: oe.hash,
              query: AI(oe),
              state: null,
              key: "",
            },
            intent: "preload",
          }),
        );
    }
    to = gt;
  }
}
function UN(d, c, a, f) {
  const { base: g, location: T, params: S } = d,
    { pattern: h, component: M, preload: P } = f().route,
    N = cn(() => f().path);
  M && M.preload && M.preload();
  const D = P ? P({ params: S, location: T, intent: to || "initial" }) : void 0;
  return {
    parent: c,
    pattern: h,
    path: N,
    outlet: () =>
      M
        ? gI(M, {
            params: S,
            location: T,
            data: D,
            get children() {
              return a();
            },
          })
        : a(),
    resolvePath(K) {
      return ih(g.path(), K, N());
    },
  };
}
const FN = d => c => {
  const { base: a } = c,
    f = Rv(() => c.children),
    g = cn(() => kI(f(), c.base || ""));
  let T;
  const S = ON(d, g, () => T, { base: a, singleFlight: c.singleFlight, transformUrl: c.transformUrl });
  return (
    d.create && d.create(S),
    me(CI.Provider, {
      value: S,
      get children() {
        return me(BN, {
          routerState: S,
          get root() {
            return c.root;
          },
          get preload() {
            return c.rootPreload || c.rootLoad;
          },
          get children() {
            return [
              TI(() => (T = oo()) && null),
              me(jN, {
                routerState: S,
                get branches() {
                  return g();
                },
              }),
            ];
          },
        });
      },
    })
  );
};
function BN(d) {
  const c = d.routerState.location,
    a = d.routerState.params,
    f = cn(
      () =>
        d.preload &&
        or(() => {
          d.preload({ params: a, location: c, intent: NN() || "initial" });
        }),
    );
  return me(Vl, {
    get when() {
      return d.root;
    },
    keyed: !0,
    get fallback() {
      return d.children;
    },
    children: g =>
      me(g, {
        params: a,
        location: c,
        get data() {
          return f();
        },
        get children() {
          return d.children;
        },
      }),
  });
}
function jN(d) {
  const c = [];
  let a;
  const f = cn(
    Da(d.routerState.matches, (g, T, S) => {
      let h = T && g.length === T.length;
      const M = [];
      for (let P = 0, N = g.length; P < N; P++) {
        const D = T && T[P],
          V = g[P];
        S && D && V.route.key === D.route.key
          ? (M[P] = S[P])
          : ((h = !1),
            c[P] && c[P](),
            ws(K => {
              ((c[P] = K),
                (M[P] = UN(
                  d.routerState,
                  M[P - 1] || d.routerState.base,
                  y2(() => f()[P + 1]),
                  () => {
                    var Z;
                    const J = d.routerState.matches();
                    return (Z = J[P]) != null ? Z : J[0];
                  },
                )));
            }));
      }
      return (c.splice(g.length).forEach(P => P()), S && h ? S : ((a = M[0]), M));
    }),
  );
  return y2(() => f() && a)();
}
const y2 = d => () =>
    me(Vl, {
      get when() {
        return d();
      },
      keyed: !0,
      children: c =>
        me(MI.Provider, {
          value: c,
          get children() {
            return c.outlet();
          },
        }),
    }),
  _I = d => {
    const c = Rv(() => d.children);
    return _v(d, {
      get children() {
        return c();
      },
    });
  };
function VN([d, c], a, f) {
  return [d, f ? g => c(f(g)) : c];
}
function HN(d) {
  let c = !1;
  const a = g => (typeof g == "string" ? { value: g } : g),
    f = VN(
      Qt(a(d.get()), { equals: (g, T) => g.value === T.value && g.state === T.state }),
      void 0,
      g => (!c && d.set(g), g),
    );
  return (
    d.init &&
      jl(
        d.init((g = d.get()) => {
          ((c = !0), f[1](a(g)), (c = !1));
        }),
      ),
    FN({ signal: f, create: d.create, utils: d.utils })
  );
}
const [PI, GN] = Qt([]),
  zN = (d, c) => {
    const a = oo(),
      f = La.bind(void 0, a);
    nn.setActiveElement = S => f(() => mI(S));
    const { cleanup: g, focusPath: T } = G3({ userKeyMap: d, keyHoldOptions: c, ownerContext: f });
    (Pa(
      Da(
        Pv,
        () => {
          GN([...T()]);
        },
        { defer: !0 },
      ),
    ),
      jl(g));
  },
  ph = "aria-parent";
let gh = [];
function XN(d = []) {
  const c = [];
  let a;
  for (a = 0; a < d.length; a++) {
    const f = d[a];
    if (typeof f == "string" && !f.includes("PAUSE-")) c.push(d[a]);
    else break;
  }
  return [c.join(",\b ")].concat(d.slice(a));
}
function Wy(d) {
  return new Promise(c => {
    setTimeout(c, d);
  });
}
function v2(d) {
  var c;
  ((c = d == null ? void 0 : d.text) == null ? void 0 : c.trim().length) !== 0 && gh.push(d);
}
function WN() {
  const d = bI();
  if (!d) {
    console.error("ARIA div not found: ".concat(ph));
    return;
  }
  for (const c of gh) {
    const a = document.createElement("span");
    (a.setAttribute("lang", c.lang), a.setAttribute("aria-label", c.text), d.appendChild(a));
  }
  setTimeout(() => {
    ((gh = []), DI(), LI());
  }, 100);
}
function DI() {
  const d = document.getElementById(ph);
  if (d) for (; d.firstChild; ) d.removeChild(d.firstChild);
}
function LI() {
  var c;
  const d = (c = document.getElementById("app")) == null ? void 0 : c.firstChild;
  d == null || d.focus();
}
function bI() {
  const d = document.getElementById(ph);
  if (!d) {
    const c = document.createElement("div");
    return (
      c.setAttribute("id", ph),
      c.setAttribute("aria-live", "assertive"),
      c.setAttribute("tabindex", "0"),
      document.body.appendChild(c),
      c
    );
  }
  return d;
}
function x2(d, c, a = "en-US", f) {
  const g = window.speechSynthesis;
  return new Promise((T, S) => {
    let h;
    if (f) {
      const P = g.getVoices();
      h = P.find(N => N.name === f) || P[0];
    }
    const M = new SpeechSynthesisUtterance(d);
    ((M.lang = a),
      h && (M.voice = h),
      (M.onend = () => {
        T();
      }),
      (M.onerror = P => {
        S(P);
      }),
      c.push(M),
      g.speak(M));
  });
}
function fv(d, c, a, f, g = !0) {
  const T = window.speechSynthesis,
    S = XN(Array.isArray(d) ? d : [d]),
    h = [],
    M = [];
  let P = !0;
  return {
    series: (async () => {
      try {
        for (; P && S.length; ) {
          const D = await Promise.resolve(S.shift());
          if (!P) break;
          if (typeof D == "string" && D.includes("PAUSE-")) {
            const V = Number(D.split("PAUSE-")[1]) * 1e3;
            isNaN(V) || (await Wy(V));
          } else if (typeof D == "string") {
            if (!D) continue;
            const V = 3;
            let K = V;
            for (; P && K > 0; )
              try {
                (c ? v2({ text: D, lang: a }) : await x2(D, M, a, f), (K = 0));
              } catch (J) {
                if (J instanceof SpeechSynthesisErrorEvent)
                  if (J.error === "network")
                    (K--,
                      console.warn("Speech synthesis network error. Retries left: ".concat(K)),
                      await Wy(500 * (V - K)));
                  else if (J.error === "canceled" || J.error === "interrupted") K = 0;
                  else throw new Error("SpeechSynthesisErrorEvent: ".concat(J.error));
                else throw J;
              }
          } else if (D instanceof SpeechSynthesisUtterance) {
            let K = 3;
            const J = D.text,
              Z = D == null ? void 0 : D.lang,
              ue = D == null ? void 0 : D.voice;
            for (; P && K > 0; )
              try {
                J &&
                  (c ? v2({ text: J, lang: Z }) : await x2(J, M, Z, ue == null ? void 0 : ue.name), (K = 0));
              } catch (le) {
                if (le instanceof SpeechSynthesisErrorEvent)
                  if (le.error === "network")
                    (K--,
                      console.warn("Speech synthesis network error. Retries left: ".concat(K)),
                      await Wy(500 * (3 - K)));
                  else if (le.error === "canceled" || le.error === "interrupted") K = 0;
                  else throw new Error("SpeechSynthesisErrorEvent: ".concat(le.error));
                else throw le;
              }
          } else if (typeof D == "function") {
            const V = fv(D(), c, a, f, !1);
            (h.push(V), await V.series);
          } else if (Array.isArray(D)) {
            const V = fv(D, c, a, f, !1);
            (h.push(V), await V.series);
          }
        }
      } finally {
        ((P = !1), g && c && WN());
      }
    })(),
    get active() {
      return P;
    },
    append: D => {
      S.push(D);
    },
    cancel: () => {
      if (P) {
        if (g) {
          if (c) {
            const D = bI();
            D && ((gh = []), DI(), D.focus(), LI());
            return;
          }
          T.cancel();
        }
        (h.forEach(D => {
          D.cancel();
        }),
          (P = !1));
      }
    },
  };
}
let Yf;
function KN(d, c, a = "en-US", f) {
  return (Yf && Yf.cancel(), (Yf = fv(d, c, a, f)), Yf);
}
const hv = (d, c) => {
  let a;
  const f = () => clearTimeout(a);
  return (
    oo() && jl(f),
    Object.assign(
      (...T) => {
        (a !== void 0 && f(), (a = setTimeout(() => d(...T), c)));
      },
      { clear: f },
    )
  );
};
let pv,
  Il = [],
  di,
  gv = !1;
const $N = 3e5;
function T2(d, c) {
  const a = hv(d, c);
  let f;
  const g = T => {
    ((f = T), a(T));
  };
  return (
    (g.flush = () => {
      (a.clear(), d(f));
    }),
    (g.clear = a.clear),
    g
  );
}
function gl(d) {
  return d.id || d.name;
}
function YN(d = []) {
  if (!tn.onFocusChange || !tn.enabled) return;
  const c = d.every(T => !T.loading),
    a = d.filter(T => !Il.includes(T));
  if ((pv(), !c && tn.onFocusChange)) {
    tn.onFocusChange([]);
    return;
  }
  Il = d.slice(0);
  const f = [],
    g = a
      .reverse()
      .reduce(
        (T, S) => (
          S.announce
            ? (T.push([gl(S), "Announce", S.announce]), f.push(S.announce))
            : S.title
              ? (T.push([gl(S), "Title", S.title]), f.push(S.title))
              : T.push([gl(S), "No Announce", ""]),
          T
        ),
        [],
      );
  if (
    (a
      .reverse()
      .reduce(
        (T, S) => (
          S.announceContext
            ? (T.push([gl(S), "Context", S.announceContext]), f.push(S.announceContext))
            : T.push([gl(S), "No Context", ""]),
          T
        ),
        g,
      ),
    tn.debug && console.table(g),
    f.length)
  )
    return tn.speak(f.reduce((T, S) => T.concat(S), []));
}
function qN(d, c, a, f) {
  if (!gv) return (di = KN(d, c, a, f));
}
const tn = {
  debug: !1,
  enabled: !0,
  lang: "en-US",
  aria: !1,
  cancel: function () {
    di && di.cancel();
  },
  clearPrevFocus: function (d = 0) {
    ((Il = Il.slice(0, d)), pv());
  },
  speak: function (d, { append: c = !1, notification: a = !1 } = {}) {
    return (
      tn.onFocusChange &&
        tn.enabled &&
        (c && di && di.active ? di.append(d) : (tn.cancel(), qN(d, tn.aria, tn.lang, tn.voice)),
        a &&
          ((gv = !0),
          di == null ||
            di.series
              .finally(() => {
                ((gv = !1), tn.refresh());
              })
              .catch(console.error))),
      di
    );
  },
  refresh: function (d = 0) {
    (tn.clearPrevFocus(d), tn.onFocusChange && tn.onFocusChange(or(() => PI())));
  },
  setupTimers: function ({ focusDebounce: d = 400, focusChangeTimeout: c = $N } = {}) {
    ((tn.onFocusChange = T2(YN, d)),
      (pv = T2(() => {
        Il = [];
      }, c)));
  },
};
let w2 = !1;
const JN = d => (w2 || ((w2 = !0), tn.setupTimers(d), Pa(Da(PI, tn.onFocusChange, { defer: !0 }))), tn);
function QN(d) {
  const c = d.replace(/^.*?#/, "");
  if (!c.startsWith("/")) {
    const [, a = "/"] = window.location.hash.split("#", 2);
    return "".concat(a, "#").concat(c);
  }
  return c;
}
function ZN(d, c, a) {
  return (d.addEventListener(c, a), () => d.removeEventListener(c, a));
}
function eO(d) {
  const c = () => window.location.hash.slice(1),
    a = SI();
  return HN({
    get: c,
    set({ value: f, replace: g, state: T }) {
      (g ? window.history.replaceState(TN(T), "", "#" + f) : window.history.pushState(T, "", "#" + f), Lv());
    },
    init: f =>
      ZN(
        window,
        "hashchange",
        wN(f, g => !a.confirm(g && g < 0 ? g : c())),
      ),
    utils: {
      go: f => window.history.go(f),
      renderPath: f => "#".concat(f),
      parsePath: QN,
      beforeLeave: a,
      queryWrapper: d.forceProxy || !S2 ? f => A2(f, d.queryParams) : void 0,
      paramsWrapper: d.forceProxy || !S2 ? (f, g) => A2(f, tO(g())) : void 0,
    },
  })(d);
}
const S2 = typeof Proxy == "function";
function A2(d, c) {
  const a = new Map(),
    f = oo(),
    g = {},
    T = h => (
      a.has(h) ||
        La(f, () =>
          a.set(
            h,
            cn(() => d()[h]),
          ),
        ),
      a.get(h)()
    );
  return (
    (c || Object.keys(d())).forEach(h => {
      Object.defineProperty(g, h, { get: () => T(h), enumerable: !0, configurable: !0 });
    }),
    g
  );
}
const tO = d => {
  const c = [];
  return (
    d.forEach(a => {
      a.routes.forEach(f => {
        if (f.pattern) {
          const g = f.pattern.match(/:(\w+)/g);
          g &&
            g.forEach(T => {
              const S = T.slice(1);
              c.includes(S) || c.push(S);
            });
        }
      });
    }),
    c
  );
};
function Nv(d, c) {
  return d === 0 || (d >= 0 && d < c.length);
}
function NI(d, c = 0, a = 1) {
  var f;
  for (let g = c; ; g += a) {
    if (!Nv(g, d.children))
      if (d.wrap) g = (g + d.children.length) % d.children.length;
      else break;
    if (!((f = d.children[g]) != null && f.skipFocus)) return g;
  }
  return -1;
}
function OI(d, c) {
  var g;
  const a = d.children[c];
  if (a == null || a.skipFocus) return ((d.selected = -1), !1);
  const f = d.selected;
  return (
    (d.selected = c),
    sI(a) || a.setFocus(),
    (g = d.onSelectedChanged) == null || g.call(d, c, d, a, f),
    !0
  );
}
const UI = function () {
  const d = this;
  let c = d.selected;
  if (c !== 0) for (c = fN(c, 0, this.children.length - 1); !Nv(c, this.children); ) c--;
  return ((c = NI(d, c)), (d.selected = c), OI(d, c));
};
function kh(d) {
  return function () {
    return nO(this, d === "up" || d === "left" ? -1 : 1);
  };
}
function nO(d, c) {
  var g;
  let a = NI(d, d.selected + c, c);
  if (a === -1) {
    if (
      !Nv(d.selected, d.children) ||
      ((g = d.children[d.selected]) != null && g.skipFocus) ||
      sI(d.children[d.selected])
    )
      return !1;
    a = d.selected;
  }
  const f = d.children[a];
  if (d.plinko) {
    const S = d.children[d.selected].selected || 0;
    f.selected = S < f.children.length ? S : f.children.length - 1;
  }
  return OI(d, a);
}
const rO = 8,
  E2 = d => d.lng.renderState !== rO;
function FI(d) {
  const c = d ? "width" : "height",
    a = d ? "x" : "y";
  return (f, g, T, S) => {
    var re, te, ge, pe, oe, ve, Oe, gt, rn, Zt, jt, dn, wn;
    let h = g;
    if (
      (typeof f != "number" && ((h = f), (f = h.selected || 0)),
      !h || h.scroll === "none" || f === S || !h.children.length)
    )
      return;
    h._initialPosition === void 0 && (h._initialPosition = h[a]);
    const M = h.lng,
      P = d ? M.stage.root.width : M.stage.root.height,
      N = S === void 0 || S - 1 !== f;
    if (h._screenOffset === void 0) {
      if (h.parent.clipping) {
        const F = h.parent;
        h.endOffset = (re = h.endOffset) != null ? re : P - ((d ? F.absX : F.absY) || 0) - F[c];
      }
      h._screenOffset = (te = h.offset) != null ? te : (d ? M.absX : M.absY) - h[a];
    }
    const D = h._screenOffset,
      V = h.gap || 0,
      K = h.scroll || (S === void 0 ? (h.scrollIndex ? "center" : "always") : "auto"),
      J = (ge = h._targetPosition) != null ? ge : h[a],
      Z = N ? Math.min(J, h[a]) : Math.max(J, h[a]);
    h.offset = (pe = h.offset) != null ? pe : Z;
    const ue = h.offset;
    if (((T = T || h.children[f]), !T)) return;
    const le = (oe = T[a]) != null ? oe : 0,
      q = (ve = T[c]) != null ? ve : 0,
      se =
        (Zt =
          (rn = T.scale) != null
            ? rn
            : (gt = (Oe = T.style) == null ? void 0 : Oe.focus) == null
              ? void 0
              : gt.scale) != null
          ? Zt
          : 1,
      x = q * se,
      Y = (jt = h[c]) != null ? jt : 0,
      ye = Math.min(P - Y - D - ((dn = h.endOffset) != null ? dn : 2 * V), ue),
      fe = N ? f + 1 : f - 1,
      xe = h.children[fe] || null;
    let E = Z;
    if (T.centerScroll) E = -le + (P - x) / 2;
    else if (K === "always") E = -le + ue;
    else if (K === "bounded") {
      const F = h.children.length,
        It = h.upCount || 6,
        qn = Math.max(0, F - It),
        bt = f >= qn,
        Sn = f === qn,
        Vt = Sn && S !== void 0 && S < qn;
      if (!bt) E = -le + ue;
      else if (N)
        if (Vt) {
          const An = h.children[qn],
            Nr = (wn = An == null ? void 0 : An[a]) != null ? wn : 0;
          E = An ? -Nr + ue : Z;
        } else E = Z;
      else Sn ? (E = -le + ue) : (E = Z);
    } else if (K === "center") {
      const F = -le + (P - x) / 2 - D;
      E = Math.min(Math.max(F, ye), ue);
    } else if (!xe) E = N ? ye : ue;
    else if (K === "auto")
      if (h.scrollIndex && h.scrollIndex > 0) {
        const It = h.children.length - h.scrollIndex;
        N && h.selected >= h.scrollIndex ? (E = Z - q - V) : !N && h.selected < It && (E = Z + q + V);
      } else N ? (E = Z - q - V) : (E = Z + q + V);
    else N && E2(xe) ? (E = Z - q - V) : E2(xe) && (E = -le + ue);
    if (((E = N && K !== "always" && K !== "bounded" ? Math.max(E, ye) : Math.min(E, ue)), h[a] !== E)) {
      if (h.onScrolled) {
        const F = E === h._initialPosition;
        h.onScrolled(h, E, F);
      }
      ((h[a] = E), (h._targetPosition = E));
    }
  };
}
const mv = FI(!0),
  yv = FI(!1);
function xs(...d) {
  const c = d.filter(a => typeof a == "function");
  if (c.length !== 0)
    return c.length === 1
      ? c[0]
      : function (...a) {
          let f;
          for (const g of c) if (((f = g.apply(this, a)), f === !0)) return f;
          return f;
        };
}
const iO = {
  display: "flex",
  flexDirection: "column",
  gap: 30,
  transition: { y: { duration: 250, easing: "ease-in-out" } },
};
function sO(d) {
  var c;
  ((this.selected = d), yv(d, this), (c = this.children[d]) == null || c.setFocus());
}
const oO = kh("up"),
  aO = kh("down"),
  mh = d =>
    (() => {
      var c = Hl("view");
      return (
        Gl(
          c,
          zl(d, {
            onUp: xs(d.onUp, oO),
            onDown: xs(d.onDown, aO),
            get selected() {
              return d.selected || 0;
            },
            scrollToIndex: sO,
            forwardFocus: UI,
            onLayout: d.selected ? xs(d.onLayout, yv) : d.onLayout,
            onSelectedChanged: xs(d.onSelectedChanged, d.scroll !== "none" ? yv : void 0),
            style: yI(d.style, iO),
          }),
          !1,
        ),
        c
      );
    })(),
  uO = { display: "flex", gap: 30, transition: { x: { duration: 250, easing: "ease-in-out" } } };
function lO(d) {
  var c;
  ((this.selected = d), mv(d, this), (c = this.children[d]) == null || c.setFocus());
}
const cO = kh("left"),
  dO = kh("right"),
  yh = d =>
    (() => {
      var c = Hl("view");
      return (
        Gl(
          c,
          zl(d, {
            get selected() {
              return d.selected || 0;
            },
            onLeft: xs(d.onLeft, cO),
            onRight: xs(d.onRight, dO),
            forwardFocus: UI,
            scrollToIndex: lO,
            onLayout: d.selected ? xs(d.onLayout, mv) : d.onLayout,
            onSelectedChanged: xs(d.onSelectedChanged, d.scroll !== "none" ? mv : void 0),
            style: yI(d.style, uO),
          }),
          !1,
        ),
        c
      );
    })(),
  fO = Mv(void 0);
function hO(d) {
  const [c, a] = Qt([]);
  function f(S, h) {
    const M = h || S;
    M && a(P => [...P, M]);
  }
  function g() {
    let S = !1;
    return (
      a(h => {
        const M = h.pop();
        return (M && typeof M.setFocus == "function" && (M.setFocus(), (S = !0)), [...h]);
      }),
      S
    );
  }
  function T() {
    a([]);
  }
  return me(fO.Provider, {
    value: { storeFocus: f, restoreFocus: g, clearFocusStack: T },
    get children() {
      return d.children;
    },
  });
}
const Ss = new Map(),
  BI = d =>
    Ss.has(d.id)
      ? (console.warn('[KeepAlive] Element with id "'.concat(d.id, '" already in cache. Recreating.')), d)
      : (Ss.set(d.id, d), d),
  pO = d => {
    const c = Ss.get(d);
    c && (c.dispose(), Ss.delete(d));
  };
function I2(d) {
  const c =
      d.onRemove ||
      (g => {
        g.alpha = 0;
      }),
    a =
      d.onRender ||
      (g => {
        g.alpha = 1;
      }),
    f = d.transition || { alpha: !0 };
  return (() => {
    var g = Hl("view");
    return (
      pl(g, "preserve", !0),
      pl(g, "onRemove", c),
      pl(g, "onRender", a),
      pl(g, "forwardFocus", 0),
      pl(g, "transition", f),
      Gl(g, d, !1),
      g
    );
  })();
}
const gO = d => {
    var a;
    let c = Ss.get(d.id);
    if (
      (c && (a = d.shouldDispose) != null && a.call(d, d.id) && (c.dispose(), Ss.delete(d.id), (c = void 0)),
      c)
    )
      c && !c.children && (c.children = La(c.owner, () => I2(d)));
    else
      return ws(f => {
        const g = I2(d);
        return (BI({ id: d.id, owner: oo(), children: g, dispose: f }), g);
      });
    return c.children;
  },
  Ky = d => {
    const c = d.id || d.path,
      a = d.preload
        ? f => {
            var T, S;
            let g = Ss.get(c);
            if (
              (g &&
                (T = d.shouldDispose) != null &&
                T.call(d, c) &&
                (g.dispose(), Ss.delete(c), (g = void 0)),
              g)
            )
              g.children && ((S = g.children) == null || S.setFocus());
            else return ws(h => (BI({ id: c, owner: oo(), dispose: h, children: null }), d.preload(f)));
          }
        : void 0;
    return me(
      _I,
      zl(d, {
        preload: a,
        component: f =>
          me(gO, {
            id: c,
            get onRemove() {
              return d.onRemove;
            },
            get onRender() {
              return d.onRender;
            },
            get transition() {
              return d.transition;
            },
            get children() {
              return d.component(f);
            },
          }),
      }),
    );
  },
  [mO, Ul] = Qt(""),
  [yO, vO] = Qt(""),
  [xO, TO] = Qt(""),
  [qf, vh] = Qt(1920),
  [Jf, xh] = Qt(1080),
  [uj, C2] = Qt(!1),
  [M2, wO] = Qt(null),
  [Th, SO] = Qt(null),
  AO = () => {
    let d,
      c,
      a = 0,
      f = null;
    const g = { duration: 600, easing: "ease-in-out" };
    let T = null,
      S = null;
    return (
      Pa(() => {
        const h = mO();
        if (!h || h === f) return;
        f = h;
        const M = a === 1 ? c : d,
          P = a === 1 ? d : c;
        ((P.src = h),
          (P.alpha = 0.01),
          T && T.stop(),
          S && S.stop(),
          (S = P.animate({ alpha: 1 }, g)),
          S.start(),
          (T = M.animate({ alpha: 0 }, g)),
          T.start(),
          (a = a === 1 ? 2 : 1));
      }),
      jl(() => {
        (T.stop(), S.stop());
      }),
      me(at, {
        get width() {
          return qf();
        },
        get height() {
          return Jf();
        },
        get children() {
          return [
            me(at, {
              get width() {
                return qf();
              },
              get height() {
                return Jf();
              },
              color: 336730111,
            }),
            me(at, {
              ref(h) {
                var M = d;
                typeof M == "function" ? M(h) : (d = h);
              },
              get width() {
                return qf();
              },
              get height() {
                return Jf();
              },
              alpha: 0,
            }),
            me(at, {
              ref(h) {
                var M = c;
                typeof M == "function" ? M(h) : (c = h);
              },
              get width() {
                return qf();
              },
              get height() {
                return Jf();
              },
              alpha: 0,
            }),
          ];
        },
      })
    );
  },
  EO = d => {
    Xl();
    const c = _N(),
      a = JN();
    return (
      (a.debug = !1),
      (a.enabled = !1),
      Pa(() => {
        (wO(Th()), SO(c.pathname));
      }),
      me(at, {
        ref(f) {
          var g = window.APP;
          typeof g == "function" ? g(f) : (window.APP = f);
        },
        onAnnouncer: () => (a.enabled = !a.enabled),
        get children() {
          return [me(AO, {}), TI(() => d.children)];
        },
      })
    );
  },
  Wr = "static/",
  IO = [
    {
      type: "msdf",
      fontFamily: "Inter",
      descriptors: { weight: 400 },
      atlasDataUrl: Wr + "fonts/Inter_18pt-Regular.msdf.json",
      atlasUrl: Wr + "fonts/Inter_18pt-Regular.msdf.png",
    },
    {
      type: "msdf",
      fontFamily: "Inter",
      descriptors: { weight: 600 },
      atlasDataUrl: Wr + "fonts/Inter_18pt-SemiBold.msdf.json",
      atlasUrl: Wr + "fonts/Inter_18pt-SemiBold.msdf.png",
    },
    {
      type: "msdf",
      fontFamily: "Inter",
      descriptors: { weight: 700 },
      atlasDataUrl: Wr + "fonts/Inter_18pt-Bold.msdf.json",
      atlasUrl: Wr + "fonts/Inter_18pt-Bold.msdf.png",
    },
    {
      type: "msdf",
      fontFamily: "Roboto",
      descriptors: { weight: 700 },
      atlasDataUrl: Wr + "fonts/Roboto-Bold.msdf.json",
      atlasUrl: Wr + "fonts/Roboto-Bold.msdf.png",
    },
    {
      type: "msdf",
      fontFamily: "Roboto",
      descriptors: { weight: 400 },
      atlasDataUrl: Wr + "fonts/Roboto-Regular.msdf.json",
      atlasUrl: Wr + "fonts/Roboto-Regular.msdf.png",
    },
    {
      type: "msdf",
      fontFamily: "Arial",
      descriptors: { weight: 500 },
      atlasDataUrl: Wr + "fonts/Roboto-Regular.msdf.json",
      atlasUrl: Wr + "fonts/Roboto-Regular.msdf.png",
    },
  ];
var jI = typeof global == "object" && global && global.Object === Object && global,
  CO = typeof self == "object" && self && self.Object === Object && self,
  Na = jI || CO || Function("return this")(),
  wh = Na.Symbol,
  VI = Object.prototype,
  MO = VI.hasOwnProperty,
  RO = VI.toString,
  ml = wh ? wh.toStringTag : void 0;
function kO(d) {
  var c = MO.call(d, ml),
    a = d[ml];
  try {
    d[ml] = void 0;
    var f = !0;
  } catch (T) {}
  var g = RO.call(d);
  return (f && (c ? (d[ml] = a) : delete d[ml]), g);
}
var _O = Object.prototype,
  PO = _O.toString;
function DO(d) {
  return PO.call(d);
}
var LO = "[object Null]",
  bO = "[object Undefined]",
  R2 = wh ? wh.toStringTag : void 0;
function _h(d) {
  return d == null ? (d === void 0 ? bO : LO) : R2 && R2 in Object(d) ? kO(d) : DO(d);
}
function Wl(d) {
  return d != null && typeof d == "object";
}
var vv = Array.isArray;
function ao(d) {
  var c = typeof d;
  return d != null && (c == "object" || c == "function");
}
function HI(d) {
  return d;
}
var NO = "[object AsyncFunction]",
  OO = "[object Function]",
  UO = "[object GeneratorFunction]",
  FO = "[object Proxy]";
function Ov(d) {
  if (!ao(d)) return !1;
  var c = _h(d);
  return c == OO || c == UO || c == NO || c == FO;
}
var $y = Na["__core-js_shared__"],
  k2 = (function () {
    var d = /[^.]+$/.exec(($y && $y.keys && $y.keys.IE_PROTO) || "");
    return d ? "Symbol(src)_1." + d : "";
  })();
function BO(d) {
  return !!k2 && k2 in d;
}
var jO = Function.prototype,
  VO = jO.toString;
function HO(d) {
  if (d != null) {
    try {
      return VO.call(d);
    } catch (c) {}
    try {
      return d + "";
    } catch (c) {}
  }
  return "";
}
var GO = /[\\^$.*+?()[\]{}|]/g,
  zO = /^\[object .+?Constructor\]$/,
  XO = Function.prototype,
  WO = Object.prototype,
  KO = XO.toString,
  $O = WO.hasOwnProperty,
  YO = RegExp(
    "^" +
      KO.call($O)
        .replace(GO, "\\$&")
        .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") +
      "$",
  );
function qO(d) {
  if (!ao(d) || BO(d)) return !1;
  var c = Ov(d) ? YO : zO;
  return c.test(HO(d));
}
function JO(d, c) {
  return d == null ? void 0 : d[c];
}
function Uv(d, c) {
  var a = JO(d, c);
  return qO(a) ? a : void 0;
}
var _2 = Object.create,
  QO = (function () {
    function d() {}
    return function (c) {
      if (!ao(c)) return {};
      if (_2) return _2(c);
      d.prototype = c;
      var a = new d();
      return ((d.prototype = void 0), a);
    };
  })();
function ZO(d, c, a) {
  switch (a.length) {
    case 0:
      return d.call(c);
    case 1:
      return d.call(c, a[0]);
    case 2:
      return d.call(c, a[0], a[1]);
    case 3:
      return d.call(c, a[0], a[1], a[2]);
  }
  return d.apply(c, a);
}
function eU(d, c) {
  var a = -1,
    f = d.length;
  for (c || (c = Array(f)); ++a < f; ) c[a] = d[a];
  return c;
}
var tU = 800,
  nU = 16,
  rU = Date.now;
function iU(d) {
  var c = 0,
    a = 0;
  return function () {
    var f = rU(),
      g = nU - (f - a);
    if (((a = f), g > 0)) {
      if (++c >= tU) return arguments[0];
    } else c = 0;
    return d.apply(void 0, arguments);
  };
}
function sU(d) {
  return function () {
    return d;
  };
}
var Sh = (function () {
    try {
      var d = Uv(Object, "defineProperty");
      return (d({}, "", {}), d);
    } catch (c) {}
  })(),
  oU = Sh
    ? function (d, c) {
        return Sh(d, "toString", { configurable: !0, enumerable: !1, value: sU(c), writable: !0 });
      }
    : HI,
  aU = iU(oU),
  uU = 9007199254740991,
  lU = /^(?:0|[1-9]\d*)$/;
function GI(d, c) {
  var a = typeof d;
  return (
    (c = c == null ? uU : c),
    !!c && (a == "number" || (a != "symbol" && lU.test(d))) && d > -1 && d % 1 == 0 && d < c
  );
}
function Fv(d, c, a) {
  c == "__proto__" && Sh
    ? Sh(d, c, { configurable: !0, enumerable: !0, value: a, writable: !0 })
    : (d[c] = a);
}
function Ph(d, c) {
  return d === c || (d !== d && c !== c);
}
var cU = Object.prototype,
  dU = cU.hasOwnProperty;
function fU(d, c, a) {
  var f = d[c];
  (!(dU.call(d, c) && Ph(f, a)) || (a === void 0 && !(c in d))) && Fv(d, c, a);
}
function hU(d, c, a, f) {
  var g = !a;
  a || (a = {});
  for (var T = -1, S = c.length; ++T < S; ) {
    var h = c[T],
      M = void 0;
    (M === void 0 && (M = d[h]), g ? Fv(a, h, M) : fU(a, h, M));
  }
  return a;
}
var P2 = Math.max;
function pU(d, c, a) {
  return (
    (c = P2(c === void 0 ? d.length - 1 : c, 0)),
    function () {
      for (var f = arguments, g = -1, T = P2(f.length - c, 0), S = Array(T); ++g < T; ) S[g] = f[c + g];
      g = -1;
      for (var h = Array(c + 1); ++g < c; ) h[g] = f[g];
      return ((h[c] = a(S)), ZO(d, this, h));
    }
  );
}
function gU(d, c) {
  return aU(pU(d, c, HI), d + "");
}
var mU = 9007199254740991;
function zI(d) {
  return typeof d == "number" && d > -1 && d % 1 == 0 && d <= mU;
}
function Bv(d) {
  return d != null && zI(d.length) && !Ov(d);
}
function yU(d, c, a) {
  if (!ao(a)) return !1;
  var f = typeof c;
  return (f == "number" ? Bv(a) && GI(c, a.length) : f == "string" && c in a) ? Ph(a[c], d) : !1;
}
function vU(d) {
  return gU(function (c, a) {
    var f = -1,
      g = a.length,
      T = g > 1 ? a[g - 1] : void 0,
      S = g > 2 ? a[2] : void 0;
    for (
      T = d.length > 3 && typeof T == "function" ? (g--, T) : void 0,
        S && yU(a[0], a[1], S) && ((T = g < 3 ? void 0 : T), (g = 1)),
        c = Object(c);
      ++f < g;
    ) {
      var h = a[f];
      h && d(c, h, f, T);
    }
    return c;
  });
}
var xU = Object.prototype;
function XI(d) {
  var c = d && d.constructor,
    a = (typeof c == "function" && c.prototype) || xU;
  return d === a;
}
function TU(d, c) {
  for (var a = -1, f = Array(d); ++a < d; ) f[a] = c(a);
  return f;
}
var wU = "[object Arguments]";
function D2(d) {
  return Wl(d) && _h(d) == wU;
}
var WI = Object.prototype,
  SU = WI.hasOwnProperty,
  AU = WI.propertyIsEnumerable,
  xv = D2(
    (function () {
      return arguments;
    })(),
  )
    ? D2
    : function (d) {
        return Wl(d) && SU.call(d, "callee") && !AU.call(d, "callee");
      };
function EU() {
  return !1;
}
var KI = typeof exports == "object" && exports && !exports.nodeType && exports,
  L2 = KI && typeof module == "object" && module && !module.nodeType && module,
  IU = L2 && L2.exports === KI,
  b2 = IU ? Na.Buffer : void 0,
  CU = b2 ? b2.isBuffer : void 0,
  $I = CU || EU,
  MU = "[object Arguments]",
  RU = "[object Array]",
  kU = "[object Boolean]",
  _U = "[object Date]",
  PU = "[object Error]",
  DU = "[object Function]",
  LU = "[object Map]",
  bU = "[object Number]",
  NU = "[object Object]",
  OU = "[object RegExp]",
  UU = "[object Set]",
  FU = "[object String]",
  BU = "[object WeakMap]",
  jU = "[object ArrayBuffer]",
  VU = "[object DataView]",
  HU = "[object Float32Array]",
  GU = "[object Float64Array]",
  zU = "[object Int8Array]",
  XU = "[object Int16Array]",
  WU = "[object Int32Array]",
  KU = "[object Uint8Array]",
  $U = "[object Uint8ClampedArray]",
  YU = "[object Uint16Array]",
  qU = "[object Uint32Array]",
  Bt = {};
Bt[HU] = Bt[GU] = Bt[zU] = Bt[XU] = Bt[WU] = Bt[KU] = Bt[$U] = Bt[YU] = Bt[qU] = !0;
Bt[MU] =
  Bt[RU] =
  Bt[jU] =
  Bt[kU] =
  Bt[VU] =
  Bt[_U] =
  Bt[PU] =
  Bt[DU] =
  Bt[LU] =
  Bt[bU] =
  Bt[NU] =
  Bt[OU] =
  Bt[UU] =
  Bt[FU] =
  Bt[BU] =
    !1;
function JU(d) {
  return Wl(d) && zI(d.length) && !!Bt[_h(d)];
}
function QU(d) {
  return function (c) {
    return d(c);
  };
}
var YI = typeof exports == "object" && exports && !exports.nodeType && exports,
  Cl = YI && typeof module == "object" && module && !module.nodeType && module,
  ZU = Cl && Cl.exports === YI,
  Yy = ZU && jI.process,
  N2 = (function () {
    try {
      var d = Cl && Cl.require && Cl.require("util").types;
      return d || (Yy && Yy.binding && Yy.binding("util"));
    } catch (c) {}
  })(),
  O2 = N2 && N2.isTypedArray,
  qI = O2 ? QU(O2) : JU;
function eF(d, c) {
  var a = vv(d),
    f = !a && xv(d),
    g = !a && !f && $I(d),
    T = !a && !f && !g && qI(d),
    S = a || f || g || T,
    h = S ? TU(d.length, String) : [],
    M = h.length;
  for (var P in d)
    (S &&
      (P == "length" ||
        (g && (P == "offset" || P == "parent")) ||
        (T && (P == "buffer" || P == "byteLength" || P == "byteOffset")) ||
        GI(P, M))) ||
      h.push(P);
  return h;
}
function tF(d, c) {
  return function (a) {
    return d(c(a));
  };
}
function nF(d) {
  var c = [];
  if (d != null) for (var a in Object(d)) c.push(a);
  return c;
}
var rF = Object.prototype,
  iF = rF.hasOwnProperty;
function sF(d) {
  if (!ao(d)) return nF(d);
  var c = XI(d),
    a = [];
  for (var f in d) (f == "constructor" && (c || !iF.call(d, f))) || a.push(f);
  return a;
}
function JI(d) {
  return Bv(d) ? eF(d) : sF(d);
}
var Fl = Uv(Object, "create");
function oF() {
  ((this.__data__ = Fl ? Fl(null) : {}), (this.size = 0));
}
function aF(d) {
  var c = this.has(d) && delete this.__data__[d];
  return ((this.size -= c ? 1 : 0), c);
}
var uF = "__lodash_hash_undefined__",
  lF = Object.prototype,
  cF = lF.hasOwnProperty;
function dF(d) {
  var c = this.__data__;
  if (Fl) {
    var a = c[d];
    return a === uF ? void 0 : a;
  }
  return cF.call(c, d) ? c[d] : void 0;
}
var fF = Object.prototype,
  hF = fF.hasOwnProperty;
function pF(d) {
  var c = this.__data__;
  return Fl ? c[d] !== void 0 : hF.call(c, d);
}
var gF = "__lodash_hash_undefined__";
function mF(d, c) {
  var a = this.__data__;
  return ((this.size += this.has(d) ? 0 : 1), (a[d] = Fl && c === void 0 ? gF : c), this);
}
function io(d) {
  var c = -1,
    a = d == null ? 0 : d.length;
  for (this.clear(); ++c < a; ) {
    var f = d[c];
    this.set(f[0], f[1]);
  }
}
io.prototype.clear = oF;
io.prototype.delete = aF;
io.prototype.get = dF;
io.prototype.has = pF;
io.prototype.set = mF;
function yF() {
  ((this.__data__ = []), (this.size = 0));
}
function Dh(d, c) {
  for (var a = d.length; a--; ) if (Ph(d[a][0], c)) return a;
  return -1;
}
var vF = Array.prototype,
  xF = vF.splice;
function TF(d) {
  var c = this.__data__,
    a = Dh(c, d);
  if (a < 0) return !1;
  var f = c.length - 1;
  return (a == f ? c.pop() : xF.call(c, a, 1), --this.size, !0);
}
function wF(d) {
  var c = this.__data__,
    a = Dh(c, d);
  return a < 0 ? void 0 : c[a][1];
}
function SF(d) {
  return Dh(this.__data__, d) > -1;
}
function AF(d, c) {
  var a = this.__data__,
    f = Dh(a, d);
  return (f < 0 ? (++this.size, a.push([d, c])) : (a[f][1] = c), this);
}
function Wi(d) {
  var c = -1,
    a = d == null ? 0 : d.length;
  for (this.clear(); ++c < a; ) {
    var f = d[c];
    this.set(f[0], f[1]);
  }
}
Wi.prototype.clear = yF;
Wi.prototype.delete = TF;
Wi.prototype.get = wF;
Wi.prototype.has = SF;
Wi.prototype.set = AF;
var QI = Uv(Na, "Map");
function EF() {
  ((this.size = 0), (this.__data__ = { hash: new io(), map: new (QI || Wi)(), string: new io() }));
}
function IF(d) {
  var c = typeof d;
  return c == "string" || c == "number" || c == "symbol" || c == "boolean" ? d !== "__proto__" : d === null;
}
function Lh(d, c) {
  var a = d.__data__;
  return IF(c) ? a[typeof c == "string" ? "string" : "hash"] : a.map;
}
function CF(d) {
  var c = Lh(this, d).delete(d);
  return ((this.size -= c ? 1 : 0), c);
}
function MF(d) {
  return Lh(this, d).get(d);
}
function RF(d) {
  return Lh(this, d).has(d);
}
function kF(d, c) {
  var a = Lh(this, d),
    f = a.size;
  return (a.set(d, c), (this.size += a.size == f ? 0 : 1), this);
}
function Oa(d) {
  var c = -1,
    a = d == null ? 0 : d.length;
  for (this.clear(); ++c < a; ) {
    var f = d[c];
    this.set(f[0], f[1]);
  }
}
Oa.prototype.clear = EF;
Oa.prototype.delete = CF;
Oa.prototype.get = MF;
Oa.prototype.has = RF;
Oa.prototype.set = kF;
var ZI = tF(Object.getPrototypeOf, Object),
  _F = "[object Object]",
  PF = Function.prototype,
  DF = Object.prototype,
  eC = PF.toString,
  LF = DF.hasOwnProperty,
  bF = eC.call(Object);
function NF(d) {
  if (!Wl(d) || _h(d) != _F) return !1;
  var c = ZI(d);
  if (c === null) return !0;
  var a = LF.call(c, "constructor") && c.constructor;
  return typeof a == "function" && a instanceof a && eC.call(a) == bF;
}
function OF() {
  ((this.__data__ = new Wi()), (this.size = 0));
}
function UF(d) {
  var c = this.__data__,
    a = c.delete(d);
  return ((this.size = c.size), a);
}
function FF(d) {
  return this.__data__.get(d);
}
function BF(d) {
  return this.__data__.has(d);
}
var jF = 200;
function VF(d, c) {
  var a = this.__data__;
  if (a instanceof Wi) {
    var f = a.__data__;
    if (!QI || f.length < jF - 1) return (f.push([d, c]), (this.size = ++a.size), this);
    a = this.__data__ = new Oa(f);
  }
  return (a.set(d, c), (this.size = a.size), this);
}
function Ua(d) {
  var c = (this.__data__ = new Wi(d));
  this.size = c.size;
}
Ua.prototype.clear = OF;
Ua.prototype.delete = UF;
Ua.prototype.get = FF;
Ua.prototype.has = BF;
Ua.prototype.set = VF;
var tC = typeof exports == "object" && exports && !exports.nodeType && exports,
  U2 = tC && typeof module == "object" && module && !module.nodeType && module,
  HF = U2 && U2.exports === tC,
  F2 = HF ? Na.Buffer : void 0;
F2 && F2.allocUnsafe;
function GF(d, c) {
  return d.slice();
}
var B2 = Na.Uint8Array;
function zF(d) {
  var c = new d.constructor(d.byteLength);
  return (new B2(c).set(new B2(d)), c);
}
function XF(d, c) {
  var a = zF(d.buffer);
  return new d.constructor(a, d.byteOffset, d.length);
}
function WF(d) {
  return typeof d.constructor == "function" && !XI(d) ? QO(ZI(d)) : {};
}
function KF(d) {
  return function (c, a, f) {
    for (var g = -1, T = Object(c), S = f(c), h = S.length; h--; ) {
      var M = S[++g];
      if (a(T[M], M, T) === !1) break;
    }
    return c;
  };
}
var $F = KF();
function Tv(d, c, a) {
  ((a !== void 0 && !Ph(d[c], a)) || (a === void 0 && !(c in d))) && Fv(d, c, a);
}
function YF(d) {
  return Wl(d) && Bv(d);
}
function wv(d, c) {
  if (!(c === "constructor" && typeof d[c] == "function") && c != "__proto__") return d[c];
}
function qF(d) {
  return hU(d, JI(d));
}
function JF(d, c, a, f, g, T, S) {
  var h = wv(d, a),
    M = wv(c, a),
    P = S.get(M);
  if (P) {
    Tv(d, a, P);
    return;
  }
  var N = T ? T(h, M, a + "", d, c, S) : void 0,
    D = N === void 0;
  if (D) {
    var V = vv(M),
      K = !V && $I(M),
      J = !V && !K && qI(M);
    ((N = M),
      V || K || J
        ? vv(h)
          ? (N = h)
          : YF(h)
            ? (N = eU(h))
            : K
              ? ((D = !1), (N = GF(M)))
              : J
                ? ((D = !1), (N = XF(M)))
                : (N = [])
        : NF(M) || xv(M)
          ? ((N = h), xv(h) ? (N = qF(h)) : (!ao(h) || Ov(h)) && (N = WF(M)))
          : (D = !1));
  }
  (D && (S.set(M, N), g(N, M, f, T, S), S.delete(M)), Tv(d, a, N));
}
function nC(d, c, a, f, g) {
  d !== c &&
    $F(
      c,
      function (T, S) {
        if ((g || (g = new Ua()), ao(T))) JF(d, c, S, a, nC, f, g);
        else {
          var h = f ? f(wv(d, S), T, S + "", d, c, g) : void 0;
          (h === void 0 && (h = T), Tv(d, S, h));
        }
      },
      JI,
    );
}
var QF = vU(function (d, c, a) {
  nC(d, c, a);
});
const ZF = 24;
function eB(d, c, a, f, g, T, S, h, M) {
  const P = Math.min(Math.max(S.firstLineIdx, 0), h.length),
    N = 0,
    { metrics: D } = a;
  a.data;
  const V = (D.ascender - D.descender) * d;
  let K = 0;
  f === "middle" ? (K = (c - V) / 2) : f === "bottom" && (K = c - V);
  const J = g / T,
    Z = a.data.common.base,
    le = D.ascender * d - Z,
    q = J + le + P * c + K;
  if (!(M && q >= M / T)) return { sdfX: N, sdfY: q, lineIndex: P };
}
class wl {
  constructor(c, a = 0) {
    _(this, "iterator");
    _(this, "peekBuffer", []);
    _(this, "_lastIndex");
    ((this.iterator = c), (this.iterator = c), (this._lastIndex = a - 1), (this.peekBuffer = []));
  }
  next() {
    const c = this.peekBuffer.length > 0 ? this.peekBuffer.pop() : this.iterator.next();
    return (c.done ? (this._lastIndex = -1) : this._lastIndex++, c);
  }
  peek() {
    if (this.peekBuffer.length > 0) return this.peekBuffer[0];
    const c = this.iterator.next();
    return (this.peekBuffer.push(c), c);
  }
  get lastIndex() {
    return this._lastIndex;
  }
}
function* Sl(d, c = 0) {
  let a = c;
  for (; a < d.length; ) {
    const f = d.codePointAt(a);
    if (f === void 0) throw new Error("Invalid Unicode code point");
    (yield f, (a += f <= 65535 ? 1 : 2));
  }
}
function tB(d, c, a) {
  const f = a.shapeText(c, new wl(Sl(d, 0), 0));
  let g = 0;
  for (const T of f) T.mapped && T.codepoint !== 8203 && (g += T.xAdvance);
  return g;
}
function nB(d, c, a, f, g, T, S, h, M, P, N, D, V, K, J, Z, ue, le, q) {
  (J.loaded, J.data, J.shaper);
  const se = h / J.data.info.size,
    x = M / se,
    Y = T / se,
    ye = P / se,
    fe = V[d],
    xe = (fe == null ? void 0 : fe.codepointIndex) || 0,
    E = (fe == null ? void 0 : fe.maxX) || 0,
    re = (fe == null ? void 0 : fe.maxY) || 0;
  let te = E,
    ge = re,
    pe = c,
    oe = a,
    ve = 0;
  const Oe = { codepointIndex: -1, bufferOffset: -1, xStart: -1 },
    gt = J.shaper,
    rn = { letterSpacing: ye };
  f.endsWith(" ") && (f += " ");
  let Zt = gt.shapeText(rn, new wl(Sl(f, xe), xe)),
    jt,
    dn = -1;
  const wn = [],
    F = S / se,
    It = tB(le, rn, gt);
  let qn = !0;
  for (; qn; ) {
    const bt = (q === 0 || d + 1 < q) && (D !== "both" || ue || oe + x + J.maxCharHeight <= F),
      Sn = bt ? Y : Y - It;
    let Vt = 0;
    const An = oe + J.maxCharHeight >= K.y1,
      Nr = oe <= K.y2,
      ar = An && Nr;
    for (; (jt = Zt.next()) && !jt.done; ) {
      const de = jt.value;
      if (d === V.length) V.push({ codepointIndex: de.cluster, maxY: ge, maxX: te });
      else if (d > V.length) throw new Error("Unexpected lineCache length");
      if (
        (de.codepoint === 32 || de.codepoint === 10 || de.codepoint === 8203
          ? Oe.codepointIndex !== -1 && ((Oe.codepointIndex = -1), (Vt = pe))
          : Oe.codepointIndex === -1 &&
            ((Oe.codepointIndex = de.cluster), (Oe.bufferOffset = ve), (Oe.xStart = Vt)),
        de.mapped)
      ) {
        const $r = pe + de.xOffset + de.width;
        if (D !== "none" && $r >= Sn && Oe.codepointIndex !== -1 && Oe.xStart > 0)
          if (bt) {
            ((Zt = gt.shapeText(rn, new wl(Sl(f, Oe.codepointIndex), Oe.codepointIndex))),
              (ve = Oe.bufferOffset));
            break;
          } else
            ((Zt = gt.shapeText(rn, new wl(Sl(le, 0), 0))),
              (pe = Oe.xStart),
              (ve = Oe.bufferOffset),
              (D = "none"));
        else {
          const Tr = pe + de.xOffset,
            ur = oe + de.yOffset;
          if (ar) {
            dn === -1 && (dn = ve);
            const hi = J.getAtlasEntry(de.glyphId),
              En = hi.x / J.data.common.scaleW,
              Be = hi.y / J.data.common.scaleH,
              lr = hi.width / J.data.common.scaleW,
              Es = hi.height / J.data.common.scaleH;
            ((N[ve++] = Tr),
              (N[ve++] = ur),
              (N[ve++] = En),
              (N[ve++] = Be),
              (N[ve++] = Tr + de.width),
              (N[ve++] = ur),
              (N[ve++] = En + lr),
              (N[ve++] = Be),
              (N[ve++] = Tr),
              (N[ve++] = ur + de.height),
              (N[ve++] = En),
              (N[ve++] = Be + Es),
              (N[ve++] = Tr + de.width),
              (N[ve++] = ur + de.height),
              (N[ve++] = En + lr),
              (N[ve++] = Be + Es));
          }
          ((ge = Math.max(ge, ur + de.height)), (te = Math.max(te, Tr + de.width)), (pe += de.xAdvance));
        }
      } else if (de.codepoint === 10) {
        if (bt) break;
        ((Zt = gt.shapeText(rn, new wl(Sl(le, 0), 0))), (D = "none"));
      }
    }
    (dn !== -1 && (wn.push({ bufferStart: dn, bufferEnd: ve }), (dn = -1)),
      (pe = 0),
      (oe += x),
      d++,
      (Oe.codepointIndex = -1),
      (Vt = 0),
      (!Z && D === "both" && oe > K.y2) || (jt && jt.done) ? (qn = !1) : bt || (qn = !1));
  }
  if (g === "center") {
    const bt = D === "none" ? te : Y;
    for (let Sn = 0; Sn < wn.length; Sn++) {
      const Vt = wn[Sn],
        An = N[Vt.bufferEnd - 4] - N[Vt.bufferStart],
        Nr = (bt - An) / 2;
      for (let ar = Vt.bufferStart; ar < Vt.bufferEnd; ar += 4) N[ar] += Nr;
    }
  } else if (g === "right") {
    const bt = D === "none" ? te : Y;
    for (let Sn = 0; Sn < wn.length; Sn++) {
      const Vt = wn[Sn],
        An = Vt.bufferEnd === Vt.bufferStart ? 0 : N[Vt.bufferEnd - 4] - N[Vt.bufferStart],
        Nr = bt - An;
      for (let ar = Vt.bufferStart; ar < Vt.bufferEnd; ar += 4) N[ar] += Nr;
    }
  }
  return {
    bufferNumFloats: ve,
    bufferNumQuads: ve / 16,
    layoutNumCharacters: jt.done ? f.length - xe : jt.value.cluster - xe + 1,
    fullyProcessed: !!jt.done,
    maxX: te,
    maxY: ge,
    numLines: V.length,
  };
}
function rB(d, c) {
  return Math.ceil(d / c) * c;
}
function iB(d, c) {
  return Math.floor(d / c) * c;
}
function sB(d, c, a, f, g, T, S, h) {
  const { screen: M, sdf: P } = d;
  if (!xb(S))
    ((M.x1 = 0),
      (M.y1 = 0),
      (M.x2 = 0),
      (M.y2 = 0),
      (P.x1 = 0),
      (P.y1 = 0),
      (P.x2 = 0),
      (P.y2 = 0),
      (d.numLines = 0),
      (d.firstLineIdx = 0));
  else {
    const N = S.x1 - c,
      D = N + (S.x2 - S.x1),
      V = S.y1 - a + f,
      K = iB(V - T, g || 1),
      J = rB(V + (S.y2 - S.y1) + T, g || 1);
    ((M.x1 = N),
      (M.y1 = K),
      (M.x2 = D),
      (M.y2 = J),
      (P.x1 = N / h),
      (P.y1 = K / h),
      (P.x2 = D / h),
      (P.y2 = J / h),
      (d.numLines = Math.ceil((J - K) / g)),
      (d.firstLineIdx = g ? Math.floor(K / g) : 0));
  }
  d.valid = !0;
}
function oB(d, c) {
  return c * (d.ascender - d.descender + d.lineGap);
}
const aB = { x: 0, y: 0, width: 0, height: 0 };
class uB extends eI {
  constructor(a) {
    super(a);
    _(this, "ssdfFontFamilies", {});
    _(this, "msdfFontFamilies", {});
    _(this, "fontFamilyArray", [this.ssdfFontFamilies, this.msdfFontFamilies]);
    _(this, "sdfShader");
    _(this, "rendererBounds");
    _(this, "type", "sdf");
    ((this.sdfShader = this.stage.shManager.loadShader("SdfShader", {
      transform: new Float32Array(),
      color: 0,
      size: 0,
      scrollY: 0,
      distanceRange: 0,
      debug: !1,
    }).shader),
      (this.rendererBounds = {
        x1: 0,
        y1: 0,
        x2: this.stage.options.appWidth,
        y2: this.stage.options.appHeight,
      }));
  }
  getPropertySetters() {
    return {
      fontFamily: (a, f) => {
        ((a.props.fontFamily = f), this.releaseFontFace(a), this.invalidateLayoutCache(a));
      },
      fontWeight: (a, f) => {
        ((a.props.fontWeight = f), this.releaseFontFace(a), this.invalidateLayoutCache(a));
      },
      fontStyle: (a, f) => {
        ((a.props.fontStyle = f), this.releaseFontFace(a), this.invalidateLayoutCache(a));
      },
      fontStretch: (a, f) => {
        ((a.props.fontStretch = f), this.releaseFontFace(a), this.invalidateLayoutCache(a));
      },
      fontSize: (a, f) => {
        ((a.props.fontSize = f), this.invalidateLayoutCache(a));
      },
      text: (a, f) => {
        ((a.props.text = f), this.invalidateLayoutCache(a));
      },
      textAlign: (a, f) => {
        ((a.props.textAlign = f), this.invalidateLayoutCache(a));
      },
      color: (a, f) => {
        a.props.color = f;
      },
      x: (a, f) => {
        ((a.props.x = f),
          a.elementBounds.valid &&
            (this.setElementBoundsX(a),
            !a.renderWindow.valid &&
              Py(a.elementBounds, this.rendererBounds) &&
              this.scheduleUpdateState(a)));
      },
      y: (a, f) => {
        ((a.props.y = f),
          a.elementBounds.valid &&
            (this.setElementBoundsY(a),
            !a.renderWindow.valid &&
              Py(a.elementBounds, this.rendererBounds) &&
              this.scheduleUpdateState(a)));
      },
      contain: (a, f) => {
        ((a.props.contain = f), this.invalidateLayoutCache(a));
      },
      width: (a, f) => {
        ((a.props.width = f), a.props.contain !== "none" && this.invalidateLayoutCache(a));
      },
      height: (a, f) => {
        ((a.props.height = f), a.props.contain === "both" && this.invalidateLayoutCache(a));
      },
      offsetY: (a, f) => {
        ((a.props.offsetY = f), this.invalidateLayoutCache(a));
      },
      scrollable: (a, f) => {
        ((a.props.scrollable = f), this.invalidateLayoutCache(a));
      },
      scrollY: (a, f) => {
        ((a.props.scrollY = f), this.scheduleUpdateState(a));
      },
      letterSpacing: (a, f) => {
        ((a.props.letterSpacing = f), this.invalidateLayoutCache(a));
      },
      lineHeight: (a, f) => {
        ((a.props.lineHeight = f), (a.resLineHeight = void 0), this.invalidateLayoutCache(a));
      },
      maxLines: (a, f) => {
        ((a.props.maxLines = f), this.invalidateLayoutCache(a));
      },
      textBaseline: (a, f) => {
        ((a.props.textBaseline = f), this.invalidateLayoutCache(a));
      },
      verticalAlign: (a, f) => {
        ((a.props.verticalAlign = f), this.invalidateLayoutCache(a));
      },
      overflowSuffix: (a, f) => {
        ((a.props.overflowSuffix = f), this.invalidateLayoutCache(a));
      },
      debug: (a, f) => {
        a.props.debug = f;
      },
    };
  }
  canRenderFont(a) {
    const { fontFamily: f } = a;
    return f in this.ssdfFontFamilies || f in this.msdfFontFamilies || f === "$$SDF_FAILURE_TEST$$";
  }
  isFontFaceSupported(a) {
    return a instanceof iI;
  }
  addFontFace(a) {
    const f = a.fontFamily,
      g = a.type === "ssdf" ? this.ssdfFontFamilies : a.type === "msdf" ? this.msdfFontFamilies : void 0;
    if (!g) {
      console.warn("Invalid font face type: ".concat(a.type));
      return;
    }
    let T = g[f];
    (T || ((T = new Set()), (g[f] = T)), T.add(a));
  }
  createState(a) {
    return {
      props: a,
      status: "initialState",
      updateScheduled: !1,
      emitter: new As(),
      lineCache: [],
      forceFullLayoutCalc: !1,
      renderWindow: {
        screen: { x1: 0, y1: 0, x2: 0, y2: 0 },
        sdf: { x1: 0, y1: 0, x2: 0, y2: 0 },
        firstLineIdx: 0,
        numLines: 0,
        valid: !1,
      },
      elementBounds: { x1: 0, y1: 0, x2: 0, y2: 0, valid: !1 },
      clippingRect: { x: 0, y: 0, width: 0, height: 0, valid: !1 },
      bufferNumFloats: 0,
      bufferNumQuads: 0,
      vertexBuffer: void 0,
      webGlBuffers: null,
      bufferUploaded: !1,
      textH: void 0,
      textW: void 0,
      distanceRange: 0,
      trFontFace: void 0,
      isRenderable: !1,
      resLineHeight: void 0,
      debugData: {
        updateCount: 0,
        layoutCount: 0,
        lastLayoutNumCharacters: 0,
        layoutSum: 0,
        drawSum: 0,
        drawCount: 0,
        bufferSize: 0,
      },
    };
  }
  updateState(a) {
    let { trFontFace: f } = a;
    const { textH: g, lineCache: T, debugData: S, forceFullLayoutCalc: h } = a;
    if ((S.updateCount++, a.status === "initialState" && this.setStatus(a, "loading"), f === void 0)) {
      if (((f = this.resolveFontFace(a.props)), (a.trFontFace = f), f === void 0)) {
        const gt = "SdfTextRenderer: Could not resolve font face for family: '".concat(
          a.props.fontFamily,
          "'",
        );
        (console.error(gt), this.setStatus(a, "failed", new Error(gt)));
        return;
      }
      f.texture.setRenderableOwner(a.props.fontFamily, !0);
    }
    if (f.loaded === !1) {
      f.once("loaded", () => {
        this.scheduleUpdateState(a);
      });
      return;
    }
    (f.data, f.metrics);
    const {
        text: M,
        fontSize: P,
        x: N,
        y: D,
        contain: V,
        width: K,
        height: J,
        verticalAlign: Z,
        scrollable: ue,
        overflowSuffix: le,
        maxLines: q,
      } = a.props,
      se = V === "both" && ue ? a.props.scrollY : 0,
      { renderWindow: x } = a,
      Y = f.data.info.size,
      ye = P / Y;
    let fe = a.resLineHeight;
    if (fe === void 0) {
      const gt = a.props.lineHeight;
      (gt === void 0 ? (fe = oB(f.metrics, P)) : (fe = gt), (a.resLineHeight = fe));
    }
    const xe = fe / ye;
    a.distanceRange = ye * f.data.distanceField.distanceRange;
    const E = M.length * ZF;
    let re = a.vertexBuffer;
    (!re || re.length < E) && (re = new Float32Array(E * 2));
    const te = a.elementBounds;
    if (
      (te.valid || (this.setElementBoundsX(a), this.setElementBoundsY(a), (te.valid = !0)), !h && x.valid)
    ) {
      const gt = x.screen;
      if (N + gt.x1 <= te.x1 && N + gt.x2 >= te.x2 && D - se + gt.y1 <= te.y1 && D - se + gt.y2 >= te.y2) {
        this.setStatus(a, "loaded");
        return;
      }
      ((x.valid = !1), this.setStatus(a, "loading"));
    }
    const { offsetY: ge, textAlign: pe } = a.props;
    if (!x.valid) {
      if (!Py(te, this.rendererBounds)) return;
      sB(x, N, D, se, fe, V === "both" ? te.y2 - te.y1 : 0, te, ye);
    }
    const oe = eB(Y, xe, f, Z, ge, ye, x, T, g);
    if (!oe) {
      this.setStatus(a, "loaded");
      return;
    }
    const { letterSpacing: ve } = a.props,
      Oe = nB(oe.lineIndex, oe.sdfX, oe.sdfY, M, pe, K, J, P, fe, ve, re, V, T, x.sdf, f, h, ue, le, q);
    ((a.bufferUploaded = !1),
      (a.bufferNumFloats = Oe.bufferNumFloats),
      (a.bufferNumQuads = Oe.bufferNumQuads),
      (a.vertexBuffer = re),
      (a.renderWindow = x),
      (S.lastLayoutNumCharacters = Oe.layoutNumCharacters),
      (S.bufferSize = re.byteLength),
      Oe.fullyProcessed && ((a.textW = Oe.maxX * ye), (a.textH = Oe.numLines * xe * ye)),
      this.setStatus(a, "loaded"));
  }
  renderQuads(a, f, g, T, S, h) {
    var te, ge, pe;
    if (!a.vertexBuffer) return;
    const M = this.stage.renderer,
      { fontSize: P, color: N, contain: D, scrollable: V, zIndex: K, debug: J } = a.props,
      Z = D === "both" && V ? a.props.scrollY : 0,
      {
        textW: ue = 0,
        textH: le = 0,
        distanceRange: q,
        vertexBuffer: se,
        bufferUploaded: x,
        trFontFace: Y,
        elementBounds: ye,
      } = a;
    let { webGlBuffers: fe } = a;
    if (!fe) {
      const oe = M.glw,
        ve = 4 * Float32Array.BYTES_PER_ELEMENT,
        Oe = oe.createBuffer();
      ((a.webGlBuffers = new rI([
        {
          buffer: Oe,
          attributes: {
            a_position: {
              name: "a_position",
              size: 2,
              type: oe.FLOAT,
              normalized: !1,
              stride: ve,
              offset: 0,
            },
            a_textureCoordinate: {
              name: "a_textureCoordinate",
              size: 2,
              type: oe.FLOAT,
              normalized: !1,
              stride: ve,
              offset: 2 * Float32Array.BYTES_PER_ELEMENT,
            },
          },
        },
      ])),
        (a.bufferUploaded = !1),
        a.webGlBuffers,
        (fe = a.webGlBuffers));
    }
    if (!x) {
      const oe = M.glw,
        ve = (te = fe == null ? void 0 : fe.getBuffer("a_textureCoordinate")) != null ? te : null;
      (oe.arrayBufferData(ve, se, oe.STATIC_DRAW), (a.bufferUploaded = !0));
    }
    if (V && D === "both") {
      ye.valid;
      const oe = gb(ye, aB);
      g.valid
        ? ((a.clippingRect.valid = !0), (g = z2(g, oe, a.clippingRect)))
        : ((a.clippingRect.valid = !0), (g = X2(oe, a.clippingRect)));
    }
    const xe = new nI(
        M.glw,
        M.options,
        fe,
        this.sdfShader,
        {
          transform: f.getFloatArr(),
          color: lb(N, T),
          size: P / (((ge = Y.data) == null ? void 0 : ge.info.size) || 0),
          scrollY: Z,
          distanceRange: q,
          debug: J.sdfShaderDebug,
        },
        T,
        g,
        { height: le, width: ue },
        0,
        K,
        !1,
        S,
        h,
      ),
      re = ((pe = a.trFontFace) == null ? void 0 : pe.texture).ctxTexture;
    (xe.addTexture(re), (xe.length = a.bufferNumFloats), (xe.numQuads = a.bufferNumQuads), M.addRenderOp(xe));
  }
  setIsRenderable(a, f) {
    var g;
    (super.setIsRenderable(a, f),
      (g = a.trFontFace) == null || g.texture.setRenderableOwner(a.props.fontFamily, f));
  }
  destroyState(a) {
    var f;
    (super.destroyState(a),
      (f = a.trFontFace) == null || f.texture.setRenderableOwner(a.props.fontFamily, !1));
  }
  resolveFontFace(a) {
    return this.stage.fontManager.resolveFontFace(this.fontFamilyArray, a, "sdf");
  }
  releaseFontFace(a) {
    ((a.resLineHeight = void 0),
      a.trFontFace &&
        (a.trFontFace.texture.setRenderableOwner(a.props.fontFamily, !1), (a.trFontFace = void 0)));
  }
  invalidateLayoutCache(a) {
    ((a.renderWindow.valid = !1),
      (a.elementBounds.valid = !1),
      (a.textH = void 0),
      (a.textW = void 0),
      (a.lineCache = []),
      this.setStatus(a, "loading"),
      this.scheduleUpdateState(a));
  }
  setElementBoundsX(a) {
    const { x: f, contain: g, width: T } = a.props,
      { elementBounds: S } = a;
    ((S.x1 = f), (S.x2 = g !== "none" ? f + T : 1 / 0));
  }
  setElementBoundsY(a) {
    const { y: f, contain: g, height: T } = a.props,
      { elementBounds: S } = a;
    ((S.y1 = f), (S.y2 = g === "both" ? f + T : 1 / 0));
  }
}
var lB =
    typeof globalThis < "u"
      ? globalThis
      : typeof window < "u"
        ? window
        : typeof global < "u"
          ? global
          : typeof self < "u"
            ? self
            : {},
  qy = {};
/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/ var j2;
function cB() {
  return (
    j2 ||
      ((j2 = 1),
      (function (d) {
        (function () {
          var c = typeof window < "u" ? window : lB,
            a = {};
          (function (g, T, S) {
            var h,
              M =
                typeof Object.create == "function"
                  ? Object.create
                  : function (e) {
                      function t() {}
                      return ((t.prototype = e), new t());
                    },
              P =
                typeof Object.defineProperties == "function"
                  ? Object.defineProperty
                  : function (e, t, n) {
                      return (e == Array.prototype || e == Object.prototype || (e[t] = n.value), e);
                    };
            function N(e) {
              e = [
                typeof globalThis == "object" && globalThis,
                e,
                typeof g == "object" && g,
                typeof self == "object" && self,
                typeof T == "object" && T,
              ];
              for (var t = 0; t < e.length; ++t) {
                var n = e[t];
                if (n && n.Math == Math) return n;
              }
              throw Error("Cannot find global object");
            }
            var D = N(this);
            function V(e, t) {
              if (t)
                e: {
                  var n = D;
                  e = e.split(".");
                  for (var r = 0; r < e.length - 1; r++) {
                    var i = e[r];
                    if (!(i in n)) break e;
                    n = n[i];
                  }
                  ((e = e[e.length - 1]),
                    (r = n[e]),
                    (t = t(r)),
                    t != r && t != null && P(n, e, { configurable: !0, writable: !0, value: t }));
                }
            }
            var K;
            if (typeof Object.setPrototypeOf == "function") K = Object.setPrototypeOf;
            else {
              var J;
              e: {
                var Z = { a: !0 },
                  ue = {};
                try {
                  ((ue.__proto__ = Z), (J = ue.a));
                  break e;
                } catch (e) {}
                J = !1;
              }
              K = J
                ? function (e, t) {
                    if (((e.__proto__ = t), e.__proto__ !== t)) throw new TypeError(e + " is not extensible");
                    return e;
                  }
                : null;
            }
            var le = K;
            function q(e, t) {
              if (((e.prototype = M(t.prototype)), (e.prototype.constructor = e), le)) le(e, t);
              else
                for (var n in t)
                  if (n != "prototype")
                    if (Object.defineProperties) {
                      var r = Object.getOwnPropertyDescriptor(t, n);
                      r && Object.defineProperty(e, n, r);
                    } else e[n] = t[n];
              e.Im = t.prototype;
            }
            function se(e) {
              var t = 0;
              return function () {
                return t < e.length ? { done: !1, value: e[t++] } : { done: !0 };
              };
            }
            function x(e) {
              var t = typeof Symbol < "u" && Symbol.iterator && e[Symbol.iterator];
              if (t) return t.call(e);
              if (typeof e.length == "number") return { next: se(e) };
              throw Error(String(e) + " is not an iterable or ArrayLike");
            }
            function Y(e) {
              if (!(e instanceof Array)) {
                e = x(e);
                for (var t, n = []; !(t = e.next()).done; ) n.push(t.value);
                e = n;
              }
              return e;
            }
            function ye() {
              ((this.o = !1),
                (this.l = null),
                (this.h = void 0),
                (this.g = 1),
                (this.j = this.m = 0),
                (this.B = this.i = null));
            }
            function fe(e) {
              if (e.o) throw new TypeError("Generator is already running");
              e.o = !0;
            }
            ye.prototype.u = function (e) {
              this.h = e;
            };
            function xe(e, t) {
              ((e.i = { bi: t, si: !0 }), (e.g = e.m || e.j));
            }
            ye.prototype.return = function (e) {
              ((this.i = { return: e }), (this.g = this.j));
            };
            function E(e, t, n) {
              return ((e.g = n), { value: t });
            }
            ye.prototype.A = function (e) {
              this.g = e;
            };
            function re(e) {
              e.g = 0;
            }
            function te(e, t, n) {
              ((e.m = t), n != null && (e.j = n));
            }
            function ge(e, t) {
              ((e.m = 0), (e.j = t || 0));
            }
            function pe(e, t, n) {
              ((e.g = t), (e.m = n || 0));
            }
            function oe(e, t) {
              return ((e.m = t || 0), (t = e.i.bi), (e.i = null), t);
            }
            function ve(e) {
              ((e.B = [e.i]), (e.m = 0), (e.j = 0));
            }
            function Oe(e, t) {
              var n = e.B.splice(0)[0];
              (n = e.i = e.i || n)
                ? n.si
                  ? (e.g = e.m || e.j)
                  : n.A != null && e.j < n.A
                    ? ((e.g = n.A), (e.i = null))
                    : (e.g = e.j)
                : (e.g = t);
            }
            function gt(e) {
              ((this.g = new ye()), (this.h = e));
            }
            function rn(e, t) {
              fe(e.g);
              var n = e.g.l;
              return n
                ? Zt(
                    e,
                    "return" in n
                      ? n.return
                      : function (r) {
                          return { value: r, done: !0 };
                        },
                    t,
                    e.g.return,
                  )
                : (e.g.return(t), jt(e));
            }
            function Zt(e, t, n, r) {
              try {
                var i = t.call(e.g.l, n);
                if (!(i instanceof Object)) throw new TypeError("Iterator result " + i + " is not an object");
                if (!i.done) return ((e.g.o = !1), i);
                var s = i.value;
              } catch (o) {
                return ((e.g.l = null), xe(e.g, o), jt(e));
              }
              return ((e.g.l = null), r.call(e.g, s), jt(e));
            }
            function jt(e) {
              for (; e.g.g; )
                try {
                  var t = e.h(e.g);
                  if (t) return ((e.g.o = !1), { value: t.value, done: !1 });
                } catch (n) {
                  ((e.g.h = void 0), xe(e.g, n));
                }
              if (((e.g.o = !1), e.g.i)) {
                if (((t = e.g.i), (e.g.i = null), t.si)) throw t.bi;
                return { value: t.return, done: !0 };
              }
              return { value: void 0, done: !0 };
            }
            function dn(e) {
              ((this.next = function (t) {
                return (fe(e.g), e.g.l ? (t = Zt(e, e.g.l.next, t, e.g.u)) : (e.g.u(t), (t = jt(e))), t);
              }),
                (this.throw = function (t) {
                  return (fe(e.g), e.g.l ? (t = Zt(e, e.g.l.throw, t, e.g.u)) : (xe(e.g, t), (t = jt(e))), t);
                }),
                (this.return = function (t) {
                  return rn(e, t);
                }),
                (this[Symbol.iterator] = function () {
                  return this;
                }));
            }
            function wn(e) {
              function t(r) {
                return e.next(r);
              }
              function n(r) {
                return e.throw(r);
              }
              return new Promise(function (r, i) {
                function s(o) {
                  o.done ? r(o.value) : Promise.resolve(o.value).then(t, n).then(s, i);
                }
                s(e.next());
              });
            }
            function F(e) {
              return wn(new dn(new gt(e)));
            }
            function It() {
              for (var e = Number(this), t = [], n = e; n < arguments.length; n++) t[n - e] = arguments[n];
              return t;
            }
            (V("Symbol", function (e) {
              function t(s) {
                if (this instanceof t) throw new TypeError("Symbol is not a constructor");
                return new n(r + (s || "") + "_" + i++, s);
              }
              function n(s, o) {
                ((this.g = s), P(this, "description", { configurable: !0, writable: !0, value: o }));
              }
              if (e) return e;
              n.prototype.toString = function () {
                return this.g;
              };
              var r = "jscomp_symbol_" + ((Math.random() * 1e9) >>> 0) + "_",
                i = 0;
              return t;
            }),
              V("Symbol.iterator", function (e) {
                return (
                  e ||
                  ((e = Symbol("Symbol.iterator")),
                  P(Array.prototype, e, {
                    configurable: !0,
                    writable: !0,
                    value: function () {
                      return qn(se(this));
                    },
                  }),
                  e)
                );
              }));
            function qn(e) {
              return (
                (e = { next: e }),
                (e[Symbol.iterator] = function () {
                  return this;
                }),
                e
              );
            }
            V("Promise", function (e) {
              function t(o) {
                ((this.h = 0), (this.i = void 0), (this.g = []), (this.o = !1));
                var u = this.j();
                try {
                  o(u.resolve, u.reject);
                } catch (l) {
                  u.reject(l);
                }
              }
              function n() {
                this.g = null;
              }
              function r(o) {
                return o instanceof t
                  ? o
                  : new t(function (u) {
                      u(o);
                    });
              }
              if (e) return e;
              n.prototype.h = function (o) {
                if (this.g == null) {
                  this.g = [];
                  var u = this;
                  this.i(function () {
                    u.l();
                  });
                }
                this.g.push(o);
              };
              var i = D.setTimeout;
              ((n.prototype.i = function (o) {
                i(o, 0);
              }),
                (n.prototype.l = function () {
                  for (; this.g && this.g.length; ) {
                    var o = this.g;
                    this.g = [];
                    for (var u = 0; u < o.length; ++u) {
                      var l = o[u];
                      o[u] = null;
                      try {
                        l();
                      } catch (p) {
                        this.j(p);
                      }
                    }
                  }
                  this.g = null;
                }),
                (n.prototype.j = function (o) {
                  this.i(function () {
                    throw o;
                  });
                }),
                (t.prototype.j = function () {
                  function o(p) {
                    return function (m) {
                      l || ((l = !0), p.call(u, m));
                    };
                  }
                  var u = this,
                    l = !1;
                  return { resolve: o(this.G), reject: o(this.l) };
                }),
                (t.prototype.G = function (o) {
                  if (o === this) this.l(new TypeError("A Promise cannot resolve to itself"));
                  else if (o instanceof t) this.I(o);
                  else {
                    e: switch (typeof o) {
                      case "object":
                        var u = o != null;
                        break e;
                      case "function":
                        u = !0;
                        break e;
                      default:
                        u = !1;
                    }
                    u ? this.F(o) : this.m(o);
                  }
                }),
                (t.prototype.F = function (o) {
                  var u = void 0;
                  try {
                    u = o.then;
                  } catch (l) {
                    this.l(l);
                    return;
                  }
                  typeof u == "function" ? this.J(u, o) : this.m(o);
                }),
                (t.prototype.l = function (o) {
                  this.u(2, o);
                }),
                (t.prototype.m = function (o) {
                  this.u(1, o);
                }),
                (t.prototype.u = function (o, u) {
                  if (this.h != 0)
                    throw Error(
                      "Cannot settle(" + o + ", " + u + "): Promise already settled in state" + this.h,
                    );
                  ((this.h = o), (this.i = u), this.h === 2 && this.H(), this.B());
                }),
                (t.prototype.H = function () {
                  var o = this;
                  i(function () {
                    if (o.C()) {
                      var u = D.console;
                      typeof u < "u" && u.error(o.i);
                    }
                  }, 1);
                }),
                (t.prototype.C = function () {
                  if (this.o) return !1;
                  var o = D.CustomEvent,
                    u = D.Event,
                    l = D.dispatchEvent;
                  return typeof l > "u"
                    ? !0
                    : (typeof o == "function"
                        ? (o = new o("unhandledrejection", { cancelable: !0 }))
                        : typeof u == "function"
                          ? (o = new u("unhandledrejection", { cancelable: !0 }))
                          : ((o = D.document.createEvent("CustomEvent")),
                            o.initCustomEvent("unhandledrejection", !1, !0, o)),
                      (o.promise = this),
                      (o.reason = this.i),
                      l(o));
                }),
                (t.prototype.B = function () {
                  if (this.g != null) {
                    for (var o = 0; o < this.g.length; ++o) s.h(this.g[o]);
                    this.g = null;
                  }
                }));
              var s = new n();
              return (
                (t.prototype.I = function (o) {
                  var u = this.j();
                  o.Te(u.resolve, u.reject);
                }),
                (t.prototype.J = function (o, u) {
                  var l = this.j();
                  try {
                    o.call(u, l.resolve, l.reject);
                  } catch (p) {
                    l.reject(p);
                  }
                }),
                (t.prototype.then = function (o, u) {
                  function l(v, w) {
                    return typeof v == "function"
                      ? function (A) {
                          try {
                            p(v(A));
                          } catch (I) {
                            m(I);
                          }
                        }
                      : w;
                  }
                  var p,
                    m,
                    y = new t(function (v, w) {
                      ((p = v), (m = w));
                    });
                  return (this.Te(l(o, p), l(u, m)), y);
                }),
                (t.prototype.catch = function (o) {
                  return this.then(void 0, o);
                }),
                (t.prototype.Te = function (o, u) {
                  function l() {
                    switch (p.h) {
                      case 1:
                        o(p.i);
                        break;
                      case 2:
                        u(p.i);
                        break;
                      default:
                        throw Error("Unexpected state: " + p.h);
                    }
                  }
                  var p = this;
                  (this.g == null ? s.h(l) : this.g.push(l), (this.o = !0));
                }),
                (t.resolve = r),
                (t.reject = function (o) {
                  return new t(function (u, l) {
                    l(o);
                  });
                }),
                (t.race = function (o) {
                  return new t(function (u, l) {
                    for (var p = x(o), m = p.next(); !m.done; m = p.next()) r(m.value).Te(u, l);
                  });
                }),
                (t.all = function (o) {
                  var u = x(o),
                    l = u.next();
                  return l.done
                    ? r([])
                    : new t(function (p, m) {
                        function y(A) {
                          return function (I) {
                            ((v[A] = I), w--, w == 0 && p(v));
                          };
                        }
                        var v = [],
                          w = 0;
                        do (v.push(void 0), w++, r(l.value).Te(y(v.length - 1), m), (l = u.next()));
                        while (!l.done);
                      });
                }),
                t
              );
            });
            function bt(e, t) {
              return Object.prototype.hasOwnProperty.call(e, t);
            }
            (V("WeakMap", function (e) {
              function t(l) {
                if (((this.g = (u += Math.random() + 1).toString()), l)) {
                  l = x(l);
                  for (var p; !(p = l.next()).done; ) ((p = p.value), this.set(p[0], p[1]));
                }
              }
              function n() {}
              function r(l) {
                var p = typeof l;
                return (p === "object" && l !== null) || p === "function";
              }
              function i(l) {
                if (!bt(l, o)) {
                  var p = new n();
                  P(l, o, { value: p });
                }
              }
              function s(l) {
                var p = Object[l];
                p &&
                  (Object[l] = function (m) {
                    return m instanceof n ? m : (Object.isExtensible(m) && i(m), p(m));
                  });
              }
              if (
                (function () {
                  if (!e || !Object.seal) return !1;
                  try {
                    var l = Object.seal({}),
                      p = Object.seal({}),
                      m = new e([
                        [l, 2],
                        [p, 3],
                      ]);
                    return m.get(l) != 2 || m.get(p) != 3
                      ? !1
                      : (m.delete(l), m.set(p, 4), !m.has(l) && m.get(p) == 4);
                  } catch (y) {
                    return !1;
                  }
                })()
              )
                return e;
              var o = "$jscomp_hidden_" + Math.random();
              (s("freeze"), s("preventExtensions"), s("seal"));
              var u = 0;
              return (
                (t.prototype.set = function (l, p) {
                  if (!r(l)) throw Error("Invalid WeakMap key");
                  if ((i(l), !bt(l, o))) throw Error("WeakMap key fail: " + l);
                  return ((l[o][this.g] = p), this);
                }),
                (t.prototype.get = function (l) {
                  return r(l) && bt(l, o) ? l[o][this.g] : void 0;
                }),
                (t.prototype.has = function (l) {
                  return r(l) && bt(l, o) && bt(l[o], this.g);
                }),
                (t.prototype.delete = function (l) {
                  return r(l) && bt(l, o) && bt(l[o], this.g) ? delete l[o][this.g] : !1;
                }),
                t
              );
            }),
              V("Map", function (e) {
                function t() {
                  var u = {};
                  return (u.xc = u.next = u.head = u);
                }
                function n(u, l) {
                  var p = u[1];
                  return qn(function () {
                    if (p) {
                      for (; p.head != u[1]; ) p = p.xc;
                      for (; p.next != p.head; ) return ((p = p.next), { done: !1, value: l(p) });
                      p = null;
                    }
                    return { done: !0, value: void 0 };
                  });
                }
                function r(u, l) {
                  var p = l && typeof l;
                  p == "object" || p == "function"
                    ? s.has(l)
                      ? (p = s.get(l))
                      : ((p = "" + ++o), s.set(l, p))
                    : (p = "p_" + l);
                  var m = u[0][p];
                  if (m && bt(u[0], p))
                    for (u = 0; u < m.length; u++) {
                      var y = m[u];
                      if ((l !== l && y.key !== y.key) || l === y.key)
                        return { id: p, list: m, index: u, entry: y };
                    }
                  return { id: p, list: m, index: -1, entry: void 0 };
                }
                function i(u) {
                  if (((this[0] = {}), (this[1] = t()), (this.size = 0), u)) {
                    u = x(u);
                    for (var l; !(l = u.next()).done; ) ((l = l.value), this.set(l[0], l[1]));
                  }
                }
                if (
                  (function () {
                    if (
                      !e ||
                      typeof e != "function" ||
                      !e.prototype.entries ||
                      typeof Object.seal != "function"
                    )
                      return !1;
                    try {
                      var u = Object.seal({ x: 4 }),
                        l = new e(x([[u, "s"]]));
                      if (
                        l.get(u) != "s" ||
                        l.size != 1 ||
                        l.get({ x: 4 }) ||
                        l.set({ x: 4 }, "t") != l ||
                        l.size != 2
                      )
                        return !1;
                      var p = l.entries(),
                        m = p.next();
                      return m.done || m.value[0] != u || m.value[1] != "s"
                        ? !1
                        : ((m = p.next()),
                          !(m.done || m.value[0].x != 4 || m.value[1] != "t" || !p.next().done));
                    } catch (y) {
                      return !1;
                    }
                  })()
                )
                  return e;
                var s = new WeakMap();
                ((i.prototype.set = function (u, l) {
                  u = u === 0 ? 0 : u;
                  var p = r(this, u);
                  return (
                    p.list || (p.list = this[0][p.id] = []),
                    p.entry
                      ? (p.entry.value = l)
                      : ((p.entry = { next: this[1], xc: this[1].xc, head: this[1], key: u, value: l }),
                        p.list.push(p.entry),
                        (this[1].xc.next = p.entry),
                        (this[1].xc = p.entry),
                        this.size++),
                    this
                  );
                }),
                  (i.prototype.delete = function (u) {
                    return (
                      (u = r(this, u)),
                      u.entry && u.list
                        ? (u.list.splice(u.index, 1),
                          u.list.length || delete this[0][u.id],
                          (u.entry.xc.next = u.entry.next),
                          (u.entry.next.xc = u.entry.xc),
                          (u.entry.head = null),
                          this.size--,
                          !0)
                        : !1
                    );
                  }),
                  (i.prototype.clear = function () {
                    ((this[0] = {}), (this[1] = this[1].xc = t()), (this.size = 0));
                  }),
                  (i.prototype.has = function (u) {
                    return !!r(this, u).entry;
                  }),
                  (i.prototype.get = function (u) {
                    return (u = r(this, u).entry) && u.value;
                  }),
                  (i.prototype.entries = function () {
                    return n(this, function (u) {
                      return [u.key, u.value];
                    });
                  }),
                  (i.prototype.keys = function () {
                    return n(this, function (u) {
                      return u.key;
                    });
                  }),
                  (i.prototype.values = function () {
                    return n(this, function (u) {
                      return u.value;
                    });
                  }),
                  (i.prototype.forEach = function (u, l) {
                    for (var p = this.entries(), m; !(m = p.next()).done; )
                      ((m = m.value), u.call(l, m[1], m[0], this));
                  }),
                  (i.prototype[Symbol.iterator] = i.prototype.entries));
                var o = 0;
                return i;
              }),
              V("Set", function (e) {
                function t(n) {
                  if (((this.g = new Map()), n)) {
                    n = x(n);
                    for (var r; !(r = n.next()).done; ) this.add(r.value);
                  }
                  this.size = this.g.size;
                }
                return (function () {
                  if (
                    !e ||
                    typeof e != "function" ||
                    !e.prototype.entries ||
                    typeof Object.seal != "function"
                  )
                    return !1;
                  try {
                    var n = Object.seal({ x: 4 }),
                      r = new e(x([n]));
                    if (
                      !r.has(n) ||
                      r.size != 1 ||
                      r.add(n) != r ||
                      r.size != 1 ||
                      r.add({ x: 4 }) != r ||
                      r.size != 2
                    )
                      return !1;
                    var i = r.entries(),
                      s = i.next();
                    return s.done || s.value[0] != n || s.value[1] != n
                      ? !1
                      : ((s = i.next()),
                        s.done || s.value[0] == n || s.value[0].x != 4 || s.value[1] != s.value[0]
                          ? !1
                          : i.next().done);
                  } catch (o) {
                    return !1;
                  }
                })()
                  ? e
                  : ((t.prototype.add = function (n) {
                      return ((n = n === 0 ? 0 : n), this.g.set(n, n), (this.size = this.g.size), this);
                    }),
                    (t.prototype.delete = function (n) {
                      return ((n = this.g.delete(n)), (this.size = this.g.size), n);
                    }),
                    (t.prototype.clear = function () {
                      (this.g.clear(), (this.size = 0));
                    }),
                    (t.prototype.has = function (n) {
                      return this.g.has(n);
                    }),
                    (t.prototype.entries = function () {
                      return this.g.entries();
                    }),
                    (t.prototype.values = function () {
                      return this.g.values();
                    }),
                    (t.prototype.keys = t.prototype.values),
                    (t.prototype[Symbol.iterator] = t.prototype.values),
                    (t.prototype.forEach = function (n, r) {
                      var i = this;
                      this.g.forEach(function (s) {
                        return n.call(r, s, s, i);
                      });
                    }),
                    t);
              }));
            function Sn(e, t, n) {
              e instanceof String && (e = String(e));
              for (var r = e.length, i = 0; i < r; i++) {
                var s = e[i];
                if (t.call(n, s, i, e)) return { ni: i, v: s };
              }
              return { ni: -1, v: void 0 };
            }
            V("Array.prototype.findIndex", function (e) {
              return (
                e ||
                function (t, n) {
                  return Sn(this, t, n).ni;
                }
              );
            });
            function Vt(e, t) {
              e instanceof String && (e += "");
              var n = 0,
                r = !1,
                i = {
                  next: function () {
                    if (!r && n < e.length) {
                      var s = n++;
                      return { value: t(s, e[s]), done: !1 };
                    }
                    return ((r = !0), { done: !0, value: void 0 });
                  },
                };
              return (
                (i[Symbol.iterator] = function () {
                  return i;
                }),
                i
              );
            }
            (V("Array.prototype.values", function (e) {
              return (
                e ||
                function () {
                  return Vt(this, function (t, n) {
                    return n;
                  });
                }
              );
            }),
              V("Array.from", function (e) {
                return (
                  e ||
                  function (t, n, r) {
                    n =
                      n != null
                        ? n
                        : function (u) {
                            return u;
                          };
                    var i = [],
                      s = typeof Symbol < "u" && Symbol.iterator && t[Symbol.iterator];
                    if (typeof s == "function") {
                      t = s.call(t);
                      for (var o = 0; !(s = t.next()).done; ) i.push(n.call(r, s.value, o++));
                    } else for (s = t.length, o = 0; o < s; o++) i.push(n.call(r, t[o], o));
                    return i;
                  }
                );
              }),
              V("Array.prototype.keys", function (e) {
                return (
                  e ||
                  function () {
                    return Vt(this, function (t) {
                      return t;
                    });
                  }
                );
              }));
            function An(e, t, n) {
              if (e == null)
                throw new TypeError(
                  "The 'this' value for String.prototype." + n + " must not be null or undefined",
                );
              if (t instanceof RegExp)
                throw new TypeError(
                  "First argument to String.prototype." + n + " must not be a regular expression",
                );
              return e + "";
            }
            (V("String.prototype.startsWith", function (e) {
              return (
                e ||
                function (t, n) {
                  var r = An(this, t, "startsWith"),
                    i = r.length,
                    s = t.length;
                  n = Math.max(0, Math.min(n | 0, r.length));
                  for (var o = 0; o < s && n < i; ) if (r[n++] != t[o++]) return !1;
                  return o >= s;
                }
              );
            }),
              V("Object.is", function (e) {
                return (
                  e ||
                  function (t, n) {
                    return t === n ? t !== 0 || 1 / t === 1 / n : t !== t && n !== n;
                  }
                );
              }),
              V("Array.prototype.includes", function (e) {
                return (
                  e ||
                  function (t, n) {
                    var r = this;
                    r instanceof String && (r = String(r));
                    var i = r.length;
                    for (n = n || 0, n < 0 && (n = Math.max(n + i, 0)); n < i; n++) {
                      var s = r[n];
                      if (s === t || Object.is(s, t)) return !0;
                    }
                    return !1;
                  }
                );
              }),
              V("String.prototype.includes", function (e) {
                return (
                  e ||
                  function (t, n) {
                    return An(this, t, "includes").indexOf(t, n || 0) !== -1;
                  }
                );
              }),
              V("String.fromCodePoint", function (e) {
                return (
                  e ||
                  function (t) {
                    for (var n = "", r = 0; r < arguments.length; r++) {
                      var i = Number(arguments[r]);
                      if (i < 0 || i > 1114111 || i !== Math.floor(i))
                        throw new RangeError("invalid_code_point " + i);
                      i <= 65535
                        ? (n += String.fromCharCode(i))
                        : ((i -= 65536),
                          (n += String.fromCharCode(((i >>> 10) & 1023) | 55296)),
                          (n += String.fromCharCode((i & 1023) | 56320)));
                    }
                    return n;
                  }
                );
              }),
              V("WeakSet", function (e) {
                function t(n) {
                  if (((this.g = new WeakMap()), n)) {
                    n = x(n);
                    for (var r; !(r = n.next()).done; ) this.add(r.value);
                  }
                }
                return (function () {
                  if (!e || !Object.seal) return !1;
                  try {
                    var n = Object.seal({}),
                      r = Object.seal({}),
                      i = new e([n]);
                    return !i.has(n) || i.has(r) ? !1 : (i.delete(n), i.add(r), !i.has(n) && i.has(r));
                  } catch (s) {
                    return !1;
                  }
                })()
                  ? e
                  : ((t.prototype.add = function (n) {
                      return (this.g.set(n, !0), this);
                    }),
                    (t.prototype.has = function (n) {
                      return this.g.has(n);
                    }),
                    (t.prototype.delete = function (n) {
                      return this.g.delete(n);
                    }),
                    t);
              }),
              V("Array.prototype.find", function (e) {
                return (
                  e ||
                  function (t, n) {
                    return Sn(this, t, n).v;
                  }
                );
              }),
              V("Object.entries", function (e) {
                return (
                  e ||
                  function (t) {
                    var n = [],
                      r;
                    for (r in t) bt(t, r) && n.push([r, t[r]]);
                    return n;
                  }
                );
              }));
            var Nr =
              typeof Object.assign == "function"
                ? Object.assign
                : function (e, t) {
                    if (e == null) throw new TypeError("No nullish arg");
                    e = Object(e);
                    for (var n = 1; n < arguments.length; n++) {
                      var r = arguments[n];
                      if (r) for (var i in r) bt(r, i) && (e[i] = r[i]);
                    }
                    return e;
                  };
            (V("Object.assign", function (e) {
              return e || Nr;
            }),
              V("Promise.prototype.finally", function (e) {
                return (
                  e ||
                  function (t) {
                    return this.then(
                      function (n) {
                        return Promise.resolve(t()).then(function () {
                          return n;
                        });
                      },
                      function (n) {
                        return Promise.resolve(t()).then(function () {
                          throw n;
                        });
                      },
                    );
                  }
                );
              }),
              V("Array.prototype.entries", function (e) {
                return (
                  e ||
                  function () {
                    return Vt(this, function (t, n) {
                      return [t, n];
                    });
                  }
                );
              }),
              V("Number.isNaN", function (e) {
                return (
                  e ||
                  function (t) {
                    return typeof t == "number" && isNaN(t);
                  }
                );
              }),
              V("String.prototype.repeat", function (e) {
                return (
                  e ||
                  function (t) {
                    var n = An(this, null, "repeat");
                    if (t < 0 || t > 1342177279) throw new RangeError("Invalid count value");
                    t |= 0;
                    for (var r = ""; t; ) (t & 1 && (r += n), (t >>>= 1) && (n += n));
                    return r;
                  }
                );
              }),
              V("Number.EPSILON", function () {
                return 2220446049250313e-31;
              }),
              V("Number.MAX_SAFE_INTEGER", function () {
                return 9007199254740991;
              }),
              V("Number.isFinite", function (e) {
                return (
                  e ||
                  function (t) {
                    return typeof t != "number" ? !1 : !isNaN(t) && t !== 1 / 0 && t !== -1 / 0;
                  }
                );
              }),
              V("Object.values", function (e) {
                return (
                  e ||
                  function (t) {
                    var n = [],
                      r;
                    for (r in t) bt(t, r) && n.push(t[r]);
                    return n;
                  }
                );
              }),
              V("Math.log2", function (e) {
                return (
                  e ||
                  function (t) {
                    return Math.log(t) / Math.LN2;
                  }
                );
              }),
              V("String.prototype.endsWith", function (e) {
                return (
                  e ||
                  function (t, n) {
                    var r = An(this, t, "endsWith");
                    (n === void 0 && (n = r.length), (n = Math.max(0, Math.min(n | 0, r.length))));
                    for (var i = t.length; i > 0 && n > 0; ) if (r[--n] != t[--i]) return !1;
                    return i <= 0;
                  }
                );
              }),
              V("Math.trunc", function (e) {
                return (
                  e ||
                  function (t) {
                    if (((t = Number(t)), isNaN(t) || t === 1 / 0 || t === -1 / 0 || t === 0)) return t;
                    var n = Math.floor(Math.abs(t));
                    return t < 0 ? -n : n;
                  }
                );
              }));
            var ar = this || self;
            function de(e, t) {
              e = e.split(".");
              var n = ar;
              e[0] in n || typeof n.execScript > "u" || n.execScript("var " + e[0]);
              for (var r; e.length && (r = e.shift()); )
                e.length || t === void 0
                  ? n[r] && n[r] !== Object.prototype[r]
                    ? (n = n[r])
                    : (n = n[r] = {})
                  : (n[r] = t);
            }
            function $r(e) {
              ((this.g = Math.exp(Math.log(0.5) / e)), (this.i = this.h = 0));
            }
            $r.prototype.sample = function (e, t) {
              var n = Math.pow(this.g, e);
              ((t = t * (1 - n) + n * this.h), isNaN(t) || ((this.h = t), (this.i += e)));
            };
            function Tr(e) {
              return e.h / (1 - Math.pow(e.g, e.i));
            }
            function ur() {
              ((this.h = new $r(2)), (this.j = new $r(5)), (this.g = 0), (this.i = 128e3), (this.l = 16e3));
            }
            ((ur.prototype.configure = function (e) {
              ((this.i = e.minTotalBytes),
                (this.l = e.minBytes),
                (this.h.g = Math.exp(Math.log(0.5) / e.fastHalfLife)),
                (this.j.g = Math.exp(Math.log(0.5) / e.slowHalfLife)));
            }),
              (ur.prototype.sample = function (e, t) {
                if (!(t < this.l)) {
                  var n = (8e3 * t) / e;
                  ((e /= 1e3), (this.g += t), this.h.sample(e, n), this.j.sample(e, n));
                }
              }),
              (ur.prototype.getBandwidthEstimate = function (e) {
                return this.g < this.i ? e : Math.min(Tr(this.h), Tr(this.j));
              }));
            function hi() {}
            function En() {}
            function Be() {}
            function lr(e) {
              var t = It.apply(1, arguments);
              Fa.has(e) || (Fa.add(e), Be.apply(hi, Y(t)));
            }
            function Es() {}
            function bh() {}
            function Nh() {}
            var Fa = new Set();
            g.console &&
              (new Map()
                .set(1, function () {
                  return console.error.apply(console, Y(It.apply(0, arguments)));
                })
                .set(2, function () {
                  return console.warn.apply(console, Y(It.apply(0, arguments)));
                })
                .set(3, function () {
                  return console.info.apply(console, Y(It.apply(0, arguments)));
                })
                .set(4, function () {
                  return console.log.apply(console, Y(It.apply(0, arguments)));
                })
                .set(5, function () {
                  return console.debug.apply(console, Y(It.apply(0, arguments)));
                })
                .set(6, function () {
                  return console.debug.apply(console, Y(It.apply(0, arguments)));
                }),
              (Be = function () {
                return console.warn.apply(console, Y(It.apply(0, arguments)));
              }),
              (En = function () {
                console.error.apply(console, Y(It.apply(0, arguments)));
              }));
            function Ba(e, t) {
              return typeof e == "number" && typeof t == "number" && isNaN(e) && isNaN(t) ? !0 : e === t;
            }
            function Or(e, t) {
              ((t = e.indexOf(t)), t > -1 && e.splice(t, 1));
            }
            function Is(e, t, n) {
              if ((n || (n = Ba), e.length != t.length)) return !1;
              ((t = t.slice()), (e = x(e)));
              for (var r = e.next(), i = {}; !r.done; i = { ui: void 0 }, r = e.next()) {
                if (
                  ((i.ui = r.value),
                  (r = t.findIndex(
                    (function (s) {
                      return function (o) {
                        return n(s.ui, o);
                      };
                    })(i),
                  )),
                  r == -1)
                )
                  return !1;
                ((t[r] = t[t.length - 1]), t.pop());
              }
              return t.length == 0;
            }
            function Ki(e, t, n) {
              if (e === t) return !0;
              if (!e || !t) return e == t;
              if ((n || (n = Ba), e.length != t.length)) return !1;
              for (var r = 0; r < e.length; r++) if (!n(e[r], t[r])) return !1;
              return !0;
            }
            function $l() {
              this.g = new Map();
            }
            ((h = $l.prototype),
              (h.push = function (e, t) {
                this.g.has(e) ? this.g.get(e).push(t) : this.g.set(e, [t]);
              }),
              (h.get = function (e) {
                return this.g.has(e) ? this.g.get(e).slice() : null;
              }),
              (h.remove = function (e, t) {
                if (this.g.has(e)) {
                  var n = this.g.get(e).filter(function (r) {
                    return r != t;
                  });
                  (this.g.set(e, n), n.length || this.g.delete(e));
                }
              }),
              (h.forEach = function (e) {
                this.g.forEach(function (t, n) {
                  e(n, t);
                });
              }),
              (h.size = function () {
                return this.g.size;
              }),
              (h.keys = function () {
                return Array.from(this.g.keys());
              }));
            function tt() {
              this.g = new $l();
            }
            ((h = tt.prototype),
              (h.release = function () {
                (this.Qa(), (this.g = null));
              }),
              (h.D = function (e, t, n, r) {
                this.g && ((e = new Vv(e, t, n, r)), this.g.push(t, e));
              }),
              (h.Aa = function (e, t, n, r) {
                function i(o) {
                  (s.Ma(e, t, i), n(o));
                }
                var s = this;
                this.D(e, t, i, r);
              }),
              (h.Ma = function (e, t, n) {
                if (this.g) {
                  var r = this.g.get(t) || [];
                  r = x(r);
                  for (var i = r.next(); !i.done; i = r.next())
                    ((i = i.value), i.target != e || (n != i.listener && n) || (i.Ma(), this.g.remove(t, i)));
                }
              }),
              (h.Qa = function () {
                if (this.g) {
                  for (var e = [], t = x(this.g.g.values()), n = t.next(); !n.done; n = t.next())
                    e.push.apply(e, Y(n.value));
                  for (e = x(e), t = e.next(); !t.done; t = e.next()) t.value.Ma();
                  this.g.g.clear();
                }
              }),
              de("shaka.util.EventManager", tt),
              (tt.prototype.removeAll = tt.prototype.Qa),
              (tt.prototype.unlisten = tt.prototype.Ma),
              (tt.prototype.listenOnce = tt.prototype.Aa),
              (tt.prototype.listen = tt.prototype.D),
              (tt.prototype.release = tt.prototype.release));
            function Vv(e, t, n, r) {
              ((this.target = e),
                (this.type = t),
                (this.listener = n),
                (this.g = lC(e, r)),
                this.target.addEventListener(t, n, this.g));
            }
            Vv.prototype.Ma = function () {
              (this.target.removeEventListener(this.type, this.listener, this.g),
                (this.listener = this.target = null),
                (this.g = !1));
            };
            function lC(e, t) {
              if (t == null) return !1;
              if (typeof t == "boolean") return t;
              var n = new Set(["passive", "capture"]);
              return (
                Object.keys(t).filter(function (r) {
                  return !n.has(r);
                }),
                cC(e) ? t : t.capture || !1
              );
            }
            function cC(e) {
              var t = Hv;
              if (t == null) {
                t = !1;
                try {
                  var n = {},
                    r = {
                      get: function () {
                        return ((t = !0), !1);
                      },
                    };
                  (Object.defineProperty(n, "passive", r),
                    Object.defineProperty(n, "capture", r),
                    (r = function () {}),
                    e.addEventListener("test", r, n),
                    e.removeEventListener("test", r, n));
                } catch (i) {
                  t = !1;
                }
                Hv = t;
              }
              return t || !1;
            }
            var Hv = void 0;
            de("shaka.config.AutoShowText", {
              NEVER: 0,
              ALWAYS: 1,
              IF_PREFERRED_TEXT_LANGUAGE: 2,
              IF_SUBTITLES_MAY_BE_NEEDED: 3,
            });
            function wt(e) {
              ((this.h = e), (this.g = void 0));
            }
            wt.prototype.value = function () {
              return (this.g === void 0 && (this.g = this.h()), this.g);
            };
            /*
 @license
 Shaka Player
 Copyright 2025 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/ function je() {
              return dC.value();
            }
            var Yr = null,
              Oh = null,
              dC = new wt(function () {
                var e = void 0;
                return (Yr && (e = Yr()), !e && Oh && (e = Oh()), e);
              });
            function Uh(e, t) {
              ((this.g = e), (this.h = t));
            }
            Uh.prototype.toString = function () {
              return "v" + this.g + "." + this.h;
            };
            function Je(e, t) {
              var n = new Uh(5, 0),
                r = Gv,
                i = r.g,
                s = n.h - i.h;
              ((n.g - i.g || s) > 0 ? r.i : r.h)(r.g, n, e, t);
            }
            function fC(e, t, n, r) {
              Be(
                [
                  n,
                  "has been deprecated and will be removed in",
                  t,
                  ". We are currently at version",
                  e,
                  ". Additional information:",
                  r,
                ].join(" "),
              );
            }
            function hC(e, t, n, r) {
              En(
                [
                  n,
                  "has been deprecated and has been removed in",
                  t,
                  ". We are now at version",
                  e,
                  ". Additional information:",
                  r,
                ].join(" "),
              );
            }
            var Gv = null;
            /*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/ var pC = RegExp(
              "^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$",
            );
            /*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/ function Dt(e) {
              var t;
              e instanceof Dt
                ? (Yl(this, e.fc),
                  (this.hd = e.hd),
                  ql(this, e.Db),
                  Fh(this, e.Dd),
                  (this.Sb = e.Sb),
                  Cs(this, e.g.clone()),
                  (this.Rc = e.Rc))
                : e && (t = String(e).match(pC))
                  ? (Yl(this, t[1] || "", !0),
                    (this.hd = uo(t[2] || "")),
                    ql(this, t[3] || "", !0),
                    Fh(this, t[4]),
                    (this.Sb = uo(t[5] || "", !0)),
                    Cs(this, t[6] || "", !0),
                    (this.Rc = uo(t[7] || "")))
                  : (this.g = new lo(null));
            }
            ((h = Dt.prototype),
              (h.fc = ""),
              (h.hd = ""),
              (h.Db = ""),
              (h.Dd = null),
              (h.Sb = ""),
              (h.Rc = ""),
              (h.toString = function () {
                var e = [],
                  t = this.fc;
                if ((t && e.push(ja(t, zv, !0), ":"), (t = this.Db))) {
                  e.push("//");
                  var n = this.hd;
                  (n && e.push(ja(n, zv, !0), "@"),
                    e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g, "%$1")),
                    (t = this.Dd),
                    t != null && e.push(":", String(t)));
                }
                return (
                  (t = this.Sb) &&
                    (this.Db && t.charAt(0) != "/" && e.push("/"),
                    e.push(ja(t, t.charAt(0) == "/" ? yC : mC, !0))),
                  (t = this.g.toString()) && e.push("?", t),
                  (t = this.Rc) && e.push("#", ja(t, xC)),
                  e.join("")
                );
              }),
              (h.resolve = function (e) {
                var t = this.clone();
                t.fc === "data" && (t = new Dt());
                var n = !!e.fc;
                (n ? Yl(t, e.fc) : (n = !!e.hd),
                  n ? (t.hd = e.hd) : (n = !!e.Db),
                  n ? ql(t, e.Db) : (n = e.Dd != null));
                var r = e.Sb;
                if (n) Fh(t, e.Dd);
                else if ((n = !!e.Sb)) {
                  if (r.charAt(0) != "/")
                    if (this.Db && !this.Sb) r = "/" + r;
                    else {
                      var i = t.Sb.lastIndexOf("/");
                      i != -1 && (r = t.Sb.substr(0, i + 1) + r);
                    }
                  if (r == ".." || r == ".") r = "";
                  else if (r.indexOf("./") != -1 || r.indexOf("/.") != -1) {
                    ((i = r.lastIndexOf("/", 0) == 0), (r = r.split("/")));
                    for (var s = [], o = 0; o < r.length; ) {
                      var u = r[o++];
                      u == "."
                        ? i && o == r.length && s.push("")
                        : u == ".."
                          ? ((s.length > 1 || (s.length == 1 && s[0] != "")) && s.pop(),
                            i && o == r.length && s.push(""))
                          : (s.push(u), (i = !0));
                    }
                    r = s.join("/");
                  }
                }
                return (
                  n ? (t.Sb = r) : (n = e.g.toString() !== ""),
                  n ? Cs(t, e.g.clone()) : (n = !!e.Rc),
                  n && (t.Rc = e.Rc),
                  t
                );
              }),
              (h.clone = function () {
                return new Dt(this);
              }));
            function Yl(e, t, n) {
              ((e.fc = n ? uo(t, !0) : t), e.fc && (e.fc = e.fc.replace(/:$/, "")));
            }
            function ql(e, t, n) {
              e.Db = n ? uo(t, !0) : t;
            }
            function Fh(e, t) {
              if (t) {
                if (((t = Number(t)), isNaN(t) || t < 0)) throw Error("Bad port number " + t);
                e.Dd = t;
              } else e.Dd = null;
            }
            function Cs(e, t, n) {
              t instanceof lo ? (e.g = t) : (n || (t = ja(t, vC)), (e.g = new lo(t)));
            }
            function uo(e, t) {
              return e ? (t ? decodeURI(e) : decodeURIComponent(e)) : "";
            }
            function ja(e, t, n) {
              return e != null
                ? ((e = encodeURI(e).replace(t, gC)), n && (e = e.replace(/%25([0-9a-fA-F]{2})/g, "%$1")), e)
                : null;
            }
            function gC(e) {
              return ((e = e.charCodeAt(0)), "%" + ((e >> 4) & 15).toString(16) + (e & 15).toString(16));
            }
            var zv = /[#\/\?@]/g,
              mC = /[#\?:]/g,
              yC = /[#\?]/g,
              vC = /[#\?@]/g,
              xC = /#/g;
            function lo(e) {
              this.g = e || null;
            }
            function Jl(e) {
              if (!e.fb && ((e.fb = new Map()), (e.Vd = 0), e.g))
                for (var t = e.g.split("&"), n = 0; n < t.length; n++) {
                  var r = t[n].indexOf("="),
                    i = null;
                  if (r >= 0) {
                    var s = t[n].substring(0, r);
                    i = t[n].substring(r + 1);
                  } else s = t[n];
                  ((s = decodeURIComponent(s)), (i = i || ""), e.add(s, decodeURIComponent(i)));
                }
            }
            ((h = lo.prototype), (h.fb = null), (h.Vd = null));
            function Xv(e) {
              return (Jl(e), e.Vd);
            }
            ((h.add = function (e, t) {
              (Jl(this), (this.g = null));
              var n = this.fb.has(e) ? this.fb.get(e) : null;
              return (n || this.fb.set(e, (n = [])), n.push(t), this.Vd++, this);
            }),
              (h.set = function (e, t) {
                return (
                  Jl(this),
                  (this.g = null),
                  this.fb.has(e) ? this.fb.set(e, [t]) : this.add(e, t),
                  this
                );
              }),
              (h.get = function (e) {
                return (Jl(this), this.fb.get(e) || []);
              }),
              (h.toString = function () {
                if (this.g) return this.g;
                if (!this.fb || !this.fb.size) return "";
                for (var e = [], t = x(this.fb.keys()), n = t.next(); !n.done; n = t.next()) {
                  var r = n.value;
                  ((n = encodeURIComponent(r)), (r = this.fb.get(r)));
                  for (var i = 0; i < r.length; i++) {
                    var s = n;
                    (r[i] !== "" && (s += "=" + encodeURIComponent(r[i])), e.push(s));
                  }
                }
                return (this.g = e.join("&"));
              }),
              (h.clone = function () {
                var e = new lo();
                if (((e.g = this.g), this.fb)) {
                  for (var t = new Map(), n = x(this.fb), r = n.next(); !r.done; r = n.next()) {
                    var i = x(r.value);
                    ((r = i.next().value), (i = i.next().value), t.set(r, i.concat()));
                  }
                  ((e.fb = t), (e.Vd = this.Vd));
                }
                return e;
              }));
            function co() {}
            function pi(e, t) {
              if (!e && !t) return !0;
              if (!e || !t || e.byteLength != t.byteLength) return !1;
              if (
                (ArrayBuffer.isView(e) ? e.buffer : e) == (ArrayBuffer.isView(t) ? t.buffer : t) &&
                (e.byteOffset || 0) == (t.byteOffset || 0)
              )
                return !0;
              var n = Le(e);
              t = Le(t);
              for (var r = 0; r < e.byteLength; r++) if (n[r] != t[r]) return !1;
              return !0;
            }
            function wr(e) {
              return ArrayBuffer.isView(e)
                ? e.byteOffset == 0 && e.byteLength == e.buffer.byteLength
                  ? e.buffer
                  : new Uint8Array(e).buffer
                : e;
            }
            function Le(e, t, n) {
              return ((n = n === void 0 ? 1 / 0 : n), Bh(e, t === void 0 ? 0 : t, n, Uint8Array));
            }
            function Wv(e, t, n) {
              return ((n = n === void 0 ? 1 / 0 : n), Bh(e, t === void 0 ? 0 : t, n, Uint16Array));
            }
            function Bn(e, t, n) {
              return ((n = n === void 0 ? 1 / 0 : n), Bh(e, t === void 0 ? 0 : t, n, DataView));
            }
            function Bh(e, t, n, r) {
              var i = ArrayBuffer.isView(e) ? e.buffer : e,
                s = 1;
              "BYTES_PER_ELEMENT" in r && (s = r.BYTES_PER_ELEMENT);
              var o = ((e.byteOffset || 0) + e.byteLength) / s;
              return (
                (e = Math.floor(Math.max(0, Math.min(((e.byteOffset || 0) + t) / s, o)))),
                new r(i, e, Math.floor(Math.min(e + Math.max(n, 0), o)) - e)
              );
            }
            (de("shaka.util.BufferUtils", co),
              (co.toDataView = Bn),
              (co.toUint16 = Wv),
              (co.toUint8 = Le),
              (co.toArrayBuffer = wr),
              (co.equal = pi));
            function Kv(e, t) {
              if (e === t || !e.length || !t.length) return !0;
              e = x(e);
              for (var n = e.next(); !n.done; n = e.next()) {
                if (((n = n.value), Ql(n))) return !0;
                for (var r = x(t), i = r.next(); !i.done; i = r.next())
                  if (((i = i.value), n.keySystem === i.keySystem || Ql(i))) return !0;
              }
              return !1;
            }
            function $v(e, t) {
              if (!e.length) return t;
              if (!t.length) return e;
              var n = [];
              e = x(e);
              for (var r = e.next(); !r.done; r = e.next()) {
                r = r.value;
                for (var i = x(t), s = i.next(); !s.done; s = i.next())
                  if (((s = s.value), r.keySystem == s.keySystem)) {
                    i = new Map();
                    for (
                      var o = x((r.initData || []).concat(s.initData || [])), u = o.next();
                      !u.done;
                      u = o.next()
                    )
                      ((u = u.value), i.set(u.keyId, u));
                    ((i = Array.from(i.values())),
                      (o =
                        r.keyIds && s.keyIds
                          ? new Set([].concat(Y(r.keyIds), Y(s.keyIds)))
                          : r.keyIds || s.keyIds),
                      n.push({
                        keySystem: r.keySystem,
                        licenseServerUri: r.licenseServerUri || s.licenseServerUri,
                        distinctiveIdentifierRequired:
                          r.distinctiveIdentifierRequired || s.distinctiveIdentifierRequired,
                        persistentStateRequired: r.persistentStateRequired || s.persistentStateRequired,
                        videoRobustness: r.videoRobustness || s.videoRobustness,
                        audioRobustness: r.audioRobustness || s.audioRobustness,
                        serverCertificate: r.serverCertificate || s.serverCertificate,
                        serverCertificateUri: r.serverCertificateUri || s.serverCertificateUri,
                        initData: i,
                        keyIds: o,
                      }));
                    break;
                  } else Ql(r) ? n.push(r) : Ql(s) && n.push(s);
              }
              return n;
            }
            function jh(e) {
              return e ? !!e.match(/^com\.(microsoft|chromecast)\.playready/) : !1;
            }
            function Va(e) {
              return e ? !!e.match(/^com\.apple\.fps/) : !1;
            }
            function Ql(e) {
              return (e = e.licenseServerUri) ? e.startsWith("data:application/json;base64,") : !1;
            }
            function Vh(e, t, n, r) {
              return (
                (r = []
                  .concat(Y(new Set(r)))
                  .sort()
                  .join("#")),
                e + "#" + t + "#" + n + "#" + r
              );
            }
            var Zl = new wt(function () {
                return wr(new Uint8Array([0]));
              }),
              fo = new Map();
            function H(e, t, n) {
              var r = It.apply(3, arguments);
              ((this.severity = e),
                (this.category = t),
                (this.code = n),
                (this.data = r),
                (this.handled = !1),
                (this.message = "Shaka Error " + this.code));
              try {
                throw Error(this.message || "Shaka Error");
              } catch (i) {
                this.stack = i.stack;
              }
            }
            ((H.prototype.toString = function () {
              return "shaka.util.Error " + JSON.stringify(this, null, "  ");
            }),
              de("shaka.util.Error", H),
              (H.Severity = { RECOVERABLE: 1, CRITICAL: 2 }),
              (H.Category = {
                NETWORK: 1,
                TEXT: 2,
                MEDIA: 3,
                MANIFEST: 4,
                STREAMING: 5,
                DRM: 6,
                PLAYER: 7,
                CAST: 8,
                STORAGE: 9,
                ADS: 10,
              }),
              (H.Code = {
                UNSUPPORTED_SCHEME: 1e3,
                BAD_HTTP_STATUS: 1001,
                HTTP_ERROR: 1002,
                TIMEOUT: 1003,
                MALFORMED_DATA_URI: 1004,
                REQUEST_FILTER_ERROR: 1006,
                RESPONSE_FILTER_ERROR: 1007,
                MALFORMED_TEST_URI: 1008,
                UNEXPECTED_TEST_REQUEST: 1009,
                ATTEMPTS_EXHAUSTED: 1010,
                SEGMENT_MISSING: 1011,
                INVALID_TEXT_HEADER: 2e3,
                INVALID_TEXT_CUE: 2001,
                UNABLE_TO_DETECT_ENCODING: 2003,
                BAD_ENCODING: 2004,
                INVALID_XML: 2005,
                INVALID_MP4_TTML: 2007,
                INVALID_MP4_VTT: 2008,
                UNABLE_TO_EXTRACT_CUE_START_TIME: 2009,
                INVALID_MP4_CEA: 2010,
                TEXT_COULD_NOT_GUESS_MIME_TYPE: 2011,
                CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS: 2012,
                TEXT_ONLY_WEBVTT_SRC_EQUALS: 2013,
                MISSING_TEXT_PLUGIN: 2014,
                UNSUPPORTED_EXTERNAL_THUMBNAILS_URI: 2017,
                BUFFER_READ_OUT_OF_BOUNDS: 3e3,
                JS_INTEGER_OVERFLOW: 3001,
                EBML_OVERFLOW: 3002,
                EBML_BAD_FLOATING_POINT_SIZE: 3003,
                MP4_SIDX_WRONG_BOX_TYPE: 3004,
                MP4_SIDX_INVALID_TIMESCALE: 3005,
                MP4_SIDX_TYPE_NOT_SUPPORTED: 3006,
                WEBM_CUES_ELEMENT_MISSING: 3007,
                WEBM_EBML_HEADER_ELEMENT_MISSING: 3008,
                WEBM_SEGMENT_ELEMENT_MISSING: 3009,
                WEBM_INFO_ELEMENT_MISSING: 3010,
                WEBM_DURATION_ELEMENT_MISSING: 3011,
                WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING: 3012,
                WEBM_CUE_TIME_ELEMENT_MISSING: 3013,
                MEDIA_SOURCE_OPERATION_FAILED: 3014,
                MEDIA_SOURCE_OPERATION_THREW: 3015,
                VIDEO_ERROR: 3016,
                QUOTA_EXCEEDED_ERROR: 3017,
                TRANSMUXING_FAILED: 3018,
                CONTENT_TRANSFORMATION_FAILED: 3019,
                MSS_MISSING_DATA_FOR_TRANSMUXING: 3020,
                MSS_TRANSMUXING_FAILED: 3022,
                TRANSMUXING_NO_VIDEO_DATA: 3023,
                STREAMING_NOT_ALLOWED: 3024,
                UNABLE_TO_GUESS_MANIFEST_TYPE: 4e3,
                DASH_INVALID_XML: 4001,
                DASH_NO_SEGMENT_INFO: 4002,
                DASH_EMPTY_ADAPTATION_SET: 4003,
                DASH_EMPTY_PERIOD: 4004,
                DASH_WEBM_MISSING_INIT: 4005,
                DASH_UNSUPPORTED_CONTAINER: 4006,
                DASH_PSSH_BAD_ENCODING: 4007,
                DASH_NO_COMMON_KEY_SYSTEM: 4008,
                DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED: 4009,
                DASH_CONFLICTING_KEY_IDS: 4010,
                RESTRICTIONS_CANNOT_BE_MET: 4012,
                HLS_PLAYLIST_HEADER_MISSING: 4015,
                INVALID_HLS_TAG: 4016,
                HLS_INVALID_PLAYLIST_HIERARCHY: 4017,
                DASH_DUPLICATE_REPRESENTATION_ID: 4018,
                HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND: 4020,
                HLS_REQUIRED_ATTRIBUTE_MISSING: 4023,
                HLS_REQUIRED_TAG_MISSING: 4024,
                HLS_COULD_NOT_GUESS_CODECS: 4025,
                HLS_KEYFORMATS_NOT_SUPPORTED: 4026,
                DASH_UNSUPPORTED_XLINK_ACTUATE: 4027,
                DASH_XLINK_DEPTH_LIMIT: 4028,
                CONTENT_UNSUPPORTED_BY_BROWSER: 4032,
                CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM: 4033,
                NO_VARIANTS: 4036,
                PERIOD_FLATTENING_FAILED: 4037,
                INCONSISTENT_DRM_ACROSS_PERIODS: 4038,
                HLS_VARIABLE_NOT_FOUND: 4039,
                HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED: 4040,
                HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED: 4041,
                NO_WEB_CRYPTO_API: 4042,
                CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM: 4045,
                MSS_INVALID_XML: 4046,
                MSS_LIVE_CONTENT_NOT_SUPPORTED: 4047,
                AES_128_INVALID_IV_LENGTH: 4048,
                AES_128_INVALID_KEY_LENGTH: 4049,
                DASH_CONFLICTING_AES_128: 4050,
                DASH_UNSUPPORTED_AES_128: 4051,
                DASH_INVALID_PATCH: 4052,
                HLS_EMPTY_MEDIA_PLAYLIST: 4053,
                DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED: 4054,
                CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM: 4055,
                STREAMING_ENGINE_STARTUP_INVALID_STATE: 5006,
                NO_RECOGNIZED_KEY_SYSTEMS: 6e3,
                REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE: 6001,
                FAILED_TO_CREATE_CDM: 6002,
                FAILED_TO_ATTACH_TO_VIDEO: 6003,
                INVALID_SERVER_CERTIFICATE: 6004,
                FAILED_TO_CREATE_SESSION: 6005,
                FAILED_TO_GENERATE_LICENSE_REQUEST: 6006,
                LICENSE_REQUEST_FAILED: 6007,
                LICENSE_RESPONSE_REJECTED: 6008,
                ENCRYPTED_CONTENT_WITHOUT_DRM_INFO: 6010,
                NO_LICENSE_SERVER_GIVEN: 6012,
                OFFLINE_SESSION_REMOVED: 6013,
                EXPIRED: 6014,
                SERVER_CERTIFICATE_REQUIRED: 6015,
                INIT_DATA_TRANSFORM_ERROR: 6016,
                SERVER_CERTIFICATE_REQUEST_FAILED: 6017,
                MIN_HDCP_VERSION_NOT_MATCH: 6018,
                ERROR_CHECKING_HDCP_VERSION: 6019,
                MISSING_EME_SUPPORT: 6020,
                LOAD_INTERRUPTED: 7e3,
                OPERATION_ABORTED: 7001,
                NO_VIDEO_ELEMENT: 7002,
                OBJECT_DESTROYED: 7003,
                CONTENT_NOT_LOADED: 7004,
                SRC_EQUALS_PRELOAD_NOT_SUPPORTED: 7005,
                PRELOAD_DESTROYED: 7006,
                QUEUE_INDEX_OUT_OF_BOUNDS: 7007,
                CAST_API_UNAVAILABLE: 8e3,
                NO_CAST_RECEIVERS: 8001,
                ALREADY_CASTING: 8002,
                UNEXPECTED_CAST_ERROR: 8003,
                CAST_CANCELED_BY_USER: 8004,
                CAST_CONNECTION_TIMED_OUT: 8005,
                CAST_RECEIVER_APP_UNAVAILABLE: 8006,
                STORAGE_NOT_SUPPORTED: 9e3,
                INDEXED_DB_ERROR: 9001,
                DEPRECATED_OPERATION_ABORTED: 9002,
                REQUESTED_ITEM_NOT_FOUND: 9003,
                MALFORMED_OFFLINE_URI: 9004,
                CANNOT_STORE_LIVE_OFFLINE: 9005,
                NO_INIT_DATA_FOR_OFFLINE: 9007,
                LOCAL_PLAYER_INSTANCE_REQUIRED: 9008,
                NEW_KEY_OPERATION_NOT_SUPPORTED: 9011,
                KEY_NOT_FOUND: 9012,
                MISSING_STORAGE_CELL: 9013,
                STORAGE_LIMIT_REACHED: 9014,
                DOWNLOAD_SIZE_CALLBACK_ERROR: 9015,
                MODIFY_OPERATION_NOT_SUPPORTED: 9016,
                INDEXED_DB_INIT_TIMED_OUT: 9017,
                CS_IMA_SDK_MISSING: 1e4,
                CS_AD_MANAGER_NOT_INITIALIZED: 10001,
                SS_IMA_SDK_MISSING: 10002,
                SS_AD_MANAGER_NOT_INITIALIZED: 10003,
                CURRENT_DAI_REQUEST_NOT_FINISHED: 10004,
                MT_AD_MANAGER_NOT_INITIALIZED: 10005,
                INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED: 10006,
                VAST_INVALID_XML: 10007,
              }));
            function Ms() {}
            function At(e) {
              if (!e) return "";
              if (
                ((e = Le(e)),
                e[0] == 239 && e[1] == 187 && e[2] == 191 && (e = e.subarray(3)),
                g.TextDecoder && !je().xh())
              )
                return (
                  (e = new TextDecoder().decode(e)),
                  e.includes("") &&
                    En(
                      'Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!',
                    ),
                  e
                );
              for (var t = "", n = 0; n < e.length; ++n) {
                var r = 65533;
                if (
                  ((e[n] & 128) == 0
                    ? (r = e[n])
                    : e.length >= n + 2 && (e[n] & 224) == 192 && (e[n + 1] & 192) == 128
                      ? ((r = ((e[n] & 31) << 6) | (e[n + 1] & 63)), (n += 1))
                      : e.length >= n + 3 &&
                          (e[n] & 240) == 224 &&
                          (e[n + 1] & 192) == 128 &&
                          (e[n + 2] & 192) == 128
                        ? ((r = ((e[n] & 15) << 12) | ((e[n + 1] & 63) << 6) | (e[n + 2] & 63)), (n += 2))
                        : e.length >= n + 4 &&
                          (e[n] & 241) == 240 &&
                          (e[n + 1] & 192) == 128 &&
                          (e[n + 2] & 192) == 128 &&
                          (e[n + 3] & 192) == 128 &&
                          ((r =
                            ((e[n] & 7) << 18) |
                            ((e[n + 1] & 63) << 12) |
                            ((e[n + 2] & 63) << 6) |
                            (e[n + 3] & 63)),
                          (n += 3)),
                  r <= 65535)
                )
                  t += String.fromCharCode(r);
                else {
                  r -= 65536;
                  var i = r & 1023;
                  ((t += String.fromCharCode(55296 + (r >> 10))), (t += String.fromCharCode(56320 + i)));
                }
              }
              return t;
            }
            function $i(e, t, n) {
              if (!e) return "";
              if (!n && e.byteLength % 2 != 0) throw new H(2, 2, 2004);
              n = Math.floor(e.byteLength / 2);
              var r = new Uint16Array(n);
              e = Bn(e);
              for (var i = 0; i < n; i++) r[i] = e.getUint16(i * 2, t);
              return ec.value()(r);
            }
            function ni(e) {
              function t(r) {
                return n.byteLength <= r || (n[r] >= 9 && n[r] <= 126);
              }
              if (!e) return "";
              var n = Le(e);
              if (n[0] == 239 && n[1] == 187 && n[2] == 191) return At(n);
              if (n[0] == 254 && n[1] == 255) return $i(n.subarray(2), !1);
              if (n[0] == 255 && n[1] == 254) return $i(n.subarray(2), !0);
              if (n[0] == 0 && n[2] == 0) return $i(e, !1);
              if (n[1] == 0 && n[3] == 0) return $i(e, !0);
              if (t(0) && t(1) && t(2) && t(3)) return At(e);
              throw new H(2, 2, 2003);
            }
            function Ur(e) {
              if (g.TextEncoder && !je().xh()) {
                var t = new TextEncoder();
                return wr(t.encode(e));
              }
              ((e = encodeURIComponent(e)), (e = unescape(e)), (t = new Uint8Array(e.length)));
              for (var n = 0; n < e.length; n++) t[n] = e[n].charCodeAt(0);
              return wr(t);
            }
            function Hh(e, t) {
              for (var n = new ArrayBuffer(e.length * 2), r = new DataView(n), i = 0; i < e.length; ++i)
                r.setUint16(i * 2, e.charCodeAt(i), t);
              return n;
            }
            function Pn(e) {
              var t = {
                  "&amp;": "&",
                  "&lt;": "<",
                  "&gt;": ">",
                  "&quot;": '"',
                  "&apos;": "'",
                  "&nbsp;": "",
                  "&lrm;": "",
                  "&rlm;": "",
                },
                n = /&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,
                r = RegExp(n.source);
              return e && r.test(e)
                ? e.replace(n, function (i) {
                    return i[1] == "#"
                      ? ((i =
                          i[2] == "x" || i[2] == "X"
                            ? parseInt(i.substring(3), 16)
                            : parseInt(i.substring(2), 10)),
                        i >= 0 && i <= 1114111 ? String.fromCodePoint(i) : "")
                      : t[i] || "'";
                  })
                : e || "";
            }
            (de("shaka.util.StringUtils", Ms),
              (Ms.resetFromCharCode = function () {
                ec.g = void 0;
              }),
              (Ms.toUTF16 = Hh),
              (Ms.toUTF8 = Ur),
              (Ms.fromBytesAutoDetect = ni),
              (Ms.fromUTF16 = $i),
              (Ms.fromUTF8 = At));
            var ec = new wt(function () {
              function e(n) {
                try {
                  var r = new Uint8Array(n);
                  return String.fromCharCode.apply(null, r).length > 0;
                } catch (i) {
                  return !1;
                }
              }
              for (var t = { Pc: 65536 }; t.Pc > 0; t = { Pc: t.Pc }, t.Pc /= 2)
                if (e(t.Pc))
                  return (function (n) {
                    return function (r) {
                      for (var i = "", s = 0; s < r.length; s += n.Pc)
                        i += String.fromCharCode.apply(null, r.subarray(s, s + n.Pc));
                      return i;
                    };
                  })(t);
              return null;
            });
            function fn() {}
            function tc(e) {
              return (
                (e = Le(e)),
                Uint8Array.prototype.toBase64
                  ? e.toBase64({ alphabet: "base64", omitPadding: !1 })
                  : ((e = ec.value()(e)), btoa(e))
              );
            }
            function gi(e, t) {
              return (
                (t = t == null ? !0 : t),
                Uint8Array.prototype.toBase64
                  ? Le(e).toBase64({ alphabet: "base64url", omitPadding: !t })
                  : ((e = tc(e).replace(/\+/g, "-").replace(/\//g, "_")), t ? e : e.replace(/[=]*$/, ""))
              );
            }
            function Sr(e) {
              if (!("fromBase64" in Uint8Array)) {
                e = g.atob(e.replace(/-/g, "+").replace(/_/g, "/"));
                for (var t = new Uint8Array(e.length), n = 0; n < e.length; ++n) t[n] = e.charCodeAt(n);
                return t;
              }
              return (
                (e = e.replace(/\s+/g, "")),
                Uint8Array.fromBase64(e, { alphabet: /[-_]/.test(e) ? "base64url" : "base64" })
              );
            }
            function Rs(e) {
              if (!("fromHex" in Uint8Array)) {
                for (var t = e.length / 2, n = new Uint8Array(t), r = 0; r < t; r++)
                  n[r] = g.parseInt(e.substr(r * 2, 2), 16);
                return n;
              }
              return Uint8Array.fromHex(e);
            }
            function mi(e) {
              var t = Le(e);
              if (!Uint8Array.prototype.toHex) {
                ((e = ""), (t = x(t)));
                for (var n = t.next(); !n.done; n = t.next())
                  ((n = n.value), (n = n.toString(16)), n.length == 1 && (n = "0" + n), (e += n));
                return e;
              }
              return t.toHex();
            }
            function Nt() {
              for (var e = It.apply(0, arguments), t = 0, n = 0; n < e.length; ++n) t += e[n].byteLength;
              t = new Uint8Array(t);
              for (var r = (n = 0); r < e.length; ++r) {
                var i = e[r];
                (ArrayBuffer.isView(i) && i.BYTES_PER_ELEMENT === 1 ? t.set(i, n) : t.set(Le(i), n),
                  (n += i.byteLength));
              }
              return t;
            }
            (de("shaka.util.Uint8ArrayUtils", fn),
              (fn.concat = Nt),
              (fn.toHex = mi),
              (fn.fromHex = Rs),
              (fn.fromBase64 = Sr),
              (fn.toBase64 = gi),
              (fn.toStandardBase64 = tc));
            function Yt(e, t, n) {
              if (((n = n === void 0 ? "" : n), t.length == 0)) return e;
              if (e.length == 1 && t.length == 1) {
                var r = new Dt(e[0]);
                return ((t = new Dt(t[0])), (t = r.resolve(t)), n && Cs(t, n), [t.toString()]);
              }
              ((t = t.map(function (u) {
                return new Dt(u);
              })),
                (r = []),
                (e = x(e)));
              for (var i = e.next(); !i.done; i = e.next()) {
                i = new Dt(i.value);
                for (var s = x(t), o = s.next(); !o.done; o = s.next())
                  ((o = i.resolve(o.value)), n && Cs(o, n), r.push(o.toString()));
              }
              return r;
            }
            function yi(e, t, n, r, i) {
              return (
                (t = {
                  keySystem: e,
                  encryptionScheme: t,
                  licenseServerUri: "",
                  distinctiveIdentifierRequired: !1,
                  persistentStateRequired: !1,
                  audioRobustness: "",
                  videoRobustness: "",
                  serverCertificate: null,
                  serverCertificateUri: "",
                  sessionType: "",
                  initData: n || [],
                  keyIds: new Set(),
                  mediaTypes: i,
                }),
                r && (t.keySystemUris = new Set([r])),
                !n &&
                  Va(e) &&
                  t.initData.push({ initDataType: "sinf", initData: new Uint8Array(0), keyId: null }),
                t
              );
            }
            function Yv(e, t) {
              t = t === void 0 ? "cenc" : t;
              var n = [],
                r = [],
                i = [];
              (e.forEach(function (o, u) {
                var l = u;
                l.length != 22 && (l = gi(Rs(u), !1));
                var p = o;
                (p.length != 22 && (p = gi(Rs(o), !1)),
                  (o = { kty: "oct", kid: l, k: p }),
                  n.push(o),
                  r.push(o.kid),
                  i.push(u));
              }),
                (e = JSON.stringify({ keys: n })));
              var s = JSON.stringify({ kids: r });
              return (
                (s = [{ initData: Le(Ur(s)), initDataType: "keyids" }]),
                {
                  keySystem: "org.w3.clearkey",
                  encryptionScheme: t,
                  licenseServerUri: "data:application/json;base64," + g.btoa(e),
                  distinctiveIdentifierRequired: !1,
                  persistentStateRequired: !1,
                  audioRobustness: "",
                  videoRobustness: "",
                  serverCertificate: null,
                  serverCertificateUri: "",
                  sessionType: "",
                  initData: s,
                  keyIds: new Set(i),
                }
              );
            }
            function ho(e, t) {
              if (t.length == 1) return t[0];
              if (((e = jn(e, t)), e != null)) return e;
              throw new H(2, 4, 4025, t);
            }
            function jn(e, t) {
              var n = Jv.get(e);
              n = x(n);
              for (var r = n.next(); !r.done; r = n.next()) {
                r = r.value;
                for (var i = x(t), s = i.next(); !s.done; s = i.next())
                  if (((s = s.value), r.test(s.trim()))) return s.trim();
              }
              return e == Ve ? "" : null;
            }
            function Gh(e, t) {
              var n = [];
              ((e = Jv.get(e)), (e = x(e)));
              for (var r = e.next(); !r.done; r = e.next()) {
                r = r.value;
                for (var i = x(t), s = i.next(); !s.done; s = i.next())
                  ((s = s.value), r.test(s.trim()) && n.push(s.trim()));
              }
              return n;
            }
            var Ve = "text",
              Ot = { wa: "video", aa: "audio", Na: Ve, Yf: "image", ul: "application" },
              qv = 1 / 15,
              Jv = new Map()
                .set("audio", [
                  /^vorbis$/,
                  /^Opus$/,
                  /^opus$/,
                  /^fLaC$/,
                  /^flac$/,
                  /^mp4a/,
                  /^[ae]c-3$/,
                  /^ac-4/,
                  /^dts[cex]$/,
                  /^iamf/,
                  /^mhm[12]/,
                  /^ac3$/,
                  /^eac3$/,
                  /^apac$/,
                ])
                .set("video", [
                  /^avc/,
                  /^hev/,
                  /^hvc/,
                  /^vvc/,
                  /^vvi/,
                  /^vp0?[89]/,
                  /^av01/,
                  /^dvh/,
                  /^dva/,
                  /^dav/,
                ])
                .set("text", [/^vtt$/, /^wvtt/, /^stpp/]);
            function Ha(e, t, n, r) {
              ((this.g = null), (this.l = e), (this.i = t), (this.m = n), (this.o = r), (this.j = !1));
              e: {
                if (
                  (typeof libDPIModule > "u" && Be("Could not find LCEVC Library dependencies on this page"),
                  typeof LCEVCdec < "u")
                )
                  this.h = LCEVCdec;
                else if (typeof LcevcDil < "u")
                  ((this.h = LcevcDil),
                    (this.j = !0),
                    Je("LcevcDil", "lcevc_dil.js is deprecated, please use lcevc_dec.js instead"));
                else {
                  (Be("Could not find LCEVC Library on this page"), (e = !1));
                  break e;
                }
                typeof this.h.SupportObject > "u"
                  ? (Be("Could not find LCEVC Library on this page"), (e = !1))
                  : (this.h.SupportObject.SupportStatus || Be(this.h.SupportObject.SupportError),
                    (e =
                      typeof this.h < "u" &&
                      typeof libDPIModule < "u" &&
                      this.i instanceof HTMLCanvasElement &&
                      this.h.SupportObject.SupportStatus));
              }
              e &&
                !this.g &&
                this.h.SupportObject.webGLSupport(this.i) &&
                (this.i.classList.remove("shaka-hidden"),
                (this.g = this.j
                  ? new this.h.LcevcDil(this.l, this.i, this.m)
                  : new this.h.LCEVCdec(this.l, this.i, this.m)));
            }
            function nc(e, t, n, r) {
              r.type !== "video" ||
                (e.o && !r.baseOriginalId) ||
                (e.g && e.g.appendBuffer(t, "video", r.id, -n, !e.o));
            }
            function Qv(e) {
              e.g && e.i.classList.add("shaka-hidden");
            }
            Ha.prototype.release = function () {
              this.g && (this.g.close(), (this.g = null));
            };
            function Zv(e) {
              return e && typeof LCEVCdec < "u" ? e.codecs == "lvc1" : !1;
            }
            (de("shaka.lcevc.Dec", Ha), (Ha.prototype.release = Ha.prototype.release));
            function Ga() {}
            function ks(e, t) {
              po.set(e, t);
            }
            function TC() {
              var e = {};
              if ((je(), ui()))
                for (var t = x(po.keys()), n = t.next(); !n.done; n = t.next()) e[n.value] = !0;
              for (
                t = x([
                  "application/dash+xml",
                  "application/x-mpegurl",
                  "application/vnd.apple.mpegurl",
                  "application/vnd.ms-sstr+xml",
                ]),
                  n = t.next();
                !n.done;
                n = t.next()
              )
                ((n = n.value), (e[n] = ui() ? po.has(n) : Gs().canPlayType(n) != ""));
              return e;
            }
            function e0(e, t) {
              if (t) {
                var n = po.get(t.toLowerCase());
                if (n) return n;
              }
              throw new H(2, 4, 4e3, e, t);
            }
            (de("shaka.media.ManifestParser", Ga),
              (Ga.unregisterParserByMime = function (e) {
                po.delete(e);
              }),
              (Ga.registerParserByMime = ks),
              (Ga.registerParserByExtension = function () {
                Je(
                  "ManifestParser.registerParserByExtension",
                  "Please use an ManifestParser with registerParserByMime function.",
                );
              }),
              (Ga.AccessibilityPurpose = {
                Cm: "visually impaired",
                Nl: "hard of hearing",
                jm: "spoken subtitles",
              }));
            var po = new Map();
            function za() {}
            ((za.prototype.extract = function () {}),
              (za.prototype.decode = function () {
                return [];
              }),
              (za.prototype.clear = function () {}),
              (za.prototype.getStreams = function () {
                return [];
              }));
            function zh() {}
            ((zh.prototype.init = function () {}),
              (zh.prototype.parse = function () {
                return [];
              }));
            function t0() {}
            ((h = t0.prototype),
              (h.init = function () {}),
              (h.Af = function () {}),
              (h.Pd = function () {}),
              (h.remove = function () {}),
              (h.Zf = function () {}),
              de("shaka.media.IClosedCaptionParser", t0));
            function qr(e) {
              ((this.h = new Map()),
                (this.i = 0),
                (this.j = new zh()),
                (e = n0(e.toLowerCase())) && (this.j = e()),
                (this.g = new za()),
                (e = _s) && ((this.g = e()), this.h.set(this.i, this.g)));
            }
            ((h = qr.prototype),
              (h.init = function (e, t, n) {
                if (((t = t === void 0 ? !1 : t), (n = n === void 0 ? -1 : n), n != -1 && this.i != n)) {
                  t = n;
                  var r = this.h.get(t);
                  (this.h.set(this.i, this.g),
                    r ? (this.g = r) : ((r = _s) && (this.g = r()), this.h.set(t, this.g)));
                } else t || this.Pd();
                (this.j.init(e), n != -1 && (this.i = n));
              }),
              (h.Af = function (e) {
                ((e = this.j.parse(e)), (e = x(e)));
                for (var t = e.next(); !t.done; t = e.next()) {
                  t = t.value;
                  var n = Le(t.packet);
                  n.length > 0 && this.g.extract(n, t.pts);
                }
                return this.g.decode();
              }),
              (h.Pd = function () {
                this.g.clear();
              }),
              (h.remove = function (e) {
                ((e = e === void 0 ? [] : e), (e = new Set(e)));
                for (var t = x(this.h.keys()), n = t.next(); !n.done; n = t.next())
                  if (((n = n.value), !e.has(n))) {
                    var r = this.h.get(n);
                    (r && r.clear(), this.h.delete(n));
                  }
              }),
              (h.Zf = function () {
                return this.g.getStreams();
              }));
            function Xh(e, t) {
              Wh.set(e, t);
            }
            function n0(e) {
              return Wh.get(e);
            }
            (de("shaka.media.ClosedCaptionParser", qr),
              (qr.findDecoder = function () {
                return _s;
              }),
              (qr.unregisterDecoder = function () {
                _s = null;
              }),
              (qr.registerDecoder = function (e) {
                _s = e;
              }),
              (qr.findParser = n0),
              (qr.unregisterParser = function (e) {
                Wh.delete(e);
              }),
              (qr.registerParser = Xh));
            var Wh = new Map(),
              _s = null;
            function Ps() {
              ((this.id = ""),
                (this.regionAnchorY = this.regionAnchorX = this.viewportAnchorY = this.viewportAnchorX = 0),
                (this.height = this.width = 100),
                (this.viewportAnchorUnits = this.widthUnits = this.heightUnits = Jn),
                (this.scroll = r0));
            }
            de("shaka.text.CueRegion", Ps);
            var Jn = 1;
            Ps.units = { PX: 0, PERCENTAGE: Jn, LINES: 2 };
            var r0 = "";
            Ps.scrollMode = { NONE: r0, UP: "up" };
            function go(e) {
              ((this.h = e || ""), (this.g = 0));
            }
            function mo(e) {
              Yi(e, /[ \t]+/gm);
            }
            function Yi(e, t) {
              return (
                (t.lastIndex = e.g),
                (t = t.exec(e.h)),
                (t = t == null ? null : { position: t.index, length: t[0].length, results: t }),
                e.g == e.h.length || t == null || t.position != e.g ? null : ((e.g += t.length), t.results)
              );
            }
            function Ds(e) {
              return e.g == e.h.length ? null : (e = Yi(e, /[^ \t\n]*/gm)) ? e[0] : null;
            }
            function Xa(e) {
              if (((e = Yi(e, wC)), e == null)) return null;
              var t = Number(e[2]),
                n = Number(e[3]);
              return t > 59 || n > 59
                ? null
                : (Number(e[6]) || 0) / 1e3 + n + t * 60 + (Number(e[1]) || 0) * 3600;
            }
            function yo(e) {
              return e ? Xa(new go(e)) : null;
            }
            var wC = /(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;
            function rc() {}
            function Fr(e) {
              function t(r) {
                switch (typeof r) {
                  case "undefined":
                  case "boolean":
                  case "number":
                  case "string":
                  case "symbol":
                  case "function":
                    return r;
                  default:
                    if (!r || ArrayBuffer.isView(r)) return r;
                    if (n.has(r)) return null;
                    var i = Array.isArray(r);
                    if (r.constructor != Object && !i) return null;
                    n.add(r);
                    var s = i ? [] : {},
                      o;
                    for (o in r) s[o] = t(r[o]);
                    return (i && (s.length = r.length), s);
                }
              }
              var n = new WeakSet();
              return t(e);
            }
            function qi(e) {
              var t = {},
                n;
              for (n in e) t[n] = e[n];
              return t;
            }
            function ic(e) {
              if (Array.isArray(e)) {
                for (var t = [], n = 0; n < e.length; n++) {
                  var r = n.toString(),
                    i = e[n];
                  i !== void 0 && (i = ic(i)) && t.push(r + ":" + i);
                }
                e = "[" + t.join(",") + "]";
              } else if (typeof e == "function") e = "";
              else if (e instanceof Object) {
                for (n = Object.keys(e), n.sort(), t = [], n = x(n), r = n.next(); !r.done; r = n.next())
                  ((i = r.value),
                    (r = JSON.stringify(i)),
                    (i = e[i]),
                    i !== void 0 && (i = ic(i)) && t.push(r + ":" + i));
                e = "{" + t.join(",") + "}";
              } else e = JSON.stringify(e);
              return e;
            }
            (de("shaka.util.ObjectUtils", rc),
              (rc.alphabeticalKeyOrderStringify = ic),
              (rc.shallowCloneObject = qi),
              (rc.cloneObject = Fr));
            /*
 @license
 tXml
 Copyright 2015 Tobias Nickel
 SPDX-License-Identifier: MIT
*/ function Wa(e, t) {
              var n = n === void 0 ? !1 : n;
              return ((e = ni(e)), Ls(e, t, n));
            }
            function Ls(e, t, n) {
              return (
                (e = SC(e, n === void 0 ? !1 : n)),
                !t && e.length
                  ? e[0]
                  : (e = e.find(function (r) {
                        return t.split(",").includes(r.tagName);
                      }))
                    ? e
                    : null
              );
            }
            function Kh(e) {
              return Yh.has(e) ? Yh.get(e) : "";
            }
            function SC(e, t) {
              function n(s, o) {
                o = o === void 0 ? !1 : o;
                for (var u = []; e[i]; )
                  if (e.charCodeAt(i) == 60) {
                    if (e.charCodeAt(i + 1) === 47) {
                      ((o = i + 2), (i = e.indexOf(">", i)), (o = e.substring(o, i)));
                      var l = o.indexOf(s);
                      if (l == -1) {
                        var p = s.indexOf(".");
                        p > 0 && (l = o.indexOf(s.substring(0, p)));
                      }
                      if (l == -1)
                        throw (
                          (s = e.substring(0, i).split("\n")),
                          Error(
                            "Unexpected close tag\nLine: " +
                              (s.length - 1) +
                              "\nColumn: " +
                              (s[s.length - 1].length + 1) +
                              "\nChar: " +
                              e[i],
                          )
                        );
                      i + 1 && (i += 1);
                      break;
                    } else if (e.charCodeAt(i + 1) === 33) {
                      if (e.charCodeAt(i + 2) == 45) {
                        for (
                          ;
                          i !== -1 &&
                          (e.charCodeAt(i) !== 62 ||
                            e.charCodeAt(i - 1) != 45 ||
                            e.charCodeAt(i - 2) != 45 ||
                            i == -1);
                        )
                          i = e.indexOf(">", i + 1);
                        i === -1 && (i = e.length);
                      } else if (
                        e.charCodeAt(i + 2) === 91 &&
                        e.charCodeAt(i + 8) === 91 &&
                        e.substr(i + 3, 5).toLowerCase() === "cdata"
                      ) {
                        ((l = e.indexOf("]]>", i)),
                          l == -1
                            ? (u.push(e.substr(i + 9)), (i = e.length))
                            : (u.push(e.substring(i + 9, l)), (i = l + 3)));
                        continue;
                      }
                      i++;
                      continue;
                    }
                    e: {
                      ((p = o), i++);
                      var m = r(),
                        y = {};
                      for (l = []; e.charCodeAt(i) !== 62 && e[i]; ) {
                        var v = e.charCodeAt(i);
                        if ((v > 64 && v < 91) || (v > 96 && v < 123)) {
                          v = r();
                          for (
                            var w = e.charCodeAt(i);
                            w &&
                            w !== 39 &&
                            w !== 34 &&
                            !((w > 64 && w < 91) || (w > 96 && w < 123)) &&
                            w !== 62;
                          )
                            (i++, (w = e.charCodeAt(i)));
                          var A = i + 1;
                          if (
                            ((i = e.indexOf(e[i], A)),
                            (A = (" " + e.slice(A, i)).slice(1)),
                            w === 39 || w === 34)
                          ) {
                            if (i === -1) {
                              if (((p = { tagName: m, attributes: y, children: l, parent: null }), t))
                                for (m = 0; m < l.length; m++) typeof l[m] != "string" && (l[m].parent = p);
                              l = p;
                              break e;
                            }
                          } else ((A = null), i--);
                          if (v.startsWith("xmlns:")) {
                            w = A;
                            var I = v.split(":")[1];
                            (Yh.set(w, I), qh.set(I, w));
                          }
                          (m === "tt" && v === "xml:space" && A === "preserve" && (p = !0), (y[v] = A));
                        }
                        i++;
                      }
                      for (
                        e.charCodeAt(i - 1) !== 47 ? (i++, (l = n(m, p))) : i++,
                          p = { tagName: m, attributes: y, children: l, parent: null },
                          m = l.length,
                          y = 0;
                        y < m;
                        y++
                      )
                        ((v = l[y]),
                          typeof v != "string" ? t && (v.parent = p) : y == m - 1 && v == "\n" && l.pop());
                      l = p;
                    }
                    if ((u.push(l), typeof l == "string")) break;
                    l.tagName[0] === "?" && l.children && (u.push.apply(u, Y(l.children)), (l.children = []));
                  } else
                    ((l = i),
                      (i = e.indexOf("<", i) - 1),
                      i === -2 && (i = e.length),
                      (l = (" " + e.slice(l, i + 1)).slice(1)),
                      o
                        ? l.length > 0 && u.push(l)
                        : ((u.length && l.length == 1 && l[0] == "\n") || l.trim().length > 0) && u.push(l),
                      i++);
                return u;
              }
              function r() {
                for (var s = i; "\r\n	>/= ".indexOf(e[i]) === -1 && e[i]; ) i++;
                return (" " + e.slice(s, i)).slice(1);
              }
              var i = 0;
              return n("");
            }
            function sc(e) {
              return typeof e == "string";
            }
            function i0(e) {
              var t = [];
              if (!e.children) return [];
              e = x(e.children);
              for (var n = e.next(); !n.done; n = e.next())
                ((n = n.value), typeof n != "string" && t.push(n));
              return t;
            }
            function st(e, t) {
              var n = [];
              if (!e.children) return [];
              e = x(e.children);
              for (var r = e.next(); !r.done; r = e.next()) ((r = r.value), r.tagName === t && n.push(r));
              return n;
            }
            function Lt(e) {
              return typeof e == "string"
                ? Pn(e)
                : ((e = e.children.reduce(function (t, n) {
                    return typeof n == "string" ? t + n : t;
                  }, "")),
                  e === "" ? null : Pn(e));
            }
            function Dn(e) {
              return Array.from(e.children).every(function (t) {
                return typeof t == "string";
              })
                ? ((e = Lt(e)) && (e = e.trim()), e)
                : null;
            }
            function Jr(e, t, n) {
              if (((n = n === void 0 ? [] : n), e.tagName === t && n.push(e), e.children)) {
                e = x(e.children);
                for (var r = e.next(); !r.done; r = e.next()) Jr(r.value, t, n);
              }
              return n;
            }
            function vt(e, t) {
              return ((e = st(e, t)), e.length != 1 ? null : e[0]);
            }
            function Ar(e, t, n) {
              return ((e = s0(e, t, n)), e.length != 1 ? null : e[0]);
            }
            function be(e, t, n, r) {
              r = r === void 0 ? null : r;
              var i = null;
              return ((e = e.attributes[t]), e != null && (i = n(e)), i == null ? r : i);
            }
            function vi(e, t, n) {
              return ((t = Kh(t)), e.attributes[t + ":" + n] || null);
            }
            function s0(e, t, n) {
              var r = Kh(t);
              if (((t = []), e.children))
                for (n = r ? r + ":" + n : n, e = x(e.children), r = e.next(); !r.done; r = e.next())
                  (r = r.value) && r.tagName === n && t.push(r);
              return t;
            }
            function ri(e, t, n) {
              t = x(t);
              for (var r = t.next(); !r.done; r = t.next()) if ((r = vi(e, r.value, n))) return r;
              return null;
            }
            function xi(e) {
              return e
                ? (/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e) && (e += "Z"),
                  (e = Date.parse(e)),
                  isNaN(e) ? null : e / 1e3)
                : null;
            }
            function ii(e) {
              return !e ||
                ((e = RegExp(
                  "^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$",
                  "i",
                ).exec(e)),
                !e)
                ? null
                : ((e =
                    31536e3 * Number(e[1] || null) +
                    2592e3 * Number(e[2] || null) +
                    86400 * Number(e[3] || null) +
                    3600 * Number(e[4] || null) +
                    60 * Number(e[5] || null) +
                    Number(e[6] || null)),
                  isFinite(e) ? e : null);
            }
            function oc(e) {
              var t = /([0-9]+)-([0-9]+)/.exec(e);
              return !t || ((e = Number(t[1])), !isFinite(e))
                ? null
                : ((t = Number(t[2])), isFinite(t) ? { start: e, end: t } : null);
            }
            function sn(e) {
              return ((e = Number(e)), e % 1 === 0 ? e : null);
            }
            function si(e) {
              return ((e = Number(e)), e % 1 === 0 && e > 0 ? e : null);
            }
            function on(e) {
              return ((e = Number(e)), e % 1 === 0 && e >= 0 ? e : null);
            }
            function ac(e) {
              return ((e = Number(e)), isNaN(e) ? null : e);
            }
            function uc(e) {
              return e ? e.toLowerCase() === "true" : !1;
            }
            function AC(e) {
              var t,
                n = (t = e.match(/^(\d+)\/(\d+)$/)) ? Number(t[1]) / Number(t[2]) : Number(e);
              return isNaN(n) ? null : n;
            }
            function lc(e) {
              var t = [];
              ((e = Pn(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/)), (e = x(e)));
              for (var n = e.next(); !n.done; n = e.next()) {
                n = n.value;
                var r = n.match(/^([\w]+)/);
                if (r) {
                  var i = n.match(/(@id='(.*?)')/),
                    s = n.match(/(@t='(\d+)')/),
                    o = n.match(/(@n='(\d+)')/),
                    u = n.match(/\[(\d+)\]/);
                  t.push({
                    name: r[0],
                    id: i ? i[0].match(/'(.*?)'/)[0].replace(/'/gm, "") : null,
                    t: s ? Number(s[0].match(/'(.*?)'/)[0].replace(/'/gm, "")) : null,
                    n: o ? Number(o[0].match(/'(.*?)'/)[0].replace(/'/gm, "")) : null,
                    position: u ? Number(u[1]) - 1 : null,
                    Dc: n.split("/@")[1] || null,
                  });
                } else n.startsWith("@") && t.length && (t[t.length - 1].Dc = n.slice(1));
              }
              return t;
            }
            function o0(e, t) {
              var n = lc(t.attributes.sel || "");
              if (n.length) {
                var r = n[n.length - 1],
                  i = t.attributes.pos || null;
                ((n = r.position),
                  n == null && (r.t !== null && (n = a0(e, "t", r.t)), r.n !== null && (n = a0(e, "n", r.n))),
                  n === null
                    ? (n = i === "prepend" ? 0 : e.length)
                    : i === "prepend"
                      ? --n
                      : i === "after" && ++n,
                  (i = t.tagName),
                  (r = r.Dc) && e[n]
                    ? u0(e[n], i, r, Dn(t) || "")
                    : ((i !== "remove" && i !== "replace") || e.splice(n, 1),
                      (i !== "add" && i !== "replace") || e.splice.apply(e, [n, 0].concat(Y(t.children)))));
              }
            }
            function a0(e, t, n) {
              var r = 0;
              e = x(e);
              for (var i = e.next(); !i.done; i = e.next()) {
                if (Number(i.value.attributes[t]) === n) return r;
                r++;
              }
              return null;
            }
            function u0(e, t, n, r) {
              t === "remove"
                ? delete e.attributes[n]
                : (t === "add" || t === "replace") && (e.attributes[n] = r);
            }
            function l0(e) {
              var t = "",
                n = e.tagName.split(":");
              (n.length > 0 && ((t = n[0]), (t = qh.has(t) ? qh.get(t) : "")),
                (t = document.createElementNS(t, e.tagName)));
              for (var r in e.attributes) t.setAttribute(r, e.attributes[r]);
              for (e = x(e.children), r = e.next(); !r.done; r = e.next())
                ((r = r.value),
                  (n = void 0),
                  typeof r == "string" ? (n = new Text(r)) : (n = l0(r)),
                  t.appendChild(n));
              return t;
            }
            function $h(e) {
              if (!e) return null;
              var t = { tagName: e.tagName, attributes: qi(e.attributes), children: [], parent: null };
              e = x(e.children);
              for (var n = e.next(); !n.done; n = e.next())
                ((n = n.value), typeof n == "string" || ((n = $h(n)), (n.parent = t)), t.children.push(n));
              return t;
            }
            var Yh = new Map(),
              qh = new Map();
            function mt(e, t, n) {
              ((this.startTime = e),
                (this.endTime = t),
                (this.payload = n),
                (this.region = new Ps()),
                (this.position = null),
                (this.positionAlign = fc),
                (this.size = 0),
                (this.textAlign = oi),
                (this.direction = Ya),
                (this.writingMode = bs),
                (this.lineInterpretation = qa),
                (this.line = null),
                (this.lineHeight = ""),
                (this.lineAlign = Ns),
                (this.displayAlign = $a),
                (this.fontSize = this.border = this.backgroundImage = this.backgroundColor = this.color = ""),
                (this.fontWeight = m0),
                (this.fontStyle = Zh),
                (this.linePadding = this.letterSpacing = this.fontFamily = ""),
                (this.opacity = 1),
                (this.textCombineUpright = ""),
                (this.textDecoration = []),
                (this.textStrokeWidth = this.textStrokeColor = this.textShadow = ""),
                (this.wrapLine = !0),
                (this.id = ""),
                (this.nestedCues = []),
                (this.lineBreak = this.isContainer = !1),
                (this.rubyTag = null),
                (this.cellResolution = { columns: 32, rows: 15 }));
            }
            function c0(e, t) {
              return ((e = new mt(e, t, "")), (e.lineBreak = !0), e);
            }
            mt.prototype.clone = function () {
              var e = new mt(0, 0, ""),
                t;
              for (t in this) ((e[t] = this[t]), Array.isArray(e[t]) && (e[t] = e[t].slice()));
              return e;
            };
            function cc(e, t) {
              if (
                e.payload != t.payload ||
                !(Math.abs(e.startTime - t.startTime) < 0.001 && Math.abs(e.endTime - t.endTime) < 0.001)
              )
                return !1;
              for (var n in e)
                if (n != "startTime" && n != "endTime" && n != "payload") {
                  if (n == "nestedCues") {
                    if (!Ki(e.nestedCues, t.nestedCues, cc)) return !1;
                  } else if (n == "region" || n == "cellResolution") {
                    for (var r in e[n]) if (e[n][r] != t[n][r]) return !1;
                  } else if (Array.isArray(e[n])) {
                    if (!Ki(e[n], t[n])) return !1;
                  } else if (e[n] != t[n]) return !1;
                }
              return !0;
            }
            function dc(e, t) {
              t = t === void 0 ? new Map() : t;
              var n = e.payload;
              if (n.includes("<")) {
                t.size === 0 && d0(t);
                var r = n;
                n = [];
                for (var i = -1, s = 0; s < r.length; s++)
                  r[s] === "<"
                    ? (i = s + 1)
                    : r[s] === ">" && i > 0 && ((i = r.substr(i, s - i)), i.match(IC) && n.push(i), (i = -1));
                for (n = x(n), s = n.next(); !s.done; s = n.next())
                  ((s = s.value), (r = r.replace("<" + s + ">", '<div time="' + s + '">')), (r += "</div>"));
                e: {
                  ((s = r), (i = []));
                  var o = -1;
                  ((n = ""), (r = !1));
                  for (var u = 0; u < s.length; u++)
                    if (s[u] === "/") {
                      var l = s.indexOf(">", u);
                      if (l === -1) {
                        n = s;
                        break e;
                      }
                      if ((l = s.substring(u + 1, l)) && l == "v") {
                        r = !0;
                        var p = null;
                        if ((i.length && (p = i[i.length - 1]), p)) {
                          if (p === l) n += "/" + l + ">";
                          else {
                            if (!p.startsWith("v")) {
                              n += s[u];
                              continue;
                            }
                            n += "/" + p + ">";
                          }
                          u += l.length + 1;
                        } else n += s[u];
                      } else n += s[u];
                    } else
                      (s[u] === "<"
                        ? ((o = u + 1), s[o] != "v" && (o = -1))
                        : s[u] === ">" && o > 0 && (i.push(s.substr(o, u - o)), (o = -1)),
                        (n += s[u]));
                  for (s = x(i), i = s.next(); !i.done; i = s.next())
                    ((i = i.value),
                      (o = i.replace(" ", ".voice-")),
                      (n = n.replace("<" + i + ">", "<" + o + ">")),
                      (n = n.replace("</" + i + ">", "</" + o + ">")),
                      r || (n += "</" + o + ">"));
                }
                ((n = EC(n)), (e.payload = ""), (r = "<span>" + n.replace(/\n/g, "<br />") + "</span>"));
                try {
                  var m = Ls(r, "span");
                } catch (y) {}
                if (m)
                  if (((m = m.children), m.length != 1 || m[0].tagName))
                    for (m = x(m), n = m.next(); !n.done; n = m.next()) f0(n.value, e, t);
                  else e.payload = Pn(n);
                else e.payload = Pn(n);
              } else e.payload = Pn(n);
            }
            function d0(e) {
              for (var t = x(Object.entries(p0)), n = t.next(); !n.done; n = t.next()) {
                var r = x(n.value);
                ((n = r.next().value), (r = r.next().value));
                var i = new mt(0, 0, "");
                ((i.color = r), e.set("." + n, i));
              }
              for (t = x(Object.entries(g0)), n = t.next(); !n.done; n = t.next())
                ((r = x(n.value)),
                  (n = r.next().value),
                  (r = r.next().value),
                  (i = new mt(0, 0, "")),
                  (i.backgroundColor = r),
                  e.set("." + n, i));
            }
            function EC(e) {
              var t = { "< ": "", " >": " &gt;" },
                n = /(< +>|<\s|\s>)/g,
                r = RegExp(n.source);
              return e && r.test(e)
                ? e.replace(n, function (i) {
                    return t[i] || "";
                  })
                : e || "";
            }
            function f0(e, t, n) {
              var r = t.clone();
              if (
                ((r.nestedCues = []),
                (r.payload = ""),
                (r.rubyTag = ""),
                (r.line = null),
                (r.region = new Ps()),
                (r.position = null),
                (r.size = 0),
                (r.textAlign = oi),
                e.tagName)
              )
                for (var i = x(e.tagName.split(/(?=[ .])+/g)), s = i.next(); !s.done; s = i.next()) {
                  var o = (s = s.value);
                  if (o.startsWith(".voice-")) {
                    var u = o.split("-").pop();
                    ((o = 'v[voice="' + u + '"]'), n.has(o) || (o = "v[voice=" + u + "]"));
                  }
                  switch (
                    (n.has(o) &&
                      ((u = r), (o = n.get(o))) &&
                      ((u.backgroundColor = Ka(o.backgroundColor, u.backgroundColor)),
                      (u.color = Ka(o.color, u.color)),
                      (u.fontFamily = Ka(o.fontFamily, u.fontFamily)),
                      (u.fontSize = Ka(o.fontSize, u.fontSize)),
                      (u.textShadow = Ka(o.textShadow, u.textShadow)),
                      (u.fontWeight = o.fontWeight),
                      (u.fontStyle = o.fontStyle),
                      (u.opacity = o.opacity),
                      (u.rubyTag = o.rubyTag),
                      (u.textCombineUpright = o.textCombineUpright),
                      (u.wrapLine = o.wrapLine)),
                    s)
                  ) {
                    case "br":
                      ((r = c0(r.startTime, r.endTime)), t.nestedCues.push(r));
                      return;
                    case "b":
                      r.fontWeight = vo;
                      break;
                    case "i":
                      r.fontStyle = xo;
                      break;
                    case "u":
                      r.textDecoration.push(Ti);
                      break;
                    case "font":
                      (s = e.attributes.color) && (r.color = s);
                      break;
                    case "div":
                      if (((s = e.attributes.time), !s)) break;
                      (s = yo(s)) && (r.startTime = s);
                      break;
                    case "ruby":
                    case "rp":
                    case "rt":
                      r.rubyTag = s;
                  }
                }
              if (((i = e.children), sc(e) || (i.length == 1 && sc(i[0]))))
                for (n = Lt(e).split("\n"), e = !0, n = x(n), i = n.next(); !i.done; i = n.next())
                  ((i = i.value),
                    e || ((e = c0(r.startTime, r.endTime)), t.nestedCues.push(e)),
                    i.length > 0 && ((e = r.clone()), (e.payload = Pn(i)), t.nestedCues.push(e)),
                    (e = !1));
              else
                for (t.nestedCues.push(r), t = x(i), e = t.next(); !e.done; e = t.next()) f0(e.value, r, n);
            }
            function Ka(e, t) {
              return e && e.length > 0 ? e : t;
            }
            (de("shaka.text.Cue", mt),
              (mt.parseCuePayload = dc),
              (mt.equal = cc),
              (mt.prototype.clone = mt.prototype.clone));
            var fc = "auto";
            mt.positionAlign = { LEFT: "line-left", RIGHT: "line-right", CENTER: "center", AUTO: fc };
            var oi = "center",
              Jh = { LEFT: "left", RIGHT: "right", CENTER: oi, START: "start", END: "end" };
            mt.textAlign = Jh;
            var $a = "after",
              h0 = { BEFORE: "before", CENTER: "center", AFTER: $a };
            mt.displayAlign = h0;
            var Ya = "ltr";
            mt.direction = { HORIZONTAL_LEFT_TO_RIGHT: Ya, HORIZONTAL_RIGHT_TO_LEFT: "rtl" };
            var bs = "horizontal-tb";
            mt.writingMode = {
              HORIZONTAL_TOP_TO_BOTTOM: bs,
              VERTICAL_LEFT_TO_RIGHT: "vertical-lr",
              VERTICAL_RIGHT_TO_LEFT: "vertical-rl",
            };
            var qa = 0;
            mt.lineInterpretation = { LINE_NUMBER: qa, PERCENTAGE: 1 };
            var Ns = "start",
              Qh = { CENTER: "center", START: Ns, END: "end" };
            mt.lineAlign = Qh;
            var p0 = {
              white: "white",
              lime: "lime",
              cyan: "cyan",
              red: "red",
              yellow: "yellow",
              magenta: "magenta",
              blue: "blue",
              black: "black",
            };
            mt.defaultTextColor = p0;
            var g0 = {
              bg_white: "white",
              bg_lime: "lime",
              bg_cyan: "cyan",
              bg_red: "red",
              bg_yellow: "yellow",
              bg_magenta: "magenta",
              bg_blue: "blue",
              bg_black: "black",
            };
            mt.defaultTextBackgroundColor = g0;
            var m0 = 400,
              vo = 700;
            mt.fontWeight = { NORMAL: m0, BOLD: vo };
            var Zh = "normal",
              xo = "italic",
              y0 = { NORMAL: Zh, ITALIC: xo, OBLIQUE: "oblique" };
            mt.fontStyle = y0;
            var Ti = "underline";
            mt.textDecoration = { UNDERLINE: Ti, LINE_THROUGH: "lineThrough", OVERLINE: "overline" };
            var IC = /(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;
            function Ji() {}
            Ji.prototype.destroy = function () {};
            function wi(e, t, n) {
              ep.set(e.toLowerCase().split(";")[0] + "-" + n, { priority: n, Bf: t });
            }
            function To(e, t) {
              for (
                var n = e.toLowerCase().split(";")[0], r = x([v0, np, tp, Qi]), i = r.next();
                !i.done;
                i = r.next()
              )
                if ((i = ep.get(n + "-" + i.value))) {
                  var s = i.Bf(),
                    o = s.isSupported(e, t);
                  if ((s.destroy(), o)) return i.Bf;
                }
              return null;
            }
            (de("shaka.transmuxer.TransmuxerEngine", Ji),
              (Ji.findTransmuxer = To),
              (Ji.unregisterTransmuxer = function (e, t) {
                ep.delete(e.toLowerCase().split(";")[0] + "-" + t);
              }),
              (Ji.registerTransmuxer = wi),
              (Ji.prototype.destroy = Ji.prototype.destroy));
            var ep = new Map(),
              Qi = 1,
              tp = 2,
              np = 3,
              v0 = 4;
            Ji.PluginPriority = { FALLBACK: Qi, PREFERRED_SECONDARY: tp, PREFERRED: np, APPLICATION: v0 };
            function rp() {}
            function Rt(e, t) {
              var n = e;
              return (t && !Si.includes(e) && (n += '; codecs="' + t + '"'), n);
            }
            function hc(e, t) {
              return (t && (e += '; codecs="' + t + '"'), e);
            }
            function ip(e, t, n) {
              var r = Rt(e, t);
              return (
                (t = hc(e, t)),
                To(t)
                  ? (e = To(t))
                    ? ((e = e()), (n = e.convertCodecs(n, t)), e.destroy())
                    : (n = t)
                  : (n = e != "video/mp2t" && n == "audio" ? r.replace("video", "audio") : r),
                n
              );
            }
            function Ja(e) {
              return e.split(";")[0].split("/")[1];
            }
            function hn(e) {
              var t = x0(e);
              switch (((e = t[0].toLowerCase()), (t = t[1].toLowerCase()), !0)) {
                case e === "mp4a" && t === "69":
                case e === "mp4a" && t === "6b":
                case e === "mp4a" && t === "40.34":
                  return "mp3";
                case e === "mp4a" && t === "66":
                case e === "mp4a" && t === "67":
                case e === "mp4a" && t === "68":
                case e === "mp4a" && t === "40.2":
                case e === "mp4a" && t === "40.02":
                case e === "mp4a" && t === "40.5":
                case e === "mp4a" && t === "40.05":
                case e === "mp4a" && t === "40.29":
                case e === "mp4a" && t === "40.42":
                  return "aac";
                case e === "mp4a" && t === "a5":
                case e === "ac3":
                case e === "ac-3":
                  return "ac-3";
                case e === "mp4a" && t === "a6":
                case e === "eac3":
                case e === "ec-3":
                  return "ec-3";
                case e === "ac-4":
                  return "ac-4";
                case e === "mp4a" && t === "b2":
                  return "dtsx";
                case e === "mp4a" && t === "a9":
                  return "dtsc";
                case e === "vp09":
                case e === "vp9":
                  return "vp9";
                case e === "avc1":
                case e === "avc3":
                  return "avc";
                case e === "hvc1":
                case e === "hev1":
                  return "hevc";
                case e === "vvc1":
                case e === "vvi1":
                  return "vvc";
                case e === "dvh1":
                case e === "dvhe":
                  return t && t.startsWith("05") ? "dovi-p5" : "dovi-hevc";
                case e === "dvav":
                case e === "dva1":
                  return "dovi-avc";
                case e === "dav1":
                  return "dovi-av1";
                case e === "dvc1":
                case e === "dvi1":
                  return "dovi-vvc";
                case e === "lvc1":
                  return "lcevc";
              }
              return e;
            }
            function Zi(e) {
              var t = [];
              e = x(e.split(","));
              for (var n = e.next(); !n.done; n = e.next()) ((n = x0(n.value)), t.push(n[0]));
              return t.sort().join(",");
            }
            function Qn(e) {
              return e.split(";")[0];
            }
            function Vn(e) {
              return (
                (e = e.split(/ *; */)),
                e.shift(),
                (e = e.find(function (t) {
                  return t.startsWith("codecs=");
                }))
                  ? e.split("=")[1].replace(/^"|"$/g, "")
                  : ""
              );
            }
            function pc(e) {
              return e === "application/x-mpegurl" || e === "application/vnd.apple.mpegurl";
            }
            function x0(e) {
              e = e.split(".");
              var t = e[0];
              return (e.shift(), [t, e.join(".")]);
            }
            (de("shaka.util.MimeUtils", rp),
              (rp.getFullTypeWithAllCodecs = hc),
              (rp.getFullType = Rt),
              new Map()
                .set("codecs", "codecs")
                .set("frameRate", "framerate")
                .set("bandwidth", "bitrate")
                .set("width", "width")
                .set("height", "height")
                .set("channelsCount", "channels"));
            var Si = ["audio/aac", "audio/ac3", "audio/ec3", "audio/mpeg"];
            function Ai(e) {
              ((this.i = null),
                (this.l = e),
                (this.C = !1),
                (this.m = this.u = 0),
                (this.o = 1 / 0),
                (this.h = this.g = null),
                (this.F = ""),
                (this.B = function () {}),
                (this.j = new Map()));
            }
            function an(e, t) {
              eu.set(e, t);
            }
            function Qa(e) {
              return eu.get(e);
            }
            function Za(e) {
              return eu.has(e) ? !0 : e == "application/cea-608" || e == "application/cea-708" ? !!_s : !1;
            }
            Ai.prototype.destroy = function () {
              return ((this.l = this.i = null), this.j.clear(), Promise.resolve());
            };
            function CC(e, t, n, r, i) {
              var s, o, u, l, p, m, y;
              return F(function (v) {
                if (v.g == 1) return E(v, Promise.resolve(), 2);
                if (!e.i || !e.l) return v.return();
                if (n == null || r == null) return (e.i.parseInit(Le(t)), v.return());
                for (
                  s = e.C ? n : e.u,
                    o = { periodStart: e.u, segmentStart: n, segmentEnd: r, vttOffset: s },
                    u = e.i.parseMedia(Le(t), o, i, []),
                    l = x(u),
                    p = l.next();
                  !p.done;
                  p = l.next()
                )
                  ((m = p.value), e.B(m, i || null, o));
                ((y = u.filter(function (w) {
                  return w.startTime >= e.m && w.startTime < e.o;
                })),
                  e.l.append(y),
                  e.g == null && (e.g = Math.max(n, e.m)),
                  (e.h = Math.min(r, e.o)),
                  re(v));
              });
            }
            Ai.prototype.remove = function (e, t, n) {
              n = n === void 0 ? !1 : n;
              var r = this;
              return F(function (i) {
                if (i.g == 1) return E(i, Promise.resolve(), 2);
                if (e >= t) return i.return();
                (n && kC(r, e, t),
                  r.l &&
                    r.l.remove(e, t) &&
                    r.g != null &&
                    (t <= r.g ||
                      e >= r.h ||
                      (e <= r.g && t >= r.h
                        ? (r.g = r.h = null)
                        : e <= r.g && t < r.h
                          ? (r.g = t)
                          : e > r.g && t >= r.h && (r.h = e)),
                    S0(r)),
                  re(i));
              });
            };
            function MC(e, t, n) {
              ((e.m = t), (e.o = n));
            }
            function T0(e, t, n) {
              ((e.F = t),
                (t = e.j.get(t)) &&
                  ((t = t.filter(function (r) {
                    return r.endTime <= n;
                  })),
                  t.length && e.l.append(t)));
            }
            function w0(e, t, n) {
              ((t.startTime += n), (t.endTime += n), (t = x(t.nestedCues)));
              for (var r = t.next(); !r.done; r = t.next()) w0(e, r.value, n);
            }
            function RC(e, t, n) {
              var r = new Map();
              t = x(t);
              for (var i = t.next(); !i.done; i = t.next()) {
                var s = i.value;
                ((i = s.stream),
                  (s = s.cue),
                  r.has(i) || r.set(i, []),
                  w0(e, s, n),
                  s.startTime >= e.m && s.startTime < e.o && (r.get(i).push(s), i == e.F && e.l.append([s])));
              }
              for (n = x(r.keys()), t = n.next(); !t.done; t = n.next())
                for (
                  t = t.value, e.j.has(t) || e.j.set(t, []), i = x(r.get(t)), s = i.next();
                  !s.done;
                  s = i.next()
                )
                  ((s = s.value), e.j.get(t).push(s));
              S0(e);
            }
            function kC(e, t, n) {
              for (var r = x(e.j.keys()), i = r.next(); !i.done; i = r.next()) {
                i = i.value;
                var s = e.j.get(i);
                ((s = s.filter(function (o) {
                  return o.startTime < t || o.endTime >= n;
                })),
                  e.j.set(i, s));
              }
            }
            function S0(e) {
              for (var t = 1 / 0, n = -1 / 0, r = x(e.j.values()), i = r.next(); !i.done; i = r.next()) {
                i = x(i.value);
                for (var s = i.next(); !s.done; s = i.next())
                  ((s = s.value), (t = Math.min(t, s.startTime)), (n = Math.max(n, s.endTime)));
              }
              t !== 1 / 0 &&
                n !== -1 / 0 &&
                ((e.g = e.g == null ? Math.max(t, e.m) : Math.min(e.g, Math.max(t, e.m))),
                (e.h = Math.max(e.h, Math.min(n, e.o))));
            }
            (de("shaka.text.TextEngine", Ai),
              (Ai.prototype.destroy = Ai.prototype.destroy),
              (Ai.findParser = Qa),
              (Ai.unregisterParser = function (e) {
                eu.delete(e);
              }),
              (Ai.registerParser = an));
            var eu = new Map();
            function tu(e) {
              ((this.h = e), (this.g = null));
            }
            ((tu.prototype.ka = function (e) {
              var t = this;
              this.stop();
              var n = !0,
                r = null;
              return (
                (this.g = function () {
                  (g.clearTimeout(r), (n = !1));
                }),
                (r = g.setTimeout(function () {
                  n && t.h();
                }, e * 1e3)),
                this
              );
            }),
              (tu.prototype.stop = function () {
                this.g && (this.g(), (this.g = null));
              }));
            function He(e) {
              ((this.h = e), (this.g = null));
            }
            ((He.prototype.Jb = function () {
              return (this.stop(), this.h(), this);
            }),
              (He.prototype.ka = function (e) {
                var t = this;
                return (
                  this.stop(),
                  (this.g = new tu(function () {
                    t.h();
                  }).ka(e)),
                  this
                );
              }),
              (He.prototype.Ea = function (e) {
                var t = this;
                return (
                  this.stop(),
                  (this.g = new tu(function () {
                    (t.g.ka(e), t.h());
                  }).ka(e)),
                  this
                );
              }),
              (He.prototype.stop = function () {
                this.g && (this.g.stop(), (this.g = null));
              }),
              de("shaka.util.Timer", He),
              (He.prototype.stop = He.prototype.stop),
              (He.prototype.tickEvery = He.prototype.Ea),
              (He.prototype.tickAfter = He.prototype.ka),
              (He.prototype.tickNow = He.prototype.Jb));
            function _C(e, t) {
              return e.concat(t);
            }
            function PC() {}
            function es(e) {
              return e != null;
            }
            function gc(e, t) {
              return Promise.race([
                t,
                new Promise(function (n, r) {
                  new He(r).ka(e);
                }),
              ]);
            }
            function Br() {}
            function wo(e, t) {
              return ((e = nt(e)), (t = nt(t)), e.split("-")[0] == t.split("-")[0]);
            }
            function nu(e, t) {
              return (
                (e = nt(e)),
                (t = nt(t)),
                (e = e.split("-")),
                (t = t.split("-")),
                e[0] == t[0] && e.length == 1 && t.length == 2
              );
            }
            function sp(e, t) {
              return (
                (e = nt(e)),
                (t = nt(t)),
                (e = e.split("-")),
                (t = t.split("-")),
                e.length == 2 && t.length == 2 && e[0] == t[0]
              );
            }
            function nt(e) {
              e = x(e.split("-x-"));
              var t = e.next().value;
              ((t = t === void 0 ? "" : t), (e = e.next().value), (e = e === void 0 ? "" : e));
              var n = x(t.split("-"));
              return (
                (t = n.next().value),
                (t = t === void 0 ? "" : t),
                (n = n.next().value),
                (n = n === void 0 ? "" : n),
                (e = e ? "x-" + e : ""),
                (t = t.toLowerCase()),
                (t = A0.get(t) || t),
                (n = n.toUpperCase()),
                (n ? t + "-" + n : t) + (e ? "-" + e : "")
              );
            }
            function Os(e, t) {
              return ((e = nt(e)), (t = nt(t)), t == e ? 4 : nu(t, e) ? 3 : sp(t, e) ? 2 : nu(e, t) ? 1 : 0);
            }
            function mc(e) {
              var t = e.indexOf("-");
              return ((e = t >= 0 ? e.substring(0, t) : e), (e = e.toLowerCase()), (e = A0.get(e) || e));
            }
            function op(e) {
              return e.language
                ? nt(e.language)
                : e.audio && e.audio.language
                  ? nt(e.audio.language)
                  : e.video && e.video.language
                    ? nt(e.video.language)
                    : "und";
            }
            function yc(e, t) {
              e = nt(e);
              var n = new Set();
              t = x(t);
              for (var r = t.next(); !r.done; r = t.next()) n.add(nt(r.value));
              for (t = x(n), r = t.next(); !r.done; r = t.next()) if (((r = r.value), r == e)) return r;
              for (t = x(n), r = t.next(); !r.done; r = t.next()) if (((r = r.value), nu(r, e))) return r;
              for (t = x(n), r = t.next(); !r.done; r = t.next()) if (((r = r.value), sp(r, e))) return r;
              for (n = x(n), t = n.next(); !t.done; t = n.next()) if (((t = t.value), nu(e, t))) return t;
              return null;
            }
            (de("shaka.util.LanguageUtils", Br),
              (Br.findClosestLocale = yc),
              (Br.getLocaleForVariant = op),
              (Br.getLocaleForText = function (e) {
                return nt(e.language || "und");
              }),
              (Br.getBase = mc),
              (Br.relatedness = Os),
              (Br.areSiblings = function (e, t) {
                var n = mc(e),
                  r = mc(t);
                return e != n && t != r && n == r;
              }),
              (Br.normalize = nt),
              (Br.isSiblingOf = sp),
              (Br.isParentOf = nu),
              (Br.areLanguageCompatible = wo),
              (Br.areLocaleCompatible = function (e, t) {
                return ((e = nt(e)), (t = nt(t)), e == t);
              }));
            var A0 = new Map([
              ["aar", "aa"],
              ["abk", "ab"],
              ["afr", "af"],
              ["aka", "ak"],
              ["alb", "sq"],
              ["amh", "am"],
              ["ara", "ar"],
              ["arg", "an"],
              ["arm", "hy"],
              ["asm", "as"],
              ["ava", "av"],
              ["ave", "ae"],
              ["aym", "ay"],
              ["aze", "az"],
              ["bak", "ba"],
              ["bam", "bm"],
              ["baq", "eu"],
              ["bel", "be"],
              ["ben", "bn"],
              ["bih", "bh"],
              ["bis", "bi"],
              ["bod", "bo"],
              ["bos", "bs"],
              ["bre", "br"],
              ["bul", "bg"],
              ["bur", "my"],
              ["cat", "ca"],
              ["ces", "cs"],
              ["cha", "ch"],
              ["che", "ce"],
              ["chi", "zh"],
              ["chu", "cu"],
              ["chv", "cv"],
              ["cor", "kw"],
              ["cos", "co"],
              ["cre", "cr"],
              ["cym", "cy"],
              ["cze", "cs"],
              ["dan", "da"],
              ["deu", "de"],
              ["div", "dv"],
              ["dut", "nl"],
              ["dzo", "dz"],
              ["ell", "el"],
              ["eng", "en"],
              ["epo", "eo"],
              ["est", "et"],
              ["eus", "eu"],
              ["ewe", "ee"],
              ["fao", "fo"],
              ["fas", "fa"],
              ["fij", "fj"],
              ["fin", "fi"],
              ["fra", "fr"],
              ["fre", "fr"],
              ["fry", "fy"],
              ["ful", "ff"],
              ["geo", "ka"],
              ["ger", "de"],
              ["gla", "gd"],
              ["gle", "ga"],
              ["glg", "gl"],
              ["glv", "gv"],
              ["gre", "el"],
              ["grn", "gn"],
              ["guj", "gu"],
              ["hat", "ht"],
              ["hau", "ha"],
              ["heb", "he"],
              ["her", "hz"],
              ["hin", "hi"],
              ["hmo", "ho"],
              ["hrv", "hr"],
              ["hun", "hu"],
              ["hye", "hy"],
              ["ibo", "ig"],
              ["ice", "is"],
              ["ido", "io"],
              ["iii", "ii"],
              ["iku", "iu"],
              ["ile", "ie"],
              ["ina", "ia"],
              ["ind", "id"],
              ["ipk", "ik"],
              ["isl", "is"],
              ["ita", "it"],
              ["jav", "jv"],
              ["jpn", "ja"],
              ["kal", "kl"],
              ["kan", "kn"],
              ["kas", "ks"],
              ["kat", "ka"],
              ["kau", "kr"],
              ["kaz", "kk"],
              ["khm", "km"],
              ["kik", "ki"],
              ["kin", "rw"],
              ["kir", "ky"],
              ["kom", "kv"],
              ["kon", "kg"],
              ["kor", "ko"],
              ["kua", "kj"],
              ["kur", "ku"],
              ["lao", "lo"],
              ["lat", "la"],
              ["lav", "lv"],
              ["lim", "li"],
              ["lin", "ln"],
              ["lit", "lt"],
              ["ltz", "lb"],
              ["lub", "lu"],
              ["lug", "lg"],
              ["mac", "mk"],
              ["mah", "mh"],
              ["mal", "ml"],
              ["mao", "mi"],
              ["mar", "mr"],
              ["may", "ms"],
              ["mkd", "mk"],
              ["mlg", "mg"],
              ["mlt", "mt"],
              ["mon", "mn"],
              ["mri", "mi"],
              ["msa", "ms"],
              ["mya", "my"],
              ["nau", "na"],
              ["nav", "nv"],
              ["nbl", "nr"],
              ["nde", "nd"],
              ["ndo", "ng"],
              ["nep", "ne"],
              ["nld", "nl"],
              ["nno", "nn"],
              ["nob", "nb"],
              ["nor", "no"],
              ["nya", "ny"],
              ["oci", "oc"],
              ["oji", "oj"],
              ["ori", "or"],
              ["orm", "om"],
              ["oss", "os"],
              ["pan", "pa"],
              ["per", "fa"],
              ["pli", "pi"],
              ["pol", "pl"],
              ["por", "pt"],
              ["pus", "ps"],
              ["que", "qu"],
              ["roh", "rm"],
              ["ron", "ro"],
              ["rum", "ro"],
              ["run", "rn"],
              ["rus", "ru"],
              ["sag", "sg"],
              ["san", "sa"],
              ["sin", "si"],
              ["slk", "sk"],
              ["slo", "sk"],
              ["slv", "sl"],
              ["sme", "se"],
              ["smo", "sm"],
              ["sna", "sn"],
              ["snd", "sd"],
              ["som", "so"],
              ["sot", "st"],
              ["spa", "es"],
              ["sqi", "sq"],
              ["srd", "sc"],
              ["srp", "sr"],
              ["ssw", "ss"],
              ["sun", "su"],
              ["swa", "sw"],
              ["swe", "sv"],
              ["tah", "ty"],
              ["tam", "ta"],
              ["tat", "tt"],
              ["tel", "te"],
              ["tgk", "tg"],
              ["tgl", "tl"],
              ["tha", "th"],
              ["tib", "bo"],
              ["tir", "ti"],
              ["ton", "to"],
              ["tsn", "tn"],
              ["tso", "ts"],
              ["tuk", "tk"],
              ["tur", "tr"],
              ["twi", "tw"],
              ["uig", "ug"],
              ["ukr", "uk"],
              ["urd", "ur"],
              ["uzb", "uz"],
              ["ven", "ve"],
              ["vie", "vi"],
              ["vol", "vo"],
              ["wel", "cy"],
              ["wln", "wa"],
              ["wol", "wo"],
              ["xho", "xh"],
              ["yid", "yi"],
              ["yor", "yo"],
              ["zha", "za"],
              ["zho", "zh"],
              ["zul", "zu"],
            ]);
            function E0() {}
            function I0(e, t, n, r, i) {
              if (i.length) {
                var s = e.textStreams;
                i = x(i);
                for (var o = i.next(), u = {}; !o.done; u = { Fh: void 0 }, o = i.next())
                  if (
                    ((u.Fh = o.value),
                    (o = s.filter(
                      (function (A) {
                        return function (I) {
                          return !!(I.codecs.startsWith(A.Fh) || I.mimeType.startsWith(A.Fh));
                        };
                      })(u),
                    )),
                    o.length)
                  ) {
                    s = o;
                    break;
                  }
                e.textStreams = s;
              }
              if (((s = e.variants), (t.length || n.length) && (s = DC(s, t, n)), r.length)) {
                for (t = new $l(), s = x(s), n = s.next(); !n.done; n = s.next())
                  ((n = n.value), t.push(String(n.video.width || 0), n));
                var l = [];
                (t.forEach(function (A, I) {
                  A = 0;
                  var C = [];
                  I = x(I);
                  for (var k = I.next(), R = {}; !k.done; R = { Xf: void 0 }, k = I.next())
                    ((R.Xf = k.value),
                      (k = r.filter(
                        (function (L) {
                          return function (U) {
                            return L.Xf.decodingInfos[0][U];
                          };
                        })(R),
                      ).length),
                      k > A ? ((A = k), (C = [R.Xf])) : k == A && C.push(R.Xf));
                  l.push.apply(l, Y(C));
                }),
                  (s = l));
              }
              for (t = new Set(), n = x(s), i = n.next(); !i.done; i = n.next())
                ((i = i.value), i.video && t.add(i.video));
              if (t.size) {
                var p = {
                  vp8: 1,
                  avc: 1,
                  "dovi-avc": 0.95,
                  vp9: 0.9,
                  vp09: 0.9,
                  hevc: 0.85,
                  "dovi-hevc": 0.8,
                  "dovi-p5": 0.75,
                  av01: 0.7,
                  "dovi-av1": 0.65,
                  vvc: 0.6,
                };
                i = Array.from(t).sort(function (A, I) {
                  return A.bandwidth && I.bandwidth && A.bandwidth != I.bandwidth
                    ? A.bandwidth - I.bandwidth
                    : A.width != I.width
                      ? A.width - I.width
                      : A.codecs && I.codecs
                        ? ((A = hn(A.codecs)), (I = hn(I.codecs)), (p[A] || 1) - (p[I] || 1))
                        : 0;
                });
                var m = [];
                for (
                  t = new Map(),
                    n = function (A) {
                      var I = [
                        String(A.width || ""),
                        String(A.height || ""),
                        String(Math.round(A.frameRate || 0)),
                        A.hdr || "",
                        A.fastSwitching,
                      ];
                      return (
                        A.dependencyStream && I.push(A.dependencyStream.baseOriginalId || ""),
                        A.roles && I.push(A.roles.sort().join("_")),
                        I.join(";")
                      );
                    },
                    i = x(i),
                    o = i.next();
                  !o.done;
                  o = i.next()
                ) {
                  ((o = o.value), (u = n(o)));
                  var y = t.get(u) || [];
                  if (y.length) {
                    var v = hn(y[y.length - 1].codecs),
                      w = hn(o.codecs);
                    v == w && (y.push(o), m.push(o.id));
                  } else (y.push(o), m.push(o.id));
                  t.set(u, y);
                }
                e.variants = s.filter(function (A) {
                  return !((A = A.video) && !m.includes(A.id));
                });
              } else e.variants = s;
            }
            function DC(e, t, n) {
              t = x(t);
              for (var r = t.next(), i = {}; !r.done; i = { lj: void 0 }, r = t.next())
                if (
                  ((i.lj = r.value),
                  (r = e.filter(
                    (function (s) {
                      return function (o) {
                        return o.video && o.video.codecs.startsWith(s.lj);
                      };
                    })(i),
                  )),
                  r.length)
                ) {
                  e = r;
                  break;
                }
              for (n = x(n), t = n.next(), r = {}; !t.done; r = { Rh: void 0 }, t = n.next())
                if (
                  ((r.Rh = t.value),
                  (t = e.filter(
                    (function (s) {
                      return function (o) {
                        return o.audio && o.audio.codecs.startsWith(s.Rh);
                      };
                    })(r),
                  )),
                  t.length)
                ) {
                  e = t;
                  break;
                }
              return e;
            }
            function LC(e, t, n) {
              e.variants = e.variants.filter(function (r) {
                return vc(r, t, n);
              });
            }
            function vc(e, t, n) {
              function r(o, u, l) {
                return o >= u && o <= l;
              }
              if (e && e.video && e.video.width && e.video.height) {
                var i = e.video.width,
                  s = e.video.height;
                if (
                  (s > i && ((s = x([s, i])), (i = s.next().value), (s = s.next().value)),
                  !r(i, t.minWidth, Math.min(t.maxWidth, n.width)) ||
                    !r(s, t.minHeight, Math.min(t.maxHeight, n.height)) ||
                    !r(i * s, t.minPixels, t.maxPixels))
                )
                  return !1;
              }
              return !(
                (e &&
                  e.video &&
                  e.video.frameRate &&
                  !r(e.video.frameRate, t.minFrameRate, t.maxFrameRate)) ||
                (e &&
                  e.audio &&
                  e.audio.channelsCount &&
                  !r(e.audio.channelsCount, t.minChannelsCount, t.maxChannelsCount)) ||
                !r(e.bandwidth, t.minBandwidth, t.maxBandwidth)
              );
            }
            function bC(e, t, n, r) {
              return (
                (n = n === void 0 ? [] : n),
                (r = r === void 0 ? {} : r),
                F(function (i) {
                  return i.g == 1
                    ? E(i, C0(e, t, t.offlineSessionIds.length > 0, n, r), 2)
                    : (FC(t), E(i, BC(t), 0));
                })
              );
            }
            function C0(e, t, n, r, i) {
              var s, o;
              return F(function (u) {
                if (u.g == 1) return (je().$i() && NC(t.variants), E(u, ap(t.variants, n, !1, r), 2));
                ((s = null),
                  e && (o = e.g) && (s = o.keySystem),
                  (t.variants = t.variants.filter(function (l) {
                    var p = OC(l, s, i);
                    if (!p) {
                      var m = [];
                      (l.audio && m.push(L0(l.audio)), l.video && m.push(L0(l.video)));
                    }
                    return p;
                  })),
                  re(u));
              });
            }
            function NC(e) {
              var t = new Map()
                  .set("dvav", "avc3")
                  .set("dva1", "avc1")
                  .set("dvhe", "hev1")
                  .set("dvh1", "hvc1")
                  .set("dvc1", "vvc1")
                  .set("dvi1", "vvi1"),
                n = new Set();
              e = x(e);
              for (var r = e.next(); !r.done; r = e.next()) ((r = r.value), r.video && n.add(r.video));
              for (n = x(n), e = n.next(); !e.done; e = n.next()) {
                ((e = e.value), (r = x(t)));
                for (var i = r.next(); !i.done; i = r.next()) {
                  var s = x(i.value);
                  if (((i = s.next().value), (s = s.next().value), e.codecs.includes(i))) {
                    e.codecs = e.codecs.replace(i, s);
                    break;
                  }
                }
              }
            }
            function OC(e, t, n) {
              if (
                !e.decodingInfos.some(function (l) {
                  return !(
                    !l.supported ||
                    (t && (l = l.keySystemAccess) && (n[l.keySystem] || l.keySystem) != t)
                  );
                })
              )
                return !1;
              var r = je(),
                i = r.Nb() === "Xbox";
              r = r.Oa() === "MOBILE" && r.Ha() === "GECKO";
              var s = e.video,
                o = (s && s.width) || 0,
                u = (s && s.height) || 0;
              return (i &&
                s &&
                (o > 1920 || u > 1080) &&
                (s.codecs.includes("avc1.") || s.codecs.includes("avc3."))) ||
                ((i = s && s.dependencyStream) && !Zv(i))
                ? !1
                : ((e = e.audio),
                  !(
                    (r && e && e.encrypted && e.codecs.toLowerCase().includes("opus")) ||
                    (e && e.dependencyStream)
                  ));
            }
            function M0(e, t) {
              var n, r, i, s, o, u, l;
              return F(function (p) {
                if (p.g == 1) {
                  for (
                    n = function (m, y) {
                      if (m) {
                        var v = qi(m);
                        return (
                          (v.supported = m.supported && y.supported),
                          (v.powerEfficient = m.powerEfficient && y.powerEfficient),
                          (v.smooth = m.smooth && y.smooth),
                          y.keySystemAccess && !v.keySystemAccess && (v.keySystemAccess = y.keySystemAccess),
                          v
                        );
                      }
                      return y;
                    },
                      r = null,
                      i = [],
                      s = x(t),
                      o = s.next(),
                      u = {};
                    !o.done;
                    u = { cache: void 0, Se: void 0 }, o = s.next()
                  )
                    ((l = o.value),
                      (u.Se = ic(l)),
                      (u.cache = Sc),
                      u.cache.has(u.Se)
                        ? (r = n(r, u.cache.get(u.Se)))
                        : i.push(
                            UC(l).then(
                              (function (m) {
                                return function (y) {
                                  var v = null;
                                  y = x(y || []);
                                  for (var w = y.next(); !w.done; w = y.next()) v = n(v, w.value);
                                  v && (m.cache.set(m.Se, v), (r = n(r, v)));
                                };
                              })(u),
                            ),
                          ));
                  return E(p, Promise.all(i), 2);
                }
                (r && e.decodingInfos.push(r), re(p));
              });
            }
            function UC(e) {
              var t = [""];
              e.video && (t = Vn(e.video.contentType).split(","));
              var n = [""];
              e.audio && (n = Vn(e.audio.contentType).split(","));
              var r = [];
              t = x(t);
              for (var i = t.next(); !i.done; i = t.next()) {
                i = i.value;
                for (var s = x(n), o = s.next(), u = {}; !o.done; u = { Qc: void 0 }, o = s.next())
                  ((o = o.value),
                    (u.Qc = Fr(e)),
                    e.video && (u.Qc.video.contentType = Rt(Qn(u.Qc.video.contentType), i)),
                    e.audio && (u.Qc.audio.contentType = Rt(Qn(u.Qc.audio.contentType), o)),
                    r.push(
                      new Promise(
                        (function (l) {
                          return function (p, m) {
                            (je().Oa() == "MOBILE"
                              ? gc(5, navigator.mediaCapabilities.decodingInfo(l.Qc))
                              : navigator.mediaCapabilities.decodingInfo(l.Qc)
                            )
                              .then(function (y) {
                                p(y);
                              })
                              .catch(m);
                          };
                        })(u),
                      ),
                    ));
              }
              return Promise.all(r).catch(function () {
                return (JSON.stringify(e), null);
              });
            }
            function ap(e, t, n, r) {
              var i, s, o, u, l, p, m, y, v, w, A, I, C, k, R, L, U, G;
              return F(function (b) {
                switch (b.g) {
                  case 1:
                    if (
                      e.some(function (B) {
                        return B.decodingInfos.length;
                      })
                    )
                      return b.return();
                    ((i = x(r)), (s = i.next()), (o = {}));
                  case 2:
                    if (s.done) {
                      b.A(4);
                      break;
                    }
                    ((o.Ji = s.value), (u = !1), (l = x(e)), (p = l.next()));
                  case 5:
                    if (p.done) {
                      b.A(7);
                      break;
                    }
                    ((m = p.value),
                      (y = R0(m, t, n).filter(
                        (function (B) {
                          return function (O) {
                            return (
                              (O = O[0]),
                              (O.keySystemConfiguration && O.keySystemConfiguration.keySystem) === B.Ji
                            );
                          };
                        })(o),
                      )),
                      (v = x(y)),
                      (w = v.next()));
                  case 8:
                    if (w.done) {
                      b.A(10);
                      break;
                    }
                    return ((A = w.value), E(b, M0(m, A), 9));
                  case 9:
                    ((w = v.next()), b.A(8));
                    break;
                  case 10:
                    (m.decodingInfos.some(function (B) {
                      return B.supported;
                    }) && (u = !0),
                      (p = l.next()),
                      b.A(5));
                    break;
                  case 7:
                    if (u) return b.return();
                    ((o = { Ji: void 0 }), (s = i.next()), b.A(2));
                    break;
                  case 4:
                    ((I = x(e)), (C = I.next()));
                  case 12:
                    if (C.done) {
                      b.A(0);
                      break;
                    }
                    ((k = C.value),
                      (R = R0(k, t, n).filter(function (B) {
                        return (
                          (B = B[0]),
                          (B = B.keySystemConfiguration && B.keySystemConfiguration.keySystem),
                          !B || !r.includes(B)
                        );
                      })),
                      (L = x(R)),
                      (U = L.next()));
                  case 15:
                    if (U.done) {
                      ((C = I.next()), b.A(12));
                      break;
                    }
                    return ((G = U.value), E(b, M0(k, G), 16));
                  case 16:
                    ((U = L.next()), b.A(15));
                }
              });
            }
            function R0(e, t, n) {
              var r = e.audio,
                i = e.video,
                s = [],
                o = [];
              if (i)
                for (var u = x(i.fullMimeTypes), l = u.next(); !l.done; l = u.next()) {
                  l = l.value;
                  var p = Vn(l);
                  if (p.includes(",") && !r) {
                    var m = p.split(","),
                      y = Qn(l);
                    ((p = ho("video", m)),
                      (m = ho("audio", m)),
                      (m = ru(m, y)),
                      (y = ip(y, m, "audio")),
                      o.push({
                        contentType: y,
                        channels: 2,
                        bitrate: e.bandwidth || 1,
                        samplerate: 1,
                        spatialRendering: !1,
                      }));
                  }
                  if (
                    ((p = k0(p)),
                    (l = {
                      contentType: ip(Qn(l), p, "video"),
                      width: i.width || 64,
                      height: i.height || 64,
                      bitrate: i.bandwidth || e.bandwidth || 1,
                      framerate: i.frameRate || 30,
                    }),
                    i.hdr)
                  )
                    switch (i.hdr) {
                      case "PQ":
                        l.transferFunction = "pq";
                        break;
                      case "HLG":
                        l.transferFunction = "hlg";
                    }
                  (i.colorGamut && (l.colorGamut = i.colorGamut), s.push(l));
                }
              if (r)
                for (u = x(r.fullMimeTypes), l = u.next(); !l.done; l = u.next())
                  ((p = l.value),
                    (l = Qn(p)),
                    (p = ru(Vn(p), l)),
                    (l = ip(l, p, "audio")),
                    o.push({
                      contentType: l,
                      channels: r.channelsCount || 2,
                      bitrate: r.bandwidth || e.bandwidth || 1,
                      samplerate: r.audioSamplingRate || 1,
                      spatialRendering: r.spatialAudio,
                    }));
              for (
                u = [], s.length == 0 && s.push(null), o.length == 0 && o.push(null), s = x(s), l = s.next();
                !l.done;
                l = s.next()
              )
                for (l = l.value, p = x(o), y = p.next(); !y.done; y = p.next())
                  ((y = y.value),
                    (m = { type: n ? "file" : "media-source" }),
                    l && (m.video = l),
                    y && (m.audio = y),
                    u.push(m));
              if (
                ((o = (e.video ? e.video.drmInfos : []).concat(e.audio ? e.audio.drmInfos : [])), !o.length)
              )
                return [u];
              for (e = [], n = new Map(), o = x(o), s = o.next(); !s.done; s = o.next())
                ((s = s.value), n.get(s.keySystem) || n.set(s.keySystem, []), n.get(s.keySystem).push(s));
              for (
                o = t ? "required" : "optional",
                  t = t ? ["persistent-license"] : ["temporary"],
                  s = x(n.keys()),
                  l = s.next();
                !l.done;
                l = s.next()
              ) {
                for (
                  l = l.value, y = n.get(l), p = new Map(), y = x(y), m = y.next();
                  !m.done;
                  m = y.next()
                ) {
                  m = m.value;
                  var v = m.videoRobustness + "," + m.audioRobustness;
                  (p.get(v) || p.set(v, []), p.get(v).push(m));
                }
                for (p = x(p.values()), y = p.next(); !y.done; y = p.next()) {
                  ((y = y.value), (m = []), (v = x(u)));
                  for (var w = v.next(); !w.done; w = v.next()) {
                    w = Object.assign({}, w.value);
                    for (
                      var A = {
                          keySystem: l,
                          initDataType: "cenc",
                          persistentState: o,
                          distinctiveIdentifier: "optional",
                          sessionTypes: t,
                        },
                        I = x(y),
                        C = I.next();
                      !C.done;
                      C = I.next()
                    ) {
                      if (((C = C.value), C.initData && C.initData.length)) {
                        for (var k = new Set(), R = x(C.initData), L = R.next(); !L.done; L = R.next())
                          k.add(L.value.initDataType);
                        A.initDataType = C.initData[0].initDataType;
                      }
                      (C.distinctiveIdentifierRequired && (A.distinctiveIdentifier = "required"),
                        C.persistentStateRequired && (A.persistentState = "required"),
                        C.sessionType && (A.sessionTypes = [C.sessionType]),
                        r &&
                          (A.audio
                            ? (C.encryptionScheme &&
                                (A.audio.encryptionScheme = A.audio.encryptionScheme || C.encryptionScheme),
                              (A.audio.robustness = A.audio.robustness || C.audioRobustness))
                            : ((A.audio = { robustness: C.audioRobustness }),
                              C.encryptionScheme && (A.audio.encryptionScheme = C.encryptionScheme)),
                          A.audio.robustness == "" && delete A.audio.robustness),
                        i &&
                          (A.video
                            ? (C.encryptionScheme &&
                                (A.video.encryptionScheme = A.video.encryptionScheme || C.encryptionScheme),
                              (A.video.robustness = A.video.robustness || C.videoRobustness))
                            : ((A.video = { robustness: C.videoRobustness }),
                              C.encryptionScheme && (A.video.encryptionScheme = C.encryptionScheme)),
                          A.video.robustness == "" && delete A.video.robustness));
                    }
                    ((w.keySystemConfiguration = A), m.push(w));
                  }
                  e.push(m);
                }
              }
              return e;
            }
            function ru(e, t) {
              var n = je();
              return e.toLowerCase() == "flac"
                ? n.Ha() != "WEBKIT"
                  ? "flac"
                  : "fLaC"
                : e.toLowerCase() === "opus"
                  ? n.Ha() != "WEBKIT"
                    ? "opus"
                    : Ja(t) == "mp4"
                      ? "Opus"
                      : "opus"
                  : e.toLowerCase() == "ac-3" && n.se()
                    ? "ec-3"
                    : e;
            }
            function k0(e) {
              if (e.includes("avc1")) {
                var t = e.split(".");
                if (t.length == 3)
                  return (
                    (e = t.shift() + "."),
                    (e += parseInt(t.shift(), 10).toString(16)),
                    (e += ("000" + parseInt(t.shift(), 10).toString(16)).slice(-4))
                  );
              } else if (e == "vp9") return "vp09.00.41.08";
              return e;
            }
            function FC(e) {
              e.textStreams = e.textStreams.filter(function (t) {
                return ((t = Rt(t.mimeType, t.codecs)), Za(t));
              });
            }
            function BC(e) {
              var t, n, r, i, s, o, u;
              return F(function (l) {
                switch (l.g) {
                  case 1:
                    ((t = []), (n = x(e.imageStreams)), (r = n.next()));
                  case 2:
                    if (r.done) {
                      l.A(4);
                      break;
                    }
                    if (
                      ((i = r.value),
                      (s = i.mimeType),
                      s == "application/mp4" && i.codecs == "mjpg" && (s = "image/jpg"),
                      Ac.has(s))
                    ) {
                      l.A(5);
                      break;
                    }
                    if (((o = GC.get(s)), !o)) {
                      (Ac.set(s, !1), l.A(5));
                      break;
                    }
                    return E(l, jC(o), 7);
                  case 7:
                    ((u = l.h), Ac.set(s, u));
                  case 5:
                    (Ac.get(s) && t.push(i), (r = n.next()), l.A(2));
                    break;
                  case 4:
                    ((e.imageStreams = t), re(l));
                }
              });
            }
            function jC(e) {
              return new Promise(function (t) {
                var n = new Image();
                ((n.src = e),
                  "decode" in n
                    ? n
                        .decode()
                        .then(function () {
                          t(!0);
                        })
                        .catch(function () {
                          t(!1);
                        })
                    : (n.onload = n.onerror =
                        function () {
                          t(n.height === 2);
                        }));
              });
            }
            function Us(e) {
              var t = e.audio,
                n = e.video,
                r = t ? t.mimeType : null,
                i = n ? n.mimeType : null,
                s = t ? t.codecs : null,
                o = n ? n.codecs : null,
                u = t ? t.groupId : null,
                l = [];
              (n && l.push(n.mimeType), t && l.push(t.mimeType), (l = l[0] || null));
              var p = [];
              (t && p.push(t.kind), n && p.push(n.kind), (p = p[0] || null));
              var m = new Set();
              if (t) for (var y = x(t.roles), v = y.next(); !v.done; v = y.next()) m.add(v.value);
              if (n) for (y = x(n.roles), v = y.next(); !v.done; v = y.next()) m.add(v.value);
              if (
                ((e = {
                  id: e.id,
                  active: !1,
                  type: "variant",
                  bandwidth: e.bandwidth,
                  language: e.language,
                  label: null,
                  videoLabel: null,
                  kind: p,
                  width: null,
                  height: null,
                  frameRate: null,
                  pixelAspectRatio: null,
                  hdr: null,
                  colorGamut: null,
                  videoLayout: null,
                  mimeType: l,
                  audioMimeType: r,
                  videoMimeType: i,
                  codecs: "",
                  audioCodec: s,
                  videoCodec: o,
                  primary: e.primary,
                  roles: Array.from(m),
                  audioRoles: null,
                  videoRoles: null,
                  forced: !1,
                  videoId: null,
                  audioId: null,
                  audioGroupId: u,
                  channelsCount: null,
                  audioSamplingRate: null,
                  spatialAudio: !1,
                  tilesLayout: null,
                  audioBandwidth: null,
                  videoBandwidth: null,
                  originalVideoId: null,
                  originalAudioId: null,
                  originalTextId: null,
                  originalImageId: null,
                  accessibilityPurpose: null,
                  originalLanguage: null,
                }),
                n &&
                  ((e.videoId = n.id),
                  (e.originalVideoId = n.originalId),
                  (e.width = n.width || null),
                  (e.height = n.height || null),
                  (e.frameRate = n.frameRate || null),
                  (e.pixelAspectRatio = n.pixelAspectRatio || null),
                  (e.videoBandwidth = n.bandwidth || null),
                  (e.hdr = n.hdr || null),
                  (e.colorGamut = n.colorGamut || null),
                  (e.videoLayout = n.videoLayout || null),
                  (e.videoRoles = n.roles),
                  (e.videoLabel = n.label),
                  (r = n.dependencyStream) &&
                    ((e.width = r.width || e.width),
                    (e.height = r.height || e.height),
                    (e.videoCodec = r.codecs || e.videoCodec),
                    (e.pixelAspectRatio = r.pixelAspectRatio || e.pixelAspectRatio),
                    e.videoBandwidth && r.bandwidth && (e.videoBandwidth += r.bandwidth)),
                  o.includes(",")))
              ) {
                ((e.channelsCount = n.channelsCount),
                  (e.audioSamplingRate = n.audioSamplingRate),
                  (e.spatialAudio = n.spatialAudio),
                  (e.originalLanguage = n.originalLanguage),
                  (e.audioMimeType = i),
                  (i = o.split(",")));
                try {
                  ((e.videoCodec = ho("video", i)), (e.audioCodec = ho("audio", i)));
                } catch (w) {}
              }
              return (
                t &&
                  ((e.audioId = t.id),
                  (e.originalAudioId = t.originalId),
                  (e.channelsCount = t.channelsCount),
                  (e.audioSamplingRate = t.audioSamplingRate),
                  (e.audioBandwidth = t.bandwidth || null),
                  (e.spatialAudio = t.spatialAudio),
                  (e.label = t.label),
                  (e.audioRoles = t.roles),
                  (e.accessibilityPurpose = t.accessibilityPurpose),
                  (e.originalLanguage = t.originalLanguage),
                  (i = t.dependencyStream)) &&
                  ((e.audioCodec = i.codecs || e.audioCodec),
                  e.audioBandwidth && i.bandwidth && (e.audioBandwidth += i.bandwidth)),
                n &&
                  !e.videoBandwidth &&
                  (t
                    ? e.audioBandwidth && (e.videoBandwidth = e.bandwidth - e.audioBandwidth)
                    : (e.videoBandwidth = e.bandwidth)),
                t &&
                  !e.audioBandwidth &&
                  (n
                    ? e.videoBandwidth && (e.audioBandwidth = e.bandwidth - e.videoBandwidth)
                    : (e.audioBandwidth = e.bandwidth)),
                (t = []),
                e.videoCodec && t.push(e.videoCodec),
                e.audioCodec && t.push(e.audioCodec),
                (e.codecs = t.join(", ")),
                e
              );
            }
            function Fs(e) {
              return {
                id: e.id,
                active: !1,
                type: Ve,
                bandwidth: e.bandwidth || 0,
                language: e.language,
                label: e.label,
                kind: e.kind || null,
                mimeType: e.mimeType,
                codecs: e.codecs || null,
                primary: e.primary,
                roles: e.roles,
                accessibilityPurpose: e.accessibilityPurpose,
                forced: e.forced,
                originalTextId: e.originalId,
                originalLanguage: e.originalLanguage,
              };
            }
            function up(e) {
              var t = e.width || null,
                n = e.height || null,
                r = null;
              e.segmentIndex && (r = Qr(e.segmentIndex));
              var i = e.tilesLayout;
              return (
                r && (i = r.tilesLayout || i),
                i && t != null && (t /= Number(i.split("x")[0])),
                i && n != null && (n /= Number(i.split("x")[1])),
                {
                  id: e.id,
                  type: "image",
                  bandwidth: e.bandwidth || 0,
                  width: t,
                  height: n,
                  mimeType: e.mimeType,
                  codecs: e.codecs || null,
                  tilesLayout: i || null,
                  originalImageId: e.originalId,
                }
              );
            }
            function xc(e) {
              return (e.__shaka_id || (e.__shaka_id = HC++), e.__shaka_id);
            }
            function _0(e) {
              var t = {
                id: xc(e),
                active: e.mode != "disabled",
                type: Ve,
                bandwidth: 0,
                language: nt(e.language || "und"),
                label: e.label,
                kind: e.kind,
                mimeType: null,
                codecs: null,
                primary: !1,
                roles: [],
                accessibilityPurpose: null,
                forced: e.kind == "forced",
                originalTextId: e.id,
                originalLanguage: e.language,
              };
              return (
                e.kind == "captions" && (t.mimeType = "unknown"),
                e.kind == "subtitles" && (t.mimeType = "text/vtt"),
                e.kind && (t.roles = [e.kind]),
                t
              );
            }
            function Tc(e, t) {
              var n = e ? e.language : null;
              if (
                ((n = {
                  id: xc(e || t),
                  active: e ? e.enabled : t.selected,
                  type: "variant",
                  bandwidth: 0,
                  language: nt(n || "und"),
                  label: e ? e.label : null,
                  videoLabel: null,
                  kind: e ? e.kind : null,
                  width: null,
                  height: null,
                  frameRate: null,
                  pixelAspectRatio: null,
                  hdr: null,
                  colorGamut: null,
                  videoLayout: null,
                  mimeType: null,
                  audioMimeType: null,
                  videoMimeType: null,
                  codecs: null,
                  audioCodec: null,
                  videoCodec: null,
                  primary: e ? e.kind == "main" : !1,
                  roles: [],
                  forced: !1,
                  audioRoles: null,
                  videoRoles: null,
                  videoId: null,
                  audioId: null,
                  audioGroupId: null,
                  channelsCount: null,
                  audioSamplingRate: null,
                  spatialAudio: !1,
                  tilesLayout: null,
                  audioBandwidth: null,
                  videoBandwidth: null,
                  originalVideoId: t ? t.id : null,
                  originalAudioId: e ? e.id : null,
                  originalTextId: null,
                  originalImageId: null,
                  accessibilityPurpose: null,
                  originalLanguage: n,
                }),
                e && e.kind && ((n.roles = [e.kind]), (n.audioRoles = [e.kind])),
                e &&
                  e.configuration &&
                  (e.configuration.codec &&
                    ((n.audioCodec = e.configuration.codec), (n.codecs = n.audioCodec)),
                  e.configuration.bitrate &&
                    ((n.audioBandwidth = e.configuration.bitrate), (n.bandwidth += n.audioBandwidth)),
                  e.configuration.sampleRate && (n.audioSamplingRate = e.configuration.sampleRate),
                  e.configuration.numberOfChannels && (n.channelsCount = e.configuration.numberOfChannels)),
                t &&
                  t.configuration &&
                  (t.configuration.codec &&
                    ((n.videoCodec = t.configuration.codec),
                    (n.codecs = n.codecs ? n.codecs + ("," + n.videoCodec) : n.videoCodec)),
                  t.configuration.bitrate &&
                    ((n.videoBandwidth = t.configuration.bitrate), (n.bandwidth += n.videoBandwidth)),
                  t.configuration.framerate && (n.frameRate = t.configuration.framerate),
                  t.configuration.width && (n.width = t.configuration.width),
                  t.configuration.height && (n.height = t.configuration.height),
                  t.configuration.colorSpace && t.configuration.colorSpace.transfer))
              )
                switch (t.configuration.colorSpace.transfer) {
                  case "pq":
                    n.hdr = "PQ";
                    break;
                  case "hlg":
                    n.hdr = "HLG";
                    break;
                  case "bt709":
                    n.hdr = "SDR";
                }
              return n;
            }
            function iu(e) {
              return e.allowedByApplication && e.allowedByKeySystem && e.disabledUntilTime == 0;
            }
            function wc(e) {
              return e.filter(function (t) {
                return iu(t);
              });
            }
            function So(e, t, n, r) {
              var i = e,
                s = e.filter(function (l) {
                  return l.primary;
                });
              s.length && (i = s);
              var o = i.length ? i[0].language : "";
              if (
                ((i = i.filter(function (l) {
                  return l.language == o;
                })),
                t)
              ) {
                var u = yc(
                  nt(t),
                  e.map(function (l) {
                    return l.language;
                  }),
                );
                u &&
                  (i = e.filter(function (l) {
                    return nt(l.language) == u;
                  }));
              }
              if (
                ((i = i.filter(function (l) {
                  return l.forced == r;
                })),
                n)
              ) {
                if (((e = P0(i, n)), e.length)) return e;
              } else if (
                ((e = i.filter(function (l) {
                  return l.roles.length == 0;
                })),
                e.length)
              )
                return e;
              return (
                (e = i
                  .map(function (l) {
                    return l.roles;
                  })
                  .reduce(_C, [])),
                e.length ? P0(i, e[0]) : i
              );
            }
            function P0(e, t) {
              return e.filter(function (n) {
                return n.roles.includes(t);
              });
            }
            function VC(e) {
              var t = [];
              return (e.audio && t.push(e.audio), e.video && t.push(e.video), t);
            }
            function D0(e, t) {
              t.length &&
                ((t = t
                  .filter(function (n) {
                    return hn(e.codecs) == hn(n.codecs);
                  })
                  .sort(function (n, r) {
                    return n.bandwidth && r.bandwidth && n.bandwidth != r.bandwidth
                      ? n.bandwidth - r.bandwidth
                      : (n.width || 0) - (r.width || 0);
                  })),
                (e.trickModeVideo = t[0]),
                t.length > 1 &&
                  (t = t.find(function (n) {
                    return e.width == n.width && e.height == n.height;
                  }))) &&
                (e.trickModeVideo = t);
            }
            function L0(e) {
              return e.type == "audio"
                ? "type=audio codecs=" +
                    e.codecs +
                    " bandwidth=" +
                    e.bandwidth +
                    " channelsCount=" +
                    e.channelsCount +
                    " audioSamplingRate=" +
                    e.audioSamplingRate
                : e.type == "video"
                  ? "type=video codecs=" +
                    e.codecs +
                    " bandwidth=" +
                    e.bandwidth +
                    " frameRate=" +
                    e.frameRate +
                    " width=" +
                    e.width +
                    " height=" +
                    e.height
                  : "unexpected stream type";
            }
            function b0(e, t, n) {
              if (n.autoShowText == 0) return !1;
              if (n.autoShowText == 1) return !0;
              var r = nt(n.preferredTextLanguage);
              return (
                (t = nt(t.language)),
                n.autoShowText == 2
                  ? wo(t, r)
                  : n.autoShowText == 3
                    ? e
                      ? ((e = nt(e.language)), wo(t, r) && !wo(e, t))
                      : !1
                    : (Be("Invalid autoShowText setting!"), !1)
              );
            }
            function N0(e) {
              var t = {
                id: 0,
                language: "und",
                disabledUntilTime: 0,
                primary: !1,
                audio: null,
                video: null,
                bandwidth: 100,
                allowedByApplication: !0,
                allowedByKeySystem: !0,
                decodingInfos: [],
              };
              e = x(e);
              for (var n = e.next(); !n.done; n = e.next()) {
                n = n.value;
                var r = {
                  id: 0,
                  originalId: null,
                  groupId: null,
                  createSegmentIndex: function () {
                    return Promise.resolve();
                  },
                  segmentIndex: null,
                  mimeType: n ? Qn(n) : "",
                  codecs: n ? Vn(n) : "",
                  encrypted: !0,
                  drmInfos: [],
                  keyIds: new Set(),
                  language: "und",
                  originalLanguage: null,
                  label: null,
                  type: "video",
                  primary: !1,
                  trickModeVideo: null,
                  dependencyStream: null,
                  emsgSchemeIdUris: null,
                  roles: [],
                  forced: !1,
                  channelsCount: null,
                  audioSamplingRate: null,
                  spatialAudio: !1,
                  closedCaptions: null,
                  accessibilityPurpose: null,
                  external: !1,
                  fastSwitching: !1,
                  fullMimeTypes: new Set(),
                  isAudioMuxedInVideo: !1,
                  baseOriginalId: null,
                };
                (r.fullMimeTypes.add(Rt(r.mimeType, r.codecs)),
                  n.startsWith("audio/") ? ((r.type = "audio"), (t.audio = r)) : (t.video = r));
              }
              return t;
            }
            (de("shaka.util.StreamUtils", E0), (E0.meetsRestrictions = vc));
            var Sc = new Map(),
              HC = 0,
              Ac = new Map()
                .set("image/svg+xml", !0)
                .set("image/png", !0)
                .set("image/jpeg", !0)
                .set("image/jpg", !0),
              GC = new Map()
                .set(
                  "image/webp",
                  "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",
                )
                .set(
                  "image/avif",
                  "data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",
                );
            function Ct() {
              var e = this;
              ((this.H = null),
                (this.G = !1),
                (this.u = new ur()),
                (this.j = new tt()),
                navigator.connection &&
                  navigator.connection.addEventListener &&
                  this.j.D(navigator.connection, "change", function () {
                    e.g.useNetworkInformation &&
                      navigator.onLine &&
                      ((e.u = new ur()), e.g && e.u.configure(e.g.advanced), e.trySuggestStreams());
                  }),
                (this.l = []),
                (this.I = 1),
                (this.J = !1),
                (this.h = this.o = this.g = this.B = null),
                (this.m = new He(function () {
                  if (e.G && (e.g.restrictToElementSize || e.g.restrictToScreenSize)) {
                    var t = e.chooseVariant();
                    t && e.H(t, e.g.clearBufferSwitch, e.g.safeMarginSwitch);
                  }
                })),
                (this.C = g),
                "documentPictureInPicture" in g &&
                  this.j.D(g.documentPictureInPicture, "enter", function () {
                    ((e.C = g.documentPictureInPicture.window),
                      e.m && e.m.Jb(),
                      e.j.Aa(e.C, "pagehide", function () {
                        ((e.C = g), e.m && e.m.Jb());
                      }));
                  }),
                (this.F = this.i = null));
            }
            ((h = Ct.prototype),
              (h.stop = function () {
                ((this.H = null),
                  (this.G = !1),
                  (this.l = []),
                  (this.I = 1),
                  (this.o = this.B = null),
                  this.h && (this.h.disconnect(), (this.h = null)),
                  this.m && this.m.stop(),
                  (this.F = this.i = null));
              }),
              (h.release = function () {
                (this.stop(), this.j.release(), (this.m = null));
              }),
              (h.init = function (e) {
                this.H = e;
              }),
              (h.chooseVariant = function (e) {
                e = e === void 0 ? !1 : e;
                var t = 1 / 0,
                  n = 1 / 0;
                if (
                  (this.g.restrictToScreenSize &&
                    ((n = this.g.ignoreDevicePixelRatio ? 1 : this.C.devicePixelRatio),
                    (t = this.C.screen.height * n),
                    (n *= this.C.screen.width)),
                  this.h && this.g.restrictToElementSize)
                ) {
                  var r = this.g.ignoreDevicePixelRatio ? 1 : this.C.devicePixelRatio,
                    i = this.o.clientHeight,
                    s = this.o.clientWidth;
                  (this.i &&
                    document.pictureInPictureElement &&
                    document.pictureInPictureElement == this.o &&
                    ((i = this.i.height), (s = this.i.width)),
                    (t = Math.min(t, i * r)),
                    (n = Math.min(n, s * r)));
                }
                if (
                  ((i = this.l.filter(function (p) {
                    return p && !((p.audio && p.audio.fastSwitching) || (p.video && p.video.fastSwitching));
                  })),
                  i.length || (i = this.l),
                  (r = i),
                  e &&
                    i.length != this.l.length &&
                    (r = this.l.filter(function (p) {
                      return (
                        p && !!((p.audio && p.audio.fastSwitching) || (p.video && p.video.fastSwitching))
                      );
                    })),
                  (e = lp(this, this.g.restrictions, r, 1 / 0, 1 / 0)),
                  t != 1 / 0 || n != 1 / 0)
                ) {
                  for (e = zC(e), e = x(e), i = e.next(); !i.done; i = e.next())
                    if (((i = i.value), i.height >= t && i.width >= n)) {
                      ((t = i.height), (n = i.width));
                      break;
                    }
                  e = lp(this, this.g.restrictions, r, t, n);
                }
                for (
                  t = this.getBandwidthEstimate(),
                    r.length && !e.length && ((e = lp(this, null, r, 1 / 0, 1 / 0)), (e = [e[0]])),
                    n = e[0] || null,
                    r = 0;
                  r < e.length;
                  r++
                ) {
                  i = e[r];
                  var o = isNaN(this.I) ? 1 : Math.abs(this.I);
                  s = (o * i.bandwidth) / this.g.bandwidthDowngradeTarget;
                  for (var u = { bandwidth: 1 / 0 }, l = r + 1; l < e.length; l++)
                    if (i.bandwidth != e[l].bandwidth) {
                      u = e[l];
                      break;
                    }
                  ((o = (o * u.bandwidth) / this.g.bandwidthUpgradeTarget),
                    n &&
                      i &&
                      t >= s &&
                      t <= o &&
                      (n.bandwidth != i.bandwidth ||
                        (n.bandwidth == i.bandwidth &&
                          n.video &&
                          i.video &&
                          (n.video.width < i.video.width || n.video.height < i.video.height))) &&
                      (n = i));
                }
                return ((this.B = Date.now()), n);
              }),
              (h.enable = function () {
                ((this.G = !0), this.l.length && this.trySuggestStreams());
              }),
              (h.disable = function () {
                this.G = !1;
              }),
              (h.segmentDownloaded = function (e, t, n, r) {
                var i = e;
                (this.g.removeLatencyFromFirstPacketTime &&
                  r &&
                  r.packetNumber === 1 &&
                  r.timeToFirstByte &&
                  (i = e - r.timeToFirstByte),
                  i >= this.g.cacheLoadThreshold && this.u.sample(i, t),
                  n && this.B != null && this.G && O0(this));
              }),
              (h.trySuggestStreams = function () {
                this.G && ((this.B = Date.now()), O0(this, !0));
              }),
              (h.getBandwidthEstimate = function () {
                var e = this.g.defaultBandwidthEstimate;
                return (
                  navigator.connection &&
                    navigator.connection.downlink &&
                    this.g.useNetworkInformation &&
                    (e = navigator.connection.downlink * 1e6),
                  navigator.connection &&
                  navigator.connection.downlink &&
                  this.g.useNetworkInformation &&
                  this.g.preferNetworkInformationBandwidth
                    ? e
                    : ((e = this.u.getBandwidthEstimate(e)), this.F ? this.F.getBandwidthEstimate(e) : e)
                );
              }),
              (h.setVariants = function (e) {
                return Is(e, this.l) ? !1 : ((this.l = e), !0);
              }),
              (h.playbackRateChanged = function (e) {
                this.I = e;
              }),
              (h.setMediaElement = function (e) {
                function t() {
                  n.m.ka(XC);
                }
                var n = this;
                ((this.o = e),
                  this.h && (this.h.disconnect(), (this.h = null)),
                  this.o &&
                    "ResizeObserver" in g &&
                    ((this.h = new ResizeObserver(t)), this.h.observe(this.o)),
                  this.j.D(e, "enterpictureinpicture", function (r) {
                    r.pictureInPictureWindow && ((n.i = r.pictureInPictureWindow), n.j.D(n.i, "resize", t));
                  }),
                  this.j.D(e, "leavepictureinpicture", function () {
                    (n.i && n.j.Ma(n.i, "resize", t), (n.i = null));
                  }));
              }),
              (h.setCmsdManager = function (e) {
                this.F = e;
              }),
              (h.configure = function (e) {
                ((this.g = e), this.u && this.g && this.u.configure(this.g.advanced));
              }));
            function O0(e, t) {
              if (t === void 0 || !t) {
                if (!e.J) {
                  if (((t = e.u), !(t.g >= t.i))) return;
                  ((e.J = !0), (e.B -= (e.g.switchInterval - e.g.minTimeToSwitch) * 1e3));
                }
                if (Date.now() - e.B < e.g.switchInterval * 1e3) return;
              }
              ((t = e.chooseVariant()),
                e.getBandwidthEstimate(),
                t && e.H(t, e.g.clearBufferSwitch, e.g.safeMarginSwitch));
            }
            function lp(e, t, n, r, i) {
              if (e.F) {
                var s = e.F.ji();
                s &&
                  (n = n.filter(function (o) {
                    return o.bandwidth && s ? o.bandwidth <= s : !0;
                  }));
              }
              return (
                t &&
                  (n = n.filter(function (o) {
                    return vc(o, t, { width: i, height: r });
                  })),
                n.sort(function (o, u) {
                  return o.bandwidth - u.bandwidth;
                })
              );
            }
            function zC(e) {
              var t = [];
              e = x(e);
              for (var n = e.next(); !n.done; n = e.next())
                (n = n.value) &&
                  (n = n.video) &&
                  n.height &&
                  n.width &&
                  t.push({ height: n.height, width: n.width });
              return t.sort(function (r, i) {
                return r.width - i.width;
              });
            }
            (de("shaka.abr.SimpleAbrManager", Ct),
              (Ct.prototype.configure = Ct.prototype.configure),
              (Ct.prototype.setCmsdManager = Ct.prototype.setCmsdManager),
              (Ct.prototype.setMediaElement = Ct.prototype.setMediaElement),
              (Ct.prototype.playbackRateChanged = Ct.prototype.playbackRateChanged),
              (Ct.prototype.setVariants = Ct.prototype.setVariants),
              (Ct.prototype.getBandwidthEstimate = Ct.prototype.getBandwidthEstimate),
              (Ct.prototype.trySuggestStreams = Ct.prototype.trySuggestStreams),
              (Ct.prototype.segmentDownloaded = Ct.prototype.segmentDownloaded),
              (Ct.prototype.disable = Ct.prototype.disable),
              (Ct.prototype.enable = Ct.prototype.enable),
              (Ct.prototype.chooseVariant = Ct.prototype.chooseVariant),
              (Ct.prototype.init = Ct.prototype.init),
              (Ct.prototype.release = Ct.prototype.release),
              (Ct.prototype.stop = Ct.prototype.stop));
            var XC = 1;
            function U0(e, t) {
              var n = jr();
              ((this.l = e.maxAttempts == null ? n.maxAttempts : e.maxAttempts),
                (this.j = e.baseDelay == null ? n.baseDelay : e.baseDelay),
                (this.o = e.fuzzFactor == null ? n.fuzzFactor : e.fuzzFactor),
                (this.m = e.backoffFactor == null ? n.backoffFactor : e.backoffFactor),
                (this.g = 0),
                (this.h = this.j),
                (this.i = t === void 0 ? !1 : t) && (this.g = 1));
            }
            function F0(e) {
              var t, n;
              return F(function (r) {
                if (r.g == 1) {
                  if (e.g >= e.l)
                    if (e.i) ((e.g = 1), (e.h = e.j));
                    else throw new H(2, 7, 1010);
                  return (
                    (t = e.g),
                    e.g++,
                    t == 0
                      ? r.return()
                      : ((n = e.h * (1 + (Math.random() * 2 - 1) * e.o)),
                        E(
                          r,
                          new Promise(function (i) {
                            new He(i).ka(n / 1e3);
                          }),
                          2,
                        ))
                  );
                }
                ((e.h *= e.m), re(r));
              });
            }
            function jr() {
              return {
                maxAttempts: 2,
                baseDelay: 1e3,
                backoffFactor: 2,
                fuzzFactor: 0.5,
                timeout: 3e4,
                stallTimeout: 5e3,
                connectionTimeout: 1e4,
              };
            }
            function lt() {
              var e,
                t,
                n = new Promise(function (r, i) {
                  ((e = r), (t = i));
                });
              return ((n.resolve = e), (n.reject = t), n);
            }
            ((lt.prototype.resolve = function () {}), (lt.prototype.reject = function () {}));
            function _t(e, t) {
              ((this.promise = e), (this.i = t), (this.g = null));
            }
            function ts(e) {
              return new _t(Promise.reject(e), function () {
                return Promise.resolve();
              });
            }
            function cp() {
              var e = Promise.reject(new H(2, 7, 7001));
              return (
                e.catch(function () {}),
                new _t(e, function () {
                  return Promise.resolve();
                })
              );
            }
            function Ao(e) {
              return new _t(Promise.resolve(e), function () {
                return Promise.resolve();
              });
            }
            function B0(e) {
              return new _t(e, function () {
                return e.catch(function () {});
              });
            }
            _t.prototype.abort = function () {
              return (this.g || (this.g = this.i()), this.g);
            };
            function j0(e) {
              return new _t(
                Promise.all(
                  e.map(function (t) {
                    return t.promise;
                  }),
                ),
                function () {
                  return Promise.all(
                    e.map(function (t) {
                      return t.abort();
                    }),
                  );
                },
              );
            }
            ((_t.prototype.finally = function (e) {
              return (
                this.promise.then(
                  function () {
                    return e(!0);
                  },
                  function () {
                    return e(!1);
                  },
                ),
                this
              );
            }),
              (_t.prototype.Xa = function (e, t) {
                function n(u) {
                  return function (l) {
                    if (i.g && u) s.reject(o);
                    else {
                      var p = u ? e : t;
                      p ? (r = WC(p, l, s)) : (u ? s.resolve : s.reject)(l);
                    }
                  };
                }
                function r() {
                  return (s.reject(o), i.abort());
                }
                var i = this,
                  s = new lt();
                s.catch(function () {});
                var o = new H(2, 7, 7001);
                return (
                  this.promise.then(n(!0), n(!1)),
                  new _t(s, function () {
                    return r();
                  })
                );
              }));
            function WC(e, t, n) {
              try {
                var r = e(t);
                return r && r.promise && r.abort
                  ? (n.resolve(r.promise),
                    function () {
                      return r.abort();
                    })
                  : (n.resolve(r),
                    function () {
                      return Promise.resolve(r).then(
                        function () {},
                        function () {},
                      );
                    });
              } catch (i) {
                return (
                  n.reject(i),
                  function () {
                    return Promise.resolve();
                  }
                );
              }
            }
            (D.Object.defineProperties(_t.prototype, {
              aborted: {
                configurable: !0,
                enumerable: !0,
                get: function () {
                  return this.g !== null;
                },
              },
            }),
              de("shaka.util.AbortableOperation", _t),
              (_t.prototype.chain = _t.prototype.Xa),
              (_t.prototype.finally = _t.prototype.finally),
              (_t.all = j0),
              (_t.prototype.abort = _t.prototype.abort),
              (_t.notAbortable = B0),
              (_t.completed = Ao),
              (_t.aborted = cp),
              (_t.failed = ts));
            function Ae(e, t) {
              if (t)
                if (t instanceof Map)
                  for (var n = x(t.keys()), r = n.next(); !r.done; r = n.next())
                    ((r = r.value),
                      Object.defineProperty(this, r, { value: t.get(r), writable: !0, enumerable: !0 }));
                else
                  for (n in t) Object.defineProperty(this, n, { value: t[n], writable: !0, enumerable: !0 });
              ((this.defaultPrevented = this.cancelable = this.bubbles = !1),
                (this.timeStamp = g.performance && g.performance.now ? g.performance.now() : Date.now()),
                (this.type = e),
                (this.isTrusted = !1),
                (this.target = this.currentTarget = null),
                (this.g = !1));
            }
            function V0(e) {
              var t = new Ae(e.type),
                n;
              for (n in e) Object.defineProperty(t, n, { value: e[n], writable: !0, enumerable: !0 });
              return t;
            }
            ((Ae.prototype.preventDefault = function () {
              this.cancelable && (this.defaultPrevented = !0);
            }),
              (Ae.prototype.stopImmediatePropagation = function () {
                this.g = !0;
              }),
              (Ae.prototype.stopPropagation = function () {}),
              de("shaka.util.FakeEvent", Ae));
            var Ec = {
              wl: "abrstatuschanged",
              xl: "adaptation",
              yl: "audiotrackchanged",
              zl: "audiotrackschanged",
              Al: "boundarycrossed",
              Bl: "buffering",
              Cl: "canupdatestarttime",
              Dl: "complete",
              El: "currentitemchanged",
              Fl: "downloadcompleted",
              Gl: "downloadfailed",
              Hl: "downloadheadersreceived",
              Il: "drmsessionupdate",
              Jl: "emsg",
              Pl: "itemsinserted",
              Ql: "itemsremoved",
              gm: "prft",
              Error: "error",
              Kl: "expirationupdated",
              Ll: "firstquartile",
              Ml: "gapjumped",
              Rl: "keystatuschanged",
              Ul: "loaded",
              Vl: "loading",
              Xl: "manifestparsed",
              Yl: "manifestupdated",
              Zl: "mediaqualitychanged",
              $l: "mediasourcerecovered",
              am: "metadataadded",
              Metadata: "metadata",
              bm: "midpoint",
              dm: "nospatialvideoinfo",
              fm: "onstatechange",
              hm: "ratechange",
              lm: "segmentappended",
              nm: "sessiondata",
              om: "spatialvideoinfo",
              pm: "stalldetected",
              qm: "started",
              rm: "statechanged",
              sm: "streaming",
              tm: "textchanged",
              um: "texttrackvisibility",
              vm: "thirdquartile",
              wm: "timelineregionadded",
              xm: "timelineregionenter",
              ym: "timelineregionexit",
              zm: "trackschanged",
              Bm: "unloading",
              Dm: "variantchanged",
            };
            function ut() {
              ((this.ab = new $l()), (this.Je = this));
            }
            ((ut.prototype.addEventListener = function (e, t) {
              this.ab && this.ab.push(e, t);
            }),
              (ut.prototype.removeEventListener = function (e, t) {
                this.ab && this.ab.remove(e, t);
              }),
              (ut.prototype.dispatchEvent = function (e) {
                if (!this.ab) return !0;
                var t = this.ab.get(e.type) || [],
                  n = this.ab.get("All");
                for (n && (t = t.concat(n)), t = x(t), n = t.next(); !n.done; n = t.next()) {
                  ((n = n.value), (e.target = this.Je), (e.currentTarget = this.Je));
                  try {
                    n.handleEvent ? n.handleEvent(e) : n.call(this, e);
                  } catch (r) {}
                  if (e.g) break;
                }
                return e.defaultPrevented;
              }),
              (ut.prototype.release = function () {
                this.ab = null;
              }));
            function Eo() {
              this.g = [];
            }
            function Bs(e, t) {
              e.g.push(
                t.finally(function () {
                  Or(e.g, t);
                }),
              );
            }
            Eo.prototype.destroy = function () {
              for (var e = [], t = x(this.g), n = t.next(); !n.done; n = t.next())
                ((n = n.value), n.promise.catch(function () {}), e.push(n.abort()));
              return ((this.g = []), Promise.all(e));
            };
            function xt(e, t, n, r, i, s, o) {
              (ut.call(this),
                (this.i = null),
                (this.j = !1),
                (this.u = new Eo()),
                (this.g = new Set()),
                (this.h = new Set()),
                (this.o = e || null),
                (this.m = t || null),
                (this.B = n || null),
                (this.C = r || null),
                (this.F = i || null),
                (this.H = s || null),
                (this.G = o || null),
                (this.l = new Map()));
            }
            (q(xt, ut),
              (h = xt.prototype),
              (h.configure = function (e) {
                this.i = e;
              }));
            function Ei(e, t, n, r) {
              ((r = r === void 0 ? !1 : r), (n = n || W0));
              var i = Cc.get(e);
              (!i || n >= i.priority) && Cc.set(e, { priority: n, Bf: t, Ik: r });
            }
            function H0(e, t) {
              for (var n = x(e.g), r = n.next(); !r.done; r = n.next()) t.g.add(r.value);
              for (e = x(e.h), n = e.next(); !n.done; n = e.next()) t.h.add(n.value);
            }
            ((h.Lk = function (e) {
              this.g.add(e);
            }),
              (h.kl = function (e) {
                this.g.delete(e);
              }),
              (h.vj = function () {
                this.g.clear();
              }),
              (h.Mk = function (e) {
                this.h.add(e);
              }),
              (h.ll = function (e) {
                this.h.delete(e);
              }),
              (h.wj = function () {
                this.h.clear();
              }),
              (h.Wh = function () {
                this.l.clear();
              }));
            function Ut(e, t, n) {
              return {
                uris: e,
                method: "GET",
                body: null,
                headers: {},
                allowCrossSiteCredentials: !1,
                retryParameters: t,
                licenseRequestType: null,
                sessionId: null,
                drmInfo: null,
                initData: null,
                initDataType: null,
                streamDataCallback: n === void 0 ? null : n,
              };
            }
            ((h.destroy = function () {
              return (
                (this.j = !0),
                this.g.clear(),
                this.h.clear(),
                this.l.clear(),
                ut.prototype.release.call(this),
                this.u.destroy()
              );
            }),
              (h.request = function (e, t, n) {
                var r = this,
                  i = new X0();
                if (this.j) {
                  var s = Promise.reject(new H(2, 7, 7001));
                  return (
                    s.catch(function () {}),
                    new Ic(
                      s,
                      function () {
                        return Promise.resolve();
                      },
                      i,
                    )
                  );
                }
                ((t.method = t.method || "GET"),
                  (t.headers = t.headers || {}),
                  (t.retryParameters = t.retryParameters ? Fr(t.retryParameters) : jr()),
                  (t.uris = Fr(t.uris)),
                  (s = KC(this, e, t, n)));
                var o = s.Xa(function () {
                    return G0(r, e, t, n, new U0(t.retryParameters, !1), 0, null, i);
                  }),
                  u = o.Xa(function (v) {
                    return $C(r, e, v, n);
                  }),
                  l = Date.now(),
                  p = 0;
                s.promise.then(
                  function () {
                    p = Date.now() - l;
                  },
                  function () {},
                );
                var m = 0;
                o.promise.then(
                  function () {
                    m = Date.now();
                  },
                  function () {},
                );
                var y = u.Xa(
                  function (v) {
                    var w = Date.now() - m,
                      A = v.response;
                    return (
                      (A.timeMs += p),
                      (A.timeMs += w),
                      v.jk ||
                        !r.o ||
                        A.fromCache ||
                        t.method == "HEAD" ||
                        e != Er ||
                        r.o(A.timeMs, A.data.byteLength, z0(n), t, n),
                      r.G && r.G(e, A, n),
                      A
                    );
                  },
                  function (v) {
                    throw (v && (v.severity = 2), v);
                  },
                );
                return (
                  (s = new Ic(
                    y.promise,
                    function () {
                      return y.abort();
                    },
                    i,
                  )),
                  Bs(this.u, s),
                  s
                );
              }));
            function KC(e, t, n, r) {
              function i(u) {
                s = s.Xa(function () {
                  return (n.body && (n.body = wr(n.body)), u(t, n, r));
                });
              }
              var s = Ao(void 0);
              (e.F && i(e.F), (e = x(e.g)));
              for (var o = e.next(); !o.done; o = e.next()) i(o.value);
              return s.Xa(void 0, function (u) {
                throw u instanceof H && u.code == 7001 ? u : new H(2, 1, 1006, u);
              });
            }
            function G0(e, t, n, r, i, s, o, u) {
              (e.i.forceHTTP && (n.uris[s] = n.uris[s].replace("https://", "http://")),
                e.i.forceHTTPS && (n.uris[s] = n.uris[s].replace("http://", "https://")),
                s > 0 && e.H && e.H(t, r, n.uris[s], n.uris[s - 1]));
              var l = new Dt(n.uris[s]),
                p = l.fc,
                m = !1;
              (p || ((p = location.protocol), (p = p.slice(0, -1)), Yl(l, p), (n.uris[s] = l.toString())),
                (p = p.toLowerCase()));
              var y = (p = Cc.get(p)) ? p.Bf : null;
              if (!y) return ts(new H(2, 1, 1e3, l));
              var v = p.Ik;
              (l = e.l.get(l.Db)) && (n.headers["common-access-token"] = l);
              var w = null,
                A = null,
                I = !1,
                C = !1,
                k;
              return B0(F0(i))
                .Xa(function () {
                  if (e.j) return cp();
                  k = Date.now();
                  var R = 0;
                  n.requestStartTime = Date.now();
                  var L = y(
                    n.uris[s],
                    n,
                    t,
                    function (b, B, O) {
                      (w && w.stop(),
                        A && A.ka(G / 1e3),
                        e.o &&
                          t == Er &&
                          (R++, (n.packetNumber = R), e.o(b, B, z0(r), n, r), (m = !0), (u.g = O)));
                    },
                    function (b) {
                      ((C = !0), (n.timeToFirstByte = Date.now() - n.requestStartTime), e.m && e.m(b, n, t));
                    },
                    { minBytesForProgressEvents: e.i.minBytesForProgressEvents },
                  );
                  if (!v) return L;
                  var U = n.retryParameters.connectionTimeout;
                  U &&
                    ((w = new He(function () {
                      ((I = !0), L.abort());
                    })),
                    w.ka(U / 1e3));
                  var G = n.retryParameters.stallTimeout;
                  return (
                    G &&
                      (A = new He(function () {
                        ((I = !0), L.abort());
                      })),
                    L
                  );
                })
                .Xa(
                  function (R) {
                    (w && w.stop(), A && A.stop(), R.timeMs == null && (R.timeMs = Date.now() - k));
                    var L = R.headers["common-access-token"];
                    if (L) {
                      var U = new Dt(R.uri);
                      e.l.set(U.Db, L);
                    }
                    return (
                      (L = { response: R, jk: m }),
                      !C && e.m && e.m(R.headers, n, t),
                      e.B && e.B(n, R),
                      L
                    );
                  },
                  function (R) {
                    if ((w && w.stop(), A && A.stop(), e.C)) {
                      var L = null,
                        U = 0;
                      (R instanceof H && ((L = R), R.code == 1001 && (U = R.data[1])), e.C(n, L, U, I));
                    }
                    if (e.j) return cp();
                    if ((I && (R = new H(1, 1, 1003, n.uris[s], t)), R instanceof H)) {
                      if (R.code == 7001) throw R;
                      if (R.code == 1010) throw o;
                      if (R.severity == 1) {
                        if (
                          ((L = new Map().set("error", R)),
                          (L = new Ae("retry", L)),
                          (L.cancelable = !0),
                          e.dispatchEvent(L),
                          L.defaultPrevented)
                        )
                          throw R;
                        return ((s = (s + 1) % n.uris.length), G0(e, t, n, r, i, s, R, u));
                      }
                    }
                    throw R;
                  },
                );
            }
            function $C(e, t, n, r) {
              var i = Ao(void 0);
              e = x(e.h);
              for (var s = e.next(), o = {}; !s.done; o = { Pi: void 0 }, s = e.next())
                ((o.Pi = s.value),
                  (i = i.Xa(
                    (function (u) {
                      return function () {
                        var l = n.response;
                        return (l.data && (l.data = wr(l.data)), (0, u.Pi)(t, l, r));
                      };
                    })(o),
                  )));
              return i.Xa(
                function () {
                  return n;
                },
                function (u) {
                  var l = 2;
                  if (u instanceof H) {
                    if (u.code == 7001) throw u;
                    l = u.severity;
                  }
                  throw new H(l, 1, 1007, u);
                },
              );
            }
            function z0(e) {
              if (e) {
                var t = e.segment;
                if (((e = e.stream), t && e && e.fastSwitching && t.Xc)) return !1;
              }
              return !0;
            }
            (de("shaka.net.NetworkingEngine", xt),
              (xt.prototype.request = xt.prototype.request),
              (xt.prototype.destroy = xt.prototype.destroy),
              (xt.makeRequest = Ut),
              (xt.defaultRetryParameters = function () {
                return jr();
              }),
              (xt.prototype.clearCommonAccessTokenMap = xt.prototype.Wh),
              (xt.prototype.clearAllResponseFilters = xt.prototype.wj),
              (xt.prototype.unregisterResponseFilter = xt.prototype.ll),
              (xt.prototype.registerResponseFilter = xt.prototype.Mk),
              (xt.prototype.clearAllRequestFilters = xt.prototype.vj),
              (xt.prototype.unregisterRequestFilter = xt.prototype.kl),
              (xt.prototype.registerRequestFilter = xt.prototype.Lk),
              (xt.unregisterScheme = function (e) {
                Cc.delete(e);
              }),
              (xt.registerScheme = Ei),
              (xt.prototype.configure = xt.prototype.configure));
            function X0() {
              this.g = 0;
            }
            xt.NumBytesRemainingClass = X0;
            function Ic(e, t, n) {
              (_t.call(this, e, t), (this.h = n));
            }
            (q(Ic, _t), (xt.PendingRequest = Ic));
            var Er = 1;
            ((xt.RequestType = {
              MANIFEST: 0,
              SEGMENT: Er,
              LICENSE: 2,
              APP: 3,
              TIMING: 4,
              SERVER_CERTIFICATE: 5,
              KEY: 6,
              ADS: 7,
              CONTENT_STEERING: 8,
              CMCD: 9,
            }),
              (xt.AdvancedRequestType = {
                INIT_SEGMENT: 0,
                MEDIA_SEGMENT: 1,
                MEDIA_PLAYLIST: 2,
                MASTER_PLAYLIST: 3,
                MPD: 4,
                MSS: 5,
                MPD_PATCH: 6,
                MEDIATAILOR_SESSION_INFO: 7,
                MEDIATAILOR_TRACKING_INFO: 8,
                MEDIATAILOR_STATIC_RESOURCE: 9,
                MEDIATAILOR_TRACKING_EVENT: 10,
                INTERSTITIAL_ASSET_LIST: 11,
                INTERSTITIAL_AD_URL: 12,
              }));
            var W0 = 3;
            xt.PluginPriority = { FALLBACK: 1, PREFERRED: 2, APPLICATION: W0 };
            var Cc = new Map();
            function Io(e) {
              ((this.g = !1), (this.h = new lt()), (this.i = e));
            }
            Io.prototype.destroy = function () {
              var e = this;
              return this.g
                ? this.h
                : ((this.g = !0),
                  this.i().then(
                    function () {
                      e.h.resolve();
                    },
                    function () {
                      e.h.resolve();
                    },
                  ));
            };
            function ht(e, t) {
              if (e.g) throw t instanceof H && t.code == 7003 ? t : new H(2, 7, 7003, t);
            }
            function dp(e, t) {
              var n = [];
              e = x(e);
              for (var r = e.next(); !r.done; r = e.next()) n.push(t(r.value));
              return n;
            }
            function YC(e, t) {
              e = x(e);
              for (var n = e.next(); !n.done; n = e.next()) if (!t(n.value)) return !1;
              return !0;
            }
            function Co(e) {
              for (var t = new Map(), n = x(Object.keys(e)), r = n.next(); !r.done; r = n.next())
                ((r = r.value), t.set(r, e[r]));
              return t;
            }
            function fp(e) {
              var t = {};
              return (
                e.forEach(function (n, r) {
                  t[r] = n;
                }),
                t
              );
            }
            function yt(e, t) {
              ((this.h = Bn(e)), (this.i = t == K0), (this.g = 0));
            }
            ((h = yt.prototype),
              (h.Ia = function () {
                return this.g < this.h.byteLength;
              }),
              (h.Pa = function () {
                return this.g;
              }),
              (h.getLength = function () {
                return this.h.byteLength;
              }),
              (h.Y = function () {
                try {
                  var e = this.h.getUint8(this.g);
                  return ((this.g += 1), e);
                } catch (t) {
                  throw Ii();
                }
              }),
              (h.Ca = function () {
                try {
                  var e = this.h.getUint16(this.g, this.i);
                  return ((this.g += 2), e);
                } catch (t) {
                  throw Ii();
                }
              }),
              (h.U = function () {
                try {
                  var e = this.h.getUint32(this.g, this.i);
                  return ((this.g += 4), e);
                } catch (t) {
                  throw Ii();
                }
              }),
              (h.dh = function () {
                try {
                  var e = this.h.getInt32(this.g, this.i);
                  return ((this.g += 4), e);
                } catch (t) {
                  throw Ii();
                }
              }),
              (h.Ed = function () {
                try {
                  if (this.i)
                    var e = this.h.getUint32(this.g, !0),
                      t = this.h.getUint32(this.g + 4, !0);
                  else ((t = this.h.getUint32(this.g, !1)), (e = this.h.getUint32(this.g + 4, !1)));
                } catch (n) {
                  throw Ii();
                }
                if (t > 2097151) throw new H(2, 3, 3001);
                return ((this.g += 8), t * 4294967296 + e);
              }),
              (h.Tb = function (e, t) {
                if (this.g + e > this.h.byteLength) throw Ii();
                var n = Le(this.h, this.g, e);
                return ((this.g += e), t ? new Uint8Array(n) : n);
              }),
              (h.skip = function (e) {
                if (this.g + e > this.h.byteLength) throw Ii();
                this.g += e;
              }),
              (h.Qi = function (e) {
                if (this.g < e) throw Ii();
                this.g -= e;
              }),
              (h.seek = function (e) {
                if (e < 0 || e > this.h.byteLength) throw Ii();
                this.g = e;
              }),
              (h.Yc = function () {
                for (var e = this.g; this.Ia() && this.h.getUint8(this.g) != 0; ) this.g += 1;
                return ((e = Le(this.h, e, this.g - e)), (this.g += 1), At(e));
              }));
            function Ii() {
              return new H(2, 3, 3e3);
            }
            (de("shaka.util.DataViewReader", yt),
              (yt.prototype.readTerminatedString = yt.prototype.Yc),
              (yt.prototype.seek = yt.prototype.seek),
              (yt.prototype.rewind = yt.prototype.Qi),
              (yt.prototype.skip = yt.prototype.skip),
              (yt.prototype.readBytes = yt.prototype.Tb),
              (yt.prototype.readUint64 = yt.prototype.Ed),
              (yt.prototype.readInt32 = yt.prototype.dh),
              (yt.prototype.readUint32 = yt.prototype.U),
              (yt.prototype.readUint16 = yt.prototype.Ca),
              (yt.prototype.readUint8 = yt.prototype.Y),
              (yt.prototype.getLength = yt.prototype.getLength),
              (yt.prototype.getPosition = yt.prototype.Pa),
              (yt.prototype.hasMoreData = yt.prototype.Ia));
            var K0 = 1;
            yt.Endianness = { BIG_ENDIAN: 0, LITTLE_ENDIAN: K0 };
            function ct() {
              ((this.i = new Map()), (this.h = new Map()), (this.g = !1));
            }
            ((h = ct.prototype),
              (h.box = function (e, t) {
                return ((e = $0(e)), this.i.set(e, qC), this.h.set(e, t), this);
              }),
              (h.S = function (e, t) {
                return ((e = $0(e)), this.i.set(e, Y0), this.h.set(e, t), this);
              }),
              (h.stop = function () {
                this.g = !0;
              }),
              (h.parse = function (e, t, n) {
                for (e = new yt(e, 0), this.g = !1; e.Ia() && !this.g; ) this.Bd(0, e, t, n);
              }),
              (h.Bd = function (e, t, n, r) {
                var i = t.Pa();
                if (r && i + 8 > t.getLength()) this.g = !0;
                else {
                  var s = t.U(),
                    o = t.U(),
                    u = Rc(o),
                    l = !1;
                  switch (s) {
                    case 0:
                      s = t.getLength() - i;
                      break;
                    case 1:
                      if (r && t.Pa() + 8 > t.getLength()) {
                        this.g = !0;
                        return;
                      }
                      ((s = t.Ed()), (l = !0));
                  }
                  var p = this.h.get(o);
                  if (p) {
                    var m = null,
                      y = null;
                    if (this.i.get(o) == Y0) {
                      if (r && t.Pa() + 4 > t.getLength()) {
                        this.g = !0;
                        return;
                      }
                      ((y = t.U()), (m = y >>> 24), (y &= 16777215));
                    }
                    ((o = i + s),
                      n && o > t.getLength() && (o = t.getLength()),
                      r && o > t.getLength()
                        ? (this.g = !0)
                        : ((o -= t.Pa()),
                          (t = o > 0 ? t.Tb(o, !1) : new Uint8Array(0)),
                          (t = new yt(t, 0)),
                          p({
                            name: u,
                            parser: this,
                            partialOkay: n || !1,
                            stopOnPartial: r || !1,
                            version: m,
                            flags: y,
                            reader: t,
                            size: s,
                            start: i + e,
                            has64BitSize: l,
                          })));
                  } else t.skip(Math.min(i + s - t.Pa(), t.getLength() - t.Pa()));
                }
              }));
            function Fe(e) {
              for (var t = ns(e); e.reader.Ia() && !e.parser.g; )
                e.parser.Bd(e.start + t, e.reader, e.partialOkay, e.stopOnPartial);
            }
            function Ci(e) {
              for (
                var t = ns(e), n = e.reader.U(), r = 0;
                r < n && (e.parser.Bd(e.start + t, e.reader, e.partialOkay, e.stopOnPartial), !e.parser.g);
                r++
              );
            }
            function Zn(e) {
              var t = ns(e);
              for (e.reader.skip(78); e.reader.Ia() && !e.parser.g; )
                e.parser.Bd(e.start + t, e.reader, e.partialOkay, e.stopOnPartial);
            }
            function Mc(e) {
              var t = ns(e);
              e.reader.skip(8);
              var n = e.reader.Ca();
              for (
                e.reader.skip(6), n == 2 ? e.reader.skip(48) : e.reader.skip(12), n == 1 && e.reader.skip(16);
                e.reader.Ia() && !e.parser.g;
              )
                e.parser.Bd(e.start + t, e.reader, e.partialOkay, e.stopOnPartial);
            }
            function Mo(e, t) {
              return function (n) {
                e(n.reader.Tb(n.reader.getLength() - n.reader.Pa(), t));
              };
            }
            function $0(e) {
              var t = 0;
              e = x(e);
              for (var n = e.next(); !n.done; n = e.next()) t = (t << 8) | n.value.charCodeAt(0);
              return t;
            }
            function Rc(e) {
              return String.fromCharCode((e >> 24) & 255, (e >> 16) & 255, (e >> 8) & 255, e & 255);
            }
            function ns(e) {
              return 8 + (e.has64BitSize ? 8 : 0) + (e.flags != null ? 4 : 0);
            }
            (de("shaka.util.Mp4Parser", ct),
              (ct.headerSize = ns),
              (ct.typeToString = Rc),
              (ct.allData = Mo),
              (ct.audioSampleEntry = Mc),
              (ct.visualSampleEntry = Zn),
              (ct.sampleDescription = Ci),
              (ct.children = Fe),
              (ct.prototype.parseNext = ct.prototype.Bd),
              (ct.prototype.parse = ct.prototype.parse),
              (ct.prototype.stop = ct.prototype.stop),
              (ct.prototype.fullBox = ct.prototype.S),
              (ct.prototype.box = ct.prototype.box));
            var qC = 0,
              Y0 = 1;
            function hp(e) {
              var t = this;
              ((this.g = []),
                (this.h = []),
                (this.data = []),
                new ct()
                  .box("moov", Fe)
                  .box("moof", Fe)
                  .S("pssh", function (n) {
                    if (!(n.version > 1)) {
                      var r = Le(n.reader.h, -12, n.size);
                      if ((t.data.push(r), (r = n.reader.Tb(16, !1)), t.g.push(mi(r)), n.version > 0)) {
                        r = n.reader.U();
                        for (var i = 0; i < r; i++) {
                          var s = n.reader.Tb(16, !1);
                          ((s = mi(s)), t.h.push(s));
                        }
                      }
                    }
                  })
                  .parse(e));
            }
            function kc(e, t, n, r) {
              var i = e.length,
                s = 12 + t.length + 4 + i;
              r > 0 && (s += 4 + 16 * n.size);
              var o = new Uint8Array(s),
                u = Bn(o),
                l = 0;
              if (
                (u.setUint32(l, s),
                (l += 4),
                u.setUint32(l, 1886614376),
                (l += 4),
                r < 1 ? u.setUint32(l, 0) : u.setUint32(l, 16777216),
                (l += 4),
                o.set(t, l),
                (l += t.length),
                r > 0)
              )
                for (u.setUint32(l, n.size), l += 4, t = x(n), n = t.next(); !n.done; n = t.next())
                  ((n = Rs(n.value)), o.set(n, l), (l += n.length));
              return (u.setUint32(l, i), o.set(e, l + 4), o);
            }
            function _c(e) {
              var t = this;
              ((this.F = e),
                (this.l = this.B = null),
                (this.$ = this.T = !1),
                (this.J = 0),
                (this.g = null),
                (this.o = new tt()),
                (this.i = new Map()),
                (this.X = []),
                (this.C = new Map()),
                (this.K = !1),
                (this.m = new lt()),
                (this.h = null),
                (this.u = function (n) {
                  (n.severity == 2 && t.m.reject(n), e.onError(n));
                }),
                (this.ba = new Map()),
                (this.ma = new Map()),
                (this.M = new He(function () {
                  return aM(t);
                })),
                (this.R = !1),
                (this.N = []),
                (this.oa = !1),
                (this.G = new He(function () {
                  lM(t);
                })),
                this.m.catch(function () {}),
                (this.j = new Io(function () {
                  return JC(t);
                })),
                (this.O = !1),
                (this.H = this.I = null),
                (this.V = function () {
                  return !1;
                }));
            }
            ((h = _c.prototype),
              (h.destroy = function () {
                return this.j.destroy();
              }));
            function JC(e) {
              return F(function (t) {
                switch (t.g) {
                  case 1:
                    return (
                      e.o.release(),
                      (e.o = null),
                      e.m.reject(),
                      e.G.stop(),
                      (e.G = null),
                      e.M.stop(),
                      (e.M = null),
                      E(t, ou(e), 2)
                    );
                  case 2:
                    if (!e.l) {
                      t.A(3);
                      break;
                    }
                    return (te(t, 4), E(t, e.l.setMediaKeys(null), 6));
                  case 6:
                    pe(t, 5);
                    break;
                  case 4:
                    oe(t);
                  case 5:
                    e.l = null;
                  case 3:
                    ((e.g = null),
                      (e.B = null),
                      (e.C = new Map()),
                      (e.h = null),
                      (e.u = function () {}),
                      (e.F = null),
                      (e.O = !1),
                      (e.I = null),
                      re(t));
                }
              });
            }
            h.configure = function (e, t) {
              ((this.h = e),
                t && (this.V = t),
                this.G && this.T && this.g && this.G.Ea(this.h.updateExpirationTime));
            };
            function QC(e, t, n) {
              return ((e.$ = !0), (e.C = new Map()), (e.R = n), J0(e, t, !1));
            }
            function q0(e, t, n, r) {
              ((r = r === void 0 ? !0 : r), (e.C = new Map()), (n = x(n)));
              for (var i = n.next(); !i.done; i = n.next())
                e.C.set(i.value, { initData: null, initDataType: null });
              for (n = x(e.h.persistentSessionsMetadata), i = n.next(); !i.done; i = n.next())
                ((i = i.value), e.C.set(i.sessionId, { initData: i.initData, initDataType: i.initDataType }));
              return ((e.R = e.C.size > 0), J0(e, t, r));
            }
            function ZC(e, t, n, r, i, s) {
              var o, u, l, p, m;
              return F(function (y) {
                return y.g == 1
                  ? ((o = []),
                    s.length && o.push(s[0].contentType),
                    i.length && o.push(i[0].contentType),
                    (u = function (v) {
                      return (
                        (v = yi(t, v, null)),
                        (v.licenseServerUri = n),
                        (v.serverCertificate = r),
                        (v.persistentStateRequired = !0),
                        (v.sessionType = "persistent-license"),
                        v
                      );
                    }),
                    (l = N0(o)),
                    l.video && ((p = u(s[0].encryptionScheme || "")), l.video.drmInfos.push(p)),
                    l.audio && ((m = u(i[0].encryptionScheme || "")), l.audio.drmInfos.push(m)),
                    E(y, ap([l], !0, e.O, []), 2))
                  : (ht(e.j), y.return(tx(e, [l])));
              });
            }
            function J0(e, t, n) {
              var r, i, s, o, u, l, p, m, y, v, w, A, I, C, k, R, L, U;
              return F(function (G) {
                if (G.g == 1) {
                  for (
                    ax(e.h.clearKeys, t),
                      r = t.some(function (b) {
                        return !!(
                          (b.video && b.video.drmInfos.length) ||
                          (b.audio && b.audio.drmInfos.length)
                        );
                      }),
                      i = Co(e.h.servers),
                      s = Co(e.h.advanced || {}),
                      !r && n && dM(t, i),
                      o = new WeakSet(),
                      u = x(t),
                      l = u.next();
                    !l.done;
                    l = u.next()
                  )
                    for (p = l.value, m = ox(p), y = x(m), v = y.next(); !v.done; v = y.next())
                      ((w = v.value), o.has(w) || (o.add(w), hM(w, i, s, e.h.keySystemsMapping)));
                  for (
                    A = function (b, B) {
                      var O = [];
                      b = x(b);
                      for (var z = b.next(); !z.done; z = b.next()) {
                        z = z.value;
                        var j = z[B] || (s.has(z.keySystem) && s.get(z.keySystem)[B]) || "",
                          X;
                        if (
                          ((X = j == "") && (X = (X = z.keySystem) ? !!X.match(/^com\.widevine\.alpha/) : !1),
                          X &&
                            (B == "audioRobustness"
                              ? (j = [e.h.defaultAudioRobustnessForWidevine])
                              : B == "videoRobustness" && (j = [e.h.defaultVideoRobustnessForWidevine])),
                          typeof j == "string")
                        )
                          O.push(z);
                        else if (Array.isArray(j))
                          for (j.length === 0 && (j = [""]), j = x(j), X = j.next(); !X.done; X = j.next()) {
                            var W = {};
                            O.push(Object.assign({}, z, ((W[B] = X.value), W)));
                          }
                      }
                      return O;
                    },
                      I = new WeakSet(),
                      C = x(t),
                      k = C.next();
                    !k.done;
                    k = C.next()
                  )
                    ((R = k.value),
                      R.video &&
                        !I.has(R.video) &&
                        ((R.video.drmInfos = A(R.video.drmInfos, "videoRobustness")),
                        (R.video.drmInfos = A(R.video.drmInfos, "audioRobustness")),
                        I.add(R.video)),
                      R.audio &&
                        !I.has(R.audio) &&
                        ((R.audio.drmInfos = A(R.audio.drmInfos, "videoRobustness")),
                        (R.audio.drmInfos = A(R.audio.drmInfos, "audioRobustness")),
                        I.add(R.audio)));
                  return E(G, ap(t, e.R, e.O, e.h.preferredKeySystems), 2);
                }
                return (
                  ht(e.j),
                  (L = r || i.size > 0),
                  L
                    ? ((U = tx(e, t)), G.return(r ? U : U.catch(function () {})))
                    : ((e.T = !0), G.return(Promise.resolve()))
                );
              });
            }
            function Q0(e) {
              var t;
              return F(function (n) {
                switch (n.g) {
                  case 1:
                    if (e.l.mediaKeys) return n.return();
                    if (!e.I) {
                      n.A(2);
                      break;
                    }
                    return E(n, e.I, 3);
                  case 3:
                    return (ht(e.j), n.return());
                  case 2:
                    return (te(n, 4), (e.I = e.l.setMediaKeys(e.B)), E(n, e.I, 6));
                  case 6:
                    pe(n, 5);
                    break;
                  case 4:
                    ((t = oe(n)), e.u(new H(2, 6, 6003, t.message)));
                  case 5:
                    (ht(e.j), re(n));
                }
              });
            }
            function eM(e, t) {
              return F(function (n) {
                if (n.g == 1) return E(n, Q0(e), 2);
                (su(e, t.initDataType, Le(t.initData)), re(n));
              });
            }
            h.Vb = function (e) {
              var t = this,
                n,
                r;
              return F(function (i) {
                if (i.g == 1)
                  return t.l === e
                    ? i.return()
                    : t.B
                      ? ((t.l = e),
                        t.h.delayLicenseRequestUntilPlayed &&
                          t.o.Aa(t.l, "play", function () {
                            for (var s = x(t.N), o = s.next(); !o.done; o = s.next()) mp(t, o.value);
                            ((t.oa = !0), (t.N = []));
                          }),
                        t.l.remote
                          ? (t.o.D(t.l.remote, "connect", function () {
                              return ou(t);
                            }),
                            t.o.D(t.l.remote, "connecting", function () {
                              return ou(t);
                            }),
                            t.o.D(t.l.remote, "disconnect", function () {
                              return ou(t);
                            }))
                          : "webkitCurrentPlaybackTargetIsWireless" in t.l &&
                            t.o.D(t.l, "webkitcurrentplaybacktargetiswirelesschanged", function () {
                              return ou(t);
                            }),
                        (t.H =
                          (t.g &&
                            t.g.initData.find(function (s) {
                              return s.initData.length > 0;
                            })) ||
                          null),
                        (n = t.g.keySystem),
                        (r = je().Vg(n)) || (!t.H && t.g.keySystem === "com.apple.fps" && !t.C.size)
                          ? i.A(2)
                          : E(i, Q0(t), 2))
                      : (t.o.Aa(e, "encrypted", function () {
                          t.u(new H(2, 6, 6010));
                        }),
                        i.return());
                (Z0(t).catch(function () {}),
                  (!r && (t.H || t.C.size || t.h.parseInbandPsshEnabled)) ||
                    t.o.D(t.l, "encrypted", function (s) {
                      return eM(t, s);
                    }),
                  re(i));
              });
            };
            function tM(e) {
              var t, n, r, i, s;
              return F(function (o) {
                switch (o.g) {
                  case 1:
                    if (!e.B || !e.g) return o.return();
                    if (
                      !e.g.serverCertificateUri ||
                      (e.g.serverCertificate && e.g.serverCertificate.length)
                    ) {
                      o.A(2);
                      break;
                    }
                    return (
                      (t = Ut([e.g.serverCertificateUri], e.h.retryParameters)),
                      te(o, 3),
                      (n = e.F.vc.request(5, t, { isPreload: e.V() })),
                      E(o, n.promise, 5)
                    );
                  case 5:
                    ((r = o.h), (e.g.serverCertificate = Le(r.data)), pe(o, 4));
                    break;
                  case 3:
                    throw ((i = oe(o)), new H(2, 6, 6017, i));
                  case 4:
                    if (e.j.g) return o.return();
                  case 2:
                    return !e.g.serverCertificate || !e.g.serverCertificate.length
                      ? o.return()
                      : (te(o, 6), E(o, e.B.setServerCertificate(e.g.serverCertificate), 8));
                  case 8:
                    pe(o, 0);
                    break;
                  case 6:
                    throw ((s = oe(o)), new H(2, 6, 6004, s.message));
                }
              });
            }
            function nM(e, t) {
              var n, r, i;
              return F(function (s) {
                if (s.g == 1) return E(s, rx(e, t, { initData: null, initDataType: null }), 2);
                if (s.g != 3)
                  return (
                    (n = s.h),
                    n
                      ? ((r = []),
                        (i = e.i.get(n)) && ((i.Kb = new lt()), r.push(i.Kb)),
                        r.push(n.remove()),
                        E(s, Promise.all(r), 3))
                      : s.return()
                  );
                (e.i.delete(n), re(s));
              });
            }
            function Z0(e) {
              var t, n, r, i, s;
              return F(function (o) {
                if (o.g == 1)
                  return e.C.size
                    ? (e.C.forEach(function (u, l) {
                        rx(e, l, u);
                      }),
                      E(o, e.m, 3))
                    : o.A(2);
                if (o.g != 2) {
                  if (((t = (e.g && e.g.keyIds) || new Set([])), t.size > 0 && cM(e))) return o.return(e.m);
                  ((e.K = !1), (e.m = new lt()), e.m.catch(function () {}));
                }
                for (n = (e.g ? e.g.initData : []) || [], r = x(n), i = r.next(); !i.done; i = r.next())
                  ((s = i.value), su(e, s.initDataType, s.initData));
                return (au(e) && e.m.resolve(), o.return(e.m));
              });
            }
            function su(e, t, n) {
              if (n.length) {
                try {
                  n = e.h.initDataTransform(n, t, e.g);
                } catch (o) {
                  ((t = o), o instanceof H || (t = new H(2, 6, 6016, o)), e.u(t));
                  return;
                }
                if (e.h.ignoreDuplicateInitData) {
                  var r = e.i.values();
                  r = x(r);
                  for (var i = r.next(); !i.done; i = r.next()) if (pi(n, i.value.initData)) return;
                  var s = !1;
                  if (
                    (e.C.forEach(function (o) {
                      !s && pi(n, o.initData) && (s = !0);
                    }),
                    s)
                  )
                    return;
                }
                ((e.K = !0),
                  e.i.size > 0 &&
                    au(e) &&
                    (e.m.resolve(), (e.K = !1), (e.m = new lt()), e.m.catch(function () {})),
                  sM(e, t, n, e.g.sessionType));
              }
            }
            function ex(e) {
              return (
                (e = e.i.keys()),
                (e = dp(e, function (t) {
                  return t.sessionId;
                })),
                Array.from(e)
              );
            }
            ((h.Kg = function () {
              var e = this,
                t = this.i.keys();
              return (
                (t = dp(t, function (n) {
                  var r = e.i.get(n);
                  return {
                    sessionId: n.sessionId,
                    sessionType: r.type,
                    initData: r.initData,
                    initDataType: r.initDataType,
                  };
                })),
                Array.from(t)
              );
            }),
              (h.Zd = function () {
                var e = 1 / 0,
                  t = this.i.keys();
                t = x(t);
                for (var n = t.next(); !n.done; n = t.next())
                  ((n = n.value), isNaN(n.expiration) || (e = Math.min(e, n.expiration)));
                return e;
              }));
            function rM(e) {
              return e.J ? e.J : NaN;
            }
            h.$e = function () {
              return fp(this.ma);
            };
            function tx(e, t) {
              var n, r, i, s, o, u, l;
              return F(function (p) {
                switch (p.g) {
                  case 1:
                    if (((n = new Map()), (r = iM(e, t, n)), !r))
                      throw navigator.requestMediaKeySystemAccess ? new H(2, 6, 6001) : new H(2, 6, 6020);
                    (ht(e.j), te(p, 2), r.getConfiguration());
                    var m = (i = e.h.keySystemsMapping[r.keySystem] || r.keySystem),
                      y = n.get(i),
                      v = [],
                      w = [],
                      A = [],
                      I = [],
                      C = [],
                      k = new Set(),
                      R = new Set();
                    fM(y, v, w, I, A, C, k, R);
                    var L = e.R ? "persistent-license" : "temporary";
                    for (
                      m = {
                        keySystem: m,
                        encryptionScheme: v[0],
                        licenseServerUri: w[0],
                        distinctiveIdentifierRequired: y[0].distinctiveIdentifierRequired,
                        persistentStateRequired: y[0].persistentStateRequired,
                        sessionType: y[0].sessionType || L,
                        audioRobustness: y[0].audioRobustness || "",
                        videoRobustness: y[0].videoRobustness || "",
                        serverCertificate: I[0],
                        serverCertificateUri: A[0],
                        initData: C,
                        keyIds: k,
                        mediaTypes: y[0].mediaTypes,
                      },
                        R.size > 0 && (m.keySystemUris = R),
                        y = x(y),
                        R = y.next();
                      !R.done;
                      R = y.next()
                    )
                      ((R = R.value),
                        R.distinctiveIdentifierRequired &&
                          (m.distinctiveIdentifierRequired = R.distinctiveIdentifierRequired),
                        R.persistentStateRequired && (m.persistentStateRequired = R.persistentStateRequired));
                    if (((e.g = m), !e.g.licenseServerUri)) throw new H(2, 6, 6012, e.g.keySystem);
                    return E(p, r.createMediaKeys(), 4);
                  case 4:
                    if (
                      ((s = p.h),
                      ht(e.j),
                      (e.B = s),
                      !(e.h.minHdcpVersion != "" && "getStatusForPolicy" in e.B))
                    ) {
                      p.A(5);
                      break;
                    }
                    return (
                      te(p, 6),
                      E(p, e.B.getStatusForPolicy({ minHdcpVersion: e.h.minHdcpVersion }), 8)
                    );
                  case 8:
                    if (((o = p.h), o != "usable")) throw new H(2, 6, 6018);
                    (ht(e.j), pe(p, 5, 2));
                    break;
                  case 6:
                    throw ((u = oe(p, 2)), u instanceof H ? u : new H(2, 6, 6019, u.message));
                  case 5:
                    return ((e.T = !0), e.G.Ea(e.h.updateExpirationTime), E(p, tM(e), 9));
                  case 9:
                    (ht(e.j), pe(p, 0));
                    break;
                  case 2:
                    throw (
                      (l = oe(p)),
                      ht(e.j, l),
                      (e.g = null),
                      l instanceof H ? l : new H(2, 6, 6002, l.message)
                    );
                }
              });
            }
            function iM(e, t, n) {
              for (var r = x(t), i = r.next(); !i.done; i = r.next()) {
                i = x(ox(i.value));
                for (var s = i.next(); !s.done; s = i.next())
                  ((s = s.value), n.has(s.keySystem) || n.set(s.keySystem, []), n.get(s.keySystem).push(s));
              }
              if (n.size == 1 && n.has("")) throw new H(2, 6, 6e3);
              ((r = e.h.preferredKeySystems),
                r.length || ((i = Co(e.h.servers)), i.size == 1 && (r = Array.from(i.keys()))),
                (i = x(r)));
              var o = i.next();
              for (s = {}; !o.done; s = { Ki: void 0 }, o = i.next()) {
                ((s.Ki = o.value), (o = x(t)));
                for (var u = o.next(); !u.done; u = o.next())
                  if (
                    (u = u.value.decodingInfos.find(
                      (function (y) {
                        return function (v) {
                          return (
                            v.supported && v.keySystemAccess != null && v.keySystemAccess.keySystem == y.Ki
                          );
                        };
                      })(s),
                    ))
                  )
                    return u.keySystemAccess;
              }
              for (i = x([!0, !1]), s = i.next(); !s.done; s = i.next())
                for (s = s.value, o = x(t), u = o.next(); !u.done; u = o.next()) {
                  u = x(u.value.decodingInfos);
                  for (var l = u.next(); !l.done; l = u.next())
                    if (((l = l.value), l.supported && l.keySystemAccess)) {
                      var p = l.keySystemAccess.keySystem;
                      if (!r.includes(p)) {
                        var m = n.get(p);
                        for (
                          !m && e.h.keySystemsMapping[p] && (m = n.get(e.h.keySystemsMapping[p])),
                            p = x(m),
                            m = p.next();
                          !m.done;
                          m = p.next()
                        )
                          if (!!m.value.licenseServerUri == s) return l.keySystemAccess;
                      }
                    }
                }
              return null;
            }
            function pp(e) {
              au(e) && e.m.resolve();
            }
            function nx(e, t) {
              new He(function () {
                ((t.loaded = !0), pp(e));
              }).ka(gM);
            }
            function rx(e, t, n) {
              var r, i, s, o, u, l, p;
              return F(function (m) {
                switch (m.g) {
                  case 1:
                    try {
                      r = e.B.createSession("persistent-license");
                    } catch (y) {
                      return ((i = new H(2, 6, 6005, y.message)), e.u(i), m.return(Promise.reject(i)));
                    }
                    return (
                      e.o.D(r, "message", function (y) {
                        gp(e) ? e.N.push(y) : mp(e, y);
                      }),
                      e.o.D(r, "keystatuseschange", function (y) {
                        return ix(e, y);
                      }),
                      (s = {
                        initData: n.initData,
                        initDataType: n.initDataType,
                        loaded: !1,
                        Yg: 1 / 0,
                        Kb: null,
                        type: "persistent-license",
                      }),
                      e.i.set(r, s),
                      te(m, 2),
                      E(m, r.load(t), 4)
                    );
                  case 4:
                    return (
                      (o = m.h),
                      ht(e.j),
                      o ||
                        (e.i.delete(r),
                        (u = e.h.persistentSessionOnlinePlayback ? 1 : 2),
                        e.u(new H(u, 6, 6013)),
                        (s.loaded = !0)),
                      nx(e, s),
                      pp(e),
                      m.return(r)
                    );
                  case 2:
                    ((l = oe(m)),
                      ht(e.j, l),
                      e.i.delete(r),
                      (p = e.h.persistentSessionOnlinePlayback ? 1 : 2),
                      e.u(new H(p, 6, 6005, l.message)),
                      (s.loaded = !0),
                      pp(e));
                  case 3:
                    return m.return(Promise.resolve());
                }
              });
            }
            function sM(e, t, n, r) {
              try {
                var i = e.B.createSession(r);
              } catch (s) {
                e.u(new H(2, 6, 6005, s.message));
                return;
              }
              (e.o.D(i, "message", function (s) {
                gp(e) ? e.N.push(s) : mp(e, s);
              }),
                e.o.D(i, "keystatuseschange", function (s) {
                  return ix(e, s);
                }),
                e.i.set(i, { initData: n, initDataType: t, loaded: !1, Yg: 1 / 0, Kb: null, type: r }),
                e.h.logLicenseExchange && gi(n),
                i.generateRequest(t, n).catch(function (s) {
                  if (!e.j.g) {
                    e.i.delete(i);
                    var o = s.errorCode;
                    if (o && o.systemCode) {
                      var u = o.systemCode;
                      (u < 0 && (u += 4294967296), (u = "0x" + u.toString(16)));
                    }
                    e.u(new H(2, 6, 6006, s.message, s, u));
                  }
                }));
            }
            function gp(e) {
              return e.l
                ? e.h.delayLicenseRequestUntilPlayed && e.l.paused && !e.oa
                : !e.$ && e.h.delayLicenseRequestUntilPlayed;
            }
            function oM(e) {
              return F(function (t) {
                return t.g == 1
                  ? !e.K || gp(e)
                    ? t.A(0)
                    : E(t, e.m, 3)
                  : E(
                      t,
                      Promise.all(
                        e.X.map(function (n) {
                          return n.promise;
                        }),
                      ),
                      0,
                    );
              });
            }
            function mp(e, t) {
              var n, r, i, s, o, u, l, p, m, y, v, w, A, I, C, k;
              F(function (R) {
                switch (R.g) {
                  case 1:
                    if (
                      ((n = t.target),
                      e.h.logLicenseExchange && gi(t.message),
                      (r = e.i.get(n)),
                      (i = e.g.licenseServerUri),
                      (s = e.h.advanced[e.g.keySystem]),
                      t.messageType == "individualization-request" &&
                        s &&
                        s.individualizationServer &&
                        (i = s.individualizationServer),
                      (o = Ut([i], e.h.retryParameters)),
                      (o.body = t.message),
                      (o.method = "POST"),
                      (o.licenseRequestType = t.messageType),
                      (o.sessionId = n.sessionId),
                      (o.drmInfo = e.g),
                      r && ((o.initData = r.initData), (o.initDataType = r.initDataType)),
                      s && s.headers)
                    )
                      for (u in s.headers) o.headers[u] = s.headers[u];
                    if (e.g.keySystem === "org.w3.clearkey") {
                      var L = o,
                        U = e.g;
                      try {
                        var G = ni(L.body);
                        if (G) {
                          var b = JSON.parse(G);
                          b.type || ((b.type = U.sessionType), (L.body = Ur(JSON.stringify(b))));
                        }
                      } catch (B) {}
                    }
                    if (jh(e.g.keySystem))
                      if (((L = $i(o.body, !0, !0)), L.includes("PlayReadyKeyMessage"))) {
                        for (
                          L = Ls(L, "PlayReadyKeyMessage"), U = Jr(L, "HttpHeader"), U = x(U), G = U.next();
                          !G.done;
                          G = U.next()
                        )
                          ((b = G.value),
                            (G = Jr(b, "name")[0]),
                            (b = Jr(b, "value")[0]),
                            (o.headers[Lt(G)] = Lt(b)));
                        ((L = Jr(L, "Challenge")[0]), (o.body = Sr(Lt(L))));
                      } else o.headers["Content-Type"] = "text/xml; charset=utf-8";
                    return (
                      (l = Date.now()),
                      te(R, 2),
                      (m = e.F.vc.request(2, o, { isPreload: e.V() })),
                      e.X.push(m),
                      E(R, m.promise, 4)
                    );
                  case 4:
                    ((p = R.h), Or(e.X, m), pe(R, 3));
                    break;
                  case 2:
                    return (
                      (y = oe(R)),
                      e.j.g ||
                        ((v = {
                          sessionId: n.sessionId,
                          sessionType: r.type,
                          initData: r.initData,
                          initDataType: r.initDataType,
                        }),
                        (w = new H(2, 6, 6007, y, v)),
                        e.i.size == 1
                          ? (e.u(w), r && r.Kb && r.Kb.reject(w))
                          : (r && r.Kb && r.Kb.reject(w),
                            e.i.delete(n),
                            au(e) && (e.m.resolve(), e.M.ka(0.1)))),
                      R.return()
                    );
                  case 3:
                    return e.j.g
                      ? R.return()
                      : ((e.J += (Date.now() - l) / 1e3),
                        e.h.logLicenseExchange && gi(p.data),
                        te(R, 5),
                        E(R, n.update(p.data), 7));
                  case 7:
                    pe(R, 6);
                    break;
                  case 5:
                    return (
                      (I = ((A = oe(R)) && A.message) || String(A)),
                      (C = new H(2, 6, 6008, I)),
                      e.u(C),
                      r && r.Kb && r.Kb.reject(C),
                      R.return()
                    );
                  case 6:
                    if (e.j.g) return R.return();
                    ((k = new Ae("drmsessionupdate")),
                      e.F.onEvent(k),
                      r && (r.Kb && r.Kb.resolve(), nx(e, r)),
                      re(R));
                }
              });
            }
            function ix(e, t) {
              t = t.target;
              var n = e.i.get(t),
                r = !1;
              t.keyStatuses.forEach(function (s, o) {
                if (typeof o == "string") {
                  var u = o;
                  ((o = s), (s = u));
                }
                if (((u = je()), jh(e.g.keySystem) && o.byteLength == 16 && u.Ff())) {
                  u = Bn(o);
                  var l = u.getUint32(0, !0),
                    p = u.getUint16(4, !0),
                    m = u.getUint16(6, !0);
                  (u.setUint32(0, l, !1), u.setUint16(4, p, !1), u.setUint16(6, m, !1));
                }
                (s != "status-pending" && (n.loaded = !0),
                  s == "expired" && (r = !0),
                  (o = mi(o).slice(0, 32)),
                  e.ba.set(o, s));
              });
              var i = t.expiration - Date.now();
              ((i < 0 || (r && i < 1e3)) && n && !n.Kb && (e.i.delete(t), sx(t)),
                au(e) && (e.m.resolve(), e.M.ka(mM)));
            }
            function aM(e) {
              var t = e.ba,
                n = e.ma;
              (n.clear(),
                t.forEach(function (r, i) {
                  return n.set(i, r);
                }),
                (t = Array.from(n.values())),
                t.length &&
                  t.every(function (r) {
                    return r == "expired";
                  }) &&
                  e.u(new H(2, 6, 6014)),
                e.F.zf(fp(n)));
            }
            function uM() {
              var e, t, n, r, i, s, o, u, l, p, m, y, v, w, A, I, C, k, R, L, U, G, b, B, O, z, j, X, W;
              return F(function (ie) {
                if (ie.g == 1) {
                  if (
                    ((e =
                      "org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(
                        " ",
                      )),
                    !(
                      g.MediaKeys &&
                      g.navigator &&
                      g.navigator.requestMediaKeySystemAccess &&
                      g.MediaKeySystemAccess &&
                      g.MediaKeySystemAccess.prototype.getConfiguration
                    ))
                  ) {
                    for (t = {}, n = x(e), r = n.next(); !r.done; r = n.next())
                      ((i = r.value), (t[i] = null));
                    return ie.return(t);
                  }
                  for (
                    s = "1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),
                      o = [
                        "SW_SECURE_CRYPTO",
                        "SW_SECURE_DECODE",
                        "HW_SECURE_CRYPTO",
                        "HW_SECURE_DECODE",
                        "HW_SECURE_ALL",
                      ],
                      u = ["150", "2000", "3000"],
                      l = {
                        "com.widevine.alpha": o,
                        "com.widevine.alpha.experiment": o,
                        "com.microsoft.playready.recommendation": u,
                      },
                      p = [
                        { contentType: 'video/mp4; codecs="avc1.42E01E"' },
                        { contentType: 'video/webm; codecs="vp8"' },
                      ],
                      m = [
                        { contentType: 'audio/mp4; codecs="mp4a.40.2"' },
                        { contentType: 'audio/webm; codecs="opus"' },
                      ],
                      y = {
                        videoCapabilities: p,
                        audioCapabilities: m,
                        initDataTypes: ["cenc", "sinf", "skd", "keyids"],
                      },
                      v = [null, "cenc", "cbcs"],
                      w = new Map(),
                      A = je(),
                      I = function (ne, $, Q) {
                        var ae, ce, Ne, we, et, Ue, ot, We, Ge, Ye, Ze, qe, ze;
                        return F(function (Ke) {
                          switch (Ke.g) {
                            case 1:
                              return (te(Ke, 2), E(Ke, $.createMediaKeys(), 5));
                            case 5:
                              ae = Ke.h;
                            case 4:
                              pe(Ke, 3);
                              break;
                            case 2:
                              return (oe(Ke), Ke.return());
                            case 3:
                              if (
                                ((Ne = (ce = $.getConfiguration().sessionTypes)
                                  ? ce.includes("persistent-license")
                                  : !1),
                                A.Ci() && (Ne = !1),
                                (we = $.getConfiguration().videoCapabilities),
                                (et = $.getConfiguration().audioCapabilities),
                                (Ue = {
                                  persistentState: Ne,
                                  encryptionSchemes: [],
                                  videoRobustnessLevels: [],
                                  audioRobustnessLevels: [],
                                  minHdcpVersions: [],
                                }),
                                w.get(ne) ? (Ue = w.get(ne)) : w.set(ne, Ue),
                                (ot = we[0].encryptionScheme) &&
                                  !Ue.encryptionSchemes.includes(ot) &&
                                  Ue.encryptionSchemes.push(ot),
                                (We = we[0].robustness) &&
                                  !Ue.videoRobustnessLevels.includes(We) &&
                                  Ue.videoRobustnessLevels.push(We),
                                (Ge = et[0].robustness) &&
                                  !Ue.audioRobustnessLevels.includes(Ge) &&
                                  Ue.audioRobustnessLevels.push(Ge),
                                !(Q && ("getStatusForPolicy" in ae)))
                              ) {
                                Ke.A(0);
                                break;
                              }
                              ((Ye = x(s)), (Ze = Ye.next()));
                            case 7:
                              if (Ze.done) {
                                Ke.A(0);
                                break;
                              }
                              if (((qe = Ze.value), Ue.minHdcpVersions.includes(qe))) {
                                Ke.A(8);
                                break;
                              }
                              return E(Ke, ae.getStatusForPolicy({ minHdcpVersion: qe }), 10);
                            case 10:
                              if (((ze = Ke.h), ze == "usable"))
                                Ue.minHdcpVersions.includes(qe) || Ue.minHdcpVersions.push(qe);
                              else {
                                Ke.A(0);
                                break;
                              }
                            case 8:
                              ((Ze = Ye.next()), Ke.A(7));
                          }
                        });
                      },
                      C = function (ne, $, Q, ae, ce) {
                        ce = ce === void 0 ? !1 : ce;
                        var Ne, we, et, Ue, ot, We, Ge, Ye, Ze, qe, ze;
                        return F(function (Ke) {
                          switch (Ke.g) {
                            case 1:
                              for (
                                te(Ke, 2), Ne = Fr(y), we = x(Ne.videoCapabilities), et = we.next();
                                !et.done;
                                et = we.next()
                              )
                                ((Ue = et.value), (Ue.encryptionScheme = $), (Ue.robustness = Q));
                              for (ot = x(Ne.audioCapabilities), We = ot.next(); !We.done; We = ot.next())
                                ((Ge = We.value), (Ge.encryptionScheme = $), (Ge.robustness = ae));
                              return (
                                (Ye = Fr(Ne)),
                                (Ye.persistentState = "required"),
                                (Ye.sessionTypes = ["persistent-license"]),
                                (Ze = [Ye, Ne]),
                                (ze = je()),
                                ze.Oa() == "MOBILE"
                                  ? E(Ke, gc(5, navigator.requestMediaKeySystemAccess(ne, Ze)), 7)
                                  : E(Ke, navigator.requestMediaKeySystemAccess(ne, Ze), 6)
                              );
                            case 6:
                              ((qe = Ke.h), Ke.A(5));
                              break;
                            case 7:
                              qe = Ke.h;
                            case 5:
                              return E(Ke, I(ne, qe, ce), 8);
                            case 8:
                              pe(Ke, 0);
                              break;
                            case 2:
                              (oe(Ke), re(Ke));
                          }
                        });
                      },
                      k = function (ne) {
                        return !(je().Ha() === "WEBKIT" && ne === "org.w3.clearkey");
                      },
                      R = [],
                      L = x(e),
                      U = L.next();
                    !U.done;
                    U = L.next()
                  )
                    if (((G = U.value), w.set(G, null), k(G))) {
                      for (b = !0, B = x(v), O = B.next(); !O.done; O = B.next())
                        ((z = O.value), R.push(C(G, z, "", "", b)), (b = !1));
                      for (j = x(l[G] || []), X = j.next(); !X.done; X = j.next())
                        ((W = X.value), R.push(C(G, null, W, "")), R.push(C(G, null, "", W)));
                    }
                  return E(ie, Promise.all(R), 2);
                }
                return ie.return(fp(w));
              });
            }
            function sx(e) {
              return F(function (t) {
                if (t.g == 1)
                  return (
                    te(t, 2),
                    E(t, gc(pM, Promise.all([e.close().catch(function () {}), e.closed])), 4)
                  );
                if (t.g != 2) return pe(t, 0);
                (oe(t), re(t));
              });
            }
            function ou(e) {
              var t;
              return F(function (n) {
                return (
                  (t = Array.from(e.i.entries())),
                  e.i.clear(),
                  E(
                    n,
                    Promise.all(
                      t.map(function (r) {
                        r = x(r);
                        var i = r.next().value,
                          s = r.next().value;
                        return F(function (o) {
                          if (o.g == 1)
                            return (
                              te(o, 2),
                              e.$ ||
                              e.C.has(i.sessionId) ||
                              s.type !== "persistent-license" ||
                              e.h.persistentSessionOnlinePlayback
                                ? E(o, sx(i), 5)
                                : E(o, i.remove(), 5)
                            );
                          if (o.g != 2) return pe(o, 0);
                          (oe(o), re(o));
                        });
                      }),
                    ),
                    0,
                  )
                );
              });
            }
            function ox(e) {
              return (e.video ? e.video.drmInfos : []).concat(e.audio ? e.audio.drmInfos : []);
            }
            function lM(e) {
              e.i.forEach(function (t, n) {
                var r = t.Yg,
                  i = n.expiration;
                (isNaN(i) && (i = 1 / 0), i != r && (e.F.onExpirationUpdated(n.sessionId, i), (t.Yg = i)));
              });
            }
            function au(e) {
              return (
                (e = e.i.values()),
                YC(e, function (t) {
                  return t.loaded;
                })
              );
            }
            function cM(e) {
              for (var t = x((e.g && e.g.keyIds) || new Set([])), n = t.next(); !n.done; n = t.next())
                if (e.ba.get(n.value) !== "usable") return !1;
              return !0;
            }
            function dM(e, t) {
              var n = [];
              for (
                t.forEach(function (r, i) {
                  n.push({
                    keySystem: i,
                    licenseServerUri: r,
                    distinctiveIdentifierRequired: !1,
                    persistentStateRequired: !1,
                    audioRobustness: "",
                    videoRobustness: "",
                    serverCertificate: null,
                    serverCertificateUri: "",
                    initData: [],
                    keyIds: new Set(),
                  });
                }),
                  e = x(e),
                  t = e.next();
                !t.done;
                t = e.next()
              )
                ((t = t.value), t.video && (t.video.drmInfos = n), t.audio && (t.audio.drmInfos = n));
            }
            function fM(e, t, n, r, i, s, o, u) {
              var l = [];
              e = x(e);
              for (var p = e.next(), m = {}; !p.done; m = { La: void 0 }, p = e.next()) {
                if (
                  ((m.La = p.value),
                  t.includes(m.La.encryptionScheme) || t.push(m.La.encryptionScheme),
                  m.La.keySystem == "org.w3.clearkey" &&
                  m.La.licenseServerUri.startsWith("data:application/json;base64,")
                    ? l.includes(m.La.licenseServerUri) || l.push(m.La.licenseServerUri)
                    : n.includes(m.La.licenseServerUri) || n.push(m.La.licenseServerUri),
                  i.includes(m.La.serverCertificateUri) || i.push(m.La.serverCertificateUri),
                  m.La.serverCertificate &&
                    (r.some(
                      (function (w) {
                        return function (A) {
                          return pi(A, w.La.serverCertificate);
                        };
                      })(m),
                    ) ||
                      r.push(m.La.serverCertificate)),
                  m.La.initData)
                ) {
                  p = x(m.La.initData);
                  for (var y = p.next(), v = {}; !y.done; v = { Pg: void 0 }, y = p.next())
                    ((v.Pg = y.value),
                      s.some(
                        (function (w) {
                          return function (A) {
                            var I = w.Pg;
                            return A.keyId && A.keyId == I.keyId
                              ? !0
                              : A.initDataType == I.initDataType && pi(A.initData, I.initData);
                          };
                        })(v),
                      ) || s.push(v.Pg));
                }
                if (m.La.keyIds) for (p = x(m.La.keyIds), y = p.next(); !y.done; y = p.next()) o.add(y.value);
                if (m.La.keySystemUris && u)
                  for (m = x(m.La.keySystemUris), p = m.next(); !p.done; p = m.next()) u.add(p.value);
              }
              if (l.length == 1) n.push(l[0]);
              else if (l.length > 0) {
                for (t = [], l = x(l), r = l.next(); !r.done; r = l.next())
                  ((r = g.atob(r.value.split("data:application/json;base64,").pop())),
                    (r = JSON.parse(r)),
                    t.push.apply(t, Y(r.keys)));
                ((l = JSON.stringify({ keys: t })), n.push("data:application/json;base64," + g.btoa(l)));
              }
            }
            function hM(e, t, n, r) {
              var i = e.keySystem;
              i &&
                (i != "org.w3.clearkey" || !e.licenseServerUri) &&
                (t.size && t.get(i) && ((t = t.get(i)), (e.licenseServerUri = t)),
                e.keyIds || (e.keyIds = new Set()),
                (n = n.get(i)) &&
                  (e.distinctiveIdentifierRequired ||
                    (e.distinctiveIdentifierRequired = n.distinctiveIdentifierRequired),
                  e.persistentStateRequired || (e.persistentStateRequired = n.persistentStateRequired),
                  e.serverCertificate || (e.serverCertificate = n.serverCertificate),
                  n.sessionType && (e.sessionType = n.sessionType),
                  e.serverCertificateUri || (e.serverCertificateUri = n.serverCertificateUri)),
                r[i] && (e.keySystem = r[i]),
                g.cast &&
                  g.cast.__platform__ &&
                  i == "com.microsoft.playready" &&
                  (e.keySystem = "com.chromecast.playready"));
            }
            function ax(e, t) {
              if (((e = Co(e)), e.size != 0)) {
                ((e = Yv(e)), (t = x(t)));
                for (var n = t.next(); !n.done; n = t.next())
                  ((n = n.value), n.video && (n.video.drmInfos = [e]), n.audio && (n.audio.drmInfos = [e]));
              }
            }
            var pM = 1,
              gM = 5,
              mM = 0.5;
            function yM() {
              ((this.g = Vs), (this.j = new Map().set(Vs, 2).set(js, 1)), (this.i = 0), (this.h = -1));
            }
            function yp(e, t) {
              var n = e.g !== t;
              return ((e.g = t), n && t === Vs && (e.i = Date.now()), n);
            }
            var js = 0,
              Vs = 1;
            /*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/ function vp(e, t, n) {
              ((this.h = e), (this.i = t), (this.g = n));
            }
            function ux(e, t) {
              return F(function (n) {
                if (n.g == 1)
                  return E(n, bC(e.g, t, e.h.drm.preferredKeySystems, e.h.drm.keySystemsMapping), 2);
                if (
                  (e.h.streaming.dontChooseCodecs ||
                    I0(
                      t,
                      e.h.preferredVideoCodecs,
                      e.h.preferredAudioCodecs,
                      e.h.preferredDecodingAttributes,
                      e.h.preferredTextFormats,
                    ),
                  !t.variants.some(iu))
                )
                  throw new H(2, 4, 4032);
                return n.return(cx(e, t));
              });
            }
            function lx(e, t) {
              var n = e.h.restrictions;
              e = e.i;
              var r = !1;
              t = x(t.variants);
              for (var i = t.next(); !i.done; i = t.next()) {
                i = i.value;
                var s = i.allowedByApplication;
                ((i.allowedByApplication = vc(i, n, e)), s != i.allowedByApplication && (r = !0));
              }
              return r;
            }
            function cx(e, t) {
              var n = lx(e, t);
              if (t) {
                var r = e.g ? e.g.g : null;
                if (r && e.g.B) {
                  for (var i = new Set(), s = x(t.variants), o = s.next(); !o.done; o = s.next())
                    ((o = o.value), o.audio && i.add(o.audio), o.video && i.add(o.video));
                  for (i = x(i), s = i.next(); !s.done; s = i.next()) dx(e, r.keySystem, s.value);
                }
                fx(e, t);
              }
              return n;
            }
            function dx(e, t, n) {
              n = x(n.drmInfos);
              for (var r = n.next(); !r.done; r = n.next())
                if (((r = r.value), r.keySystem == t)) {
                  for (var i = x(r.initData || []), s = i.next(); !s.done; s = i.next())
                    ((s = s.value), su(e.g, s.initDataType, s.initData));
                  ((i = e.g), i.g && i.g.mediaTypes !== r.mediaTypes && (i.g.mediaTypes = r.mediaTypes));
                }
            }
            function fx(e, t) {
              function n(p) {
                if (p && !u.has(p) && (u.add(p), p.keyIds.size)) {
                  p = x(p.keyIds);
                  for (var m = p.next(); !m.done; m = p.next()) {
                    m = m.value;
                    var y = r[i ? "00" : m];
                    y ? hx.includes(y) && o.add(y) : s.add(m);
                  }
                }
              }
              var r = e.g ? e.g.$e() : {};
              e = Object.keys(r);
              var i = e.length && e[0] == "00";
              e = !1;
              var s = new Set(),
                o = new Set(),
                u = new WeakSet();
              t = x(t.variants);
              for (var l = t.next(); !l.done; l = t.next()) {
                if (((l = l.value), !l.allowedByApplication)) e = !0;
                else if (l.allowedByKeySystem) return;
                (n(l.audio), n(l.video));
              }
              throw (
                (e = {
                  hasAppRestrictions: e,
                  missingKeys: Array.from(s),
                  restrictedKeyStatuses: Array.from(o),
                }),
                new H(2, 4, 4012, e)
              );
            }
            var hx = ["output-restricted", "internal-error"];
            de("shaka.config.CodecSwitchingStrategy", { RELOAD: "reload", SMOOTH: "smooth" });
            function In(e) {
              if (xp.has(e)) return xp.get(e);
              var t = g.ManagedMediaSource || g.MediaSource;
              return t ? ((t = t.isTypeSupported(e)), xp.set(e, t), t) : !1;
            }
            function px() {
              var e = g.ManagedMediaSource || g.MediaSource;
              return e && e.prototype
                ? !!e.prototype.setLiveSeekableRange && !!e.prototype.clearLiveSeekableRange
                : !1;
            }
            var xp = new Map();
            function Pc(e, t) {
              var n = null,
                r = null,
                i = null,
                s = null,
                o = e.U();
              return (
                t & 1 && (i = e.Ed()),
                t & 2 && (s = e.U()),
                t & 8 && (n = e.U()),
                t & 16 && (r = e.U()),
                { trackId: o, Wd: n, Xd: r, rj: i, Ri: s }
              );
            }
            function Dc(e, t) {
              return t == 1
                ? ((t = e.U()), (e = e.U()), { baseMediaDecodeTime: t * 4294967296 + e })
                : { baseMediaDecodeTime: e.U() };
            }
            function Lc(e, t) {
              return (
                t == 1 ? (e.skip(8), e.skip(8)) : (e.skip(4), e.skip(4)),
                (t = e.U()),
                e.skip(4),
                (e = e.Ca()),
                {
                  timescale: t,
                  language:
                    String.fromCharCode((e >> 10) + 96) +
                    String.fromCharCode(((e & 960) >> 5) + 96) +
                    String.fromCharCode((e & 31) + 96),
                }
              );
            }
            function bc(e, t, n) {
              var r = e.U(),
                i = [],
                s = null;
              (n & 1 && (s = e.dh()), n & 4 && e.skip(4));
              for (var o = 0; o < r; o++) {
                var u = { nh: null, sampleSize: null, Gf: null };
                (n & 256 && (u.nh = e.U()),
                  n & 512 && (u.sampleSize = e.U()),
                  n & 1024 && e.skip(4),
                  n & 2048 && (u.Gf = t == 0 ? e.U() : e.dh()),
                  i.push(u));
              }
              return { Hm: r, mh: i, qg: s };
            }
            function gx(e) {
              (e.skip(6), e.skip(2), e.skip(8));
              var t = e.Ca();
              return (
                e.skip(2),
                e.skip(2),
                e.skip(2),
                (e = e.Ca() + e.Ca() / 65536),
                { channelCount: t, sampleRate: e }
              );
            }
            function Tp(e) {
              return ((e = e.U()), { codec: Rc(e) });
            }
            function vM(e) {
              var t = null,
                n = null,
                r = e.Tb(4, !1),
                i = String.fromCharCode(r[0]);
              if (
                ((i += String.fromCharCode(r[1])),
                (i += String.fromCharCode(r[2])),
                (i += String.fromCharCode(r[3])),
                i === "nclx")
              ) {
                switch (e.Ca()) {
                  case 1:
                  case 5:
                  case 6:
                  case 7:
                    t = "srgb";
                    break;
                  case 9:
                    t = "rec2020";
                    break;
                  case 11:
                  case 12:
                    t = "p3";
                }
                switch (((r = e.Ca()), e.Ca(), r)) {
                  case 1:
                  case 6:
                  case 13:
                  case 14:
                  case 15:
                    n = "SDR";
                    break;
                  case 16:
                    n = "PQ";
                    break;
                  case 18:
                    n = "HLG";
                }
              }
              return { colorGamut: t, ze: n };
            }
            function uu(e, t) {
              return (
                (t = t === void 0 ? !1 : t),
                (e = e.toString(16).toUpperCase()),
                t ? e : ("0" + e).slice(-2)
              );
            }
            function er(e) {
              return (e < 10 ? "0" : "") + e;
            }
            function Ro(e) {
              this.g = e;
            }
            function ko(e) {
              for (var t = [], n = x(e.g), r = n.next(); !r.done; r = n.next()) {
                var i = t,
                  s = i.push,
                  o = r.value;
                r = $e;
                var u = o.id + 1,
                  l = o.stream.width || 0,
                  p = o.stream.height || 0;
                o.type == "audio" && (p = l = 0);
                var m = o.duration * o.timescale,
                  y = Math.floor(m / (rs + 1));
                switch (
                  ((m = Math.floor(m % (rs + 1))),
                  (u = new Uint8Array(
                    [1, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(
                      Y(Et(u, 4)),
                      [0, 0, 0, 0],
                      Y(Et(y, 4)),
                      Y(Et(m, 4)),
                      [
                        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                        0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0,
                      ],
                      Y(Et(l, 2)),
                      [0, 0],
                      Y(Et(p, 2)),
                      [0, 0],
                    ),
                  )),
                  (u = $e("tkhd", u)),
                  (l = $e),
                  (y = o.duration * o.timescale),
                  (p = Math.floor(y / (rs + 1))),
                  (y = Math.floor(y % (rs + 1))),
                  (m = o.stream.language),
                  (m =
                    ((m.charCodeAt(0) - 96) << 10) | ((m.charCodeAt(1) - 96) << 5) | (m.charCodeAt(2) - 96)),
                  (p = new Uint8Array(
                    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(
                      Y(Et(o.timescale, 4)),
                      Y(Et(p, 4)),
                      Y(Et(y, 4)),
                      Y(Et(m, 2)),
                      [0, 0],
                    ),
                  )),
                  (p = $e("mdhd", p)),
                  (y = o),
                  (m = new Uint8Array([])),
                  y.type)
                ) {
                  case "video":
                    m = TM.value();
                    break;
                  case "audio":
                    m = wM.value();
                }
                y = $e("hdlr", m);
                e: {
                  switch (o.type) {
                    case "video":
                      o = $e("minf", $e("vmhd", CM.value()), wx.value(), mx(o));
                      break e;
                    case "audio":
                      o = $e("minf", $e("smhd", MM.value()), wx.value(), mx(o));
                      break e;
                  }
                  o = new Uint8Array([]);
                }
                ((o = l("mdia", p, y, o)), (r = r("trak", u, o)), s.call(i, r));
              }
              for (
                t = Nt.apply(fn, Y(t)),
                  s = e.g[0],
                  n = $e,
                  r = s.duration * s.timescale,
                  i = Math.floor(r / (rs + 1)),
                  r = Math.floor(r % (rs + 1)),
                  i = new Uint8Array(
                    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(
                      Y(Et(s.timescale, 4)),
                      Y(Et(i, 4)),
                      Y(Et(r, 4)),
                      [
                        0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                        0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0,
                        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255,
                      ],
                    ),
                  ),
                  i = $e("mvhd", i),
                  r = [],
                  e = x(e.g),
                  l = e.next();
                !l.done;
                l = e.next()
              )
                ((o = r),
                  (u = o.push),
                  (l = new Uint8Array(
                    [0, 0, 0, 0].concat(
                      Y(Et(l.value.id + 1, 4)),
                      [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                    ),
                  )),
                  (l = $e("trex", l)),
                  u.call(o, l));
              if (((e = Nt.apply(fn, Y(r))), (e = $e("mvex", e)), (r = []), s.encrypted)) {
                for (s = x(s.stream.drmInfos), o = s.next(); !o.done; o = s.next())
                  if (((o = o.value), o.initData))
                    for (o = x(o.initData), u = o.next(); !u.done; u = o.next()) r.push(u.value.initData);
                s = Nt.apply(fn, Y(r));
              } else s = new Uint8Array([]);
              return (
                (e = n("moov", i, t, e, s)),
                (t = kM.value()),
                (n = new Uint8Array(t.byteLength + e.byteLength)),
                n.set(t),
                n.set(e, t.byteLength),
                n
              );
            }
            function mx(e) {
              var t = $e,
                n = "aac";
              e.codecs.includes("mp3")
                ? (n = "mp3")
                : e.codecs.includes("ac-3")
                  ? (n = je().se() ? "ec-3" : "ac-3")
                  : e.codecs.includes("ec-3")
                    ? (n = "ec-3")
                    : e.codecs.includes("opus") && (n = "opus");
              var r = new Uint8Array([]);
              switch (e.type) {
                case "video":
                  if (e.codecs.includes("avc1")) {
                    if (((n = e.stream.width || 0), (r = e.stream.height || 0), e.Sa.byteLength > 0))
                      var i = $e("avcC", e.Sa);
                    else {
                      i = $e;
                      for (var s = 7, o = [], u = [], l = 0, p = 0, m = 0, y = 0; y < e.Bb.length; y++) {
                        var v = vx(e.Bb[y]);
                        switch (v[0] & 31) {
                          case 7:
                            (o.push(v), (s += v.length + 2));
                            break;
                          case 8:
                            (u.push(v), (s += v.length + 2));
                        }
                      }
                      for (
                        o.length > 0 && ((l = o[0][1]), (m = o[0][2]), (p = o[0][3])),
                          s = new Uint8Array(s),
                          y = 0,
                          s[y++] = 1,
                          s[y++] = l,
                          s[y++] = m,
                          s[y++] = p,
                          s[y++] = 255,
                          s[y++] = 224 | o.length,
                          l = 0;
                        l < o.length;
                        l++
                      )
                        ((s[y++] = (o[l].length & 65280) >> 8),
                          (s[y++] = o[l].length & 255),
                          s.set(o[l], y),
                          (y += o[l].length));
                      for (s[y++] = u.length, o = 0; o < u.length; o++)
                        ((s[y++] = (u[o].length & 65280) >> 8),
                          (s[y++] = u[o].length & 255),
                          s.set(u[o], y),
                          (y += u[o].length));
                      i = i("avcC", s);
                    }
                    ((n = new Uint8Array(
                      [0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0].concat(
                        Y(Et(n, 2)),
                        Y(Et(r, 2)),
                        [
                          0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 19, 118, 105, 100, 101, 111, 106, 115,
                          45, 99, 111, 110, 116, 114, 105, 98, 45, 104, 108, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                          0, 0, 0, 0, 24, 17, 17,
                        ],
                      ),
                    )),
                      (r = "avc1"),
                      (u = yx(e)),
                      (o = new Uint8Array([])),
                      e.encrypted && ((o = Hs(e.stream, e.codecs)), (r = "encv")),
                      (r = $e(r, n, i, u, o)));
                  } else
                    e.codecs.includes("hvc1") &&
                      ((r = e.stream.width || 0),
                      (i = e.stream.height || 0),
                      (n = new Uint8Array([])),
                      e.Sa.byteLength > 0 && (n = $e("hvcC", e.Sa)),
                      (r = new Uint8Array(
                        [0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0].concat(
                          Y(Et(r, 2)),
                          Y(Et(i, 2)),
                          [
                            0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 19, 118, 105, 100, 101, 111, 106, 115,
                            45, 99, 111, 110, 116, 114, 105, 98, 45, 104, 108, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                            0, 0, 0, 0, 24, 17, 17,
                          ],
                        ),
                      )),
                      (i = "hvc1"),
                      (u = yx(e)),
                      (o = new Uint8Array([])),
                      e.encrypted && ((o = Hs(e.stream, e.codecs)), (i = "encv")),
                      (r = $e(i, r, n, u, o)));
                  break;
                case "audio":
                  (n == "mp3"
                    ? (e = $e(".mp3", lu(e)))
                    : n == "ac-3"
                      ? ((n = $e("dac3", e.Ga)),
                        (r = "ac-3"),
                        (i = new Uint8Array([])),
                        e.encrypted && ((i = Hs(e.stream, e.codecs)), (r = "enca")),
                        (e = $e(r, lu(e), n, i)))
                      : n == "ec-3"
                        ? ((n = $e("dec3", e.Ga)),
                          (r = "ec-3"),
                          (i = new Uint8Array([])),
                          e.encrypted && ((i = Hs(e.stream, e.codecs)), (r = "enca")),
                          (e = $e(r, lu(e), n, i)))
                        : n == "opus"
                          ? ((n = $e("dOps", e.Ga)),
                            (r = "Opus"),
                            (i = new Uint8Array([])),
                            e.encrypted && ((i = Hs(e.stream, e.codecs)), (r = "enca")),
                            (e = $e(r, lu(e), n, i)))
                          : (e.Ga.byteLength > 0
                              ? (n = $e("esds", e.Ga))
                              : ((n = $e),
                                (r = e.id + 1),
                                (i = e.stream.channelsCount || 2),
                                (o = e.stream.audioSamplingRate || 44100),
                                (l = ho("audio", e.codecs.split(","))),
                                (p = {
                                  96e3: 0,
                                  88200: 1,
                                  64e3: 2,
                                  48e3: 3,
                                  44100: 4,
                                  32e3: 5,
                                  24e3: 6,
                                  22050: 7,
                                  16e3: 8,
                                  12e3: 9,
                                  11025: 10,
                                  8e3: 11,
                                  7350: 12,
                                }),
                                (u = p[o]),
                                (l === "mp4a.40.5" || l === "mp4a.40.29") && (u = p[o * 2]),
                                (o = parseInt(l.split(".").pop(), 10)),
                                (r = new Uint8Array(
                                  [0, 0, 0, 0, 3, 25].concat(Y(Et(r, 2)), [
                                    0,
                                    4,
                                    17,
                                    64,
                                    21,
                                    0,
                                    0,
                                    0,
                                    0,
                                    0,
                                    0,
                                    0,
                                    0,
                                    0,
                                    0,
                                    0,
                                    5,
                                    2,
                                    (o << 3) | (u >>> 1),
                                    (u << 7) | (i << 3),
                                    6,
                                    1,
                                    2,
                                  ]),
                                )),
                                (n = n("esds", r))),
                            (r = "mp4a"),
                            (i = new Uint8Array([])),
                            e.encrypted && ((i = Hs(e.stream, e.codecs)), (r = "enca")),
                            (e = $e(r, lu(e), n, i))),
                    (r = e));
              }
              return (
                (e = $e("stsd", RM.value(), r)),
                t(
                  "stbl",
                  e,
                  $e("stts", SM.value()),
                  $e("stsc", AM.value()),
                  $e("stsz", IM.value()),
                  $e("stco", EM.value()),
                )
              );
            }
            function yx(e) {
              if (!e.Za && !e.$a) return new Uint8Array([]);
              var t = e.$a;
              return ((e = new Uint8Array([].concat(Y(Et(e.Za, 4)), Y(Et(t, 4))))), $e("pasp", e));
            }
            function lu(e) {
              return new Uint8Array(
                [
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  1,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  e.stream.channelsCount || 2,
                  0,
                  16,
                  0,
                  0,
                  0,
                  0,
                ].concat(Y(Et(e.stream.audioSamplingRate || 44100, 2)), [0, 0]),
              );
            }
            function Hs(e, t) {
              var n = $e;
              ((t = new Uint8Array([].concat(Y(Et(xx(t.split(".")[0]), 4))))), (t = $e("frma", t)));
              var r = "cenc",
                i = e.drmInfos[0];
              (i && i.encryptionScheme && (r = i.encryptionScheme),
                (r = new Uint8Array([0, 0, 0, 0].concat(Y(Et(xx(r), 4)), [0, 1, 0, 0]))),
                (r = $e("schm", r)),
                (i = $e));
              var s = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);
              e = x(e.drmInfos);
              for (var o = e.next(); !o.done; o = e.next())
                if ((o = o.value) && o.keyIds && o.keyIds.size) {
                  o = x(o.keyIds);
                  for (var u = o.next(); !u.done; u = o.next()) s = vx(u.value);
                }
              return (
                (e = new Uint8Array([0, 0, 0, 0, 0, 0, 1, 8])),
                (s = $e("tenc", e, s)),
                n("sinf", t, r, i("schi", s))
              );
            }
            function cu(e) {
              var t = [];
              e = x(e.g);
              for (var n = e.next(); !n.done; n = e.next()) {
                n = n.value;
                var r = t.push,
                  i = r.apply,
                  s = $e,
                  o = new Uint8Array([0, 0, 0, 0].concat(Y(Et(n.data ? n.data.sequenceNumber : 0, 4))));
                o = $e("mfhd", o);
                var u,
                  l = n.data ? n.data.zb : [],
                  p = new Uint8Array(4 + l.length);
                for (u = 0; u < l.length; u++) {
                  var m = l[u].flags;
                  p[u + 4] = (m.ib << 4) | (m.mb << 2) | m.jb;
                }
                l = $e("sdtp", p);
                var y = l.length + 32 + 20 + 8 + 16 + 8 + 8;
                ((p = $e),
                  (u = new Uint8Array(
                    [0, 0, 0, 58].concat(
                      Y(Et(n.id + 1, 4)),
                      [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                    ),
                  )),
                  (u = $e("tfhd", u)),
                  (m = n.data ? n.data.baseMediaDecodeTime : 0));
                var v = Math.floor(m % (rs + 1));
                ((m = new Uint8Array([1, 0, 0, 0].concat(Y(Et(Math.floor(m / (rs + 1)), 4)), Y(Et(v, 4))))),
                  (m = $e("tfdt", m)));
                var w = y;
                ((y = n.data ? n.data.zb : []), (v = y.length));
                var A = 12 + 16 * v,
                  I = new Uint8Array(A);
                for (
                  w += 8 + A,
                    I.set([n.type === "video" ? 1 : 0, 0, 15, 1].concat(Y(Et(v, 4)), Y(Et(w, 4))), 0),
                    w = 0;
                  w < v;
                  w++
                ) {
                  var C = y[w];
                  A = Et(C.duration, 4);
                  var k = Et(C.size, 4),
                    R = C.flags;
                  ((C = Et(C.sb, 4)),
                    I.set(
                      [].concat(
                        Y(A),
                        Y(k),
                        [(R.xb << 2) | R.ib, (R.mb << 6) | (R.jb << 4) | R.yb, R.hb & 61440, R.hb & 15],
                        Y(C),
                      ),
                      12 + 16 * w,
                    ));
                }
                ((y = $e("trun", I)),
                  (l = p("traf", u, m, y, l)),
                  (s = s("moof", o, l)),
                  i.call(r, t, [s, xM(n)]));
              }
              return Nt.apply(fn, Y(t));
            }
            function xM(e) {
              return (
                (e = (e.data ? e.data.zb : []).map(function (t) {
                  return t.data;
                })),
                (e = Nt.apply(fn, Y(e))),
                $e("mdat", e)
              );
            }
            function Et(e, t) {
              var n = [];
              for (--t; t >= 0; t--) n.push((e >> (8 * t)) & 255);
              return n;
            }
            function vx(e) {
              for (var t = new Uint8Array(e.length / 2), n = 0; n < e.length / 2; n += 1)
                t[n] = parseInt(String(e[n * 2] + e[n * 2 + 1]), 16);
              return t;
            }
            function xx(e) {
              for (var t = 0, n = 0; n < e.length; n += 1) t |= e.charCodeAt(n) << ((e.length - n - 1) * 8);
              return t;
            }
            function $e(e) {
              var t = It.apply(1, arguments),
                n = Tx.get(e);
              n || ((n = [e.charCodeAt(0), e.charCodeAt(1), e.charCodeAt(2), e.charCodeAt(3)]), Tx.set(e, n));
              for (var r = 8, i = t.length - 1; i >= 0; i--) r += t[i].byteLength;
              for (
                i = new Uint8Array(r),
                  i[0] = (r >> 24) & 255,
                  i[1] = (r >> 16) & 255,
                  i[2] = (r >> 8) & 255,
                  i[3] = r & 255,
                  i.set(n, 4),
                  n = 0,
                  r = 8;
                n < t.length;
                n++
              )
                (i.set(t[n], r), (r += t[n].byteLength));
              return i;
            }
            var rs = 4294967295,
              Tx = new Map(),
              TM = new wt(function () {
                return new Uint8Array([
                  0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 86, 105,
                  100, 101, 111, 72, 97, 110, 100, 108, 101, 114, 0,
                ]);
              }),
              wM = new wt(function () {
                return new Uint8Array([
                  0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111,
                  117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0,
                ]);
              }),
              SM = new wt(function () {
                return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
              }),
              AM = new wt(function () {
                return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
              }),
              EM = new wt(function () {
                return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
              }),
              IM = new wt(function () {
                return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);
              }),
              CM = new wt(function () {
                return new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]);
              }),
              MM = new wt(function () {
                return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
              }),
              RM = new wt(function () {
                return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]);
              }),
              kM = new wt(function () {
                var e = new Uint8Array([105, 115, 111, 109]),
                  t = new Uint8Array([97, 118, 99, 49]),
                  n = new Uint8Array([0, 0, 0, 1]);
                return $e("ftyp", e, n, e, t);
              }),
              wx = new wt(function () {
                var e = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1]);
                return ((e = $e("dref", e)), $e("dinf", e));
              });
            function _M(e) {
              e = Le(e);
              var t = null;
              return (
                new ct()
                  .box("moov", Fe)
                  .box("trak", Fe)
                  .box("mdia", Fe)
                  .box("minf", Fe)
                  .box("stbl", Fe)
                  .S("stsd", Ci)
                  .box("enca", function (n) {
                    return ((t = n.reader.h), Mc(n));
                  })
                  .box("sinf", Fe)
                  .box("frma", function (n) {
                    (n.parser.stop(),
                      Tp(n.reader).codec === "ec-3" && t && t.getUint16(16) !== 2 && t.setUint16(16, 2));
                  })
                  .parse(e),
                e
              );
            }
            function PM(e, t, n) {
              function r(w) {
                y.push({ box: w, Ei: 1701733217 });
              }
              function i(w) {
                y.push({ box: w, Ei: 1701733238 });
              }
              function s(w) {
                ((l = !0), w.parser.stop());
              }
              function o(w) {
                (m.push(w), Fe(w));
              }
              var u = (t = Le(t)),
                l = !1,
                p,
                m = [],
                y = [];
              if (
                (new ct()
                  .box("moov", o)
                  .box("trak", o)
                  .box("mdia", o)
                  .box("minf", o)
                  .box("stbl", o)
                  .S("stsd", function (w) {
                    ((p = w), m.push(w), Ci(w));
                  })
                  .S("encv", s)
                  .S("enca", s)
                  .S("dvav", i)
                  .S("dva1", i)
                  .S("dvh1", i)
                  .S("dvhe", i)
                  .S("dvc1", i)
                  .S("dvi1", i)
                  .S("hev1", i)
                  .S("hvc1", i)
                  .S("avc1", i)
                  .S("avc3", i)
                  .S("ac-3", r)
                  .S("ec-3", r)
                  .S("ac-4", r)
                  .S("Opus", r)
                  .S("fLaC", r)
                  .S("mp4a", r)
                  .parse(t),
                l)
              )
                return t;
              if (y.length == 0 || !p) throw (mi(t), new H(2, 3, 3019, n));
              (y.reverse(), (n = x(y)));
              for (var v = n.next(); !v.done; v = n.next())
                ((v = v.value), (u = bM(e, u, p, v.box, m, v.Ei)));
              return je().ih()
                ? ((e = new Uint8Array(t.byteLength + u.byteLength)), e.set(u), e.set(t, u.byteLength), e)
                : u;
            }
            function DM(e) {
              e = Le(e);
              var t = [];
              new ct()
                .box("mdat", function (o) {
                  t.push(o);
                })
                .parse(e);
              for (var n = [], r = 0; r < t.length; r++) {
                var i = t[r - 1],
                  s = t[r];
                n.push(LM(e.subarray(i ? i.start + i.size : 0, s.start + s.size)));
              }
              return Nt.apply(fn, Y(n));
            }
            function LM(e) {
              function t(y) {
                (o.push(y), Fe(y));
              }
              var n,
                r,
                i,
                s,
                o = [];
              if (
                (new ct()
                  .box("moof", t)
                  .box("traf", t)
                  .S("tfhd", function (y) {
                    ((n = y), (i = Pc(y.reader, y.flags)));
                  })
                  .S("trun", function (y) {
                    ((r = y), (s = bc(y.reader, y.version, y.flags)));
                  })
                  .parse(e),
                i && i.Ri !== 2)
              ) {
                var u = n.start + ns(n) + 4 + (i.rj !== null ? 8 : 0),
                  l = Bn(e);
                if (i.Ri !== null) l.setUint32(u, 2);
                else {
                  Nc(e, n.start, n.size + 4);
                  var p = l.getUint32(n.start + 8);
                  (l.setUint32(n.start + 8, p | 2),
                    s && s.qg !== null && l.setInt32(r.start + ns(r) + 4, s.qg + 4),
                    (p = e.subarray(0, u)),
                    (l = e.subarray(u)),
                    (e = new Uint8Array(e.byteLength + 4)),
                    e.set(p),
                    (p = []));
                  for (var m = 3; m >= 0; m--) p.push((2 >> (8 * m)) & 255);
                  for (
                    e.set(new Uint8Array(p), u), e.set(l, u + 4), u = x(o), l = u.next();
                    !l.done;
                    l = u.next()
                  )
                    ((l = l.value), Nc(e, l.start, l.size + 4));
                }
              }
              return e;
            }
            function bM(e, t, n, r, i, s) {
              var o = Hs(e, r.name),
                u = t.subarray(r.start, r.start + r.size);
              for (
                e = new Uint8Array(r.size + o.byteLength),
                  e.set(u, 0),
                  Bn(e).setUint32(4, s),
                  e.set(o, r.size),
                  Nc(e, 0, e.byteLength),
                  s = new Uint8Array(t.byteLength + e.byteLength),
                  r = je().jf() ? r.start : r.start + r.size,
                  o = t.subarray(r),
                  s.set(t.subarray(0, r)),
                  s.set(e, r),
                  s.set(o, r + e.byteLength),
                  t = x(i),
                  i = t.next();
                !i.done;
                i = t.next()
              )
                ((i = i.value), Nc(s, i.start, i.size + e.byteLength));
              return ((e = Bn(s, n.start)), (n = ns(n)), (t = e.getUint32(n)), e.setUint32(n, t + 1), s);
            }
            function Nc(e, t, n) {
              ((e = Bn(e, t)),
                (t = e.getUint32(0)),
                t != 0 &&
                  (t == 1 ? (e.setUint32(8, n >> 32), e.setUint32(12, n & 4294967295)) : e.setUint32(0, n)));
            }
            function NM(e) {
              function t(i) {
                (r.push({ start: i.start, size: i.size }), Fe(i));
              }
              var n = Le(e),
                r = [];
              return (
                new ct()
                  .box("moov", t)
                  .box("trak", t)
                  .box("mdia", t)
                  .box("minf", t)
                  .box("stbl", t)
                  .box("stsd", function (i) {
                    r.push({ start: i.start, size: i.size });
                    for (var s = Bn(n, i.start), o = 0; o < i.size - 3; o++) {
                      var u = s.getUint32(o);
                      u == 1633889587
                        ? s.setUint32(o, 1700998451)
                        : u == 1684103987 && s.setUint32(o, 1684366131);
                    }
                  })
                  .parse(n),
                n
              );
            }
            function Hn(e, t, n, r, i, s, o, u) {
              ((this.P = e),
                (this.startByte = t),
                (this.endByte = n),
                (this.xd = r === void 0 ? null : r),
                (this.timescale = i === void 0 ? null : i),
                (this.h = s === void 0 ? null : s),
                (this.aesKey = o === void 0 ? null : o),
                (this.g = this.mimeType = this.codecs = null),
                (this.encrypted = u === void 0 ? !1 : u));
            }
            ((Hn.prototype.Jc = function () {
              return this.startByte;
            }),
              (Hn.prototype.Hc = function () {
                return this.endByte;
              }),
              (Hn.prototype.ue = function (e) {
                this.h = e;
              }),
              (Hn.prototype.$b = function () {
                return this.h;
              }));
            function du(e, t) {
              return e === t
                ? !0
                : e && t
                  ? e.Jc() == t.Jc() &&
                    e.Hc() == t.Hc() &&
                    Ki(e.P().sort(), t.P().sort()) &&
                    pi(e.$b(), t.$b())
                  : e == t;
            }
            (de("shaka.media.InitSegmentReference", Hn),
              (Hn.prototype.getEndByte = Hn.prototype.Hc),
              (Hn.prototype.getStartByte = Hn.prototype.Jc));
            function Me(e, t, n, r, i, s, o, u, l, p, m, y, v, w, A, I) {
              for (
                p = p === void 0 ? [] : p,
                  w = w === void 0 ? Mi : w,
                  this.startTime = e,
                  this.j = this.endTime = t,
                  this.C = n,
                  this.startByte = r,
                  this.endByte = i,
                  this.ea = s,
                  this.timestampOffset = o,
                  this.appendWindowStart = u,
                  this.appendWindowEnd = l,
                  this.g = p,
                  this.tilesLayout = m === void 0 ? "" : m,
                  this.B = y === void 0 ? null : y,
                  this.h = v === void 0 ? null : v,
                  this.status = w,
                  this.preload = !1,
                  this.l = !0,
                  this.o = !1,
                  this.aesKey = A === void 0 ? null : A,
                  this.thumbnailSprite = null,
                  this.i = -1,
                  this.m = I === void 0 ? !1 : I,
                  this.je = this.Xc = !1,
                  e = x(this.g),
                  t = e.next();
                !t.done;
                t = e.next()
              )
                t.value.Ai();
              (this.m && this.g.length && this.g[this.g.length - 1].zi(),
                (this.u = this.bandwidth = this.mimeType = this.codecs = null),
                (this.F = !1));
            }
            ((h = Me.prototype),
              (h.P = function () {
                return this.C();
              }),
              (h.getStartTime = function () {
                return this.startTime;
              }),
              (h.Kj = function () {
                return this.endTime;
              }),
              (h.Jc = function () {
                return this.startByte;
              }),
              (h.Hc = function () {
                return this.endByte;
              }));
            function wp(e) {
              if (e.endByte) return e.endByte + 1 - e.startByte;
              if (e.bandwidth) {
                var t = e.bandwidth * (e.endTime - e.startTime);
                if (!isNaN(t) && t > 0) return t;
              }
              if (e.g.length > 0 && e.m)
                for (e = x(e.g), e = e.next(); !e.done; e = e.next()) {
                  wp(e.value);
                  break;
                }
              return null;
            }
            ((h.ek = function () {
              return this.tilesLayout;
            }),
              (h.dk = function () {
                return this.B;
              }),
              (h.Kc = function () {
                return this.status;
              }),
              (h.Ak = function () {
                this.status = Ax;
              }),
              (h.Ug = function () {
                this.preload = !0;
              }),
              (h.isPreload = function () {
                return this.preload;
              }),
              (h.wd = function () {
                this.l = !1;
              }),
              (h.qk = function () {
                return this.l;
              }),
              (h.Ai = function () {
                this.Xc = !0;
              }),
              (h.tk = function () {
                return this.Xc;
              }),
              (h.zi = function () {
                this.je = !0;
              }),
              (h.rk = function () {
                return this.je;
              }),
              (h.xi = function () {
                this.o = !0;
              }),
              (h.kk = function () {
                return this.o;
              }),
              (h.Mf = function (e) {
                this.thumbnailSprite = e;
              }),
              (h.bk = function () {
                return this.thumbnailSprite;
              }),
              (h.offset = function (e) {
                ((this.startTime += e), (this.endTime += e), (this.j += e));
                for (var t = x(this.g), n = t.next(); !n.done; n = t.next())
                  ((n = n.value), (n.startTime += e), (n.endTime += e), (n.j += e));
              }),
              (h.Dh = function (e) {
                this.h == null
                  ? En("Sync attempted without sync time!")
                  : ((e = this.h - e - this.startTime), Math.abs(e) >= 0.001 && this.offset(e));
              }),
              (h.ue = function (e, t) {
                ((this.u = e), (this.F = t === void 0 ? !1 : t));
              }),
              (h.$b = function (e) {
                var t = this.u;
                return ((e === void 0 || e) && this.F && (this.u = null), t);
              }));
            function Sx(e, t) {
              ((e.ea = t), (e = x(e.g)));
              for (var n = e.next(); !n.done; n = e.next()) Sx(n.value, t);
            }
            (de("shaka.media.SegmentReference", Me),
              (Me.prototype.getSegmentData = Me.prototype.$b),
              (Me.prototype.setSegmentData = Me.prototype.ue),
              (Me.prototype.syncAgainst = Me.prototype.Dh),
              (Me.prototype.offset = Me.prototype.offset),
              (Me.prototype.getThumbnailSprite = Me.prototype.bk),
              (Me.prototype.setThumbnailSprite = Me.prototype.Mf),
              (Me.prototype.hasByterangeOptimization = Me.prototype.kk),
              (Me.prototype.markAsByterangeOptimization = Me.prototype.xi),
              (Me.prototype.isLastPartial = Me.prototype.rk),
              (Me.prototype.markAsLastPartial = Me.prototype.zi),
              (Me.prototype.isPartial = Me.prototype.tk),
              (Me.prototype.markAsPartial = Me.prototype.Ai),
              (Me.prototype.isIndependent = Me.prototype.qk),
              (Me.prototype.markAsNonIndependent = Me.prototype.wd),
              (Me.prototype.isPreload = Me.prototype.isPreload),
              (Me.prototype.markAsPreload = Me.prototype.Ug),
              (Me.prototype.markAsUnavailable = Me.prototype.Ak),
              (Me.prototype.getStatus = Me.prototype.Kc),
              (Me.prototype.getTileDuration = Me.prototype.dk),
              (Me.prototype.getTilesLayout = Me.prototype.ek),
              (Me.prototype.getEndByte = Me.prototype.Hc),
              (Me.prototype.getStartByte = Me.prototype.Jc),
              (Me.prototype.getEndTime = Me.prototype.Kj),
              (Me.prototype.getStartTime = Me.prototype.getStartTime),
              (Me.prototype.getUris = Me.prototype.P));
            var Mi = 0,
              Ax = 1;
            Me.Status = { vl: Mi, Am: Ax, Wl: 2 };
            function fu(e) {
              return e.length == 1 && e.end(0) - e.start(0) < 1e-4;
            }
            function Ex(e) {
              return !e || fu(e) ? null : e.length == 1 && e.start(0) < 0 ? 0 : e.length ? e.start(0) : null;
            }
            function Oc(e) {
              return !e || fu(e) ? null : e.length ? e.end(e.length - 1) : null;
            }
            function Sp(e, t) {
              return !e || !e.length || fu(e) || t > e.end(e.length - 1) ? !1 : t >= e.start(0);
            }
            function Ix(e, t) {
              if (!e || !e.length || fu(e)) return 0;
              var n = 0;
              e = x(Ri(e));
              for (var r = e.next(); !r.done; r = e.next()) {
                var i = r.value;
                ((r = i.start), (i = i.end), i > t && (n += i - Math.max(r, t)));
              }
              return n;
            }
            function OM(e, t, n) {
              return !e || !e.length || fu(e)
                ? null
                : ((e = Ri(e).findIndex(function (r, i, s) {
                    return r.start > t && (i == 0 || s[i - 1].end - t <= n);
                  })),
                  e >= 0 ? e : null);
            }
            function Ri(e) {
              if (!e) return [];
              for (var t = [], n = 0; n < e.length; n++) t.push({ start: e.start(n), end: e.end(n) });
              return t;
            }
            function Ap() {}
            function Cx(e, t) {
              var n = document.createElement("source");
              return ((n.src = e), (n.type = t === void 0 ? "" : t), n);
            }
            function Uc(e) {
              for (var t = !1, n = e.getElementsByTagName("source"), r = n.length - 1; r >= 0; --r)
                (e.removeChild(n[r]), (t = !0));
              return (e.src && (e.removeAttribute("src"), (t = !0)), t);
            }
            function hu(e) {
              for (; e.firstChild; ) e.removeChild(e.firstChild);
            }
            function Gs() {
              return (
                _o ||
                (Ep ||
                  (Ep = new He(function () {
                    _o = null;
                  })),
                (_o =
                  document.getElementsByTagName("video")[0] || document.getElementsByTagName("audio")[0]) ||
                  (_o = document.createElement("video")),
                Ep.ka(1),
                _o)
              );
            }
            function UM(e, t) {
              var n, r, i, s, o;
              return F(function (u) {
                if (u.g == 1)
                  return "fonts" in document && "FontFace" in g ? E(u, document.fonts.ready, 2) : u.return();
                if (!("entries" in document.fonts)) return u.return();
                for (
                  n = function (l) {
                    l = l.entries();
                    for (var p = [], m = l.next(); m.done === !1; ) (p.push(m.value), (m = l.next()));
                    return p;
                  },
                    r = x(n(document.fonts)),
                    i = r.next();
                  !i.done;
                  i = r.next()
                )
                  if (((s = i.value), s.family === e && s.display === "swap")) return u.return();
                ((o = new FontFace(e, "url(" + t + ")", { display: "swap" })), document.fonts.add(o), re(u));
              });
            }
            (de("shaka.util.Dom", Ap), (Ap.removeAllChildren = hu), (Ap.clearSourceFromVideo = Uc));
            var Ep = null,
              _o = null;
            /*
 @license
 Shaka Player
 Copyright 2022 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/ function Ip() {}
            function Mx(e, t) {
              return (
                t + 10 <= e.length &&
                e[t] === 73 &&
                e[t + 1] === 68 &&
                e[t + 2] === 51 &&
                e[t + 3] < 255 &&
                e[t + 4] < 255 &&
                e[t + 6] < 128 &&
                e[t + 7] < 128 &&
                e[t + 8] < 128 &&
                e[t + 9] < 128
              );
            }
            function Rx(e, t) {
              return (
                t + 10 <= e.length &&
                e[t] === 51 &&
                e[t + 1] === 68 &&
                e[t + 2] === 73 &&
                e[t + 3] < 255 &&
                e[t + 4] < 255 &&
                e[t + 6] < 128 &&
                e[t + 7] < 128 &&
                e[t + 8] < 128 &&
                e[t + 9] < 128
              );
            }
            function Cp(e, t) {
              var n = (e[t] & 127) << 21;
              return ((n |= (e[t + 1] & 127) << 14), (n |= (e[t + 2] & 127) << 7), (n |= e[t + 3] & 127));
            }
            function FM(e) {
              var t = { key: e.type, description: "", data: "", mimeType: null, pictureType: null };
              if (e.type === "APIC") {
                if (e.size < 2 || e.data[0] !== 3) return null;
                var n = e.data.subarray(1).indexOf(0);
                if (n === -1) return null;
                var r = At(Le(e.data, 1, n)),
                  i = e.data[2 + n],
                  s = e.data.subarray(3 + n).indexOf(0);
                if (s === -1) return null;
                var o = At(Le(e.data, 3 + n, s)),
                  u;
                return (
                  r === "-->" ? (u = At(Le(e.data, 4 + n + s))) : (u = wr(e.data.subarray(4 + n + s))),
                  (t.mimeType = r),
                  (t.pictureType = i),
                  (t.description = o),
                  (t.data = u),
                  t
                );
              }
              return e.type === "TXXX"
                ? e.size < 2 || e.data[0] !== 3 || ((r = e.data.subarray(1).indexOf(0)), r === -1)
                  ? null
                  : ((n = At(Le(e.data, 1, r))),
                    (e = At(Le(e.data, 2 + r)).replace(/\0*$/, "")),
                    (t.description = n),
                    (t.data = e),
                    t)
                : e.type === "WXXX"
                  ? e.size < 2 || e.data[0] !== 3 || ((r = e.data.subarray(1).indexOf(0)), r === -1)
                    ? null
                    : ((n = At(Le(e.data, 1, r))),
                      (e = At(Le(e.data, 2 + r)).replace(/\0*$/, "")),
                      (t.description = n),
                      (t.data = e),
                      t)
                  : e.type === "PRIV"
                    ? e.size < 2 || ((n = e.data.indexOf(0)), n === -1)
                      ? null
                      : ((n = At(Le(e.data, 0, n))),
                        (t.description = n),
                        n == "com.apple.streaming.transportStreamTimestamp"
                          ? ((n = e.data.subarray(n.length + 1)),
                            (e = n[3] & 1),
                            (n = (n[4] << 23) + (n[5] << 15) + (n[6] << 7) + n[7]),
                            (n /= 45),
                            e && (n += 4772185884e-2),
                            (t.data = n))
                          : ((e = wr(e.data.subarray(n.length + 1))), (t.data = e)),
                        t)
                    : e.type[0] === "T"
                      ? e.size < 2 || e.data[0] !== 3
                        ? null
                        : ((e = At(e.data.subarray(1)).replace(/\0*$/, "")), (t.data = e), t)
                      : e.type[0] === "W"
                        ? ((e = At(e.data).replace(/\0*$/, "")), (t.data = e), t)
                        : e.data
                          ? ((t.data = wr(e.data)), t)
                          : null;
            }
            function zs(e) {
              for (var t = 0, n = []; Mx(e, t); ) {
                var r = Cp(e, t + 6);
                for ((e[t + 5] >> 6) & 1 && (t += 10), t += 10, r = t + r; t + 10 < r; ) {
                  var i = e.subarray(t),
                    s = Cp(i, 4);
                  ((i = {
                    type: String.fromCharCode(i[0], i[1], i[2], i[3]),
                    size: s,
                    data: i.subarray(10, 10 + s),
                  }),
                    (s = FM(i)) && n.push(s),
                    (t += i.size + 10));
                }
                Rx(e, t) && (t += 10);
              }
              return n;
            }
            function Po(e, t) {
              for (var n = (t = t === void 0 ? 0 : t), r = 0; Mx(e, t); )
                ((e[t + 5] >> 6) & 1 && (r += 10),
                  (r += 10),
                  (r += Cp(e, t + 6)),
                  Rx(e, t + 10) && (r += 10),
                  (t += r));
              return r > 0 ? e.subarray(n, n + r) : new Uint8Array([]);
            }
            (de("shaka.util.Id3Utils", Ip), (Ip.getID3Data = Po), (Ip.getID3Frames = zs));
            function kx(e) {
              return new Date(Date.UTC(1900, 0, 1, 0, 0, 0, 0) + e).getTime();
            }
            function ki(e, t) {
              if (((this.j = e), t !== void 0 && t)) {
                t = new Uint8Array(e.byteLength);
                for (var n = 0, r = 0; r < e.byteLength; r++)
                  (r >= 2 && e[r] == 3 && e[r - 1] == 0 && e[r - 2] == 0) || ((t[n] = e[r]), n++);
                this.j = Le(t, 0, n);
              }
              ((this.i = this.j.byteLength), (this.g = this.h = 0));
            }
            function Mp(e) {
              var t = e.j.byteLength - e.i,
                n = new Uint8Array(4),
                r = Math.min(4, e.i);
              r !== 0 && (n.set(e.j.subarray(t, t + r)), (e.h = new yt(n, 0).U()), (e.g = r * 8), (e.i -= r));
            }
            function tr(e, t) {
              if (e.g <= t) {
                t -= e.g;
                var n = Math.floor(t / 8);
                ((t -= n * 8), (e.g -= n), Mp(e));
              }
              ((e.h <<= t), (e.g -= t));
            }
            function Xe(e, t) {
              var n = Math.min(e.g, t),
                r = e.h >>> (32 - n);
              return (
                (e.g -= n),
                e.g > 0 ? (e.h <<= n) : e.i > 0 && Mp(e),
                (n = t - n),
                n > 0 ? (r << n) | Xe(e, n) : r
              );
            }
            function Rp(e) {
              var t;
              for (t = 0; t < e.g; ++t)
                if ((e.h & (2147483648 >>> t)) !== 0) return ((e.h <<= t), (e.g -= t), t);
              return (Mp(e), t + Rp(e));
            }
            function un(e) {
              tr(e, 1 + Rp(e));
            }
            function Se(e) {
              var t = Rp(e);
              return Xe(e, t + 1) - 1;
            }
            function Do(e) {
              return ((e = Se(e)), 1 & e ? (1 + e) >>> 1 : -1 * (e >>> 1));
            }
            function Ie(e) {
              return Xe(e, 1) === 1;
            }
            function rt(e) {
              return Xe(e, 8);
            }
            function Fc(e, t) {
              for (var n = 8, r = 8, i = 0; i < t; i++)
                (r !== 0 && ((r = Do(e)), (r = (n + r + 256) % 256)), (n = r === 0 ? n : r));
            }
            function BM(e) {
              return (rt(e), Se(e), Se(e));
            }
            de("shaka.util.ExpGolomb", ki);
            function pt() {
              ((this.I = null),
                (this.J = !1),
                (this.m = this.K = null),
                (this.j = []),
                (this.g = []),
                (this.C = this.F = null),
                (this.i = []),
                (this.h = []),
                (this.G = null),
                (this.l = []),
                (this.B = this.H = this.o = this.u = null));
            }
            ((h = pt.prototype),
              (h.clearData = function () {
                ((this.j = []), (this.g = []), (this.i = []), (this.h = []), (this.l = []));
              }),
              (h.Kf = function (e) {
                (this.B != null && this.B != e && (this.o = this.u = null), (this.B = e));
              }),
              (h.parse = function (e) {
                if (e.length < 564) return this;
                for (
                  var t = Math.max(0, _p(e)), n = e.length - ((e.length + t) % 188), r = !1, i = t;
                  i < n;
                  i += 188
                )
                  if (e[i] == 71) {
                    var s = !!(e[i + 1] & 64),
                      o = ((e[i + 1] & 31) << 8) + e[i + 2];
                    if ((e[i + 3] & 48) >> 4 > 1) {
                      var u = i + 5 + e[i + 4];
                      if (u == i + 188) continue;
                    } else u = i + 4;
                    switch (o) {
                      case 0:
                        (s && (u += e[u] + 1), (this.I = ((e[u + 10] & 31) << 8) | e[u + 11]));
                        break;
                      case 17:
                      case 8191:
                        break;
                      case this.I:
                        (s && (u += e[u] + 1),
                          (s = e),
                          (o = { audio: -1, video: -1, gf: -1, audioCodec: "", videoCodec: "" }));
                        var l = u + 3 + (((s[u + 1] & 15) << 8) | s[u + 2]) - 4;
                        for (u += 12 + (((s[u + 10] & 15) << 8) | s[u + 11]); u < l; ) {
                          var p = ((s[u + 1] & 31) << 8) | s[u + 2],
                            m = ((s[u + 3] & 15) << 8) | s[u + 4];
                          switch (s[u]) {
                            case 6:
                              if (m > 0)
                                for (var y = u + 5, v = m; v > 2; ) {
                                  var w = s[y + 1] + 2;
                                  switch (s[y]) {
                                    case 5:
                                      var A = s.subarray(y + 2, y + w);
                                      ((A = ec.value()(A)),
                                        o.audio == -1 && A === "Opus"
                                          ? ((o.audio = p), (o.audioCodec = "opus"))
                                          : o.video == -1 &&
                                            A === "AV01" &&
                                            ((o.video = p), (o.videoCodec = "av1")));
                                      break;
                                    case 106:
                                      o.audio == -1 && ((o.audio = p), (o.audioCodec = "ac3"));
                                      break;
                                    case 122:
                                      o.audio == -1 && ((o.audio = p), (o.audioCodec = "ec3"));
                                      break;
                                    case 124:
                                      o.audio == -1 && ((o.audio = p), (o.audioCodec = "aac"));
                                      break;
                                    case 127:
                                      o.audioCodec == "opus" &&
                                        ((A = null),
                                        s[y + 2] === 128 && (A = s[y + 3]),
                                        A != null &&
                                          (this.H = {
                                            channelCount: (A & 15) === 0 ? 2 : A & 15,
                                            uj: A,
                                            sampleRate: 48e3,
                                          }));
                                  }
                                  ((y += w), (v -= w));
                                }
                              break;
                            case 15:
                              o.audio == -1 && ((o.audio = p), (o.audioCodec = "aac"));
                              break;
                            case 17:
                              o.audio == -1 && ((o.audio = p), (o.audioCodec = "aac-loas"));
                              break;
                            case 21:
                              o.gf == -1 && (o.gf = p);
                              break;
                            case 27:
                              o.video == -1 && ((o.video = p), (o.videoCodec = "avc"));
                              break;
                            case 3:
                            case 4:
                              o.audio == -1 && ((o.audio = p), (o.audioCodec = "mp3"));
                              break;
                            case 36:
                              o.video == -1 && ((o.video = p), (o.videoCodec = "hvc"));
                              break;
                            case 129:
                              o.audio == -1 && ((o.audio = p), (o.audioCodec = "ac3"));
                              break;
                            case 132:
                            case 135:
                              o.audio == -1 && ((o.audio = p), (o.audioCodec = "ec3"));
                          }
                          u += m + 5;
                        }
                        ((s = o),
                          s.video != -1 && ((this.K = s.video), (this.m = s.videoCodec)),
                          s.audio != -1 && ((this.F = s.audio), (this.C = s.audioCodec)),
                          s.gf != -1 && (this.G = s.gf),
                          r && !this.J && ((r = !1), (i = t - 188)),
                          (this.J = !0));
                        break;
                      case this.K:
                        ((u = e.subarray(u, i + 188)),
                          s
                            ? this.j.push([u])
                            : this.j.length &&
                              this.j[this.j.length - 1] &&
                              this.j[this.j.length - 1].push(u));
                        break;
                      case this.F:
                        ((u = e.subarray(u, i + 188)),
                          s
                            ? this.i.push([u])
                            : this.i.length &&
                              this.i[this.i.length - 1] &&
                              this.i[this.i.length - 1].push(u));
                        break;
                      case this.G:
                        ((u = e.subarray(u, i + 188)),
                          s
                            ? this.l.push([u])
                            : this.l.length &&
                              this.l[this.l.length - 1] &&
                              this.l[this.l.length - 1].push(u));
                        break;
                      default:
                        r = !0;
                    }
                  }
                return this;
              }));
            function kp(e, t) {
              if (((t[0] << 16) | (t[1] << 8) | t[2]) !== 1) return null;
              var n = {
                data: new Uint8Array(0),
                packetLength: (t[4] << 8) | t[5],
                pts: null,
                dts: null,
                nalus: [],
              };
              if (n.packetLength && n.packetLength > t.byteLength - 6) return null;
              var r = t[7];
              if (r & 192) {
                var i =
                  (t[9] & 14) * 536870912 +
                  (t[10] & 255) * 4194304 +
                  (t[11] & 254) * 16384 +
                  (t[12] & 255) * 128 +
                  (t[13] & 254) / 2;
                (e.u == null && (e.u = i),
                  (n.pts = Px(i, e.u)),
                  (e.u = n.pts),
                  (n.dts = n.pts),
                  r & 64 &&
                    ((r =
                      (t[14] & 14) * 536870912 +
                      (t[15] & 255) * 4194304 +
                      (t[16] & 254) * 16384 +
                      (t[17] & 255) * 128 +
                      (t[18] & 254) / 2),
                    e.o == null && (e.o = r),
                    (n.dts = n.pts != i ? Px(r, e.o) : r)),
                  (e.o = n.dts));
              }
              return ((e = t[8] + 9), t.byteLength <= e ? null : ((n.data = t.subarray(e)), n));
            }
            ((h.Hk = function (e) {
              return (
                Je("TsParser.parseAvcNalus", "Please use parseNalus function instead."),
                this.$g(e, { le: null, state: null })
              );
            }),
              (h.$g = function (e, t) {
                var n = e.pts ? e.pts / 9e4 : null;
                e = e.data;
                var r = e.byteLength,
                  i = 1;
                this.m == "hvc" && (i = 2);
                var s = t.state || 0,
                  o = s,
                  u = 0,
                  l = [],
                  p = -1,
                  m = 0;
                for (
                  s == -1 &&
                  ((p = 0), (m = this.m == "hvc" ? (e[0] >> 1) & 63 : e[0] & 31), (s = 0), (u = 1));
                  u < r;
                ) {
                  var y = e[u++];
                  s
                    ? s === 1
                      ? (s = y ? 0 : 2)
                      : y
                        ? y == 1
                          ? ((y = u - s - 1),
                            p >= 0
                              ? l.push({
                                  data: e.subarray(p + i, y),
                                  fullData: e.subarray(p, y),
                                  type: m,
                                  time: n,
                                  state: null,
                                })
                              : (s = l.length ? l[l.length - 1] : t.le) &&
                                (o &&
                                  u <= 4 - o &&
                                  s.state &&
                                  ((s.data = s.data.subarray(0, s.data.byteLength - o)),
                                  (s.fullData = s.fullData.subarray(0, s.fullData.byteLength - o))),
                                y > 0 &&
                                  ((y = e.subarray(0, y)),
                                  (s.data = Nt(s.data, y)),
                                  (s.fullData = Nt(s.fullData, y)),
                                  (s.state = 0))),
                            u < r
                              ? ((m = this.m == "hvc" ? (e[u] >> 1) & 63 : e[u] & 31), (p = u), (s = 0))
                              : (s = -1))
                          : (s = 0)
                        : (s = 3)
                    : (s = y ? 0 : 1);
                }
                return (
                  p >= 0 &&
                    s >= 0 &&
                    l.push({
                      data: e.subarray(p + i, r),
                      fullData: e.subarray(p, r),
                      type: m,
                      time: n,
                      state: s,
                    }),
                  !l.length &&
                    t.le &&
                    (n = l.length ? l[l.length - 1] : t.le) &&
                    ((n.data = Nt(n.data, e)), (n.fullData = Nt(n.fullData, e))),
                  (t.state = s),
                  l
                );
              }),
              (h.getMetadata = function () {
                for (var e = [], t = x(this.l), n = t.next(); !n.done; n = t.next())
                  ((n = Nt.apply(fn, Y(n.value))),
                    (n = kp(this, n)) &&
                      e.push({
                        cueTime: n.pts ? n.pts / 9e4 : null,
                        data: n.data,
                        frames: zs(n.data),
                        dts: n.dts,
                        pts: n.pts,
                      }));
                return e;
              }),
              (h.ub = function () {
                if (this.i.length && !this.h.length)
                  for (var e = x(this.i), t = e.next(); !t.done; t = e.next()) {
                    var n = Nt.apply(fn, Y(t.value)),
                      r = kp(this, n);
                    ((t = this.h.length ? this.h[this.h.length - 1] : null),
                      r && r.pts != null && r.dts != null && (!t || (t.pts != r.pts && t.dts != r.dts))
                        ? this.h.push(r)
                        : this.h.length &&
                          (n = r ? r.data : n) &&
                          ((t = this.h.pop()), (t.data = Nt(t.data, n)), this.h.push(t)));
                  }
                return this.h;
              }),
              (h.ud = function (e) {
                if (((e = e === void 0 ? !0 : e), this.j.length && !this.g.length)) {
                  for (var t = x(this.j), n = t.next(); !n.done; n = t.next()) {
                    var r = Nt.apply(fn, Y(n.value)),
                      i = kp(this, r);
                    ((n = this.g.length ? this.g[this.g.length - 1] : null),
                      i && i.pts != null && i.dts != null && (!n || (n.pts != i.pts && n.dts != i.dts))
                        ? this.g.push(i)
                        : this.g.length &&
                          (r = i ? i.data : r) &&
                          ((n = this.g.pop()), (n.data = Nt(n.data, r)), this.g.push(n)));
                  }
                  if (e) {
                    for (
                      t = { le: null, state: null }, n = [], r = x(this.g), i = r.next();
                      !i.done;
                      i = r.next()
                    )
                      ((i = i.value),
                        (i.nalus = this.$g(i, t)),
                        i.nalus.length && (n.push(i), (t.le = i.nalus[i.nalus.length - 1])));
                    this.g = n;
                  }
                }
                return e ? this.g : ((e = this.g), (this.g = []), e);
              }),
              (h.getStartTime = function (e) {
                if (e == "audio") {
                  e = null;
                  var t = this.ub();
                  return (t.length && ((e = t[0]), (e = Math.min(e.dts, e.pts) / 9e4)), e);
                }
                return e == "video"
                  ? ((e = null),
                    (t = this.ud(!1)),
                    t.length && ((e = t[0]), (e = Math.min(e.dts, e.pts) / 9e4)),
                    e)
                  : null;
              }),
              (h.Yd = function () {
                return { audio: this.C, video: this.m };
              }),
              (h.ef = function () {
                for (var e = [], t = x(this.ud()), n = t.next(); !n.done; n = t.next())
                  e.push.apply(e, Y(n.value.nalus));
                return e;
              }),
              (h.hk = function () {
                Je("TsParser.getVideoResolution", "Please use getVideoInfo function instead.");
                var e = this.Ng();
                return { height: e.height, width: e.width };
              }),
              (h.Ng = function () {
                return this.m == "hvc" ? VM(this) : jM(this);
              }));
            function _x(e) {
              var t = e.ud();
              return t.length > 1 && ((e = t[0].pts), (t = t[1].pts), !isNaN(t - e))
                ? String(Math.abs((1 / (t - e)) * 9e4))
                : null;
            }
            function jM(e) {
              var t = { height: null, width: null, codec: null, frameRate: null },
                n = e.ef();
              if (
                !n.length ||
                ((n = n.find(function (w) {
                  return w.type == 7;
                })),
                !n)
              )
                return t;
              n = new ki(n.data);
              var r = rt(n),
                i = rt(n),
                s = rt(n);
              if ((un(n), HM.includes(r))) {
                var o = Se(n);
                if ((o === 3 && tr(n, 1), un(n), un(n), tr(n, 1), Ie(n))) {
                  o = o !== 3 ? 8 : 12;
                  for (var u = 0; u < o; u++) Ie(n) && (u < 6 ? Fc(n, 16) : Fc(n, 64));
                }
              }
              if ((un(n), (o = Se(n)), o === 0)) Se(n);
              else if (o === 1) for (tr(n, 1), un(n), un(n), o = Se(n), u = 0; u < o; u++) un(n);
              (un(n), tr(n, 1), (o = Se(n)), (u = Se(n)));
              var l = Xe(n, 1);
              (l === 0 && tr(n, 1), tr(n, 1));
              var p = 0,
                m = 0,
                y = 0,
                v = 0;
              return (
                Ie(n) && ((p = Se(n)), (m = Se(n)), (y = Se(n)), (v = Se(n))),
                (t.height = String((2 - l) * (u + 1) * 16 - y * 2 - v * 2)),
                (t.width = String((o + 1) * 16 - p * 2 - m * 2)),
                (t.codec =
                  "avc1." +
                  ("0" + r.toString(16).toUpperCase()).slice(-2) +
                  ("0" + i.toString(16).toUpperCase()).slice(-2) +
                  ("0" + s.toString(16).toUpperCase()).slice(-2)),
                (t.frameRate = _x(e)),
                t
              );
            }
            function VM(e) {
              var t = { height: null, width: null, codec: null, frameRate: null },
                n = e.ef();
              if (
                !n.length ||
                ((n = n.find(function (G) {
                  return G.type == 33;
                })),
                !n)
              )
                return t;
              var r = new ki(n.fullData, !0);
              (rt(r), rt(r), Xe(r, 4));
              var i = Xe(r, 3);
              Ie(r);
              var s = Xe(r, 2),
                o = Xe(r, 1),
                u = Xe(r, 5),
                l = Xe(r, 32);
              n = rt(r);
              for (
                var p = rt(r), m = rt(r), y = rt(r), v = rt(r), w = rt(r), A = rt(r), I = [], C = [], k = 0;
                k < i;
                k++
              )
                (I.push(Ie(r)), C.push(Ie(r)));
              if (i > 0) for (k = i; k < 8; k++) Xe(r, 2);
              for (k = 0; k < i; k++) (I[k] && Xe(r, 88), C[k] && rt(r));
              (Se(r), (i = Se(r)), i == 3 && Xe(r, 1), (I = Se(r)), (C = Se(r)));
              var R = (k = 0),
                L = 0,
                U = 0;
              return (
                Ie(r) && ((k += Se(r)), (R += Se(r)), (L += Se(r)), (U += Se(r))),
                (t.width = String(I - (k + R) * (i === 1 || i === 2 ? 2 : 1))),
                (t.height = String(C - (L + U) * (i === 1 ? 2 : 1))),
                (r = (function (G) {
                  for (var b = 0, B = 0; B < 32; B++) b |= ((G >> B) & 1) << (31 - B);
                  return b >>> 0;
                })(l)),
                (o = o == 1 ? "H" : "L"),
                (s = "hvc1" + ("." + ["", "A", "B", "C"][s] + u)),
                (s += "." + r.toString(16).toUpperCase()),
                (s += "." + o + A),
                w && (s += "." + w.toString(16).toUpperCase()),
                v && (s += "." + v.toString(16).toUpperCase()),
                y && (s += "." + y.toString(16).toUpperCase()),
                m && (s += "." + m.toString(16).toUpperCase()),
                p && (s += "." + p.toString(16).toUpperCase()),
                n && (s += "." + n.toString(16).toUpperCase()),
                (t.codec = s),
                (t.frameRate = _x(e)),
                t
              );
            }
            function Px(e, t) {
              var n = 1;
              for (e > t && (n = -1); Math.abs(t - e) > 4294967296; ) e += n * 8589934592;
              return e;
            }
            function Lo(e) {
              return !(_p(e) < 0);
            }
            function _p(e) {
              for (var t = Math.min(1e3, e.length - 564), n = 0; n < t; ) {
                if (e[n] == 71 && e[n + 188] == 71 && e[n + 376] == 71) return n;
                n++;
              }
              return -1;
            }
            (de("shaka.util.TsParser", pt),
              (pt.syncOffset = _p),
              (pt.probe = Lo),
              (pt.prototype.getVideoInfo = pt.prototype.Ng),
              (pt.prototype.getVideoResolution = pt.prototype.hk),
              (pt.prototype.getVideoNalus = pt.prototype.ef),
              (pt.prototype.getCodecs = pt.prototype.Yd),
              (pt.prototype.getStartTime = pt.prototype.getStartTime),
              (pt.prototype.getVideoData = pt.prototype.ud),
              (pt.prototype.getAudioData = pt.prototype.ub),
              (pt.prototype.getMetadata = pt.prototype.getMetadata),
              (pt.prototype.parseNalus = pt.prototype.$g),
              (pt.prototype.parseAvcNalus = pt.prototype.Hk),
              (pt.prototype.parse = pt.prototype.parse),
              (pt.prototype.setDiscontinuitySequence = pt.prototype.Kf),
              (pt.prototype.clearData = pt.prototype.clearData),
              (pt.Timescale = 9e4));
            var HM = [100, 110, 122, 244, 44, 83, 86, 118, 128, 138, 139, 134];
            function Dx(e, t, n, r, i) {
              var s = this;
              ((this.g = e),
                (this.O = n),
                (this.B = r),
                (this.ba = t),
                (this.l = new Map()),
                (this.G = new Map()),
                (this.Ta = new Map()),
                (this.h = null),
                (this.Fa = !1),
                (this.C = i || null),
                (this.o = new Map()),
                (this.u = new tt()),
                (this.j = new Map()),
                (this.K = null),
                (this.M = new lt()),
                (this.Da = ""),
                (this.ob = !1),
                (this.za = !0),
                (this.N = !1),
                (this.F = this.R = null),
                (this.i = Pp(this, this.M)),
                (this.Ua = this.H = !1),
                (this.I = new Io(function () {
                  return XM(s);
                })),
                (this.J = !1),
                (this.X = "UNKNOWN"),
                (this.eb = this.kb = !1),
                (this.ab = new lt()),
                (this.m = !1),
                (this.ya = null),
                (this.$ = new Map()),
                (this.oa = this.T = this.va = this.V = null),
                (this.ma = new lt()),
                this.g.remote &&
                  ((this.N = this.g.remote.state != "disconnected"),
                  this.u.D(this.g.remote, "connect", function () {
                    s.N = s.g.remote.state != "disconnected";
                  }),
                  this.u.D(this.g.remote, "connecting", function () {
                    s.N = s.g.remote.state != "disconnected";
                  }),
                  this.u.D(this.g.remote, "disconnect", function () {
                    s.N = s.g.remote.state != "disconnected";
                  })));
            }
            function Pp(e, t) {
              if (((e.za = !0), g.ManagedMediaSource)) {
                e.F || (e.g.disableRemotePlayback = !0);
                var n = new ManagedMediaSource();
                (e.u.D(n, "startstreaming", function () {
                  e.za = !0;
                }),
                  e.u.D(n, "endstreaming", function () {
                    e.za = !1;
                  }));
              } else n = new MediaSource();
              return (
                e.u.Aa(n, "sourceopen", function () {
                  (URL.revokeObjectURL(e.Da), t.resolve());
                }),
                e.u.Aa(e.g, "playing", function () {
                  e.ob = !0;
                }),
                (e.Da = Np(n)),
                e.B.useSourceElements
                  ? (e.g.removeAttribute("src"),
                    e.R && e.g.removeChild(e.R),
                    e.F && e.g.removeChild(e.F),
                    (e.R = Cx(e.Da)),
                    e.g.appendChild(e.R),
                    e.F && e.g.appendChild(e.F),
                    e.g.load())
                  : (e.g.src = e.Da),
                n
              );
            }
            function GM(e, t, n) {
              e.g &&
                g.ManagedMediaSource &&
                e.i &&
                e.B.useSourceElements &&
                (e.F && e.g.removeChild(e.F),
                (e.F = Cx(t, n)),
                e.g.appendChild(e.F),
                (e.g.disableRemotePlayback = !1));
            }
            function zM() {
              var e =
                  'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.20000000.L153.B0",video/mp4; codecs="hvc1.2.4.L120.b0",video/mp4; codecs="hvc1.2.4.L123.b0",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="av01.0.31M.10.0.111.09.16.09.0",video/mp4; codecs="av01.0.31M.10.0.112.09.18.09.0",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.08.01",video/mp4; codecs="dav1.10.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.03",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",audio/mp4; codecs="apac.31.00",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'
                    .split(",")
                    .concat(Y(Si)),
                t = {};
              (je(), (e = x(e)));
              for (var n = e.next(); !n.done; n = e.next()) {
                if (((n = n.value), Za(n))) t[n] = !0;
                else if (ui()) {
                  var r = Qn(n),
                    i = ru(Vn(n), r);
                  ((r = Rt(r, i)), (t[n] = In(r) || !!To(r)));
                } else t[n] = Gs().canPlayType(n) != "";
                ((r = n.split(";")[0]), (t[r] = t[r] || t[n]));
              }
              return t;
            }
            ((h = Dx.prototype),
              (h.destroy = function () {
                return this.I.destroy();
              }));
            function XM(e) {
              var t, n, r, i, s, o, u, l, p, m, y, v, w, A, I;
              return F(function (C) {
                if (C.g == 1) {
                  for (t = [], n = x(e.o), r = n.next(); !r.done; r = n.next())
                    for (
                      i = r.value,
                        s = x(i),
                        o = s.next().value,
                        u = s.next().value,
                        l = u[0],
                        p = o,
                        e.o.set(p, u.slice(0, 1)),
                        l && t.push(l.p.catch(PC)),
                        m = x(u.slice(1)),
                        y = m.next();
                      !y.done;
                      y = m.next()
                    )
                      ((v = y.value), v.p.reject(new H(2, 7, 7003, void 0)));
                  return (e.h && t.push(e.h.destroy()), E(C, Promise.all(t), 2));
                }
                for (w = x(e.j.values()), A = w.next(); !A.done; A = w.next()) ((I = A.value), I.destroy());
                (e.u && (e.u.release(), (e.u = null)),
                  e.g && e.F && e.g.removeChild(e.F),
                  e.g && e.R && (e.g.removeChild(e.R), e.g.load(), (e.g.disableRemotePlayback = !1)),
                  (e.g = null),
                  (e.R = null),
                  (e.F = null),
                  (e.B = null),
                  (e.i = null),
                  (e.h = null),
                  (e.ba = null),
                  e.l.clear(),
                  e.Ta.clear(),
                  e.j.clear(),
                  (e.K = null),
                  e.o.clear(),
                  (e.C = null),
                  e.$.clear(),
                  (e.O = null),
                  re(C));
              });
            }
            h.init = function (e, t, n, r) {
              ((t = t === void 0 ? !1 : t), (n = n === void 0 ? "UNKNOWN" : n), (r = r === void 0 ? !1 : r));
              var i = this,
                s,
                o,
                u,
                l,
                p,
                m;
              return F(function (y) {
                if (y.g == 1) return ((s = Ot), E(y, i.M, 2));
                if (y.g != 3)
                  return !Xs(i) && !is(i)
                    ? y.A(3)
                    : (En("Expected MediaSource to be open during init(); reopening the media source."),
                      (i.M = new lt()),
                      (i.i = Pp(i, i.M)),
                      E(y, i.M, 3));
                for (
                  i.J = t,
                    i.X = n,
                    i.kb = r,
                    i.eb = !i.J && i.X == "HLS" && !i.kb,
                    i.$.clear(),
                    i.V = null,
                    i.va = null,
                    i.T = null,
                    i.oa = null,
                    i.ma = new lt(),
                    o = x(e.keys()),
                    u = o.next();
                  !u.done;
                  u = o.next()
                )
                  ((l = u.value),
                    (p = e.get(l)),
                    Bc(i, l, p, p.codecs),
                    i.m ? (i.o.set(s.aa, []), i.o.set(s.wa, [])) : i.o.set(l, []));
                ((m = e.get(s.aa)) && m.isAudioMuxedInVideo && (i.m = !0), re(y));
              });
            };
            function Bc(e, t, n, r) {
              t == "audio" && r && (r = ru(r, n.mimeType));
              var i = Rt(n.mimeType, r);
              if (t == Ve) jc(e, i, e.J, n.external);
              else {
                var s = e.B.forceTransmux;
                (!In(i) || (!e.J && Si.includes(i))) && (s = !0);
                var o = hc(n.mimeType, r);
                if (s) {
                  if (
                    ((s = jn("audio", (r || "").split(","))), (r = jn("video", (r || "").split(","))), s && r)
                  ) {
                    ((e.m = !0), Bc(e, "audio", n, s), Bc(e, "video", n, r));
                    return;
                  }
                  (r = To(o)) && ((i = r()), e.j.set(t, i), (i = i.convertCodecs(t, o)));
                }
                ((o = i + e.B.addExtraFeaturesToSourceBuffer(i)), ht(e.I));
                try {
                  var u = e.i.addSourceBuffer(o);
                } catch (l) {
                  throw new H(
                    2,
                    3,
                    3015,
                    l,
                    "The mediaSource_ status was " + e.i.readyState + " expected 'open'",
                    null,
                  );
                }
                (e.J && (u.mode = iR),
                  e.u.D(u, "error", function () {
                    var l = e.o.get(t)[0];
                    l.p.reject(new H(2, 3, 3014, e.g.error ? e.g.error.code : 0, l.uri));
                  }),
                  e.u.D(u, "updateend", function () {
                    return ss(e, t);
                  }),
                  e.l.set(t, u),
                  e.G.set(t, i),
                  e.Ta.set(t, !!n.drmInfos.length));
              }
            }
            h.configure = function (e) {
              ((this.B = e), this.h && (this.h.B = e.modifyCueCallback));
            };
            function Lx(e) {
              return e.za && !e.N && !e.H;
            }
            function jc(e, t, n, r) {
              e.h || ((e.h = new Ai(e.ba)), e.h && (e.h.B = e.B.modifyCueCallback));
              var i = e.h;
              ((r = r || e.Fa),
                (e = e.X),
                t == "application/cea-608" || t == "application/cea-708"
                  ? (i.i = null)
                  : ((i.i = eu.get(t)()),
                    i.i.setSequenceMode
                      ? i.i.setSequenceMode(n)
                      : Je(
                          "Text parsers w/ setSequenceMode",
                          'Text parsers should have a "setSequenceMode" method!',
                        ),
                    i.i.setManifestType
                      ? i.i.setManifestType(e)
                      : Je(
                          "Text parsers w/ setManifestType",
                          'Text parsers should have a "setManifestType" method!',
                        ),
                    (i.C = r)));
            }
            function Xs(e) {
              return e.H ? !1 : e.i ? e.i.readyState == "ended" : !0;
            }
            function is(e) {
              return e.H ? !1 : e.i ? e.i.readyState == "closed" : !0;
            }
            function Dp(e, t) {
              return e.l.size ? (t == Ve ? e.h.g : Ex(bo(e, t))) : null;
            }
            function Ws(e, t) {
              return e.l.size ? (t == Ve ? e.h.h : Oc(bo(e, t))) : null;
            }
            function WM(e, t, n) {
              return t == Ve
                ? ((e = e.h), e.h == null || e.h < n ? 0 : e.h - Math.max(n, e.g))
                : ((e = bo(e, t)), Ix(e, n));
            }
            h.Gc = function () {
              var e = {
                total: this.H ? [] : Ri(this.g.buffered),
                audio: Ri(bo(this, "audio")),
                video: Ri(bo(this, "video")),
                text: [],
              };
              if (this.h) {
                var t = this.h.g,
                  n = this.h.h;
                t != null && n != null && e.text.push({ start: t, end: n });
              }
              return e;
            };
            function bo(e, t) {
              if (e.H || e.N || is(e)) return null;
              try {
                return e.l.get(t).buffered;
              } catch (n) {
                return (e.l.has(t), null);
              }
            }
            function KM(e, t, n, r, i, s, o) {
              o = o === void 0 ? !1 : o;
              var u = null,
                l = [],
                p = Le(n);
              if (Si.includes(s))
                ((n = zs(p)),
                  n.length &&
                    r &&
                    ((o = n.find(function (A) {
                      return A.description === "com.apple.streaming.transportStreamTimestamp";
                    })) &&
                      typeof o.data == "number" &&
                      (u = Math.round(o.data) / 1e3),
                    e.O.onMetadata(
                      [{ cueTime: r.startTime, data: p, frames: n, dts: r.startTime, pts: r.startTime }],
                      0,
                      r.endTime,
                    )));
              else if (s.includes("/mp4") && r && r.ea) {
                p = new ct();
                var m =
                  (i.emsgSchemeIdUris != null && i.emsgSchemeIdUris.length > 0) || e.B.dispatchAllEmsgBoxes;
                m &&
                  p.S("emsg", function (A) {
                    var I = i.emsgSchemeIdUris;
                    if (A.version === 0)
                      var C = A.reader.Yc(),
                        k = A.reader.Yc(),
                        R = A.reader.U(),
                        L = A.reader.U(),
                        U = A.reader.U(),
                        G = A.reader.U(),
                        b = r.startTime + L / R;
                    else
                      ((R = A.reader.U()),
                        (b = A.reader.Ed() / R + r.timestampOffset),
                        (L = b - r.startTime),
                        (U = A.reader.U()),
                        (G = A.reader.U()),
                        (C = A.reader.Yc()),
                        (k = A.reader.Yc()));
                    ((A = A.reader.Tb(A.reader.getLength() - A.reader.Pa(), !0)),
                      ((I && I.includes(C)) || e.B.dispatchAllEmsgBoxes) &&
                        (C == "urn:mpeg:dash:event:2012"
                          ? e.O.Gk()
                          : ((I = b + U / R),
                            e.O.Ek({
                              startTime: b,
                              endTime: I,
                              schemeIdUri: C,
                              value: k,
                              timescale: R,
                              presentationTimeDelta: L,
                              eventDuration: U,
                              id: G,
                              messageData: A,
                            }),
                            (C == "https://aomedia.org/emsg/ID3" ||
                              C == "https://developer.apple.com/streaming/emsg-id3") &&
                              ((R = zs(A)),
                              R.length &&
                                e.O.onMetadata(
                                  [{ cueTime: b, data: A, frames: R, dts: b, pts: b }],
                                  0,
                                  I,
                                )))));
                  });
                var y = r.ea.timescale;
                t = y && !isNaN(y);
                var v = 0,
                  w = !1;
                (t &&
                  p
                    .S("prft", function (A) {
                      var I = A.reader,
                        C = A.version;
                      (I.U(), (A = I.U()));
                      var k = I.U();
                      ((A = A * 1e3 + (k / 4294967296) * 1e3),
                        C === 0 ? (I = I.U()) : ((C = I.U()), (I = I.U()), (I = C * 4294967296 + I)),
                        (A = kx(A)),
                        (I = new Map().set("detail", {
                          wallClockTime: A,
                          programStartDate: new Date(A - (I / y) * 1e3),
                        })),
                        (I = new Ae("prft", I)),
                        e.O.onEvent(I));
                    })
                    .box("moof", Fe)
                    .box("traf", Fe)
                    .S("tfdt", function (A) {
                      w ||
                        ((v = Dc(A.reader, A.version).baseMediaDecodeTime / y),
                        (w = !0),
                        m || A.parser.stop());
                    }),
                  (m || t) && p.parse(n, !1, o),
                  w && r.timestampOffset == 0 && (u = v));
              } else
                s.includes("/mp4") ||
                  s.includes("/webm") ||
                  !Lo(p) ||
                  (e.$.has(t) || e.$.set(t, new pt()),
                  (l = e.$.get(t)),
                  l.clearData(),
                  l.Kf(r.i),
                  l.parse(p),
                  (p = l.getStartTime(t)),
                  p != null && (u = p),
                  (l = l.getMetadata()));
              return { timestamp: u, metadata: l };
            }
            function Vc(e, t, n, r, i, s, o, u, l, p, m) {
              ((o = o === void 0 ? !1 : o),
                (u = u === void 0 ? !1 : u),
                (l = l === void 0 ? !1 : l),
                (p = p === void 0 ? !1 : p));
              var y, v, w, A, I, C, k, R, L, U, G, b, B, O, z, j, X, W, ie, ne;
              return F(function ($) {
                switch ($.g) {
                  case 1:
                    if (((y = Ot), t != y.Na)) {
                      $.A(2);
                      break;
                    }
                    if (e.X != "HLS") {
                      $.A(3);
                      break;
                    }
                    return E($, e.ab, 4);
                  case 4:
                    ((v = $.h), (e.h.u = v));
                  case 3:
                    return E(
                      $,
                      CC(e.h, n, r ? r.startTime : null, r ? r.endTime : null, r ? r.P()[0] : null),
                      5,
                    );
                  case 5:
                    return $.return();
                  case 2:
                    if (p || !e.m) {
                      $.A(6);
                      break;
                    }
                    return E($, Vc(e, y.aa, n, r, i, s, o, u, l, !0), 7);
                  case 7:
                    return E($, Vc(e, y.wa, n, r, i, s, o, u, l, !0), 8);
                  case 8:
                    return $.return();
                  case 6:
                    if (!e.l.has(t)) return $.return();
                    if (
                      ((w = e.l.get(t).timestampOffset),
                      (A = e.G.get(t)),
                      e.j.has(t) && (A = e.j.get(t).getOriginalMimeType()),
                      r &&
                        ((I = KM(e, t, n, r, i, A, l)),
                        (C = I.timestamp),
                        (k = I.metadata),
                        C != null &&
                          (e.V == null &&
                            t == y.wa &&
                            ((e.V = C),
                            (e.va = r.startTime),
                            e.T != null && ((R = 0), e.va == e.oa && (R = e.V - e.T), e.ma.resolve(R))),
                          e.T == null &&
                            t == y.aa &&
                            ((e.T = C),
                            (e.oa = r.startTime),
                            e.V != null && ((L = 0), e.va == e.oa && (L = e.V - e.T), e.ma.resolve(L))),
                          (U = C),
                          (G = Si),
                          !e.J && G.includes(e.G.get(t)) && (U = 0),
                          (b = r.startTime - U),
                          (B = Math.abs(w - b)),
                          (B >= 0.001 || o || u) &&
                            (!l || b > 0 || !w) &&
                            ((w = b),
                            e.eb &&
                              (zt(
                                e,
                                t,
                                function () {
                                  return No(e, t);
                                },
                                null,
                              ),
                              zt(
                                e,
                                t,
                                function () {
                                  return Oo(e, t, w);
                                },
                                null,
                              ))),
                          (t == y.wa || !e.l.has(y.wa)) && e.ab.resolve(w)),
                        k.length) &&
                        e.O.onMetadata(k, w, r ? r.endTime : null),
                      s &&
                        t == y.wa &&
                        (e.h || jc(e, "application/cea-608", e.J, !1),
                        e.K || ((O = A.split(";", 1)[0]), (e.K = new qr(O))),
                        r ? ((z = e.K.Af(n)), z.length && RC(e.h, z, w)) : e.K.init(n, u, m)),
                      !e.j.has(t))
                    ) {
                      $.A(9);
                      break;
                    }
                    return E($, e.j.get(t).transmux(n, i, r, e.i.duration, t), 10);
                  case 10:
                    ((j = $.h),
                      ArrayBuffer.isView(j)
                        ? (n = j)
                        : ((X = j),
                          X.init != null &&
                            ((W = X.init),
                            zt(
                              e,
                              t,
                              function () {
                                (e.C && nc(e.C, W, w, i), e.l.get(t).appendBuffer(W));
                              },
                              r ? r.P()[0] : null,
                            )),
                          (n = X.data)));
                  case 9:
                    if (((n = ZM(e, i, n, r, t)), !r || !e.J || t == y.Na)) {
                      $.A(11);
                      break;
                    }
                    if (!o && !u) {
                      $.A(11);
                      break;
                    }
                    if (((ie = r.startTime), e.X != "HLS" || e.m || t != y.aa || !e.l.has(y.wa))) {
                      $.A(13);
                      break;
                    }
                    return E($, e.ma, 14);
                  case 14:
                    ((ne = $.h), Math.abs(ne) > 0.15 && (ie -= ne));
                  case 13:
                    (zt(
                      e,
                      t,
                      function () {
                        return No(e, t);
                      },
                      null,
                    ),
                      zt(
                        e,
                        t,
                        function () {
                          return Oo(e, t, ie);
                        },
                        null,
                      ));
                  case 11:
                    return E(
                      $,
                      zt(
                        e,
                        t,
                        function () {
                          var Q = n;
                          (e.C && nc(e.C, Q, w, i), e.l.get(t).appendBuffer(Q));
                        },
                        r ? r.P()[0] : null,
                      ),
                      15,
                    );
                  case 15:
                    re($);
                }
              });
            }
            function $M(e, t) {
              var n = Ws(e, "video") || 0;
              T0(e.h, t, n);
            }
            function YM(e) {
              e.h && T0(e.h, "", 0);
            }
            h.remove = function (e, t, n, r) {
              var i = this,
                s,
                o;
              return F(function (u) {
                return u.g == 1
                  ? ((s = Ot),
                    e == s.wa && i.K && (i.K.remove(r), (o = i.h.g || 0), i.h.remove(o, n, !0)),
                    e == s.Na
                      ? E(u, i.h.remove(t, n), 0)
                      : n > t
                        ? E(
                            u,
                            zt(
                              i,
                              e,
                              function () {
                                return Hc(i, e, t, n);
                              },
                              null,
                            ),
                            5,
                          )
                        : u.A(0))
                  : i.m
                    ? E(
                        u,
                        zt(
                          i,
                          s.aa,
                          function () {
                            return Hc(i, s.aa, t, n);
                          },
                          null,
                        ),
                        0,
                      )
                    : u.A(0);
              });
            };
            function bx(e, t) {
              var n;
              return F(function (r) {
                return r.g == 1
                  ? ((n = Ot),
                    t == n.Na
                      ? e.h
                        ? E(r, e.h.remove(0, 1 / 0), 0)
                        : r.return()
                      : t === n.wa && e.K && e.h
                        ? E(r, e.h.remove(0, 1 / 0, !0), 4)
                        : r.A(4))
                  : r.g != 6
                    ? E(
                        r,
                        zt(
                          e,
                          t,
                          function () {
                            return Hc(e, t, 0, e.i.duration);
                          },
                          null,
                        ),
                        6,
                      )
                    : e.m
                      ? E(
                          r,
                          zt(
                            e,
                            n.aa,
                            function () {
                              return Hc(e, n.aa, 0, e.i.duration);
                            },
                            null,
                          ),
                          0,
                        )
                      : r.A(0);
              });
            }
            h.flush = function (e) {
              var t = this,
                n;
              return F(function (r) {
                return r.g == 1
                  ? ((n = Ot),
                    e == n.Na
                      ? r.return()
                      : E(
                          r,
                          zt(
                            t,
                            e,
                            function () {
                              ((t.g.currentTime -= 0.001), ss(t, e));
                            },
                            null,
                          ),
                          2,
                        ))
                  : t.m
                    ? E(
                        r,
                        zt(
                          t,
                          n.aa,
                          function () {
                            var i = n.aa;
                            ((t.g.currentTime -= 0.001), ss(t, i));
                          },
                          null,
                        ),
                        0,
                      )
                    : r.A(0);
              });
            };
            function Nx(e, t, n, r, i, s, o, u, l) {
              var p, m, y;
              return F(function (v) {
                return v.g == 1
                  ? ((p = Ot),
                    t == p.Na
                      ? (s || (e.h.u = n), MC(e.h, r, i), v.return())
                      : ((m = []), E(v, nR(e, t, o, u, l), 2)))
                  : ((y = v.h),
                    y ||
                      (m.push(
                        zt(
                          e,
                          t,
                          function () {
                            return No(e, t);
                          },
                          null,
                        ),
                      ),
                      e.m &&
                        m.push(
                          zt(
                            e,
                            p.aa,
                            function () {
                              return No(e, p.aa);
                            },
                            null,
                          ),
                        )),
                    s ||
                      (m.push(
                        zt(
                          e,
                          t,
                          function () {
                            return Oo(e, t, n);
                          },
                          null,
                        ),
                      ),
                      e.m &&
                        m.push(
                          zt(
                            e,
                            p.aa,
                            function () {
                              return Oo(e, p.aa, n);
                            },
                            null,
                          ),
                        )),
                    (r != 0 || i != 1 / 0) &&
                      (m.push(
                        zt(
                          e,
                          t,
                          function () {
                            return Ox(e, t, r, i);
                          },
                          null,
                        ),
                      ),
                      e.m &&
                        m.push(
                          zt(
                            e,
                            p.aa,
                            function () {
                              return Ox(e, p.aa, r, i);
                            },
                            null,
                          ),
                        )),
                    m.length ? E(v, Promise.all(m), 0) : v.A(0));
              });
            }
            function qM(e, t, n) {
              var r, i;
              return F(function (s) {
                return s.g == 1
                  ? ((r = Ot),
                    t == r.Na ||
                    (t == r.wa && (e.ab = new lt()), !e.J || ((i = Ws(e, t)) && Math.abs(i - n) < 0.15))
                      ? s.return()
                      : (zt(
                          e,
                          t,
                          function () {
                            return No(e, t);
                          },
                          null,
                        ),
                        e.m &&
                          zt(
                            e,
                            r.aa,
                            function () {
                              return No(e, r.aa);
                            },
                            null,
                          ),
                        E(
                          s,
                          zt(
                            e,
                            t,
                            function () {
                              return Oo(e, t, n);
                            },
                            null,
                          ),
                          2,
                        )))
                  : e.m
                    ? E(
                        s,
                        zt(
                          e,
                          r.aa,
                          function () {
                            return Oo(e, r.aa, n);
                          },
                          null,
                        ),
                        0,
                      )
                    : s.A(0);
              });
            }
            ((h.endOfStream = function (e) {
              var t = this;
              return F(function (n) {
                return E(
                  n,
                  pu(t, function () {
                    Xs(t) || is(t) || (e ? t.i.endOfStream(e) : t.i.endOfStream());
                  }),
                  0,
                );
              });
            }),
              (h.Ab = function (e) {
                var t = this;
                return F(function (n) {
                  return E(
                    n,
                    pu(t, function () {
                      if (t.B.durationReductionEmitsUpdateEnd && e < t.i.duration)
                        for (var r = x(t.l.keys()), i = r.next(); !i.done; i = r.next()) {
                          i = i.value;
                          var s = { start: function () {}, p: new lt(), uri: null };
                          t.o.get(i).unshift(s);
                        }
                      ((t.i.duration = e), (t.ya = e));
                    }),
                    0,
                  );
                });
              }),
              (h.getDuration = function () {
                return this.i.duration;
              }));
            function JM(e, t, n) {
              F(function (r) {
                return e.I.g || e.g.error || e.N || e.H || Xs(e) || is(e)
                  ? r.return()
                  : E(
                      r,
                      pu(e, function () {
                        Xs(e) || is(e) || e.i.setLiveSeekableRange(t, n);
                      }),
                      0,
                    );
              });
            }
            function Lp(e) {
              F(function (t) {
                return e.I.g || e.g.error || e.N || e.H || Xs(e) || is(e)
                  ? t.return()
                  : E(
                      t,
                      pu(e, function () {
                        Xs(e) || is(e) || e.i.clearLiveSeekableRange();
                      }),
                      0,
                    );
              });
            }
            function Hc(e, t, n, r) {
              if (r <= n) ss(e, t);
              else {
                if (e.C) {
                  var i = e.C;
                  t === "video" && i.g && i.g.flushBuffer(n, r);
                }
                e.l.get(t).remove(n, r);
              }
            }
            function No(e, t) {
              var n = e.l.get(t),
                r = n.appendWindowStart,
                i = n.appendWindowEnd;
              (n.abort(), (n.appendWindowStart = r), (n.appendWindowEnd = i), ss(e, t));
            }
            function Oo(e, t, n) {
              (n < 0 && (n += 0.001), (e.l.get(t).timestampOffset = n), ss(e, t));
            }
            function Ox(e, t, n, r) {
              var i = e.l.get(t);
              ((i.appendWindowEnd !== r || i.appendWindowStart !== n) &&
                ((i.appendWindowStart = 0), (i.appendWindowEnd = r), (i.appendWindowStart = n)),
                ss(e, t));
            }
            function ss(e, t) {
              if (e.H || e.I.g) {
                var n = e.o.get(t);
                n && n.length && ((n = n[0]) && n.p && n.p.resolve(), e.o.set(t, []));
              } else (n = e.o.get(t)[0]) && (n.p.resolve(), bp(e, t));
            }
            function zt(e, t, n, r) {
              return (
                ht(e.I),
                (n = { start: n, p: new lt(), uri: r }),
                e.o.get(t).push(n),
                e.o.get(t).length == 1 && Ux(e, t),
                n.p
              );
            }
            function pu(e, t) {
              var n, r, i, s, o, u, l, p, m, y, v, w, A;
              return F(function (I) {
                switch (I.g) {
                  case 1:
                    for (
                      ht(e.I), n = [], r = Array.from(e.l.keys()), i = x(r), s = i.next(), o = {};
                      !s.done;
                      o = { ready: void 0 }, s = i.next()
                    )
                      ((u = s.value),
                        (o.ready = new lt()),
                        (l = {
                          start: (function (C) {
                            return function () {
                              return C.ready.resolve();
                            };
                          })(o),
                          p: o.ready,
                          uri: null,
                        }),
                        (p = e.o.get(u)),
                        p.push(l),
                        n.push(o.ready),
                        p.length == 1 && l.start());
                    return (te(I, 2), E(I, Promise.all(n), 4));
                  case 4:
                    pe(I, 3);
                    break;
                  case 2:
                    throw ((m = oe(I)), m);
                  case 3:
                    return (te(I, 5, 6), E(I, t(), 6));
                  case 6:
                    for (ve(I), y = x(r), v = y.next(); !v.done; v = y.next()) ((w = v.value), bp(e, w));
                    Oe(I, 0);
                    break;
                  case 5:
                    throw (
                      (A = oe(I)),
                      new H(2, 3, 3015, A, e.g.error || "No error in the media element", null)
                    );
                }
              });
            }
            function bp(e, t) {
              (e.o.get(t).shift(), Ux(e, t));
            }
            function Ux(e, t) {
              var n = e.o.get(t)[0];
              if (n)
                try {
                  n.start();
                } catch (r) {
                  (r.name == "QuotaExceededError"
                    ? n.p.reject(new H(2, 3, 3017, t))
                    : Lx(e)
                      ? n.p.reject(new H(2, 3, 3015, r, e.g.error || "No error in the media element", n.uri))
                      : n.p.reject(new H(2, 3, 3024, t)),
                    bp(e, t));
                }
            }
            function QM(e, t) {
              ((e.ba = t), e.h && (e.h.l = t));
            }
            function ZM(e, t, n, r, i) {
              if (Ja(e.G.get(i)) != "mp4") return n;
              var s = r === null,
                o = e.Ta.get(i),
                u = e.O.Pj(),
                l = !1;
              (r && r.ea && (l = r.ea.encrypted), (r = r ? r.P()[0] : null));
              var p = je();
              return (
                e.B.correctEc3Enca && s && i === "audio" && (n = _M(n)),
                e.B.insertFakeEncryptionInInit &&
                  o &&
                  p.Fd(u, i) &&
                  (s ? (n = PM(t, n, r)) : !l && p.Ni(i) && (n = DM(n))),
                s && p.se() && (n = NM(n)),
                n
              );
            }
            function eR(e, t, n, r) {
              return zt(
                e,
                t,
                function () {
                  if (t !== Ve) {
                    if ((e.G.get(t), je().Ib())) {
                      (e.j.has(t) && (e.j.get(t).destroy(), e.j.delete(t)), r && e.j.set(t, r));
                      var i = n + e.B.addExtraFeaturesToSourceBuffer(n);
                      (e.l.get(t).changeType(i), e.G.set(t, n));
                    }
                    ss(e, t);
                  }
                },
                null,
              );
            }
            function tR(e, t) {
              var n, r, i, s, o, u, l, p, m, y, v, w, A, I, C, k, R, L, U, G;
              return F(function (b) {
                if (b.g == 1) {
                  if (e.H || e.N) return b.return();
                  for (
                    n = Ot,
                      e.H = !0,
                      e.m = !1,
                      r = e.g.currentTime,
                      i = e.g.autoplay,
                      e.g.paused || (e.Ua = !0),
                      e.ob && (e.g.autoplay = !1),
                      ge(b, 2),
                      e.u.Qa(),
                      s = x(e.j.values()),
                      o = s.next();
                    !o.done;
                    o = s.next()
                  )
                    ((u = o.value), u.destroy());
                  for (l = x(e.l.values()), p = l.next(); !p.done; p = l.next()) {
                    m = p.value;
                    try {
                      e.i.removeSourceBuffer(m);
                    } catch (B) {}
                  }
                  return (
                    e.j.clear(),
                    e.l.clear(),
                    (y = e.i.duration),
                    (e.M = new lt()),
                    (e.i = Pp(e, e.M)),
                    E(b, e.M, 4)
                  );
                }
                if (b.g != 2) {
                  for (
                    !isNaN(y) && y ? (e.i.duration = y) : !isNaN(e.ya) && e.ya && (e.i.duration = e.ya),
                      v = new lt(),
                      w = e.i.sourceBuffers,
                      A = t.size,
                      I = 0,
                      C = function () {
                        (I++, I === A && (v.resolve(), e.u.Ma(w, "addsourcebuffer", C)));
                      },
                      e.u.D(w, "addsourcebuffer", C),
                      k = x(t.keys()),
                      R = k.next();
                    !R.done;
                    R = k.next()
                  )
                    ((L = R.value), (U = t.get(L)), Bc(e, L, U, U.codecs));
                  return (
                    (G = t.get(n.aa)) && G.isAudioMuxedInVideo && (e.m = !0),
                    e.m && !e.o.has(n.aa) && e.o.set(n.aa, []),
                    E(b, v, 2)
                  );
                }
                return (
                  ve(b),
                  (e.H = !1),
                  ht(e.I),
                  e.u.Aa(e.g, "loadedmetadata", function () {
                    e.I.g || (e.g.currentTime = r);
                  }),
                  e.u.Aa(e.g, "canplaythrough", function () {
                    e.I.g || ((e.g.autoplay = i), e.Ua && ((e.Ua = !1), e.g.play()));
                  }),
                  Oe(b, 0)
                );
              });
            }
            function Fx(e, t) {
              return pu(e, function () {
                return tR(e, t);
              });
            }
            function Bx(e, t, n, r) {
              var i = !1,
                s = jn("audio", (r || "").split(",")),
                o = jn("video", (r || "").split(",")),
                u = o;
              (t == "audio" && (u = s), u || (u = r));
              var l = Rt(n, u),
                p = Qn(e.G.get(t)),
                m = e.B.forceTransmux;
              if (
                (!In(l) || (!e.J && Si.includes(l))
                  ? (m = !0)
                  : m || n == p || (m = !je().Nf() && Si.includes(n)),
                m && ((e = hc(n, u)), (u = To(e))))
              ) {
                var y = u();
                (s && o && (i = !0), (l = y.convertCodecs(t, e)));
              }
              return (
                !y && t === "video" && s && (l = Rt(n, r)),
                (t = hn(Vn(l))),
                { jc: y, jl: i, Th: Qn(l), codec: t, mimeType: l }
              );
            }
            function jx(e, t, n, r, i) {
              if (t == Ve) return { type: Op, wf: n, jc: null };
              var s = hn(Vn(e.G.get(t))),
                o = Qn(e.G.get(t)),
                u = Bx(e, t, n, r),
                l = u.jc,
                p = u.jl,
                m = u.Th,
                y = u.codec;
              u = u.mimeType;
              var v = !0;
              return (
                p &&
                  e.G.has("audio") &&
                  ((n = Bx(e, "audio", n, r)),
                  (r = hn(Vn(e.G.get("audio")))),
                  (v = Qn(e.G.get("audio"))),
                  (v = r == n.codec && v == n.Th),
                  n.jc && n.jc.destroy()),
                s === y && o === m && v
                  ? { type: Op, wf: u, jc: l }
                  : ((s = !0),
                    ((e.m && !i.has("audio")) || (p && l && !e.j.has(t))) && (s = !1),
                    (t = je()),
                    s && e.B.codecSwitchingStrategy === "smooth" && t.Ib()
                      ? { type: Vx, wf: u, jc: l }
                      : (l && l.destroy(), { type: Up, wf: u, jc: null }))
              );
            }
            function nR(e, t, n, r, i) {
              var s, o, u, l, p, m;
              return F(function (y) {
                return y.g == 1
                  ? ((s = Ot),
                    (o = jx(e, t, n, r, i)),
                    (u = o.type),
                    (l = o.jc),
                    (p = o.wf),
                    (m = i.get(s.aa)) && (e.m = m.isAudioMuxedInVideo),
                    u == Op
                      ? (e.j.has(t) && !l
                          ? (e.j.get(t).destroy(), e.j.delete(t))
                          : !e.j.has(t) && l
                            ? e.j.set(t, l)
                            : l &&
                              (e.j.has(t) && e.j.get(t).transmux !== l.transmux
                                ? (e.j.get(t).destroy(), e.j.set(t, l))
                                : l.destroy()),
                        y.return(!1))
                      : u == Vx
                        ? E(y, eR(e, t, p, l), 3)
                        : u != Up
                          ? y.A(3)
                          : (l && l.destroy(), E(y, Fx(e, i), 3)))
                  : y.return(!0);
              });
            }
            function rR(e, t, n, r, i) {
              return ((e = jx(e, t, n, r, i)), e.jc && e.jc.destroy(), e.type == Up);
            }
            var Np = g.URL.createObjectURL,
              iR = "sequence",
              Op = "none",
              Up = "reset",
              Vx = "changeType";
            function De(e, t, n) {
              ((this.i = e),
                (this.F = t),
                (this.u = this.l = 1 / 0),
                (this.h = 1),
                (this.g = this.j = null),
                (this.B = 0),
                (this.C = !0),
                (this.J = !1),
                (this.I = 0),
                (this.G = n === void 0 ? !0 : n),
                (this.H = 0),
                (this.o = !1),
                (this.m = e));
            }
            ((h = De.prototype),
              (h.getDuration = function () {
                return this.l;
              }),
              (h.Rj = function () {
                return this.h;
              }),
              (h.Wi = function (e) {
                this.i = e;
              }),
              (h.Ab = function (e) {
                this.l = e;
              }),
              (h.Wj = function () {
                return this.i;
              }),
              (h.Vi = function (e) {
                this.B = e;
              }),
              (h.cd = function (e) {
                (e && !this.C && (this.J = !0), (this.C = e));
              }),
              (h.Lf = function (e) {
                this.u = e;
              }),
              (h.df = function () {
                return this.u;
              }),
              (h.rh = function (e) {
                this.F = e;
              }),
              (h.Jj = function () {
                return this.F;
              }),
              (h.Hi = function (e, t) {
                if (e.length != 0) {
                  var n = (Date.now() + this.B) / 1e3;
                  if (
                    ((e = e.filter(function (i) {
                      return i.start + t < n;
                    })),
                    e.length != 0)
                  ) {
                    var r = e[e.length - 1].end + t;
                    (this.xf(e[0].start + t),
                      (this.h = e.reduce(function (i, s) {
                        return Math.max(i, s.end - s.start);
                      }, this.h)),
                      (this.g = Math.max(this.g, r)),
                      this.i != null && this.G && !this.o && (this.i = n - this.g - this.h));
                  }
                }
              }),
              (h.me = function (e) {
                if (e.length != 0) {
                  var t = e[0].startTime,
                    n = e[0].endTime,
                    r = (Date.now() + this.B) / 1e3;
                  e = x(e);
                  for (var i = e.next(); !i.done; i = e.next())
                    ((i = i.value),
                      r < i.startTime ||
                        ((t = Math.min(t, i.startTime)),
                        (n = Math.max(n, i.endTime)),
                        (this.h = Math.max(this.h, i.endTime - i.startTime))));
                  (this.xf(t),
                    (this.g = Math.max(this.g, n)),
                    this.i != null && this.G && !this.o && (this.i = r - this.g - this.h));
                }
              }),
              (h.Gi = function (e, t) {
                (this.xf(e), t == 1 / 0 || this.W() || (this.g = Math.max(this.g, t)));
              }),
              (h.Sj = function () {
                return this.g;
              }),
              (h.qf = function () {
                this.o = !0;
              }),
              (h.vk = function () {
                return this.o;
              }),
              (h.sh = function (e) {
                this.m = e;
              }),
              (h.Oj = function () {
                return this.m;
              }),
              (h.xf = function (e) {
                this.j == null ? (this.j = e) : this.J || (this.j = Math.min(this.j, e));
              }),
              (h.Wg = function (e) {
                this.h = Math.max(this.h, e);
              }),
              (h.offset = function (e) {
                (this.j != null && (this.j += e), this.g != null && (this.g += e));
              }),
              (h.W = function () {
                return this.l == 1 / 0 && !this.C;
              }),
              (h.Vc = function () {
                return this.l != 1 / 0 && !this.C;
              }),
              (h.Hb = function () {
                return Math.max(this.I, this.Ic() - this.u);
              }),
              (h.Yi = function (e) {
                this.I = e;
              }),
              (h.Ic = function () {
                return this.W() || this.Vc()
                  ? Math.min(Math.max(0, (Date.now() + this.B) / 1e3 - this.h - this.i) + this.H, this.l)
                  : this.g
                    ? Math.min(this.g, this.l)
                    : this.l;
              }),
              (h.ae = function (e) {
                var t = Math.max(this.j, this.I);
                return this.u == 1 / 0
                  ? Math.ceil(t * 1e3) / 1e3
                  : Math.max(t, Math.min(this.Ic() - this.u + e, this.Gb()));
              }),
              (h.Zb = function () {
                return this.ae(0);
              }),
              (h.Gb = function () {
                return Math.max(0, this.Ic() - (this.W() || this.Vc() ? this.F : 0));
              }),
              (h.kj = function () {
                return !(this.i == null || (this.g != null && this.G));
              }),
              (h.Ui = function (e) {
                this.H = e;
              }),
              (h.Ej = function () {
                return this.H;
              }),
              de("shaka.media.PresentationTimeline", De),
              (De.prototype.getAvailabilityTimeOffset = De.prototype.Ej),
              (De.prototype.setAvailabilityTimeOffset = De.prototype.Ui),
              (De.prototype.usingPresentationStartTime = De.prototype.kj),
              (De.prototype.getSeekRangeEnd = De.prototype.Gb),
              (De.prototype.getSeekRangeStart = De.prototype.Zb),
              (De.prototype.getSafeSeekRangeStart = De.prototype.ae),
              (De.prototype.getSegmentAvailabilityEnd = De.prototype.Ic),
              (De.prototype.setUserSeekStart = De.prototype.Yi),
              (De.prototype.getSegmentAvailabilityStart = De.prototype.Hb),
              (De.prototype.isInProgress = De.prototype.Vc),
              (De.prototype.isLive = De.prototype.W),
              (De.prototype.offset = De.prototype.offset),
              (De.prototype.notifyMaxSegmentDuration = De.prototype.Wg),
              (De.prototype.notifyMinSegmentStartTime = De.prototype.xf),
              (De.prototype.getInitialProgramDateTime = De.prototype.Oj),
              (De.prototype.setInitialProgramDateTime = De.prototype.sh),
              (De.prototype.isStartTimeLocked = De.prototype.vk),
              (De.prototype.lockStartTime = De.prototype.qf),
              (De.prototype.getMaxSegmentEndTime = De.prototype.Sj),
              (De.prototype.notifyPeriodDuration = De.prototype.Gi),
              (De.prototype.notifySegments = De.prototype.me),
              (De.prototype.notifyTimeRange = De.prototype.Hi),
              (De.prototype.getDelay = De.prototype.Jj),
              (De.prototype.setDelay = De.prototype.rh),
              (De.prototype.getSegmentAvailabilityDuration = De.prototype.df),
              (De.prototype.setSegmentAvailabilityDuration = De.prototype.Lf),
              (De.prototype.setStatic = De.prototype.cd),
              (De.prototype.setClockOffset = De.prototype.Vi),
              (De.prototype.getPresentationStartTime = De.prototype.Wj),
              (De.prototype.setDuration = De.prototype.Ab),
              (De.prototype.setPresentationStartTime = De.prototype.Wi),
              (De.prototype.getMaxSegmentDuration = De.prototype.Rj),
              (De.prototype.getDuration = De.prototype.getDuration));
            function Fp(e, t, n, r) {
              var i = this;
              ((this.u = r),
                (this.g = e),
                (this.F = t),
                (this.h = n),
                (this.j = new tt()),
                (this.m = !1),
                (this.l = 0),
                (this.C = !1),
                (this.H = this.G = 0),
                (this.o = oR(this)),
                (this.B = !1),
                this.j.D(e, "waiting", function () {
                  return gu(i);
                }),
                (this.i = new He(function () {
                  gu(i);
                }).Ea(this.h.gapJumpTimerTime)));
            }
            ((Fp.prototype.release = function () {
              (this.j && (this.j.release(), (this.j = null)),
                this.i != null && (this.i.stop(), (this.i = null)),
                this.o && (this.o.release(), (this.o = null)),
                (this.g = this.F = this.u = null));
            }),
              (Fp.prototype.zd = function () {
                ((this.B = !0), this.i && this.i.Ea(this.h.gapJumpTimerTime), gu(this));
              }));
            function gu(e) {
              if (e.g.readyState != 0) {
                if (e.g.seeking) {
                  if (!e.m) return;
                } else e.m = !1;
                if (!e.g.paused || (e.g.currentTime == e.l && (e.g.autoplay || e.g.currentTime != e.l))) {
                  var t;
                  if (!(t = !e.o)) {
                    t = e.o;
                    var n = t.h,
                      r = zx(n),
                      i = n.g.currentTime,
                      s = Date.now() / 1e3;
                    ((t.g != i || t.m != r) && ((t.l = s), (t.g = i), (t.m = r), (t.i = !1)),
                      (i = s - t.l),
                      (r = i >= t.o && r && !t.i) &&
                        (t.j && t.j(t.g, i), (t.i = !0), (t.g = n.g.currentTime)),
                      (t = !r));
                  }
                  t &&
                    ((t = e.g.currentTime),
                    (n = e.g.buffered),
                    (r = OM(n, t, e.h.gapDetectionThreshold)),
                    r == null ||
                      (r == 0 && !e.B) ||
                      ((i = n.start(r)),
                      (s = e.h.gapPadding) && (i = Math.ceil((i + s) * 100) / 100),
                      i >= e.F.Gb() ||
                        i - t < 0.001 ||
                        (r != 0 && n.end(r - 1),
                        sR(e, i),
                        t == e.l && (e.l = i),
                        e.G++,
                        e.u(new Ae("gapjumped")))));
                }
              }
            }
            function sR(e, t) {
              ((e.C = !0),
                e.j.Aa(e.g, "seeked", function () {
                  e.C = !1;
                }),
                (e.g.currentTime = t));
            }
            function oR(e) {
              if (!e.h.stallEnabled) return null;
              var t = e.h.stallThreshold,
                n = e.h.stallSkip;
              return new Hx(new Gx(e.g), t, function () {
                var r;
                return F(function (i) {
                  if (i.g == 1)
                    return (
                      (r = Ri(e.g.buffered)),
                      r.length ? (n ? ((e.g.currentTime += n), i.A(2)) : E(i, e.g.play(), 3)) : i.return()
                    );
                  if (i.g != 2) {
                    if (!e.g) return i.return();
                    (e.g.pause(), e.g.play());
                  }
                  (e.H++, e.u(new Ae("stalldetected")), re(i));
                });
              });
            }
            function Hx(e, t, n) {
              ((this.h = e),
                (this.m = zx(e)),
                (this.g = e.g.currentTime),
                (this.l = Date.now() / 1e3),
                (this.i = !1),
                (this.o = t),
                (this.j = n));
            }
            Hx.prototype.release = function () {
              (this.h && this.h.release(), (this.j = this.h = null));
            };
            function Gx(e) {
              var t = this;
              ((this.g = e),
                (this.h = new tt()),
                (this.i = !1),
                this.h.D(this.g, "audiofocuspaused", function () {
                  t.i = !0;
                }),
                this.h.D(this.g, "audiofocusgranted", function () {
                  t.i = !1;
                }),
                this.h.D(this.g, "audiofocuslost", function () {
                  t.i = !0;
                }));
            }
            function zx(e) {
              if (e.g.paused || e.g.playbackRate == 0 || e.i || e.g.buffered.length == 0) var t = !1;
              else
                e: {
                  ((t = e.g.currentTime), (e = x(Ri(e.g.buffered))));
                  for (var n = e.next(); !n.done; n = e.next())
                    if (((n = n.value), !(t < n.start - 0.1 || t > n.end - 0.5))) {
                      t = !0;
                      break e;
                    }
                  t = !1;
                }
              return t;
            }
            Gx.prototype.release = function () {
              (this.h && this.h.release(), (this.h = null));
            };
            function Uo(e, t, n, r) {
              t == HTMLMediaElement.HAVE_NOTHING || e.readyState >= t
                ? r()
                : ((t = aR.value().get(t)), n.Aa(e, t, r));
            }
            var aR = new wt(function () {
              return new Map([
                [HTMLMediaElement.HAVE_METADATA, "loadedmetadata"],
                [HTMLMediaElement.HAVE_CURRENT_DATA, "loadeddata"],
                [HTMLMediaElement.HAVE_FUTURE_DATA, "canplay"],
                [HTMLMediaElement.HAVE_ENOUGH_DATA, "canplaythrough"],
              ]);
            });
            function Xx(e, t, n, r) {
              var i = this;
              ((this.g = e),
                (this.m = t),
                (this.u = n),
                (this.l = null),
                (this.j = function () {
                  return (i.l == null && (i.l = r()), i.l);
                }),
                (this.o = !1),
                (this.h = new tt()),
                (this.i = new Yx(e)),
                Uo(this.g, HTMLMediaElement.HAVE_METADATA, this.h, function () {
                  Kx(i, i.j());
                }));
            }
            Xx.prototype.release = function () {
              (this.h && (this.h.release(), (this.h = null)),
                this.i != null && (this.i.release(), (this.i = null)),
                (this.m = function () {}),
                (this.g = null));
            };
            function Bp(e) {
              return e.o ? e.g.currentTime : e.j();
            }
            function Wx(e, t) {
              e.g.readyState > 0
                ? qx(e.i, t)
                : Uo(e.g, HTMLMediaElement.HAVE_METADATA, e.h, function () {
                    Kx(e, e.j());
                  });
            }
            function Kx(e, t) {
              Math.abs(e.g.currentTime - t) < 0.001
                ? $x(e)
                : (e.h.Aa(e.g, "seeking", function () {
                    $x(e);
                  }),
                  qx(e.i, e.g.currentTime && e.g.currentTime != 0 ? e.g.currentTime : t));
            }
            function $x(e) {
              ((e.o = !0),
                e.h.D(e.g, "seeking", function () {
                  return e.m();
                }),
                e.u(e.g.currentTime));
            }
            function Yx(e) {
              var t = this;
              ((this.g = e),
                (this.m = 10),
                (this.j = this.l = this.i = 0),
                (this.h = new He(function () {
                  t.i <= 0 || t.g.currentTime != t.l || t.g.currentTime === t.j
                    ? t.h.stop()
                    : ((t.g.currentTime = t.j), t.i--);
                })));
            }
            Yx.prototype.release = function () {
              (this.h && (this.h.stop(), (this.h = null)), (this.g = null));
            };
            function qx(e, t) {
              ((e.l = e.g.currentTime), (e.j = t), (e.i = e.m), (e.g.currentTime = t), e.h.Ea(0.1));
            }
            function Jx(e) {
              ((this.g = e), (this.i = !1), (this.h = null), (this.j = new tt()));
            }
            ((h = Jx.prototype),
              (h.ready = function () {
                function e() {
                  if (t.h == null || (t.h == 0 && t.g.duration != 1 / 0)) t.i = !0;
                  else {
                    var n = t.g.currentTime,
                      r = null;
                    if (typeof t.h == "number") r = t.h;
                    else if (t.h instanceof Date) {
                      var i = Qx(t);
                      i !== null && ((r = t.h.getTime() / 1e3 - i), (r = Zx(t, r)));
                    }
                    r == null
                      ? (t.i = !0)
                      : (r < 0 && (r = Math.max(0, n + r)),
                        n != r
                          ? (t.j.Aa(t.g, "seeking", function () {
                              t.i = !0;
                            }),
                            (t.g.currentTime = r))
                          : (t.i = !0));
                  }
                }
                var t = this;
                Uo(this.g, HTMLMediaElement.HAVE_FUTURE_DATA, this.j, function () {
                  e();
                });
              }),
              (h.release = function () {
                (this.j && (this.j.release(), (this.j = null)), (this.g = null));
              }),
              (h.$f = function (e) {
                this.h = this.i ? this.h : e;
              }),
              (h.Qd = function () {
                var e = this.i ? this.g.currentTime : this.h;
                return (
                  e instanceof Date && ((e = e.getTime() / 1e3 - (Qx(this) || 0)), (e = Zx(this, e))),
                  e || 0
                );
              }),
              (h.Nh = function () {
                return 0;
              }),
              (h.Lh = function () {
                return 0;
              }),
              (h.Mh = function () {
                return !1;
              }),
              (h.Fi = function () {}),
              (h.ri = function () {
                var e = Oc(this.g.buffered);
                return e != null && e >= this.g.duration - 1;
              }));
            function Qx(e) {
              return e.g.getStartDate && ((e = e.g.getStartDate().getTime()), !isNaN(e)) ? e / 1e3 : null;
            }
            function Zx(e, t) {
              return (
                (e = e.g.seekable),
                e.length > 0 && ((t = Math.max(e.start(0), t)), (t = Math.min(e.end(e.length - 1), t))),
                t
              );
            }
            function eT(e, t, n, r, i, s) {
              var o = this;
              ((this.h = e),
                (this.g = t.presentationTimeline),
                (this.l = n),
                (this.u = i),
                (this.o = null),
                (this.i = new Fp(e, t.presentationTimeline, n, s)),
                (this.j = new Xx(
                  e,
                  function () {
                    e: {
                      var u = o.i;
                      ((u.m = !0), (u.B = !1), u.i && u.i.Ea(u.h.gapJumpTimerTime), gu(u));
                      var l = Bp(o.j);
                      if (((u = rT(o, l)), !px() && Math.abs(u - l) > 0.001)) {
                        l = !1;
                        var p = je().Si();
                        if (p) {
                          var m = Date.now() / 1e3;
                          (!o.o || o.o < m - p) && ((o.o = m), (l = !0));
                        } else l = !0;
                        if (l) {
                          (Wx(o.j, u), (u = void 0));
                          break e;
                        }
                      }
                      (o.u(), (u = void 0));
                    }
                    return u;
                  },
                  function (u) {
                    var l = o.i;
                    (l.g.seeking && !l.m && ((l.m = !0), (l.l = u)),
                      l.i && l.i.Ea(l.h.gapJumpTimerTime),
                      gu(l));
                  },
                  function () {
                    return tT(o, r);
                  },
                )),
                (this.m = new He(function () {
                  if (o.h.readyState != 0 && !o.h.paused) {
                    var u = Bp(o.j),
                      l = o.g.Zb(),
                      p = o.g.Gb();
                    (p - l < 3 && (l = p - 3), u < l && ((u = rT(o, u)), (o.h.currentTime = u)));
                  }
                })));
            }
            ((h = eT.prototype),
              (h.ready = function () {
                this.m.Ea(0.25);
              }),
              (h.release = function () {
                (this.j && (this.j.release(), (this.j = null)),
                  this.i && (this.i.release(), (this.i = null)),
                  this.m && (this.m.stop(), (this.m = null)),
                  (this.h = this.j = this.g = this.l = null),
                  (this.u = function () {}));
              }),
              (h.$f = function (e) {
                Wx(this.j, tT(this, e));
              }),
              (h.Qd = function () {
                var e = Bp(this.j);
                return this.h.readyState > 0 && !this.h.paused ? iT(this, e) : e;
              }),
              (h.Nh = function () {
                return this.i.H;
              }),
              (h.Lh = function () {
                return this.i.G;
              }),
              (h.Mh = function () {
                return this.i.C;
              }));
            function tT(e, t) {
              return (
                t == null
                  ? (t = e.g.getDuration() < 1 / 0 ? e.g.Zb() : e.g.Gb())
                  : t instanceof Date
                    ? (t = t.getTime() / 1e3 - (e.g.m || e.g.i))
                    : t < 0 && (t = e.g.Gb() + t),
                nT(e, iT(e, t))
              );
            }
            ((h.Fi = function () {
              this.i.zd();
            }),
              (h.ri = function () {
                if (this.g.W()) {
                  var e = this.g.Ic(),
                    t = Oc(this.h.buffered);
                  if (t != null && t >= e) return !0;
                }
                return !1;
              }));
            function nT(e, t) {
              var n = e.g.getDuration();
              return t >= n ? n - e.l.durationBackoff : t;
            }
            function rT(e, t) {
              var n = e.l.rebufferingGoal,
                r = e.l.safeSeekOffset,
                i = e.g.Zb(),
                s = e.g.Gb(),
                o = e.g.getDuration();
              s - i < 3 && (i = s - 3);
              var u = e.g.ae(n),
                l = e.g.ae(r);
              return (
                (n = e.g.ae(n + r)),
                t >= o
                  ? nT(e, t)
                  : t > s
                    ? s - e.l.safeSeekEndOffset
                    : t < i
                      ? e.g.W() && e.l.returnToEndOfLiveWindowWhenOutside
                        ? s - e.l.safeSeekEndOffset
                        : Sp(e.h.buffered, l)
                          ? l
                          : n
                      : t >= u || Sp(e.h.buffered, t)
                        ? t
                        : n
              );
            }
            function iT(e, t) {
              var n = e.g.Zb();
              return t < n ? n : ((e = e.g.Gb()), t > e ? e : t);
            }
            function Qe(e) {
              ((this.g = e), (this.m = null), (this.i = 0), (this.o = !1));
            }
            ((h = Qe.prototype),
              (h.getNumReferences = function () {
                return this.g.length;
              }),
              (h.getNumEvicted = function () {
                return this.i;
              }),
              (h.release = function () {
                this.o || ((this.g = []), this.m && this.m.stop(), (this.m = null));
              }),
              (h.Bk = function () {
                this.o = !0;
              }),
              (h.Fb = function (e) {
                for (var t = x(this.g), n = t.next(); !n.done; n = t.next()) e(n.value);
              }));
            function Qr(e) {
              return e.g[0] || null;
            }
            ((h.find = function (e) {
              for (var t = this.g.length - 1, n = t; n >= 0; --n) {
                var r = this.g[n],
                  i = n < t ? this.g[n + 1].startTime : r.endTime;
                if (e >= r.startTime && e < i) return n + this.i;
              }
              return this.g.length && e < this.g[0].startTime ? this.i : null;
            }),
              (h.get = function (e) {
                return this.g.length == 0
                  ? null
                  : ((e -= this.i), e < 0 || e >= this.g.length ? null : this.g[e]);
              }),
              (h.offset = function (e) {
                if (!this.o) for (var t = x(this.g), n = t.next(); !n.done; n = t.next()) n.value.offset(e);
              }),
              (h.tf = function (e) {
                if (!this.o && e.length) {
                  var t = Math.round(e[0].startTime * 1e3) / 1e3;
                  ((this.g = this.g.filter(function (n) {
                    return Math.round(n.startTime * 1e3) / 1e3 < t;
                  })),
                    this.g.push.apply(this.g, Y(e)));
                }
              }),
              (h.ke = function (e, t) {
                var n = this;
                ((e = e.filter(function (r) {
                  return r.endTime > t && (n.g.length == 0 || r.endTime > n.g[0].startTime);
                })),
                  this.tf(e),
                  this.Ya(t));
              }),
              (h.Ya = function (e) {
                if (!this.o) {
                  var t = this.g.length;
                  ((this.g = this.g.filter(function (n) {
                    return n.endTime > e;
                  })),
                    (this.i += t - this.g.length));
                }
              }),
              (h.pd = function (e, t, n) {
                if (((n = n === void 0 ? !1 : n), !this.o)) {
                  for (; this.g.length && this.g[this.g.length - 1].startTime >= t; ) this.g.pop();
                  for (; this.g.length && this.g[0].endTime <= e; ) (this.g.shift(), n || this.i++);
                  this.g.length != 0 &&
                    ((e = this.g[this.g.length - 1]),
                    (t = new Me(
                      e.startTime,
                      t,
                      e.C,
                      e.startByte,
                      e.endByte,
                      e.ea,
                      e.timestampOffset,
                      e.appendWindowStart,
                      e.appendWindowEnd,
                      e.g,
                      e.tilesLayout,
                      e.B,
                      e.h,
                      e.status,
                      e.aesKey,
                    )),
                    (t.mimeType = e.mimeType),
                    (t.codecs = e.codecs),
                    (t.i = e.i),
                    (this.g[this.g.length - 1] = t));
                }
              }),
              (h.Rf = function (e, t) {
                var n = this;
                this.o ||
                  (this.m && this.m.stop(),
                  (this.m = new He(function () {
                    var r = t();
                    r ? n.g.push.apply(n.g, Y(r)) : (n.m.stop(), (n.m = null));
                  })),
                  this.m.Ea(e));
              }),
              (Qe.prototype[Symbol.iterator] = function () {
                return this.Xb(0);
              }),
              (Qe.prototype.Xb = function (e, t, n) {
                ((t = t === void 0 ? !1 : t), (n = n === void 0 ? !1 : n));
                var r = this.find(e);
                if (r == null) return null;
                var i = this.get(r);
                n ? r++ : r--;
                var s = -1;
                if (i && i.g.length > 0)
                  for (var o = i.g.length - 1; o >= 0; --o) {
                    var u = i.g[o];
                    if (e >= u.startTime && e < u.endTime) {
                      if (!t) {
                        for (; o && !u.l; ) (o--, (u = i.g[o]));
                        if (!u.l) return (En("No independent partial segment found!"), null);
                      }
                      (n ? r-- : r++, (s = o - 1));
                      break;
                    }
                  }
                return new Ir(this, r, s, n);
              }),
              (Qe.prototype.We = function () {
                return -1;
              }));
            function Gc(e, t, n) {
              return (
                (e = new Me(
                  e,
                  e + t,
                  function () {
                    return n;
                  },
                  0,
                  null,
                  null,
                  e,
                  e,
                  e + t,
                )),
                new Qe([e])
              );
            }
            (de("shaka.media.SegmentIndex", Qe),
              (Qe.forSingleSegment = Gc),
              (Qe.prototype.getIteratorForTime = Qe.prototype.Xb),
              (Qe.prototype.updateEvery = Qe.prototype.Rf),
              (Qe.prototype.fit = Qe.prototype.pd),
              (Qe.prototype.evict = Qe.prototype.Ya),
              (Qe.prototype.mergeAndEvict = Qe.prototype.ke),
              (Qe.prototype.offset = Qe.prototype.offset),
              (Qe.prototype.get = Qe.prototype.get),
              (Qe.prototype.find = Qe.prototype.find),
              (Qe.prototype.markImmutable = Qe.prototype.Bk),
              (Qe.prototype.release = Qe.prototype.release),
              (Qe.prototype.getNumEvicted = Qe.prototype.getNumEvicted),
              (Qe.prototype.getNumReferences = Qe.prototype.getNumReferences));
            function Ir(e, t, n, r) {
              ((this.i = e), (this.h = t), (this.g = n), (this.reverse = r));
            }
            ((h = Ir.prototype),
              (h.Jd = function (e) {
                this.reverse = e;
              }),
              (h.zj = function () {
                return this.h;
              }),
              (h.current = function () {
                var e = this.i.get(this.h);
                return (
                  e &&
                    e.g.length > 0 &&
                    e.m &&
                    this.g >= e.g.length &&
                    (this.h++, (this.g = 0), (e = this.i.get(this.h))),
                  e && e.g.length > 0 ? e.g[this.g] : e
                );
              }),
              (h.next = function () {
                var e = this.i.get(this.h);
                return (
                  this.reverse
                    ? e && e.g.length > 0
                      ? (this.g--,
                        this.g < 0 &&
                          (this.h--,
                          (this.g = (e = this.i.get(this.h)) && e.g.length > 0 ? e.g.length - 1 : 0)))
                      : (this.h--, (this.g = 0))
                    : e && e.g.length > 0
                      ? (this.g++, e.m && this.g == e.g.length && (this.h++, (this.g = 0)))
                      : (this.h++, (this.g = 0)),
                  (e = this.current()),
                  { value: e, done: !e }
                );
              }),
              (h.jh = function () {
                var e = this.current();
                if (e && e.Xc && !e.l && (e = this.i.get(this.h)) && e.g.length > 0)
                  for (var t = e.g[this.g]; t.l && !(this.g <= 0); ) (this.g--, (t = e.g[this.g]));
              }),
              de("shaka.media.SegmentIterator", Ir),
              (Ir.prototype.resetToLastIndependent = Ir.prototype.jh),
              (Ir.prototype.next = Ir.prototype.next),
              (Ir.prototype.current = Ir.prototype.current),
              (Ir.prototype.currentPosition = Ir.prototype.zj),
              (Ir.prototype.setReverse = Ir.prototype.Jd));
            function Mt() {
              (Qe.call(this, []), (this.h = []));
            }
            (q(Mt, Qe),
              (h = Mt.prototype),
              (h.clone = function () {
                var e = new Mt();
                return ((e.h = this.h.slice()), (e.i = this.i), e);
              }),
              (h.release = function () {
                this.h = [];
              }),
              (h.Fb = function (e) {
                for (var t = x(this.h), n = t.next(); !n.done; n = t.next()) n.value.Fb(e);
              }));
            function uR(e, t) {
              e = x(e.h);
              for (var n = e.next(); !n.done; n = e.next()) t(n.value);
            }
            h.find = function (e) {
              for (var t = this.i, n = x(this.h), r = n.next(); !r.done; r = n.next()) {
                r = r.value;
                var i = r.find(e);
                if (i != null) return i + t;
                t += r.getNumEvicted() + r.getNumReferences();
              }
              return null;
            };
            function lR(e, t) {
              e = x(e.h);
              for (var n = e.next(); !n.done; n = e.next())
                if (((n = n.value), n.find(t) != null)) return n.We();
              return -1;
            }
            ((h.get = function (e) {
              for (var t = this.i, n = x(this.h), r = n.next(); !r.done; r = n.next()) {
                r = r.value;
                var i = r.get(e - t);
                if (i) return i;
                ((i = r.getNumReferences()), (t += r.getNumEvicted() + i));
              }
              return null;
            }),
              (h.offset = function () {}),
              (h.tf = function () {}),
              (h.Ya = function (e) {
                if (this.h.length) {
                  var t = this.h[0];
                  (t.Ya(e),
                    t.getNumReferences() == 0 &&
                      (this.h.shift(), (this.i += t.getNumEvicted()), t.release(), this.Ya(e)));
                }
              }),
              (h.ke = function () {}),
              (h.pd = function () {}),
              (h.Rf = function () {}),
              de("shaka.media.MetaSegmentIndex", Mt),
              (Mt.prototype.updateEvery = Mt.prototype.Rf),
              (Mt.prototype.fit = Mt.prototype.pd),
              (Mt.prototype.mergeAndEvict = Mt.prototype.ke),
              (Mt.prototype.evict = Mt.prototype.Ya),
              (Mt.prototype.merge = Mt.prototype.tf),
              (Mt.prototype.offset = Mt.prototype.offset),
              (Mt.prototype.get = Mt.prototype.get),
              (Mt.prototype.find = Mt.prototype.find),
              (Mt.prototype.forEachTopLevelReference = Mt.prototype.Fb),
              (Mt.prototype.release = Mt.prototype.release));
            function mu(e) {
              var t = this;
              ((this.g = e),
                (this.j = !1),
                (this.i = this.g.cf()),
                (this.h = new He(function () {
                  t.g.Di(t.i * 0.25);
                })));
            }
            ((mu.prototype.release = function () {
              (this.set(this.Tc()), this.h && (this.h.stop(), (this.h = null)), (this.g = null));
            }),
              (mu.prototype.set = function (e) {
                ((this.i = e), jp(this));
              }),
              (mu.prototype.Tc = function () {
                return this.g.Tc();
              }));
            function jp(e) {
              e.h.stop();
              var t = e.j ? 0 : e.i;
              if (t >= 0)
                try {
                  e.g.cf() != t && e.g.uh(t);
                  return;
                } catch (n) {}
              (e.h.Ea(0.25), e.g.cf() != 0 && e.g.uh(0));
            }
            function Vp(e) {
              var t = this;
              ((this.j = e),
                (this.h = new tt()),
                (this.g = new Set()),
                (this.i = new He(function () {
                  sT(t, !1);
                }).Jb()),
                e.paused || this.i.Ea(0.25),
                this.h.D(e, "playing", function () {
                  t.i.Jb().Ea(0.25);
                }),
                this.h.D(e, "pause", function () {
                  t.i.stop();
                }));
            }
            Vp.prototype.release = function () {
              (this.h && (this.h.release(), (this.h = null)), this.i.stop());
              for (var e = x(this.g), t = e.next(); !t.done; t = e.next()) t.value.release();
              this.g.clear();
            };
            function sT(e, t) {
              var n = e.j.currentTime;
              e = x(e.g);
              for (var r = e.next(); !r.done; r = e.next()) r.value.j(n, t);
            }
            function zc(e) {
              (ut.call(this), (this.g = new Map()), (this.h = e));
            }
            (q(zc, ut),
              (zc.prototype.release = function () {
                (this.g.clear(), ut.prototype.release.call(this));
              }));
            function cR(e, t) {
              var n = e.g.get(t);
              return (n || ((n = { re: [], pg: null, contentType: t }), e.g.set(t, n)), n);
            }
            function dR(e, t, n) {
              var r = cR(e, t.contentType);
              (fR(e, r),
                (e = { xd: t, position: n }),
                (r = r.re),
                (t = r.findIndex(function (i) {
                  return i.position >= n;
                })),
                t >= 0 ? r.splice(t, r[t].position == n ? 1 : 0, e) : r.push(e));
            }
            zc.prototype.j = function (e) {
              for (var t = x(this.g.values()), n = t.next(); !n.done; n = t.next()) {
                n = n.value;
                var r = n.pg;
                e: {
                  for (var i = n.re, s = i.length - 1; s >= 0; s--) {
                    var o = i[s];
                    if (o.position <= e) {
                      i = o.xd;
                      break e;
                    }
                  }
                  i = null;
                }
                ((s =
                  i &&
                  !(
                    r === i ||
                    (r &&
                      i &&
                      r.bandwidth == i.bandwidth &&
                      r.audioSamplingRate == i.audioSamplingRate &&
                      r.codecs == i.codecs &&
                      r.contentType == i.contentType &&
                      r.frameRate == i.frameRate &&
                      r.height == i.height &&
                      r.mimeType == i.mimeType &&
                      r.channelsCount == i.channelsCount &&
                      r.pixelAspectRatio == i.pixelAspectRatio &&
                      r.width == i.width)
                  )),
                  (o = i && r && i.label && r.label && r.label !== i.label));
                var u = i && r && i.language && r.language && r.language !== i.language;
                ((r = i && r && i.roles && r.roles && !Ki(r.roles, i.roles)),
                  (o || u || r) &&
                    oT(this, e, i.contentType) &&
                    ((n.pg = i),
                    (r = new Ae(
                      "audiotrackchange",
                      new Map([
                        ["quality", i],
                        ["position", e],
                      ]),
                    )),
                    this.dispatchEvent(r)),
                  s &&
                    oT(this, e, i.contentType) &&
                    ((n.pg = i),
                    JSON.stringify(i),
                    (n = new Ae(
                      "qualitychange",
                      new Map([
                        ["quality", i],
                        ["position", e],
                      ]),
                    )),
                    this.dispatchEvent(n)));
              }
            };
            function oT(e, t, n) {
              return !!(
                (e = e.h()[n]) &&
                e.length > 0 &&
                ((n = e[e.length - 1].end), t >= e[0].start && t < n)
              );
            }
            function fR(e, t) {
              if ((e = e.h()[t.contentType]) && e.length > 0) {
                var n = e[0].start,
                  r = e[e.length - 1].end,
                  i = t.re;
                t.re = i.filter(function (s, o) {
                  return !(
                    (s.position <= n && o + 1 < i.length && i[o + 1].position <= n) ||
                    s.position >= r
                  );
                });
              } else t.re = [];
            }
            function Xc(e) {
              var t = {
                bandwidth: e.bandwidth || 0,
                audioSamplingRate: null,
                codecs: e.codecs,
                contentType: e.type,
                frameRate: null,
                height: null,
                mimeType: e.mimeType,
                channelsCount: null,
                pixelAspectRatio: null,
                width: null,
                label: null,
                roles: e.roles,
                language: null,
              };
              return (
                e.type == "video" &&
                  ((t.frameRate = e.frameRate || null),
                  (t.height = e.height || null),
                  (t.pixelAspectRatio = e.pixelAspectRatio || null),
                  (t.width = e.width || null)),
                e.type == "audio" &&
                  ((t.audioSamplingRate = e.audioSamplingRate),
                  (t.channelsCount = e.channelsCount),
                  (t.label = e.label || null),
                  (t.language = e.language)),
                t
              );
            }
            function yu(e) {
              (ut.call(this), (this.h = new Map()), (this.i = e), (this.g = null));
            }
            (q(yu, ut),
              (yu.prototype.release = function () {
                (this.h.clear(), this.g && (this.g.stop(), (this.g = null)), ut.prototype.release.call(this));
              }));
            function Hp(e, t) {
              var n =
                t.schemeIdUri + "_" + t.id + "_" + (t.startTime.toFixed(1) + "_" + t.endTime.toFixed(1));
              e.h.has(n) ||
                (e.h.set(n, t),
                (t = new Ae("regionadd", new Map([["region", t]]))),
                e.dispatchEvent(t),
                hR(e));
            }
            function hR(e) {
              e.g ||
                (e.g = new He(function () {
                  for (var t = e.i(), n = x(e.h), r = n.next(); !r.done; r = n.next()) {
                    var i = x(r.value);
                    ((r = i.next().value),
                      (i = i.next().value),
                      i.endTime < t.start &&
                        (e.h.delete(r),
                        (r = new Ae("regionremove", new Map([["region", i]]))),
                        e.dispatchEvent(r)));
                  }
                  !e.h.size && e.g && (e.g.stop(), (e.g = null));
                }).Ea(2));
            }
            function Wc(e, t, n, r, i) {
              function s(o, u) {
                return !(u.fastSwitching && o.Xc && o.je);
              }
              ((this.m = e),
                (this.i = t),
                (this.l = n),
                (this.g = new Map()),
                (this.j = new Map()),
                (this.h = null),
                (this.o = r),
                (this.u = i || s));
            }
            function pR(e, t) {
              ((e.l = t), (e = x(e.g.values())));
              for (var n = e.next(); !n.done; n = e.next()) n.value.g = t;
            }
            function vu(e, t, n) {
              if (
                ((n = n === void 0 ? !1 : n),
                !e.i.segmentIndex || (e.h || (e.h = e.i.segmentIndex.Xb(t, !0, e.o)), !e.h))
              )
                return Promise.resolve();
              for (n && e.h.next(), t = []; e.g.size < e.m && ((n = e.h.next().value), !!n); ) {
                var r = !0;
                if (
                  (n.isPreload() && n.endByte != null && (r = !1),
                  n.Kc() == 2 && (r = !1),
                  n.$b(!1) && (r = !1),
                  r && n.ea && t.push(aT(e, n.ea)),
                  r && !e.g.has(n) && ((r = new zp(e.l)), t.push(cT(r, n, e.i)), e.g.set(n, r)),
                  !e.u(n, e.i))
                )
                  break;
              }
              return (Gp(e), Promise.all(t));
            }
            function aT(e, t) {
              if (
                !e.i.segmentIndex ||
                t.$b() ||
                Array.from(e.j.keys()).some(function (i) {
                  return du(i, t);
                })
              )
                return Promise.resolve();
              var n = new zp(e.l),
                r = cT(n, t, e.i);
              return (e.j.set(t, n), r);
            }
            function uT(e, t) {
              t = x(t.keys());
              for (var n = t.next(); !n.done; n = t.next()) (n = n.value) && xu(e, n);
            }
            function Zr(e) {
              (uT(e, e.g), uT(e, e.j), (e.h = null));
            }
            ((Wc.prototype.Ya = function (e, t) {
              t = t === void 0 ? !1 : t;
              for (var n = x(this.g.keys()), r = n.next(); !r.done; r = n.next())
                ((r = r.value), e > r.endTime && xu(this, r));
              t && Gp(this);
            }),
              (Wc.prototype.Jd = function (e) {
                ((this.o = e), this.h && this.h.Jd(e));
              }));
            function Gp(e) {
              if (e.g.size)
                for (
                  var t = Array.from(e.g.keys()), n = x(e.j.keys()), r = n.next(), i = {};
                  !r.done;
                  i = { Qg: void 0 }, r = n.next()
                )
                  ((i.Qg = r.value),
                    t.some(
                      (function (s) {
                        return function (o) {
                          return du(o.ea, s.Qg);
                        };
                      })(i),
                    ) || xu(e, i.Qg));
            }
            function lT(e, t) {
              e.m = t;
              for (var n = Array.from(e.g.keys()); n.length > t; ) {
                var r = n.pop();
                r && xu(e, r);
              }
              Gp(e);
            }
            function gR(e, t) {
              t && t !== e.i && (Zr(e), (e.i = t));
            }
            function xu(e, t) {
              var n = e.g;
              (t instanceof Hn && (n = e.j), (e = n.get(t)), n.delete(t), e && e.abort());
            }
            function zp(e) {
              ((this.g = e), (this.oe = this.Bh = null));
            }
            function cT(e, t, n) {
              var r = new Uint8Array(0);
              return (
                (e.oe = e.g(t, n, function (i) {
                  return F(function (s) {
                    if (s.g == 1)
                      return (r.byteLength > 0 ? (r = Nt(r, i)) : (r = i), e.Bh ? E(s, e.Bh(r), 3) : s.A(0));
                    ((r = new Uint8Array(0)), re(s));
                  });
                })),
                e.oe.promise.catch(function (i) {
                  return i instanceof H && i.code == 7001 ? Promise.resolve() : Promise.reject(i);
                })
              );
            }
            ((zp.prototype.abort = function () {
              this.oe && this.oe.abort();
            }),
              de("shaka.config.CrossBoundaryStrategy", {
                KEEP: "keep",
                RESET: "reset",
                RESET_TO_ENCRYPTED: "reset_to_encrypted",
                RESET_ON_ENCRYPTION_CHANGE: "RESET_ON_ENCRYPTION_CHANGE",
              }));
            function Xp(e) {
              var t = Qn(e),
                n = t.split("/")[0];
              return (
                (e = Vn(e)),
                {
                  type: n,
                  mimeType: t,
                  codecs: e,
                  language: null,
                  height: null,
                  width: null,
                  channelCount: null,
                  sampleRate: null,
                  closedCaptions: new Map(),
                  ze: null,
                  colorGamut: null,
                  frameRate: null,
                  timescale: null,
                }
              );
            }
            function mR(e, t, n) {
              function r(O) {
                R = O.name;
                var z = O.reader;
                z.skip(24);
                var j = z.Ca(),
                  X = z.Ca();
                (z.skip(50), (v = String(j)), (y = String(X)), O.reader.Ia() && Fe(O));
              }
              function i(O) {
                var z = gx(O.reader);
                ((w = z.channelCount), (A = z.sampleRate), s(O.name));
              }
              function s(O) {
                switch (((O = O.toLowerCase()), O)) {
                  case "avc1":
                  case "avc3":
                    (u.push(O + ".42E01E"), (p = !0));
                    break;
                  case "hev1":
                  case "hvc1":
                    (u.push(O + ".1.6.L93.90"), (p = !0));
                    break;
                  case "dvh1":
                  case "dvhe":
                    (u.push(O + ".05.04"), (p = !0));
                    break;
                  case "vp09":
                    (u.push(O + ".00.10.08"), (p = !0));
                    break;
                  case "av01":
                    (u.push(O + ".0.01M.08"), (p = !0));
                    break;
                  case "mp4a":
                    (o.push("mp4a.40.2"), (l = !0));
                    break;
                  case "ac-3":
                  case "ec-3":
                  case "ac-4":
                  case "opus":
                  case "flac":
                    (o.push(O), (l = !0));
                    break;
                  case "apac":
                    (o.push("apac.31.00"), (l = !0));
                }
              }
              var o = [],
                u = [],
                l = !1,
                p = !1,
                m = null,
                y = null,
                v = null,
                w = null,
                A = null,
                I = null,
                C = null,
                k = null,
                R;
              if (
                (new ct()
                  .box("moov", Fe)
                  .box("trak", Fe)
                  .box("mdia", Fe)
                  .S("mdhd", function (O) {
                    ((O = Lc(O.reader, O.version)), (m = O.language), (k = O.timescale));
                  })
                  .box("minf", Fe)
                  .box("stbl", Fe)
                  .S("stsd", Ci)
                  .box("mp4a", function (O) {
                    var z = gx(O.reader);
                    ((w = z.channelCount), (A = z.sampleRate), O.reader.Ia() ? Fe(O) : s(O.name));
                  })
                  .box("esds", function (O) {
                    O = O.reader;
                    for (var z = "mp4a", j, X; O.Ia(); ) {
                      j = O.Y();
                      for (var W = O.Y(); W & 128; ) W = O.Y();
                      if (j == 3)
                        (O.Ca(), (W = O.Y()), W & 128 && O.Ca(), W & 64 && O.skip(O.Y()), W & 32 && O.Ca());
                      else if (j == 4) ((X = O.Y()), O.skip(12));
                      else if (j == 5) break;
                    }
                    (X &&
                      ((z += "." + uu(X)),
                      j == 5 &&
                        O.Ia() &&
                        ((j = O.Y()),
                        (X = (j & 248) >> 3),
                        X === 31 && O.Ia() && (X = 32 + ((j & 7) << 3) + ((O.Y() & 224) >> 5)),
                        (z += "." + X))),
                      o.push(z),
                      (l = !0));
                  })
                  .box("ac-3", i)
                  .box("ec-3", i)
                  .box("ac-4", i)
                  .box("Opus", i)
                  .box("fLaC", i)
                  .box("apac", i)
                  .box("avc1", r)
                  .box("avc3", r)
                  .box("hev1", r)
                  .box("hvc1", r)
                  .box("dva1", r)
                  .box("dvav", r)
                  .box("dvh1", r)
                  .box("dvhe", r)
                  .box("vp09", r)
                  .box("av01", r)
                  .box("avcC", function (O) {
                    var z = R || "";
                    switch (R) {
                      case "dvav":
                        z = "avc3";
                        break;
                      case "dva1":
                        z = "avc1";
                    }
                    ((O = O.reader),
                      O.skip(1),
                      (O = z + "." + uu(O.Y()) + uu(O.Y()) + uu(O.Y())),
                      u.push(O),
                      (p = !0));
                  })
                  .box("hvcC", function (O) {
                    var z = R || "";
                    switch (R) {
                      case "dvh1":
                        z = "hvc1";
                        break;
                      case "dvhe":
                        z = "hev1";
                    }
                    var j = O.reader;
                    (j.skip(1), (O = j.Y()));
                    var X = ["", "A", "B", "C"][O >> 6],
                      W = O & 31,
                      ie = j.U(),
                      ne = (O & 32) >> 5 ? "H" : "L";
                    ((O = [j.Y(), j.Y(), j.Y(), j.Y(), j.Y(), j.Y()]), (j = j.Y()));
                    for (var $ = 0, Q = 0; Q < 32 && (($ |= ie & 1), Q != 31); Q++) (($ <<= 1), (ie >>= 1));
                    for (
                      z = z + ("." + X + W) + ("." + uu($, !0)), z += "." + ne + j, X = "", W = O.length;
                      W--;
                    )
                      ((ne = O[W]) || X) && (X = "." + ne.toString(16).toUpperCase() + X);
                    ((z += X), u.push(z), (p = !0));
                  })
                  .box("dvcC", function (O) {
                    var z = R || "";
                    switch (R) {
                      case "hvc1":
                        z = "dvh1";
                        break;
                      case "hev1":
                        z = "dvhe";
                        break;
                      case "avc1":
                        z = "dva1";
                        break;
                      case "avc3":
                        z = "dvav";
                        break;
                      case "av01":
                        z = "dav1";
                    }
                    var j = O.reader;
                    (j.skip(2),
                      (O = j.Y()),
                      (j = j.Y()),
                      u.push(z + "." + er((O >> 1) & 127) + "." + er(((O << 5) & 32) | ((j >> 3) & 31))),
                      (p = !0));
                  })
                  .box("dvvC", function (O) {
                    var z = R || "";
                    switch (R) {
                      case "hvc1":
                        z = "dvh1";
                        break;
                      case "hev1":
                        z = "dvhe";
                        break;
                      case "avc1":
                        z = "dva1";
                        break;
                      case "avc3":
                        z = "dvav";
                        break;
                      case "av01":
                        z = "dav1";
                    }
                    var j = O.reader;
                    (j.skip(2),
                      (O = j.Y()),
                      (j = j.Y()),
                      u.push(z + "." + er((O >> 1) & 127) + "." + er(((O << 5) & 32) | ((j >> 3) & 31))),
                      (p = !0));
                  })
                  .S("vpcC", function (O) {
                    var z = R || "",
                      j = O.reader;
                    O = j.Y();
                    var X = j.Y();
                    ((j = (j.Y() >> 4) & 15), u.push(z + "." + er(O) + "." + er(X) + "." + er(j)), (p = !0));
                  })
                  .box("av1C", function (O) {
                    var z = R || "";
                    switch (R) {
                      case "dav1":
                        z = "av01";
                    }
                    var j = O.reader;
                    (j.skip(1), (O = j.Y()), (j = j.Y()));
                    var X = O >>> 5,
                      W = (j & 64) >> 6;
                    (u.push(
                      z +
                        "." +
                        X +
                        "." +
                        er(O & 31) +
                        (j >>> 7 ? "H" : "M") +
                        "." +
                        er(X === 2 && W ? ((j & 32) >> 5 ? 12 : 10) : W ? 10 : 8) +
                        "." +
                        ((j & 16) >> 4) +
                        "." +
                        ((j & 8) >> 3) +
                        ((j & 4) >> 2) +
                        (j & 3) +
                        "." +
                        er(1) +
                        "." +
                        er(1) +
                        "." +
                        er(1) +
                        ".0",
                    ),
                      (p = !0));
                  })
                  .box("enca", Mc)
                  .box("encv", Zn)
                  .box("sinf", Fe)
                  .box("frma", function (O) {
                    ((O = Tp(O.reader).codec), s(O));
                  })
                  .box("colr", function (O) {
                    u = u.map(function (X) {
                      if (X.startsWith("av01.")) {
                        var W = O.reader,
                          ie = W.Pa(),
                          ne = W.Tb(4, !1),
                          $ = String.fromCharCode(ne[0]);
                        if (
                          (($ += String.fromCharCode(ne[1])),
                          ($ += String.fromCharCode(ne[2])),
                          ($ += String.fromCharCode(ne[3])),
                          $ === "nclx")
                        ) {
                          ((ne = W.Ca()), ($ = W.Ca()));
                          var Q = W.Ca(),
                            ae = W.Y() >> 7,
                            ce = X.split(".");
                          ce.length == 10 &&
                            ((ce[6] = er(ne)),
                            (ce[7] = er($)),
                            (ce[8] = er(Q)),
                            (ce[9] = String(ae)),
                            (X = ce.join(".")));
                        }
                        W.seek(ie);
                      }
                      return X;
                    });
                    var z = vM(O.reader),
                      j = z.colorGamut;
                    ((I = z.ze), (C = j));
                  })
                  .parse(e || t, !0, !0),
                !o.length && !u.length)
              )
                return null;
              var L = l && !p,
                U = new Map();
              if (p && !n) {
                ((n = new qr("video/mp4")), e && n.init(e));
                try {
                  n.Af(t);
                  for (var G = x(n.Zf()), b = G.next(); !b.done; b = G.next()) {
                    var B = b.value;
                    U.set(B, B);
                  }
                } catch (O) {}
                n.Pd();
              }
              return {
                type: L ? "audio" : "video",
                mimeType: L ? "audio/mp4" : "video/mp4",
                codecs: Wp(o.concat(u)).join(", "),
                language: m,
                height: y,
                width: v,
                channelCount: w,
                sampleRate: A,
                closedCaptions: U,
                ze: I,
                colorGamut: C,
                frameRate: null,
                timescale: k,
              };
            }
            function Wp(e) {
              var t = new Set(),
                n = [];
              e = x(e);
              for (var r = e.next(); !r.done; r = e.next()) {
                r = r.value;
                var i = Zi(r);
                t.has(i) || (n.push(r), t.add(i));
              }
              return (
                (t = Gh("audio", n)),
                (r = Gh("video", n)),
                (e = Gh(Ve, n)),
                (r = yR(r)),
                (t = t.concat(r).concat(e)),
                n.length && !t.length ? n : t
              );
            }
            function yR(e) {
              if (e.length <= 1) return e;
              var t = e.find(function (n) {
                return (
                  n.startsWith("dvav.") ||
                  n.startsWith("dva1.") ||
                  n.startsWith("dvh1.") ||
                  n.startsWith("dvhe.") ||
                  n.startsWith("dav1.") ||
                  n.startsWith("dvc1.") ||
                  n.startsWith("dvi1.")
                );
              });
              return t
                ? In('video/mp4; codecs="' + t + '"')
                  ? [t]
                  : e.filter(function (n) {
                      return n != t;
                    })
                : e;
            }
            function vR(e) {
              var t = null;
              return (
                new ct()
                  .box("moov", Fe)
                  .box("trak", Fe)
                  .box("mdia", Fe)
                  .box("minf", Fe)
                  .box("stbl", Fe)
                  .S("stsd", Ci)
                  .box("encv", Zn)
                  .box("enca", Mc)
                  .box("sinf", Fe)
                  .box("schi", Fe)
                  .S("tenc", function (n) {
                    ((n = n.reader), n.Y(), n.Y(), n.Y(), n.Y(), (n = n.Tb(16, !1)), (t = mi(n)));
                  })
                  .parse(e, !0),
                t
              );
            }
            function Kp(e, t, n) {
              var r, i, s, o, u;
              return F(function (l) {
                if (l.g == 1) return ((r = t), r.cryptoKey ? l.A(2) : E(l, r.fetchKey(), 3));
                if (((i = r.iv), !i))
                  for (
                    i = Le(new ArrayBuffer(16)), s = r.firstMediaSequenceNumber + n, o = i.byteLength - 1;
                    o >= 0;
                    o--
                  )
                    ((i[o] = s & 255), (s >>= 8));
                return (
                  t.blockCipherMode == "CBC"
                    ? (u = { name: "AES-CBC", iv: i })
                    : (u = { name: "AES-CTR", counter: i, length: 64 }),
                  l.return(g.crypto.subtle.decrypt(u, r.cryptoKey, e))
                );
              });
            }
            function Fo(e, t, n) {
              var r, i, s, o, u, l, p;
              return F(function (m) {
                switch (m.g) {
                  case 1:
                    return (
                      (r = Bo(e)),
                      (i = xR.get(r))
                        ? m.return(i)
                        : ((s = 0),
                          (o = Ut([e], n)),
                          te(m, 2),
                          (o.method = "HEAD"),
                          E(m, t.request(s, o).promise, 4))
                    );
                  case 4:
                    ((u = m.h), (i = u.headers["content-type"]), pe(m, 3));
                    break;
                  case 2:
                    if (((l = oe(m)), !l || (l.code != 1002 && l.code != 1001))) {
                      m.A(3);
                      break;
                    }
                    return ((o.method = "GET"), E(m, t.request(s, o).promise, 6));
                  case 6:
                    ((p = m.h), (i = p.headers["content-type"]));
                  case 3:
                    return m.return(i ? i.toLowerCase().split(";").shift() : "");
                }
              });
            }
            function Bo(e) {
              return (
                (e = new Dt(e).Sb.split("/").pop().split(".")),
                e.length == 1 ? "" : e.pop().toLowerCase()
              );
            }
            function Tu(e, t, n, r, i) {
              return (
                (e = Ut(e, r, i)),
                (t != 0 || n != null) && (e.headers.Range = n ? "bytes=" + t + "-" + n : "bytes=" + t + "-"),
                e
              );
            }
            var xR = new Map()
              .set("mp4", "video/mp4")
              .set("m4v", "video/mp4")
              .set("m4a", "audio/mp4")
              .set("webm", "video/webm")
              .set("weba", "audio/webm")
              .set("mkv", "video/webm")
              .set("ts", "video/mp2t")
              .set("ogv", "video/ogg")
              .set("ogg", "audio/ogg")
              .set("mpg", "video/mpeg")
              .set("mpeg", "video/mpeg")
              .set("mov", "video/quicktime")
              .set("m3u8", "application/x-mpegurl")
              .set("mpd", "application/dash+xml")
              .set("ism", "application/vnd.ms-sstr+xml")
              .set("mp3", "audio/mpeg")
              .set("aac", "audio/aac")
              .set("flac", "audio/flac")
              .set("wav", "audio/wav")
              .set("sbv", "text/x-subviewer")
              .set("srt", "text/srt")
              .set("vtt", "text/vtt")
              .set("webvtt", "text/vtt")
              .set("ttml", "application/ttml+xml")
              .set("lrc", "application/x-subtitle-lrc")
              .set("ssa", "text/x-ssa")
              .set("ass", "text/x-ssa")
              .set("jpeg", "image/jpeg")
              .set("jpg", "image/jpeg")
              .set("png", "image/png")
              .set("svg", "image/svg+xml")
              .set("webp", "image/webp")
              .set("avif", "image/avif")
              .set("html", "text/html")
              .set("htm", "text/html");
            function dT(e, t) {
              var n = this;
              ((this.g = t),
                (this.j = e),
                (this.i = null),
                (this.M = new Map()),
                (this.C = 1),
                (this.B = this.o = null),
                (this.V = 0),
                (this.h = new Map()),
                (this.N = !1),
                (this.X = null),
                (this.F = !1),
                (this.l = new Io(function () {
                  return TR(n);
                })),
                (this.R = Date.now() / 1e3),
                (this.m = new Map()),
                (this.T = { projection: null, hfov: null }),
                (this.ba = 0),
                (this.$ = 1 / 0),
                (this.H = null),
                (this.O = []),
                (this.u = new He(function () {
                  if (n.j && n.g)
                    if (n.j.presentationTimeline.W()) {
                      var r = n.j.presentationTimeline.Zb(),
                        i = n.j.presentationTimeline.Gb();
                      i - r > 1 ? JM(n.g.Z, r, i) : Lp(n.g.Z);
                    } else (Lp(n.g.Z), n.u && n.u.stop());
                  else n.u && n.u.stop();
                })),
                (this.I = null),
                (this.J = !1),
                (this.K = new He(function () {
                  var r = n.g.video;
                  !r.ended && n.I && ((n.J = !0), (r.currentTime = n.I), (n.I = null));
                })),
                (this.G = new tt()));
            }
            ((h = dT.prototype),
              (h.destroy = function () {
                return this.l.destroy();
              }));
            function TR(e) {
              var t, n, r, i, s, o, u;
              return F(function (l) {
                if (l.g == 1) {
                  for (
                    e.u && e.u.stop(),
                      e.u = null,
                      e.K && e.K.stop(),
                      e.K = null,
                      e.G && (e.G.release(), (e.G = null)),
                      t = [],
                      n = x(e.h.values()),
                      r = n.next();
                    !r.done;
                    r = n.next()
                  )
                    ((i = r.value), _i(i), t.push(Jc(i)), i.ia && (Zr(i.ia), (i.ia = null)));
                  for (s = x(e.m.values()), o = s.next(); !o.done; o = s.next()) ((u = o.value), Zr(u));
                  return E(l, Promise.all(t), 2);
                }
                (e.h.clear(), e.m.clear(), (e.g = null), (e.j = null), (e.i = null), (e.I = null), re(l));
              });
            }
            h.configure = function (e) {
              if (
                ((this.i = e),
                (this.X = new U0(
                  {
                    maxAttempts: Math.max(e.retryParameters.maxAttempts, 2),
                    baseDelay: e.retryParameters.baseDelay,
                    backoffFactor: e.retryParameters.backoffFactor,
                    fuzzFactor: e.retryParameters.fuzzFactor,
                  },
                  !0,
                )),
                e.disableAudioPrefetch)
              ) {
                var t = this.h.get("audio");
                (t && t.ia && (Zr(t.ia), (t.ia = null)), (t = x(this.m.keys())));
                for (var n = t.next(); !n.done; n = t.next())
                  ((n = n.value), Zr(this.m.get(n)), this.m.delete(n));
              }
              for (
                e.disableTextPrefetch && (t = this.h.get(Ve)) && t.ia && (Zr(t.ia), (t.ia = null)),
                  e.disableVideoPrefetch && (t = this.h.get("video")) && t.ia && (Zr(t.ia), (t.ia = null)),
                  t = x(this.h.keys()),
                  n = t.next();
                !n.done;
                n = t.next()
              )
                ((n = this.h.get(n.value)),
                  n.ia
                    ? (lT(n.ia, e.segmentPrefetchLimit),
                      e.segmentPrefetchLimit > 0 || (Zr(n.ia), (n.ia = null)))
                    : e.segmentPrefetchLimit > 0 && (n.ia = Yp(this, n.stream)));
              e.disableAudioPrefetch || MR(this);
            };
            function wR(e, t, n) {
              e.j.presentationTimeline.W() || ((e.ba = t), (e.$ = n));
            }
            h.start = function (e) {
              var t = this;
              return F(function (n) {
                if (n.g == 1) return E(n, CR(t, e || new Map()), 2);
                (ht(t.l), (t.N = !0), re(n));
              });
            };
            function SR(e, t) {
              var n, r, i, s, o, u;
              F(function (l) {
                switch (l.g) {
                  case 1:
                    return ((n = Ot), e.V++, (r = e.V), te(l, 2), E(l, bx(e.g.Z, n.Na), 4));
                  case 4:
                    pe(l, 3);
                    break;
                  case 2:
                    ((i = oe(l)), e.g && e.g.onError(i));
                  case 3:
                    ((s = Rt(t.mimeType, t.codecs)),
                      jc(e.g.Z, s, e.j.sequenceMode, t.external),
                      (o = e.g.Z.ba),
                      (o.isTextVisible() || e.i.alwaysStreamText) &&
                        e.V == r &&
                        ((u = $c(e, t)), e.h.set(n.Na, u), Cn(e, u, 0)),
                      re(l));
                }
              });
            }
            function AR(e) {
              var t = e.h.get(Ve);
              (t &&
                (_i(t),
                Jc(t).catch(function () {}),
                (e.H = e.h.get(Ve)),
                e.h.delete(Ve),
                t.stream && t.stream.closeSegmentIndex && t.stream.closeSegmentIndex()),
                (e.B = null));
            }
            function fT(e, t) {
              for (var n = e.g.Ob() < 0, r = x(e.h.values()), i = r.next(); !i.done; i = r.next())
                ((i = i.value), i.ua && i.ua.Jd(n), i.ia && i.ia.Jd(n));
              for (r = x(e.m.values()), i = r.next(); !i.done; i = r.next()) i.value.Jd(n);
              (n = e.h.get("video")) &&
                (r = n.stream) &&
                (t
                  ? (t = r.trickModeVideo) && !n.Nc && (jo(e, t, !1, 0, !1), (n.Nc = r))
                  : (t = n.Nc) && ((n.Nc = null), jo(e, t, !0, 0, !1)));
            }
            function hT(e, t, n, r, i, s) {
              ((n = n === void 0 ? !1 : n),
                (r = r === void 0 ? 0 : r),
                (i = i === void 0 ? !1 : i),
                (s = s === void 0 ? !1 : s),
                (e.o = t),
                e.N && (t.video && jo(e, t.video, n, r, i, s), t.audio && jo(e, t.audio, n, r, i, s)));
            }
            function Kc(e, t) {
              F(function (n) {
                if (n.g == 1)
                  return (
                    (e.H = null),
                    (e.B = t),
                    e.N ? (t.segmentIndex ? n.A(2) : E(n, t.createSegmentIndex(), 2)) : n.return()
                  );
                (jo(e, t, !0, 0, !1), re(n));
              });
            }
            function ER(e) {
              var t = e.h.get(Ve);
              t && jo(e, t.stream, !0, 0, !0);
            }
            function IR(e, t) {
              for (var n = x(e.M.entries()), r = n.next(); !r.done; r = n.next()) {
                var i = x(r.value);
                ((r = i.next().value), (i = i.next().value), r.includes(t.type) && (i(), e.M.delete(r)));
              }
            }
            function jo(e, t, n, r, i, s) {
              var o = e.h.get(t.type);
              o || t.type != Ve
                ? o &&
                  (o.Nc && (t.trickModeVideo ? ((o.Nc = t), (t = t.trickModeVideo)) : (o.Nc = null)),
                  o.stream != t || i) &&
                  (e.m.has(t) ? (o.ia = e.m.get(t)) : o.ia && gR(o.ia, t),
                  t.type == Ve &&
                    o.stream != t &&
                    ((i = Rt(t.mimeType, t.codecs)), jc(e.g.Z, i, e.j.sequenceMode, t.external)),
                  !e.m.has(o.stream) &&
                    o.stream.closeSegmentIndex &&
                    (o.Ka
                      ? ((i = "(" + o.type + ":" + o.stream.id + ")"),
                        e.M.has(i) || e.M.set(i, o.stream.closeSegmentIndex))
                      : o.stream.closeSegmentIndex()),
                  (i = o.stream.isAudioMuxedInVideo != t.isAudioMuxedInVideo),
                  (o.stream = t),
                  (o.ua = null),
                  (o.gg = !!s),
                  t.dependencyStream ? (o.Fc = $c(e, t.dependencyStream)) : (o.Fc = null),
                  vT(e),
                  i &&
                    ((o.pb = null),
                    (o.tc = null),
                    (o.sc = null),
                    t.isAudioMuxedInVideo &&
                      ((t = null),
                      o.type === "video"
                        ? (t = e.h.get("audio"))
                        : o.type === "audio" && (t = e.h.get("video")),
                      t &&
                        (Jc(t).catch(function () {}),
                        (t.pb = null),
                        (t.tc = null),
                        (t.sc = null),
                        $p(e, t),
                        pT(e, t).catch(function (u) {
                          e.g && e.g.onError(u);
                        })))),
                  n
                    ? o.Wb
                      ? (o.Md = !0)
                      : o.Ka
                        ? ((o.Ub = !0), (o.ld = r), (o.Md = !0))
                        : (_i(o),
                          Qp(e, o, !0, r).catch(function (u) {
                            e.g && e.g.onError(u);
                          }))
                    : o.Ka || o.qb || Cn(e, o, 0),
                  pT(e, o).catch(function (u) {
                    e.g && e.g.onError(u);
                  }))
                : SR(e, t);
            }
            function pT(e, t) {
              var n, r, i;
              return F(function (s) {
                if (s.g == 1)
                  return t.Va
                    ? ((n = t.stream), (r = t.Va), n.segmentIndex ? s.A(2) : E(s, n.createSegmentIndex(), 2))
                    : s.return();
                if (s.g != 4)
                  return (
                    (i = n.dependencyStream),
                    !i || i.segmentIndex ? s.A(4) : E(s, i.createSegmentIndex(), 4)
                  );
                if (t.Va != r || t.stream != n) return s.return();
                var o = e.g.nc(),
                  u = Ws(e.g.Z, t.type),
                  l = t.stream.segmentIndex.find(t.Ja ? t.Ja.endTime : o),
                  p = l == null ? null : t.stream.segmentIndex.get(l);
                ((l = p ? wp(p) : null),
                  p &&
                    !l &&
                    (l = ((p.endTime - p.getStartTime()) * (t.stream.bandwidth || e.o.bandwidth)) / 8),
                  l
                    ? ((p = p.ea) && (l += (p.endByte ? p.endByte + 1 - p.startByte : null) || 0),
                      (p = e.g.getBandwidthEstimate()),
                      (o = (l * 8) / p < (u || 0) - o - e.i.rebufferingGoal || t.Va.h.g > l))
                    : (o = !0),
                  o && t.Va.abort(),
                  re(s));
              });
            }
            h.bd = function () {
              if (this.g) {
                for (var e = this.g.nc(), t = x(this.h.keys()), n = t.next(); !n.done; n = t.next()) {
                  var r = n.value;
                  n = this.h.get(r);
                  var i;
                  if (
                    ((i = !this.J) &&
                      ((i = this.g.Z),
                      r == Ve
                        ? ((i = i.h), (i = i.g == null || i.h == null ? !1 : e >= i.g && e < i.h))
                        : ((i = bo(i, r)), (i = Sp(i, e))),
                      (i = !i)),
                    i)
                  ) {
                    if (((this.R = 0), n.ia && (n.ia.h = null), n.type === "audio")) {
                      i = x(this.m.values());
                      for (var s = i.next(); !s.done; s = i.next()) s.value.h = null;
                    }
                    ((n.ua = null),
                      (Ws(this.g.Z, r) != null || n.Ka) && $p(this, n),
                      n.Va && (n.Va.abort(), (n.Va = null)),
                      r === Ve && ((r = this.g.Z), r.K && r.K.Pd()),
                      (n.bd = !0));
                  }
                  !this.J || n.Wb || n.Ka || n.qb || Cn(this, n, 0);
                }
                Su(this) && tg(this);
              }
            };
            function $p(e, t) {
              t.Wb ||
                t.Ub ||
                (t.Ka
                  ? ((t.Ub = !0), (t.ld = 0))
                  : Dp(e.g.Z, t.type) == null
                    ? t.qb == null && Cn(e, t, 0)
                    : (_i(t),
                      Qp(e, t, !1, 0).catch(function (n) {
                        e.g && e.g.onError(n);
                      })));
            }
            function CR(e, t) {
              var n, r, i, s, o, u, l, p;
              return F(function (m) {
                if (m.g == 1) {
                  if (!e.o) throw new H(2, 5, 5006);
                  return (
                    (n = Zc(e, !0)),
                    (r = e.g.Z),
                    E(m, r.init(n, e.j.sequenceMode, e.j.type, e.j.ignoreManifestTimestampsInSegmentsMode), 2)
                  );
                }
                for (ht(e.l), e.updateDuration(), i = x(n.keys()), s = i.next(); !s.done; s = i.next())
                  ((o = s.value),
                    (u = n.get(o)),
                    e.h.has(o) ||
                      ((l = $c(e, u)),
                      t.has(u.id) &&
                        ((p = t.get(u.id)),
                        pR(p, function (y, v, w) {
                          return qc(y, v, w || null, e.i.retryParameters, e.g.vc);
                        }),
                        (l.ia = p)),
                      e.h.set(o, l),
                      Cn(e, l, 0)));
                (vT(e), re(m));
              });
            }
            function $c(e, t) {
              var n = {
                stream: t,
                type: t.type,
                ua: null,
                ia: Yp(e, t),
                Ja: null,
                pb: null,
                pf: null,
                tc: null,
                sc: null,
                mf: null,
                nf: null,
                Nc: null,
                endOfStream: !1,
                Ka: !1,
                qb: null,
                Ub: !1,
                ld: 0,
                Md: !1,
                Wb: !1,
                bd: !0,
                gg: !1,
                fh: !1,
                ce: !1,
                Va: null,
                Fc: null,
              };
              return (t.dependencyStream && (n.Fc = $c(e, t.dependencyStream)), n);
            }
            function Yp(e, t) {
              if (
                (t.type === "video" && e.i.disableVideoPrefetch) ||
                (t.type === "audio" && e.i.disableAudioPrefetch) ||
                (t.type === Ve &&
                  (t.mimeType == "application/cea-608" || t.mimeType == "application/cea-708")) ||
                (t.type === Ve && e.i.disableTextPrefetch)
              )
                return null;
              if (e.m.has(t)) return e.m.get(t);
              var n = e.h.get(t.type);
              return (n = n && n.ia) && t === n.i
                ? n
                : e.i.segmentPrefetchLimit > 0
                  ? new Wc(
                      e.i.segmentPrefetchLimit,
                      t,
                      function (r, i, s) {
                        return qc(r, i, s || null, e.i.retryParameters, e.g.vc);
                      },
                      e.g.Ob() < 0,
                      e.g.hl,
                    )
                  : null;
            }
            function MR(e) {
              for (
                var t = e.i.segmentPrefetchLimit,
                  n = e.i.prefetchAudioLanguages,
                  r = x(e.j.variants),
                  i = r.next(),
                  s = {};
                !i.done;
                s = { Mb: void 0 }, i = r.next()
              )
                if (((s.Mb = i.value), s.Mb.audio))
                  if (e.m.has(s.Mb.audio)) {
                    if (
                      ((i = e.m.get(s.Mb.audio)),
                      lT(i, t),
                      !(
                        t > 0 &&
                        n.some(
                          (function (u) {
                            return function (l) {
                              return wo(u.Mb.audio.language, l);
                            };
                          })(s),
                        )
                      ))
                    ) {
                      var o = e.h.get(s.Mb.audio.type);
                      (i !== (o && o.ia) && Zr(i), e.m.delete(s.Mb.audio));
                    }
                  } else
                    t <= 0 ||
                      !n.some(
                        (function (u) {
                          return function (l) {
                            return wo(u.Mb.audio.language, l);
                          };
                        })(s),
                      ) ||
                      !(i = Yp(e, s.Mb.audio)) ||
                      (s.Mb.audio.segmentIndex || s.Mb.audio.createSegmentIndex(), e.m.set(s.Mb.audio, i));
            }
            h.updateDuration = function () {
              var e = px(),
                t = this.j.presentationTimeline.getDuration();
              t < 1 / 0
                ? (e && (this.u && this.u.stop(), Lp(this.g.Z)), this.g.Z.Ab(t))
                : e
                  ? (this.u && this.u.Ea(0.5), this.g.Z.Ab(1 / 0))
                  : this.g.Z.Ab(4294967296);
            };
            function RR(e, t) {
              var n, r, i, s, o, u, l, p, m;
              return F(function (y) {
                switch (y.g) {
                  case 1:
                    if ((ht(e.l), (n = Ot), t.Ka || t.qb == null || t.Wb)) return y.return();
                    if (((t.qb = null), !t.Ub)) {
                      y.A(2);
                      break;
                    }
                    return E(y, Qp(e, t, t.Md, t.ld), 3);
                  case 3:
                    return y.return();
                  case 2:
                    if ((IR(e, t), t.stream.segmentIndex)) {
                      y.A(4);
                      break;
                    }
                    return ((r = t.stream), te(y, 5), E(y, t.stream.createSegmentIndex(), 7));
                  case 7:
                    pe(y, 6);
                    break;
                  case 5:
                    return ((i = oe(y)), E(y, Zp(e, t, i), 8));
                  case 8:
                    return y.return();
                  case 6:
                    if (r != t.stream)
                      return (
                        r.closeSegmentIndex && r.closeSegmentIndex(),
                        t.Ka || t.qb || Cn(e, t, 0),
                        y.return()
                      );
                  case 4:
                    if (!t.Fc) {
                      y.A(9);
                      break;
                    }
                    if (t.Fc.stream.segmentIndex) {
                      y.A(9);
                      break;
                    }
                    return (te(y, 11), E(y, t.Fc.stream.createSegmentIndex(), 13));
                  case 13:
                    pe(y, 9);
                    break;
                  case 11:
                    oe(y);
                  case 9:
                    (te(y, 14), (s = kR(e, t)), s != null && (Cn(e, t, s), (t.ce = !1)), pe(y, 15));
                    break;
                  case 14:
                    return ((o = oe(y)), E(y, Zp(e, t, o), 16));
                  case 16:
                    return y.return();
                  case 15:
                    if (t.type === n.Na) return y.return();
                    if (
                      ((u = []),
                      t.stream && !t.stream.isAudioMuxedInVideo && u.push(t),
                      (l = t.type === n.aa ? n.wa : n.aa),
                      (p = e.h.get(l)) && p.stream && !p.stream.isAudioMuxedInVideo && u.push(p),
                      !e.N ||
                        !u.every(function (v) {
                          return v.endOfStream;
                        }))
                    ) {
                      y.A(0);
                      break;
                    }
                    return E(y, e.g.Z.endOfStream(), 18);
                  case 18:
                    (ht(e.l),
                      (m = e.g.Z.getDuration()),
                      m != 0 && m < e.j.presentationTimeline.getDuration() && e.j.presentationTimeline.Ab(m),
                      re(y));
                }
              });
            }
            function kR(e, t) {
              if (Jp(t)) return ($M(e.g.Z, t.stream.originalId || ""), null);
              if ((t.type == Ve && YM(e.g.Z), t.stream.isAudioMuxedInVideo && t.type == "audio")) return null;
              if (t.type != Ve && is(e.g.Z)) return (Qc(e, !0), null);
              var n = e.i.updateIntervalSeconds / Math.max(1, Math.abs(e.g.Ob()));
              if (!Lx(e.g.Z) && t.type != Ve) return n / 2;
              var r = e.g.nc();
              if (t.type === "audio")
                for (var i = x(e.m.keys()), s = i.next(); !s.done; s = i.next())
                  ((s = e.m.get(s.value)), s.Ya(r, !0), vu(s, r));
              i = t.Ja ? t.Ja.endTime : r;
              var o = WM(e.g.Z, t.type, r);
              s = Math.max(1, Math.max(e.i.rebufferingGoal, e.i.bufferingGoal) * e.C);
              var u = e.j.presentationTimeline.getDuration() - i,
                l = Ws(e.g.Z, t.type);
              if (u < 1e-6 && l)
                return (
                  (t.endOfStream = !0),
                  t.type == "video" && (n = e.h.get(Ve)) && Jp(n) && (n.endOfStream = !0),
                  null
                );
              if (((t.endOfStream = !1), o >= s)) return n / 2;
              if (((u = !t.ua), (l = gT(e, t, r, l)), !l))
                return ((e = 1 / 0), (t = t.Ja) && (e = t.endTime - t.startTime), Math.min(e / 2, n));
              o = t.pb;
              var p = l.ea;
              (o && p && du(p, o) && (o.g = p.g),
                (o = !1),
                u && t.gg && ((o = !0), (t.gg = !1)),
                (u = 1 / 0),
                (p = Array.from(e.h.values())),
                (p = x(p)));
              for (var m = p.next(); !m.done; m = p.next())
                ((m = m.value),
                  Jp(m) || (m.ua && !m.ua.current()) || (u = Math.min(u, m.Ja ? m.Ja.endTime : r)));
              return i >= u + e.j.presentationTimeline.h
                ? n
                : (t.ia &&
                    t.ua &&
                    !e.m.has(t.stream) &&
                    (t.ia.Ya(l.startTime + 0.001), vu(t.ia, l.startTime).catch(function () {})),
                  (Su(e) && bR(e, t, l)) ||
                    (_R(e, t, r, l, o).catch(function () {}), t.Fc && mT(e, t.Fc, r, s)),
                  null);
            }
            function gT(e, t, n, r) {
              if (t.ua)
                return (
                  (n = t.ua.current()) &&
                    t.Ja &&
                    Math.abs(t.Ja.startTime - n.startTime) < 0.001 &&
                    (n = t.ua.next().value),
                  n
                );
              if (t.Ja || r)
                return (
                  (n = t.Ja ? t.Ja.endTime : r),
                  (e = e.g.Ob() < 0),
                  t.stream.segmentIndex && (t.ua = t.stream.segmentIndex.Xb(n, !1, e)),
                  t.ua && t.ua.next().value
                );
              r = e.j.sequenceMode || Su(e) ? 0 : e.i.inaccurateManifestTolerance;
              var i = Math.max(n - r, 0);
              e = e.g.Ob() < 0;
              var s = null;
              return (
                r &&
                  (t.stream.segmentIndex && (t.ua = t.stream.segmentIndex.Xb(i, !1, e)),
                  (s = t.ua && t.ua.next().value)),
                s ||
                  (t.stream.segmentIndex && (t.ua = t.stream.segmentIndex.Xb(n, !1, e)),
                  (s = t.ua && t.ua.next().value)),
                s
              );
            }
            function _R(e, t, n, r, i) {
              var s, o, u, l, p, m, y, v, w, A, I, C, k, R, L, U, G;
              return F(function (b) {
                switch (b.g) {
                  case 1:
                    if (((s = Ot), (o = t.stream), (u = t.ua), (t.Ka = !0), te(b, 2), r.Kc() == 2))
                      throw new H(1, 1, 1011);
                    return E(b, DR(e, t, r, i), 4);
                  case 4:
                    return (
                      ht(e.l),
                      e.F
                        ? b.return()
                        : ((l = o.mimeType == "video/mp4" || o.mimeType == "audio/mp4"),
                          (p = g.ReadableStream),
                          e.i.lowLatencyMode && e.j.isLowLatency && p && l && (e.j.type != "HLS" || r.o)
                            ? ((v = new Uint8Array(0)),
                              (A = w = !1),
                              (C = function (B) {
                                var O, z, j;
                                return F(function (X) {
                                  switch (X.g) {
                                    case 1:
                                      if (w || ((A = !0), ht(e.l), e.F)) return X.return();
                                      if (
                                        (te(X, 2),
                                        (v = Nt(v, B)),
                                        (O = !1),
                                        (z = 0),
                                        new ct()
                                          .box("mdat", function (W) {
                                            ((z = W.size + W.start), (O = !0));
                                          })
                                          .parse(v, !1, !0),
                                        !O)
                                      ) {
                                        X.A(4);
                                        break;
                                      }
                                      return (
                                        (j = v.subarray(0, z)),
                                        (v = v.subarray(z)),
                                        E(X, qp(e, t, n, o, r, j, !0, i), 5)
                                      );
                                    case 5:
                                      t.ia && t.ua && vu(t.ia, r.startTime, !0);
                                    case 4:
                                      pe(X, 0);
                                      break;
                                    case 2:
                                      ((I = oe(X)), re(X));
                                  }
                                });
                              }),
                              E(b, wu(e, t, r, C), 9))
                            : ((m = wu(e, t, r)), E(b, m, 7)))
                    );
                  case 7:
                    return (
                      (y = b.h),
                      ht(e.l),
                      e.F
                        ? b.return()
                        : (ht(e.l),
                          t.Ub
                            ? ((t.Ka = !1), Cn(e, t, 0), b.return())
                            : E(b, qp(e, t, n, o, r, y, !1, i), 6))
                    );
                  case 9:
                    if (((k = b.h), I)) throw I;
                    if (A) {
                      b.A(10);
                      break;
                    }
                    return (
                      (w = !0),
                      ht(e.l),
                      e.F
                        ? b.return()
                        : t.Ub
                          ? ((t.Ka = !1), Cn(e, t, 0), b.return())
                          : E(b, qp(e, t, n, o, r, k, !1, i), 10)
                    );
                  case 10:
                    t.ia && t.ua && vu(t.ia, r.startTime, !0);
                  case 6:
                    if ((ht(e.l), e.F)) return b.return();
                    ((t.Ja = r),
                      u.next(),
                      (t.Ka = !1),
                      (t.fh = !1),
                      (R = e.g.Z.Gc()),
                      (L = R[t.type]),
                      JSON.stringify(L),
                      t.Ub ||
                        ((U = null),
                        t.type === s.wa ? (U = e.h.get(s.aa)) : t.type === s.aa && (U = e.h.get(s.wa)),
                        U && U.type == s.aa
                          ? e.g.zd(r, t.stream, U.stream.isAudioMuxedInVideo, !1)
                          : e.g.zd(r, t.stream, t.stream.codecs.includes(","), !1)),
                      _i(t),
                      Cn(e, t, 0),
                      pe(b, 0));
                    break;
                  case 2:
                    if (((G = oe(b)), ht(e.l, G), e.F)) return b.return();
                    if (((t.Ka = !1), G.code == 7001)) ((t.Ka = !1), _i(t), Cn(e, t, 0), b.A(0));
                    else if (t.type == s.Na && e.i.ignoreTextStreamFailures) (e.h.delete(s.Na), b.A(0));
                    else
                      return G.code == 3017
                        ? E(b, PR(e, t, G), 0)
                        : ((t.ce = !0),
                          G.category == 1 && t.ia && xu(t.ia, r),
                          (G.severity = 2),
                          E(b, Zp(e, t, G), 0));
                }
              });
            }
            function mT(e, t, n, r) {
              var i, s, o, u, l, p, m, y, v, w, A, I, C;
              return F(function (k) {
                switch (k.g) {
                  case 1:
                    for (
                      i = Ot, s = t.stream, l = (u = (o = s.segmentIndex) && o.Xb(n)) && u.next().value;
                      l && e.O.includes(l.startTime);
                    )
                      l = u && u.next().value;
                    if (!l) {
                      k.A(0);
                      break;
                    }
                    if (((p = l.ea), !p || du(p, t.pb))) {
                      k.A(3);
                      break;
                    }
                    return ((t.pb = p), te(k, 4), E(k, wu(e, t, p), 6));
                  case 6:
                    m = k.h;
                    var R = e.g.Z;
                    (R.C && nc(R.C, m, 0, s), (e.O = []), pe(k, 3));
                    break;
                  case 4:
                    throw ((y = oe(k)), (t.pb = null), y);
                  case 3:
                    if (t.Ja && t.Ja == l) {
                      k.A(0);
                      break;
                    }
                    return ((t.Ja = l), te(k, 8), E(k, wu(e, t, l), 10));
                  case 10:
                    ((v = k.h), (R = e.g.Z), R.C && nc(R.C, v, 0, s), e.O.push(l.startTime), pe(k, 9));
                    break;
                  case 8:
                    throw ((w = oe(k)), (t.Ja = null), w);
                  case 9:
                    if (
                      (t.Ub ||
                        ((A = null),
                        t.type === i.wa ? (A = e.h.get(i.aa)) : t.type === i.aa && (A = e.h.get(i.wa)),
                        A && A.type == i.aa
                          ? e.g.zd(l, t.stream, A.stream.isAudioMuxedInVideo, !0)
                          : e.g.zd(l, t.stream, t.stream.codecs.includes(","), !0)),
                      (I = Math.max.apply(Math, [0].concat(Y(e.O)))),
                      (C = e.g.nc()),
                      C + r > I)
                    )
                      return E(k, mT(e, t, l.startTime, r), 0);
                    k.A(0);
                }
              });
            }
            function PR(e, t, n) {
              var r, i, s, o, u, l, p;
              return F(function (m) {
                switch (m.g) {
                  case 1:
                    if (
                      ((r = Array.from(e.h.values())),
                      r.some(function (y) {
                        return y != t && y.fh;
                      }))
                    ) {
                      m.A(2);
                      break;
                    }
                    if (e.i.avoidEvictionOnQuotaExceededError)
                      return ((i = eg(e, n)), e.g.disableStream(t.stream, i) || Cn(e, t, 4), m.return());
                    if (((s = Math.round(100 * e.C)), s > 20)) {
                      ((e.C -= 0.2), m.A(3));
                      break;
                    }
                    if (s > 4) {
                      ((e.C -= 0.04), m.A(3));
                      break;
                    }
                    if (((o = eg(e, n)), (u = e.g.disableStream(t.stream, o)), !u)) {
                      ((t.ce = !0), (e.F = !0), e.g.onError(n), m.A(5));
                      break;
                    }
                    return ((e.C = 1), (l = e.g.nc()), E(m, Yc(e, t, l), 5));
                  case 5:
                    return m.return();
                  case 3:
                    return ((t.fh = !0), (p = e.g.nc()), E(m, Yc(e, t, p), 2));
                  case 2:
                    (Cn(e, t, 4), re(m));
                }
              });
            }
            function DR(e, t, n, r) {
              var i, s, o, u, l, p, m, y, v, w, A, I, C, k, R, L;
              return F(function (U) {
                switch (U.g) {
                  case 1:
                    if (
                      ((i = Ot),
                      (s = t.Ja == null),
                      (o = []),
                      (u = Math.max(0, Math.max(n.appendWindowStart, e.ba) - 0.1)),
                      (l = Math.min(n.appendWindowEnd, e.$) + 0.1),
                      (p = n.codecs || t.stream.codecs),
                      (m = Zi(p)),
                      (y = Qn(n.mimeType || t.stream.mimeType)),
                      (v = n.timestampOffset),
                      v == t.pf && u == t.tc && l == t.sc && m == t.mf && y == t.nf)
                    ) {
                      U.A(2);
                      break;
                    }
                    if (((w = t.mf && t.nf && rR(e.g.Z, t.type, y, p, Zc(e))), !w)) {
                      U.A(3);
                      break;
                    }
                    if (
                      ((A = null),
                      t.type === i.wa ? (A = e.h.get(i.aa)) : t.type === i.aa && (A = e.h.get(i.wa)),
                      !A)
                    ) {
                      U.A(3);
                      break;
                    }
                    return E(
                      U,
                      Jc(A).catch(function () {}),
                      5,
                    );
                  case 5:
                    ((A.pb = null), (A.tc = null), (A.sc = null), $p(e, A));
                  case 3:
                    return E(U, yT(e, t, v, u, l, n, m, y), 2);
                  case 2:
                    return (
                      du(n.ea, t.pb) ||
                        ((t.pb = n.ea),
                        n.l &&
                          n.ea &&
                          ((I = wu(e, t, n.ea)),
                          (C = function () {
                            var G, b, B, O, z, j, X, W, ie, ne, $;
                            return F(function (Q) {
                              switch (Q.g) {
                                case 1:
                                  return (te(Q, 2), E(Q, I, 4));
                                case 4:
                                  return (
                                    (G = Q.h),
                                    ht(e.l),
                                    (b = null),
                                    (B = new Map()),
                                    (O = { projection: null, hfov: null }),
                                    t.stream &&
                                      (z = t.stream.videoLayout) &&
                                      ((j = z.split("/")),
                                      j.includes("PROJ-RECT")
                                        ? (O.projection = "rect")
                                        : j.includes("PROJ-EQUI")
                                          ? (O.projection = "equi")
                                          : j.includes("PROJ-HEQU")
                                            ? (O.projection = "hequ")
                                            : j.includes("PROJ-PRIM")
                                              ? (O.projection = "prim")
                                              : j.includes("PROJ-AIV") && (O.projection = "hequ")),
                                    (X = new ct()),
                                    X.box("moov", Fe)
                                      .box("trak", Fe)
                                      .box("mdia", Fe)
                                      .S("mdhd", function (ae) {
                                        b = Lc(ae.reader, ae.version).timescale;
                                      })
                                      .box("hdlr", function (ae) {
                                        switch (((ae = ae.reader), ae.skip(8), ae.Yc())) {
                                          case "soun":
                                            B.set(i.aa, b);
                                            break;
                                          case "vide":
                                            B.set(i.wa, b);
                                        }
                                        b = null;
                                      }),
                                    t.type !== i.wa ||
                                      O.projection ||
                                      X.box("minf", Fe)
                                        .box("stbl", Fe)
                                        .S("stsd", Ci)
                                        .box("encv", Zn)
                                        .box("avc1", Zn)
                                        .box("avc3", Zn)
                                        .box("hev1", Zn)
                                        .box("hvc1", Zn)
                                        .box("dvav", Zn)
                                        .box("dva1", Zn)
                                        .box("dvh1", Zn)
                                        .box("dvhe", Zn)
                                        .box("dvc1", Zn)
                                        .box("dvi1", Zn)
                                        .box("vexu", Fe)
                                        .box("proj", Fe)
                                        .S("prji", function (ae) {
                                          ((ae = ae.reader.Yc()), (O.projection = ae));
                                        })
                                        .box("hfov", function (ae) {
                                          ((ae = ae.reader.U() / 1e3), (O.hfov = ae));
                                        }),
                                    X.parse(G, !0, !0),
                                    t.type === i.wa && LR(e, O),
                                    B.has(t.type)
                                      ? (n.ea.timescale = B.get(t.type))
                                      : b != null && (n.ea.timescale = b),
                                    (W = t.stream.segmentIndex),
                                    W instanceof Mt && (ie = lR(W, n.startTime)),
                                    (ne = t.stream.closedCaptions && t.stream.closedCaptions.size > 0),
                                    E(Q, e.g.Uh(t.type, G), 5)
                                  );
                                case 5:
                                  return E(
                                    Q,
                                    Vc(e.g.Z, t.type, G, null, t.stream, ne, t.bd, r, !1, !1, ie),
                                    6,
                                  );
                                case 6:
                                  pe(Q, 0);
                                  break;
                                case 2:
                                  throw (($ = oe(Q)), (t.pb = null), $);
                              }
                            });
                          }),
                          (k = n.startTime),
                          s && ((R = Ws(e.g.Z, t.type)), R != null && (k = R)),
                          e.g.Fk(k, n.ea),
                          o.push(C()))),
                      (L = t.Ja ? t.Ja.i : -1),
                      n.i != L && o.push(qM(e.g.Z, t.type, n.startTime)),
                      E(U, Promise.all(o), 0)
                    );
                }
              });
            }
            function yT(e, t, n, r, i, s, o, u) {
              var l, p, m, y, v;
              return F(function (w) {
                switch (w.g) {
                  case 1:
                    if (
                      ((l = Ot),
                      (p = Zc(e)),
                      te(w, 2),
                      (t.tc = r),
                      (t.sc = i),
                      o && (t.mf = o),
                      u && (t.nf = u),
                      (t.pf = n),
                      (m = e.j.sequenceMode || e.j.type == "HLS"),
                      (y = null),
                      t.type === l.wa ? (y = e.h.get(l.aa)) : t.type === l.aa && (y = e.h.get(l.wa)),
                      !(y && y.stream && y.stream.isAudioMuxedInVideo))
                    ) {
                      w.A(4);
                      break;
                    }
                    return E(w, Nx(e.g.Z, y.type, n, r, i, m, y.stream.mimeType, y.stream.codecs, p), 4);
                  case 4:
                    return E(
                      w,
                      Nx(
                        e.g.Z,
                        t.type,
                        n,
                        r,
                        i,
                        m,
                        s.mimeType || t.stream.mimeType,
                        s.codecs || t.stream.codecs,
                        p,
                      ),
                      6,
                    );
                  case 6:
                    pe(w, 0);
                    break;
                  case 2:
                    throw (
                      (v = oe(w)),
                      (t.tc = null),
                      (t.sc = null),
                      (t.mf = null),
                      (t.nf = null),
                      (t.pf = null),
                      v
                    );
                }
              });
            }
            function qp(e, t, n, r, i, s, o, u) {
              ((o = o === void 0 ? !1 : o), (u = u === void 0 ? !1 : u));
              var l, p, m, y;
              return F(function (v) {
                switch (v.g) {
                  case 1:
                    return (
                      (l = r.closedCaptions && r.closedCaptions.size > 0),
                      e.i.shouldFixTimestampOffset &&
                        ((p = r.mimeType == "video/mp4" || r.mimeType == "audio/mp4"),
                        (m = null),
                        i.ea && (m = i.ea.timescale),
                        p &&
                          m &&
                          r.type === "video" &&
                          e.j.type == "DASH" &&
                          new ct()
                            .box("moof", Fe)
                            .box("traf", Fe)
                            .S("tfdt", function (w) {
                              var A, I, C, k, R, L;
                              return F(function (U) {
                                return (
                                  (A = Dc(w.reader, w.version)),
                                  (I = A.baseMediaDecodeTime),
                                  I
                                    ? ((C = -I / m),
                                      (k = Number(t.pf) || 0),
                                      k < C
                                        ? ((R = t.tc), (L = t.sc), E(U, yT(e, t, C, R, L, i), 0))
                                        : U.A(0))
                                    : U.return()
                                );
                              });
                            })
                            .parse(s, !1, o)),
                      E(v, Yc(e, t, n), 2)
                    );
                  case 2:
                    return (ht(e.l), (y = t.bd), (t.bd = !1), E(v, e.g.Uh(t.type, s), 3));
                  case 3:
                    return E(v, Vc(e.g.Z, t.type, s, i, r, l, y, u, o), 4);
                  case 4:
                    (ht(e.l), re(v));
                }
              });
            }
            function Yc(e, t, n) {
              var r, i, s, o, u, l, p, m, y;
              return F(function (v) {
                if (v.g == 1)
                  return (
                    e.H == t && (e.H = null),
                    (r = t.stream.segmentIndex),
                    r instanceof Mt &&
                      (r.Ya(e.j.presentationTimeline.Hb()),
                      (i = []),
                      uR(r, function (w) {
                        i.push(w.We());
                      })),
                    (s = Math.max(e.i.bufferBehind * e.C, e.j.presentationTimeline.h)),
                    (o = Dp(e.g.Z, t.type)),
                    o == null
                      ? v.return()
                      : ((u = n - o),
                        (l = e.i.evictionGoal),
                        (p = e.j.presentationTimeline.Zb()),
                        (m = e.j.presentationTimeline.Gb()),
                        (y = u - s),
                        m - p > l && (y = Math.max(u - s, p - l - o)),
                        y <= l ? v.return() : E(v, e.g.Z.remove(t.type, o, o + y, i), 2))
                  );
                if (v.g != 4) return (ht(e.l), e.H ? E(v, Yc(e, e.H, n), 4) : v.A(0));
                (ht(e.l), re(v));
              });
            }
            function Jp(e) {
              return (
                e &&
                e.type == Ve &&
                (e.stream.mimeType == "application/cea-608" || e.stream.mimeType == "application/cea-708")
              );
            }
            function wu(e, t, n, r) {
              var i, s, o, u, l;
              return F(function (p) {
                switch (p.g) {
                  case 1:
                    if ((i = n.$b())) return p.return(i);
                    if (((s = null), t.ia)) {
                      var m = t.ia,
                        y = m.g;
                      (n instanceof Hn && (y = m.j),
                        y.has(n) ? ((m = y.get(n)), r && (m.Bh = r), (s = m.oe)) : (s = null));
                    }
                    return (
                      s || (s = qc(n, t.stream, r || null, e.i.retryParameters, e.g.vc)),
                      (o = 0),
                      t.ua && (o = t.ua.h),
                      (t.Va = s),
                      E(p, s.promise, 2)
                    );
                  case 2:
                    if (((u = p.h), (t.Va = null), (l = u.data), !n.aesKey)) {
                      p.A(3);
                      break;
                    }
                    return E(p, Kp(l, n.aesKey, o), 4);
                  case 4:
                    l = p.h;
                  case 3:
                    return p.return(l);
                }
              });
            }
            function qc(e, t, n, r, i, s) {
              s = s === void 0 ? !1 : s;
              var o = e instanceof Me ? e : void 0,
                u = o ? 1 : 0;
              return (
                (e = Tu(e.P(), e.startByte, e.endByte, r, n)),
                (e.contentType = t.type),
                i.request(Er, e, { type: u, stream: t, segment: o, isPreload: s })
              );
            }
            function Qp(e, t, n, r) {
              var i, s;
              return F(function (o) {
                if (o.g == 1)
                  return (
                    (t.Ub = !1),
                    (t.Md = !1),
                    (t.ld = 0),
                    (t.Wb = !0),
                    (t.Ja = null),
                    (t.ua = null),
                    t.ia && !e.m.has(t.stream) && Zr(t.ia),
                    r
                      ? ((i = e.g.nc()), (s = e.g.Z.getDuration()), E(o, e.g.Z.remove(t.type, i + r, s), 3))
                      : E(o, bx(e.g.Z, t.type), 4)
                  );
                if (o.g != 3) return (ht(e.l), n ? E(o, e.g.Z.flush(t.type), 3) : o.A(3));
                (ht(e.l), (t.Wb = !1), (t.endOfStream = !1), t.Ka || t.qb || Cn(e, t, 0), re(o));
              });
            }
            function Cn(e, t, n) {
              var r = t.type;
              (r != Ve || e.h.has(r)) &&
                (t.qb = new tu(function () {
                  var i;
                  return F(function (s) {
                    if (s.g == 1) return (te(s, 2), E(s, RR(e, t), 4));
                    if (s.g != 2) return pe(s, 0);
                    ((i = oe(s)), e.g && e.g.onError(i), re(s));
                  });
                }).ka(n));
            }
            function _i(e) {
              e.qb != null && (e.qb.stop(), (e.qb = null));
            }
            function Jc(e) {
              return F(function (t) {
                return e.Va ? E(t, e.Va.abort(), 0) : t.A(0);
              });
            }
            function Zp(e, t, n) {
              var r;
              return F(function (i) {
                if (i.g == 1)
                  return n.code == 3024 ? ((t.Ka = !1), _i(t), Cn(e, t, 0), i.return()) : E(i, F0(e.X), 2);
                if ((ht(e.l), n.category === 1 && n.code != 1003)) {
                  if (t.Nc) return (fT(e, !1), i.return());
                  ((r = eg(e, n)),
                    (n.handled = e.g.disableStream(t.stream, r)),
                    n.handled && (n.severity = 1));
                }
                ((!n.handled || n.code != 1011) && e.g.onError(n),
                  n.handled || e.i.failureCallback(n),
                  re(i));
              });
            }
            function eg(e, t) {
              return e.i.maxDisabledTime === 0 && t.code == 1011 ? 1 : e.i.maxDisabledTime;
            }
            function Qc(e, t) {
              t = t === void 0 ? !1 : t;
              var n, r, i, s, o, u;
              return F(function (l) {
                if (l.g == 1) {
                  if (((n = Date.now() / 1e3), (r = e.i.minTimeBetweenRecoveries), !t)) {
                    if (!e.i.allowMediaSourceRecoveries || n - e.R < r) return l.return(!1);
                    e.R = n;
                  }
                  return (
                    (i = Ot),
                    (s = e.h.get(i.aa)) &&
                      (_i(s),
                      s.Va && (s.Va.abort(), (s.Va = null)),
                      (s.pb = null),
                      (s.tc = null),
                      (s.sc = null),
                      (s.Ka = !1),
                      (s.Ub = !1),
                      (s.ld = 0),
                      (s.Md = !1),
                      (s.Wb = !1),
                      s.ua && s.ua.jh()),
                    (o = e.h.get(i.wa)) &&
                      (_i(o),
                      o.Va && (o.Va.abort(), (o.Va = null)),
                      (o.pb = null),
                      (o.tc = null),
                      (o.sc = null),
                      (o.Ka = !1),
                      (o.Ub = !1),
                      (o.ld = 0),
                      (o.Md = !1),
                      (o.Wb = !1),
                      o.ua && o.ua.jh()),
                    (u = e.g.video.paused),
                    E(l, Fx(e.g.Z, Zc(e)), 2)
                  );
                }
                return (
                  !o || o.Wb || o.Ka || o.qb || Cn(e, o, 0),
                  !s || s.Wb || s.Ka || s.qb || Cn(e, s, 0),
                  u || e.g.video.play(),
                  l.return(!0)
                );
              });
            }
            function LR(e, t) {
              if (e.T.projection != t.projection || e.T.hfov != t.hfov) {
                if (t.projection != null || t.hfov != null) {
                  var n = new Map().set("detail", t);
                  n = new Ae("spatialvideoinfo", n);
                } else n = new Ae("nospatialvideoinfo");
                ((n.cancelable = !0), e.g.onEvent(n), (e.T = t));
              }
            }
            function Su(e) {
              if (e.i.crossBoundaryStrategy !== "keep") return !0;
              var t = je();
              if (t.Ib()) {
                if (!t.Nf()) {
                  for (t = x(e.h.keys()), n = t.next(); !n.done; n = t.next())
                    if (
                      ((n = e.h.get(n.value)),
                      n.type !== Ot.Na && (n = n.stream) && n.fullMimeTypes && n.fullMimeTypes.size > 1)
                    ) {
                      for (e = new Set(), t = x(n.fullMimeTypes), n = t.next(); !n.done; n = t.next())
                        e.add(Ja(n.value));
                      return e.size > 1;
                    }
                }
              } else {
                t = x(e.h.keys());
                for (var n = t.next(); !n.done; n = t.next())
                  if (
                    ((n = e.h.get(n.value)),
                    n.type !== Ot.Na && (n = n.stream) && n.fullMimeTypes && n.fullMimeTypes.size > 1)
                  )
                    return !0;
              }
              return !1;
            }
            function vT(e) {
              (e.G.Qa(),
                Su(e) &&
                  (e.G.D(e.g.video, "waiting", function () {
                    return tg(e);
                  }),
                  e.G.D(e.g.video, "timeupdate", function () {
                    return tg(e);
                  })));
            }
            function tg(e) {
              if (Su(e)) {
                e.K.stop();
                var t = e.g.nc(),
                  n = e.h.get("video") || e.h.get("audio");
                n &&
                  (n = n.pb) &&
                  n.g !== null &&
                  ((t = n.g - t), t < 0 || t > 1 || ((e.I = n.g + 0.1), e.K.ka(t)));
              }
            }
            function bR(e, t, n) {
              if (t.type === Ve) return !1;
              var r = t.pb;
              if (!r) return !1;
              var i = n.ea;
              if (
                ((n = r.g !== i.g),
                e.i.crossBoundaryStrategy === "reset_to_encrypted" &&
                  (r.encrypted || i.encrypted || (n = !1),
                  r.encrypted && (e.i.crossBoundaryStrategy = "keep")),
                e.i.crossBoundaryStrategy === "RESET_ON_ENCRYPTION_CHANGE" &&
                  r.encrypted == i.encrypted &&
                  (n = !1),
                e.i.crossBoundaryStrategy === "keep" && r.mimeType && i.mimeType)
              ) {
                var s = hn(Vn(r.mimeType)),
                  o = hn(Vn(r.mimeType));
                r.mimeType == i.mimeType && s == o && (n = !1);
              }
              return (
                n &&
                  (e.J || t.bd) &&
                  ((e.J = !1),
                  Qc(e, !0).then(function () {
                    var u = new Map().set("oldEncrypted", r.encrypted).set("newEncrypted", i.encrypted);
                    e.g.onEvent(new Ae("boundarycrossed", u));
                  })),
                n
              );
            }
            function Zc(e, t) {
              function n(s) {
                if (s.fullMimeTypes && s.fullMimeTypes.size > 1 && e.h.has(s.type)) {
                  var o = e.h.get(s.type),
                    u = Ws(e.g.Z, o.type),
                    l = e.g.nc();
                  (o = gT(e, o, l, u)) &&
                    o.codecs &&
                    o.mimeType &&
                    ((s.codecs = o.codecs), (s.mimeType = o.mimeType));
                }
              }
              t = t === void 0 ? !1 : t;
              var r = new Map(),
                i = e.o.audio;
              return (
                i && (n(i), r.set("audio", i)),
                (i = e.o.video) && (n(i), r.set("video", i)),
                t && e.B && r.set(Ve, e.B),
                r
              );
            }
            function ed() {}
            function ng(e, t, n, r, i) {
              var s = i in r,
                o = s
                  ? n.constructor == Object && Object.keys(r).length == 0
                  : n.constructor == Object && Object.keys(n).length == 0,
                u = s || o,
                l = !0,
                p;
              for (p in t) {
                var m = i + "." + p,
                  y = s ? r[i] : n[p];
                u || p in n
                  ? t[p] === void 0
                    ? y === void 0 || u
                      ? delete e[p]
                      : (e[p] = Fr(y))
                    : o
                      ? (e[p] = t[p])
                      : y.constructor == Object && t[p] && t[p].constructor == Object
                        ? (e[p] || (e[p] = Fr(y)), (m = ng(e[p], t[p], y, r, m)), (l = l && m))
                        : typeof t[p] != typeof y ||
                            t[p] == null ||
                            (typeof t[p] != "function" && t[p].constructor != y.constructor)
                          ? (En("Invalid config, wrong type for " + m), (l = !1))
                          : typeof n[p] == "function" && n[p].length != t[p].length
                            ? (Be("Unexpected number of arguments for " + m), (e[p] = t[p]))
                            : (e[p] = Array.isArray(e[p]) ? t[p].slice() : t[p])
                  : (En("Invalid config, unrecognized key " + m), (l = !1));
              }
              return l;
            }
            function td(e, t) {
              for (var n = {}, r = n, i = 0, s = 0; (i = e.indexOf(".", i)), !(i < 0); )
                ((i == 0 || e[i - 1] != "\\") &&
                  ((s = e.substring(s, i).replace(/\\\./g, ".")), (r[s] = {}), (r = r[s]), (s = i + 1)),
                  (i += 1));
              return ((r[e.substring(s).replace(/\\\./g, ".")] = t), n);
            }
            function Vo(e, t) {
              return e && t;
            }
            function xT(e, t) {
              function n(s) {
                for (var o = x(Object.keys(s)), u = o.next(); !u.done; u = o.next())
                  if (((u = u.value), !(s[u] instanceof HTMLElement)))
                    if (i(s[u]) && Object.keys(s[u]).length === 0) delete s[u];
                    else {
                      var l = s[u];
                      (Array.isArray(l) && l.length === 0) || typeof s[u] == "function"
                        ? delete s[u]
                        : i(s[u]) && (n(s[u]), Object.keys(s[u]).length === 0 && delete s[u]);
                    }
              }
              function r(s, o) {
                return Object.keys(s).reduce(function (u, l) {
                  var p = s[l];
                  return (
                    o.hasOwnProperty(l)
                      ? p instanceof HTMLElement && o[l] instanceof HTMLElement
                        ? p.isEqualNode(o[l]) || (u[l] = p)
                        : i(p) && i(o[l])
                          ? ((p = r(p, o[l])), (Object.keys(p).length > 0 || !i(p)) && (u[l] = p))
                          : Array.isArray(p) && Array.isArray(o[l])
                            ? Is(p, o[l]) || (u[l] = p)
                            : (Number.isNaN(p) && Number.isNaN(o[l])) || (p !== o[l] && (u[l] = p))
                      : (u[l] = p),
                    u
                  );
                }, {});
              }
              function i(s) {
                return s && typeof s == "object" && !Array.isArray(s);
              }
              return ((e = r(e, t)), n(e), e);
            }
            (de("shaka.util.ConfigUtils", ed),
              (ed.getDifferenceFromConfigObjects = xT),
              (ed.convertToConfigObject = td),
              (ed.mergeConfigObjects = ng),
              de("shaka.config.RepeatMode", { OFF: 0, ALL: 1, SINGLE: 2 }));
            function Gn() {}
            function TT(e) {
              return ((e = ni(e)), new Dt(e).Db);
            }
            function Au(e, t, n) {
              function r(u) {
                (Bn(s).setUint32(o, u.byteLength, !0), (o += 4), s.set(Le(u), o), (o += u.byteLength));
              }
              if (!n || !n.byteLength) throw new H(2, 6, 6015);
              var i;
              (typeof t == "string" ? (i = Hh(t, !0)) : (i = t), (e = ni(e)), (e = Hh(e, !0)));
              var s = new Uint8Array(12 + e.byteLength + i.byteLength + n.byteLength),
                o = 0;
              return (r(e), r(i), r(n), s);
            }
            function rg(e, t, n) {
              return t !== "skd"
                ? e
                : ((t = n.serverCertificate), (n = ni(e).split("skd://").pop()), Au(e, n, t));
            }
            function nd(e, t) {
              e === 2 &&
                (e = t.drmInfo) &&
                Va(e.keySystem) &&
                (t.headers["Content-Type"] = "application/octet-stream");
            }
            (de("shaka.drm.FairPlay", Gn),
              (Gn.commonFairPlayResponse = function (e, t) {
                if (e === 2 && (e = t.originalRequest.drmInfo) && Va(e.keySystem)) {
                  try {
                    var n = At(t.data);
                  } catch (i) {
                    return;
                  }
                  if (
                    ((e = !1),
                    (n = n.trim()),
                    n.substr(0, 5) === "<ckc>" &&
                      n.substr(-6) === "</ckc>" &&
                      ((n = n.slice(5, -6)), (e = !0)),
                    !e)
                  )
                    try {
                      var r = JSON.parse(n);
                      (r.ckc && ((n = r.ckc), (e = !0)),
                        r.CkcMessage && ((n = r.CkcMessage), (e = !0)),
                        r.License && ((n = r.License), (e = !0)));
                    } catch (i) {}
                  e && (t.data = wr(Sr(n)));
                }
              }),
              (Gn.muxFairPlayRequest = function (e, t) {
                nd(e, t);
              }),
              (Gn.expressplayFairPlayRequest = function (e, t) {
                if (e === 2) {
                  var n = t.drmInfo;
                  n && Va(n.keySystem) && nd(e, t);
                }
              }),
              (Gn.conaxFairPlayRequest = function (e, t) {
                nd(e, t);
              }),
              (Gn.ezdrmFairPlayRequest = function (e, t) {
                nd(e, t);
              }),
              (Gn.verimatrixFairPlayRequest = function (e, t) {
                e === 2 &&
                  (e = t.drmInfo) &&
                  Va(e.keySystem) &&
                  ((e = Le(t.body)),
                  (e = gi(e)),
                  (t.headers["Content-Type"] = "application/x-www-form-urlencoded"),
                  (t.body = Ur("spc=" + e)));
              }),
              (Gn.muxInitDataTransform = function (e, t, n) {
                return rg(e, t, n);
              }),
              (Gn.expressplayInitDataTransform = function (e, t, n) {
                return rg(e, t, n);
              }),
              (Gn.conaxInitDataTransform = function (e, t, n) {
                if (t !== "skd") return e;
                ((t = n.serverCertificate),
                  (n = ni(e).split("skd://").pop().split("?").shift()),
                  (n = g.atob(n)));
                var r = new ArrayBuffer(n.length * 2);
                r = Wv(r);
                for (var i = 0, s = n.length; i < s; i++) r[i] = n.charCodeAt(i);
                return Au(e, r, t);
              }),
              (Gn.ezdrmInitDataTransform = function (e, t, n) {
                return t !== "skd"
                  ? e
                  : ((t = n.serverCertificate), (n = ni(e).split(";").pop()), Au(e, n, t));
              }),
              (Gn.verimatrixInitDataTransform = function (e, t, n) {
                return rg(e, t, n);
              }),
              (Gn.initDataTransform = Au),
              (Gn.defaultGetContentId = TT),
              (Gn.isFairPlaySupported = function () {
                var e;
                return F(function (t) {
                  return t.g == 1
                    ? ((e = {
                        initDataTypes: ["cenc", "sinf", "skd"],
                        videoCapabilities: [{ contentType: 'video/mp4; codecs="avc1.42E01E"' }],
                      }),
                      te(t, 2),
                      E(t, navigator.requestMediaKeySystemAccess("com.apple.fps", [e]), 4))
                    : t.g != 2
                      ? t.return(!0)
                      : (oe(t), t.return(!1));
                });
              }));
            function rd(e, t, n) {
              for (
                n = n === void 0 ? !0 : n,
                  this.h = e,
                  this.g = new Set([e]),
                  t = t || [],
                  e = x(t),
                  t = e.next();
                !t.done;
                t = e.next()
              )
                this.add(t.value, n);
            }
            ((rd.prototype.add = function (e, t) {
              var n = this.h;
              t = t === void 0 ? !0 : t;
              var r;
              if (
                !(r = !!n.audio != !!e.audio || !!n.video != !!e.video || n.language != e.language) &&
                (r = n.audio && e.audio)
              ) {
                r = n.audio;
                var i = e.audio;
                r = !(
                  !(
                    ((!r.channelsCount || !i.channelsCount || r.channelsCount > 2 || i.channelsCount > 2) &&
                      r.channelsCount != i.channelsCount) ||
                    r.spatialAudio !== i.spatialAudio ||
                    (t && !wT(r, i))
                  ) &&
                  Is(r.roles, i.roles) &&
                  r.groupId === i.groupId
                );
              }
              return (
                !r &&
                  (r = n.video && e.video) &&
                  ((n = n.video), (r = e.video), (r = !((!t || wT(n, r)) && Is(n.roles, r.roles)))),
                r ? !1 : (this.g.add(e), !0)
              );
            }),
              (rd.prototype.values = function () {
                return this.g.values();
              }));
            function wT(e, t) {
              return e.mimeType != t.mimeType
                ? !1
                : ((e = e.codecs.split(",").map(function (n) {
                    return Zi(n);
                  })),
                  (t = t.codecs.split(",").map(function (n) {
                    return Zi(n);
                  })),
                  Is(e, t));
            }
            de("shaka.media.AdaptationSet", rd);
            function Eu() {
              this.h = this.g = null;
            }
            ((Eu.prototype.configure = function (e) {
              this.g = e;
            }),
              (Eu.prototype.getConfiguration = function () {
                return this.g;
              }),
              (Eu.prototype.create = function (e) {
                var t;
                if (this.g.language) {
                  var n = NR(e, this.g.language);
                  n.length && (t = n);
                }
                (t ||
                  ((t = e.filter(function (s) {
                    return s.primary;
                  })),
                  (t = t.length ? t : e)),
                  (e = OR(t, this.g.role)),
                  e.length && (t = e),
                  (e = UR(t, this.g.videoRole)),
                  e.length && (t = e),
                  this.g.videoLayout && ((e = HR(t, this.g.videoLayout)), e.length && (t = e)),
                  this.g.hdrLevel && ((e = VR(t, this.g.hdrLevel)), e.length && (t = e)));
                var r = [this.g.channelCount, this.g.preferredAudioChannelCount];
                if (
                  ((e = r.filter(function (s, o) {
                    return s && r.indexOf(s) === o;
                  })),
                  e.length)
                ) {
                  for (e = x(e), n = e.next(); !n.done; n = e.next())
                    if (((n = jR(t, n.value)), n.length)) {
                      t = n;
                      break;
                    }
                }
                (this.g.audioLabel && ((e = FR(t, this.g.audioLabel)), e.length && (t = e)),
                  this.g.videoLabel && ((e = BR(t, this.g.videoLabel)), e.length && (t = e)),
                  (e = GR(t, this.g.spatialAudio)),
                  e.length && (t = e));
                var i = [this.g.audioCodec, this.g.activeAudioCodec].concat(Y(this.g.preferredAudioCodecs));
                if (
                  ((e = i.filter(function (s, o) {
                    return s && i.indexOf(s) === o;
                  })),
                  e.length)
                ) {
                  for (e = x(e), n = e.next(); !n.done; n = e.next())
                    if (((n = zR(t, n.value)), n.length)) {
                      t = n;
                      break;
                    }
                }
                return (
                  (e = je()),
                  (e = this.g.codecSwitchingStrategy == "smooth" && e.Ib()),
                  (this.h = new rd(t[0], t, !e))
                );
              }),
              (Eu.prototype.getLastAdaptationSet = function () {
                return this.h;
              }));
            function NR(e, t) {
              t = nt(t);
              var n = yc(
                t,
                e.map(function (r) {
                  return op(r);
                }),
              );
              return n
                ? e.filter(function (r) {
                    return n == op(r);
                  })
                : [];
            }
            function OR(e, t) {
              return e.filter(function (n) {
                return n.audio ? (t ? n.audio.roles.includes(t) : n.audio.roles.length == 0) : !1;
              });
            }
            function UR(e, t) {
              return e.filter(function (n) {
                return n.video ? (t ? n.video.roles.includes(t) : n.video.roles.length == 0) : !1;
              });
            }
            function FR(e, t) {
              return e.filter(function (n) {
                return n.audio && n.audio.label ? n.audio.label.toLowerCase() == t.toLowerCase() : !1;
              });
            }
            function BR(e, t) {
              return e.filter(function (n) {
                return n.video && n.video.label ? n.video.label.toLowerCase() == t.toLowerCase() : !1;
              });
            }
            function jR(e, t) {
              return e
                .filter(function (n) {
                  return !(n.audio && n.audio.channelsCount && n.audio.channelsCount > t);
                })
                .sort(function (n, r) {
                  return n.audio || r.audio
                    ? n.audio
                      ? r.audio
                        ? (r.audio.channelsCount || 0) - (n.audio.channelsCount || 0)
                        : 1
                      : -1
                    : 0;
                });
            }
            function VR(e, t) {
              if (t == "AUTO") {
                var n = e.some(function (r) {
                  return !!(r.video && r.video.hdr && r.video.hdr == "HLG");
                });
                t = je().sd(n);
              }
              return e.filter(function (r) {
                return !(r.video && r.video.hdr && r.video.hdr != t);
              });
            }
            function HR(e, t) {
              return e.filter(function (n) {
                return !(n.video && n.video.videoLayout && n.video.videoLayout != t);
              });
            }
            function GR(e, t) {
              return e.filter(function (n) {
                return !(n.audio && n.audio.spatialAudio != t);
              });
            }
            function zR(e, t) {
              return e.filter(function (n) {
                return !(n.audio && n.audio.codecs != t);
              });
            }
            function id() {}
            function Ho() {
              var e = 1 / 0,
                t = je();
              navigator.connection && navigator.connection.saveData && (e = 360);
              var n = {
                  retryParameters: jr(),
                  servers: {},
                  clearKeys: {},
                  advanced: {},
                  delayLicenseRequestUntilPlayed: !1,
                  persistentSessionOnlinePlayback: !1,
                  persistentSessionsMetadata: [],
                  initDataTransform: function (u, l, p) {
                    return (
                      g.shakaMediaKeysPolyfill === "apple" &&
                        l == "skd" &&
                        ((l = p.serverCertificate), (p = TT(u)), (u = Au(u, p, l))),
                      u
                    );
                  },
                  logLicenseExchange: !1,
                  updateExpirationTime: 1,
                  preferredKeySystems: [],
                  keySystemsMapping: {},
                  parseInbandPsshEnabled: !1,
                  minHdcpVersion: "",
                  ignoreDuplicateInitData: !0,
                  defaultAudioRobustnessForWidevine: "SW_SECURE_CRYPTO",
                  defaultVideoRobustnessForWidevine: "SW_SECURE_DECODE",
                },
                r = "reload";
              t.Ib() && (r = "smooth");
              var i = {
                  retryParameters: jr(),
                  availabilityWindowOverride: NaN,
                  disableAudio: !1,
                  disableVideo: !1,
                  disableText: !1,
                  disableThumbnails: !1,
                  disableIFrames: !1,
                  defaultPresentationDelay: 0,
                  segmentRelativeVttTiming: !1,
                  raiseFatalErrorOnManifestUpdateRequestFailure: !1,
                  continueLoadingWhenPaused: !0,
                  ignoreSupplementalCodecs: !1,
                  updatePeriod: -1,
                  ignoreDrmInfo: !1,
                  enableAudioGroups: !0,
                  dash: {
                    clockSyncUri: "",
                    disableXlinkProcessing: !0,
                    xlinkFailGracefully: !1,
                    ignoreMinBufferTime: !1,
                    autoCorrectDrift: !0,
                    initialSegmentLimit: 1e3,
                    ignoreSuggestedPresentationDelay: !1,
                    ignoreEmptyAdaptationSet: !1,
                    ignoreMaxSegmentDuration: !1,
                    keySystemsByURI: {
                      "urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b": "org.w3.clearkey",
                      "urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e": "org.w3.clearkey",
                      "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed": "com.widevine.alpha",
                      "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95": "com.microsoft.playready",
                      "urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95": "com.microsoft.playready",
                      "urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2": "com.apple.fps",
                      "urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c": "com.huawei.wiseplay",
                    },
                    manifestPreprocessor: sd,
                    manifestPreprocessorTXml: od,
                    sequenceMode: !1,
                    useStreamOnceInPeriodFlattening: !1,
                    enableFastSwitching: !0,
                  },
                  hls: {
                    ignoreTextStreamFailures: !1,
                    ignoreImageStreamFailures: !1,
                    defaultAudioCodec: "mp4a.40.2",
                    defaultVideoCodec: "avc1.42E01E",
                    ignoreManifestProgramDateTime: !1,
                    ignoreManifestProgramDateTimeForTypes: [],
                    mediaPlaylistFullMimeType: 'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',
                    liveSegmentsDelay: 3,
                    sequenceMode: t.fd(),
                    ignoreManifestTimestampsInSegmentsMode: !1,
                    disableCodecGuessing: !1,
                    disableClosedCaptionsDetection: !1,
                    allowLowLatencyByteRangeOptimization: !0,
                    allowRangeRequestsToGuessMimeType: !1,
                  },
                  mss: {
                    manifestPreprocessor: sd,
                    manifestPreprocessorTXml: od,
                    sequenceMode: !1,
                    keySystemsBySystemId: {
                      "9a04f079-9840-4286-ab92-e65be0885f95": "com.microsoft.playready",
                      "79f0049a-4098-8642-ab92-e65be0885f95": "com.microsoft.playready",
                    },
                  },
                },
                s = {
                  trackSelectionCallback: function (u) {
                    return F(function (l) {
                      return l.return(u);
                    });
                  },
                  downloadSizeCallback: function (u) {
                    var l;
                    return F(function (p) {
                      return p.g == 1
                        ? navigator.storage && navigator.storage.estimate
                          ? E(p, navigator.storage.estimate(), 3)
                          : p.return(!0)
                        : ((l = p.h), p.return(l.usage + u < l.quota * 0.95));
                    });
                  },
                  progressCallback: function (u, l) {
                    return Vo([u, l]);
                  },
                  usePersistentLicense: !0,
                  numberOfParallelDownloads: 5,
                },
                o = {
                  drm: n,
                  manifest: i,
                  streaming: {
                    retryParameters: jr(),
                    failureCallback: function (u) {
                      return Vo([u]);
                    },
                    rebufferingGoal: 0,
                    bufferingGoal: 10,
                    bufferBehind: 30,
                    evictionGoal: 1,
                    ignoreTextStreamFailures: !1,
                    alwaysStreamText: !1,
                    startAtSegmentBoundary: !1,
                    gapDetectionThreshold: 0.5,
                    gapPadding: 0,
                    gapJumpTimerTime: 0.25,
                    durationBackoff: 1,
                    safeSeekOffset: 5,
                    safeSeekEndOffset: 0,
                    stallEnabled: !0,
                    stallThreshold: 1,
                    stallSkip: 0.1,
                    useNativeHlsForFairPlay: !0,
                    inaccurateManifestTolerance: 2,
                    lowLatencyMode: !0,
                    preferNativeDash: !1,
                    preferNativeHls: !1,
                    updateIntervalSeconds: 1,
                    observeQualityChanges: !1,
                    maxDisabledTime: 30,
                    segmentPrefetchLimit: 1,
                    prefetchAudioLanguages: [],
                    disableAudioPrefetch: !1,
                    disableTextPrefetch: !1,
                    disableVideoPrefetch: !1,
                    liveSync: {
                      enabled: !1,
                      targetLatency: 0.5,
                      targetLatencyTolerance: 0.5,
                      maxPlaybackRate: 1.1,
                      minPlaybackRate: 0.95,
                      panicMode: !1,
                      panicThreshold: 60,
                      dynamicTargetLatency: {
                        enabled: !1,
                        stabilityThreshold: 60,
                        rebufferIncrement: 0.5,
                        maxAttempts: 10,
                        maxLatency: 4,
                        minLatency: 1,
                      },
                    },
                    allowMediaSourceRecoveries: !0,
                    minTimeBetweenRecoveries: 5,
                    vodDynamicPlaybackRate: !1,
                    vodDynamicPlaybackRateLowBufferRate: 0.95,
                    vodDynamicPlaybackRateBufferRatio: 0.5,
                    preloadNextUrlWindow: 30,
                    loadTimeout: 30,
                    clearDecodingCache: !1,
                    dontChooseCodecs: !1,
                    shouldFixTimestampOffset: !1,
                    avoidEvictionOnQuotaExceededError: !1,
                    crossBoundaryStrategy: "keep",
                    returnToEndOfLiveWindowWhenOutside: !1,
                  },
                  networking: { forceHTTP: !1, forceHTTPS: !1, minBytesForProgressEvents: 16e3 },
                  mediaSource: {
                    codecSwitchingStrategy: r,
                    addExtraFeaturesToSourceBuffer: function (u) {
                      return Vo([u], "");
                    },
                    forceTransmux: !1,
                    insertFakeEncryptionInInit: !0,
                    correctEc3Enca: !1,
                    modifyCueCallback: function (u, l, p) {
                      return Vo([u, l, p]);
                    },
                    dispatchAllEmsgBoxes: !1,
                    useSourceElements: !0,
                    durationReductionEmitsUpdateEnd: !0,
                  },
                  offline: s,
                  abrFactory: function () {
                    return new Ct();
                  },
                  adaptationSetCriteriaFactory: function () {
                    return new (Function.prototype.bind.apply(
                      Eu,
                      [null].concat(Y(It.apply(0, arguments))),
                    ))();
                  },
                  abr: {
                    enabled: !0,
                    useNetworkInformation: !0,
                    defaultBandwidthEstimate: 1e6,
                    switchInterval: 8,
                    bandwidthUpgradeTarget: 0.85,
                    bandwidthDowngradeTarget: 0.95,
                    restrictions: {
                      minWidth: 0,
                      maxWidth: 1 / 0,
                      minHeight: 0,
                      maxHeight: e,
                      minPixels: 0,
                      maxPixels: 1 / 0,
                      minFrameRate: 0,
                      maxFrameRate: 1 / 0,
                      minBandwidth: 0,
                      maxBandwidth: 1 / 0,
                      minChannelsCount: 0,
                      maxChannelsCount: 1 / 0,
                    },
                    advanced: { minTotalBytes: 128e3, minBytes: 16e3, fastHalfLife: 2, slowHalfLife: 5 },
                    restrictToElementSize: !1,
                    restrictToScreenSize: !1,
                    ignoreDevicePixelRatio: !1,
                    clearBufferSwitch: !1,
                    safeMarginSwitch: 0,
                    cacheLoadThreshold: 5,
                    minTimeToSwitch: 0,
                    preferNetworkInformationBandwidth: !1,
                    removeLatencyFromFirstPacketTime: !1,
                  },
                  autoShowText: 3,
                  preferredAudioLanguage: "",
                  preferredAudioLabel: "",
                  preferredTextLanguage: "",
                  preferredAudioRole: "",
                  preferredVideoRole: "",
                  preferredTextRole: "",
                  preferredAudioChannelCount: 2,
                  preferredVideoHdrLevel: "AUTO",
                  preferredVideoLayout: "",
                  preferredVideoLabel: "",
                  preferredVideoCodecs: [],
                  preferredAudioCodecs: [],
                  preferredTextFormats: [],
                  preferForcedSubs: !1,
                  preferSpatialAudio: !1,
                  preferredDecodingAttributes: [],
                  restrictions: {
                    minWidth: 0,
                    maxWidth: 1 / 0,
                    minHeight: 0,
                    maxHeight: 1 / 0,
                    minPixels: 0,
                    maxPixels: 1 / 0,
                    minFrameRate: 0,
                    maxFrameRate: 1 / 0,
                    minBandwidth: 0,
                    maxBandwidth: 1 / 0,
                    minChannelsCount: 0,
                    maxChannelsCount: 1 / 0,
                  },
                  playRangeStart: 0,
                  playRangeEnd: 1 / 0,
                  textDisplayer: { captionsUpdatePeriod: 0.25, fontScaleFactor: 1 },
                  textDisplayFactory: function () {
                    return null;
                  },
                  cmcd: {
                    enabled: !1,
                    sessionId: "",
                    contentId: "",
                    rtpSafetyFactor: 5,
                    useHeaders: !1,
                    includeKeys: [],
                    version: 1,
                    targets: [],
                  },
                  cmsd: {
                    enabled: !0,
                    applyMaximumSuggestedBitrate: !0,
                    estimatedThroughputWeightRatio: 0.5,
                  },
                  lcevc: {
                    enabled: !1,
                    dynamicPerformanceScaling: !0,
                    logLevel: 0,
                    drawLogo: !1,
                    poster: !0,
                  },
                  ads: {
                    customPlayheadTracker: !1,
                    skipPlayDetection: !1,
                    supportsMultipleMediaElements: !0,
                    disableHLSInterstitial: !1,
                    disableDASHInterstitial: !1,
                    allowPreloadOnDomElements: !0,
                    allowStartInMiddleOfInterstitial: !0,
                  },
                  ignoreHardwareResolution: !1,
                  queue: { preloadNextUrlWindow: 1 / 0, preloadPrevItem: !0, repeatMode: 0 },
                };
              return (
                (s.trackSelectionCallback = function (u) {
                  return F(function (l) {
                    return l.return(XR(u, o.preferredAudioLanguage, o.preferredVideoHdrLevel));
                  });
                }),
                t.Wa(o)
              );
            }
            function ST() {
              return {
                streaming: {
                  inaccurateManifestTolerance: 0,
                  segmentPrefetchLimit: 2,
                  updateIntervalSeconds: 0.1,
                  maxDisabledTime: 1,
                  retryParameters: { baseDelay: 100 },
                },
                manifest: { dash: { autoCorrectDrift: !1 }, retryParameters: { baseDelay: 100 } },
                drm: { retryParameters: { baseDelay: 100 } },
              };
            }
            function Pi(e, t, n) {
              var r = {
                ".drm.keySystemsMapping": "",
                ".drm.servers": "",
                ".drm.clearKeys": "",
                ".drm.advanced": {
                  distinctiveIdentifierRequired: !1,
                  persistentStateRequired: !1,
                  videoRobustness: [],
                  audioRobustness: [],
                  sessionType: "",
                  serverCertificate: new Uint8Array(0),
                  serverCertificateUri: "",
                  individualizationServer: "",
                  headers: {},
                },
              };
              return ng(e, t, n || Ho(), r, "");
            }
            function XR(e, t, n) {
              var r = n;
              r == "AUTO" &&
                ((n = e.some(function (u) {
                  return !!(u.hdr && u.hdr == "HLG");
                })),
                (r = je().sd(n)));
              var i = e.filter(function (u) {
                return !(u.type != "variant" || (u.hdr && u.hdr != r));
              });
              n = [];
              var s = yc(
                t,
                i.map(function (u) {
                  return u.language;
                }),
              );
              (s &&
                (n = i.filter(function (u) {
                  return nt(u.language) == s;
                })),
                n.length == 0 &&
                  (n = i.filter(function (u) {
                    return u.primary;
                  })),
                n.length == 0 &&
                  (i.map(function (u) {
                    return u.language;
                  }),
                  (n = i)));
              var o = n.filter(function (u) {
                return u.height && u.height <= 480;
              });
              for (
                o.length &&
                  (o.sort(function (u, l) {
                    return l.height - u.height;
                  }),
                  (n = o.filter(function (u) {
                    return u.height == o[0].height;
                  }))),
                  t = [],
                  n.length &&
                    ((i = Math.floor(n.length / 2)),
                    n.sort(function (u, l) {
                      return u.bandwidth - l.bandwidth;
                    }),
                    t.push(n[i])),
                  e = x(e),
                  n = e.next();
                !n.done;
                n = e.next()
              )
                ((n = n.value), (n.type != Ve && n.type != "image") || t.push(n));
              return t;
            }
            function sd(e) {
              return Vo([e], e);
            }
            function od(e) {
              return Vo([e], e);
            }
            (de("shaka.util.PlayerConfiguration", id),
              (id.mergeConfigObjects = Pi),
              (id.createDefaultForLL = ST),
              (id.createDefault = Ho));
            function WR() {
              ((this.g = null), (this.h = []));
            }
            function ig(e, t) {
              var n = 0;
              (e.g && e.g.state == t && (n += e.g.duration), (e = x(e.h)));
              for (var r = e.next(); !r.done; r = e.next())
                ((r = r.value), (n += r.state == t ? r.duration : 0));
              return n;
            }
            function KR(e) {
              function t(s) {
                return { timestamp: s.timestamp, state: s.state, duration: s.duration };
              }
              for (var n = [], r = x(e.h), i = r.next(); !i.done; i = r.next()) n.push(t(i.value));
              return (e.g && n.push(t(e.g)), n);
            }
            function $R() {
              ((this.i = this.h = null), (this.g = []));
            }
            function sg(e, t, n) {
              e.i != t &&
                ((e.i = t),
                e.g.push({
                  timestamp: Date.now() / 1e3,
                  id: t.id,
                  type: "text",
                  fromAdaptation: n,
                  bandwidth: null,
                }));
            }
            function ad() {
              ((this.C = this.X = NaN),
                (this.l = ""),
                (this.j =
                  this.wi =
                  this.u =
                  this.B =
                  this.K =
                  this.F =
                  this.o =
                  this.m =
                  this.J =
                  this.G =
                  this.i =
                  this.T =
                  this.V =
                  this.N =
                  this.O =
                  this.R =
                    NaN),
                (this.M = 0),
                (this.H = this.I = NaN),
                (this.g = new WR()),
                (this.h = new $R()));
            }
            function YR(e, t, n) {
              ((e.R = t), (e.O = n));
            }
            function AT(e, t, n) {
              ((e.X = t), (e.C = n));
            }
            function qR(e, t) {
              e.i = isNaN(e.i) ? t : Math.max(e.i, t);
            }
            function ET(e, t) {
              e.j = isNaN(e.j) ? t : e.j + t;
            }
            function JR(e) {
              var t = e.X,
                n = e.C,
                r = e.l,
                i = e.B,
                s = e.O,
                o = e.R,
                u = e.N,
                l = e.V,
                p = e.T,
                m = e.u,
                y = e.i,
                v = e.G,
                w = e.J,
                A = e.m,
                I = ig(e.g, "playing"),
                C = ig(e.g, "paused"),
                k = ig(e.g, "buffering"),
                R = e.o,
                L = e.F,
                U = e.K,
                G = e.wi,
                b = e.j,
                B = e.M,
                O = e.I,
                z = e.H,
                j = KR(e.g),
                X = [];
              e = x(e.h.g);
              for (var W = e.next(); !W.done; W = e.next())
                ((W = W.value),
                  X.push({
                    timestamp: W.timestamp,
                    id: W.id,
                    type: W.type,
                    fromAdaptation: W.fromAdaptation,
                    bandwidth: W.bandwidth,
                  }));
              return {
                width: t,
                height: n,
                currentCodecs: r,
                streamBandwidth: i,
                decodedFrames: s,
                droppedFrames: o,
                corruptedFrames: u,
                stallsDetected: l,
                gapsJumped: p,
                estimatedBandwidth: m,
                completionPercent: y,
                loadLatency: v,
                manifestTimeSeconds: w,
                drmTimeSeconds: A,
                playTime: I,
                pauseTime: C,
                bufferingTime: k,
                licenseTime: R,
                liveLatency: L,
                maxSegmentDuration: U,
                manifestSizeBytes: G,
                bytesDownloaded: b,
                nonFatalErrorCount: B,
                manifestPeriodCount: O,
                manifestGapCount: z,
                stateHistory: j,
                switchHistory: X,
              };
            }
            function Cr(e, t, n, r) {
              (ut.call(this),
                (this.N = e),
                (this.V = t),
                (this.Da = r.networkingEngine),
                (this.o = n),
                (this.C = null),
                (this.za = 0),
                (this.Ta = r.md),
                (this.G = r.yk),
                (this.Ua = r.zk),
                (this.g = r.config),
                (this.m = this.H = this.h = null),
                (this.oa = !1),
                (this.I = r.Kk),
                (this.va = !1),
                (this.j = null),
                (this.ba = !1),
                (this.u = null),
                (this.M = new Map()),
                (this.ya = !1),
                (this.Fa = r.Jk),
                (this.X = new ad()),
                (this.ma = new lt()),
                (this.B = new lt()),
                (this.O = null),
                (this.l = !1),
                (this.$ = r.pj),
                (this.T = this.i = null),
                (this.R = !1),
                (this.K = []),
                (this.J = []),
                (this.F = !0));
            }
            q(Cr, ut);
            function Iu(e, t, n) {
              (e = t ? e.J : e.K) ? e.push(n) : n();
            }
            function QR(e) {
              if (e.J) for (var t = x(e.J), n = t.next(); !n.done; n = t.next()) ((n = n.value), n());
              e.J = null;
            }
            function IT(e, t) {
              if (((e.O = t), (e.R = !0), e.K)) {
                t = x(e.K);
                for (var n = t.next(); !n.done; n = t.next()) ((n = n.value), n());
              }
              e.K = null;
            }
            ((h = Cr.prototype),
              (h.getStartTime = function () {
                return this.o;
              }),
              (h.rd = function () {
                return this.N;
              }),
              (h.Lg = function () {
                return this.h;
              }));
            function ZR(e) {
              return ((e.va = !0), e.I);
            }
            h.getStats = function () {
              return this.X;
            };
            function ek(e) {
              return ((e.ba = !0), e.j);
            }
            ((h.Vj = function () {
              return this.i ? Us(this.i) : null;
            }),
              (h.Uj = function () {
                return this.T ? Fs(this.T) : null;
              }));
            function tk(e) {
              return ((e.ya = !0), e.M);
            }
            ((h.start = function () {
              var e = this;
              (function () {
                var t;
                return F(function (n) {
                  switch (n.g) {
                    case 1:
                      return E(n, Promise.resolve(), 2);
                    case 2:
                      return (te(n, 3), E(n, nk(e), 5));
                    case 5:
                      if ((os(e), g.shakaMediaKeysPolyfill === "webkit")) {
                        n.A(6);
                        break;
                      }
                      return E(n, CT(e), 7);
                    case 7:
                      os(e);
                    case 6:
                      return E(n, ik(e), 8);
                    case 8:
                      if ((os(e), !e.$)) {
                        n.A(9);
                        break;
                      }
                      return E(n, sk(e), 10);
                    case 10:
                      os(e);
                    case 9:
                      if (!e.$ || !e.j) {
                        n.A(11);
                        break;
                      }
                      return E(n, oM(e.j), 12);
                    case 12:
                      os(e);
                    case 11:
                      (e.B.resolve(), pe(n, 0));
                      break;
                    case 3:
                      ((t = oe(n)),
                        (t instanceof H && (t.code == 7001 || t.code == 7003)) || e.B.reject(t),
                        re(n));
                  }
                });
              })();
            }),
              (h.dispatchEvent = function (e) {
                return this.O ? this.O.dispatchEvent(e) : ut.prototype.dispatchEvent.call(this, e);
              }),
              (h.onError = function (e) {
                e.severity === 2 && (this.B.reject(e), this.destroy());
                var t = new Map().set("detail", e);
                ((t = new Ae("error", t)), this.dispatchEvent(t), t.defaultPrevented && (e.handled = !0));
              }));
            function os(e) {
              if (e.l) throw new H(2, 7, 7003);
            }
            function og(e, t) {
              e.dispatchEvent(new Ae("onstatechange", new Map().set("state", t)));
            }
            function nk(e) {
              var t, n, r, i, s, o;
              return F(function (u) {
                switch (u.g) {
                  case 1:
                    if (
                      (og(e, "manifest-parser"),
                      e.m ||
                        ((e.H = e0(e.N, e.V)),
                        (e.m = e.H()),
                        e.m.configure(e.g.manifest, function () {
                          return e.F;
                        })),
                      (t = Date.now() / 1e3),
                      og(e, "manifest"),
                      e.h)
                    ) {
                      u.A(2);
                      break;
                    }
                    return E(u, e.m.start(e.N, e.Ua), 3);
                  case 3:
                    return ((e.h = u.h), RT(e.h), E(u, rk(e), 2));
                  case 2:
                    return (
                      e.ma.resolve(),
                      (n = new Ae("manifestparsed", void 0)),
                      E(u, Promise.resolve(), 5)
                    );
                  case 5:
                    if ((e.dispatchEvent(n), e.h.variants.length == 0)) throw new H(2, 4, 4036);
                    if ((RT(e.h), (r = lx(e.G, e.h)), !r)) {
                      u.A(6);
                      break;
                    }
                    return ((i = new Ae("trackschanged", void 0)), E(u, Promise.resolve(), 7));
                  case 7:
                    (os(e), e.dispatchEvent(i));
                  case 6:
                    ((s = Date.now() / 1e3), (o = s - t), (e.X.J = o), re(u));
                }
              });
            }
            function CT(e, t) {
              var n, r, i, s;
              return F(function (o) {
                switch (o.g) {
                  case 1:
                    return !e.h || e.j
                      ? o.return()
                      : (og(e, "drm-engine"),
                        (e.za = Date.now() / 1e3),
                        (e.j = e.Ta()),
                        (e.G.g = e.j),
                        e.j.configure(e.g.drm, function () {
                          return e.F;
                        }),
                        (n = wc(e.h.variants)),
                        (r = !0),
                        e.h && e.h.presentationTimeline && (r = e.h.presentationTimeline.W()),
                        E(o, q0(e.j, n, e.h.offlineSessionIds, r), 2));
                  case 2:
                    if ((os(e), !t)) {
                      o.A(3);
                      break;
                    }
                    return E(o, e.j.Vb(t), 4);
                  case 4:
                    os(e);
                  case 3:
                    return E(o, ux(e.G, e.h), 5);
                  case 5:
                    if (((i = o.h), !i)) {
                      o.A(0);
                      break;
                    }
                    return ((s = new Ae("trackschanged", void 0)), E(o, Promise.resolve(), 7));
                  case 7:
                    (e.dispatchEvent(s), re(o));
                }
              });
            }
            ((h.configure = function (e, t) {
              ((e = td(e, t)), Pi(this.g, e));
            }),
              (h.getConfiguration = function () {
                return Fr(this.g);
              }));
            function rk(e) {
              return F(function (t) {
                return (
                  e.C ||
                    ((e.C = e.g.adaptationSetCriteriaFactory()),
                    e.C.configure({
                      language: e.g.preferredAudioLanguage,
                      role: e.g.preferredAudioRole,
                      videoRole: e.g.preferredVideoRole,
                      channelCount: 0,
                      hdrLevel: e.g.preferredVideoHdrLevel,
                      spatialAudio: e.g.preferSpatialAudio,
                      videoLayout: e.g.preferredVideoLayout,
                      audioLabel: e.g.preferredAudioLabel,
                      videoLabel: e.g.preferredVideoLabel,
                      codecSwitchingStrategy: e.g.mediaSource.codecSwitchingStrategy,
                      audioCodec: "",
                      activeAudioCodec: "",
                      activeAudioChannelCount: 0,
                      preferredAudioCodecs: e.g.preferredAudioCodecs,
                      preferredAudioChannelCount: e.g.preferredAudioChannelCount,
                    })),
                  e.i || !e.h.variants.length || (e.h.variants.length != 1 && e.h.type != "HLS")
                    ? t.A(0)
                    : ((e.i = ag(e)), e.i ? E(t, MT(e.i), 0) : t.A(0))
                );
              });
            }
            function ik(e) {
              return F(function (t) {
                return t.g == 1
                  ? !e.i || e.h.variants.includes(e.i)
                    ? t.A(0)
                    : E(t, ok(e.i), 3)
                  : ((e.i = ag(e)), e.i ? E(t, MT(e.i), 0) : t.A(0));
              });
            }
            function sk(e) {
              var t, n, r, i, s;
              return F(function (o) {
                return (
                  !e.i && (t = ag(e)) && (e.i = t),
                  e.i
                    ? ((n = e.h.presentationTimeline.W()),
                      (r = []),
                      (i = e.i),
                      i.video && r.push(ug(e, i.video, n)),
                      i.audio && r.push(ug(e, i.audio, n)),
                      (s =
                        So(
                          e.h.textStreams,
                          e.g.preferredTextLanguage,
                          e.g.preferredTextRole,
                          e.g.preferForcedSubs,
                        )[0] || null) &&
                        b0(i.audio, s, e.g) &&
                        (r.push(ug(e, s, n)), (e.T = s)),
                      E(o, Promise.all(r), 0))
                    : o.A(0)
                );
              });
            }
            function ag(e) {
              if (!e.u) {
                var t = e.g.abrFactory;
                ((e.u = t()), e.u.configure(e.g.abr));
              }
              return (
                (t = wc(e.h.variants)),
                (t = e.C.create(t)),
                e.u.setVariants(Array.from(t.values())),
                e.u.chooseVariant(!0)
              );
            }
            function ug(e, t, n) {
              var r, i, s, o, u;
              return F(function (l) {
                return l.g == 1
                  ? ((r = e.g.streaming.segmentPrefetchLimit || 2),
                    (i = new Wc(
                      r,
                      t,
                      function (p, m, y) {
                        return qc(p, m, y || null, e.g.streaming.retryParameters, e.Da, e.F);
                      },
                      !1,
                    )),
                    e.M.set(t.id, i),
                    t.segmentIndex ? l.A(2) : E(l, t.createSegmentIndex(), 2))
                  : ((s = typeof e.o == "number" ? e.o : 0),
                    (o = t.segmentIndex.Xb(s)),
                    (u = null),
                    o && ((u = o.current()), u || (u = o.next().value)),
                    u || (u = Qr(t.segmentIndex)),
                    u ? (n ? (u.ea ? E(l, aT(i, u.ea), 0) : l.A(0)) : E(l, vu(i, u.startTime), 0)) : l.A(0));
              });
            }
            function MT(e) {
              var t, n, r, i;
              return F(function (s) {
                for (t = [], n = x([e.video, e.audio]), r = n.next(); !r.done; r = n.next())
                  (i = r.value) && !i.segmentIndex && t.push(i.createSegmentIndex());
                return t.length > 0 ? E(s, Promise.all(t), 0) : s.A(0);
              });
            }
            function ok(e) {
              var t, n, r, i;
              return F(function (s) {
                for (t = [], n = x([e.video, e.audio]), r = n.next(); !r.done; r = n.next())
                  (i = r.value) && i.segmentIndex && i.closeSegmentIndex && t.push(i.closeSegmentIndex());
                return t.length > 0 ? E(s, Promise.all(t), 0) : s.A(0);
              });
            }
            ((h.rl = function () {
              return this.B;
            }),
              (h.destroy = function () {
                var e = this,
                  t,
                  n,
                  r;
                return F(function (i) {
                  if (i.g == 1) return ((e.l = !0), !e.m || e.oa ? i.A(2) : E(i, e.m.stop(), 2));
                  if (i.g != 4)
                    return (
                      e.u && e.u.release(),
                      e.I && !e.va && e.I.release(),
                      !e.j || e.ba ? i.A(4) : E(i, e.j.destroy(), 4)
                    );
                  if (e.M.size > 0 && !e.ya)
                    for (t = x(e.M.values()), n = t.next(); !n.done; n = t.next()) ((r = n.value), Zr(r));
                  re(i);
                });
              }));
            function RT(e) {
              function t(n) {
                return (n.video && n.audio) || (n.video && n.video.codecs.includes(","));
              }
              e.variants.some(t) && (e.variants = e.variants.filter(t));
            }
            (de("shaka.media.PreloadManager", Cr),
              (Cr.prototype.destroy = Cr.prototype.destroy),
              (Cr.prototype.waitForFinish = Cr.prototype.rl),
              (Cr.prototype.getPrefetchedTextTrack = Cr.prototype.Uj),
              (Cr.prototype.getPrefetchedVariantTrack = Cr.prototype.Vj));
            function Ks(e, t) {
              ut.call(this);
              var n = this;
              ((this.i = e),
                (this.l = t),
                (this.g = new Map()),
                (this.m = [
                  {
                    kd: null,
                    jd: Go,
                    Uc: function (r, i) {
                      return Di(n, "enter", r, i);
                    },
                  },
                  {
                    kd: Cu,
                    jd: Go,
                    Uc: function (r, i) {
                      return Di(n, "enter", r, i);
                    },
                  },
                  {
                    kd: Mu,
                    jd: Go,
                    Uc: function (r, i) {
                      return Di(n, "enter", r, i);
                    },
                  },
                  {
                    kd: Go,
                    jd: Cu,
                    Uc: function (r, i) {
                      return Di(n, "exit", r, i);
                    },
                  },
                  {
                    kd: Go,
                    jd: Mu,
                    Uc: function (r, i) {
                      return Di(n, "exit", r, i);
                    },
                  },
                  {
                    kd: Cu,
                    jd: Mu,
                    Uc: function (r, i) {
                      i ? Di(n, "skip", r, i) : (Di(n, "enter", r, i), Di(n, "exit", r, i));
                    },
                  },
                  {
                    kd: Mu,
                    jd: Cu,
                    Uc: function (r, i) {
                      return Di(n, "skip", r, i);
                    },
                  },
                ]),
                (this.h = new tt()),
                this.h.D(this.i, "regionremove", function (r) {
                  n.g.delete(r.region);
                }));
            }
            (q(Ks, ut),
              (Ks.prototype.release = function () {
                ((this.i = null),
                  this.g.clear(),
                  this.h.release(),
                  (this.h = null),
                  ut.prototype.release.call(this));
              }),
              (Ks.prototype.j = function (e, t) {
                if (!this.l || e != 0) {
                  this.l = !1;
                  for (var n = x(this.i.h.values()), r = n.next(); !r.done; r = n.next()) {
                    r = r.value;
                    var i = this.g.get(r),
                      s = e < r.startTime ? Cu : e > r.endTime ? Mu : Go;
                    this.g.set(r, s);
                    for (var o = x(this.m), u = o.next(); !u.done; u = o.next())
                      ((u = u.value), u.kd == i && u.jd == s && u.Uc(r, t));
                  }
                }
              }));
            function Di(e, t, n, r) {
              ((t = new Ae(
                t,
                new Map([
                  ["region", n],
                  ["seeking", r],
                ]),
              )),
                e.dispatchEvent(t));
            }
            var Cu = 1,
              Go = 2,
              Mu = 3;
            /*
		 @license
		 Copyright 2013 Ali Al Dallal

		 Licensed under the MIT license.

		 Permission is hereby granted, free of charge, to any person obtaining a copy
		 of this software and associated documentation files (the "Software"), to deal
		 in the Software without restriction, including without limitation the rights
		 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
		 copies of the Software, and to permit persons to whom the Software is
		 furnished to do so, subject to the following conditions:

		 The above copyright notice and this permission notice shall be included in
		 all copies or substantial portions of the Software.

		 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
		 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
		 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
		 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
		 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
		 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
		 SOFTWARE.
		*/ for (
              var as = {
                  ach: "Lwo",
                  ady: "",
                  af: "Afrikaans",
                  "af-NA": "Afrikaans (Namibia)",
                  "af-ZA": "Afrikaans (South Africa)",
                  ak: "Ti",
                  ar: "",
                  "ar-AR": "",
                  "ar-MA": "",
                  "ar-SA": " ()",
                  "ay-BO": "Aymar aru",
                  az: "Azrbaycan dili",
                  "az-AZ": "Azrbaycan dili",
                  "be-BY": "",
                  bg: "",
                  "bg-BG": "",
                  bn: "",
                  "bn-IN": " ()",
                  "bn-BD": "()",
                  "bs-BA": "Bosanski",
                  ca: "Catal",
                  "ca-ES": "Catal",
                  cak: "Maya Kaqchikel",
                  "ck-US": " (tsalagi)",
                  cs: "etina",
                  "cs-CZ": "etina",
                  cy: "Cymraeg",
                  "cy-GB": "Cymraeg",
                  da: "Dansk",
                  "da-DK": "Dansk",
                  de: "Deutsch",
                  "de-AT": "Deutsch (sterreich)",
                  "de-DE": "Deutsch (Deutschland)",
                  "de-CH": "Deutsch (Schweiz)",
                  dsb: "Dolnoserbina",
                  el: "",
                  "el-GR": "",
                  en: "English",
                  "en-GB": "English (UK)",
                  "en-AU": "English (Australia)",
                  "en-CA": "English (Canada)",
                  "en-IE": "English (Ireland)",
                  "en-IN": "English (India)",
                  "en-PI": "English (Pirate)",
                  "en-UD": "English (Upside Down)",
                  "en-US": "English (US)",
                  "en-ZA": "English (South Africa)",
                  "en@pirate": "English (Pirate)",
                  eo: "Esperanto",
                  "eo-EO": "Esperanto",
                  es: "Espaol",
                  "es-AR": "Espaol (Argentine)",
                  "es-419": "Espaol (Latinoamrica)",
                  "es-CL": "Espaol (Chile)",
                  "es-CO": "Espaol (Colombia)",
                  "es-EC": "Espaol (Ecuador)",
                  "es-ES": "Espaol (Espaa)",
                  "es-LA": "Espaol (Latinoamrica)",
                  "es-NI": "Espaol (Nicaragua)",
                  "es-MX": "Espaol (Mxico)",
                  "es-US": "Espaol (Estados Unidos)",
                  "es-VE": "Espaol (Venezuela)",
                  et: "eesti keel",
                  "et-EE": "Eesti (Estonia)",
                  eu: "Euskara",
                  "eu-ES": "Euskara",
                  fa: "",
                  "fa-IR": "",
                  "fb-LT": "Leet Speak",
                  ff: "Fulah",
                  fi: "Suomi",
                  "fi-FI": "Suomi",
                  "fo-FO": "Froyskt",
                  fr: "Franais",
                  "fr-CA": "Franais (Canada)",
                  "fr-FR": "Franais (France)",
                  "fr-BE": "Franais (Belgique)",
                  "fr-CH": "Franais (Suisse)",
                  "fy-NL": "Frysk",
                  ga: "Gaeilge",
                  "ga-IE": "Gaeilge (Gaelic)",
                  gl: "Galego",
                  "gl-ES": "Galego",
                  "gn-PY": "Avae'",
                  "gu-IN": "",
                  "gx-GR": " ",
                  he: "",
                  "he-IL": "",
                  hi: "",
                  "hi-IN": "",
                  hr: "Hrvatski",
                  "hr-HR": "Hrvatski",
                  hsb: "Hornjoserbina",
                  ht: "Kreyl",
                  hu: "Magyar",
                  "hu-HU": "Magyar",
                  "hy-AM": "",
                  id: "Bahasa Indonesia",
                  "id-ID": "Bahasa Indonesia",
                  is: "slenska",
                  "is-IS": "slenska (Iceland)",
                  it: "Italiano",
                  "it-IT": "Italiano",
                  ja: "",
                  "ja-JP": "",
                  "jv-ID": "Basa Jawa",
                  "ka-GE": "",
                  "kk-KZ": "",
                  km: "",
                  "km-KH": "",
                  kab: "Taqbaylit",
                  kn: "",
                  "kn-IN": " (India)",
                  ko: "",
                  "ko-KR": " ()",
                  ku: "Kurd",
                  "ku-TR": "Kurd",
                  la: "Latin",
                  "la-VA": "Latin",
                  lb: "Ltzebuergesch",
                  "li-NL": "Lmbrgs",
                  lt: "Lietuvi",
                  "lt-LT": "Lietuvi",
                  lv: "Latvieu",
                  "lv-LV": "Latvieu",
                  mai: ", ",
                  "mg-MG": "Malagasy",
                  mk: "",
                  "mk-MK": " ()",
                  ml: "",
                  "ml-IN": "",
                  "mn-MN": "",
                  mr: "",
                  "mr-IN": "",
                  ms: "Bahasa Melayu",
                  "ms-MY": "Bahasa Melayu",
                  mt: "Malti",
                  "mt-MT": "Malti",
                  my: "",
                  nb: "Norsk (bokml)",
                  "nb-NO": "Norsk (bokml)",
                  ne: "",
                  "ne-NP": "",
                  nl: "Nederlands",
                  "nl-BE": "Nederlands (Belgi)",
                  "nl-NL": "Nederlands (Nederland)",
                  "nn-NO": "Norsk (nynorsk)",
                  no: "Norsk",
                  oc: "Occitan",
                  "or-IN": "",
                  pa: "",
                  "pa-IN": " ( )",
                  pl: "Polski",
                  "pl-PL": "Polski",
                  "ps-AF": "",
                  pt: "Portugus",
                  "pt-BR": "Portugus (Brasil)",
                  "pt-PT": "Portugus (Portugal)",
                  "qu-PE": "Qhichwa",
                  "rm-CH": "Rumantsch",
                  ro: "Romn",
                  "ro-RO": "Romn",
                  ru: "",
                  "ru-RU": "",
                  "sa-IN": "",
                  "se-NO": "Davvismegiella",
                  "si-LK": "",
                  sk: "Slovenina",
                  "sk-SK": "Slovenina (Slovakia)",
                  sl: "Slovenina",
                  "sl-SI": "Slovenina",
                  "so-SO": "Soomaaliga",
                  sq: "Shqip",
                  "sq-AL": "Shqip",
                  sr: "",
                  "sr-RS": " (Serbia)",
                  su: "Basa Sunda",
                  sv: "Svenska",
                  "sv-SE": "Svenska",
                  sw: "Kiswahili",
                  "sw-KE": "Kiswahili",
                  ta: "",
                  "ta-IN": "",
                  te: "",
                  "te-IN": "",
                  tg: " ",
                  "tg-TJ": "",
                  th: "",
                  "th-TH": " ()",
                  tl: "Filipino",
                  "tl-PH": "Filipino",
                  tlh: "tlhIngan-Hol",
                  tr: "Trke",
                  "tr-TR": "Trke",
                  "tt-RU": "",
                  uk: "",
                  "uk-UA": "",
                  ur: "",
                  "ur-PK": "",
                  uz: "O'zbek",
                  "uz-UZ": "O'zbek",
                  vi: "Ting Vit",
                  "vi-VN": "Ting Vit",
                  "xh-ZA": "isiXhosa",
                  yi: "",
                  "yi-DE": " (German)",
                  zh: "",
                  "zh-HANS": "",
                  "zh-HANT": "",
                  "zh-CN": "",
                  "zh-HK": "",
                  "zh-SG": "",
                  "zh-TW": "",
                  "zu-ZA": "isiZulu",
                },
                kT = x(Object.keys(as)),
                lg = kT.next();
              !lg.done;
              lg = kT.next()
            ) {
              var _T = lg.value;
              as[_T.toLowerCase()] = as[_T];
            }
            function PT(e, t) {
              if (e.lineBreak) return "\n";
              if (e.nestedCues.length)
                return e.nestedCues
                  .map(function (o) {
                    return PT(o, e);
                  })
                  .join("");
              if (!e.payload) return e.payload;
              var n = [],
                r = e.fontWeight >= vo,
                i = e.fontStyle == xo,
                s = e.textDecoration.includes(Ti);
              return (
                r && n.push(["b"]),
                i && n.push(["i"]),
                s && n.push(["u"]),
                (i = e.color),
                i == "" && t && (i = t.color),
                (r = ""),
                (i = DT(i)) && (r += "." + i),
                (i = e.backgroundColor),
                i == "" && t && (i = t.backgroundColor),
                (t = DT(i)) && (r += ".bg_" + t),
                r && n.push(["c", r]),
                n.reduceRight(function (o, u) {
                  var l = x(u);
                  return (
                    (u = l.next().value),
                    (l = l.next().value),
                    "<" + u + (l === void 0 ? "" : l) + ">" + o + "</" + u + ">"
                  );
                }, e.payload)
              );
            }
            function DT(e) {
              e = e.toLowerCase();
              var t = e.replace(/\s/g, "").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);
              switch (
                (t
                  ? (e =
                      "#" +
                      (parseInt(t[1], 10) | 256).toString(16).slice(1) +
                      (parseInt(t[2], 10) | 256).toString(16).slice(1) +
                      (parseInt(t[3], 10) | 256).toString(16).slice(1))
                  : e.startsWith("#") && e.length > 7 && (e = e.slice(0, 7)),
                e)
              ) {
                case "white":
                case "#fff":
                case "#ffffff":
                  return "white";
                case "lime":
                case "#0f0":
                case "#00ff00":
                  return "lime";
                case "cyan":
                case "#0ff":
                case "#00ffff":
                  return "cyan";
                case "red":
                case "#f00":
                case "#ff0000":
                  return "red";
                case "yellow":
                case "#ff0":
                case "#ffff00":
                  return "yellow";
                case "magenta":
                case "#f0f":
                case "#ff00ff":
                  return "magenta";
                case "blue":
                case "#00f":
                case "#0000ff":
                  return "blue";
                case "black":
                case "#000":
                case "#000000":
                  return "black";
              }
              return null;
            }
            function cg(e, t) {
              var n = [];
              e = x(LT(e));
              for (var r = e.next(); !r.done; r = e.next())
                if (((r = r.value), r.isContainer)) n.push.apply(n, Y(cg(r.nestedCues, r)));
                else {
                  var i = r.clone();
                  ((i.nestedCues = []), (i.payload = PT(r, t)), n.push(i));
                }
              return n;
            }
            function LT(e) {
              var t = [];
              e = x(e);
              for (var n = e.next(), r = {}; !n.done; r = { mg: void 0 }, n = e.next())
                ((r.mg = n.value),
                  t.some(
                    (function (i) {
                      return function (s) {
                        return cc(i.mg, s);
                      };
                    })(r),
                  ) || t.push(r.mg));
              return t;
            }
            function ak(e) {
              function t(r) {
                for (var i = 5381, s = r.length; s; ) i = (i * 33) ^ r.charCodeAt(--s);
                return (i >>> 0).toString();
              }
              if (e.startTime >= e.endTime) return null;
              var n = new VTTCue(e.startTime, e.endTime, e.payload);
              ((n.id = t(e.startTime.toString()) + t(e.endTime.toString()) + t(e.payload)),
                (n.lineAlign = e.lineAlign),
                (n.positionAlign = e.positionAlign),
                e.size && (n.size = e.size));
              try {
                n.align = e.textAlign;
              } catch (r) {}
              return (
                e.textAlign == "center" && n.align != "center" && (n.align = "middle"),
                e.writingMode == "vertical-lr"
                  ? (n.vertical = "lr")
                  : e.writingMode == "vertical-rl" && (n.vertical = "rl"),
                e.lineInterpretation == 1 && (n.snapToLines = !1),
                e.line != null && (n.line = e.line),
                e.position != null && (n.position = e.position),
                n
              );
            }
            function bT(e, t) {
              var n = cg(t),
                r = [];
              ((t = e.cues ? Array.from(e.cues) : []), (n = x(n)));
              for (var i = n.next(), s = {}; !i.done; s = { vd: void 0 }, i = n.next())
                ((s.vd = i.value),
                  !t.some(
                    (function (o) {
                      return function (u) {
                        return (
                          u.startTime == o.vd.startTime && u.endTime == o.vd.endTime && u.text == o.vd.payload
                        );
                      };
                    })(s),
                  ) &&
                    s.vd.payload &&
                    (i = ak(s.vd)) &&
                    r.push(i));
              for (
                t = r.slice().sort(function (o, u) {
                  return o.startTime != u.startTime
                    ? o.startTime - u.startTime
                    : o.endTime != u.endTime
                      ? o.endTime - u.startTime
                      : ("line" in VTTCue.prototype)
                        ? r.indexOf(u) - r.indexOf(o)
                        : r.indexOf(o) - r.indexOf(u);
                }),
                  t = x(t),
                  n = t.next();
                !n.done;
                n = t.next()
              )
                e.addCue(n.value);
            }
            function dg(e, t) {
              var n = !1;
              e.mode === "disabled" && ((n = !0), (e.mode = "hidden"));
              for (var r = 0; r < e.cues.length; ) {
                var i = e.cues[r];
                t(i) ? e.removeCue(i) : r++;
              }
              n && (e.mode = "disabled");
            }
            function Xt(e) {
              var t = this;
              ((this.i = e),
                (this.l = new tt()),
                (this.j = null),
                (this.h = new Map()),
                (this.g = -1),
                (this.u = !1),
                (this.o = null),
                (this.C = function () {
                  (t.l.Ma(t.i, "textchanged", t.m), t.l.Ma(t.j.textTracks, "change", t.B));
                  for (var n = x(t.h.values()), r = n.next(); !r.done; r = n.next()) r.value.remove();
                  (t.h.clear(), (t.g = -1), (t.j = null));
                }),
                (this.m = function () {
                  var n = new Map(),
                    r = t.i.Lc();
                  r = x(r);
                  for (var i = r.next(); !i.done; i = r.next()) {
                    if (((i = i.value), t.h.has(i.id))) {
                      var s = t.h.get(i.id);
                      (i.active || s.track.mode === "disabled" || (s.track.mode = "disabled"),
                        t.h.delete(i.id));
                    } else {
                      ((s = t.j.ownerDocument.createElement("track")), (s.kind = uk(i)));
                      var o = s,
                        u = void 0;
                      if (i.label) u = i.label;
                      else if (i.language)
                        if (i.language in as) u = as[i.language];
                        else {
                          var l = mc(i.language);
                          l in as && (u = as[l] + " (" + i.language + ")");
                        }
                      (u ||
                        ((u = i.originalTextId),
                        i.language && i.language !== i.originalTextId && (u += " (" + i.language + ")")),
                        (o.label = u),
                        i.language in as && (s.srclang = i.language),
                        (s.src = "data:,WEBVTT"),
                        (s.track.mode = "disabled"),
                        t.j.appendChild(s));
                    }
                    (n.set(i.id, s), i.active && (t.g = i.id));
                  }
                  for (r = x(t.h.values()), i = r.next(); !i.done; i = r.next()) i.value.remove();
                  (t.g > -1 &&
                    (n.has(t.g)
                      ? ((r = n.get(t.g).track),
                        r.mode === "disabled" && (r.mode = t.u ? "showing" : "hidden"))
                      : (t.g = -1)),
                    (t.h = n));
                }),
                (this.B = function () {
                  if (!t.o) {
                    var n = t.j;
                    t.o = new He(function () {
                      if (((t.o = null), t.j === n)) {
                        var r = -1,
                          i = !1;
                        if (t.h.has(t.g)) {
                          var s = t.h.get(t.g);
                          s.track.mode === "showing"
                            ? ((r = t.g), (i = !0))
                            : s.track.mode === "hidden" && (r = t.g);
                        }
                        if (!i)
                          for (i = x(t.h), s = i.next(); !s.done; s = i.next()) {
                            var o = x(s.value);
                            if (((s = o.next().value), (o = o.next().value), o.track.mode === "showing")) {
                              r = s;
                              break;
                            } else r < 0 && o.track.mode === "hidden" && (r = s);
                          }
                        for (i = x(t.h), s = i.next(); !s.done; s = i.next())
                          ((o = x(s.value)),
                            (s = o.next().value),
                            (o = o.next().value),
                            s !== r && o.track.mode !== "disabled" && (o.track.mode = "disabled"));
                        (t.g !== r && ((t.g = r), r > -1 && t.i.ph({ id: r })),
                          t.i.wh(r > -1 && t.h.get(r).track.mode === "showing"));
                      }
                    }).ka(0);
                  }
                }),
                this.l.D(e, "loaded", function () {
                  return t.enableTextDisplayer();
                }),
                this.enableTextDisplayer());
            }
            ((h = Xt.prototype),
              (h.configure = function () {}),
              (h.remove = function (e, t) {
                if (this.i)
                  this.h.has(this.g) &&
                    dg(this.h.get(this.g).track, function (n) {
                      return n.startTime < t && n.endTime > e;
                    });
                else return !1;
                return !0;
              }),
              (h.append = function (e) {
                this.h.has(this.g) && bT(this.h.get(this.g).track, e);
              }),
              (h.destroy = function () {
                return (
                  this.i && (this.j && this.C(), (this.i = null)),
                  this.l && (this.l.release(), (this.l = null)),
                  Promise.resolve()
                );
              }),
              (h.isTextVisible = function () {
                return this.u;
              }),
              (h.setTextVisibility = function (e) {
                if (((this.u = e), this.h.has(this.g))) {
                  var t = this.h.get(this.g).track;
                  t.mode !== "disabled" && ((e = e ? "showing" : "hidden"), t.mode !== e && (t.mode = e));
                } else if (this.i && this.i.$d() === 3)
                  if (
                    ((t = Array.from(this.i.bf().textTracks).filter(function (r) {
                      return ["captions", "subtitles", "forced"].includes(r.kind);
                    })),
                    e)
                  ) {
                    ((e = null), (t = x(t)));
                    for (var n = t.next(); !n.done; n = t.next())
                      if (((n = n.value), n.mode === "showing")) {
                        e = null;
                        break;
                      } else e || n.mode !== "hidden" || (e = n);
                    e && (e.mode = "showing");
                  } else
                    for (e = x(t), t = e.next(); !t.done; t = e.next())
                      ((t = t.value), t.mode === "showing" && (t.mode = "hidden"));
              }),
              (h.setTextLanguage = function () {}),
              (h.enableTextDisplayer = function () {
                !this.j &&
                  this.i &&
                  this.i.$d() === 2 &&
                  ((this.j = this.i.bf()),
                  this.l.Aa(this.i, "unloading", this.C),
                  this.l.D(this.i, "textchanged", this.m),
                  this.l.D(this.j.textTracks, "change", this.B),
                  this.m());
              }));
            function uk(e) {
              var t = je();
              return e.forced && t.Ha() === "WEBKIT"
                ? "forced"
                : e.kind === "caption" ||
                    (e.roles &&
                      e.roles.some(function (n) {
                        return n.includes("transcribes-spoken-dialog");
                      }) &&
                      e.roles.some(function (n) {
                        return n.includes("describes-music-and-sound");
                      }))
                  ? "captions"
                  : "subtitles";
            }
            (de("shaka.text.NativeTextDisplayer", Xt),
              (Xt.prototype.enableTextDisplayer = Xt.prototype.enableTextDisplayer),
              (Xt.prototype.setTextLanguage = Xt.prototype.setTextLanguage),
              (Xt.prototype.setTextVisibility = Xt.prototype.setTextVisibility),
              (Xt.prototype.isTextVisible = Xt.prototype.isTextVisible),
              (Xt.prototype.destroy = Xt.prototype.destroy),
              (Xt.prototype.append = Xt.prototype.append),
              (Xt.prototype.remove = Xt.prototype.remove),
              (Xt.prototype.configure = Xt.prototype.configure));
            function pn(e, t) {
              for (
                Je("SimpleTextDisplayer", "Please migrate to NativeTextDisplayer"),
                  this.h = e,
                  this.i = t,
                  this.g = null,
                  e = x(Array.from(this.h.textTracks)),
                  t = e.next();
                !t.done;
                t = e.next()
              )
                ((t = t.value),
                  t.kind !== "metadata" &&
                    t.kind !== "chapters" &&
                    ((t.mode = "disabled"), t.label == this.i && (this.g = t)));
              this.g && (this.g.mode = "hidden");
            }
            ((h = pn.prototype),
              (h.configure = function () {}),
              (h.remove = function (e, t) {
                return this.g
                  ? (dg(this.g, function (n) {
                      return n.startTime < t && n.endTime > e;
                    }),
                    !0)
                  : !1;
              }),
              (h.append = function (e) {
                this.g && bT(this.g, e);
              }),
              (h.destroy = function () {
                return (
                  this.g &&
                    (dg(this.g, function () {
                      return !0;
                    }),
                    (this.g.mode = "disabled")),
                  (this.g = this.h = null),
                  Promise.resolve()
                );
              }),
              (h.isTextVisible = function () {
                return this.g ? this.g.mode == "showing" : !1;
              }),
              (h.setTextVisibility = function (e) {
                (e && !this.g && NT(this), this.g && (this.g.mode = e ? "showing" : "hidden"));
              }),
              (h.setTextLanguage = function () {}),
              (h.enableTextDisplayer = function () {
                NT(this);
              }));
            function NT(e) {
              e.h && !e.g && ((e.g = e.h.addTextTrack("subtitles", e.i)), (e.g.mode = "hidden"));
            }
            (de("shaka.text.SimpleTextDisplayer", pn),
              (pn.prototype.enableTextDisplayer = pn.prototype.enableTextDisplayer),
              (pn.prototype.setTextLanguage = pn.prototype.setTextLanguage),
              (pn.prototype.setTextVisibility = pn.prototype.setTextVisibility),
              (pn.prototype.isTextVisible = pn.prototype.isTextVisible),
              (pn.prototype.destroy = pn.prototype.destroy),
              (pn.prototype.append = pn.prototype.append),
              (pn.prototype.remove = pn.prototype.remove),
              (pn.prototype.configure = pn.prototype.configure));
            function gn() {}
            ((h = gn.prototype),
              (h.configure = function () {}),
              (h.remove = function () {}),
              (h.append = function () {}),
              (h.destroy = function () {}),
              (h.isTextVisible = function () {
                return !1;
              }),
              (h.setTextVisibility = function () {}),
              (h.setTextLanguage = function () {}),
              (h.enableTextDisplayer = function () {}),
              de("shaka.text.StubTextDisplayer", gn),
              (gn.prototype.enableTextDisplayer = gn.prototype.enableTextDisplayer),
              (gn.prototype.setTextLanguage = gn.prototype.setTextLanguage),
              (gn.prototype.setTextVisibility = gn.prototype.setTextVisibility),
              (gn.prototype.isTextVisible = gn.prototype.isTextVisible),
              (gn.prototype.destroy = gn.prototype.destroy),
              (gn.prototype.append = gn.prototype.append),
              (gn.prototype.remove = gn.prototype.remove),
              (gn.prototype.configure = gn.prototype.configure));
            function mn(e, t) {
              var n = this;
              ((this.m = !1),
                (this.h = []),
                (this.j = e),
                (this.o = t),
                (this.C = this.u = null),
                (this.g = document.createElement("div")),
                this.g.classList.add("shaka-text-container"),
                (this.g.style.textAlign = "center"),
                (this.g.style.display = "flex"),
                (this.g.style.flexDirection = "column"),
                (this.g.style.alignItems = "center"),
                (this.g.style.justifyContent = "flex-end"),
                (this.B = new He(function () {
                  n.j.paused || us(n);
                })),
                Ru(this),
                (this.l = new Map()),
                (this.i = new tt()),
                this.i.D(document, "fullscreenchange", function () {
                  us(n, !0);
                }),
                this.i.D(this.j, "seeking", function () {
                  us(n, !0);
                }),
                this.i.D(this.j, "ratechange", function () {
                  Ru(n);
                }),
                this.i.D(this.j, "resize", function () {
                  var r = n.j,
                    i = r.videoWidth;
                  ((r = r.videoHeight), i && r ? (n.u = i / r) : (n.u = null));
                }),
                (this.F = null),
                "ResizeObserver" in g &&
                  ((this.F = new ResizeObserver(function () {
                    us(n, !0);
                  })),
                  this.F.observe(this.g)),
                (this.G = new Map()));
            }
            ((h = mn.prototype),
              (h.configure = function (e) {
                ((this.C = e), Ru(this), us(this, !0));
              }),
              (h.append = function (e) {
                var t = [].concat(Y(this.h));
                e = x(LT(e));
                for (var n = e.next(), r = {}; !n.done; r = { ng: void 0 }, n = e.next())
                  ((r.ng = n.value),
                    t.some(
                      (function (i) {
                        return function (s) {
                          return cc(s, i.ng);
                        };
                      })(r),
                    ) || this.h.push(r.ng));
                (this.h.length && Ru(this), us(this));
              }),
              (h.destroy = function () {
                return (
                  this.g &&
                    (this.g.parentElement && this.o.removeChild(this.g),
                    (this.g = null),
                    (this.m = !1),
                    (this.h = []),
                    this.B && (this.B.stop(), (this.B = null)),
                    this.l.clear(),
                    this.i && (this.i.release(), (this.i = null)),
                    this.F && (this.F.disconnect(), (this.F = null))),
                  Promise.resolve()
                );
              }),
              (h.remove = function (e, t) {
                if (!this.g) return !1;
                var n = this.h.length;
                return (
                  (this.h = this.h.filter(function (r) {
                    return r.startTime < e || r.endTime >= t;
                  })),
                  us(this, n > this.h.length),
                  this.h.length || Ru(this),
                  !0
                );
              }),
              (h.isTextVisible = function () {
                return this.m;
              }),
              (h.setTextVisibility = function (e) {
                (this.m = e)
                  ? (this.g.parentElement || this.o.appendChild(this.g), us(this, !0))
                  : this.g.parentElement && this.o.removeChild(this.g);
              }),
              (h.setTextLanguage = function (e) {
                e && e != "und" ? this.g.setAttribute("lang", e) : this.g.setAttribute("lang", "");
              }),
              (h.enableTextDisplayer = function () {}));
            function Ru(e) {
              e.B &&
                (e.h.length
                  ? e.B.Ea((e.C ? e.C.captionsUpdatePeriod : 0.25) / Math.max(1, Math.abs(e.j.playbackRate)))
                  : e.B.stop());
            }
            function lk(e, t) {
              for (; t != null; ) {
                if (t == e.g) return !0;
                t = t.parentElement;
              }
              return !1;
            }
            function OT(e, t, n, r, i) {
              var s = !1,
                o = [],
                u = [];
              t = x(t);
              for (var l = t.next(); !l.done; l = t.next()) {
                ((l = l.value), i.push(l));
                var p = e.l.get(l),
                  m = l.startTime <= r && l.endTime > r,
                  y = p ? p.nj : null;
                (p && (o.push(p.og), p.$c && o.push(p.$c), m || ((s = !0), e.l.delete(l), (p = null))),
                  m &&
                    (u.push(l),
                    p ? lk(e, y) || (s = !0) : (ck(e, l, i), (p = e.l.get(l)), (y = p.nj), (s = !0))),
                  l.nestedCues.length > 0 && y && OT(e, l.nestedCues, y, r, i),
                  i.pop());
              }
              if (s) {
                for (r = x(o), i = r.next(); !i.done; i = r.next())
                  ((i = i.value), i.parentElement && i.parentElement.removeChild(i));
                for (
                  u.sort(function (v, w) {
                    return v.startTime != w.startTime ? v.startTime - w.startTime : v.endTime - w.endTime;
                  }),
                    u = x(u),
                    r = u.next();
                  !r.done;
                  r = u.next()
                )
                  ((r = e.l.get(r.value)),
                    r.$c
                      ? (r.$c.contains(n) && r.$c.removeChild(n), n.appendChild(r.$c), r.$c.appendChild(r.og))
                      : n.appendChild(r.og));
              }
            }
            function us(e, t) {
              if (e.g) {
                var n = e.j.currentTime;
                if (!e.m || (t !== void 0 && t)) {
                  t = x(e.G.values());
                  for (var r = t.next(); !r.done; r = t.next()) hu(r.value);
                  (hu(e.g), e.l.clear(), e.G.clear());
                }
                e.m && OT(e, e.h, e.g, n, []);
              }
            }
            function ck(e, t, n) {
              var r = n.length > 1,
                i = r ? "span" : "div";
              (t.lineBreak && (i = "br"), t.rubyTag && (i = t.rubyTag), (r = !r && t.nestedCues.length > 0));
              var s = document.createElement(i);
              if ((i != "br" && fk(e, s, t, n, r), (n = null), t.region && t.region.id)) {
                var o = t.region,
                  u = e.u === 4 / 3 ? 2.5 : 1.9;
                if (
                  ((n =
                    o.id +
                    "_" +
                    o.width +
                    "x" +
                    o.height +
                    (o.heightUnits == Jn ? "%" : "px") +
                    "-" +
                    o.viewportAnchorX +
                    "x" +
                    o.viewportAnchorY +
                    (o.viewportAnchorUnits == Jn ? "%" : "px")),
                  e.G.has(n))
                )
                  n = e.G.get(n);
                else {
                  i = document.createElement("span");
                  var l = o.heightUnits == Jn ? "%" : "px",
                    p = o.widthUnits == Jn ? "%" : "px",
                    m = o.viewportAnchorUnits == Jn ? "%" : "px";
                  ((i.id = "shaka-text-region---" + n),
                    i.classList.add("shaka-text-region"),
                    (i.style.position = "absolute"));
                  var y = o.height,
                    v = o.width;
                  (o.heightUnits === 2 && ((y = o.height * 5.33), (l = "%")),
                    o.widthUnits === 2 && ((v = o.width * u), (p = "%")),
                    (i.style.height = y + l),
                    (i.style.width = v + p),
                    o.viewportAnchorUnits === 2
                      ? ((u = (o.viewportAnchorY / 75) * 100),
                        (l = (o.viewportAnchorX / (e.u === 4 / 3 ? 160 : 210)) * 100),
                        (u -= (o.regionAnchorY * y) / 100),
                        (l -= (o.regionAnchorX * v) / 100),
                        (i.style.top = u + "%"),
                        (i.style.left = l + "%"))
                      : ((i.style.top = o.viewportAnchorY - (o.regionAnchorY * y) / 100 + m),
                        (i.style.left = o.viewportAnchorX - (o.regionAnchorX * v) / 100 + m)),
                    o.heightUnits !== 0 &&
                      o.widthUnits !== 0 &&
                      o.viewportAnchorUnits !== 0 &&
                      ((o = Math.max(
                        0,
                        Math.min(
                          100 - (parseInt(i.style.width.slice(0, -1), 10) || 0),
                          parseInt(i.style.left.slice(0, -1), 10) || 0,
                        ),
                      )),
                      (i.style.top =
                        Math.max(
                          0,
                          Math.min(
                            100 - (parseInt(i.style.height.slice(0, -1), 10) || 0),
                            parseInt(i.style.top.slice(0, -1), 10) || 0,
                          ),
                        ) + "%"),
                      (i.style.left = o + "%")),
                    (i.style.display = "flex"),
                    (i.style.flexDirection = "column"),
                    (i.style.alignItems = "center"),
                    (i.style.justifyContent =
                      t.displayAlign == "before"
                        ? "flex-start"
                        : t.displayAlign == "center"
                          ? "center"
                          : "flex-end"),
                    e.G.set(n, i),
                    (n = i));
                }
              }
              ((i = s),
                r &&
                  ((i = document.createElement("span")),
                  i.classList.add("shaka-text-wrapper"),
                  (i.style.backgroundColor = t.backgroundColor),
                  (i.style.lineHeight = "normal"),
                  s.appendChild(i)),
                e.l.set(t, { og: s, nj: i, $c: n }));
            }
            function dk(e) {
              var t = e.direction,
                n = e.positionAlign;
              return (
                (e = e.textAlign),
                n !== fc
                  ? n
                  : e === "left" || (e === "start" && t === Ya) || (e === "end" && t === "rtl")
                    ? "line-left"
                    : e === "right" || (e === "start" && t === "rtl") || (e === "end" && t === Ya)
                      ? "line-right"
                      : "center"
              );
            }
            function fk(e, t, n, r, i) {
              var s = t.style,
                o = n.nestedCues.length == 0,
                u = r.length > 1;
              s.whiteSpace = "pre-wrap";
              var l = n.payload.replace(/\s+$/g, function (m) {
                return "".repeat(m.length);
              });
              if (
                ((s.webkitTextStrokeColor = n.textStrokeColor),
                (s.webkitTextStrokeWidth = n.textStrokeWidth),
                (s.color = n.color),
                (s.direction = n.direction),
                (s.opacity = n.opacity),
                (s.paddingLeft = fg(n.linePadding, n, e.o)),
                (s.paddingRight = fg(n.linePadding, n, e.o)),
                (s.textCombineUpright = n.textCombineUpright),
                (s.textShadow = n.textShadow),
                n.backgroundImage)
              )
                ((s.backgroundImage = "url('" + n.backgroundImage + "')"),
                  (s.backgroundRepeat = "no-repeat"),
                  (s.backgroundSize = "contain"),
                  (s.backgroundPosition = "center"),
                  n.backgroundColor && (s.backgroundColor = n.backgroundColor),
                  (s.width = "100%"),
                  (s.height = "100%"));
              else {
                if (n.nestedCues.length) var p = t;
                else ((p = document.createElement("span")), t.appendChild(p));
                (n.border && (p.style.border = n.border),
                  i ||
                    ((t = hk(r, function (m) {
                      return m.backgroundColor;
                    }))
                      ? (p.style.backgroundColor = t)
                      : l && (p.style.backgroundColor = "rgba(0, 0, 0, 0.8)")),
                  l && (p.setAttribute("translate", "no"), (p.textContent = l)));
              }
              (u && !r[r.length - 1].isContainer
                ? (s.display = "inline")
                : ((s.display = "flex"),
                  (s.flexDirection = "column"),
                  (s.alignItems = "center"),
                  n.textAlign == "left" || n.textAlign == "start"
                    ? ((s.width = "100%"), (s.alignItems = "start"))
                    : (n.textAlign == "right" || n.textAlign == "end") &&
                      ((s.width = "100%"), (s.alignItems = "end")),
                  (s.justifyContent =
                    n.displayAlign == "before"
                      ? "flex-start"
                      : n.displayAlign == "center"
                        ? "center"
                        : "flex-end")),
                o || (s.margin = "0"),
                (s.fontFamily = n.fontFamily),
                (s.fontWeight = n.fontWeight.toString()),
                (s.fontStyle = n.fontStyle),
                (s.letterSpacing = n.letterSpacing),
                (r = e.C ? e.C.fontScaleFactor : 1),
                (r !== 1 || n.fontSize) && (s.fontSize = fg(n.fontSize || "1em", n, e.o, r)),
                (r = n.line),
                r != null &&
                  ((o = n.lineInterpretation),
                  o == qa &&
                    ((o = 1),
                    (u = 16),
                    e.u && e.u < 1 && (u = 32),
                    (r = r < 0 ? 100 + (r / u) * 100 : (r / u) * 100)),
                  o == 1 &&
                    ((s.position = "absolute"),
                    n.writingMode == bs
                      ? ((s.width = "100%"),
                        n.lineAlign == Ns
                          ? (s.top = r + "%")
                          : n.lineAlign == "end" && (s.bottom = 100 - r + "%"))
                      : n.writingMode == "vertical-lr"
                        ? ((s.height = "100%"),
                          n.lineAlign == Ns
                            ? (s.left = r + "%")
                            : n.lineAlign == "end" && (s.right = 100 - r + "%"))
                        : ((s.height = "100%"),
                          n.lineAlign == Ns
                            ? (s.right = r + "%")
                            : n.lineAlign == "end" && (s.left = 100 - r + "%")))),
                (s.lineHeight = n.lineHeight),
                (e = dk(n)),
                e == "line-left"
                  ? ((s.cssFloat = "left"),
                    n.position !== null &&
                      ((s.position = "absolute"),
                      n.writingMode == bs
                        ? ((s.left = n.position + "%"), (s.width = "auto"))
                        : (s.top = n.position + "%")))
                  : e == "line-right"
                    ? ((s.cssFloat = "right"),
                      n.position !== null &&
                        ((s.position = "absolute"),
                        n.writingMode == bs
                          ? ((s.right = 100 - n.position + "%"), (s.width = "auto"))
                          : (s.bottom = n.position + "%")))
                    : n.position !== null &&
                      n.position != 50 &&
                      ((s.position = "absolute"),
                      n.writingMode == bs
                        ? ((s.left = n.position + "%"), (s.width = "auto"))
                        : (s.top = n.position + "%"),
                      n.size && (s.transform = "translateX(-50%)")),
                (s.textAlign = n.textAlign),
                (s.textDecoration = n.textDecoration.join(" ")),
                (s.writingMode = n.writingMode),
                ("writingMode" in document.documentElement.style && s.writingMode == n.writingMode) ||
                  (s.webkitWritingMode = n.writingMode),
                n.size && (n.writingMode == bs ? (s.width = n.size + "%") : (s.height = n.size + "%")));
            }
            function fg(e, t, n, r) {
              r = r === void 0 ? 1 : r;
              var i = (i = new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))
                ? { value: Number(i[1]), unit: i[2] }
                : null;
              if (!i) return e;
              switch (((e = i.unit), (r *= i.value), e)) {
                case "%":
                  return ((r / 100) * n.clientHeight) / t.cellResolution.rows + "px";
                case "c":
                  return (n.clientHeight * r) / t.cellResolution.rows + "px";
                default:
                  return r + e;
              }
            }
            function hk(e, t) {
              for (var n = e.length - 1; n >= 0; n--) {
                var r = t(e[n]);
                if (r || r === 0) return r;
              }
              return null;
            }
            (de("shaka.text.UITextDisplayer", mn),
              (mn.prototype.enableTextDisplayer = mn.prototype.enableTextDisplayer),
              (mn.prototype.setTextLanguage = mn.prototype.setTextLanguage),
              (mn.prototype.setTextVisibility = mn.prototype.setTextVisibility),
              (mn.prototype.isTextVisible = mn.prototype.isTextVisible),
              (mn.prototype.remove = mn.prototype.remove),
              (mn.prototype.destroy = mn.prototype.destroy),
              (mn.prototype.append = mn.prototype.append),
              (mn.prototype.configure = mn.prototype.configure));
            function pk(e, t) {
              function n(s) {
                for (var o = s, u = x(t), l = u.next(); !l.done; l = u.next())
                  ((l = l.value), l.end && l.start < s && (o += l.end - l.start));
                return (
                  (s = Math.floor(o / 3600)),
                  (u = Math.floor((o / 60) % 60)),
                  (l = Math.floor(o % 60)),
                  (o = Math.floor((o * 1e3) % 1e3)),
                  (s < 10 ? "0" : "") +
                    s +
                    ":" +
                    (u < 10 ? "0" : "") +
                    u +
                    ":" +
                    (l < 10 ? "0" : "") +
                    l +
                    "." +
                    (o < 100 ? (o < 10 ? "00" : "0") : "") +
                    o
                );
              }
              var r = cg(e);
              ((e = "WEBVTT\n\n"), (r = x(r)));
              for (var i = r.next(); !i.done; i = r.next())
                ((i = i.value),
                  (e +=
                    n(i.startTime) +
                    " --> " +
                    n(i.endTime) +
                    (function (s) {
                      var o = [];
                      switch (s.textAlign) {
                        case "left":
                          o.push("align:left");
                          break;
                        case "right":
                          o.push("align:right");
                          break;
                        case oi:
                          o.push("align:middle");
                          break;
                        case "start":
                          o.push("align:start");
                          break;
                        case "end":
                          o.push("align:end");
                      }
                      switch (s.writingMode) {
                        case "vertical-lr":
                          o.push("vertical:lr");
                          break;
                        case "vertical-rl":
                          o.push("vertical:rl");
                      }
                      return o.length ? " " + o.join(" ") : "";
                    })(i) +
                    "\n"),
                  (e += i.payload + "\n\n"));
              return e;
            }
            de("shaka.text.WebVttGenerator", function () {});
            function hg(e, t) {
              ((this.g = t),
                (this.j = e),
                (this.m = new Map()),
                (this.l = void 0),
                (this.F = !1),
                (this.J = !0),
                (this.u = this.I = !1),
                (this.C = this.B = void 0),
                (this.H = 0),
                (this.K = { request: !1, response: !1, event: !1 }),
                (this.o = {}),
                (this.i = new tt()),
                (this.G = []),
                (this.h = null));
            }
            ((hg.prototype.setMediaElement = function (e) {
              ((this.h = e), xk(this));
            }),
              (hg.prototype.configure = function (e) {
                ((this.g = e), Tk(this));
              }));
            function gk(e) {
              (e.m.clear(),
                (e.F = !1),
                (e.J = !0),
                (e.I = !1),
                (e.u = !1),
                (e.B = 0),
                (e.C = 0),
                (e.H = 0),
                (e.K = { request: !1, response: !1, event: !1 }),
                UT(e),
                (e.o = {}),
                (e.h = null),
                e.i.Qa());
            }
            function mk(e, t) {
              ((e.u = t),
                e.u
                  ? e.l == hd
                    ? (e.l = pd)
                    : e.l == gd && (e.l = md)
                  : e.l == pd
                    ? (e.l = hd)
                    : e.l == md && (e.l = gd));
            }
            function yk(e, t) {
              if (e.g && e.g.enabled && (yn(e, "ps", { dd: "d" }), e.h && e.h.autoplay)) {
                var n = e.h.play();
                n &&
                  n
                    .then(function () {
                      e.H = t;
                    })
                    .catch(function () {
                      e.H = 0;
                    });
              }
            }
            function vk(e, t, n) {
              try {
                if (!e.g.enabled) return t;
                var r = gg(e);
                e: {
                  switch (n.toLowerCase()) {
                    case "audio/mp4":
                    case "audio/webm":
                    case "audio/ogg":
                    case "audio/mpeg":
                    case "audio/aac":
                    case "audio/flac":
                    case "audio/wav":
                      var i = ld;
                      break e;
                    case "video/webm":
                    case "video/mp4":
                    case "video/mpeg":
                    case "video/mp2t":
                      i = dd;
                      break e;
                    case "application/x-mpegurl":
                    case "application/vnd.apple.mpegurl":
                    case "application/dash+xml":
                    case "video/vnd.mpeg.dash.mpd":
                    case "application/vnd.ms-sstr+xml":
                      i = zT;
                      break e;
                  }
                  i = void 0;
                }
                ((r.ot = i), (r.su = !0));
                var s = ku(r);
                return ud(t, s);
              } catch (o) {
                return (lr("CMCD_SRC_ERROR", "Could not generate src CMCD data.", o), t);
              }
            }
            function xk(e) {
              (e.i.D(e.h, "playing", function () {
                (e.C || (e.C = Date.now()), yn(e, "ps", { dd: "p" }));
              }),
                e.i.D(e.h, "volumechange", function () {
                  yn(e, e.h.muted ? "m" : "um");
                }),
                e.i.D(e.h, "play", function () {
                  e.B || ((e.B = Date.now()), yn(e, "ps", { dd: "s" }));
                }),
                e.i.D(e.h, "pause", function () {
                  yn(e, "ps", { dd: "a" });
                }),
                e.i.D(e.j, "buffering", function () {
                  yn(e, "ps", { dd: "w" });
                }),
                e.i.D(e.h, "seeking", function () {
                  return yn(e, "ps", { dd: "k" });
                }),
                e.i.D(document, "fullscreenchange", function () {
                  yn(e, document.fullscreenElement ? "pe" : "pc");
                }));
              var t = e.h;
              ((t.webkitPresentationMode || t.webkitSupportsFullscreen) &&
                e.i.D(t, "webkitpresentationmodechanged", function () {
                  t.webkitPresentationMode
                    ? yn(e, t.webkitPresentationMode !== "inline" ? "pe" : "pc")
                    : t.webkitSupportsFullscreen && yn(e, t.webkitDisplayingFullscreen ? "pe" : "pc");
                }),
                e.i.D(e.h, "enterpictureinpicture", function () {
                  yn(e, "pe");
                }),
                e.i.D(e.h, "leavepictureinpicture", function () {
                  yn(e, "pc");
                }),
                "documentPictureInPicture" in g &&
                  e.i.D(g.documentPictureInPicture, "enter", function (n) {
                    (yn(e, "pe"),
                      e.i.Aa(n.window, "pagehide", function () {
                        yn(e, "pc");
                      }));
                  }),
                e.i.D(document, "visibilitychange", function () {
                  document.hidden ? yn(e, "b", { bg: !0 }) : yn(e, "b");
                }),
                e.i.D(e.j, "complete", function () {
                  yn(e, "ps", { dd: "e" });
                }));
            }
            function Tk(e) {
              UT(e);
              var t = FT(e);
              t = x(t);
              for (var n = t.next(); !n.done; n = t.next())
                if (((n = n.value.timeInterval), n === void 0 && (n = Lk), n >= 1)) {
                  var r = new He(function () {
                    return yn(e, bk);
                  });
                  (r.Ea(n), e.G.push(r));
                }
            }
            function UT(e) {
              if (e.G) for (var t = x(e.G), n = t.next(); !n.done; n = t.next()) n.value.stop();
              e.G = [];
            }
            function FT(e) {
              return (e = e.g.targets)
                ? e.filter(function (t) {
                    return t.mode === YT && t.enabled;
                  })
                : [];
            }
            function pg(e) {
              return (e = e.g.targets)
                ? e.filter(function (t) {
                    return t.mode === $T && t.enabled === !0;
                  })
                : [];
            }
            function gg(e) {
              return (
                e.g.sessionId || (e.g.sessionId = g.crypto.randomUUID()),
                {
                  v: e.g.version,
                  sf: e.l,
                  sid: e.g.sessionId,
                  cid: e.g.contentId,
                  mtp: e.j.getBandwidthEstimate() / 1e3,
                }
              );
            }
            function yn(e, t, n) {
              if (
                ((n = n === void 0 ? {} : n),
                (t = Object.assign({ e: t, ts: Date.now() }, n)),
                (t = vg(e, t, YT)),
                (n = e.g.targets),
                !(e.g.version < Tg) && n)
              ) {
                var r = FT(e);
                ((n = Array.from(new Set([].concat(Y(wg), Y(_k))))), (r = x(r)));
                for (var i = r.next(); !i.done; i = r.next()) {
                  i = i.value;
                  var s = mg(i.includeKeys || [], n);
                  (s.includes(WT) || s.push(WT), (s = yg(t, s)));
                  var o = i.events || [],
                    u = s.e,
                    l = s.sta;
                  (u &&
                    (!Pk.includes(u) ||
                      !(u !== "ps" || (l && Dk.includes(l))) ||
                      (o && o.length > 0 && !o.includes(u)))) ||
                    BT(e, s, i);
                }
              }
            }
            function zo(e, t, n) {
              if (e.g.enabled) {
                n = vg(e, n, KT);
                var r = jT({ mode: KT, useHeaders: e.g.useHeaders, includeKeys: e.g.includeKeys || [] });
                (e.o[r] || (e.o[r] = { request: 1, response: 1 }),
                  (n.sn = e.o[r].request++),
                  (r = e.g.includeKeys || []));
                var i = e.g.version == Tg ? Array.from(new Set([].concat(Y(wg), Y(Rk)))) : XT;
                ((r = mg(r, i)), (n = yg(n, r)), wk(e, n, t, e.g.useHeaders));
              }
            }
            function BT(e, t, n, r) {
              var i = jr(),
                s = n.url;
              if (n.useHeaders) {
                if (((t = GT(t)), !Object.keys(t).length)) return;
                (r && Object.assign(r.headers, t), (r = Ut([s], i)), Object.assign(r.headers, t));
              } else {
                if (((t = ku(t)), !t)) return;
                ((s = ud(s, t)), r && (r.uri = s), (r = Ut([s], i)));
              }
              e.j.Yb().request(9, r);
            }
            function wk(e, t, n, r) {
              if (r) {
                if (((t = GT(t)), !Object.keys(t).length)) return;
                Object.assign(n.headers, t);
              } else {
                var i = ku(t);
                if (!i) return;
                n.uris = n.uris.map(function (s) {
                  return ud(s, i);
                });
              }
              pg(e).length > 0 || !e.m.has(n) || e.m.delete(n);
            }
            function mg(e, t) {
              if (!e || e.length === 0) return t;
              for (var n = x(e), r = n.next(); !r.done; r = n.next()) t.includes(r.value);
              return (e = e.filter(function (i) {
                return t.includes(i);
              }));
            }
            function yg(e, t) {
              return Object.keys(e).reduce(function (n, r) {
                return (t.includes(r) && (n[r] = e[r]), n);
              }, {});
            }
            function Sk(e) {
              if (e.type === 0) return Ik;
              if ((e = e.stream)) {
                var t = e.type;
                if (t == "video") return e.codecs && e.codecs.includes(",") ? dd : cd;
                if (t == "audio") return ld;
                if (t == "text") return e.mimeType === "application/mp4" ? fd : xg;
              }
            }
            function jT(e) {
              var t = Object.keys(e)
                .sort()
                .reduce(function (n, r) {
                  return (r !== "enabled" && (n[r] = e[r]), n);
                }, {});
              return JSON.stringify(t);
            }
            function Ak(e, t) {
              if (((t = e.j.Gc()[t]), !t.length)) return NaN;
              var n = e.h ? e.h.currentTime : 0;
              return (e = t.find(function (r) {
                return r.start <= n && r.end >= n;
              }))
                ? (e.end - n) * 1e3
                : NaN;
            }
            function VT(e, t) {
              if (((t = e.j.Gc()[t]), !t.length)) return 0;
              var n = e.h ? e.h.currentTime : 0;
              return (e = t.find(function (r) {
                return r.start <= n && r.end >= n;
              }))
                ? (e.end - n) * 1e3
                : 0;
            }
            function Ek(e, t) {
              var n = e.j.qc();
              if (!n.length) return NaN;
              ((e = n[0]), (n = x(n)));
              for (var r = n.next(); !r.done; r = n.next())
                ((r = r.value), r.type === "variant" && r.bandwidth > e.bandwidth && (e = r));
              switch (t) {
                case cd:
                  return e.videoBandwidth || NaN;
                case ld:
                  return e.audioBandwidth || NaN;
                default:
                  return e.bandwidth;
              }
            }
            function HT(e, t, n) {
              var r = t.segment,
                i = 0;
              (r && (i = r.endTime - r.startTime),
                (i = { d: i * 1e3, st: e.j.W() ? Mk : Ck }),
                (i.ot = Sk(t)));
              var s = i.ot === cd || i.ot === ld || i.ot === dd || i.ot === fd;
              if ((t = t.stream)) {
                var o = e.j.Ob();
                if (s && ((i.bl = Ak(e, t.type)), i.ot !== fd)) {
                  var u = VT(e, t.type);
                  i.dl = o ? u / Math.abs(o) : u;
                }
                if ((t.bandwidth && (i.br = t.bandwidth / 1e3), t.segmentIndex && r)) {
                  if ((o = t.segmentIndex.Xb(r.endTime, !0, o < 0)) && (o = o.next().value) && o != r) {
                    if (n && !Ki(r.P(), o.P())) {
                      var l = o.P()[0];
                      u = new URL(l);
                      var p = new URL(n);
                      if (u.origin !== p.origin) n = l;
                      else {
                        ((n = u.pathname.split("/").slice(1)),
                          (l = p.pathname.split("/").slice(1, -1)),
                          (p = Math.min(n.length, l.length)));
                        for (var m = 0; m < p && n[m] === l[m]; m++) (n.shift(), l.shift());
                        for (; l.length; ) (l.shift(), n.unshift(".."));
                        n = n.join("/") + u.search + u.hash;
                      }
                      i.nor = n;
                    }
                    (!o.startByte && !o.endByte) ||
                      (r.startByte == o.startByte && r.endByte == o.endByte) ||
                      ((n = o.startByte + "-"), o.endByte && (n += o.endByte), (i.nrr = n));
                  }
                  ((o = e.j.Ob() || 1),
                    (n = VT(e, t.type) || 500),
                    (r = (t = t.bandwidth)
                      ? ((t * (r.endTime - r.startTime)) / 1e3 / (n / o / 1e3)) * e.g.rtpSafetyFactor
                      : NaN),
                    isNaN(r) || (i.rtp = r));
                }
              }
              return (s && i.ot !== fd && (i.tb = Ek(e, i.ot) / 1e3), i);
            }
            function vg(e, t, n) {
              (Object.assign(t, gg(e)), (t.pr = e.j.Ob()));
              var r = t.ot === cd || t.ot === dd;
              return (
                e.I && r && ((t.bs = !0), (t.su = !0), (e.I = !1)),
                t.su == null && (t.su = e.J),
                e.j.W() && ((r = y1(e.j)), (t.ltc = r || void 0)),
                document.hidden && (t.bg = !0),
                (r = e.C && e.B ? e.C - (e.H || e.B) : void 0),
                r == null || e.K[n] || ((t.msd = r), (e.K[n] = !0)),
                t
              );
            }
            function ku(e) {
              function t(y) {
                return n(y / 100) * 100;
              }
              function n(y) {
                return Math.round(y);
              }
              function r(y) {
                return !Number.isNaN(y) && y != null && y !== "" && y !== !1;
              }
              var i = [],
                s = {
                  br: n,
                  d: n,
                  bl: t,
                  dl: t,
                  mtp: t,
                  nor: function (y) {
                    return encodeURIComponent(y);
                  },
                  rtp: t,
                  tb: n,
                  ttfb: n,
                  ttlb: n,
                },
                o = Object.keys(e || {}).sort();
              o = x(o);
              for (var u = o.next(); !u.done; u = o.next()) {
                u = u.value;
                var l = e[u];
                if (r(l) && (u !== "v" || l !== 1) && (u != "pr" || l !== 1)) {
                  var p = s[u];
                  (p && (l = p(l)), (p = typeof l));
                  var m = void 0;
                  ((m =
                    p === "string" && u !== "ot" && u !== "sf" && u !== "st"
                      ? u + "=" + JSON.stringify(l)
                      : p === "boolean"
                        ? u
                        : p === "symbol"
                          ? u + "=" + l.description
                          : u + "=" + l),
                    i.push(m));
                }
              }
              return i.join(",");
            }
            function GT(e) {
              var t = Object.keys(e),
                n = {},
                r = ["Object", "Request", "Session", "Status"],
                i = [{}, {}, {}, {}],
                s = {
                  br: 0,
                  d: 0,
                  ot: 0,
                  tb: 0,
                  url: 0,
                  bl: 1,
                  dl: 1,
                  mtp: 1,
                  nor: 1,
                  nrr: 1,
                  su: 1,
                  ltc: 1,
                  ttfb: 1,
                  ttlb: 1,
                  ts: 1,
                  rc: 1,
                  cmsdd: 1,
                  cmsds: 1,
                  sn: 1,
                  cid: 2,
                  pr: 2,
                  sf: 2,
                  sid: 2,
                  st: 2,
                  v: 2,
                  msd: 2,
                  bs: 3,
                  rtp: 3,
                  bg: 3,
                };
              t = x(t);
              for (var o = t.next(); !o.done; o = t.next())
                ((o = o.value), (i[s[o] != null ? s[o] : 1][o] = e[o]));
              for (e = 0; e < i.length; e++) (s = ku(i[e])) && (n["CMCD-" + r[e]] = s);
              return n;
            }
            function ud(e, t) {
              return !t || e.includes("offline:") ? e : ((e = new Dt(e)), e.g.set("CMCD", t), e.toString());
            }
            var zT = "m",
              ld = "a",
              cd = "v",
              dd = "av",
              Ik = "i",
              xg = "c",
              fd = "tt",
              Tg = 2,
              Ck = "v",
              Mk = "l",
              hd = "d",
              pd = "ld",
              gd = "h",
              md = "lh";
            de("shaka.util.CmcdManager.StreamingFormat", {
              DASH: hd,
              Sl: pd,
              HLS: gd,
              Tl: md,
              im: "s",
              OTHER: "o",
            });
            var XT = "br bl bs cid d dl mtp nor nrr ot pr rtp sf sid st su tb v".split(" "),
              wg =
                "br ab bl tbl bs cdn cid ltc mtp pr sf sid bg sta st ts tpb tb lb tab lab pt ec msd v sn".split(
                  " ",
                ),
              Rk =
                "ab bl tbl bs cdn cid d dl ltc mtp nor ot pr rtp sf sid bg sta st su ts tpb tb lb tab lab pt ec msd v".split(
                  " ",
                ),
              kk = "d dl nor ot rtp rc su ttfb ttfbb ttlb url cmsdd cmsds".split(" "),
              _k = ["e", "sta"],
              Pk = "ps e t c b m um pe pc".split(" "),
              Dk = "spawkrfeqd".split(""),
              Lk = 10,
              WT = "ts",
              bk = "t",
              KT = "request",
              $T = "response",
              YT = "event";
            function Mr(e) {
              ((this.h = e), (this.g = null));
            }
            ((h = Mr.prototype),
              (h.configure = function (e) {
                this.h = e;
              }),
              (h.ji = function () {
                return this.h.enabled && this.h.applyMaximumSuggestedBitrate && this.g && this.g.has(QT)
                  ? this.g.get(QT) * 1e3
                  : null;
              }),
              (h.gi = function () {
                return this.h.enabled && this.g && this.g.has(JT) ? this.g.get(JT) * 1e3 : null;
              }),
              (h.Xj = function () {
                return this.h.enabled && this.g && this.g.has(ZT) ? this.g.get(ZT) : null;
              }),
              (h.Yj = function () {
                return this.h.enabled && this.g && this.g.has(e1) ? this.g.get(e1) : null;
              }),
              (h.getBandwidthEstimate = function (e) {
                var t = this.gi();
                if (!t) return e;
                var n = this.h.estimatedThroughputWeightRatio;
                return n > 0 && n <= 1 ? e * (1 - n) + t * n : e;
              }));
            function qT(e) {
              return e
                ? e.toLowerCase() === "false"
                  ? !1
                  : /^[-0-9]/.test(e)
                    ? parseInt(e, 10)
                    : e.replace(/["]+/g, "")
                : !0;
            }
            (de("shaka.util.CmsdManager", Mr),
              (Mr.prototype.getBandwidthEstimate = Mr.prototype.getBandwidthEstimate),
              (Mr.prototype.getRoundTripTime = Mr.prototype.Yj),
              (Mr.prototype.getResponseDelay = Mr.prototype.Xj),
              (Mr.prototype.getEstimatedThroughput = Mr.prototype.gi),
              (Mr.prototype.getMaxBitrate = Mr.prototype.ji));
            var JT = "etp",
              QT = "mb",
              ZT = "rd",
              e1 = "rtt";
            function t1() {
              ((this.g = null), (this.h = []));
            }
            function Sg(e, t) {
              return F(function (n) {
                if (n.g == 1)
                  return e.g
                    ? E(
                        n,
                        new Promise(function (r) {
                          return e.h.push(r);
                        }),
                        2,
                      )
                    : n.A(2);
                ((e.g = t), re(n));
              });
            }
            t1.prototype.release = function () {
              this.h.length > 0 ? this.h.shift()() : (this.g = null);
            };
            function n1(e, t, n) {
              return (
                (n = n === void 0 ? Number.EPSILON : n),
                e === t
                  ? !0
                  : ((e = Math.abs(e - t)),
                    e <= n ? !0 : n !== Number.EPSILON ? Math.abs(e - n) <= Number.EPSILON : !1)
              );
            }
            function ee(e, t, n) {
              ((t = t === void 0 ? null : t), ut.call(this));
              var r = this;
              ((this.m = Ad),
                (this.h = null),
                (this.Be = t),
                (this.$ = !1),
                (this.Le = new tt()),
                (this.Ce = new tt()),
                (this.j = new tt()),
                (this.dc = new tt()),
                (this.Gd = new tt()),
                (this.G = this.H = this.F = this.N = null),
                (this.Me = 0),
                (this.ba = new t1()),
                (this.O =
                  this.Fa =
                  this.X =
                  this.i =
                  this.zc =
                  this.I =
                  this.l =
                  this.ye =
                  this.T =
                  this.Ph =
                  this.va =
                  this.K =
                  this.kb =
                  this.za =
                  this.Ae =
                  this.R =
                  this.Ta =
                  this.M =
                  this.ac =
                    null),
                (this.Ua = !1),
                (this.Ge = this.o = null),
                (this.Fe = 1e9),
                (this.Ke = []),
                (this.yc = new Map()),
                (this.ob = []),
                (this.ag = -1),
                (this.g = ei(this)),
                (this.dg = ST()),
                (this.V = null),
                (this.Ne = -1),
                (this.cc = null),
                (this.ya = { width: 1 / 0, height: 1 / 0 }),
                (this.Ee = new vp(this.g, this.ya, null)),
                (this.Ie = []),
                (this.B = null),
                (this.J = this.g.adaptationSetCriteriaFactory()),
                this.J.configure({
                  language: this.g.preferredAudioLanguage,
                  role: this.g.preferredAudioRole,
                  videoRole: this.g.preferredVideoRole,
                  channelCount: 0,
                  hdrLevel: this.g.preferredVideoHdrLevel,
                  spatialAudio: this.g.preferSpatialAudio,
                  videoLayout: this.g.preferredVideoLayout,
                  audioLabel: this.g.preferredAudioLabel,
                  videoLabel: this.g.preferredVideoLabel,
                  codecSwitchingStrategy: this.g.mediaSource.codecSwitchingStrategy,
                  audioCodec: "",
                  activeAudioCodec: "",
                  activeAudioChannelCount: 0,
                  preferredAudioCodecs: this.g.preferredAudioCodecs,
                  preferredAudioChannelCount: this.g.preferredAudioChannelCount,
                }),
                (this.Kd = this.g.preferredTextLanguage),
                (this.Od = this.g.preferredTextRole),
                (this.Nd = this.g.preferForcedSubs),
                (this.De = []),
                n && n(this),
                (this.K = new hg(this, this.g.cmcd)),
                (this.va = new Mr(this.g.cmsd)),
                (this.N = l1(this)),
                (this.ma = this.oa = this.Da = this.C = null),
                (this.fg = !1),
                (this.cg = []),
                (this.eg = new He(function () {
                  return F(function (i) {
                    if (i.g == 1) return r.oa ? E(i, r.Vb(r.ma, !0), 3) : i.A(0);
                    if (i.g != 4) return E(i, r.load(r.oa), 4);
                    (r.fg ? r.ma.pause() : r.ma.play(), (r.oa = null), (r.fg = !1), re(i));
                  });
                })),
                Ed &&
                  ((this.C = Ed()),
                  this.C.configure(this.g.ads),
                  this.Gd.D(this.C, "ad-content-pause-requested", function (i) {
                    var s, o;
                    return F(function (u) {
                      if (u.g == 1)
                        return (
                          r.eg.stop(),
                          r.oa
                            ? u.A(0)
                            : ((r.ma = r.h),
                              (r.fg = r.ge()),
                              (s = i.saveLivePosition || !1),
                              (o = !0),
                              r.W() && (o = s),
                              E(u, r.$h(!0, o), 3))
                        );
                      ((r.oa = u.h), re(u));
                    });
                  }),
                  this.Gd.D(this.C, "ad-content-resume-requested", function (i) {
                    if (((i = i.offset || 0), r.oa)) {
                      var s = r.oa;
                      s.o &&
                        i &&
                        (typeof s.o == "number" ? (s.o += i) : s.o.setTime(s.o.getTime() + i * 1e3));
                    }
                    r.eg.ka(0.1);
                  }),
                  this.Gd.D(this.C, "ad-content-attach-requested", function () {
                    return F(function (i) {
                      if (i.g == 1) return r.h || !r.ma ? i.A(0) : E(i, r.Vb(r.ma, !0), 3);
                      ((r.ma = null), re(i));
                    });
                  })),
                Id && ((this.Da = Id(this)), this.Da.configure(this.g.queue)),
                this.Le.D(g, "online", function () {
                  (kg(r), r.kh());
                }),
                (this.He = new He(function () {
                  for (
                    var i = Date.now() / 1e3, s = !1, o = !0, u = x(r.i.variants), l = u.next();
                    !l.done;
                    l = u.next()
                  )
                    ((l = l.value),
                      l.disabledUntilTime > 0 &&
                        l.disabledUntilTime <= i &&
                        ((l.disabledUntilTime = 0), (s = !0)),
                      l.disabledUntilTime > 0 && (o = !1));
                  (o && r.He.stop(), s && cs(r, !1, void 0, !1, !1));
                })),
                (this.eb = null),
                e &&
                  (Je(
                    "Player w/ mediaElement",
                    "Please migrate from initializing Player with a mediaElement; use the attach method instead.",
                  ),
                  this.Vb(e, !0)),
                (this.u = null));
            }
            q(ee, ut);
            function yd(e) {
              e.T != null && (Qv(e.T), e.T.release(), (e.T = null));
            }
            function Nk(e, t, n) {
              n || t.lcevc.enabled
                ? (yd(e), e.T == null && ((e.T = new Ha(e.h, e.Ph, t.lcevc, n)), e.H && (e.H.C = e.T)))
                : yd(e);
            }
            function ft(e, t) {
              return new Ae(e, t);
            }
            ((h = ee.prototype),
              (h.destroy = function () {
                var e = this,
                  t;
                return F(function (n) {
                  switch (n.g) {
                    case 1:
                      return e.m == Vr ? n.return() : (yd(e), (t = e.detach()), (e.m = Vr), E(n, t, 2));
                    case 2:
                      return E(n, e.rg(), 3);
                    case 3:
                      if (
                        (e.Le && (e.Le.release(), (e.Le = null)),
                        e.Ce && (e.Ce.release(), (e.Ce = null)),
                        e.j && (e.j.release(), (e.j = null)),
                        e.dc && (e.dc.release(), (e.dc = null)),
                        e.Gd && (e.Gd.release(), (e.Gd = null)),
                        (e.Ge = null),
                        (e.g = null),
                        (e.B = null),
                        (e.Be = null),
                        (e.K = null),
                        (e.va = null),
                        !e.N)
                      ) {
                        n.A(4);
                        break;
                      }
                      return E(n, e.N.destroy(), 5);
                    case 5:
                      e.N = null;
                    case 4:
                      (e.o && (e.o.release(), (e.o = null)),
                        e.Da && (e.Da.destroy(), (e.Da = null)),
                        ut.prototype.release.call(e),
                        re(n));
                  }
                });
              }));
            function r1(e, t) {
              D1.set(e, t);
            }
            function Xo(e, t) {
              e.dispatchEvent(ft("onstatechange", new Map().set("state", t)));
            }
            ((h.Vb = function (e, t) {
              t = t === void 0 ? !0 : t;
              var n = this,
                r,
                i,
                s;
              return F(function (o) {
                switch (o.g) {
                  case 1:
                    if (n.m == Vr) throw new H(2, 7, 7e3);
                    if (((r = n.h && n.h == e), !n.h || n.h == e)) {
                      o.A(2);
                      break;
                    }
                    return E(o, n.detach(), 2);
                  case 2:
                    return E(o, Ag(n, "attach"), 4);
                  case 4:
                    if (o.h) return o.return();
                    if (
                      (te(o, 5, 6),
                      r ||
                        (Xo(n, "attach"),
                        (i = function () {
                          var u = _g(n, !1);
                          u && Wo(n, u);
                        }),
                        n.Ce.D(e, "error", i),
                        (n.h = e),
                        n.K && n.K.setMediaElement(e)),
                      je(),
                      !t || !ui() || n.H)
                    ) {
                      o.A(6);
                      break;
                    }
                    return E(o, Eg(n), 6);
                  case 6:
                    (ve(o), n.ba.release(), Oe(o, 0));
                    break;
                  case 5:
                    return ((s = oe(o)), E(o, n.detach(), 10));
                  case 10:
                    throw s;
                }
              });
            }),
              (h.qj = function (e) {
                this.Ph = e;
              }),
              (h.detach = function (e) {
                e = e === void 0 ? !1 : e;
                var t = this;
                return F(function (n) {
                  if (n.g == 1) {
                    if (t.m == Vr) throw new H(2, 7, 7e3);
                    return E(n, t.Cc(!1, e), 2);
                  }
                  if (n.g != 3) return E(n, Ag(t, "detach"), 3);
                  if (n.h) return n.return();
                  try {
                    (t.h && (t.Ce.Qa(), (t.h = null)), Xo(t, "detach"), t.C && !e && t.C.release());
                  } finally {
                    t.ba.release();
                  }
                  re(n);
                });
              }));
            function Ag(e, t) {
              var n;
              return F(function (r) {
                return r.g == 1
                  ? ((n = ++e.Me), E(r, Sg(e.ba, t), 2))
                  : n != e.Me
                    ? (e.ba.release(), r.return(!0))
                    : r.return(!1);
              });
            }
            ((h.Cc = function (e, t) {
              ((e = e === void 0 ? !0 : e), (t = t === void 0 ? !1 : t));
              var n = this,
                r,
                i,
                s,
                o,
                u,
                l,
                p,
                m,
                y,
                v,
                w,
                A,
                I,
                C,
                k,
                R;
              return F(function (L) {
                switch (L.g) {
                  case 1:
                    return (n.m != Vr && (n.m = Ad), E(L, Ag(n, "unload"), 2));
                  case 2:
                    return L.h
                      ? L.return()
                      : (ge(L, 3),
                        (n.Ua = !1),
                        Xo(n, "unload"),
                        yd(n),
                        (r = n.De.map(function (U) {
                          return U();
                        })),
                        (n.De = []),
                        E(L, Promise.all(r), 5));
                  case 5:
                    if (
                      (n.dispatchEvent(ft("unloading")),
                      n.Ae && (n.Ae.release(), (n.Ae = null)),
                      n.za && (n.za.release(), (n.za = null)),
                      n.kb && (n.kb.release(), (n.kb = null)),
                      n.h && (n.j.Qa(), n.dc.Qa()),
                      n.He.stop(),
                      n.ac && (n.ac.release(), (n.ac = null)),
                      n.Ta && (n.Ta.stop(), (n.Ta = null)),
                      !n.I)
                    ) {
                      L.A(6);
                      break;
                    }
                    return E(L, n.I.stop(), 7);
                  case 7:
                    ((n.I = null), (n.zc = null));
                  case 6:
                    if ((n.o && n.o.stop(), !n.l)) {
                      L.A(8);
                      break;
                    }
                    return E(L, n.l.destroy(), 9);
                  case 9:
                    n.l = null;
                  case 8:
                    if (
                      (n.M && (n.M.release(), (n.M = null)),
                      n.G && (n.G.release(), (n.G = null)),
                      g.shakaMediaKeysPolyfill !== "webkit" || !n.F)
                    ) {
                      L.A(10);
                      break;
                    }
                    return E(L, n.F.destroy(), 11);
                  case 11:
                    n.F = null;
                  case 10:
                    if (!n.H) {
                      L.A(12);
                      break;
                    }
                    return E(L, n.H.destroy(), 13);
                  case 13:
                    n.H = null;
                  case 12:
                    if (
                      (n.C && !t && n.C.onAssetUnload(),
                      n.oa && !t && (n.oa.destroy(), (n.oa = null)),
                      t || n.eg.stop(),
                      n.K && gk(n.K),
                      n.va && (n.va.g = null),
                      !n.u)
                    ) {
                      L.A(14);
                      break;
                    }
                    return E(L, n.u.destroy(), 15);
                  case 15:
                    n.u = null;
                  case 14:
                    if (((n.$ = !1), n.h)) {
                      for (i = x(n.cg), s = i.next(); !s.done; s = i.next())
                        ((o = s.value), o.src.startsWith("blob:") && URL.revokeObjectURL(o.src), o.remove());
                      ((n.cg = []), Uc(n.h) && n.h.load());
                    }
                    if (!n.F) {
                      L.A(16);
                      break;
                    }
                    return E(L, n.F.destroy(), 17);
                  case 17:
                    n.F = null;
                  case 16:
                    if (
                      (n.eb && n.X != n.eb.rd() && (n.eb.l || n.eb.destroy(), (n.eb = null)),
                      (n.X = null),
                      (n.Fa = null),
                      (n.R = null),
                      n.i)
                    ) {
                      for (u = x(n.i.variants), l = u.next(); !l.done; l = u.next())
                        for (p = l.value, m = x([p.audio, p.video]), y = m.next(); !y.done; y = m.next())
                          (v = y.value) && v.segmentIndex && v.segmentIndex.release();
                      for (w = x(n.i.textStreams), A = w.next(); !A.done; A = w.next())
                        ((I = A.value), I.segmentIndex && I.segmentIndex.release());
                    }
                    for (
                      n.g && n.g.streaming.clearDecodingCache && (Sc.clear(), fo.clear()),
                        n.i = null,
                        n.B = new ad(),
                        n.Oh = null,
                        n.cc = null,
                        n.V = null,
                        n.Ne = -1,
                        n.Ke = [],
                        C = x(n.yc.values()),
                        k = C.next();
                      !k.done;
                      k = C.next()
                    )
                      ((R = k.value), R.stop());
                    (n.yc.clear(), (n.ob = []), (n.ag = -1), n.N && n.N.Wh(), _u(n));
                  case 3:
                    (ve(L), n.ba.release(), Oe(L, 4));
                    break;
                  case 4:
                    if ((je(), e && ui() && !n.H && n.h)) return E(L, Eg(n), 0);
                    L.A(0);
                }
              });
            }),
              (h.ql = function (e) {
                this.O = e;
              }),
              (h.load = function (e, t, n) {
                t = t === void 0 ? null : t;
                var r = this,
                  i,
                  s,
                  o,
                  u,
                  l,
                  p,
                  m,
                  y,
                  v,
                  w,
                  A,
                  I,
                  C,
                  k;
                return F(function (R) {
                  switch (R.g) {
                    case 1:
                      if (r.m == Vr) throw new H(2, 7, 7e3);
                      if (r.h || !r.ma) {
                        R.A(2);
                        break;
                      }
                      return E(R, r.Vb(r.ma, !0), 3);
                    case 3:
                      r.ma = null;
                    case 2:
                      if (((i = null), (s = ""), e instanceof Cr)) {
                        if (e.l) throw new H(2, 7, 7006);
                        ((i = e), (s = i.rd() || ""));
                      } else s = e || "";
                      return E(R, Sg(r.ba, "load"), 4);
                    case 4:
                      if ((r.ba.release(), !r.h)) throw new H(2, 7, 7002);
                      if (!r.X) {
                        R.A(5);
                        break;
                      }
                      return ((r.X = s), E(R, r.Cc(!1), 5));
                    case 5:
                      if (
                        ((o = ++r.Me),
                        (u = function () {
                          return F(function (L) {
                            if (L.g == 1) return r.Me == o ? L.A(0) : i ? E(L, i.destroy(), 3) : L.A(3);
                            throw new H(2, 7, 7e3);
                          });
                        }),
                        (l = function (L, U) {
                          return F(function (G) {
                            switch (G.g) {
                              case 1:
                                return (ge(G, 2), E(G, Sg(r.ba, U), 4));
                              case 4:
                                return E(G, u(), 5);
                              case 5:
                                return E(G, L(), 6);
                              case 6:
                                return E(G, u(), 7);
                              case 7:
                                i && r.g && (i.g = r.g);
                              case 2:
                                (ve(G), r.ba.release(), Oe(G, 0));
                            }
                          });
                        }),
                        te(R, 7, 8),
                        t == null && i && (t = i.getStartTime()),
                        (r.O = t),
                        (r.Ua = !1),
                        r.dispatchEvent(ft("loading")),
                        i)
                      ) {
                        ((n = i.V), R.A(10));
                        break;
                      }
                      if (n) {
                        R.A(10);
                        break;
                      }
                      return E(
                        R,
                        l(function () {
                          return F(function (L) {
                            if (L.g == 1) return E(L, a1(r, s), 2);
                            ((n = L.h), re(L));
                          });
                        }, "guessMimeType_"),
                        10,
                      );
                    case 10:
                      if (((p = !!i), i)) {
                        (IT(i, r), (r.B = i.getStats()), R.A(13));
                        break;
                      }
                      return E(R, s1(r, s, t, n, !0, r.g), 14);
                    case 14:
                      (i = R.h)
                        ? ((i.F = !1), IT(i, r), (r.B = i.getStats()), i.start(), i.B.catch(function () {}))
                        : (r.B = new ad());
                    case 13:
                      return (
                        (m = !i),
                        (y = Date.now() / 1e3),
                        (r.B = i ? i.getStats() : new ad()),
                        (r.X = s),
                        (r.Fa = n || null),
                        _u(r),
                        (v = function () {
                          var L = r.h ? r.h.buffered : null;
                          return { start: Ex(L) || 0, end: Oc(L) || 0 };
                        }),
                        (r.za = new yu(v)),
                        r.za.addEventListener("regionadd", function (L) {
                          Ig(r, L.region, "metadataadded");
                        }),
                        m
                          ? E(
                              R,
                              l(function () {
                                return F(function (L) {
                                  return E(L, Bk(r, n), 0);
                                });
                              }, "initializeSrcEqualsDrmInner_"),
                              25,
                            )
                          : ((r.kb = new yu(v)),
                            E(
                              R,
                              l(function () {
                                return F(function (L) {
                                  if (L.g == 1) return E(L, Promise.race([i.ma, i.B]), 2);
                                  r.zc = i.H;
                                  var U = i;
                                  ((U.oa = !0), (r.I = U.m), (r.i = i.Lg()), re(L));
                                });
                              }, "waitForFinish"),
                              17,
                            ))
                      );
                    case 17:
                      if (r.H) {
                        R.A(18);
                        break;
                      }
                      return E(
                        R,
                        l(function () {
                          return F(function (L) {
                            return E(L, Eg(r), 0);
                          });
                        }, "initializeMediaSourceEngineInner_"),
                        18,
                      );
                    case 18:
                      return (
                        r.i &&
                          r.i.textStreams.length &&
                          (r.u.enableTextDisplayer
                            ? r.u.enableTextDisplayer()
                            : Je(
                                "Text displayer w/ enableTextDisplayer",
                                'Text displayer should have a "enableTextDisplayer" method!',
                              )),
                        E(
                          R,
                          l(function () {
                            return F(function (L) {
                              return E(L, i.B, 0);
                            });
                          }, "waitForFinish"),
                          20,
                        )
                      );
                    case 20:
                      if (
                        ((r.g = i.getConfiguration()),
                        (r.Ee = i.G),
                        r.I && r.I.setMediaElement && r.h && r.I.setMediaElement(r.h),
                        (r.Ae = ZR(i)),
                        (r.ye = i.Fa),
                        (w = i.C) && (r.J = w),
                        p &&
                          r.h &&
                          r.h.nodeName === "AUDIO" &&
                          (Ok(r), r.configure("manifest.disableVideo", !0)),
                        i.j)
                      ) {
                        R.A(21);
                        break;
                      }
                      return E(
                        R,
                        l(function () {
                          return F(function (L) {
                            return E(L, CT(i, r.h), 0);
                          });
                        }, "drmEngine_.init"),
                        21,
                      );
                    case 21:
                      return (
                        (r.F = ek(i)),
                        E(
                          R,
                          l(function () {
                            return F(function (L) {
                              return E(L, r.F.Vb(r.h), 0);
                            });
                          }, "drmEngine_.attach"),
                          23,
                        )
                      );
                    case 23:
                      return (
                        (A = r.g.abrFactory),
                        (r.o && r.Ge == A) ||
                          ((r.Ge = A),
                          r.o && r.o.release(),
                          (r.o = A()),
                          typeof r.o.setMediaElement != "function" &&
                            (Je(
                              "AbrManager w/o setMediaElement",
                              "Please use an AbrManager with setMediaElement function.",
                            ),
                            (r.o.setMediaElement = function () {})),
                          typeof r.o.setCmsdManager != "function" &&
                            (Je(
                              "AbrManager w/o setCmsdManager",
                              "Please use an AbrManager with setCmsdManager function.",
                            ),
                            (r.o.setCmsdManager = function () {})),
                          typeof r.o.trySuggestStreams != "function" &&
                            (Je(
                              "AbrManager w/o trySuggestStreams",
                              "Please use an AbrManager with trySuggestStreams function.",
                            ),
                            (r.o.trySuggestStreams = function () {})),
                          r.o.configure(r.g.abr)),
                        (I = tk(i)),
                        (C = i.i),
                        E(
                          R,
                          l(function () {
                            return F(function (L) {
                              return E(L, Fk(r, y, C, I), 0);
                            });
                          }, "loadInner_"),
                          24,
                        )
                      );
                    case 24:
                      (QR(i), r.Fa && je().gj() && pc(r.Fa) && GM(r.H, r.X, r.Fa), R.A(16));
                      break;
                    case 25:
                      return E(
                        R,
                        l(function () {
                          return F(function (L) {
                            return E(L, jk(r, y, n), 0);
                          });
                        }, "srcEqualsInner_"),
                        16,
                      );
                    case 16:
                      r.dispatchEvent(ft("loaded"));
                    case 8:
                      if ((ve(R), !i)) {
                        R.A(27);
                        break;
                      }
                      return E(R, i.destroy(), 27);
                    case 27:
                      ((r.eb = null), Oe(R, 0));
                      break;
                    case 7:
                      if (((k = oe(R)), !k || k.code == 7e3)) {
                        R.A(29);
                        break;
                      }
                      return E(R, r.Cc(!1), 29);
                    case 29:
                      throw k;
                  }
                });
              }));
            function Ok(e) {
              for (var t = x(e.i.variants), n = t.next(); !n.done; n = t.next())
                ((n = n.value),
                  n.video && (n.video.closeSegmentIndex(), (n.video = null)),
                  (n.bandwidth = n.audio && n.audio.bandwidth ? n.audio.bandwidth : 0));
              e.i.variants = e.i.variants.filter(function (r) {
                return r.audio;
              });
            }
            ((h.jj = function (e, t, n) {
              ((e = e === void 0 ? !0 : e), (t = t === void 0 ? !1 : t), (n = n === void 0 ? !1 : n));
              var r = this,
                i;
              return F(function (s) {
                return s.g == 1
                  ? E(s, i1(r, n), 2)
                  : s.g != 3
                    ? ((i = s.h), E(s, r.Cc(e, t), 3))
                    : s.return(i);
              });
            }),
              (h.$h = function (e, t) {
                ((e = e === void 0 ? !1 : e), (t = t === void 0 ? !1 : t));
                var n = this,
                  r;
                return F(function (i) {
                  return i.g == 1
                    ? E(i, i1(n, t), 2)
                    : i.g != 3
                      ? ((r = i.h), E(i, n.detach(e), 3))
                      : i.return(r);
                });
              }));
            function i1(e, t) {
              t = t === void 0 ? !1 : t;
              var n, r, i;
              return F(function (s) {
                if (s.g == 1)
                  return (
                    (n = null),
                    e.i && e.I && e.zc && e.X && e.g
                      ? ((r = e.h.currentTime), t || (r = null), E(s, o1(e, e.X, r, e.Fa, e.g, !0, !1), 3))
                      : s.A(2)
                  );
                if (s.g != 2) {
                  ((n = s.h),
                    e.Ie.push(n),
                    e.I && e.I.setMediaElement && e.I.setMediaElement(null),
                    (i = e.l ? e.l.o : null) && (n.i = i));
                  var o = n,
                    u = e.I,
                    l = e.zc;
                  ((o.h = e.i),
                    (o.m = u),
                    (o.H = l),
                    (n.C = e.J),
                    n.start(),
                    (e.i = null),
                    (e.I = null),
                    (e.zc = null),
                    (e.o = null),
                    (e.Ge = null));
                }
                return s.return(n);
              });
            }
            ((h.preload = function (e, t, n, r) {
              t = t === void 0 ? null : t;
              var i = this,
                s,
                o;
              return F(function (u) {
                return u.g == 1
                  ? ((s = ei(i)), Pi(s, r || i.g, ei(i)), E(u, s1(i, e, t, n, !1, s), 2))
                  : ((o = u.h) ? o.start() : Wo(i, new H(2, 7, 7005)), u.return(o));
              });
            }),
              (h.rg = function () {
                var e = this,
                  t,
                  n,
                  r,
                  i;
                return F(function (s) {
                  for (t = [], n = x(e.Ie), r = n.next(); !r.done; r = n.next())
                    ((i = r.value), i.l || t.push(i.destroy()));
                  return ((e.Ie = []), E(s, Promise.all(t), 0));
                });
              }));
            function s1(e, t, n, r, i, s) {
              i = i === void 0 ? !1 : i;
              var o, u, l;
              return F(function (p) {
                return p.g == 1
                  ? r
                    ? p.A(2)
                    : E(p, a1(e, t), 3)
                  : (p.g != 2 && (r = p.h),
                    Uk(e, r)
                      ? p.return(null)
                      : ((o = s || e.g),
                        (u = !1),
                        i && e.h && e.h.nodeName === "AUDIO" && (u = !0),
                        (l = o1(e, t, n, r || null, o, !i, u)),
                        (l = i
                          ? l.then(function (m) {
                              return ((m.F = !1), m);
                            })
                          : l.then(function (m) {
                              return (e.Ie.push(m), m);
                            })),
                        p.return(l)));
              });
            }
            function o1(e, t, n, r, i, s, o) {
              ((s = s === void 0 ? !0 : s), (o = o === void 0 ? !1 : o));
              var u, l, p, m, y, v, w, A, I, C, k, R, L, U, G;
              return F(function (b) {
                return b.g == 1
                  ? ((u = null),
                    (l = Fr(i)),
                    o && (l.manifest.disableVideo = !0),
                    (p = function () {
                      return u.R && u.l ? null : u;
                    }),
                    (m = function () {
                      return p() ? p().getConfiguration() : e.g;
                    }),
                    e.ya.width != 1 / 0 || e.ya.height != 1 / 0 || e.g.ignoreHardwareResolution
                      ? b.A(2)
                      : ((y = je()), E(b, y.lc(), 3)))
                  : (b.g != 2 && ((v = b.h), (e.ya.width = v.width), (e.ya.height = v.height)),
                    (w = new vp(l, e.ya, null)),
                    (A = {
                      networkingEngine: e.N,
                      filter: function (B) {
                        var O, z;
                        return F(function (j) {
                          if (j.g == 1) return E(j, ux(w, B), 2);
                          if (j.g != 4)
                            return (
                              (O = j.h),
                              O ? ((z = ft("trackschanged")), E(j, Promise.resolve(), 4)) : j.A(0)
                            );
                          (u.dispatchEvent(z), re(j));
                        });
                      },
                      makeTextStreamsForClosedCaptions: function (B) {
                        return Zk(e, B);
                      },
                      onTimelineRegionAdded: function (B) {
                        Hp(u.I, B);
                      },
                      onEvent: function (B) {
                        return u.dispatchEvent(B);
                      },
                      onError: function (B) {
                        return u.onError(B);
                      },
                      isLowLatencyMode: function () {
                        return m().streaming.lowLatencyMode;
                      },
                      updateDuration: function () {
                        e.l && u.R && e.l.updateDuration();
                      },
                      newDrmInfo: function (B) {
                        var O = u.j,
                          z = O ? O.g : null;
                        z && O.B && dx(w, z.keySystem, B);
                      },
                      onManifestUpdated: function () {
                        var B = new Map().set("isLive", e.W());
                        (u.dispatchEvent(ft("manifestupdated", B)),
                          Iu(u, !1, function () {
                            e.C && e.C.onManifestUpdated(e.W());
                          }));
                      },
                      getBandwidthEstimate: function () {
                        return e.o.getBandwidthEstimate();
                      },
                      onMetadata: function (B, O, z, j) {
                        var X = B;
                        ((B == "com.apple.hls.interstitial" || B == "com.apple.hls.overlay") &&
                          ((X = "com.apple.quicktime.HLS"),
                          (B = { startTime: O, endTime: z, values: j }),
                          e.C && e.C.onHLSInterstitialMetadata(e, e.h, B)),
                          (j = x(j)),
                          (B = j.next()));
                        for (var W = {}; !B.done; W = { bh: void 0 }, B = j.next())
                          ((W.bh = B.value),
                            W.bh.name != "ID" &&
                              Iu(
                                u,
                                !1,
                                (function (ie) {
                                  return function () {
                                    Cg(e, O, z, X, ie.bh);
                                  };
                                })(W),
                              ));
                      },
                      disableStream: function (B) {
                        return e.disableStream(B, e.g.streaming.maxDisabledTime);
                      },
                      addFont: function (B, O) {
                        return e.addFont(B, O);
                      },
                    }),
                    (I = new yu(function () {
                      return e.Ra();
                    })),
                    I.addEventListener("regionadd", function (B) {
                      var O = B.region;
                      (Lu(e, "timelineregionadded", O, u),
                        Iu(u, !1, function () {
                          e.C && (e.C.onDashTimedMetadata(O), e.C.onDASHInterstitialMetadata(e, e.h, O));
                        }));
                    }),
                    (C = null),
                    l.streaming.observeQualityChanges &&
                      ((C = new zc(function () {
                        return e.Gc();
                      })),
                      C.addEventListener("qualitychange", function (B) {
                        R1(e, B.quality, B.position);
                      }),
                      C.addEventListener("audiotrackchange", function (B) {
                        R1(e, B.quality, B.position, !0);
                      })),
                    (k = !0),
                    (R = {
                      vc: e.N,
                      onError: function (B) {
                        return u.onError(B);
                      },
                      zf: function (B) {
                        Iu(u, !0, function () {
                          e.F && t_(e, B);
                        });
                      },
                      onExpirationUpdated: function (B, O) {
                        var z = ft("expirationupdated");
                        (u.dispatchEvent(z),
                          (z = u.m) && z.onExpirationUpdated && z.onExpirationUpdated(B, O));
                      },
                      onEvent: function (B) {
                        (u.dispatchEvent(B),
                          B.type == "drmsessionupdate" &&
                            k &&
                            ((k = !1),
                            (B = Date.now() / 1e3 - u.za),
                            ((e.B || u.getStats()).m = B),
                            e.T && Qv(e.T)));
                      },
                    }),
                    (L = l1(e, p)),
                    H0(e.N, L),
                    (U = function () {
                      return e.md(R);
                    }),
                    (G = { config: l, zk: A, Kk: I, Jk: C, md: U, yk: w, networkingEngine: L, pj: s }),
                    (u = new Cr(t, r, n, G)),
                    b.return(u));
              });
            }
            function a1(e, t) {
              var n, r, i, s;
              return F(function (o) {
                return o.g == 1
                  ? ((n = e.g.manifest.retryParameters), E(o, Fo(t, e.N, n), 2))
                  : ((r = o.h),
                    r == "application/x-mpegurl" &&
                      ((i = je()), i.Ha() === "WEBKIT" && (r = "application/vnd.apple.mpegurl")),
                    r == "video/quicktime" && ((s = je()), s.Ha() === "CHROMIUM" && (r = "video/mp4")),
                    o.return(r));
              });
            }
            function Uk(e, t) {
              if (!ui(je())) return !0;
              if (t) {
                if ((e.h || Gs()).canPlayType(t) == "") return !1;
                if (!ui(je()) || !po.has(t.toLowerCase())) return !0;
                if (pc(t))
                  return je().Ha() === "WEBKIT" &&
                    (e.g.drm.servers["com.apple.fps"] || e.g.drm.servers["com.apple.fps.1_0"])
                    ? e.g.streaming.useNativeHlsForFairPlay
                    : e.g.streaming.preferNativeHls;
                if (t === "application/dash+xml" || t === "video/vnd.mpeg.dash.mpd")
                  return e.g.streaming.preferNativeDash;
              }
              return !1;
            }
            function vd(e, t) {
              var n = e.g.textDisplayFactory;
              e.Oh !== n || (t !== void 0 && t)
                ? ((t = e.u),
                  (e.u = n()),
                  e.u.configure
                    ? e.u.configure(e.g.textDisplayer)
                    : Je("Text displayer w/ configure", 'Text displayer should have a "configure" method!'),
                  e.u.setTextLanguage ||
                    Je(
                      "Text displayer w/ setTextLanguage",
                      'Text displayer should have a "setTextLanguage" method!',
                    ),
                  t
                    ? (e.u.setTextVisibility(t.isTextVisible()), t.destroy().catch(function () {}))
                    : e.u.setTextVisibility(e.$),
                  e.H && QM(e.H, e.u),
                  (e.Oh = n),
                  e.l && ER(e.l))
                : e.u && e.u.configure && e.u.configure(e.g.textDisplayer);
            }
            function Eg(e) {
              var t, n, r;
              return F(function (i) {
                if (i.g == 1)
                  return (
                    je(),
                    Xo(e, "media-source"),
                    e.g.mediaSource.useSourceElements && Uc(e.h),
                    vd(e),
                    (t = $k(
                      e.h,
                      e.u,
                      {
                        Pj: function () {
                          return e.keySystem();
                        },
                        onMetadata: function (s, o, u) {
                          s = x(s);
                          for (var l = s.next(); !l.done; l = s.next())
                            if (((l = l.value), l.data && typeof l.cueTime == "number" && l.frames)) {
                              var p = l.cueTime + o,
                                m = u;
                              m && p > m && (m = p);
                              for (var y = x(l.frames), v = y.next(); !v.done; v = y.next())
                                Cg(e, p, m, "org.id3", v.value);
                              e.C && e.C.onHlsTimedMetadata(l, p);
                            }
                        },
                        Ek: function (s) {
                          e.kb &&
                            Hp(e.kb, {
                              schemeIdUri: s.schemeIdUri,
                              startTime: s.startTime,
                              endTime: s.endTime,
                              id: String(s.id),
                              emsg: s,
                            });
                        },
                        onEvent: function (s) {
                          return e.dispatchEvent(s);
                        },
                        Gk: function () {
                          e.I && e.I.update && e.I.update();
                        },
                      },
                      e.T,
                      e.g.mediaSource,
                    )),
                    (n = e.g.manifest),
                    (r = n.segmentRelativeVttTiming),
                    (t.Fa = r),
                    E(i, t.M, 2)
                  );
                ((e.H = t), re(i));
              });
            }
            function u1(e, t, n) {
              function r() {
                return Mg(e);
              }
              if (
                (e.j.D(t, "playing", r),
                e.j.D(t, "pause", r),
                e.j.D(t, "ended", r),
                e.j.D(t, "ratechange", function () {
                  var s = e.h.playbackRate;
                  s != 0 &&
                    (e.M && (e.M.set(s), e.m == ln && e.o.playbackRateChanged(s), x1(e, s)),
                    (s = ft("ratechange")),
                    e.dispatchEvent(s));
                }),
                t.remote &&
                  (e.j.D(t.remote, "connect", function () {
                    (e.l && t.remote.state == "connected" && Li(e), Ln(e));
                  }),
                  e.j.D(t.remote, "connecting", function () {
                    return Ln(e);
                  }),
                  e.j.D(t.remote, "disconnect", function () {
                    return F(function (s) {
                      if (s.g == 1)
                        return e.l && t.remote.state == "disconnected" ? E(s, Qc(e.l), 3) : s.A(2);
                      (s.g != 2 && Li(e), Ln(e), re(s));
                    });
                  })),
                t.audioTracks &&
                  (e.j.D(t.audioTracks, "addtrack", function () {
                    return Ln(e);
                  }),
                  e.j.D(t.audioTracks, "removetrack", function () {
                    return Ln(e);
                  }),
                  e.j.D(t.audioTracks, "change", function () {
                    return Ln(e);
                  })),
                t.videoTracks &&
                  (e.j.D(t.videoTracks, "addtrack", function () {
                    return Ln(e);
                  }),
                  e.j.D(t.videoTracks, "removetrack", function () {
                    return Ln(e);
                  }),
                  e.j.D(t.videoTracks, "change", function () {
                    return Ln(e);
                  })),
                (t.webkitPresentationMode || t.webkitSupportsFullscreen) &&
                  e.j.D(t, "webkitpresentationmodechanged", function () {
                    e.Be && vd(e, !0);
                  }),
                t.textTracks)
              ) {
                var i = function () {
                  (e.m === nr && e.u instanceof Xt && Li(e), Ln(e));
                };
                (e.j.D(t.textTracks, "addtrack", function (s) {
                  if (s.track)
                    switch (((s = s.track), s.kind)) {
                      case "metadata":
                        Gk(e, s);
                        break;
                      case "chapters":
                        zk(e, s);
                        break;
                      default:
                        i();
                    }
                }),
                  e.j.D(t.textTracks, "removetrack", i),
                  e.j.D(t.textTracks, "change", i));
              }
              t.preload != "none" &&
                e.j.Aa(t, "loadedmetadata", function () {
                  e.B.G = Date.now() / 1e3 - n;
                });
            }
            function Fk(e, t, n, r) {
              var i, s, o, u, l, p, m, y, v, w, A, I, C, k, R, L, U, G, b, B, O, z, j, X, W, ie, ne, $;
              return F(function (Q) {
                switch (Q.g) {
                  case 1:
                    for (
                      Xo(e, "load"),
                        i = e.h,
                        e.M = new mu({
                          cf: function () {
                            return i.playbackRate;
                          },
                          Tc: function () {
                            return i.defaultPlaybackRate;
                          },
                          uh: function (ae) {
                            i.playbackRate = ae;
                          },
                          Di: function (ae) {
                            i.currentTime += ae;
                          },
                        }),
                        u1(e, i, t),
                        ("onchange" in g.screen) &&
                          e.j.D(g.screen, "change", function () {
                            if (e.J.getConfiguration) {
                              var ae = e.J.getConfiguration();
                              ae.hdrLevel == "AUTO"
                                ? ls(e)
                                : e.g.preferredVideoHdrLevel == "AUTO" &&
                                  e.g.abr.enabled &&
                                  ((ae.hdrLevel = "AUTO"), e.J.configure(ae), ls(e));
                            }
                          }),
                        s = !1,
                        o = x(e.i.variants),
                        u = o.next();
                      !u.done;
                      u = o.next()
                    )
                      ((l = u.value), (p = l.video && l.video.dependencyStream) && (s = Zv(p)));
                    (Nk(e, e.g, s),
                      (e.Kd = e.g.preferredTextLanguage),
                      (e.Od = e.g.preferredTextRole),
                      (e.Nd = e.g.preferForcedSubs),
                      Pg(e.i.presentationTimeline, e.g.playRangeStart, e.g.playRangeEnd),
                      e.o.init(function (ae, ce, Ne) {
                        e.i &&
                          e.l &&
                          ae != e.l.o &&
                          Pu(e, ae, !0, ce === void 0 ? !1 : ce, Ne === void 0 ? 0 : Ne);
                      }),
                      e.o.setMediaElement(i),
                      e.o.setCmsdManager(e.va),
                      (e.l = Yk(e)),
                      e.l.configure(e.g.streaming),
                      (e.m = ln),
                      e.dispatchEvent(ft("streaming")),
                      (m = n));
                  case 2:
                    for (
                      (v = e.l.o) || m || (m = w1(e, !0)),
                        w = [],
                        y = v || m,
                        A = x([y.video, y.audio]),
                        I = A.next();
                      !I.done;
                      I = A.next()
                    )
                      (C = I.value) &&
                        !C.segmentIndex &&
                        (w.push(C.createSegmentIndex()),
                        C.dependencyStream && w.push(C.dependencyStream.createSegmentIndex()));
                    if (!(w.length > 0)) {
                      Q.A(4);
                      break;
                    }
                    return E(Q, Promise.all(w), 4);
                  case 4:
                    if (!y || y.disabledUntilTime != 0) {
                      Q.A(2);
                      break;
                    }
                    if (
                      (ls(e),
                      e.I && e.I.onInitialVariantChosen && e.I.onInitialVariantChosen(y),
                      e.i.isLowLatency &&
                        (e.g.streaming.lowLatencyMode
                          ? e.configure(e.dg)
                          : Be(
                              "Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.",
                            )),
                      e.K && (mk(e.K, e.i.isLowLatency && e.g.streaming.lowLatencyMode), yk(e.K, t * 1e3)),
                      Pg(e.i.presentationTimeline, e.g.playRangeStart, e.g.playRangeEnd),
                      wR(e.l, e.g.playRangeStart, e.g.playRangeEnd),
                      (e.Ua = !0),
                      e.dispatchEvent(ft("canupdatestarttime")),
                      (k = function (ae) {
                        ((e.G = Xk(e, ae)), (e.ac = Wk(e, ae)), c1(e, i, !1));
                      }),
                      e.g.streaming.startAtSegmentBoundary ||
                        ((R = e.O), R == null && e.i.startTime && (R = e.i.startTime), k(R)),
                      v)
                    ) {
                      Q.A(7);
                      break;
                    }
                    if (!e.g.streaming.startAtSegmentBoundary) {
                      Q.A(8);
                      break;
                    }
                    return (
                      (L = e.i.presentationTimeline),
                      e.O instanceof Date &&
                        ((G = L.m || L.i), (b = e.O.getTime() / 1e3 - G), b != null && (U = b)),
                      U == null && (U = typeof e.O == "number" ? e.O : e.h.currentTime),
                      e.O == null && e.i.startTime && (U = e.i.startTime),
                      (B = L.Zb()),
                      (O = L.Gb()),
                      U < B ? (U = B) : U > O && (U = O),
                      E(Q, e_(m, U), 9)
                    );
                  case 9:
                    ((z = Q.h), k(z));
                  case 8:
                    Pu(e, m, !0, !1, 0);
                  case 7:
                    return (
                      e.G.ready(),
                      (j = e.Lc().find(function (ae) {
                        return ae.active;
                      })),
                      j ||
                        ((X = So(e.i.textStreams, e.Kd, e.Od, e.Nd)[0] || null) && sg(e.B.h, X, !0),
                        m &&
                          (X
                            ? (b0(m.audio, X, e.g) && (e.$ = !0), e.$ && e.u.setTextVisibility(!0))
                            : ((e.$ = !1), e.u.setTextVisibility(!1)),
                          C1(e)),
                        X && (e.g.streaming.alwaysStreamText || e.Sg()) && (Kc(e.l, X), Du(e))),
                      E(Q, e.l.start(r), 10)
                    );
                  case 10:
                    (e.g.abr.enabled && (e.o.enable(), M1(e)),
                      Ln(e),
                      e.i.variants.some(function (ae) {
                        return ae.primary;
                      }),
                      (((W = e.W()) &&
                        ((e.g.streaming.liveSync && e.g.streaming.liveSync.enabled) ||
                          e.i.serviceDescription ||
                          e.g.streaming.liveSync.panicMode)) ||
                        e.g.streaming.vodDynamicPlaybackRate) &&
                        ((ie = function () {
                          return T1(e);
                        }),
                        e.j.D(i, "timeupdate", ie)),
                      W ||
                        ((ne = function () {
                          return Sd(e);
                        }),
                        e.j.D(i, "timeupdate", ne),
                        Sd(e),
                        e.i.nextUrl &&
                          (e.g.streaming.preloadNextUrlWindow > 0 &&
                            (($ = function () {
                              var ae;
                              return F(function (ce) {
                                if (ce.g == 1)
                                  return (
                                    (ae = e.Ra().end - e.h.currentTime),
                                    isNaN(ae) || !(ae <= e.g.streaming.preloadNextUrlWindow)
                                      ? ce.A(0)
                                      : (e.j.Ma(i, "timeupdate", $), E(ce, e.preload(e.i.nextUrl), 4))
                                  );
                                ((e.eb = ce.h), re(ce));
                              });
                            }),
                            e.j.D(i, "timeupdate", $)),
                          e.j.D(i, "ended", function () {
                            e.load(e.eb || e.i.nextUrl);
                          }))),
                      e.C && e.C.onManifestUpdated(W),
                      re(Q));
                }
              });
            }
            function Bk(e, t) {
              var n, r, i;
              return F(function (s) {
                return s.g == 1
                  ? ((n = Date.now() / 1e3),
                    (r = !0),
                    (e.F = e.md({
                      vc: e.N,
                      onError: function (o) {
                        Wo(e, o);
                      },
                      zf: function () {},
                      onExpirationUpdated: function () {
                        var o = ft("expirationupdated");
                        e.dispatchEvent(o);
                      },
                      onEvent: function (o) {
                        (e.dispatchEvent(o),
                          o.type == "drmsessionupdate" && r && ((r = !1), (e.B.m = Date.now() / 1e3 - n)));
                      },
                    })),
                    e.F.configure(e.g.drm),
                    (i = N0([t])),
                    (e.F.O = !0),
                    E(s, q0(e.F, [i], []), 2))
                  : E(s, e.F.Vb(e.h), 0);
              });
            }
            function jk(e, t, n) {
              var r, i, s, o, u, l, p, m, y, v, w, A;
              return F(function (I) {
                switch (I.g) {
                  case 1:
                    if (
                      (Xo(e, "src-equals"),
                      (r = e.h),
                      (e.G = new Jx(r)),
                      (i = !1),
                      e.De.push(function () {
                        i = !0;
                      }),
                      e.dispatchEvent(ft("canupdatestarttime")),
                      e.O != null && e.G.$f(e.O),
                      (e.ac = Kk(e, e.O || 0)),
                      (e.M = new mu({
                        cf: function () {
                          return r.playbackRate;
                        },
                        Tc: function () {
                          return r.defaultPlaybackRate;
                        },
                        uh: function (C) {
                          r.playbackRate = C;
                        },
                        Di: function (C) {
                          r.currentTime += C;
                        },
                      })),
                      c1(e, r, !0),
                      r.textTracks &&
                        (vd(e),
                        (s = function (C) {
                          if (!(e.u instanceof Xt)) {
                            var k = xd(e).find(function (R) {
                              return R.mode !== "disabled";
                            });
                            (k && (k.mode = C ? "showing" : "hidden"),
                              e.u instanceof pn &&
                                (k = qk(e)) &&
                                (k.mode = !C && e.u.isTextVisible() ? "showing" : "hidden"));
                          }
                        }),
                        e.j.D(r, "enterpictureinpicture", function () {
                          return s(!0);
                        }),
                        e.j.D(r, "leavepictureinpicture", function () {
                          return s(!1);
                        }),
                        r.remote
                          ? (e.j.D(r.remote, "connect", function () {
                              return s(!1);
                            }),
                            e.j.D(r.remote, "connecting", function () {
                              return s(!1);
                            }),
                            e.j.D(r.remote, "disconnect", function () {
                              return s(!1);
                            }))
                          : "webkitCurrentPlaybackTargetIsWireless" in r &&
                            e.j.D(r, "webkitcurrentplaybacktargetiswirelesschanged", function () {
                              return s(!1);
                            }),
                        (o = r),
                        (o.webkitPresentationMode || o.webkitSupportsFullscreen) &&
                          e.j.D(o, "webkitpresentationmodechanged", function () {
                            o.webkitPresentationMode
                              ? s(o.webkitPresentationMode !== "inline")
                              : o.webkitSupportsFullscreen && s(o.webkitDisplayingFullscreen);
                          })),
                      u1(e, r, t),
                      (u = vk(e.K, e.X, n)),
                      !u.includes("#t=") &&
                        (e.g.playRangeStart > 0 || isFinite(e.g.playRangeEnd)) &&
                        ((u += "#t="),
                        e.g.playRangeStart > 0 && (u += e.g.playRangeStart),
                        isFinite(e.g.playRangeEnd) && (u += "," + e.g.playRangeEnd)),
                      !e.H)
                    ) {
                      I.A(2);
                      break;
                    }
                    return E(I, e.H.destroy(), 3);
                  case 3:
                    e.H = null;
                  case 2:
                    return (
                      Uc(r),
                      (r.src = u),
                      (l = je()),
                      l.Oa() == "TV" && r.load(),
                      r.preload != "none" && !r.autoplay && pc(n) && l.Ha() === "WEBKIT" && r.load(),
                      (e.m = nr),
                      e.dispatchEvent(ft("streaming")),
                      (p = function () {
                        return new Promise(function (C) {
                          var k = new He(C);
                          (e.j.D(r.textTracks, "change", function () {
                            return k.ka(0.5);
                          }),
                            k.ka(0.5));
                        });
                      }),
                      (m = new lt()),
                      Uo(r, HTMLMediaElement.HAVE_METADATA, e.j, function () {
                        return F(function (C) {
                          if (C.g == 1)
                            return (e.G.ready(), e.Fa && pc(e.Fa) ? E(C, p(), 3) : (m.resolve(), C.A(0)));
                          (m.resolve(), re(C));
                        });
                      }),
                      Uo(r, HTMLMediaElement.HAVE_CURRENT_DATA, e.j, function () {
                        var C, k, R, L, U;
                        return F(function (G) {
                          if (G.g == 1) return E(G, p(), 2);
                          if (i) return G.return();
                          if (
                            (Vk(e),
                            (C = xd(e)),
                            C.some(function (b) {
                              return b.mode === "showing";
                            }) && ((e.$ = !0), e.u.setTextVisibility(!0)),
                            !(e.u instanceof Xt))
                          )
                            for (
                              C.length &&
                                (e.u.enableTextDisplayer
                                  ? e.u.enableTextDisplayer()
                                  : Je(
                                      "Text displayer w/ enableTextDisplayer",
                                      'Text displayer should have a "enableTextDisplayer" method',
                                    )),
                                k = !1,
                                R = x(C),
                                L = R.next();
                              !L.done;
                              L = R.next()
                            )
                              ((U = L.value),
                                U.mode !== "disabled" &&
                                  (k
                                    ? ((U.mode = "disabled"),
                                      Be("Found more than one enabled text track, disabling it", U))
                                    : (m1(e, U), (k = !0))));
                          (Hk(e), re(G));
                        });
                      }),
                      r.error
                        ? m.reject(_g(e))
                        : r.preload == "none" &&
                          (Be(
                            'With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.',
                          ),
                          m.resolve()),
                      e.j.Aa(r, "error", function () {
                        m.reject(_g(e));
                      }),
                      E(I, gc(e.g.streaming.loadTimeout, m), 4)
                    );
                  case 4:
                    ((((y = e.W()) &&
                      ((e.g.streaming.liveSync && e.g.streaming.liveSync.enabled) ||
                        e.g.streaming.liveSync.panicMode)) ||
                      e.g.streaming.vodDynamicPlaybackRate) &&
                      ((v = function () {
                        return T1(e);
                      }),
                      e.j.D(r, "timeupdate", v)),
                      y ||
                        ((w = function () {
                          return Sd(e);
                        }),
                        e.j.D(r, "timeupdate", w),
                        Sd(e)),
                      e.C &&
                        (e.C.onManifestUpdated(y),
                        y &&
                          ((A = e.Ra().end),
                          e.j.D(r, "progress", function () {
                            var C = e.Ra().end;
                            A != C && (e.C.onManifestUpdated(e.W()), (A = C));
                          }))),
                      (e.Ua = !0),
                      re(I));
                }
              });
            }
            function Vk(e) {
              var t = e.g.preferredAudioLanguage;
              t != "" && e.Ti(t, e.g.preferredAudioRole);
            }
            function Hk(e) {
              var t = e.g.preferredTextLanguage;
              t != "" && e.oh(t, e.g.preferredTextRole, e.g.preferForcedSubs);
            }
            function Gk(e, t) {
              if (t.kind == "metadata") {
                ((t.mode = "hidden"),
                  e.j.D(t, "cuechange", function () {
                    if (t.activeCues)
                      for (var r = x(t.activeCues), i = r.next(); !i.done; i = r.next())
                        ((i = i.value),
                          Cg(e, i.startTime, i.endTime, i.type, i.value),
                          e.C && e.C.onCueMetadataChange(i.value));
                    if (t.cues) {
                      ((r = []), (i = x(t.cues)));
                      for (var s = i.next(), o = {}; !s.done; o = { Ec: void 0 }, s = i.next())
                        ((o.Ec = s.value),
                          o.Ec.type == "com.apple.quicktime.HLS" &&
                            o.Ec.startTime != null &&
                            ((s = r.find(
                              (function (u) {
                                return function (l) {
                                  return l.startTime == u.Ec.startTime && l.endTime == u.Ec.endTime;
                                };
                              })(o),
                            )),
                            s ||
                              ((s = { startTime: o.Ec.startTime, endTime: o.Ec.endTime, values: [] }),
                              r.push(s)),
                            s.values.push(o.Ec.value)));
                      for (r = x(r), i = r.next(); !i.done; i = r.next())
                        ((i = i.value),
                          i.values.some(function (u) {
                            return u.key == "X-ASSET-URI" || u.key == "X-ASSET-LIST";
                          }) &&
                            e.C &&
                            (i.values.push({
                              key: "CUE",
                              description: "",
                              data: i.startTime != 0 || e.W() ? "ONCE" : "ONCE,PRE",
                              mimeType: null,
                              pictureType: null,
                            }),
                            e.C.onHLSInterstitialMetadata(e, e.h, i)));
                    }
                  }));
                var n = new He(function () {
                  var r = Jk(e);
                  r = x(r);
                  for (var i = r.next(); !i.done; i = r.next()) i.value.mode = "hidden";
                })
                  .Jb()
                  .ka(0.5);
                e.De.push(function () {
                  n.stop();
                });
              }
            }
            function Ig(e, t, n) {
              ((t = new Map()
                .set("startTime", t.startTime)
                .set("endTime", t.endTime)
                .set("metadataType", t.schemeIdUri)
                .set("payload", t.payload)),
                e.dispatchEvent(ft(n, t)));
            }
            function Cg(e, t, n, r, i) {
              e.za &&
                ((t = { schemeIdUri: r, startTime: t, endTime: n || 1 / 0, id: "", payload: i }),
                (t.id = JSON.stringify(t)),
                Hp(e.za, t));
            }
            function zk(e, t) {
              if (t && t.kind == "chapters") {
                t.mode = "hidden";
                var n = new He(function () {
                  t.mode = "hidden";
                })
                  .Jb()
                  .ka(0.5);
                e.De.push(function () {
                  n.stop();
                });
              }
            }
            ((h.Ok = function () {
              for (var e = this.ba; e.g; ) e.release();
            }),
              (h.md = function (e) {
                return new _c(e);
              }));
            function l1(e, t) {
              function n(s) {
                t() ? t().dispatchEvent(s) : e.dispatchEvent(s);
              }
              function r(s) {
                t() ? Iu(t(), !0, s) : s();
              }
              t ||
                (t = function () {
                  return null;
                });
              var i = new xt(
                function (s, o, u, l, p) {
                  r(function () {
                    e.o && e.o.segmentDownloaded(s, o, u, l, p);
                  });
                },
                function (s, o, u) {
                  ((o = new Map().set("headers", s).set("request", o).set("requestType", u)),
                    n(ft("downloadheadersreceived", o)),
                    r(function () {
                      if (e.va) {
                        var l = e.va;
                        if (l.h.enabled) {
                          var p = s["cmsd-static"];
                          if (p)
                            try {
                              var m = new Map(),
                                y = p.split(",");
                              for (p = 0; p < y.length; p++) {
                                var v = y[p].split("=");
                                m.set(v[0], qT(v[1]));
                              }
                            } catch (k) {}
                          if ((m = s["cmsd-dynamic"])) {
                            e: {
                              try {
                                var w = new Map(),
                                  A = m.split(";");
                                for (m = 1; m < A.length; m++) {
                                  var I = A[m].split("=");
                                  w.set(I[0], qT(I[1]));
                                }
                                var C = w;
                                break e;
                              } catch (k) {
                                C = null;
                                break e;
                              }
                              C = void 0;
                            }
                            C && (l.g = C);
                          }
                        }
                      }
                    }));
                },
                function (s, o) {
                  ((s = new Map().set("request", s).set("response", o)), n(ft("downloadcompleted", s)));
                },
                function (s, o, u, l) {
                  ((s = new Map()
                    .set("request", s)
                    .set("error", o)
                    .set("httpResponseCode", u)
                    .set("aborted", l)),
                    n(ft("downloadfailed", s)));
                },
                function (s, o, u) {
                  r(function () {
                    if (e.K) {
                      var l = e.K,
                        p = u;
                      if (((p = p === void 0 ? {} : p), l.g.enabled))
                        if (o.method === "HEAD") zo(l, o, {});
                        else
                          switch (s) {
                            case 0:
                              try {
                                if (l.g.enabled) {
                                  if (p.type) {
                                    e: {
                                      switch (p.type) {
                                        case 4:
                                          var m = l.u ? pd : hd;
                                          break e;
                                        case 3:
                                        case 2:
                                          m = l.u ? md : gd;
                                          break e;
                                        case 5:
                                          m = "s";
                                          break e;
                                      }
                                      m = void 0;
                                    }
                                    l.l = m;
                                  }
                                  zo(l, o, { ot: zT, su: !l.F });
                                }
                              } catch (v) {
                                lr("CMCD_MANIFEST_ERROR", "Could not generate manifest CMCD data.", v);
                              }
                              break;
                            case Er:
                              try {
                                if (l.g.enabled) {
                                  var y = HT(l, p, o.uris[0]);
                                  ((y.ts = Date.now()),
                                    l.m.has(o) && l.m.delete(o),
                                    l.m.set(o, y.ts),
                                    zo(l, o, y));
                                }
                              } catch (v) {
                                lr("CMCD_SEGMENT_ERROR", "Could not generate segment CMCD data.", v);
                              }
                              break;
                            case 2:
                            case 5:
                            case 6:
                              zo(l, o, { ot: "k" });
                              break;
                            case 4:
                              zo(l, o, { ot: "o" });
                          }
                    }
                  });
                },
                function (s, o, u, l) {
                  (s = t() ? t().m : e.I) && s.banLocation && s.banLocation(l);
                },
                function (s, o, u) {
                  if (o.data) {
                    var l = o.data.byteLength,
                      p = t() ? t().getStats() : e.B;
                    if (
                      (p && (ET(p, l), s === 0 && (p.wi = l)),
                      (l = e.K),
                      (u = u === void 0 ? {} : u),
                      pg(l).length !== 0)
                    )
                      switch (s) {
                        case Er:
                          try {
                            var m = HT(l, u, o.uri);
                            (o.originalRequest &&
                              o.originalRequest.timeToFirstByte != null &&
                              (m.ttfb = o.originalRequest.timeToFirstByte),
                              o.timeMs != null && (m.ttlb = o.timeMs));
                            var y = o.originalUri || o.uri;
                            if (y.includes("CMCD="))
                              try {
                                var v = new URL(y);
                                v.searchParams.delete("CMCD");
                                var w = v.toString();
                              } catch (B) {
                                w = y;
                              }
                            else w = y;
                            ((m.url = w),
                              l.m.has(o.originalRequest)
                                ? ((m.ts = l.m.get(o.originalRequest)), l.m.delete(o.originalRequest))
                                : m.ts || (m.ts = Date.now()));
                            var A = pg(l);
                            if (A.length !== 0) {
                              var I = l.g.version == Tg ? Array.from(new Set([].concat(Y(wg), Y(kk)))) : XT;
                              m.rc = o.status || 0;
                              var C = vg(l, m, $T);
                              (o.headers &&
                                o.headers["CMSD-Static"] &&
                                (C.cmsds = btoa(o.headers["CMSD-Static"])),
                                o.headers &&
                                  o.headers["CMSD-Dynamic"] &&
                                  (C.cmsdd = btoa(o.headers["CMSD-Dynamic"])));
                              for (var k = x(A), R = k.next(); !R.done; R = k.next()) {
                                var L = R.value,
                                  U = mg(L.includeKeys || [], I),
                                  G = jT(L);
                                (l.o[G] || (l.o[G] = { request: 1, response: 1 }),
                                  (C.sn = l.o[G].response++));
                                var b = yg(C, U);
                                BT(l, b, L, o);
                              }
                            }
                          } catch (B) {
                            lr("CMCD_SEGMENT_ERROR", "Could not generate response segment CMCD data.", B);
                          }
                      }
                  }
                },
              );
              return (i.configure(e.g.networking), i);
            }
            function Xk(e, t) {
              return new eT(
                e.h,
                e.i,
                e.g.streaming,
                t,
                function () {
                  (e.ac && sT(e.ac, !e.G.Mh()), e.l && e.l.bd(), e.R && ai(e, "seeking"));
                },
                function (n) {
                  return e.dispatchEvent(n);
                },
              );
            }
            function Wk(e, t) {
              var n = e.W() || (typeof t == "number" && t > 0);
              ((t = new Ks(e.Ae, n)),
                t.addEventListener("enter", function (s) {
                  Lu(e, "timelineregionenter", s.region);
                }),
                t.addEventListener("exit", function (s) {
                  Lu(e, "timelineregionexit", s.region);
                }),
                t.addEventListener("skip", function (s) {
                  var o = s.region;
                  s.seeking || (Lu(e, "timelineregionenter", o), Lu(e, "timelineregionexit", o));
                }));
              var r = new Ks(e.za, n);
              (r.addEventListener("enter", function (s) {
                Ig(e, s.region, "metadata");
              }),
                (n = new Ks(e.kb, n)),
                n.addEventListener("enter", function (s) {
                  ((s = new Map().set("detail", s.region.emsg)), e.dispatchEvent(ft("emsg", s)));
                }));
              var i = new Vp(e.h);
              return (i.g.add(t), i.g.add(r), i.g.add(n), e.ye && i.g.add(e.ye), i);
            }
            function Kk(e, t) {
              ((t = new Ks(e.za, t instanceof Date || t > 0)),
                t.addEventListener("enter", function (r) {
                  Ig(e, r.region, "metadata");
                }));
              var n = new Vp(e.h);
              return (n.g.add(t), n);
            }
            function c1(e, t, n) {
              ((e.R = new yM()),
                yp(e.R, js),
                d1(e),
                _u(e),
                (e.Ta = new He(function () {
                  ai(e);
                })),
                e.g.streaming.rebufferingGoal && e.Ta.Ea(0.25),
                e.j.D(t, "waiting", function () {
                  return ai(e, "waiting");
                }),
                e.j.D(t, "canplaythrough", function () {
                  return ai(e, "canplaythrough");
                }),
                e.j.D(t, "playing", function () {
                  return ai(e, "playing");
                }),
                e.j.D(t, "seeked", function () {
                  return ai(e, "seeked");
                }),
                e.j.D(t, "timeupdate", function () {
                  return ai(e, "timeupdate");
                }),
                n &&
                  (e.j.D(t, "progress", function () {
                    return ai(e, "progress");
                  }),
                  e.j.D(t, "stalled", function () {
                    return ai(e, "stalled");
                  })));
            }
            function d1(e) {
              var t = e.g.streaming.rebufferingGoal;
              e.R.j.set(Vs, Math.min(0.5, t / 2)).set(js, t);
            }
            function ai(e, t) {
              if (e.g.streaming.rebufferingGoal) {
                ((t = e.H ? Xs(e.H) : !1), (t = e.ge() || t || e.G.ri()));
                var n = Ix(e.h.buffered, e.h.currentTime),
                  r = e.R,
                  i = r.j.get(r.g);
                yp(r, t || (n >= i && n > 0) ? Vs : js) && _u(e);
              } else if (t) {
                ((n = e.R), (r = e.h.currentTime), (i = n.h), (n.h = r));
                var s = void 0;
                switch (t) {
                  case "seeking":
                  case "waiting":
                    ((n.h = -1), (s = js));
                    break;
                  case "canplaythrough":
                  case "playing":
                  case "seeked":
                    s = Vs;
                    break;
                  case "timeupdate":
                    i >= 0 && r - i > 0.01 && (s = Vs);
                }
                s !== void 0 && yp(n, s) && _u(e);
              }
            }
            function $k(e, t, n, r, i) {
              return new Dx(e, t, n, i, r);
            }
            function Yk(e) {
              return new dT(e.i, {
                nc: function () {
                  return e.G ? e.G.Qd() : 0;
                },
                getBandwidthEstimate: function () {
                  return e.o.getBandwidthEstimate();
                },
                Ob: function () {
                  return e.Ob();
                },
                video: e.h,
                Z: e.H,
                vc: e.N,
                onError: function (t) {
                  return Wo(e, t);
                },
                onEvent: function (t) {
                  return e.dispatchEvent(t);
                },
                zd: function (t, n, r, i) {
                  var s = t.startTime,
                    o = t.endTime,
                    u = n.type;
                  if (u != Ve) {
                    if (e.G) {
                      e.G.Fi();
                      var l = Dp(e.H, u);
                      !e.W() &&
                        e.h.paused &&
                        !e.h.seeking &&
                        l != null &&
                        l > 0 &&
                        e.G.Qd() < l &&
                        !n1(e.G.Qd(), l, 0.001) &&
                        e.G.$f(l);
                    }
                    ai(e);
                  }
                  ((r = new Map()
                    .set("start", s)
                    .set("end", o)
                    .set("contentType", u)
                    .set("isMuxed", r)
                    .set("isDependency", i)),
                    e.dispatchEvent(ft("segmentappended", r)),
                    e.o && n.fastSwitching && t.Xc && t.je && e.o.trySuggestStreams());
                },
                Fk: function (t, n) {
                  (n = n.xd) && e.ye && dR(e.ye, n, t);
                },
                Uh: function (t, n) {
                  var r = e.F;
                  if (r.h.parseInbandPsshEnabled && !r.H && ["audio", "video"].includes(t)) {
                    ((t = new hp(Le(n))), (n = 0));
                    for (var i = x(t.data), s = i.next(); !s.done; s = i.next()) n += s.value.length;
                    if (n == 0) r = Promise.resolve();
                    else {
                      for (n = new Uint8Array(n), i = 0, t = x(t.data), s = t.next(); !s.done; s = t.next())
                        ((s = s.value), n.set(s, i), (i += s.length));
                      (su(r, "cenc", n), (r = r.m));
                    }
                  } else r = Promise.resolve();
                  return r;
                },
                disableStream: function (t, n) {
                  return e.disableStream(t, n);
                },
                hl: function (t, n) {
                  return !(e.g.abr.enabled && n.fastSwitching && t.Xc && t.je);
                },
              });
            }
            ((h.configure = function (e, t) {
              var n = this.getConfiguration();
              if (
                (arguments.length == 2 && typeof e == "string" && (e = td(e, t)),
                "preferredVariantRole" in e &&
                  (Je("preferredVariantRole configuration", "Please Use preferredAudioRole instead."),
                  (e.preferredAudioRole = e.preferredVariantRole),
                  delete e.preferredVariantRole),
                e.streaming &&
                  "forceTransmuxTS" in e.streaming &&
                  (Je(
                    "streaming.forceTransmuxTS configuration",
                    "Please Use mediaSource.forceTransmux instead.",
                  ),
                  (e.mediaSource = e.mediaSource || {}),
                  (e.mediaSource.mediaSource = e.streaming.forceTransmuxTS),
                  delete e.streaming.forceTransmuxTS),
                e.streaming &&
                  "forceTransmux" in e.streaming &&
                  (Je(
                    "streaming.forceTransmux configuration",
                    "Please Use mediaSource.forceTransmux instead.",
                  ),
                  (e.mediaSource = e.mediaSource || {}),
                  (e.mediaSource.mediaSource = e.streaming.forceTransmux),
                  delete e.streaming.forceTransmux),
                e.streaming && "useNativeHlsOnSafari" in e.streaming)
              ) {
                Je(
                  "streaming.useNativeHlsOnSafari configuration",
                  "Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead.",
                );
                var r = je();
                ((e.streaming.preferNativeHls = e.streaming.useNativeHlsOnSafari && r.Ha() === "WEBKIT"),
                  delete e.streaming.useNativeHlsOnSafari);
              }
              if (
                (e.streaming &&
                  typeof e.streaming.liveSync == "boolean" &&
                  (Je("streaming.liveSync", "Please Use streaming.liveSync.enabled instead."),
                  (r = e.streaming.liveSync),
                  (e.streaming.liveSync = {}),
                  (e.streaming.liveSync.enabled = r)),
                e.streaming &&
                  !(e.streaming.liveSync && "targetLatency" in e.streaming.liveSync) &&
                  ("liveSyncMinLatency" in e.streaming || "liveSyncMaxLatency" in e.streaming))
              ) {
                r = e.streaming.liveSyncMinLatency || 0;
                var i = Math.abs((e.streaming.liveSyncMaxLatency || 1) - r) / 2;
                ((e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.targetLatency = r + i),
                  (e.streaming.liveSync.targetLatencyTolerance = i));
              }
              if (
                (e.streaming &&
                  "liveSyncMaxLatency" in e.streaming &&
                  (Je(
                    "streaming.liveSyncMaxLatency",
                    "Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest",
                  ),
                  delete e.streaming.liveSyncMaxLatency),
                e.streaming &&
                  "liveSyncMinLatency" in e.streaming &&
                  (Je(
                    "streaming.liveSyncMinLatency",
                    "Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest",
                  ),
                  delete e.streaming.liveSyncMinLatency),
                e.streaming &&
                  "liveSyncTargetLatency" in e.streaming &&
                  (Je(
                    "streaming.liveSyncTargetLatency",
                    "Please Use streaming.liveSync.targetLatency instead.",
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.targetLatency = e.streaming.liveSyncTargetLatency),
                  delete e.streaming.liveSyncTargetLatency),
                e.streaming &&
                  "liveSyncTargetLatencyTolerance" in e.streaming &&
                  (Je(
                    "streaming.liveSyncTargetLatencyTolerance",
                    "Please Use streaming.liveSync.targetLatencyTolerance instead.",
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.targetLatencyTolerance = e.streaming.liveSyncTargetLatencyTolerance),
                  delete e.streaming.liveSyncTargetLatencyTolerance),
                e.streaming &&
                  "liveSyncPlaybackRate" in e.streaming &&
                  (Je(
                    "streaming.liveSyncPlaybackRate",
                    "Please Use streaming.liveSync.maxPlaybackRate instead.",
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.maxPlaybackRate = e.streaming.liveSyncPlaybackRate),
                  delete e.streaming.liveSyncPlaybackRate),
                e.streaming &&
                  "liveSyncMinPlaybackRate" in e.streaming &&
                  (Je(
                    "streaming.liveSyncMinPlaybackRate",
                    "Please Use streaming.liveSync.minPlaybackRate instead.",
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.minPlaybackRate = e.streaming.liveSyncMinPlaybackRate),
                  delete e.streaming.liveSyncMinPlaybackRate),
                e.streaming &&
                  "liveSyncPanicMode" in e.streaming &&
                  (Je("streaming.liveSyncPanicMode", "Please Use streaming.liveSync.panicMode instead."),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.panicMode = e.streaming.liveSyncPanicMode),
                  delete e.streaming.liveSyncPanicMode),
                e.streaming &&
                  "liveSyncPanicThreshold" in e.streaming &&
                  (Je(
                    "streaming.liveSyncPanicThreshold",
                    "Please Use streaming.liveSync.panicThreshold instead.",
                  ),
                  (e.streaming.liveSync = e.streaming.liveSync || {}),
                  (e.streaming.liveSync.panicThreshold = e.streaming.liveSyncPanicThreshold),
                  delete e.streaming.liveSyncPanicThreshold),
                e.mediaSource && "sourceBufferExtraFeatures" in e.mediaSource)
              ) {
                Je(
                  "mediaSource.sourceBufferExtraFeatures configuration",
                  "Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.",
                );
                var s = e.mediaSource.sourceBufferExtraFeatures;
                ((e.mediaSource.addExtraFeaturesToSourceBuffer = function () {
                  return s;
                }),
                  delete e.mediaSource.sourceBufferExtraFeatures);
              }
              if (
                (e.manifest &&
                  e.manifest.hls &&
                  "useSafariBehaviorForLive" in e.manifest.hls &&
                  (Je(
                    "manifest.hls.useSafariBehaviorForLive configuration",
                    "Please Use liveSync config to keep on live Edge instead.",
                  ),
                  delete e.manifest.hls.useSafariBehaviorForLive),
                e.streaming &&
                  "parsePrftBox" in e.streaming &&
                  (Je("streaming.parsePrftBox configuration", "Now fired without needing a configuration."),
                  delete e.streaming.parsePrftBox),
                e.manifest &&
                  e.manifest.dash &&
                  "enableAudioGroups" in e.manifest.dash &&
                  (Je(
                    "manifest.dash.enableAudioGroups configuration",
                    "Please Use manifest.enableAudioGroups instead.",
                  ),
                  (e.manifest.enableAudioGroups = e.manifest.dash.enableAudioGroups),
                  delete e.manifest.dash.enableAudioGroups),
                e.streaming &&
                  "dispatchAllEmsgBoxes" in e.streaming &&
                  (Je(
                    "streaming.dispatchAllEmsgBoxes configuration",
                    "Please Use mediaSource.dispatchAllEmsgBoxes instead.",
                  ),
                  (e.mediaSource = e.mediaSource || {}),
                  (e.mediaSource.dispatchAllEmsgBoxes = e.streaming.dispatchAllEmsgBoxes),
                  delete e.streaming.dispatchAllEmsgBoxes),
                e.streaming &&
                  "autoLowLatencyMode" in e.streaming &&
                  (Je(
                    "streaming.autoLowLatencyMode configuration",
                    "Please Use streaming.lowLatencyMode instead.",
                  ),
                  (e.streaming.lowLatencyMode = e.streaming.autoLowLatencyMode),
                  delete e.streaming.autoLowLatencyMode),
                e.manifest &&
                  e.manifest.dash &&
                  "ignoreSupplementalCodecs" in e.manifest.dash &&
                  (Je(
                    "manifest.dash.ignoreSupplementalCodecs configuration",
                    "Please Use manifest.ignoreSupplementalCodecs instead.",
                  ),
                  (e.manifest.ignoreSupplementalCodecs = e.manifest.dash.ignoreSupplementalCodecs),
                  delete e.manifest.dash.ignoreSupplementalCodecs),
                e.manifest &&
                  e.manifest.hls &&
                  "ignoreSupplementalCodecs" in e.manifest.hls &&
                  (Je(
                    "manifest.hls.ignoreSupplementalCodecs configuration",
                    "Please Use manifest.ignoreSupplementalCodecs instead.",
                  ),
                  (e.manifest.ignoreSupplementalCodecs = e.manifest.hls.ignoreSupplementalCodecs),
                  delete e.manifest.hls.ignoreSupplementalCodecs),
                e.manifest &&
                  e.manifest.dash &&
                  "updatePeriod" in e.manifest.dash &&
                  (Je(
                    "manifest.dash.updatePeriod configuration",
                    "Please Use manifest.updatePeriod instead.",
                  ),
                  (e.manifest.updatePeriod = e.manifest.dash.updatePeriod),
                  delete e.manifest.dash.updatePeriod),
                e.manifest &&
                  e.manifest.hls &&
                  "updatePeriod" in e.manifest.hls &&
                  (Je("manifest.hls.updatePeriod configuration", "Please Use manifest.updatePeriod instead."),
                  (e.manifest.updatePeriod = e.manifest.hls.updatePeriod),
                  delete e.manifest.hls.updatePeriod),
                e.manifest &&
                  e.manifest.dash &&
                  "ignoreDrmInfo" in e.manifest.dash &&
                  (Je(
                    "manifest.dash.ignoreDrmInfo configuration",
                    "Please Use manifest.ignoreDrmInfo instead.",
                  ),
                  (e.manifest.ignoreDrmInfo = e.manifest.dash.ignoreDrmInfo),
                  delete e.manifest.dash.ignoreDrmInfo),
                e.drm && e.drm.advanced)
              ) {
                r = !1;
                for (var o in e.drm.advanced) {
                  var u = e.drm.advanced[o];
                  ((i = u.videoRobustness),
                    (u = u.audioRobustness),
                    "videoRobustness" in e.drm.advanced[o] &&
                      !Array.isArray(e.drm.advanced[o].videoRobustness) &&
                      ((e.drm.advanced[o].videoRobustness = [i]), (r = !0)),
                    "audioRobustness" in e.drm.advanced[o] &&
                      !Array.isArray(e.drm.advanced[o].audioRobustness) &&
                      ((e.drm.advanced[o].audioRobustness = [u]), (r = !0)));
                }
                r &&
                  Je(
                    "AdvancedDrmConfiguration's videoRobustness and audioRobustness",
                    "These properties are no longer strings but array of strings, please update your usage of these properties.",
                  );
              }
              return (
                e.streaming &&
                  "forceHTTP" in e.streaming &&
                  (Je("streaming.forceHTTP configuration", "Please Use networking.forceHTTP instead."),
                  (e.networking = e.networking || {}),
                  (e.networking.forceHTTP = e.streaming.forceHTTP),
                  delete e.streaming.forceHTTP),
                e.streaming &&
                  "forceHTTPS" in e.streaming &&
                  (Je("streaming.forceHTTPS configuration", "Please Use networking.forceHTTP instead."),
                  (e.networking = e.networking || {}),
                  (e.networking.forceHTTPS = e.streaming.forceHTTPS),
                  delete e.streaming.forceHTTPS),
                e.streaming &&
                  "minBytesForProgressEvents" in e.streaming &&
                  (Je(
                    "streaming.minBytesForProgressEvents configuration",
                    "Please Use networking.minBytesForProgressEvents instead.",
                  ),
                  (e.networking = e.networking || {}),
                  (e.networking.minBytesForProgressEvents = e.streaming.minBytesForProgressEvents),
                  delete e.streaming.minBytesForProgressEvents),
                (o = Pi(this.g, e, ei(this))),
                f1(this, n),
                o
              );
            }),
              (h.yj = function (e) {
                this.dg = e;
              }));
            function f1(e, t) {
              if (((e.Ee = new vp(e.g, e.ya, e.F)), e.I)) {
                var n = Fr(e.g.manifest);
                (e.h && e.h.nodeName === "AUDIO" && (n.disableVideo = !0), e.I.configure(n));
              }
              if ((e.F && e.F.configure(e.g.drm), e.l)) {
                e.l.configure(e.g.streaming);
                try {
                  e.m != Vr && cx(e.Ee, e.i) && Ln(e);
                } catch (i) {
                  Wo(e, i);
                }
                (e.o && ls(e), (n = e.l.o), !n || (n.allowedByApplication && n.allowedByKeySystem) || cs(e));
              }
              if (
                (e.N && e.N.configure(e.g.networking),
                e.H && (e.H.configure(e.g.mediaSource), (e.H.Fa = e.g.manifest.segmentRelativeVttTiming)),
                e.u && vd(e),
                e.o && (e.o.configure(e.g.abr), e.g.abr.enabled ? e.o.enable() : e.o.disable(), M1(e)),
                e.R && d1(e),
                e.Ta && (e.g.streaming.rebufferingGoal ? e.Ta.Ea(0.25) : e.Ta.stop()),
                e.i && Pg(e.i.presentationTimeline, e.g.playRangeStart, e.g.playRangeEnd),
                e.C && e.C.configure(e.g.ads),
                e.K && e.K.configure(e.g.cmcd),
                e.va && e.va.configure(e.g.cmsd),
                e.Da && e.Da.configure(e.g.queue),
                e.m == ln && e.J.getConfiguration)
              ) {
                n = e.J.getConfiguration();
                var r = !1;
                (t.preferredVideoHdrLevel != e.g.preferredVideoHdrLevel &&
                  n.hdrLevel != e.g.preferredVideoHdrLevel &&
                  ((n.hdrLevel = e.g.preferredVideoHdrLevel), (r = !0)),
                  t.preferredVideoLayout != e.g.preferredVideoLayout &&
                    n.videoLayout != e.g.preferredVideoLayout &&
                    ((n.videoLayout = e.g.preferredVideoLayout), (r = !0)),
                  t.preferSpatialAudio != e.g.preferSpatialAudio &&
                    n.spatialAudio != e.g.preferSpatialAudio &&
                    ((n.spatialAudio = e.g.preferSpatialAudio), (r = !0)),
                  t.preferredVideoRole != e.g.preferredVideoRole &&
                    n.videoRole != e.g.preferredVideoRole &&
                    ((n.videoRole = e.g.preferredVideoRole), (r = !0)),
                  r && (e.J.configure(n), cs(e)));
              }
            }
            ((h.getConfiguration = function () {
              var e = ei(this);
              return (Pi(e, this.g, ei(this)), e);
            }),
              (h.Ij = function () {
                return this.dg;
              }),
              (h.ki = function () {
                var e = ei(this);
                return (Pi(e, this.g, ei(this)), xT(this.g, ei(this)));
              }),
              (h.ei = function () {
                if (this.h) {
                  var e = this.h.buffered.length;
                  e = e ? this.h.buffered.end(e - 1) : 0;
                  var t = this.getConfiguration().streaming.bufferingGoal;
                  if (((t = Math.min(this.h.currentTime + t, this.Ra().end)), e >= t)) return 1;
                  if (!(e <= this.h.currentTime) && e < t)
                    return (e - this.h.currentTime) / (t - this.h.currentTime);
                }
                return 0;
              }),
              (h.Oi = function () {
                var e = this.getConfiguration(),
                  t;
                for (t in this.g) delete this.g[t];
                (Pi(this.g, ei(this), ei(this)), f1(this, e));
              }),
              (h.$d = function () {
                return this.m;
              }),
              (h.ii = function () {
                return this.i ? this.i.type : null;
              }),
              (h.bf = function () {
                return this.h;
              }),
              (h.Yb = function () {
                return this.N;
              }),
              (h.rd = function () {
                return this.X;
              }),
              (h.di = function () {
                return this.C ? this.C : null;
              }),
              (h.mi = function () {
                return this.Da ? this.Da : null;
              }),
              (h.W = function () {
                return this.i && !this.xa()
                  ? this.i.presentationTimeline.W()
                  : this.h && (this.h.src || this.xa())
                    ? this.h.duration == 1 / 0
                    : !1;
              }),
              (h.Vc = function () {
                return this.i ? this.i.presentationTimeline.Vc() : !1;
              }),
              (h.lk = function () {
                if (this.i && !this.xa()) {
                  var e = this.i.variants;
                  return e.length ? !e[0].video : !1;
                }
                return this.h && (this.h.src || this.xa())
                  ? this.h.videoTracks
                    ? this.h.videoTracks.length == 0
                    : this.h.videoHeight == 0
                  : !1;
              }),
              (h.ti = function () {
                if (this.i && !this.xa()) {
                  var e = this.i.variants;
                  return e.length
                    ? ((e = e[0]), e.audio || !e.video ? !1 : !e.video.codecs.includes(","))
                    : !1;
                }
                return this.h && (this.h.src || this.xa()) && this.h.audioTracks
                  ? this.h.audioTracks.length == 0
                  : !1;
              }),
              (h.Ra = function () {
                if (this.i && !this.xa()) {
                  if (!this.Ua && this.i.type == "HLS") return { start: 0, end: 0 };
                  var e = this.i.presentationTimeline;
                  return { start: e.Zb(), end: e.Gb() };
                }
                if (this.h && (this.h.src || this.xa()) && (e = this.h.seekable) && e.length) {
                  var t = this.g ? this.g.playRangeStart : 0;
                  t = Math.max(e.start(0), t);
                  var n = this.g ? this.g.playRangeEnd : 1 / 0;
                  return ((e = Math.min(e.end(e.length - 1), n)), { start: t, end: e });
                }
                return { start: 0, end: 0 };
              }),
              (h.ik = function () {
                this.W() && (this.h.currentTime = this.Ra().end);
              }),
              (h.nk = function () {
                return this.Ua;
              }),
              (h.keySystem = function () {
                var e = this.drmInfo();
                return e ? e.keySystem : "";
              }),
              (h.drmInfo = function () {
                return this.F ? this.F.g : null;
              }),
              (h.Zd = function () {
                return this.F ? this.F.Zd() : 1 / 0;
              }),
              (h.Kg = function () {
                return this.F ? this.F.Kg() : [];
              }),
              (h.$e = function () {
                return this.F ? this.F.$e() : {};
              }),
              (h.Rg = function () {
                return this.R ? this.R.g == js : !!this.X;
              }),
              (h.Ob = function () {
                return this.h ? (this.M ? this.M.i : 1) : 0;
              }),
              (h.Kh = function (e) {
                this.m == ln && this.l && fT(this.l, e);
              }),
              (h.xe = function (e, t) {
                ((t = t === void 0 ? !0 : t),
                  e == 0
                    ? Be("A trick play rate of 0 is unsupported!")
                    : (this.M.set(e),
                      this.m == ln && (this.o.playbackRateChanged(e), this.Kh(t && e != 1)),
                      x1(this, e)));
              }),
              (h.Sd = function () {
                var e = this.M.Tc();
                (this.m == nr && this.M.set(e),
                  this.m == ln && (this.M.set(e), this.o.playbackRateChanged(e), this.Kh(!1)),
                  this.dc.Qa());
              }),
              (h.qc = function () {
                if (this.i && !this.xa()) {
                  for (
                    var e = this.l ? this.l.o : null, t = [], n = 0, r = x(this.i.variants), i = r.next();
                    !i.done;
                    i = r.next()
                  )
                    if (((i = i.value), iu(i))) {
                      var s = Us(i);
                      ((s.active = i == e),
                        s.active ||
                          n == 1 ||
                          e == null ||
                          i.video != e.video ||
                          i.audio != e.audio ||
                          (s.active = !0),
                        s.active && n++,
                        t.push(s));
                    }
                  return t;
                }
                if (this.h && this.h.audioTracks) {
                  var o = S1(this);
                  return (
                    (e = Array.from(this.h.audioTracks)),
                    e.length
                      ? e.map(function (u) {
                          return Tc(u, o);
                        })
                      : o
                        ? [Tc(null, o)]
                        : []
                  );
                }
                return [];
              }),
              (h.Lc = function () {
                if (this.i) {
                  if (this.xa()) return [];
                  for (
                    var e = this.l ? this.l.B : null, t = [], n = x(this.i.textStreams), r = n.next();
                    !r.done;
                    r = n.next()
                  ) {
                    r = r.value;
                    var i = Fs(r);
                    ((i.active = r == e), t.push(i));
                  }
                  return t;
                }
                return this.h && this.h.src && this.h.textTracks
                  ? xd(this).map(function (s) {
                      return _0(s);
                    })
                  : [];
              }),
              (h.Nj = function () {
                var e = this.Ke;
                return (
                  this.i && (e = this.i.imageStreams),
                  e.map(function (t) {
                    return up(t);
                  })
                );
              }),
              (h.Bj = function (e) {
                var t = this,
                  n,
                  r;
                return F(function (i) {
                  return i.g == 1
                    ? E(i, p1(t, e), 2)
                    : ((n = i.h),
                      n
                        ? ((r = []),
                          n.segmentIndex.Fb(function (s) {
                            var o = h1(s.tilesLayout || n.tilesLayout);
                            if (o)
                              for (var u = o.rows * o.columns, l = s.j - s.startTime, p = 0; p < u; p++) {
                                var m = g1(s, n, s.startTime + (l * p) / u, o);
                                r.push(m);
                              }
                          }),
                          n.closeSegmentIndex && n.closeSegmentIndex(),
                          i.return(r))
                        : i.return(null));
                });
              }));
            function h1(e) {
              return e && (e = /(\d+)x(\d+)/.exec(e))
                ? { columns: parseInt(e[1], 10), rows: parseInt(e[2], 10) }
                : null;
            }
            h.ck = function (e, t) {
              var n = this,
                r,
                i,
                s,
                o,
                u,
                l;
              return F(function (p) {
                return p.g == 1
                  ? E(p, p1(n, e), 2)
                  : ((r = p.h),
                    !r ||
                    (r.closeSegmentIndex &&
                      (n.yc.has(r) ||
                        ((i = new He(function () {
                          (r.closeSegmentIndex(), n.yc.delete(r));
                        })),
                        n.yc.set(r, i)),
                      (s = n.yc.get(r)),
                      s.ka(5)),
                    (o = r.segmentIndex.find(t)),
                    o == null)
                      ? p.return(null)
                      : ((u = r.segmentIndex.get(o)),
                        (l = h1(u.tilesLayout || r.tilesLayout))
                          ? p.return(g1(u, r, t, l))
                          : p.return(null)));
              });
            };
            function p1(e, t) {
              var n, r;
              return F(function (i) {
                return i.g == 1
                  ? (e.m != ln && e.m != nr) || ((n = e.Ke), e.i && (n = e.i.imageStreams), (r = n[0]), !r)
                    ? i.return(null)
                    : (t != null &&
                        (r = n.find(function (s) {
                          return s.id == t;
                        })),
                      r ? (r.segmentIndex ? i.A(2) : E(i, r.createSegmentIndex(), 2)) : i.return(null))
                  : i.return(r);
              });
            }
            function g1(e, t, n, r) {
              var i = t.width || 0,
                s = t.height || 0,
                o = i / r.columns,
                u = s / r.rows,
                l = r.columns * r.rows,
                p = e.j - e.startTime;
              p = e.B || p / l;
              var m = e.startTime,
                y = 0,
                v = 0;
              return (
                l > 1 &&
                  ((v = Math.floor((n - e.startTime) / p)),
                  (m = e.startTime + v * p),
                  (y = (v % r.columns) * o),
                  (v = Math.floor(v / r.columns) * u)),
                (r = !1),
                (n = e.thumbnailSprite) &&
                  ((r = !0), (u = n.height), (y = n.positionX), (v = n.positionY), (o = n.width)),
                {
                  segment: e,
                  imageHeight: s,
                  imageWidth: i,
                  height: u,
                  positionX: y,
                  positionY: v,
                  startTime: m,
                  duration: p,
                  uris: e.P(),
                  startByte: e.Jc(),
                  endByte: e.Hc(),
                  width: o,
                  sprite: r,
                  mimeType: e.mimeType || t.mimeType,
                  codecs: e.codecs || t.codecs,
                }
              );
            }
            h.ph = function (e) {
              function t() {
                var r = n.i.textStreams.find(function (i) {
                  return i.id == e.id;
                });
                r && r != n.l.B && (sg(n.B.h, r, !1), Kc(n.l, r), Li(n), Du(n), (n.Kd = r.language));
              }
              var n = this;
              (this.i && this.G && (t(), !this.xa())) ||
                (function () {
                  if (n.h && n.h.textTracks) {
                    var r = xd(n),
                      i = r.find(function (u) {
                        return xc(u) === e.id;
                      });
                    if (i) {
                      if (n.u instanceof Xt) {
                        r = x(r);
                        for (var s = r.next(); !s.done; s = r.next()) {
                          s = s.value;
                          var o = s === i ? (n.$ ? "showing" : "hidden") : "disabled";
                          s.mode !== o && (s.mode = o);
                        }
                      } else
                        ((r = r.find(function (u) {
                          return u.mode !== "disabled";
                        })),
                          r !== i &&
                            (r && ((r.mode = "disabled"), n.j.Ma(r, "cuechange"), n.u.remove(0, 1 / 0)),
                            i && m1(n, i)));
                      (Li(n), Du(n));
                    }
                  }
                })();
            };
            function m1(e, t) {
              (e.j.D(t, "cuechange", function () {
                e.u.remove(0, Math.max(0, e.h.currentTime - e.g.streaming.bufferBehind));
                var n = { periodStart: 0, segmentStart: 0, segmentEnd: e.h.duration, vttOffset: 0 },
                  r = [],
                  i = Array.from(t.activeCues || []);
                i = x(i);
                for (var s = i.next(); !s.done; s = i.next()) {
                  if (((s = s.value), s.endTime === 1 / 0 || s.endTime < s.startTime)) s = null;
                  else {
                    var o = new mt(s.startTime, s.endTime, s.text);
                    ((o.line = typeof s.line == "number" ? s.line : null),
                      s.lineAlign && (o.lineAlign = s.lineAlign),
                      (o.lineInterpretation = s.snapToLines ? qa : 1),
                      (o.position = typeof s.position == "number" ? s.position : null),
                      s.positionAlign && (o.positionAlign = s.positionAlign),
                      (o.size = s.size),
                      (o.textAlign = s.align),
                      s.vertical === "lr"
                        ? (o.writingMode = "vertical-lr")
                        : s.vertical === "rl" && (o.writingMode = "vertical-rl"),
                      s.region &&
                        ((o.region.id = s.region.id),
                        (o.region.height = s.region.lines),
                        (o.region.heightUnits = 2),
                        (o.region.regionAnchorX = s.region.regionAnchorX),
                        (o.region.regionAnchorY = s.region.regionAnchorY),
                        (o.region.scroll = s.region.scroll),
                        (o.region.viewportAnchorX = s.region.viewportAnchorX),
                        (o.region.viewportAnchorY = s.region.viewportAnchorY),
                        (o.region.viewportAnchorUnits = Jn),
                        (o.region.width = s.region.width),
                        (o.region.widthUnits = Jn)),
                      dc(o),
                      (s = o));
                  }
                  s && ((o = e.g.mediaSource.modifyCueCallback) && o(s, null, n), r.push(s));
                }
                e.u.append(r);
              }),
                (t.mode = document.pictureInPictureElement ? "showing" : "hidden"));
            }
            ((h.Jf = function (e, t, n) {
              function r() {
                var s = i.i.variants.find(function (u) {
                  return u.id == e.id;
                });
                if (s && iu(s)) {
                  var o = i.l.o;
                  (i.g.abr.enabled &&
                    (o.video != s.video ||
                      (o.audio &&
                        s.audio &&
                        o.audio.language == s.audio.language &&
                        o.audio.channelsCount == s.audio.channelsCount &&
                        o.audio.label == s.audio.label)) &&
                    Be(
                      "Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack().",
                    ),
                    i.xa() ? Pu(i, s, !1, !1, 0) : Pu(i, s, !1, t || !1, n || 0),
                    i.J.configure({
                      language: s.language,
                      role: (s.audio && s.audio.roles && s.audio.roles[0]) || "",
                      videoRole: (s.video && s.video.roles && s.video.roles[0]) || "",
                      channelCount: s.audio && s.audio.channelsCount ? s.audio.channelsCount : 0,
                      hdrLevel: s.video && s.video.hdr ? s.video.hdr : "",
                      spatialAudio: s.audio && s.audio.spatialAudio ? s.audio.spatialAudio : !1,
                      videoLayout: s.video && s.video.videoLayout ? s.video.videoLayout : "",
                      audioLabel: s.audio && s.audio.label ? s.audio.label : "",
                      videoLabel: s.video && s.video.label ? s.video.label : "",
                      codecSwitchingStrategy: i.g.mediaSource.codecSwitchingStrategy,
                      audioCodec: s.audio && s.audio.codecs ? s.audio.codecs : "",
                      activeAudioCodec: o.audio && o.audio.codecs ? o.audio.codecs : "",
                      activeAudioChannelCount: o.audio && o.audio.channelsCount ? o.audio.channelsCount : 0,
                      preferredAudioCodecs: i.g.preferredAudioCodecs,
                      preferredAudioChannelCount: i.g.preferredAudioChannelCount,
                    }),
                    ls(i));
                }
              }
              var i = this;
              ((t = t === void 0 ? !1 : t),
                (n = n === void 0 ? 0 : n),
                !(this.i && this.G && (r(), !this.xa())) &&
                  (function () {
                    if (e.originalAudioId && i.h && i.h.audioTracks) {
                      var s = Array.from(i.h.audioTracks);
                      s = x(s);
                      for (var o = s.next(); !o.done; o = s.next())
                        if (((o = o.value), xc(o) == e.id)) {
                          Rg(i, o);
                          break;
                        }
                    }
                  })());
            }),
              (h.Wk = function (e, t) {
                function n() {
                  var i = r.J.getConfiguration();
                  ((i.audioCodec = e.codecs || ""),
                    (i.audioLabel = e.label || ""),
                    (i.channelCount = e.channelsCount || 0),
                    (i.language = e.language),
                    (i.role = e.roles[0] || ""),
                    (i.spatialAudio = e.spatialAudio));
                  var s = r.l.o;
                  ((s = s && s.audio) &&
                    ((i.activeAudioCodec = s.codecs || ""),
                    (i.activeAudioChannelCount = s.channelsCount || 0)),
                    r.J.configure(i),
                    cs(r, !0, t, !1, !1));
                }
                var r = this;
                ((t = t === void 0 ? 0 : t),
                  !(this.i && this.G && (n(), !this.xa())) &&
                    (function () {
                      if (r.h && r.h.audioTracks) {
                        var i = nt(e.language),
                          s = Array.from(r.h.audioTracks),
                          o = null;
                        s = x(s);
                        for (var u = s.next(); !u.done; u = s.next()) {
                          u = u.value;
                          var l = u.language || "und";
                          if (u.label == e.label && nt(l) == i && u.kind == e.roles[0]) {
                            o = u;
                            break;
                          }
                        }
                        o && Rg(r, o);
                      }
                    })());
              }),
              (h.getAudioTracks = function () {
                if (this.i && !this.xa()) {
                  var e = this.qc();
                  if (!e.length) return [];
                  var t = e.find(function (s) {
                    return s.active;
                  });
                  if (!t) return [];
                  var n = e;
                  if (
                    (this.m != ln ||
                      this.xa() ||
                      (n = e.filter(function (s) {
                        return (
                          s.originalVideoId === t.originalVideoId &&
                          (s.audioCodec || Si.includes(s.audioMimeType || ""))
                        );
                      })),
                    !n.length)
                  )
                    return [];
                  ((e = new Map()), (n = x(n)));
                  for (var r = n.next(); !r.done; r = n.next()) {
                    r = r.value;
                    var i = r.originalAudioId;
                    (i || r.audioId == null || (i = String(r.audioId)),
                      !i && r.codecs.includes(",") && r.audioCodec && (i = "muxed-in-video"),
                      i &&
                        ((i += [
                          r.language,
                          r.label,
                          r.channelsCount,
                          r.spatialAudio,
                          r.audioCodec || "",
                        ].join("_")),
                        e.set(i, {
                          active: r.active,
                          language: r.language,
                          label: r.label,
                          mimeType: r.audioMimeType,
                          codecs: r.audioCodec,
                          primary: r.primary,
                          roles: r.audioRoles || [],
                          accessibilityPurpose: r.accessibilityPurpose,
                          channelsCount: r.channelsCount,
                          audioSamplingRate: r.audioSamplingRate,
                          spatialAudio: r.spatialAudio,
                          originalLanguage: r.originalLanguage,
                        })));
                  }
                  return Array.from(e.values());
                }
                return this.h && this.h.audioTracks
                  ? Array.from(this.h.audioTracks).map(function (s) {
                      var o = s.language;
                      return (
                        (o = {
                          active: s.enabled,
                          language: nt(o || "und"),
                          label: s.label,
                          mimeType: null,
                          codecs: null,
                          primary: s.kind == "main",
                          roles: [],
                          accessibilityPurpose: null,
                          channelsCount: null,
                          audioSamplingRate: null,
                          spatialAudio: !1,
                          originalLanguage: o,
                        }),
                        s.kind &&
                          (s.kind == "description" && (o.accessibilityPurpose = "visually impaired"),
                          o.roles.push(s.kind)),
                        s.configuration &&
                          (s.configuration.codec && (o.codecs = s.configuration.codec),
                          s.configuration.sampleRate && (o.audioSamplingRate = s.configuration.sampleRate),
                          s.configuration.numberOfChannels &&
                            (o.channelsCount = s.configuration.numberOfChannels)),
                        o
                      );
                    })
                  : [];
              }),
              (h.Yk = function (e, t, n) {
                ((t = t === void 0 ? !1 : t), (n = n === void 0 ? 0 : n));
                var r = this.qc();
                if (r.length) {
                  var i = r.find(function (o) {
                    return o.active;
                  });
                  if (i) {
                    r = r.filter(function (o) {
                      return (
                        (o.videoBandwidth || o.bandwidth) == e.bandwidth &&
                        o.width == e.width &&
                        o.height == e.height &&
                        o.frameRate == e.frameRate &&
                        o.pixelAspectRatio == e.pixelAspectRatio &&
                        o.hdr == e.hdr &&
                        o.colorGamut == e.colorGamut &&
                        o.videoLayout == e.videoLayout &&
                        o.videoMimeType == e.mimeType &&
                        o.videoCodec == e.codecs &&
                        Ki(o.videoRoles, e.roles) &&
                        o.videoLabel == e.label
                      );
                    });
                    var s;
                    (r.length == 1
                      ? (s = r[0])
                      : (s = r.find(function (o) {
                          return o.audioId === i.audioId;
                        })),
                      s ||
                        (s = r.find(function (o) {
                          return (
                            o.language == i.language &&
                            o.label === i.label &&
                            o.channelsCount === i.channelsCount &&
                            o.spatialAudio === i.spatialAudio &&
                            o.audioMimeType === i.audioMimeType &&
                            hn(o.audioCodec || "") === hn(i.audioCodec || "") &&
                            Ki(o.audioRoles, i.audioRoles)
                          );
                        })),
                      s && !s.active && this.Jf(s, t, n));
                  }
                }
              }),
              (h.getVideoTracks = function () {
                if (this.m == nr || this.xa()) return [];
                var e = this.qc();
                if (!e.length) return [];
                var t = e.find(function (s) {
                  return s.active;
                });
                if (!t) return [];
                var n = e;
                if (
                  (this.ti() ||
                    (n = e.filter(function (s) {
                      return s.videoCodec &&
                        s.audioGroupId === t.audioGroupId &&
                        s.originalAudioId === t.originalAudioId
                        ? s.audioId === t.audioId
                          ? !0
                          : s.language === t.language &&
                            s.label === t.label &&
                            s.channelsCount === t.channelsCount &&
                            s.spatialAudio === t.spatialAudio &&
                            s.audioMimeType === t.audioMimeType &&
                            hn(s.audioCodec || "") === hn(t.audioCodec || "") &&
                            Ki(s.audioRoles, t.audioRoles)
                        : !1;
                    })),
                  !n.length)
                )
                  return [];
                ((e = new Map()), (n = x(n)));
                for (var r = n.next(); !r.done; r = n.next()) {
                  r = r.value;
                  var i = r.originalVideoId;
                  (i || r.videoId == null || (i = String(r.videoId)),
                    i &&
                      e.set(i, {
                        active: r.active,
                        bandwidth: r.videoBandwidth || r.bandwidth,
                        width: r.width,
                        height: r.height,
                        frameRate: r.frameRate,
                        pixelAspectRatio: r.pixelAspectRatio,
                        hdr: r.hdr,
                        colorGamut: r.colorGamut,
                        videoLayout: r.videoLayout,
                        mimeType: r.videoMimeType,
                        codecs: r.videoCodec,
                        roles: r.videoRoles || [],
                        label: r.videoLabel,
                      }));
                }
                return Array.from(e.values());
              }),
              (h.Dj = function () {
                return _1(this.qc());
              }),
              (h.$j = function () {
                return _1(this.Lc());
              }),
              (h.Cj = function () {
                return Array.from(k1(this.qc()));
              }),
              (h.Zj = function () {
                return Array.from(k1(this.Lc()));
              }),
              (h.Ti = function (e, t, n, r, i, s, o) {
                function u() {
                  function p(A, I) {
                    return A.video || I.video
                      ? A.video && I.video
                        ? Math.abs((A.video.height || 0) - (I.video.height || 0)) +
                          Math.abs((A.video.width || 0) - (I.video.width || 0))
                        : 1 / 0
                      : 0;
                  }
                  var m = l.l.o;
                  ((l.J = l.g.adaptationSetCriteriaFactory()),
                    l.J.configure({
                      language: e,
                      role: t || "",
                      videoRole: (m.video && m.video.roles && m.video.roles[0]) || "",
                      channelCount: n || 0,
                      hdrLevel: "",
                      spatialAudio: s || !1,
                      videoLayout: "",
                      audioLabel: o || "",
                      videoLabel: "",
                      codecSwitchingStrategy: l.g.mediaSource.codecSwitchingStrategy,
                      audioCodec: i || "",
                      activeAudioCodec: m.audio && m.audio.codecs ? m.audio.codecs : "",
                      activeAudioChannelCount: m.audio && m.audio.channelsCount ? m.audio.channelsCount : 0,
                      preferredAudioCodecs: l.g.preferredAudioCodecs,
                      preferredAudioChannelCount: l.g.preferredAudioChannelCount,
                    }));
                  var y = l.J.create(l.i.variants),
                    v = null;
                  y = x(y.values());
                  for (var w = y.next(); !w.done; w = y.next())
                    ((w = w.value), iu(w) && (!v || p(v, m) > p(w, m)) && (v = w));
                  v != m && (v ? ((m = Us(v)), l.Jf(m, !0, r || 0)) : cs(l));
                }
                var l = this;
                ((n = n === void 0 ? 0 : n),
                  (r = r === void 0 ? 0 : r),
                  (i = i === void 0 ? "" : i),
                  (s = s === void 0 ? !1 : s),
                  (o = o === void 0 ? "" : o),
                  !(this.i && this.G && (u(), !this.xa())) &&
                    (function () {
                      if (l.h && l.h.audioTracks) {
                        var p = So(l.qc(), e, t || "", !1)[0];
                        p && l.Jf(p);
                      }
                    })());
              }),
              (h.oh = function (e, t, n) {
                function r() {
                  ((i.Kd = e), (i.Od = t || ""), (i.Nd = n || !1));
                  var s = So(i.i.textStreams, i.Kd, i.Od, i.Nd)[0] || null;
                  s &&
                    s != i.l.B &&
                    (sg(i.B.h, s, !1), i.g.streaming.alwaysStreamText || i.Sg()) &&
                    (Kc(i.l, s), Li(i), Du(i));
                }
                var i = this;
                ((n = n === void 0 ? !1 : n),
                  !(this.i && this.G && (r(), !this.xa())) &&
                    (function () {
                      var s = So(i.Lc(), e, t || "", n || !1)[0];
                      s && i.ph(s);
                    })());
              }),
              (h.Xk = function (e, t, n) {
                function r() {
                  for (var s = null, o = x(i.i.variants), u = o.next(); !u.done; u = o.next())
                    if (((u = u.value), u.audio.label == e)) {
                      s = u;
                      break;
                    }
                  s != null &&
                    ((i.J = i.g.adaptationSetCriteriaFactory()),
                    i.J.configure({
                      language: s.language,
                      role: "",
                      videoRole: "",
                      channelCount: 0,
                      hdrLevel: "",
                      spatialAudio: !1,
                      videoLayout: "",
                      videoLabel: "",
                      audioLabel: e,
                      codecSwitchingStrategy: i.g.mediaSource.codecSwitchingStrategy,
                      audioCodec: "",
                      activeAudioCodec: "",
                      activeAudioChannelCount: 0,
                      preferredAudioCodecs: i.g.preferredAudioCodecs,
                      preferredAudioChannelCount: i.g.preferredAudioChannelCount,
                    }),
                    cs(i, t, n));
                }
                var i = this;
                ((t = t === void 0 ? !0 : t),
                  (n = n === void 0 ? 0 : n),
                  !(this.i && this.G && (r(), !this.xa())) &&
                    (function () {
                      if (i.h && i.h.audioTracks) {
                        var s = Array.from(i.h.audioTracks),
                          o = null;
                        s = x(s);
                        for (var u = s.next(); !u.done; u = s.next())
                          ((u = u.value), u.label == e && (o = u));
                        o && Rg(i, o);
                      }
                    })());
              }),
              (h.Sg = function () {
                var e = this.$;
                return this.u ? this.u.isTextVisible() : e;
              }),
              (h.Hj = function () {
                return this.ob.map(function (e) {
                  return Fs(e);
                });
              }),
              (h.Fj = function (e) {
                if ((Je("getChapters", "Please use an getChaptersAsync."), !this.ob.length)) return [];
                var t = nt(e);
                if (
                  ((e = this.ob.filter(function (s) {
                    return nt(s.language) == t;
                  })),
                  !e.length)
                )
                  return [];
                var n = [],
                  r = new Set();
                e = x(e);
                for (var i = e.next(); !i.done; i = e.next())
                  ((i = i.value),
                    i.segmentIndex &&
                      i.segmentIndex.Fb(function (s) {
                        var o = s.P()[0],
                          u = s.startTime + "-" + s.endTime + "-" + o;
                        ((s = { id: u, title: o, startTime: s.startTime, endTime: s.endTime }),
                          r.has(u) || (n.push(s), r.add(u)));
                      }));
                return n;
              }),
              (h.Gj = function (e) {
                var t = this,
                  n,
                  r,
                  i,
                  s,
                  o,
                  u,
                  l;
                return F(function (p) {
                  switch (p.g) {
                    case 1:
                      if (!t.ob.length) return p.return([]);
                      if (
                        ((n = nt(e)),
                        (r = t.ob.filter(function (m) {
                          return nt(m.language) == n;
                        })),
                        !r.length)
                      )
                        return p.return([]);
                      ((i = []), (s = new Set()), (o = x(r)), (u = o.next()));
                    case 2:
                      if (u.done) {
                        p.A(4);
                        break;
                      }
                      if (((l = u.value), l.segmentIndex)) {
                        p.A(5);
                        break;
                      }
                      return E(p, l.createSegmentIndex(), 5);
                    case 5:
                      (l.segmentIndex.Fb(function (m) {
                        var y = m.P()[0],
                          v = m.startTime + "-" + m.endTime + "-" + y;
                        ((m = { id: v, title: y, startTime: m.startTime, endTime: m.endTime }),
                          s.has(v) || (i.push(m), s.add(v)));
                      }),
                        (u = o.next()),
                        p.A(2));
                      break;
                    case 4:
                      return p.return(i);
                  }
                });
              }));
            function xd(e) {
              return Array.from(e.h.textTracks).filter(function (t) {
                return t.kind != "metadata" && t.kind != "chapters" && t.label != "Shaka Player TextTrack";
              });
            }
            function qk(e) {
              return Array.from(e.h.textTracks).find(function (t) {
                return t.label == "Shaka Player TextTrack";
              });
            }
            function Jk(e) {
              return Array.from(e.h.textTracks).filter(function (t) {
                return t.kind == "metadata";
              });
            }
            ((h.wh = function (e) {
              ((e = !!e),
                this.$ != e &&
                  ((this.$ = e),
                  this.m == ln
                    ? (this.u.setTextVisibility(e),
                      this.g.streaming.alwaysStreamText ||
                        (e
                          ? this.l.B ||
                            ((e = So(this.i.textStreams, this.Kd, this.Od, this.Nd)),
                            e.length > 0 && (Kc(this.l, e[0]), Li(this), Du(this)))
                          : AR(this.l)))
                    : this.h && this.h.src && this.h.textTracks && this.u.setTextVisibility(e),
                  C1(this)));
            }),
              (h.Tj = function () {
                if (this.G) var e = this.G.Qd();
                else {
                  if (this.O == null) return new Date();
                  if (this.O instanceof Date) return this.O;
                  e = this.O;
                }
                if (this.i && !this.xa()) {
                  var t = this.i.presentationTimeline;
                  return new Date(((t.m || t.i) + e) * 1e3);
                }
                return this.h && this.h.getStartDate
                  ? ((t = this.h.getStartDate()), isNaN(t.getTime()) ? null : new Date(t.getTime() + e * 1e3))
                  : null;
              }),
              (h.li = function () {
                if (this.i && !this.xa()) {
                  var e = this.i.presentationTimeline;
                  return ((e = e.m || e.i), e === null ? null : new Date(e * 1e3));
                }
                return this.h && this.h.getStartDate
                  ? ((e = this.h.getStartDate()), isNaN(e.getTime()) ? null : e)
                  : null;
              }),
              (h.df = function () {
                return this.W() && this.i ? this.i.presentationTimeline.df() : null;
              }),
              (h.Gc = function () {
                if (this.m == ln) return this.H.Gc();
                var e = { total: [], audio: [], video: [], text: [] };
                return (this.m == nr && (e.total = Ri(this.h.buffered)), e);
              }));
            function y1(e) {
              if (!e.h || !e.h.currentTime) return null;
              var t = e.li();
              return t ? Math.floor(Date.now() - (t.getTime() + e.h.currentTime * 1e3)) : null;
            }
            ((h.getBandwidthEstimate = function () {
              return this.o ? this.o.getBandwidthEstimate() : NaN;
            }),
              (h.getStats = function () {
                if (this.m != ln && this.m != nr)
                  return {
                    width: NaN,
                    height: NaN,
                    currentCodecs: "",
                    streamBandwidth: NaN,
                    decodedFrames: NaN,
                    droppedFrames: NaN,
                    corruptedFrames: NaN,
                    stallsDetected: NaN,
                    gapsJumped: NaN,
                    estimatedBandwidth: NaN,
                    completionPercent: NaN,
                    loadLatency: NaN,
                    manifestTimeSeconds: NaN,
                    drmTimeSeconds: NaN,
                    playTime: NaN,
                    pauseTime: NaN,
                    bufferingTime: NaN,
                    licenseTime: NaN,
                    liveLatency: NaN,
                    maxSegmentDuration: NaN,
                    manifestSizeBytes: NaN,
                    bytesDownloaded: NaN,
                    nonFatalErrorCount: NaN,
                    manifestPeriodCount: NaN,
                    manifestGapCount: NaN,
                    switchHistory: [],
                    stateHistory: [],
                  };
                Mg(this);
                var e = this.h,
                  t = e.currentTime / e.duration;
                if (
                  (isNaN(t) || this.W() || qR(this.B, Math.round(100 * t)),
                  this.G && ((this.B.T = this.G.Lh()), (this.B.V = this.G.Nh())),
                  e.getVideoPlaybackQuality &&
                    ((t = e.getVideoPlaybackQuality()),
                    YR(this.B, Number(t.droppedVideoFrames), Number(t.totalVideoFrames)),
                    (this.B.N = Number(t.corruptedVideoFrames))),
                  (this.B.o = this.F ? rM(this.F) : NaN),
                  AT(this.B, e.videoWidth || NaN, e.videoHeight || NaN),
                  (this.B.l = ""),
                  this.W() && ((e = y1(this)), e != null && (this.B.F = e / 1e3)),
                  (t = this.qc().find(function (i) {
                    return i.active;
                  })),
                  (e = this.Lc().find(function (i) {
                    return i.active;
                  })),
                  t)
                ) {
                  if (t.bandwidth) {
                    var n = this.M ? this.M.i : 1,
                      r = n * t.bandwidth;
                    (e && e.bandwidth && (r += n * e.bandwidth), (this.B.B = r));
                  }
                  (t.width && t.height && AT(this.B, t.width || NaN, t.height || NaN),
                    (t = t.codecs),
                    e && (t += "," + (e.codecs || e.mimeType)),
                    t && (this.B.l = t));
                }
                return (
                  this.m != ln ||
                    this.xa() ||
                    (this.i &&
                      ((this.B.I = this.i.periodCount),
                      (this.B.H = this.i.gapCount),
                      this.i.presentationTimeline && (this.B.K = this.i.presentationTimeline.h)),
                    (e = this.o.getBandwidthEstimate()),
                    (this.B.u = e)),
                  this.m == nr && ET(this.B, NaN),
                  JR(this.B)
                );
              }),
              (h.Rd = function (e, t, n, r, i, s, o) {
                o = o === void 0 ? !1 : o;
                var u = this,
                  l,
                  p,
                  m,
                  y,
                  v,
                  w,
                  A,
                  I,
                  C,
                  k,
                  R,
                  L;
                return F(function (U) {
                  switch (U.g) {
                    case 1:
                      if (u.m != ln && u.m != nr) throw new H(1, 7, 7004);
                      if (
                        (n != "subtitles" &&
                          n != "captions" &&
                          Be(
                            "Using a kind value different of `subtitles` or `captions` can cause unwanted issues.",
                          ),
                        r)
                      ) {
                        U.A(2);
                        break;
                      }
                      return E(U, Td(u, e), 3);
                    case 3:
                      r = U.h;
                    case 2:
                      if (((l = []), u.C && (l = u.C.getCuePoints()), u.m != nr)) {
                        U.A(4);
                        break;
                      }
                      return (
                        (p = je()),
                        o && p.Ha() === "WEBKIT" && (n = "forced"),
                        E(U, Qk(u, e, t, n, r, s || "", l), 5)
                      );
                    case 5:
                      if (((m = U.h), m.track)) return (Ln(u), Li(u), U.return(_0(m.track)));
                      throw new H(1, 2, 2012);
                    case 4:
                      if (
                        ((y = Ot),
                        (v = u.Ra()),
                        (w = v.end - v.start),
                        u.i && (w = u.i.presentationTimeline.getDuration()),
                        w == 1 / 0)
                      )
                        throw new H(1, 4, 4033);
                      if (!l.length) {
                        U.A(6);
                        break;
                      }
                      return E(U, wd(u, e), 7);
                    case 7:
                      ((A = U.h),
                        (I = v1(u, A, r, l)),
                        (C = new Blob([I], { type: "text/vtt" })),
                        (e = Np(C)),
                        (r = "text/vtt"));
                    case 6:
                      if (
                        ((k = {
                          id: u.Fe++,
                          originalId: null,
                          groupId: null,
                          createSegmentIndex: function () {
                            return Promise.resolve();
                          },
                          segmentIndex: Gc(0, w, [e]),
                          mimeType: r || "",
                          codecs: i || "",
                          kind: n,
                          encrypted: !1,
                          drmInfos: [],
                          keyIds: new Set(),
                          language: t,
                          originalLanguage: t,
                          label: s || null,
                          type: y.Na,
                          primary: !1,
                          trickModeVideo: null,
                          dependencyStream: null,
                          emsgSchemeIdUris: null,
                          roles: [],
                          forced: !!o,
                          channelsCount: null,
                          audioSamplingRate: null,
                          spatialAudio: !1,
                          closedCaptions: null,
                          accessibilityPurpose: null,
                          external: !0,
                          fastSwitching: !1,
                          fullMimeTypes: new Set([Rt(r || "", i || "")]),
                          isAudioMuxedInVideo: !1,
                          baseOriginalId: null,
                        }),
                        (R = Rt(k.mimeType, k.codecs)),
                        (L = Za(R)),
                        !L)
                      )
                        throw new H(2, 2, 2014, r);
                      return (u.i.textStreams.push(k), Ln(u), Li(u), U.return(Fs(k)));
                  }
                });
              }),
              (h.Pe = function (e, t) {
                var n = this,
                  r,
                  i,
                  s,
                  o,
                  u,
                  l,
                  p,
                  m,
                  y,
                  v,
                  w,
                  A,
                  I,
                  C,
                  k,
                  R,
                  L,
                  U;
                return F(function (G) {
                  switch (G.g) {
                    case 1:
                      if (n.m != ln && n.m != nr) throw new H(1, 7, 7004);
                      if (t) {
                        G.A(2);
                        break;
                      }
                      return E(G, Td(n, e), 3);
                    case 3:
                      t = G.h;
                    case 2:
                      if (t != "text/vtt") throw new H(1, 2, 2017, e);
                      if (
                        ((r = Ot),
                        (i = n.Ra()),
                        (s = i.end - i.start),
                        n.i && (s = n.i.presentationTimeline.getDuration()),
                        s == 1 / 0)
                      )
                        throw new H(1, 4, 4045);
                      return E(G, wd(n, e), 4);
                    case 4:
                      if (((o = G.h), (u = Qa(t)), !u)) throw new H(2, 2, 2014, t);
                      for (
                        l = u(),
                          p = { periodStart: 0, segmentStart: 0, segmentEnd: s, vttOffset: 0 },
                          m = Le(o),
                          y = l.parseMedia(m, p, e, []),
                          v = [],
                          w = x(y),
                          A = w.next(),
                          I = {};
                        !A.done;
                        I = { Wf: void 0, nd: void 0 }, A = w.next()
                      )
                        ((I.nd = A.value),
                          (I.Wf = null),
                          (C = (function (b) {
                            return function () {
                              return (b.Wf == null && (b.Wf = Yt([e], [b.nd.payload])), b.Wf || []);
                            };
                          })(I)),
                          (k = new Me(I.nd.startTime, I.nd.endTime, C, 0, null, null, 0, 0, 1 / 0)),
                          I.nd.payload.includes("#xywh") &&
                            ((R = I.nd.payload.split("#xywh=")[1].split(",")),
                            R.length === 4 &&
                              k.Mf({
                                height: parseInt(R[3], 10),
                                positionX: parseInt(R[0], 10),
                                positionY: parseInt(R[1], 10),
                                width: parseInt(R[2], 10),
                              })),
                          v.push(k));
                      if (((L = t), !v.length)) {
                        G.A(5);
                        break;
                      }
                      return E(G, Td(n, v[0].P()[0]), 6);
                    case 6:
                      L = G.h;
                    case 5:
                      return (
                        (U = {
                          id: n.Fe++,
                          originalId: null,
                          groupId: null,
                          createSegmentIndex: function () {
                            return Promise.resolve();
                          },
                          segmentIndex: new Qe(v),
                          mimeType: L || "",
                          codecs: "",
                          kind: "",
                          encrypted: !1,
                          drmInfos: [],
                          keyIds: new Set(),
                          language: "und",
                          originalLanguage: null,
                          label: null,
                          type: r.Yf,
                          primary: !1,
                          trickModeVideo: null,
                          dependencyStream: null,
                          emsgSchemeIdUris: null,
                          roles: [],
                          forced: !1,
                          channelsCount: null,
                          audioSamplingRate: null,
                          spatialAudio: !1,
                          closedCaptions: null,
                          tilesLayout: "1x1",
                          accessibilityPurpose: null,
                          external: !0,
                          fastSwitching: !1,
                          fullMimeTypes: new Set([Rt(L || "", "")]),
                          isAudioMuxedInVideo: !1,
                          baseOriginalId: null,
                        }),
                        n.m == nr ? n.Ke.push(U) : n.i.imageStreams.push(U),
                        Ln(n),
                        G.return(up(U))
                      );
                  }
                });
              }),
              (h.Oe = function (e, t, n) {
                var r = this,
                  i,
                  s,
                  o,
                  u,
                  l,
                  p,
                  m,
                  y,
                  v,
                  w,
                  A,
                  I,
                  C,
                  k,
                  R;
                return F(function (L) {
                  switch (L.g) {
                    case 1:
                      if (r.m != ln && r.m != nr) throw new H(1, 7, 7004);
                      if (n) {
                        L.A(2);
                        break;
                      }
                      return E(L, Td(r, e), 3);
                    case 3:
                      n = L.h;
                    case 2:
                      if (
                        ((i = Ot),
                        (s = r.Ra()),
                        (o = s.end - s.start),
                        r.i && (o = r.i.presentationTimeline.getDuration()),
                        o == 1 / 0)
                      )
                        throw new H(1, 4, 4055);
                      if (((u = Qa(n)), !u)) throw new H(2, 2, 2014, n);
                      return E(L, wd(r, e), 4);
                    case 4:
                      for (
                        l = L.h,
                          p = u(),
                          m = { periodStart: 0, segmentStart: 0, segmentEnd: o, vttOffset: 0 },
                          y = Le(l),
                          v = p.parseMedia(y, m, e, []),
                          w = [],
                          A = x(v),
                          I = A.next(),
                          C = {};
                        !I.done;
                        C = { Xe: void 0 }, I = A.next()
                      )
                        ((C.Xe = I.value),
                          (k = new Me(
                            C.Xe.startTime,
                            C.Xe.endTime,
                            (function (U) {
                              return function () {
                                return [U.Xe.payload];
                              };
                            })(C),
                            0,
                            null,
                            null,
                            0,
                            0,
                            1 / 0,
                          )),
                          w.push(k));
                      return (
                        (R = {
                          id: r.Fe++,
                          originalId: null,
                          groupId: null,
                          createSegmentIndex: function () {
                            return Promise.resolve();
                          },
                          segmentIndex: new Qe(w),
                          mimeType: "text/plain",
                          codecs: "",
                          kind: "",
                          encrypted: !1,
                          drmInfos: [],
                          keyIds: new Set(),
                          language: t,
                          originalLanguage: t,
                          label: null,
                          type: i.Na,
                          primary: !1,
                          trickModeVideo: null,
                          dependencyStream: null,
                          emsgSchemeIdUris: null,
                          roles: [],
                          forced: !1,
                          channelsCount: null,
                          audioSamplingRate: null,
                          spatialAudio: !1,
                          closedCaptions: null,
                          accessibilityPurpose: null,
                          external: !0,
                          fastSwitching: !1,
                          fullMimeTypes: new Set([Rt("text/plain", "")]),
                          isAudioMuxedInVideo: !1,
                          baseOriginalId: null,
                        }),
                        r.ob.push(R),
                        Ln(r),
                        L.return(Fs(R))
                      );
                  }
                });
              }));
            function Td(e, t) {
              var n;
              return F(function (r) {
                switch (r.g) {
                  case 1:
                    return (te(r, 2), E(r, Fo(t, e.N, e.g.streaming.retryParameters), 4));
                  case 4:
                    ((n = r.h), pe(r, 3));
                    break;
                  case 2:
                    oe(r);
                  case 3:
                    if (n) return r.return(n);
                    throw new H(1, 2, 2011, t);
                }
              });
            }
            function Qk(e, t, n, r, i, s, o) {
              var u, l, p, m;
              return F(function (y) {
                if (y.g == 1) return i != "text/vtt" || o.length ? E(y, wd(e, t), 3) : y.A(2);
                (y.g != 2 &&
                  ((u = y.h),
                  (l = v1(e, u, i, o)),
                  (p = new Blob([l], { type: "text/vtt" })),
                  (t = Np(p)),
                  (i = "text/vtt")),
                  (m = document.createElement("track")));
                e: {
                  var v = e.K,
                    w = t;
                  try {
                    if (!v.g.enabled) {
                      var A = w;
                      break e;
                    }
                    var I = gg(v);
                    ((I.ot = xg), (I.su = !0));
                    var C = ku(I);
                    A = ud(w, C);
                    break e;
                  } catch (k) {
                    (lr("CMCD_TEXT_TRACK_ERROR", "Could not generate text track CMCD data.", k), (A = w));
                    break e;
                  }
                  A = void 0;
                }
                return (
                  (m.src = A),
                  (m.label = s),
                  (m.kind = r),
                  (m.srclang = n),
                  e.h.getAttribute("crossorigin") || e.h.setAttribute("crossorigin", "anonymous"),
                  e.h.appendChild(m),
                  e.cg.push(m),
                  y.return(m)
                );
              });
            }
            function wd(e, t) {
              var n, r, i, s;
              return F(function (o) {
                if (o.g == 1) {
                  ((n = Er), (r = e.g.streaming.retryParameters), (i = Ut([t], r)), (i.method = "GET"));
                  var u = e.K;
                  try {
                    u.g.enabled && zo(u, i, { ot: xg, su: !0 });
                  } catch (l) {
                    lr("CMCD_TEXT_ERROR", "Could not generate text CMCD data.", l);
                  }
                  return E(o, e.N.request(n, i).promise, 2);
                }
                return ((s = o.h), o.return(s.data));
              });
            }
            function v1(e, t, n, r) {
              var i = Qa(n);
              if (i)
                return (
                  (n = i()),
                  (e = { periodStart: 0, segmentStart: 0, segmentEnd: e.h.duration, vttOffset: 0 }),
                  (t = Le(t)),
                  (t = n.parseMedia(t, e, null, [])),
                  pk(t, r)
                );
              throw new H(2, 2, 2014, n);
            }
            ((h.fl = function (e, t) {
              ((this.ya.width = e), (this.ya.height = t));
            }),
              (h.kh = function (e) {
                if (this.m == ln) {
                  var t = this.l;
                  if (((e = e === void 0 ? 0.1 : e), t.l.g)) t = !1;
                  else if (t.F) t = !1;
                  else {
                    for (var n = x(t.h.values()), r = n.next(); !r.done; r = n.next())
                      ((r = r.value), !r.ce || r.Ka || r.qb || ((r.ce = !1), Cn(t, r, e)));
                    t = !0;
                  }
                } else t = !1;
                return t;
              }),
              (h.Lg = function () {
                return (
                  Be(
                    "Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for.",
                  ),
                  this.i
                );
              }),
              (h.Qj = function () {
                return this.zc;
              }),
              (h.Lj = function () {
                var e = { video: null, audio: null, text: null };
                if (this.m != ln) return e;
                var t = this.l.o,
                  n = this.h.currentTime;
                t = x([t.video, t.audio, this.l.B]);
                for (var r = t.next(); !r.done; r = t.next())
                  if ((r = r.value) && r.segmentIndex) {
                    var i = r.segmentIndex.find(n);
                    ((i = r.segmentIndex.get(i)),
                      (i = {
                        codecs: i.codecs || r.codecs,
                        mimeType: i.mimeType || r.mimeType,
                        bandwidth: i.bandwidth || r.bandwidth,
                      }),
                      r.type == "video"
                        ? ((i.width = r.width), (i.height = r.height), (e.video = i))
                        : r.type == "audio"
                          ? (e.audio = i)
                          : r.type == Ve && (e.text = i));
                  }
                return e;
              }));
            function ei(e) {
              var t = Ho();
              return (
                (t.streaming.failureCallback = function (n) {
                  if (e.W()) {
                    var r = null;
                    (n.code == 1001 || n.code == 1002
                      ? ((r = 1), e.g.streaming.lowLatencyMode && (r = 0.1))
                      : n.code == 1003 && (r = 0.1),
                      r != null && ((n.severity = 1), e.kh(r)));
                  }
                }),
                (t.textDisplayFactory = function () {
                  if (e.Be) {
                    var n = e.h;
                    n = !(
                      n.webkitDisplayingFullscreen ||
                      (n.webkitPresentationMode && n.webkitPresentationMode != "inline")
                    );
                  } else n = !1;
                  return n
                    ? new mn(e.h, e.Be)
                    : "track" in document.createElement("track")
                      ? new Xt(e)
                      : new gn();
                }),
                t
              );
            }
            h.Zi = function (e) {
              this.Be = e;
            };
            function Zk(e, t) {
              for (var n = new Set(), r = x(t.textStreams), i = r.next(); !i.done; i = r.next())
                ((i = i.value),
                  (i.mimeType != "application/cea-608" && i.mimeType != "application/cea-708") ||
                    n.add(i.originalId));
              for (r = x(t.variants), i = r.next(); !i.done; i = r.next())
                if ((i = i.value.video) && i.closedCaptions) {
                  for (var s = x(i.closedCaptions.keys()), o = s.next(); !o.done; o = s.next())
                    if (((o = o.value), !n.has(o))) {
                      var u = o.startsWith("CC") ? "application/cea-608" : "application/cea-708",
                        l = new Mt(),
                        p = i.closedCaptions.get(o);
                      ((u = {
                        id: e.Fe++,
                        originalId: o,
                        groupId: null,
                        createSegmentIndex: function () {
                          return Promise.resolve();
                        },
                        segmentIndex: l,
                        mimeType: u,
                        codecs: "",
                        kind: "caption",
                        encrypted: !1,
                        drmInfos: [],
                        keyIds: new Set(),
                        language: p,
                        originalLanguage: p,
                        label: null,
                        type: Ve,
                        primary: !1,
                        trickModeVideo: null,
                        dependencyStream: null,
                        emsgSchemeIdUris: null,
                        roles: i.roles,
                        forced: !1,
                        channelsCount: null,
                        audioSamplingRate: null,
                        spatialAudio: !1,
                        closedCaptions: null,
                        accessibilityPurpose: null,
                        external: !1,
                        fastSwitching: !1,
                        fullMimeTypes: new Set([Rt(u, "")]),
                        isAudioMuxedInVideo: !1,
                        baseOriginalId: null,
                      }),
                        t.textStreams.push(u),
                        n.add(o));
                    }
                }
            }
            function e_(e, t) {
              var n, r, i, s, o;
              return F(function (u) {
                return u.g == 1
                  ? ((n = e.audio),
                    (r = e.video),
                    (i = function (l, p) {
                      var m, y, v;
                      return F(function (w) {
                        return w.g == 1
                          ? l
                            ? l.segmentIndex
                              ? w.A(2)
                              : E(w, l.createSegmentIndex(), 2)
                            : w.return(null)
                          : ((y = (m = l.segmentIndex.Xb(p)) ? m.next().value : null),
                            y ? ((v = y.startTime), w.return(v)) : w.return(null));
                      });
                    }),
                    E(u, i(n, t), 2))
                  : u.g != 3
                    ? ((s = u.h), E(u, i(r, t), 3))
                    : ((o = u.h),
                      o != null && s != null
                        ? u.return(Math.max(o, s))
                        : o != null
                          ? u.return(o)
                          : s != null
                            ? u.return(s)
                            : u.return(t));
              });
            }
            function _u(e) {
              var t = e.Rg();
              if (e.B && e.R && e.G) {
                if (e.g.streaming.rebufferingGoal == 0) {
                  var n = e.M;
                  ((n.j = !1), jp(n));
                } else ((n = e.M), (n.j = t), jp(n));
                if (
                  (e.K &&
                    ((n = e.K),
                    t || n.F || (n.F = !0),
                    n.F && t && ((n.I = !0), yn(n, "ps", { dd: "r" })),
                    (n.J = t)),
                  Mg(e),
                  (n = e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts),
                  e.g.streaming.liveSync.dynamicTargetLatency.enabled && t && e.Ne < n)
                ) {
                  n = e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;
                  var r = e.g.streaming.liveSync.targetLatencyTolerance,
                    i = e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;
                  e.V && (e.V = Math.min(e.V + ++e.Ne * i, n - r));
                }
              }
              ((t = new Map().set("buffering", t)), e.dispatchEvent(ft("buffering", t)));
            }
            function x1(e, t) {
              (e.dc.Qa(),
                e.dc.D(e.h, "timeupdate", function () {
                  var n = e.h.currentTime,
                    r = e.Ra(),
                    i = e.W(),
                    s = i ? e.g.streaming.safeSeekOffset : 0;
                  t > 0
                    ? i && t > 1 && Math.floor(n) >= Math.floor(r.end) && e.Sd()
                    : Math.floor(n) <= Math.floor(r.start + s) && e.Sd();
                }));
            }
            function Mg(e) {
              if (e.B && e.R) {
                var t = e.B.g,
                  n = "playing";
                e.R.g == js ? (n = "buffering") : e.ge() ? (n = "ended") : e.h.paused && (n = "paused");
                var r = n;
                if (t.g == null) ((t.g = { timestamp: Date.now() / 1e3, state: r, duration: 0 }), (t = !0));
                else {
                  var i = Date.now() / 1e3;
                  ((t.g.duration = i - t.g.timestamp),
                    t.g.state == r
                      ? (t = !1)
                      : (t.h.push(t.g), (t.g = { timestamp: i, state: r, duration: 0 }), (t = !0)));
                }
                t && ((n = new Map().set("newstate", n)), e.dispatchEvent(ft("statechanged", n)));
              }
            }
            function T1(e) {
              var t = e.h.playbackRate,
                n = e.W();
              if (e.g.streaming.vodDynamicPlaybackRate && !n) {
                var r = e.g.streaming.vodDynamicPlaybackRateLowBufferRate,
                  i = e.ei();
                i <= e.g.streaming.vodDynamicPlaybackRateBufferRatio
                  ? t != r && e.xe(r, !1)
                  : i == 1 && t !== e.M.Tc() && e.Sd();
              }
              if (n && ((n = e.Ra()), Number.isFinite(n.end) && !(e.h.currentTime < n.start || e.h.paused))) {
                ((r = e.g.streaming.liveSync.targetLatencyTolerance),
                  (i = e.g.streaming.liveSync.dynamicTargetLatency.enabled));
                var s = e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;
                if (e.g.streaming.liveSync && e.g.streaming.liveSync.enabled)
                  var o = e.g.streaming.liveSync.targetLatency,
                    u = o + r,
                    l = Math.max(0, o - r),
                    p = e.g.streaming.liveSync.maxPlaybackRate,
                    m = e.g.streaming.liveSync.minPlaybackRate;
                else
                  e.i &&
                    e.i.serviceDescription &&
                    ((o = e.i.serviceDescription.targetLatency),
                    e.i.serviceDescription.targetLatency != null
                      ? (u = e.i.serviceDescription.targetLatency + r)
                      : e.i.serviceDescription.maxLatency != null && (u = e.i.serviceDescription.maxLatency),
                    e.i.serviceDescription.targetLatency != null
                      ? (l = Math.max(0, e.i.serviceDescription.targetLatency - r))
                      : e.i.serviceDescription.minLatency != null && (l = e.i.serviceDescription.minLatency),
                    (p = e.i.serviceDescription.maxPlaybackRate || e.g.streaming.liveSync.maxPlaybackRate),
                    (m = e.i.serviceDescription.minPlaybackRate || e.g.streaming.liveSync.minPlaybackRate));
                e.V || typeof o != "number" || (e.V = o);
                var y = e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;
                (i &&
                  e.cc &&
                  e.V !== null &&
                  typeof o == "number" &&
                  e.Ne < y &&
                  Date.now() - e.cc > s * 1e3 &&
                  ((s = e.g.streaming.liveSync.dynamicTargetLatency.minLatency),
                  (e.V = Math.max(e.V - (o - s) / 2, s + r)),
                  (e.cc = Date.now())),
                  i && e.V !== null && ((u = e.V + r), (l = e.V - r)),
                  (o = n.end - e.h.currentTime),
                  (r = 0),
                  e.m == nr &&
                    ((i = e.h.buffered),
                    i.length > 0 && ((r = i.end(i.length - 1)), (r = Math.max(p, r - n.end)))),
                  (n = e.g.streaming.liveSync.panicMode),
                  (i = e.g.streaming.liveSync.panicThreshold * 1e3),
                  (s = Date.now() - e.R.i),
                  n && !m && (m = e.g.streaming.liveSync.minPlaybackRate),
                  n && m && s <= i
                    ? t != m && e.xe(m, !1)
                    : u != null && p && o - r > u
                      ? (t != p && e.xe(p, !1), (e.cc = null))
                      : l != null && m && o - r < l
                        ? (t != m && e.xe(m, !1), (e.cc = null))
                        : t !== e.M.Tc() && (e.Sd(), (e.cc = Date.now())));
              }
            }
            function Sd(e) {
              if (e.h) {
                var t = function (i, s) {
                    return (n1(i, s, 0.01) || s > i) && e.ag < i ? ((e.ag = i), !0) : !1;
                  },
                  n = e.Ra();
                if (((n = n.end - n.start), (n = n > 0 ? e.h.currentTime / n : 0), !isNaN(n))) {
                  if (((n *= 100), t(0, n))) var r = ft("started");
                  else
                    t(25, n)
                      ? (r = ft("firstquartile"))
                      : t(50, n)
                        ? (r = ft("midpoint"))
                        : t(75, n)
                          ? (r = ft("thirdquartile"))
                          : ((t(100, n) || n > 100) && (r = ft("complete")),
                            e.g && e.g.playRangeEnd != 1 / 0 && e.ge() && e.h.pause());
                  r && e.dispatchEvent(r);
                }
              }
            }
            function ls(e) {
              try {
                fx(e.Ee, e.i);
              } catch (n) {
                return (Wo(e, n), !1);
              }
              var t = wc(e.i.variants);
              return (
                (t = e.J.create(t)),
                (e = e.o.setVariants(Array.from(t.values()))),
                typeof e == "boolean" ? e : !0
              );
            }
            function w1(e, t) {
              if (((t = t === void 0 ? !1 : t), ls(e))) {
                if (!e.g.abr.enabled) {
                  var n = e.J;
                  if (
                    (typeof n.getLastAdaptationSet != "function" &&
                      (Je(
                        "AdaptationSetCriteria w/o getLastAdaptationSet",
                        "Please use an AdaptationSetCriteria with getLastAdaptationSet.",
                      ),
                      (n.getLastAdaptationSet = function () {
                        return null;
                      })),
                    (n = n.getLastAdaptationSet()) && ((n = Array.from(n.values())), n.length))
                  ) {
                    var r = e.l.o;
                    if (
                      r &&
                      r.video &&
                      (n = n.find(function (i) {
                        return i.video == r.video;
                      }))
                    )
                      return n;
                  }
                }
                return e.o.chooseVariant(t);
              }
              return null;
            }
            function cs(e, t, n, r, i) {
              ((t = t === void 0 ? !0 : t),
                (n = n === void 0 ? 0 : n),
                (r = r === void 0 ? !1 : r),
                (i = i === void 0 ? !0 : i));
              var s = w1(e);
              s && Pu(e, s, i, t, n, r);
            }
            function Pu(e, t, n, r, i, s) {
              s = s === void 0 ? !1 : s;
              var o = e.l.o;
              if (t == o) r && hT(e.l, t, r, i, !0);
              else {
                var u = e.B.h;
                if (
                  (u.h != t &&
                    ((u.h = t),
                    u.g.push({
                      timestamp: Date.now() / 1e3,
                      id: t.id,
                      type: "variant",
                      fromAdaptation: n,
                      bandwidth: t.bandwidth,
                    })),
                  hT(e.l, t, r, i, s, n),
                  (r = null),
                  o && (r = Us(o)),
                  (o = Us(t)),
                  (o.active = !0),
                  e.T && ((i = e.T), (t = t.video)))
                ) {
                  switch ((t.dependencyStream && (t = t.dependencyStream), (s = 0), (u = -1), t.mimeType)) {
                    case "video/webm":
                      s = 1;
                      break;
                    case "video/mp4":
                      s = 2;
                  }
                  switch (e.ii()) {
                    case "DASH":
                      u = 1;
                      break;
                    case "HLS":
                      u = 0;
                  }
                  i.g &&
                    (i.g.setLevelSwitching(t.id, !0),
                    i.g.setContainerFormat(s),
                    i.j || i.g.setStreamingFormat(u));
                }
                (n
                  ? ((n = new Map().set("oldTrack", r).set("newTrack", o)),
                    (n = ft("adaptation", n)),
                    $s(e, n))
                  : A1(e, r, o),
                  E1(e, r, o));
              }
            }
            function Rg(e, t) {
              var n = Array.from(e.h.audioTracks).find(function (i) {
                return i.enabled;
              });
              if (((t.enabled = !0), n)) {
                t.id !== n.id && (n.enabled = !1);
                var r = S1(e);
                ((n = Tc(n, r)), (t = Tc(t, r)), A1(e, n, t), E1(e, n, t));
              }
            }
            function S1(e) {
              return e.h && e.h.videoTracks
                ? Array.from(e.h.videoTracks).find(function (t) {
                    return t.selected;
                  })
                : null;
            }
            function Ln(e) {
              var t = ft("trackschanged");
              ($s(e, t), I1(e));
            }
            function A1(e, t, n) {
              ((t = new Map().set("oldTrack", t).set("newTrack", n)),
                (t = ft("variantchanged", t)),
                $s(e, t));
            }
            function E1(e, t, n) {
              var r = !1;
              ((t && t.audioId == n.audioId && t.audioGroupId == n.audioGroupId) || (r = !0), r && I1(e));
            }
            function I1(e) {
              var t = ft("audiotrackschanged");
              $s(e, t);
            }
            function Li(e) {
              var t = ft("textchanged");
              $s(e, t);
            }
            function C1(e) {
              var t = ft("texttrackvisibility");
              $s(e, t);
            }
            function M1(e) {
              e.g.abr.enabled || kg(e);
              var t = new Map().set("newStatus", e.g.abr.enabled);
              $s(e, ft("abrstatuschanged", t));
            }
            function Du(e) {
              var t = e.Lc().find(function (n) {
                return n.active;
              });
              t && e.u && e.u.setTextLanguage && e.u.setTextLanguage(t.language);
            }
            function kg(e, t) {
              if (((t = t === void 0 ? !0 : t), e.m == ln)) {
                e.He.stop();
                for (var n = x(e.i.variants), r = n.next(); !r.done; r = n.next())
                  r.value.disabledUntilTime = 0;
                t && ls(e);
              }
            }
            h.disableStream = function (e, t) {
              if (!this.g.abr.enabled || this.m === Vr || !navigator.onLine || t == 0 || !this.i) return !1;
              if (
                this.i.variants.some(function (u) {
                  var l = u[e.type];
                  return l && l.id !== e.id && !u.disabledUntilTime
                    ? e.type == "audio"
                      ? e.language === l.language
                      : !0
                    : !1;
                })
              ) {
                for (var n = !1, r = !1, i = x(this.i.variants), s = i.next(); !s.done; s = i.next()) {
                  s = s.value;
                  var o = s[e.type];
                  o &&
                    (o.id === e.id
                      ? ((s.disabledUntilTime = Date.now() / 1e3 + t), (n = !0))
                      : o.trickModeVideo && o.trickModeVideo.id == e.id && (r = !0));
                }
                return !n && r
                  ? !1
                  : (this.He.Ea(1),
                    (t = this.Gc().video.reduce(function (u, l) {
                      return u + l.end - l.start;
                    }, 0)),
                    cs(this, !1, t, !0, !1),
                    !0);
              }
              return !1;
            };
            function Wo(e, t) {
              var n, r, i, s, o;
              return F(function (u) {
                switch (u.g) {
                  case 1:
                    if (e.m == Vr) return u.return();
                    if (
                      (t.severity === 1 && e.B.M++,
                      (n = !0),
                      !(e.Ua && e.i && e.l) ||
                        (t.code != 3016 &&
                          t.code != 3014 &&
                          t.code != 3015 &&
                          t.code != 3024 &&
                          t.code != 3018))
                    ) {
                      u.A(2);
                      break;
                    }
                    return (
                      (r = je()),
                      r.Ha() === "WEBKIT" && t.code == 3016 ? u.return() : (te(u, 3), E(u, Qc(e.l), 5))
                    );
                  case 5:
                    ((i = u.h),
                      (n = !i),
                      i && ((s = ft("mediasourcerecovered")), e.dispatchEvent(s)),
                      pe(u, 2));
                    break;
                  case 3:
                    (oe(u), (n = !0));
                  case 2:
                    if (!n) return u.return();
                    (t.severity === 2 && kg(e, !1),
                      (o = ft("error", new Map().set("detail", t))),
                      e.dispatchEvent(o),
                      o.defaultPrevented && (t.handled = !0),
                      re(u));
                }
              });
            }
            h.addFont = function (e, t) {
              return UM(e, t);
            };
            function Lu(e, t, n, r) {
              ((r = r === void 0 ? e : r),
                (e = new Map().set("detail", {
                  schemeIdUri: n.schemeIdUri,
                  value: n.value,
                  startTime: n.startTime,
                  endTime: n.endTime,
                  id: n.id,
                  timescale: n.timescale,
                  eventElement: n.eventElement,
                  eventNode: n.eventNode,
                })),
                r.dispatchEvent(ft(t, e)));
            }
            function R1(e, t, n, r) {
              ((r = r === void 0 ? !1 : r),
                (t = new Map()
                  .set("mediaQuality", {
                    bandwidth: t.bandwidth,
                    audioSamplingRate: t.audioSamplingRate,
                    codecs: t.codecs,
                    contentType: t.contentType,
                    frameRate: t.frameRate,
                    height: t.height,
                    mimeType: t.mimeType,
                    channelsCount: t.channelsCount,
                    pixelAspectRatio: t.pixelAspectRatio,
                    width: t.width,
                    label: t.label,
                    roles: t.roles,
                    language: t.language,
                  })
                  .set("position", n)),
                e.dispatchEvent(ft(r ? "audiotrackchanged" : "mediaqualitychanged", t)));
            }
            function _g(e, t) {
              if (((t = t === void 0 ? !0 : t), !e.h.error)) return t ? new H(2, 3, 3016) : null;
              var n = e.h.error.code;
              return !t && n == 1
                ? null
                : ((t = e.h.error.msExtendedCode) && (t < 0 && (t += 4294967296), (t = t.toString(16))),
                  new H(2, 3, 3016, n, t, e.h.error.message));
            }
            function t_(e, t) {
              var n = ft("keystatuschanged");
              e.dispatchEvent(n);
              var r = Object.keys(t);
              r.length == 1 && r[0] == "" && ((r = ["00"]), (t = { "00": t[""] }));
              var i = r.length == 1 && r[0] == "00";
              if (((n = !1), r.length)) {
                r = e.keySystem();
                for (
                  var s = Co(e.g.drm.clearKeys),
                    o = function (A, I) {
                      ((A.allowedByKeySystem = !0), (I = x(I)));
                      for (var C = I.next(); !C.done; C = I.next())
                        ((C = C.value),
                          ((C = t[i ? "00" : C]) || e.F.H) &&
                            (A.allowedByKeySystem = A.allowedByKeySystem && !!C && !hx.includes(C)));
                    },
                    u = x(e.i.variants),
                    l = u.next();
                  !l.done;
                  l = u.next()
                ) {
                  l = l.value;
                  var p = VC(l);
                  p = x(p);
                  for (var m = p.next(); !m.done; m = p.next()) {
                    m = m.value;
                    var y = l.allowedByKeySystem;
                    if (m.keyIds.size)
                      if (m.drmInfos.length && !s.size && e.i.type == "HLS")
                        for (var v = x(m.drmInfos), w = v.next(); !w.done; w = v.next())
                          ((w = w.value),
                            w.keySystem == r && (w.keyIds.size ? o(l, w.keyIds) : o(l, m.keyIds)));
                      else o(l, m.keyIds);
                    y != l.allowedByKeySystem && (n = !0);
                  }
                }
              }
              n && (Ln(e), (n = e.l.o) && !n.allowedByKeySystem ? cs(e) : ls(e));
            }
            function Pg(e, t, n) {
              (t > 0 && (e.W() || e.Yi(t)), (t = e.getDuration()), n < t && (e.W() || e.Ab(n)));
            }
            function $s(e, t) {
              F(function (n) {
                if (n.g == 1) return E(n, Promise.resolve(), 2);
                (e.m != Vr && e.dispatchEvent(t), re(n));
              });
            }
            function k1(e) {
              var t = new Set();
              e = x(e);
              for (var n = e.next(); !n.done; n = e.next())
                ((n = n.value), n.language ? t.add(nt(n.language)) : t.add("und"));
              return t;
            }
            function _1(e) {
              for (var t = new Map(), n = new Map(), r = 0; r < e.length; r++) {
                var i = e[r],
                  s = "und",
                  o = [];
                (i.language && (s = nt(i.language)),
                  i.type == "variant" ? (o = i.audioRoles) : (o = i.roles),
                  (o && o.length) || (o = [""]),
                  t.has(s) || t.set(s, new Set()),
                  (o = x(o)));
                for (var u = o.next(); !u.done; u = o.next())
                  ((u = u.value),
                    t.get(s).add(u),
                    i.label && (n.has(s) || n.set(s, new Map()), n.get(s).set(u, i.label)));
              }
              var l = [];
              return (
                t.forEach(function (p, m) {
                  p = x(p);
                  for (var y = p.next(); !y.done; y = p.next()) {
                    y = y.value;
                    var v = null;
                    (n.has(m) && n.get(m).has(y) && (v = n.get(m).get(y)),
                      l.push({ language: m, role: y, label: v }));
                  }
                }),
                l
              );
            }
            ((h.xa = function () {
              return this.h && this.h.remote ? this.h.remote.state != "disconnected" : !1;
            }),
              (h.ge = function () {
                return !this.h || this.h.ended
                  ? !0
                  : this.Ua && !this.W() && this.h.currentTime >= this.Ra().end;
              }),
              de("shaka.Player", ee),
              (ee.prototype.isEnded = ee.prototype.ge),
              (ee.prototype.isRemotePlayback = ee.prototype.xa),
              (ee.prototype.addFont = ee.prototype.addFont),
              (ee.prototype.setVideoContainer = ee.prototype.Zi),
              (ee.prototype.getFetchedPlaybackInfo = ee.prototype.Lj),
              (ee.prototype.getManifestParserFactory = ee.prototype.Qj),
              (ee.prototype.getManifest = ee.prototype.Lg),
              (ee.prototype.retryStreaming = ee.prototype.kh),
              (ee.prototype.setMaxHardwareResolution = ee.prototype.fl),
              (ee.prototype.addChaptersTrack = ee.prototype.Oe),
              (ee.prototype.addThumbnailsTrack = ee.prototype.Pe),
              (ee.prototype.addTextTrackAsync = ee.prototype.Rd),
              (ee.prototype.getStats = ee.prototype.getStats),
              (ee.prototype.getBufferedInfo = ee.prototype.Gc),
              (ee.prototype.getSegmentAvailabilityDuration = ee.prototype.df),
              (ee.prototype.getPresentationStartTimeAsDate = ee.prototype.li),
              (ee.prototype.getPlayheadTimeAsDate = ee.prototype.Tj),
              (ee.prototype.setTextTrackVisibility = ee.prototype.wh),
              (ee.prototype.getChaptersAsync = ee.prototype.Gj),
              (ee.prototype.getChapters = ee.prototype.Fj),
              (ee.prototype.getChaptersTracks = ee.prototype.Hj),
              (ee.prototype.isTextTrackVisible = ee.prototype.Sg),
              (ee.prototype.selectVariantsByLabel = ee.prototype.Xk),
              (ee.prototype.selectTextLanguage = ee.prototype.oh),
              (ee.prototype.selectAudioLanguage = ee.prototype.Ti),
              (ee.prototype.getTextLanguages = ee.prototype.Zj),
              (ee.prototype.getAudioLanguages = ee.prototype.Cj),
              (ee.prototype.getTextLanguagesAndRoles = ee.prototype.$j),
              (ee.prototype.getAudioLanguagesAndRoles = ee.prototype.Dj),
              (ee.prototype.getVideoTracks = ee.prototype.getVideoTracks),
              (ee.prototype.selectVideoTrack = ee.prototype.Yk),
              (ee.prototype.getAudioTracks = ee.prototype.getAudioTracks),
              (ee.prototype.selectAudioTrack = ee.prototype.Wk),
              (ee.prototype.selectVariantTrack = ee.prototype.Jf),
              (ee.prototype.selectTextTrack = ee.prototype.ph),
              (ee.prototype.getThumbnails = ee.prototype.ck),
              (ee.prototype.getAllThumbnails = ee.prototype.Bj),
              (ee.prototype.getImageTracks = ee.prototype.Nj),
              (ee.prototype.getTextTracks = ee.prototype.Lc),
              (ee.prototype.getVariantTracks = ee.prototype.qc),
              (ee.prototype.cancelTrickPlay = ee.prototype.Sd),
              (ee.prototype.trickPlay = ee.prototype.xe),
              (ee.prototype.useTrickPlayTrackIfAvailable = ee.prototype.Kh),
              (ee.prototype.getPlaybackRate = ee.prototype.Ob),
              (ee.prototype.isBuffering = ee.prototype.Rg),
              (ee.prototype.getKeyStatuses = ee.prototype.$e),
              (ee.prototype.getActiveSessionsMetadata = ee.prototype.Kg),
              (ee.prototype.getExpiration = ee.prototype.Zd),
              (ee.prototype.drmInfo = ee.prototype.drmInfo),
              (ee.prototype.keySystem = ee.prototype.keySystem),
              (ee.prototype.isFullyLoaded = ee.prototype.nk),
              (ee.prototype.goToLive = ee.prototype.ik),
              (ee.prototype.seekRange = ee.prototype.Ra),
              (ee.prototype.isVideoOnly = ee.prototype.ti),
              (ee.prototype.isAudioOnly = ee.prototype.lk),
              (ee.prototype.isInProgress = ee.prototype.Vc),
              (ee.prototype.isLive = ee.prototype.W),
              (ee.prototype.getQueueManager = ee.prototype.mi),
              (ee.prototype.getAdManager = ee.prototype.di),
              (ee.prototype.getAssetUri = ee.prototype.rd),
              (ee.prototype.getNetworkingEngine = ee.prototype.Yb),
              (ee.prototype.getMediaElement = ee.prototype.bf),
              (ee.prototype.getManifestType = ee.prototype.ii),
              (ee.prototype.getLoadMode = ee.prototype.$d),
              (ee.prototype.resetConfiguration = ee.prototype.Oi),
              (ee.prototype.getBufferFullness = ee.prototype.ei),
              (ee.prototype.getNonDefaultConfiguration = ee.prototype.ki),
              (ee.prototype.getConfigurationForLowLatency = ee.prototype.Ij),
              (ee.prototype.getConfiguration = ee.prototype.getConfiguration),
              (ee.prototype.configurationForLowLatency = ee.prototype.yj),
              (ee.prototype.configure = ee.prototype.configure),
              (ee.prototype.releaseAllMutexes = ee.prototype.Ok),
              (ee.prototype.destroyAllPreloads = ee.prototype.rg),
              (ee.prototype.preload = ee.prototype.preload),
              (ee.prototype.detachAndSavePreload = ee.prototype.$h),
              (ee.prototype.unloadAndSavePreload = ee.prototype.jj),
              (ee.prototype.load = ee.prototype.load),
              (ee.prototype.updateStartTime = ee.prototype.ql),
              (ee.prototype.unload = ee.prototype.Cc),
              (ee.prototype.detach = ee.prototype.detach),
              (ee.prototype.attachCanvas = ee.prototype.qj),
              (ee.prototype.attach = ee.prototype.Vb),
              (ee.probeSupport = function (e) {
                e = e === void 0 ? !0 : e;
                var t, n, r, i, s, o, u;
                return F(function (l) {
                  switch (l.g) {
                    case 1:
                      if (((t = {}), !e)) {
                        l.A(2);
                        break;
                      }
                      return E(l, uM(), 3);
                    case 3:
                      t = l.h;
                    case 2:
                      return ((n = TC()), (r = zM()), (i = je()), E(l, i.lc(), 4));
                    case 4:
                      return (
                        (s = l.h),
                        (o = { manifest: n, media: r, drm: t, hardwareResolution: s }),
                        (u = D1),
                        u.forEach(function (p, m) {
                          o[m] = p();
                        }),
                        l.return(o)
                      );
                  }
                });
              }),
              (ee.isBrowserSupported = function () {
                return (
                  g.Promise || Be("A Promise implementation or polyfill is required"),
                  !(g.Promise && g.Uint8Array && Array.prototype.forEach) ||
                  (navigator.userAgent || "").includes("Trident/")
                    ? !1
                    : (je(), ui() ? !0 : Gs().canPlayType("application/x-mpegurl") != "")
                );
              }),
              (ee.setQueueManagerFactory = function (e) {
                Id = e;
              }),
              (ee.setAdManagerFactory = function (e) {
                Ed = e;
              }),
              (ee.registerSupportPlugin = r1),
              (ee.prototype.destroy = ee.prototype.destroy));
            var Vr = 0,
              Ad = 1,
              ln = 2,
              nr = 3;
            ((ee.LoadMode = { DESTROYED: Vr, NOT_LOADED: Ad, MEDIA_SOURCE: ln, SRC_EQUALS: nr }),
              (ee.version = "v4.16.12"));
            var P1 = ["4", "16"];
            Gv = new (function (e) {
              ((this.g = e), (this.i = fC), (this.h = hC));
            })(new Uh(Number(P1[0]), Number(P1[1])));
            var D1 = new Map(),
              Ed = null,
              Id = null;
            function L1() {
              ((this.g = []), (this.i = this.m = this.l = this.j = this.h = 0));
            }
            function n_(e) {
              return e.g.length
                ? e.g.reduce(function (t, n) {
                    return t + n;
                  }, 0) / e.g.length
                : 0;
            }
            function Re(e, t, n) {
              var r = this;
              ((this.g = e),
                (this.h = t),
                (this.m = n),
                (this.i = !1),
                (this.j = this.h.getVolume()),
                (this.l = new tt()),
                this.l.D(this.h, google.ima.AdEvent.Type.PAUSED, function () {
                  r.i = !0;
                }),
                this.l.D(this.h, google.ima.AdEvent.Type.RESUMED, function () {
                  r.i = !1;
                }));
            }
            ((h = Re.prototype),
              (h.needsSkipUI = function () {
                return !1;
              }),
              (h.isClientRendering = function () {
                return !0;
              }),
              (h.hasCustomClick = function () {
                return !0;
              }),
              (h.isUsingAnotherMediaElement = function () {
                return !0;
              }),
              (h.getDuration = function () {
                return this.g.getDuration();
              }),
              (h.getMinSuggestedDuration = function () {
                return this.g.getMinSuggestedDuration();
              }),
              (h.getRemainingTime = function () {
                return this.h.getRemainingTime();
              }),
              (h.isPaused = function () {
                return this.i;
              }),
              (h.isSkippable = function () {
                return this.g.getSkipTimeOffset() >= 0;
              }),
              (h.getTimeUntilSkippable = function () {
                var e = this.g.getSkipTimeOffset();
                return ((e = this.getRemainingTime() - e), Math.max(e, 0));
              }),
              (h.canSkipNow = function () {
                return this.h.getAdSkippableState();
              }),
              (h.skip = function () {
                return this.h.skip();
              }),
              (h.pause = function () {
                return this.h.pause();
              }),
              (h.play = function () {
                return this.h.resume();
              }),
              (h.getVolume = function () {
                return this.h.getVolume();
              }),
              (h.setVolume = function (e) {
                return ((this.m.volume = e), this.h.setVolume(e));
              }),
              (h.isMuted = function () {
                return this.h.getVolume() == 0;
              }),
              (h.isLinear = function () {
                return this.g.isLinear();
              }),
              (h.resize = function (e, t) {
                this.h.resize(e, t);
              }),
              (h.setMuted = function (e) {
                (this.m.muted = e)
                  ? ((this.j = this.getVolume()), this.h.setVolume(0))
                  : this.h.setVolume(this.j);
              }),
              (h.getSequenceLength = function () {
                var e = this.g.getAdPodInfo();
                return e == null ? 1 : e.getTotalAds();
              }),
              (h.getPositionInSequence = function () {
                var e = this.g.getAdPodInfo();
                return e == null ? 1 : e.getAdPosition();
              }),
              (h.getTitle = function () {
                return this.g.getTitle();
              }),
              (h.getDescription = function () {
                return this.g.getDescription();
              }),
              (h.getVastMediaBitrate = function () {
                return this.g.getVastMediaBitrate();
              }),
              (h.getVastMediaHeight = function () {
                return this.g.getVastMediaHeight();
              }),
              (h.getVastMediaWidth = function () {
                return this.g.getVastMediaWidth();
              }),
              (h.getVastAdId = function () {
                return "";
              }),
              (h.getAdId = function () {
                return this.g.getAdId();
              }),
              (h.getCreativeAdId = function () {
                return this.g.getCreativeAdId();
              }),
              (h.getAdvertiserName = function () {
                return this.g.getAdvertiserName();
              }),
              (h.getMediaUrl = function () {
                return this.g.getMediaUrl();
              }),
              (h.getTimeOffset = function () {
                var e = this.g.getAdPodInfo();
                return e == null ? 0 : e.getTimeOffset();
              }),
              (h.getPodIndex = function () {
                var e = this.g.getAdPodInfo();
                return e == null ? 0 : e.getPodIndex();
              }),
              (h.release = function () {
                this.h = this.g = null;
              }),
              de("shaka.ads.ClientSideAd", Re),
              (Re.prototype.release = Re.prototype.release),
              (Re.prototype.getPodIndex = Re.prototype.getPodIndex),
              (Re.prototype.getTimeOffset = Re.prototype.getTimeOffset),
              (Re.prototype.getMediaUrl = Re.prototype.getMediaUrl),
              (Re.prototype.getAdvertiserName = Re.prototype.getAdvertiserName),
              (Re.prototype.getCreativeAdId = Re.prototype.getCreativeAdId),
              (Re.prototype.getAdId = Re.prototype.getAdId),
              (Re.prototype.getVastAdId = Re.prototype.getVastAdId),
              (Re.prototype.getVastMediaWidth = Re.prototype.getVastMediaWidth),
              (Re.prototype.getVastMediaHeight = Re.prototype.getVastMediaHeight),
              (Re.prototype.getVastMediaBitrate = Re.prototype.getVastMediaBitrate),
              (Re.prototype.getDescription = Re.prototype.getDescription),
              (Re.prototype.getTitle = Re.prototype.getTitle),
              (Re.prototype.getPositionInSequence = Re.prototype.getPositionInSequence),
              (Re.prototype.getSequenceLength = Re.prototype.getSequenceLength),
              (Re.prototype.setMuted = Re.prototype.setMuted),
              (Re.prototype.resize = Re.prototype.resize),
              (Re.prototype.isLinear = Re.prototype.isLinear),
              (Re.prototype.isMuted = Re.prototype.isMuted),
              (Re.prototype.setVolume = Re.prototype.setVolume),
              (Re.prototype.getVolume = Re.prototype.getVolume),
              (Re.prototype.play = Re.prototype.play),
              (Re.prototype.pause = Re.prototype.pause),
              (Re.prototype.skip = Re.prototype.skip),
              (Re.prototype.canSkipNow = Re.prototype.canSkipNow),
              (Re.prototype.getTimeUntilSkippable = Re.prototype.getTimeUntilSkippable),
              (Re.prototype.isSkippable = Re.prototype.isSkippable),
              (Re.prototype.isPaused = Re.prototype.isPaused),
              (Re.prototype.getRemainingTime = Re.prototype.getRemainingTime),
              (Re.prototype.getMinSuggestedDuration = Re.prototype.getMinSuggestedDuration),
              (Re.prototype.getDuration = Re.prototype.getDuration),
              (Re.prototype.isUsingAnotherMediaElement = Re.prototype.isUsingAnotherMediaElement),
              (Re.prototype.hasCustomClick = Re.prototype.hasCustomClick),
              (Re.prototype.isClientRendering = Re.prototype.isClientRendering),
              (Re.prototype.needsSkipUI = Re.prototype.needsSkipUI));
            function Tt() {}
            function b1(e, t) {
              var n = [];
              e = x(st(e, "Ad"));
              for (var r = e.next(); !r.done; r = e.next())
                if ((r = vt(r.value, "InLine")) && (r = vt(r, "Creatives"))) {
                  r = x(st(r, "Creative"));
                  for (var i = r.next(); !i.done; i = r.next()) {
                    i = i.value;
                    var s = vt(i, "Linear");
                    if ((s && r_(n, t, s), (i = vt(i, "NonLinearAds")))) {
                      ((i = st(i, "NonLinear")), (i = x(i)));
                      for (var o = i.next(); !o.done; o = i.next())
                        e: {
                          s = n;
                          var u = t,
                            l = o.value,
                            p = vt(l, "StaticResource");
                          if (p) o = p.attributes.creativeType;
                          else {
                            if (((p = vt(l, "HTMLResource")), !p)) break e;
                            o = "text/html";
                          }
                          if ((p = Dn(p))) {
                            o === "text/html" &&
                              (p = "data:text/html;charset=UTF-8," + encodeURIComponent(p));
                            var m = be(l, "width", sn) || be(l, "expandedWidth", sn),
                              y = be(l, "height", sn) || be(l, "expandedHeight", sn);
                            if (m || y) {
                              var v = null,
                                w = vt(l, "NonLinearClickThrough");
                              (w && (w = Dn(w)) && (v = w),
                                (w = null),
                                (l = l.attributes.minSuggestedDuration) && (w = yo(l)),
                                (l = 0),
                                u != null && (l = u),
                                s.push({
                                  id: null,
                                  groupId: null,
                                  startTime: l,
                                  endTime: null,
                                  uri: p,
                                  mimeType: o,
                                  isSkippable: !1,
                                  skipOffset: null,
                                  skipFor: null,
                                  canJump: !1,
                                  resumeOffset: 0,
                                  playoutLimit: w,
                                  once: !0,
                                  pre: u == null,
                                  post: u == 1 / 0,
                                  timelineRange: !1,
                                  loop: !1,
                                  overlay: {
                                    viewport: { x: 0, y: 0 },
                                    topLeft: { x: 0, y: 0 },
                                    size: { x: m || 0, y: y || 0 },
                                  },
                                  displayOnBackground: !1,
                                  currentVideo: null,
                                  background: null,
                                  clickThroughUrl: v,
                                }));
                            }
                          }
                        }
                    }
                  }
                }
              return n;
            }
            function r_(e, t, n) {
              var r = 0;
              t != null && (r = t);
              var i = null;
              n.attributes.skipoffset && ((i = yo(n.attributes.skipoffset)), isNaN(i) && (i = null));
              var s = vt(n, "MediaFiles");
              if (s) {
                var o = null;
                for (
                  (n = vt(n, "VideoClicks")) && (n = vt(n, "ClickThrough")) && (n = Dn(n)) && (o = n),
                    s = n = st(s, "MediaFile"),
                    n = n.filter(function (l) {
                      return l.attributes.delivery == "streaming";
                    }),
                    n.length && (s = n),
                    s = s.sort(function (l, p) {
                      return (
                        (parseInt(p.attributes.height, 10) || 0) - (parseInt(l.attributes.height, 10) || 0)
                      );
                    }),
                    s = x(s),
                    n = s.next();
                  !n.done;
                  n = s.next()
                )
                  if (((n = n.value), !n.attributes.apiFramework)) {
                    var u = Dn(n);
                    if (u) {
                      e.push({
                        id: null,
                        groupId: null,
                        startTime: r,
                        endTime: null,
                        uri: u,
                        mimeType: n.attributes.type || null,
                        isSkippable: i != null,
                        skipOffset: i,
                        skipFor: null,
                        canJump: !1,
                        resumeOffset: 0,
                        playoutLimit: null,
                        once: !0,
                        pre: t == null,
                        post: t == 1 / 0,
                        timelineRange: !1,
                        loop: !1,
                        overlay: null,
                        displayOnBackground: !1,
                        currentVideo: null,
                        background: null,
                        clickThroughUrl: o,
                      });
                      break;
                    }
                  }
              }
            }
            function i_(e) {
              var t = [];
              e = x(st(e, "vmap:AdBreak"));
              for (var n = e.next(); !n.done; n = e.next()) {
                var r = n.value,
                  i = r.attributes.timeOffset;
                i &&
                  ((n = null),
                  i == "start" ? (n = null) : i == "end" ? (n = 1 / 0) : (n = yo(i)),
                  (r = vt(r, "vmap:AdSource")) &&
                    (r = vt(r, "vmap:AdTagURI")) &&
                    (r = Lt(r)) &&
                    t.push({ time: n, uri: r }));
              }
              return t;
            }
            (de("shaka.ads.Utils", Tt),
              (Tt.ADS_LOADED = "ads-loaded"),
              (Tt.AD_STARTED = "ad-started"),
              (Tt.AD_FIRST_QUARTILE = "ad-first-quartile"),
              (Tt.AD_MIDPOINT = "ad-midpoint"),
              (Tt.AD_THIRD_QUARTILE = "ad-third-quartile"),
              (Tt.AD_COMPLETE = "ad-complete"),
              (Tt.AD_STOPPED = "ad-stopped"),
              (Tt.AD_SKIPPED = "ad-skipped"),
              (Tt.AD_VOLUME_CHANGED = "ad-volume-changed"),
              (Tt.AD_MUTED = "ad-muted"),
              (Tt.AD_PAUSED = "ad-paused"),
              (Tt.AD_RESUMED = "ad-resumed"),
              (Tt.AD_SKIP_STATE_CHANGED = "ad-skip-state-changed"),
              (Tt.CUEPOINTS_CHANGED = "ad-cue-points-changed"),
              (Tt.IMA_AD_MANAGER_LOADED = "ima-ad-manager-loaded"),
              (Tt.IMA_STREAM_MANAGER_LOADED = "ima-stream-manager-loaded"),
              (Tt.AD_CLICKED = "ad-clicked"),
              (Tt.AD_PROGRESS = "ad-progress"),
              (Tt.AD_BUFFERING = "ad-buffering"),
              (Tt.AD_IMPRESSION = "ad-impression"),
              (Tt.AD_DURATION_CHANGED = "ad-duration-changed"),
              (Tt.AD_CLOSED = "ad-closed"),
              (Tt.AD_LOADED = "ad-loaded"),
              (Tt.ALL_ADS_COMPLETED = "all-ads-completed"),
              (Tt.AD_LINEAR_CHANGED = "ad-linear-changed"),
              (Tt.AD_METADATA = "ad-metadata"),
              (Tt.AD_RECOVERABLE_ERROR = "ad-recoverable-error"),
              (Tt.AD_ERROR = "ad-error"),
              (Tt.AD_BREAK_READY = "ad-break-ready"),
              (Tt.AD_INTERACTION = "ad-interaction"),
              (Tt.AD_CONTENT_PAUSE_REQUESTED = "ad-content-pause-requested"),
              (Tt.AD_CONTENT_RESUME_REQUESTED = "ad-content-resume-requested"),
              (Tt.AD_CONTENT_ATTACH_REQUESTED = "ad-content-attach-requested"));
            function Cd(e, t, n, r, i) {
              var s = this;
              ((this.u = e),
                (this.i = t),
                (this.G = !1),
                (this.B = this.o = null),
                (this.H = NaN),
                (this.l = i),
                (this.j = null),
                (this.h = new tt()),
                google.ima.settings.setLocale(n),
                google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),
                (this.F = new google.ima.AdDisplayContainer(this.u, this.i)),
                this.F.initialize(),
                (this.m = new google.ima.AdsLoader(this.F)),
                this.m.getSettings().setPlayerType("shaka-player"),
                this.m.getSettings().setPlayerVersion("v4.16.12"),
                (this.g = null),
                (this.C = r || new google.ima.AdsRenderingSettings()),
                this.h.D(this.m, google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, function (o) {
                  s_(s, o);
                }),
                this.h.D(this.m, google.ima.AdErrorEvent.Type.AD_ERROR, function (o) {
                  N1(s, o);
                }),
                this.h.D(this.i, "ended", function () {
                  s.m.contentComplete();
                }),
                this.h.Aa(this.i, "play", function () {
                  s.G = !0;
                }));
            }
            ((Cd.prototype.configure = function (e) {
              this.o = e;
            }),
              (Cd.prototype.stop = function () {
                (this.g && this.g.stop(), this.u && hu(this.u));
              }),
              (Cd.prototype.release = function () {
                (this.stop(),
                  this.B && this.B.disconnect(),
                  this.h && this.h.release(),
                  this.g && this.g.destroy(),
                  this.m.destroy(),
                  this.F.destroy());
              }));
            function N1(e, t) {
              (t.getError(),
                (t = new Map().set("originalEvent", t)),
                e.l(new Ae("ad-error", t)),
                Md(e, null),
                e.l(new Ae("ad-cue-points-changed", new Map().set("cuepoints", []))));
            }
            function s_(e, t) {
              if (
                (e.l(new Ae("ads-loaded", new Map().set("loadTime", Date.now() / 1e3 - e.H))),
                e.o.customPlayheadTracker)
              ) {
                var n = { currentTime: e.i.currentTime };
                ((e.g = t.getAdsManager(n, e.C)),
                  e.i.muted ? e.g.setVolume(0) : e.g.setVolume(e.i.volume),
                  e.h.D(e.i, "timeupdate", function () {
                    e.i.duration && (n.currentTime = e.i.currentTime);
                  }),
                  e.h.D(e.i, "volumechange", function () {
                    e.j && (e.j.setVolume(e.i.volume), e.i.muted && e.j.setMuted(!0));
                  }));
              } else e.g = t.getAdsManager(e.i, e.C);
              e.l(new Ae("ima-ad-manager-loaded", new Map().set("imaAdManager", e.g)));
              var r = e.g.getCuePoints();
              if (r.length) {
                ((t = []), (r = x(r)));
                for (var i = r.next(); !i.done; i = r.next()) t.push({ start: i.value, end: null });
                e.l(new Ae("ad-cue-points-changed", new Map().set("cuepoints", t)));
              }
              o_(e);
              try {
                (e.g.init(e.i.offsetWidth, e.i.offsetHeight),
                  e.h.D(e.i, "loadeddata", function () {
                    e.g.resize(e.i.offsetWidth, e.i.offsetHeight);
                  }),
                  "ResizeObserver" in g
                    ? ((e.B = new ResizeObserver(function () {
                        e.g.resize(e.i.offsetWidth, e.i.offsetHeight);
                      })),
                      e.B.observe(e.i))
                    : e.h.D(document, "fullscreenchange", function () {
                        e.g.resize(e.i.offsetWidth, e.i.offsetHeight);
                      }),
                  e.G || e.o.skipPlayDetection
                    ? e.g.start()
                    : e.h.Aa(e.i, "play", function () {
                        ((e.G = !0), e.g.start());
                      }));
              } catch (s) {
                Md(e, null);
              }
            }
            function o_(e) {
              function t(n, r) {
                ((n = new Map().set("originalEvent", n)), e.l(new Ae(r, n)));
              }
              (e.h.D(e.g, google.ima.AdErrorEvent.Type.AD_ERROR, function (n) {
                N1(e, n);
              }),
                e.h.D(e.g, google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED, function (n) {
                  O1(e, n);
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.STARTED, function (n) {
                  O1(e, n);
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.FIRST_QUARTILE, function (n) {
                  t(n, "ad-first-quartile");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.MIDPOINT, function (n) {
                  t(n, "ad-midpoint");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.THIRD_QUARTILE, function (n) {
                  t(n, "ad-third-quartile");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.COMPLETE, function (n) {
                  t(n, "ad-complete");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, function (n) {
                  Md(e, n);
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.ALL_ADS_COMPLETED, function (n) {
                  (t(n, "all-ads-completed"), Md(e, n));
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.SKIPPED, function (n) {
                  t(n, "ad-skipped");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.VOLUME_CHANGED, function (n) {
                  t(n, "ad-volume-changed");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.VOLUME_MUTED, function (n) {
                  t(n, "ad-muted");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.PAUSED, function (n) {
                  e.j && ((e.j.i = !0), t(n, "ad-paused"));
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.RESUMED, function (n) {
                  e.j && ((e.j.i = !1), t(n, "ad-resumed"));
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED, function (n) {
                  e.j && t(n, "ad-skip-state-changed");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.CLICK, function (n) {
                  t(n, "ad-clicked");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.AD_PROGRESS, function (n) {
                  t(n, "ad-progress");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.AD_BUFFERING, function (n) {
                  t(n, "ad-buffering");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.IMPRESSION, function (n) {
                  t(n, "ad-impression");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.DURATION_CHANGE, function (n) {
                  t(n, "ad-duration-changed");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.USER_CLOSE, function (n) {
                  t(n, "ad-closed");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.LOADED, function (n) {
                  t(n, "ad-loaded");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.LINEAR_CHANGED, function (n) {
                  t(n, "ad-linear-changed");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.AD_METADATA, function (n) {
                  t(n, "ad-metadata");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.LOG, function (n) {
                  t(n, "ad-recoverable-error");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.AD_BREAK_READY, function (n) {
                  t(n, "ad-break-ready");
                }),
                e.h.D(e.g, google.ima.AdEvent.Type.INTERACTION, function (n) {
                  t(n, "ad-interaction");
                }));
            }
            function O1(e, t) {
              var n = t.getAd();
              n
                ? ((e.j = new Re(n, e.g, e.i)),
                  t.type != google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED ||
                    e.o.supportsMultipleMediaElements ||
                    e.l(new Ae("ad-content-pause-requested")),
                  (t = new Map().set("ad", e.j).set("sdkAdObject", n).set("originalEvent", t)),
                  e.l(new Ae("ad-started", t)),
                  e.j.isLinear() &&
                    (e.u.setAttribute("ad-active", "true"),
                    e.o.customPlayheadTracker || e.i.pause(),
                    e.i.muted
                      ? ((t = e.j), (t.j = e.i.volume), t.h.setVolume(0))
                      : e.j.setVolume(e.i.volume)))
                : Be("The IMA SDK fired a " + t.type + " event with no associated ad. Unable to play ad!");
            }
            function Md(e, t) {
              (t &&
                t.type == google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED &&
                !e.o.supportsMultipleMediaElements &&
                e.l(new Ae("ad-content-resume-requested")),
                e.l(new Ae("ad-stopped", new Map().set("originalEvent", t))),
                e.j &&
                  e.j.isLinear() &&
                  (e.u.removeAttribute("ad-active"), e.o.customPlayheadTracker || e.i.ended || e.i.play()));
            }
            function ke(e, t, n, r, i, s) {
              ((this.g = e),
                (this.h = t),
                (this.j = (this.i = t.isSkippable) ? t.skipOffset || 0 : t.skipOffset),
                (this.l = t.skipFor),
                (this.B = n),
                (this.o = r),
                (this.m = i),
                (this.u = s),
                (this.C = t.overlay));
            }
            ((h = ke.prototype),
              (h.needsSkipUI = function () {
                return !0;
              }),
              (h.isClientRendering = function () {
                return !0;
              }),
              (h.hasCustomClick = function () {
                return this.h.clickThroughUrl != null;
              }),
              (h.isUsingAnotherMediaElement = function () {
                return this.u;
              }),
              (h.getDuration = function () {
                var e = this.g.duration;
                return isNaN(e) ? -1 : e;
              }),
              (h.getMinSuggestedDuration = function () {
                return this.getDuration();
              }),
              (h.getRemainingTime = function () {
                var e = this.g.duration;
                return isNaN(e) ? -1 : e - this.g.currentTime;
              }),
              (h.isPaused = function () {
                return this.g.paused;
              }),
              (h.isSkippable = function () {
                return this.i && this.l != null
                  ? this.getDuration() - this.getRemainingTime() < this.j + this.l
                  : this.i;
              }),
              (h.getTimeUntilSkippable = function () {
                if (this.isSkippable()) {
                  var e = this.getRemainingTime() + this.j - this.getDuration();
                  return Math.max(e, 0);
                }
                return Math.max(this.getRemainingTime(), 0);
              }),
              (h.canSkipNow = function () {
                return this.i && this.getTimeUntilSkippable() == 0;
              }),
              (h.skip = function () {
                this.canSkipNow() && this.B();
              }),
              (h.pause = function () {
                return this.g.pause();
              }),
              (h.play = function () {
                return this.g.play();
              }),
              (h.getVolume = function () {
                return this.g.volume;
              }),
              (h.setVolume = function (e) {
                this.g.volume = e;
              }),
              (h.isMuted = function () {
                return this.g.muted;
              }),
              (h.isLinear = function () {
                return this.C == null;
              }),
              (h.resize = function () {}),
              (h.setMuted = function (e) {
                this.g.muted = e;
              }),
              (h.getSequenceLength = function () {
                return this.o;
              }),
              (h.getPositionInSequence = function () {
                return this.m;
              }),
              (h.getTitle = function () {
                return "";
              }),
              (h.getDescription = function () {
                return "";
              }),
              (h.getVastMediaBitrate = function () {
                return 0;
              }),
              (h.getVastMediaHeight = function () {
                return 0;
              }),
              (h.getVastMediaWidth = function () {
                return 0;
              }),
              (h.getVastAdId = function () {
                return "";
              }),
              (h.getAdId = function () {
                return this.h.id || "";
              }),
              (h.getCreativeAdId = function () {
                return "";
              }),
              (h.getAdvertiserName = function () {
                return "";
              }),
              (h.getMediaUrl = function () {
                return this.h.uri;
              }),
              (h.getTimeOffset = function () {
                return this.h.pre ? 0 : this.h.post ? -1 : this.h.startTime;
              }),
              (h.getPodIndex = function () {
                return 0;
              }),
              (h.release = function () {
                this.g = null;
              }),
              de("shaka.ads.InterstitialAd", ke),
              (ke.prototype.release = ke.prototype.release),
              (ke.prototype.getPodIndex = ke.prototype.getPodIndex),
              (ke.prototype.getTimeOffset = ke.prototype.getTimeOffset),
              (ke.prototype.getMediaUrl = ke.prototype.getMediaUrl),
              (ke.prototype.getAdvertiserName = ke.prototype.getAdvertiserName),
              (ke.prototype.getCreativeAdId = ke.prototype.getCreativeAdId),
              (ke.prototype.getAdId = ke.prototype.getAdId),
              (ke.prototype.getVastAdId = ke.prototype.getVastAdId),
              (ke.prototype.getVastMediaWidth = ke.prototype.getVastMediaWidth),
              (ke.prototype.getVastMediaHeight = ke.prototype.getVastMediaHeight),
              (ke.prototype.getVastMediaBitrate = ke.prototype.getVastMediaBitrate),
              (ke.prototype.getDescription = ke.prototype.getDescription),
              (ke.prototype.getTitle = ke.prototype.getTitle),
              (ke.prototype.getPositionInSequence = ke.prototype.getPositionInSequence),
              (ke.prototype.getSequenceLength = ke.prototype.getSequenceLength),
              (ke.prototype.setMuted = ke.prototype.setMuted),
              (ke.prototype.resize = ke.prototype.resize),
              (ke.prototype.isLinear = ke.prototype.isLinear),
              (ke.prototype.isMuted = ke.prototype.isMuted),
              (ke.prototype.setVolume = ke.prototype.setVolume),
              (ke.prototype.getVolume = ke.prototype.getVolume),
              (ke.prototype.play = ke.prototype.play),
              (ke.prototype.pause = ke.prototype.pause),
              (ke.prototype.skip = ke.prototype.skip),
              (ke.prototype.canSkipNow = ke.prototype.canSkipNow),
              (ke.prototype.getTimeUntilSkippable = ke.prototype.getTimeUntilSkippable),
              (ke.prototype.isSkippable = ke.prototype.isSkippable),
              (ke.prototype.isPaused = ke.prototype.isPaused),
              (ke.prototype.getRemainingTime = ke.prototype.getRemainingTime),
              (ke.prototype.getMinSuggestedDuration = ke.prototype.getMinSuggestedDuration),
              (ke.prototype.getDuration = ke.prototype.getDuration),
              (ke.prototype.isUsingAnotherMediaElement = ke.prototype.isUsingAnotherMediaElement),
              (ke.prototype.hasCustomClick = ke.prototype.hasCustomClick),
              (ke.prototype.isClientRendering = ke.prototype.isClientRendering),
              (ke.prototype.needsSkipUI = ke.prototype.needsSkipUI));
            function _e(e, t, n) {
              ((this.g = e), (this.j = t), (this.h = n), (this.i = e.overlay == null));
            }
            ((h = _e.prototype),
              (h.needsSkipUI = function () {
                return !0;
              }),
              (h.isClientRendering = function () {
                return !0;
              }),
              (h.hasCustomClick = function () {
                return this.g.clickThroughUrl != null;
              }),
              (h.isUsingAnotherMediaElement = function () {
                return !1;
              }),
              (h.getDuration = function () {
                return -1;
              }),
              (h.getMinSuggestedDuration = function () {
                return this.getDuration();
              }),
              (h.getRemainingTime = function () {
                return -1;
              }),
              (h.isPaused = function () {
                return !1;
              }),
              (h.isSkippable = function () {
                return !1;
              }),
              (h.getTimeUntilSkippable = function () {
                return 0;
              }),
              (h.canSkipNow = function () {
                return !1;
              }),
              (h.skip = function () {}),
              (h.pause = function () {}),
              (h.play = function () {}),
              (h.getVolume = function () {
                return 1;
              }),
              (h.setVolume = function () {}),
              (h.isMuted = function () {
                return !1;
              }),
              (h.isLinear = function () {
                return this.i;
              }),
              (h.resize = function () {}),
              (h.setMuted = function () {}),
              (h.getSequenceLength = function () {
                return this.j;
              }),
              (h.getPositionInSequence = function () {
                return this.h;
              }),
              (h.getTitle = function () {
                return "";
              }),
              (h.getDescription = function () {
                return "";
              }),
              (h.getVastMediaBitrate = function () {
                return 0;
              }),
              (h.getVastMediaHeight = function () {
                return 0;
              }),
              (h.getVastMediaWidth = function () {
                return 0;
              }),
              (h.getVastAdId = function () {
                return "";
              }),
              (h.getAdId = function () {
                return this.g.id || "";
              }),
              (h.getCreativeAdId = function () {
                return "";
              }),
              (h.getAdvertiserName = function () {
                return "";
              }),
              (h.getMediaUrl = function () {
                return this.g.uri;
              }),
              (h.getTimeOffset = function () {
                return this.g.pre ? 0 : this.g.post ? -1 : this.g.startTime;
              }),
              (h.getPodIndex = function () {
                return 0;
              }),
              (h.release = function () {}),
              de("shaka.ads.InterstitialStaticAd", _e),
              (_e.prototype.release = _e.prototype.release),
              (_e.prototype.getPodIndex = _e.prototype.getPodIndex),
              (_e.prototype.getTimeOffset = _e.prototype.getTimeOffset),
              (_e.prototype.getMediaUrl = _e.prototype.getMediaUrl),
              (_e.prototype.getAdvertiserName = _e.prototype.getAdvertiserName),
              (_e.prototype.getCreativeAdId = _e.prototype.getCreativeAdId),
              (_e.prototype.getAdId = _e.prototype.getAdId),
              (_e.prototype.getVastAdId = _e.prototype.getVastAdId),
              (_e.prototype.getVastMediaWidth = _e.prototype.getVastMediaWidth),
              (_e.prototype.getVastMediaHeight = _e.prototype.getVastMediaHeight),
              (_e.prototype.getVastMediaBitrate = _e.prototype.getVastMediaBitrate),
              (_e.prototype.getDescription = _e.prototype.getDescription),
              (_e.prototype.getTitle = _e.prototype.getTitle),
              (_e.prototype.getPositionInSequence = _e.prototype.getPositionInSequence),
              (_e.prototype.getSequenceLength = _e.prototype.getSequenceLength),
              (_e.prototype.setMuted = _e.prototype.setMuted),
              (_e.prototype.resize = _e.prototype.resize),
              (_e.prototype.isLinear = _e.prototype.isLinear),
              (_e.prototype.isMuted = _e.prototype.isMuted),
              (_e.prototype.setVolume = _e.prototype.setVolume),
              (_e.prototype.getVolume = _e.prototype.getVolume),
              (_e.prototype.play = _e.prototype.play),
              (_e.prototype.pause = _e.prototype.pause),
              (_e.prototype.skip = _e.prototype.skip),
              (_e.prototype.canSkipNow = _e.prototype.canSkipNow),
              (_e.prototype.getTimeUntilSkippable = _e.prototype.getTimeUntilSkippable),
              (_e.prototype.isSkippable = _e.prototype.isSkippable),
              (_e.prototype.isPaused = _e.prototype.isPaused),
              (_e.prototype.getRemainingTime = _e.prototype.getRemainingTime),
              (_e.prototype.getMinSuggestedDuration = _e.prototype.getMinSuggestedDuration),
              (_e.prototype.getDuration = _e.prototype.getDuration),
              (_e.prototype.isUsingAnotherMediaElement = _e.prototype.isUsingAnotherMediaElement),
              (_e.prototype.hasCustomClick = _e.prototype.hasCustomClick),
              (_e.prototype.isClientRendering = _e.prototype.isClientRendering),
              (_e.prototype.needsSkipUI = _e.prototype.needsSkipUI));
            function U1(e, t, n, r) {
              function i(o) {
                return o ? (o.overlay ? !0 : s.g.ended ? o.post : !s.g.paused) : !1;
              }
              var s = this;
              ((this.M = null),
                (this.m = e),
                (this.C = t),
                (this.g = n),
                (this.G = null),
                (this.u = !0),
                (this.h = this.g),
                (this.va = r),
                (this.ma = new Set()),
                (this.T = new Set()),
                (this.H = new Set()),
                (this.F = new Map()),
                (this.K = new Map()),
                (this.i = new ee()),
                Ng(this),
                (this.I = new tt()),
                (this.j = new tt()),
                (this.J = !1),
                (this.$ = this.o = this.B = this.l = null),
                (this.ba = !1),
                (this.O = -1),
                (this.X = function () {
                  if (!s.J && s.l && !s.C.xa()) {
                    s.l = s.g.currentTime;
                    var o = Ko(s);
                    o && i(o) && Rd(s, o, 1, 1, Date.now());
                  }
                }),
                (this.V = function () {
                  if (!(s.J || s.l || s.C.xa())) {
                    s.g.paused || (s.l = s.g.currentTime);
                    var o = Ko(s, !0);
                    (o || (o = Ko(s)), o && i(o) && Rd(s, o, 1, 1, Date.now()));
                  }
                }),
                (this.oa = function () {
                  if (!s.J && s.l && !s.C.xa()) {
                    var o = s.g.currentTime;
                    s.B && !s.B.pre && !s.B.post && o < (s.B.endTime || s.B.startTime) && (s.B = null);
                  }
                }),
                (this.R = new He(this.X)),
                (this.N = new He(function () {
                  var o, u, l, p, m, y, v, w, A, I, C;
                  return F(function (k) {
                    switch (k.g) {
                      case 1:
                        if (!s.H.size || s.l == null) {
                          k.A(0);
                          break;
                        }
                        if (((o = s.C.$d()), o == Vr || o == Ad)) return k.return();
                        ((u = !1), (l = Array.from(s.H)), (p = s.C.Ra()), (m = x(l)), (y = m.next()));
                      case 3:
                        if (y.done) {
                          k.A(5);
                          break;
                        }
                        if (((v = y.value), v == s.B)) {
                          k.A(4);
                          break;
                        }
                        if (((w = v.endTime || v.startTime), !(p.start - w >= 1))) {
                          ((A = v.startTime - s.l),
                            A > 0 &&
                              A <= 10 &&
                              (!s.F.has(v) &&
                                B1(v) &&
                                s.F.set(v, s.i.preload(v.uri, null, v.mimeType || void 0)),
                              V1(s, v)),
                            k.A(4));
                          break;
                        }
                        if (!s.F.has(v)) {
                          k.A(7);
                          break;
                        }
                        return E(k, s.F.get(v), 8);
                      case 8:
                        ((I = k.h) && I.destroy(), s.F.delete(v));
                      case 7:
                        (H1(s, v),
                          (C = v.id || JSON.stringify(v)),
                          s.T.has(C) && s.T.delete(C),
                          s.H.delete(v),
                          Dg(s),
                          v.overlay || (u = !0));
                      case 4:
                        ((y = m.next()), k.A(3));
                        break;
                      case 5:
                        (u && kd(s), re(k));
                    }
                  });
                })),
                this.configure(this.C.getConfiguration().ads));
            }
            ((h = U1.prototype),
              (h.configure = function (e) {
                ((this.M = e), this.J || Lg(this));
              }));
            function a_(e) {
              if (!e.ba && e.H.size) {
                if (
                  (e.I.D(e.g, "playing", e.V),
                  e.I.D(e.g, "timeupdate", e.V),
                  e.I.D(e.g, "seeked", e.oa),
                  e.I.D(e.g, "ended", e.X),
                  "requestVideoFrameCallback" in e.g && !j1())
                ) {
                  var t = e.g,
                    n = function () {
                      e.O != -1 && (e.X(), e.O != -1 && (e.O = t.requestVideoFrameCallback(n)));
                    };
                  e.O = t.requestVideoFrameCallback(n);
                } else e.R.Ea(0.025);
                (e.N && e.N.Ea(1), (e.ba = !0));
              }
            }
            function Dg(e) {
              e.ba &&
                !e.H.size &&
                (e.I.Ma(e.g, "playing", e.V),
                e.I.Ma(e.g, "timeupdate", e.V),
                e.I.Ma(e.g, "seeked", e.oa),
                e.I.Ma(e.g, "ended", e.X),
                e.O != -1 && (e.g.cancelVideoFrameCallback(e.O), (e.O = -1)),
                e.R && e.R.stop(),
                e.N && e.N.stop(),
                (e.ba = !1));
            }
            function Lg(e) {
              if (e.m && e.M) {
                var t = e.M.supportsMultipleMediaElements,
                  n = e.g;
                ((n.controls ||
                  (n.webkitPresentationMode && n.webkitPresentationMode !== "inline") ||
                  n.webkitDisplayingFullscreen) &&
                  (t = !1),
                  e.u == t &&
                    ((e.u = !t),
                    e.u
                      ? ((e.h = e.g), e.G && (e.G.parentElement && e.m.removeChild(e.G), (e.G = null)))
                      : (e.G ||
                          ((t = document.createElement(e.g.tagName)),
                          (t.autoplay = !0),
                          (t.style.position = "absolute"),
                          (t.style.top = "0"),
                          (t.style.left = "0"),
                          (t.style.width = "100%"),
                          (t.style.height = "100%"),
                          (t.style.display = "none"),
                          t.setAttribute("playsinline", ""),
                          (e.G = t)),
                        (e.h = e.G))));
              } else e.u = !0;
            }
            ((h.stop = function () {
              if (
                (this.j && this.j.Qa(),
                this.ma.clear(),
                this.T.clear(),
                this.H.clear(),
                this.i.rg(),
                this.F.size)
              ) {
                var e = Array.from(this.F.values());
                e = x(e);
                for (var t = e.next(); !t.done; t = e.next())
                  (t = t.value) &&
                    t.then(function (n) {
                      n && n.destroy();
                    });
              }
              if ((this.F.clear(), this.K.size))
                for (e = Array.from(this.K.keys()), e = x(e), t = e.next(); !t.done; t = e.next())
                  H1(this, t.value);
              (this.K.clear(),
                this.i.detach(),
                (this.J = !1),
                (this.B = this.l = null),
                (this.u = !0),
                (this.h = this.g),
                (this.G = null),
                bg(this),
                Dg(this),
                this.m && hu(this.m),
                this.o && (this.o.stop(), (this.o = null)));
            }),
              (h.release = function () {
                (this.stop(),
                  this.I && this.I.release(),
                  this.j && this.j.release(),
                  this.R && (this.R.stop(), (this.R = null)),
                  this.N && (this.N.stop(), (this.N = null)),
                  this.i.destroy());
              }),
              (h.td = function () {
                return this.i;
              }));
            function u_(e, t) {
              var n, r, i;
              F(function (s) {
                if (s.g == 1) {
                  if (
                    ((n = null),
                    (r = t.values.find(function (o) {
                      return o.key == "ID";
                    })) && (n = r.data),
                    n)
                  ) {
                    if (e.ma.has(n)) return s.return();
                    e.ma.add(n);
                  }
                  return (
                    Ng(e),
                    (i = []),
                    t &&
                    t.values.find(function (o) {
                      return o.key == "X-OVERLAY-ID";
                    })
                      ? ((i = h_(t)), s.A(2))
                      : E(s, f_(e, t), 3)
                  );
                }
                (s.g != 2 && (i = s.h), i.length ? bu(e, i) : Be("Unsupported HLS interstitial", t), re(s));
              });
            }
            function l_(e, t) {
              var n = vt(t.eventNode, "OverlayEvent"),
                r = n.attributes.uri,
                i = n.attributes.mimeType,
                s = n.attributes.loop == "true",
                o = be(n, "z", sn);
              if (r && o != 0) {
                var u = null,
                  l = vt(n, "Background");
                if (l) {
                  var p = l.attributes.uri;
                  p ? (u = "center / contain no-repeat url('" + p + "')") : (u = Dn(l));
                }
                ((l = 1920), (p = 1080));
                var m = vt(n, "Viewport");
                if (m && ((l = be(m, "x", sn)), l == null || ((p = be(m, "y", sn)), p == null))) return;
                var y = { viewport: { x: l, y: p }, topLeft: { x: 0, y: 0 }, size: { x: l, y: p } },
                  v = vt(n, "Overlay");
                if (m && v) {
                  var w = vt(v, "TopLeft"),
                    A = vt(v, "Size");
                  if (w && A) {
                    if (((v = be(w, "x", sn)), v == null || ((w = be(w, "y", sn)), w == null))) return;
                    var I = be(A, "x", sn);
                    if (I == null || ((A = be(A, "y", sn)), A == null)) return;
                    ((y.topLeft.x = v), (y.topLeft.y = w), (y.size.x = I), (y.size.y = A));
                  }
                }
                if (
                  ((v = null),
                  (n = vt(n, "Squeeze")),
                  m && n && ((A = vt(n, "TopLeft")), (n = vt(n, "Size")), A && n))
                ) {
                  if (
                    ((m = be(A, "x", sn)),
                    m == null ||
                      ((v = be(A, "y", sn)), v == null) ||
                      ((A = be(n, "x", sn)), A == null) ||
                      ((n = be(n, "y", sn)), n == null))
                  )
                    return;
                  v = { viewport: { x: l, y: p }, topLeft: { x: m, y: v }, size: { x: A, y: n } };
                }
                bu(e, [
                  {
                    id: t.id,
                    groupId: null,
                    startTime: t.startTime,
                    endTime: t.endTime,
                    uri: r,
                    mimeType: i,
                    isSkippable: !1,
                    skipOffset: null,
                    skipFor: null,
                    canJump: !0,
                    resumeOffset: null,
                    playoutLimit: null,
                    once: !1,
                    pre: !1,
                    post: !1,
                    timelineRange: !0,
                    loop: s,
                    overlay: y,
                    displayOnBackground: o == -1,
                    currentVideo: v,
                    background: u,
                    clickThroughUrl: null,
                  },
                ]);
              }
            }
            h.addAdUrlInterstitial = function (e) {
              var t = this,
                n,
                r,
                i,
                s,
                o,
                u,
                l,
                p,
                m;
              return F(function (y) {
                if (y.g == 1) return ((n = { type: 12 }), E(y, Og(t, e, n), 2));
                if (y.g != 3) {
                  if (((r = y.h), (i = Wa(r, "VAST,vmap:VMAP")), !i)) throw new H(2, 10, 10007);
                  if (((s = []), i.tagName == "VAST")) return ((s = b1(i, t.l)), y.A(3));
                  if (i.tagName != "vmap:VMAP") return y.A(3);
                  for (
                    o = function (v) {
                      var w, A;
                      return F(function (I) {
                        if (I.g == 1) return E(I, Og(t, v.uri, n), 2);
                        if (((w = I.h), (A = Wa(w, "VAST")), !A)) throw new H(2, 10, 10007);
                        (s.push.apply(s, Y(b1(A, v.time))), re(I));
                      });
                    },
                      u = [],
                      l = x(i_(i)),
                      p = l.next();
                    !p.done;
                    p = l.next()
                  )
                    ((m = p.value), u.push(o(m)));
                  return u.length ? E(y, Promise.all(u), 3) : y.A(3);
                }
                (bu(t, s), re(y));
              });
            };
            function bu(e, t) {
              var n, r, i, s, o, u, l, p;
              F(function (m) {
                switch (m.g) {
                  case 1:
                    ((n = !1), (r = x(t)), (i = r.next()));
                  case 2:
                    if (i.done) {
                      m.A(4);
                      break;
                    }
                    if (((s = i.value), !s.uri)) {
                      (Be("Missing URL in interstitial", s), m.A(3));
                      break;
                    }
                    if (s.mimeType) {
                      m.A(5);
                      break;
                    }
                    return (
                      te(m, 6),
                      (o = e.i.Yb()),
                      E(m, Fo(s.uri, o, e.C.getConfiguration().streaming.retryParameters), 8)
                    );
                  case 8:
                    ((s.mimeType = m.h), pe(m, 5));
                    break;
                  case 6:
                    oe(m);
                  case 5:
                    if (((u = s.id || JSON.stringify(s)), e.T.has(u))) {
                      m.A(3);
                      break;
                    }
                    (s.loop && !s.overlay && Be("Loop is only supported in overlay interstitials", s),
                      s.overlay || (n = !0),
                      e.T.add(u),
                      e.H.add(s),
                      (l = !1),
                      s.pre && e.l == null
                        ? (l = !0)
                        : s.startTime != 0 || s.canJump
                          ? e.l != null && ((p = s.startTime - e.l), p > 0 && p <= 10 && (l = !0))
                          : (l = !0),
                      l &&
                        (!e.F.has(s) && B1(s) && e.F.set(s, e.i.preload(s.uri, null, s.mimeType || void 0)),
                        V1(e, s)));
                  case 3:
                    ((i = r.next()), m.A(2));
                    break;
                  case 4:
                    (n && kd(e), a_(e), re(m));
                }
              });
            }
            function Ko(e, t, n) {
              ((t = t === void 0 ? !1 : t), (n = n === void 0 ? null : n));
              var r = 0,
                i = null;
              if (e.H.size && e.l != null) {
                var s = e.g.ended,
                  o = Array.from(e.H).sort(function (y, v) {
                    return v.startTime - y.startTime;
                  }),
                  u = o;
                for (
                  u = t
                    ? o.filter(function (y) {
                        return y.pre;
                      })
                    : s
                      ? o.filter(function (y) {
                          return y.post;
                        })
                      : o.filter(function (y) {
                          return !y.pre && !y.post;
                        }),
                    o = x(u),
                    u = o.next();
                  !u.done;
                  u = o.next()
                ) {
                  u = u.value;
                  var l = !1;
                  if (t) l = u.pre;
                  else if (s) l = u.post;
                  else if (!u.pre && !u.post) {
                    var p = e.l - Math.round(u.startTime * 1e3) / 1e3,
                      m = 1;
                    (e.M.allowStartInMiddleOfInterstitial &&
                      u.endTime &&
                      u.endTime != 1 / 0 &&
                      (m = u.endTime - u.startTime),
                      (p > 0 || (p == 0 && e.l == 0)) &&
                        (p <= m || !u.canJump) &&
                        (l = !(n == null && e.B && !e.B.pre && !e.B.post && e.B.startTime >= u.startTime)));
                  }
                  l &&
                    (!e.B || u.startTime >= e.B.startTime) &&
                    (r == (n || 0)
                      ? (i = u)
                      : i &&
                        !u.canJump &&
                        Math.round(u.startTime * 1e3) / 1e3 - Math.round(i.startTime * 1e3) / 1e3 > 0.001 &&
                        ((i = u), (r = 0)),
                    r++);
                }
              }
              return i;
            }
            function Rd(e, t, n, r, i, s) {
              ((s = s === void 0 ? 0 : s),
                (e.B = t),
                Lg(e),
                e.u || !e.m || e.h.parentElement || e.m.appendChild(e.h),
                r == 1 &&
                  n == 1 &&
                  (n = Array.from(e.H).filter(function (o) {
                    return t.pre
                      ? o.pre == t.pre
                      : t.post
                        ? o.post == t.post
                        : Math.abs(o.startTime - t.startTime) < 0.001;
                  }).length),
                t.once && (s++, e.H.delete(t), Dg(e), t.overlay || kd(e)),
                t.mimeType && (t.mimeType.startsWith("image/") || t.mimeType === "text/html")
                  ? t.overlay
                    ? c_(e, t, n, r, s)
                    : Be("Unsupported interstitial", t)
                  : e.u && t.overlay
                    ? Be("Unsupported interstitial", t)
                    : d_(e, t, n, r, i, s));
            }
            function c_(e, t, n, r, i) {
              function s() {
                (e.o && (e.o.stop(), (e.o = null)),
                  e.m.removeChild(l),
                  bg(e, t),
                  Pt(e, "ad-stopped"),
                  e.j.Qa());
                var v = Ko(e, t.pre, r - i);
                v ? Rd(e, v, n, ++r, Date.now(), i) : (e.J = !1);
              }
              e.J = !0;
              var o = t.overlay,
                u = t.mimeType == "text/html" ? "iframe" : "img",
                l = document.createElement(u);
              ((l.style.objectFit = "contain"),
                (l.style.position = "absolute"),
                (l.style.border = "none"),
                F1(e, t));
              var p = new _e(t, n, r);
              (Pt(e, "ad-impression"),
                Pt(e, "ad-started", new Map().set("ad", p)),
                u == "iframe"
                  ? (l.src = t.uri)
                  : ((l.src = t.uri),
                    (l.onerror = function (v) {
                      (Pt(e, "ad-error", new Map().set("originalEvent", v)), s());
                    })),
                (p = o.viewport));
              var m = o.topLeft;
              ((o = o.size),
                p.x == 0 && p.y == 0
                  ? ((l.width = t.overlay.size.x),
                    (l.height = t.overlay.size.y),
                    (l.style.bottom = "10%"),
                    (l.style.left = "0"),
                    (l.style.right = "0"),
                    (l.style.width = "100%"),
                    t.overlay.size.y || u != "iframe" || (l.style.height = "auto"))
                  : ((l.style.height = (o.y / p.y) * 100 + "%"),
                    (l.style.left = (m.x / p.x) * 100 + "%"),
                    (l.style.top = (m.y / p.y) * 100 + "%"),
                    (l.style.width = (o.x / p.x) * 100 + "%")),
                e.m.appendChild(l));
              var y = Date.now();
              (e.o && e.o.stop(),
                (e.o = new He(function () {
                  (t.playoutLimit && (Date.now() - y) / 1e3 > t.playoutLimit) ||
                  (t.endTime && e.g.currentTime > t.endTime)
                    ? (Pt(e, "ad-complete"), s())
                    : e.g.currentTime < t.startTime && (Pt(e, "ad-skipped"), s());
                })),
                t.playoutLimit && !t.endTime ? e.o.ka(t.playoutLimit) : t.endTime && e.o.Ea(0.025),
                e.j.D(e.g, "seeked", function () {
                  var v = e.g.currentTime;
                  (v < t.startTime || (t.endTime && v > t.endTime)) &&
                    (e.o && e.o.stop(), Pt(e, "ad-skipped"), s());
                }),
                t.clickThroughUrl &&
                  e.j.D(l, "click", function () {
                    t.clickThroughUrl && g.open(t.clickThroughUrl, "_blank");
                  }));
            }
            function d_(e, t, n, r, i, s) {
              var o, u, l, p, m, y, v, w, A, I, C, k, R, L, U, G, b, B, O, z, j;
              F(function (X) {
                switch (X.g) {
                  case 1:
                    if (
                      ((o = Date.now()),
                      (e.J = !0),
                      (u = !1),
                      (l = function () {
                        if (!e.u && !t.overlay && t.resumeOffset == null)
                          if (t.timelineRange && t.endTime && t.endTime != 1 / 0)
                            e.g.currentTime != t.endTime && (e.g.currentTime = t.endTime);
                          else {
                            var W = Date.now();
                            ((e.g.currentTime += (W - i) / 1e3), (i = W));
                          }
                      }),
                      (p = function (W) {
                        var ie, ne;
                        return F(function ($) {
                          if ($.g == 1) {
                            if ((l(), (ie = Ko(e, t.pre, r - s)), W && t.groupId))
                              for (; ie && ie.groupId == t.groupId; ) (r++, (ie = Ko(e, t.pre, r - s)));
                            return (
                              e.o &&
                                (!t.groupId || (ie && ie.groupId != t.groupId)) &&
                                (e.o.stop(), (e.o = null)),
                              bg(e, t),
                              ie && !ie.overlay
                                ? $.A(2)
                                : (t.post && ((e.l = null), (e.B = null)),
                                  e.u ? E($, e.i.detach(), 4) : E($, e.i.Cc(), 4))
                            );
                          }
                          ($.g != 2 &&
                            (e.u &&
                              ((ne = t.resumeOffset),
                              ne == null &&
                                (ne =
                                  t.timelineRange && t.endTime && t.endTime != 1 / 0
                                    ? t.endTime - (e.l || 0)
                                    : (Date.now() - i) / 1e3),
                              Pt(e, "ad-content-resume-requested", new Map().set("offset", ne))),
                            Pt(e, "ad-stopped"),
                            e.j.Qa(),
                            (e.J = !1),
                            e.u ? kd(e) : ((e.h.style.display = "none"), l(), e.g.ended || e.g.play())),
                            Lg(e),
                            ie && (Pt(e, "ad-stopped"), e.j.Qa(), Rd(e, ie, n, ++r, i, s)),
                            re($));
                        });
                      }),
                      (m = function (W) {
                        return F(function (ie) {
                          return u
                            ? ie.return()
                            : ((u = !0),
                              Pt(e, "ad-error", new Map().set("originalEvent", W)),
                              E(ie, p(!1), 0));
                        });
                      }),
                      (y = function () {
                        return F(function (W) {
                          if (W.g == 1) return u ? W.return() : ((u = !0), E(W, p(!1), 2));
                          (Pt(e, "ad-complete"), re(W));
                        });
                      }),
                      (e.$ = function () {
                        return F(function (W) {
                          return u ? W.return() : ((u = !0), Pt(e, "ad-skipped"), E(W, p(!0), 0));
                        });
                      }),
                      (v = new ke(e.h, t, e.$, n, r, !e.u)),
                      e.u || (v.setMuted(e.g.muted), v.setVolume(e.g.volume)),
                      Pt(e, "ad-started", new Map().set("ad", v)),
                      (w = v.canSkipNow()) && Pt(e, "ad-skip-state-changed"),
                      e.j.Aa(e.i, "error", m),
                      e.j.D(e.h, "timeupdate", function () {
                        if (e.h.duration) {
                          var W = v.canSkipNow();
                          (w != W &&
                            v.getRemainingTime() > 0 &&
                            v.getDuration() > 0 &&
                            Pt(e, "ad-skip-state-changed"),
                            (w = W),
                            !e.u &&
                              !t.overlay &&
                              t.resumeOffset == null &&
                              t.timelineRange &&
                              t.endTime &&
                              t.endTime != 1 / 0 &&
                              e.g.currentTime != t.endTime &&
                              e.C.Ra().end >= t.endTime &&
                              (e.g.currentTime = t.endTime));
                        }
                      }),
                      e.j.Aa(e.i, "firstquartile", function () {
                        (l(), Pt(e, "ad-first-quartile"));
                      }),
                      e.j.Aa(e.i, "midpoint", function () {
                        (l(), Pt(e, "ad-midpoint"));
                      }),
                      e.j.Aa(e.i, "thirdquartile", function () {
                        (l(), Pt(e, "ad-third-quartile"));
                      }),
                      e.j.Aa(e.i, "complete", y),
                      e.j.D(e.h, "play", function () {
                        Pt(e, "ad-resumed");
                      }),
                      e.j.D(e.h, "pause", function () {
                        var W = e.i.getConfiguration();
                        e.h.currentTime >= W.playRangeEnd ? y() : Pt(e, "ad-paused");
                      }),
                      e.j.D(e.h, "volumechange", function () {
                        e.h.muted ? Pt(e, "ad-muted") : Pt(e, "ad-volume-changed");
                      }),
                      t.clickThroughUrl &&
                        ((A = e.m || e.h),
                        e.j.D(A, "click", function () {
                          t.clickThroughUrl &&
                            (v.isPaused() || v.pause(), g.open(t.clickThroughUrl, "_blank"));
                        })),
                      !e.u || r != 1)
                    ) {
                      X.A(2);
                      break;
                    }
                    return (
                      Pt(e, "ad-content-pause-requested", new Map().set("saveLivePosition", !0)),
                      (I = new lt()),
                      (C = function (W) {
                        return F(function (ie) {
                          if (ie.g == 1)
                            return W.state != "detach"
                              ? ie.A(0)
                              : j1()
                                ? E(
                                    ie,
                                    new Promise(function (ne) {
                                      return new He(ne).ka(0.1);
                                    }),
                                    3,
                                  )
                                : ie.A(3);
                          (I.resolve(), e.j.Ma(e.C, "onstatechange", C), re(ie));
                        });
                      }),
                      e.j.D(e.C, "onstatechange", C),
                      E(X, I, 2)
                    );
                  case 2:
                    return (
                      F1(e, t),
                      e.u ||
                        ((e.h.style.display = ""),
                        t.overlay
                          ? ((e.h.loop = t.loop),
                            (k = t.overlay.viewport),
                            (R = t.overlay.topLeft),
                            (L = t.overlay.size),
                            (e.h.style.height = (L.y / k.y) * 100 + "%"),
                            (e.h.style.left = (R.x / k.x) * 100 + "%"),
                            (e.h.style.top = (R.y / k.y) * 100 + "%"),
                            (e.h.style.width = (L.x / k.x) * 100 + "%"))
                          : (e.g.pause(),
                            t.resumeOffset != null &&
                              t.resumeOffset != 0 &&
                              (e.g.currentTime += t.resumeOffset),
                            (e.h.loop = !1),
                            (e.h.style.height = "100%"),
                            (e.h.style.left = "0"),
                            (e.h.style.top = "0"),
                            (e.h.style.width = "100%"))),
                      te(X, 4),
                      Ng(e),
                      t.startTime &&
                        t.endTime &&
                        t.endTime != 1 / 0 &&
                        t.startTime != t.endTime &&
                        ((U = t.endTime - t.startTime), U > 0 && e.i.configure("playRangeEnd", U)),
                      t.playoutLimit &&
                        !e.o &&
                        ((e.o = new He(function () {
                          e.$();
                        }).ka(t.playoutLimit)),
                        e.i.configure("playRangeEnd", t.playoutLimit)),
                      E(X, e.i.Vb(e.h), 6)
                    );
                  case 6:
                    return (
                      (G = null),
                      t.pre ||
                        t.post ||
                        !e.M.allowStartInMiddleOfInterstitial ||
                        e.l == null ||
                        ((b = e.l - t.startTime), Math.abs(b) > 0.25 && (G = b)),
                      e.F.has(t) ? E(X, e.F.get(t), 10) : E(X, e.i.load(t.uri, G, t.mimeType || void 0), 8)
                    );
                  case 10:
                    return (
                      (B = X.h),
                      e.F.delete(t),
                      B ? E(X, e.i.load(B), 8) : E(X, e.i.load(t.uri, G, t.mimeType || void 0), 8)
                    );
                  case 8:
                    (t.overlay && e.g.paused ? e.h.pause() : e.h.play(),
                      (O = (Date.now() - o) / 1e3),
                      Pt(e, "ads-loaded", new Map().set("loadTime", O)),
                      e.u && e.g.play(),
                      t.overlay &&
                        (t.pre ||
                          t.post ||
                          (e.C.W() && !(t.startTime > 0)) ||
                          ((z = function () {
                            var W = e.g.currentTime - t.startTime;
                            Math.abs(W - e.h.currentTime) > 0.1 && (e.h.currentTime = W);
                          }),
                          e.j.Aa(e.h, "playing", z),
                          e.j.D(e.g, "seeking", z)),
                        e.j.D(e.g, "seeked", function () {
                          var W = e.g.currentTime;
                          (W < t.startTime || (t.endTime && W > t.endTime)) && e.$();
                        })),
                      pe(X, 0));
                    break;
                  case 4:
                    if (((j = oe(X)), !e.J)) return X.return();
                    (m(j), re(X));
                }
              });
            }
            function F1(e, t) {
              if ((t.displayOnBackground && (e.g.style.zIndex = "1"), t.currentVideo != null)) {
                var n = t.currentVideo;
                e.g.style.transformOrigin = "top left";
                var r = !0,
                  i = [],
                  s = (n.topLeft.x / n.viewport.x) * 100;
                (s > 0 && s <= 100 && (i.push("translateX(" + s + "%)"), (r = !1)),
                  (s = (n.topLeft.y / n.viewport.y) * 100),
                  s > 0 && s <= 100 && (i.push("translateY(" + s + "%)"), (r = !1)),
                  (s = n.size.x / n.viewport.x),
                  s < 1 && i.push("scaleX(" + s + ")"),
                  (n = n.size.y / n.viewport.y),
                  s < 1 && i.push("scaleY(" + n + ")"),
                  i.length && (e.g.style.transform = i.join(" ")),
                  r && (e.g.style.transition = "transform 250ms"));
              }
              (e.m &&
                (t.clickThroughUrl
                  ? (e.m.setAttribute("ad-active", "true"), (e.m.style.pointerEvents = ""))
                  : (e.m.style.pointerEvents = "none"),
                t.background && (e.m.style.background = t.background)),
                e.G && (e.G.style.background = t.overlay ? "" : "rgb(0, 0, 0)"));
            }
            function bg(e, t) {
              ((!t || t.displayOnBackground) && (e.g.style.zIndex = ""),
                (t && t.currentVideo == null) ||
                  ((e.g.style.transformOrigin = ""), (e.g.style.transition = ""), (e.g.style.transform = "")),
                e.m &&
                  (e.m.removeAttribute("ad-active"), (e.m.style.pointerEvents = ""), !t || t.background) &&
                  (e.m.style.background = ""),
                e.G && (e.G.style.background = ""));
            }
            function f_(e, t) {
              var n,
                r,
                i,
                s,
                o,
                u,
                l,
                p,
                m,
                y,
                v,
                w,
                A,
                I,
                C,
                k,
                R,
                L,
                U,
                G,
                b,
                B,
                O,
                z,
                j,
                X,
                W,
                ie,
                ne,
                $,
                Q,
                ae,
                ce,
                Ne,
                we,
                et,
                Ue,
                ot,
                We,
                Ge,
                Ye,
                Ze;
              return F(function (qe) {
                switch (qe.g) {
                  case 1:
                    if (
                      ((n = []),
                      !t ||
                        ((r = t.values.find(function (ze) {
                          return ze.key == "X-ASSET-URI";
                        })),
                        (i = t.values.find(function (ze) {
                          return ze.key == "X-ASSET-LIST";
                        })),
                        !r && !i))
                    )
                      return qe.return(n);
                    if (
                      ((s = null),
                      (o = t.values.find(function (ze) {
                        return ze.key == "ID";
                      })) && (s = o.data),
                      (u = s == null ? Math.floor(t.startTime * 10) / 10 : t.startTime),
                      (l = t.endTime) &&
                        t.endTime != 1 / 0 &&
                        typeof t.endTime == "number" &&
                        (l = s == null ? Math.floor(t.endTime * 10) / 10 : t.endTime),
                      (p = t.values.find(function (ze) {
                        return ze.key == "X-RESTRICT";
                      })),
                      (y = m = !0),
                      p && p.data && ((v = p.data), (m = !v.includes("SKIP")), (y = !v.includes("JUMP"))),
                      (w = m ? 0 : null),
                      (A = t.values.find(function (ze) {
                        return ze.key == "X-ENABLE-SKIP-AFTER";
                      })) && ((I = A.data), (w = parseFloat(I)), isNaN(w) && (w = m ? 0 : null)),
                      (C = null),
                      (k = t.values.find(function (ze) {
                        return ze.key == "X-ENABLE-SKIP-FOR";
                      })) && ((R = k.data), (C = parseFloat(R)), isNaN(w) && (C = null)),
                      (L = null),
                      (U = t.values.find(function (ze) {
                        return ze.key == "X-RESUME-OFFSET";
                      })) && ((G = U.data), (L = parseFloat(G)), isNaN(L) && (L = null)),
                      (b = null),
                      (B = t.values.find(function (ze) {
                        return ze.key == "X-PLAYOUT-LIMIT";
                      })) && ((O = B.data), (b = parseFloat(O)), isNaN(b) && (b = null)),
                      (X = j = z = !1),
                      (W = t.values.find(function (ze) {
                        return ze.key == "CUE";
                      })) &&
                        ((ie = W.data),
                        (z = ie.includes("ONCE")),
                        (j = ie.includes("PRE")),
                        (X = ie.includes("POST"))),
                      (ne = !1),
                      ($ = t.values.find(function (ze) {
                        return ze.key == "X-TIMELINE-OCCUPIES";
                      }))
                        ? ((Q = $.data), (ne = Q.includes("RANGE")))
                        : !U && e.C.W() && (ne = !j && !X),
                      r)
                    ) {
                      if (((ae = r.data), !ae)) return qe.return(n);
                      (n.push({
                        id: s,
                        groupId: null,
                        startTime: u,
                        endTime: l,
                        uri: ae,
                        mimeType: null,
                        isSkippable: m,
                        skipOffset: w,
                        skipFor: C,
                        canJump: y,
                        resumeOffset: L,
                        playoutLimit: b,
                        once: z,
                        pre: j,
                        post: X,
                        timelineRange: ne,
                        loop: !1,
                        overlay: null,
                        displayOnBackground: !1,
                        currentVideo: null,
                        background: null,
                        clickThroughUrl: null,
                      }),
                        qe.A(2));
                      break;
                    }
                    if (!i) {
                      qe.A(2);
                      break;
                    }
                    return (
                      (ce = i.data),
                      ce ? (te(qe, 4), (Ne = { type: 11 }), E(qe, Og(e, ce, Ne), 6)) : qe.return(n)
                    );
                  case 6:
                    for (
                      we = qe.h,
                        et = At(we),
                        Ue = JSON.parse(et),
                        (ot = Ue["SKIP-CONTROL"]) &&
                          ((We = ot["ENABLE-SKIP-AFTER"]),
                          typeof We == "number" && ((w = parseFloat(We)), isNaN(We) && (w = m ? 0 : null)),
                          (Ge = ot["ENABLE-SKIP-FOR"]),
                          typeof Ge == "number" && ((C = parseFloat(Ge)), isNaN(Ge) && (C = null))),
                        Ye = 0;
                      Ye < Ue.ASSETS.length;
                      Ye++
                    )
                      ((Ze = Ue.ASSETS[Ye]),
                        Ze.URI &&
                          n.push({
                            id: s + "_shaka_asset_" + Ye,
                            groupId: s,
                            startTime: u,
                            endTime: l,
                            uri: Ze.URI,
                            mimeType: null,
                            isSkippable: m,
                            skipOffset: w,
                            skipFor: C,
                            canJump: y,
                            resumeOffset: L,
                            playoutLimit: b,
                            once: z,
                            pre: j,
                            post: X,
                            timelineRange: ne,
                            loop: !1,
                            overlay: null,
                            displayOnBackground: !1,
                            currentVideo: null,
                            background: null,
                            clickThroughUrl: null,
                          }));
                    pe(qe, 2);
                    break;
                  case 4:
                    oe(qe);
                  case 2:
                    return qe.return(n);
                }
              });
            }
            function h_(e) {
              var t = [];
              if (!e) return t;
              var n = e.values.find(function (C) {
                return C.key == "X-ASSET-URI";
              });
              if (!n || ((n = n.data), !n)) return t;
              var r = null,
                i = e.values.find(function (C) {
                  return C.key == "X-OVERLAY-ID";
                });
              (i && (r = i.data), (i = r == null ? Math.floor(e.startTime * 10) / 10 : e.startTime));
              var s = e.endTime;
              e.endTime &&
                e.endTime != 1 / 0 &&
                typeof e.endTime == "number" &&
                (s = r == null ? Math.floor(e.endTime * 10) / 10 : e.endTime);
              var o = !1,
                u = !1,
                l = !1,
                p = e.values.find(function (C) {
                  return C.key == "CUE";
                });
              (p &&
                ((l = p.data), (o = l.includes("ONCE")), (u = l.includes("PRE")), (l = l.includes("POST"))),
                (p = null));
              var m = e.values.find(function (C) {
                return C.key == "X-ASSET-MIMETYPE";
              });
              (m && (p = m.data), (m = !1));
              var y = e.values.find(function (C) {
                return C.key == "X-LOOP";
              });
              (y && (m = y.data == "YES"), (y = 1));
              var v = e.values.find(function (C) {
                return C.key == "X-DEPTH";
              });
              (v && ((y = parseFloat(v.data)), isNaN(y) && (y = 1)), (v = null));
              var w = e.values.find(function (C) {
                return C.key == "X-BACKGROUND";
              });
              (w && (v = w.data), (w = 1920));
              var A = 1080,
                I = e.values.find(function (C) {
                  return C.key == "X-VIEWPORT";
                });
              if (I) {
                if (((A = I.data.split("x")), A.length != 2)) return t;
                ((w = parseFloat(A[0])), (A = parseFloat(A[1])));
              }
              if (
                ((w = { viewport: { x: w, y: A }, topLeft: { x: 0, y: 0 }, size: { x: w, y: A } }),
                (A = e.values.find(function (C) {
                  return C.key == "X-OVERLAY-POSITION";
                })))
              ) {
                if (((A = A.data.split("x")), A.length != 2)) return t;
                ((w.topLeft.x = parseFloat(A[0])), (w.topLeft.y = parseFloat(A[1])));
              }
              if (
                (A = e.values.find(function (C) {
                  return C.key == "X-OVERLAY-SIZE";
                }))
              ) {
                if (((A = A.data.split("x")), A.length != 2)) return t;
                ((w.size.x = parseFloat(A[0])), (w.size.y = parseFloat(A[1])));
              }
              if (
                ((A = null),
                (I = e.values.find(function (C) {
                  return C.key == "X-SQUEEZECURRENT";
                })) &&
                  ((A = parseFloat(I.data)),
                  isNaN(A) && (A = 1),
                  (A = {
                    viewport: { x: 1920, y: 1080 },
                    topLeft: { x: 0, y: 0 },
                    size: { x: 1920 * A, y: 1080 * A },
                  }),
                  (e = e.values.find(function (C) {
                    return C.key == "X-SQUEEZECURRENT-POSITION";
                  }))))
              ) {
                if (((e = e.data.split("x")), e.length != 2)) return t;
                ((A.topLeft.x = parseFloat(e[0])), (A.topLeft.y = parseFloat(e[1])));
              }
              return (
                t.push({
                  id: r,
                  groupId: null,
                  startTime: i,
                  endTime: s,
                  uri: n,
                  mimeType: p,
                  isSkippable: !1,
                  skipOffset: null,
                  skipFor: null,
                  canJump: !0,
                  resumeOffset: null,
                  playoutLimit: null,
                  once: o,
                  pre: u,
                  post: l,
                  timelineRange: !0,
                  loop: m,
                  overlay: w,
                  displayOnBackground: y == -1,
                  currentVideo: A,
                  background: v,
                  clickThroughUrl: null,
                }),
                t
              );
            }
            function kd(e) {
              for (var t = [], n = x(e.H), r = n.next(), i = {}; !r.done; i = { Bc: void 0 }, r = n.next())
                ((r = r.value),
                  r.overlay ||
                    ((i.Bc = { start: r.startTime, end: null }),
                    r.pre
                      ? ((i.Bc.start = 0), (i.Bc.end = null))
                      : r.post
                        ? ((i.Bc.start = -1), (i.Bc.end = null))
                        : r.timelineRange && (i.Bc.end = r.endTime),
                    t.find(
                      (function (s) {
                        return function (o) {
                          return s.Bc.start == o.start && s.Bc.end == o.end;
                        };
                      })(i),
                    ) || t.push(i.Bc)));
              Pt(e, "ad-cue-points-changed", new Map().set("cuepoints", t));
            }
            function Ng(e) {
              (e.i.configure(e.C.ki()),
                e.i.configure("ads.disableHLSInterstitial", !0),
                e.i.configure("ads.disableDASHInterstitial", !0),
                e.i.configure("playRangeEnd", 1 / 0),
                H0(e.C.Yb(), e.i.Yb()));
            }
            function Og(e, t, n) {
              var r, i, s;
              return F(function (o) {
                return o.g == 1
                  ? ((r = Ut([t], jr())), (i = e.C.Yb().request(7, r, n)), E(o, i.promise, 2))
                  : ((s = o.h), o.return(s.data));
              });
            }
            function B1(e) {
              return (e = e.mimeType) ? !e.startsWith("image/") && e !== "text/html" : !0;
            }
            function j1() {
              var e = je().Oa();
              return e == "TV" || e == "CONSOLE" || e == "CAST";
            }
            function V1(e, t) {
              if (!(e.K.has(t) || (e.M && !e.M.allowPreloadOnDomElements))) {
                var n = function (s) {
                    var o = document.createElement("link");
                    return (
                      (o.rel = "preload"),
                      (o.href = s),
                      (o.as = "image"),
                      document.head.appendChild(o),
                      o
                    );
                  },
                  r = [];
                if (t.background) {
                  var i = t.background.match(/url\(('|")?([^'"()]+)('|")\)?/);
                  i && r.push(n(i[2]));
                }
                (t.mimeType && t.mimeType.startsWith("image/") && r.push(n(t.uri)), e.K.set(t, r));
              }
            }
            function H1(e, t) {
              if (e.K.has(t)) {
                var n = e.K.get(t);
                n = x(n);
                for (var r = n.next(); !r.done; r = n.next()) ((r = r.value), r.parentNode.removeChild(r));
                e.K.delete(t);
              }
            }
            function Pt(e, t, n) {
              e.va(new Ae(t, n));
            }
            function Ce(e, t, n, r, i) {
              ((this.h = e),
                (this.j = yo(this.h.skipOffset)),
                (this.g = i),
                (this.i = t),
                (this.l = n),
                (this.o = r),
                (this.m = !1));
            }
            ((h = Ce.prototype),
              (h.needsSkipUI = function () {
                return !0;
              }),
              (h.isClientRendering = function () {
                return !1;
              }),
              (h.hasCustomClick = function () {
                return !1;
              }),
              (h.isUsingAnotherMediaElement = function () {
                return !1;
              }),
              (h.getDuration = function () {
                return this.h.durationInSeconds;
              }),
              (h.getMinSuggestedDuration = function () {
                return this.getDuration();
              }),
              (h.getRemainingTime = function () {
                return this.h.startTimeInSeconds + this.h.durationInSeconds - this.g.currentTime;
              }),
              (h.isPaused = function () {
                return this.g.paused;
              }),
              (h.isSkippable = function () {
                return typeof this.j == "number";
              }),
              (h.getTimeUntilSkippable = function () {
                if (typeof this.j != "number") return this.getRemainingTime();
                var e = this.getRemainingTime() + this.j - this.getDuration();
                return Math.max(e, 0);
              }),
              (h.canSkipNow = function () {
                return this.getTimeUntilSkippable() == 0;
              }),
              (h.skip = function () {
                ((this.m = !0), (this.g.currentTime += this.getRemainingTime()));
              }),
              (h.pause = function () {
                return this.g.pause();
              }),
              (h.play = function () {
                return this.g.play();
              }),
              (h.getVolume = function () {
                return this.g.volume;
              }),
              (h.setVolume = function (e) {
                this.g.volume = e;
              }),
              (h.isMuted = function () {
                return this.g.muted;
              }),
              (h.isLinear = function () {
                return this.o;
              }),
              (h.resize = function () {}),
              (h.setMuted = function (e) {
                this.g.muted = e;
              }),
              (h.getSequenceLength = function () {
                return this.l ? this.l : 1;
              }),
              (h.getPositionInSequence = function () {
                return this.i ? this.i : 1;
              }),
              (h.getTitle = function () {
                return this.h.adTitle;
              }),
              (h.getDescription = function () {
                return "";
              }),
              (h.getVastMediaBitrate = function () {
                return 0;
              }),
              (h.getVastMediaHeight = function () {
                return 0;
              }),
              (h.getVastMediaWidth = function () {
                return 0;
              }),
              (h.getVastAdId = function () {
                return this.h.vastAdId || "";
              }),
              (h.getAdId = function () {
                return this.h.adId;
              }),
              (h.getCreativeAdId = function () {
                return this.h.creativeId;
              }),
              (h.getAdvertiserName = function () {
                return "";
              }),
              (h.getMediaUrl = function () {
                return null;
              }),
              (h.getTimeOffset = function () {
                return 0;
              }),
              (h.getPodIndex = function () {
                return 0;
              }),
              (h.release = function () {
                this.l = this.i = this.g = this.h = null;
              }),
              de("shaka.ads.MediaTailorAd", Ce),
              (Ce.prototype.release = Ce.prototype.release),
              (Ce.prototype.getPodIndex = Ce.prototype.getPodIndex),
              (Ce.prototype.getTimeOffset = Ce.prototype.getTimeOffset),
              (Ce.prototype.getMediaUrl = Ce.prototype.getMediaUrl),
              (Ce.prototype.getAdvertiserName = Ce.prototype.getAdvertiserName),
              (Ce.prototype.getCreativeAdId = Ce.prototype.getCreativeAdId),
              (Ce.prototype.getAdId = Ce.prototype.getAdId),
              (Ce.prototype.getVastAdId = Ce.prototype.getVastAdId),
              (Ce.prototype.getVastMediaWidth = Ce.prototype.getVastMediaWidth),
              (Ce.prototype.getVastMediaHeight = Ce.prototype.getVastMediaHeight),
              (Ce.prototype.getVastMediaBitrate = Ce.prototype.getVastMediaBitrate),
              (Ce.prototype.getDescription = Ce.prototype.getDescription),
              (Ce.prototype.getTitle = Ce.prototype.getTitle),
              (Ce.prototype.getPositionInSequence = Ce.prototype.getPositionInSequence),
              (Ce.prototype.getSequenceLength = Ce.prototype.getSequenceLength),
              (Ce.prototype.setMuted = Ce.prototype.setMuted),
              (Ce.prototype.resize = Ce.prototype.resize),
              (Ce.prototype.isLinear = Ce.prototype.isLinear),
              (Ce.prototype.isMuted = Ce.prototype.isMuted),
              (Ce.prototype.setVolume = Ce.prototype.setVolume),
              (Ce.prototype.getVolume = Ce.prototype.getVolume),
              (Ce.prototype.play = Ce.prototype.play),
              (Ce.prototype.pause = Ce.prototype.pause),
              (Ce.prototype.skip = Ce.prototype.skip),
              (Ce.prototype.canSkipNow = Ce.prototype.canSkipNow),
              (Ce.prototype.getTimeUntilSkippable = Ce.prototype.getTimeUntilSkippable),
              (Ce.prototype.isSkippable = Ce.prototype.isSkippable),
              (Ce.prototype.isPaused = Ce.prototype.isPaused),
              (Ce.prototype.getRemainingTime = Ce.prototype.getRemainingTime),
              (Ce.prototype.getMinSuggestedDuration = Ce.prototype.getMinSuggestedDuration),
              (Ce.prototype.getDuration = Ce.prototype.getDuration),
              (Ce.prototype.isUsingAnotherMediaElement = Ce.prototype.isUsingAnotherMediaElement),
              (Ce.prototype.hasCustomClick = Ce.prototype.hasCustomClick),
              (Ce.prototype.isClientRendering = Ce.prototype.isClientRendering),
              (Ce.prototype.needsSkipUI = Ce.prototype.needsSkipUI));
            function Nu(e, t, n, r) {
              ((this.C = e),
                (this.K = t),
                (this.h = n),
                (this.l = null),
                (this.R = NaN),
                (this.i = r),
                (this.J = !1),
                (this.B = null),
                (this.j = []),
                (this.N = []),
                (this.M = this.F = this.g = null),
                (this.G = new Map()),
                (this.m = []),
                (this.u = []),
                (this.H = ""),
                (this.O = !0),
                (this.I = ""),
                (this.o = new tt()));
            }
            ((Nu.prototype.stop = function () {
              for (var e = x(this.m), t = e.next(); !t.done; t = e.next())
                ((t = t.value), this.o.Ma(t.target, t.type, t.listener));
              ($o(this),
                (this.m = []),
                (this.u = []),
                (this.H = ""),
                (this.O = !0),
                (this.I = ""),
                (this.B = null),
                (this.j = []),
                (this.N = []),
                this.G.clear());
            }),
              (Nu.prototype.release = function () {
                (this.stop(), this.o && this.o.release());
              }),
              (Nu.prototype.onManifestUpdated = function (e) {
                ((this.J = e), this.H != "" && (g_(this, this.H, this.O), (this.O = !1)));
              }),
              (Nu.prototype.getCuePoints = function () {
                for (var e = [], t = x(this.j), n = t.next(); !n.done; n = t.next()) {
                  n = x(n.value.ads);
                  for (var r = n.next(); !r.done; r = n.next())
                    ((r = r.value),
                      e.push({
                        start: r.startTimeInSeconds,
                        end: r.startTimeInSeconds + r.durationInSeconds,
                      }));
                }
                return e;
              }));
            function p_(e, t, n) {
              var r, i, s, o, u, l, p, m, y, v, w, A;
              F(function (I) {
                if (I.g == 1)
                  return (
                    (r = { type: 7 }),
                    (i = Ut([t], jr())),
                    (i.method = "POST"),
                    n && ((s = JSON.stringify(n)), (i.body = Ur(s))),
                    (o = e.K.request(7, i, r)),
                    te(I, 2),
                    E(I, o.promise, 4)
                  );
                if (I.g != 2) {
                  if (((u = I.h), (l = At(u.data)), (p = JSON.parse(l)), p.manifestUrl && p.trackingUrl))
                    ((m = new Dt(t)),
                      (y = new Dt(p.trackingUrl)),
                      (e.H = m.resolve(y).toString()),
                      (v = Date.now() / 1e3),
                      (w = v - e.R),
                      e.i(new Ae("ads-loaded", new Map().set("loadTime", w))),
                      (A = new Dt(p.manifestUrl)),
                      e.l.resolve(m.resolve(A).toString()),
                      (e.l = null));
                  else throw Error("Insufficient data from MediaTailor.");
                  return pe(I, 0);
                }
                if ((oe(I), !e.I.length))
                  return (
                    e.l.reject(
                      "MediaTailor request returned an error and there was no backup asset uri provided.",
                    ),
                    (e.l = null),
                    I.return()
                  );
                (e.l.resolve(e.I), (e.l = null), re(I));
              });
            }
            function g_(e, t, n) {
              var r, i, s, o, u, l, p, m, y, v, w, A, I, C, k, R;
              F(function (L) {
                if (L.g == 1)
                  return (
                    (r = { type: 8 }),
                    (i = Ut([t], jr())),
                    (s = e.K.request(7, i, r)),
                    te(L, 2),
                    E(L, s.promise, 4)
                  );
                if (L.g != 2) {
                  if (((o = L.h), (u = []), (l = At(o.data)), (p = JSON.parse(l)), p.avails.length > 0)) {
                    if (JSON.stringify(e.j) != JSON.stringify(p.avails)) {
                      for (e.j = p.avails, m = x(e.j), y = m.next(); !y.done; y = m.next())
                        for (v = y.value, w = x(v.nonLinearAdsList), A = w.next(); !A.done; A = w.next())
                          for (I = A.value, C = x(I.nonLinearAdList), k = C.next(); !k.done; k = C.next())
                            ((R = k.value), m_(e, R));
                      ((u = e.getCuePoints()),
                        e.i(new Ae("ad-cue-points-changed", new Map().set("cuepoints", u))));
                    }
                  } else
                    (e.j.length && e.i(new Ae("ad-cue-points-changed", new Map().set("cuepoints", u))),
                      $o(e),
                      (e.j = []));
                  return (n && (e.J || u.length > 0) && y_(e), pe(L, 0));
                }
                (oe(L), re(L));
              });
            }
            function m_(e, t) {
              var n, r, i, s, o, u, l, p;
              F(function (m) {
                if (m.g == 1)
                  return !t.staticResource || ((n = G1(t)), e.G.get(n))
                    ? m.return()
                    : ((r = { type: 9 }),
                      (i = Ut([t.staticResource], jr())),
                      (s = e.K.request(7, i, r)),
                      te(m, 2),
                      e.G.set(n, []),
                      E(m, s.promise, 4));
                if (m.g != 2)
                  return (
                    (o = m.h),
                    (u = At(o.data)),
                    (l = JSON.parse(u)),
                    (p = l.apps),
                    e.G.set(n, p),
                    pe(m, 0)
                  );
                (oe(m), e.G.delete(n), re(m));
              });
            }
            function G1(e) {
              return [
                e.adId,
                e.adParameters,
                e.adSystem,
                e.adTitle,
                e.creativeAdId,
                e.creativeId,
                e.creativeSequence,
                e.height,
                e.width,
                e.staticResource,
              ].join("");
            }
            function y_(e) {
              (X1(e),
                e.J ||
                  (z1(e),
                  e.o.D(e.h, "seeked", function () {
                    z1(e);
                  }),
                  e.o.D(e.h, "ended", function () {
                    $o(e);
                  })),
                e.o.D(e.h, "timeupdate", function () {
                  X1(e);
                }));
            }
            function z1(e) {
              var t = e.h.currentTime;
              if (t != 0 && e.B == null) {
                for (var n, r, i = x(e.j), s = i.next(); !s.done; s = i.next()) {
                  s = s.value;
                  for (var o = x(s.ads), u = o.next(); !u.done; u = o.next())
                    if (((u = u.value), !r)) u.startTimeInSeconds < t && ((r = u), (n = s));
                    else if (
                      u.startTimeInSeconds < t &&
                      u.startTimeInSeconds > r.startTimeInSeconds + r.durationInSeconds
                    ) {
                      ((r = u), (n = s));
                      break;
                    }
                }
                n && r && !e.N.includes(r.adId) && ((e.B = t), (e.h.currentTime = n.startTimeInSeconds));
              }
            }
            function X1(e) {
              if (e.h.duration && (e.g || e.j.length)) {
                var t = e.h.currentTime,
                  n = !1;
                if (e.g) {
                  n = !0;
                  var r = e.F,
                    i = r.startTimeInSeconds + 0.5 * r.durationInSeconds,
                    s = r.startTimeInSeconds + 0.75 * r.durationInSeconds;
                  (t >= r.startTimeInSeconds + 0.25 * r.durationInSeconds && !e.u.includes("firstQuartile")
                    ? (e.u.push("firstQuartile"), bn(e, "firstQuartile"))
                    : t >= i && !e.u.includes("midpoint")
                      ? (e.u.push("midpoint"), bn(e, "midpoint"))
                      : t >= s &&
                        !e.u.includes("thirdQuartile") &&
                        (e.u.push("thirdQuartile"), bn(e, "thirdQuartile")),
                    (r = e.g.getRemainingTime()),
                    (i = e.g.getDuration()),
                    e.g.canSkipNow() && r > 0 && i > 0 && bn(e, "skipStateChanged"),
                    i > 0 && (r <= 0 || r > i) && $o(e));
                }
                if (!e.g || !e.g.isLinear()) {
                  e: for (
                    r = x(e.j), i = r.next();
                    !i.done && ((i = i.value), !(e.g && e.g.isLinear()));
                    i = r.next()
                  )
                    for (s = 0; s < i.ads.length; s++) {
                      var o = i.ads[s],
                        u = o.startTimeInSeconds + o.durationInSeconds;
                      if (o.startTimeInSeconds <= t && u > t) {
                        if (e.N.includes(o.adId)) {
                          if (e.h.ended) continue;
                          e.h.currentTime = u;
                          break e;
                        }
                        ($o(e),
                          (e.M = i),
                          (e.g = new Ce(o, s + 1, i.ads.length, !0, e.h)),
                          (e.F = o),
                          s === 0 && bn(e, "breakStart"),
                          W1(e));
                        break;
                      }
                    }
                  if (!e.g) {
                    for (r = x(e.j), i = r.next(); !i.done && ((i = i.value), !e.g); i = r.next())
                      for (s = 0; s < i.nonLinearAdsList.length; s++)
                        if (((o = i.nonLinearAdsList[s]), o.nonLinearAdList.length)) {
                          u = i.startTimeInSeconds;
                          var l = e.G.get(G1(o.nonLinearAdList[0]));
                          if (u <= t && l && l.length) {
                            ($o(e), (u = e), (l = x(l)));
                            for (var p = l.next(); !p.done; p = l.next())
                              if (((p = p.value), p.data.source.length)) {
                                var m = document.createElement("img");
                                ((m.src = p.data.source[0].url),
                                  (m.style.top = (p.placeholder.top || 0) + "%"),
                                  (m.style.height = 100 - (p.placeholder.top || 0) + "%"),
                                  (m.style.left = (p.placeholder.left || 0) + "%"),
                                  (m.style.maxWidth = 100 - (p.placeholder.left || 0) + "%"),
                                  (m.style.objectFit = "contain"),
                                  (m.style.position = "absolute"),
                                  u.C.appendChild(m));
                              }
                            ((e.M = i),
                              (e.g = new Ce(o, s + 1, i.ads.length, !1, e.h)),
                              (e.F = o),
                              s === 0 && bn(e, "breakStart"),
                              W1(e));
                            break;
                          }
                        }
                  }
                  n &&
                    !e.g &&
                    ((t = e.h.currentTime), e.B && e.B > t && (e.h.currentTime = e.B), (e.B = null));
                }
              }
            }
            function $o(e) {
              if (e.g) {
                for (; e.C.lastChild; ) e.C.removeChild(e.C.firstChild);
                e.J || e.N.push(e.F.adId);
                var t = e.g.m;
                (t !== void 0 && t ? bn(e, "skip") : bn(e, "complete"), (t = x(e.m)));
                for (var n = t.next(); !n.done; n = t.next())
                  ((n = n.value), e.o.Ma(n.target, n.type, n.listener));
                ((e.m = []),
                  (e.u = []),
                  (t = e.g.getPositionInSequence()),
                  (n = e.g.getSequenceLength()),
                  t === n && bn(e, "breakEnd"),
                  (e.g = null),
                  (e.F = null),
                  (e.M = null));
              }
            }
            function W1(e) {
              var t = !1;
              (e.h.paused ? (t = !0) : (bn(e, "impression"), bn(e, "start")),
                e.m.push({
                  target: e.h,
                  type: "volumechange",
                  listener: function () {
                    e.h.muted && bn(e, "mute");
                  },
                }),
                e.m.push({
                  target: e.h,
                  type: "volumechange",
                  listener: function () {
                    e.h.muted || bn(e, "unmute");
                  },
                }),
                e.m.push({
                  target: e.h,
                  type: "play",
                  listener: function () {
                    t ? (bn(e, "impression"), bn(e, "start"), (t = !1)) : bn(e, "resume");
                  },
                }),
                e.m.push({
                  target: e.h,
                  type: "pause",
                  listener: function () {
                    bn(e, "pause");
                  },
                }));
              for (var n = x(e.m), r = n.next(); !r.done; r = n.next())
                ((r = r.value), e.o.D(r.target, r.type, r.listener));
            }
            function bn(e, t) {
              var n = e.F.trackingEvents.find(function (s) {
                return s.eventType == t;
              });
              if (
                (n ||
                  (n = e.M.adBreakTrackingEvents.find(function (s) {
                    return s.eventType == t;
                  })),
                n)
              ) {
                var r = { type: 10 };
                n = x(n.beaconUrls);
                for (var i = n.next(); !i.done; i = n.next())
                  (i = i.value) &&
                    i != "" &&
                    ((i = Ut([i], jr())), (i.method = "POST"), e.K.request(7, i, r));
              }
              switch (t) {
                case "impression":
                  e.i(new Ae("ad-impression"));
                  break;
                case "start":
                  e.i(new Ae("ad-started", new Map().set("ad", e.g)));
                  break;
                case "mute":
                  e.i(new Ae("ad-muted"));
                  break;
                case "unmute":
                  e.i(new Ae("ad-volume-changed"));
                  break;
                case "resume":
                  e.i(new Ae("ad-resumed"));
                  break;
                case "pause":
                  e.i(new Ae("ad-paused"));
                  break;
                case "firstQuartile":
                  e.i(new Ae("ad-first-quartile"));
                  break;
                case "midpoint":
                  e.i(new Ae("ad-midpoint"));
                  break;
                case "thirdQuartile":
                  e.i(new Ae("ad-third-quartile"));
                  break;
                case "complete":
                  (e.i(new Ae("ad-complete")), e.i(new Ae("ad-stopped")));
                  break;
                case "skip":
                  (e.i(new Ae("ad-skipped")), e.i(new Ae("ad-stopped")));
                  break;
                case "breakStart":
                  e.C.setAttribute("ad-active", "true");
                  break;
                case "breakEnd":
                  e.C.removeAttribute("ad-active");
                  break;
                case "skipStateChanged":
                  e.i(new Ae("ad-skip-state-changed"));
              }
            }
            function Pe(e, t) {
              ((this.g = e), (this.i = null), (this.h = t));
            }
            ((h = Pe.prototype),
              (h.needsSkipUI = function () {
                return !0;
              }),
              (h.isClientRendering = function () {
                return !1;
              }),
              (h.hasCustomClick = function () {
                return !0;
              }),
              (h.isUsingAnotherMediaElement = function () {
                return !1;
              }),
              (h.getDuration = function () {
                return this.i ? this.i.duration : -1;
              }),
              (h.getMinSuggestedDuration = function () {
                return this.getDuration();
              }),
              (h.getRemainingTime = function () {
                return this.i ? this.i.duration - this.i.currentTime : -1;
              }),
              (h.isPaused = function () {
                return this.h.paused;
              }),
              (h.isSkippable = function () {
                return this.g.isSkippable();
              }),
              (h.getTimeUntilSkippable = function () {
                var e = this.g.getSkipTimeOffset();
                return ((e = this.getRemainingTime() - e), Math.max(e, 0));
              }),
              (h.canSkipNow = function () {
                return this.getTimeUntilSkippable() == 0;
              }),
              (h.skip = function () {
                this.h.currentTime += this.getRemainingTime();
              }),
              (h.pause = function () {
                return this.h.pause();
              }),
              (h.play = function () {
                return this.h.play();
              }),
              (h.getVolume = function () {
                return this.h.volume;
              }),
              (h.setVolume = function (e) {
                this.h.volume = e;
              }),
              (h.isMuted = function () {
                return this.h.muted;
              }),
              (h.isLinear = function () {
                return !0;
              }),
              (h.resize = function () {}),
              (h.setMuted = function (e) {
                this.h.muted = e;
              }),
              (h.getSequenceLength = function () {
                var e = this.g.getAdPodInfo();
                return e == null ? 1 : e.getTotalAds();
              }),
              (h.getPositionInSequence = function () {
                var e = this.g.getAdPodInfo();
                return e == null ? 1 : e.getAdPosition();
              }),
              (h.getTitle = function () {
                return this.g.getTitle();
              }),
              (h.getDescription = function () {
                return this.g.getDescription();
              }),
              (h.getVastMediaBitrate = function () {
                return 0;
              }),
              (h.getVastMediaHeight = function () {
                return this.g.getVastMediaHeight();
              }),
              (h.getVastMediaWidth = function () {
                return this.g.getVastMediaWidth();
              }),
              (h.getVastAdId = function () {
                return "";
              }),
              (h.getAdId = function () {
                return this.g.getAdId();
              }),
              (h.getCreativeAdId = function () {
                return this.g.getCreativeAdId();
              }),
              (h.getAdvertiserName = function () {
                return this.g.getAdvertiserName();
              }),
              (h.getMediaUrl = function () {
                return null;
              }),
              (h.getTimeOffset = function () {
                var e = this.g.getAdPodInfo();
                return e == null ? 0 : e.getTimeOffset();
              }),
              (h.getPodIndex = function () {
                var e = this.g.getAdPodInfo();
                return e == null ? 0 : e.getPodIndex();
              }),
              (h.release = function () {
                this.h = this.i = this.g = null;
              }),
              de("shaka.ads.ServerSideAd", Pe),
              (Pe.prototype.release = Pe.prototype.release),
              (Pe.prototype.getPodIndex = Pe.prototype.getPodIndex),
              (Pe.prototype.getTimeOffset = Pe.prototype.getTimeOffset),
              (Pe.prototype.getMediaUrl = Pe.prototype.getMediaUrl),
              (Pe.prototype.getAdvertiserName = Pe.prototype.getAdvertiserName),
              (Pe.prototype.getCreativeAdId = Pe.prototype.getCreativeAdId),
              (Pe.prototype.getAdId = Pe.prototype.getAdId),
              (Pe.prototype.getVastAdId = Pe.prototype.getVastAdId),
              (Pe.prototype.getVastMediaWidth = Pe.prototype.getVastMediaWidth),
              (Pe.prototype.getVastMediaHeight = Pe.prototype.getVastMediaHeight),
              (Pe.prototype.getVastMediaBitrate = Pe.prototype.getVastMediaBitrate),
              (Pe.prototype.getDescription = Pe.prototype.getDescription),
              (Pe.prototype.getTitle = Pe.prototype.getTitle),
              (Pe.prototype.getPositionInSequence = Pe.prototype.getPositionInSequence),
              (Pe.prototype.getSequenceLength = Pe.prototype.getSequenceLength),
              (Pe.prototype.setMuted = Pe.prototype.setMuted),
              (Pe.prototype.resize = Pe.prototype.resize),
              (Pe.prototype.isLinear = Pe.prototype.isLinear),
              (Pe.prototype.isMuted = Pe.prototype.isMuted),
              (Pe.prototype.setVolume = Pe.prototype.setVolume),
              (Pe.prototype.getVolume = Pe.prototype.getVolume),
              (Pe.prototype.play = Pe.prototype.play),
              (Pe.prototype.pause = Pe.prototype.pause),
              (Pe.prototype.skip = Pe.prototype.skip),
              (Pe.prototype.canSkipNow = Pe.prototype.canSkipNow),
              (Pe.prototype.getTimeUntilSkippable = Pe.prototype.getTimeUntilSkippable),
              (Pe.prototype.isSkippable = Pe.prototype.isSkippable),
              (Pe.prototype.isPaused = Pe.prototype.isPaused),
              (Pe.prototype.getRemainingTime = Pe.prototype.getRemainingTime),
              (Pe.prototype.getMinSuggestedDuration = Pe.prototype.getMinSuggestedDuration),
              (Pe.prototype.getDuration = Pe.prototype.getDuration),
              (Pe.prototype.isUsingAnotherMediaElement = Pe.prototype.isUsingAnotherMediaElement),
              (Pe.prototype.hasCustomClick = Pe.prototype.hasCustomClick),
              (Pe.prototype.isClientRendering = Pe.prototype.isClientRendering),
              (Pe.prototype.needsSkipUI = Pe.prototype.needsSkipUI));
            function K1(e, t, n, r) {
              var i = this;
              ((this.u = e),
                (this.l = t),
                (this.j = null),
                (this.G = NaN),
                (this.i = r),
                (this.H = !1),
                (this.B = this.m = this.o = null),
                (this.C = ""),
                (this.F = []),
                (this.h = new tt()),
                (e = new google.ima.dai.api.UiSettings()),
                e.setLocale(n),
                (this.g = new google.ima.dai.api.StreamManager(this.l, this.u, e)),
                this.i(new Ae("ima-stream-manager-loaded", new Map().set("imaStreamManager", this.g))),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.LOADED, function (s) {
                  v_(i, s);
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.ERROR, function () {
                  (i.C.length
                    ? i.j.resolve(i.C)
                    : i.j.reject(
                        "IMA Stream request returned an error and there was no backup asset uri provided.",
                      ),
                    (i.j = null));
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED, function () {}),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.STARTED, function (s) {
                  ((s = s.getAd()),
                    (i.m = new Pe(s, i.l)),
                    i.B && (i.m.i = i.B),
                    i.i(new Ae("ad-started", new Map().set("ad", i.m))),
                    i.u.setAttribute("ad-active", "true"));
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED, function () {
                  i.u.removeAttribute("ad-active");
                  var s = i.l.currentTime;
                  i.o && i.o > s && ((i.l.currentTime = i.o), (i.o = null));
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.AD_PROGRESS, function (s) {
                  ((i.B = s.getStreamData().adProgressData), i.m && (i.m.i = i.B));
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE, function () {
                  i.i(new Ae("ad-first-quartile"));
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.MIDPOINT, function () {
                  i.i(new Ae("ad-midpoint"));
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE, function () {
                  i.i(new Ae("ad-third-quartile"));
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.COMPLETE, function () {
                  (i.i(new Ae("ad-complete")),
                    i.i(new Ae("ad-stopped")),
                    i.u.removeAttribute("ad-active"),
                    (i.m = null));
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.SKIPPED, function () {
                  (i.i(new Ae("ad-skipped")), i.i(new Ae("ad-stopped")));
                }),
                this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED, function (s) {
                  var o = s.getStreamData();
                  ((s = []), (o = x(o.cuepoints)));
                  for (var u = o.next(); !u.done; u = o.next())
                    ((u = u.value), s.push({ start: u.start, end: u.end }));
                  ((i.F = s), i.i(new Ae("ad-cue-points-changed", new Map().set("cuepoints", s))));
                }));
            }
            ((h = K1.prototype),
              (h.configure = function () {}),
              (h.stop = function () {
                ((this.C = ""), (this.o = null), (this.F = []));
              }),
              (h.release = function () {
                (this.stop(), this.h && this.h.release());
              }),
              (h.onCueMetadataChange = function (e) {
                if (e.key && e.data) {
                  var t = {};
                  ((t[e.key] = e.data), this.g.onTimedMetadata(t));
                }
              }),
              (h.getCuePoints = function () {
                return this.F;
              }));
            function v_(e, t) {
              (e.i(new Ae("ads-loaded", new Map().set("loadTime", Date.now() / 1e3 - e.G))),
                (t = t.getStreamData().url),
                e.j.resolve(t),
                (e.j = null),
                e.H ||
                  e.h.D(e.l, "seeked", function () {
                    var n = e.l.currentTime;
                    if (n != 0) {
                      e.g.streamTimeForContentTime(n);
                      var r = e.g.previousCuePointForStreamTime(n);
                      r && !r.played && ((e.o = n), (e.l.currentTime = r.start));
                    }
                  }));
            }
            function Te() {
              (ut.call(this),
                (this.h = this.i = this.j = this.g = null),
                (this.m = new L1()),
                (this.o = navigator.language),
                (this.l = null));
            }
            (q(Te, ut),
              (h = Te.prototype),
              (h.setLocale = function (e) {
                this.o = e;
              }),
              (h.configure = function (e) {
                ((this.l = e),
                  this.g && this.g.configure(this.l),
                  this.j && this.j.configure(this.l),
                  this.h && this.h.configure(this.l));
              }),
              (h.initInterstitial = function (e, t, n) {
                var r = this;
                (this.g && this.g.release(),
                  (this.g = new U1(e, t, n, function (i) {
                    return _d(r, i);
                  })),
                  this.g.configure(this.l));
              }),
              (h.initClientSide = function (e, t, n) {
                var r = this;
                if (!g.google || !google.ima || !google.ima.AdsLoader) throw new H(2, 10, 1e4);
                (this.j && this.j.release(),
                  (this.j = new Cd(e, t, this.o, n, function (i) {
                    return _d(r, i);
                  })),
                  this.j.configure(this.l));
              }),
              (h.release = function () {
                (this.g && (this.g.release(), (this.g = null)),
                  this.j && (this.j.release(), (this.j = null)),
                  this.i && (this.i.release(), (this.i = null)),
                  this.h && (this.h.release(), (this.h = null)),
                  ut.prototype.release.call(this));
              }),
              (h.onAssetUnload = function () {
                (this.g && this.g.stop(),
                  this.j && this.j.stop(),
                  this.i && this.i.stop(),
                  this.h && this.h.stop(),
                  this.dispatchEvent(new Ae("ad-stopped")),
                  this.dispatchEvent(new Ae("ad-content-attach-requested")),
                  (this.m = new L1()));
              }),
              (h.requestClientSideAds = function (e) {
                if (!this.j) throw new H(1, 10, 10001);
                var t = this.j;
                (t.g && t.g.destroy(),
                  t.m && t.m.contentComplete(),
                  (t.H = Date.now() / 1e3),
                  t.m.requestAds(e));
              }),
              (h.updateClientSideAdsRenderingSettings = function (e) {
                if (!this.j) throw new H(1, 10, 10001);
                var t = this.j;
                ((t.C = e), t.g && t.g.updateAdsRenderingSettings(t.C));
              }),
              (h.initMediaTailor = function (e, t, n) {
                var r = this;
                (this.i && this.i.release(),
                  (this.i = new Nu(e, t, n, function (i) {
                    return _d(r, i);
                  })));
              }),
              (h.requestMediaTailorStream = function (e, t, n) {
                if (!this.i) throw new H(1, 10, 10005);
                var r = this.i;
                return (
                  (n = n === void 0 ? "" : n),
                  r.l
                    ? (e = Promise.reject(new H(1, 10, 10004)))
                    : ((r.l = new lt()), p_(r, e, t), (r.I = n || ""), (r.R = Date.now() / 1e3), (e = r.l)),
                  e
                );
              }),
              (h.addMediaTailorTrackingUrl = function (e) {
                if (!this.i) throw new H(1, 10, 10005);
                var t = this.i;
                ((t.H = e), t.i(new Ae("ads-loaded", new Map().set("loadTime", 0))));
              }),
              (h.initServerSide = function (e, t) {
                var n = this;
                if (!g.google || !google.ima || !google.ima.dai) throw new H(2, 10, 10002);
                (this.h && this.h.release(),
                  (this.h = new K1(e, t, this.o, function (r) {
                    return _d(n, r);
                  })),
                  this.h.configure(this.l));
              }),
              (h.requestServerSideStream = function (e, t) {
                if (((t = t === void 0 ? "" : t), !this.h)) throw new H(1, 10, 10003);
                e.adTagParameters || (e.adTagParameters = {});
                var n = e.adTagParameters;
                return (
                  (n.mpt || n.mpv) &&
                    Be(
                      'You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.',
                    ),
                  (e.adTagParameters.mpt = "shaka-player"),
                  (e.adTagParameters.mpv = "v4.16.12"),
                  (n = this.h),
                  n.j
                    ? (e = Promise.reject(new H(1, 10, 10004)))
                    : (e instanceof google.ima.dai.api.LiveStreamRequest && (n.H = !0),
                      (n.j = new lt()),
                      n.g.requestStream(e),
                      (n.C = t || ""),
                      (n.G = Date.now() / 1e3),
                      (e = n.j)),
                  e
                );
              }),
              (h.replaceServerSideAdTagParameters = function (e) {
                if (!this.h) throw new H(1, 10, 10003);
                ((e.mpt || e.mpv) &&
                  Be(
                    'You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.',
                  ),
                  (e.mpt = "Shaka Player"),
                  (e.mpv = "v4.16.12"),
                  this.h.g.replaceAdTagParameters(e));
              }),
              (h.getServerSideCuePoints = function () {
                return (
                  Je("AdManager.getServerSideCuePoints", "Please use getCuePoints function."),
                  this.getCuePoints()
                );
              }),
              (h.getCuePoints = function () {
                var e = [];
                return (
                  this.h && (e = e.concat(this.h.getCuePoints())),
                  this.i && (e = e.concat(this.i.getCuePoints())),
                  e
                );
              }),
              (h.getStats = function () {
                var e = this.m;
                return {
                  loadTimes: e.g,
                  averageLoadTime: n_(e),
                  started: e.h,
                  overlayAds: e.j,
                  playedCompletely: e.l,
                  skipped: e.m,
                  errors: e.i,
                };
              }),
              (h.onManifestUpdated = function (e) {
                this.i && this.i.onManifestUpdated(e);
              }),
              (h.onDashTimedMetadata = function (e) {
                this.h &&
                  e.schemeIdUri == "urn:google:dai:2018" &&
                  this.h.g.processMetadata(
                    e.schemeIdUri,
                    e.eventNode ? e.eventNode.attributes.messageData : null,
                    e.startTime,
                  );
              }),
              (h.onHlsTimedMetadata = function (e, t) {
                this.h && this.h.g.processMetadata("ID3", e.data, t);
              }),
              (h.onCueMetadataChange = function (e) {
                this.h && this.h.onCueMetadataChange(e);
              }),
              (h.onHLSInterstitialMetadata = function (e, t, n) {
                (this.l && this.l.disableHLSInterstitial) ||
                  (this.g || this.initInterstitial(null, e, t), this.g && u_(this.g, n));
              }),
              (h.onDASHInterstitialMetadata = function (e, t, n) {
                if (!this.l || !this.l.disableDASHInterstitial) {
                  var r = n.schemeIdUri;
                  if (
                    r == "urn:mpeg:dash:event:alternativeMPD:insert:2025" ||
                    r == "urn:mpeg:dash:event:alternativeMPD:replace:2025"
                  ) {
                    if (
                      (this.g || this.initInterstitial(null, e, t),
                      this.g &&
                        ((e = this.g),
                        (t = n.schemeIdUri == "urn:mpeg:dash:event:alternativeMPD:replace:2025"),
                        (r = n.schemeIdUri == "urn:mpeg:dash:event:alternativeMPD:insert:2025"),
                        t || r))
                    ) {
                      for (
                        var i = n.startTime,
                          s = n.endTime,
                          o = null,
                          u = 0,
                          l,
                          p = x(n.eventNode.children),
                          m = p.next();
                        !m.done;
                        m = p.next()
                      )
                        if (((m = m.value), m.tagName == "AlternativeMPD")) {
                          if ((m = m.attributes.uri)) {
                            l = m;
                            break;
                          }
                        } else if (m.tagName == "InsertPresentation" || m.tagName == "ReplacePresentation") {
                          var y = m.attributes.url;
                          if (y) {
                            ((l = Pn(y)),
                              (p = be(m, "maxDuration", sn)) && (o = p / n.timescale),
                              (p = be(m, "returnOffset", sn)) && (u = p / n.timescale),
                              t && u && (s = i + u));
                            break;
                          }
                        }
                      l &&
                        bu(e, [
                          {
                            id: n.id,
                            groupId: null,
                            startTime: i,
                            endTime: s,
                            uri: l,
                            mimeType: null,
                            isSkippable: !1,
                            skipOffset: null,
                            skipFor: null,
                            canJump: !0,
                            resumeOffset: r ? u : null,
                            playoutLimit: o,
                            once: !1,
                            pre: !1,
                            post: !1,
                            timelineRange: t && !r,
                            loop: !1,
                            overlay: null,
                            displayOnBackground: !1,
                            currentVideo: null,
                            background: null,
                            clickThroughUrl: null,
                          },
                        ]);
                    }
                  } else
                    (r == "urn:mpeg:dash:event:2012" || r == "urn:scte:dash:scte214-events") &&
                      n.eventNode &&
                      vt(n.eventNode, "OverlayEvent") &&
                      (this.g || this.initInterstitial(null, e, t), this.g && l_(this.g, n));
                }
              }),
              (h.addCustomInterstitial = function (e) {
                if (!this.g) throw new H(1, 10, 10006);
                bu(this.g, [e]);
              }),
              (h.addAdUrlInterstitial = function (e) {
                if (!this.g) throw new H(1, 10, 10006);
                return this.g.addAdUrlInterstitial(e);
              }),
              (h.getInterstitialPlayer = function () {
                if (!this.g) throw new H(1, 10, 10006);
                return this.g.td();
              }));
            function _d(e, t) {
              if (t && t.type)
                switch (t.type) {
                  case "ads-loaded":
                    e.m.g.push(t.loadTime);
                    break;
                  case "ad-started":
                    e.m.h++;
                    var n = t.ad;
                    n && !n.isLinear() && e.m.j++;
                    break;
                  case "ad-complete":
                    e.m.l++;
                    break;
                  case "ad-skipped":
                    e.m.m++;
                    break;
                  case "ad-error":
                    e.m.i++;
                }
              e.dispatchEvent(t);
            }
            (de("shaka.ads.AdManager", Te),
              (Te.prototype.getInterstitialPlayer = Te.prototype.getInterstitialPlayer),
              (Te.prototype.addAdUrlInterstitial = Te.prototype.addAdUrlInterstitial),
              (Te.prototype.addCustomInterstitial = Te.prototype.addCustomInterstitial),
              (Te.prototype.onDASHInterstitialMetadata = Te.prototype.onDASHInterstitialMetadata),
              (Te.prototype.onHLSInterstitialMetadata = Te.prototype.onHLSInterstitialMetadata),
              (Te.prototype.onCueMetadataChange = Te.prototype.onCueMetadataChange),
              (Te.prototype.onHlsTimedMetadata = Te.prototype.onHlsTimedMetadata),
              (Te.prototype.onDashTimedMetadata = Te.prototype.onDashTimedMetadata),
              (Te.prototype.onManifestUpdated = Te.prototype.onManifestUpdated),
              (Te.prototype.getStats = Te.prototype.getStats),
              (Te.prototype.getCuePoints = Te.prototype.getCuePoints),
              (Te.prototype.getServerSideCuePoints = Te.prototype.getServerSideCuePoints),
              (Te.prototype.replaceServerSideAdTagParameters = Te.prototype.replaceServerSideAdTagParameters),
              (Te.prototype.requestServerSideStream = Te.prototype.requestServerSideStream),
              (Te.prototype.initServerSide = Te.prototype.initServerSide),
              (Te.prototype.addMediaTailorTrackingUrl = Te.prototype.addMediaTailorTrackingUrl),
              (Te.prototype.requestMediaTailorStream = Te.prototype.requestMediaTailorStream),
              (Te.prototype.initMediaTailor = Te.prototype.initMediaTailor),
              (Te.prototype.updateClientSideAdsRenderingSettings =
                Te.prototype.updateClientSideAdsRenderingSettings),
              (Te.prototype.requestClientSideAds = Te.prototype.requestClientSideAds),
              (Te.prototype.onAssetUnload = Te.prototype.onAssetUnload),
              (Te.prototype.release = Te.prototype.release),
              (Te.prototype.initClientSide = Te.prototype.initClientSide),
              (Te.prototype.initInterstitial = Te.prototype.initInterstitial),
              (Te.prototype.configure = Te.prototype.configure),
              (Te.prototype.setLocale = Te.prototype.setLocale),
              (Te.ADS_LOADED = "ads-loaded"),
              (Te.AD_STARTED = "ad-started"),
              (Te.AD_FIRST_QUARTILE = "ad-first-quartile"),
              (Te.AD_MIDPOINT = "ad-midpoint"),
              (Te.AD_THIRD_QUARTILE = "ad-third-quartile"),
              (Te.AD_COMPLETE = "ad-complete"),
              (Te.AD_STOPPED = "ad-stopped"),
              (Te.AD_SKIPPED = "ad-skipped"),
              (Te.AD_VOLUME_CHANGED = "ad-volume-changed"),
              (Te.AD_MUTED = "ad-muted"),
              (Te.AD_PAUSED = "ad-paused"),
              (Te.AD_RESUMED = "ad-resumed"),
              (Te.AD_SKIP_STATE_CHANGED = "ad-skip-state-changed"),
              (Te.CUEPOINTS_CHANGED = "ad-cue-points-changed"),
              (Te.IMA_AD_MANAGER_LOADED = "ima-ad-manager-loaded"),
              (Te.IMA_STREAM_MANAGER_LOADED = "ima-stream-manager-loaded"),
              (Te.AD_CLICKED = "ad-clicked"),
              (Te.AD_PROGRESS = "ad-progress"),
              (Te.AD_BUFFERING = "ad-buffering"),
              (Te.AD_IMPRESSION = "ad-impression"),
              (Te.AD_DURATION_CHANGED = "ad-duration-changed"),
              (Te.AD_CLOSED = "ad-closed"),
              (Te.AD_LOADED = "ad-loaded"),
              (Te.ALL_ADS_COMPLETED = "all-ads-completed"),
              (Te.AD_LINEAR_CHANGED = "ad-linear-changed"),
              (Te.AD_METADATA = "ad-metadata"),
              (Te.AD_RECOVERABLE_ERROR = "ad-recoverable-error"),
              (Te.AD_ERROR = "ad-error"),
              (Te.AD_BREAK_READY = "ad-break-ready"),
              (Te.AD_INTERACTION = "ad-interaction"),
              (Te.AD_CONTENT_PAUSE_REQUESTED = "ad-content-pause-requested"),
              (Te.AD_CONTENT_RESUME_REQUESTED = "ad-content-resume-requested"),
              (Te.AD_CONTENT_ATTACH_REQUESTED = "ad-content-attach-requested"),
              (Ed = function () {
                return new Te();
              }));
            function Ug(e) {
              return JSON.stringify(e, function (t, n) {
                if (typeof n != "function") {
                  if (((t = n instanceof Ae), n instanceof Event || t)) {
                    var r = {};
                    for (s in n) {
                      var i = n[s];
                      i && typeof i == "object"
                        ? s == "detail"
                          ? (r[s] = i)
                          : i instanceof Event || i instanceof Ae
                            ? (r[s] = { __type__: "Event", event: Ug(i) })
                            : t && Array.isArray(i) && (r[s] = i)
                        : s in Event || (r[s] = i);
                    }
                    return r;
                  }
                  if (n instanceof Error) {
                    var s = new Set(["name", "message", "stack"]);
                    for (r in n) s.add(r);
                    for (t = x(Object.getOwnPropertyNames(n)), r = t.next(); !r.done; r = t.next())
                      s.add(r.value);
                    for (t = {}, s = x(s), r = s.next(); !r.done; r = s.next())
                      ((r = r.value), (t[r] = n[r]));
                    n = { __type__: "Error", contents: t };
                  } else if (n instanceof TimeRanges) {
                    for (
                      s = { __type__: "TimeRanges", length: n.length, start: [], end: [] },
                        n = x(Ri(n)),
                        t = n.next();
                      !t.done;
                      t = n.next()
                    )
                      ((t = t.value), (r = t.end), s.start.push(t.start), s.end.push(r));
                    n = s;
                  } else
                    n =
                      ArrayBuffer.isView(n) && n.BYTES_PER_ELEMENT === 1
                        ? { __type__: "Uint8Array", entries: Array.from(n) }
                        : typeof n == "number"
                          ? isNaN(n)
                            ? "NaN"
                            : isFinite(n)
                              ? n
                              : n < 0
                                ? "-Infinity"
                                : "Infinity"
                          : n;
                  return n;
                }
              });
            }
            function Pd(e) {
              return JSON.parse(e, function (t, n) {
                if (n == "NaN") var r = NaN;
                else if (n == "-Infinity") r = -1 / 0;
                else if (n == "Infinity") r = 1 / 0;
                else if (n && typeof n == "object" && n.__type__ == "TimeRanges") r = x_(n);
                else if (n && typeof n == "object" && n.__type__ == "Uint8Array")
                  r = new Uint8Array(n.entries);
                else if (n && typeof n == "object" && n.__type__ == "Error") {
                  ((t = n.contents), (n = Error(t.message)));
                  for (r in t) n[r] = t[r];
                  r = n;
                } else r = n && typeof n == "object" && n.__type__ == "Event" ? Pd(n.event) : n;
                return r;
              });
            }
            function x_(e) {
              return {
                length: e.length,
                start: function (t) {
                  return e.start[t];
                },
                end: function (t) {
                  return e.end[t];
                },
              };
            }
            var $1 =
                "ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(
                  " ",
                ),
              T_ =
                "buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(
                  " ",
                ),
              Fg = ["loop", "playbackRate"],
              w_ = ["pause", "play"],
              Bg = new Map()
                .set("getAssetUri", 2)
                .set("getAudioLanguages", 4)
                .set("getAudioLanguagesAndRoles", 4)
                .set("getBufferFullness", 1)
                .set("getBufferedInfo", 2)
                .set("getExpiration", 2)
                .set("getKeyStatuses", 2)
                .set("getPlaybackRate", 2)
                .set("getTextLanguages", 4)
                .set("getTextLanguagesAndRoles", 4)
                .set("isAudioOnly", 10)
                .set("isBuffering", 1)
                .set("isInProgress", 1)
                .set("isLive", 10)
                .set("isTextTrackVisible", 1)
                .set("isVideoOnly", 10)
                .set("keySystem", 10)
                .set("seekRange", 1)
                .set("getLoadMode", 10)
                .set("getManifestType", 10)
                .set("isFullyLoaded", 1)
                .set("isEnded", 1)
                .set("getBandwidthEstimate", 1)
                .set("isRemotePlayback", 1),
              jg = new Map()
                .set("getConfiguration", 4)
                .set("getConfigurationForLowLatency", 4)
                .set("getStats", 5)
                .set("getAudioTracks", 2)
                .set("getChaptersTracks", 2)
                .set("getImageTracks", 2)
                .set("getVideoTracks", 2)
                .set("getTextTracks", 2)
                .set("getVariantTracks", 2),
              Y1 = new Map()
                .set("getPlayheadTimeAsDate", 1)
                .set("getPresentationStartTimeAsDate", 20)
                .set("getSegmentAvailabilityDuration", 20),
              q1 = [
                [
                  "getConfiguration",
                  "configure",
                  "getConfigurationForLowLatency",
                  "configurationForLowLatency",
                ],
              ],
              J1 = [["isTextTrackVisible", "setTextTrackVisibility"]],
              S_ =
                "cancelTrickPlay configure configurationForLowLatency getChapters resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel selectVideoTrack setTextTrackVisibility trickPlay updateStartTime goToLive useTrickPlayTrackIfAvailable".split(
                  " ",
                ),
              A_ =
                "addChaptersTrack addTextTrackAsync addThumbnailsTrack getAllThumbnails getChaptersAsync getThumbnails attach attachCanvas detach load unload".split(
                  " ",
                );
            function Vg(e, t, n, r, i, s, o) {
              var u = this;
              ((this.H = e),
                (this.K = o),
                (this.l = new He(t)),
                (this.M = n),
                (this.u = !1),
                (this.B = r),
                (this.G = i),
                (this.N = s),
                (this.i = this.m = !1),
                (this.J = ""),
                (this.o = null),
                (this.C = function () {
                  return Hg(u);
                }),
                (this.F = function (l, p) {
                  switch (((l = Pd(p)), l.type)) {
                    case "event":
                      var m = l.targetName,
                        y = V0(l.event);
                      u.B(m, y);
                      break;
                    case "update":
                      m = l.update;
                      for (y in m) {
                        l = u.g[y] || {};
                        for (var v in m[y]) l[v] = m[y][v];
                      }
                      u.u && (u.M(), (u.u = !1));
                      break;
                    case "asyncComplete":
                      if (((v = l.id), (y = l.error), (p = l.res), (l = u.h.get(v)), u.h.delete(v), l))
                        if (y) {
                          v = new H(y.severity, y.category, y.code);
                          for (m in y) v[m] = y[m];
                          l.reject(v);
                        } else l.resolve(p);
                  }
                }),
                (this.g = { video: {}, player: {} }),
                (this.I = 0),
                (this.h = new Map()),
                (this.j = null),
                Uu.add(this));
            }
            ((h = Vg.prototype),
              (h.destroy = function () {
                return (
                  Uu.delete(this),
                  Gg(this),
                  Hr && Z1(this),
                  this.l && (this.l.stop(), (this.l = null)),
                  (this.G = this.B = null),
                  (this.i = this.m = !1),
                  (this.F = this.C = this.j = this.h = this.g = this.o = null),
                  Promise.resolve()
                );
              }),
              (h.wb = function () {
                return this.i;
              }),
              (h.eh = function () {
                return this.J;
              }),
              (h.init = function () {
                if (this.H.length)
                  if (g.chrome && chrome.cast && chrome.cast.isAvailable) {
                    ((this.m = !0), this.l.Jb());
                    var e = new chrome.cast.SessionRequest(this.H, [], null, this.K, null);
                    ((e = new chrome.cast.ApiConfig(
                      e,
                      function (t) {
                        for (var n = x(Uu), r = n.next(); !r.done; r = n.next()) {
                          r = r.value;
                          var i = t;
                          ((r.j = new lt()), (r.u = !0), Dd(r, i));
                        }
                      },
                      function (t) {
                        for (var n = x(Uu), r = n.next(); !r.done; r = n.next())
                          ((r = r.value), (Ld = t == "available"), r.l.Jb());
                      },
                      "origin_scoped",
                    )),
                      chrome.cast.initialize(
                        e,
                        function () {},
                        function () {},
                      ),
                      Ld && this.l.ka(I_),
                      (e = Hr) && e.status != chrome.cast.SessionStatus.STOPPED
                        ? ((this.j = new lt()), (this.u = !0), Dd(this, e))
                        : (Hr = null));
                  } else
                    g.__onGCastApiAvailable !== ew &&
                      ((bd = g.__onGCastApiAvailable || null), (g.__onGCastApiAvailable = ew));
              }),
              (h.qh = function (e) {
                ((this.o = e), this.i && Ou(this, { type: "appData", appData: this.o }));
              }),
              (h.cast = function () {
                var e = this;
                return F(function (t) {
                  if (!e.m) throw new H(1, 8, 8e3);
                  if (!Ld) throw new H(1, 8, 8001);
                  if (e.i) throw new H(1, 8, 8002);
                  return (
                    (e.j = new lt()),
                    chrome.cast.requestSession(
                      function (n) {
                        return Dd(e, n);
                      },
                      function (n) {
                        return Q1(e, n);
                      },
                    ),
                    E(t, e.j, 0)
                  );
                });
              }));
            function E_(e) {
              e.i &&
                chrome.cast.requestSession(
                  function (t) {
                    return Dd(e, t);
                  },
                  function (t) {
                    return Q1(e, t);
                  },
                );
            }
            ((h.qd = function () {
              if (this.i) {
                if ((Gg(this), Hr)) {
                  Z1(this);
                  try {
                    Hr.stop(
                      function () {},
                      function () {},
                    );
                  } catch (e) {}
                  Hr = null;
                }
                Hg(this);
              }
            }),
              (h.get = function (e, t) {
                var n = this;
                if (e == "video") {
                  if (w_.includes(t))
                    return function () {
                      return n.Mi.apply(n, [e, t].concat(Y(It.apply(0, arguments))));
                    };
                } else if (e == "player") {
                  if (Y1.has(t) && !this.get("player", "isLive")()) return function () {};
                  if (S_.includes(t))
                    return function () {
                      return n.Mi.apply(n, [e, t].concat(Y(It.apply(0, arguments))));
                    };
                  if (A_.includes(t))
                    return function () {
                      return n.Pk.apply(n, [e, t].concat(Y(It.apply(0, arguments))));
                    };
                  if (Bg.has(t) || jg.has(t))
                    return function () {
                      return n.g[e][t];
                    };
                }
                return this.g[e][t];
              }),
              (h.set = function (e, t, n) {
                ((this.g[e][t] = n), Ou(this, { type: "set", targetName: e, property: t, value: n }));
              }));
            function Dd(e, t) {
              var n = e.N();
              ((Hr = t),
                t.addUpdateListener(e.C),
                t.addMessageListener("urn:x-cast:com.google.shaka.v2", e.F),
                Hg(e),
                Ou(e, { type: "init", initState: n, appData: e.o }),
                e.j.resolve());
            }
            function Q1(e, t) {
              var n = 8003;
              switch (t.code) {
                case "cancel":
                  n = 8004;
                  break;
                case "timeout":
                  n = 8005;
                  break;
                case "receiver_unavailable":
                  n = 8006;
              }
              e.j.reject(new H(2, 8, n, t));
            }
            ((h.Mi = function (e, t) {
              Ou(this, { type: "call", targetName: e, methodName: t, args: It.apply(2, arguments) });
            }),
              (h.Pk = function (e, t) {
                var n = It.apply(2, arguments),
                  r = new lt(),
                  i = this.I.toString();
                (this.I++, this.h.set(i, r));
                try {
                  Ou(this, { type: "asyncCall", targetName: e, methodName: t, args: n, id: i });
                } catch (s) {
                  r.reject(s);
                }
                return r;
              }));
            function Z1(e) {
              var t = Hr;
              (t.removeUpdateListener(e.C), t.removeMessageListener("urn:x-cast:com.google.shaka.v2", e.F));
            }
            function Hg(e) {
              var t = Hr ? Hr.status == "connected" : !1;
              if (e.i && !t) {
                e.G();
                for (var n in e.g) e.g[n] = {};
                Gg(e);
              }
              ((e.i = t), (e.J = t ? Hr.receiver.friendlyName : ""), e.l.Jb());
            }
            function Gg(e) {
              if (e.h)
                for (var t = x(e.h.keys()), n = t.next(); !n.done; n = t.next()) {
                  n = n.value;
                  var r = e.h.get(n);
                  (e.h.delete(n), r.reject(new H(1, 7, 7e3)));
                }
            }
            function Ou(e, t) {
              t = Ug(t);
              var n = Hr;
              try {
                n.sendMessage("urn:x-cast:com.google.shaka.v2", t, function () {}, Es);
              } catch (r) {
                throw (
                  (t = new H(2, 8, 8005, r)),
                  (n = new Ae("error", new Map().set("detail", t))),
                  e.B("player", n),
                  e.qd(),
                  t
                );
              }
            }
            var I_ = 0.02,
              Ld = !1,
              Hr = null,
              bd = null,
              Uu = new Set();
            function ew(e) {
              if ((bd ? (g.__onGCastApiAvailable = bd) : delete g.__onGCastApiAvailable, (bd = null), e))
                for (var t = x(Uu), n = t.next(); !n.done; n = t.next()) n.value.init();
              typeof g.__onGCastApiAvailable == "function" && g.__onGCastApiAvailable(e);
            }
            function Ft(e, t, n, r) {
              ((r = r === void 0 ? !1 : r), ut.call(this));
              var i = this;
              ((this.i = e),
                (this.h = t),
                (this.l = this.o = this.m = this.u = this.j = null),
                (this.I = n),
                (this.H = r),
                (this.F = []),
                (this.C = []),
                (this.B = []),
                (this.G = new Map()),
                (this.g = null),
                g.chrome && je().Oa() != "CAST"
                  ? ((this.g = new Vg(
                      n,
                      function () {
                        return rw(i);
                      },
                      function () {
                        return iw(i);
                      },
                      function (s, o) {
                        return ow(i, s, o);
                      },
                      function () {
                        return sw(i);
                      },
                      function () {
                        return nw(i);
                      },
                      r,
                    )),
                    C_(this))
                  : ((this.j = this.i), (this.u = this.h)));
            }
            (q(Ft, ut),
              (h = Ft.prototype),
              (h.destroy = function (e) {
                return (
                  this.g && e !== void 0 && e && this.g.qd(),
                  this.l && (this.l.release(), (this.l = null)),
                  (e = []),
                  this.h && (e.push(this.h.destroy()), (this.h = null)),
                  this.g && (e.push(this.g.destroy()), (this.g = null)),
                  (this.u = this.j = this.i = null),
                  ut.prototype.release.call(this),
                  Promise.all(e)
                );
              }),
              (h.gk = function () {
                return this.j;
              }),
              (h.td = function () {
                return this.u;
              }),
              (h.sj = function () {
                return this.g ? this.g.m && Ld : !1;
              }),
              (h.wb = function () {
                return this.g ? this.g.wb() : !1;
              }),
              (h.eh = function () {
                return this.g ? this.g.eh() : "";
              }),
              (h.cast = function () {
                var e = this;
                return F(function (t) {
                  return t.g == 1
                    ? e.g
                      ? E(t, e.g.cast(), 2)
                      : t.return()
                    : e.h
                      ? E(t, e.h.Cc(), 0)
                      : t.return();
                });
              }),
              (h.qh = function (e) {
                this.g && this.g.qh(e);
              }),
              (h.il = function () {
                this.g && E_(this.g);
              }),
              (h.qd = function () {
                this.g && this.g.qd();
              }),
              (h.tj = function (e, t) {
                t = t === void 0 ? !1 : t;
                var n = this;
                return F(function (r) {
                  if (r.g == 1)
                    return (e == n.I && t == n.H) || ((n.I = e), (n.H = t), !n.g)
                      ? r.return()
                      : (n.g.qd(), E(r, n.g.destroy(), 2));
                  ((n.g = null),
                    (n.g = new Vg(
                      e,
                      function () {
                        return rw(n);
                      },
                      function () {
                        return iw(n);
                      },
                      function (i, s) {
                        return ow(n, i, s);
                      },
                      function () {
                        return sw(n);
                      },
                      function () {
                        return nw(n);
                      },
                      t,
                    )),
                    n.g.init(),
                    re(r));
                });
              }));
            function C_(e) {
              (e.g.init(), (e.l = new tt()));
              for (var t = x($1), n = t.next(); !n.done; n = t.next())
                e.l.D(e.i, n.value, function (s) {
                  e.g.wb() || ((s = V0(s)), e.m.dispatchEvent(s));
                });
              for (var r in Ec)
                e.l.D(e.h, Ec[r], function (s) {
                  e.g.wb() || e.o.dispatchEvent(s);
                });
              ((e.j = {}), (t = {}));
              for (var i in e.i)
                ((t = { ie: t.ie }),
                  (t.ie = i),
                  Object.defineProperty(e.j, t.ie, {
                    configurable: !1,
                    enumerable: !0,
                    get: (function (s) {
                      return function () {
                        return R_(e, s.ie);
                      };
                    })(t),
                    set: (function (s) {
                      return function (o) {
                        var u = s.ie;
                        e.g.wb() ? e.g.set("video", u, o) : (e.i[u] = o);
                      };
                    })(t),
                  }));
              ((e.u = {}),
                tw(e, function (s) {
                  Object.defineProperty(e.u, s, {
                    configurable: !1,
                    enumerable: !0,
                    get: function () {
                      return Nd(e, s);
                    },
                  });
                }),
                M_(e),
                (e.m = new ut()),
                (e.m.Je = e.j),
                (e.o = new ut()),
                (e.o.Je = e.u),
                e.l.D(e.h, "unloading", function () {
                  (e.g && e.g.wb()) || zg(e);
                }));
            }
            function M_(e) {
              var t = new Map();
              tw(e, function (n, r) {
                t.has(r)
                  ? ((r = t.get(r)), n.length < r.length ? e.G.set(n, r) : e.G.set(r, n))
                  : t.set(r, n);
              });
            }
            function tw(e, t) {
              function n(l) {
                return l == "constructor" || typeof r[l] != "function" ? !1 : !i.has(l);
              }
              var r = e.h,
                i = new Set(),
                s;
              for (s in r) n(s) && (i.add(s), t(s, r[s]));
              for (e = Object.getPrototypeOf(r), s = Object.getPrototypeOf({}); e && e != s; ) {
                for (var o = x(Object.getOwnPropertyNames(e)), u = o.next(); !u.done; u = o.next())
                  ((u = u.value), n(u) && (i.add(u), t(u, r[u])));
                e = Object.getPrototypeOf(e);
              }
            }
            function nw(e) {
              var t = {
                video: {},
                player: {},
                playerAfterLoad: {},
                manifest: e.h.rd(),
                startTime: null,
                addThumbnailsTrackCalls: e.F,
                addTextTrackAsyncCalls: e.C,
                addChaptersTrackCalls: e.B,
              };
              e.i.pause();
              for (var n = x(Fg), r = n.next(); !r.done; r = n.next()) ((r = r.value), (t.video[r] = e.i[r]));
              for (
                e.i.ended || (t.startTime = e.i.currentTime), n = x(q1), r = n.next();
                !r.done;
                r = n.next()
              ) {
                var i = r.value;
                ((r = i[1]), (i = e.h[i[0]]()), (t.player[r] = i));
              }
              for (n = x(J1), r = n.next(); !r.done; r = n.next())
                ((i = r.value), (r = i[1]), (i = e.h[i[0]]()), (t.playerAfterLoad[r] = i));
              return t;
            }
            function rw(e) {
              var t = new Ae("caststatuschanged");
              e.dispatchEvent(t);
            }
            function iw(e) {
              var t = new Ae(e.j.paused ? "pause" : "play");
              e.m.dispatchEvent(t);
            }
            function sw(e) {
              for (var t = x(q1), n = t.next(); !n.done; n = t.next()) {
                var r = n.value;
                ((n = r[1]), (r = e.g.get("player", r[0])()), e.h[n](r));
              }
              var i = e.F,
                s = e.C,
                o = e.B;
              zg(e);
              var u = e.g.get("player", "getAssetUri")();
              ((r = e.g.get("video", "ended")), (t = Promise.resolve()));
              var l = e.i.autoplay;
              ((n = null), r || (n = e.g.get("video", "currentTime")));
              var p;
              (r = e.g.get("player", "getTextTracks")()) &&
                r.length &&
                (p = r.find(function (v) {
                  return v.active;
                }));
              var m = e.g.get("player", "isTextTrackVisible")();
              u && ((e.i.autoplay = !1), (t = e.h.load(u, n)));
              var y = {};
              for (n = x(Fg), r = n.next(); !r.done; r = n.next())
                ((r = r.value), (y[r] = e.g.get("video", r)));
              t.then(
                function () {
                  if (e.i) {
                    for (var v = x(i), w = v.next(); !w.done; w = v.next()) {
                      w = w.value;
                      var A;
                      (A = e.td()).Pe.apply(A, Y(w));
                    }
                    for (v = x(s), A = v.next(); !A.done; A = v.next()) {
                      A = A.value;
                      var I;
                      (I = e.td()).Rd.apply(I, Y(A));
                    }
                    for (I = x(o), v = I.next(); !v.done; v = I.next()) {
                      v = v.value;
                      var C;
                      (C = e.td()).Oe.apply(C, Y(v));
                    }
                    for (C = x(Fg), I = C.next(); !I.done; I = C.next()) ((I = I.value), (e.i[I] = y[I]));
                    for (C = x(J1), I = C.next(); !I.done; I = C.next())
                      ((v = I.value), (I = v[1]), (v = e.g.get("player", v[0])()), e.h[I](v));
                    (e.h.wh(m),
                      p && e.h.oh(p.language, p.roles, p.forced),
                      (e.i.autoplay = l),
                      u && e.i.play());
                  }
                },
                function (v) {
                  ((v = new Map().set("detail", v)), (v = new Ae("error", v)), e.h.dispatchEvent(v));
                },
              );
            }
            function R_(e, t) {
              if (t == "addEventListener")
                return function (r, i, s) {
                  return e.m.addEventListener(r, i, s);
                };
              if (t == "removeEventListener")
                return function (r, i, s) {
                  return e.m.removeEventListener(r, i, s);
                };
              if (e.g.wb() && Object.keys(e.g.g.video).length == 0) {
                var n = e.i[t];
                if (typeof n != "function") return n;
              }
              return e.g.wb()
                ? e.g.get("video", t)
                : ((t = e.i[t]), typeof t == "function" && (t = t.bind(e.i)), t);
            }
            function Nd(e, t, n) {
              if (((n = n === void 0 ? !1 : n), e.G.has(t) && (t = e.G.get(t)), t == "addEventListener"))
                return function (r, i, s) {
                  return e.o.addEventListener(r, i, s);
                };
              if (t == "removeEventListener")
                return function (r, i, s) {
                  return e.o.removeEventListener(r, i, s);
                };
              if (t == "getMediaElement")
                return function () {
                  return e.j;
                };
              if (t == "getSharedConfiguration") return e.g.get("player", "getConfiguration");
              if (t == "getNetworkingEngine")
                return function () {
                  return e.h.Yb();
                };
              if (t == "getDrmEngine")
                return function () {
                  return e.h.F;
                };
              if (t == "getAdManager")
                return function () {
                  return e.h.di();
                };
              if (t == "getQueueManager")
                return function () {
                  return e.h.mi();
                };
              if (t == "setVideoContainer")
                return function (r) {
                  return e.h.Zi(r);
                };
              if (!n) {
                if (t == "addThumbnailsTrack")
                  return function () {
                    var r = It.apply(0, arguments);
                    return (e.F.push(r), Nd(e, t, !0).apply(null, Y(r)));
                  };
                if (t == "addTextTrackAsync")
                  return function () {
                    var r = It.apply(0, arguments);
                    return (e.C.push(r), Nd(e, t, !0).apply(null, Y(r)));
                  };
                if (t == "addChaptersTrack")
                  return function () {
                    var r = It.apply(0, arguments);
                    return (e.B.push(r), Nd(e, t, !0).apply(null, Y(r)));
                  };
              }
              if (e.g.wb()) {
                if (t == "getManifest" || t == "drmInfo")
                  return function () {
                    return (Be(t + "() does not work while casting!"), null);
                  };
                if (t == "attach" || t == "detach")
                  return function () {
                    return (Be(t + "() does not work while casting!"), Promise.resolve());
                  };
                if (t == "getChapters")
                  return function () {
                    return (Be(t + "() does not work while casting!"), []);
                  };
              }
              return (e.g.wb() && Object.keys(e.g.g.video).length == 0 && (Bg.has(t) || jg.has(t))) ||
                !e.g.wb()
                ? e.h[t].bind(e.h)
                : e.g.get("player", t);
            }
            function ow(e, t, n) {
              e.g.wb() &&
                (t == "video"
                  ? e.m.dispatchEvent(n)
                  : t == "player" && (n.type == "unloading" && zg(e), e.o.dispatchEvent(n)));
            }
            function zg(e) {
              ((e.F = []), (e.C = []), (e.B = []));
            }
            (de("shaka.cast.CastProxy", Ft),
              (Ft.prototype.changeReceiverId = Ft.prototype.tj),
              (Ft.prototype.forceDisconnect = Ft.prototype.qd),
              (Ft.prototype.suggestDisconnect = Ft.prototype.il),
              (Ft.prototype.setAppData = Ft.prototype.qh),
              (Ft.prototype.cast = Ft.prototype.cast),
              (Ft.prototype.receiverName = Ft.prototype.eh),
              (Ft.prototype.isCasting = Ft.prototype.wb),
              (Ft.prototype.canCast = Ft.prototype.sj),
              (Ft.prototype.getPlayer = Ft.prototype.td),
              (Ft.prototype.getVideo = Ft.prototype.gk),
              (Ft.prototype.destroy = Ft.prototype.destroy));
            function vn(e, t, n, r) {
              ut.call(this);
              var i = this;
              ((this.h = e),
                (this.g = t),
                (this.j = new tt()),
                (this.I = { video: e, player: t }),
                (this.G = n || function () {}),
                (this.J =
                  r ||
                  function (s) {
                    return s;
                  }),
                (this.i = null),
                (this.H = !1),
                (this.o = !0),
                (this.m = 0),
                (this.C = !1),
                (this.B = !0),
                (this.u = this.l = null),
                (this.F = new He(function () {
                  Xg(i);
                })),
                k_(this));
            }
            (q(vn, ut),
              (h = vn.prototype),
              (h.isConnected = function () {
                return this.H;
              }),
              (h.pk = function () {
                return this.o;
              }),
              (h.al = function (e) {
                this.i = e;
              }),
              (h.xj = function () {
                this.i = null;
              }),
              (h.cl = function (e) {
                (this.i || (this.i = { metadataType: cast.receiver.media.MetadataType.GENERIC }),
                  (this.i.title = e));
              }),
              (h.$k = function (e) {
                (this.i || (this.i = { metadataType: cast.receiver.media.MetadataType.GENERIC }),
                  (this.i.images = [{ url: e }]));
              }),
              (h.Zk = function (e) {
                (this.i || (this.i = {}),
                  (this.i.artist = e),
                  (this.i.metadataType = cast.receiver.media.MetadataType.MUSIC_TRACK));
              }),
              (h.destroy = function () {
                var e = this,
                  t,
                  n;
                return F(function (r) {
                  if (r.g == 1)
                    return (
                      e.j && (e.j.release(), (e.j = null)),
                      (t = []),
                      e.g && (t.push(e.g.destroy()), (e.g = null)),
                      e.F && (e.F.stop(), (e.F = null)),
                      (e.h = null),
                      (e.I = null),
                      (e.G = null),
                      (e.H = !1),
                      (e.o = !0),
                      (e.l = null),
                      (e.u = null),
                      ut.prototype.release.call(e),
                      E(r, Promise.all(t), 2)
                    );
                  ((n = cast.receiver.CastReceiverManager.getInstance()), n.stop(), re(r));
                });
              }));
            function k_(e) {
              var t = cast.receiver.CastReceiverManager.getInstance();
              ((t.onSenderConnected = function () {
                return aw(e);
              }),
                (t.onSenderDisconnected = function () {
                  return aw(e);
                }),
                (t.onSystemVolumeChanged = function () {
                  var i = cast.receiver.CastReceiverManager.getInstance().getSystemVolume();
                  (i &&
                    bi(e, { type: "update", update: { video: { volume: i.level, muted: i.muted } } }, e.l),
                    bi(e, { type: "event", targetName: "video", event: { type: "volumechange" } }, e.l));
                }),
                (e.u = t.getCastMessageBus("urn:x-cast:com.google.cast.media")),
                (e.u.onMessage = function (i) {
                  return D_(e, i);
                }),
                (e.l = t.getCastMessageBus("urn:x-cast:com.google.shaka.v2")),
                (e.l.onMessage = function (i) {
                  return P_(e, i);
                }),
                t.start(),
                (t = x($1)));
              for (var n = t.next(); !n.done; n = t.next())
                e.j.D(e.h, n.value, function (i) {
                  return uw(e, "video", i);
                });
              for (var r in Ec)
                e.j.D(e.g, Ec[r], function (i) {
                  return uw(e, "player", i);
                });
              (e.j.D(e.h, "loadeddata", function () {
                e.C = !0;
              }),
                e.j.D(e.g, "loading", function () {
                  ((e.o = !1), Yo(e));
                }),
                e.j.D(e.h, "playing", function () {
                  ((e.o = !1), Yo(e));
                }),
                e.j.D(e.h, "pause", function () {
                  Yo(e);
                }),
                e.j.D(e.g, "unloading", function () {
                  ((e.o = !0), Yo(e));
                }),
                e.j.D(e.h, "ended", function () {
                  new He(function () {
                    e.h && e.h.ended && ((e.o = !0), Yo(e));
                  }).ka(b_);
                }));
            }
            function aw(e) {
              ((e.m = 0),
                (e.B = !0),
                (e.H = cast.receiver.CastReceiverManager.getInstance().getSenders().length != 0),
                Yo(e));
            }
            function Yo(e) {
              var t;
              F(function (n) {
                if (n.g == 1) return E(n, Promise.resolve(), 2);
                if (!e.g) return n.return();
                ((t = new Ae("caststatuschanged")), e.dispatchEvent(t), lw(e) || Ni(e), re(n));
              });
            }
            function __(e, t, n) {
              var r, i, s, o, u, l, p, m, y, v, w, A, I, C, k, R, L, U, G;
              F(function (b) {
                switch (b.g) {
                  case 1:
                    for (r in t.player) ((i = t.player[r]), e.g[r](i));
                    return (
                      e.G(n),
                      (s = e.h.autoplay),
                      t.manifest
                        ? ((e.h.autoplay = !1), te(b, 5), E(b, e.g.load(t.manifest, t.startTime), 7))
                        : E(b, Promise.resolve(), 3)
                    );
                  case 7:
                    if (t.addThumbnailsTrackCalls)
                      for (o = x(t.addThumbnailsTrackCalls), u = o.next(); !u.done; u = o.next())
                        ((l = u.value), e.g.Pe.apply(e.g, Y(l)));
                    if (t.addTextTrackAsyncCalls)
                      for (p = x(t.addTextTrackAsyncCalls), m = p.next(); !m.done; m = p.next())
                        ((y = m.value), e.g.Rd.apply(e.g, Y(y)));
                    if (t.addChaptersTrackCalls)
                      for (v = x(t.addChaptersTrackCalls), w = v.next(); !w.done; w = v.next())
                        ((A = w.value), e.g.Oe.apply(e.g, Y(A)));
                    pe(b, 3);
                    break;
                  case 5:
                    return (
                      (I = oe(b)),
                      (C = new Map().set("detail", I)),
                      (k = new Ae("error", C)),
                      e.g && e.g.dispatchEvent(k),
                      b.return()
                    );
                  case 3:
                    if (!e.g) return b.return();
                    for (R in t.video) ((L = t.video[R]), (e.h[R] = L));
                    for (U in t.playerAfterLoad) ((G = t.playerAfterLoad[U]), e.g[U](G));
                    ((e.h.autoplay = s), t.manifest && (e.h.play(), Ni(e)), re(b));
                }
              });
            }
            function uw(e, t, n) {
              e.g && (Xg(e), bi(e, { type: "event", targetName: t, event: n }, e.l));
            }
            function Xg(e) {
              e.F.ka(L_);
              for (var t = { video: {}, player: {} }, n = x(T_), r = n.next(); !r.done; r = n.next())
                ((r = r.value), (t.video[r] = e.h[r]));
              (e.g.W() &&
                Y1.forEach(function (i, s) {
                  e.m % i == 0 && (t.player[s] = e.g[s]());
                }),
                Bg.forEach(function (i, s) {
                  e.m % i == 0 && (t.player[s] = e.g[s]());
                }),
                (n = cast.receiver.CastReceiverManager.getInstance().getSystemVolume()) &&
                  ((t.video.volume = n.level), (t.video.muted = n.muted)),
                bi(e, { type: "update", update: t }, e.l),
                jg.forEach(function (i, s) {
                  e.m % i == 0 &&
                    ((i = { player: {} }),
                    (i.player[s] = e.g[s]()),
                    bi(e, { type: "update", update: i }, e.l));
                }),
                e.C && (e.m += 1),
                lw(e));
            }
            function lw(e) {
              return e.B && (e.h.duration || e.g.W()) ? (Wg(e), (e.B = !1), !0) : !1;
            }
            function Wg(e, t) {
              var n = { contentId: e.g.rd(), streamType: e.g.W() ? "LIVE" : "BUFFERED", contentType: "" };
              (e.g.W() || (n.duration = e.h.duration),
                e.i && (n.metadata = e.i),
                Ni(e, t === void 0 ? 0 : t, n));
            }
            function P_(e, t) {
              var n = Pd(t.data);
              switch (n.type) {
                case "init":
                  ((e.m = 0), (e.C = !1), (e.B = !0), __(e, n.initState, n.appData), Xg(e));
                  break;
                case "appData":
                  e.G(n.appData);
                  break;
                case "set":
                  var r = n.targetName,
                    i = n.property;
                  if (((n = n.value), r == "video")) {
                    if (((t = cast.receiver.CastReceiverManager.getInstance()), i == "volume")) {
                      t.setSystemVolumeLevel(n);
                      break;
                    } else if (i == "muted") {
                      t.setSystemVolumeMuted(n);
                      break;
                    }
                  }
                  e.I[r][i] = n;
                  break;
                case "call":
                  ((r = e.I[n.targetName]), r[n.methodName].apply(r, n.args));
                  break;
                case "asyncCall":
                  ((r = n.targetName),
                    (i = n.methodName),
                    r == "player" && i == "load" && ((e.m = 0), (e.C = !1)));
                  var s = n.id,
                    o = t.senderId;
                  ((t = e.I[r]),
                    (n = t[i].apply(t, n.args)),
                    r == "player" &&
                      i == "load" &&
                      (n = n.then(function () {
                        e.B = !0;
                      })),
                    n.then(
                      function (u) {
                        return cw(e, o, s, null, u);
                      },
                      function (u) {
                        return cw(e, o, s, u, null);
                      },
                    ));
              }
            }
            function D_(e, t) {
              var n = Pd(t.data);
              switch (n.type) {
                case "PLAY":
                  (e.h.play(), Ni(e));
                  break;
                case "PAUSE":
                  (e.h.pause(), Ni(e));
                  break;
                case "SEEK":
                  t = n.currentTime;
                  var r = n.resumeState;
                  (t != null && (e.h.currentTime = Number(t)),
                    r && r == "PLAYBACK_START"
                      ? (e.h.play(), Ni(e))
                      : r && r == "PLAYBACK_PAUSE" && (e.h.pause(), Ni(e)));
                  break;
                case "STOP":
                  e.g.Cc().then(function () {
                    e.g && Ni(e);
                  });
                  break;
                case "GET_STATUS":
                  Wg(e, Number(n.requestId));
                  break;
                case "VOLUME":
                  ((r = n.volume), (t = r.level), (r = r.muted));
                  var i = e.h.volume,
                    s = e.h.muted;
                  (t != null && (e.h.volume = Number(t)),
                    r != null && (e.h.muted = r),
                    (i == e.h.volume && s == e.h.muted) || Ni(e));
                  break;
                case "LOAD":
                  ((e.m = 0),
                    (e.C = !1),
                    (e.B = !1),
                    (t = n.media),
                    (r = n.currentTime),
                    (i = e.J(t.contentId)),
                    (s = n.autoplay || !0),
                    e.G(t.customData),
                    s && (e.h.autoplay = !0),
                    e.g
                      .load(i, r)
                      .then(function () {
                        e.g && Wg(e);
                      })
                      .catch(function (o) {
                        var u = "LOAD_FAILED";
                        (o.category == 7 && o.code == 7e3 && (u = "LOAD_CANCELLED"),
                          bi(e, { requestId: Number(n.requestId), type: u }, e.u));
                      }));
                  break;
                default:
                  bi(
                    e,
                    { requestId: Number(n.requestId), type: "INVALID_REQUEST", reason: "INVALID_COMMAND" },
                    e.u,
                  );
              }
            }
            function cw(e, t, n, r, i) {
              e.g && bi(e, { type: "asyncComplete", id: n, error: r, res: i }, e.l, t);
            }
            function bi(e, t, n, r) {
              e.H && ((e = Ug(t)), r ? n.getCastChannel(r).send(e) : n.broadcast(e));
            }
            function Ni(e, t, n) {
              n = n === void 0 ? null : n;
              var r = {
                mediaSessionId: 0,
                playbackRate: e.h.playbackRate,
                playerState: e.o ? N_ : e.g.Rg() ? U_ : e.h.paused ? F_ : O_,
                currentTime: e.h.currentTime,
                supportedMediaCommands: 63,
                volume: { level: e.h.volume, muted: e.h.muted },
              };
              (n && (r.media = n),
                bi(e, { requestId: t === void 0 ? 0 : t, type: "MEDIA_STATUS", status: [r] }, e.u));
            }
            (de("shaka.cast.CastReceiver", vn),
              (vn.prototype.destroy = vn.prototype.destroy),
              (vn.prototype.setContentArtist = vn.prototype.Zk),
              (vn.prototype.setContentImage = vn.prototype.$k),
              (vn.prototype.setContentTitle = vn.prototype.cl),
              (vn.prototype.clearContentMetadata = vn.prototype.xj),
              (vn.prototype.setContentMetadata = vn.prototype.al),
              (vn.prototype.isIdle = vn.prototype.pk),
              (vn.prototype.isConnected = vn.prototype.isConnected));
            var L_ = 0.5,
              b_ = 5,
              N_ = "IDLE",
              O_ = "PLAYING",
              U_ = "BUFFERING",
              F_ = "PAUSED";
            function dw(e, t, n, r, i) {
              if (r >= i) return null;
              for (var s = -1, o = -1, u = 0; u < n.length; u++)
                if (
                  n[u].some(function (U) {
                    return U != null && U.g.trim() != "";
                  })
                ) {
                  s = u;
                  break;
                }
              for (u = n.length - 1; u >= 0; u--)
                if (
                  n[u].some(function (U) {
                    return U != null && U.g.trim() != "";
                  })
                ) {
                  o = u;
                  break;
                }
              if (s === -1 || o === -1) return null;
              for (var l = (u = !1), p = "white", m = "black", y = Kg(r, i, u, l, p, m); s <= o; s++) {
                for (var v = n[s], w = -1, A = -1, I = 0; I < v.length; I++)
                  if (v[I] != null && v[I].g.trim() !== "") {
                    w = I;
                    break;
                  }
                for (I = v.length - 1; I >= 0; I--)
                  if (v[I] != null && v[I].g.trim() !== "") {
                    A = I;
                    break;
                  }
                if (w === -1 || A === -1) ((v = fw(r, i)), e.nestedCues.push(v));
                else {
                  for (; w <= A; w++)
                    if ((I = v[w])) {
                      var C = I.l,
                        k = I.i,
                        R = I.j,
                        L = I.h;
                      ((C != u || k != l || R != p || L != m) &&
                        (y.payload && e.nestedCues.push(y),
                        (y = Kg(r, i, C, k, R, L)),
                        (u = C),
                        (l = k),
                        (p = R),
                        (m = L)),
                        (y.payload += I.g));
                    } else y.payload += " ";
                  (y.payload && e.nestedCues.push(y),
                    s !== o && ((y = fw(r, i)), e.nestedCues.push(y)),
                    (y = Kg(r, i, u, l, p, m)));
                }
              }
              return e.nestedCues.length ? { cue: e, stream: t } : null;
            }
            function Kg(e, t, n, r, i, s) {
              return (
                (e = new mt(e, t, "")),
                n && e.textDecoration.push(Ti),
                r && (e.fontStyle = xo),
                (e.color = i),
                (e.backgroundColor = s),
                e
              );
            }
            function fw(e, t) {
              return ((e = new mt(e, t, "")), (e.lineBreak = !0), e);
            }
            function hw(e, t, n, r, i) {
              ((this.g = e), (this.l = t), (this.i = n), (this.h = r), (this.j = i));
            }
            function $g(e, t) {
              ((this.i = []),
                (this.g = 1),
                (this.h = 0),
                (this.F = e),
                (this.C = t),
                (this.j = this.m = !1),
                (this.l = "white"),
                (this.o = "black"),
                (this.u = this.B = null),
                Fu(this));
            }
            function Od(e, t, n) {
              var r = "CC" + (((e.F << 1) | e.C) + 1),
                i = new mt(t, n, "");
              i.lineInterpretation = 1;
              var s = mw.get(e.g);
              return (
                s && (i.line = s),
                e.u != null && e.B != null && (i.position = 10 + Math.min(70, e.u * 10) + e.B * 2.5),
                (t = dw(i, r, e.i, t, n)) &&
                  e.g + t.cue.nestedCues.length - 3 > 15 &&
                  (s = mw.get(e.g + 3 - t.cue.nestedCues.length)) &&
                  (i.line = s),
                t
              );
            }
            function Fu(e) {
              (Oi(e, 0, 15), (e.g = 1));
            }
            function qo(e, t, n) {
              if (!(n < 32 || n > 127)) {
                var r = "";
                switch (t) {
                  case 0:
                    r = gw.has(n) ? gw.get(n) : String.fromCharCode(n);
                    break;
                  case 1:
                    r = B_.get(n);
                    break;
                  case 2:
                    (e.i[e.g].pop(), (r = j_.get(n)));
                    break;
                  case 3:
                    (e.i[e.g].pop(), (r = V_.get(n)));
                }
                r && e.i[e.g].push(new hw(r, e.m, e.j, e.o, e.l));
              }
            }
            function pw(e, t, n, r) {
              if (!(n < 0 || t < 0))
                if (t >= n)
                  for (--r; r >= 0; r--)
                    e.i[t + r] = e.i[n + r].map(function (s) {
                      return s;
                    });
                else
                  for (var i = 0; i < r; i++)
                    e.i[t + i] = e.i[n + i].map(function (s) {
                      return s;
                    });
            }
            function Oi(e, t, n) {
              for (var r = 0; r <= n; r++) e.i[t + r] = [];
            }
            var gw = new Map([
                [39, ""],
                [42, ""],
                [92, ""],
                [92, ""],
                [94, ""],
                [95, ""],
                [96, ""],
                [123, ""],
                [124, ""],
                [125, ""],
                [126, ""],
                [127, ""],
              ]),
              B_ = new Map([
                [48, ""],
                [49, ""],
                [50, ""],
                [51, ""],
                [52, ""],
                [53, ""],
                [54, ""],
                [55, ""],
                [56, ""],
                [57, " "],
                [58, ""],
                [59, ""],
                [60, ""],
                [61, ""],
                [62, ""],
                [63, ""],
              ]),
              j_ = new Map([
                [32, ""],
                [33, ""],
                [34, ""],
                [35, ""],
                [36, ""],
                [37, ""],
                [38, ""],
                [39, ""],
                [40, "*"],
                [41, "'"],
                [42, ""],
                [43, ""],
                [44, ""],
                [45, ""],
                [46, ""],
                [47, ""],
                [48, ""],
                [49, ""],
                [50, ""],
                [51, ""],
                [52, ""],
                [53, ""],
                [54, ""],
                [55, ""],
                [56, ""],
                [57, ""],
                [58, ""],
                [59, ""],
                [60, ""],
                [61, ""],
                [62, ""],
                [63, ""],
              ]),
              V_ = new Map([
                [32, ""],
                [33, ""],
                [34, ""],
                [35, ""],
                [36, ""],
                [37, ""],
                [38, ""],
                [39, ""],
                [40, ""],
                [41, "{"],
                [42, "}"],
                [43, "\\"],
                [44, "^"],
                [45, "_"],
                [46, "|"],
                [47, "~"],
                [48, ""],
                [49, ""],
                [50, ""],
                [51, ""],
                [52, ""],
                [53, ""],
                [54, ""],
                [55, ""],
                [56, ""],
                [57, ""],
                [58, ""],
                [59, ""],
                [60, ""],
                [61, ""],
                [62, ""],
                [63, ""],
              ]),
              mw = new Map([
                [1, 10],
                [2, 15.33],
                [3, 20.66],
                [4, 26],
                [5, 31.33],
                [6, 36.66],
                [7, 42],
                [8, 47.33],
                [9, 52.66],
                [10, 58],
                [11, 63.33],
                [12, 68.66],
                [13, 74],
                [14, 79.33],
                [15, 84.66],
              ]);
            function Ud(e, t) {
              ((this.h = 0),
                (this.o = new $g(e, t)),
                (this.i = new $g(e, t)),
                (this.g = this.j = new $g(e, t)),
                (this.l = 0),
                (this.m = null));
            }
            function Yg(e, t, n) {
              e.g = e.i;
              var r = e.g,
                i = null;
              return (
                e.h !== 3 &&
                  e.h !== 4 &&
                  ((i = Od(r, e.l, n)),
                  (n = e.i),
                  (n.g = n.h > 0 ? n.h : 0),
                  Oi(n, 0, 15),
                  (n = e.j),
                  (n.g = n.h > 0 ? n.h : 0),
                  Oi(n, 0, 15),
                  (r.g = 15)),
                (e.h = 3),
                (r.h = t),
                i
              );
            }
            function yw(e) {
              ((e.h = 1), (e.g = e.j), (e.g.h = 0));
            }
            function vw(e) {
              (lr("Cea608DataChannel", "CEA-608 text mode entered, but is unsupported"),
                (e.g = e.o),
                (e.h = 4));
            }
            var H_ = "black green blue cyan red yellow magenta black".split(" "),
              xw = "white green blue cyan red yellow magenta white_italics".split(" ");
            function qg(e, t) {
              ((this.J = t),
                (this.N = e),
                (this.K = this.l = !1),
                (this.m = this.o = this.H = this.M = this.I = 0),
                (this.G = 2),
                (this.i = []),
                (this.g = this.h = this.j = 0),
                (this.F = this.B = !1),
                (this.C = "white"),
                (this.u = "black"),
                Jg(this));
            }
            function Jg(e) {
              e.i = [];
              for (var t = 0; t < 16; t++) e.i.push(Qg());
            }
            function Qg() {
              for (var e = [], t = 0; t < 42; t++) e.push(null);
              return e;
            }
            function ds(e, t) {
              Tw(e) && ((e.i[e.h][e.g] = new hw(t, e.F, e.B, e.u, e.C)), e.g++);
            }
            function Tw(e) {
              var t = e.g < e.m && e.g >= 0;
              return e.h < e.o && e.h >= 0 && t;
            }
            qg.prototype.isVisible = function () {
              return this.l;
            };
            function G_(e) {
              for (var t = 0, n = 1; n < 16; n++, t++) e.i[t] = e.i[n];
              for (n = 0; n < 1; n++, t++) e.i[t] = Qg();
            }
            function Ys(e, t, n) {
              var r = new mt(e.j, t, "");
              r.textAlign = e.G === 0 ? "left" : e.G === 1 ? "right" : oi;
              var i = r.region;
              switch (
                (e.J && (i.id += "svc" + e.J),
                (i.id += "win" + e.N),
                (i.height = e.o),
                (i.width = e.m),
                (i.heightUnits = 2),
                (i.widthUnits = 2),
                (i.viewportAnchorX = e.I),
                (i.viewportAnchorY = e.M),
                (i.viewportAnchorUnits = e.K ? Jn : 2),
                e.H)
              ) {
                case 0:
                  ((i.regionAnchorX = 0), (i.regionAnchorY = 0));
                  break;
                case 1:
                  ((i.regionAnchorX = 50), (i.regionAnchorY = 0));
                  break;
                case 2:
                  ((i.regionAnchorX = 100), (i.regionAnchorY = 0));
                  break;
                case 3:
                  ((i.regionAnchorX = 0), (i.regionAnchorY = 50));
                  break;
                case 4:
                  ((i.regionAnchorX = 50), (i.regionAnchorY = 50));
                  break;
                case 5:
                  ((i.regionAnchorX = 100), (i.regionAnchorY = 50));
                  break;
                case 6:
                  ((i.regionAnchorX = 0), (i.regionAnchorY = 100));
                  break;
                case 7:
                  ((i.regionAnchorX = 50), (i.regionAnchorY = 100));
                  break;
                case 8:
                  ((i.regionAnchorX = 100), (i.regionAnchorY = 100));
              }
              return ((n = dw(r, "svc" + n, e.i, e.j, t)) && (e.j = t), n);
            }
            qg.prototype.display = function () {
              this.l = !0;
            };
            function z_() {
              ((this.i = []), (this.h = null), (this.g = 0));
            }
            function X_(e, t) {
              t.type === 3
                ? ((e.g = (t.value & 63) * 2 - 1), (e.h = []))
                : e.h &&
                  (e.g > 0 && (e.h.push(t), e.g--),
                  e.g === 0 && (e.i.push(new Bu(e.h)), (e.h = null), (e.g = 0)));
            }
            function Bu(e) {
              ((this.g = 0), (this.h = e));
            }
            ((Bu.prototype.Ia = function () {
              return this.g < this.h.length;
            }),
              (Bu.prototype.Pa = function () {
                return this.g;
              }));
            function Wt(e) {
              if (!e.Ia()) throw new H(2, 2, 3e3);
              return e.h[e.g++];
            }
            ((Bu.prototype.skip = function (e) {
              if (this.g + e > this.h.length) throw new H(2, 2, 3e3);
              this.g += e;
            }),
              (Bu.prototype.Qi = function (e) {
                if (this.g - e < 0) throw new H(2, 2, 3e3);
                this.g -= e;
              }));
            function W_(e) {
              ((this.i = e), (this.h = [null, null, null, null, null, null, null, null]), (this.g = null));
            }
            function K_(e, t, n, r) {
              if (!e.g) return [];
              if (n == 24)
                return (
                  (n = Wt(t).value),
                  (r = Wt(t).value),
                  (n = (function (s) {
                    return s
                      .map(function (o) {
                        return ("0" + (o & 255).toString(16)).slice(-2);
                      })
                      .join("");
                  })([n, r])),
                  ds(e.g, String.fromCharCode(parseInt(n, 16))),
                  []
                );
              t = e.g;
              var i = null;
              switch (n) {
                case 8:
                  !Tw(t) ||
                    (t.g <= 0 && t.h <= 0) ||
                    (t.g <= 0 ? ((t.g = t.m - 1), t.h--) : t.g--, (t.i[t.h][t.g] = null));
                  break;
                case 13:
                  (t.isVisible() && (i = Ys(t, r, e.i)), t.h + 1 >= t.o ? G_(t) : t.h++, (t.g = 0));
                  break;
                case 14:
                  (t.isVisible() && (i = Ys(t, r, e.i)), (t.i[t.h] = Qg()), (t.g = 0));
                  break;
                case 12:
                  (t.isVisible() && (i = Ys(t, r, e.i)), Jg(t), (t.h = 0), (t.g = 0));
              }
              return i ? [i] : [];
            }
            function $_(e, t, n, r) {
              if (n >= 128 && n <= 135) ((r = n & 7), e.h[r] && (e.g = e.h[r]));
              else {
                if (n === 136) {
                  ((n = Wt(t).value), (t = []), (n = x(ju(e, n))));
                  for (var i = n.next(); !i.done; i = n.next()) {
                    if (((i = e.h[i.value]), i.isVisible())) {
                      var s = Ys(i, r, e.i);
                      s && t.push(s);
                    }
                    Jg(i);
                  }
                  return t;
                }
                if (n === 137)
                  for (t = Wt(t).value, t = x(ju(e, t)), n = t.next(); !n.done; n = t.next())
                    ((n = e.h[n.value]), n.isVisible() || (n.j = r), n.display());
                else {
                  if (n === 138) {
                    for (n = Wt(t).value, t = null, n = x(ju(e, n)), i = n.next(); !i.done; i = n.next())
                      ((i = e.h[i.value]), i.isVisible() && (t = Ys(i, r, e.i)), (i.l = !1));
                    return t ? [t] : [];
                  }
                  if (n === 139) {
                    for (n = Wt(t).value, t = null, n = x(ju(e, n)), i = n.next(); !i.done; i = n.next())
                      ((i = e.h[i.value]), i.isVisible() ? (t = Ys(i, r, e.i)) : (i.j = r), (i.l = !i.l));
                    return t ? [t] : [];
                  }
                  if (n === 140) return ((t = Wt(t).value), ww(e, t, r));
                  if (n === 143) return ((r = ww(e, 255, r)), Sw(e), r);
                  if (n === 144)
                    (t.skip(1), (r = Wt(t).value), e.g && ((e.g.B = (r & 128) > 0), (e.g.F = (r & 64) > 0)));
                  else if (n === 145)
                    ((r = Wt(t).value),
                      (n = Wt(t).value),
                      t.skip(1),
                      e.g &&
                        ((t = Aw((n & 48) >> 4, (n & 12) >> 2, n & 3)),
                        (e.g.C = Aw((r & 48) >> 4, (r & 12) >> 2, r & 3)),
                        (e.g.u = t)));
                  else if (n === 146)
                    ((r = Wt(t).value),
                      (t = Wt(t).value),
                      e.g && ((e = e.g), (e.h = r & 15), (e.g = t & 63)));
                  else if (n === 151)
                    (t.skip(1), t.skip(1), (r = Wt(t).value), t.skip(1), e.g && (e.g.G = r & 3));
                  else if (n >= 152 && n <= 159) {
                    ((n = (n & 15) - 8),
                      (i = e.h[n] !== null),
                      i || ((s = new qg(n, e.i)), (s.j = r), (e.h[n] = s)),
                      (r = Wt(t).value),
                      (s = Wt(t).value));
                    var o = Wt(t).value,
                      u = Wt(t).value,
                      l = Wt(t).value;
                    ((t = Wt(t).value),
                      (i && (t & 7) === 0) ||
                        ((t = e.h[n]),
                        (t.h = 0),
                        (t.g = 0),
                        (t.F = !1),
                        (t.B = !1),
                        (t.C = "white"),
                        (t.u = "black")),
                      (t = e.h[n]),
                      (t.l = (r & 32) > 0),
                      (t.M = s & 127),
                      (t.I = o),
                      (t.H = (u & 240) >> 4),
                      (t.K = (s & 128) > 0),
                      (t.o = (u & 15) + 1),
                      (t.m = (l & 63) + 1),
                      (e.g = e.h[n]));
                  }
                }
              }
              return [];
            }
            function ju(e, t) {
              for (var n = [], r = 0; r < 8; r++) ((t & 1) === 1 && e.h[r] && n.push(r), (t >>= 1));
              return n;
            }
            function ww(e, t, n) {
              var r = [];
              t = x(ju(e, t));
              for (var i = t.next(); !i.done; i = t.next()) {
                i = i.value;
                var s = e.h[i];
                (s.isVisible() && (s = Ys(s, n, e.i)) && r.push(s), (e.h[i] = null));
              }
              return r;
            }
            function Sw(e) {
              ((e.g = null), (e.h = [null, null, null, null, null, null, null, null]));
            }
            function Aw(e, t, n) {
              var r = { 0: 0, 1: 0, 2: 1, 3: 1 };
              return ((e = r[e]), (t = r[t]), (n = r[n]), Y_[(e << 2) | (t << 1) | n]);
            }
            var Ew = new Map([
                [32, " "],
                [33, ""],
                [37, ""],
                [42, ""],
                [44, ""],
                [48, ""],
                [49, ""],
                [50, ""],
                [51, ""],
                [52, ""],
                [53, ""],
                [57, ""],
                [58, ""],
                [60, ""],
                [61, ""],
                [63, ""],
                [118, ""],
                [119, ""],
                [120, ""],
                [121, ""],
                [122, ""],
                [123, ""],
                [124, ""],
                [125, ""],
                [126, ""],
                [127, ""],
              ]),
              Y_ = "black blue green cyan red magenta yellow white".split(" ");
            function Jo() {
              ((this.h = []),
                (this.g = []),
                (this.i = new z_()),
                (this.l = 0),
                (this.m = new Map([
                  ["CC1", new Ud(0, 0)],
                  ["CC2", new Ud(0, 1)],
                  ["CC3", new Ud(1, 0)],
                  ["CC4", new Ud(1, 1)],
                ])),
                (this.u = this.o = 0),
                (this.j = new Map()),
                (this.C = !0),
                (this.B = new Set()),
                Zg(this));
            }
            Jo.prototype.clear = function () {
              ((this.l = 0), (this.h = []), (this.g = []));
              var e = this.i;
              ((e.i = []), (e.h = []), (e.g = 0), Zg(this), (e = x(this.j.values())));
              for (var t = e.next(); !t.done; t = e.next()) Sw(t.value);
            };
            function Zg(e) {
              ((e.o = 0), (e.u = 0));
              for (var t = x(e.m.values()), n = t.next(); !n.done; n = t.next())
                ((n = n.value), (n.h = 0), (n.g = n.j), (n.m = null), Fu(n.i), Fu(n.j), Fu(n.o));
              e.C = !0;
            }
            ((Jo.prototype.extract = function (e, t) {
              if (this.C) {
                for (var n = x(this.m.values()), r = n.next(); !r.done; r = n.next()) r.value.l = t;
                this.C = !1;
              }
              if (
                ((e = new yt(e, 0)),
                !(e.getLength() < 8) &&
                  e.Y() === 181 &&
                  e.Ca() === 49 &&
                  e.U() === 1195456820 &&
                  e.Y() === 3 &&
                  ((n = e.Y()), (n & 64) !== 0))
              )
                for (n &= 31, e.skip(1), r = 0; r < n; r++) {
                  var i = e.Y(),
                    s = (i & 4) >> 2,
                    o = e.Y(),
                    u = e.Y();
                  s &&
                    ((i &= 3),
                    i === 0 || i === 1
                      ? this.h.push({ pts: t, type: i, Cb: o, kc: u, order: this.h.length })
                      : (this.g.push({ pts: t, type: i, value: o, order: this.g.length }),
                        this.g.push({ pts: t, type: 2, value: u, order: this.g.length })));
                }
            }),
              (Jo.prototype.decode = function () {
                function e(i, s) {
                  return i.pts - s.pts || i.order - s.order;
                }
                var t = [];
                (this.h.sort(e), this.g.sort(e));
                for (var n = x(this.h), r = n.next(); !r.done; r = n.next())
                  (r = q_(this, r.value)) && t.push(r);
                for (n = x(this.g), r = n.next(); !r.done; r = n.next()) X_(this.i, r.value);
                for (n = x(this.i.i), r = n.next(); !r.done; r = n.next())
                  ((r = J_(this, r.value)), t.push.apply(t, Y(r)));
                return ((this.i.i = []), (this.h = []), (this.g = []), t);
              }));
            function q_(e, t) {
              var n = t.type;
              if ((t.Cb & 112) === 16) {
                var r = (t.Cb >> 3) & 1;
                n === 0 ? (e.o = r) : (e.u = r);
              }
              if (
                ((r = "CC" + (((n << 1) | (n ? e.u : e.o)) + 1)),
                (n = e.m.get(r)),
                (t.Cb === 255 && t.kc === 255) || (!t.Cb && !t.kc) || !Iw(t.Cb) || !Iw(t.kc))
              )
                return (++e.l >= 45 && Zg(e), null);
              ((e.l = 0), (t.Cb &= 127), (t.kc &= 127));
              var i = t.Cb;
              if ((i >= 1 && i <= 15) || (!t.Cb && !t.kc)) return null;
              if (((i = null), (t.Cb & 112) === 16))
                e: {
                  if ((e.B.add(r), (r = t.Cb), (e = t.kc), n.m === ((r << 8) | e))) n.m = null;
                  else if (((n.m = (r << 8) | e), (r & 240) === 16 && (e & 192) === 64)) {
                    ((t = [11, 11, 1, 2, 3, 4, 12, 13, 14, 15, 5, 6, 7, 8, 9, 10][
                      ((r & 7) << 1) | ((e >> 5) & 1)
                    ]),
                      (r = "white"),
                      (i = !1));
                    var s = null,
                      o = e > 95 ? e - 96 : e - 64;
                    (o <= 13
                      ? (r = xw[Math.floor(o / 2)])
                      : o <= 15
                        ? (i = !0)
                        : (s = Math.floor((o - 16) / 2)),
                      (e = (e & 1) === 1),
                      n.h !== 4 &&
                        ((o = n.g),
                        n.h === 3 &&
                          t !== o.g &&
                          ((n = 1 + t - o.h),
                          pw(o, n, 1 + o.g - o.h, o.h),
                          Oi(o, 0, n - 1),
                          Oi(o, t + 1, 15 - t)),
                        (o.g = t),
                        (o.m = e),
                        (o.j = i),
                        (o.l = r),
                        (o.u = s),
                        (o.o = "black")));
                  } else if ((r & 247) === 17 && (e & 240) === 32)
                    ((n.g.m = !1),
                      (n.g.j = !1),
                      (n.g.l = "white"),
                      qo(n.g, 0, 32),
                      (r = !1),
                      (t = xw[(e & 14) >> 1]),
                      t === "white_italics" && ((t = "white"), (r = !0)),
                      (n.g.m = (e & 1) === 1),
                      (n.g.j = r),
                      (n.g.l = t));
                  else if (((r & 247) === 16 && (e & 240) === 32) || ((r & 247) === 23 && (e & 255) === 45))
                    ((t = "black"), (r & 7) === 0 && (t = H_[(e & 14) >> 1]), (n.g.o = t));
                  else if ((r & 247) === 17 && (e & 240) === 48) qo(n.g, 1, e);
                  else if ((r & 246) === 18 && (e & 224) === 32) qo(n.g, r & 1 ? 3 : 2, e);
                  else {
                    if ((r & 246) === 20 && (e & 240) === 32) {
                      switch (((e = t.pts), (r = null), t.kc)) {
                        case 32:
                          yw(n);
                          break;
                        case 33:
                          ((n = n.g), n.i[n.g].pop());
                          break;
                        case 37:
                          r = Yg(n, 2, e);
                          break;
                        case 38:
                          r = Yg(n, 3, e);
                          break;
                        case 39:
                          r = Yg(n, 4, e);
                          break;
                        case 40:
                          qo(n.g, 0, 32);
                          break;
                        case 41:
                          ((n.h = 2), (n.g = n.i), (n.g.h = 0), (n.l = e));
                          break;
                        case 42:
                          (Fu(n.o), vw(n));
                          break;
                        case 43:
                          vw(n);
                          break;
                        case 44:
                          ((t = n.i), (r = null), n.h !== 4 && (r = Od(t, n.l, e)), Oi(t, 0, 15));
                          break;
                        case 45:
                          ((t = n.g),
                            n.h !== 3
                              ? (r = null)
                              : ((r = Od(t, n.l, e)),
                                (i = t.g - t.h + 1),
                                pw(t, i - 1, i, t.h),
                                Oi(t, 0, i - 1),
                                Oi(t, t.g, 15 - t.g),
                                (n.l = e)));
                          break;
                        case 46:
                          Oi(n.j, 0, 15);
                          break;
                        case 47:
                          ((t = null),
                            n.h !== 4 && (t = Od(n.i, n.l, e)),
                            (r = n.j),
                            (n.j = n.i),
                            (n.i = r),
                            yw(n),
                            (n.l = e),
                            (r = t));
                      }
                      i = r;
                      break e;
                    }
                    (r == 23 || r == 31) && e >= 33 && e <= 35 && (n.g.B = e - 32);
                  }
                  i = null;
                }
              else ((e = t.kc), qo(n.g, 0, t.Cb), qo(n.g, 0, e));
              return i;
            }
            function J_(e, t) {
              var n = [];
              try {
                for (; t.Ia(); ) {
                  var r = Wt(t).value,
                    i = (r & 224) >> 5,
                    s = r & 31;
                  if ((i === 7 && s != 0 && (i = Wt(t).value & 63), i != 0)) {
                    (e.B.add("svc" + i), e.j.has(i) || e.j.set(i, new W_(i)));
                    for (var o = e.j.get(i), u = t.Pa(); t.Pa() - u < s; ) {
                      i = o;
                      var l = t,
                        p = Wt(l),
                        m = p.value,
                        y = p.pts;
                      if (m === 16) {
                        var v = Wt(l);
                        m = (m << 16) | v.value;
                      }
                      if (m >= 0 && m <= 31) var w = K_(i, l, m, y);
                      else if (m >= 128 && m <= 159) w = $_(i, l, m, y);
                      else {
                        if (m >= 4096 && m <= 4127)
                          ((i = l),
                            (l = m & 255),
                            l >= 8 && l <= 15
                              ? i.skip(1)
                              : l >= 16 && l <= 23
                                ? i.skip(2)
                                : l >= 24 && l <= 31 && i.skip(3));
                        else if (m >= 4224 && m <= 4255)
                          ((i = l),
                            (l = m & 255),
                            l >= 128 && l <= 135 ? i.skip(4) : l >= 136 && l <= 143 && i.skip(5));
                        else if (m >= 32 && m <= 127)
                          ((l = m), i.g && (l === 127 ? ds(i.g, "") : ds(i.g, String.fromCharCode(l))));
                        else if (m >= 160 && m <= 255) i.g && ds(i.g, String.fromCharCode(m));
                        else if (m >= 4128 && m <= 4223) {
                          if (((l = m & 255), i.g))
                            if (Ew.has(l)) {
                              var A = Ew.get(l);
                              ds(i.g, A);
                            } else ds(i.g, "_");
                        } else
                          m >= 4256 &&
                            m <= 4351 &&
                            i.g &&
                            ((m & 255) != 160 ? ds(i.g, "_") : ds(i.g, "[CC]"));
                        w = [];
                      }
                      n.push.apply(n, Y(w));
                    }
                  }
                }
              } catch (I) {
                if (I instanceof H && I.code === 3e3)
                  lr("CEA708_INVALID_DATA", "Buffer read out of bounds / invalid CEA-708 Data.");
                else throw I;
              }
              return n;
            }
            function Iw(e) {
              for (var t = 0; e; ) ((t ^= e & 1), (e >>= 1));
              return t === 1;
            }
            ((Jo.prototype.getStreams = function () {
              return Array.from(this.B);
            }),
              de("shaka.cea.CeaDecoder", Jo),
              (_s = function () {
                return new Jo();
              }));
            function Cw(e) {
              for (var t = [], n = e, r = (e = 0); r < n.length; )
                (e == 2 && n[r] == 3
                  ? ((e = 0), (n = [].concat(Y(n))), n.splice(r, 1), (n = new Uint8Array(n)))
                  : n[r] == 0
                    ? e++
                    : (e = 0),
                  r++);
              for (e = n, r = 0; r < e.length; ) {
                for (n = 0; e[r] == 255; ) ((n += 255), r++);
                n += e[r++];
                for (var i = 0; e[r] == 255; ) ((i += 255), r++);
                ((i += e[r++]), n == 4 && t.push(e.subarray(r, r + i)), (r += i));
              }
              return t;
            }
            function Fd() {
              ((this.j = new Map()), (this.i = this.h = 0), (this.g = em));
            }
            ((Fd.prototype.init = function (e) {
              function t(s) {
                ((s = s.name), Bd.has(s) && (n.g = Bd.get(s)));
              }
              var n = this,
                r = [],
                i = [];
              if (
                (new ct()
                  .box("moov", Fe)
                  .box("mvex", Fe)
                  .S("trex", function (s) {
                    var o = s.reader;
                    (o.skip(4), o.skip(4), (s = o.U()), (o = o.U()), (n.h = s), (n.i = o));
                  })
                  .box("trak", Fe)
                  .S("tkhd", function (s) {
                    var o = s.reader;
                    ((s = s.version), s == 1 ? (o.skip(8), o.skip(8)) : (o.skip(4), o.skip(4)));
                    var u = o.U();
                    (s == 1 ? o.skip(8) : o.skip(4),
                      o.skip(4),
                      o.skip(8),
                      o.skip(2),
                      o.skip(2),
                      o.skip(2),
                      o.skip(2),
                      o.skip(36),
                      o.Ca(),
                      o.Ca(),
                      o.Ca(),
                      o.Ca(),
                      r.push(u));
                  })
                  .box("mdia", Fe)
                  .S("mdhd", function (s) {
                    ((s = Lc(s.reader, s.version)), i.push(s.timescale));
                  })
                  .box("minf", Fe)
                  .box("stbl", Fe)
                  .S("stsd", Ci)
                  .box("avc1", t)
                  .box("avc3", t)
                  .box("dvav", t)
                  .box("dva1", t)
                  .box("hev1", t)
                  .box("hvc1", t)
                  .box("dvh1", t)
                  .box("dvhe", t)
                  .box("vvc1", t)
                  .box("vvi1", t)
                  .box("dvc1", t)
                  .box("dvi1", t)
                  .box("encv", Zn)
                  .box("sinf", Fe)
                  .box("frma", function (s) {
                    ((s = Tp(s.reader).codec), Bd.has(s) && (n.g = Bd.get(s)));
                  })
                  .parse(e, !0, !0),
                !r.length || !i.length || r.length != i.length)
              )
                throw new H(2, 2, 2010);
              (this.g == em && Be("Unable to determine bitstream format for CEA parsing!"),
                r.forEach(function (s, o) {
                  n.j.set(s, i[o]);
                }));
            }),
              (Fd.prototype.parse = function (e) {
                var t = this;
                if (this.g == em) return [];
                var n = [],
                  r = 0,
                  i = [];
                return (
                  new ct()
                    .box("moof", function (s) {
                      ((r = s.start), (i = []), Fe(s));
                    })
                    .box("traf", function (s) {
                      (i.push({ baseMediaDecodeTime: null, Wd: t.h, Xd: t.i, Ii: [], timescale: 9e4 }),
                        Fe(s));
                    })
                    .S("trun", function (s) {
                      var o = i[i.length - 1];
                      ((s = bc(s.reader, s.version, s.flags)), o.Ii.push(s));
                    })
                    .S("tfhd", function (s) {
                      var o = i[i.length - 1];
                      ((s = Pc(s.reader, s.flags)),
                        (o.Wd = s.Wd || t.h),
                        (o.Xd = s.Xd || t.i),
                        (s = s.trackId),
                        t.j.has(s) && (o.timescale = t.j.get(s)));
                    })
                    .S("tfdt", function (s) {
                      var o = i[i.length - 1];
                      ((s = Dc(s.reader, s.version)), (o.baseMediaDecodeTime = s.baseMediaDecodeTime));
                    })
                    .box("mdat", function (s) {
                      for (
                        var o = r - s.start - 8, u = s.reader.Pa(), l = x(i), p = l.next();
                        !p.done;
                        p = l.next()
                      )
                        ((p = p.value),
                          p.baseMediaDecodeTime === null
                            ? Be("Unable to find base media decode time for CEA captions!")
                            : (s.reader.seek(u),
                              Q_(t, s.reader, p.baseMediaDecodeTime, p.timescale, p.Wd, p.Xd, o, p.Ii, n)));
                    })
                    .parse(e, !1, !0),
                  n
                );
              }));
            function Q_(e, t, n, r, i, s, o, u, l) {
              var p = 0,
                m = s,
                y = u.map(function (A) {
                  return A.mh;
                });
              for (
                y = [].concat.apply([], Y(y)), y.length && (m = y[0].sampleSize || s), t.skip(o + u[0].qg);
                t.Ia();
              ) {
                o = t.U();
                var v = t.Y(),
                  w = null;
                switch (((w = !1), (u = 1), e.g)) {
                  case Vu:
                    ((w = v & 31), (w = w == 6));
                    break;
                  case Hu:
                    ((u = 2), t.skip(1), (w = (v >> 1) & 63), (w = w == 39 || w == 40));
                    break;
                  case Gu:
                    ((u = 2), t.skip(1), (w = (v >> 1) & 63), (w = w == 23 || w == 24));
                    break;
                  default:
                    return;
                }
                if (w)
                  for (
                    v = 0,
                      p < y.length && (v = y[p].Gf || 0),
                      v = (n + v) / r,
                      u = t.Tb(o - u, !1),
                      u = x(Cw(u)),
                      w = u.next();
                    !w.done;
                    w = u.next()
                  )
                    l.push({ packet: w.value, pts: v });
                else
                  try {
                    t.skip(o - u);
                  } catch (A) {
                    break;
                  }
                ((m -= o + 4),
                  m == 0 &&
                    ((n = p < y.length ? n + (y[p].nh || i) : n + i),
                    p++,
                    p < y.length ? (m = y[p].sampleSize || s) : (m = s)));
              }
            }
            de("shaka.cea.Mp4CeaParser", Fd);
            var em = 0,
              Vu = 1,
              Hu = 2,
              Gu = 3,
              Bd = new Map()
                .set("avc1", Vu)
                .set("avc3", Vu)
                .set("dvav", Vu)
                .set("dva1", Vu)
                .set("hev1", Hu)
                .set("hvc1", Hu)
                .set("dvh1", Hu)
                .set("dvhe", Hu)
                .set("vvc1", Gu)
                .set("vvi1", Gu)
                .set("dvc1", Gu)
                .set("dvi1", Gu);
            Xh("video/mp4", function () {
              return new Fd();
            });
            function jd() {
              this.g = null;
            }
            ((jd.prototype.init = function () {}),
              (jd.prototype.parse = function (e) {
                this.g ? this.g.clearData() : (this.g = new pt());
                var t = [];
                if (((e = Le(e)), !Lo(e))) return t;
                e = this.g.parse(e);
                var n = e.Yd(),
                  r = e.ef();
                switch (((e = []), n.video)) {
                  case "avc":
                    e.push(6);
                    break;
                  case "hvc":
                    (e.push(39), e.push(40));
                }
                if (!e.length) return t;
                for (n = x(r), r = n.next(); !r.done; r = n.next())
                  if (((r = r.value), e.includes(r.type) && r.time != null))
                    for (var i = x(Cw(r.data)), s = i.next(); !s.done; s = i.next())
                      t.push({ packet: s.value, pts: r.time });
                return t;
              }),
              de("shaka.cea.TsCeaParser", jd),
              Xh("video/mp2t", function () {
                return new jd();
              }));
            function Z_(e) {
              var t = 0,
                n = Bn(e),
                r = n.getUint32(t, !0);
              if (r != e.byteLength) return [];
              e: {
                for (e = t + 4 + 2, t = []; e < n.byteLength - 1; ) {
                  ((r = n.getUint16(e, !0)), (e += 2));
                  var i = n.getUint16(e, !0);
                  if (((e += 2), (i & 1) != 0 || i + e > n.byteLength)) {
                    n = [];
                    break e;
                  }
                  var s = Le(n, e, i);
                  (t.push({ type: r, value: s }), (e += i));
                }
                n = t;
              }
              return n;
            }
            function Mw(e) {
              return (
                (e = Sr(Lt(e))),
                (e = Z_(e).filter(function (t) {
                  return t.type === eP;
                })[0]),
                e ? ((e = $i(e.value, !0)), (e = Ls(e, "WRMHEADER")) ? e : null) : null
              );
            }
            function Vd(e) {
              try {
                var t = Mw(e);
                if (t)
                  e: {
                    for (var n = x(Jr(t, "DATA")), r = n.next(); !r.done; r = n.next()) {
                      var i = r.value;
                      if (i.children)
                        for (var s = x(i.children), o = s.next(); !o.done; o = s.next()) {
                          var u = o.value;
                          if (u.tagName == "LA_URL") {
                            var l = Lt(u);
                            break e;
                          }
                        }
                    }
                    l = "";
                  }
                else l = "";
                return l;
              } catch (p) {
                return "";
              }
            }
            var eP = 1;
            function Rw() {
              this.g = new Map();
            }
            Rw.prototype.release = function () {
              this.g.clear();
            };
            function kw(e, t, n, r) {
              var i = rP(e, t),
                s = null;
              e = [];
              var o = [];
              t = null;
              var u = new Set(
                i.map(function (p) {
                  return p.keyId;
                }),
              );
              u.delete(null);
              var l = "cenc";
              if (u.size > 1) throw new H(2, 4, 4010);
              if (!n) {
                if (
                  ((o = i.filter(function (p) {
                    return p.Hd == "urn:mpeg:dash:sea:2012";
                  })),
                  o.length > 1)
                )
                  throw new H(2, 4, 4050);
                (o.length && (t = sP(o[0])),
                  (o = i.find(function (p) {
                    return p.Hd == "urn:mpeg:dash:mp4protection:2011";
                  })) &&
                    o.encryptionScheme &&
                    (l = o.encryptionScheme),
                  (o = i.filter(function (p) {
                    return p.Hd == "urn:mpeg:dash:mp4protection:2011"
                      ? ((s = p.init || s), !1)
                      : p.Hd != "urn:mpeg:dash:sea:2012";
                  })),
                  o.length && ((e = nP(s, l, o, r, u)), e.length == 0 && (e = [yi("", l, s)])));
              }
              if (i.length && !t && (n || !o.length))
                for (e = [], n = x(Object.values(r)), r = n.next(); !r.done; r = n.next())
                  ((r = r.value), r != "org.w3.clearkey" && ((r = yi(r, l, s)), e.push(r)));
              if ((u = Array.from(u)[0] || null))
                for (l = x(e), n = l.next(); !n.done; n = l.next())
                  for (n = x(n.value.initData), r = n.next(); !r.done; r = n.next()) r.value.keyId = u;
              return { Yh: u, Em: s, drmInfos: e, hg: t, ci: !0 };
            }
            function tP(e, t, n, r, i) {
              var s = kw(e, t, r, i);
              if (n.ci)
                ((e = n.drmInfos.length == 1 && !n.drmInfos[0].keySystem),
                  (t = s.drmInfos.length == 0),
                  (n.drmInfos.length == 0 || (e && !t)) && (n.drmInfos = s.drmInfos),
                  (n.ci = !1));
              else if (
                s.drmInfos.length > 0 &&
                ((n.drmInfos = n.drmInfos.filter(function (o) {
                  return s.drmInfos.some(function (u) {
                    return u.keySystem == o.keySystem;
                  });
                })),
                n.drmInfos.length == 0)
              )
                throw new H(2, 4, 4008);
              return s.Yh || n.Yh;
            }
            function Hd(e) {
              var t = Ar(e.node, "https://dashif.org/CPS", "Laurl");
              if (t && (t = Lt(t))) return t;
              if ((t = Ar(e.node, "urn:microsoft:playready", "pro")) && Lt(t)) return Vd(t);
              if ((e = Ar(e.node, "urn:mpeg:cenc:2013", "pssh")) && (e = Lt(e))) {
                ((t = Sr(e)), (e = 8), (t = Bn(t)));
                var n = t.getUint8(e);
                return (
                  (e += 20),
                  n > 0 && (e += 4 + 16 * t.getUint32(e)),
                  (e = Le(t, e + 4)),
                  (e = tc(e)),
                  (e = Ls("<pro>" + e + "</pro>")),
                  Vd(e)
                );
              }
              return "";
            }
            function nP(e, t, n, r, i) {
              var s = [];
              n = x(n);
              for (var o = n.next(); !o.done; o = n.next()) {
                o = o.value;
                var u = r[o.Hd];
                if (u) {
                  var l;
                  if ((l = Ar(o.node, "urn:microsoft:playready", "pro")) && Lt(l)) {
                    ((l = Lt(l)), (l = Sr(l)));
                    var p = new Uint8Array([
                      154, 4, 240, 121, 152, 64, 66, 134, 171, 146, 230, 91, 224, 136, 95, 149,
                    ]);
                    l = [{ initData: kc(l, p, new Set(), 0), initDataType: "cenc", keyId: o.keyId }];
                  } else l = null;
                  if (((p = null), o.Hd === "urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e")) {
                    p = o;
                    var m = i;
                    if (m.size == 0) p = null;
                    else {
                      var y = new Uint8Array([
                          16, 119, 239, 236, 192, 178, 77, 2, 172, 227, 60, 30, 82, 226, 251, 75,
                        ]),
                        v = new Uint8Array([]);
                      p = [{ initData: kc(v, y, m, 1), initDataType: "cenc", keyId: p.keyId }];
                    }
                  }
                  ((l = yi(u, t, o.init || e || l || p)), (u = oP.get(u)) && (l.licenseServerUri = u(o)));
                  e: {
                    if ((o = Ar(o.node, "https://dashif.org/CPS", "Certurl")) && (o = Lt(o))) break e;
                    o = "";
                  }
                  ((l.serverCertificateUri = o), s.push(l));
                }
              }
              return s;
            }
            function rP(e, t) {
              var n = [];
              t = x(t);
              for (var r = t.next(); !r.done; r = t.next()) (r = iP(e, r.value)) && n.push(r);
              return n;
            }
            function iP(e, t) {
              var n = t.attributes.schemeIdUri,
                r = vi(t, "urn:mpeg:cenc:2013", "default_KID"),
                i = s0(t, "urn:mpeg:cenc:2013", "pssh").map(Dn),
                s = t.attributes.value;
              if (!n) return null;
              if (((n = n.toLowerCase()), r && ((r = r.replace(/-/g, "").toLowerCase()), r.includes(" "))))
                throw new H(2, 4, 4009);
              var o = [];
              try {
                o = i.map(function (u) {
                  if (!e.g.has(u)) {
                    var l = Sr(u);
                    e.g.set(u, l);
                  }
                  return { initDataType: "cenc", initData: e.g.get(u), keyId: null };
                });
              } catch (u) {
                throw new H(2, 4, 4007);
              }
              return { node: t, Hd: n, keyId: r, init: o.length > 0 ? o : null, encryptionScheme: s };
            }
            function sP(e) {
              if (!g.crypto || !g.crypto.subtle)
                throw (
                  Be(
                    "Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)",
                  ),
                  new H(2, 4, 4042)
                );
              var t = Ar(e.node, "urn:mpeg:dash:schema:sea:2012", "SegmentEncryption");
              if (!t) throw new H(2, 4, 4051);
              if (t.attributes.schemeIdUri != "urn:mpeg:dash:sea:aes128-cbc:2013") throw new H(2, 4, 4051);
              if (((t = Ar(e.node, "urn:mpeg:dash:schema:sea:2012", "CryptoPeriod")), !t))
                throw new H(2, 4, 4051);
              if (((e = t.attributes.IV), (t = Pn(t.attributes.keyUriTemplate)), !e || !t))
                throw new H(2, 4, 4051);
              if (((e = Rs(e.substr(2))), e.byteLength != 16)) throw new H(2, 4, 4048);
              return { wk: t, iv: e };
            }
            var oP = new Map()
              .set("com.apple.fps", function (e) {
                if (g.shakaMediaKeysPolyfill === "apple") throw new H(2, 4, 4054);
                return (e = Ar(e.node, "https://dashif.org/CPS", "Laurl")) && (e = Lt(e)) ? e : "";
              })
              .set("com.widevine.alpha", function (e) {
                var t = Ar(e.node, "https://dashif.org/CPS", "Laurl");
                return t && (t = Lt(t))
                  ? t
                  : ((e = Ar(e.node, "urn:microsoft", "laurl")) && Pn(e.attributes.licenseUrl)) || "";
              })
              .set("com.microsoft.playready", Hd)
              .set("com.microsoft.playready.recommendation", Hd)
              .set("com.microsoft.playready.software", Hd)
              .set("com.microsoft.playready.hardware", Hd)
              .set("org.w3.clearkey", function (e) {
                var t = Ar(e.node, "https://dashif.org/CPS", "Laurl");
                return t && (t = Lt(t))
                  ? t
                  : (e = Ar(e.node, "http://dashif.org/guidelines/clearKey", "Laurl")) &&
                      e.attributes.Lic_type === "EME-1.0" &&
                      e &&
                      (e = Lt(e))
                    ? e
                    : "";
              });
            function zu(e, t, n, r, i, s) {
              var o = new Map()
                .set("RepresentationID", t)
                .set("Number", n)
                .set("SubNumber", r)
                .set("Bandwidth", i)
                .set("Time", s);
              return e.replace(
                /\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,
                function (u, l, p, m) {
                  if (u == "$$") return "$";
                  var y = o.get(l);
                  if (y == null) return u;
                  switch (
                    (l == "RepresentationID" && p && (p = void 0),
                    l == "Time" &&
                      typeof y != "bigint" &&
                      (Math.abs(y - Math.round(y)) >= 0.2 &&
                        Be("Calculated $Time$ values must be close to integers"),
                      (y = Math.round(y))),
                    m)
                  ) {
                    case void 0:
                    case "d":
                    case "i":
                    case "u":
                      u = y.toString();
                      break;
                    case "o":
                      u = y.toString(8);
                      break;
                    case "x":
                      u = y.toString(16);
                      break;
                    case "X":
                      u = y.toString(16).toUpperCase();
                      break;
                    default:
                      u = y.toString();
                  }
                  return ((p = g.parseInt(p, 10) || 1), Array(Math.max(0, p - u.length) + 1).join("0") + u);
                },
              );
            }
            function _w(e, t) {
              var n = Gr(e, t, "timescale"),
                r = 1;
              (n && (r = si(n) || 1), (n = Gr(e, t, "duration")));
              var i = (n = si(n || "")) ? n / r : null,
                s = Gr(e, t, "startNumber"),
                o = Number(Gr(e, t, "presentationTimeOffset")) || 0,
                u = on(s || "");
              if (((s == null || u == null) && (u = 1), (s = null), (t = Qo(e, t, "SegmentTimeline")))) {
                ((t = st(t, "S")), (s = r), (e = e.na.duration || 1 / 0));
                for (var l = u, p = [], m = -o, y = 0; y < t.length; ++y) {
                  var v = t[y],
                    w = t[y + 1],
                    A = be(v, "t", on),
                    I = be(v, "d", on),
                    C = be(v, "r", sn);
                  if (((v = be(v, "k", sn) || 0), A != null && (A -= o), I)) {
                    if (((A = A != null ? A : m), (C = C || 0), C < 0))
                      if (w) {
                        if (((w = be(w, "t", on)), w == null)) break;
                        if (A >= w) break;
                        C = Math.ceil((w - A) / I) - 1;
                      } else {
                        if (e == 1 / 0) break;
                        if (A / s >= e) break;
                        C = Math.ceil((e * s - A) / I) - 1;
                      }
                    for (p.length > 0 && A != m && (p[p.length - 1].end = A / s), w = 0; w <= C; ++w)
                      ((m = A + I),
                        p.push({ start: A / s, Ld: A, end: m / s, Jh: m, wc: v, Vk: p.length + l }),
                        (A = m));
                  }
                }
                s = p;
              }
              return { timescale: r, Qf: n, gb: i, ve: u, ec: o / r || 0, gd: o, timeline: s };
            }
            function Pw(e, t) {
              return [t(e.L), t(e.qa), t(e.sa)].filter(es);
            }
            function Gr(e, t, n) {
              ((t = Pw(e, t)), (e = null), (t = x(t)));
              for (var r = t.next(); !r.done && !(e = r.value.attributes[n]); r = t.next());
              return e;
            }
            function Qo(e, t, n) {
              ((t = Pw(e, t)), (e = null), (t = x(t)));
              for (var r = t.next(); !r.done && !(e = vt(r.value, n)); r = t.next());
              return e;
            }
            function aP(e, t, n, r, i, s) {
              for (
                var o = vi(e, "http://www.w3.org/1999/xlink", "href"),
                  u = vi(e, "http://www.w3.org/1999/xlink", "actuate") || "onRequest",
                  l = x(Object.keys(e.attributes)),
                  p = l.next();
                !p.done;
                p = l.next()
              ) {
                p = p.value;
                var m = p.split(":"),
                  y = Kh("http://www.w3.org/1999/xlink");
                m[0] == y && delete e.attributes[p];
              }
              if (s >= 5) return ts(new H(2, 4, 4028));
              if (u != "onLoad") return ts(new H(2, 4, 4027));
              var v = Yt([r], [o]);
              return i.request(0, Ut(v, t)).Xa(function (w) {
                if (((w = Wa(w.data, e.tagName)), !w)) return ts(new H(2, 4, 4001, o));
                for (e.children = []; w.children.length; ) {
                  var A = w.children.shift();
                  e.children.push(A);
                }
                A = x(Object.keys(w.attributes));
                for (var I = A.next(); !I.done; I = A.next())
                  ((I = I.value), (e.attributes[I] = w.attributes[I]));
                return Gd(e, t, n, v[0], i, s + 1);
              });
            }
            function Gd(e, t, n, r, i, s) {
              if (((s = s === void 0 ? 0 : s), vi(e, "http://www.w3.org/1999/xlink", "href"))) {
                var o = aP(e, t, n, r, i, s);
                return (
                  n &&
                    (o = o.Xa(void 0, function () {
                      return Gd(e, t, n, r, i, s);
                    })),
                  o
                );
              }
              o = [];
              for (var u = x(i0(e)), l = u.next(), p = {}; !l.done; p = { Td: void 0 }, l = u.next())
                ((p.Td = l.value),
                  vi(p.Td, "http://www.w3.org/1999/xlink", "href") == "urn:mpeg:dash:resolve-to-zero:2013"
                    ? (e.children = e.children.filter(
                        (function (m) {
                          return function (y) {
                            return y !== m.Td;
                          };
                        })(p),
                      ))
                    : p.Td.tagName != "SegmentTimeline" && o.push(Gd(p.Td, t, n, r, i, s)));
              return j0(o).Xa(function () {
                return e;
              });
            }
            function uP(e, t, n, r, i, s, o, u) {
              var l,
                p = new ct().S("sidx", function (m) {
                  l = lP(t, r, i, s, o, n, m, u);
                });
              if ((e && p.parse(e), l)) return l;
              throw new H(2, 3, 3004);
            }
            function lP(e, t, n, r, i, s, o, u) {
              u = u === void 0 ? !1 : u;
              var l = [];
              o.reader.skip(4);
              var p = o.reader.U();
              if (p == 0) throw new H(2, 3, 3005);
              if (o.version == 0)
                var m = o.reader.U(),
                  y = o.reader.U();
              else ((m = o.reader.Ed()), (y = o.reader.Ed()));
              o.reader.skip(2);
              var v = o.reader.Ca();
              for (e = (u ? -o.size : e) + o.size + y, u = 0; u < v; u++) {
                var w = o.reader.U();
                ((y = (w & 2147483648) >>> 31), (w &= 2147483647));
                var A = o.reader.U();
                if ((o.reader.skip(4), y == 1)) throw new H(2, 3, 3006);
                (l.push(
                  new Me(
                    m / p + n,
                    (m + A) / p + n,
                    function () {
                      return s;
                    },
                    e,
                    e + w - 1,
                    t,
                    n,
                    r,
                    i,
                  ),
                ),
                  (m += A),
                  (e += w));
              }
              return (o.parser.stop(), l);
            }
            function fs(e) {
              ((this.h = Bn(e)), (this.g = new yt(this.h, 0)));
            }
            fs.prototype.Ia = function () {
              return this.g.Ia();
            };
            function Ui(e) {
              var t = Dw(e);
              if (t.length > 7) throw new H(2, 3, 3002);
              var n = 0;
              t = x(t);
              for (var r = t.next(); !r.done; r = t.next()) n = 256 * n + r.value;
              t = Dw(e);
              e: {
                r = x(cP);
                for (var i = r.next(); !i.done; i = r.next())
                  if (pi(t, new Uint8Array(i.value))) {
                    r = !0;
                    break e;
                  }
                r = !1;
              }
              if (r) t = e.h.byteLength - e.g.Pa();
              else {
                if (t.length == 8 && t[1] & 224) throw new H(2, 3, 3001);
                for (i = r = 0; i < t.length; i++) {
                  var s = t[i];
                  r = i == 0 ? s & ((1 << (8 - t.length)) - 1) : 256 * r + s;
                }
                t = r;
              }
              return (
                (t = e.g.Pa() + t <= e.h.byteLength ? t : e.h.byteLength - e.g.Pa()),
                (r = Bn(e.h, e.g.Pa(), t)),
                e.g.skip(t),
                new dP(n, r)
              );
            }
            function Dw(e) {
              var t = e.g.Pa(),
                n = e.g.Y();
              if (n == 0) throw new H(2, 3, 3002);
              return ((n = 8 - Math.floor(Math.log2(n))), e.g.skip(n - 1), Le(e.h, t, n));
            }
            var cP = [
              [255],
              [127, 255],
              [63, 255, 255],
              [31, 255, 255, 255],
              [15, 255, 255, 255, 255],
              [7, 255, 255, 255, 255, 255],
              [3, 255, 255, 255, 255, 255, 255],
              [1, 255, 255, 255, 255, 255, 255, 255],
            ];
            function dP(e, t) {
              ((this.id = e), (this.g = t));
            }
            function tm(e) {
              if (e.g.byteLength > 8) throw new H(2, 3, 3002);
              if (e.g.byteLength == 8 && e.g.getUint8(0) & 224) throw new H(2, 3, 3001);
              for (var t = 0, n = 0; n < e.g.byteLength; n++) {
                var r = e.g.getUint8(n);
                t = 256 * t + r;
              }
              return t;
            }
            function fP(e, t, n, r, i, s, o) {
              if (((t = new fs(t)), Ui(t).id != 440786851)) throw new H(2, 3, 3008);
              var u = Ui(t);
              if (u.id != 408125543) throw new H(2, 3, 3009);
              ((t = u.g.byteOffset), (u = new fs(u.g)));
              for (var l = null; u.Ia(); ) {
                var p = Ui(u);
                if (p.id == 357149030) {
                  l = p;
                  break;
                }
              }
              if (!l) throw new H(2, 3, 3010);
              for (l = new fs(l.g), p = 1e6, u = null; l.Ia(); ) {
                var m = Ui(l);
                if (m.id == 2807729) p = tm(m);
                else if (m.id == 17545)
                  if (m.g.byteLength == 4) u = m.g.getFloat32(0);
                  else if (m.g.byteLength == 8) u = m.g.getFloat64(0);
                  else throw new H(2, 3, 3003);
              }
              if (u == null) throw new H(2, 3, 3011);
              if (((l = p / 1e9), (u *= l), (e = Ui(new fs(e))), e.id != 475249515)) throw new H(2, 3, 3007);
              return hP(e, t, l, u, n, r, i, s, o);
            }
            function hP(e, t, n, r, i, s, o, u, l) {
              function p() {
                return i;
              }
              var m = [];
              e = new fs(e.g);
              for (var y = null, v = null; e.Ia(); ) {
                var w = Ui(e);
                if (w.id == 187) {
                  var A = pP(w);
                  A &&
                    ((w = n * A.ol),
                    (A = t + A.Nk),
                    y != null && m.push(new Me(y + o, w + o, p, v, A - 1, s, o, u, l)),
                    (y = w),
                    (v = A));
                }
              }
              return (y != null && m.push(new Me(y + o, r + o, p, v, null, s, o, u, l)), m);
            }
            function pP(e) {
              var t = new fs(e.g);
              if (((e = Ui(t)), e.id != 179)) throw new H(2, 3, 3013);
              if (((e = tm(e)), (t = Ui(t)), t.id != 183)) throw new H(2, 3, 3012);
              t = new fs(t.g);
              for (var n = 0; t.Ia(); ) {
                var r = Ui(t);
                if (r.id == 241) {
                  n = tm(r);
                  break;
                }
              }
              return { ol: e, Nk: n };
            }
            function Lw(e, t, n) {
              if (((t = Qo(e, t, "Initialization")), !t)) return null;
              var r = e.L.bb(),
                i = t.attributes.sourceURL;
              (i && (r = Yt(r, [Pn(i)], e.Lb())), (i = 0));
              var s = null;
              return (
                (t = be(t, "range", oc)) && ((i = t.start), (s = t.end)),
                (n = new Hn(
                  function () {
                    return r;
                  },
                  i,
                  s,
                  Uw(e),
                  null,
                  null,
                  n,
                  e.qa.encrypted,
                )),
                (n.codecs = e.L.codecs),
                (n.mimeType = e.L.mimeType),
                e.na && !e.na.kf && (n.g = e.na.start + e.na.duration),
                n
              );
            }
            function gP(e, t, n) {
              var r = Number(Gr(e, Zo, "presentationTimeOffset")) || 0,
                i = Gr(e, Zo, "timescale"),
                s = 1;
              i && (s = si(i) || 1);
              var o = r / s || 0,
                u = Lw(e, Zo, n);
              mP(e, u);
              var l = qi(e);
              return {
                endTime: -1,
                timeline: -1,
                Sc: function () {
                  var p = Qo(l, Zo, "RepresentationIndex"),
                    m = l.L.bb();
                  return (
                    p && (p = Pn(p.attributes.sourceURL)) && (m = Yt(m, [p], l.Lb())),
                    (p = Nw(l)),
                    bw(l, t, u, m, p.start, p.end, o)
                  );
                },
                timescale: s,
              };
            }
            function bw(e, t, n, r, i, s, o) {
              var u, l, p, m, y, v, w, A, I, C, k, R, L, U, G, b, B, O, z, j;
              return F(function (X) {
                if (X.g == 1)
                  return (
                    (u = e.presentationTimeline),
                    (l = !e.Eb || !e.na.kf),
                    (p = e.na.start),
                    (m = e.na.duration),
                    (y = e.L.mimeType.split("/")[1]),
                    (v = t),
                    (w = null),
                    (A = [v(r, i, s, !1), y == "webm" ? v(n.P(), n.startByte, n.endByte, !0) : null]),
                    (v = null),
                    E(X, Promise.all(A), 2)
                  );
                for (
                  I = X.h,
                    C = I[0],
                    k = I[1] || null,
                    R = null,
                    L = p - o,
                    U = p,
                    G = m ? p + m : 1 / 0,
                    b = e.L.bb(),
                    B =
                      b.length != r.length ||
                      b.some(function (W, ie) {
                        return W != r[ie];
                      }),
                    R = y == "mp4" ? uP(C, i, b, n, L, U, G, B) : fP(C, k, b, n, L, U, G),
                    O = x(R),
                    z = O.next();
                  !z.done;
                  z = O.next()
                )
                  ((j = z.value),
                    (j.codecs = e.L.codecs),
                    (j.mimeType = e.L.mimeType),
                    (j.bandwidth = e.bandwidth));
                return (u.me(R), (w = new Qe(R)), l && w.pd(U, G, !0), X.return(w));
              });
            }
            function Zo(e) {
              return e.Id;
            }
            function Nw(e) {
              var t = Qo(e, Zo, "RepresentationIndex");
              return ((e = Gr(e, Zo, "indexRange")), (e = oc(e || "")), t && (e = be(t, "range", oc, e)), e);
            }
            function mP(e, t) {
              if ((Ow(e, t), !Nw(e))) throw new H(2, 4, 4002);
            }
            function Ow(e, t) {
              var n = e.L.mimeType.split("/")[1];
              if (e.L.contentType != Ve && n != "mp4" && n != "webm") throw new H(2, 4, 4006);
              if (n == "webm" && !t) throw new H(2, 4, 4005);
            }
            function Uw(e) {
              var t = e.L;
              return {
                bandwidth: e.bandwidth,
                audioSamplingRate: t.audioSamplingRate,
                codecs: t.codecs,
                contentType: t.contentType,
                frameRate: t.frameRate || null,
                height: t.height || null,
                mimeType: t.mimeType,
                channelsCount: t.yf,
                pixelAspectRatio: t.pixelAspectRatio || null,
                width: t.width || null,
                label: e.qa.label || null,
                roles: e.roles || null,
                language: e.qa.language || null,
              };
            }
            function yP(e, t, n) {
              var r = Lw(e, Fw, n),
                i = vP(e);
              if (!i.gb && !i.timeline && i.yd.length > 1) throw new H(2, 4, 4002);
              if (!i.gb && !e.na.duration && !i.timeline && i.yd.length == 1) throw new H(2, 4, 4002);
              if (i.timeline && i.timeline.length == 0) throw new H(2, 4, 4002);
              var s = null,
                o = null;
              e.sa.id && e.L.id && (o = t.get(e.sa.id + "," + e.L.id)) && (s = o.segmentIndex);
              var u = xP(
                e.na.start,
                e.na.duration,
                e.L.bb,
                i,
                r,
                n,
                e.L.mimeType,
                e.L.codecs,
                e.bandwidth,
                e.Lb,
              );
              return (
                (t = !s),
                s ? s.ke(u, e.presentationTimeline.Hb()) : (s = new Qe(u)),
                e.presentationTimeline.me(u),
                (e.Eb && e.na.kf) || s.pd(e.na.start, e.na.duration ? e.na.start + e.na.duration : 1 / 0, t),
                o && (o.segmentIndex = s),
                {
                  endTime: -1,
                  timeline: -1,
                  Sc: function () {
                    return ((s && s.getNumReferences() != 0) || s.tf(u), Promise.resolve(s));
                  },
                  timescale: i.timescale,
                }
              );
            }
            function Fw(e) {
              return e.Ac;
            }
            function vP(e) {
              var t = TP(e);
              e = _w(e, Fw);
              var n = e.ve;
              n == 0 && (n = 1);
              var r = 0;
              return (
                e.gb
                  ? (r = e.gb * (n - 1))
                  : e.timeline && e.timeline.length > 0 && (r = e.timeline[0].start),
                {
                  gb: e.gb,
                  startTime: r,
                  ve: n,
                  ec: e.ec,
                  timescale: e.timescale,
                  timeline: e.timeline,
                  yd: t,
                }
              );
            }
            function xP(e, t, n, r, i, s, o, u, l, p) {
              var m = r.yd.length;
              r.timeline &&
                r.timeline.length != r.yd.length &&
                (m = Math.min(r.timeline.length, r.yd.length));
              for (
                var y = e - r.ec, v = t ? e + t : 1 / 0, w = [], A = r.startTime, I = {}, C = 0;
                C < m;
                I = { Sf: void 0, Hf: void 0 }, C++
              ) {
                I.Hf = r.yd[C];
                var k = A;
                ((A = void 0),
                  (A = r.gb != null ? k + r.gb : r.timeline ? r.timeline[C].end : k + t),
                  (I.Sf = null),
                  (I = new Me(
                    e + k,
                    e + A,
                    (function (R) {
                      return function () {
                        return (R.Sf == null && (R.Sf = Yt(n(), [R.Hf.Ck], p())), R.Sf);
                      };
                    })(I),
                    I.Hf.start,
                    I.Hf.end,
                    i,
                    y,
                    e,
                    v,
                    [],
                    "",
                    null,
                    null,
                    Mi,
                    s,
                  )),
                  (I.codecs = u),
                  (I.mimeType = o),
                  (I.bandwidth = l),
                  w.push(I));
              }
              return w;
            }
            function TP(e) {
              return [e.L.Ac, e.qa.Ac, e.sa.Ac]
                .filter(es)
                .map(function (t) {
                  return st(t, "SegmentURL");
                })
                .reduce(function (t, n) {
                  return t.length > 0 ? t : n;
                })
                .map(function (t) {
                  t.attributes.indexRange && !e.Og && (e.Og = !0);
                  var n = Pn(t.attributes.media);
                  return (
                    (t = be(t, "mediaRange", oc, { start: 0, end: null })),
                    { Ck: n, start: t.start, end: t.end }
                  );
                });
            }
            function Bw(e, t, n, r, i, s, o, u, l, p) {
              l || e.L.hf || (e.L.hf = Gr(e, hs, "initialization"));
              var m = e.L.hf ? EP(e, o) : null,
                y = wP(e);
              SP(y);
              var v = qi(e);
              if (y.fe)
                return (
                  Ow(e, m),
                  {
                    endTime: -1,
                    timeline: -1,
                    Sc: function () {
                      var k = zu(y.fe, v.L.originalId, null, null, v.bandwidth || null, null);
                      return ((k = Yt(v.L.bb(), [k])), bw(v, t, m, k, 0, null, y.ec));
                    },
                    timescale: y.timescale,
                  }
                );
              if (y.gb)
                return (
                  r ||
                    e.qa.contentType === "image" ||
                    e.qa.contentType === "text" ||
                    ((r = e.na.start),
                    (p = e.sa.id),
                    (n = e.na.duration),
                    (p = (p = (p != null && s.get(p)) || n) ? r + p : 1 / 0),
                    e.presentationTimeline.Wg(y.gb),
                    e.presentationTimeline.Gi(r, p)),
                  {
                    endTime: -1,
                    timeline: -1,
                    Sc: function () {
                      return AP(v, y, i, m, s, o, u, e.L.If);
                    },
                    timescale: y.timescale,
                  }
                );
              var w = null;
              ((r = r = null),
                e.sa.id && e.L.id && ((r = e.sa.id + "," + e.L.id), (r = n.get(r))) && (w = r.segmentIndex));
              var A = e.na.start,
                I = e.na.duration ? A + e.na.duration : 1 / 0;
              if (w) ((p = w), jw(p, y, A, I, m, e.Eb), p.Ya(e.presentationTimeline.Hb()));
              else {
                if (((n = 0), (l = -1), e.sa.id != null && e.L.id != null)) {
                  var C = p.get(e.sa.id);
                  if (C) l = C.timeline;
                  else
                    for (p = x(p.values()), C = p.next(); !C.done; C = p.next())
                      if (((C = C.value), Math.abs(y.ec - C.endTime) <= qv && C.gh.includes(e.L.id))) {
                        l = C.timeline;
                        break;
                      } else C.timeline >= n && (n = C.timeline + 1);
                }
                (l == -1 && (l = n),
                  (w = new Xu(e.Eb, y, e.L.originalId, e.bandwidth, e.L.bb, e.Lb, A, I, m, o, e.L.If, l)));
              }
              return (
                y.timeline &&
                  e.qa.contentType !== "image" &&
                  e.qa.contentType !== "text" &&
                  e.presentationTimeline.Hi(w.h ? w.h.timeline : [], A),
                r && e.Eb && (r.segmentIndex = w),
                (r = (r = (r = y.timeline) && r[r.length - 1]) ? r.end + y.ec : -1),
                (p = -1),
                w instanceof Xu && (p = w.We()),
                {
                  endTime: r,
                  timeline: p,
                  Sc: function () {
                    return (
                      w instanceof Xu && w.getNumReferences() == 0 && jw(w, y, A, I, m, e.Eb),
                      Promise.resolve(w)
                    );
                  },
                  timescale: y.timescale,
                }
              );
            }
            function hs(e) {
              return e.Oc;
            }
            function wP(e) {
              var t = _w(e, hs),
                n = Gr(e, hs, "media"),
                r = Gr(e, hs, "index"),
                i = Gr(e, hs, "k"),
                s = 0;
              return (
                i && (s = parseInt(i, 10)),
                {
                  Qf: t.Qf,
                  gb: t.gb,
                  timescale: t.timescale,
                  ve: t.ve,
                  ec: t.ec,
                  gd: t.gd,
                  timeline: t.timeline,
                  bc: n && Pn(n),
                  fe: r,
                  mimeType: e.L.mimeType,
                  codecs: e.L.codecs,
                  bandwidth: e.bandwidth,
                  Dk: s,
                }
              );
            }
            function SP(e) {
              var t = e.fe ? 1 : 0;
              if (((t += e.timeline ? 1 : 0), (t += e.gb ? 1 : 0), t == 0)) throw new H(2, 4, 4002);
              if ((t != 1 && (e.fe && (e.timeline = null), (e.Qf = null), (e.gb = null)), !e.fe && !e.bc))
                throw new H(2, 4, 4002);
            }
            function AP(e, t, n, r, i, s, o, u) {
              function l(W) {
                var ie = W - C,
                  ne = ie * I,
                  $ = t.Qf,
                  Q = ie * $;
                ("BigInt" in g && Q > Number.MAX_SAFE_INTEGER && (Q = BigInt(ie) * BigInt($)),
                  (ne += v),
                  (ie = ne + I),
                  ($ = Math.min(ie, m())));
                var ae = [],
                  ce = t.Dk;
                if (ce)
                  for (var Ne = ($ - ne) / ce, we = {}, et = 0; et < ce; we = { bj: void 0 }, et++) {
                    var Ue = ne + Ne * et,
                      ot = Ue + Ne;
                    ((we.bj = et),
                      (we = new Me(
                        Ue,
                        ot,
                        (function (We) {
                          return function () {
                            var Ge = zu(k, L, W, We.bj, R, Q);
                            return Yt(U(), [Ge], G());
                          };
                        })(we),
                        0,
                        null,
                        r,
                        b,
                        v,
                        m(),
                        [],
                        "",
                        null,
                        null,
                        Mi,
                        s,
                      )),
                      (we.codecs = e.L.codecs),
                      (we.mimeType = e.L.mimeType),
                      u == 0 ? et > 0 && we.wd() : et % u != 0 && we.wd(),
                      ae.push(we));
                  }
                return (
                  (ne = new Me(
                    ne,
                    $,
                    function () {
                      if (ce) return [];
                      var We = zu(k, L, W, null, R, Q);
                      return Yt(U(), [We], G());
                    },
                    0,
                    null,
                    r,
                    b,
                    v,
                    m(),
                    ae,
                    "",
                    null,
                    null,
                    Mi,
                    s,
                    ae.length > 0,
                  )),
                  (ne.codecs = e.L.codecs),
                  (ne.mimeType = e.L.mimeType),
                  (ne.bandwidth = e.bandwidth),
                  (ne.j = ie),
                  ne
                );
              }
              function p() {
                var W = [Math.max(y.Hb(), v), Math.min(y.Ic(), m())].map(function (ie) {
                  return ie - v;
                });
                return (
                  (W = [Math.ceil(W[0] / I), Math.ceil(W[1] / I) - 1]),
                  e.L.rb && W[1]++,
                  W.map(function (ie) {
                    return ie + C;
                  })
                );
              }
              function m() {
                var W = (w != null && i.get(w)) || A;
                return W ? v + W : 1 / 0;
              }
              var y = e.presentationTimeline,
                v = e.na.start,
                w = e.sa.id,
                A = e.na.duration,
                I = t.gb,
                C = t.ve,
                k = t.bc,
                R = e.bandwidth || null,
                L = e.L.originalId,
                U = e.L.bb,
                G = e.Lb,
                b = v - t.ec,
                B = p();
              ((n = e.Eb ? Math.max(B[0], B[1] - n + 1) : B[0]), (o = o || B[1]), (B = []));
              for (var O = n; O <= o; ++O) {
                var z = l(O);
                B.push(z);
              }
              var j = new Qe(B);
              if (((B = y.Ic() < m()), (O = y.W()), B || O)) {
                var X = Math.max(n, o + 1);
                ((n = I),
                  e.L.rb && (n = 0.1),
                  j.Rf(n, function () {
                    var W = y.Hb();
                    j.Ya(W);
                    var ie = x(p());
                    (ie.next(), (ie = ie.next().value));
                    for (var ne = []; X <= ie; ) {
                      var $ = l(X);
                      (ne.push($), X++);
                    }
                    return W > m() && !ne.length ? null : ne;
                  }));
              }
              return Promise.resolve(j);
            }
            function EP(e, t) {
              var n = e.L.hf;
              if ((n || (n = Gr(e, hs, "initialization")), !n)) return null;
              n = Pn(n);
              var r = e.L.originalId,
                i = e.bandwidth || null,
                s = e.L.bb,
                o = e.Lb;
              return (
                (t = new Hn(
                  function () {
                    var u = zu(n, r, null, null, i, null);
                    return Yt(s(), [u], o());
                  },
                  0,
                  null,
                  Uw(e),
                  null,
                  null,
                  t,
                  e.qa.encrypted,
                )),
                (t.codecs = e.L.codecs),
                (t.mimeType = e.L.mimeType),
                e.na && !e.na.kf && (t.g = e.na.start + e.na.duration),
                t
              );
            }
            function Xu(e, t, n, r, i, s, o, u, l, p, m, y) {
              (Qe.call(this, []),
                (this.F = e),
                (this.h = t),
                (this.H = n),
                (this.C = r),
                (this.G = i),
                (this.J = s),
                (this.j = o),
                (this.l = u),
                (this.u = l),
                (this.B = p),
                (this.I = m),
                (this.K = y),
                nm(this));
            }
            (q(Xu, Qe),
              (h = Xu.prototype),
              (h.getNumReferences = function () {
                return this.h ? this.h.timeline.length : 0;
              }),
              (h.release = function () {
                (Qe.prototype.release.call(this), (this.h = null));
              }),
              (h.Ya = function (e) {
                if (this.h) {
                  for (var t = 0, n = this.h.timeline, r = 0; r < n.length && n[r].end + this.j <= e; r += 1)
                    t += 1;
                  t > 0 &&
                    ((this.h.timeline = n.slice(t)),
                    this.g.length >= t && (this.g = this.g.slice(t)),
                    (this.i += t),
                    this.getNumReferences() === 0 && this.release());
                }
              }));
            function jw(e, t, n, r, i, s) {
              if ((IP(e, i), (e.F = s), e.h)) {
                if (e.h.gd !== t.gd)
                  for (n = t.gd - e.h.gd, i = 0; i < t.timeline.length; i++)
                    ((s = t.timeline[i]),
                      (s.Ld += n),
                      (s.Jh += n),
                      (s.start = (s.Ld + n) / t.timescale),
                      (s.end = (s.Jh + n) / t.timescale));
                if ((e.h.bc !== t.bc && (e.h.bc = t.bc), (n = e.h.timeline), n.length)) {
                  var o = n[n.length - 1];
                  t = t.timeline.filter(function (u) {
                    return u.end > o.end;
                  });
                } else t = t.timeline.slice();
                (t.length > 0 && e.h.timeline.push.apply(e.h.timeline, Y(t)), e.l !== r && (e.l = r));
              } else ((e.h = t), (e.j = n), (e.l = r));
              nm(e);
            }
            function IP(e, t) {
              if (e.u !== t) {
                ((e.u = t), (e = x(e.g)));
                for (var n = e.next(); !n.done; n = e.next()) (n = n.value) && Sx(n, t);
              }
            }
            function nm(e) {
              if (e.h && !e.o) {
                for (var t = [], n = x(e.h.timeline), r = n.next(); !r.done; r = n.next())
                  ((r = r.value), r.start >= e.l || r.end <= 0 || t.push(r));
                ((e.h.timeline = t), e.Ya(e.j));
              }
            }
            ((h.find = function (e) {
              if (
                this.h &&
                this.h.timeline &&
                this.h.timeline.length &&
                e < this.h.timeline[0].start + this.j
              )
                return this.i;
              if (!this.h) return null;
              var t = this.h.timeline;
              if (e < this.j || e >= this.l) return null;
              for (var n = t.length - 1, r = 0; r < t.length; r++) {
                var i = t[r],
                  s = i.start + this.j;
                if (
                  ((i = r < n ? t[r + 1].start + this.j : this.l === 1 / 0 ? i.end + this.j : this.l),
                  e >= s && e < i)
                )
                  return r + this.i;
              }
              return null;
            }),
              (h.get = function (e) {
                var t = this;
                if (((e -= this.i), e < 0 || e >= this.getNumReferences() || !this.h)) return null;
                var n = this.g[e];
                if (!n) {
                  n = this.h.timeline[e];
                  var r = n.Vk,
                    i = n.Ld + this.h.gd,
                    s = this.j - this.h.ec,
                    o = this.j + n.end,
                    u = o;
                  e === this.getNumReferences() - 1 &&
                    this.l !== 1 / 0 &&
                    (u = this.F && Math.abs(u - this.l) > 0.1 ? Math.min(u, this.l) : this.l);
                  var l = this.h.codecs,
                    p = this.h.mimeType,
                    m = this.h.bandwidth,
                    y = [],
                    v = !1;
                  if ((n.wc && this.h && this.h.bc && (v = this.h.bc.includes("$SubNumber$")), v)) {
                    v = (n.end - n.start) / n.wc;
                    for (var w = {}, A = 0; A < n.wc; w = { Tf: void 0, cj: void 0 }, A++) {
                      var I = n.start + v * A,
                        C = I + v;
                      ((w.cj = A),
                        (w.Tf = null),
                        (w = new Me(
                          this.j + I,
                          this.j + C,
                          (function (k) {
                            return function () {
                              return t.h
                                ? (k.Tf == null && (k.Tf = Vw(t.h.bc, t.H, r, t.C, i, k.cj, t.G, t.J)), k.Tf)
                                : [];
                            };
                          })(w),
                          0,
                          null,
                          this.u,
                          s,
                          this.j,
                          this.l,
                          [],
                          "",
                          null,
                          null,
                          Mi,
                          this.B,
                        )),
                        (w.codecs = l),
                        (w.mimeType = p),
                        (w.bandwidth = m),
                        this.I == 0 ? A > 0 && w.wd() : A % this.I != 0 && w.wd(),
                        y.push(w));
                    }
                  }
                  ((n = new Me(
                    this.j + n.start,
                    u,
                    function () {
                      return y.length > 0 || !t.h ? [] : Vw(t.h.bc, t.H, r, t.C, i, null, t.G, t.J);
                    },
                    0,
                    null,
                    this.u,
                    s,
                    this.j,
                    this.l,
                    y,
                    "",
                    null,
                    null,
                    Mi,
                    this.B,
                    y.length > 0,
                  )),
                    (n.codecs = l),
                    (n.mimeType = p),
                    (n.j = o),
                    (n.bandwidth = m),
                    (this.g[e] = n));
                }
                return n;
              }),
              (h.Fb = function (e) {
                nm(this);
                for (var t = 0; t < this.getNumReferences(); t++) {
                  var n = this.get(t + this.i);
                  n && e(n);
                }
              }));
            function Vw(e, t, n, r, i, s, o, u) {
              return (
                (e = zu(e, t, n, s, r || null, i)),
                Yt(o(), [e], u()).map(function (l) {
                  return l.toString();
                })
              );
            }
            h.We = function () {
              return this.K;
            };
            function ea(e) {
              ((this.o = null),
                (this.B = e),
                (this.H = new Eo()),
                (this.i = []),
                (this.h = null),
                (this.m = []),
                (this.C = null),
                (this.G = []),
                (this.F = 300),
                (this.l = new Map()),
                (this.j = new Map()),
                (this.g = null),
                (this.u = "UNKNOWN"));
            }
            ((ea.prototype.configure = function (e) {
              this.o = e;
            }),
              (ea.prototype.destroy = function () {
                return (
                  (this.B = this.o = null),
                  (this.i = []),
                  (this.h = null),
                  (this.m = []),
                  (this.G = []),
                  this.l.clear(),
                  this.g != null && (this.g.stop(), (this.g = null)),
                  this.H.destroy()
                );
              }),
              (ea.prototype.setManifestType = function (e) {
                this.u = e;
              }));
            function Wu(e, t) {
              var n, r, i, s, o, u, l;
              return F(function (p) {
                if (p.g == 1)
                  return (
                    (n = Yt(e.i, [CP(e, t)])),
                    (r = Ut(n, e.o.retryParameters)),
                    (i = e.B.networkingEngine.request(8, r)),
                    Bs(e.H, i),
                    te(p, 2),
                    E(p, i.promise, 4)
                  );
                if (p.g != 2)
                  return (
                    (s = p.h),
                    (o = At(s.data)),
                    (u = JSON.parse(o)),
                    u.VERSION == 1 && MP(e, u, s.uri),
                    pe(p, 0)
                  );
                if ((l = oe(p)) && l.code == 7001) return p.return();
                (e.g != null && (e.g.stop(), (e.g = null)),
                  (e.g = new He(function () {
                    Wu(e, t);
                  })),
                  e.g.ka(e.F),
                  re(p));
              });
            }
            function CP(e, t) {
              if (!e.m.length) return t;
              t = new Dt(t);
              var n = e.C || e.m[0],
                r = Math.round(e.B.getBandwidthEstimate()),
                i = t.g;
              return (
                e.u == "DASH"
                  ? (i.add("_DASH_pathway", n), i.add("_DASH_throughput", String(r)))
                  : e.u == "HLS" && (i.add("_HLS_pathway", n), i.add("_HLS_throughput", String(r))),
                Xv(i) && Cs(t, i),
                t.toString()
              );
            }
            function MP(e, t, n) {
              e.g != null && (e.g.stop(), (e.g = null));
              var r = t["RELOAD-URI"] || n;
              ((e.g = new He(function () {
                Wu(e, r);
              })),
                (n = t.TTL) && (e.F = n),
                e.g.ka(e.F),
                (e.m = t["PATHWAY-PRIORITY"] || []),
                (e.G = t["PATHWAY-CLONES"] || []));
            }
            function ta(e, t, n, r) {
              var i = e.l.get(t);
              (i || (i = new Map()), i.set(n, r), e.l.set(t, i));
            }
            ea.prototype.banLocation = function (e) {
              this.j.set(e, Date.now() + 6e4);
            };
            function Ku(e, t, n) {
              ((n = n === void 0 ? !1 : n), (t = e.l.get(t) || new Map()));
              for (var r = [], i = x(e.m), s = i.next(), o = {}; !s.done; o = { Cd: void 0 }, s = i.next())
                if (((o.Cd = s.value), (s = t.get(o.Cd)))) r.push({ ah: o.Cd, location: s });
                else if (
                  (s = e.G.find(
                    (function (l) {
                      return function (p) {
                        return p.Ol == l.Cd;
                      };
                    })(o),
                  ))
                ) {
                  var u = t.get(s["BASE-ID"]);
                  u &&
                    (s["URI-REPLACEMENT"].oj
                      ? ((u = new Dt(u)),
                        ql(u, s["URI-REPLACEMENT"].oj),
                        r.push({ ah: o.Cd, location: u.toString() }))
                      : r.push({ ah: o.Cd, location: u }));
                }
              for (i = Date.now(), o = x(e.j.keys()), s = o.next(); !s.done; s = o.next())
                ((s = s.value), (u = e.j.get(s)), i > u && e.j.delete(s));
              if (
                ((r = r.filter(function (l) {
                  for (var p = x(e.j.keys()), m = p.next(); !m.done; m = p.next())
                    if (m.value.includes(new Dt(l.location).Db)) return !1;
                  return !0;
                })),
                r.length && (e.C = r[0].ah),
                (r = r.map(function (l) {
                  return l.location;
                })),
                !r.length && e.h)
              )
                for (i = x(e.h.split(",")), o = i.next(); !o.done; o = i.next())
                  (o = t.get(o.value)) && ((e.C = e.h), r.push(o));
              if (!r.length) for (t = x(t.values()), i = t.next(); !i.done; i = t.next()) r.push(i.value);
              return n ? r : Yt(e.i, r);
            }
            function zn() {
              ((this.l = []),
                (this.h = []),
                (this.g = []),
                (this.j = []),
                (this.i = []),
                (this.o = !1),
                (this.m = new Set()));
            }
            ((h = zn.prototype),
              (h.release = function () {
                for (var e = x(this.h.concat(this.g, this.j, this.i)), t = e.next(); !t.done; t = e.next())
                  ((t = t.value), t.segmentIndex && t.segmentIndex.release());
                ((this.h = []),
                  (this.g = []),
                  (this.j = []),
                  (this.i = []),
                  (this.l = []),
                  (this.o = !1),
                  this.m.clear());
              }),
              (h.fk = function () {
                return this.l;
              }),
              (h.Mg = function () {
                return this.j.slice();
              }),
              (h.Mj = function () {
                return this.i;
              }),
              (h.Zh = function (e, t) {
                if (e) {
                  if (e.type == "audio")
                    for (var n = x(this.h), r = n.next(); !r.done; r = n.next())
                      ((r = r.value),
                        (r.matchedStreams = r.matchedStreams.filter(function (i) {
                          return i !== e;
                        })));
                  else if (e.type == "video")
                    for (n = x(this.g), r = n.next(); !r.done; r = n.next())
                      ((r = r.value),
                        (r.matchedStreams = r.matchedStreams.filter(function (i) {
                          return i !== e;
                        })),
                        r.trickModeVideo &&
                          (r.trickModeVideo.matchedStreams = r.trickModeVideo.matchedStreams.filter(
                            function (i) {
                              return i !== e;
                            },
                          )),
                        r.dependencyStream &&
                          (r.dependencyStream.matchedStreams = r.dependencyStream.matchedStreams.filter(
                            function (i) {
                              return i !== e;
                            },
                          )));
                  else if (e.type == Ve)
                    for (n = x(this.j), r = n.next(); !r.done; r = n.next())
                      ((r = r.value),
                        (r.matchedStreams = r.matchedStreams.filter(function (i) {
                          return i !== e;
                        })));
                  else if (e.type == "image")
                    for (n = x(this.i), r = n.next(); !r.done; r = n.next())
                      ((r = r.value),
                        (r.matchedStreams = r.matchedStreams.filter(function (i) {
                          return i !== e;
                        })));
                  (e.segmentIndex && e.closeSegmentIndex(), this.m.delete(t));
                }
              }));
            function Hw(e, t) {
              var n = [],
                r = [],
                i = [],
                s = [];
              e = x(e);
              for (var o = e.next(); !o.done; o = e.next()) {
                var u = o.value;
                o = new Map(
                  u.audioStreams.map(function (y) {
                    return [om(y), y];
                  }),
                );
                var l = new Map(
                    u.videoStreams.map(function (y) {
                      return [sm(y), y];
                    }),
                  ),
                  p = new Map(
                    u.textStreams.map(function (y) {
                      return [Yu(y), y];
                    }),
                  );
                if (
                  ((u = new Map(
                    u.imageStreams.map(function (y) {
                      return [qu(y), y];
                    }),
                  )),
                  t)
                ) {
                  var m = Yw(Ve);
                  (p.set(Yu(m), m), (m = Yw("image")), u.set(qu(m), m));
                }
                (n.push(o), r.push(l), i.push(p), s.push(u));
              }
              return { Sh: n, mj: r, hj: i, pi: s };
            }
            h.lg = function (e, t, n) {
              n = n === void 0 ? !1 : n;
              var r = this,
                i,
                s,
                o,
                u,
                l,
                p,
                m,
                y,
                v,
                w,
                A,
                I,
                C,
                k,
                R,
                L,
                U,
                G,
                b,
                B,
                O,
                z,
                j,
                X,
                W,
                ie,
                ne,
                $,
                Q,
                ae,
                ce,
                Ne;
              return F(function (we) {
                if (we.g == 1) {
                  if (((i = Ot), !t && e.length == 1))
                    return (
                      (s = Hw(e, !1)),
                      (o = s.Sh),
                      (u = s.mj),
                      (l = s.hj),
                      (p = s.pi),
                      (r.h = Array.from(o[0].values())),
                      (r.g = Array.from(u[0].values())),
                      (r.j = Array.from(l[0].values())),
                      (r.i = Array.from(p[0].values())),
                      we.A(2)
                    );
                  for (m = n ? r.m.size : 0, y = -1, v = 0; v < e.length; v++)
                    ((w = e[v]), r.m.has(w.id) || (r.m.add(w.id), y == -1 && (y = v)));
                  return y == -1
                    ? we.return()
                    : ((A = Hw(e, !0)),
                      (I = A.Sh),
                      (C = A.mj),
                      (k = A.hj),
                      (R = A.pi),
                      E(
                        we,
                        Promise.all([
                          ps(r, r.h, I, y, na, gs, m),
                          ps(r, r.g, C, y, na, gs, m),
                          ps(r, r.j, k, y, na, gs, m),
                          ps(r, r.i, R, y, na, gs, m),
                        ]),
                        2,
                      ));
                }
                if (((L = 0), (U = []), r.g.length && r.h.length))
                  for (X = x(r.h), W = X.next(); !W.done; W = X.next())
                    for (ie = W.value, ne = x(r.g), $ = ne.next(); !$.done; $ = ne.next())
                      ((Q = $.value),
                        (ae = $v(ie.drmInfos, Q.drmInfos)),
                        (ie.drmInfos.length && Q.drmInfos.length && !ae.length) ||
                          ((ce = (ie.bandwidth || 0) + (Q.bandwidth || 0)),
                          ie.dependencyStream && (ce += ie.dependencyStream.bandwidth || 0),
                          Q.dependencyStream && (ce += Q.dependencyStream.bandwidth || 0),
                          (Ne = L++),
                          U.push({
                            id: Ne,
                            language: ie.language,
                            disabledUntilTime: 0,
                            primary: ie.primary,
                            audio: ie,
                            video: Q,
                            bandwidth: ce,
                            drmInfos: ae,
                            allowedByApplication: !0,
                            allowedByKeySystem: !0,
                            decodingInfos: [],
                          })));
                else
                  for (G = r.g.length ? r.g : r.h, b = x(G), B = b.next(); !B.done; B = b.next())
                    ((O = B.value),
                      (z = L++),
                      (j = O.bandwidth || 0),
                      O.dependencyStream && (j += O.dependencyStream.bandwidth || 0),
                      U.push({
                        id: z,
                        language: O.language,
                        disabledUntilTime: 0,
                        primary: O.primary,
                        audio: O.type == i.aa ? O : null,
                        video: O.type == i.wa ? O : null,
                        bandwidth: j,
                        drmInfos: O.drmInfos,
                        allowedByApplication: !0,
                        allowedByKeySystem: !0,
                        decodingInfos: [],
                      }));
                ((r.l = U), re(we));
              });
            };
            function Gw(e) {
              var t, n, r, i, s, o, u, l, p, m, y, v, w, A, I, C, k, R, L, U, G, b, B, O, z, j, X, W, ie, ne;
              return F(function ($) {
                switch ($.g) {
                  case 1:
                    if (((t = Ot), e.length == 1)) return $.return(e[0]);
                    for (
                      n = e.map(function (Q) {
                        return new Map(
                          Q.filter(function (ae) {
                            return ae.type === t.aa;
                          }).map(function (ae) {
                            return [om(ae), ae];
                          }),
                        );
                      }),
                        r = e.map(function (Q) {
                          return new Map(
                            Q.filter(function (ae) {
                              return ae.type === t.wa;
                            }).map(function (ae) {
                              return [sm(ae), ae];
                            }),
                          );
                        }),
                        i = e.map(function (Q) {
                          return new Map(
                            Q.filter(function (ae) {
                              return ae.type === t.Na;
                            }).map(function (ae) {
                              return [Yu(ae), ae];
                            }),
                          );
                        }),
                        s = e.map(function (Q) {
                          return new Map(
                            Q.filter(function (ae) {
                              return ae.type === t.Yf;
                            }).map(function (ae) {
                              return [qu(ae), ae];
                            }),
                          );
                        }),
                        o = x(i),
                        u = o.next();
                      !u.done;
                      u = o.next()
                    )
                      ((l = u.value), (p = $w(t.Na)), l.set(Yu(p), p));
                    for (m = x(s), y = m.next(); !y.done; y = m.next())
                      ((v = y.value), (w = $w(t.Yf)), v.set(qu(w), w));
                    return ((A = new zn()), E($, ps(A, [], n, 0, zd, Xd, 0), 2));
                  case 2:
                    return ((I = $.h), E($, ps(A, [], r, 0, zd, Xd, 0), 3));
                  case 3:
                    return ((C = $.h), E($, ps(A, [], i, 0, zd, Xd, 0), 4));
                  case 4:
                    return ((k = $.h), E($, ps(A, [], s, 0, zd, Xd, 0), 5));
                  case 5:
                    if (((R = $.h), (L = 0), C.length && I.length))
                      for (O = x(I), z = O.next(); !z.done; z = O.next())
                        for (j = z.value, X = x(C), W = X.next(); !W.done; W = X.next())
                          ((ie = W.value), (ne = L++), ie.variantIds.push(ne), j.variantIds.push(ne));
                    else
                      for (U = C.concat(I), G = x(U), b = G.next(); !b.done; b = G.next())
                        ((B = b.value), (B.variantIds = [L++]));
                    return $.return(C.concat(I).concat(k).concat(R));
                }
              });
            }
            function ps(e, t, n, r, i, s, o) {
              var u, l, p, m, y, v, w, A, I, C, k, R, L, U, G, b, B, O, z;
              return F(function (j) {
                switch (j.g) {
                  case 1:
                    for (u = [], l = 0; l < n.length; l++)
                      l >= r ? u.push(new Set(n[l].values())) : u.push(new Set());
                    ((p = x(t)), (m = p.next()));
                  case 2:
                    if (m.done) {
                      j.A(4);
                      break;
                    }
                    return ((y = m.value), E(j, RP(e, y, n, r, s, u, o), 5));
                  case 5:
                    if (((v = j.h), !v)) throw new H(2, 4, 4037);
                    ((m = p.next()), j.A(2));
                    break;
                  case 4:
                    for (w = x(u), A = w.next(); !A.done; A = w.next())
                      for (I = A.value, C = x(I), k = C.next(); !k.done; k = C.next())
                        ((R = k.value), (L = kP(e, t, R, n, i, s, u)) && t.push(L));
                    for (U = x(u), G = U.next(); !G.done; G = U.next())
                      for (
                        b = G.value, B = x(b), O = B.next(), z = {};
                        !O.done;
                        z = { yh: void 0 }, O = B.next()
                      )
                        if (
                          ((z.yh = O.value),
                          !im(z.yh) &&
                            t.some(
                              (function (X) {
                                return function (W) {
                                  return rm(X.yh, W);
                                };
                              })(z),
                            ))
                        )
                          throw new H(2, 4, 4037);
                    return j.return(t);
                }
              });
            }
            function RP(e, t, n, r, i, s, o) {
              return F(function (u) {
                return u.g == 1
                  ? (Ww(e, n, t, o > 0),
                    t.matchedStreams ? (t.segmentIndex ? E(u, zw(t, r + o), 2) : u.A(2)) : u.return(!1))
                  : (Xw(t, r, i, s, o), u.return(!0));
              });
            }
            function zw(e, t) {
              var n, r, i, s, o, u;
              return F(function (l) {
                if (l.g == 1) {
                  for (n = [], r = e.matchedStreams, i = t; i < r.length; i++)
                    ((s = r[i]),
                      n.push(s.createSegmentIndex()),
                      s.trickModeVideo &&
                        !s.trickModeVideo.segmentIndex &&
                        n.push(s.trickModeVideo.createSegmentIndex()),
                      s.dependencyStream &&
                        !s.dependencyStream.segmentIndex &&
                        n.push(s.dependencyStream.createSegmentIndex()));
                  return E(l, Promise.all(n), 2);
                }
                if (e.segmentIndex instanceof Mt)
                  for (o = t; o < r.length; o++)
                    ((u = r[o]), u.segmentIndex && e.segmentIndex.h.push(u.segmentIndex));
                re(l);
              });
            }
            function kP(e, t, n, r, i, s, o) {
              if (im(n)) return null;
              var u = i(n);
              return (
                Ww(e, r, u),
                u.createSegmentIndex &&
                  ((u.createSegmentIndex = function () {
                    return F(function (l) {
                      return u.segmentIndex ? l.A(0) : ((u.segmentIndex = new Mt()), E(l, zw(u, 0), 0));
                    });
                  }),
                  (u.closeSegmentIndex = function () {
                    if (
                      (u.segmentIndex && (u.segmentIndex.release(), (u.segmentIndex = null)),
                      u.matchedStreams)
                    )
                      for (var l = x(u.matchedStreams), p = l.next(); !p.done; p = l.next()) {
                        p = p.value;
                        var m;
                        if ((m = p.segmentIndex)) {
                          e: {
                            m = x(t);
                            for (var y = m.next(); !y.done; y = m.next())
                              if (
                                ((y = y.value),
                                y !== u && y.segmentIndex && y.matchedStreams && y.matchedStreams.includes(p))
                              ) {
                                m = !0;
                                break e;
                              }
                            m = !1;
                          }
                          m = !m;
                        }
                        m && (p.segmentIndex.release(), (p.segmentIndex = null));
                      }
                  })),
                !u.matchedStreams || !u.matchedStreams.length ? null : (Xw(u, 0, s, o, 0), u)
              );
            }
            function Xw(e, t, n, r, i) {
              var s = e.matchedStreams;
              for (t += i; t < s.length; t++) {
                var o = s[t];
                n(e, o);
                var u = !0;
                if (
                  (e.type == "audio" && Os(e.language, o.language) == 0 && (u = !1),
                  u && ((u = r[t - i]) && u.delete(o), o.fullMimeTypes))
                )
                  for (o = x(o.fullMimeTypes.values()), u = o.next(); !u.done; u = o.next())
                    e.fullMimeTypes.add(u.value);
              }
            }
            function na(e) {
              var t = Object.assign({}, e);
              return (
                (t.originalId = null),
                (t.createSegmentIndex = function () {
                  return Promise.resolve();
                }),
                (t.closeSegmentIndex = function () {}),
                (t.roles = t.roles.slice()),
                (t.segmentIndex = null),
                (t.emsgSchemeIdUris = []),
                (t.keyIds = new Set(e.keyIds)),
                (t.closedCaptions = e.closedCaptions ? new Map(e.closedCaptions) : null),
                (t.trickModeVideo = null),
                (t.dependencyStream = null),
                t
              );
            }
            function zd(e) {
              var t = Object.assign({}, e);
              return (
                (t.roles = t.roles.slice()),
                (t.keyIds = new Set(e.keyIds)),
                (t.segments = []),
                (t.variantIds = []),
                (t.closedCaptions = e.closedCaptions ? new Map(e.closedCaptions) : null),
                t
              );
            }
            function gs(e, t) {
              function n(o, u) {
                (o || (o = []), (u = x(u)));
                for (var l = u.next(); !l.done; l = u.next()) ((l = l.value), o.includes(l) || o.push(l));
                return o;
              }
              ((e.roles = n(e.roles, t.roles)),
                t.emsgSchemeIdUris && (e.emsgSchemeIdUris = n(e.emsgSchemeIdUris, t.emsgSchemeIdUris)));
              for (var r = x(t.keyIds), i = r.next(); !i.done; i = r.next()) e.keyIds.add(i.value);
              if (
                (e.originalId == null
                  ? (e.originalId = t.originalId)
                  : (r = t.originalId || "") && !e.originalId.endsWith(r) && (e.originalId += "," + r),
                (r = $v(e.drmInfos, t.drmInfos)),
                t.drmInfos.length && e.drmInfos.length && !r.length)
              )
                throw new H(2, 4, 4038);
              if (((e.drmInfos = r), (e.encrypted = e.encrypted || t.encrypted), t.closedCaptions))
                for (
                  e.closedCaptions || (e.closedCaptions = new Map()), r = x(t.closedCaptions), i = r.next();
                  !i.done;
                  i = r.next()
                ) {
                  var s = x(i.value);
                  ((i = s.next().value), (s = s.next().value), e.closedCaptions.set(i, s));
                }
              (e.bandwidth && t.bandwidth && (e.bandwidth = Math.max(e.bandwidth, t.bandwidth)),
                t.trickModeVideo
                  ? (e.trickModeVideo ||
                      ((e.trickModeVideo = na(t.trickModeVideo)),
                      (e.trickModeVideo.matchedStreams = []),
                      (e.trickModeVideo.createSegmentIndex = function () {
                        if (e.trickModeVideo.segmentIndex) return Promise.resolve();
                        for (
                          var o = new Mt(), u = x(e.trickModeVideo.matchedStreams), l = u.next();
                          !l.done;
                          l = u.next()
                        )
                          o.h.push(l.value.segmentIndex);
                        return ((e.trickModeVideo.segmentIndex = o), Promise.resolve());
                      })),
                    e.trickModeVideo.matchedStreams.push(t.trickModeVideo),
                    gs(e.trickModeVideo, t.trickModeVideo))
                  : e.trickModeVideo && (e.trickModeVideo.matchedStreams.push(t), gs(e.trickModeVideo, t)),
                t.dependencyStream
                  ? (e.dependencyStream ||
                      ((e.dependencyStream = na(t.dependencyStream)),
                      (e.dependencyStream.matchedStreams = []),
                      (e.dependencyStream.createSegmentIndex = function () {
                        if (e.dependencyStream.segmentIndex) return Promise.resolve();
                        for (
                          var o = new Mt(), u = x(e.dependencyStream.matchedStreams), l = u.next();
                          !l.done;
                          l = u.next()
                        )
                          o.h.push(l.value.segmentIndex);
                        return ((e.dependencyStream.segmentIndex = o), Promise.resolve());
                      })),
                    e.dependencyStream.matchedStreams.push(t.dependencyStream),
                    gs(e.dependencyStream, t.dependencyStream))
                  : e.dependencyStream &&
                    (e.dependencyStream.matchedStreams.push(t), gs(e.dependencyStream, t)));
            }
            function Xd(e, t) {
              var n = e.roles;
              n || (n = []);
              for (var r = x(t.roles), i = r.next(); !i.done; i = r.next())
                ((i = i.value), n.includes(i) || n.push(i));
              for (e.roles = n, n = x(t.keyIds), r = n.next(); !r.done; r = n.next()) e.keyIds.add(r.value);
              if (
                ((e.encrypted = e.encrypted && t.encrypted),
                e.segments.push.apply(e.segments, Y(t.segments)),
                t.closedCaptions)
              )
                for (
                  e.closedCaptions || (e.closedCaptions = new Map()), t = x(t.closedCaptions), n = t.next();
                  !n.done;
                  n = t.next()
                )
                  ((r = x(n.value)), (n = r.next().value), (r = r.next().value), e.closedCaptions.set(n, r));
            }
            function Ww(e, t, n, r) {
              ((r = r !== void 0 && r ? n.matchedStreams : []), (t = x(t)));
              for (var i = t.next(); !i.done; i = t.next()) {
                if (((i = _P(e, i.value, n)), !i)) return;
                r.push(i);
              }
              n.matchedStreams = r;
            }
            function _P(e, t, n) {
              var r = { audio: om, video: sm, text: Yu, image: qu }[n.type],
                i = null,
                s = r(n);
              if (t.has(s)) i = t.get(s);
              else {
                s = {
                  audio: function (p, m) {
                    return rm(p, m);
                  },
                  video: function (p, m) {
                    return rm(p, m);
                  },
                  text: PP,
                  image: DP,
                }[n.type];
                for (
                  var o = { audio: LP, video: bP, text: NP, image: OP }[n.type],
                    u = x(t.values()),
                    l = u.next();
                  !l.done;
                  l = u.next()
                )
                  ((l = l.value),
                    !s(n, l) || n.fastSwitching != l.fastSwitching || (i && !o(n, i, l)) || (i = l));
              }
              return (e.o && !im(i) && t.delete(r(i)), i);
            }
            function Kw(e, t) {
              return e.mimeType != t.mimeType ? !1 : Qw(e.codecs) === Qw(t.codecs);
            }
            h.Xi = function (e) {
              this.o = e;
            };
            function rm(e, t) {
              return !(e.drmInfos && !Kv(e.drmInfos, t.drmInfos));
            }
            function PP(e, t) {
              return t.language
                ? !(e.forced !== t.forced || Os(e.language, t.language) == 0 || t.kind != e.kind)
                : !0;
            }
            function DP() {
              return !0;
            }
            function LP(e, t, n) {
              var r = qw(e, t, n);
              if (r === rr) return !0;
              if (r === Rr) return !1;
              r = Os(e.language, t.language);
              var i = Os(e.language, n.language);
              if (i > r) return !0;
              if (i < r) return !1;
              if (t.label !== n.label) {
                if (e.label === t.label) return !1;
                if (e.label === n.label) return !0;
              }
              if (e.roles.length) {
                if (
                  ((r = t.roles.filter(function (s) {
                    return e.roles.includes(s);
                  })),
                  (i = n.roles.filter(function (s) {
                    return e.roles.includes(s);
                  })),
                  i.length > r.length)
                )
                  return !0;
                if (i.length < r.length) return !1;
                if (n.roles.length !== t.roles.length) return n.roles.length < t.roles.length;
              } else {
                if (!n.roles.length && t.roles.length) return !0;
                if (n.roles.length && !t.roles.length) return !1;
              }
              return !t.primary && n.primary
                ? !0
                : t.primary && !n.primary
                  ? !1
                  : ((r = $u(e.channelsCount, t.channelsCount, n.channelsCount)),
                    r == rr
                      ? !0
                      : r == Rr
                        ? !1
                        : ((r = $u(e.audioSamplingRate, t.audioSamplingRate, n.audioSamplingRate)),
                          r == rr
                            ? !0
                            : r == Rr
                              ? !1
                              : !!(e.bandwidth && Jw(e.bandwidth, t.bandwidth, n.bandwidth) == rr)));
            }
            function bP(e, t, n) {
              var r = qw(e, t, n);
              if (r === rr) return !0;
              if (r === Rr) return !1;
              if (((r = $u(e.width * e.height, t.width * t.height, n.width * n.height)), r == rr)) return !0;
              if (r == Rr) return !1;
              if (e.frameRate) {
                if (((r = $u(e.frameRate, t.frameRate, n.frameRate)), r == rr)) return !0;
                if (r == Rr) return !1;
              }
              return !!(e.bandwidth && Jw(e.bandwidth, t.bandwidth, n.bandwidth) == rr);
            }
            function NP(e, t, n) {
              var r = Os(e.language, t.language),
                i = Os(e.language, n.language);
              if (i > r) return !0;
              if (i < r) return !1;
              if (!t.primary && n.primary) return !0;
              if (t.primary && !n.primary) return !1;
              if (t.label !== n.label) {
                if (e.label === t.label) return !1;
                if (e.label === n.label) return !0;
              }
              if (e.roles.length) {
                if (
                  ((r = t.roles.filter(function (s) {
                    return e.roles.includes(s);
                  })),
                  (i = n.roles.filter(function (s) {
                    return e.roles.includes(s);
                  })),
                  i.length > r.length)
                )
                  return !0;
                if (i.length < r.length) return !1;
              } else {
                if (!n.roles.length && t.roles.length) return !0;
                if (n.roles.length && !t.roles.length) return !1;
              }
              return !(
                n.mimeType != e.mimeType ||
                n.codecs != e.codecs ||
                (t.mimeType == e.mimeType && t.codecs == e.codecs)
              );
            }
            function OP(e, t, n) {
              return $u(e.width * e.height, t.width * t.height, n.width * n.height) == rr;
            }
            function $w(e) {
              return {
                id: 0,
                originalId: "",
                groupId: null,
                primary: !1,
                type: e,
                mimeType: "",
                codecs: "",
                language: "",
                originalLanguage: null,
                label: null,
                width: null,
                height: null,
                encrypted: !1,
                keyIds: new Set(),
                segments: [],
                variantIds: [],
                roles: [],
                forced: !1,
                channelsCount: null,
                audioSamplingRate: null,
                spatialAudio: !1,
                closedCaptions: null,
                external: !1,
                fastSwitching: !1,
                isAudioMuxedInVideo: !1,
                baseOriginalId: null,
              };
            }
            function Yw(e) {
              return {
                id: 0,
                originalId: "",
                groupId: null,
                createSegmentIndex: function () {
                  return Promise.resolve();
                },
                segmentIndex: new Qe([]),
                mimeType: "",
                codecs: "",
                encrypted: !1,
                drmInfos: [],
                keyIds: new Set(),
                language: "",
                originalLanguage: null,
                label: null,
                type: e,
                primary: !1,
                trickModeVideo: null,
                dependencyStream: null,
                emsgSchemeIdUris: null,
                roles: [],
                forced: !1,
                channelsCount: null,
                audioSamplingRate: null,
                spatialAudio: !1,
                closedCaptions: null,
                accessibilityPurpose: null,
                external: !1,
                fastSwitching: !1,
                fullMimeTypes: new Set(),
                isAudioMuxedInVideo: !1,
                baseOriginalId: null,
              };
            }
            function $u(e, t, n) {
              if (t == e && e != n) return Rr;
              if (n == e && e != t) return rr;
              if (t > e) {
                if (n <= e || n - e < t - e) return rr;
                if (n - e > t - e) return Rr;
              } else {
                if (n > e) return Rr;
                if (e - n < e - t) return rr;
                if (e - n > e - t) return Rr;
              }
              return am;
            }
            function qw(e, t, n) {
              var r = e.mimeType === t.mimeType && e.codecs === t.codecs,
                i = e.mimeType === n.mimeType && e.codecs === n.codecs;
              return r && !i
                ? Rr
                : !r && i
                  ? rr
                  : ((t = Kw(e, t)), (e = Kw(e, n)), t && !e ? Rr : !t && e ? rr : am);
            }
            function Jw(e, t, n) {
              return ((t = Math.abs(e - t)), (e = Math.abs(e - n)), e < t ? rr : t < e ? Rr : am);
            }
            function im(e) {
              switch (e.type) {
                case Ve:
                  return !e.language;
                case "image":
                  return !e.tilesLayout;
                default:
                  return !1;
              }
            }
            function sm(e) {
              return Wd([
                e.fastSwitching,
                e.width,
                e.frameRate,
                e.codecs,
                e.mimeType,
                e.label,
                e.roles,
                e.closedCaptions ? Array.from(e.closedCaptions.entries()) : null,
                e.bandwidth,
                e.dependencyStream ? e.dependencyStream.baseOriginalId : null,
                Array.from(e.keyIds),
              ]);
            }
            function om(e) {
              return Wd([
                e.fastSwitching,
                e.channelsCount,
                e.language,
                e.bandwidth,
                e.label,
                e.codecs,
                e.mimeType,
                e.roles,
                e.audioSamplingRate,
                e.primary,
                e.dependencyStream ? e.dependencyStream.baseOriginalId : null,
                Array.from(e.keyIds),
              ]);
            }
            function Yu(e) {
              return Wd([e.language, e.label, e.codecs, e.mimeType, e.bandwidth, e.roles]);
            }
            function qu(e) {
              return Wd([e.width, e.codecs, e.mimeType]);
            }
            function Wd(e) {
              return JSON.stringify(e);
            }
            function Qw(e) {
              if (!um.has(e)) {
                var t = hn(e);
                um.set(e, t);
              }
              return um.get(e);
            }
            (de("shaka.util.PeriodCombiner", zn),
              (zn.prototype.setUseStreamOnce = zn.prototype.Xi),
              (zn.prototype.combinePeriods = zn.prototype.lg),
              (zn.prototype.deleteStream = zn.prototype.Zh),
              (zn.prototype.getImageStreams = zn.prototype.Mj),
              (zn.prototype.getTextStreams = zn.prototype.Mg),
              (zn.prototype.getVariants = zn.prototype.fk));
            var rr = 1,
              am = 0,
              Rr = -1,
              um = new Map();
            function UP(e, t) {
              var n = new DOMParser(),
                r = FP.value()(e);
              e = null;
              try {
                e = n.parseFromString(r, "text/xml");
              } catch (i) {
                return null;
              }
              if (
                ((n = e.documentElement),
                !n || n.getElementsByTagName("parsererror").length || n.tagName != t)
              )
                return null;
              if (!("createNodeIterator" in document)) return n;
              for (t = document.createNodeIterator(e, NodeFilter.SHOW_ALL); (e = t.nextNode()); )
                if (e instanceof HTMLElement || e instanceof SVGElement) return null;
              return n;
            }
            function Zw(e, t) {
              try {
                var n = ni(e);
                return UP(n, t);
              } catch (r) {
                return null;
              }
            }
            var FP = new wt(function () {
              if (typeof trustedTypes < "u") {
                var e = trustedTypes.createPolicy("shaka-player#xml", {
                  createHTML: function (t) {
                    return t;
                  },
                });
                return function (t) {
                  return e.createHTML(t);
                };
              }
              return function (t) {
                return t;
              };
            });
            function Ju() {
              var e = this;
              ((this.j = this.g = null),
                (this.B = []),
                (this.h = null),
                (this.Fa = 1),
                (this.H = []),
                (this.l = { vf: "", type: "", profiles: [], uc: null, rb: 0, bb: null, qe: 0 }),
                (this.u = new Map()),
                (this.C = new Map()),
                (this.o = new Map()),
                (this.F = new Map()),
                (this.za = new Map()),
                (this.m = new zn()),
                (this.K = 0),
                (this.Da = new $r(5)),
                (this.M = new He(function () {
                  if (e.J && !e.g.continueLoadingWhenPaused && (e.I.Ma(e.J, "timeupdate"), e.J.paused)) {
                    e.I.Aa(e.J, "timeupdate", function () {
                      return oS(e);
                    });
                    return;
                  }
                  oS(e);
                })),
                (this.R = new Eo()),
                (this.O = null),
                (this.G = []),
                (this.ba = 1 / 0),
                (this.va = !1),
                (this.i = null),
                (this.N = 0),
                (this.T = !1),
                (this.I = new tt()),
                (this.J = null),
                (this.V = !1),
                (this.$ = ""),
                (this.oa = function () {
                  return !1;
                }),
                (this.X = []),
                (this.ma = new Set()),
                (this.ya = new Rw()));
            }
            ((h = Ju.prototype),
              (h.configure = function (e, t) {
                var n = this.j && e.updatePeriod != this.g.updatePeriod && e.updatePeriod >= 0;
                ((this.g = e),
                  t && (this.oa = t),
                  n && this.h && this.h.presentationTimeline.W() && this.M.Jb(),
                  this.i && this.i.configure(this.g),
                  this.m && this.m.Xi(this.g.dash.useStreamOnceInPeriodFlattening));
              }),
              (h.start = function (e, t) {
                var n = this,
                  r;
                return F(function (i) {
                  if (i.g == 1)
                    return ((n.va = t.isLowLatencyMode()), (n.B = [e]), (n.j = t), E(i, lm(n), 2));
                  if (((r = i.h), n.j && cm(n, r), !n.j)) throw new H(2, 7, 7001);
                  return i.return(n.h);
                });
              }),
              (h.stop = function () {
                for (var e = x(this.o.values()), t = e.next(); !t.done; t = e.next())
                  ((t = t.value), t.segmentIndex && t.segmentIndex.release());
                return (
                  this.m && this.m.release(),
                  (this.g = this.j = null),
                  (this.B = []),
                  (this.h = null),
                  this.o.clear(),
                  this.F.clear(),
                  this.u.clear(),
                  this.C.clear(),
                  (this.l = { vf: "", type: "", profiles: [], uc: null, rb: 0, bb: null, qe: 0 }),
                  (this.m = null),
                  this.M != null && (this.M.stop(), (this.M = null)),
                  this.i && this.i.destroy(),
                  this.I && (this.I.release(), (this.I = null)),
                  this.ma.clear(),
                  this.ya.release(),
                  this.R.destroy()
                );
              }),
              (h.update = function () {
                var e = this,
                  t;
                return F(function (n) {
                  if (n.g == 1) return (te(n, 2), E(n, lm(e), 4));
                  if (n.g != 2) return pe(n, 0);
                  if (((t = oe(n)), !e.j || !t)) return n.return();
                  (e.j.onError(t), re(n));
                });
              }),
              (h.onExpirationUpdated = function () {}),
              (h.onInitialVariantChosen = function (e) {
                if (this.h && this.h.presentationTimeline.W()) {
                  var t = e.video || e.audio;
                  if (t && t.segmentIndex) {
                    e = this.h.presentationTimeline.Ic();
                    var n = t.segmentIndex.find(e);
                    n != null && (t = t.segmentIndex.get(n)) && ((this.K = t.endTime - e), cm(this, 0));
                  }
                }
              }),
              (h.banLocation = function (e) {
                this.i && this.i.banLocation(e);
              }),
              (h.setMediaElement = function (e) {
                this.J = e;
              }));
            function lm(e) {
              var t, n, r, i, s, o, u, l, p, m, y;
              return F(function (v) {
                return v.g == 1
                  ? ((t = 4),
                    (n = "MPD"),
                    (r = ZP(e)),
                    (i = e.B),
                    r.length
                      ? ((i = r), (n = "Patch"), (t = 6))
                      : e.B.length > 1 && e.i && ((s = Ku(e.i, "Location", !0)), s.length && (i = s)),
                    (o = Ut(i, e.g.retryParameters)),
                    (u = Date.now()),
                    E(v, fm(e, o, 0, { type: t }), 2))
                  : v.g != 3
                    ? ((l = v.h),
                      e.j
                        ? (l.uri && l.uri != l.originalUri && !e.B.includes(l.uri) && e.B.unshift(l.uri),
                          (p = new Dt(l.uri)),
                          (e.$ = p.g.toString()),
                          E(v, BP(e, l.data, l.uri, n), 3))
                        : v.return(0))
                    : ((m = Date.now()), (y = (m - u) / 1e3), e.Da.sample(1, y), e.ma.clear(), v.return(y));
              });
            }
            function BP(e, t, n, r) {
              var i, s, o, u, l, p, m, y, v, w;
              return F(function (A) {
                if (A.g == 1) {
                  if (((i = t), (s = e.g.dash.manifestPreprocessor), (o = sd), s != o)) {
                    if (
                      (Je(
                        "manifest.dash.manifestPreprocessor configuration",
                        "Please Use manifest.dash.manifestPreprocessorTXml instead.",
                      ),
                      (u = Zw(i, r)),
                      !u)
                    )
                      throw new H(2, 4, 4001, n);
                    (s(u), (i = Ur(u.outerHTML)));
                  }
                  if (((l = Wa(i, r)), !l)) throw new H(2, 4, 4001, n);
                  return (
                    (p = e.g.dash.manifestPreprocessorTXml),
                    (m = od),
                    p != m && p(l),
                    r === "Patch"
                      ? A.return(jP(e, l))
                      : e.g.dash.disableXlinkProcessing
                        ? A.return(eS(e, l, n))
                        : ((y = e.g.dash.xlinkFailGracefully),
                          (v = Gd(l, e.g.retryParameters, y, n, e.j.networkingEngine)),
                          Bs(e.R, v),
                          E(A, v.promise, 2))
                  );
                }
                return ((w = A.h), A.return(eS(e, w, n)));
              });
            }
            function eS(e, t, n) {
              var r,
                i,
                s,
                o,
                u,
                l,
                p,
                m,
                y,
                v,
                w,
                A,
                I,
                C,
                k,
                R,
                L,
                U,
                G,
                b,
                B,
                O,
                z,
                j,
                X,
                W,
                ie,
                ne,
                $,
                Q,
                ae,
                ce,
                Ne,
                we,
                et,
                Ue,
                ot,
                We,
                Ge,
                Ye,
                Ze,
                qe,
                ze,
                Ke,
                $t,
                Ht,
                xr,
                Kn,
                On,
                Qs,
                Bi,
                zr,
                ua,
                la,
                Rf;
              return F(function (Xr) {
                switch (Xr.g) {
                  case 1:
                    for (
                      e.i && e.i.l.clear(),
                        r = [n],
                        i = [],
                        s = new Map(),
                        o = st(t, "Location"),
                        u = x(o),
                        l = u.next();
                      !l.done;
                      l = u.next()
                    )
                      ((p = l.value),
                        (m = p.attributes.serviceLocation),
                        (y = Dn(p)) &&
                          ((v = Yt(r, [y])[0]),
                          m && (e.i ? ta(e.i, "Location", m, v) : s.set(m, v)),
                          i.push(v)));
                    if (
                      (e.i
                        ? ((w = Ku(e.i, "Location", !0)), w.length > 0 && (r = e.B = w))
                        : i.length && (r = e.B = i),
                      (e.l.vf = t.attributes.id || ""),
                      (e.l.qe = be(t, "publishTime", xi) || 0),
                      (e.H = st(t, "PatchLocation")),
                      (A = Promise.resolve()),
                      (I = vt(t, "ContentSteering")) && e.j)
                    )
                      for (
                        C = I.attributes.defaultServiceLocation,
                          e.i
                            ? ((e.i.i = r), (e.i.h = C))
                            : ((e.i = new ea(e.j)),
                              e.i.configure(e.g),
                              e.i.setManifestType("DASH"),
                              (e.i.i = r),
                              (e.i.h = C),
                              (k = Dn(I)) &&
                                (be(I, "queryBeforeStart", uc, !1) ? (A = Wu(e.i, k)) : Wu(e.i, k))),
                          R = x(s.keys()),
                          L = R.next();
                        !L.done;
                        L = R.next()
                      )
                        ((U = L.value), (G = s.get(U)), ta(e.i, "Location", U, G));
                    if (((b = st(t, "BaseURL")), (B = !1), e.i))
                      for (O = x(b), z = O.next(); !z.done; z = O.next())
                        ((j = z.value),
                          (X = j.attributes.serviceLocation),
                          (W = Dn(j)),
                          X && W && (ta(e.i, "BaseURL", X, W), (B = !0)));
                    if (
                      (e.X.splice(0),
                      (B && e.i) || ((ie = b.map(Dn)), e.X.push.apply(e.X, Y(Yt(r, ie)))),
                      (ne = e.i),
                      ($ = e.X),
                      (Q = e4),
                      (ae = Q.call(Ju, ne, B, $)),
                      (e.l.bb = ae),
                      (ce = 0),
                      b && b.length && (ce = be(b[0], "availabilityTimeOffset", ac) || 0),
                      (e.l.rb = ce),
                      (e.K = be(t, "minimumUpdatePeriod", ii, -1)),
                      (Ne = be(t, "availabilityStartTime", xi)),
                      (we = be(t, "timeShiftBufferDepth", ii)),
                      (et = e.g.dash.ignoreSuggestedPresentationDelay),
                      (Ue = null),
                      et || (Ue = be(t, "suggestedPresentationDelay", ii)),
                      (ot = e.g.dash.ignoreMaxSegmentDuration),
                      (We = null),
                      ot || (We = be(t, "maxSegmentDuration", ii)),
                      (Ge = t.attributes.type || "static"),
                      e.h &&
                        e.h.presentationTimeline &&
                        (e.V = e.h.presentationTimeline.W() && Ge == "static"),
                      (e.l.type = Ge),
                      e.h)
                    )
                      for (
                        Ye = e.h.presentationTimeline, Ze = Ye.Hb(), qe = x(e.o.values()), ze = qe.next();
                        !ze.done;
                        ze = qe.next()
                      )
                        ((Ke = ze.value), Ke.segmentIndex && Ke.segmentIndex.Ya(Ze));
                    else
                      (($t = e.g.dash.ignoreMinBufferTime),
                        (Ht = 0),
                        $t || (Ht = be(t, "minBufferTime", ii) || 0),
                        (xr = 0),
                        (xr =
                          Ue != null
                            ? Math.min(Ue, we || 1 / 0)
                            : e.g.defaultPresentationDelay > 0
                              ? e.g.defaultPresentationDelay
                              : Math.min(Ht * 1.5, we || 1 / 0)),
                        (Ye = new De(Ne, xr, e.g.dash.autoCorrectDrift)));
                    return (
                      Ye.cd(Ge == "static"),
                      Ye.W() &&
                        !isNaN(e.g.availabilityWindowOverride) &&
                        (we = e.g.availabilityWindowOverride),
                      we == null && (we = 1 / 0),
                      Ye.Lf(we),
                      (Kn = t.attributes.profiles || ""),
                      (e.l.profiles = Kn.split(",")),
                      (On = {
                        Eb: Ge != "static",
                        presentationTimeline: Ye,
                        sa: null,
                        na: null,
                        qa: null,
                        L: null,
                        bandwidth: 0,
                        Og: !1,
                        rb: ce,
                        uc: null,
                        profiles: Kn.split(","),
                        roles: null,
                        Lb: cS,
                      }),
                      E(Xr, A, 2)
                    );
                  case 2:
                    return (
                      (e.N = 0),
                      (Qs = iS(e, On, ae, t, !1)),
                      (Bi = Qs.duration),
                      (zr = Qs.periods),
                      ((Ge != "static" || e.V) && Qs.ai) || Ye.Ab(Bi || 1 / 0),
                      e.T && e.va && Ye.Ui(e.ba),
                      Ye.Wg(We || 1),
                      e.T && e.va && ((ua = Ue != null ? Ue : e.g.defaultPresentationDelay), Ye.rh(ua)),
                      e.h
                        ? ((e.h.periodCount = zr.length), (e.h.gapCount = e.N), E(Xr, tS(e, zr, !1), 4))
                        : E(Xr, e.m.lg(zr, On.Eb), 6)
                    );
                  case 6:
                    var kf = Ye,
                      vy = e.m.l,
                      _f = e.m.Mg(),
                      ca = e.m.i,
                      ll = e.g.dash.sequenceMode,
                      Gt = vt(t, "ServiceDescription");
                    if (Gt) {
                      var sr = vt(Gt, "Latency");
                      if (((Gt = vt(Gt, "PlaybackRate")), sr || Gt)) {
                        var Un = {};
                        (sr &&
                          ("target" in sr.attributes &&
                            (Un.targetLatency = parseInt(sr.attributes.target, 10) / 1e3),
                          "max" in sr.attributes && (Un.maxLatency = parseInt(sr.attributes.max, 10) / 1e3),
                          "min" in sr.attributes && (Un.minLatency = parseInt(sr.attributes.min, 10) / 1e3)),
                          Gt &&
                            ("max" in Gt.attributes && (Un.maxPlaybackRate = parseFloat(Gt.attributes.max)),
                            "min" in Gt.attributes && (Un.minPlaybackRate = parseFloat(Gt.attributes.min))),
                          (sr = Un));
                      } else sr = null;
                    } else sr = null;
                    e: {
                      if (((Gt = st(t, "SupplementalProperty")), Gt.length)) {
                        for (Gt = x(Gt), Un = Gt.next(); !Un.done; Un = Gt.next())
                          if (((Un = Un.value), Un.attributes.schemeIdUri == "urn:mpeg:dash:chaining:2016")) {
                            Gt = Un.attributes.value;
                            break e;
                          }
                      }
                      Gt = null;
                    }
                    if (
                      ((e.h = {
                        presentationTimeline: kf,
                        variants: vy,
                        textStreams: _f,
                        imageStreams: ca,
                        offlineSessionIds: [],
                        sequenceMode: ll,
                        ignoreManifestTimestampsInSegmentsMode: !1,
                        type: "DASH",
                        serviceDescription: sr,
                        nextUrl: Gt,
                        periodCount: zr.length,
                        gapCount: e.N,
                        isLowLatency: e.T,
                        startTime: null,
                      }),
                      !Ye.kj())
                    ) {
                      Xr.A(7);
                      break;
                    }
                    return ((la = st(t, "UTCTiming")), E(Xr, JP(e, ae, la), 8));
                  case 8:
                    if (((Rf = Xr.h), !e.j)) return Xr.return();
                    Ye.Vi(Rf);
                  case 7:
                    (Ye.qf(), e.m && !e.h.presentationTimeline.W() && e.m.release());
                  case 4:
                    (e.j.makeTextStreamsForClosedCaptions(e.h), HP(e), GP(e, zr), re(Xr));
                }
              });
            }
            function tS(e, t, n) {
              var r;
              return F(function (i) {
                if (i.g == 1) return E(i, e.m.lg(t, !0, n), 2);
                ((e.h.variants = e.m.l),
                  (r = e.m.Mg()),
                  r.length > 0 && (e.h.textStreams = r),
                  (e.h.imageStreams = e.m.i),
                  e.j.filter(e.h),
                  re(i));
              });
            }
            function jP(e, t) {
              var n, r, i, s, o, u, l, p, m, y, v, w, A, I, C, k, R, L, U, G, b, B, O, z, j, X, W;
              return F(function (ie) {
                if (ie.g == 1) {
                  if (
                    ((n = t.attributes.mpdId),
                    (r = be(t, "originalPublishTime", xi)),
                    !n || n !== e.l.vf || r !== e.l.qe)
                  )
                    throw ((e.H = []), new H(1, 4, 4052));
                  for (i = [], s = [], o = new Set(), u = x(i0(t)), l = u.next(); !l.done; l = u.next())
                    if (
                      ((p = l.value),
                      (m = lc(p.attributes.sel || "")),
                      (y = m[m.length - 1]),
                      (v = Dn(p) || ""),
                      y.name === "MPD")
                    )
                      if (y.Dc === "mediaPresentationDuration") {
                        w = Dn(p) || "";
                        var ne = ii(w);
                        if (ne != null) {
                          e.l.uc = ne;
                          for (var $ = x(e.u.values()), Q = $.next(); !Q.done; Q = $.next()) Q.value.uc = ne;
                        }
                      } else if (y.Dc === "type") {
                        for (
                          e.h.presentationTimeline.cd(v == "static"),
                            e.l.type = v,
                            ne = x(e.u.values()),
                            $ = ne.next();
                          !$.done;
                          $ = ne.next()
                        )
                          $.value.Eb = v == "dynamic";
                        v == "static" && (e.K = -1);
                      } else
                        y.Dc === "publishTime"
                          ? (e.l.qe = xi(v) || 0)
                          : y.Dc === null && p.tagName === "add" && s.push(p);
                    else if (y.name === "PatchLocation") o0(e.H, p);
                    else if (y.name === "Period")
                      p.tagName === "add" ? s.push(p) : p.tagName === "remove" && y.id && VP(e, y.id);
                    else if (y.name === "SegmentTemplate") {
                      if ((($ = lc(p.attributes.sel || "")), (ne = $[$.length - 1]), ne.Dc)) {
                        (($ = nS(e, $)), (Q = Dn(p) || ""));
                        for (var ae = x($), ce = ae.next(); !ce.done; ce = ae.next())
                          ((ce = e.u.get(ce.value)), u0(ce.L.Oc, p.tagName, ne.Dc, Q));
                        ne = $;
                      } else ne = [];
                      for (A = ne, I = x(A), C = I.next(); !C.done; C = I.next()) ((k = C.value), o.add(k));
                    } else if (y.name === "SegmentTimeline" || y.name === "S") {
                      for (
                        ne = lc(p.attributes.sel || ""), ne = nS(e, ne), $ = x(ne), Q = $.next();
                        !Q.done;
                        Q = $.next()
                      )
                        ((Q = e.u.get(Q.value)),
                          (Q = Qo(Q, hs, "SegmentTimeline")),
                          (ae = st(Q, "S")),
                          o0(ae, p),
                          (Q.children = ae));
                      for (R = ne, L = x(R), U = L.next(); !U.done; U = L.next()) ((G = U.value), o.add(G));
                    }
                  for (b = x(o), B = b.next(); !B.done; B = b.next()) ((O = B.value), rS(e, O));
                  for (z = x(s), j = z.next(); !j.done; j = z.next())
                    ((X = j.value),
                      i.push.apply(
                        i,
                        Y(
                          iS(
                            e,
                            {
                              Eb: e.l.type == "dynamic",
                              presentationTimeline: e.h.presentationTimeline,
                              sa: null,
                              na: null,
                              qa: null,
                              L: null,
                              bandwidth: 0,
                              Og: !1,
                              rb: e.l.rb,
                              profiles: e.l.profiles,
                              uc: e.l.uc,
                              roles: null,
                              Lb: cS,
                            },
                            e.l.bb,
                            X,
                            !0,
                          ).periods,
                        ),
                      ));
                  return i.length
                    ? ((e.h.periodCount += i.length), (e.h.gapCount = e.N), E(ie, tS(e, i, !0), 2))
                    : ie.A(2);
                }
                (e.l.type == "static" && ((W = e.l.uc), e.h.presentationTimeline.Ab(W || 1 / 0)), re(ie));
              });
            }
            function VP(e, t) {
              e.h.periodCount--;
              for (var n = x(e.u.keys()), r = n.next(); !r.done; r = n.next())
                if (((r = r.value), r.startsWith(t))) {
                  var i = e.u.get(r);
                  ((Qo(i, hs, "SegmentTimeline").children = []), rS(e, r), e.u.delete(r));
                }
              e.G = e.G.filter(function (s) {
                return s !== t;
              });
            }
            function nS(e, t) {
              var n = "",
                r = "",
                i = -1,
                s = "";
              t = x(t);
              for (var o = t.next(); !o.done; o = t.next())
                ((o = o.value),
                  o.name === "Period"
                    ? (n = o.id)
                    : o.name === "AdaptationSet"
                      ? ((r = o.id), o.position !== null && (i = o.position))
                      : o.name === "Representation" && (s = o.id));
              if (((t = []), s)) t.push(n + "," + s);
              else if (r)
                for (i = x(e.u.values()), e = i.next(); !e.done; e = i.next())
                  ((e = e.value), e.sa.id === n && e.qa.id === r && e.L.id && t.push(n + "," + e.L.id));
              else if (i > -1)
                for (r = x(e.u.values()), e = r.next(); !e.done; e = r.next())
                  ((e = e.value), e.sa.id === n && e.qa.position === i && e.L.id && t.push(n + "," + e.L.id));
              return t;
            }
            function rS(e, t) {
              var n = e.u.get(t),
                r = e.o.get(t);
              r.segmentIndex && r.segmentIndex.Ya(e.h.presentationTimeline.Hb());
              try {
                var i = Bw(
                  n,
                  function (s, o, u, l) {
                    return uS(e, s, o, u, l);
                  },
                  e.o,
                  !0,
                  e.g.dash.initialSegmentLimit,
                  e.za,
                  n.L.aesKey,
                  null,
                  !0,
                  e.C,
                );
                r.createSegmentIndex = function () {
                  return F(function (s) {
                    if (s.g == 1) return r.segmentIndex ? s.A(0) : E(s, i.Sc(), 3);
                    ((r.segmentIndex = s.h), re(s));
                  });
                };
              } catch (s) {
                if (
                  ((t = n.L.contentType), (t != Ve && t != "application" && t != "image") || s.code != 4002)
                )
                  throw s;
              }
            }
            function iS(e, t, n, r, i) {
              var s = t.uc;
              s || ((s = be(r, "mediaPresentationDuration", ii)), (e.l.uc = s));
              var o = 0;
              e.h && e.h.presentationTimeline && e.V && (o = e.h.presentationTimeline.Zb());
              var u = [],
                l = o;
              r = st(r, "Period");
              for (var p = 0; p < r.length; p++) {
                var m = r[p],
                  y = r[p + 1],
                  v = be(m, "start", ii, l),
                  w = m.attributes.id,
                  A = be(m, "duration", ii);
                v = p == 0 && v == 0 && e.V ? o : v;
                var I = null;
                if (y) {
                  var C = be(y, "start", ii);
                  C != null && (I = C - v + o);
                } else s != null && (I = s - v + o);
                if (
                  ((C = qv),
                  I && A && Math.abs(I - A) > C && I > A && e.N++,
                  I == null && (I = A),
                  !(e.O !== null && w !== null && v !== null && v < e.O) ||
                    e.G.includes(w) ||
                    p + 1 == r.length)
                ) {
                  if (
                    (v !== null && (e.O === null || v > e.O) && (e.O = v),
                    (l = zP(e, t, n, { start: v, duration: I, node: m, kf: I == null || !y })),
                    u.push(l),
                    t.sa.id && I && e.za.set(t.sa.id, I),
                    I == null)
                  ) {
                    l = null;
                    break;
                  }
                  l = v + I;
                }
              }
              if (i)
                for (t = x(u), n = t.next(); !n.done; n = t.next())
                  ((n = n.value.id), e.G.includes(n) || e.G.push(n));
              else
                e.G = u.map(function (k) {
                  return k.id;
                });
              return s != null
                ? { periods: u, duration: s + o, ai: !1 }
                : { periods: u, duration: l, ai: !0 };
            }
            function HP(e) {
              var t = Array.from(e.F.keys()).filter(function (u) {
                return !e.G.includes(u);
              });
              t = x(t);
              for (var n = t.next(); !n.done; n = t.next()) {
                n = n.value;
                for (var r = !0, i = x(e.F.get(n)), s = i.next(); !s.done; s = i.next()) {
                  s = s.value;
                  var o = e.o.get(s);
                  o &&
                    (o.segmentIndex && o.segmentIndex.getNumReferences() != 0
                      ? (r = !1)
                      : (e.m && e.m.Zh(o, n), e.o.delete(s)));
                }
                r && e.F.delete(n);
              }
            }
            function GP(e, t) {
              t = new Set(
                t.map(function (i) {
                  return i.id;
                }),
              );
              for (var n = x(e.C.keys()), r = n.next(); !r.done; r = n.next())
                ((r = r.value), t.has(r) || e.C.delete(r));
            }
            function zP(e, t, n, r) {
              ((t.sa = dm(e, r.node, null, n)),
                (t.na = r),
                (t.sa.rb = t.rb),
                t.sa.id || (t.sa.id = "__shaka_period_" + r.start));
              var i = st(r.node, "EventStream");
              ((n = t.presentationTimeline.Hb()), (i = x(i)));
              for (var s = i.next(); !s.done; s = i.next()) QP(e, r.start, r.duration, s.value, n);
              for (n = st(r.node, "SupplementalProperty"), n = x(n), i = n.next(); !i.done; i = n.next())
                ((i = i.value),
                  i.attributes.schemeIdUri == "urn:mpeg:dash:urlparam:2014" && (i = Qu(e, i)) && (t.Lb = i));
              if (
                ((n = st(r.node, "AdaptationSet")
                  .map(function (w, A) {
                    return sS(e, t, A, w);
                  })
                  .filter(es)),
                t.Eb)
              ) {
                ((i = []), (s = x(n)));
                for (var o = s.next(); !o.done; o = s.next()) {
                  o = x(o.value.Rk);
                  for (var u = o.next(); !u.done; u = o.next()) i.push(u.value);
                }
                if (i.length != new Set(i).size) throw new H(2, 4, 4018);
              }
              for (i = new Map(), s = x(n), o = s.next(); !o.done; o = s.next())
                for (o = x(o.value.Aj), u = o.next(); !u.done; u = o.next()) {
                  var l = x(u.value);
                  ((u = l.next().value), (l = l.next().value), i.set(u, l));
                }
              if (i.size)
                for (s = null, o = x(n), u = o.next(); !u.done; u = o.next()) {
                  ((u = u.value), (l = []));
                  for (var p = x(u.streams), m = p.next(), y = {}; !m.done; y = { Ah: void 0 }, m = p.next())
                    if (((y.Ah = m.value), i.has(y.Ah.originalId))) {
                      (s ||
                        (s = st(r.node, "AdaptationSet")
                          .map(function (w, A) {
                            return sS(e, t, A, w);
                          })
                          .filter(es)),
                        (m = x(s)));
                      for (var v = m.next(); !v.done; v = m.next())
                        (v = v.value.streams.find(
                          (function (w) {
                            return function (A) {
                              return A.originalId == w.Ah.originalId;
                            };
                          })(y),
                        )) &&
                          ((v.dependencyStream = i.get(v.originalId)),
                          (v.originalId += v.dependencyStream.originalId),
                          l.push(v));
                    }
                  l.length && u.streams.push.apply(u.streams, Y(l));
                }
              if (
                ((r = n.filter(function (w) {
                  return !w.Hh;
                })),
                (n = n.filter(function (w) {
                  return w.Hh;
                })),
                !e.g.disableIFrames)
              ) {
                for (n = x(n), i = n.next(); !i.done; i = n.next())
                  for (i = i.value, s = i.Hh.split(" "), o = x(r), u = o.next(); !u.done; u = o.next())
                    if (((u = u.value), s.includes(u.id)))
                      for (u = x(u.streams), l = u.next(); !l.done; l = u.next()) D0(l.value, i.streams);
              }
              if (
                ((n = Kd(e.g.disableAudio, r, "audio")),
                (i = Kd(e.g.disableVideo, r, "video")),
                (s = Kd(e.g.disableText, r, Ve)),
                (r = Kd(e.g.disableThumbnails, r, "image")),
                i.length === 0 && n.length === 0)
              )
                throw new H(2, 4, 4004);
              return { id: t.sa.id, audioStreams: n, videoStreams: i, textStreams: s, imageStreams: r };
            }
            function Kd(e, t, n) {
              return e || !t.length
                ? []
                : t.reduce(function (r, i) {
                    return (i.contentType != n || r.push.apply(r, Y(i.streams)), r);
                  }, []);
            }
            function sS(e, t, n, r) {
              function i(W) {
                var ie = W.attributes["dvb:fontFamily"];
                ((W = W.attributes["dvb:url"]),
                  ie && W && ((W = Yt(t.qa.bb(), [W], t.Lb())), e.j.addFont(ie, W[0])));
              }
              function s(W) {
                switch (W) {
                  case 1:
                  case 5:
                  case 6:
                  case 7:
                    return "srgb";
                  case 9:
                    return "rec2020";
                  case 11:
                  case 12:
                    return "p3";
                }
              }
              function o(W) {
                switch (W) {
                  case 1:
                  case 6:
                  case 13:
                  case 14:
                  case 15:
                    return "SDR";
                  case 16:
                    return "PQ";
                  case 18:
                    return "HLG";
                }
              }
              ((t.qa = dm(e, r, t.sa, null)), (t.qa.position = n));
              var u = !1;
              n = st(r, "Role");
              var l = n
                  .map(function (W) {
                    return W.attributes.value;
                  })
                  .filter(es),
                p = void 0,
                m = t.qa.contentType == Ve;
              (m && (p = "subtitle"), (n = x(n)));
              for (var y = n.next(); !y.done; y = n.next()) {
                y = y.value;
                var v = y.attributes.schemeIdUri;
                if (v == null || v == "urn:mpeg:dash:role:2011")
                  switch (((y = y.attributes.value), y)) {
                    case "main":
                      u = !0;
                      break;
                    case "caption":
                    case "subtitle":
                      p = y;
                  }
              }
              var w = st(r, "EssentialProperty");
              n = null;
              var A = !1;
              ((y = null), (v = !1), (w = x(w)));
              for (var I = w.next(); !I.done; I = w.next()) {
                I = I.value;
                var C = I.attributes.schemeIdUri;
                if (C == "http://dashif.org/guidelines/trickmode") n = I.attributes.value;
                else if (C == "urn:mpeg:mpegB:cicp:TransferCharacteristics")
                  var k = o(parseInt(I.attributes.value, 10));
                else if (C == "urn:mpeg:mpegB:cicp:ColourPrimaries")
                  var R = s(parseInt(I.attributes.value, 10));
                else
                  C != "urn:mpeg:mpegB:cicp:MatrixCoefficients" &&
                    (C == "urn:mpeg:dash:ssr:2023" && e.g.dash.enableFastSwitching
                      ? (A = !0)
                      : C == "urn:dvb:dash:fontdownload:2014"
                        ? i(I)
                        : (C == "urn:mpeg:dash:urlparam:2014" && (y = Qu(e, I))) || (v = !0));
              }
              if (v) return null;
              var L = null;
              for (v = st(r, "SupplementalProperty"), v = x(v), w = v.next(); !w.done; w = v.next())
                ((w = w.value),
                  (I = w.attributes.schemeIdUri),
                  I == "http://dashif.org/guidelines/last-segment-number"
                    ? (L = parseInt(w.attributes.value, 10) - 1)
                    : I == "urn:mpeg:mpegB:cicp:TransferCharacteristics"
                      ? (k = o(parseInt(w.attributes.value, 10)))
                      : I == "urn:mpeg:mpegB:cicp:ColourPrimaries"
                        ? (R = s(parseInt(w.attributes.value, 10)))
                        : I == "urn:dvb:dash:fontdownload:2014"
                          ? i(w)
                          : I == "urn:mpeg:dash:urlparam:2014" && (y = Qu(e, w)));
              (y && (t.Lb = y), (y = st(r, "Accessibility")));
              var U = new Map(),
                G;
              for (y = x(y), v = y.next(); !v.done; v = y.next())
                if (
                  ((w = v.value),
                  (v = w.attributes.schemeIdUri),
                  (w = w.attributes.value),
                  v != "urn:scte:dash:cc:cea-608:2015" || e.g.disableText)
                )
                  if (v != "urn:scte:dash:cc:cea-708:2015" || e.g.disableText)
                    v == "urn:mpeg:dash:role:2011"
                      ? w != null && (l.push(w), w == "captions" && (p = "caption"))
                      : v == "urn:tva:metadata:cs:AudioPurposeCS:2007" &&
                        (w == "1"
                          ? (G = "visually impaired")
                          : w == "2"
                            ? (G = "hard of hearing")
                            : w == "9" && (G = "spoken subtitles"));
                  else if (((v = 1), w != null))
                    for (w = x(w.split(";")), I = w.next(); !I.done; I = w.next()) {
                      C = I.value;
                      var b = (I = void 0);
                      (C.includes("=")
                        ? ((C = C.split("=")), (I = "svc" + C[0]), (b = C[1].split(",")[0].split(":").pop()))
                        : ((I = "svc" + v), v++, (b = C)),
                        U.set(I, nt(b)));
                    }
                  else U.set("svc1", "und");
                else if (((v = 1), w != null))
                  for (w = w.split(";"), I = x(w), C = I.next(); !C.done; C = I.next()) {
                    b = C.value;
                    var B = (C = void 0);
                    (b.includes("=")
                      ? ((b = b.split("=")),
                        (C = b[0].startsWith("CC") ? b[0] : "CC" + b[0]),
                        (B = b[1] || "und"))
                      : ((C = "CC" + v), w.length == 2 ? (v += 2) : v++, (B = b)),
                      U.set(C, nt(B)));
                  }
                else U.set("CC1", "und");
              y = st(r, "ContentProtection");
              var O = kw(e.ya, y, e.g.ignoreDrmInfo, e.g.dash.keySystemsByURI);
              t.qa.encrypted = y.length > 0;
              var z = nt(t.qa.language || "und"),
                j = t.qa.label,
                X = new Map();
              if (((r = st(r, "Representation")), !e.g.ignoreSupplementalCodecs)) {
                for (y = [], v = x(r), w = v.next(); !w.done; w = v.next())
                  ((I = w.value),
                    (w = vi(I, "urn:scte:dash:scte214-extensions", "supplementalCodecs")) &&
                      ((I = Fr(I)),
                      (I.attributes.codecs = w.split(" ").join(",")),
                      I.attributes.id &&
                        (I.attributes.supplementalId = I.attributes.id + "_supplementalCodecs"),
                      y.push(I)));
                r.push.apply(r, Y(y));
              }
              if (
                ((y = r
                  .map(function (W) {
                    var ie = XP(e, t, O, p, z, j, u, l, U, W, G, L);
                    return ie &&
                      ((ie.hdr = ie.hdr || k),
                      (ie.colorGamut = ie.colorGamut || R),
                      (ie.fastSwitching = A),
                      (W = W.attributes.dependencyId))
                      ? ((ie.baseOriginalId = W), X.set(W, ie), null)
                      : ie;
                  })
                  .filter(function (W) {
                    return !!W;
                  })),
                y.length == 0 && X.size == 0)
              ) {
                if (((n = t.qa.contentType == "image"), e.g.dash.ignoreEmptyAdaptationSet || m || n))
                  return null;
                throw new H(2, 4, 4003);
              }
              if (!t.qa.contentType || t.qa.contentType == "application")
                for (
                  t.qa.contentType = lS(y[0].mimeType, y[0].codecs), m = x(y), v = m.next();
                  !v.done;
                  v = m.next()
                )
                  v.value.type = t.qa.contentType;
              for (m = t.qa.id || "__fake__" + e.Fa++, v = x(y), w = v.next(); !w.done; w = v.next()) {
                for (w = w.value, I = x(O.drmInfos), C = I.next(); !C.done; C = I.next())
                  ((C = C.value),
                    (C.keyIds =
                      C.keyIds && w.keyIds
                        ? new Set([].concat(Y(C.keyIds), Y(w.keyIds)))
                        : C.keyIds || w.keyIds));
                e.g.enableAudioGroups && (w.groupId = m);
              }
              return (
                (r = r
                  .map(function (W) {
                    return W.attributes.supplementalId || W.attributes.id;
                  })
                  .filter(es)),
                {
                  id: m,
                  contentType: t.qa.contentType,
                  language: z,
                  Fm: u,
                  streams: y,
                  drmInfos: O.drmInfos,
                  Hh: n,
                  Rk: r,
                  Aj: X,
                }
              );
            }
            function Qu(e, t) {
              if (
                (t = Ar(t, "urn:mpeg:dash:schema:urlparam:2014", "UrlQueryInfo")) &&
                be(t, "useMPDUrlQuery", uc, !1)
              ) {
                var n = t.attributes.queryTemplate;
                if (n)
                  return function () {
                    return n == "$querypart$"
                      ? e.$
                      : n
                          .split("&")
                          .map(function (r) {
                            if (r == "$querypart$") return e.$;
                            var i = /\$query:(.*?)\$/g.exec(r);
                            if (i && i.length == 2) {
                              i = i[1];
                              var s = new lo(e.$).get(i);
                              if (s.length) return i + "=" + s[0];
                            }
                            return r;
                          })
                          .join("&");
                  };
              }
              return null;
            }
            function XP(e, t, n, r, i, s, o, u, l, p, m, y) {
              t.L = dm(e, p, t.qa, null);
              var v = t.L.id;
              if (((e.ba = Math.min(e.ba, t.L.rb)), (e.T = e.ba > 0), !qP(t.L))) return null;
              var w = t.na.start;
              ((t.bandwidth = be(p, "bandwidth", si) || 0), (t.roles = u));
              var A = st(p, "SupplementalProperty"),
                I = st(p, "EssentialProperty"),
                C = st(p, "ContentProtection");
              p = null;
              var k = I.find(function ($) {
                return $.attributes.schemeIdUri == "urn:mpeg:dash:urlparam:2014";
              });
              ((k ||
                (k = A.find(function ($) {
                  return $.attributes.schemeIdUri == "urn:mpeg:dash:urlparam:2014";
                }))) &&
                (p = Qu(e, k)),
                p && (t.Lb = p),
                (k = t.L.contentType),
                (p = k == Ve || k == "application"),
                (k = k == "image"),
                C.length && (t.qa.encrypted = !0));
              try {
                var R = void 0;
                if (n.hg) {
                  var L = t.L.bb,
                    U = t.Lb,
                    G = Yt(L(), [n.hg.wk], U()),
                    b = Ut(G, e.g.retryParameters);
                  R = {
                    bitsKey: 128,
                    blockCipherMode: "CBC",
                    iv: n.hg.iv,
                    firstMediaSequenceNumber: 0,
                    fetchKey: function () {
                      var $, Q, ae;
                      return F(function (ce) {
                        if (ce.g == 1) return E(ce, fm(e, b, 6), 2);
                        if (ce.g != 3) {
                          if ((($ = ce.h), !$.data || $.data.byteLength != 16)) throw new H(2, 4, 4049);
                          return (
                            (Q = { name: "AES-CBC" }),
                            (ae = R),
                            E(ce, g.crypto.subtle.importKey("raw", $.data, Q, !0, ["decrypt"]), 3)
                          );
                        }
                        ((ae.cryptoKey = ce.h), (R.fetchKey = void 0), re(ce));
                      });
                    },
                  };
                }
                if (
                  ((t.L.aesKey = R),
                  (L = function ($, Q, ae, ce) {
                    return uS(e, $, Q, ae, ce);
                  }),
                  t.L.Id)
                )
                  var B = gP(t, L, R);
                else if (t.L.Ac) B = yP(t, e.o, R);
                else if (t.L.Oc) B = Bw(t, L, e.o, !!e.h, e.g.dash.initialSegmentLimit, e.za, R, y, !1, e.C);
                else {
                  var O = t.na.duration || 0,
                    z = t.L.bb,
                    j = t.L.mimeType,
                    X = t.L.codecs;
                  B = {
                    endTime: -1,
                    timeline: -1,
                    Sc: function () {
                      var $ = Gc(w, O, z());
                      return (
                        $.Fb(function (Q) {
                          ((Q.mimeType = j), (Q.codecs = X));
                        }),
                        Promise.resolve($)
                      );
                    },
                    timescale: 1,
                  };
                }
              } catch ($) {
                if ((p || k) && $.code == 4002) return null;
                throw $;
              }
              ((y = tP(e.ya, C, n, e.g.ignoreDrmInfo, e.g.dash.keySystemsByURI)),
                (y = new Set(y ? [y] : [])),
                (C = !1),
                A.some(function ($) {
                  return (
                    $.attributes.schemeIdUri == "tag:dolby.com,2018:dash:EC3_ExtensionType:2018" &&
                    $.attributes.value == "JOC"
                  );
                }) && (C = !0),
                (A = !1),
                p && (A = u.includes("forced_subtitle") || u.includes("forced-subtitle")));
              var W;
              if (
                k &&
                ((I = I.find(function ($) {
                  return [
                    "http://dashif.org/thumbnail_tile",
                    "http://dashif.org/guidelines/thumbnail_tile",
                  ].includes($.attributes.schemeIdUri);
                })) && (W = I.attributes.value),
                !W)
              )
                return null;
              var ie;
              ((p = t.L.codecs),
                t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10") &&
                  (p.includes("hvc1.2.4.L153.B0") || p.includes("hev1.2.4.L153.B0")) &&
                  (ie = "PQ"),
                (I = t.L.id ? t.sa.id + "," + t.L.id : ""),
                e.H.length && v && e.u.set(t.sa.id + "," + v, KP(t)),
                t.L.Cf && WP(e, t.L.Cf, B, t.presentationTimeline),
                B.endTime != -1 &&
                  t.sa.id != null &&
                  t.L.id != null &&
                  ((v = e.C.get(t.sa.id))
                    ? ((v.endTime = B.endTime),
                      v.gh.includes(t.L.id) || v.gh.push(t.L.id),
                      e.C.set(t.sa.id, v))
                    : e.C.set(t.sa.id, { endTime: B.endTime, timeline: B.timeline, gh: [t.L.id] })));
              var ne =
                I && e.o.has(I)
                  ? e.o.get(I)
                  : {
                      id: e.Fa++,
                      originalId: t.L.id,
                      groupId: null,
                      createSegmentIndex: function () {
                        return Promise.resolve();
                      },
                      closeSegmentIndex: function () {
                        ne.segmentIndex && (ne.segmentIndex.release(), (ne.segmentIndex = null));
                      },
                      segmentIndex: null,
                      mimeType: t.L.mimeType,
                      codecs: p,
                      frameRate: t.L.frameRate,
                      pixelAspectRatio: t.L.pixelAspectRatio,
                      bandwidth: t.bandwidth,
                      width: t.L.width,
                      height: t.L.height,
                      kind: r,
                      encrypted: n.drmInfos.length > 0,
                      drmInfos: n.drmInfos,
                      keyIds: y,
                      language: i,
                      originalLanguage: t.qa.language,
                      label: s,
                      type: t.qa.contentType,
                      primary: o,
                      trickModeVideo: null,
                      dependencyStream: null,
                      emsgSchemeIdUris: t.L.emsgSchemeIdUris,
                      roles: u,
                      forced: A,
                      channelsCount: t.L.yf,
                      audioSamplingRate: t.L.audioSamplingRate,
                      spatialAudio: C,
                      closedCaptions: l,
                      hdr: ie,
                      colorGamut: void 0,
                      videoLayout: void 0,
                      tilesLayout: W,
                      accessibilityPurpose: m,
                      external: !1,
                      fastSwitching: !1,
                      fullMimeTypes: new Set([Rt(t.L.mimeType, t.L.codecs)]),
                      isAudioMuxedInVideo: !1,
                      baseOriginalId: null,
                    };
              return (
                (ne.createSegmentIndex = function () {
                  var $;
                  return F(function (Q) {
                    if (Q.g == 1) return ne.segmentIndex ? Q.A(0) : (($ = ne), E(Q, B.Sc(), 3));
                    (($.segmentIndex = Q.h), re(Q));
                  });
                }),
                I &&
                  t.Eb &&
                  !e.o.has(I) &&
                  ((t = t.sa.id || ""), e.F.has(t) || e.F.set(t, []), e.o.set(I, ne), e.F.get(t).push(I)),
                ne
              );
            }
            function WP(e, t, n, r) {
              if (!e.ma.has(t)) {
                e.ma.add(t);
                var i = be(t, "presentationTime", on) || 0,
                  s = vt(t, "UTCTiming"),
                  o;
                ((o = s && s.attributes.schemeIdUri) &&
                  ((s = s.attributes.schemeIdUri),
                  (o = !(
                    s === "urn:mpeg:dash:utc:http-ntp:2014" ||
                    s === "urn:mpeg:dash:utc:ntp:2014" ||
                    s === "urn:mpeg:dash:utc:sntp:2014"
                  ))),
                  o
                    ? (t = (be(t, "wallClockTime", xi) || 0) * 1e3)
                    : ((t = be(t, "wallClockTime", on) || 0), (t = kx(t))),
                  (n = new Date(t - (i / n.timescale) * 1e3)),
                  (i = n.getTime() / 1e3),
                  isNaN(i) ||
                    (r.o || r.sh(i),
                    (r = new Map().set("detail", { wallClockTime: t, programStartDate: n })),
                    (r = new Ae("prft", r)),
                    e.j.onEvent(r)));
              }
            }
            function KP(e) {
              function t(n) {
                return n
                  ? ((n = qi(n)), (n.Id = null), (n.Ac = null), (n.Oc = $h(n.Oc)), (n.Cf = null), n)
                  : null;
              }
              return (
                (e = qi(e)),
                (e.sa = t(e.sa)),
                (e.qa = t(e.qa)),
                (e.L = t(e.L)),
                e.na && ((e.na = qi(e.na)), (e.na.node = null)),
                e
              );
            }
            function oS(e) {
              var t, n;
              return F(function (r) {
                switch (r.g) {
                  case 1:
                    return ((t = 0), te(r, 2), E(r, lm(e), 4));
                  case 4:
                    ((t = r.h), pe(r, 3));
                    break;
                  case 2:
                    if (((n = oe(r)), e.j)) {
                      if (e.g.raiseFatalErrorOnManifestUpdateRequestFailure)
                        return (e.j.onError(n), r.return());
                      ((n.severity = 1), e.j.onError(n));
                    }
                  case 3:
                    if (!e.j) return r.return();
                    (e.j.onManifestUpdated(), cm(e, t), re(r));
                }
              });
            }
            function cm(e, t) {
              if (!(e.K < 0)) {
                var n = e.K;
                (e.g.updatePeriod >= 0 && (n = e.g.updatePeriod), e.M.ka(Math.max(n - t, Tr(e.Da))));
              }
            }
            function dm(e, t, n, r) {
              ((n = n || {
                contentType: "",
                mimeType: "",
                codecs: "",
                emsgSchemeIdUris: [],
                frameRate: void 0,
                pixelAspectRatio: void 0,
                yf: null,
                audioSamplingRate: null,
                rb: 0,
                If: 1,
                encrypted: !1,
              }),
                (r = r || n.bb));
              var i = t.attributes.id,
                s = t.attributes.supplementalId,
                o = st(t, "BaseURL"),
                u,
                l = !1;
              if (e.i)
                for (var p = x(o), m = p.next(); !m.done; m = p.next()) {
                  var y = m.value;
                  ((m = y.attributes.serviceLocation), (y = Dn(y)), m && y && (ta(e.i, i, m, y), (l = !0)));
                }
              (l && e.i) || (u = o.map(Dn));
              var v = e.i;
              ((e = t.attributes.contentType || n.contentType),
                (p = t.attributes.mimeType || n.mimeType),
                (m = Wp([t.attributes.codecs || n.codecs]).join(",")),
                (y = be(t, "frameRate", AC) || n.frameRate));
              var w = t.attributes.sar || n.pixelAspectRatio,
                A = $P(st(t, "InbandEventStream"), n.emsgSchemeIdUris),
                I = st(t, "AudioChannelConfiguration");
              I = YP(I) || n.yf;
              var C = be(t, "audioSamplingRate", on) || n.audioSamplingRate;
              e || (e = lS(p, m));
              var k = vt(t, "SegmentBase"),
                R = vt(t, "SegmentTemplate"),
                L = (k && be(k, "availabilityTimeOffset", ac)) || 0,
                U = (R && be(R, "availabilityTimeOffset", ac)) || 0,
                G = (o && o.length && be(o[0], "availabilityTimeOffset", ac)) || 0;
              ((L = n.rb + G + L + U),
                (U = null),
                (G = vt(t, "SegmentSequenceProperties")) && (G = be(G, "cadence", si)) && (U = G),
                (G = t.attributes.label));
              var b = st(t, "Label");
              return (
                b && b.length && ((b = b[0]), Lt(b) && (G = Lt(b))),
                {
                  bb: function () {
                    return Yt(r(), o.length ? (v && l ? Ku(v, i) : u || []) : []);
                  },
                  Id: k || n.Id,
                  Ac: vt(t, "SegmentList") || n.Ac,
                  Oc: R || n.Oc,
                  Cf: vt(t, "ProducerReferenceTime") || n.Cf,
                  width: be(t, "width", on) || n.width,
                  height: be(t, "height", on) || n.height,
                  contentType: e,
                  mimeType: p,
                  codecs: m,
                  frameRate: y,
                  pixelAspectRatio: w,
                  emsgSchemeIdUris: A,
                  id: s || i,
                  originalId: i,
                  language: t.attributes.lang,
                  yf: I,
                  audioSamplingRate: C,
                  rb: L,
                  hf: null,
                  If: U || n.If,
                  label: G || null,
                  encrypted: !1,
                }
              );
            }
            function $P(e, t) {
              ((t = t.slice()), (e = x(e)));
              for (var n = e.next(); !n.done; n = e.next())
                ((n = n.value.attributes.schemeIdUri), t.includes(n) || t.push(n));
              return t;
            }
            function YP(e) {
              e = x(e);
              for (var t = e.next(); !t.done; t = e.next()) {
                t = t.value;
                var n = t.attributes.schemeIdUri;
                if (n && (t = t.attributes.value))
                  switch (n) {
                    case "urn:mpeg:dash:outputChannelPositionList:2012":
                      return t.trim().split(/ +/).length;
                    case "urn:mpeg:dash:23003:3:audio_channel_configuration:2011":
                    case "urn:dts:dash:audio_channel_configuration:2012":
                      if (((t = parseInt(t, 10)), !t)) continue;
                      return t;
                    case "tag:dolby.com,2015:dash:audio_channel_configuration:2015":
                      if (
                        ((n = [2, 1, 2, 2, 2, 2, 1, 2, 2, 1, 1, 1, 1, 2, 1, 1, 2, 2]),
                        (t = parseInt(t, 16)),
                        !t)
                      )
                        continue;
                      for (var r = 0, i = 0; i < n.length; i++) t & (1 << i) && (r += n[i]);
                      if (r) return r;
                      continue;
                    case "tag:dolby.com,2014:dash:audio_channel_configuration:2011":
                    case "urn:dolby:dash:audio_channel_configuration:2011":
                      if (
                        ((n = [1, 1, 1, 1, 1, 2, 2, 1, 1, 2, 2, 2, 1, 2, 1, 1].reverse()),
                        (t = parseInt(t, 16)),
                        !t)
                      )
                        continue;
                      for (i = r = 0; i < n.length; i++) t & (1 << i) && (r += n[i]);
                      if (r) return r;
                      continue;
                    case "urn:mpeg:mpegB:cicp:ChannelConfiguration":
                      if (
                        ((n = [0, 1, 2, 3, 4, 5, 6, 8, 2, 3, 4, 7, 8, 24, 8, 12, 10, 12, 14, 12, 14]),
                        (t = parseInt(t, 10)) && t > 0 && t < n.length)
                      )
                        return n[t];
                  }
              }
              return null;
            }
            function qP(e) {
              var t = e.Id ? 1 : 0;
              return (
                (t += e.Ac ? 1 : 0),
                (t += e.Oc ? 1 : 0),
                t == 0
                  ? e.contentType == Ve || e.contentType == "application"
                  : (t != 1 && (e.Id && (e.Ac = null), (e.Oc = null)), !0)
              );
            }
            function aS(e, t, n, r) {
              var i, s, o, u, l, p, m;
              return F(function (y) {
                if (y.g == 1)
                  return (
                    (i = [Pn(n)]),
                    (s = Yt(t(), i)),
                    (o = Ut(s, e.g.retryParameters)),
                    (o.method = r),
                    (u = e.j.networkingEngine.request(4, o, { isPreload: e.oa() })),
                    Bs(e.R, u),
                    E(y, u.promise, 2)
                  );
                if (((l = y.h), r == "HEAD")) {
                  if (!l.headers || !l.headers.date) return y.return(0);
                  p = l.headers.date;
                } else p = At(l.data);
                return ((m = Date.parse(p)), isNaN(m) ? y.return(0) : y.return(m - Date.now()));
              });
            }
            function JP(e, t, n) {
              var r, i, s, o, u, l, p, m;
              return F(function (y) {
                switch (y.g) {
                  case 1:
                    ((r = n.map(function (v) {
                      return { scheme: v.attributes.schemeIdUri, value: v.attributes.value };
                    })),
                      (i = e.g.dash.clockSyncUri),
                      !r.length && i && r.push({ scheme: "urn:mpeg:dash:utc:http-head:2014", value: i }),
                      (s = x(r)),
                      (o = s.next()));
                  case 2:
                    if (o.done) {
                      y.A(4);
                      break;
                    }
                    switch (((u = o.value), te(y, 5), (l = u.scheme), (p = u.value), l)) {
                      case "urn:mpeg:dash:utc:http-head:2014":
                      case "urn:mpeg:dash:utc:http-head:2012":
                        return y.A(7);
                      case "urn:mpeg:dash:utc:http-xsdate:2014":
                      case "urn:mpeg:dash:utc:http-iso:2014":
                      case "urn:mpeg:dash:utc:http-xsdate:2012":
                      case "urn:mpeg:dash:utc:http-iso:2012":
                        return y.A(8);
                      case "urn:mpeg:dash:utc:direct:2014":
                      case "urn:mpeg:dash:utc:direct:2012":
                        return ((m = Date.parse(p)), y.return(isNaN(m) ? 0 : m - Date.now()));
                      case "urn:mpeg:dash:utc:http-ntp:2014":
                      case "urn:mpeg:dash:utc:ntp:2014":
                      case "urn:mpeg:dash:utc:sntp:2014":
                        Be("NTP UTCTiming scheme is not supported");
                        break;
                      default:
                        Be("Unrecognized scheme in UTCTiming element", l);
                    }
                    y.A(9);
                    break;
                  case 7:
                    return E(y, aS(e, t, p, "HEAD"), 10);
                  case 10:
                    return y.return(y.h);
                  case 8:
                    return E(y, aS(e, t, p, "GET"), 11);
                  case 11:
                    return y.return(y.h);
                  case 9:
                    pe(y, 3);
                    break;
                  case 5:
                    oe(y);
                  case 3:
                    ((o = s.next()), y.A(2));
                    break;
                  case 4:
                    return (
                      Be(
                        "A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!",
                      ),
                      y.return(0)
                    );
                }
              });
            }
            function QP(e, t, n, r, i) {
              var s = r.attributes.schemeIdUri || "",
                o = r.attributes.value || "",
                u = be(r, "timescale", on) || 1,
                l = be(r, "presentationTimeOffset", on) || 0;
              r = x(st(r, "Event"));
              for (var p = r.next(); !p.done; p = r.next()) {
                p = p.value;
                var m = be(p, "presentationTime", on) || 0,
                  y = be(p, "duration", on) || 0;
                ((m = Math.max((m - l) / u + t, t)),
                  (y = m + y / u),
                  n != null && ((m = Math.min(m, t + n)), (y = Math.min(y, t + n))),
                  y < i ||
                    ((p = {
                      schemeIdUri: s,
                      value: o,
                      startTime: m,
                      endTime: y,
                      id: p.attributes.id || "",
                      timescale: u,
                      eventElement: l0(p),
                      eventNode: $h(p),
                    }),
                    e.j.onTimelineRegionAdded(p)));
              }
            }
            function uS(e, t, n, r, i) {
              var s, o, u, l;
              return F(function (p) {
                return p.g == 1
                  ? ((s = Er),
                    (o = i ? 0 : 1),
                    (u = Tu(t, n, r, e.g.retryParameters)),
                    E(p, fm(e, u, s, { type: o }), 2))
                  : ((l = p.h), p.return(l.data));
              });
            }
            function lS(e, t) {
              return ((t = Rt(e, t)), Za(t) ? Ve : e.split("/")[0]);
            }
            function fm(e, t, n, r) {
              return (
                r || (r = {}),
                (r.isPreload = e.oa()),
                (t = e.j.networkingEngine.request(n, t, r)),
                Bs(e.R, t),
                t.promise
              );
            }
            function ZP(e) {
              var t = e.l.qe;
              if (!e.l.vf || !t || !e.H.length) return [];
              var n = Date.now() / 1e3,
                r = e.H.filter(function (i) {
                  return ((i = on(i.attributes.ttl)), !i || t + i > n);
                })
                  .map(Dn)
                  .filter(es);
              return r.length ? Yt(e.B, r) : [];
            }
            function cS() {
              return "";
            }
            function e4(e, t, n) {
              return function () {
                return e && t ? Ku(e, "BaseURL") : n.slice();
              };
            }
            (de("shaka.dash.DashParser", Ju),
              ks("application/dash+xml", function () {
                return new Ju();
              }),
              ks("video/vnd.mpeg.dash.mpd", function () {
                return new Ju();
              }));
            function $d() {}
            (de("shaka.dependencies", $d),
              ($d.has = function (e) {
                return hm.has(e);
              }),
              ($d.add = function (e, t) {
                if (!fS[e]) throw Error(e + " is not supported");
                e == dS
                  ? Je("mux.js", "mux.js is no longer used in Shaka Player.")
                  : hm.set(e, function () {
                      return t;
                    });
              }));
            var dS = "muxjs",
              fS = { Gm: dS, ISOBoxer: "ISOBoxer" };
            $d.Allowed = fS;
            var hm = new Map([
              [
                "ISOBoxer",
                function () {
                  return g.ISOBoxer;
                },
              ],
            ]);
            function it() {
              ((this.j = new wt(function () {
                return ["Oculus", "Quest"].some(function (e) {
                  return navigator.userAgent.includes(e.toLowerCase());
                })
                  ? "VR"
                  : navigator.userAgent.match(/Smart( ?|_)TV/i) || navigator.userAgent.match(/Android ?TV/i)
                    ? "TV"
                    : navigator.userAgentData
                      ? navigator.userAgentData.mobile
                        ? "MOBILE"
                        : "DESKTOP"
                      : /(?:iPhone|iPad|iPod)/.test(navigator.userAgent)
                        ? "MOBILE"
                        : navigator.userAgentData && navigator.userAgentData.platform
                          ? navigator.userAgentData.platform.toLowerCase() == "android"
                            ? "MOBILE"
                            : "DESKTOP"
                          : navigator.userAgent.includes("Android")
                            ? "MOBILE"
                            : "DESKTOP";
              })),
                (this.l = new wt(function () {
                  return navigator.vendor.includes("Apple") &&
                    (navigator.userAgent.includes("Version/") || navigator.userAgent.includes("OS/"))
                    ? "WEBKIT"
                    : navigator.userAgent.includes("Edge/")
                      ? "EDGE"
                      : navigator.userAgent.includes("Chrome/")
                        ? "CHROMIUM"
                        : navigator.userAgent.includes("Firefox/")
                          ? "GECKO"
                          : "UNKNOWN";
                })));
            }
            function ui() {
              var e = g.ManagedMediaSource || g.MediaSource;
              return !!(e && e.isTypeSupported);
            }
            ((h = it.prototype),
              (h.hc = function () {
                return !!navigator.mediaCapabilities;
              }),
              (h.Oa = function () {
                return this.j.value();
              }),
              (h.Ha = function () {
                return this.l.value();
              }),
              (h.Fd = function () {
                return !1;
              }),
              (h.ih = function () {
                return !1;
              }),
              (h.jf = function () {
                return !1;
              }),
              (h.Ni = function () {
                return !1;
              }),
              (h.se = function () {
                return !1;
              }),
              (h.fd = function () {
                return !0;
              }),
              (h.Ib = function () {
                var e = g.ManagedSourceBuffer || g.SourceBuffer;
                return !!e && !!e.prototype && !!e.prototype.changeType;
              }),
              (h.we = function () {
                return !0;
              }),
              (h.Si = function () {
                return 0;
              }),
              (h.lc = function () {
                return Promise.resolve({ width: 1 / 0, height: 1 / 0 });
              }),
              (h.$i = function () {
                return !1;
              }),
              (h.xh = function () {
                return !1;
              }),
              (h.Wa = function (e) {
                var t = this.Oa();
                return (
                  (t === "TV" || t === "CONSOLE" || t === "CAST") &&
                    ((e.ads.customPlayheadTracker = !0),
                    (e.ads.skipPlayDetection = !0),
                    (e.ads.supportsMultipleMediaElements = !1)),
                  e
                );
              }),
              (h.Ch = function () {
                return !!g.indexedDB;
              }),
              (h.Li = function () {
                return [];
              }),
              (h.sd = function (e) {
                return g.matchMedia !== void 0 && g.matchMedia("(color-gamut: p3)").matches
                  ? e
                    ? "HLG"
                    : "PQ"
                  : "SDR";
              }),
              (h.gj = function () {
                return !1;
              }),
              (h.Bi = function () {
                return !1;
              }),
              (h.Ff = function () {
                return !1;
              }),
              (h.Of = function () {
                return !0;
              }),
              (h.Ci = function () {
                return !1;
              }),
              (h.fj = function () {
                return !0;
              }),
              (h.ed = function () {
                return !1;
              }),
              (h.Vg = function (e) {
                return e === "com.apple.fps";
              }),
              (h.Nf = function () {
                return !0;
              }),
              (h.toString = function () {
                return "Device: " + this.Nb() + " v" + this.Ba() + "; Type: " + this.Oa();
              }));
            function pm() {
              (it.call(this),
                (this.g = new wt(function () {
                  var e = navigator.userAgent.match(/Version\/(\d+)/);
                  return e || (e = navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))
                    ? parseInt(e[1], 10)
                    : null;
                })),
                (this.h = new wt(function () {
                  return /(?:iPhone|iPad|iPod)/.test(navigator.userAgent) || navigator.maxTouchPoints > 1
                    ? "xr" in navigator
                      ? "APPLE_VR"
                      : "MOBILE"
                    : "xr" in navigator
                      ? "APPLE_VR"
                      : "DESKTOP";
                })));
            }
            (q(pm, it),
              (h = pm.prototype),
              (h.Ba = function () {
                return this.g.value();
              }),
              (h.Nb = function () {
                return "Apple Browser";
              }),
              (h.Oa = function () {
                return this.h.value();
              }),
              (h.Ha = function () {
                return "WEBKIT";
              }),
              (h.hc = function () {
                return !1;
              }),
              (h.Fd = function (e, t) {
                return t === "audio";
              }),
              (h.jf = function () {
                return !0;
              }),
              (h.Ni = function (e) {
                return e === "audio";
              }),
              (h.Wa = function (e) {
                return (it.prototype.Wa.call(this, e), (e.abr.minTimeToSwitch = 0.5), e);
              }),
              (h.gj = function () {
                return !0;
              }),
              (h.Nf = function () {
                return !1;
              }),
              (navigator.vendor || "").includes("Apple") &&
                (/(?:iPhone|iPad|iPod)/.test(navigator.userAgent) ||
                  navigator.maxTouchPoints > 1 ||
                  (navigator.userAgentData &&
                    navigator.userAgentData.platform &&
                    navigator.userAgentData.platform.toLowerCase() == "macos") ||
                  (navigator.platform && navigator.platform.toLowerCase().includes("mac"))) &&
                (Yr = function () {
                  return new pm();
                }));
            function gm() {
              if (!hS()) throw Error("Not a Chromecast device!");
              (it.call(this),
                (this.h = new wt(function () {
                  var e = navigator.userAgent.match(/Chrome\/(\d+)/);
                  return e ? parseInt(e[1], 10) : null;
                })),
                (this.g = new wt(function () {
                  var e =
                    (navigator.userAgentData && navigator.userAgentData.platform) || navigator.userAgent;
                  return (
                    (e = e.toLowerCase()),
                    e.includes("android") ? pS : e.includes("fuchsia") ? gS : mm
                  );
                })));
            }
            (q(gm, it),
              (h = gm.prototype),
              (h.Ba = function () {
                return this.h.value();
              }),
              (h.Nb = function () {
                return "Chromecast with " + this.g.value();
              }),
              (h.Oa = function () {
                return "CAST";
              }),
              (h.Ha = function () {
                return "CHROMIUM";
              }),
              (h.hc = function () {
                return it.prototype.hc.call(this) && this.g.value() !== mm;
              }),
              (h.Ib = function () {
                return it.prototype.Ib.call(this) && this.g.value() !== mm;
              }),
              (h.Si = function () {
                switch (this.g.value()) {
                  case pS:
                    return 0;
                  case gS:
                    return 3;
                  default:
                    return 1;
                }
              }),
              (h.lc = function () {
                var e, t, n, r, i;
                return F(function (s) {
                  switch (s.g) {
                    case 1:
                      if (
                        ((e = g.cast && cast.__platform__ && cast.__platform__.canDisplayType),
                        (t = { width: 1280, height: 720 }),
                        te(s, 2),
                        !(n = e))
                      ) {
                        s.A(4);
                        break;
                      }
                      return E(
                        s,
                        cast.__platform__.canDisplayType(
                          'video/mp4; codecs="avc1.640028"; width=3840; height=2160',
                        ),
                        5,
                      );
                    case 5:
                      n = s.h;
                    case 4:
                      if (n) {
                        ((t.width = 3840), (t.height = 2160), s.A(6));
                        break;
                      }
                      if (!(r = e)) {
                        s.A(7);
                        break;
                      }
                      return E(
                        s,
                        cast.__platform__.canDisplayType(
                          'video/mp4; codecs="avc1.640028"; width=1920; height=1080',
                        ),
                        8,
                      );
                    case 8:
                      r = s.h;
                    case 7:
                      r && ((t.width = 1920), (t.height = 1080));
                    case 6:
                      pe(s, 3);
                      break;
                    case 2:
                      ((i = oe(s)), En("Failed to check canDisplayType:", i));
                    case 3:
                      return s.return(t);
                  }
                });
              }),
              (h.Wa = function (e) {
                return (it.prototype.Wa.call(this, e), (e.streaming.stallSkip = 0), e);
              }),
              (h.Ch = function () {
                return !1;
              }),
              (h.ed = function () {
                return !0;
              }));
            function hS() {
              return (
                navigator.userAgent.includes("CrKey") && !navigator.userAgent.includes("VIZIO SmartCast")
              );
            }
            var pS = "Android",
              gS = "Fuchsia",
              mm = "Linux";
            hS() &&
              (Yr = function () {
                return new gm();
              });
            function ym() {
              it.call(this);
              var e = this;
              ((this.i = new wt(function () {
                var t = navigator.userAgent.match(/(Chrome|Firefox)\/(\d+)/);
                return t ? parseInt(t[2], 10) : null;
              })),
                (this.g = new wt(function () {
                  return navigator.userAgent.match(/Edge?\//)
                    ? "Edge"
                    : navigator.userAgent.includes("Chrome")
                      ? "Chrome"
                      : navigator.userAgent.includes("Firefox")
                        ? "Firefox"
                        : "Unknown";
                })),
                (this.h = new wt(function () {
                  return navigator.userAgentData && navigator.userAgentData.platform
                    ? navigator.userAgentData.platform.toLowerCase() == "windows"
                    : navigator.platform
                      ? navigator.platform.toLowerCase().includes("win32")
                      : !1;
                })),
                (this.u = new wt(function () {
                  return it.prototype.Ib.call(e)
                    ? navigator.userAgent.match(/Edge?\//)
                      ? !e.h.value()
                      : !0
                    : !1;
                })),
                (this.o = new wt(function () {
                  return navigator.userAgent.includes("sony.hbbtv.tv");
                })),
                (this.m = new wt(function () {
                  return navigator.userAgentData && navigator.userAgentData.platform
                    ? navigator.userAgentData.platform.toLowerCase() == "android"
                    : !!navigator.userAgent.includes("Android");
                })));
            }
            (q(ym, it),
              (h = ym.prototype),
              (h.Ba = function () {
                return this.i.value();
              }),
              (h.Nb = function () {
                return this.g.value();
              }),
              (h.Fd = function (e) {
                return jh(e) ? this.g.value() === "Edge" && this.h.value() : !1;
              }),
              (h.ih = function () {
                return this.g.value() === "Edge" && this.h.value();
              }),
              (h.jf = function () {
                return this.g.value() === "Edge" && this.h.value();
              }),
              (h.Ib = function () {
                return this.u.value();
              }),
              (h.Wa = function (e) {
                if ((it.prototype.Wa.call(this, e), this.h.value()))
                  switch (this.g.value()) {
                    case "Firefox":
                      e.drm.keySystemsMapping = {
                        "com.microsoft.playready": "com.microsoft.playready.recommendation",
                      };
                      break;
                    case "Chrome":
                      e.drm.keySystemsMapping = {
                        "com.microsoft.playready": "com.microsoft.playready.recommendation.3000",
                        "com.microsoft.playready.recommendation":
                          "com.microsoft.playready.recommendation.3000",
                      };
                  }
                return (
                  this.m.value() &&
                    ((e.drm.defaultAudioRobustnessForWidevine = ""),
                    (e.drm.defaultVideoRobustnessForWidevine = "")),
                  e
                );
              }),
              (h.Ff = function () {
                return this.g.value() === "Edge" || this.o.value();
              }),
              (h.ed = function () {
                if (this.Ha() === "GECKO") {
                  var e = this.Ba();
                  return e !== null ? e >= 100 : it.prototype.ed.call(this);
                }
                return it.prototype.ed.call(this);
              }),
              (h.Vg = function (e) {
                return this.Ha() === "GECKO"
                  ? e.startsWith("com.microsoft.playready.recommendation")
                  : it.prototype.Vg.call(this, e);
              }),
              (Oh = function () {
                return new ym();
              }));
            function vm() {
              it.apply(this, arguments);
            }
            (q(vm, it),
              (h = vm.prototype),
              (h.Ba = function () {
                return null;
              }),
              (h.Nb = function () {
                return "Hisense";
              }),
              (h.Oa = function () {
                return "TV";
              }),
              (h.hc = function () {
                return !1;
              }),
              (h.lc = function () {
                var e = { width: 1920, height: 1080 },
                  t = null;
                if (g.Hisense_Get4KSupportState)
                  try {
                    t = g.Hisense_Get4KSupportState();
                  } catch (n) {}
                return (
                  t == null && (t = navigator.userAgent.includes("UHD")),
                  t && ((e.width = 3840), (e.height = 2160)),
                  Promise.resolve(e)
                );
              }),
              (h.Wa = function (e) {
                return (it.prototype.Wa.call(this, e), (e.streaming.stallSkip = 0), e);
              }),
              (navigator.userAgent.includes("Hisense") || navigator.userAgent.includes("VIDAA")) &&
                (Yr = function () {
                  return new vm();
                }));
            function xm() {
              (it.call(this),
                (this.g = new wt(function () {
                  var e = navigator.userAgent.match(/PlayStation (\d+)/);
                  return e ? parseInt(e[1], 10) : null;
                })));
            }
            (q(xm, it),
              (h = xm.prototype),
              (h.Nb = function () {
                return "PlayStation";
              }),
              (h.Oa = function () {
                return "CONSOLE";
              }),
              (h.Ha = function () {
                return "WEBKIT";
              }),
              (h.Ba = function () {
                return this.g.value();
              }),
              (h.hc = function () {
                return !1;
              }),
              (h.fd = function () {
                return !1;
              }),
              (h.Ib = function () {
                return !1;
              }),
              (h.xh = function () {
                return this.Ba() === 4;
              }),
              (h.lc = function () {
                var e, t, n, r, i;
                return F(function (s) {
                  switch (s.g) {
                    case 1:
                      return (
                        (e = { width: 1920, height: 1080 }),
                        (t = !1),
                        te(s, 2),
                        E(s, g.msdk.device.getDisplayInfo(), 4)
                      );
                    case 4:
                      ((n = s.h), (t = n.resolution === "4K"), pe(s, 3));
                      break;
                    case 2:
                      return (oe(s), te(s, 5), E(s, g.msdk.device.getDisplayInfoImmediate(), 7));
                    case 7:
                      ((r = s.h), (t = r.resolution === "4K"), pe(s, 3));
                      break;
                    case 5:
                      ((i = oe(s)), Be("PlayStation: Failed to get the display info:", i));
                    case 3:
                      return (t && ((e.width = 3840), (e.height = 2160)), s.return(e));
                  }
                });
              }),
              (h.Wa = function (e) {
                return (
                  it.prototype.Wa.call(this, e),
                  this.Ba() === 4 && e.drm.preferredKeySystems.push("com.microsoft.playready"),
                  (e.streaming.clearDecodingCache = !0),
                  e
                );
              }),
              (h.Ff = function () {
                return this.Ba() === 4;
              }),
              (h.Of = function () {
                return this.Ba() !== 4;
              }),
              navigator.userAgent.includes("PlayStation") &&
                (Yr = function () {
                  return new xm();
                }));
            function Tm() {
              it.call(this);
              var e = navigator.userAgent.match(/Tizen (\d+).(\d+)/);
              ((this.g = e ? parseInt(e[1], 10) : null), (this.h = e ? parseInt(e[2], 10) : null));
            }
            (q(Tm, it),
              (h = Tm.prototype),
              (h.Ba = function () {
                return this.g;
              }),
              (h.Nb = function () {
                return "Tizen";
              }),
              (h.Ha = function () {
                return "CHROMIUM";
              }),
              (h.Oa = function () {
                return "TV";
              }),
              (h.Fd = function () {
                return !0;
              }),
              (h.se = function () {
                return this.Ba() === 3;
              }),
              (h.hc = function () {
                return !1;
              }),
              (h.fd = function () {
                var e = this.Ba();
                return e !== null ? e >= 4 : it.prototype.fd.call(this);
              }),
              (h.Ib = function () {
                return !1;
              }),
              (h.we = function () {
                return this.g && this.h
                  ? this.g === 5
                    ? this.h >= 5
                    : this.g > 5
                  : it.prototype.we.call(this);
              }),
              (h.lc = function () {
                var e = g.devicePixelRatio;
                e = {
                  width: g.screen.width * e > 1920 ? 3840 : 1920,
                  height: g.screen.height * e > 1080 ? 2160 : 1080,
                };
                try {
                  if (webapis.systeminfo && webapis.systeminfo.getMaxVideoResolution) {
                    var t = webapis.systeminfo.getMaxVideoResolution();
                    ((e.width = t.width), (e.height = t.height));
                  } else
                    webapis.productinfo.is8KPanelSupported && webapis.productinfo.is8KPanelSupported()
                      ? ((e.width = 7680), (e.height = 4320))
                      : webapis.productinfo.isUdPanelSupported &&
                        webapis.productinfo.isUdPanelSupported() &&
                        ((e.width = 3840), (e.height = 2160));
                } catch (n) {
                  Be("Tizen: Error detecting screen size, default screen size 1920x1080.");
                }
                return Promise.resolve(e);
              }),
              (h.Wa = function (e) {
                return (
                  it.prototype.Wa.call(this, e),
                  (e.drm.ignoreDuplicateInitData = this.Ba() !== 2),
                  this.Ba() === 3 && (e.streaming.crossBoundaryStrategy = "reset_to_encrypted"),
                  (e.streaming.shouldFixTimestampOffset = !0),
                  (e.streaming.stallSkip = 0),
                  (e.streaming.gapPadding = 2),
                  e
                );
              }),
              (h.Li = function () {
                var e = [];
                return (this.g !== null && this.g < 5 && e.push("opus"), e);
              }),
              (h.sd = function (e) {
                try {
                  if (webapis.avinfo.isHdrTvSupport()) return e ? "HLG" : "PQ";
                } catch (t) {
                  return it.prototype.sd.call(this, e);
                }
                return "SDR";
              }),
              (h.Bi = function () {
                return !0;
              }),
              (h.Ci = function () {
                return this.Ba() === 3;
              }),
              navigator.userAgent.includes("Tizen") &&
                (Yr = function () {
                  return new Tm();
                }));
            function ra() {
              it.apply(this, arguments);
            }
            (q(ra, it),
              (ra.prototype.Ba = function () {
                return null;
              }),
              (ra.prototype.Nb = function () {
                return "Vizio";
              }),
              (ra.prototype.Oa = function () {
                return "TV";
              }),
              (ra.prototype.hc = function () {
                return !1;
              }),
              navigator.userAgent.includes("VIZIO SmartCast") &&
                (Yr = function () {
                  return new ra();
                }));
            function wm() {
              (it.call(this),
                (this.i = new wt(function () {
                  return (
                    navigator.userAgent.includes("DT_STB_BCM") || navigator.userAgent.includes("Sky_STB")
                  );
                })),
                (this.h = new wt(function () {
                  return navigator.userAgent.includes("SOPOpenBrowser");
                })),
                (this.g = new wt(function () {
                  if (navigator.userAgent.includes("DT_STB_BCM")) return 11;
                  var e = navigator.userAgent.match(/Version\/(\d+)/);
                  return e || (e = navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))
                    ? parseInt(e[1], 10)
                    : null;
                })));
            }
            (q(wm, it),
              (h = wm.prototype),
              (h.Ba = function () {
                return this.g.value();
              }),
              (h.Nb = function () {
                return "WebKit STB";
              }),
              (h.Oa = function () {
                return "TV";
              }),
              (h.Ha = function () {
                return "WEBKIT";
              }),
              (h.hc = function () {
                return !1;
              }),
              (h.fd = function () {
                var e = this.g.value();
                return e !== null ? e >= 15 : !0;
              }),
              (h.Fd = function () {
                return this.h.value();
              }),
              (h.lc = function () {
                return Promise.resolve({
                  width: g.screen.width * g.devicePixelRatio,
                  height: g.screen.height * g.devicePixelRatio,
                });
              }),
              (h.Of = function () {
                return !this.i.value();
              }),
              (h.Nf = function () {
                return !1;
              }),
              (navigator.userAgent.includes("SOPOpenBrowser") ||
                navigator.userAgent.includes("DT_STB_BCM") ||
                navigator.userAgent.includes("Sky_STB") ||
                !(
                  !(navigator.vendor || "").includes("Apple") ||
                  /(?:iPhone|iPad|iPod)/.test(navigator.userAgent) ||
                  navigator.maxTouchPoints > 1 ||
                  (navigator.userAgentData &&
                    navigator.userAgentData.platform &&
                    navigator.userAgentData.platform.toLowerCase() == "macos") ||
                  (navigator.platform && navigator.platform.toLowerCase().includes("mac"))
                )) &&
                (Yr = function () {
                  return new wm();
                }));
            function Sm() {
              it.call(this);
              var e = this;
              ((this.h = t4()), (this.g = null));
              try {
                var t = new PalmServiceBridge();
                ((t.onservicecallback = function (n) {
                  ((n = JSON.parse(n)),
                    (e.g =
                      n.configs["tv.model.supportHDR"] ||
                      n.configs["tv.config.supportDolbyHDRContents"] ||
                      !1));
                }),
                  t.call(
                    "luna://com.webos.service.config/getConfigs",
                    JSON.stringify({
                      configNames: ["tv.model.supportHDR", "tv.config.supportDolbyHDRContents"],
                    }),
                  ));
              } catch (n) {
                Be("WebOS: getConfigs call failed", n);
              }
            }
            (q(Sm, it),
              (h = Sm.prototype),
              (h.Ba = function () {
                return this.h;
              }),
              (h.Nb = function () {
                return "WebOS";
              }),
              (h.Oa = function () {
                return "TV";
              }),
              (h.Ha = function () {
                return "CHROMIUM";
              }),
              (h.hc = function () {
                return !1;
              }),
              (h.fd = function () {
                var e = this.Ba();
                return e !== null ? e > 3 : it.prototype.fd.call(this);
              }),
              (h.Ib = function () {
                return !1;
              }),
              (h.we = function () {
                var e = this.Ba();
                return e !== null ? e > 3 : it.prototype.we.call(this);
              }),
              (h.lc = function () {
                var e = { width: 1920, height: 1080 };
                try {
                  var t = JSON.parse(g.PalmSystem.deviceInfo);
                  ((e.width = Math.max(1920, t.screenWidth)), (e.height = Math.max(1080, t.screenHeight)));
                } catch (n) {
                  Be("WebOS: Error detecting screen size, default screen size 1920x1080.");
                }
                return Promise.resolve(e);
              }),
              (h.Wa = function (e) {
                return (
                  it.prototype.Wa.call(this, e),
                  this.Ba() === 3 && (e.streaming.crossBoundaryStrategy = "reset"),
                  (e.streaming.shouldFixTimestampOffset = !0),
                  (e.streaming.stallSkip = 0),
                  e
                );
              }),
              (h.sd = function (e) {
                return this.g == null
                  ? (Be("WebOS: getConfigs call haven't finished"), it.prototype.sd.call(this, e))
                  : this.g
                    ? e
                      ? "HLG"
                      : "PQ"
                    : "SDR";
              }));
            function t4() {
              var e = null,
                t = navigator.userAgent.match(/Chrome\/(\d+)/);
              switch ((t && (e = parseInt(t[1], 10)), e)) {
                case 38:
                  return 3;
                case 53:
                  return 4;
                case 68:
                  return 5;
                case 79:
                  return 6;
                case 87:
                  return 22;
                case 94:
                  return 23;
                case 108:
                  return 24;
                case 120:
                  return 25;
                default:
                  return null;
              }
            }
            if (
              ((h.fj = function () {
                return !1;
              }),
              (h.ed = function () {
                var e = this.Ba();
                return e !== null ? e >= 6 : it.prototype.ed.call(this);
              }),
              navigator.userAgent.includes("Web0S"))
            ) {
              var n4 = new Sm();
              Yr = function () {
                return n4;
              };
            }
            function Am() {
              (it.call(this), (this.g = navigator.userAgent.includes("Edge/")));
              var e = navigator.userAgent.match(/Edge?\/(\d+)/);
              this.h = e ? parseInt(e[1], 10) : null;
            }
            (q(Am, it),
              (h = Am.prototype),
              (h.Ba = function () {
                return this.h;
              }),
              (h.Nb = function () {
                return "Xbox";
              }),
              (h.Oa = function () {
                return "CONSOLE";
              }),
              (h.Ha = function () {
                return this.g ? "EDGE" : "CHROMIUM";
              }),
              (h.Fd = function () {
                return !0;
              }),
              (h.ih = function () {
                return !0;
              }),
              (h.jf = function () {
                return !0;
              }),
              (h.$i = function () {
                return this.g;
              }),
              (h.lc = function () {
                var e = { width: 1920, height: 1080 },
                  t = mS();
                if (t)
                  try {
                    var n = new t.Media.Protection.ProtectionCapabilities(),
                      r = t.Media.Protection.ProtectionCapabilityResult;
                    t = null;
                    do
                      t = n.isTypeSupported(
                        'video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',
                        "com.microsoft.playready.recommendation",
                      );
                    while (t === r.maybe);
                    t === r.probably && ((e.width = 3840), (e.height = 2160));
                  } catch (i) {
                    Be("Xbox: Error detecting screen size, default screen size 1920x1080.");
                  }
                return Promise.resolve(e);
              }),
              (h.Wa = function (e) {
                return (
                  it.prototype.Wa.call(this, e),
                  (e.drm.parseInbandPsshEnabled = this.g),
                  e.drm.preferredKeySystems.push("com.microsoft.playready"),
                  this.g && (e.streaming.gapPadding = 0.01),
                  e
                );
              }),
              (h.Ff = function () {
                return !0;
              }),
              (h.Ch = function () {
                return !1;
              }));
            function mS() {
              var e = null;
              try {
                e = typeof Windows < "u" ? Windows : chrome.webview.hostObjects.sync.Windows;
              } catch (t) {}
              return e;
            }
            (navigator.userAgent.includes("Xbox One") || mS() !== null) &&
              (Yr = function () {
                return new Am();
              });
            function yS(e, t, n) {
              ((this.type = e), (this.ha = t), (this.segments = n || null));
            }
            function Yd(e, t, n, r) {
              ((this.id = e), (this.name = t), (this.attributes = n), (this.value = r === void 0 ? null : r));
            }
            Yd.prototype.toString = function (e) {
              function t(i) {
                return i.name + "=" + (isNaN(Number(i.value)) ? '"' + i.value + '"' : i.value);
              }
              var n = "#" + this.name,
                r = this.attributes
                  ? this.attributes
                      .filter(function (i) {
                        return e ? !e.has(i.name) : !0;
                      })
                      .map(t)
                  : [];
              return (this.value && r.unshift(this.value), r.length > 0 && (n += ":" + r.join(",")), n);
            };
            function Em(e, t) {
              return t
                ? e.toString()
                : ((t = new Set()
                    .add("AUDIO")
                    .add("VIDEO")
                    .add("SUBTITLES")
                    .add("PATHWAY-ID")
                    .add("GROUP-ID")
                    .add("URI")),
                  e.toString(t));
            }
            function ia(e, t) {
              return (
                e.attributes.find(function (n) {
                  return n.name === t;
                }) || null
              );
            }
            function Ee(e, t, n) {
              return (e = ia(e, t)) ? e.value : n || null;
            }
            function dt(e, t) {
              if (((e = ia(e, t)), !e)) throw new H(2, 4, 4023, t);
              return e.value;
            }
            function vS(e, t, n) {
              ((n = n === void 0 ? [] : n), (this.ha = t), (this.g = e), (this.wc = n));
            }
            function qd(e, t) {
              ((this.name = e), (this.value = t));
            }
            function kr(e, t) {
              return e.filter(function (n) {
                return n.name == t;
              });
            }
            function xS(e, t) {
              return e.filter(function (n) {
                return dt(n, "TYPE") == t;
              });
            }
            function qt(e, t) {
              e = x(e);
              for (var n = e.next(); !n.done; n = e.next()) if (((n = n.value), n.name === t)) return n;
              return null;
            }
            function sa(e, t, n) {
              return ((n = n === void 0 ? 0 : n), (e = qt(e, t)) ? Number(e.value) : n);
            }
            function ms(e, t, n) {
              return t ? TS(e, [t], n) : [];
            }
            function TS(e, t, n) {
              if (!t.length) return [];
              var r = t;
              return (
                n &&
                  n.size &&
                  (r = t.map(function (i) {
                    return wS(i, n);
                  })),
                Yt(e, r)
              );
            }
            function wS(e, t) {
              if (!t || !t.size) return e;
              e = String(e).replace(/%7B/g, "{").replace(/%7D/g, "}");
              var n = e.match(/{\$\w*}/g);
              if (n) {
                n = x(n);
                for (var r = n.next(); !r.done; r = n.next()) {
                  r = r.value;
                  var i = r.slice(2, r.length - 1),
                    s = t.get(i);
                  if (s) e = e.replace(r, s);
                  else throw new H(2, 4, 4039, i);
                }
              }
              return e;
            }
            function r4() {
              this.g = 0;
            }
            function Im(e, t) {
              ((t = At(t)), (t = t.replace(/\r\n|\r(?=[^\n]|$)/gm, "\n").trim()));
              var n = t.split(/\n+/m);
              if (!s4.test(n[0])) throw new H(2, 4, 4015);
              t = 0;
              for (var r = !1, i = [], s = !0, o = 0; o < n.length; o++) {
                var u = n[o],
                  l = n[o + 1];
                if ((u.startsWith("#") && !u.startsWith("#EXT")) || s) s = !1;
                else {
                  if (
                    ((u = SS(e, u)),
                    r ||
                      (ES.has(u.name)
                        ? ((t = 1), (r = !0))
                        : u.name == "EXT-X-STREAM-INF" || u.name == "EXT-X-MEDIA"
                          ? (r = !0)
                          : IS.has(u.name) && ((t = 1), (r = !0))),
                    IS.has(u.name))
                  ) {
                    if (t != 1) throw new H(2, 4, 4017);
                    ((s = e), (e = Array(Math.max(100, Math.floor((n.length - o) / 2)))), (r = 0), (u = []));
                    var p = [];
                    for (l = null; o < n.length; o++) {
                      var m = n[o];
                      m.startsWith("#EXT")
                        ? ((m = SS(s, m)),
                          ES.has(m.name)
                            ? i.push(m)
                            : m.name == "EXT-X-MAP"
                              ? (l = m)
                              : m.name == "EXT-X-PART"
                                ? p.push(m)
                                : m.name == "EXT-X-PRELOAD-HINT"
                                  ? Ee(m, "TYPE") == "PART"
                                    ? p.push(m)
                                    : Ee(m, "TYPE") == "MAP" && ((m.name = "EXT-X-MAP"), (l = m))
                                  : u.push(m))
                        : (!m.startsWith("#") || m.startsWith("#EXT")) &&
                          ((m = m.trim()),
                          l && u.push(l),
                          (u = new vS(m, u, p)),
                          r < e.length ? (e[r++] = u) : (e.push(u), r++),
                          (u = []),
                          (p = []));
                    }
                    return (
                      p.length &&
                        (l && u.push(l),
                        (n = new vS("", u, p)),
                        r < e.length ? (e[r++] = n) : (e.push(n), r++)),
                      new yS(t, i, r < e.length ? e.slice(0, r) : e)
                    );
                  }
                  (i.push(u),
                    u.name == "EXT-X-STREAM-INF" && (u.attributes.push(new qd("URI", l)), (s = !0)));
                }
              }
              return new yS(t, i);
            }
            function SS(e, t) {
              e = e.g++;
              var n = t.match(i4);
              if (!n) throw new H(2, 4, 4016, t);
              t = n[1];
              var r = n[2];
              n = [];
              var i;
              if (r) {
                r = new go(r);
                var s;
                for (AS.lastIndex = 0, (s = Yi(r, AS)) && (i = s[1]), Cm.lastIndex = 0, s = Yi(r, Cm); s; )
                  (n.push(new qd(s[1], s[2] || s[3])), mo(r), (s = Yi(r, Cm)));
              }
              return new Yd(e, t, n, i);
            }
            var i4 = /^#(EXT[^:]*)(?::(.*))?$/,
              s4 = /^#EXTM3U($|[ \t\n])/m,
              AS = /^([^,=]+)(?:,|$)/g,
              Cm = /([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g,
              ES = new Set(
                "EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(
                  " ",
                ),
              ),
              IS = new Set(
                "EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(
                  " ",
                ),
              );
            function CS() {}
            function MS(e, t) {
              try {
                var n = Jd(e);
                return Ao({
                  uri: e,
                  originalUri: e,
                  data: n.data,
                  headers: { "content-type": n.contentType },
                  originalRequest: t,
                });
              } catch (r) {
                return ts(r);
              }
            }
            function Jd(e) {
              var t = e.split(":");
              if (t.length < 2 || t[0] != "data") throw new H(2, 1, 1004, e);
              if (((t = t.slice(1).join(":").split(",")), t.length < 2)) throw new H(2, 1, 1004, e);
              var n = t[0];
              ((e = g.decodeURIComponent(t.slice(1).join(","))), (t = n.split(";")), (n = t[0]));
              var r = !1;
              t.length > 1 && t[t.length - 1] == "base64" && ((r = !0), t.pop());
              var i;
              return (r ? (i = Sr(e)) : (i = Ur(e)), { data: i, contentType: n, Ih: t });
            }
            (de("shaka.net.DataUriPlugin", CS), (CS.parse = MS), Ei("data", MS));
            function Qd() {
              var e = this;
              ((this.g = this.h = null),
                (this.G = 1),
                (this.B = new Map()),
                (this.M = new Map()),
                (this.C = new Map()),
                this.C.set("video", new Map()),
                this.C.set("audio", new Map()),
                this.C.set(Ve, new Map()),
                this.C.set("image", new Map()),
                (this.dc = new Map()
                  .set("com.apple.streamingkeydelivery", function (t, n, r) {
                    return L4(e, t, n, r);
                  })
                  .set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed", function (t) {
                    var n = dt(t, "METHOD");
                    if (["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(n)) {
                      var r = "cenc";
                      n == "SAMPLE-AES" && (r = "cbcs");
                      var i = dt(t, "URI");
                      if (((n = Jd(i.split("?")[0])), (i = i.split("?")[0]), !e.I.has(i))) {
                        var s = Le(n.data);
                        e.I.set(i, s);
                      }
                      ((r = yi(
                        "com.widevine.alpha",
                        r,
                        [{ initDataType: "cenc", initData: e.I.get(i) }],
                        void 0,
                        n.Ih,
                      )),
                        (t = Ee(t, "KEYID")) && r.keyIds.add(t.toLowerCase().substr(2)),
                        (t = Promise.resolve(r)));
                    } else t = Promise.resolve(null);
                    return t;
                  })
                  .set("com.microsoft.playready", function (t) {
                    var n = dt(t, "METHOD");
                    if (["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(n)) {
                      var r = "cenc";
                      (n == "SAMPLE-AES" && (r = "cbcs"),
                        (t = dt(t, "URI")),
                        (n = Jd(t.split("?")[0])),
                        (t = Le(n.data)));
                      var i = new Uint8Array([
                        154, 4, 240, 121, 152, 64, 66, 134, 171, 146, 230, 91, 224, 136, 95, 149,
                      ]);
                      ((i = kc(t, i, new Set(), 0)),
                        (r = yi(
                          "com.microsoft.playready",
                          r,
                          [{ initDataType: "cenc", initData: i }],
                          void 0,
                          n.Ih,
                        )),
                        (t = Ls(["<PLAYREADY>", gi(t), "</PLAYREADY>"].join("\n"))) &&
                          (r.licenseServerUri = Vd(t)),
                        (r = Promise.resolve(r)));
                    } else r = Promise.resolve(null);
                    return r;
                  })
                  .set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c", function (t) {
                    var n = dt(t, "METHOD");
                    if (["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(n)) {
                      var r = "cenc";
                      n == "SAMPLE-AES" && (r = "cbcs");
                      var i = dt(t, "URI");
                      if (((n = Jd(i.split("?")[0])), (i = i.split("?")[0]), !e.I.has(i))) {
                        var s = Le(n.data);
                        e.I.set(i, s);
                      }
                      ((r = yi(
                        "com.huawei.wiseplay",
                        r,
                        [{ initDataType: "cenc", initData: e.I.get(i) }],
                        void 0,
                        n.Ih,
                      )),
                        (t = Ee(t, "KEYID")) && r.keyIds.add(t.toLowerCase().substr(2)),
                        (t = Promise.resolve(r)));
                    } else t = Promise.resolve(null);
                    return t;
                  })),
                (this.ob = new Set()),
                (this.i = new Map()),
                (this.l = null),
                (this.H = ""),
                (this.ab = new r4()),
                (this.N = -1),
                (this.ma = 1 / 0),
                (this.ba = this.zc = this.kb = !1),
                (this.F = new He(function () {
                  if (e.X && !e.g.continueLoadingWhenPaused && (e.V.Ma(e.X, "timeupdate"), e.X.paused)) {
                    e.V.Aa(e.X, "timeupdate", function () {
                      return $S(e);
                    });
                    return;
                  }
                  $S(e);
                })),
                (this.Fa = of),
                (this.m = null),
                (this.eb = 0),
                (this.o = 1 / 0),
                (this.Ua = this.Ta = this.T = 0),
                (this.$ = new Eo()),
                (this.J = new Map()),
                (this.K = new Map()),
                (this.Da = new Map()),
                (this.va = new Map()),
                (this.O = new Map()),
                (this.ya = new Map()),
                (this.za = new Map()),
                (this.yc = this.oa = !1),
                (this.ac = new $r(5)),
                (this.j = null),
                (this.R = !0),
                (this.V = new tt()),
                (this.u = this.X = null),
                (this.cc = function () {
                  return !1;
                }),
                (this.I = new Map()));
            }
            ((h = Qd.prototype),
              (h.configure = function (e, t) {
                var n = this.h && e.updatePeriod != this.g.updatePeriod && e.updatePeriod >= 0;
                ((this.g = e),
                  t && (this.cc = t),
                  this.j && this.j.configure(this.g),
                  n && this.m && this.m.presentationTimeline.W() && this.F.Jb());
              }),
              (h.start = function (e, t) {
                var n = this,
                  r;
                return F(function (i) {
                  return i.g == 1
                    ? ((n.h = t), (n.oa = t.isLowLatencyMode()), E(i, Lm(n, [e]).promise, 2))
                    : i.g != 3
                      ? ((r = i.h), (n.H = r.uri), E(i, u4(n, r.data), 3))
                      : i.return(n.m);
                });
              }),
              (h.stop = function () {
                this.F && (this.F.stop(), (this.F = null));
                var e = [];
                return (
                  this.$ && (e.push(this.$.destroy()), (this.$ = null)),
                  (this.g = this.h = null),
                  this.ob.clear(),
                  (this.m = null),
                  this.i.clear(),
                  this.M.clear(),
                  this.K.clear(),
                  this.B.clear(),
                  this.Da.clear(),
                  this.va.clear(),
                  this.O.clear(),
                  this.ya.clear(),
                  this.za.clear(),
                  this.I.clear(),
                  this.j && this.j.destroy(),
                  this.V && (this.V.release(), (this.V = null)),
                  Promise.all(e)
                );
              }),
              (h.update = function () {
                var e = this,
                  t,
                  n,
                  r,
                  i,
                  s,
                  o,
                  u,
                  l,
                  p,
                  m;
                return F(function (y) {
                  if (y.g == 1) {
                    if (!Mn(e)) return y.return();
                    for (
                      t = [],
                        n = Array.from(e.i.values()),
                        e.o = 1 / 0,
                        e.m.gapCount = 0,
                        r = n.filter(function (v) {
                          return !v.stream.isAudioMuxedInVideo && v.stream.segmentIndex;
                        }),
                        i = x(r),
                        s = i.next();
                      !s.done;
                      s = i.next()
                    )
                      ((o = s.value), t.push(o4(e, o)));
                    return E(y, Promise.all(t), 2);
                  }
                  for (
                    NS(
                      e,
                      r.map(function (v) {
                        return v.stream;
                      }),
                    ),
                      u = r.some(function (v) {
                        return v.be == 0;
                      }),
                      r.length && !u && (nf(e, of), Zd(e)),
                      u && Zd(e),
                      l = x(r),
                      p = l.next();
                    !p.done;
                    p = l.next()
                  )
                    ((m = p.value),
                      m.stream.isAudioMuxedInVideo ||
                        !m.stream.segmentIndex ||
                        Qr(m.stream.segmentIndex) ||
                        e.h.disableStream(m.stream));
                  re(y);
                });
              }));
            function Mm(e, t) {
              return Mn(e) ? e.C.get(t.type) : t.rf;
            }
            function o4(e, t) {
              var n,
                r,
                i,
                s,
                o,
                u,
                l,
                p,
                m,
                y,
                v,
                w,
                A,
                I,
                C,
                k,
                R,
                L,
                U,
                G,
                b,
                B,
                O,
                z,
                j,
                X,
                W,
                ie,
                ne,
                $,
                Q,
                ae,
                ce,
                Ne,
                we,
                et;
              return F(function (Ue) {
                switch (Ue.g) {
                  case 1:
                    if (t.stream.isAudioMuxedInVideo) return Ue.return();
                    for (n = [], r = x(t.P()), i = r.next(); !i.done; i = r.next())
                      ((s = i.value),
                        (o = new Dt(s)),
                        (u = o.g),
                        t.Ue &&
                          (t.Qb >= 0 && u.add("_HLS_msn", String(t.Qb)),
                          t.Rb >= 0 && u.add("_HLS_part", String(t.Rb))),
                        t.Ve && u.add("_HLS_skip", "YES"),
                        Xv(u) && Cs(o, uo(u.toString())),
                        n.push(o.toString()));
                    return (te(Ue, 2), E(Ue, Lm(e, n, !0).promise, 4));
                  case 4:
                    ((l = Ue.h), pe(Ue, 3));
                    break;
                  case 2:
                    throw ((p = oe(Ue)), e.h && e.h.disableStream(t.stream), p);
                  case 3:
                    if (!t.stream.segmentIndex) return Ue.return();
                    if (((m = Im(e.ab, l.data)), m.type != 1)) throw new H(2, 4, 4017);
                    return (
                      (y = l.uri),
                      y == l.originalUri || t.P().includes(y) || t.Df.push(y),
                      (v = kr(m.ha, "EXT-X-DEFINE")),
                      (w = Rm(e, v, y)),
                      (A = t.stream),
                      (I = Mm(e, t)),
                      E(Ue, BS(e, m, A.mimeType, t.P, w), 5)
                    );
                  case 5:
                    for (
                      C = Ue.h,
                        k = C.keyIds,
                        R = C.drmInfos,
                        L = C.encrypted,
                        U = C.Qh,
                        A.encrypted || !L || U || (A.encrypted = !0),
                        G = function (ot, We) {
                          return (
                            ot.size === We.size &&
                            [].concat(Y(ot)).every(function (Ge) {
                              return We.has(Ge);
                            })
                          );
                        },
                        G(A.keyIds, k) || ((A.keyIds = k), (A.drmInfos = R), e.h.newDrmInfo(A)),
                        b = XS(e, m, I, w, t.P, t.type),
                        B = b.segments,
                        (O = b.bandwidth) && (A.bandwidth = O),
                        z = Xc(A),
                        j = x(B),
                        X = j.next();
                      !X.done;
                      X = j.next()
                    )
                      ((W = X.value), W.ea && (W.ea.xd = z));
                    (A.segmentIndex.ke(B, e.l.Hb()),
                      B.length &&
                        ((ie = sa(m.ha, "EXT-X-MEDIA-SEQUENCE", 0)),
                        ($ = (ne = qt(m.ha, "EXT-X-SKIP")) ? Number(Ee(ne, "SKIPPED-SEGMENTS")) : 0),
                        (Q = US(ie, B)),
                        (ae = Q.Qb),
                        (ce = Q.Rb),
                        (t.Qb = ae + $),
                        (t.Rb = ce),
                        (Ne = I.get(ie)),
                        A.segmentIndex.Ya(Ne)),
                      (we = Qr(A.segmentIndex)) &&
                        ((t.Wc = we.startTime), (et = B[B.length - 1]), (t.Mc = et.endTime)),
                      qt(m.ha, "EXT-X-ENDLIST") && (t.be = !0),
                      _m(e, m),
                      Pm(e, m.ha, A.type, w, t.P),
                      re(Ue));
                }
              });
            }
            ((h.onExpirationUpdated = function () {}),
              (h.onInitialVariantChosen = function () {}),
              (h.banLocation = function (e) {
                this.j && this.j.banLocation(e);
              }),
              (h.setMediaElement = function (e) {
                this.X = e;
              }));
            function RS(e, t, n) {
              n = n === void 0 ? !1 : n;
              for (var r = e.N == -1, i = x(t), s = i.next(); !s.done; s = i.next()) {
                s = s.value;
                var o = s.stream.segmentIndex,
                  u = Mm(e, s);
                if ((o = Qr(o))) {
                  u = x(u);
                  for (var l = u.next(); !l.done; l = u.next()) {
                    l = x(l.value);
                    var p = l.next().value;
                    if (l.next().value == o.startTime) {
                      (r && (e.N = Math.max(e.N, p)), (s.sg = p));
                      break;
                    }
                  }
                }
              }
              if (!(e.N < 0))
                for (t = x(t), r = t.next(); !r.done; r = t.next())
                  ((r = r.value),
                    (Zu(e, r.type) || n) &&
                      (i = r.stream.segmentIndex) &&
                      ((s = e.N - r.sg),
                      s > 0 &&
                        (i.g.splice(0, s), (i = Qr(i))) &&
                        ((i = -i.startTime), r.stream.segmentIndex.offset(i), kS(e, r, i))));
            }
            function a4(e, t) {
              if (e.ma == 1 / 0) {
                t = x(t);
                for (var n = t.next(); !n.done; n = t.next())
                  ((n = Qr(n.value.stream.segmentIndex)),
                    n != null && n.h != null && (e.ma = Math.min(e.ma, n.h)));
              }
              if (((t = e.ma), t != 1 / 0)) {
                n = x(e.i.values());
                for (var r = n.next(); !r.done; r = n.next())
                  if (((r = r.value), !Zu(e, r.type))) {
                    var i = r.stream.segmentIndex;
                    if (i != null) {
                      var s = Qr(i);
                      if (s)
                        if (s.h == null)
                          En("Missing EXT-X-PROGRAM-DATE-TIME for stream", r.P(), "Expect AV sync issues!");
                        else
                          for (kS(e, r, s.h - t - s.startTime), r = x(i), i = r.next(); !i.done; i = r.next())
                            i.value.Dh(t);
                    }
                  }
              }
            }
            function kS(e, t, n) {
              if (!(Math.abs(n) < 0.001)) {
                ((t.Wc += n), (t.Mc += n), (e = Mm(e, t)));
                for (var r = x(e), i = r.next(); !i.done; i = r.next()) {
                  var s = x(i.value);
                  ((i = s.next().value), (s = s.next().value), e.set(i, s + n));
                }
                t.P();
              }
            }
            function u4(e, t) {
              var n,
                r,
                i,
                s,
                o,
                u,
                l,
                p,
                m,
                y,
                v,
                w,
                A,
                I,
                C,
                k,
                R,
                L,
                U,
                G,
                b,
                B,
                O,
                z,
                j,
                X,
                W,
                ie,
                ne,
                $,
                Q,
                ae,
                ce,
                Ne,
                we,
                et,
                Ue,
                ot,
                We,
                Ge,
                Ye,
                Ze,
                qe;
              return F(function (ze) {
                switch (ze.g) {
                  case 1:
                    return (
                      (n = Ot),
                      (r = Im(e.ab, t)),
                      (i = kr(r.ha, "EXT-X-DEFINE")),
                      (s = []),
                      (o = []),
                      (u = []),
                      (e.l = new De(null, 0)),
                      e.l.cd(!0),
                      (l = function () {
                        return [e.H];
                      }),
                      (p = null),
                      (m = new Map()),
                      r.type == 1
                        ? ((e.R = !1),
                          (ae = kr(r.ha, "EXT-X-DEFINE")),
                          (m = Rm(e, ae, e.H)),
                          (p = n.wa),
                          (ce = ""),
                          (Ne = new Map()),
                          E(
                            ze,
                            OS(
                              e,
                              e.G++,
                              m,
                              r,
                              l,
                              "",
                              p,
                              ce,
                              !0,
                              "Media Playlist",
                              null,
                              Ne,
                              null,
                              !1,
                              null,
                              !1,
                            ),
                            7,
                          ))
                        : (c4(e, i),
                          (y = kr(r.ha, "EXT-X-MEDIA")),
                          (v = kr(r.ha, "EXT-X-STREAM-INF")),
                          (w = kr(r.ha, "EXT-X-IMAGE-STREAM-INF")),
                          (A = kr(r.ha, "EXT-X-I-FRAME-STREAM-INF")),
                          (I = kr(r.ha, "EXT-X-SESSION-KEY")),
                          (C = kr(r.ha, "EXT-X-SESSION-DATA")),
                          (k = kr(r.ha, "EXT-X-CONTENT-STEERING")),
                          f4(e, C),
                          E(ze, h4(e, k), 4))
                    );
                  case 4:
                    if (!e.g.ignoreSupplementalCodecs) {
                      for (R = [], L = x(v), U = L.next(), G = {}; !U.done; G = { dj: void 0 }, U = L.next())
                        ((b = U.value),
                          (B = Ee(b, "SUPPLEMENTAL-CODECS")) &&
                            ((G.dj = B.split(/\s*,\s*/).map(function (Ke) {
                              return Ke.split("/")[0];
                            })),
                            (O = b.attributes.map(
                              (function (Ke) {
                                return function ($t) {
                                  var Ht = $t.name,
                                    xr = $t.value;
                                  return (
                                    Ht == "CODECS" &&
                                      ((xr = Ke.dj.join(",")),
                                      ($t = $t.value.split(",")),
                                      $t.length > 1 && ($t = jn("audio", $t)) && (xr += "," + $t)),
                                    new qd(Ht, xr)
                                  );
                                };
                              })(G),
                            )),
                            R.push(new Yd(b.id, b.name, O, null))));
                      for (
                        v.push.apply(v, Y(R)), z = [], j = x(A), X = j.next(), W = {};
                        !X.done;
                        W = { ej: void 0 }, X = j.next()
                      )
                        ((ie = X.value),
                          (ne = Ee(ie, "SUPPLEMENTAL-CODECS")) &&
                            ((W.ej = ne.split(/\s*,\s*/).map(function (Ke) {
                              return Ke.split("/")[0];
                            })),
                            ($ = ie.attributes.map(
                              (function (Ke) {
                                return function ($t) {
                                  var Ht = $t.name;
                                  return (
                                    ($t = $t.value),
                                    Ht == "CODECS" && ($t = Ke.ej.join(",")),
                                    new qd(Ht, $t)
                                  );
                                };
                              })(W),
                            )),
                            z.push(new Yd(ie.id, ie.name, $, null))));
                      A.push.apply(A, Y(z));
                    }
                    return (d4(e, v), I4(e, y), (Q = y4(e, A)), E(ze, v4(e, v, I, y, l, e.B, Q), 5));
                  case 5:
                    return ((s = ze.h), (o = p4(e, y)), E(ze, g4(e, w, A), 6));
                  case 6:
                    ((u = ze.h), ze.A(3));
                    break;
                  case 7:
                    ((we = ze.h),
                      e.i.set(e.H, we),
                      we.stream &&
                        ((et = Xc(we.stream)),
                        we.stream.segmentIndex.Fb(function (Ke) {
                          Ke.ea && (Ke.ea.xd = et);
                        })),
                      (p = we.stream.type),
                      (Ue = !0),
                      ((e.g.disableAudio && we.type == "audio") ||
                        (e.g.disableVideo && we.type == "video" && !we.stream.codecs.includes(","))) &&
                        (Ue = !1),
                      Ue &&
                        s.push({
                          id: 0,
                          language: nt(ce || "und"),
                          disabledUntilTime: 0,
                          primary: !0,
                          audio: we.type == "audio" ? we.stream : null,
                          video: we.type == "video" ? we.stream : null,
                          bandwidth: we.stream.bandwidth || 0,
                          allowedByApplication: !0,
                          allowedByKeySystem: !0,
                          decodingInfos: [],
                        }));
                  case 3:
                    if (!e.h) throw new H(2, 7, 7001);
                    if (
                      (VS(e, r),
                      r.type == 1 &&
                        (Mn(e) && (HS(e, r), (ot = e.o), e.F.ka(ot)),
                        (We = Array.from(e.i.values())),
                        km(e, We),
                        Zd(e),
                        Pm(e, r.ha, p, m, l)),
                      (e.m = {
                        presentationTimeline: e.l,
                        variants: s,
                        textStreams: o,
                        imageStreams: u,
                        offlineSessionIds: [],
                        sequenceMode: e.g.hls.sequenceMode,
                        ignoreManifestTimestampsInSegmentsMode:
                          e.g.hls.ignoreManifestTimestampsInSegmentsMode,
                        type: "HLS",
                        serviceDescription: null,
                        nextUrl: null,
                        periodCount: 1,
                        gapCount: 0,
                        isLowLatency: !1,
                        startTime: e.u,
                      }),
                      e.ba || !e.g.hls.disableCodecGuessing)
                    ) {
                      ze.A(8);
                      break;
                    }
                    for (Ge = [], Ye = x(e.m.variants), Ze = Ye.next(); !Ze.done; Ze = Ye.next())
                      ((qe = Ze.value),
                        qe.audio && qe.audio.codecs === "" && Ge.push(qe.audio.createSegmentIndex()),
                        qe.video && qe.video.codecs === "" && Ge.push(qe.video.createSegmentIndex()));
                    return E(ze, Promise.all(Ge), 8);
                  case 8:
                    (e.h.makeTextStreamsForClosedCaptions(e.m), re(ze));
                }
              });
            }
            function l4(e, t) {
              var n, r, i, s, o, u, l, p, m, y, v, w, A, I, C, k;
              return F(function (R) {
                if (R.g == 1)
                  return (
                    (n = Xp(e.g.hls.mediaPlaylistFullMimeType)),
                    t.length
                      ? ((r = WS(e, t)),
                        (i = r.segment),
                        (s = r.segmentIndex),
                        (o = i.P()),
                        (u = Bo(o[0])) && (l = bm.get(u))
                          ? R.return(Xp(l))
                          : E(R, Promise.all([_S(e, i.ea, 0), _S(e, i, s)]), 2))
                      : R.return(n)
                  );
                if (
                  ((p = R.h),
                  (m = p[1].mimeType),
                  (y = p[0].data),
                  (v = p[1].data),
                  (w = "mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" ")),
                  (A = ["audio/mp4", "video/mp4", "video/iso.segment"]),
                  (I = i.ea || A.includes(m)),
                  !I && Lo(Le(v)))
                ) {
                  var L = v,
                    U = e.g.disableAudio,
                    G = e.g.disableVideo,
                    b = e.g.disableText,
                    B = Le(L),
                    O = new pt().parse(B),
                    z = O.Yd();
                  B = O.Ng();
                  var j = [],
                    X = !1,
                    W = !1;
                  if (!U)
                    switch (z.audio) {
                      case "aac":
                      case "aac-loas":
                        O.ub().length && (j.push("mp4a.40.2"), (X = !0));
                        break;
                      case "mp3":
                        O.ub().length && (j.push("mp4a.40.34"), (X = !0));
                        break;
                      case "ac3":
                        O.ub().length && (j.push("ac-3"), (X = !0));
                        break;
                      case "ec3":
                        O.ub().length && (j.push("ec-3"), (X = !0));
                        break;
                      case "opus":
                        O.ub().length && (j.push("opus"), (X = !0));
                    }
                  if (!G)
                    switch (z.video) {
                      case "avc":
                        (B.codec ? j.push(B.codec) : j.push("avc1.42E01E"), (W = !0));
                        break;
                      case "hvc":
                        (B.codec ? j.push(B.codec) : j.push("hvc1.1.6.L93.90"), (W = !0));
                        break;
                      case "av1":
                        (j.push("av01.0.01M.08"), (W = !0));
                    }
                  if (j.length) {
                    if (((U = X && !W), (G = new Map()), W && !b)) {
                      for (
                        b = new qr("video/mp2t"), b.Af(L), L = x(b.Zf()), W = L.next();
                        !W.done;
                        W = L.next()
                      )
                        ((W = W.value), G.set(W, W));
                      b.Pd();
                    }
                    B = {
                      type: U ? "audio" : "video",
                      mimeType: "video/mp2t",
                      codecs: j.join(", "),
                      language: null,
                      height: B.height,
                      width: B.width,
                      channelCount: null,
                      sampleRate: null,
                      closedCaptions: G,
                      ze: null,
                      colorGamut: null,
                      frameRate: B.frameRate,
                      timescale: null,
                    };
                  } else B = null;
                  if ((C = B)) return R.return(C);
                } else if ((I || w.includes(u)) && (k = mR(y, v, e.g.disableText))) return R.return(k);
                return m ? R.return(Xp(m)) : R.return(n);
              });
            }
            function _S(e, t, n) {
              var r, i, s, o, u, l;
              return F(function (p) {
                switch (p.g) {
                  case 1:
                    return t
                      ? ((r = Er),
                        (i = Tu(t.P(), t.Jc(), t.Hc(), e.g.retryParameters)),
                        (s = t instanceof Me ? 1 : 0),
                        E(p, Fi(e, i, r, { type: s }).promise, 2))
                      : p.return({ mimeType: null, data: null });
                  case 2:
                    if (((o = p.h), (u = o.data), !t.aesKey)) {
                      p.A(3);
                      break;
                    }
                    return E(p, Kp(u, t.aesKey, n), 4);
                  case 4:
                    u = p.h;
                  case 3:
                    return (
                      t instanceof Me ? t.ue(u, !0) : t.ue(u),
                      (l = o.headers["content-type"]) && (l = l.split(";")[0].toLowerCase()),
                      p.return({ mimeType: l, data: u })
                    );
                }
              });
            }
            function Zd(e) {
              if (Mn(e)) {
                if (e.Fa == Nm) {
                  for (var t = 1 / 0, n = 1 / 0, r = x(e.i.values()), i = r.next(); !i.done; i = r.next())
                    ((i = i.value),
                      i.stream.segmentIndex &&
                        i.stream.type != "text" &&
                        !i.stream.isAudioMuxedInVideo &&
                        ((t = Math.min(t, i.Mc)), (n = Math.min(n, i.Wc))));
                  ((t = t - n || 0),
                    isNaN(e.g.availabilityWindowOverride) || (t = e.g.availabilityWindowOverride),
                    e.l.Lf(t));
                }
              } else e.l.Ab(bS(e));
              if (!e.l.o)
                for (t = x(e.i.values()), n = t.next(); !n.done; n = t.next())
                  ((n = n.value),
                    !n.stream.segmentIndex ||
                      (n.type != "audio" && n.type != "video") ||
                      ((n = Qr(n.stream.segmentIndex)) && n.h && e.l.sh(n.h)));
              e.l.qf();
            }
            function c4(e, t) {
              var n = new Dt(e.H).g;
              t = x(t);
              for (var r = t.next(); !r.done; r = t.next()) {
                var i = r.value;
                r = Ee(i, "NAME");
                var s = Ee(i, "VALUE");
                ((i = Ee(i, "QUERYPARAM")),
                  r && s && (e.B.has(r) || e.B.set(r, s)),
                  i && (r = n.get(i)[0]) && !e.B.has(r) && e.B.set(i, r));
              }
            }
            function Rm(e, t, n) {
              n = new Dt(n).g;
              var r = new Map();
              t = x(t);
              for (var i = t.next(); !i.done; i = t.next()) {
                var s = i.value,
                  o = Ee(s, "NAME"),
                  u = Ee(s, "VALUE");
                ((i = Ee(s, "QUERYPARAM")),
                  (s = Ee(s, "IMPORT")),
                  o && u && (r.has(o) || r.set(o, u)),
                  i && (o = n.get(i)[0]) && !r.has(o) && r.set(i, o),
                  s && (i = e.B.get(s)) && r.set(s, i));
              }
              return r;
            }
            function d4(e, t) {
              t = x(t);
              for (var n = t.next(); !n.done; n = t.next()) {
                var r = n.value,
                  i = Ee(r, "AUDIO");
                n = Ee(r, "VIDEO");
                var s = Ee(r, "SUBTITLES");
                if (((r = PS(e, r)), s)) {
                  var o = jn(Ve, r);
                  (e.K.set(s, o), Or(r, o));
                }
                (i && ((s = jn("audio", r)), s || (s = e.g.hls.defaultAudioCodec), e.K.set(i, s)),
                  n && ((i = jn("video", r)), i || (i = e.g.hls.defaultVideoCodec), e.K.set(n, i)));
              }
            }
            function f4(e, t) {
              t = x(t);
              for (var n = t.next(); !n.done; n = t.next()) {
                var r = n.value,
                  i = Ee(r, "DATA-ID");
                n = Ee(r, "URI");
                var s = Ee(r, "LANGUAGE");
                ((r = Ee(r, "VALUE")),
                  (i = new Map().set("id", i)),
                  n && i.set("uri", ms([e.H], n, e.B)[0]),
                  s && i.set("language", s),
                  r && i.set("value", r),
                  (n = new Ae("sessiondata", i)),
                  e.h && e.h.onEvent(n));
              }
            }
            function h4(e, t) {
              var n, r, i, s, o, u;
              return F(function (l) {
                if (!e.h || !e.g) return l.return();
                for (r = x(t), i = r.next(); !i.done; i = r.next())
                  if (((s = i.value), (o = Ee(s, "PATHWAY-ID")), (u = Ee(s, "SERVER-URI")), o && u)) {
                    ((e.j = new ea(e.h)),
                      e.j.configure(e.g),
                      (e.j.i = [e.H]),
                      e.j.setManifestType("HLS"),
                      (e.j.h = o),
                      (n = Wu(e.j, u)));
                    break;
                  }
                return E(l, n, 0);
              });
            }
            function p4(e, t) {
              var n = xS(t, "SUBTITLES"),
                r = {};
              t = x(n);
              for (var i = t.next(); !i.done; i = t.next()) {
                i = i.value;
                var s = Em(i, !e.j);
                r[s] ? r[s].push(i) : (r[s] = [i]);
              }
              if (((t = []), !e.g.disableText))
                for (var o in r)
                  try {
                    t.push(DS(e, r[o], new Map()).stream);
                  } catch (u) {
                    if (!e.g.hls.ignoreTextStreamFailures) throw u;
                  }
              for (o = x(n), n = o.next(); !n.done; n = o.next())
                if (((r = dt(n.value, "GROUP-ID")), (n = e.K.get(r)) && (r = e.M.get(r))))
                  for (r = x(r), i = r.next(); !i.done; i = r.next())
                    ((i = i.value),
                      (i.stream.codecs = n),
                      (i.stream.mimeType = Dm(Ve, n) || tf(Ve)),
                      oa(i.stream));
              return t.filter(function (u) {
                return u;
              });
            }
            function oa(e) {
              var t = new Set([Rt(e.mimeType, e.codecs)]);
              (e.segmentIndex &&
                e.segmentIndex.Fb(function (n) {
                  n.mimeType && t.add(Rt(n.mimeType, e.codecs));
                }),
                (e.fullMimeTypes = t));
            }
            function g4(e, t, n) {
              var r, i;
              return F(function (s) {
                return s.g == 1
                  ? ((r = t
                      .map(function (o) {
                        var u, l;
                        return F(function (p) {
                          if (p.g == 1)
                            return e.g.disableThumbnails ? p.return(null) : (te(p, 2), E(p, C4(e, o), 4));
                          if (p.g != 2) return ((u = p.h), p.return(u.stream));
                          if (((l = oe(p)), e.g.hls.ignoreImageStreamFailures)) return p.return(null);
                          throw l;
                        });
                      })
                      .concat(
                        n.map(function (o) {
                          if (e.g.disableThumbnails) return null;
                          try {
                            var u = LS(e, o);
                            return u.stream.type !== "image" ? null : u.stream;
                          } catch (l) {
                            if (e.g.hls.ignoreImageStreamFailures) return null;
                            throw l;
                          }
                        }),
                      )),
                    E(s, Promise.all(r), 2))
                  : ((i = s.h),
                    s.return(
                      i.filter(function (o) {
                        return o;
                      }),
                    ));
              });
            }
            function m4(e, t, n) {
              t = t.filter(function (u) {
                var l = Ee(u, "URI") || "";
                return ((u = Ee(u, "TYPE")), u != "SUBTITLES" && (l != "" || u == "AUDIO"));
              });
              var r = {};
              t = x(t);
              for (var i = t.next(); !i.done; i = t.next()) {
                i = i.value;
                var s = Em(i, !e.j);
                r[s] ? r[s].push(i) : (r[s] = [i]);
              }
              for (var o in r) DS(e, r[o], n, !1);
            }
            function y4(e, t) {
              return t
                .map(function (n) {
                  return ((n = LS(e, n)), n.stream.type !== "video" ? null : n.stream);
                })
                .filter(function (n) {
                  return n;
                });
            }
            function v4(e, t, n, r, i, s, o) {
              var u,
                l,
                p,
                m,
                y,
                v,
                w,
                A,
                I,
                C,
                k,
                R,
                L,
                U,
                G,
                b,
                B,
                O,
                z,
                j,
                X,
                W,
                ie,
                ne,
                $,
                Q,
                ae,
                ce,
                Ne,
                we,
                et,
                Ue,
                ot,
                We,
                Ge,
                Ye;
              return F(function (Ze) {
                switch (Ze.g) {
                  case 1:
                    if (((u = []), (l = new Set()), e.g.ignoreDrmInfo || !(n.length > 0))) {
                      Ze.A(2);
                      break;
                    }
                    ((p = x(n)), (m = p.next()));
                  case 3:
                    if (m.done) {
                      Ze.A(2);
                      break;
                    }
                    if (
                      ((y = m.value),
                      (v = dt(y, "METHOD")),
                      (w = Ee(y, "KEYFORMAT") || "identity"),
                      (A = null),
                      v == "NONE")
                    ) {
                      Ze.A(4);
                      break;
                    }
                    if (rf(v)) {
                      ((I = ms(i(), dt(y, "URI"), s)),
                        (C = I.sort().join("")),
                        e.O.has(C) ||
                          ((k = Ut(I, e.g.retryParameters)), (R = Fi(e, k, 6).promise), e.O.set(C, R)),
                        Ze.A(4));
                      break;
                    }
                    if (w == "identity") return E(Ze, YS(e, y, "", i, null, s), 12);
                    if (((L = e.dc.get(w)), !L)) {
                      ((U = null), Ze.A(10));
                      break;
                    }
                    return E(Ze, L(y, "", null), 11);
                  case 11:
                    U = Ze.h;
                  case 10:
                    ((A = U), Ze.A(6));
                    break;
                  case 12:
                    A = Ze.h;
                  case 6:
                    if (A) {
                      if (A.keyIds)
                        for (G = x(A.keyIds), b = G.next(); !b.done; b = G.next()) ((B = b.value), l.add(B));
                      u.push(A);
                    }
                  case 4:
                    ((m = p.next()), Ze.A(3));
                    break;
                  case 2:
                    for (O = {}, z = x(t), j = z.next(); !j.done; j = z.next())
                      ((X = j.value), (W = Em(X, !e.j)), O[W] ? O[W].push(X) : (O[W] = [X]));
                    ie = [];
                    for (ne in O)
                      (($ = O[ne]),
                        (Q = $[0]),
                        (ae = Ee(Q, "FRAME-RATE")),
                        (ce = Number(dt(Q, "BANDWIDTH")) || Number(Ee(Q, "AVERAGE-BANDWIDTH"))),
                        (Ne = Ee(Q, "RESOLUTION")),
                        (we = x(Ne ? Ne.split("x") : [null, null])),
                        (et = we.next().value),
                        (Ue = we.next().value),
                        (ot = Ee(Q, "VIDEO-RANGE")),
                        (We = Ee(Q, "REQ-VIDEO-LAYOUT")) &&
                          We.includes(",") &&
                          ((Ge = We.split(",").filter(function (qe) {
                            return qe == "CH-STEREO" || qe == "CH-MONO";
                          })),
                          (We = Ge[0])),
                        (We = We || "CH-MONO"),
                        (Ye = x4(e, $, r)),
                        ie.push.apply(ie, Y(E4(e, Ye.audio, Ye.video, ce, et, Ue, ae, ot, We, u, l, o))));
                    return Ze.return(
                      ie.filter(function (qe) {
                        return qe != null;
                      }),
                    );
                }
              });
            }
            function x4(e, t, n) {
              for (
                var r = { audio: [], video: [] },
                  i = new Map(),
                  s = [],
                  o = !1,
                  u = !1,
                  l = x(t),
                  p = l.next();
                !p.done;
                p = l.next()
              ) {
                var m = p.value;
                p = Ee(m, "AUDIO");
                var y = Ee(m, "VIDEO"),
                  v = p || y;
                v &&
                  (s.includes(v) || s.push(v),
                  (m = Ee(m, "PATHWAY-ID")) && i.set(v, m),
                  p ? (o = !0) : y && (u = !0));
              }
              (s.length &&
                n.length &&
                ((n = n.filter(function (A) {
                  return s.includes(dt(A, "GROUP-ID"));
                })),
                m4(e, n, i)),
                (n = (i = s.sort().join(",")) && e.M.has(i) ? e.M.get(i) : []),
                o ? r.audio.push.apply(r.audio, Y(n)) : u && r.video.push.apply(r.video, Y(n)),
                (u = !1));
              var w = t.map(function (A) {
                return dt(A, "URI");
              });
              return (
                (o = r.audio.find(function (A) {
                  return (
                    A &&
                    A.P().find(function (I) {
                      return w.includes(I);
                    })
                  );
                })),
                (n = PS(e, t[0])),
                (l = jn("video", n)),
                (p = jn("audio", n)) && !l
                  ? ((o = "audio"),
                    (u =
                      r.audio.length > 0 &&
                      !r.audio.some(function (A) {
                        return A.stream.isAudioMuxedInVideo;
                      })))
                  : !r.audio.length && !r.video.length && p && l
                    ? ((o = "video"), (n = [[l, p].join()]))
                    : r.audio.length && o
                      ? ((o = "audio"), (u = !0))
                      : (o = r.video.length && !r.audio.length ? "audio" : "video"),
                u ||
                  ((t = M4(e, t, n, o)),
                  i && e.g.enableAudioGroups && (t.stream.groupId = i),
                  t.stream.type == "audio" &&
                    o === "audio" &&
                    r.audio.some(function (A) {
                      return A.stream.isAudioMuxedInVideo;
                    }) &&
                    ((e = r.audio[0].stream),
                    (t.stream.language = e.language),
                    (t.stream.channelsCount = e.channelsCount),
                    (t.stream.label = e.label),
                    (t.stream.audioSamplingRate = e.audioSamplingRate),
                    (t.stream.originalId = e.originalId),
                    (t.stream.originalLanguage = e.originalLanguage)),
                  (r[t.stream.type] = [t])),
                r
              );
            }
            function PS(e, t) {
              return (
                (t = Ee(t, "CODECS") || ""),
                (e.ba = t.length > 0),
                e.ba ||
                  e.g.hls.disableCodecGuessing ||
                  ((t = []),
                  e.g.disableVideo || t.push(e.g.hls.defaultVideoCodec),
                  e.g.disableAudio || t.push(e.g.hls.defaultAudioCodec),
                  (t = t.join(","))),
                Wp(t.split(/\s*,\s*/))
              );
            }
            function T4(e) {
              return (e = Ee(e, "CHANNELS")) ? parseInt(e.split("/")[0], 10) : null;
            }
            function w4(e) {
              return (e = Ee(e, "SAMPLE-RATE")) ? parseInt(e, 10) : null;
            }
            function S4(e) {
              return (
                (e = Ee(e, "CHANNELS")),
                e ? ((e = e.split("/")), e.length != 2 ? !1 : e[1] === "JOC" || e[1].includes("ATMOS")) : !1
              );
            }
            function A4(e) {
              return ((e = dt(e, "TYPE").toLowerCase()), e == "subtitles" && (e = Ve), e);
            }
            function E4(e, t, n, r, i, s, o, u, l, p, m, y) {
              for (var v = x(n), w = v.next(); !w.done; w = v.next()) KS(w.value.stream, i, s, o, u, l, null);
              for (
                i = e.g.disableVideo,
                  (!n.length || i) && (n = [null]),
                  i &&
                    (t = t.filter(function (k) {
                      return !k.stream.isAudioMuxedInVideo;
                    })),
                  i = e.g.disableAudio,
                  (!t.length || i) && (t = [null]),
                  i = [],
                  t = x(t),
                  s = t.next();
                !s.done;
                s = t.next()
              )
                for (s = s.value, o = x(n), u = o.next(); !u.done; u = o.next()) {
                  var A = u.value;
                  ((u = s ? s.stream : null) && ((u.drmInfos = p), (u.keyIds = m)),
                    (l = A ? A.stream : null) &&
                      ((l.drmInfos = p), (l.keyIds = m), e.g.disableIFrames || D0(l, y)),
                    l && !u && (l.bandwidth = r),
                    !l && u && (u.bandwidth = r),
                    (v = s ? s.stream.drmInfos : null),
                    (w = A ? A.stream.drmInfos : null),
                    (A = A ? A.P().sort().join(",") : ""));
                  var I = s ? s.P().sort().join(",") : "",
                    C = [];
                  (u && u.codecs && C.push(u.codecs),
                    l && l.codecs && C.push(l.codecs),
                    (A = [A, I, C.sort()].join("-")),
                    (u && l && !Kv(v, w)) ||
                      e.ob.has(A) ||
                      ((u = {
                        id: e.G++,
                        language: u ? u.language : "und",
                        disabledUntilTime: 0,
                        primary: (!!u && u.primary) || (!!l && l.primary),
                        audio: u,
                        video: l,
                        bandwidth: r,
                        allowedByApplication: !0,
                        allowedByKeySystem: !0,
                        decodingInfos: [],
                      }),
                      i.push(u),
                      e.ob.add(A)));
                }
              return i;
            }
            function I4(e, t) {
              ((t = xS(t, "CLOSED-CAPTIONS")), (e.R = t.length == 0), (t = x(t)));
              for (var n = t.next(); !n.done; n = t.next()) {
                var r = n.value,
                  i = Ee(r, "LANGUAGE");
                ((n = nt(i || "und")),
                  i || ((i = Ee(r, "NAME")) && (n = i)),
                  (i = dt(r, "GROUP-ID")),
                  (r = dt(r, "INSTREAM-ID").replace("SERVICE", "svc")),
                  e.J.get(i) || e.J.set(i, new Map()),
                  e.J.get(i).set(r, n));
              }
            }
            function DS(e, t, n, r) {
              r = r === void 0 ? !0 : r;
              for (
                var i = [], s = [], o = new Map(), u = x(t), l = u.next(), p = {};
                !l.done;
                p = { oi: void 0 }, l = u.next()
              ) {
                ((l = l.value),
                  (p.oi = ++e.G),
                  (p = (function (I) {
                    return function () {
                      return "shaka://hls-muxed" + I.oi;
                    };
                  })(p)));
                var m = r ? dt(l, "URI") : Ee(l, "URI") || p();
                ((p = dt(l, "GROUP-ID")),
                  i.push(m),
                  s.push(p),
                  o.set(p, m),
                  (l = Ee(l, "PATHWAY-ID")) && n.set(p, l));
              }
              if (((r = s.sort().join(",")), (l = t[0]), (t = ""), (u = A4(l)), u == Ve))
                t = Ee(l, "CODECS") || "";
              else
                for (s = x(s), p = s.next(); !p.done; p = s.next())
                  if (((p = p.value), e.K.has(p))) {
                    t = e.K.get(p);
                    break;
                  }
              if (((s = i.sort().join(",")), u == "audio" && r && (s += r), e.i.has(s))) return e.i.get(s);
              if (((p = e.G++), e.j))
                for (o = x(o), m = o.next(); !m.done; m = o.next()) {
                  var y = x(m.value);
                  ((m = y.next().value), (y = y.next().value), (m = n.get(m)) && ta(e.j, p, m, y));
                }
              ((n = Ee(l, "LANGUAGE")),
                (o = Ee(l, "NAME")),
                (m = Ee(l, "DEFAULT") == "YES"),
                (y = u == "audio" ? T4(l) : null));
              var v = u == "audio" ? S4(l) : !1,
                w = Ee(l, "CHARACTERISTICS"),
                A = Ee(l, "FORCED") == "YES";
              return (
                (l = u == "audio" ? w4(l) : null),
                (i = ef(e, p, i, t, u, n, m, o, y, null, w, A, l, v)),
                i.stream && e.g.enableAudioGroups && (i.stream.groupId = r),
                e.M.has(r) ? e.M.get(r).push(i) : e.M.set(r, [i]),
                e.i.set(s, i),
                i
              );
            }
            function C4(e, t) {
              var n, r, i, s, o, u, l, p, m, y;
              return F(function (v) {
                return v.g == 1
                  ? ((n = dt(t, "URI")),
                    (r = Ee(t, "CODECS", "jpeg") || ""),
                    e.i.has(n)
                      ? v.return(e.i.get(n))
                      : ((i = Ee(t, "LANGUAGE")),
                        (s = Ee(t, "NAME")),
                        (o = Ee(t, "CHARACTERISTICS")),
                        (u = ef(e, e.G++, [n], r, "image", i, !1, s, null, null, o, !1, null, !1)),
                        (l = Ee(t, "RESOLUTION")) ? E(v, u.stream.createSegmentIndex(), 3) : v.A(2)))
                  : (v.g != 2 &&
                      ((p = Qr(u.stream.segmentIndex)),
                      (m = p.tilesLayout) &&
                        ((u.stream.width = Number(l.split("x")[0]) * Number(m.split("x")[0])),
                        (u.stream.height = Number(l.split("x")[1]) * Number(m.split("x")[1]))),
                      u.stream.closeSegmentIndex()),
                    (y = Ee(t, "BANDWIDTH")) && (u.stream.bandwidth = Number(y)),
                    e.i.set(n, u),
                    v.return(u));
              });
            }
            function LS(e, t) {
              var n = "video",
                r = dt(t, "URI"),
                i = Ee(t, "CODECS") || "";
              if ((i == "mjpg" && (n = "image"), e.i.has(r))) return e.i.get(r);
              var s = Ee(t, "LANGUAGE"),
                o = Ee(t, "NAME"),
                u = Ee(t, "CHARACTERISTICS");
              return (
                (n = ef(e, e.G++, [r], i, n, s, !1, o, null, null, u, !1, null, !1)),
                (i = Ee(t, "RESOLUTION")),
                (s = x(i ? i.split("x") : [null, null])),
                (i = s.next().value),
                (s = s.next().value),
                (n.stream.width = Number(i) || void 0),
                (n.stream.height = Number(s) || void 0),
                (t = Ee(t, "BANDWIDTH")) && (n.stream.bandwidth = Number(t)),
                e.i.set(r, n),
                n
              );
            }
            function M4(e, t, n, r) {
              for (var i = e.G++, s = [], o = x(t), u = o.next(); !u.done; u = o.next()) {
                var l = u.value;
                ((u = dt(l, "URI")), (l = Ee(l, "PATHWAY-ID")), e.j && l && ta(e.j, i, l, u), s.push(u));
              }
              if (((o = s.sort().join(",") + n.sort().join(",")), e.i.has(o))) return e.i.get(o);
              u = s.join(",");
              e: {
                if (((t = Ee(t[0], "CLOSED-CAPTIONS")), r == "video")) {
                  if (e.g.disableText) {
                    ((e.R = !1), (t = null));
                    break e;
                  }
                  if (t) {
                    if (t != "NONE") {
                      t = e.J.get(t);
                      break e;
                    }
                    e.R = !1;
                  } else if (!t && e.J.size)
                    for (t = x(e.J.keys()), t = t.next(); !t.done; t = t.next()) {
                      t = e.J.get(t.value);
                      break e;
                    }
                }
                t = null;
              }
              return (
                (n = ho(r, n)),
                (r = ef(e, i, s, n, r, null, !1, u, null, t, null, !1, null, !1)),
                e.i.set(o, r),
                r
              );
            }
            function ef(e, t, n, r, i, s, o, u, l, p, m, y, v, w) {
              function A(U) {
                var G, b, B, O, z, j, X, W, ie, ne, $, Q, ae, ce, Ne, we, et, Ue, ot, We;
                return F(function (Ge) {
                  switch (Ge.g) {
                    case 1:
                      return ((G = Ot), te(Ge, 2), E(Ge, U.promise, 4));
                    case 4:
                      if (((b = Ge.h), U.aborted)) return Ge.return();
                      if (
                        ((B = b.uri),
                        B != b.originalUri && ((O = k.P()), O.includes(B) || k.Df.push(B)),
                        (z = Im(e.ab, b.data)),
                        z.type != 1)
                      )
                        throw new H(2, 4, 4017);
                      return (
                        (j = kr(z.ha, "EXT-X-DEFINE")),
                        (X = Rm(e, j, B)),
                        (W = !1),
                        ((!e.ba && e.g.hls.disableCodecGuessing) ||
                          (e.R && i == G.wa && !e.g.hls.disableClosedCaptionsDetection)) &&
                          z.segments.length > 0 &&
                          ((e.R = !1), (W = !0)),
                        (ie = !e.ba && e.g.hls.disableCodecGuessing),
                        (ne = Mn(e)),
                        E(Ge, OS(e, 0, X, z, I, r, i, s, o, u, l, p, m, y, v, w, void 0, W, ie), 5)
                      );
                    case 5:
                      if ((($ = Ge.h), U.aborted)) return Ge.return();
                      ((Q = $.stream),
                        VS(e, z),
                        Mn(e) && !ne && HS(e, z),
                        (k.Wc = $.Wc),
                        (k.Mc = $.Mc),
                        (k.Ve = $.Ve),
                        (k.Ue = $.Ue),
                        (k.be = $.be),
                        (k.rf = $.rf),
                        (k.Qb = $.Qb),
                        (k.Rb = $.Rb),
                        (C.segmentIndex = Q.segmentIndex),
                        (C.encrypted = Q.encrypted),
                        (C.drmInfos = Q.drmInfos),
                        (C.keyIds = Q.keyIds),
                        (C.mimeType = Q.mimeType),
                        (C.bandwidth = C.bandwidth || Q.bandwidth),
                        (C.codecs = C.codecs || Q.codecs),
                        (C.closedCaptions = C.closedCaptions || Q.closedCaptions),
                        (C.width = C.width || Q.width),
                        (C.height = C.height || Q.height),
                        (C.hdr = C.hdr || Q.hdr),
                        (C.colorGamut = C.colorGamut || Q.colorGamut),
                        (C.frameRate = C.frameRate || Q.frameRate),
                        C.language == "und" && Q.language != "und" && (C.language = Q.language),
                        (C.language = C.language || Q.language),
                        (C.channelsCount = C.channelsCount || Q.channelsCount),
                        (C.audioSamplingRate = C.audioSamplingRate || Q.audioSamplingRate),
                        oa(C),
                        C.drmInfos.length && e.h.newDrmInfo(C),
                        (ae = !1),
                        ((!p && C.closedCaptions) ||
                          (p && C.closedCaptions && p.size != C.closedCaptions.size)) &&
                          (ae = !0),
                        e.m && ae && e.h.makeTextStreamsForClosedCaptions(e.m),
                        i == G.Na &&
                          (ce = Qr(Q.segmentIndex)) &&
                          ce.ea &&
                          ((C.mimeType = "application/mp4"), oa(C)),
                        (Ne = Xc(C)),
                        C.segmentIndex.Fb(function (Ye) {
                          Ye.ea && (Ye.ea.xd = Ne);
                        }),
                        R4(e) &&
                          (e.zc
                            ? km(e, [k])
                            : ((e.zc = !0),
                              (we = Array.from(e.i.values())),
                              (et = we.filter(function (Ye) {
                                return Ye.stream.segmentIndex;
                              })),
                              km(e, et),
                              Zd(e),
                              (Ue = e.o),
                              Ue > 0 && e.F.ka(Ue))),
                        Pm(e, z.ha, C.type, X, I),
                        e.m && (e.m.startTime = e.u),
                        pe(Ge, 0));
                      break;
                    case 2:
                      if (((ot = oe(Ge)), C.closeSegmentIndex(), ot.code === 7001)) return Ge.return();
                      if (((We = e.h.disableStream(C)), !We)) throw ot;
                      re(Ge);
                  }
                });
              }
              function I() {
                return e.j && n.length > 1 ? Ku(e.j, t) : k.Df.concat(TS([e.H], n, e.B));
              }
              var C = FS(e, r, i, s, o, u, l, p, m, y, v, w);
              n.some(function (U) {
                return U.startsWith("shaka://hls-muxed");
              }) && ((C.isAudioMuxedInVideo = !0), (C.mimeType = "video/mp2t"), oa(C));
              var k = {
                  stream: C,
                  type: i,
                  Df: [],
                  Wc: 0,
                  Mc: 0,
                  rf: new Map(),
                  Ve: !1,
                  Ue: !1,
                  be: !1,
                  sg: -1,
                  Qb: -1,
                  Rb: -1,
                  P: I,
                },
                R = null,
                L;
              return (
                (C.createSegmentIndex = function () {
                  return (
                    R ||
                    (C.isAudioMuxedInVideo
                      ? ((C.segmentIndex = new Qe([])), Promise.resolve())
                      : ((L = Lm(e, k.P(), !0)),
                        (R = new Promise(function (U) {
                          U(A(L));
                        }))))
                  );
                }),
                (C.closeSegmentIndex = function () {
                  (R && !C.segmentIndex && L.abort(),
                    C.segmentIndex && (C.segmentIndex.release(), (C.segmentIndex = null)),
                    (R = null));
                }),
                k
              );
            }
            function bS(e) {
              var t = 1 / 0;
              e = x(e.i.values());
              for (var n = e.next(); !n.done; n = e.next())
                ((n = n.value),
                  n.stream.segmentIndex &&
                    n.stream.type != "text" &&
                    !n.stream.isAudioMuxedInVideo &&
                    (t = Math.min(t, n.Mc)));
              return t;
            }
            function NS(e, t) {
              var n = [];
              t = x(t);
              for (var r = t.next(); !r.done; r = t.next())
                ((r = r.value),
                  r.segmentIndex &&
                    r.segmentIndex.Fb(function (i) {
                      n.push(i);
                    }));
              e.l.me(n);
            }
            function km(e, t) {
              if (!Mn(e))
                for (var n = bS(e), r = x(t), i = r.next(); !i.done; i = r.next())
                  i.value.stream.segmentIndex.pd(0, n);
              (NS(
                e,
                t.map(function (s) {
                  return s.stream;
                }),
              ),
                (r = Array.from(e.i.values()).filter(function (s) {
                  return s.stream.segmentIndex;
                })),
                (n = r.some(function (s) {
                  return s.stream.type == "audio";
                })),
                (i = r.some(function (s) {
                  return s.stream.type == "video";
                })),
                (r = Mn(e) && !e.kb),
                (n = !Mn(e) && e.kb && !(n && i)),
                e.g.hls.ignoreManifestProgramDateTime || r || n
                  ? RS(e, t, r)
                  : (a4(e, t), e.g.hls.ignoreManifestProgramDateTimeForTypes.length > 0 && RS(e, t)));
            }
            function Zu(e, t) {
              return e.g.hls.ignoreManifestProgramDateTime
                ? !0
                : e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t);
            }
            function R4(e) {
              if (!e.m) return !1;
              var t = [],
                n = [];
              e = x(e.m.variants);
              for (var r = e.next(); !r.done; r = e.next())
                ((r = r.value), r.video && t.push(r.video), r.audio && n.push(r.audio));
              return !(
                (t.length > 0 &&
                  !t.some(function (i) {
                    return i.segmentIndex;
                  })) ||
                (n.length > 0 &&
                  !n.some(function (i) {
                    return i.segmentIndex;
                  }))
              );
            }
            function OS(e, t, n, r, i, s, o, u, l, p, m, y, v, w, A, I, C, k, R) {
              ((k = k === void 0 ? !0 : k), (R = R === void 0 ? !0 : R));
              var L,
                U,
                G,
                b,
                B,
                O,
                z,
                j,
                X,
                W,
                ie,
                ne,
                $,
                Q,
                ae,
                ce,
                Ne,
                we,
                et,
                Ue,
                ot,
                We,
                Ge,
                Ye,
                Ze,
                qe,
                ze,
                Ke,
                $t;
              return F(function (Ht) {
                switch (Ht.g) {
                  case 1:
                    if (
                      ((L = r.segments || []),
                      (U = L.every(function (xr) {
                        return !!qt(xr.ha, "EXT-X-GAP");
                      })),
                      !L.length || U)
                    )
                      throw new H(2, 4, 4053);
                    if (
                      (k4(e, r),
                      Mn(e) && _m(e, r),
                      (G = Mn(e) ? e.C.get(o) : new Map()),
                      (b = XS(e, r, G, n, i, o)),
                      (B = b.segments),
                      (O = b.bandwidth),
                      (ie = W = X = j = z = null),
                      !(B.length > 0 && k))
                    ) {
                      Ht.A(2);
                      break;
                    }
                    return E(Ht, l4(e, B), 3);
                  case 3:
                    ((ne = Ht.h),
                      o != ne.type && Mn(e) && (e.C.set(ne.type, e.C.get(o)), e.C.set(o, new Map())),
                      (o = ne.type),
                      (u = ne.language),
                      (m = ne.channelCount),
                      (A = ne.sampleRate),
                      e.g.disableText || (y = ne.closedCaptions),
                      (j = ne.height),
                      (z = ne.width),
                      (X = ne.ze),
                      (W = ne.colorGamut),
                      (ie = ne.frameRate),
                      R && ((C = ne.mimeType), (s = ne.codecs)));
                  case 2:
                    if (C) {
                      Ht.A(4);
                      break;
                    }
                    return E(Ht, D4(e, o, s, B), 5);
                  case 5:
                    ((C = Ht.h),
                      o != Ve || s || C != "application/mp4" || !B[0] || B[0].ea || (C = "text/vtt"));
                  case 4:
                    return E(Ht, BS(e, r, C, i, n), 6);
                  case 6:
                    if (
                      (($ = Ht.h),
                      (Q = $.drmInfos),
                      (ae = $.keyIds),
                      (ce = $.encrypted),
                      (Ne = $.Qh),
                      ce && !Q.length && !Ne)
                    )
                      throw new H(2, 4, 4026);
                    return (
                      (we = FS(e, s, o, u, l, p, m, y, v, w, A, I)),
                      (we.encrypted = ce && !Ne),
                      (we.drmInfos = Q),
                      (we.keyIds = ae),
                      (we.mimeType = C),
                      O && (we.bandwidth = O),
                      oa(we),
                      o == "video" && (z || j || X || W) && KS(we, z, j, ie, X, null, W),
                      Mn(e) && _m(e, r),
                      (et = B[0].startTime),
                      (Ue = B[B.length - 1]),
                      (ot = Ue.endTime),
                      (We = new Qe(B)),
                      (we.segmentIndex = We),
                      (Ye = (Ge = qt(r.ha, "EXT-X-SERVER-CONTROL")) ? ia(Ge, "CAN-SKIP-UNTIL") != null : !1),
                      (Ze = Ge ? ia(Ge, "CAN-BLOCK-RELOAD") != null : !1),
                      (qe = sa(r.ha, "EXT-X-MEDIA-SEQUENCE", 0)),
                      (ze = US(qe, B)),
                      (Ke = ze.Qb),
                      ($t = ze.Rb),
                      Ht.return({
                        stream: we,
                        type: o,
                        Df: [],
                        P: i,
                        Wc: et,
                        Mc: ot,
                        Ve: Ye,
                        Ue: Ze,
                        be: !1,
                        sg: -1,
                        Qb: Ke,
                        Rb: $t,
                        rf: G,
                      })
                    );
                }
              });
            }
            function US(e, t) {
              e = e + t.length - 1;
              var n = -1;
              if (!t.length) return (e++, { Qb: e, Rb: n });
              t = t[t.length - 1];
              var r = t.g;
              return t.g.length
                ? ((n = r.length - 1), r[r.length - 1].isPreload() || (e++, (n = 0)), { Qb: e, Rb: n })
                : (e++, t.o && (n = 0), { Qb: e, Rb: n });
            }
            function FS(e, t, n, r, i, s, o, u, l, p, m, y) {
              var v = Dm(n, t) || tf(n),
                w = [];
              if (l) {
                l = x(l.split(","));
                for (var A = l.next(); !A.done; A = l.next()) w.push(A.value);
              }
              return (
                (A = void 0),
                (l = null),
                n == Ve
                  ? (A =
                      w.includes("public.accessibility.transcribes-spoken-dialog") &&
                      w.includes("public.accessibility.describes-music-and-sound")
                        ? "caption"
                        : "subtitle")
                  : w.includes("public.accessibility.describes-video") && (l = "visually impaired"),
                w.length || A !== "subtitle" || w.push("subtitle"),
                (A = null),
                n != "video" && (A = s),
                (e = {
                  id: e.G++,
                  originalId: s,
                  groupId: null,
                  createSegmentIndex: function () {
                    return Promise.resolve();
                  },
                  segmentIndex: null,
                  mimeType: v,
                  codecs: t,
                  kind: n == Ve ? "subtitle" : void 0,
                  encrypted: !1,
                  drmInfos: [],
                  keyIds: new Set(),
                  language: nt(r || "und"),
                  originalLanguage: r,
                  label: A,
                  type: n,
                  primary: i,
                  trickModeVideo: null,
                  dependencyStream: null,
                  emsgSchemeIdUris: null,
                  frameRate: void 0,
                  pixelAspectRatio: void 0,
                  width: void 0,
                  height: void 0,
                  bandwidth: void 0,
                  roles: w,
                  forced: p,
                  channelsCount: o,
                  audioSamplingRate: m,
                  spatialAudio: y,
                  closedCaptions: u,
                  hdr: void 0,
                  colorGamut: void 0,
                  videoLayout: void 0,
                  tilesLayout: void 0,
                  accessibilityPurpose: l,
                  external: !1,
                  fastSwitching: !1,
                  fullMimeTypes: new Set(),
                  isAudioMuxedInVideo: !1,
                  baseOriginalId: null,
                }),
                oa(e),
                e
              );
            }
            function BS(e, t, n, r, i) {
              var s, o, u, l, p, m, y, v, w, A, I, C, k, R, L, U, G, b, B, O, z, j, X, W, ie, ne, $, Q, ae;
              return F(function (ce) {
                switch (ce.g) {
                  case 1:
                    if (((s = new Map()), !e.g.ignoreDrmInfo && t.segments)) {
                      for (o = x(t.segments), u = o.next(); !u.done; u = o.next())
                        if (((l = u.value), (p = kr(l.ha, "EXT-X-KEY")), (m = null), p.length))
                          for (m = GS(e, t, l.ha, r, i), y = x(p), v = y.next(); !v.done; v = y.next())
                            ((w = v.value), s.set(w, m));
                    }
                    ((I = A = !1), (C = []), (k = new Set()), (R = x(s)), (L = R.next()));
                  case 2:
                    if (L.done) {
                      ce.A(4);
                      break;
                    }
                    if (
                      ((U = L.value),
                      (G = x(U)),
                      (b = G.next().value),
                      (B = G.next().value),
                      (O = b),
                      (z = B),
                      (j = dt(O, "METHOD")),
                      j == "NONE")
                    ) {
                      ce.A(3);
                      break;
                    }
                    if (((A = !0), (X = Ee(O, "KEYFORMAT") || "identity"), (W = null), rf(j))) {
                      ((I = !0), ce.A(3));
                      break;
                    }
                    if (X == "identity") return E(ce, YS(e, O, n, r, z, i), 11);
                    if (((ie = e.dc.get(X)), !ie)) {
                      ((ne = null), ce.A(9));
                      break;
                    }
                    return E(ce, ie(O, n, z), 10);
                  case 10:
                    ne = ce.h;
                  case 9:
                    ((W = ne), ce.A(6));
                    break;
                  case 11:
                    W = ce.h;
                  case 6:
                    if (W) {
                      if (W.keyIds)
                        for ($ = x(W.keyIds), Q = $.next(); !Q.done; Q = $.next())
                          ((ae = Q.value), k.add(ae));
                      C.push(W);
                    }
                  case 3:
                    ((L = R.next()), ce.A(2));
                    break;
                  case 4:
                    return ce.return({ drmInfos: C, keyIds: k, encrypted: A, Qh: I });
                }
              });
            }
            function jS(e, t, n, r, i) {
              if (!g.crypto || !g.crypto.subtle)
                throw (
                  Be(
                    "Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)",
                  ),
                  new H(2, 4, 4042)
                );
              var s = 0,
                o = Ee(t, "IV", "");
              if (o) {
                var u = Rs(o.substr(2));
                if (u.byteLength != 16) throw new H(2, 4, 4048);
              } else s = sa(n.ha, "EXT-X-MEDIA-SEQUENCE", 0);
              var l = ms(r(), dt(t, "URI"), i),
                p = l.sort().join("");
              if (((n = t.toString() + "-" + s + "-" + p), !e.va.has(n))) {
                var m = { bitsKey: 128, blockCipherMode: "CBC", iv: u, firstMediaSequenceNumber: s };
                switch (dt(t, "METHOD")) {
                  case "AES-256":
                    m.bitsKey = 256;
                    break;
                  case "AES-256-CTR":
                    ((m.bitsKey = 256), (m.blockCipherMode = "CTR"));
                }
                ((m.fetchKey = function () {
                  var y, v, w, A;
                  return F(function (I) {
                    if (I.g == 1)
                      return (
                        e.O.has(p) ||
                          ((y = Ut(l, e.g.retryParameters)), (v = Fi(e, y, 6).promise), e.O.set(p, v)),
                        E(I, e.O.get(p), 2)
                      );
                    if (I.g != 3) {
                      if (((w = I.h), !w.data || w.data.byteLength != m.bitsKey / 8)) throw new H(2, 4, 4049);
                      return (
                        (A = { name: m.blockCipherMode == "CTR" ? "AES-CTR" : "AES-CBC", length: m.bitsKey }),
                        E(I, g.crypto.subtle.importKey("raw", w.data, A, !0, ["decrypt"]), 3)
                      );
                    }
                    ((m.cryptoKey = I.h), (m.fetchKey = void 0), re(I));
                  });
                }),
                  e.va.set(n, m));
              }
              return e.va.get(n);
            }
            function VS(e, t) {
              e.u == null && (t = qt(t.ha, "EXT-X-START")) && (e.u = Number(dt(t, "TIME-OFFSET")));
            }
            function k4(e, t) {
              var n = qt(t.ha, "EXT-X-PLAYLIST-TYPE");
              ((t = qt(t.ha, "EXT-X-ENDLIST")),
                (t = (n && n.value == "VOD") || t),
                (n = n && n.value == "EVENT" && !t),
                (n = !t && !n),
                t ? nf(e, of) : n ? nf(e, Nm) : nf(e, F4));
            }
            function _m(e, t) {
              var n = 1 / 0,
                r = t.segments;
              if (r.length)
                for (var i = r.length - 1; i >= 0; ) {
                  var s = qt(r[i].ha, "EXTINF");
                  if (s) {
                    n = Number(s.value.split(",")[0]);
                    break;
                  }
                  i--;
                }
              if (((r = qt(t.ha, "EXT-X-TARGETDURATION")), !r))
                throw new H(2, 4, 4024, "EXT-X-TARGETDURATION");
              ((r = Number(r.value)),
                (i = qt(t.ha, "EXT-X-PART-INF")) && (e.T = Number(dt(i, "PART-TARGET"))),
                (t = qt(t.ha, "EXT-X-SERVER-CONTROL")),
                e.oa && e.T
                  ? ((e.o = e.yc
                      ? e.T * 5 <= n
                        ? Math.min(e.T, e.o)
                        : Math.min(n, e.o)
                      : Math.min(e.T, e.o)),
                    (e.Ua = t ? Number(dt(t, "PART-HOLD-BACK")) : 0))
                  : ((e.o = Math.min(n, e.o)),
                    (n = t ? ia(t, "HOLD-BACK") : null),
                    (e.Ta = n ? Number(n.value) : 0)),
                (e.eb = Math.max(r, e.eb)));
            }
            function HS(e, t) {
              var n = 0;
              if (e.g.defaultPresentationDelay) n = e.g.defaultPresentationDelay;
              else if (e.Ua) n = e.Ua;
              else if (e.Ta) n = e.Ta;
              else
                for (var r = t.segments.length, i = r - Math.min(r, e.g.hls.liveSegmentsDelay); i < r; i++) {
                  var s = qt(t.segments[i].ha, "EXTINF");
                  n = s ? n + Number(s.value.split(",")[0]) : n + e.eb;
                }
              (e.u && e.u < 0 && ((n = Math.min(-e.u, n)), (e.u += n)), e.l.Wi(0), e.l.rh(n), e.l.cd(!1));
            }
            function GS(e, t, n, r, i) {
              var s = qt(n, "EXT-X-MAP");
              if (!s) return null;
              var o = dt(s, "URI"),
                u = ms(r(), o, i);
              if (((o = [u.toString(), Ee(s, "BYTERANGE", "")].join("-")), !e.Da.has(o))) {
                var l = void 0,
                  p = null,
                  m = !1;
                n = x(n);
                for (var y = n.next(); !y.done; y = n.next())
                  ((y = y.value),
                    y.name == "EXT-X-KEY"
                      ? ((m = dt(y, "METHOD")),
                        rf(m) && y.id < s.id ? ((m = !1), (l = jS(e, y, t, r, i))) : (m = m != "NONE"))
                      : y.name == "EXT-X-BYTERANGE" && y.id < s.id && (p = y));
                ((t = _4(u, s, p, l, m)), e.Da.set(o, t));
              }
              return e.Da.get(o);
            }
            function _4(e, t, n, r, i) {
              var s = 0,
                o = null;
              return (
                (t = Ee(t, "BYTERANGE")),
                !t && n && (t = n.value),
                t &&
                  ((s = t.split("@")),
                  (o = Number(s[0])),
                  (s = Number(s[1])),
                  (o = s + o - 1),
                  r && ((n = o + 1 - s), n % 16 && (o += 16 - (n % 16)))),
                new Hn(
                  function () {
                    return e;
                  },
                  s,
                  o,
                  null,
                  null,
                  null,
                  r,
                  i,
                )
              );
            }
            function P4(e, t, n, r, i, s, o, u, l, p) {
              var m = r.ha,
                y = qt(m, "EXTINF"),
                v = 0,
                w = 0,
                A = null;
              r.wc.length && (e.m.isLowLatency = !0);
              var I = null;
              if (!e.g.hls.ignoreManifestProgramDateTime) {
                var C = qt(m, "EXT-X-PROGRAM-DATE-TIME");
                C && C.value && ((I = xi(C.value)), (e.kb = !0));
              }
              var k = Mi;
              if ((qt(m, "EXT-X-GAP") && (e.m.gapCount++, (k = 2)), !y)) {
                if (r.wc.length == 0) throw new H(2, 4, 4024, "EXTINF");
                if (!e.oa) return null;
              }
              var R = [];
              C = !1;
              var L = null,
                U = !1,
                G = !1;
              if (e.oa && r.wc.length) {
                v = t && g.ReadableStream && e.g.hls.allowLowLatencyByteRangeOptimization;
                for (var b = I, B = {}, O = 0; O < r.wc.length; B = { Uf: void 0, pe: void 0 }, O++) {
                  var z = r.wc[O],
                    j = O == 0 ? n : R[R.length - 1],
                    X = O == 0 ? i : j.endTime,
                    W = Number(Ee(z, "DURATION")) || e.T;
                  if (W) {
                    var ie = X + W,
                      ne = 0,
                      $ = null;
                    if (
                      (z.name == "EXT-X-PRELOAD-HINT"
                        ? ((ne = (ne = Ee(z, "BYTERANGE-START")) ? Number(ne) : 0),
                          (j = Ee(z, "BYTERANGE-LENGTH"))
                            ? ($ = ne + Number(j) - 1)
                            : ne && ($ = Number.MAX_SAFE_INTEGER))
                        : ((ne = Ee(z, "BYTERANGE")),
                          ($ = x(zS(j, ne))),
                          (ne = $.next().value),
                          ($ = $.next().value)),
                      (B.pe = Ee(z, "URI")),
                      B.pe)
                    ) {
                      ((j = Mi), Ee(z, "GAP") == "YES" && (e.m.gapCount++, (j = 2), (U = !0)), (B.Uf = null));
                      var Q = (function (ce) {
                        return function () {
                          return (ce.Uf == null && (ce.Uf = ms(u(), ce.pe, s)), ce.Uf);
                        };
                      })(B);
                      (v && ne >= 0 && $ != null && ((L = Q), (C = !0)),
                        (X = new Me(X, ie, Q, ne, $, t, 0, 0, 1 / 0, [], "", null, b, j, p)),
                        z.name == "EXT-X-PRELOAD-HINT" && (X.Ug(), (G = !0)),
                        Ee(z, "INDEPENDENT") != "YES" && O > 0 && X.wd(),
                        (z = l),
                        z ||
                          (R.length && R[0].mimeType
                            ? (z = R[0].mimeType)
                            : B.pe && ((B = Bo(B.pe)), (z = sf.get(o).get(B) || null))),
                        z && ((X.mimeType = z), JS.has(z) && (X.ea = null)),
                        R.push(X),
                        b && (b += W));
                    }
                  }
                }
              }
              if (y) {
                if (((y = Number(y.value.split(",")[0])), y == 0)) return null;
                v = i + y;
              } else if (R.length) v = R[R.length - 1].endTime;
              else return null;
              (C && (U || R[0].startByte != 0 ? ((C = !1), (L = null)) : (R = [])),
                (y = qt(m, "EXT-X-BYTERANGE"))
                  ? ((A = x(zS(n, y.value))), (w = A.next().value), (A = A.next().value))
                  : R.length && ((w = R[0].startByte), (A = R[R.length - 1].endByte)),
                (n = ""),
                (y = null),
                o == "image" &&
                  ((n = "1x1"), (o = qt(m, "EXT-X-TILES"))) &&
                  ((n = dt(o, "LAYOUT")), (o = Ee(o, "DURATION")) && (y = Number(o))));
              var ae = null;
              return (
                (t = new Me(
                  i,
                  v,
                  function () {
                    return L ? L() : (ae == null && (ae = ms(u(), r.g, s)), ae || []);
                  },
                  w,
                  A,
                  t,
                  0,
                  0,
                  1 / 0,
                  R,
                  n,
                  y,
                  I,
                  k,
                  p,
                  R.length > 0 && !!r.g,
                )),
                l && ((t.mimeType = l), JS.has(l) && (t.ea = null)),
                C && ((e.yc = !0), t.xi(), G && t.Ug()),
                t
              );
            }
            function zS(e, t) {
              var n = 0,
                r = null;
              return (
                t &&
                  ((n = t.split("@")),
                  (t = Number(n[0])),
                  (n = n[1] ? Number(n[1]) : e.endByte + 1),
                  (r = n + t - 1)),
                [n, r]
              );
            }
            function Pm(e, t, n, r, i) {
              if (n == "video" || n == "audio") {
                var s = e.l.m;
                if (s && !Zu(e, n))
                  for (
                    t = kr(t, "EXT-X-DATERANGE"),
                      t = t
                        .filter(function (j) {
                          return ia(j, "START-DATE") != null;
                        })
                        .sort(function (j, X) {
                          return (
                            (j = dt(j, "START-DATE")),
                            (X = dt(X, "START-DATE")),
                            j < X ? -1 : j > X ? 1 : 0
                          );
                        }),
                      n = 0;
                    n < t.length;
                    n++
                  ) {
                    var o = t[n];
                    try {
                      var u = dt(o, "START-DATE"),
                        l = xi(u);
                      if (!isNaN(l)) {
                        var p = Math.max(0, l - s),
                          m = null,
                          y = Ee(o, "END-DATE");
                        if (y) {
                          var v = xi(y);
                          if (!isNaN(v) && ((m = v - s), m < 0)) continue;
                        }
                        if (m == null) {
                          var w = Ee(o, "DURATION") || Ee(o, "PLANNED-DURATION");
                          if (w) {
                            var A = parseFloat(w);
                            if ((isNaN(A) || (m = p + A), l - s + A < 0)) continue;
                          }
                        }
                        var I = Ee(o, "CLASS") || "com.apple.quicktime.HLS",
                          C = Ee(o, "END-ON-NEXT") == "YES";
                        if (m == null && C) {
                          for (var k = n + 1; k < t.length; k++) {
                            var R = Ee(t[k], "CLASS") || "com.apple.quicktime.HLS";
                            if (I == R) {
                              var L = dt(t[k], "START-DATE"),
                                U = xi(L);
                              if (!isNaN(U) && U && U > l) {
                                m = Math.max(0, U - s);
                                break;
                              }
                            }
                          }
                          if (m == null) continue;
                        }
                        k = ["CLASS", "START-DATE", "END-DATE", "DURATION", "END-ON-NEXT"];
                        for (var G = [], b = x(o.attributes), B = b.next(); !B.done; B = b.next()) {
                          var O = B.value;
                          if (!k.includes(O.name)) {
                            var z = wS(O.value, r);
                            ((O.name == "X-ASSET-URI" || O.name == "X-ASSET-LIST") &&
                              (z = ms(i(), O.value, r)[0]),
                              G.push({
                                key: O.name,
                                description: "",
                                data: z,
                                mimeType: null,
                                pictureType: null,
                              }));
                          }
                        }
                        G.length > 1 && e.h.onMetadata(I, p, m, G);
                      }
                    } catch (j) {}
                  }
              }
            }
            function XS(e, t, n, r, i, s) {
              function o(j) {
                if (((j = Bo(j)), !j)) return null;
                var X = sf.get(s).get(j);
                return (X || (X = bm.get(j)), X);
              }
              var u = t.segments,
                l = null,
                p = null,
                m = null,
                y = null,
                v = void 0,
                w = sa(t.ha, "EXT-X-DISCONTINUITY-SEQUENCE", -1),
                A = sa(t.ha, "EXT-X-MEDIA-SEQUENCE", 0),
                I = qt(t.ha, "EXT-X-SKIP"),
                C = I ? Number(Ee(I, "SKIPPED-SEGMENTS")) : 0,
                k = A + C,
                R = 0;
              (Mn(e) && n.has(k) && (R = n.get(k)),
                R === 0 && e.Fa == Nm && n.size > 0 && !n.has(k) && e.l.i != null && (R = e.l.Hb()));
              var L = [],
                U = null;
              I = [];
              for (var G = 0; G < u.length; G++) {
                var b = u[G];
                ((k = qt(b.ha, "EXT-X-MAP")) && k.id !== p && ((l = GS(e, t, b.ha, i, r)), (p = k.id)),
                  (k = b.g));
                var B = "";
                (k && (B = Bo(k)),
                  B !== y && ((m = o(k)), (y = B)),
                  (B = G == 0 ? R : U.endTime),
                  (k = A + C + G),
                  qt(b.ha, "EXT-X-DISCONTINUITY") && (w++, U && U.ea && (U.ea.g = B)));
                for (var O = x(b.ha), z = O.next(); !z.done; z = O.next())
                  ((z = z.value),
                    z.name == "EXT-X-KEY" && (rf(dt(z, "METHOD")) ? (v = jS(e, z, t, i, r)) : (v = void 0)));
                if ((n.set(k, B), (B = P4(e, l, U, b, B, r, s, i, m, v)))) {
                  if (
                    ((U = sa(b.ha, "EXT-X-BITRATE"))
                      ? (I.push({ bitrate: U, duration: B.endTime - B.startTime }), (B.bandwidth = U))
                      : B.endByte
                        ? (b = wp(B)) &&
                          ((U = B.endTime - B.startTime),
                          (b = (b * 8) / U / 1e3),
                          I.push({ bitrate: b, duration: U }),
                          (B.bandwidth = b))
                        : I.length &&
                          ((U = I.pop()),
                          (U.duration += B.endTime - B.startTime),
                          I.push(U),
                          (B.bandwidth = U.bitrate)),
                    B.bandwidth)
                  )
                    for (U = x(B.g), b = U.next(); !b.done; b = U.next()) b.value.bandwidth = B.bandwidth;
                  ((U = B), (B.i = w), (Zu(e, s) && e.N != null && k < e.N) || L.push(B));
                }
              }
              if (
                ((t = void 0),
                I.length &&
                  ((t = I.reduce(function (j, X) {
                    return j + X.duration;
                  }, 0)),
                  (t = Math.round(
                    (I.reduce(function (j, X) {
                      return j + X.bitrate * X.duration;
                    }, 0) /
                      t) *
                      1e3,
                  ))),
                (I = L.some(function (j) {
                  return j.h != null;
                })))
              ) {
                for (
                  n = {}, r = 0;
                  r < L.length;
                  n = { Ze: void 0, Ye: void 0, Re: void 0, Zc: void 0, Qe: void 0 }, r++
                )
                  if (((n.Zc = L[r]), n.Zc.h == null))
                    for (
                      n.Ye = 0,
                        n.Ze = r,
                        i = (function (j) {
                          return function () {
                            var X = L[j.Ze];
                            if (X) {
                              if (X.h != null) return X.h + j.Ye;
                              ((j.Ye -= X.endTime - X.startTime), (j.Ze += 1));
                            }
                            return null;
                          };
                        })(n),
                        n.Qe = 0,
                        n.Re = r,
                        u = (function (j) {
                          return function () {
                            var X = L[j.Re];
                            if (X) {
                              if ((X != j.Zc && (j.Qe += X.endTime - X.startTime), X.h != null))
                                return X.h + j.Qe;
                              --j.Re;
                            }
                            return null;
                          };
                        })(n);
                      n.Zc.h == null;
                    )
                      ((n.Zc.h = u()), n.Zc.h == null && (n.Zc.h = i()));
              }
              if (I)
                for (n = x(L), r = n.next(); !r.done; r = n.next())
                  for (i = r.value, r = i.h, i = x(i.g), u = i.next(); !u.done; u = i.next())
                    ((u = u.value), (u.h = r), (r += u.endTime - u.startTime));
              if (((n = e.ma), I && n != 1 / 0 && !Zu(e, s)))
                for (e = x(L), I = e.next(); !I.done; I = e.next()) I.value.Dh(n);
              return { segments: L, bandwidth: t };
            }
            function Dm(e, t) {
              if (e == Ve) {
                if (t == "vtt" || t == "wvtt") return "text/vtt";
                if (t && t !== "") return "application/mp4";
              }
              return e != "image" || (t && t != "jpeg")
                ? e == "audio" && t == "mp4a.40.34"
                  ? "audio/mpeg"
                  : t == "mjpg"
                    ? "application/mp4"
                    : null
                : "image/jpeg";
            }
            function tf(e) {
              return e == Ve ? "text/vtt" : sf.get(e).get("mp4");
            }
            function WS(e, t) {
              e = Mn(e) ? Math.trunc((t.length - 1) / 2) : 0;
              for (var n = t[e]; n.Kc() == 2 && e + 1 < t.length; ) (e++, (n = t[e]));
              return { segment: n, segmentIndex: e };
            }
            function D4(e, t, n, r) {
              var i, s, o, u, l, p, m, y, v, w, A, I, C;
              return F(function (k) {
                switch (k.g) {
                  case 1:
                    return (
                      (i = Er),
                      (s = WS(e, r)),
                      (o = s.segment),
                      o.status == 2
                        ? k.return(tf(t))
                        : ((l = o.P()),
                          (p = Bo(l[0])) && ((m = sf.get(t)), (y = m.get(p)) || (y = bm.get(p)))
                            ? k.return(y)
                            : (u = Dm(t, n))
                              ? k.return(u)
                              : ((w = 1),
                                (A = Ut(l, e.g.retryParameters)),
                                te(k, 2),
                                (A.method = "HEAD"),
                                E(k, Fi(e, A, i, { type: w }).promise, 4)))
                    );
                  case 4:
                    ((I = k.h), (v = I.headers["content-type"]), pe(k, 3));
                    break;
                  case 2:
                    if (((C = oe(k)), !C || (C.code != 1002 && C.code != 1001))) {
                      k.A(3);
                      break;
                    }
                    return (
                      (A.method = "GET"),
                      e.g.hls.allowRangeRequestsToGuessMimeType && (A.headers.Range = "bytes=0-0"),
                      E(k, Fi(e, A, i, { type: w }).promise, 6)
                    );
                  case 6:
                    ((I = k.h), (v = I.headers["content-type"]));
                  case 3:
                    if (!v) {
                      k.A(7);
                      break;
                    }
                    if (((u = v.toLowerCase().split(";")[0]), u != "application/octet-stream")) {
                      k.A(8);
                      break;
                    }
                    if (I.data.byteLength) {
                      k.A(9);
                      break;
                    }
                    return ((A.method = "GET"), E(k, Fi(e, A, i, { type: w }).promise, 10));
                  case 10:
                    I = k.h;
                  case 9:
                    Lo(Le(I.data)) && (u = "video/mp2t");
                  case 8:
                    if (u != "application/octet-stream") return k.return(u);
                  case 7:
                    return k.return(tf(t));
                }
              });
            }
            function KS(e, t, n, r, i, s, o) {
              e &&
                ((e.width = Number(t) || void 0),
                (e.height = Number(n) || void 0),
                (e.frameRate = Number(r) || void 0),
                (e.hdr = i || void 0),
                (e.videoLayout = s || void 0),
                (e.colorGamut = o || void 0));
            }
            function Lm(e, t, n) {
              return Fi(e, Ut(t, e.g.retryParameters), 0, { type: n ? 2 : 3 });
            }
            function $S(e) {
              var t, n, r, i, s, o;
              return F(function (u) {
                switch (u.g) {
                  case 1:
                    return e.h ? (te(u, 2), (t = Date.now()), E(u, e.update(), 4)) : u.return();
                  case 4:
                    ((n = Date.now()),
                      Mn(e) &&
                        ((r = (n - t) / 1e3),
                        e.ac.sample(1, r),
                        (i = e.g.updatePeriod > 0 ? e.g.updatePeriod : e.o),
                        (s = Math.max(0, i - Tr(e.ac))),
                        e.F.ka(s)),
                      pe(u, 3));
                    break;
                  case 2:
                    if (((o = oe(u)), !e.h)) return u.return();
                    if (e.g.raiseFatalErrorOnManifestUpdateRequestFailure)
                      return (e.h.onError(o), u.return());
                    ((o.severity = 1), e.h.onError(o), e.F.ka(0.1));
                  case 3:
                    if (!e.h) return u.return();
                    (e.h.onManifestUpdated(), re(u));
                }
              });
            }
            function Mn(e) {
              return e.Fa != of;
            }
            function nf(e, t) {
              ((e.Fa = t), e.l && e.l.cd(!Mn(e)), Mn(e) || e.F.stop());
            }
            function Fi(e, t, n, r) {
              if (!e.$) throw new H(2, 7, 7001);
              return (
                r || (r = {}),
                (r.isPreload = e.cc()),
                (t = e.h.networkingEngine.request(n, t, r)),
                Bs(e.$, t),
                t
              );
            }
            function rf(e) {
              return e == "AES-128" || e == "AES-256" || e == "AES-256-CTR";
            }
            function L4(e, t, n, r) {
              var i, s, o, u, l, p;
              return F(function (m) {
                if (m.g == 1) {
                  if (n == "video/mp2t") throw new H(2, 4, 4040);
                  if (g.shakaMediaKeysPolyfill === "apple") throw new H(2, 4, 4041);
                  if (((i = dt(t, "METHOD")), (s = ["SAMPLE-AES", "SAMPLE-AES-CTR"]), !s.includes(i)))
                    return m.return(null);
                  ((o = "cenc"),
                    i == "SAMPLE-AES" && (o = "cbcs"),
                    (u = dt(t, "URI")),
                    (l = yi("com.apple.fps", o, null, u)));
                  var y = new Dt(u).Db.replace(/-/g, "").toLowerCase();
                  return (p = y.length === 32 && /^[0-9a-f]+$/.test(y) ? y : null) || !r
                    ? m.A(2)
                    : E(m, qS(e, r), 3);
                }
                return (m.g != 2 && (p = m.h), p && l.keyIds.add(p), m.return(l));
              });
            }
            function YS(e, t, n, r, i, s) {
              var o, u, l, p, m, y, v, w, A, I, C, k;
              return F(function (R) {
                switch (R.g) {
                  case 1:
                    if (n == "video/mp2t") throw new H(2, 4, 4040);
                    if (g.shakaMediaKeysPolyfill === "apple") throw new H(2, 4, 4041);
                    if (((o = dt(t, "METHOD")), (u = ["SAMPLE-AES", "SAMPLE-AES-CTR"]), !u.includes(o)))
                      return R.return(null);
                    if (((l = ms(r(), dt(t, "URI"), s)), l[0].startsWith("data:text/plain;base64,"))) {
                      ((p = mi(Sr(l[0].split("data:text/plain;base64,").pop()))), R.A(2));
                      break;
                    }
                    return (
                      (m = l.sort().join("")),
                      e.ya.has(m) ||
                        ((y = Ut(l, e.g.retryParameters)), (v = Fi(e, y, 6).promise), e.ya.set(m, v)),
                      E(R, e.ya.get(m), 3)
                    );
                  case 3:
                    ((w = R.h), (p = mi(w.data)));
                  case 2:
                    if (((A = "00000000000000000000000000000000"), !i)) {
                      R.A(4);
                      break;
                    }
                    return E(R, qS(e, i), 5);
                  case 5:
                    (I = R.h) && (A = I);
                  case 4:
                    return (
                      (C = new Map()),
                      C.set(A, p),
                      (k = "cenc"),
                      o == "SAMPLE-AES" && (k = "cbcs"),
                      R.return(Yv(C, k))
                    );
                }
              });
            }
            function qS(e, t) {
              var n, r, i, s;
              return F(function (o) {
                return o.g == 1
                  ? ((n = null),
                    e.za.has(t)
                      ? ((n = e.za.get(t)), o.A(2))
                      : ((r = Tu(t.P(), t.Jc(), t.Hc(), e.g.retryParameters)),
                        (i = Er),
                        E(o, Fi(e, r, i, { type: 0 }).promise, 3)))
                  : (o.g != 2 && ((s = o.h), t.ue(s.data), (n = vR(s.data)), e.za.set(t, n)), o.return(n));
              });
            }
            de("shaka.hls.HlsParser", Qd);
            var bm = new Map()
                .set("aac", "audio/aac")
                .set("ac3", "audio/ac3")
                .set("ec3", "audio/ec3")
                .set("mp3", "audio/mpeg"),
              b4 = new Map()
                .set("mp4", "audio/mp4")
                .set("mp4a", "audio/mp4")
                .set("m4s", "audio/mp4")
                .set("m4i", "audio/mp4")
                .set("m4a", "audio/mp4")
                .set("m4f", "audio/mp4")
                .set("cmfa", "audio/mp4")
                .set("ts", "video/mp2t")
                .set("tsa", "video/mp2t"),
              N4 = new Map()
                .set("mp4", "video/mp4")
                .set("mp4v", "video/mp4")
                .set("m4s", "video/mp4")
                .set("m4i", "video/mp4")
                .set("m4v", "video/mp4")
                .set("m4f", "video/mp4")
                .set("cmfv", "video/mp4")
                .set("ts", "video/mp2t")
                .set("tsv", "video/mp2t"),
              O4 = new Map()
                .set("mp4", "application/mp4")
                .set("m4s", "application/mp4")
                .set("m4i", "application/mp4")
                .set("m4f", "application/mp4")
                .set("cmft", "application/mp4")
                .set("vtt", "text/vtt")
                .set("webvtt", "text/vtt")
                .set("ttml", "application/ttml+xml"),
              U4 = new Map()
                .set("jpg", "image/jpeg")
                .set("png", "image/png")
                .set("svg", "image/svg+xml")
                .set("webp", "image/webp")
                .set("avif", "image/avif"),
              sf = new Map().set("audio", b4).set("video", N4).set("text", O4).set("image", U4),
              JS = new Set(["video/mp2t"].concat(Y(Si))),
              of = "VOD",
              F4 = "EVENT",
              Nm = "LIVE";
            (ks("application/x-mpegurl", function () {
              return new Qd();
            }),
              ks("application/vnd.apple.mpegurl", function () {
                return new Qd();
              }));
            function af(e) {
              return Vd(e);
            }
            var B4 = new Map()
              .set("com.microsoft.playready", af)
              .set("com.microsoft.playready.recommendation", af)
              .set("com.microsoft.playready.software", af)
              .set("com.microsoft.playready.hardware", af);
            function Om() {
              var e = this;
              ((this.h = this.g = null),
                (this.l = []),
                (this.j = null),
                (this.u = 1),
                (this.i = null),
                (this.F = new $r(5)),
                (this.o = new He(function () {
                  j4(e);
                })),
                (this.C = new Eo()),
                (this.m = new Map()),
                (this.B = function () {
                  return !1;
                }));
            }
            ((h = Om.prototype),
              (h.configure = function (e, t) {
                ((this.g = e), t && (this.B = t));
              }),
              (h.start = function (e, t) {
                var n = this;
                return F(function (r) {
                  if (r.g == 1) return ((n.l = [e]), (n.h = t), E(r, Um(n), 2));
                  if (!n.h) throw new H(2, 7, 7001);
                  return r.return(n.j);
                });
              }));
            function j4(e) {
              var t;
              F(function (n) {
                switch (n.g) {
                  case 1:
                    return (te(n, 2), E(n, Um(e), 4));
                  case 4:
                    pe(n, 3);
                    break;
                  case 2:
                    ((t = oe(n)), e.h && ((t.severity = 1), e.h.onError(t)));
                  case 3:
                    if (!e.h) return n.return();
                    re(n);
                }
              });
            }
            ((h.stop = function () {
              return (
                (this.g = this.h = null),
                (this.l = []),
                (this.j = null),
                this.o != null && (this.o.stop(), (this.o = null)),
                this.m.clear(),
                this.C.destroy()
              );
            }),
              (h.update = function () {
                var e = this,
                  t;
                return F(function (n) {
                  if (n.g == 1) return (te(n, 2), E(n, Um(e), 4));
                  if (n.g != 2) return pe(n, 0);
                  if (((t = oe(n)), !e.h || !t)) return n.return();
                  (e.h.onError(t), re(n));
                });
              }),
              (h.onExpirationUpdated = function () {}),
              (h.onInitialVariantChosen = function () {}),
              (h.banLocation = function () {}),
              (h.setMediaElement = function () {}));
            function Um(e) {
              var t, n, r, i, s, o, u;
              return F(function (l) {
                if (l.g == 1)
                  return (
                    (t = Ut(e.l, e.g.retryParameters)),
                    (n = e.h.networkingEngine),
                    (r = Date.now()),
                    (i = n.request(0, t, { type: 5, isPreload: e.B() })),
                    Bs(e.C, i),
                    E(l, i.promise, 2)
                  );
                if (((s = l.h), !e.h)) return l.return();
                s.uri && !e.l.includes(s.uri) && e.l.unshift(s.uri);
                var p = s.uri,
                  m = s.data,
                  y = e.g.mss.manifestPreprocessor;
                if (y != sd) {
                  if (
                    (Je(
                      "manifest.mss.manifestPreprocessor configuration",
                      "Please Use manifest.mss.manifestPreprocessorTXml instead.",
                    ),
                    (m = Zw(m, "SmoothStreamingMedia")),
                    !m)
                  )
                    throw new H(2, 4, 4046, p);
                  (y(m), (m = Ur(m.outerHTML)));
                }
                var v = Wa(m, "SmoothStreamingMedia");
                if (!v) throw new H(2, 4, 4046, p);
                if (
                  ((p = e.g.mss.manifestPreprocessorTXml),
                  p != od && p(v),
                  e.i || (e.i = new De(null, 0)),
                  (p = be(v, "IsLive", uc, !1)))
                )
                  throw new H(2, 4, 4047);
                (e.i.cd(!p),
                  (y = be(v, "TimeScale", on, 1e7)),
                  (m = be(v, "DVRWindowLength", on)),
                  p && (m === 0 || isNaN(m)) && (m = 1 / 0));
                var w = be(v, "CanSeek", uc, !1);
                (m === 0 && w && (m = 1 / 0),
                  (w = null),
                  m && m > 0 && (w = m / y),
                  p && !isNaN(e.g.availabilityWindowOverride) && (w = e.g.availabilityWindowOverride),
                  w == null && (w = 1 / 0),
                  e.i.Lf(w),
                  (m = be(v, "Duration", on, 1 / 0)),
                  p || e.i.Ab(m / y),
                  (p = { variants: [], textStreams: [], timescale: y, duration: m / y }));
                var A;
                for (
                  w = st(v, "Protection"), y = e.g.mss.keySystemsBySystemId, m = [], w = x(w), A = w.next();
                  !A.done;
                  A = w.next()
                )
                  m = m.concat(st(A.value, "ProtectionHeader"));
                if (m.length) {
                  for (w = [], A = 0; A < m.length; A++) {
                    var I = m[A],
                      C = I.attributes.SystemID.toLowerCase(),
                      k = y[C];
                    if (k) {
                      var R;
                      e: {
                        if ((R = Mw(I))) {
                          R = x(Jr(R, "DATA"));
                          for (var L = R.next(); !L.done; L = R.next())
                            if ((L = vt(L.value, "KID"))) {
                              ((R = Sr(Lt(L))),
                                (R = new Uint8Array(
                                  [R[3], R[2], R[1], R[0], R[5], R[4], R[7], R[6]].concat(Y(R.slice(8))),
                                )),
                                (R = mi(R)));
                              break e;
                            }
                        }
                        R = null;
                      }
                      ((L = Sr(Lt(I))),
                        (C = Rs(C.replace(/-/g, ""))),
                        (C = [{ initData: kc(L, C, new Set(), 0), initDataType: "cenc", keyId: R }]),
                        (C = yi(k, "cenc", C)),
                        R && C.keyIds.add(R),
                        (k = B4.get(k)) && (C.licenseServerUri = k(I)),
                        w.push(C));
                    }
                  }
                  y = w;
                } else y = [];
                for (
                  A = y, w = [], y = [], m = [], v = st(v, "StreamIndex"), v = x(v), I = v.next();
                  !I.done;
                  I = v.next()
                ) {
                  ((I = I.value),
                    (k = st(I, "QualityLevel")),
                    (C = p.timescale),
                    (R = p.duration),
                    (L = st(I, "c")));
                  for (var U = [], G = 0, b = 0; b < L.length; ++b) {
                    var B = L[b],
                      O = L[b + 1],
                      z = be(B, "t", on),
                      j = be(B, "d", on);
                    if (((B = be(B, "r", sn)), !j)) break;
                    if (((z = z != null ? z : G), (B = B || 0) && B--, B < 0))
                      if (O) {
                        if (((O = be(O, "t", on)), O == null)) break;
                        if (z >= O) break;
                        B = Math.ceil((O - z) / j) - 1;
                      } else {
                        if (R == 1 / 0) break;
                        if (z / C >= R) break;
                        B = Math.ceil((R * C - z) / j) - 1;
                      }
                    for (O = 0; O <= B; ++O)
                      ((G = z + j), U.push({ start: z / C, end: G / C, Ld: z }), (z = G));
                  }
                  for (C = U, k = x(k), R = k.next(); !R.done; R = k.next())
                    (R = V4(e, I, R.value, C, A, p)) &&
                      (R.type != "audio" || e.g.disableAudio
                        ? R.type != "video" || e.g.disableVideo
                          ? R.type != Ve || e.g.disableText || m.push(R)
                          : y.push(R)
                        : w.push(R));
                }
                for (v = [], w = x(w.length > 0 ? w : [null]), A = w.next(); !A.done; A = w.next())
                  for (A = A.value, I = x(y.length > 0 ? y : [null]), U = I.next(); !U.done; U = I.next())
                    ((k = v),
                      (C = k.push),
                      (R = e),
                      (L = A),
                      (U = U.value),
                      (b = 0),
                      L && L.bandwidth && L.bandwidth > 0 && (b += L.bandwidth),
                      U && U.bandwidth && U.bandwidth > 0 && (b += U.bandwidth),
                      (R = {
                        id: R.u++,
                        language: L ? L.language : "und",
                        disabledUntilTime: 0,
                        primary: (!!L && L.primary) || (!!U && U.primary),
                        audio: L,
                        video: U,
                        bandwidth: b,
                        allowedByApplication: !0,
                        allowedByKeySystem: !0,
                        decodingInfos: [],
                      }),
                      C.call(k, R));
                ((p.variants = v),
                  (p.textStreams = m),
                  e.j
                    ? ((e.j.variants = p.variants), (e.j.textStreams = p.textStreams), e.h.filter(e.j))
                    : ((e.j = {
                        presentationTimeline: e.i,
                        variants: p.variants,
                        textStreams: p.textStreams,
                        imageStreams: [],
                        offlineSessionIds: [],
                        sequenceMode: e.g.mss.sequenceMode,
                        ignoreManifestTimestampsInSegmentsMode: !1,
                        type: "MSS",
                        serviceDescription: null,
                        nextUrl: null,
                        periodCount: 1,
                        gapCount: 0,
                        isLowLatency: !1,
                        startTime: null,
                      }),
                      e.i.qf()),
                  Promise.resolve(),
                  (o = Date.now()),
                  (u = (o - r) / 1e3),
                  e.F.sample(1, u),
                  re(l));
              });
            }
            function V4(e, t, n, r, i, s) {
              var o = t.attributes.Type;
              if (o !== "audio" && o !== "video" && o !== "text")
                return (Be("Ignoring unrecognized type:", o), null);
              var u = t.attributes.Language,
                l = e.u++,
                p = be(n, "Bitrate", si),
                m = be(n, "MaxWidth", si),
                y = be(n, "MaxHeight", si),
                v = be(n, "Channels", si),
                w = be(n, "SamplingRate", si),
                A = s.duration;
              r.length && (A = r[r.length - 1].end - r[0].start);
              var I = e.i.getDuration();
              (e.i.Ab(Math.min(A, I)),
                (I = t.attributes.Name) && (I += n.attributes.Index),
                I || (I = String(l)));
              var C = {
                id: l,
                originalId: I,
                groupId: null,
                createSegmentIndex: function () {
                  return Promise.resolve();
                },
                closeSegmentIndex: function () {
                  return Promise.resolve();
                },
                segmentIndex: null,
                mimeType: "",
                codecs: "",
                frameRate: void 0,
                pixelAspectRatio: void 0,
                bandwidth: p || 0,
                width: m || void 0,
                height: y || void 0,
                kind: "",
                encrypted: i.length > 0,
                drmInfos: i,
                keyIds: new Set(),
                language: nt(u || "und"),
                originalLanguage: u,
                label: "",
                type: "",
                primary: !1,
                trickModeVideo: null,
                dependencyStream: null,
                emsgSchemeIdUris: [],
                roles: [],
                forced: !1,
                channelsCount: v,
                audioSamplingRate: w,
                spatialAudio: !1,
                closedCaptions: null,
                hdr: void 0,
                colorGamut: void 0,
                videoLayout: void 0,
                tilesLayout: void 0,
                matchedStreams: [],
                mssPrivateData: { duration: A, timescale: s.timescale, codecPrivateData: null },
                accessibilityPurpose: null,
                external: !1,
                fastSwitching: !1,
                fullMimeTypes: new Set(),
                isAudioMuxedInVideo: !1,
                baseOriginalId: null,
              };
              if (
                ((i = t.attributes.Subtype) &&
                  ((i = K4.get(i)) && C.roles.push(i), i === "main" && (C.primary = !0)),
                (i = n.attributes.FourCC),
                (i === null || i === "") && (i = t.attributes.FourCC),
                !i)
              ) {
                if (o === "audio") i = "AAC";
                else if (o === "video")
                  return (
                    Be(
                      'FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"',
                    ),
                    null
                  );
              }
              if (!W4.includes(i.toUpperCase())) return (Be("Codec not supported:", i), null);
              switch (((n = H4(n, o, i, C)), (C.mssPrivateData.codecPrivateData = n), o)) {
                case "audio":
                  if (!n) return (Be("Quality unsupported without CodecPrivateData", o), null);
                  ((C.type = "audio"), (C.mimeType = "mss/audio/mp4"), (C.codecs = G4(i, n)));
                  break;
                case "video":
                  if (!n) return (Be("Quality unsupported without CodecPrivateData", o), null);
                  ((C.type = "video"), (C.mimeType = "mss/video/mp4"), (C.codecs = z4(n)));
                  break;
                case "text":
                  ((C.type = Ve),
                    (C.mimeType = "application/mp4"),
                    (i === "TTML" || i === "DFXP") && (C.codecs = "stpp"));
              }
              return (
                C.fullMimeTypes.add(Rt(C.mimeType, C.codecs)),
                (C.createSegmentIndex = function () {
                  if (C.segmentIndex) return Promise.resolve();
                  if (e.m.has(C.id)) var k = e.m.get(C.id);
                  else
                    ((k = []),
                      C.type == "video" && (k = C.mssPrivateData.codecPrivateData.split("00000001").slice(1)),
                      (k = {
                        id: C.id,
                        type: C.type,
                        codecs: C.codecs,
                        encrypted: C.encrypted,
                        timescale: C.mssPrivateData.timescale,
                        duration: C.mssPrivateData.duration,
                        Bb: k,
                        Ga: new Uint8Array([]),
                        Sa: new Uint8Array([]),
                        Za: 0,
                        $a: 0,
                        data: null,
                        stream: C,
                      }),
                      (k = ko(new Ro([k]))),
                      e.m.set(C.id, k));
                  return (
                    (k = X4(
                      e,
                      new Hn(
                        function () {
                          return [];
                        },
                        0,
                        null,
                        Xc(C),
                        C.mssPrivateData.timescale,
                        k,
                        null,
                        C.encrypted,
                      ),
                      C,
                      t,
                      r,
                    )),
                    (C.segmentIndex = new Qe(k)),
                    Promise.resolve()
                  );
                }),
                (C.closeSegmentIndex = function () {
                  C.segmentIndex && (C.segmentIndex.release(), (C.segmentIndex = null));
                }),
                C
              );
            }
            function H4(e, t, n, r) {
              if ((e = e.attributes.CodecPrivateData)) return e;
              if (t !== "audio") return null;
              ((t = r.channelsCount || 2), (e = r.audioSamplingRate || 44100));
              var i = {
                96e3: 0,
                88200: 1,
                64e3: 2,
                48e3: 3,
                44100: 4,
                32e3: 5,
                24e3: 6,
                22050: 7,
                16e3: 8,
                12e3: 9,
                11025: 10,
                8e3: 11,
                7350: 12,
              };
              return (
                (r = i[e]),
                n === "AACH"
                  ? ((n = new Uint8Array(4)),
                    (e = i[e * 2]),
                    (n[0] = 40 | (r >> 1)),
                    (n[1] = (r << 7) | (t << 3) | (e >> 1)),
                    (n[2] = (e << 7) | 8),
                    (n[3] = 0),
                    (t = new Uint16Array(2)),
                    (t[0] = (n[0] << 8) + n[1]),
                    (t[1] = (n[2] << 8) + n[3]),
                    t[0].toString(16) + t[1].toString(16))
                  : ((n = new Uint8Array(2)),
                    (n[0] = 16 | (r >> 1)),
                    (n[1] = (r << 7) | (t << 3)),
                    (t = new Uint16Array(1)),
                    (t[0] = (n[0] << 8) + n[1]),
                    t[0].toString(16))
              );
            }
            function G4(e, t) {
              var n = 0;
              return (
                e === "AACH" && (n = 5),
                t
                  ? n === 0 && (n = (parseInt(t.substr(0, 2), 16) & 248) >> 3)
                  : ((n = 2), e === "AACH" && (n = 5)),
                "mp4a.40." + n
              );
            }
            function z4(e) {
              var t = /00000001[0-9]7/.exec(e);
              return t.length && e ? "avc1." + e.substr(e.indexOf(t[0]) + 10, 6) : "";
            }
            function X4(e, t, n, r, i) {
              var s = r.attributes.Url.replace("{bitrate}", String(n.bandwidth));
              ((r = []), (i = x(i)));
              for (var o = i.next(), u = {}; !o.done; u = { Pf: void 0 }, o = i.next())
                ((u.Pf = o.value),
                  r.push(
                    new Me(
                      u.Pf.start,
                      u.Pf.end,
                      (function (l) {
                        return function () {
                          return Yt(e.l, [s.replace("{start time}", String(l.Pf.Ld))]);
                        };
                      })(u),
                      0,
                      null,
                      t,
                      0,
                      0,
                      n.mssPrivateData.duration,
                    ),
                  ));
              return r;
            }
            de("shaka.mss.MssParser", Om);
            var W4 = "AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),
              K4 = new Map().set("CAPT", "main").set("SUBT", "alternate").set("DESC", "main");
            ks("application/vnd.ms-sstr+xml", function () {
              return new Om();
            });
            function QS(e, t, n, r, i, s, o) {
              if ((n >= 200 && n <= 299 && n != 202) || n == 304)
                return {
                  uri: i || r,
                  originalUri: r,
                  data: t,
                  status: n,
                  headers: e,
                  fromCache: !!e["x-shaka-from-cache"],
                  originalRequest: s,
                };
              s = null;
              try {
                s = ni(t);
              } catch (u) {}
              throw new H(n == 401 || n == 403 ? 2 : 1, 1, 1001, r, n, s, e, o, i || r);
            }
            function Fm() {}
            function uf(e, t, n, r, i, s) {
              var o = new Z4();
              try {
                Co(t.headers).forEach(function (m, y) {
                  o.append(y, m);
                });
              } catch (m) {
                return ts(new H(1, 1, 1002, e, m, n));
              }
              var u = new J4(),
                l = { Vh: !1, ij: !1 };
              if (
                ((e = $4(
                  e,
                  t,
                  n,
                  {
                    body: t.body || void 0,
                    headers: o,
                    method: t.method,
                    signal: u.signal,
                    credentials: t.allowCrossSiteCredentials ? "include" : void 0,
                  },
                  l,
                  r,
                  i,
                  t.streamDataCallback,
                  s.minBytesForProgressEvents || 0,
                )),
                (e = new _t(e, function () {
                  return ((l.Vh = !0), u.abort(), Promise.resolve());
                })),
                (t = t.retryParameters.timeout))
              ) {
                var p = new He(function () {
                  ((l.ij = !0), u.abort());
                });
                (p.ka(t / 1e3),
                  e.finally(function () {
                    p.stop();
                  }));
              }
              return e;
            }
            function $4(e, t, n, r, i, s, o, u, l) {
              var p, m, y, v, w, A, I, C, k, R, L, U, G, b, B;
              return F(function (O) {
                switch (O.g) {
                  case 1:
                    return (
                      (p = q4),
                      (m = Q4),
                      (v = new ArrayBuffer(0)),
                      (A = w = 0),
                      (I = {}),
                      (C = Date.now()),
                      te(O, 2),
                      E(O, p(e, r), 4)
                    );
                  case 4:
                    if (((y = O.h), (I = Y4(y.headers)), o(I), r.method == "HEAD")) {
                      O.A(5);
                      break;
                    }
                    return (
                      (R = (k = y.headers.get("Content-Length")) ? parseInt(k, 10) : 0),
                      y.body
                        ? ((L = y.clone().body.getReader()),
                          (U = function (z) {
                            function j() {
                              var X, W, ie, ne;
                              return F(function ($) {
                                switch ($.g) {
                                  case 1:
                                    return (te($, 2), E($, L.read(), 4));
                                  case 4:
                                    ((X = $.h), pe($, 3));
                                    break;
                                  case 2:
                                    return (oe($), $.return());
                                  case 3:
                                    if (X.done) {
                                      $.A(5);
                                      break;
                                    }
                                    if (((w += X.value.byteLength), !u)) {
                                      $.A(5);
                                      break;
                                    }
                                    return E($, u(X.value), 5);
                                  case 5:
                                    ((W = Date.now()),
                                      (ie = w - A),
                                      ((W - C > 100 && ie >= l) || X.done) &&
                                        ((ne = X.done ? 0 : R - w), s(W - C, ie, ne), (A = w), (C = W)),
                                      X.done ? z.close() : (z.enqueue(X.value), j()),
                                      re($));
                                }
                              });
                            }
                            j();
                          }),
                          new m({ start: U }),
                          E(O, y.arrayBuffer(), 8))
                        : E(O, y.arrayBuffer(), 9)
                    );
                  case 8:
                    ((v = O.h), O.A(5));
                    break;
                  case 9:
                    ((v = O.h), (G = Date.now()), s(G - C, v.byteLength, 0));
                  case 5:
                    (t.headers.Range &&
                      ((b = t.headers.Range.replace("bytes=", "")
                        .split("-")
                        .filter(function (z) {
                          return z;
                        })
                        .map(function (z) {
                          return parseInt(z, 10);
                        })),
                      b.length == 2 &&
                        v.byteLength != b[1] - b[0] + 1 &&
                        Be("Payload length does not match range requested bytes", t, y)),
                      pe(O, 3));
                    break;
                  case 2:
                    throw (
                      (B = oe(O)),
                      i.Vh
                        ? new H(1, 1, 7001, e, n)
                        : i.ij
                          ? new H(1, 1, 1003, e, n)
                          : new H(1, 1, 1002, e, B, n)
                    );
                  case 3:
                    return O.return(QS(I, v, y.status, e, y.url, t, n));
                }
              });
            }
            function Y4(e) {
              var t = {};
              return (
                e.forEach(function (n, r) {
                  t[r.trim()] = n;
                }),
                t
              );
            }
            function ZS() {
              if (g.ReadableStream)
                try {
                  new ReadableStream({});
                } catch (e) {
                  return !1;
                }
              else return !1;
              if (g.Response) {
                if (!new Response("").body) return !1;
              } else return !1;
              return !(!g.fetch || "polyfill" in g.fetch || !g.AbortController);
            }
            (de("shaka.net.HttpFetchPlugin", Fm), (Fm.isSupported = ZS), (Fm.parse = uf));
            var q4 = g.fetch,
              J4 = g.AbortController,
              Q4 = g.ReadableStream,
              Z4 = g.Headers;
            ZS() && (Ei("http", uf, 2, !0), Ei("https", uf, 2, !0), Ei("blob", uf, 2, !0));
            function eA() {}
            function lf(e, t, n, r, i, s) {
              var o = new eD(),
                u = Date.now(),
                l = 0,
                p = new Promise(function (m, y) {
                  (o.open(t.method, e, !0),
                    (o.responseType = "arraybuffer"),
                    (o.timeout = t.retryParameters.timeout),
                    (o.withCredentials = t.allowCrossSiteCredentials));
                  var v = {};
                  ((o.onabort = function () {
                    y(new H(1, 1, 7001, e, n));
                  }),
                    (o.onreadystatechange = function () {
                      if (o.readyState === XMLHttpRequest.HEADERS_RECEIVED) {
                        var A = o.getAllResponseHeaders().trim().split("\r\n"),
                          I = {};
                        A = x(A);
                        for (var C = A.next(); !C.done; C = A.next())
                          ((C = C.value.split(": ")), (I[C[0].toLowerCase()] = C.slice(1).join(": ")));
                        ((v = I), i(v));
                      }
                    }),
                    (o.onload = function (A) {
                      var I = o.response;
                      try {
                        r(Date.now() - u, A.loaded - l, 0);
                        var C = QS(v, I, o.status, e, o.responseURL, t, n);
                        m(C);
                      } catch (k) {
                        y(k);
                      }
                    }),
                    (o.onerror = function (A) {
                      y(new H(1, 1, 1002, e, A, n));
                    }),
                    (o.ontimeout = function () {
                      y(new H(1, 1, 1003, e, n));
                    }),
                    (o.onprogress = function (A) {
                      var I = Date.now(),
                        C = s.minBytesForProgressEvents || 0,
                        k = A.loaded - l;
                      ((I - u > 100 && k >= C) || (A.lengthComputable && A.loaded == A.total)) &&
                        (r(I - u, k, o.readyState == 4 ? 0 : A.total - A.loaded), (l = A.loaded), (u = I));
                    }));
                  for (var w in t.headers)
                    try {
                      o.setRequestHeader(w.toLowerCase(), t.headers[w]);
                    } catch (A) {
                      throw new H(1, 1, 1002, e, A, n);
                    }
                  o.send(t.body);
                });
              return new _t(p, function () {
                return (o.abort(), Promise.resolve());
              });
            }
            (de("shaka.net.HttpXHRPlugin", eA), (eA.parse = lf));
            var eD = g.XMLHttpRequest;
            (Ei("http", lf, 1, !0), Ei("https", lf, 1, !0), Ei("blob", lf, 1, !0));
            function tA(e, t, n, r, i) {
              ((this.g = e), (this.i = t), (this.groupId = n), (this.h = r), (this.j = i));
            }
            function Bm(e) {
              var t = e.$b(!1);
              return t
                ? gi(t)
                : e
                    .P()
                    .map(function (n) {
                      return "{" + encodeURI(n.split("#xywh=")[0]) + "}";
                    })
                    .join("") +
                    ":" +
                    e.startByte +
                    ":" +
                    e.endByte;
            }
            function tD(e, t) {
              return Tu(e.g.P(), e.g.startByte, e.g.endByte, t.streaming.retryParameters);
            }
            function nA() {
              ((this.g = this.j = this.i = 0), (this.h = new Map()), (this.l = 0));
            }
            function rA(e, t) {
              e.i += t;
              var n = e.l;
              return (e.l++, e.h.set(n, t), n);
            }
            nA.prototype.close = function (e, t) {
              if (this.h.has(e)) {
                var n = this.h.get(e);
                (this.h.delete(e), (this.j += n), (this.g += t));
              }
            };
            function iA(e) {
              return e.i == 0 ? 0 : e.j / e.i;
            }
            function jm(e) {
              var t = this;
              ((this.u = e),
                (this.i = new Map()),
                (this.h = new Io(function () {
                  return Vm(t).catch(function () {});
                })),
                (this.j = []),
                (this.o = function () {}),
                (this.m = function () {}),
                (this.g = new nA()),
                (this.l = !1));
            }
            jm.prototype.destroy = function () {
              return this.h.destroy();
            };
            function nD(e, t, n) {
              ((e.o = t), (e.m = n));
            }
            function Vm(e) {
              e.l = !0;
              var t = e.j.map(function (n) {
                return n();
              });
              return ((e.j = []), Promise.all(t));
            }
            jm.prototype.queue = function (e, t, n, r, i) {
              var s = this;
              ht(this.h);
              var o = (this.i.get(e) || Promise.resolve()).then(function () {
                var u, l, p, m, y, v, w;
                return F(function (A) {
                  if (A.g == 1) return E(A, sD(s, t), 2);
                  if (((u = A.h), s.h.g)) throw new H(2, 9, 7001);
                  if (r)
                    for (m in ((l = Le(u)), (p = new hp(l)), p.data))
                      ((y = Number(m)), (v = p.data[y]), (w = p.g[y]), s.m(v, w));
                  return (s.g.close(n, u.byteLength), s.o(iA(s.g), s.g.g), A.return(i(u)));
                });
              });
              return (this.i.set(e, o), o);
            };
            function rD(e, t, n, r, i, s) {
              ht(e.h);
              var o = (e.i.get(t) || Promise.resolve()).then(function () {
                if (e.h.g) throw new H(2, 9, 7001);
                if (i) {
                  var u = Le(n);
                  u = new hp(u);
                  for (var l in u.data) {
                    var p = Number(l);
                    e.m(u.data[p], u.g[p]);
                  }
                }
                return (e.g.close(r, n.byteLength), e.o(iA(e.g), e.g.g), s(n));
              });
              e.i.set(t, o);
            }
            function iD(e) {
              return F(function (t) {
                return t.g == 1 ? E(t, Promise.all(e.i.values()), 2) : t.return(e.g.g);
              });
            }
            function sD(e, t) {
              var n, r, i, s;
              return F(function (o) {
                return o.g == 1
                  ? ((n = Er),
                    (r = e.u.request(n, t)),
                    (i = function () {
                      return r.abort();
                    }),
                    e.j.push(i),
                    E(o, r.promise, 2))
                  : ((s = o.h), Or(e.j, i), o.return(s.data));
              });
            }
            function cf(e, t) {
              var n = this;
              ((this.i = e),
                (this.h = e.objectStore(t)),
                (this.g = new lt()),
                (e.onabort = function (r) {
                  (r.preventDefault(), n.g.reject());
                }),
                (e.onerror = function (r) {
                  (r.preventDefault(), n.g.reject());
                }),
                (e.oncomplete = function () {
                  n.g.resolve();
                }));
            }
            cf.prototype.abort = function () {
              var e = this;
              return F(function (t) {
                if (t.g == 1) {
                  try {
                    e.i.abort();
                  } catch (n) {}
                  return (te(t, 2), E(t, e.g, 4));
                }
                if (t.g != 2) return pe(t, 0);
                (oe(t), re(t));
              });
            };
            function Hm(e, t) {
              return new Promise(function (n, r) {
                var i = e.h.openCursor();
                ((i.onerror = r),
                  (i.onsuccess = function () {
                    var s;
                    return F(function (o) {
                      if (o.g == 1)
                        return i.result == null
                          ? (n(), o.return())
                          : ((s = i.result), E(o, t(s.key, s.value, s), 2));
                      (s.continue(), re(o));
                    });
                  }));
              });
            }
            ((cf.prototype.store = function () {
              return this.h;
            }),
              (cf.prototype.promise = function () {
                return this.g;
              }));
            function Gm(e) {
              ((this.h = e), (this.g = []));
            }
            Gm.prototype.destroy = function () {
              return Promise.all(
                this.g.map(function (e) {
                  return e.abort();
                }),
              );
            };
            function qs(e, t) {
              return df(e, t, "readwrite");
            }
            function df(e, t, n) {
              n = e.h.transaction([t], n);
              var r = new cf(n, t);
              return (
                e.g.push(r),
                r.promise().then(
                  function () {
                    Or(e.g, r);
                  },
                  function () {
                    Or(e.g, r);
                  },
                ),
                r
              );
            }
            function Js(e, t, n) {
              ((this.h = new Gm(e)), (this.i = t), (this.g = n));
            }
            ((h = Js.prototype),
              (h.destroy = function () {
                return this.h.destroy();
              }),
              (h.hasFixedKeySpace = function () {
                return !0;
              }),
              (h.addSegments = function () {
                return sA(this.i);
              }),
              (h.removeSegments = function (e, t) {
                return oA(this, this.i, e, t);
              }),
              (h.getSegments = function (e) {
                var t = this,
                  n;
                return F(function (r) {
                  return r.g == 1
                    ? E(r, aA(t, t.i, e), 2)
                    : ((n = r.h),
                      r.return(
                        n.map(function (i) {
                          return t.Xh(i);
                        }),
                      ));
                });
              }),
              (h.addManifests = function () {
                return sA(this.g);
              }),
              (h.updateManifest = function () {
                return Promise.reject(new H(2, 9, 9016, "Cannot modify values in " + this.g));
              }));
            function oD(e, t, n) {
              e = qs(e.h, e.g);
              var r = e.store();
              return (
                (r.get(t).onsuccess = function () {
                  r.put(n, t);
                }),
                e.promise()
              );
            }
            ((h.updateManifestExpiration = function (e, t) {
              var n = qs(this.h, this.g),
                r = n.store();
              return (
                (r.get(e).onsuccess = function (i) {
                  (i = i.target.result) && ((i.expiration = t), r.put(i, e));
                }),
                n.promise()
              );
            }),
              (h.removeManifests = function (e, t) {
                return oA(this, this.g, e, t);
              }),
              (h.getManifests = function (e) {
                var t = this,
                  n;
                return F(function (r) {
                  return r.g == 1
                    ? E(r, aA(t, t.g, e), 2)
                    : ((n = r.h),
                      r.return(
                        Promise.all(
                          n.map(function (i) {
                            return t.Ud(i);
                          }),
                        ),
                      ));
                });
              }),
              (h.getAllManifests = function () {
                var e = this,
                  t,
                  n;
                return F(function (r) {
                  return r.g == 1
                    ? ((t = df(e.h, e.g, "readonly")),
                      (n = new Map()),
                      E(
                        r,
                        Hm(t, function (i, s) {
                          var o;
                          return F(function (u) {
                            if (u.g == 1) return E(u, e.Ud(s), 2);
                            ((o = u.h), n.set(i, o), re(u));
                          });
                        }),
                        2,
                      ))
                    : r.g != 3
                      ? E(r, t.promise(), 3)
                      : r.return(n);
                });
              }),
              (h.Xh = function (e) {
                return e;
              }),
              (h.Ud = function (e) {
                return Promise.resolve(e);
              }));
            function sA(e) {
              return Promise.reject(new H(2, 9, 9011, "Cannot add new value to " + e));
            }
            h.add = function (e, t) {
              var n = this,
                r,
                i,
                s,
                o,
                u,
                l,
                p;
              return F(function (m) {
                if (m.g == 1) {
                  for (
                    r = qs(n.h, e), i = r.store(), s = [], o = x(t), u = o.next(), l = {};
                    !u.done;
                    l = { hh: void 0 }, u = o.next()
                  )
                    ((p = u.value),
                      (l.hh = i.add(p)),
                      (l.hh.onsuccess = (function (y) {
                        return function () {
                          s.push(y.hh.result);
                        };
                      })(l)));
                  return E(m, r.promise(), 2);
                }
                return m.return(s);
              });
            };
            function oA(e, t, n, r) {
              ((e = qs(e.h, t)), (t = e.store()), (n = x(n)));
              for (var i = n.next(), s = {}; !i.done; s = { Tg: void 0 }, i = n.next())
                ((s.Tg = i.value),
                  (t.delete(s.Tg).onsuccess = (function (o) {
                    return function () {
                      return r(o.Tg);
                    };
                  })(s)));
              return e.promise();
            }
            function aA(e, t, n) {
              var r, i, s, o, u, l, p;
              return F(function (m) {
                if (m.g == 1) {
                  for (
                    r = df(e.h, t, "readonly"), i = r.store(), s = {}, o = [], u = x(n), l = u.next(), p = {};
                    !l.done;
                    p = { Ef: void 0, lf: void 0 }, l = u.next()
                  )
                    ((p.lf = l.value),
                      (p.Ef = i.get(p.lf)),
                      (p.Ef.onsuccess = (function (y) {
                        return function () {
                          (y.Ef.result == null && o.push(y.lf), (s[y.lf] = y.Ef.result));
                        };
                      })(p)));
                  return E(m, r.promise(), 2);
                }
                if (o.length) throw new H(2, 9, 9012, "Could not find values for " + o);
                return m.return(
                  n.map(function (y) {
                    return s[y];
                  }),
                );
              });
            }
            function el(e) {
              this.g = new Gm(e);
            }
            ((el.prototype.destroy = function () {
              return this.g.destroy();
            }),
              (el.prototype.getAll = function () {
                var e = this,
                  t,
                  n;
                return F(function (r) {
                  return r.g == 1
                    ? ((t = df(e.g, "session-ids", "readonly")),
                      (n = []),
                      E(
                        r,
                        Hm(t, function (i, s) {
                          n.push(s);
                        }),
                        2,
                      ))
                    : r.g != 3
                      ? E(r, t.promise(), 3)
                      : r.return(n);
                });
              }),
              (el.prototype.add = function (e) {
                var t = qs(this.g, "session-ids"),
                  n = t.store();
                e = x(e);
                for (var r = e.next(); !r.done; r = e.next()) n.add(r.value);
                return t.promise();
              }),
              (el.prototype.remove = function (e) {
                var t = this,
                  n;
                return F(function (r) {
                  return r.g == 1
                    ? ((n = qs(t.g, "session-ids")),
                      E(
                        r,
                        Hm(n, function (i, s, o) {
                          e.includes(s.sessionId) && o.delete();
                        }),
                        2,
                      ))
                    : E(r, n.promise(), 0);
                });
              }));
            function Xn() {
              this.g = new Map();
            }
            ((Xn.prototype.destroy = function () {
              for (var e = [], t = x(this.g.values()), n = t.next(); !n.done; n = t.next())
                e.push(n.value.destroy());
              return (this.g.clear(), Promise.all(e));
            }),
              (Xn.prototype.init = function () {
                var e = this;
                tl.forEach(function (i, s) {
                  (i = i()) && e.g.set(s, i);
                });
                for (var t = [], n = x(this.g.values()), r = n.next(); !r.done; r = n.next())
                  t.push(r.value.init());
                return Promise.all(t);
              }));
            function uA(e) {
              var t = null;
              if (
                (e.g.forEach(function (n, r) {
                  n.getCells().forEach(function (i, s) {
                    i.hasFixedKeySpace() || t || (t = { path: { Pb: r, cb: s }, cb: i });
                  });
                }),
                t)
              )
                return t;
              throw new H(2, 9, 9013, "Could not find a cell that supports add-operations");
            }
            function aD(e, t) {
              e.g.forEach(function (n, r) {
                n.getCells().forEach(function (i, s) {
                  t({ Pb: r, cb: s }, i);
                });
              });
            }
            function ff(e, t, n) {
              if (((e = e.g.get(t)), !e)) throw new H(2, 9, 9013, "Could not find mechanism with name " + t);
              if (((t = e.getCells().get(n)), !t))
                throw new H(2, 9, 9013, "Could not find cell with name " + n);
              return t;
            }
            function uD(e, t) {
              e.g.forEach(function (n) {
                t(n.getEmeSessionCell());
              });
            }
            function lD(e) {
              var t = Array.from(e.g.keys());
              if (!t.length) throw new H(2, 9, 9e3, "No supported storage mechanisms found");
              return e.g.get(t[0]).getEmeSessionCell();
            }
            function cD(e) {
              var t, n, r;
              return F(function (i) {
                return i.g == 1
                  ? ((t = Array.from(e.g.values())),
                    (n = t.length > 0),
                    n ||
                      ((r = tl),
                      r.forEach(function (s) {
                        (s = s()) && t.push(s);
                      })),
                    E(
                      i,
                      Promise.all(
                        t.map(function (s) {
                          return s.erase();
                        }),
                      ),
                      2,
                    ))
                  : n
                    ? i.A(0)
                    : E(
                        i,
                        Promise.all(
                          t.map(function (s) {
                            return s.destroy();
                          }),
                        ),
                        0,
                      );
              });
            }
            function lA(e, t) {
              tl.set(e, t);
            }
            (de("shaka.offline.StorageMuxer", Xn),
              (Xn.unregister = function (e) {
                tl.delete(e);
              }),
              (Xn.register = lA),
              (Xn.prototype.destroy = Xn.prototype.destroy));
            var tl = new Map();
            function nl() {
              Js.apply(this, arguments);
            }
            (q(nl, Js),
              (nl.prototype.updateManifestExpiration = function (e, t) {
                var n = this,
                  r,
                  i,
                  s;
                return F(function (o) {
                  return (
                    (r = qs(n.h, n.g)),
                    (i = r.store()),
                    (s = new lt()),
                    (i.get(e).onsuccess = function (u) {
                      (u = u.target.result)
                        ? ((u.expiration = t), i.put(u), s.resolve())
                        : s.reject(new H(2, 9, 9012, "Could not find values for " + e));
                    }),
                    E(o, Promise.all([r.promise(), s]), 0)
                  );
                });
              }),
              (nl.prototype.Ud = function (e) {
                var t, n, r, i, s, o;
                return F(function (u) {
                  if (u.g == 1) {
                    for (t = [], n = 0; n < e.periods.length; ++n)
                      ((r = n == e.periods.length - 1 ? e.duration : e.periods[n + 1].startTime),
                        (i = r - e.periods[n].startTime),
                        (s = dD(e.periods[n], i)),
                        t.push(s));
                    return E(u, Gw(t), 2);
                  }
                  return (
                    (o = u.h),
                    u.return({
                      creationTime: 0,
                      originalManifestUri: e.originalManifestUri,
                      duration: e.duration,
                      size: e.size,
                      expiration: e.expiration == null ? 1 / 0 : e.expiration,
                      streams: o,
                      sessionIds: e.sessionIds,
                      drmInfo: e.drmInfo,
                      appMetadata: e.appMetadata,
                      sequenceMode: !1,
                    })
                  );
                });
              }));
            function dD(e, t) {
              hD(e);
              for (var n = x(e.streams), r = n.next(); !r.done; r = n.next());
              return e.streams.map(function (i) {
                return fD(i, e.startTime, t);
              });
            }
            function fD(e, t, n) {
              var r = e.initSegmentUri ? cA(e.initSegmentUri) : null,
                i = t + e.presentationTimeOffset,
                s = t + n;
              return {
                id: e.id,
                originalId: null,
                groupId: null,
                primary: e.primary,
                type: e.contentType,
                mimeType: e.mimeType,
                codecs: e.codecs,
                frameRate: e.frameRate,
                pixelAspectRatio: void 0,
                hdr: void 0,
                colorGamut: void 0,
                videoLayout: void 0,
                kind: e.kind,
                language: e.language,
                originalLanguage: e.language || null,
                label: e.label,
                width: e.width,
                height: e.height,
                initSegmentKey: r,
                encrypted: e.encrypted,
                keyIds: new Set([e.keyId]),
                segments: e.segments.map(function (o) {
                  var u = cA(o.uri);
                  return {
                    startTime: t + o.startTime,
                    endTime: t + o.endTime,
                    dataKey: u,
                    initSegmentKey: r,
                    appendWindowStart: t,
                    appendWindowEnd: s,
                    timestampOffset: i,
                    tilesLayout: "",
                    mimeType: null,
                    codecs: null,
                    thumbnailSprite: null,
                  };
                }),
                variantIds: e.variantIds,
                roles: [],
                forced: !1,
                audioSamplingRate: null,
                channelsCount: null,
                spatialAudio: !1,
                closedCaptions: null,
                tilesLayout: void 0,
                external: !1,
                fastSwitching: !1,
                isAudioMuxedInVideo: !1,
              };
            }
            nl.prototype.Xh = function (e) {
              return { data: e.data };
            };
            function cA(e) {
              var t;
              if (
                (t = /^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e)) ||
                (t = /^offline:segment\/([0-9]+)$/.exec(e))
              )
                return Number(t[1]);
              throw new H(2, 9, 9004, "Could not parse uri " + e);
            }
            function hD(e) {
              var t = e.streams.filter(function (u) {
                return u.contentType == "audio";
              });
              if (
                ((e = e.streams.filter(function (u) {
                  return u.contentType == "video";
                })),
                !t.every(function (u) {
                  return u.variantIds;
                }) ||
                  !e.every(function (u) {
                    return u.variantIds;
                  }))
              ) {
                for (var n = x(t), r = n.next(); !r.done; r = n.next()) r.value.variantIds = [];
                for (n = x(e), r = n.next(); !r.done; r = n.next()) r.value.variantIds = [];
                if (((n = 0), e.length && !t.length)) {
                  r = n++;
                  for (var i = x(e), s = i.next(); !s.done; s = i.next()) s.value.variantIds.push(r);
                }
                if (!e.length && t.length)
                  for (r = n++, i = x(t), s = i.next(); !s.done; s = i.next()) s.value.variantIds.push(r);
                if (e.length && t.length)
                  for (t = x(t), r = t.next(); !r.done; r = t.next())
                    for (r = r.value, i = x(e), s = i.next(); !s.done; s = i.next()) {
                      s = s.value;
                      var o = n++;
                      (r.variantIds.push(o), s.variantIds.push(o));
                    }
              }
            }
            function hf() {
              Js.apply(this, arguments);
            }
            (q(hf, Js),
              (hf.prototype.Ud = function (e) {
                var t, n, r, i, s, o;
                return F(function (u) {
                  if (u.g == 1) {
                    for (t = [], n = 0; n < e.periods.length; ++n) {
                      ((r = n == e.periods.length - 1 ? e.duration : e.periods[n + 1].startTime),
                        (i = r - e.periods[n].startTime));
                      for (
                        var l = e.periods[n], p = [], m = x(l.streams), y = m.next();
                        !y.done;
                        y = m.next()
                      )
                        ((y = y.value),
                          y.variantIds.length != 0 && p.push(pD(y, l.startTime, l.startTime + i)));
                      ((s = p), t.push(s));
                    }
                    return E(u, Gw(t), 2);
                  }
                  return (
                    (o = u.h),
                    u.return({
                      appMetadata: e.appMetadata,
                      creationTime: 0,
                      drmInfo: e.drmInfo,
                      duration: e.duration,
                      expiration: e.expiration == null ? 1 / 0 : e.expiration,
                      originalManifestUri: e.originalManifestUri,
                      sessionIds: e.sessionIds,
                      size: e.size,
                      streams: o,
                      sequenceMode: !1,
                    })
                  );
                });
              }));
            function pD(e, t, n) {
              return {
                id: e.id,
                originalId: e.originalId,
                groupId: null,
                primary: e.primary,
                type: e.contentType,
                mimeType: e.mimeType,
                codecs: e.codecs,
                frameRate: e.frameRate,
                pixelAspectRatio: e.pixelAspectRatio,
                hdr: void 0,
                colorGamut: void 0,
                videoLayout: void 0,
                kind: e.kind,
                language: e.language,
                originalLanguage: e.language || null,
                label: e.label,
                width: e.width,
                height: e.height,
                encrypted: e.encrypted,
                keyIds: new Set([e.keyId]),
                segments: e.segments.map(function (r) {
                  return {
                    startTime: t + r.startTime,
                    endTime: t + r.endTime,
                    initSegmentKey: e.initSegmentKey,
                    appendWindowStart: t,
                    appendWindowEnd: n,
                    timestampOffset: t - e.presentationTimeOffset,
                    dataKey: r.dataKey,
                    tilesLayout: "",
                    mimeType: null,
                    codecs: null,
                    thumbnailSprite: null,
                  };
                }),
                variantIds: e.variantIds,
                roles: [],
                forced: !1,
                audioSamplingRate: null,
                channelsCount: null,
                spatialAudio: !1,
                closedCaptions: null,
                tilesLayout: void 0,
                external: !1,
                fastSwitching: !1,
                isAudioMuxedInVideo: !1,
              };
            }
            function zm() {
              Js.apply(this, arguments);
            }
            (q(zm, Js),
              (h = zm.prototype),
              (h.hasFixedKeySpace = function () {
                return !1;
              }),
              (h.addSegments = function (e) {
                return this.add(this.i, e);
              }),
              (h.addManifests = function (e) {
                return this.add(this.g, e);
              }),
              (h.updateManifest = function (e, t) {
                return oD(this, e, t);
              }),
              (h.Ud = function (e) {
                return (e.expiration == null && (e.expiration = 1 / 0), Promise.resolve(e));
              }));
            function dA() {
              this.m = this.j = this.i = this.h = this.g = this.l = null;
            }
            ((h = dA.prototype),
              (h.init = function () {
                var e = this,
                  t = new lt(),
                  n = !1,
                  r = new He(function () {
                    ((n = !0), t.reject(new H(2, 9, 9017)));
                  });
                typeof pf == "number" && pf > 0 && r.ka(pf);
                var i = g.indexedDB.open("shaka_offline_db", 5);
                return (
                  (i.onsuccess = function () {
                    if (!n) {
                      r.stop();
                      var s = i.result;
                      e.l = s;
                      var o = s.objectStoreNames;
                      ((o =
                        o.contains("manifest") && o.contains("segment")
                          ? new nl(s, "segment", "manifest")
                          : null),
                        (e.g = o),
                        (o = s.objectStoreNames),
                        (o =
                          o.contains("manifest-v2") && o.contains("segment-v2")
                            ? new hf(s, "segment-v2", "manifest-v2")
                            : null),
                        (e.h = o),
                        (o = s.objectStoreNames),
                        (o =
                          o.contains("manifest-v3") && o.contains("segment-v3")
                            ? new hf(s, "segment-v3", "manifest-v3")
                            : null),
                        (e.i = o),
                        (o = s.objectStoreNames),
                        (o =
                          o.contains("manifest-v5") && o.contains("segment-v5")
                            ? new zm(s, "segment-v5", "manifest-v5")
                            : null),
                        (e.j = o),
                        (s = s.objectStoreNames.contains("session-ids") ? new el(s) : null),
                        (e.m = s),
                        t.resolve());
                    }
                  }),
                  (i.onupgradeneeded = function () {
                    for (
                      var s = i.result, o = x(["segment-v5", "manifest-v5", "session-ids"]), u = o.next();
                      !u.done;
                      u = o.next()
                    )
                      ((u = u.value),
                        s.objectStoreNames.contains(u) || s.createObjectStore(u, { autoIncrement: !0 }));
                  }),
                  (i.onerror = function (s) {
                    n || (r.stop(), t.reject(new H(2, 9, 9001, i.error)), s.preventDefault());
                  }),
                  t
                );
              }),
              (h.destroy = function () {
                var e = this;
                return F(function (t) {
                  switch (t.g) {
                    case 1:
                      if (!e.g) {
                        t.A(2);
                        break;
                      }
                      return E(t, e.g.destroy(), 2);
                    case 2:
                      if (!e.h) {
                        t.A(4);
                        break;
                      }
                      return E(t, e.h.destroy(), 4);
                    case 4:
                      if (!e.i) {
                        t.A(6);
                        break;
                      }
                      return E(t, e.i.destroy(), 6);
                    case 6:
                      if (!e.j) {
                        t.A(8);
                        break;
                      }
                      return E(t, e.j.destroy(), 8);
                    case 8:
                      if (!e.m) {
                        t.A(10);
                        break;
                      }
                      return E(t, e.m.destroy(), 10);
                    case 10:
                      (e.l && e.l.close(), re(t));
                  }
                });
              }),
              (h.getCells = function () {
                var e = new Map();
                return (
                  this.g && e.set("v1", this.g),
                  this.h && e.set("v2", this.h),
                  this.i && e.set("v3", this.i),
                  this.j && e.set("v5", this.j),
                  e
                );
              }),
              (h.getEmeSessionCell = function () {
                return this.m;
              }),
              (h.erase = function () {
                var e = this;
                return F(function (t) {
                  switch (t.g) {
                    case 1:
                      if (!e.g) {
                        t.A(2);
                        break;
                      }
                      return E(t, e.g.destroy(), 2);
                    case 2:
                      if (!e.h) {
                        t.A(4);
                        break;
                      }
                      return E(t, e.h.destroy(), 4);
                    case 4:
                      if (!e.i) {
                        t.A(6);
                        break;
                      }
                      return E(t, e.i.destroy(), 6);
                    case 6:
                      if (!e.j) {
                        t.A(8);
                        break;
                      }
                      return E(t, e.j.destroy(), 8);
                    case 8:
                      return (e.l && e.l.close(), E(t, gD(), 10));
                    case 10:
                      return (
                        (e.l = null),
                        (e.g = null),
                        (e.h = null),
                        (e.i = null),
                        (e.j = null),
                        E(t, e.init(), 0)
                      );
                  }
                });
              }));
            function gD() {
              var e = new lt(),
                t = g.indexedDB.deleteDatabase("shaka_offline_db");
              return (
                (t.onblocked = function () {}),
                (t.onsuccess = function () {
                  e.resolve();
                }),
                (t.onerror = function (n) {
                  (e.reject(new H(2, 9, 9001, t.error)), n.preventDefault());
                }),
                e
              );
            }
            var pf = 5;
            (de("shaka.offline.indexeddb.StorageMechanismOpenTimeout", pf),
              lA("idb", function () {
                return je().Ch() ? new dA() : null;
              }));
            function li(e, t, n, r) {
              ((this.g = e),
                (this.i = t),
                (this.h = n),
                (this.l = r),
                (this.j = ["offline:", e, "/", t, "/", n, "/", r].join("")));
            }
            ((li.prototype.Pb = function () {
              return this.i;
            }),
              (li.prototype.cb = function () {
                return this.h;
              }),
              (li.prototype.key = function () {
                return this.l;
              }),
              (li.prototype.toString = function () {
                return this.j;
              }));
            function Xm(e) {
              if (((e = /^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)), e == null)) return null;
              var t = e[1];
              if (t != "manifest" && t != "segment") return null;
              var n = e[2];
              if (!n) return null;
              var r = e[3];
              return r && t != null ? new li(t, n, r, Number(e[4])) : null;
            }
            function fA(e, t) {
              ((this.h = e), (this.g = t));
            }
            function hA(e, t) {
              var n = new De(null, 0);
              n.Ab(t.duration);
              var r = t.streams.filter(function (p) {
                  return p.type == "audio";
                }),
                i = t.streams.filter(function (p) {
                  return p.type == "video";
                });
              ((r = mD(e, r, i, n)),
                (i = t.streams
                  .filter(function (p) {
                    return p.type == Ve;
                  })
                  .map(function (p) {
                    return gf(e, p, n);
                  })));
              var s = t.streams
                  .filter(function (p) {
                    return p.type == "image";
                  })
                  .map(function (p) {
                    return gf(e, p, n);
                  }),
                o = t.drmInfo ? [t.drmInfo] : [];
              if (t.drmInfo)
                for (var u = x(r.values()), l = u.next(); !l.done; l = u.next())
                  ((l = l.value),
                    l.audio && l.audio.encrypted && (l.audio.drmInfos = o),
                    l.video && l.video.encrypted && (l.video.drmInfos = o));
              return {
                presentationTimeline: n,
                offlineSessionIds: t.sessionIds,
                variants: Array.from(r.values()),
                textStreams: i,
                imageStreams: s,
                sequenceMode: t.sequenceMode || !1,
                ignoreManifestTimestampsInSegmentsMode: !1,
                type: t.type || "UNKNOWN",
                serviceDescription: null,
                nextUrl: null,
                periodCount: 1,
                gapCount: 0,
                isLowLatency: !1,
                startTime: null,
              };
            }
            function mD(e, t, n, r) {
              for (var i = new Set(), s = x(t), o = s.next(); !o.done; o = s.next()) {
                o = x(o.value.variantIds);
                for (var u = o.next(); !u.done; u = o.next()) i.add(u.value);
              }
              for (s = x(n), o = s.next(); !o.done; o = s.next())
                for (o = x(o.value.variantIds), u = o.next(); !u.done; u = o.next()) i.add(u.value);
              for (s = new Map(), i = x(i), o = i.next(); !o.done; o = i.next())
                ((o = o.value),
                  s.set(o, {
                    id: o,
                    language: "",
                    disabledUntilTime: 0,
                    primary: !1,
                    audio: null,
                    video: null,
                    bandwidth: 0,
                    allowedByApplication: !0,
                    allowedByKeySystem: !0,
                    decodingInfos: [],
                  }));
              for (t = x(t), i = t.next(); !i.done; i = t.next())
                for (o = i.value, i = gf(e, o, r), o = x(o.variantIds), u = o.next(); !u.done; u = o.next())
                  ((u = s.get(u.value)),
                    (u.language = i.language),
                    (u.primary = u.primary || i.primary),
                    (u.audio = i));
              for (n = x(n), t = n.next(); !t.done; t = n.next())
                for (i = t.value, t = gf(e, i, r), i = x(i.variantIds), o = i.next(); !o.done; o = i.next())
                  ((o = s.get(o.value)), (o.primary = o.primary || t.primary), (o.video = t));
              return s;
            }
            function gf(e, t, n) {
              var r = t.segments.map(function (i) {
                return yD(e, i, t);
              });
              return (
                n.me(r),
                {
                  id: t.id,
                  originalId: t.originalId,
                  groupId: t.groupId,
                  createSegmentIndex: function () {
                    return Promise.resolve();
                  },
                  segmentIndex: new Qe(r),
                  mimeType: t.mimeType,
                  codecs: t.codecs,
                  width: t.width || void 0,
                  height: t.height || void 0,
                  frameRate: t.frameRate,
                  pixelAspectRatio: t.pixelAspectRatio,
                  hdr: t.hdr,
                  colorGamut: t.colorGamut,
                  videoLayout: t.videoLayout,
                  kind: t.kind,
                  encrypted: t.encrypted,
                  drmInfos: [],
                  keyIds: t.keyIds,
                  language: t.language,
                  originalLanguage: t.originalLanguage || null,
                  label: t.label,
                  type: t.type,
                  primary: t.primary,
                  trickModeVideo: null,
                  dependencyStream: null,
                  emsgSchemeIdUris: null,
                  roles: t.roles,
                  forced: t.forced,
                  channelsCount: t.channelsCount,
                  audioSamplingRate: t.audioSamplingRate,
                  spatialAudio: t.spatialAudio,
                  closedCaptions: t.closedCaptions,
                  tilesLayout: t.tilesLayout,
                  mssPrivateData: t.mssPrivateData,
                  accessibilityPurpose: null,
                  external: t.external,
                  fastSwitching: t.fastSwitching,
                  fullMimeTypes: new Set([Rt(t.mimeType, t.codecs)]),
                  isAudioMuxedInVideo: t.isAudioMuxedInVideo || !1,
                  baseOriginalId: null,
                }
              );
            }
            function yD(e, t, n) {
              var r = new li("segment", e.h, e.g, t.dataKey);
              return (
                (e = new Me(
                  t.startTime,
                  t.endTime,
                  function () {
                    return [r.toString()];
                  },
                  0,
                  null,
                  t.initSegmentKey != null ? vD(e, t.initSegmentKey) : null,
                  t.timestampOffset,
                  t.appendWindowStart,
                  t.appendWindowEnd,
                  [],
                  t.tilesLayout || "",
                )),
                (e.mimeType = t.mimeType || n.mimeType || ""),
                (e.codecs = t.codecs || n.codecs || ""),
                t.thumbnailSprite && e.Mf(t.thumbnailSprite),
                e
              );
            }
            function vD(e, t) {
              var n = new li("segment", e.h, e.g, t);
              return new Hn(
                function () {
                  return [n.toString()];
                },
                0,
                null,
              );
            }
            function pA() {
              this.g = null;
            }
            ((h = pA.prototype),
              (h.configure = function () {}),
              (h.start = function (e, t) {
                var n = this,
                  r,
                  i,
                  s,
                  o,
                  u,
                  l,
                  p;
                return F(function (m) {
                  switch (m.g) {
                    case 1:
                      if (((r = Xm(e)), (n.g = r), r == null || r.g != "manifest"))
                        throw new H(2, 1, 9004, e);
                      return ((i = new Xn()), ge(m, 2), E(m, i.init(), 4));
                    case 4:
                      return E(m, ff(i, r.Pb(), r.cb()), 5);
                    case 5:
                      return ((s = m.h), E(m, s.getManifests([r.key()]), 6));
                    case 6:
                      return (
                        (o = m.h),
                        (u = o[0]),
                        (l = new fA(r.Pb(), r.cb())),
                        (p = hA(l, u)),
                        t.makeTextStreamsForClosedCaptions(p),
                        m.return(p)
                      );
                    case 2:
                      return (ve(m), E(m, i.destroy(), 7));
                    case 7:
                      Oe(m, 0);
                  }
                });
              }),
              (h.stop = function () {
                return Promise.resolve();
              }),
              (h.update = function () {}),
              (h.onExpirationUpdated = function (e, t) {
                var n = this,
                  r,
                  i,
                  s,
                  o,
                  u,
                  l,
                  p;
                return F(function (m) {
                  switch (m.g) {
                    case 1:
                      return ((r = n.g), (i = new Xn()), te(m, 2, 3), E(m, i.init(), 5));
                    case 5:
                      return E(m, ff(i, r.Pb(), r.cb()), 6);
                    case 6:
                      return ((s = m.h), E(m, s.getManifests([r.key()]), 7));
                    case 7:
                      if (
                        ((o = m.h),
                        (u = o[0]),
                        (l = u.sessionIds.includes(e)),
                        (p = u.expiration == null || u.expiration > t),
                        !l || !p)
                      ) {
                        m.A(3);
                        break;
                      }
                      return E(m, s.updateManifestExpiration(r.key(), t), 3);
                    case 3:
                      return (ve(m), E(m, i.destroy(), 10));
                    case 10:
                      Oe(m, 0);
                      break;
                    case 2:
                      (oe(m), m.A(3));
                  }
                });
              }),
              (h.onInitialVariantChosen = function () {}),
              (h.banLocation = function () {}),
              (h.setMediaElement = function () {}),
              ks("application/x-offline-manifest", function () {
                return new pA();
              }));
            function gA() {}
            function mA(e, t) {
              var n = Xm(e);
              return (
                n && n.g == "manifest"
                  ? ((e = {
                      uri: e,
                      originalUri: e,
                      data: new ArrayBuffer(0),
                      headers: { "content-type": "application/x-offline-manifest" },
                      originalRequest: t,
                    }),
                    (e = Ao(e)))
                  : (e = n && n.g == "segment" ? xD(n.key(), n, t) : ts(new H(2, 1, 9004, e))),
                e
              );
            }
            function xD(e, t, n) {
              var r = new Xn();
              return Ao(void 0)
                .Xa(function () {
                  return r.init();
                })
                .Xa(function () {
                  return ff(r, t.Pb(), t.cb());
                })
                .Xa(function (i) {
                  return i.getSegments([t.key()]);
                })
                .Xa(function (i) {
                  return { uri: t, data: i[0].data, headers: {}, originalRequest: n };
                })
                .finally(function () {
                  return r.destroy();
                });
            }
            (de("shaka.offline.OfflineScheme", gA), (gA.plugin = mA), Ei("offline", mA));
            function yA(e, t, n) {
              var r, i, s, o, u, l;
              return F(function (p) {
                switch (p.g) {
                  case 1:
                    r = [];
                    for (var m = [], y = x(n), v = y.next(); !v.done; v = y.next()) {
                      v = v.value;
                      for (var w = !1, A = x(m), I = A.next(); !I.done; I = A.next())
                        if (((I = I.value), wD(I.info, v))) {
                          (I.sessionIds.push(v.sessionId), (w = !0));
                          break;
                        }
                      w || m.push({ info: v, sessionIds: [v.sessionId] });
                    }
                    ((i = x(m)), (s = i.next()));
                  case 2:
                    if (s.done) {
                      p.A(4);
                      break;
                    }
                    return ((o = s.value), (u = TD(e, t, o)), E(p, u, 5));
                  case 5:
                    ((l = p.h), (r = r.concat(l)), (s = i.next()), p.A(2));
                    break;
                  case 4:
                    return p.return(r);
                }
              });
            }
            function TD(e, t, n) {
              var r, i;
              return F(function (s) {
                switch (s.g) {
                  case 1:
                    return (
                      (r = new _c({
                        vc: t,
                        onError: function () {},
                        zf: function () {},
                        onExpirationUpdated: function () {},
                        onEvent: function () {},
                      })),
                      te(s, 2),
                      r.configure(e),
                      E(
                        s,
                        ZC(
                          r,
                          n.info.keySystem,
                          n.info.licenseUri,
                          n.info.serverCertificate,
                          n.info.audioCapabilities,
                          n.info.videoCapabilities,
                        ),
                        4,
                      )
                    );
                  case 4:
                    pe(s, 3);
                    break;
                  case 2:
                    return (oe(s), E(s, r.destroy(), 5));
                  case 5:
                    return s.return([]);
                  case 3:
                    return (
                      (i = []),
                      E(
                        s,
                        Promise.all(
                          n.sessionIds.map(function (o) {
                            return F(function (u) {
                              if (u.g == 1) return (te(u, 2), E(u, nM(r, o), 4));
                              if (u.g != 2) return (i.push(o), pe(u, 0));
                              (oe(u), re(u));
                            });
                          }),
                        ),
                        6,
                      )
                    );
                  case 6:
                    return E(s, r.destroy(), 7);
                  case 7:
                    return s.return(i);
                }
              });
            }
            function wD(e, t) {
              function n(r, i) {
                return r.robustness == i.robustness && r.contentType == i.contentType;
              }
              return (
                e.keySystem == t.keySystem &&
                e.licenseUri == t.licenseUri &&
                Is(e.audioCapabilities, t.audioCapabilities, n) &&
                Is(e.videoCapabilities, t.videoCapabilities, n)
              );
            }
            function SD(e, t, n) {
              var r = t.presentationTimeline.getDuration();
              return (
                (t = vA(t)),
                {
                  offlineUri: null,
                  originalManifestUri: e,
                  duration: r,
                  size: 0,
                  expiration: 1 / 0,
                  tracks: t,
                  appMetadata: n,
                  isIncomplete: !1,
                }
              );
            }
            function Wm(e, t) {
              var n = hA(new fA(e.Pb(), e.cb()), t),
                r = t.appMetadata || {};
              return (
                (n = vA(n)),
                {
                  offlineUri: e.toString(),
                  originalManifestUri: t.originalManifestUri,
                  duration: t.duration,
                  size: t.size,
                  expiration: t.expiration,
                  tracks: n,
                  appMetadata: r,
                  isIncomplete: t.isIncomplete || !1,
                }
              );
            }
            function vA(e) {
              var t = [],
                n = wc(e.variants);
              n = x(n);
              for (var r = n.next(); !r.done; r = n.next()) t.push(Us(r.value));
              for (e = x(e.textStreams), n = e.next(); !n.done; n = e.next()) t.push(Fs(n.value));
              return t;
            }
            function AD() {
              this.g = new Map();
            }
            function ED(e, t) {
              var n = t.audio,
                r = t.video;
              if (
                (n && !r && e.g.set(n.id, n.bandwidth || t.bandwidth),
                !n && r && e.g.set(r.id, r.bandwidth || t.bandwidth),
                n && r)
              ) {
                var i = n.bandwidth || 393216,
                  s = r.bandwidth || t.bandwidth - i;
                (s <= 0 && (s = t.bandwidth), e.g.set(n.id, i), e.g.set(r.id, s));
              }
            }
            function ID(e, t) {
              e.g.set(t.id, t.bandwidth || 2048);
            }
            function xA(e, t) {
              return ((e = e.g.get(t)), e == null && (e = 0), e);
            }
            function en(e) {
              var t = this;
              if (e && e.constructor != ee) throw new H(2, 9, 9008);
              ((this.g = this.h = null),
                e
                  ? ((this.h = e.g), (this.g = e.Yb()))
                  : ((this.h = Ho()), (this.g = new xt()), this.g.configure(this.h.networking)),
                (this.i = []),
                (this.l = []));
              var n = !e;
              ((this.j = new Io(function () {
                var r, i, s, o, u;
                return F(function (l) {
                  switch (l.g) {
                    case 1:
                      return E(
                        l,
                        Promise.all(
                          t.l.map(function (p) {
                            return Vm(p);
                          }),
                        ),
                        2,
                      );
                    case 2:
                      for (r = function () {}, i = [], s = x(t.i), o = s.next(); !o.done; o = s.next())
                        ((u = o.value), i.push(u.then(r, r)));
                      return E(l, Promise.all(i), 3);
                    case 3:
                      if (!n) {
                        l.A(4);
                        break;
                      }
                      return E(l, t.g.destroy(), 4);
                    case 4:
                      ((t.h = null), (t.g = null), re(l));
                  }
                });
              })),
                (this.m = 1e9));
            }
            function Km() {
              if (ui(je()))
                e: {
                  for (var e = x(tl.values()), t = e.next(); !t.done; t = e.next())
                    if (((t = t.value), (t = t()))) {
                      (t.destroy(), (e = !0));
                      break e;
                    }
                  e = !1;
                }
              else e = !1;
              return e;
            }
            ((h = en.prototype),
              (h.destroy = function () {
                return this.j.destroy();
              }),
              (h.configure = function (e, t) {
                return (arguments.length == 2 && typeof e == "string" && (e = td(e, t)), Pi(this.h, e));
              }),
              (h.getConfiguration = function () {
                var e = Ho();
                return (Pi(e, this.h, Ho()), e);
              }),
              (h.Yb = function () {
                return this.g;
              }),
              (h.store = function (e, t, n, r, i) {
                var s = this,
                  o = this.getConfiguration(),
                  u = new jm(this.g);
                return (
                  this.l.push(u),
                  (t = CD(
                    this,
                    e,
                    t || {},
                    r || [],
                    i || [],
                    function () {
                      var l;
                      return F(function (p) {
                        return p.g == 1
                          ? n
                            ? p.A(2)
                            : E(p, Fo(e, s.g, o.manifest.retryParameters), 3)
                          : (p.g != 2 && (n = p.h), (l = e0(e, n || null)), p.return(l()));
                      });
                    },
                    o,
                    u,
                  )),
                  (t = new _t(t, function () {
                    return Vm(u);
                  })),
                  t.finally(function () {
                    Or(s.l, u);
                  }),
                  HD(this, t)
                );
              }));
            function CD(e, t, n, r, i, s, o, u) {
              var l, p, m, y, v, w, A, I, C, k, R, L, U, G, b, B, O, z, j, X, W, ie, ne, $;
              return F(function (Q) {
                switch (Q.g) {
                  case 1:
                    return (
                      mf(),
                      (p = l = null),
                      (m = new Xn()),
                      (w = v = y = null),
                      te(Q, 2, 3),
                      E(Q, s(), 5)
                    );
                  case 5:
                    return ((l = Q.h), E(Q, ND(e, t, l, o), 6));
                  case 6:
                    if (
                      ((A = Q.h),
                      cr(e),
                      (I = !A.presentationTimeline.W() && !A.presentationTimeline.Vc()),
                      !I)
                    )
                      throw new H(2, 9, 9005, t);
                    ((C = x(r)), (k = C.next()));
                  case 7:
                    if (k.done) {
                      Q.A(9);
                      break;
                    }
                    return ((R = k.value), E(Q, OD(e, R, A), 10));
                  case 10:
                    ((L = Q.h), A.imageStreams.push(L), cr(e), (k = C.next()), Q.A(7));
                    break;
                  case 9:
                    ((U = x(i)), (G = U.next()));
                  case 11:
                    return G.done
                      ? (ax(o.drm.clearKeys, A.variants),
                        (O = A.variants.some(function (ae) {
                          if (ae.audio) {
                            for (var ce = x(ae.audio.drmInfos), Ne = ce.next(); !Ne.done; Ne = ce.next())
                              if (Ne.value.licenseServerUri.startsWith("data:")) return !0;
                          }
                          if (ae.video) {
                            for (ae = x(ae.video.drmInfos), ce = ae.next(); !ce.done; ce = ae.next())
                              if (ce.value.licenseServerUri.startsWith("data:")) return !0;
                          }
                          return !1;
                        })),
                        (z = o.offline.usePersistentLicense),
                        O && (z = !1),
                        E(
                          Q,
                          e.md(
                            A,
                            function (ae) {
                              w = w || ae;
                            },
                            o,
                            z,
                          ),
                          15,
                        ))
                      : ((b = G.value), E(Q, UD(e, A, b.uri, b.language, b.kind, b.mime, b.codecs), 14));
                  case 14:
                    ((B = Q.h), A.textStreams.push(B), cr(e), (G = U.next()), Q.A(11));
                    break;
                  case 15:
                    if (((p = Q.h), cr(e), w)) throw w;
                    return E(Q, RD(A, p, o, z), 16);
                  case 16:
                    return E(Q, m.init(), 17);
                  case 17:
                    return (cr(e), E(Q, uA(m), 18));
                  case 18:
                    return (
                      (y = Q.h),
                      cr(e),
                      (j = kD(p, A, t, n, o, u, z)),
                      (X = j.xk),
                      (W = j.Gh),
                      E(Q, y.cb.addManifests([X]), 19)
                    );
                  case 19:
                    if (((ie = Q.h), cr(e), (v = ie[0]), cr(e), w)) throw w;
                    return E(Q, MD(e, W, v, X, u, o, y.cb, A, p, z), 20);
                  case 20:
                    return (cr(e), AA(A, X, p, z), E(Q, y.cb.updateManifest(v, X), 21));
                  case 21:
                    return (cr(e), (ne = new li("manifest", y.path.Pb, y.path.cb, v)), Q.return(Wm(ne, X)));
                  case 3:
                    return (ve(Q), E(Q, m.destroy(), 22));
                  case 22:
                    if (!l) {
                      Q.A(23);
                      break;
                    }
                    return E(Q, l.stop(), 23);
                  case 23:
                    if (!p) {
                      Q.A(25);
                      break;
                    }
                    return E(Q, p.destroy(), 25);
                  case 25:
                    Oe(Q, 0);
                    break;
                  case 2:
                    if ((($ = oe(Q)), v == null)) {
                      Q.A(27);
                      break;
                    }
                    return E(Q, TA(v), 27);
                  case 27:
                    throw w || $;
                }
              });
            }
            function MD(e, t, n, r, i, s, o, u, l, p) {
              var m, y, v, w, A, I, C, k, R, L, U;
              return F(function (G) {
                switch (G.g) {
                  case 1:
                    if (
                      ((m = {}),
                      (y = 0),
                      (v = function () {
                        if (e.j.g || i.l) throw new H(2, 9, 7001);
                      }),
                      (w = function (b, B) {
                        var O, z, j, X, W, ie, ne, $, Q;
                        return F(function (ae) {
                          if (ae.g == 1) {
                            for (O = x(b), z = O.next(), j = {}; !z.done; j = { mc: void 0 }, z = O.next())
                              ((j.mc = z.value),
                                v(),
                                (X = tD(j.mc, s)),
                                (W = j.mc.i),
                                (ie = j.mc.h),
                                (ne = (function (ce) {
                                  return function (Ne) {
                                    var we, et, Ue, ot;
                                    return F(function (We) {
                                      switch (We.g) {
                                        case 1:
                                          if (((we = ce.mc.g), (et = we.$b(!1)), !we.aesKey || et)) {
                                            We.A(2);
                                            break;
                                          }
                                          return E(We, Kp(Ne, we.aesKey, ce.mc.j), 3);
                                        case 3:
                                          Ne = We.h;
                                        case 2:
                                          return ((Ue = Bm(we)), E(We, o.addSegments([{ data: Ne }]), 4));
                                        case 4:
                                          ((ot = We.h), v(), (m[Ue] = ot[0]), (y += Ne.byteLength), re(We));
                                      }
                                    });
                                  };
                                })(j)),
                                ($ = j.mc.g),
                                (Q = $.$b(!1))
                                  ? rD(i, j.mc.groupId, Q, W, ie, ne)
                                  : i.queue(j.mc.groupId, X, W, ie, ne));
                            return E(ae, iD(i), 2);
                          }
                          return (
                            v(),
                            !B || i.l ? ae.A(0) : (AA(u, r, l, p), E(ae, o.updateManifest(n, r), 0))
                          );
                        });
                      }),
                      (A = !1),
                      te(G, 2),
                      !$m(u) || !A || SA(u))
                    ) {
                      G.A(4);
                      break;
                    }
                    return E(
                      G,
                      w(
                        t.filter(function (b) {
                          return b.h;
                        }),
                        !0,
                      ),
                      5,
                    );
                  case 5:
                    return (
                      v(),
                      (t = t.filter(function (b) {
                        return !b.h;
                      })),
                      (I = m),
                      (C = y),
                      (m = {}),
                      (y = 0),
                      E(
                        G,
                        wA(o, n, r, I, C, function () {
                          return cr(e);
                        }),
                        6,
                      )
                    );
                  case 6:
                    v();
                  case 4:
                    if (A) {
                      G.A(7);
                      break;
                    }
                    return E(G, w(t, !1), 8);
                  case 8:
                    return (
                      v(),
                      (k = m),
                      (R = y),
                      (m = {}),
                      (y = 0),
                      E(
                        G,
                        wA(o, n, r, k, R, function () {
                          return v();
                        }),
                        9,
                      )
                    );
                  case 9:
                    v();
                  case 7:
                    pe(G, 0);
                    break;
                  case 2:
                    return (
                      (L = oe(G)),
                      (U = Object.values(m)),
                      E(
                        G,
                        o.removeSegments(U, function () {}),
                        10,
                      )
                    );
                  case 10:
                    throw L;
                }
              });
            }
            function TA(e) {
              var t, n, r, i;
              return F(function (s) {
                switch (s.g) {
                  case 1:
                    return ((t = new Xn()), E(s, t.init(), 2));
                  case 2:
                    return E(s, uA(t), 3);
                  case 3:
                    return (
                      (n = s.h),
                      (r = new li("manifest", n.path.Pb, n.path.cb, e)),
                      E(s, t.destroy(), 4)
                    );
                  case 4:
                    return ((i = new en()), E(s, i.remove(r.toString()), 0));
                }
              });
            }
            function wA(e, t, n, r, i, s) {
              var o, u, l, p, m, y, v, w, A, I, C;
              return F(function (k) {
                switch (k.g) {
                  case 1:
                    for (o = !1, te(k, 2), u = !0, l = x(n.streams), p = l.next(); !p.done; p = l.next())
                      for (m = p.value, y = x(m.segments), v = y.next(); !v.done; v = y.next())
                        ((w = v.value),
                          (A = w.pendingSegmentRefId ? r[w.pendingSegmentRefId] : null),
                          A != null && ((w.dataKey = A), (w.pendingSegmentRefId = void 0)),
                          (A = w.pendingInitSegmentRefId ? r[w.pendingInitSegmentRefId] : null),
                          A != null && ((w.initSegmentKey = A), (w.pendingInitSegmentRefId = void 0)),
                          w.pendingSegmentRefId && (u = !1),
                          w.pendingInitSegmentRefId && (u = !1));
                    return ((n.size += i), u && (n.isIncomplete = !1), E(k, e.updateManifest(t, n), 4));
                  case 4:
                    ((o = !0), s(), pe(k, 0));
                    break;
                  case 2:
                    return ((I = oe(k)), E(k, TA(t), 5));
                  case 5:
                    if (o) {
                      k.A(6);
                      break;
                    }
                    return (
                      (C = Object.values(r)),
                      E(
                        k,
                        e.removeSegments(C, function () {}),
                        6,
                      )
                    );
                  case 6:
                    throw I;
                }
              });
            }
            function RD(e, t, n, r) {
              var i, s, o, u, l, p, m, y, v, w, A, I, C, k, R, L, U, G, b, B, O, z, j, X, W, ie, ne, $, Q, ae;
              return F(function (ce) {
                switch (ce.g) {
                  case 1:
                    return (
                      (i = { width: 1 / 0, height: 1 / 0 }),
                      LC(e, n.restrictions, i),
                      E(ce, C0(t, e, r, n.drm.preferredKeySystems, n.drm.keySystemsMapping), 2)
                    );
                  case 2:
                    for (
                      s = [],
                        o = n.preferredDecodingAttributes,
                        u = n.preferredVideoCodecs,
                        l = n.preferredAudioCodecs,
                        p = n.preferredTextFormats,
                        I0(e, u, l, o, p),
                        m = x(e.variants),
                        y = m.next();
                      !y.done;
                      y = m.next()
                    )
                      ((v = y.value), s.push(Us(v)));
                    for (w = x(e.textStreams), A = w.next(); !A.done; A = w.next())
                      ((I = A.value), s.push(Fs(I)));
                    for (C = x(e.imageStreams), k = C.next(); !k.done; k = C.next())
                      ((R = k.value), s.push(up(R)));
                    return E(ce, n.offline.trackSelectionCallback(s), 3);
                  case 3:
                    for (
                      L = ce.h, U = e.presentationTimeline.getDuration(), G = 0, b = x(L), B = b.next();
                      !B.done;
                      B = b.next()
                    )
                      ((O = B.value), (z = (O.bandwidth * U) / 8), (G += z));
                    return (te(ce, 4), E(ce, n.offline.downloadSizeCallback(G), 6));
                  case 6:
                    if (((j = ce.h), !j)) throw new H(2, 9, 9014);
                    pe(ce, 5);
                    break;
                  case 4:
                    throw ((X = oe(ce)), X instanceof H ? X : new H(2, 9, 9015));
                  case 5:
                    for (
                      W = new Set(), ie = new Set(), ne = new Set(), $ = x(L), Q = $.next();
                      !Q.done;
                      Q = $.next()
                    )
                      ((ae = Q.value),
                        ae.type == "variant" && W.add(ae.id),
                        ae.type == "text" && ie.add(ae.id),
                        ae.type == "image" && ne.add(ae.id));
                    ((e.variants = e.variants.filter(function (Ne) {
                      return W.has(Ne.id);
                    })),
                      (e.textStreams = e.textStreams.filter(function (Ne) {
                        return ie.has(Ne.id);
                      })),
                      (e.imageStreams = e.imageStreams.filter(function (Ne) {
                        return ne.has(Ne.id);
                      })),
                      XD(e),
                      re(ce));
                }
              });
            }
            function kD(e, t, n, r, i, s, o) {
              var u = SD(n, t, r),
                l = i.offline.progressCallback;
              nD(
                s,
                function (A, I) {
                  ((u.size = I), l(u, A));
                },
                function (A, I) {
                  p && o && m == I && su(e, "cenc", A);
                },
              );
              var p = $m(t) && !SA(t),
                m = null;
              p && (m = WD.get(e.g.keySystem));
              for (var y = new AD(), v = x(t.textStreams), w = v.next(); !w.done; w = v.next())
                y.g.set(w.value.id, 52);
              for (v = x(t.imageStreams), w = v.next(); !w.done; w = v.next()) ID(y, w.value);
              for (v = x(t.variants), w = v.next(); !w.done; w = v.next()) ED(y, w.value);
              return (
                (s = BD(s, y, t, i)),
                (i = s.streams),
                (s = s.Gh),
                (y = e.g) && o && (y.initData = []),
                {
                  xk: {
                    creationTime: Date.now(),
                    originalManifestUri: n,
                    duration: t.presentationTimeline.getDuration(),
                    size: 0,
                    expiration: e.Zd(),
                    streams: i,
                    sessionIds: o ? ex(e) : [],
                    drmInfo: y,
                    appMetadata: r,
                    isIncomplete: !0,
                    sequenceMode: t.sequenceMode,
                    type: t.type,
                  },
                  Gh: s,
                }
              );
            }
            function $m(e) {
              return e.variants.some(function (t) {
                var n = t.audio && t.audio.encrypted;
                return (t.video && t.video.encrypted) || n;
              });
            }
            function SA(e) {
              return e.variants.some(function (t) {
                return (t.video ? t.video.drmInfos : [])
                  .concat(t.audio ? t.audio.drmInfos : [])
                  .some(function (n) {
                    return n.initData && n.initData.length;
                  });
              });
            }
            function AA(e, t, n, r) {
              if (
                ((t.expiration = n.Zd()), (n = ex(n)), (t.sessionIds = r ? n : []), $m(e) && r && !n.length)
              )
                throw new H(2, 9, 9007);
            }
            h.remove = function (e) {
              return Ym(this, _D(this, e));
            };
            function _D(e, t) {
              var n, r, i, s, o, u;
              return F(function (l) {
                switch (l.g) {
                  case 1:
                    if ((mf(), (n = Xm(t)), n == null || n.g != "manifest")) throw new H(2, 9, 9004, t);
                    return ((r = n), (i = new Xn()), ge(l, 2), E(l, i.init(), 4));
                  case 4:
                    return E(l, ff(i, r.Pb(), r.cb()), 5);
                  case 5:
                    return ((s = l.h), E(l, s.getManifests([r.key()]), 6));
                  case 6:
                    return ((o = l.h), (u = o[0]), E(l, Promise.all([PD(e, u, i), DD(s, r, u)]), 2));
                  case 2:
                    return (ve(l), E(l, i.destroy(), 8));
                  case 8:
                    Oe(l, 0);
                }
              });
            }
            function EA(e, t) {
              for (var n = [], r = x(e.streams), i = r.next(); !i.done; i = r.next())
                ((i = i.value),
                  t && i.type == "video"
                    ? n.push({ contentType: Rt(i.mimeType, i.codecs), robustness: e.drmInfo.videoRobustness })
                    : t ||
                      i.type != "audio" ||
                      n.push({
                        contentType: Rt(i.mimeType, i.codecs),
                        robustness: e.drmInfo.audioRobustness,
                      }));
              return n;
            }
            function PD(e, t, n) {
              return F(function (r) {
                return E(r, zD(e.g, e.h.drm, n, t), 0);
              });
            }
            function DD(e, t, n) {
              function r() {}
              var i = GD(n);
              return (Wm(t, n), Promise.all([e.removeSegments(i, r), e.removeManifests([t.key()], r)]));
            }
            h.Qk = function () {
              return Ym(this, LD(this));
            };
            function LD(e) {
              var t, n, r, i, s, o, u, l, p, m;
              return F(function (y) {
                switch (y.g) {
                  case 1:
                    return (
                      mf(),
                      (t = e.g),
                      (n = e.h.drm),
                      (r = new Xn()),
                      (i = !1),
                      ge(y, 2),
                      E(y, r.init(), 4)
                    );
                  case 4:
                    ((s = []),
                      uD(r, function (v) {
                        return s.push(v);
                      }),
                      (o = x(s)),
                      (u = o.next()));
                  case 5:
                    if (u.done) {
                      y.A(2);
                      break;
                    }
                    return ((l = u.value), E(y, l.getAll(), 8));
                  case 8:
                    return ((p = y.h), E(y, yA(n, t, p), 9));
                  case 9:
                    return ((m = y.h), E(y, l.remove(m), 10));
                  case 10:
                    (m.length != p.length && (i = !0), (u = o.next()), y.A(5));
                    break;
                  case 2:
                    return (ve(y), E(y, r.destroy(), 11));
                  case 11:
                    Oe(y, 3);
                    break;
                  case 3:
                    return y.return(!i);
                }
              });
            }
            h.list = function () {
              return Ym(this, bD());
            };
            function bD() {
              var e, t, n;
              return F(function (r) {
                switch (r.g) {
                  case 1:
                    return (mf(), (e = []), (t = new Xn()), ge(r, 2), E(r, t.init(), 4));
                  case 4:
                    return (
                      (n = Promise.resolve()),
                      aD(t, function (i, s) {
                        n = n.then(function () {
                          var o;
                          return F(function (u) {
                            if (u.g == 1) return E(u, s.getAllManifests(), 2);
                            ((o = u.h),
                              o.forEach(function (l, p) {
                                ((l = Wm(new li("manifest", i.Pb, i.cb, p), l)), e.push(l));
                              }),
                              re(u));
                          });
                        });
                      }),
                      E(r, n, 2)
                    );
                  case 2:
                    return (ve(r), E(r, t.destroy(), 6));
                  case 6:
                    Oe(r, 3);
                    break;
                  case 3:
                    return r.return(e);
                }
              });
            }
            function ND(e, t, n, r) {
              var i, s, o, u, l;
              return F(function (p) {
                if (p.g == 1)
                  return (
                    (i = null),
                    (s = e.g),
                    (o = {
                      networkingEngine: s,
                      filter: function () {
                        return Promise.resolve();
                      },
                      makeTextStreamsForClosedCaptions: function () {},
                      onTimelineRegionAdded: function () {},
                      onEvent: function () {},
                      onError: function (m) {
                        i = m;
                      },
                      isLowLatencyMode: function () {
                        return !1;
                      },
                      updateDuration: function () {},
                      newDrmInfo: function () {},
                      onManifestUpdated: function () {},
                      getBandwidthEstimate: function () {
                        return r.abr.defaultBandwidthEstimate;
                      },
                      onMetadata: function () {},
                      disableStream: function () {},
                      addFont: function () {},
                    }),
                    n.configure(r.manifest),
                    cr(e),
                    E(p, n.start(t, o), 2)
                  );
                if (p.g != 3)
                  return (
                    (u = p.h),
                    cr(e),
                    (l = CA(u)),
                    E(
                      p,
                      Promise.all(
                        dp(l, function (m) {
                          return m.createSegmentIndex();
                        }),
                      ),
                      3,
                    )
                  );
                if ((cr(e), i)) throw i;
                return p.return(u);
              });
            }
            function OD(e, t, n) {
              var r, i, s, o, u, l, p, m, y, v, w, A, I, C, k;
              return F(function (R) {
                switch (R.g) {
                  case 1:
                    return E(R, IA(e, t), 2);
                  case 2:
                    if (((r = R.h), r != "text/vtt")) throw new H(1, 2, 2017, t);
                    return E(R, FD(t, e.g, e.h.streaming.retryParameters), 3);
                  case 3:
                    if (((i = R.h), (s = Qa(r)), !s)) throw new H(2, 2, 2014, r);
                    for (
                      o = s(),
                        u = {
                          periodStart: 0,
                          segmentStart: 0,
                          segmentEnd: n.presentationTimeline.getDuration(),
                          vttOffset: 0,
                        },
                        l = Le(i),
                        p = o.parseMedia(l, u, t, []),
                        m = [],
                        y = x(p),
                        v = y.next(),
                        w = {};
                      !v.done;
                      w = { Vf: void 0, od: void 0 }, v = y.next()
                    )
                      ((w.od = v.value),
                        (w.Vf = null),
                        (A = (function (L) {
                          return function () {
                            return (L.Vf == null && (L.Vf = Yt([t], [L.od.payload])), L.Vf || []);
                          };
                        })(w)),
                        (I = new Me(w.od.startTime, w.od.endTime, A, 0, null, null, 0, 0, 1 / 0)),
                        w.od.payload.includes("#xywh") &&
                          ((C = w.od.payload.split("#xywh=")[1].split(",")),
                          C.length === 4 &&
                            I.Mf({
                              height: parseInt(C[3], 10),
                              positionX: parseInt(C[0], 10),
                              positionY: parseInt(C[1], 10),
                              width: parseInt(C[2], 10),
                            })),
                        m.push(I));
                    if (((k = r), !m.length)) {
                      R.A(4);
                      break;
                    }
                    return E(R, Fo(m[0].P()[0], e.g, e.h.manifest.retryParameters), 5);
                  case 5:
                    k = R.h;
                  case 4:
                    return R.return({
                      id: e.m++,
                      originalId: null,
                      groupId: null,
                      createSegmentIndex: function () {
                        return Promise.resolve();
                      },
                      segmentIndex: new Qe(m),
                      mimeType: k || "",
                      codecs: "",
                      kind: "",
                      encrypted: !1,
                      drmInfos: [],
                      keyIds: new Set(),
                      language: "und",
                      originalLanguage: null,
                      label: null,
                      type: "image",
                      primary: !1,
                      trickModeVideo: null,
                      dependencyStream: null,
                      emsgSchemeIdUris: null,
                      roles: [],
                      forced: !1,
                      channelsCount: null,
                      audioSamplingRate: null,
                      spatialAudio: !1,
                      closedCaptions: null,
                      tilesLayout: "1x1",
                      accessibilityPurpose: null,
                      external: !0,
                      fastSwitching: !1,
                      fullMimeTypes: new Set([Rt(k || "", "")]),
                      isAudioMuxedInVideo: !1,
                      baseOriginalId: null,
                    });
                }
              });
            }
            function UD(e, t, n, r, i, s, o) {
              var u, l, p;
              return F(function (m) {
                if (m.g == 1) return s ? m.A(2) : E(m, IA(e, n), 3);
                if (
                  (m.g != 2 && (s = m.h),
                  (u = {
                    id: e.m++,
                    originalId: null,
                    groupId: null,
                    createSegmentIndex: function () {
                      return Promise.resolve();
                    },
                    segmentIndex: Gc(0, t.presentationTimeline.getDuration(), [n]),
                    mimeType: s || "",
                    codecs: o || "",
                    kind: i,
                    encrypted: !1,
                    drmInfos: [],
                    keyIds: new Set(),
                    language: r,
                    originalLanguage: r,
                    label: null,
                    type: Ve,
                    primary: !1,
                    trickModeVideo: null,
                    dependencyStream: null,
                    emsgSchemeIdUris: null,
                    roles: [],
                    forced: !1,
                    channelsCount: null,
                    audioSamplingRate: null,
                    spatialAudio: !1,
                    closedCaptions: null,
                    accessibilityPurpose: null,
                    external: !0,
                    fastSwitching: !1,
                    fullMimeTypes: new Set([Rt(s || "", o || "")]),
                    isAudioMuxedInVideo: !1,
                    baseOriginalId: null,
                  }),
                  (l = Rt(u.mimeType, u.codecs)),
                  (p = Za(l)),
                  !p)
                )
                  throw new H(2, 2, 2014, s);
                return m.return(u);
              });
            }
            function IA(e, t) {
              var n;
              return F(function (r) {
                switch (r.g) {
                  case 1:
                    return (te(r, 2), E(r, Fo(t, e.g, e.h.streaming.retryParameters), 4));
                  case 4:
                    ((n = r.h), pe(r, 3));
                    break;
                  case 2:
                    oe(r);
                  case 3:
                    if (n) return r.return(n);
                    throw new H(1, 2, 2011, t);
                }
              });
            }
            function FD(e, t, n) {
              var r, i, s;
              return F(function (o) {
                return o.g == 1
                  ? ((r = Er), (i = Ut([e], n)), (i.method = "GET"), E(o, t.request(r, i).promise, 2))
                  : ((s = o.h), o.return(s.data));
              });
            }
            h.md = function (e, t, n, r) {
              var i = this,
                s;
              return F(function (o) {
                return o.g == 1
                  ? ((s = new _c({
                      vc: i.g,
                      onError: t,
                      zf: function () {},
                      onExpirationUpdated: function () {},
                      onEvent: function () {},
                    })),
                    s.configure(n.drm),
                    E(o, QC(s, e.variants, r), 2))
                  : o.g != 3
                    ? E(o, Z0(s), 3)
                    : o.return(s);
              });
            };
            function BD(e, t, n, r) {
              var i = new Map(),
                s = CA(n),
                o = new Map();
              s = x(s);
              for (var u = s.next(); !u.done; u = s.next()) {
                u = u.value;
                var l = jD(e, t, n, u, r, i);
                o.set(u.id, l);
              }
              for (e = x(n.variants), t = e.next(); !t.done; t = e.next())
                ((t = t.value),
                  t.audio && o.get(t.audio.id).variantIds.push(t.id),
                  t.video && o.get(t.video.id).variantIds.push(t.id));
              return { streams: Array.from(o.values()), Gh: Array.from(i.values()) };
            }
            function jD(e, t, n, r, i, s) {
              var o = {
                  id: r.id,
                  originalId: r.originalId,
                  groupId: r.groupId,
                  primary: r.primary,
                  type: r.type,
                  mimeType: r.mimeType,
                  codecs: r.codecs,
                  frameRate: r.frameRate,
                  pixelAspectRatio: r.pixelAspectRatio,
                  hdr: r.hdr,
                  colorGamut: r.colorGamut,
                  videoLayout: r.videoLayout,
                  kind: r.kind,
                  language: r.language,
                  originalLanguage: r.originalLanguage,
                  label: r.label,
                  width: r.width || null,
                  height: r.height || null,
                  encrypted: r.encrypted,
                  keyIds: r.keyIds,
                  segments: [],
                  variantIds: [],
                  roles: r.roles,
                  forced: r.forced,
                  channelsCount: r.channelsCount,
                  audioSamplingRate: r.audioSamplingRate,
                  spatialAudio: r.spatialAudio,
                  closedCaptions: r.closedCaptions,
                  tilesLayout: r.tilesLayout,
                  mssPrivateData: r.mssPrivateData,
                  external: r.external,
                  fastSwitching: r.fastSwitching,
                  isAudioMuxedInVideo: r.isAudioMuxedInVideo,
                },
                u = i.offline.numberOfParallelDownloads,
                l = u === 0 ? r.id : 0;
              return (
                VD(r, n.presentationTimeline.Hb(), function (p, m) {
                  var y = Bm(p),
                    v = void 0;
                  if (!s.has(y)) {
                    var w = p.endTime - p.startTime;
                    ((w = xA(t, r.id) * w), (w = rA(e.g, w)), s.set(y, new tA(p, w, l, !1, m)));
                  }
                  (p.ea &&
                    ((v = Bm(p.ea)),
                    s.has(v) ||
                      ((w = xA(t, r.id) * 0.5), (w = rA(e.g, w)), s.set(v, new tA(p.ea, w, l, !0, m)))),
                    o.segments.push({
                      pendingInitSegmentRefId: v,
                      initSegmentKey: v ? 0 : null,
                      startTime: p.startTime,
                      endTime: p.endTime,
                      appendWindowStart: p.appendWindowStart,
                      appendWindowEnd: p.appendWindowEnd,
                      timestampOffset: p.timestampOffset,
                      tilesLayout: p.tilesLayout,
                      pendingSegmentRefId: y,
                      dataKey: 0,
                      mimeType: p.mimeType,
                      codecs: p.codecs,
                      thumbnailSprite: p.thumbnailSprite,
                    }),
                    u !== 0 && (l = (l + 1) % u));
                }),
                o
              );
            }
            function VD(e, t, n) {
              if (((t = e.segmentIndex.find(t)), t != null))
                for (var r = e.segmentIndex.get(t); r; ) (n(r, t), (r = e.segmentIndex.get(++t)));
            }
            function cr(e) {
              if (e.j.g) throw new H(2, 9, 7001);
            }
            function mf() {
              if (!Km()) throw new H(2, 9, 9e3);
            }
            function Ym(e, t) {
              return F(function (n) {
                return n.g == 1
                  ? (e.i.push(t), ge(n, 2), E(n, t, 4))
                  : n.g != 2
                    ? n.return(n.h)
                    : (ve(n), Or(e.i, t), Oe(n, 0));
              });
            }
            function HD(e, t) {
              var n = t.promise;
              return (
                e.i.push(n),
                t.finally(function () {
                  Or(e.i, n);
                })
              );
            }
            function GD(e) {
              var t = new Set();
              e = x(e.streams);
              for (var n = e.next(); !n.done; n = e.next()) {
                n = x(n.value.segments);
                for (var r = n.next(); !r.done; r = n.next())
                  ((r = r.value), r.initSegmentKey != null && t.add(r.initSegmentKey), t.add(r.dataKey));
              }
              return Array.from(t);
            }
            function zD(e, t, n, r) {
              var i, s, o;
              return F(function (u) {
                return u.g == 1
                  ? r.drmInfo
                    ? ((i = lD(n)),
                      (s = r.sessionIds.map(function (l) {
                        return {
                          sessionId: l,
                          keySystem: r.drmInfo.keySystem,
                          licenseUri: r.drmInfo.licenseServerUri,
                          serverCertificate: r.drmInfo.serverCertificate,
                          audioCapabilities: EA(r, !1),
                          videoCapabilities: EA(r, !0),
                        };
                      })),
                      E(u, yA(t, e, s), 2))
                    : u.return()
                  : u.g != 3
                    ? ((o = u.h), E(u, i.remove(o), 3))
                    : E(
                        u,
                        i.add(
                          s.filter(function (l) {
                            return !o.includes(l.sessionId);
                          }),
                        ),
                        0,
                      );
              });
            }
            function CA(e) {
              for (var t = new Set(), n = x(e.variants), r = n.next(); !r.done; r = n.next())
                ((r = r.value), r.audio && t.add(r.audio), r.video && t.add(r.video));
              for (n = x(e.textStreams), r = n.next(); !r.done; r = n.next()) t.add(r.value);
              for (e = x(e.imageStreams), n = e.next(); !n.done; n = e.next()) t.add(n.value);
              return t;
            }
            function XD(e) {
              e.variants.map(function (s) {
                return s.video;
              });
              var t = new Set(
                e.variants.map(function (s) {
                  return s.audio;
                }),
              );
              e = e.textStreams;
              for (var n = x(t), r = n.next(); !r.done; r = n.next()) {
                r = x(t);
                for (var i = r.next(); !i.done; i = r.next());
              }
              for (t = x(e), n = t.next(); !n.done; n = t.next())
                for (n = x(e), r = n.next(); !r.done; r = n.next());
            }
            (de("shaka.offline.Storage", en),
              (en.deleteAll = function () {
                var e;
                return F(function (t) {
                  return t.g == 1
                    ? ((e = new Xn()), ge(t, 2), E(t, cD(e), 2))
                    : t.g != 5
                      ? (ve(t), E(t, e.destroy(), 5))
                      : Oe(t, 0);
                });
              }),
              (en.prototype.list = en.prototype.list),
              (en.prototype.removeEmeSessions = en.prototype.Qk),
              (en.prototype.remove = en.prototype.remove),
              (en.prototype.store = en.prototype.store),
              (en.prototype.getNetworkingEngine = en.prototype.Yb),
              (en.prototype.getConfiguration = en.prototype.getConfiguration),
              (en.prototype.configure = en.prototype.configure),
              (en.prototype.destroy = en.prototype.destroy),
              (en.support = Km));
            var WD = new Map()
              .set("org.w3.clearkey", "1077efecc0b24d02ace33c1e52e2fb4b")
              .set("com.widevine.alpha", "edef8ba979d64acea3c827dcd51d21ed")
              .set("com.microsoft.playready", "9a04f07998404286ab92e65be0885f95")
              .set("com.microsoft.playready.recommendation", "9a04f07998404286ab92e65be0885f95")
              .set("com.microsoft.playready.software", "9a04f07998404286ab92e65be0885f95")
              .set("com.microsoft.playready.hardware", "9a04f07998404286ab92e65be0885f95")
              .set("com.huawei.wiseplay", "3d5e6d359b9a41e8b843dd3c6e72c42c");
            r1("offline", Km);
            function Wn() {}
            function dr(e, t) {
              for (e = { priority: t || 0, callback: e }, t = 0; t < rl.length; t++)
                if (rl[t].priority < e.priority) {
                  rl.splice(t, 0, e);
                  return;
                }
              rl.push(e);
            }
            (de("shaka.polyfill", Wn),
              (Wn.register = dr),
              (Wn.installAll = function () {
                for (var e = x(rl), t = e.next(); !t.done; t = e.next()) {
                  t = t.value;
                  try {
                    t.callback();
                  } catch (n) {
                    Be("Error installing polyfill!", n);
                  }
                }
              }));
            var rl = [];
            function yf(e, t, n) {
              ((this.g = e), (this.i = t || null), (this.h = n || null), (this.keySystem = e.keySystem));
            }
            ((yf.prototype.getConfiguration = function () {
              var e = this.g.getConfiguration();
              if (e.videoCapabilities)
                for (var t = x(e.videoCapabilities), n = t.next(); !n.done; n = t.next())
                  n.value.encryptionScheme = this.i;
              if (e.audioCapabilities)
                for (t = x(e.audioCapabilities), n = t.next(); !n.done; n = t.next())
                  n.value.encryptionScheme = this.h;
              return e;
            }),
              (yf.prototype.createMediaKeys = function () {
                return this.g.createMediaKeys();
              }));
            function MA(e) {
              return e.startsWith("com.apple")
                ? "cbcs"
                : e.startsWith("com.widevine") ||
                    e.startsWith("com.microsoft") ||
                    e.startsWith("com.chromecast") ||
                    e.startsWith("org.w3") ||
                    e.startsWith("com.huawei")
                  ? "cenc"
                  : (Be("EmeEncryptionSchemePolyfill: Unknown key system:", e, "Please contribute!"), null);
            }
            function RA(e) {
              if (!e) return !1;
              e = e.getConfiguration();
              var t = e.audioCapabilities && e.audioCapabilities[0];
              return !!(
                (e = (e.videoCapabilities && e.videoCapabilities[0]) || t) && e.encryptionScheme !== void 0
              );
            }
            function qm(e, t) {
              return !!(!e || e == t || ((e == "cbcs" || e == "cbcs-1-9") && je().ed()));
            }
            function kA() {}
            var il;
            function _A() {
              je().Of() &&
                !il &&
                !navigator.emeEncryptionSchemePolyfilled &&
                navigator.requestMediaKeySystemAccess &&
                MediaKeySystemAccess.prototype.getConfiguration &&
                ((il = navigator.requestMediaKeySystemAccess),
                (navigator.requestMediaKeySystemAccess = KD),
                (navigator.emeEncryptionSchemePolyfilled = !0));
            }
            function KD(e, t) {
              var n = this,
                r;
              return F(function (i) {
                return i.g == 1
                  ? E(i, il.call(n, e, t), 2)
                  : ((r = i.h),
                    RA(r)
                      ? ((navigator.requestMediaKeySystemAccess = il), i.return(r))
                      : ((navigator.requestMediaKeySystemAccess = PA), i.return(PA.call(n, e, t))));
              });
            }
            function PA(e, t) {
              var n = this,
                r,
                i,
                s,
                o,
                u,
                l,
                p,
                m,
                y,
                v,
                w,
                A;
              return F(function (I) {
                if (I.g == 1) {
                  for (r = MA(e), i = [], s = x(t), o = s.next(); !o.done; o = s.next())
                    ((u = o.value),
                      (l = DA(u.videoCapabilities, r)),
                      (p = DA(u.audioCapabilities, r)),
                      (u.videoCapabilities && u.videoCapabilities.length && !l.length) ||
                        (u.audioCapabilities && u.audioCapabilities.length && !p.length) ||
                        ((m = Object.assign({}, u)),
                        (m.videoCapabilities = l),
                        (m.audioCapabilities = p),
                        i.push(m)));
                  if (!i.length)
                    throw (
                      (y = Error("Unsupported keySystem or supportedConfigurations.")),
                      (y.name = "NotSupportedError"),
                      (y.code = DOMException.NOT_SUPPORTED_ERR),
                      y
                    );
                  return E(I, il.call(n, e, i), 2);
                }
                return (
                  (v = I.h),
                  (A = w = null),
                  i[0] &&
                    (i[0].videoCapabilities && (w = i[0].videoCapabilities[0].encryptionScheme),
                    i[0].audioCapabilities && (A = i[0].audioCapabilities[0].encryptionScheme)),
                  I.return(new yf(v, w, A))
                );
              });
            }
            function DA(e, t) {
              return (
                e &&
                e.filter(function (n) {
                  return qm(n.encryptionScheme, t);
                })
              );
            }
            ((Wn.EmeEncryptionScheme = kA), (kA.install = _A), dr(_A));
            function LA() {}
            var sl;
            function bA() {
              je().Of() &&
                !sl &&
                !navigator.mediaCapabilitiesEncryptionSchemePolyfilled &&
                navigator.mediaCapabilities &&
                ((sl = navigator.mediaCapabilities.decodingInfo),
                (navigator.mediaCapabilities.decodingInfo = $D),
                (navigator.mediaCapabilitiesEncryptionSchemePolyfilled = !0));
            }
            function $D(e) {
              var t = this,
                n,
                r;
              return F(function (i) {
                switch (i.g) {
                  case 1:
                    return E(i, sl.call(t, e), 2);
                  case 2:
                    if (((n = i.h), !n.supported || !e.keySystemConfiguration)) return i.return(n);
                    if (((r = n.keySystemAccess), RA(r)))
                      return ((navigator.mediaCapabilities.decodingInfo = sl), i.return(n));
                    if (((navigator.mediaCapabilities.decodingInfo = NA), r)) {
                      i.A(3);
                      break;
                    }
                    return E(i, OA(e), 4);
                  case 4:
                    return ((n.keySystemAccess = i.h), i.return(n));
                  case 3:
                    return i.return(NA.call(t, e));
                }
              });
            }
            function NA(e) {
              var t = this,
                n,
                r,
                i,
                s,
                o,
                u,
                l;
              return F(function (p) {
                switch (p.g) {
                  case 1:
                    return (
                      (r = n = null),
                      !e.keySystemConfiguration ||
                      ((i = e.keySystemConfiguration),
                      (s = i.keySystem),
                      (r = i.audio && i.audio.encryptionScheme),
                      (n = i.video && i.video.encryptionScheme),
                      (o = MA(s)),
                      (u = {
                        powerEfficient: !1,
                        smooth: !1,
                        supported: !1,
                        keySystemAccess: null,
                        configuration: e,
                      }),
                      qm(r, o) && qm(n, o))
                        ? E(p, sl.call(t, e), 2)
                        : p.return(u)
                    );
                  case 2:
                    if (((l = p.h), l.keySystemAccess)) {
                      ((l.keySystemAccess = new yf(l.keySystemAccess, n, r)), p.A(3));
                      break;
                    }
                    if (!e.keySystemConfiguration) {
                      p.A(3);
                      break;
                    }
                    return E(p, OA(e), 5);
                  case 5:
                    l.keySystemAccess = p.h;
                  case 3:
                    return p.return(l);
                }
              });
            }
            function OA(e) {
              var t, n;
              return F(function (r) {
                if (r.g == 1) {
                  var i = e.keySystemConfiguration,
                    s = [],
                    o = [];
                  return (
                    i.audio &&
                      s.push({
                        robustness: i.audio.robustness || "",
                        contentType: e.audio.contentType,
                        encryptionScheme: i.audio.encryptionScheme,
                      }),
                    i.video &&
                      o.push({
                        robustness: i.video.robustness || "",
                        contentType: e.video.contentType,
                        encryptionScheme: i.video.encryptionScheme,
                      }),
                    (i = {
                      initDataTypes: i.initDataType ? [i.initDataType] : [],
                      distinctiveIdentifier: i.distinctiveIdentifier,
                      persistentState: i.persistentState,
                      sessionTypes: i.sessionTypes,
                    }),
                    s.length && (i.audioCapabilities = s),
                    o.length && (i.videoCapabilities = o),
                    (t = i),
                    E(r, navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem, [t]), 2)
                  );
                }
                return ((n = r.h), r.return(n));
              });
            }
            ((Wn.MCapEncryptionScheme = LA), (LA.install = bA), dr(bA, -2));
            function vf() {}
            function UA() {
              je().hc() ||
                (navigator.mediaCapabilities || (navigator.mediaCapabilities = {}),
                (vf.originalMcap = navigator.mediaCapabilities),
                (navigator.mediaCapabilities.decodingInfo = YD));
            }
            function YD(e) {
              var t, n, r, i, s, o, u, l, p, m, y;
              return F(function (v) {
                switch (v.g) {
                  case 1:
                    if (
                      ((t = {
                        supported: !1,
                        powerEfficient: !0,
                        smooth: !0,
                        keySystemAccess: null,
                        configuration: e,
                      }),
                      je(),
                      (n = e.video),
                      (r = e.audio),
                      e.type != "media-source")
                    ) {
                      if (e.type == "file") {
                        if (
                          (n && ((i = n.contentType), (s = Gs().canPlayType(i) != ""), !s)) ||
                          (r && ((o = r.contentType), (u = Gs().canPlayType(o) != ""), !u))
                        )
                          return v.return(t);
                      } else return v.return(t);
                      v.A(2);
                      break;
                    }
                    if (!ui()) return v.return(t);
                    if (!n) {
                      v.A(3);
                      break;
                    }
                    return E(v, qD(n), 4);
                  case 4:
                    if (((l = v.h), !l)) return v.return(t);
                  case 3:
                    if (r) {
                      var w = je().Oa(),
                        A = r.contentType;
                      if (
                        (w === "CAST" && r.spatialRendering && (A += "; spatialRendering=true"),
                        (p = In(A)),
                        !p)
                      )
                        return v.return(t);
                    }
                  case 2:
                    return e.keySystemConfiguration
                      ? ((m = e.keySystemConfiguration), E(v, JD(n, r, m), 6))
                      : ((t.supported = !0), v.return(t));
                  case 6:
                    (y = v.h) && ((t.supported = !0), (t.keySystemAccess = y));
                  case 5:
                    return v.return(t);
                }
              });
            }
            function qD(e) {
              var t, n, r;
              return F(function (i) {
                return i.g == 1
                  ? ((t = je()), (n = t.Oa()), n !== "CAST" ? i.A(2) : E(i, QD(e), 3))
                  : i.g != 2
                    ? ((r = i.h), i.return(r))
                    : i.return(In(e.contentType));
              });
            }
            function JD(e, t, n) {
              var r, i, s, o, u, l, p, m, y, v, w, A;
              return F(function (I) {
                switch (I.g) {
                  case 1:
                    ((r = []),
                      (i = []),
                      (s = []),
                      n.audio &&
                        ((o = { robustness: n.audio.robustness || "", contentType: t.contentType }),
                        je().Bi() &&
                          t.contentType.includes('codecs="ac-3"') &&
                          (o.contentType = 'audio/mp4; codecs="ec-3"'),
                        n.audio.encryptionScheme &&
                          ((o.encryptionScheme = n.audio.encryptionScheme), s.push(n.audio.encryptionScheme)),
                        r.push(o)),
                      n.video &&
                        ((u = { robustness: n.video.robustness || "", contentType: e.contentType }),
                        n.video.encryptionScheme &&
                          ((u.encryptionScheme = n.video.encryptionScheme), s.push(n.video.encryptionScheme)),
                        i.push(u)),
                      (l = {
                        initDataTypes: [n.initDataType],
                        distinctiveIdentifier: n.distinctiveIdentifier,
                        persistentState: n.persistentState,
                        sessionTypes: n.sessionTypes,
                      }),
                      r.length && (l.audioCapabilities = r),
                      i.length && (l.videoCapabilities = i),
                      (p = e ? e.contentType : ""),
                      (m = t ? t.contentType : ""),
                      (y = Qn(p) + ";" + Zi(p)),
                      (v = Qn(m) + ";" + Zi(m)),
                      (w = n.keySystem),
                      (A = null),
                      te(I, 2));
                    var C = Vh(y, v, w, s);
                    if (fo.has(C)) {
                      ((C = Vh(y, v, w, s)), (A = fo.get(C) || null), I.A(4));
                      break;
                    }
                    return E(I, navigator.requestMediaKeySystemAccess(n.keySystem, [l]), 5);
                  case 5:
                    C = A = I.h;
                    var k = Vh(y, v, w, s);
                    fo.set(k, C);
                  case 4:
                    pe(I, 3);
                    break;
                  case 2:
                    oe(I);
                  case 3:
                    return I.return(A);
                }
              });
            }
            function QD(e) {
              var t, n, r, i, s;
              return F(function (o) {
                if (o.g == 1) {
                  if (!(g.cast && cast.__platform__ && cast.__platform__.canDisplayType))
                    return o.return(In(e.contentType));
                  switch (
                    ((t = e.contentType),
                    e.width &&
                      e.height &&
                      e.width > 1280 &&
                      e.height > 720 &&
                      (t += "; width=" + e.width + "; height=" + e.height),
                    e.framerate &&
                      ((n = Math.round(e.framerate)), n < 24 || n > 30) &&
                      (t += "; framerate=" + e.framerate),
                    (r = e.transferFunction || ""),
                    r)
                  ) {
                    case "":
                    case "srgb":
                      break;
                    case "pq":
                      t += "; eotf=smpte2084";
                      break;
                    case "hlg":
                      t += "; eotf=arib-std-b67";
                      break;
                    default:
                      return o.return(!1);
                  }
                  return (
                    (i = !1),
                    (s = ZD),
                    s.has(t) ? ((i = s.get(t)), o.A(2)) : E(o, cast.__platform__.canDisplayType(t), 3)
                  );
                }
                return (o.g != 2 && ((i = o.h), s.set(t, i)), o.return(i));
              });
            }
            ((Wn.MediaCapabilities = vf), (vf.install = UA), (vf.originalMcap = null));
            var ZD = new Map();
            dr(UA, -1);
            function FA() {}
            function BA() {
              var e = je(),
                t = e.Ha() === "WEBKIT" ? e.Ba() : null;
              for (
                (g.MediaSource || g.ManagedMediaSource) &&
                  t &&
                  g.MediaSource &&
                  (t <= 12 ? (jA(), eL()) : t <= 15 && jA()),
                  e = x(e.Li()),
                  t = e.next();
                !t.done;
                t = e.next()
              )
                nL(t.value);
              ((g.MediaSource || g.ManagedMediaSource) && tL(),
                g.MediaSource &&
                  MediaSource.isTypeSupported('video/webm; codecs="vp9"') &&
                  !MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"') &&
                  rL());
            }
            function jA() {
              var e = MediaSource.prototype.addSourceBuffer;
              MediaSource.prototype.addSourceBuffer = function () {
                var t = e.apply(this, It.apply(0, arguments));
                return ((t.abort = function () {}), t);
              };
            }
            function eL() {
              var e = SourceBuffer.prototype.remove;
              SourceBuffer.prototype.remove = function (t, n) {
                return e.call(this, t, n - 0.001);
              };
            }
            function tL() {
              if (g.MediaSource) {
                var e = MediaSource.isTypeSupported.bind(MediaSource);
                MediaSource.isTypeSupported = function (n) {
                  return Ja(n) != "mp2t" && e(n);
                };
              }
              if (g.ManagedMediaSource) {
                var t = ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);
                g.ManagedMediaSource.isTypeSupported = function (n) {
                  return Ja(n) != "mp2t" && t(n);
                };
              }
            }
            function nL(e) {
              var t = MediaSource.isTypeSupported.bind(MediaSource);
              if (
                ((MediaSource.isTypeSupported = function (r) {
                  return Zi(r) != e && t(r);
                }),
                g.ManagedMediaSource)
              ) {
                var n = ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);
                g.ManagedMediaSource.isTypeSupported = function (r) {
                  return Zi(r) != e && n(r);
                };
              }
            }
            function rL() {
              var e = MediaSource.isTypeSupported;
              je().fj() &&
                (MediaSource.isTypeSupported = function (t) {
                  var n = t.split(/ *; */),
                    r = n.findIndex(function (o) {
                      return o.startsWith("codecs=");
                    });
                  if (r < 0) return e(t);
                  var i = n[r]
                      .replace("codecs=", "")
                      .replace(/"/g, "")
                      .split(/\s*,\s*/),
                    s = i.findIndex(function (o) {
                      return o.startsWith("vp09");
                    });
                  return (
                    s >= 0 && ((i[s] = "vp9"), (n[r] = 'codecs="' + i.join(",") + '"'), (t = n.join("; "))),
                    e(t)
                  );
                });
            }
            ((Wn.MediaSource = FA), (FA.install = BA), dr(BA));
            function Jm() {}
            var Qm, Zm, ey, ty, ny, ry;
            function VA(e) {
              g.HTMLVideoElement &&
                g.WebKitMediaKeys &&
                g.shakaMediaKeysPolyfill != sy &&
                (e !== void 0 &&
                  e &&
                  ((Qm = !0),
                  (Zm = Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype, "mediaKeys")),
                  (ey = HTMLMediaElement.prototype.setMediaKeys),
                  (ty = g.MediaKeys),
                  (ny = g.MediaKeySystemAccess),
                  (ry = navigator.requestMediaKeySystemAccess)),
                delete HTMLMediaElement.prototype.mediaKeys,
                (HTMLMediaElement.prototype.mediaKeys = null),
                (HTMLMediaElement.prototype.setMediaKeys = sL),
                (g.MediaKeys = ol),
                (g.MediaKeySystemAccess = xf),
                (navigator.requestMediaKeySystemAccess = iL),
                (g.shakaMediaKeysPolyfill = sy),
                Sc.clear(),
                fo.clear());
            }
            function iL(e, t) {
              try {
                var n = new xf(e, t);
                return Promise.resolve(n);
              } catch (r) {
                return Promise.reject(r);
              }
            }
            function sL(e) {
              var t = this.mediaKeys;
              return (
                t && t != e && HA(t, null),
                delete this.mediaKeys,
                (this.mediaKeys = e) ? HA(e, this) : Promise.resolve()
              );
            }
            function oL(e) {
              if (((e = Le(e.initData)), Bn(e).getUint32(0, !0) + 4 != e.byteLength))
                throw new RangeError("Malformed FairPlay init data");
              ((e = $i(e.subarray(4), !0)), (e = Ur(e)));
              var t = new Event("encrypted");
              ((t.initDataType = "skd"), (t.initData = wr(e)), this.dispatchEvent(t));
            }
            ((Wn.PatchedMediaKeysApple = Jm),
              (Jm.uninstall = function () {
                g.shakaMediaKeysPolyfill == sy &&
                  Qm &&
                  ((Qm = !1),
                  Object.defineProperty(HTMLMediaElement.prototype, "mediaKeys", Zm),
                  (HTMLMediaElement.prototype.setMediaKeys = ey),
                  (g.MediaKeys = ty),
                  (g.MediaKeySystemAccess = ny),
                  (navigator.requestMediaKeySystemAccess = ry),
                  (Zm = ry = ey = ny = ty = null),
                  (g.shakaMediaKeysPolyfill = ""),
                  Sc.clear(),
                  fo.clear());
              }),
              (Jm.install = VA));
            function xf(e, t) {
              if (((this.keySystem = e), e.startsWith("com.apple.fps")))
                for (e = x(t), t = e.next(); !t.done; t = e.next()) {
                  var n = t.value;
                  if (n.persistentState == "required") t = null;
                  else {
                    t = {
                      audioCapabilities: [],
                      videoCapabilities: [],
                      persistentState: "optional",
                      distinctiveIdentifier: "optional",
                      initDataTypes: n.initDataTypes,
                      sessionTypes: ["temporary"],
                      label: n.label,
                    };
                    var r = !1,
                      i = !1;
                    if (n.audioCapabilities)
                      for (var s = x(n.audioCapabilities), o = s.next(); !o.done; o = s.next())
                        ((o = o.value),
                          o.contentType &&
                            ((r = !0),
                            WebKitMediaKeys.isTypeSupported(this.keySystem, o.contentType.split(";")[0]) &&
                              (t.audioCapabilities.push(o), (i = !0))));
                    if (n.videoCapabilities)
                      for (n = x(n.videoCapabilities), s = n.next(); !s.done; s = n.next())
                        ((s = s.value),
                          s.contentType &&
                            ((r = !0),
                            WebKitMediaKeys.isTypeSupported(this.keySystem, s.contentType.split(";")[0]) &&
                              (t.videoCapabilities.push(s), (i = !0))));
                    (r || (i = WebKitMediaKeys.isTypeSupported(this.keySystem, "video/mp4")),
                      (t = i ? t : null));
                  }
                  if (t) {
                    this.g = t;
                    return;
                  }
                }
              throw (
                (e = Error("Unsupported keySystem")),
                (e.name = "NotSupportedError"),
                (e.code = DOMException.NOT_SUPPORTED_ERR),
                e
              );
            }
            ((xf.prototype.createMediaKeys = function () {
              var e = new ol(this.keySystem);
              return Promise.resolve(e);
            }),
              (xf.prototype.getConfiguration = function () {
                return this.g;
              }));
            function ol(e) {
              ((this.h = new WebKitMediaKeys(e)), (this.g = new tt()));
            }
            ((ol.prototype.createSession = function (e) {
              if (((e = e || "temporary"), e != "temporary"))
                throw new TypeError("Session type " + e + " is unsupported on this platform.");
              return new iy(this.h);
            }),
              (ol.prototype.setServerCertificate = function () {
                return Promise.resolve(!1);
              }));
            function HA(e, t) {
              if ((e.g.Qa(), !t)) return Promise.resolve();
              e.g.D(t, "webkitneedkey", oL);
              try {
                return (
                  Uo(t, HTMLMediaElement.HAVE_METADATA, e.g, function () {
                    t.webkitSetMediaKeys(e.h);
                  }),
                  Promise.resolve()
                );
              } catch (n) {
                return Promise.reject(n);
              }
            }
            ol.prototype.getStatusForPolicy = function () {
              return Promise.resolve("usable");
            };
            function iy(e) {
              (ut.call(this),
                (this.i = null),
                (this.l = e),
                (this.g = this.h = null),
                (this.j = new tt()),
                (this.sessionId = ""),
                (this.expiration = NaN),
                (this.closed = new lt()),
                (this.keyStatuses = new GA()),
                (this.onkeystatuseschange = null));
            }
            (q(iy, ut),
              (h = iy.prototype),
              (h.generateRequest = function (e, t) {
                var n = this;
                this.h = new lt();
                try {
                  var r = this.l.createSession("video/mp4", Le(t));
                  ((this.i = r),
                    (this.sessionId = r.sessionId || ""),
                    this.j.D(this.i, "webkitkeymessage", function (i) {
                      (n.h && (n.h.resolve(), (n.h = null)),
                        (i = new Map()
                          .set(
                            "messageType",
                            n.keyStatuses.Kc() == null ? "license-request" : "license-renewal",
                          )
                          .set("message", wr(i.message))),
                        (i = new Ae("message", i)),
                        n.dispatchEvent(i));
                    }),
                    this.j.D(r, "webkitkeyadded", function () {
                      n.g && (Tf(n, "usable"), n.g.resolve(), (n.g = null));
                    }),
                    this.j.D(r, "webkitkeyerror", function () {
                      var i = Error("EME PatchedMediaKeysApple key error");
                      if (((i.errorCode = n.i.error), n.h != null)) (n.h.reject(i), (n.h = null));
                      else if (n.g != null) (n.g.reject(i), (n.g = null));
                      else
                        switch (n.i.error.code) {
                          case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:
                          case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:
                            Tf(n, "output-not-allowed");
                            break;
                          default:
                            Tf(n, "internal-error");
                        }
                    }),
                    Tf(this, "status-pending"));
                } catch (i) {
                  this.h.reject(i);
                }
                return this.h;
              }),
              (h.load = function () {
                return Promise.reject(Error("MediaKeySession.load not yet supported"));
              }),
              (h.update = function (e) {
                this.g = new lt();
                try {
                  this.i.update(Le(e));
                } catch (t) {
                  this.g.reject(t);
                }
                return this.g;
              }),
              (h.close = function () {
                try {
                  (this.i.close(), this.closed.resolve(), this.j.Qa());
                } catch (e) {
                  this.closed.reject(e);
                }
                return this.closed;
              }),
              (h.remove = function () {
                return Promise.reject(
                  Error(
                    "MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform",
                  ),
                );
              }));
            function Tf(e, t) {
              var n = e.keyStatuses;
              ((n.size = t == null ? 0 : 1),
                (n.g = t),
                (t = new Ae("keystatuseschange")),
                e.dispatchEvent(t),
                e.onkeystatuseschange && e.onkeystatuseschange(t));
            }
            function GA() {
              ((this.size = 0), (this.g = void 0));
            }
            ((h = GA.prototype),
              (h.Kc = function () {
                return this.g;
              }),
              (h.forEach = function (e) {
                this.g && e(this.g, Zl.value());
              }),
              (h.get = function (e) {
                if (this.has(e)) return this.g;
              }),
              (h.has = function (e) {
                var t = Zl.value();
                return !!(this.g && pi(e, t));
              }),
              (h.entries = function () {}),
              (h.keys = function () {}),
              (h.values = function () {}));
            var sy = "apple";
            dr(function () {
              g.HTMLVideoElement &&
                g.WebKitMediaKeys &&
                ((navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration) ||
                  VA());
            });
            function zA() {}
            function XA() {
              if (g.MediaKeys) {
                var e = je();
                (MediaKeys.prototype.setServerCertificate && e.we()) ||
                  (MediaKeys.prototype.setServerCertificate = aL);
              }
            }
            function aL() {
              return Promise.resolve(!1);
            }
            ((Wn.PatchedMediaKeysCert = zA), (zA.install = XA), dr(XA));
            function WA() {}
            function KA() {
              if (
                !(
                  !g.HTMLVideoElement ||
                  (navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration)
                )
              ) {
                if (HTMLMediaElement.prototype.webkitGenerateKeyRequest) cy = "webkit";
                else if (!HTMLMediaElement.prototype.generateKeyRequest) return;
                ((navigator.requestMediaKeySystemAccess = uL),
                  delete HTMLMediaElement.prototype.mediaKeys,
                  (HTMLMediaElement.prototype.mediaKeys = null),
                  (HTMLMediaElement.prototype.setMediaKeys = lL),
                  (g.MediaKeys = al),
                  (g.MediaKeySystemAccess = wf),
                  (g.shakaMediaKeysPolyfill = cL));
              }
            }
            function oy(e) {
              var t = cy;
              return t ? t + e.charAt(0).toUpperCase() + e.slice(1) : e;
            }
            function uL(e, t) {
              try {
                var n = new wf(e, t);
                return Promise.resolve(n);
              } catch (r) {
                return Promise.reject(r);
              }
            }
            function lL(e) {
              var t = this.mediaKeys;
              return (
                t && t != e && $A(t, null),
                delete this.mediaKeys,
                (this.mediaKeys = e) && $A(e, this),
                Promise.resolve()
              );
            }
            ((Wn.PatchedMediaKeysWebkit = WA), (WA.install = KA));
            function wf(e, t) {
              this.g = this.keySystem = e;
              var n = !1;
              e == "org.w3.clearkey" && ((this.g = "webkit-org.w3.clearkey"), (n = !1));
              var r = !1,
                i = document.getElementsByTagName("video");
              ((i = i.length ? i[0] : document.createElement("video")), (t = x(t)));
              for (var s = t.next(); !s.done; s = t.next()) {
                s = s.value;
                var o = {
                    audioCapabilities: [],
                    videoCapabilities: [],
                    persistentState: "optional",
                    distinctiveIdentifier: "optional",
                    initDataTypes: s.initDataTypes,
                    sessionTypes: ["temporary"],
                    label: s.label,
                  },
                  u = !1;
                if (s.audioCapabilities)
                  for (var l = x(s.audioCapabilities), p = l.next(); !p.done; p = l.next())
                    ((p = p.value),
                      p.contentType &&
                        ((u = !0),
                        i.canPlayType(p.contentType.split(";")[0], this.g) &&
                          (o.audioCapabilities.push(p), (r = !0))));
                if (s.videoCapabilities)
                  for (l = x(s.videoCapabilities), p = l.next(); !p.done; p = l.next())
                    ((p = p.value),
                      p.contentType &&
                        ((u = !0),
                        i.canPlayType(p.contentType, this.g) && (o.videoCapabilities.push(p), (r = !0))));
                if (
                  (u || (r = i.canPlayType("video/mp4", this.g) || i.canPlayType("video/webm", this.g)),
                  s.persistentState == "required" &&
                    (n
                      ? ((o.persistentState = "required"), (o.sessionTypes = ["persistent-license"]))
                      : (r = !1)),
                  r)
                ) {
                  this.h = o;
                  return;
                }
              }
              throw (
                (n = "Unsupported keySystem"),
                (e == "org.w3.clearkey" || e == "com.widevine.alpha") &&
                  (n = "None of the requested configurations were supported."),
                (e = Error(n)),
                (e.name = "NotSupportedError"),
                (e.code = DOMException.NOT_SUPPORTED_ERR),
                e
              );
            }
            ((wf.prototype.createMediaKeys = function () {
              var e = new al(this.g);
              return Promise.resolve(e);
            }),
              (wf.prototype.getConfiguration = function () {
                return this.h;
              }));
            function al(e) {
              ((this.l = e), (this.h = null), (this.g = new tt()), (this.i = []), (this.j = new Map()));
            }
            function $A(e, t) {
              ((e.h = t), e.g.Qa());
              var n = cy;
              t &&
                (e.g.D(t, n + "needkey", function (r) {
                  var i = new CustomEvent("encrypted");
                  ((i.initDataType = "cenc"), (i.initData = wr(r.initData)), e.h.dispatchEvent(i));
                }),
                e.g.D(t, n + "keymessage", function (r) {
                  var i = ay(e, r.sessionId);
                  i &&
                    ((r = new Map()
                      .set("messageType", i.keyStatuses.Kc() == null ? "licenserequest" : "licenserenewal")
                      .set("message", r.message)),
                    (r = new Ae("message", r)),
                    i.h && (i.h.resolve(), (i.h = null)),
                    i.dispatchEvent(r));
                }),
                e.g.D(t, n + "keyadded", function (r) {
                  (r = ay(e, r.sessionId)) && r.ready();
                }),
                e.g.D(t, n + "keyerror", function (r) {
                  var i = ay(e, r.sessionId);
                  if (i) {
                    var s = Error("EME v0.1b key error"),
                      o = r.errorCode;
                    ((o.systemCode = r.systemCode),
                      (s.errorCode = o),
                      !r.sessionId && i.h
                        ? (r.systemCode == 45 && (s.message = "Unsupported session type."),
                          i.h.reject(s),
                          (i.h = null))
                        : r.sessionId && i.g
                          ? (i.g.reject(s), (i.g = null))
                          : ((s = r.systemCode),
                            r.errorCode.code == MediaKeyError.MEDIA_KEYERR_OUTPUT
                              ? Sf(i, "output-restricted")
                              : s == 1
                                ? Sf(i, "expired")
                                : Sf(i, "internal-error")));
                  }
                }));
            }
            ((al.prototype.createSession = function (e) {
              if (((e = e || "temporary"), e != "temporary" && e != "persistent-license"))
                throw new TypeError("Session type " + e + " is unsupported on this platform.");
              var t = this.h || document.createElement("video");
              return (t.src || (t.src = "about:blank"), (e = new uy(t, this.l, e)), this.i.push(e), e);
            }),
              (al.prototype.setServerCertificate = function () {
                return Promise.resolve(!1);
              }),
              (al.prototype.getStatusForPolicy = function () {
                return Promise.resolve("usable");
              }));
            function ay(e, t) {
              var n = e.j.get(t);
              return n || ((n = e.i.shift()) ? ((n.sessionId = t), e.j.set(t, n), n) : null);
            }
            function uy(e, t, n) {
              (ut.call(this),
                (this.j = e),
                (this.m = !1),
                (this.g = this.h = null),
                (this.i = t),
                (this.l = n),
                (this.sessionId = ""),
                (this.expiration = NaN),
                (this.closed = new lt()),
                (this.keyStatuses = new qA()),
                (this.onkeystatuseschange = null));
            }
            (q(uy, ut),
              (h = uy.prototype),
              (h.ready = function () {
                (Sf(this, "usable"), this.g && this.g.resolve(), (this.g = null));
              }));
            function YA(e, t, n) {
              if (e.m) return Promise.reject(Error("The session is already initialized."));
              e.m = !0;
              try {
                if (e.l == "persistent-license")
                  if (n) var r = Le(Ur("LOAD_SESSION|" + n));
                  else {
                    var i = Ur("PERSISTENT|");
                    r = Nt(i, t);
                  }
                else r = Le(t);
              } catch (o) {
                return Promise.reject(o);
              }
              e.h = new lt();
              var s = oy("generateKeyRequest");
              try {
                e.j[s](e.i, r);
              } catch (o) {
                if (o.name != "InvalidStateError") return ((e.h = null), Promise.reject(o));
                new He(function () {
                  try {
                    e.j[s](e.i, r);
                  } catch (u) {
                    (e.h.reject(u), (e.h = null));
                  }
                }).ka(0.01);
              }
              return e.h;
            }
            function ly(e, t, n) {
              if (e.g)
                e.g
                  .then(function () {
                    return ly(e, t, n);
                  })
                  .catch(function () {
                    return ly(e, t, n);
                  });
              else {
                if (((e.g = t), e.i == "webkit-org.w3.clearkey")) {
                  var r = At(n),
                    i = JSON.parse(r);
                  (i.keys[0].kty != "oct" &&
                    (e.g.reject(Error("Response is not a valid JSON Web Key Set.")), (e.g = null)),
                    (r = Sr(i.keys[0].k)),
                    (i = Sr(i.keys[0].kid)));
                } else ((r = Le(n)), (i = null));
                var s = oy("addKey");
                try {
                  e.j[s](e.i, r, i, e.sessionId);
                } catch (o) {
                  (e.g.reject(o), (e.g = null));
                }
              }
            }
            function Sf(e, t) {
              var n = e.keyStatuses;
              ((n.size = t == null ? 0 : 1),
                (n.g = t),
                (t = new Ae("keystatuseschange")),
                e.dispatchEvent(t),
                e.onkeystatuseschange && e.onkeystatuseschange(t));
            }
            ((h.generateRequest = function (e, t) {
              return YA(this, t, null);
            }),
              (h.load = function (e) {
                return this.l == "persistent-license"
                  ? YA(this, null, e)
                  : Promise.reject(Error("Not a persistent session."));
              }),
              (h.update = function (e) {
                var t = new lt();
                return (ly(this, t, e), t);
              }),
              (h.close = function () {
                if (this.l != "persistent-license") {
                  if (!this.sessionId)
                    return (this.closed.reject(Error("The session is not callable.")), this.closed);
                  var e = oy("cancelKeyRequest");
                  try {
                    this.j[e](this.i, this.sessionId);
                  } catch (t) {}
                }
                return (this.closed.resolve(), this.closed);
              }),
              (h.remove = function () {
                return this.l != "persistent-license"
                  ? Promise.reject(Error("Not a persistent session."))
                  : this.close();
              }));
            function qA() {
              ((this.size = 0), (this.g = void 0));
            }
            ((h = qA.prototype),
              (h.Kc = function () {
                return this.g;
              }),
              (h.forEach = function (e) {
                this.g && e(this.g, Zl.value());
              }),
              (h.get = function (e) {
                if (this.has(e)) return this.g;
              }),
              (h.has = function (e) {
                var t = Zl.value();
                return !!(this.g && pi(e, t));
              }),
              (h.entries = function () {}),
              (h.keys = function () {}),
              (h.values = function () {}));
            var cy = "",
              cL = "webkit";
            dr(KA);
            function JA() {}
            function QA() {
              g.crypto && ("randomUUID" in g.crypto || (g.crypto.randomUUID = dL));
            }
            function dL() {
              var e = URL.createObjectURL(new Blob()),
                t = e.toString();
              return (URL.revokeObjectURL(e), t.substr(t.lastIndexOf("/") + 1));
            }
            ((Wn.RandomUUID = JA), (JA.install = QA), dr(QA));
            function ZA() {}
            function eE() {
              var e = Symbol.prototype;
              "description" in e || Object.defineProperty(e, "description", { get: fL });
            }
            function fL() {
              var e = /\((.*)\)/.exec(this.toString());
              return e ? e[1] : void 0;
            }
            ((Wn.Symbol = ZA), (ZA.install = eE), dr(eE));
            function tE() {}
            function nE() {
              for (
                var e = x([
                    Uint8Array,
                    Uint8ClampedArray,
                    Uint16Array,
                    Uint32Array,
                    Int8Array,
                    Int16Array,
                    Int32Array,
                    Float32Array,
                    Float64Array,
                  ]),
                  t = e.next();
                !t.done;
                t = e.next()
              )
                ((t = t.value),
                  t.prototype.indexOf || (t.prototype.indexOf = hL),
                  t.prototype.lastIndexOf || (t.prototype.lastIndexOf = pL),
                  t.prototype.includes || (t.prototype.includes = gL));
            }
            function hL(e, t) {
              return Array.prototype.indexOf.call(this, e, t);
            }
            function pL(e, t) {
              return Array.prototype.lastIndexOf.call(this, e, t);
            }
            function gL(e, t) {
              return this.indexOf(e, t) !== -1;
            }
            ((Wn.TypedArray = tE), (tE.install = nE), dr(nE));
            function rE() {}
            function iE() {
              if (g.HTMLMediaElement) {
                var e = HTMLMediaElement.prototype.play;
                HTMLMediaElement.prototype.play = function () {
                  var t = e.apply(this);
                  return (t && t.catch(function () {}), t);
                };
              }
            }
            ((Wn.VideoPlayPromise = rE), (rE.install = iE), dr(iE));
            function sE() {}
            function oE() {
              if (g.HTMLVideoElement) {
                var e = HTMLVideoElement.prototype;
                !e.getVideoPlaybackQuality &&
                  ("webkitDroppedFrameCount" in e || typeof Gs().webkitDroppedFrameCount == "number") &&
                  (e.getVideoPlaybackQuality = mL);
              }
            }
            function mL() {
              return {
                droppedVideoFrames: this.webkitDroppedFrameCount,
                totalVideoFrames: this.webkitDecodedFrameCount,
                corruptedVideoFrames: 0,
                creationTime: NaN,
                totalFrameDelay: 0,
              };
            }
            ((Wn.VideoPlaybackQuality = sE), (sE.install = oE), dr(oE));
            function aE() {}
            function uE() {
              if (!g.VTTCue && g.TextTrackCue) {
                var e = null,
                  t = TextTrackCue.length;
                if (t == 3) e = dy;
                else if (t == 6) e = yL;
                else {
                  try {
                    var n = !!dy(1, 2, "");
                  } catch (r) {
                    n = !1;
                  }
                  n && (e = dy);
                }
                e &&
                  (g.VTTCue = function (r, i, s) {
                    return e(r, i, s);
                  });
              }
            }
            function dy(e, t, n) {
              return new g.TextTrackCue(e, t, n);
            }
            function yL(e, t, n) {
              return new g.TextTrackCue(e + "-" + t + "-" + n, e, t, n);
            }
            ((Wn.VTTCue = aE), (aE.install = uE), dr(uE));
            function Jt(e) {
              (ut.call(this),
                (this.g = e),
                (this.m = null),
                (this.h = []),
                (this.j = -1),
                (this.i = this.l = null),
                (this.o = new tt()));
            }
            (q(Jt, ut),
              (h = Jt.prototype),
              (h.destroy = function () {
                var e = this;
                return F(function (t) {
                  if (t.g == 1) return E(t, e.removeAllItems(), 2);
                  ((e.g = null), e.o && (e.o.release(), (e.o = null)), ut.prototype.release.call(e), re(t));
                });
              }),
              (h.configure = function (e) {
                this.m = e;
              }),
              (h.getConfiguration = function () {
                return this.m;
              }),
              (h.getCurrentItem = function () {
                return this.h.length && this.j >= 0 && this.j < this.h.length ? this.h[this.j] : null;
              }),
              (h.getCurrentItemIndex = function () {
                return this.j;
              }),
              (h.getItems = function () {
                return this.h.slice();
              }),
              (h.insertItems = function (e) {
                (this.h.push.apply(this.h, Y(e)), this.dispatchEvent(new Ae("itemsinserted")));
              }),
              (h.removeAllItems = function () {
                var e = this,
                  t,
                  n,
                  r,
                  i;
                return F(function (s) {
                  if (s.g == 1) return (e.o.Qa(), e.h.length && e.j >= 0 ? E(s, e.g.Cc(), 2) : s.A(2));
                  if (s.g != 4) {
                    for (
                      t = [],
                        e.i && (e.i.preloadManager.l || t.push(e.i.preloadManager.destroy()), (e.i = null)),
                        e.l && (e.l.preloadManager.l || t.push(e.l.preloadManager.destroy()), (e.l = null)),
                        n = x(e.h),
                        r = n.next();
                      !r.done;
                      r = n.next()
                    )
                      ((i = r.value),
                        i.preloadManager && !i.preloadManager.l && t.push(i.preloadManager.destroy()));
                    return t.length ? E(s, Promise.all(t), 4) : s.A(4);
                  }
                  ((e.h = []), (e.j = -1), e.dispatchEvent(new Ae("itemsremoved")), re(s));
                });
              }),
              (h.playItem = function (e) {
                var t = this,
                  n,
                  r,
                  i,
                  s,
                  o,
                  u,
                  l,
                  p,
                  m,
                  y,
                  v,
                  w,
                  A,
                  I,
                  C,
                  k,
                  R;
                return F(function (L) {
                  switch (L.g) {
                    case 1:
                      if ((t.o.Qa(), !t.h.length || e >= t.h.length)) throw new H(2, 7, 7007);
                      if (
                        ((n = t.getCurrentItem()),
                        (r = t.h[e]),
                        t.j != e && ((t.j = e), t.dispatchEvent(new Ae("currentitemchanged"))),
                        (i = t.g.bf()),
                        (s = t.m ? t.m.preloadNextUrlWindow : 0),
                        s > 0 &&
                          ((o = !1),
                          t.o.D(i, "timeupdate", function () {
                            var U, G, b, B;
                            return F(function (O) {
                              switch (O.g) {
                                case 1:
                                  if (t.l || t.h.length <= 1 || o || t.g.W() || !i.duration)
                                    return O.return();
                                  if (((U = t.g.Ra().end - i.currentTime), isNaN(U))) {
                                    O.A(0);
                                    break;
                                  }
                                  if (!(U <= s)) {
                                    O.A(0);
                                    break;
                                  }
                                  if (
                                    ((G = t.m && t.m.repeatMode),
                                    (b = null),
                                    t.j + 1 < t.h.length ? (b = t.h[t.j + 1]) : G == 1 && (b = t.h[0]),
                                    !b || (b.preloadManager && !b.preloadManager.l))
                                  ) {
                                    O.A(0);
                                    break;
                                  }
                                  return (
                                    (o = !0),
                                    (B = null),
                                    te(O, 5),
                                    E(O, t.g.preload(b.manifestUri, b.startTime, b.mimeType, b.config), 7)
                                  );
                                case 7:
                                  ((B = O.h), pe(O, 6));
                                  break;
                                case 5:
                                  (oe(O), (B = null));
                                case 6:
                                  ((t.l = { item: b, preloadManager: B }), (o = !1), re(O));
                              }
                            });
                          })),
                        t.o.D(t.g, "complete", function () {
                          var U = t.m && t.m.repeatMode,
                            G = !1;
                          if (U == 2) G = !0;
                          else {
                            var b = t.j + 1;
                            b < t.h.length
                              ? t.playItem(b)
                              : U == 1 && (t.h.length == 1 ? (G = !0) : t.playItem(0));
                          }
                          G &&
                            (i.paused
                              ? ((i.currentTime = t.g.Ra().start), i.play())
                              : t.o.D(i, "paused", function () {
                                  ((i.currentTime = t.g.Ra().start), i.play());
                                }));
                        }),
                        (u = r.manifestUri),
                        r.preloadManager && !r.preloadManager.l && (u = r.preloadManager),
                        (l = !1),
                        t.l && t.l.item == r && t.l.preloadManager
                          ? (u = t.l.preloadManager)
                          : t.i &&
                            t.i.item == r &&
                            t.i.preloadManager &&
                            ((u = t.i.preloadManager), (l = !0)),
                        !t.i)
                      ) {
                        L.A(2);
                        break;
                      }
                      if (l || t.i.preloadManager.l) {
                        L.A(3);
                        break;
                      }
                      return E(L, t.i.preloadManager.destroy(), 3);
                    case 3:
                      t.i = null;
                    case 2:
                      if (!(t.m && t.m.preloadPrevItem && n && t.g.$d() === ln)) {
                        L.A(5);
                        break;
                      }
                      return ((p = null), te(L, 6), E(L, t.g.jj(), 8));
                    case 8:
                      ((p = L.h), pe(L, 7));
                      break;
                    case 6:
                      (oe(L), (p = null));
                    case 7:
                      t.i = { item: n, preloadManager: p };
                    case 5:
                      return (
                        r.config && (t.g.Oi(), t.g.configure(r.config)),
                        E(L, t.g.load(u, r.startTime, r.mimeType), 9)
                      );
                    case 9:
                      if (((t.l = null), r.extraText))
                        for (m = x(r.extraText), y = m.next(); !y.done; y = m.next())
                          ((v = y.value),
                            v.mime
                              ? t.g.Rd(v.uri, v.language, v.kind, v.mime, v.codecs)
                              : t.g.Rd(v.uri, v.language, v.kind));
                      if (r.extraThumbnail)
                        for (w = x(r.extraThumbnail), A = w.next(); !A.done; A = w.next())
                          ((I = A.value), t.g.Pe(I));
                      if (r.extraChapter)
                        for (C = x(r.extraChapter), k = C.next(); !k.done; k = C.next())
                          ((R = k.value), t.g.Oe(R.uri, R.language, R.mime));
                      re(L);
                  }
                });
              }),
              de("shaka.queue.QueueManager", Jt),
              (Jt.prototype.playItem = Jt.prototype.playItem),
              (Jt.prototype.removeAllItems = Jt.prototype.removeAllItems),
              (Jt.prototype.insertItems = Jt.prototype.insertItems),
              (Jt.prototype.getItems = Jt.prototype.getItems),
              (Jt.prototype.getCurrentItemIndex = Jt.prototype.getCurrentItemIndex),
              (Jt.prototype.getCurrentItem = Jt.prototype.getCurrentItem),
              (Jt.prototype.getConfiguration = Jt.prototype.getConfiguration),
              (Jt.prototype.configure = Jt.prototype.configure),
              (Jt.prototype.destroy = Jt.prototype.destroy),
              (Id = function (e) {
                return new Jt(e);
              }));
            function fr() {}
            ((fr.prototype.parseInit = function () {}),
              (fr.prototype.setSequenceMode = function () {}),
              (fr.prototype.setManifestType = function () {}),
              (fr.prototype.parseMedia = function (e, t) {
                var n = null,
                  r = [];
                ((e = At(e).split(/\r?\n/)), (e = x(e)));
                for (var i = e.next(); !i.done; i = e.next())
                  if ((i = i.value) && !/^\s+$/.test(i) && (i = vL.exec(i))) {
                    var s = xL.exec(i[1]);
                    ((s = parseInt(s[1], 10) * 60 + parseFloat(s[2].replace(",", "."))),
                      (i = new mt(s, t.segmentEnd ? t.segmentEnd : s + 2, i[2])),
                      n && ((n.endTime = s), r.push(n)),
                      (n = i));
                  }
                return (n && r.push(n), r);
              }),
              de("shaka.text.LrcTextParser", fr),
              (fr.prototype.parseMedia = fr.prototype.parseMedia),
              (fr.prototype.setManifestType = fr.prototype.setManifestType),
              (fr.prototype.setSequenceMode = fr.prototype.setSequenceMode),
              (fr.prototype.parseInit = fr.prototype.parseInit));
            var vL = /^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,
              xL = /^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;
            an("application/x-subtitle-lrc", function () {
              return new fr();
            });
            function ir() {
              this.g = "UNKNOWN";
            }
            ((ir.prototype.parseInit = function () {}),
              (ir.prototype.setSequenceMode = function () {}),
              (ir.prototype.setManifestType = function (e) {
                this.g = e;
              }),
              (ir.prototype.parseMedia = function (e, t, n, r) {
                var i = At(e);
                if (((e = []), i == "")) return e;
                var s = Ls(i, "tt", !0);
                if (!s) throw new H(2, 2, 2005, "Failed to parse TTML.");
                if (((i = Jr(s, "body")[0]), !i)) return [];
                var o = ri(s, ul, "frameRate"),
                  u = ri(s, ul, "subFrameRate"),
                  l = ri(s, ul, "frameRateMultiplier"),
                  p = ri(s, ul, "tickRate"),
                  m = ri(s, ul, "cellResolution"),
                  y = s.attributes["xml:space"] || "default",
                  v = ri(s, If, "extent");
                if (y != "default" && y != "preserve")
                  throw new H(2, 2, 2005, "Invalid xml:space value: " + y);
                ((y = y == "default"),
                  (o = new EL(o, u, l, p)),
                  (m = AL(m)),
                  (u = Jr(s, "metadata")[0]),
                  (u = (u ? u.children : []).filter(function (I) {
                    return I != "\n";
                  })),
                  (l = Jr(s, "style")),
                  (s = Jr(s, "region")),
                  (p = []));
                for (var w = x(s), A = w.next(); !A.done; A = w.next())
                  (A = TL(this, A.value, l, v)) && p.push(A);
                if (st(i, "p").length) throw new H(2, 2, 2001, "<p> can only be inside <div> in TTML");
                for (v = x(st(i, "div")), w = v.next(); !w.done; w = v.next())
                  if (st(w.value, "span").length)
                    throw new H(2, 2, 2001, "<span> can only be inside <p> in TTML");
                return (
                  (t = lE(this, i, t, o, u, l, s, p, y, m, null, !1, n, r)) &&
                    (t.backgroundColor || (t.backgroundColor = "transparent"), e.push(t)),
                  e
                );
              }));
            function lE(e, t, n, r, i, s, o, u, l, p, m, y, v, w) {
              var A = m;
              if (sc(t)) {
                if (!y) return null;
                var I = { tagName: "span", children: [Lt(t)], attributes: {}, parent: null };
              } else I = t;
              for (
                var C = null, k = x(xE), R = k.next();
                !R.done && !(C = Ef(I, "backgroundImage", i, "#", R.value)[0]);
                R = k.next()
              );
              ((k = null), (R = ri(I, xE, "backgroundImage")));
              var L = /^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;
              if (R && L.test(R)) {
                if (((k = parseInt(R.split(":").pop(), 10) - 1), k >= w.length)) return null;
                k = w[k];
              } else
                v &&
                  R &&
                  !R.startsWith("#") &&
                  ((L = new Dt(v)), (R = new Dt(R)), (R = L.resolve(R).toString()) && (k = R));
              if (
                ((t.tagName == "p" || C || k) && (y = !0),
                (t = y),
                (R = (I.attributes["xml:space"] || (l ? "default" : "preserve")) == "default"),
                (L = I.children.every(sc)),
                (l = []),
                !L)
              )
                for (var U = x(I.children), G = U.next(); !G.done; G = U.next())
                  (G = lE(e, G.value, n, r, i, s, o, u, R, p, I, y, v, w)) && l.push(G);
              if (
                ((i = m != null),
                (v = Lt(I)),
                (v = I.children.length && v && /\S/.test(v)),
                (U = I.attributes.begin || I.attributes.end || I.attributes.dur),
                !(U || v || I.tagName == "br" || l.length != 0 || (i && !R)))
              )
                return null;
              for (w = fE(I, r), v = w.start, w = w.end; A && A.tagName && A.tagName != "tt"; )
                ((w = SL(A, r, v, w)), (v = w.start), (w = w.end), (A = A.parent));
              if (
                (v == null && (v = 0),
                (v += n.periodStart),
                (w = w == null ? 1 / 0 : w + n.periodStart),
                e.g !== "HLS" && ((v = Math.max(v, n.segmentStart)), (w = Math.min(w, n.segmentEnd))),
                !U && l.length > 0)
              )
                for (v = 1 / 0, w = 0, n = x(l), r = n.next(); !r.done; r = n.next())
                  ((r = r.value), (v = Math.min(v, r.startTime)), (w = Math.max(w, r.endTime)));
              if (I.tagName == "br") return ((e = new mt(v, w, "")), (e.lineBreak = !0), e);
              if (
                ((n = ""),
                L && ((n = Pn(Lt(I) || "")), R && (n = n.replace(/\s+/g, " "))),
                (n = new mt(v, w, n)),
                (n.nestedCues = l),
                y || (n.isContainer = !0),
                p && (n.cellResolution = p),
                (p = Ef(I, "region", o, "")[0]),
                I.attributes.region && p && p.attributes["xml:id"])
              ) {
                var b = p.attributes["xml:id"];
                n.region = u.filter(function (B) {
                  return B.id == b;
                })[0];
              }
              return (
                (u = p),
                m && i && !I.attributes.region && !I.attributes.style && (u = Ef(m, "region", o, "")[0]),
                wL(e, n, I, u, C, k, s, t, l.length == 0),
                n
              );
            }
            function TL(e, t, n, r) {
              var i = new Ps(),
                s = t.attributes["xml:id"];
              if (!s) return null;
              ((i.id = s),
                (s = null),
                r && (s = my.exec(r) || yy.exec(r)),
                (r = s ? Number(s[1]) : null),
                (s = s ? Number(s[2]) : null));
              var o,
                u = Af(e, t, n, "extent");
              if (u) {
                var l = (o = my.exec(u)) || yy.exec(u);
                l != null &&
                  ((i.width = Number(l[1])),
                  (i.height = Number(l[2])),
                  o ||
                    (r != null && (i.width = (i.width * 100) / r),
                    s != null && (i.height = (i.height * 100) / s)),
                  (i.widthUnits = o || r != null ? Jn : 0),
                  (i.heightUnits = o || s != null ? Jn : 0));
              }
              return (
                (e = Af(e, t, n, "origin")) &&
                  ((l = (o = my.exec(e)) || yy.exec(e)),
                  l != null &&
                    ((i.viewportAnchorX = Number(l[1])),
                    (i.viewportAnchorY = Number(l[2])),
                    o
                      ? u ||
                        ((i.width = 100 - i.viewportAnchorX),
                        (i.widthUnits = Jn),
                        (i.height = 100 - i.viewportAnchorY),
                        (i.heightUnits = Jn))
                      : (s != null && (i.viewportAnchorY = (i.viewportAnchorY * 100) / s),
                        r != null && (i.viewportAnchorX = (i.viewportAnchorX * 100) / r)),
                    (i.viewportAnchorUnits = o || r != null ? Jn : 0))),
                i
              );
            }
            function fy(e) {
              var t = e.match(/rgba\(([^)]+)\)/);
              return t && ((t = t[1].split(",")), t.length == 4)
                ? ((t[3] = String(Number(t[3]) / 255)), "rgba(" + t.join(",") + ")")
                : e;
            }
            function wL(e, t, n, r, i, s, o, u, l) {
              if (
                ((u = u || l),
                xn(e, n, r, o, "direction", u) == "rtl" && (t.direction = "rtl"),
                (l = xn(e, n, r, o, "writingMode", u)),
                l == "tb" || l == "tblr"
                  ? (t.writingMode = "vertical-lr")
                  : l == "tbrl"
                    ? (t.writingMode = "vertical-rl")
                    : l == "rltb" || l == "rl"
                      ? (t.direction = "rtl")
                      : l && (t.direction = Ya),
                (l = xn(e, n, r, o, "textAlign", !0))
                  ? ((t.positionAlign = ML.get(l)),
                    (t.lineAlign = CL.get(l)),
                    (t.textAlign = Jh[l.toUpperCase()]))
                  : (t.textAlign = oi),
                (l = xn(e, n, r, o, "displayAlign", !0)) && (t.displayAlign = h0[l.toUpperCase()]),
                (l = xn(e, n, r, o, "color", u)) && (t.color = fy(l)),
                (l = xn(e, n, r, o, "backgroundColor", u)) && (t.backgroundColor = fy(l)),
                (l = xn(e, n, r, o, "border", u)) && (t.border = l),
                (l = xn(e, n, r, o, "fontFamily", u)))
              )
                switch (l) {
                  case "monospaceSerif":
                    t.fontFamily = "Courier New,Liberation Mono,Courier,monospace";
                    break;
                  case "proportionalSansSerif":
                    t.fontFamily = "Arial,Helvetica,Liberation Sans,sans-serif";
                    break;
                  case "sansSerif":
                    t.fontFamily = "sans-serif";
                    break;
                  case "monospaceSansSerif":
                    t.fontFamily = "Consolas,monospace";
                    break;
                  case "proportionalSerif":
                    t.fontFamily = "serif";
                    break;
                  default:
                    t.fontFamily = l
                      .split(",")
                      .filter(function (p) {
                        return p != "default";
                      })
                      .join(",");
                }
              switch (
                ((l = xn(e, n, r, o, "fontWeight", u)) && l == "bold" && (t.fontWeight = vo),
                (l = xn(e, n, r, o, "wrapOption", u)),
                (t.wrapLine = !(l && l == "noWrap")),
                (l = xn(e, n, r, o, "lineHeight", u)) && l.match(aa) && (t.lineHeight = l),
                (l = xn(e, n, r, o, "fontSize", u)) && (l.match(aa) || l.match(IL)) && (t.fontSize = l),
                (l = xn(e, n, r, o, "fontStyle", u)) && (t.fontStyle = y0[l.toUpperCase()]),
                i
                  ? ((s = i.attributes.imageType || i.attributes.imagetype),
                    (l = i.attributes.encoding),
                    (i = Lt(i).trim()),
                    s == "PNG" && l == "Base64" && i && (t.backgroundImage = "data:image/png;base64," + i))
                  : s && (t.backgroundImage = s),
                (i = xn(e, n, r, o, "textOutline", u)) &&
                  ((i = i.split(" ")),
                  i[0].match(aa)
                    ? (t.textStrokeColor = t.color)
                    : ((t.textStrokeColor = fy(i[0])), i.shift()),
                  i[0] && i[0].match(aa) ? (t.textStrokeWidth = i[0]) : (t.textStrokeColor = "")),
                (i = xn(e, n, r, o, "letterSpacing", u)) && i.match(aa) && (t.letterSpacing = i),
                (i = xn(e, n, r, o, "linePadding", u)) && i.match(aa) && (t.linePadding = i),
                (i = xn(e, n, r, o, "opacity", u)) && (t.opacity = parseFloat(i)),
                (i = Af(e, r, o, "textDecoration")) && cE(t, i),
                (i = hy(e, n, o, "textDecoration")) && cE(t, i),
                (i = xn(e, n, r, o, "textCombine", u)) && (t.textCombineUpright = i),
                xn(e, n, r, o, "ruby", u))
              ) {
                case "container":
                  t.rubyTag = "ruby";
                  break;
                case "text":
                  t.rubyTag = "rt";
              }
            }
            function cE(e, t) {
              t = x(t.split(" "));
              for (var n = t.next(); !n.done; n = t.next())
                switch (n.value) {
                  case "underline":
                    e.textDecoration.includes(Ti) || e.textDecoration.push(Ti);
                    break;
                  case "noUnderline":
                    e.textDecoration.includes(Ti) && Or(e.textDecoration, Ti);
                    break;
                  case "lineThrough":
                    e.textDecoration.includes("lineThrough") || e.textDecoration.push("lineThrough");
                    break;
                  case "noLineThrough":
                    e.textDecoration.includes("lineThrough") && Or(e.textDecoration, "lineThrough");
                    break;
                  case "overline":
                    e.textDecoration.includes("overline") || e.textDecoration.push("overline");
                    break;
                  case "noOverline":
                    e.textDecoration.includes("overline") && Or(e.textDecoration, "overline");
                }
            }
            function xn(e, t, n, r, i, s) {
              return ((s = s === void 0 ? !0 : s), (t = hy(e, t, r, i)) ? t : s ? Af(e, n, r, i) : null);
            }
            function Af(e, t, n, r) {
              if (!t) return null;
              var i = ri(t, If, r);
              return i || dE(e, t, n, r);
            }
            function hy(e, t, n, r) {
              var i = ri(t, If, r);
              return i || dE(e, t, n, r);
            }
            function dE(e, t, n, r) {
              t = Ef(t, "style", n, "");
              for (var i = null, s = 0; s < t.length; s++) {
                var o = vi(t[s], "urn:ebu:tt:style", r);
                (o || (o = ri(t[s], If, r)), o || (o = hy(e, t[s], n, r)), o && (i = o));
              }
              return i;
            }
            function Ef(e, t, n, r, i) {
              var s = [];
              if (!e || n.length < 1) return s;
              var o = e;
              for (e = null; !e && !(e = i ? vi(o, i, t) : o.attributes[t]) && ((o = o.parent), o); );
              if ((t = e)) {
                for (t = x(t.split(" ")), i = t.next(); !i.done; i = t.next())
                  for (i = i.value, e = x(n), o = e.next(); !o.done; o = e.next())
                    if (((o = o.value), r + o.attributes["xml:id"] == i)) {
                      s.push(o);
                      break;
                    }
              }
              return s;
            }
            function SL(e, t, n, r) {
              return (
                (e = fE(e, t)),
                n == null ? (n = e.start) : e.start != null && (n += e.start),
                r == null ? (r = e.end) : e.start != null && (r += e.start),
                { start: n, end: r }
              );
            }
            function fE(e, t) {
              var n = py(e.attributes.begin, t),
                r = py(e.attributes.end, t);
              return (
                (e = py(e.attributes.dur, t)),
                r == null && e != null && (r = n + e),
                { start: n, end: r }
              );
            }
            function py(e, t) {
              var n = null;
              if (hE.test(e)) {
                ((e = hE.exec(e)), (n = Number(e[1])));
                var r = Number(e[2]),
                  i = Number(e[3]),
                  s = Number(e[4]);
                ((s += (Number(e[5]) || 0) / t.h), (i += s / t.frameRate), (n = i + r * 60 + n * 3600));
              } else if (pE.test(e)) n = gy(pE, e);
              else if (gE.test(e)) n = gy(gE, e);
              else if (mE.test(e)) ((e = mE.exec(e)), (n = Number(e[1]) / t.frameRate));
              else if (yE.test(e)) ((e = yE.exec(e)), (n = Number(e[1]) / t.g));
              else if (vE.test(e)) n = gy(vE, e);
              else if (e) throw new H(2, 2, 2001, "Could not parse cue time range in TTML");
              return n;
            }
            function gy(e, t) {
              return (
                (e = e.exec(t)),
                e == null || e[0] == ""
                  ? null
                  : (Number(e[4]) || 0) / 1e3 +
                    (Number(e[3]) || 0) +
                    (Number(e[2]) || 0) * 60 +
                    (Number(e[1]) || 0) * 3600
              );
            }
            function AL(e) {
              return e && (e = /^(\d+) (\d+)$/.exec(e))
                ? { columns: parseInt(e[1], 10), rows: parseInt(e[2], 10) }
                : null;
            }
            (de("shaka.text.TtmlTextParser", ir),
              (ir.prototype.parseMedia = ir.prototype.parseMedia),
              (ir.prototype.setManifestType = ir.prototype.setManifestType),
              (ir.prototype.setSequenceMode = ir.prototype.setSequenceMode),
              (ir.prototype.parseInit = ir.prototype.parseInit));
            function EL(e, t, n, r) {
              ((this.frameRate = Number(e) || 30),
                (this.h = Number(t) || 1),
                (this.g = Number(r)),
                this.g == 0 && (this.g = e ? this.frameRate * this.h : 1),
                n && (e = /^(\d+) (\d+)$/g.exec(n)) && (this.frameRate *= Number(e[1]) / Number(e[2])));
            }
            var my = /^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,
              IL = /^(\d{1,4}(?:\.\d+)?|100)%$/,
              aa = /^(\d+px|\d+em|\d*\.?\d+c)$/,
              yy = /^(\d+)px (\d+)px$/,
              hE = /^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,
              pE = /^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,
              gE = /^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,
              mE = /^(\d*(?:\.\d*)?)f$/,
              yE = /^(\d*(?:\.\d*)?)t$/,
              vE = RegExp(
                "^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$",
              ),
              CL = new Map()
                .set("left", Ns)
                .set("center", "center")
                .set("right", "end")
                .set("start", Ns)
                .set("end", "end"),
              ML = new Map().set("left", "line-left").set("center", "center").set("right", "line-right"),
              ul = ["http://www.w3.org/ns/ttml#parameter", "http://www.w3.org/2006/10/ttaf1#parameter"],
              If = ["http://www.w3.org/ns/ttml#styling", "http://www.w3.org/2006/10/ttaf1#styling"],
              xE = [
                "http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",
                "http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt",
              ];
            an("application/ttml+xml", function () {
              return new ir();
            });
            function Kt() {
              this.g = new ir();
            }
            ((Kt.prototype.parseInit = function (e) {
              var t = !1;
              if (
                (new ct()
                  .box("moov", Fe)
                  .box("trak", Fe)
                  .box("mdia", Fe)
                  .box("minf", Fe)
                  .box("stbl", Fe)
                  .S("stsd", Ci)
                  .box("stpp", function (n) {
                    ((t = !0), n.parser.stop());
                  })
                  .parse(e),
                !t)
              )
                throw new H(2, 2, 2007);
            }),
              (Kt.prototype.setSequenceMode = function (e) {
                this.g.setSequenceMode(e);
              }),
              (Kt.prototype.setManifestType = function (e) {
                this.g.setManifestType(e);
              }),
              (Kt.prototype.parseMedia = function (e, t, n) {
                var r = [],
                  i = null,
                  s = [],
                  o = new Map(),
                  u = [];
                if (
                  (new ct()
                    .box("moof", Fe)
                    .box("traf", Fe)
                    .S("tfhd", function (k) {
                      i = Pc(k.reader, k.flags).Xd;
                    })
                    .S("trun", function (k) {
                      ((k = bc(k.reader, k.version, k.flags)), (k = x(k.mh)));
                      for (var R = k.next(); !R.done; R = k.next()) u.push(R.value.sampleSize || i || 0);
                    })
                    .S("subs", function (k) {
                      for (var R = k.reader, L = R.U(), U = -1, G = 0; G < L; G++) {
                        var b = R.U();
                        ((U += b), (b = R.Ca()));
                        for (var B = [], O = 0; O < b; O++)
                          (k.version == 1 ? B.push(R.U()) : B.push(R.Ca()), R.Y(), R.Y(), R.U());
                        o.set(U, B);
                      }
                    })
                    .box(
                      "mdat",
                      Mo(function (k) {
                        s.push(k);
                      }, !1),
                    )
                    .parse(e, !1),
                  s.length == 0)
                )
                  throw new H(2, 2, 2007);
                for (var l = Nt.apply(fn, Y(s)), p = 0, m = 0; m < u.length; m++) {
                  var y = Le(l, p, u[m]);
                  p += u[m];
                  var v = o.get(m);
                  if (v && v.length) {
                    y = Le(y, 0, v[0]);
                    for (var w = [], A = v[0], I = 1; I < v.length; I++) {
                      var C = Le(e, A, v[I]);
                      ((C = tc(C)), w.push("data:image/png;base64," + C), (A += v[I]));
                    }
                    r = r.concat(this.g.parseMedia(y, t, n, w));
                  } else r = r.concat(this.g.parseMedia(y, t, n, []));
                }
                return r;
              }),
              de("shaka.text.Mp4TtmlParser", Kt),
              (Kt.prototype.parseMedia = Kt.prototype.parseMedia),
              (Kt.prototype.setManifestType = Kt.prototype.setManifestType),
              (Kt.prototype.setSequenceMode = Kt.prototype.setSequenceMode),
              (Kt.prototype.parseInit = Kt.prototype.parseInit),
              an('application/mp4; codecs="stpp"', function () {
                return new Kt();
              }),
              an('application/mp4; codecs="stpp.ttml"', function () {
                return new Kt();
              }),
              an('application/mp4; codecs="stpp.ttml.im1i"', function () {
                return new Kt();
              }),
              an('application/mp4; codecs="stpp.ttml.im1t"', function () {
                return new Kt();
              }),
              an('application/mp4; codecs="stpp.ttml.im2i"', function () {
                return new Kt();
              }),
              an('application/mp4; codecs="stpp.ttml.im2t"', function () {
                return new Kt();
              }),
              an('application/mp4; codecs="stpp.ttml.etd1"', function () {
                return new Kt();
              }),
              an('application/mp4; codecs="stpp.ttml.etd1|im1t"', function () {
                return new Kt();
              }),
              an('application/mp4; codecs="stpp.ttml.im1t|etd1"', function () {
                return new Kt();
              }),
              an('application/mp4; codecs="stpp.TTML.im1t"', function () {
                return new Kt();
              }));
            function Nn() {
              this.g = "UNKNOWN";
            }
            ((Nn.prototype.parseInit = function () {}),
              (Nn.prototype.setSequenceMode = function () {}),
              (Nn.prototype.setManifestType = function (e) {
                this.g = e;
              }),
              (Nn.prototype.parseMedia = function (e, t) {
                ((e = At(e)), (e = e.replace(/\r\n|\r(?=[^\n]|$)/gm, "\n")));
                var n = e.split(/\n{2,}/m);
                if (!/^WEBVTT($|[ \t\n])/m.test(n[0])) throw new H(2, 2, 2e3);
                if (((e = t.vttOffset), this.g == "HLS" && n[0].includes("X-TIMESTAMP-MAP"))) {
                  var r = n[0];
                  if (
                    ((e = r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m)),
                    (r = r.match(/MPEGTS:(\d+)/m)),
                    !e || !r)
                  )
                    throw new H(2, 2, 2e3);
                  if (((e = yo(e[1])), e == null)) throw new H(2, 2, 2e3);
                  r = Number(r[1]);
                  for (var i = t.segmentStart - t.periodStart; i >= 95443.7176888889; )
                    ((i -= 95443.7176888889), (r += 8589934592));
                  e = t.periodStart + r / 9e4 - e;
                }
                for (t = [], r = x(n[0].split("\n")), i = r.next(); !i.done; i = r.next())
                  if (((i = i.value), /^Region:/.test(i))) {
                    i = new go(i);
                    var s = new Ps();
                    (Ds(i), mo(i));
                    for (var o = Ds(i); o; ) {
                      var u = s,
                        l = o;
                      ((o = /^id=(.*)$/.exec(l))
                        ? (u.id = o[1])
                        : (o = /^width=(\d{1,2}|100)%$/.exec(l))
                          ? (u.width = Number(o[1]))
                          : (o = /^lines=(\d+)$/.exec(l))
                            ? ((u.height = Number(o[1])), (u.heightUnits = 2))
                            : (o = /^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))
                              ? ((u.regionAnchorX = Number(o[1])), (u.regionAnchorY = Number(o[2])))
                              : (o = /^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))
                                ? ((u.viewportAnchorX = Number(o[1])), (u.viewportAnchorY = Number(o[2])))
                                : /^scroll=up$/.exec(l) && (u.scroll = "up"),
                        mo(i),
                        (o = Ds(i)));
                    }
                    t.push(s);
                  }
                for (r = new Map(), d0(r), i = [], n = x(n.slice(1)), s = n.next(); !s.done; s = n.next()) {
                  if (
                    ((s = s.value.split("\n")),
                    (s.length != 1 || s[0]) && !/^NOTE($|[ \t])/.test(s[0]) && s[0] == "STYLE")
                  ) {
                    for (u = [], o = -1, l = 1; l < s.length; l++)
                      (s[l].includes("::cue") && (u.push([]), (o = u.length - 1)),
                        o != -1 && (u[o].push(s[l]), s[l].includes("}") && (o = -1)));
                    for (u = x(u), o = u.next(); !o.done; o = u.next()) {
                      var p = o.value;
                      ((o = "global"),
                        (l = p[0].match(/\((.*)\)/)) && (o = l.pop()),
                        (l = p.slice(1, -1)),
                        p[0].includes("}") && (p = /\{(.*?)\}/.exec(p[0])) && (l = p[1].split(";")),
                        (p = r.get(o)) || (p = new mt(0, 0, "")));
                      for (var m = !1, y = 0; y < l.length; y++) {
                        var v = /^\s*([^:]+):\s*(.*)/.exec(l[y]);
                        if (v) {
                          var w = v[2].trim().replace(";", "");
                          switch (v[1].trim()) {
                            case "background-color":
                            case "background":
                              ((m = !0), (p.backgroundColor = w));
                              break;
                            case "color":
                              ((m = !0), (p.color = w));
                              break;
                            case "font-family":
                              ((m = !0), (p.fontFamily = w));
                              break;
                            case "font-size":
                              ((m = !0), (p.fontSize = w));
                              break;
                            case "font-weight":
                              (parseInt(w, 10) >= 700 || w == "bold") && ((m = !0), (p.fontWeight = vo));
                              break;
                            case "font-style":
                              switch (w) {
                                case "normal":
                                  ((m = !0), (p.fontStyle = Zh));
                                  break;
                                case "italic":
                                  ((m = !0), (p.fontStyle = xo));
                                  break;
                                case "oblique":
                                  ((m = !0), (p.fontStyle = "oblique"));
                              }
                              break;
                            case "opacity":
                              ((m = !0), (p.opacity = parseFloat(w)));
                              break;
                            case "text-combine-upright":
                              ((m = !0), (p.textCombineUpright = w));
                              break;
                            case "text-shadow":
                              ((m = !0), (p.textShadow = w));
                              break;
                            case "white-space":
                              ((m = !0), (p.wrapLine = w != "noWrap"));
                          }
                        }
                      }
                      m && r.set(o, p);
                    }
                  }
                  if (
                    ((p = s),
                    (m = e),
                    (p.length == 1 && !p[0]) ||
                      /^NOTE($|[ \t])/.test(p[0]) ||
                      p[0] == "STYLE" ||
                      p[0] == "REGION")
                  )
                    s = null;
                  else if (
                    ((s = null),
                    p[0].includes("-->") || ((s = p[0]), p.splice(0, 1)),
                    (u = new go(p[0])),
                    (o = Xa(u)),
                    (y = Yi(u, /[ \t]+--\x3e[ \t]+/g)),
                    (l = Xa(u)),
                    o == null || y == null || l == null)
                  )
                    (Be("Failed to parse VTT time code. Cue skipped:", s, p), (s = null));
                  else {
                    for (
                      o += m,
                        l += m,
                        o < 0 && (o = 0),
                        m = p.slice(1).join("\n").trim(),
                        r.has("global")
                          ? ((p = r.get("global").clone()),
                            (p.startTime = o),
                            (p.endTime = l),
                            (p.payload = m))
                          : (p = new mt(o, l, m)),
                        mo(u),
                        o = Ds(u);
                      o;
                    )
                      (TE(p, o, t), mo(u), (o = Ds(u)));
                    (dc(p, r), s != null && (p.id = s), (s = p));
                  }
                  s && i.push(s);
                }
                return i;
              }));
            function TE(e, t, n) {
              var r;
              (r = /^align:(start|middle|center|end|left|right)$/.exec(t))
                ? ((t = r[1]), t == "middle" ? (e.textAlign = oi) : (e.textAlign = Jh[t.toUpperCase()]))
                : (r = /^vertical:(lr|rl)$/.exec(t))
                  ? (e.writingMode = r[1] == "lr" ? "vertical-lr" : "vertical-rl")
                  : (r = /^size:([\d.]+)%$/.exec(t))
                    ? (e.size = Number(r[1]))
                    : (r =
                          /^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(
                            t,
                          ))
                      ? ((e.position = Number(r[1])),
                        r[2] &&
                          ((t = r[2]),
                          (e.positionAlign =
                            t == "line-left" || t == "start"
                              ? "line-left"
                              : t == "line-right" || t == "end"
                                ? "line-right"
                                : t == "center" || t == "middle"
                                  ? "center"
                                  : fc)))
                      : (r = /^region:(.*)$/.exec(t))
                        ? (t = RL(n, r[1])) && (e.region = t)
                        : (n = /^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))
                          ? ((e.lineInterpretation = 1),
                            (e.line = Number(n[1])),
                            n[2] && (e.lineAlign = Qh[n[2].toUpperCase()]))
                          : (n = /^line:(-?\d+)(?:,(start|end|center))?$/.exec(t)) &&
                            ((e.lineInterpretation = qa),
                            (e.line = Number(n[1])),
                            n[2] && (e.lineAlign = Qh[n[2].toUpperCase()]));
            }
            function RL(e, t) {
              return (
                (e = e.filter(function (n) {
                  return n.id == t;
                })),
                e.length ? e[0] : null
              );
            }
            (de("shaka.text.VttTextParser", Nn),
              (Nn.prototype.parseMedia = Nn.prototype.parseMedia),
              (Nn.prototype.setManifestType = Nn.prototype.setManifestType),
              (Nn.prototype.setSequenceMode = Nn.prototype.setSequenceMode),
              (Nn.prototype.parseInit = Nn.prototype.parseInit),
              an("text/vtt", function () {
                return new Nn();
              }),
              an('text/vtt; codecs="vtt"', function () {
                return new Nn();
              }),
              an('text/vtt; codecs="wvtt"', function () {
                return new Nn();
              }));
            function hr() {
              this.g = null;
            }
            ((hr.prototype.parseInit = function (e) {
              var t = this,
                n = !1;
              if (
                (new ct()
                  .box("moov", Fe)
                  .box("trak", Fe)
                  .box("mdia", Fe)
                  .S("mdhd", function (r) {
                    ((r = Lc(r.reader, r.version)), (t.g = r.timescale));
                  })
                  .box("minf", Fe)
                  .box("stbl", Fe)
                  .S("stsd", Ci)
                  .box("wvtt", function () {
                    n = !0;
                  })
                  .parse(e),
                !this.g)
              )
                throw new H(2, 2, 2008);
              if (!n) throw new H(2, 2, 2008);
            }),
              (hr.prototype.setSequenceMode = function () {}),
              (hr.prototype.setManifestType = function () {}),
              (hr.prototype.parseMedia = function (e, t) {
                if (!e.length) return [];
                if (!this.g) throw new H(2, 2, 2008);
                var n = 0,
                  r = [],
                  i,
                  s = [],
                  o = !1,
                  u = !1,
                  l = !1,
                  p = null;
                if (
                  (new ct()
                    .box("moof", Fe)
                    .box("traf", Fe)
                    .S("tfdt", function (L) {
                      ((o = !0), (n = Dc(L.reader, L.version).baseMediaDecodeTime));
                    })
                    .S("tfhd", function (L) {
                      p = Pc(L.reader, L.flags).Wd;
                    })
                    .S("trun", function (L) {
                      ((u = !0), (r = bc(L.reader, L.version, L.flags).mh));
                    })
                    .box(
                      "mdat",
                      Mo(function (L) {
                        ((l = !0), (i = L));
                      }, !1),
                    )
                    .parse(e, !1),
                  !l && !o && !u)
                )
                  throw new H(2, 2, 2008);
                e = n;
                for (var m = new yt(i, 0), y = x(r), v = y.next(); !v.done; v = y.next()) {
                  v = v.value;
                  var w = v.nh || p,
                    A = v.Gf ? n + v.Gf : e;
                  e = A + (w || 0);
                  var I = 0;
                  do {
                    var C = m.U();
                    I += C;
                    var k = m.U(),
                      R = null;
                    (Rc(k) == "vttc" ? C > 8 && (R = m.Tb(C - 8, !1)) : m.skip(C - 8),
                      w &&
                        R &&
                        ((C = kL(R, t.periodStart + A / this.g, t.periodStart + e / this.g)), s.push(C)));
                  } while (v.sampleSize && I < v.sampleSize);
                }
                return s.filter(es);
              }));
            function kL(e, t, n) {
              var r, i, s;
              return (
                new ct()
                  .box(
                    "payl",
                    Mo(function (o) {
                      r = At(o);
                    }, !1),
                  )
                  .box(
                    "iden",
                    Mo(function (o) {
                      i = At(o);
                    }, !1),
                  )
                  .box(
                    "sttg",
                    Mo(function (o) {
                      s = At(o);
                    }, !1),
                  )
                  .parse(e),
                r ? _L(r, i, s, t, n) : null
              );
            }
            function _L(e, t, n, r, i) {
              if (((e = new mt(r, i, e)), dc(e), t && (e.id = t), n))
                for (t = new go(n), n = Ds(t); n; ) (TE(e, n, []), mo(t), (n = Ds(t)));
              return e;
            }
            (de("shaka.text.Mp4VttParser", hr),
              (hr.prototype.parseMedia = hr.prototype.parseMedia),
              (hr.prototype.setManifestType = hr.prototype.setManifestType),
              (hr.prototype.setSequenceMode = hr.prototype.setSequenceMode),
              (hr.prototype.parseInit = hr.prototype.parseInit),
              an('application/mp4; codecs="wvtt"', function () {
                return new hr();
              }));
            function pr() {}
            ((pr.prototype.parseInit = function () {}),
              (pr.prototype.setSequenceMode = function () {}),
              (pr.prototype.setManifestType = function () {}),
              (pr.prototype.parseMedia = function (e) {
                var t = At(e).replace(/\r+/g, "");
                if (((t = t.trim()), (e = []), t == "")) return e;
                t = x(t.split("\n\n"));
                for (var n = t.next(); !n.done; n = t.next()) {
                  n = n.value.split("\n");
                  var r = new go(n[0]),
                    i = Xa(r),
                    s = Yi(r, /,/g);
                  if (((r = Xa(r)), i == null || s == null || r == null))
                    throw new H(2, 2, 2001, "Could not parse cue time range in SubViewer");
                  e.push(new mt(i, r, n.slice(1).join("\n").trim()));
                }
                return e;
              }),
              de("shaka.text.SbvTextParser", pr),
              (pr.prototype.parseMedia = pr.prototype.parseMedia),
              (pr.prototype.setManifestType = pr.prototype.setManifestType),
              (pr.prototype.setSequenceMode = pr.prototype.setSequenceMode),
              (pr.prototype.parseInit = pr.prototype.parseInit),
              an("text/x-subviewer", function () {
                return new pr();
              }));
            function gr() {
              this.g = new Nn();
            }
            ((gr.prototype.parseInit = function () {}),
              (gr.prototype.setSequenceMode = function () {}),
              (gr.prototype.setManifestType = function () {}),
              (gr.prototype.parseMedia = function (e, t, n) {
                var r = At(e);
                if (((e = "WEBVTT\n\n"), r != "")) {
                  ((r = r.replace(/\r+/g, "")), (r = r.trim()), (r = x(r.split("\n\n"))));
                  for (var i = r.next(); !i.done; i = r.next())
                    ((i = i.value.split(/\n/)),
                      i[0].match(/\d+/) && i.shift(),
                      (i[0] = i[0].replace(/,/g, ".")),
                      (e +=
                        i
                          .join("\n")
                          .replace(/{b}/g, "<b>")
                          .replace(/{\/b}/g, "</b>")
                          .replace(/{i}/g, "<i>")
                          .replace(/{\/i}/g, "</i>")
                          .replace(/{u}/g, "<u>")
                          .replace(/{\/u}/g, "</u>") + "\n\n"));
                }
                return ((e = Le(Ur(e))), this.g.parseMedia(e, t, n, []));
              }),
              de("shaka.text.SrtTextParser", gr),
              (gr.prototype.parseMedia = gr.prototype.parseMedia),
              (gr.prototype.setManifestType = gr.prototype.setManifestType),
              (gr.prototype.setSequenceMode = gr.prototype.setSequenceMode),
              (gr.prototype.parseInit = gr.prototype.parseInit),
              an("text/srt", function () {
                return new gr();
              }));
            function mr() {}
            ((mr.prototype.parseInit = function () {}),
              (mr.prototype.setSequenceMode = function () {}),
              (mr.prototype.setManifestType = function () {}),
              (mr.prototype.parseMedia = function (e) {
                var t = "",
                  n = "",
                  r = null,
                  i = null;
                for (i = At(e).split(/\r?\n\s*\r?\n/), e = x(i), i = e.next(); !i.done; i = e.next()) {
                  var s = i.value;
                  ((i = s),
                    (s = DL.exec(s)) && ((r = s[1]), (i = s[2])),
                    r == "V4 Styles" || r == "V4+ Styles"
                      ? ((t = i), (t = n ? t + ("\n" + i) : i))
                      : r == "Events" && (n = n ? n + ("\n" + i) : i));
                }
                for (r = [], i = null, t = x(t.split(/\r?\n/)), e = t.next(); !e.done; e = t.next())
                  if (((e = e.value), !/^\s*;/.test(e) && (s = AE.exec(e)))) {
                    if (((e = s[1].trim()), (s = s[2].trim()), e == "Format")) i = s.split(Cf);
                    else if (e == "Style") {
                      ((e = s.split(Cf)), (s = {}));
                      for (var o = 0; o < i.length && o < e.length; o++) s[i[o]] = e[o];
                      r.push(s);
                    }
                  }
                for (
                  i = [], t = null, n = x(n.split(/\r?\n/)), s = n.next(), e = {};
                  !s.done;
                  e = { aj: void 0 }, s = n.next()
                )
                  if (((s = s.value), !/^\s*;/.test(s) && (o = AE.exec(s)))) {
                    if (((s = o[1].trim()), (o = o[2].trim()), s == "Format")) t = o.split(Cf);
                    else if (s == "Dialogue") {
                      ((o = o.split(Cf)), (s = {}));
                      for (var u = 0; u < t.length && u < o.length; u++) s[t[u]] = o[u];
                      u = SE(s.Start);
                      var l = SE(s.End);
                      ((o = new mt(
                        u,
                        l,
                        o
                          .slice(t.length - 1)
                          .join(",")
                          .replace(/\\N/g, "\n")
                          .replace(/\{[^}]+\}/g, ""),
                      )),
                        (e.aj = s.Style),
                        (e = r.find(
                          (function (p) {
                            return function (m) {
                              return m.Name == p.aj;
                            };
                          })(e),
                        )) && PL(o, e),
                        i.push(o));
                    }
                  }
                return i;
              }));
            function PL(e, t) {
              var n = t.Fontname;
              if (
                (n && (e.fontFamily = n),
                (n = t.Fontsize) && (e.fontSize = n + "px"),
                (n = t.PrimaryColour) && (n = wE(n)) && (e.color = n),
                (n = t.BackColour) && (n = wE(n)) && (e.backgroundColor = n),
                t.Bold && (e.fontWeight = vo),
                t.Italic && (e.fontStyle = xo),
                t.Underline && e.textDecoration.push(Ti),
                (n = t.Spacing) && (e.letterSpacing = n + "px"),
                (n = t.Alignment))
              )
                switch (parseInt(n, 10)) {
                  case 1:
                    ((e.displayAlign = $a), (e.textAlign = "start"));
                    break;
                  case 2:
                    ((e.displayAlign = $a), (e.textAlign = oi));
                    break;
                  case 3:
                    ((e.displayAlign = $a), (e.textAlign = "end"));
                    break;
                  case 5:
                    ((e.displayAlign = "before"), (e.textAlign = "start"));
                    break;
                  case 6:
                    ((e.displayAlign = "before"), (e.textAlign = oi));
                    break;
                  case 7:
                    ((e.displayAlign = "before"), (e.textAlign = "end"));
                    break;
                  case 9:
                    ((e.displayAlign = "center"), (e.textAlign = "start"));
                    break;
                  case 10:
                    ((e.displayAlign = "center"), (e.textAlign = oi));
                    break;
                  case 11:
                    ((e.displayAlign = "center"), (e.textAlign = "end"));
                }
              (t = t.AlphaLevel) && (e.opacity = parseFloat(t));
            }
            function wE(e) {
              return (
                (e = parseInt(e.replace("&H", ""), 16)),
                e >= 0
                  ? "rgba(" +
                    (e & 255) +
                    "," +
                    ((e >> 8) & 255) +
                    "," +
                    ((e >> 16) & 255) +
                    "," +
                    (((e >> 24) & 255) ^ 255) / 255 +
                    ")"
                  : null
              );
            }
            function SE(e) {
              return (
                (e = LL.exec(e)),
                (e[1] ? parseInt(e[1].replace(":", ""), 10) : 0) * 3600 +
                  parseInt(e[2], 10) * 60 +
                  parseFloat(e[3])
              );
            }
            (de("shaka.text.SsaTextParser", mr),
              (mr.prototype.parseMedia = mr.prototype.parseMedia),
              (mr.prototype.setManifestType = mr.prototype.setManifestType),
              (mr.prototype.setSequenceMode = mr.prototype.setSequenceMode),
              (mr.prototype.parseInit = mr.prototype.parseInit));
            var DL = /^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,
              AE = /^\s*([^:]+):\s*(.*)/,
              Cf = /\s*,\s*/,
              LL = /^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;
            an("text/x-ssa", function () {
              return new mr();
            });
            function EE(e, t) {
              var n = e[t + 1] & 1 ? 7 : 9;
              return t + n <= e.length &&
                ((e = (((e[t + 3] & 3) << 11) | (e[t + 4] << 3) | ((e[t + 5] & 224) >>> 5)) - n), e > 0)
                ? { ee: n, ra: e }
                : null;
            }
            function IE(e, t) {
              var n = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350],
                r = (e[t + 2] & 60) >>> 2;
              if (r > n.length - 1) return null;
              var i = ((e[t + 2] & 192) >>> 6) + 1,
                s = (e[t + 2] & 1) << 2;
              return (
                (s |= (e[t + 3] & 192) >>> 6),
                { sampleRate: n[r], channelCount: s, codec: "mp4a.40." + i }
              );
            }
            function CE(e, t) {
              if (t + 1 < e.length && e[t] === 255 && (e[t + 1] & 246) === 240) {
                var n = e[t + 1] & 1 ? 7 : 9;
                if (t + n >= e.length) return !1;
                var r = ((e[t + 3] & 3) << 11) | (e[t + 4] << 3) | ((e[t + 5] & 224) >>> 5);
                return r <= n
                  ? !1
                  : ((t += r),
                    t === e.length || (t + 1 < e.length && e[t] === 255 && (e[t + 1] & 246) === 240));
              }
              return !1;
            }
            function bL(e, t) {
              switch (e) {
                case "mp4a.40.2":
                  if (t === 1) return new Uint8Array([0, 200, 0, 128, 35, 128]);
                  if (t === 2) return new Uint8Array([33, 0, 73, 144, 2, 25, 0, 35, 128]);
                  if (t === 3) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 142]);
                  if (t === 4)
                    return new Uint8Array([
                      0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 128, 44, 128, 8, 2, 56,
                    ]);
                  if (t === 5)
                    return new Uint8Array([
                      0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 56,
                    ]);
                  if (t === 6)
                    return new Uint8Array([
                      0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 0, 178,
                      0, 32, 8, 224,
                    ]);
                  break;
                default:
                  if (t === 1)
                    return new Uint8Array([
                      1, 64, 34, 128, 163, 78, 230, 128, 186, 8, 0, 0, 0, 28, 6, 241, 193, 10, 90, 90, 90, 90,
                      90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                      90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94,
                    ]);
                  if (t === 2 || t === 3)
                    return new Uint8Array([
                      1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90,
                      90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,
                      90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94,
                    ]);
              }
              return null;
            }
            function yr(e) {
              ((this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null));
            }
            ((h = yr.prototype),
              (h.destroy = function () {
                this.g.clear();
              }),
              (h.isSupported = function (e) {
                return e.toLowerCase().split(";")[0] == "audio/aac" ? In(this.convertCodecs("audio", e)) : !1;
              }),
              (h.convertCodecs = function (e, t) {
                return t.toLowerCase().split(";")[0] == "audio/aac"
                  ? 'audio/mp4; codecs="' + (Vn(t) || "mp4a.40.2") + '"'
                  : t;
              }),
              (h.getOriginalMimeType = function () {
                return this.j;
              }),
              (h.transmux = function (e, t, n, r) {
                for (var i = Le(e), s = Po(i), o = s.length; o < i.length && !CE(i, o); o++);
                if (
                  ((e = n.endTime * 1e3),
                  (s = zs(s)),
                  s.length &&
                    n &&
                    (s = s.find(function (m) {
                      return m.description === "com.apple.streaming.transportStreamTimestamp";
                    })) &&
                    (e = s.data),
                  (s = IE(i, o)),
                  !s)
                )
                  return Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
                ((t.audioSamplingRate = s.sampleRate), (t.channelsCount = s.channelCount));
                for (var u = []; o < i.length; ) {
                  var l = EE(i, o);
                  if (!l) return Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
                  var p = l.ee + l.ra;
                  (o + p <= i.length &&
                    u.push({
                      data: i.subarray(o + l.ee, o + p),
                      size: l.ra,
                      duration: 1024,
                      sb: 0,
                      flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                    }),
                    (o += p));
                }
                return (
                  (i = s.sampleRate),
                  (e = Math.floor((e * i) / 1e3)),
                  (r = {
                    id: t.id,
                    type: "audio",
                    codecs: s.codec,
                    encrypted: t.encrypted && t.drmInfos.length > 0,
                    timescale: i,
                    duration: r,
                    Bb: [],
                    Ga: new Uint8Array([]),
                    Sa: new Uint8Array([]),
                    Za: 0,
                    $a: 0,
                    data: { sequenceNumber: this.h, baseMediaDecodeTime: e, zb: u },
                    stream: t,
                  }),
                  (r = new Ro([r])),
                  (n = t.id + "_" + n.i),
                  this.g.has(n) ? (t = this.g.get(n)) : ((t = ko(r)), this.g.set(n, t)),
                  (n = this.i !== t),
                  (r = cu(r)),
                  (this.i = t),
                  this.h++,
                  Promise.resolve({ data: r, init: n ? t : null })
                );
              }),
              de("shaka.transmuxer.AacTransmuxer", yr),
              (yr.prototype.transmux = yr.prototype.transmux),
              (yr.prototype.getOriginalMimeType = yr.prototype.getOriginalMimeType),
              (yr.prototype.convertCodecs = yr.prototype.convertCodecs),
              (yr.prototype.isSupported = yr.prototype.isSupported),
              (yr.prototype.destroy = yr.prototype.destroy),
              wi(
                "audio/aac",
                function () {
                  return new yr("audio/aac");
                },
                Qi,
              ));
            function ME(e, t) {
              if (t + 8 > e.length || e[t] !== 11 || e[t + 1] !== 119) return null;
              var n = e[t + 4] >> 6;
              if (n >= 3) return null;
              var r = e[t + 4] & 63,
                i =
                  [
                    64, 69, 96, 64, 70, 96, 80, 87, 120, 80, 88, 120, 96, 104, 144, 96, 105, 144, 112, 121,
                    168, 112, 122, 168, 128, 139, 192, 128, 140, 192, 160, 174, 240, 160, 175, 240, 192, 208,
                    288, 192, 209, 288, 224, 243, 336, 224, 244, 336, 256, 278, 384, 256, 279, 384, 320, 348,
                    480, 320, 349, 480, 384, 417, 576, 384, 418, 576, 448, 487, 672, 448, 488, 672, 512, 557,
                    768, 512, 558, 768, 640, 696, 960, 640, 697, 960, 768, 835, 1152, 768, 836, 1152, 896,
                    975, 1344, 896, 976, 1344, 1024, 1114, 1536, 1024, 1115, 1536, 1152, 1253, 1728, 1152,
                    1254, 1728, 1280, 1393, 1920, 1280, 1394, 1920,
                  ][r * 3 + n] * 2;
              if (t + i > e.length) return null;
              var s = e[t + 6] >> 5,
                o = 0;
              (s === 2 ? (o += 2) : (s & 1 && s !== 1 && (o += 2), s & 4 && (o += 2)),
                (o = (((e[t + 6] << 8) | e[t + 7]) >> (12 - o)) & 1));
              var u = e[t + 5] & 7;
              return (
                (e = new Uint8Array([
                  (n << 6) | ((e[t + 5] >> 3) << 1) | (u >> 2),
                  ((u & 3) << 6) | (s << 3) | (o << 2) | (r >> 4),
                  (r << 4) & 224,
                ])),
                {
                  sampleRate: [48e3, 44100, 32e3][n],
                  channelCount: [2, 1, 2, 3, 3, 4, 4, 5][s] + o,
                  Ga: e,
                  ra: i,
                }
              );
            }
            function NL(e, t) {
              if (e[t] === 11 && e[t + 1] === 119) {
                var n = 0,
                  r = 5;
                t += r;
                for (var i, s; r > 0; ) {
                  s = e[t];
                  var o = Math.min(r, 8),
                    u = 8 - o;
                  ((i = (4278190080 >>> (24 + u)) << u),
                    (i = (s & i) >> u),
                    (n = n ? (n << o) | i : i),
                    (t += 1),
                    (r -= o));
                }
                if (n < 16) return !0;
              }
              return !1;
            }
            function _r(e) {
              ((this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null));
            }
            ((h = _r.prototype),
              (h.destroy = function () {
                this.g.clear();
              }),
              (h.isSupported = function (e) {
                return e.toLowerCase().split(";")[0] == "audio/ac3" ? In(this.convertCodecs("audio", e)) : !1;
              }),
              (h.convertCodecs = function (e, t) {
                return t.toLowerCase().split(";")[0] == "audio/ac3"
                  ? je().se()
                    ? 'audio/mp4; codecs="ec-3"'
                    : 'audio/mp4; codecs="ac-3"'
                  : t;
              }),
              (h.getOriginalMimeType = function () {
                return this.j;
              }),
              (h.transmux = function (e, t, n, r) {
                e = Le(e);
                for (var i = Po(e), s = i.length; s < e.length && !NL(e, s); s++);
                var o = n.endTime * 1e3;
                ((i = zs(i)),
                  i.length &&
                    n &&
                    (i = i.find(function (m) {
                      return m.description === "com.apple.streaming.transportStreamTimestamp";
                    })) &&
                    (o = i.data),
                  (i = 0));
                for (var u = new Uint8Array([]), l = []; s < e.length; ) {
                  var p = ME(e, s);
                  if (!p) return Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
                  ((t.audioSamplingRate = p.sampleRate),
                    (t.channelsCount = p.channelCount),
                    (i = p.sampleRate),
                    (u = p.Ga),
                    l.push({
                      data: e.subarray(s, s + p.ra),
                      size: p.ra,
                      duration: 1536,
                      sb: 0,
                      flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                    }),
                    (s += p.ra));
                }
                return (
                  (e = Math.floor((o * i) / 1e3)),
                  (r = {
                    id: t.id,
                    type: "audio",
                    codecs: "ac-3",
                    encrypted: t.encrypted && t.drmInfos.length > 0,
                    timescale: i,
                    duration: r,
                    Bb: [],
                    Ga: u,
                    Sa: new Uint8Array([]),
                    Za: 0,
                    $a: 0,
                    data: { sequenceNumber: this.h, baseMediaDecodeTime: e, zb: l },
                    stream: t,
                  }),
                  (r = new Ro([r])),
                  (n = t.id + "_" + n.i),
                  this.g.has(n) ? (t = this.g.get(n)) : ((t = ko(r)), this.g.set(n, t)),
                  (n = this.i !== t),
                  (r = cu(r)),
                  (this.i = t),
                  this.h++,
                  Promise.resolve({ data: r, init: n ? t : null })
                );
              }),
              de("shaka.transmuxer.Ac3Transmuxer", _r),
              (_r.prototype.transmux = _r.prototype.transmux),
              (_r.prototype.getOriginalMimeType = _r.prototype.getOriginalMimeType),
              (_r.prototype.convertCodecs = _r.prototype.convertCodecs),
              (_r.prototype.isSupported = _r.prototype.isSupported),
              (_r.prototype.destroy = _r.prototype.destroy),
              wi(
                "audio/ac3",
                function () {
                  return new _r("audio/ac3");
                },
                Qi,
              ));
            function RE(e, t) {
              if (t + 8 > e.length || ((e[t] << 8) | (e[t + 1] << 0)) !== 2935) return null;
              var n = new ki(e.subarray(t + 2));
              (tr(n, 2), tr(n, 3));
              var r = (Xe(n, 11) + 1) << 1,
                i = Xe(n, 2);
              if (i == 3) {
                ((i = Xe(n, 2)), (i = [24e3, 22060, 16e3][i]));
                var s = 3;
              } else ((i = [48e3, 44100, 32e3][i]), (s = Xe(n, 2)));
              var o = Xe(n, 3),
                u = Xe(n, 1);
              return (
                (n = Xe(n, 5)),
                t + r > e.byteLength
                  ? null
                  : ((e = Math.floor((r * i) / ([1, 2, 3, 6][s] * 16))),
                    (e = new Uint8Array([
                      (e & 8160) >> 5,
                      (e & 31) << 3,
                      (i << 6) | (n << 1) | 0,
                      0 | (o << 1) | (u << 0),
                      0,
                    ])),
                    { sampleRate: i, channelCount: [2, 1, 2, 3, 3, 4, 4, 5][o] + u, Ga: e, ra: r })
              );
            }
            function Pr(e) {
              ((this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null));
            }
            ((h = Pr.prototype),
              (h.destroy = function () {
                this.g.clear();
              }),
              (h.isSupported = function (e) {
                return e.toLowerCase().split(";")[0] == "audio/ec3" ? In(this.convertCodecs("audio", e)) : !1;
              }),
              (h.convertCodecs = function (e, t) {
                return t.toLowerCase().split(";")[0] == "audio/ec3" ? 'audio/mp4; codecs="ec-3"' : t;
              }),
              (h.getOriginalMimeType = function () {
                return this.j;
              }),
              (h.transmux = function (e, t, n, r) {
                e = Le(e);
                for (
                  var i = Po(e), s = i.length;
                  s < e.length && ((e[s] << 8) | (e[s + 1] << 0)) !== 2935;
                  s++
                );
                var o = n.endTime * 1e3;
                ((i = zs(i)),
                  i.length &&
                    n &&
                    (i = i.find(function (m) {
                      return m.description === "com.apple.streaming.transportStreamTimestamp";
                    })) &&
                    (o = i.data),
                  (i = 0));
                for (var u = new Uint8Array([]), l = []; s < e.length; ) {
                  var p = RE(e, s);
                  if (!p) return Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
                  ((t.audioSamplingRate = p.sampleRate),
                    (t.channelsCount = p.channelCount),
                    (i = p.sampleRate),
                    (u = p.Ga),
                    l.push({
                      data: e.subarray(s, s + p.ra),
                      size: p.ra,
                      duration: 1536,
                      sb: 0,
                      flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                    }),
                    (s += p.ra));
                }
                return (
                  (e = Math.floor((o * i) / 1e3)),
                  (r = {
                    id: t.id,
                    type: "audio",
                    codecs: "ec-3",
                    encrypted: t.encrypted && t.drmInfos.length > 0,
                    timescale: i,
                    duration: r,
                    Bb: [],
                    Ga: u,
                    Sa: new Uint8Array([]),
                    Za: 0,
                    $a: 0,
                    data: { sequenceNumber: this.h, baseMediaDecodeTime: e, zb: l },
                    stream: t,
                  }),
                  (r = new Ro([r])),
                  (n = t.id + "_" + n.i),
                  this.g.has(n) ? (t = this.g.get(n)) : ((t = ko(r)), this.g.set(n, t)),
                  (n = this.i !== t),
                  (r = cu(r)),
                  (this.i = t),
                  this.h++,
                  Promise.resolve({ data: r, init: n ? t : null })
                );
              }),
              de("shaka.transmuxer.Ec3Transmuxer", Pr),
              (Pr.prototype.transmux = Pr.prototype.transmux),
              (Pr.prototype.getOriginalMimeType = Pr.prototype.getOriginalMimeType),
              (Pr.prototype.convertCodecs = Pr.prototype.convertCodecs),
              (Pr.prototype.isSupported = Pr.prototype.isSupported),
              (Pr.prototype.destroy = Pr.prototype.destroy),
              wi(
                "audio/ec3",
                function () {
                  return new Pr("audio/ec3");
                },
                Qi,
              ));
            function OL(e) {
              if (!e.length) return null;
              var t = e.find(function (I) {
                return I.type == 7;
              });
              if (
                ((e = e.find(function (I) {
                  return I.type == 8;
                })),
                !t || !e)
              )
                return null;
              var n = new ki(t.data),
                r = rt(n);
              if (
                (rt(n),
                rt(n),
                un(n),
                FL.includes(r) && ((r = Se(n)), r === 3 && tr(n, 1), un(n), un(n), tr(n, 1), Ie(n)))
              ) {
                r = r !== 3 ? 8 : 12;
                for (var i = 0; i < r; i++) Ie(n) && (i < 6 ? Fc(n, 16) : Fc(n, 64));
              }
              if ((un(n), (r = Se(n)), r === 0)) Se(n);
              else if (r === 1) for (tr(n, 1), un(n), un(n), r = Se(n), i = 0; i < r; i++) un(n);
              (un(n), tr(n, 1));
              var s = Se(n),
                o = Se(n),
                u = Xe(n, 1);
              (u === 0 && tr(n, 1), tr(n, 1));
              var l = 0,
                p = 0,
                m = 0,
                y = 0;
              if (
                (Ie(n) && ((l = Se(n)), (p = Se(n)), (m = Se(n)), (y = Se(n))), (i = r = 1), Ie(n) && Ie(n))
              ) {
                var v = rt(n),
                  w = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2],
                  A = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1];
                v > 0 && v <= 16
                  ? ((r = w[v - 1]), (i = A[v - 1]))
                  : v === 255 && ((r = Xe(n, 16)), (i = Xe(n, 16)));
              }
              return (
                (n = (2 - u) * (o + 1) * 16 - m * 2 - y * 2),
                (s = (s + 1) * 16 - l * 2 - p * 2),
                (l = []),
                (t = t.fullData),
                l.push((t.byteLength >>> 8) & 255),
                l.push(t.byteLength & 255),
                (l = l.concat.apply(l, Y(t))),
                (t = []),
                (e = e.fullData),
                t.push((e.byteLength >>> 8) & 255),
                t.push(e.byteLength & 255),
                (t = t.concat.apply(t, Y(e))),
                (e = new Uint8Array([1, l[3], l[4], l[5], 255, 225].concat(l, [1], t))),
                { height: n, width: s, Sa: e, Za: r, $a: i }
              );
            }
            function UL(e) {
              function t(A) {
                i = {
                  data: new Uint8Array([]),
                  frame: !1,
                  isKeyframe: !1,
                  pts: A.pts,
                  dts: A.dts,
                  nalus: [],
                };
              }
              function n() {
                if (i && i.nalus.length && i.frame) {
                  for (var A = [], I = x(i.nalus), C = I.next(); !C.done; C = I.next()) {
                    C = C.value;
                    var k = C.fullData.byteLength,
                      R = new Uint8Array(4);
                    ((R[0] = (k >> 24) & 255),
                      (R[1] = (k >> 16) & 255),
                      (R[2] = (k >> 8) & 255),
                      (R[3] = k & 255),
                      A.push(R),
                      A.push(C.fullData));
                  }
                  ((i.data = Nt.apply(fn, Y(A))), r.push(i));
                }
              }
              for (var r = [], i = null, s = !1, o = 0; o < e.length; o++) {
                var u = e[o],
                  l = u.nalus,
                  p = !1;
                (i && l.length && !s && (n(), t(u)), (l = x(u.nalus)));
                for (var m = l.next(); !m.done; m = l.next()) {
                  m = m.value;
                  var y = !1;
                  switch (m.type) {
                    case 1:
                      var v = !1;
                      y = !0;
                      var w = m.data;
                      (p &&
                        w.length > 4 &&
                        ((w = BM(new ki(w))), w === 2 || w === 4 || w === 7 || w === 9) &&
                        (v = !0),
                        v && i && i.frame && !i.isKeyframe && (n(), (i = null)),
                        i || t(u),
                        (i.frame = !0),
                        (i.isKeyframe = v));
                      break;
                    case 5:
                      ((y = !0),
                        i && i.frame && !i.isKeyframe && (n(), (i = null)),
                        i || t(u),
                        (i.frame = !0),
                        (i.isKeyframe = !0));
                      break;
                    case 6:
                      y = !0;
                      break;
                    case 7:
                      p = y = !0;
                      break;
                    case 8:
                      y = !0;
                      break;
                    case 9:
                      ((s = y = !0), i && i.frame && (n(), (i = null)), i || t(u));
                      break;
                    case 12:
                      y = !0;
                      break;
                    default:
                      y = !1;
                  }
                  i && y && i.nalus.push(m);
                }
              }
              return (n(), r);
            }
            var FL = [100, 110, 122, 244, 44, 83, 86, 118, 128, 138, 139, 134];
            function BL(e) {
              if (!e.length) return null;
              var t = e.find(function (o) {
                  return o.type == 32;
                }),
                n = e.find(function (o) {
                  return o.type == 33;
                }),
                r = e.find(function (o) {
                  return o.type == 34;
                });
              if (!t || !n || !r) return null;
              var i = jL(t.fullData);
              e = VL(n.fullData);
              var s = HL(r.fullData);
              return (
                (t = GL(t.fullData, n.fullData, r.fullData, {
                  Xg: i.Xg,
                  Eh: i.Eh,
                  Ig: e.Ig,
                  Jg: e.Jg,
                  Cg: e.Cg,
                  Hg: e.Hg,
                  Dg: e.Dg,
                  Eg: e.Eg,
                  Fg: e.Fg,
                  Gg: e.Gg,
                  wg: e.wg,
                  xg: e.xg,
                  yg: e.yg,
                  zg: e.zg,
                  Ag: e.Ag,
                  Bg: e.Bg,
                  uf: e.uf,
                  kg: e.kg,
                  jg: e.jg,
                  ig: e.ig,
                  Zg: s.Zg,
                  vg: e.vg,
                  ug: e.ug,
                })),
                { height: e.height, width: e.width, Sa: t, Za: e.Uk, $a: e.Tk }
              );
            }
            function jL(e) {
              var t = new ki(e, !0);
              return (
                rt(t),
                rt(t),
                Xe(t, 4),
                Xe(t, 2),
                Xe(t, 6),
                (e = Xe(t, 3)),
                (t = Ie(t)),
                { Xg: e + 1, Eh: t }
              );
            }
            function VL(e) {
              ((e = new ki(e, !0)), rt(e), rt(e));
              var t = 0,
                n = 0,
                r = 0,
                i = 0;
              Xe(e, 4);
              var s = Xe(e, 3);
              Ie(e);
              for (
                var o = Xe(e, 2),
                  u = Xe(e, 1),
                  l = Xe(e, 5),
                  p = rt(e),
                  m = rt(e),
                  y = rt(e),
                  v = rt(e),
                  w = rt(e),
                  A = rt(e),
                  I = rt(e),
                  C = rt(e),
                  k = rt(e),
                  R = rt(e),
                  L = rt(e),
                  U = [],
                  G = [],
                  b = 0;
                b < s;
                b++
              )
                (U.push(Ie(e)), G.push(Ie(e)));
              if (s > 0) for (b = s; b < 8; b++) Xe(e, 2);
              for (b = 0; b < s; b++) (U[b] && Xe(e, 88), G[b] && rt(e));
              (Se(e),
                (U = Se(e)),
                U == 3 && Xe(e, 1),
                (G = Se(e)),
                (b = Se(e)),
                Ie(e) && ((t += Se(e)), (n += Se(e)), (r += Se(e)), (i += Se(e))));
              var B = Se(e),
                O = Se(e),
                z = Se(e);
              if (Ie(e)) for (var j = 0; j <= s; j++) (Se(e), Se(e), Se(e));
              else (Se(e), Se(e), Se(e));
              if ((Se(e), Se(e), Se(e), Se(e), Se(e), Se(e), Ie(e) && Ie(e)))
                for (j = 0; j < 4; j++)
                  for (var X = 0; X < (j === 3 ? 2 : 6); X++)
                    if (Ie(e)) {
                      var W = Math.min(64, 1 << (4 + (j << 1)));
                      j > 1 && Do(e);
                      for (var ie = 0; ie < W; ie++) Do(e);
                    } else Se(e);
              for (Ie(e), Ie(e), Ie(e) && (rt(e), Se(e), Se(e), Ie(e)), j = Se(e), W = X = 0; W < j; W++)
                if (((ie = !1), W !== 0 && (ie = Ie(e)), ie)) {
                  (W === j && Se(e), Ie(e), Se(e));
                  for (var ne = (ie = 0); ne <= X; ne++) {
                    var $ = Ie(e),
                      Q = !1;
                    ($ || (Q = Ie(e)), ($ || Q) && ie++);
                  }
                  X = ie;
                } else {
                  for (ne = Se(e), ie = Se(e), X = ne + ie, $ = 0; $ < ne; $++) (Se(e), Ie(e));
                  for (ne = 0; ne < ie; ne++) (Se(e), Ie(e));
                }
              if (Ie(e))
                for (j = Se(e), X = 0; X < j; X++) {
                  for (W = 0; W < z + 4; W++) Xe(e, 1);
                  Xe(e, 1);
                }
              if (((j = z = 1), (X = !0), (W = 1), (ne = ie = 0), Ie(e), Ie(e), Ie(e))) {
                if (Ie(e)) {
                  (($ = rt(e)), (Q = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2]));
                  var ae = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1];
                  $ > 0 && $ <= 16
                    ? ((z = Q[$ - 1]), (j = ae[$ - 1]))
                    : $ === 255 && ((z = Xe(e, 16)), (j = Xe(e, 16)));
                }
                if (
                  (Ie(e) && Ie(e),
                  Ie(e) && (Xe(e, 3), Ie(e), Ie(e) && (rt(e), rt(e), rt(e))),
                  Ie(e) && (Se(e), Se(e)),
                  Ie(e),
                  Ie(e),
                  Ie(e),
                  ($ = Ie(e)) && (un(e), un(e), un(e), un(e)),
                  Ie(e) && ((W = Xe(e, 32)), (ie = Xe(e, 32)), Ie(e) && Se(e), Ie(e)))
                ) {
                  ((ae = !1),
                    ($ = Ie(e)),
                    (Q = Ie(e)),
                    ($ || Q) &&
                      ((ae = Ie(e)) && (rt(e), Xe(e, 5), Ie(e), Xe(e, 5)),
                      Xe(e, 4),
                      Xe(e, 4),
                      ae && Xe(e, 4),
                      Xe(e, 5),
                      Xe(e, 5),
                      Xe(e, 5)));
                  for (var ce = 0; ce <= s; ce++) {
                    X = Ie(e);
                    var Ne = !0,
                      we = 1;
                    X || (Ne = Ie(e));
                    var et = !1;
                    if ((Ne ? Se(e) : (et = Ie(e)), et || (we = Se(e) + 1), $)) {
                      for (Ne = 0; Ne < we; Ne++) (Se(e), Se(e), ae && (Se(e), Se(e)));
                      Ie(e);
                    }
                    if (Q) {
                      for (Ne = 0; Ne < we; Ne++) (Se(e), Se(e), ae && (Se(e), Se(e)));
                      Ie(e);
                    }
                  }
                }
                Ie(e) && (Ie(e), Ie(e), Ie(e), (ne = Se(e)), Se(e), Se(e), Se(e), Se(e));
              }
              return {
                Cg: L,
                Ig: o,
                Jg: u,
                Hg: l,
                Dg: p,
                Eg: m,
                Fg: y,
                Gg: v,
                wg: w,
                xg: A,
                yg: I,
                zg: C,
                Ag: k,
                Bg: R,
                uf: ne,
                kg: U,
                jg: B,
                ig: O,
                width: G - (t + n) * (U === 1 || U === 2 ? 2 : 1),
                height: b - (r + i) * (U === 1 ? 2 : 1),
                Uk: z,
                Tk: j,
                vg: ie / W,
                ug: X,
              };
            }
            function HL(e) {
              var t = new ki(e, !0);
              (rt(t),
                rt(t),
                Se(t),
                Se(t),
                Ie(t),
                Ie(t),
                Xe(t, 3),
                Ie(t),
                Ie(t),
                Se(t),
                Se(t),
                Do(t),
                Ie(t),
                Ie(t),
                Ie(t) && Se(t),
                Do(t),
                Do(t),
                Ie(t),
                Ie(t),
                Ie(t),
                Ie(t),
                (e = Ie(t)),
                (t = Ie(t)));
              var n = 1;
              return (t && e ? (n = 0) : t ? (n = 3) : e && (n = 2), { Zg: n });
            }
            function GL(e, t, n, r) {
              var i = new Uint8Array(23 + (5 + e.byteLength) + (5 + t.byteLength) + (5 + n.byteLength));
              for (
                i[0] = 1,
                  i[1] = ((r.Ig & 3) << 6) | ((r.Jg ? 1 : 0) << 5) | (r.Hg & 31),
                  i[2] = r.Dg,
                  i[3] = r.Eg,
                  i[4] = r.Fg,
                  i[5] = r.Gg,
                  i[6] = r.wg,
                  i[7] = r.xg,
                  i[8] = r.yg,
                  i[9] = r.zg,
                  i[10] = r.Ag,
                  i[11] = r.Bg,
                  i[12] = r.Cg,
                  i[13] = 240 | ((r.uf & 3840) >> 8),
                  i[14] = r.uf & 255,
                  i[15] = 252 | (r.Zg & 3),
                  i[16] = 252 | (r.kg & 3),
                  i[17] = 248 | (r.jg & 7),
                  i[18] = 248 | (r.ig & 7),
                  i[19] = 0,
                  i[20] = parseInt(r.vg, 10),
                  i[21] = (((r.ug ? 1 : 0) & 3) << 6) | ((r.Xg & 7) << 3) | ((r.Eh ? 1 : 0) << 2) | 3,
                  i[22] = 3,
                  e = [e, t, n],
                  t = 23,
                  n = e.length - 1,
                  r = 0;
                r < e.length;
                r += 1
              )
                (i.set(new Uint8Array([(32 + r) | (r === n ? 128 : 0), 0, 1]), t),
                  (t += 3),
                  i.set(new Uint8Array([e[r].byteLength >> 8, e[r].byteLength & 255]), t),
                  (t += 2),
                  i.set(e[r], t),
                  (t += e[r].byteLength));
              return i;
            }
            function Mf(e, t) {
              var n = (e[t + 1] >> 3) & 3,
                r = (e[t + 1] >> 1) & 3,
                i = (e[t + 2] >> 4) & 15,
                s = (e[t + 2] >> 2) & 3;
              if (n !== 1 && i !== 0 && i !== 15 && s !== 3) {
                var o = e[t + 3] >> 6;
                ((i = zL[(n === 3 ? 3 - r : r === 3 ? 3 : 4) * 14 + i - 1] * 1e3),
                  (s = XL[(n === 3 ? 0 : n === 2 ? 1 : 2) * 3 + s]),
                  (n = WL[n][r]));
                var u = KL[r],
                  l = Math.floor((n * i) / s + ((e[t + 2] >> 1) & 1)) * u,
                  p = (navigator.userAgent || "").match(/Chrome\/(\d+)/i);
                return (
                  (p = p ? parseInt(p[1], 10) : 0) &&
                    p <= 87 &&
                    r === 2 &&
                    i >= 224e3 &&
                    o === 0 &&
                    (e[t + 3] |= 128),
                  { sampleRate: s, channelCount: o === 3 ? 1 : 2, ra: l, Sk: n * 8 * u }
                );
              }
              return null;
            }
            function kE(e, t) {
              return e[t] === 255 && (e[t + 1] & 224) === 224 && (e[t + 1] & 6) !== 0;
            }
            function _E(e, t) {
              if (t + 1 < e.length && kE(e, t)) {
                var n = Mf(e, t),
                  r = 4;
                return (n && n.ra && (r = n.ra), (t += r), t === e.length || (t + 1 < e.length && kE(e, t)));
              }
              return !1;
            }
            var zL = [
                32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, 32, 48, 56, 64, 80, 96,
                112, 128, 160, 192, 224, 256, 320, 384, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224,
                256, 320, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 8, 16, 24, 32, 40,
                48, 56, 64, 80, 96, 112, 128, 144, 160,
              ],
              XL = [44100, 48e3, 32e3, 22050, 24e3, 16e3, 11025, 12e3, 8e3],
              WL = [
                [0, 72, 144, 12],
                [0, 0, 0, 0],
                [0, 72, 144, 12],
                [0, 144, 144, 12],
              ],
              KL = [0, 1, 1, 4];
            function Dr(e) {
              ((this.j = e), (this.h = 0), (this.g = new Map()), (this.i = null));
            }
            ((h = Dr.prototype),
              (h.destroy = function () {
                this.g.clear();
              }),
              (h.isSupported = function (e) {
                return e.toLowerCase().split(";")[0] == "audio/mpeg"
                  ? In(this.convertCodecs("audio", e))
                  : !1;
              }),
              (h.convertCodecs = function (e, t) {
                return t.toLowerCase().split(";")[0] == "audio/mpeg" ? 'audio/mp4; codecs="mp3"' : t;
              }),
              (h.getOriginalMimeType = function () {
                return this.j;
              }),
              (h.transmux = function (e, t, n, r) {
                for (var i = Le(e), s = Po(i).length; s < i.length && !_E(i, s); s++);
                var o;
                for (e = []; s < i.length; ) {
                  var u = Mf(i, s);
                  if (!u) return Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
                  (o || (o = u),
                    s + u.ra <= i.length &&
                      e.push({
                        data: i.subarray(s, s + u.ra),
                        size: u.ra,
                        duration: 1152,
                        sb: 0,
                        flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                      }),
                    (s += u.ra));
                }
                return o
                  ? ((i = ((o.Sk * 9e4) / o.sampleRate) * this.h),
                    (r = {
                      id: t.id,
                      type: "audio",
                      codecs: "mp3",
                      encrypted: t.encrypted && t.drmInfos.length > 0,
                      timescale: o.sampleRate,
                      duration: r,
                      Bb: [],
                      Ga: new Uint8Array([]),
                      Sa: new Uint8Array([]),
                      Za: 0,
                      $a: 0,
                      data: { sequenceNumber: this.h, baseMediaDecodeTime: i, zb: e },
                      stream: t,
                    }),
                    (r = new Ro([r])),
                    (n = t.id + "_" + n.i),
                    this.g.has(n) ? (t = this.g.get(n)) : ((t = ko(r)), this.g.set(n, t)),
                    (n = this.i !== t),
                    (r = cu(r)),
                    (this.i = t),
                    this.h++,
                    Promise.resolve({ data: r, init: n ? t : null }))
                  : Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
              }),
              de("shaka.transmuxer.Mp3Transmuxer", Dr),
              (Dr.prototype.transmux = Dr.prototype.transmux),
              (Dr.prototype.getOriginalMimeType = Dr.prototype.getOriginalMimeType),
              (Dr.prototype.convertCodecs = Dr.prototype.convertCodecs),
              (Dr.prototype.isSupported = Dr.prototype.isSupported),
              (Dr.prototype.destroy = Dr.prototype.destroy),
              wi(
                "audio/mpeg",
                function () {
                  return new Dr("audio/mpeg");
                },
                Qi,
              ));
            function Lr(e) {
              ((this.h = e), (this.g = null));
            }
            ((h = Lr.prototype),
              (h.destroy = function () {}),
              (h.isSupported = function (e) {
                if (e.toLowerCase().split(";")[0] != "video/mp2t") return !1;
                var t = Vn(e).split(","),
                  n = jn("audio", t);
                return (
                  (t = jn("video", t)),
                  !n || t || hn(n) != "mp3" ? !1 : In(this.convertCodecs("audio", e))
                );
              }),
              (h.convertCodecs = function (e, t) {
                return t.toLowerCase().split(";")[0] == "video/mp2t" ? "audio/mpeg" : t;
              }),
              (h.getOriginalMimeType = function () {
                return this.h;
              }),
              (h.transmux = function (e, t, n, r, i) {
                if (
                  (this.g ? this.g.clearData() : (this.g = new pt()),
                  this.g.Kf(n.i),
                  (e = Le(e)),
                  (e = this.g.parse(e)),
                  e.Yd().audio != "mp3" || i != "audio")
                )
                  return Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
                for (n = new Uint8Array([]), i = x(e.ub()), e = i.next(); !e.done; e = i.next())
                  if ((e = e.value.data))
                    for (t = 0; t < e.length; )
                      (r = Mf(e, t))
                        ? (t + r.ra <= e.length && (n = Nt(n, e.subarray(t, t + r.ra))), (t += r.ra))
                        : t++;
                return Promise.resolve(n);
              }),
              de("shaka.transmuxer.MpegTsTransmuxer", Lr),
              (Lr.prototype.transmux = Lr.prototype.transmux),
              (Lr.prototype.getOriginalMimeType = Lr.prototype.getOriginalMimeType),
              (Lr.prototype.convertCodecs = Lr.prototype.convertCodecs),
              (Lr.prototype.isSupported = Lr.prototype.isSupported),
              (Lr.prototype.destroy = Lr.prototype.destroy),
              wi(
                "video/mp2t",
                function () {
                  return new Lr("video/mp2t");
                },
                tp,
              ));
            /*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/ function vr(e) {
              ((this.h = e), (this.g = hm.get("ISOBoxer")()) && $L(this));
            }
            function $L(e) {
              function t() {
                (this._procFullBox(),
                  this.flags & 1 &&
                    (this._procField("AlgorithmID", "uint", 24),
                    this._procField("IV_size", "uint", 8),
                    this._procFieldArray("KID", 16, "uint", 8)),
                  this._procField("sample_count", "uint", 32),
                  this._procEntries("entry", this.sample_count, function (n) {
                    (this._procEntryField(n, "InitializationVector", "data", 8),
                      this.flags & 2 &&
                        (this._procEntryField(n, "NumberOfEntries", "uint", 16),
                        this._procSubEntries(n, "clearAndCryptedData", n.NumberOfEntries, function (r) {
                          (this._procEntryField(r, "BytesOfClearData", "uint", 16),
                            this._procEntryField(r, "BytesOfEncryptedData", "uint", 32));
                        })));
                  }));
              }
              (e.g.addBoxProcessor("saio", function () {
                (this._procFullBox(),
                  this.flags & 1 &&
                    (this._procField("aux_info_type", "uint", 32),
                    this._procField("aux_info_type_parameter", "uint", 32)),
                  this._procField("entry_count", "uint", 32),
                  this._procFieldArray("offset", this.entry_count, "uint", this.version === 1 ? 64 : 32));
              }),
                e.g.addBoxProcessor("saiz", function () {
                  (this._procFullBox(),
                    this.flags & 1 &&
                      (this._procField("aux_info_type", "uint", 32),
                      this._procField("aux_info_type_parameter", "uint", 32)),
                    this._procField("default_sample_info_size", "uint", 8),
                    this._procField("sample_count", "uint", 32),
                    this.default_sample_info_size === 0 &&
                      this._procFieldArray("sample_info_size", this.sample_count, "uint", 8));
                }),
                e.g.addBoxProcessor("senc", t),
                e.g.addBoxProcessor("uuid", function () {
                  for (var n = !0, r = 0; r < 16; r++) this.usertype[r] !== YL[r] && (n = !1);
                  n && (this._parsing && (this.type = "sepiff"), t.call(this));
                }));
            }
            ((h = vr.prototype),
              (h.destroy = function () {}),
              (h.isSupported = function (e, t) {
                var n = e.startsWith("mss/");
                return !this.g || !n
                  ? !1
                  : t
                    ? In(this.convertCodecs(t, e))
                    : ((t = this.convertCodecs("audio", e)),
                      (e = this.convertCodecs("video", e)),
                      In(t) || In(e));
              }),
              (h.convertCodecs = function (e, t) {
                return t.replace("mss/", "");
              }),
              (h.getOriginalMimeType = function () {
                return this.h;
              }),
              (h.transmux = function (e, t, n) {
                if (!n) return Promise.resolve(Le(e));
                if (!t.mssPrivateData) return Promise.reject(new H(2, 3, 3020, n ? n.P()[0] : null));
                try {
                  var r,
                    i = this.g.parseBuffer(e),
                    s = i.fetch("tfhd");
                  s.track_ID = t.id + 1;
                  var o = i.fetch("tfdt"),
                    u = i.fetch("traf");
                  o === null &&
                    ((o = this.g.createFullBox("tfdt", u, s)),
                    (o.version = 1),
                    (o.flags = 0),
                    (o.baseMediaDecodeTime = Math.floor(n.startTime * t.mssPrivateData.timescale)));
                  var l = i.fetch("trun"),
                    p = i.fetch("tfxd");
                  p && p._parent.boxes.splice(p._parent.boxes.indexOf(p), 1);
                  var m = i.fetch("tfrf");
                  m && m._parent.boxes.splice(m._parent.boxes.indexOf(m), 1);
                  var y = i.fetch("sepiff");
                  if (y !== null) {
                    ((y.type = "senc"), (y.usertype = void 0));
                    var v = i.fetch("saio");
                    if (v === null) {
                      ((v = this.g.createFullBox("saio", u)),
                        (v.version = 0),
                        (v.flags = 0),
                        (v.entry_count = 1),
                        (v.offset = [0]));
                      var w = this.g.createFullBox("saiz", u);
                      if (
                        ((w.version = 0),
                        (w.flags = 0),
                        (w.sample_count = y.sample_count),
                        (w.default_sample_info_size = 0),
                        (w.sample_info_size = []),
                        y.flags & 2)
                      )
                        for (r = 0; r < y.sample_count; r += 1)
                          w.sample_info_size[r] = 10 + 6 * y.entry[r].NumberOfEntries;
                      else w.default_sample_info_size = 8;
                    }
                  }
                  ((s.flags &= 16777214), (s.flags |= 131072), (l.flags |= 1));
                  var A = i.fetch("moof");
                  l.data_offset = A.getLength() + 8;
                  var I = i.fetch("saio");
                  I !== null && (I.offset[0] = PE(A, "traf") + PE(u, "senc") + 16);
                  var C = Le(i.write());
                  return Promise.resolve(C);
                } catch (k) {
                  return k instanceof H
                    ? Promise.reject(k)
                    : Promise.reject(new H(2, 3, 3022, n ? n.P()[0] : null));
                }
              }));
            function PE(e, t) {
              for (var n = 8, r = 0; r < e.boxes.length && e.boxes[r].type !== t; r++) n += e.boxes[r].size;
              return n;
            }
            (de("shaka.transmuxer.MssTransmuxer", vr),
              (vr.prototype.transmux = vr.prototype.transmux),
              (vr.prototype.getOriginalMimeType = vr.prototype.getOriginalMimeType),
              (vr.prototype.convertCodecs = vr.prototype.convertCodecs),
              (vr.prototype.isSupported = vr.prototype.isSupported),
              (vr.prototype.destroy = vr.prototype.destroy));
            var YL = new Uint8Array([162, 57, 79, 82, 90, 155, 79, 20, 162, 68, 108, 66, 124, 100, 141, 244]);
            (wi(
              "mss/audio/mp4",
              function () {
                return new vr("mss/audio/mp4");
              },
              Qi,
            ),
              wi(
                "mss/video/mp4",
                function () {
                  return new vr("mss/video/mp4");
                },
                Qi,
              ));
            function br(e) {
              ((this.m = e), (this.g = 0), (this.j = new Map()), (this.l = this.i = this.h = null));
            }
            ((h = br.prototype),
              (h.destroy = function () {
                (this.j.clear(), this.i && this.i.destroy());
              }),
              (h.isSupported = function (e, t) {
                if (e.toLowerCase().split(";")[0] != "video/mp2t") return !1;
                var n = e;
                t && (n = this.convertCodecs(t, e));
                var r = Vn(n).split(",");
                return (
                  (n = jn("audio", r)),
                  (r = jn("video", r)),
                  (n && ((n = hn(n)), !qL.includes(n))) || (r && ((n = hn(r)), !JL.includes(n)))
                    ? !1
                    : t
                      ? In(this.convertCodecs(t, e))
                      : ((t = this.convertCodecs("audio", e)),
                        (e = this.convertCodecs("video", e)),
                        In(t) || In(e))
                );
              }),
              (h.convertCodecs = function (e, t) {
                return t.toLowerCase().split(";")[0] == "video/mp2t"
                  ? ((t = Vn(t)
                      .replace("mp4a.40.34", "mp3")
                      .split(",")
                      .map(function (n) {
                        return ru(n, "audio/mp4");
                      })
                      .map(k0)
                      .join(",")),
                    e == "audio" ? 'audio/mp4; codecs="' + t + '"' : 'video/mp4; codecs="' + t + '"')
                  : t;
              }),
              (h.getOriginalMimeType = function () {
                return this.m;
              }),
              (h.transmux = function (e, t, n, r, i) {
                var s = Le(e);
                if (i == "audio" && !Lo(s)) {
                  for (var o = Po(s), u = o.length; u < s.length; u++)
                    if (_E(s, u)) return Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
                  for (u = o.length; u < s.length; u++)
                    if (CE(s, u))
                      return (this.i || (this.i = new yr("audio/aac")), this.i.transmux(e, t, n, r, i));
                  return Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
                }
                (this.h ? this.h.clearData() : (this.h = new pt()), this.h.Kf(n.i));
                var l = this.h.parse(s),
                  p = [],
                  m = l.Yd();
                try {
                  var y = null;
                  if (i == "video") {
                    switch (m.video) {
                      case "avc":
                        var v = [],
                          w = null,
                          A = l.ud(),
                          I = UL(A);
                        if (!I.length) throw new H(2, 3, 3023, n ? n.P()[0] : null);
                        for (var C = 0; C < I.length; C++) {
                          var k = I[C];
                          w == null && (w = k.dts);
                          var R = void 0;
                          ((R =
                            C + 1 < I.length
                              ? (I[C + 1].dts || 0) - (k.dts || 0)
                              : I.length > 1
                                ? (k.dts || 0) - (I[C - 1].dts || 0)
                                : (n.endTime - n.startTime) * 9e4),
                            v.push({
                              data: k.data,
                              size: k.data.byteLength,
                              duration: R,
                              sb: Math.round((k.pts || 0) - (k.dts || 0)),
                              flags: {
                                xb: 0,
                                mb: 0,
                                jb: 0,
                                hb: 0,
                                ib: k.isKeyframe ? 2 : 1,
                                yb: k.isKeyframe ? 0 : 1,
                              },
                            }));
                        }
                        for (var L = [], U = x(A), G = U.next(); !G.done; G = U.next())
                          L.push.apply(L, Y(G.value.nalus));
                        var b = OL(L);
                        if (!b || w == null) throw new H(2, 3, 3018, n ? n.P()[0] : null);
                        ((t.height = b.height),
                          (t.width = b.width),
                          (y = {
                            id: t.id,
                            type: "video",
                            codecs: "avc1",
                            encrypted: t.encrypted && t.drmInfos.length > 0,
                            timescale: 9e4,
                            duration: r,
                            Bb: [],
                            Ga: new Uint8Array([]),
                            Sa: b.Sa,
                            Za: b.Za,
                            $a: b.$a,
                            data: { sequenceNumber: this.g, baseMediaDecodeTime: w, zb: v },
                            stream: t,
                          }));
                        break;
                      case "hvc":
                        var B = [],
                          O = null,
                          z = [],
                          j = l.ud();
                        if (!j.length) throw new H(2, 3, 3023, n ? n.P()[0] : null);
                        for (var X = 0; X < j.length; X++) {
                          var W = j[X],
                            ie = W.nalus;
                          z.push.apply(z, Y(ie));
                          for (
                            var ne = !1, $ = [], Q = !1, ae = x(ie), ce = ae.next();
                            !ce.done;
                            ce = ae.next()
                          ) {
                            var Ne = ce.value;
                            switch (Ne.type) {
                              case 1:
                              case 0:
                                var we = (Q = !0);
                                break;
                              case 19:
                              case 20:
                              case 21:
                                ne = we = Q = !0;
                                break;
                              case 32:
                                we = !0;
                                break;
                              case 33:
                                we = !0;
                                break;
                              case 34:
                                we = !0;
                                break;
                              case 35:
                                Q = we = !0;
                                break;
                              case 39:
                              case 40:
                                we = !0;
                                break;
                              default:
                                we = !1;
                            }
                            if (Q && we) {
                              var et = Ne.fullData.byteLength,
                                Ue = new Uint8Array(4);
                              ((Ue[0] = (et >> 24) & 255),
                                (Ue[1] = (et >> 16) & 255),
                                (Ue[2] = (et >> 8) & 255),
                                (Ue[3] = et & 255),
                                $.push(Ue),
                                $.push(Ne.fullData));
                            }
                          }
                          var ot = $.length ? { data: Nt.apply(fn, Y($)), isKeyframe: ne } : null;
                          if (ot) {
                            O == null && W.dts != null && (O = W.dts);
                            var We = void 0;
                            ((We =
                              X + 1 < j.length
                                ? (j[X + 1].dts || 0) - (W.dts || 0)
                                : j.length > 1
                                  ? (W.dts || 0) - (j[X - 1].dts || 0)
                                  : (n.endTime - n.startTime) * 9e4),
                              B.push({
                                data: ot.data,
                                size: ot.data.byteLength,
                                duration: We,
                                sb: Math.round((W.pts || 0) - (W.dts || 0)),
                                flags: {
                                  xb: 0,
                                  mb: 0,
                                  jb: 0,
                                  hb: 0,
                                  ib: ot.isKeyframe ? 2 : 1,
                                  yb: ot.isKeyframe ? 0 : 1,
                                },
                              }));
                          }
                        }
                        var Ge = BL(z);
                        if (!Ge || O == null) throw new H(2, 3, 3018, n ? n.P()[0] : null);
                        ((t.height = Ge.height),
                          (t.width = Ge.width),
                          (y = {
                            id: t.id,
                            type: "video",
                            codecs: "hvc1",
                            encrypted: t.encrypted && t.drmInfos.length > 0,
                            timescale: 9e4,
                            duration: r,
                            Bb: [],
                            Ga: new Uint8Array([]),
                            Sa: Ge.Sa,
                            Za: Ge.Za,
                            $a: Ge.$a,
                            data: { sequenceNumber: this.g, baseMediaDecodeTime: O, zb: B },
                            stream: t,
                          }));
                    }
                    y && (p.push(y), (y = null));
                  }
                  if (i == "audio") {
                    switch (m.audio) {
                      case "aac":
                        for (
                          var Ye = [], Ze, qe = null, ze = null, Ke = null, $t = x(l.ub()), Ht = $t.next();
                          !Ht.done;
                          Ht = $t.next()
                        ) {
                          var xr = Ht.value,
                            Kn = xr.data;
                          if (Kn) {
                            var On = 0;
                            if (ze == -1 && Ke) ((Kn = Nt(Ke, xr.data)), (ze = null));
                            else if (ze != null && Ke) {
                              On = Math.max(0, ze);
                              var Qs = Nt(Ke, Kn.subarray(0, On));
                              (Ye.push({
                                data: Qs,
                                size: Qs.byteLength,
                                duration: 1024,
                                sb: 0,
                                flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                              }),
                                (ze = Ke = null));
                            }
                            if (((Ze = IE(Kn, On)), !Ze)) throw new H(2, 3, 3018, n ? n.P()[0] : null);
                            for (
                              t.audioSamplingRate = Ze.sampleRate,
                                t.channelsCount = Ze.channelCount,
                                qe == null && xr.pts !== null && (qe = xr.pts);
                              On < Kn.length;
                            ) {
                              var Bi = EE(Kn, On);
                              if (!Bi) {
                                ((Ke = Kn.subarray(On, Kn.length)), (ze = -1));
                                break;
                              }
                              var zr = Bi.ee + Bi.ra;
                              ((ze = Math.max(0, On + zr - Kn.length)),
                                ze != 0
                                  ? (Ke = Kn.subarray(On + Bi.ee, On + zr))
                                  : On + zr <= Kn.length &&
                                    Ye.push({
                                      data: Kn.subarray(On + Bi.ee, On + zr),
                                      size: Bi.ra,
                                      duration: 1024,
                                      sb: 0,
                                      flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                                    }),
                                (On += zr));
                            }
                          }
                        }
                        if (!Ze || qe == null) {
                          qe = n.startTime * 9e4;
                          var ua = jn("audio", t.codecs.split(","));
                          if (!ua || !t.channelsCount || !t.audioSamplingRate)
                            throw new H(2, 3, 3018, n ? n.P()[0] : null);
                          Ze = { sampleRate: t.audioSamplingRate, channelCount: t.channelsCount, codec: ua };
                          var la = bL(ua, t.channelsCount);
                          if (!la) throw new H(2, 3, 3018, n ? n.P()[0] : null);
                          for (var Rf = qe + (n.endTime - n.startTime) * 9e4, Xr = qe; Xr < Rf; )
                            (Ye.push({
                              data: la,
                              size: la.byteLength,
                              duration: 1024,
                              sb: 0,
                              flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                            }),
                              (Xr += (1024 / Ze.sampleRate) * 9e4));
                        }
                        var kf = Ze.sampleRate,
                          vy = (qe / 9e4) * kf;
                        y = {
                          id: t.id,
                          type: "audio",
                          codecs: Ze.codec,
                          encrypted: t.encrypted && t.drmInfos.length > 0,
                          timescale: kf,
                          duration: r,
                          Bb: [],
                          Ga: new Uint8Array([]),
                          Sa: new Uint8Array([]),
                          Za: 0,
                          $a: 0,
                          data: { sequenceNumber: this.g, baseMediaDecodeTime: vy, zb: Ye },
                          stream: t,
                        };
                        break;
                      case "ac3":
                        for (
                          var _f = [],
                            ca = 0,
                            ll = new Uint8Array([]),
                            Gt = null,
                            sr = x(l.ub()),
                            Un = sr.next();
                          !Un.done;
                          Un = sr.next()
                        ) {
                          var xy = Un.value,
                            Ty = xy.data;
                          Gt == null && xy.pts !== null && (Gt = xy.pts);
                          for (var da = 0; da < Ty.length; ) {
                            var ys = ME(Ty, da);
                            ys
                              ? ((t.audioSamplingRate = ys.sampleRate),
                                (t.channelsCount = ys.channelCount),
                                (ca = ys.sampleRate),
                                (ll = ys.Ga),
                                _f.push({
                                  data: Ty.subarray(da, da + ys.ra),
                                  size: ys.ra,
                                  duration: 1536,
                                  sb: 0,
                                  flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                                }),
                                (da += ys.ra))
                              : da++;
                          }
                        }
                        if (ca == 0 || ll.byteLength == 0 || Gt == null)
                          throw new H(2, 3, 3018, n ? n.P()[0] : null);
                        var QL = (Gt / 9e4) * ca;
                        y = {
                          id: t.id,
                          type: "audio",
                          codecs: "ac-3",
                          encrypted: t.encrypted && t.drmInfos.length > 0,
                          timescale: ca,
                          duration: r,
                          Bb: [],
                          Ga: ll,
                          Sa: new Uint8Array([]),
                          Za: 0,
                          $a: 0,
                          data: { sequenceNumber: this.g, baseMediaDecodeTime: QL, zb: _f },
                          stream: t,
                        };
                        break;
                      case "ec3":
                        for (
                          var LE = [],
                            Pf = 0,
                            wy = new Uint8Array([]),
                            Df = null,
                            bE = x(l.ub()),
                            Sy = bE.next();
                          !Sy.done;
                          Sy = bE.next()
                        ) {
                          var Ay = Sy.value,
                            Ey = Ay.data;
                          Df == null && Ay.pts !== null && (Df = Ay.pts);
                          for (var fa = 0; fa < Ey.length; ) {
                            var vs = RE(Ey, fa);
                            vs
                              ? ((t.audioSamplingRate = vs.sampleRate),
                                (t.channelsCount = vs.channelCount),
                                (Pf = vs.sampleRate),
                                (wy = vs.Ga),
                                LE.push({
                                  data: Ey.subarray(fa, fa + vs.ra),
                                  size: vs.ra,
                                  duration: 1536,
                                  sb: 0,
                                  flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                                }),
                                (fa += vs.ra))
                              : fa++;
                          }
                        }
                        if (Pf == 0 || wy.byteLength == 0 || Df == null)
                          throw new H(2, 3, 3018, n ? n.P()[0] : null);
                        var ZL = (Df / 9e4) * Pf;
                        y = {
                          id: t.id,
                          type: "audio",
                          codecs: "ec-3",
                          encrypted: t.encrypted && t.drmInfos.length > 0,
                          timescale: Pf,
                          duration: r,
                          Bb: [],
                          Ga: wy,
                          Sa: new Uint8Array([]),
                          Za: 0,
                          $a: 0,
                          data: { sequenceNumber: this.g, baseMediaDecodeTime: ZL, zb: LE },
                          stream: t,
                        };
                        break;
                      case "mp3":
                        for (
                          var NE = [], Lf, bf = null, OE = x(l.ub()), Iy = OE.next();
                          !Iy.done;
                          Iy = OE.next()
                        ) {
                          var Cy = Iy.value,
                            cl = Cy.data;
                          if (cl) {
                            bf == null && Cy.pts !== null && (bf = Cy.pts);
                            for (var Zs = 0; Zs < cl.length; ) {
                              var ha = Mf(cl, Zs);
                              ha
                                ? (Lf || (Lf = ha),
                                  Zs + ha.ra <= cl.length &&
                                    NE.push({
                                      data: cl.subarray(Zs, Zs + ha.ra),
                                      size: ha.ra,
                                      duration: 1152,
                                      sb: 0,
                                      flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                                    }),
                                  (Zs += ha.ra))
                                : Zs++;
                            }
                          }
                        }
                        if (!Lf || bf == null) throw new H(2, 3, 3018, n ? n.P()[0] : null);
                        var UE = Lf.sampleRate,
                          eb = (bf / 9e4) * UE;
                        y = {
                          id: t.id,
                          type: "audio",
                          codecs: "mp3",
                          encrypted: t.encrypted && t.drmInfos.length > 0,
                          timescale: UE,
                          duration: r,
                          Bb: [],
                          Ga: new Uint8Array([]),
                          Sa: new Uint8Array([]),
                          Za: 0,
                          $a: 0,
                          data: { sequenceNumber: this.g, baseMediaDecodeTime: eb, zb: NE },
                          stream: t,
                        };
                        break;
                      case "opus":
                        var FE = [],
                          Nf = null,
                          ci = l.H;
                        if (!ci) throw new H(2, 3, 3018, n ? n.P()[0] : null);
                        var Fn = [];
                        switch (ci.uj) {
                          case 1:
                          case 2:
                            Fn = [0];
                            break;
                          case 0:
                            Fn = [255, 1, 1, 0, 1];
                            break;
                          case 128:
                            Fn = [255, 2, 0, 0, 1];
                            break;
                          case 3:
                            Fn = [1, 2, 1, 0, 2, 1];
                            break;
                          case 4:
                            Fn = [1, 2, 2, 0, 1, 2, 3];
                            break;
                          case 5:
                            Fn = [1, 3, 2, 0, 4, 1, 2, 3];
                            break;
                          case 6:
                            Fn = [1, 4, 2, 0, 4, 1, 2, 3, 5];
                            break;
                          case 7:
                            Fn = [1, 4, 2, 0, 4, 1, 2, 3, 5, 6];
                            break;
                          case 8:
                            Fn = [1, 5, 3, 0, 6, 1, 2, 3, 4, 5, 7];
                            break;
                          case 130:
                            Fn = [1, 1, 2, 0, 1];
                            break;
                          case 131:
                            Fn = [1, 1, 3, 0, 1, 2];
                            break;
                          case 132:
                            Fn = [1, 1, 4, 0, 1, 2, 3];
                            break;
                          case 133:
                            Fn = [1, 1, 5, 0, 1, 2, 3, 4];
                            break;
                          case 134:
                            Fn = [1, 1, 6, 0, 1, 2, 3, 4, 5];
                            break;
                          case 135:
                            Fn = [1, 1, 7, 0, 1, 2, 3, 4, 5, 6];
                            break;
                          case 136:
                            Fn = [1, 1, 8, 0, 1, 2, 3, 4, 5, 6, 7];
                        }
                        for (
                          var BE = new Uint8Array(
                              [
                                0,
                                ci.channelCount,
                                0,
                                0,
                                (ci.sampleRate >>> 24) & 255,
                                (ci.sampleRate >>> 17) & 255,
                                (ci.sampleRate >>> 8) & 255,
                                (ci.sampleRate >>> 0) & 255,
                                0,
                                0,
                              ].concat(Y(Fn)),
                            ),
                            jE = ci.sampleRate,
                            VE = x(l.ub()),
                            My = VE.next();
                          !My.done;
                          My = VE.next()
                        ) {
                          var Ry = My.value,
                            pa = Ry.data;
                          Nf == null && Ry.pts !== null && (Nf = Ry.pts);
                          for (var dl = 0; dl < pa.length; ) {
                            for (
                              var tb = (pa[dl + 1] & 16) !== 0,
                                nb = (pa[dl + 1] & 8) !== 0,
                                ji = dl + 2,
                                Of = 0;
                              pa[ji] === 255;
                            )
                              ((Of += 255), (ji += 1));
                            ((Of += pa[ji]), (ji += 1), (ji += tb ? 2 : 0), (ji += nb ? 2 : 0));
                            var HE = pa.slice(ji, ji + Of);
                            (FE.push({
                              data: HE,
                              size: HE.byteLength,
                              duration: 960,
                              sb: 0,
                              flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 },
                            }),
                              (dl = ji + Of));
                          }
                        }
                        if (BE.byteLength == 0 || Nf == null) throw new H(2, 3, 3018, n ? n.P()[0] : null);
                        ((t.audioSamplingRate = ci.sampleRate), (t.channelsCount = ci.channelCount));
                        var rb = (Nf / 9e4) * jE;
                        y = {
                          id: t.id,
                          type: "audio",
                          codecs: "opus",
                          encrypted: t.encrypted && t.drmInfos.length > 0,
                          timescale: jE,
                          duration: r,
                          Bb: [],
                          Ga: BE,
                          Sa: new Uint8Array([]),
                          Za: 0,
                          $a: 0,
                          data: { sequenceNumber: this.g, baseMediaDecodeTime: rb, zb: FE },
                          stream: t,
                        };
                    }
                    y && (p.push(y), (y = null));
                  }
                } catch (_y) {
                  return _y && _y.code == 3023 ? Promise.resolve(new Uint8Array([])) : Promise.reject(_y);
                }
                if (!p.length) return Promise.reject(new H(2, 3, 3018, n ? n.P()[0] : null));
                var GE = new Ro(p),
                  ky = t.id + "_" + n.i;
                if (this.j.has(ky)) var fl = this.j.get(ky);
                else ((fl = ko(GE)), this.j.set(ky, fl));
                var ib = this.l !== fl,
                  sb = cu(GE);
                return ((this.l = fl), this.g++, Promise.resolve({ data: sb, init: ib ? fl : null }));
              }),
              de("shaka.transmuxer.TsTransmuxer", br),
              (br.prototype.transmux = br.prototype.transmux),
              (br.prototype.getOriginalMimeType = br.prototype.getOriginalMimeType),
              (br.prototype.convertCodecs = br.prototype.convertCodecs),
              (br.prototype.isSupported = br.prototype.isSupported),
              (br.prototype.destroy = br.prototype.destroy));
            var qL = ["aac", "ac-3", "ec-3", "mp3", "opus"],
              JL = ["avc", "hevc"];
            wi(
              "video/mp2t",
              function () {
                return new br("video/mp2t");
              },
              np,
            );
            function DE() {}
            (q(DE, Gn), de("shaka.util.FairPlayUtils", DE));
          }).call(a, c, c, void 0);
          for (var f in a.shaka) d[f] = a.shaka[f];
        })();
      })(qy)),
    qy
  );
}
cB();
const Sv = {
    lightning: {
      debug: !1,
      focusDebug: !1,
      fontSettings: { fontFamily: "Roboto", color: 4294967295, fontSize: 40 },
      animationSettings: { easing: "ease-in-out", duration: 250 },
      rendererOptions: {
        appHeight: 1080,
        appWidth: 1920,
        numImageWorkers: 2,
        fontEngines: [uB],
        renderEngine: R3,
        deviceLogicalPixelRatio: 1,
        devicePhysicalPixelRatio: 1,
        boundsMargin: 20,
        createImageBitmapSupport: "auto",
      },
    },
    keys: {
      Back: ["b", 66],
      Backspace: ["Backspace", 8],
      Left: ["ArrowLeft", 37],
      Right: ["ArrowRight", 39],
      Up: ["ArrowUp", 38],
      Down: ["ArrowDown", 40],
      Enter: ["Enter", 13],
      Play: ["p", 80],
      Pause: ["a", 65],
      Menu: ["m"],
      PlayPause: ["t", 84],
      FastForward: ["f", 70],
      FastForward10: ["d", 68],
      Rewind: ["r", 82],
      Rewind10: ["e", 69],
      Stop: ["s", 83],
      Key0: ["0", 96, 48],
      Key1: ["1", 97, 49],
      Key2: ["2", 98, 50],
      Key3: ["3", 99, 51],
      Key4: ["4", 100, 52],
      Key5: ["5", 101, 53],
      Key6: ["6", 102, 54],
      Key7: ["7", 103, 55],
      Key8: ["8", 104, 56],
      Key9: ["9", 105, 57],
    },
    keyHoldOptions: { userKeyHoldMap: { EnterHold: ["Enter", 13], BackHold: ["b", 66] }, holdThreshold: 1e3 },
  },
  dB =
    "eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxODU4MjY0ZTM2ZWQ1NzZkYzM3ZDU5MjJmNzM3MWRmNiIsIm5iZiI6MTY2NzIzOTgzMS45MDIwMDAyLCJzdWIiOiI2MzYwMGY5NzFkYmM4ODAwOTBmNTIxMDAiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.LXx9-LdX9JsiY0DhpmjYcYitlqPJqntNHVv-HGZXpww",
  fB = "https://api.themoviedb.org/3";
let rC, iC;
const hB = new URLSearchParams(window.location.search),
  pB = hB.get("posterSize") || "w185",
  gB = { headers: { "Content-Type": "application/json", Authorization: "Bearer " + dB } };
function jv(d, c = pB) {
  return iC + c + d;
}
function mB(d, c = {}) {
  return rC ? Av(d, c) : sC().then(() => Av(d, c));
}
function Av(d, c = {}) {
  return fetch(fB + d, { ...gB, ...c }).then(a => a.json());
}
function sC() {
  return Av("/configuration").then(d => {
    var c;
    return ((rC = d), (iC = (c = d.images) == null ? void 0 : c.secure_base_url), d);
  });
}
const Kl = { get: mB, loadConfig: sC };
async function yB(d) {
  try {
    const c = await Kl.get("/discover/movie");
    return (d ? c.results.slice(0, 5) : c.results).map(f => ({
      title: f.title,
      poster_path: f.poster_path,
      overview: f.overview,
      backdrop_path: f.backdrop_path,
      id: f.id,
    }));
  } catch (c) {
    throw (console.error(c), c);
  }
}
async function vB() {
  try {
    return (await Kl.get("/discover/movie")).results.map(c => ({
      title: c.title,
      poster_path: c.poster_path,
      overview: c.overview,
      backdrop_path: c.backdrop_path,
      id: c.id,
    }));
  } catch (d) {
    throw (console.error(d), d);
  }
}
async function xB(d) {
  try {
    const c = await Kl.get("/discover/tv");
    return (d ? c.results.slice(0, 5) : c.results).map(f => ({
      title: f.name,
      poster_path: f.poster_path,
      overview: f.overview,
      backdrop_path: f.backdrop_path,
      id: f.id,
    }));
  } catch (c) {
    throw (console.error(c), c);
  }
}
function TB() {
  const d = [];
  return (
    d.push({ title: "MOVIES", items: dh(() => yB(!0))[0] }),
    d.push({ title: "SERIES", items: dh(() => xB(!0))[0] }),
    { rows: d }
  );
}
function oC() {
  const [d] = dh(() => vB());
  return { movies: d };
}
const wB = "" + new URL("logo-CWMc854L.png", import.meta.url).href,
  Jy = {
    container: { display: "flex", flexDirection: "column", justifyContent: "center", alignItems: "center" },
    text: { fontFamily: "Roboto", fontSize: 32, color: 1465341951, $focus: { color: 4294967295 } },
    underline: { width: "100%", height: 4, y: 4, color: 4278190335, alpha: 0, $focus: { alpha: 1 } },
  };
function SB(d) {
  return me(
    at,
    zl(
      {
        forwardStates: !0,
        get style() {
          return Jy.container;
        },
      },
      d,
      {
        get children() {
          return [
            me(kn, {
              get style() {
                return Jy.text;
              },
              get children() {
                return d.children;
              },
            }),
            me(at, {
              get style() {
                return Jy.underline;
              },
            }),
          ];
        },
      },
    ),
  );
}
const AB = [
    { label: "Home", path: "/" },
    { label: "Movies", path: "/movies" },
  ],
  EB = d => {
    const c = Xl(),
      a = () => (Th() === "/" || c(-1), !0);
    let f, g;
    return me(at, {
      onUp: () => f.setFocus(),
      onDown: () => g.setFocus(),
      onBack: a,
      onBackspace: a,
      get children() {
        return [
          me(at, { x: 32, y: 32, src: wB, width: 301, height: 60, zIndex: 200 }),
          me(yh, {
            x: 400,
            y: 37,
            gap: 20,
            ref(h) {
              var M = f;
              typeof M == "function" ? M(h) : (f = h);
            },
            zIndex: 200,
            get children() {
              return me(Ol, {
                each: AB,
                children: h =>
                  me(
                    SB,
                    zl(d, {
                      width: 118,
                      height: 49,
                      onEnter: () => c(h.path),
                      onClick: () => c(h.path),
                      get children() {
                        return h.label;
                      },
                    }),
                  ),
              });
            },
          }),
          me(at, {
            y: 0,
            ref(h) {
              var M = g;
              typeof M == "function" ? M(h) : (g = h);
            },
            forwardFocus: 0,
            get children() {
              return d.children;
            },
          }),
        ];
      },
    });
  },
  IB = { scale: 1, $focus: { scale: 1.1 } },
  CB = {
    fontFamily: "Inter",
    fontWeight: 400,
    fontSize: 24,
    maxLines: 1,
    contain: "width",
    lineHeight: 1,
    color: 4294967193,
    $focus: { color: 4294967295 },
  },
  MB = { borderRadius: 6, $focus: { border: { width: 6, color: 3978044671 } } },
  RB = d => {
    const { id: c, title: a, poster_path: f } = d.item;
    return me(at, {
      id: "card",
      get width() {
        return d.style.width;
      },
      get height() {
        return d.style.height;
      },
      display: "flex",
      flexDirection: "column",
      gap: 16,
      style: IB,
      forwardStates: !0,
      onEnter: () => d.onEnter(),
      get children() {
        return [
          me(at, {
            id: "pic",
            style: MB,
            get src() {
              return jv(f, "w342");
            },
          }),
          me(kn, {
            id: "text",
            get y() {
              return d.style.height;
            },
            get width() {
              return d.style.width;
            },
            style: CB,
            children: a,
          }),
        ];
      },
    });
  },
  V2 = "" + new URL("background-D7NRJyvC.jpg", import.meta.url).href,
  Ev = {
    homeCard: { width: 229, height: 300 },
    page: { width: 1920, height: 1080 },
    topChannelsWrapper: {
      width: 312,
      height: 837,
      alignItems: "center",
      justifyContent: "center",
      borderRadius: 16,
      gap: 16,
      color: 255,
    },
  },
  kB = "static/images/channels/",
  _B = {
    width: 280,
    height: 136,
    color: 404232447,
    borderRadius: 16,
    display: "flex",
    flexDirection: "column",
    justifyContent: "center",
    alignItems: "center",
    gap: 24,
    $focus: { border: { width: 4, color: 3978044671 } },
  },
  PB = { fontFamily: "Inter", fontWeight: 400, fontSize: 16, lineHeight: 1, height: 19 },
  DB = d =>
    me(at, {
      style: _B,
      id: "card",
      get children() {
        return [
          me(at, {
            width: 45,
            height: 45,
            get src() {
              return kB + d.channel.image;
            },
          }),
          me(kn, {
            style: PB,
            get children() {
              return d.channel.name;
            },
          }),
        ];
      },
    }),
  LB = [
    { name: "CBS", image: "CBS.png" },
    { name: "NBC", image: "NBC.png" },
    { name: "ABC", image: "ABC.png" },
    { name: "Fox", image: "FOX.png" },
    { name: "Fox News Channel", image: "FNC.png" },
  ],
  H2 = {
    fontFamily: "Inter",
    fontWeight: 700,
    fontSize: 24,
    lineHeight: 1,
    width: 280,
    height: 29,
    display: "flex",
    justifyContent: "center",
    alignSelf: "center",
  },
  bB = () =>
    me(mh, {
      get style() {
        return Ev.topChannelsWrapper;
      },
      flexBoundary: "fixed",
      get children() {
        return [
          me(at, {
            style: H2,
            skipFocus: !0,
            get children() {
              return me(kn, { style: H2, children: "Top 5 Channels" });
            },
          }),
          me(Ol, { each: LB, children: d => me(DB, { channel: d }) }),
        ];
      },
    }),
  NB = {
    borderRadius: 30,
    width: 352,
    height: 67,
    top: 19,
    color: 791621631,
    display: "flex",
    justifyContent: "center",
    alignItems: "center",
    $focus: { color: 3978044671 },
  },
  OB = { fontFace: "Inter", fontWeight: 600, fontSize: 24, letterSpacing: 0.06, display: "flex" },
  UB = d =>
    me(at, {
      style: NB,
      get children() {
        return me(kn, { style: OB, children: "GO TO LIVE PLAYER" });
      },
    });
function aC() {
  const d = Xl();
  return {
    toDetails(c, a) {
      d("/".concat(a.toLowerCase(), "/details/").concat(c));
    },
  };
}
const FB = "" + new URL("zabrinutiMita-BE4z5ffO.png", import.meta.url).href,
  uC = d => {
    var g, T, S, h;
    ((g = d.xPos) != null, (T = d.yPos) != null);
    const c = (S = d.width) != null ? S : 1920,
      a = (h = d.height) != null ? h : 1080;
    let f;
    return (
      lI(() => {
        f.animate({ rotation: Math.PI * 2 }, { duration: 1e3, repeat: -1, easing: "linear" }).start();
      }),
      me(at, {
        width: c,
        height: a,
        rect: !0,
        color: 255,
        zIndex: 200,
        alpha: 1,
        get children() {
          return [
            me(at, {
              ref(M) {
                var P = f;
                typeof P == "function" ? P(M) : (f = M);
              },
              src: FB,
              width: 120,
              height: 120,
              zIndex: 200,
              x: 960,
              y: 540,
              mountX: 0.5,
              mountY: 0.5,
            }),
            me(kn, { x: 880, y: 620, children: "Loading..." }),
          ];
        },
      })
    );
  },
  BB = { fontFamily: "Inter", fontWeight: 700, fontSize: 24, letterSpacing: 0.06, color: 4294967295 },
  jB = d => {
    (vh(1920), xh(1080), Ul(V2));
    const c = () => {
      Ul(V2);
    };
    pO("movies");
    const { toDetails: a } = aC();
    return me(Vl, {
      get when() {
        return d.data.rows[0].items();
      },
      get fallback() {
        return me(uC, {});
      },
      get children() {
        return me(at, {
          get style() {
            return Ev.page;
          },
          forwardFocus: 1,
          onFocus: c,
          get children() {
            return [
              me(at, { id: "gradient", width: 1920, height: 1080, colorTl: 353703423, colorBr: 0 }),
              me(mh, {
                y: 125,
                x: 62,
                gap: 5,
                get children() {
                  return [
                    me(yh, {
                      id: "homeContainer",
                      scroll: "none",
                      get children() {
                        return [
                          me(mh, {
                            id: "mediaContainer",
                            width: 1241,
                            height: 404,
                            autofocus: !0,
                            get children() {
                              return me(Ol, {
                                get each() {
                                  return d.data.rows;
                                },
                                children: f => [
                                  me(kn, {
                                    style: BB,
                                    skipFocus: !0,
                                    get children() {
                                      return f.title;
                                    },
                                  }),
                                  me(yh, {
                                    width: 1241,
                                    height: 359,
                                    gap: 24,
                                    scroll: "none",
                                    get children() {
                                      return me(Ol, {
                                        get each() {
                                          return f.items();
                                        },
                                        children: g =>
                                          me(RB, {
                                            item: g,
                                            get style() {
                                              return Ev.homeCard;
                                            },
                                            onEnter: () => a(g.id, f.title),
                                          }),
                                      });
                                    },
                                  }),
                                ],
                              });
                            },
                          }),
                          me(bB, {}),
                        ];
                      },
                    }),
                    me(UB, {}),
                  ];
                },
              }),
            ];
          },
        });
      },
    });
  },
  VB = { width: 440, height: 265, scale: 1, $focus: { scale: 1.1 } },
  HB = {
    fontWeight: 400,
    fontSize: 24,
    maxLines: 1,
    contain: "width",
    lineHeight: 1,
    color: 4294967193,
    $focus: { color: 4294967295 },
  },
  GB = { borderRadius: 6, $focus: { border: { width: 6, color: 3978044671 } } },
  zB = d => {
    const { title: c, poster_path: a } = d.item;
    return me(at, {
      id: "card",
      get item() {
        return d.item;
      },
      get width() {
        return d.style.width;
      },
      get height() {
        return d.style.height;
      },
      display: "flex",
      flexDirection: "column",
      style: VB,
      gap: 16,
      forwardStates: !0,
      focusable: !0,
      onEnter: () => d.onEnter(),
      get children() {
        return [
          me(at, {
            id: "picture",
            style: GB,
            get src() {
              return jv(a, "w500");
            },
          }),
          me(kn, {
            id: "text",
            get y() {
              return d.style.height;
            },
            get width() {
              return d.style.width;
            },
            style: HB,
            children: c,
          }),
        ];
      },
    });
  },
  XB = { fontWeight: 700, fontSize: 24, letterSpacing: 0.06, color: 4294967295 },
  WB = d => {
    let c, a, f, g;
    (vh(1920), xh(697), Ul(" "));
    const { toDetails: T } = aC(),
      S = () => location.hash.endsWith("movies"),
      h = hv(P => {
        S() && Ul(P);
      }, 400),
      M = hv((P, N) => {
        S() && (vO(P), TO(N));
      }, 400);
    return (
      lI(async () => {
        (C2(!0), await oC(), C2(!1));
      }),
      Pa(
        Da(
          Pv,
          P => {
            if (
              (console.log("asdf wrapper: ", g),
              Th() !== "/movies" || (console.log("asdf upad u efekat ON, prevPath: ", Th()), !P))
            )
              return;
            console.log("asdf upad 2");
            const N = P.item;
            N != null &&
              N.backdrop_path &&
              (vh(1920),
              xh(697),
              h("https://image.tmdb.org/t/p/w720/".concat(N.backdrop_path)),
              M(N.title || N.name || "", N.overview || ""));
          },
          { defer: !0 },
        ),
      ),
      me(Vl, {
        get when() {
          var P;
          return (P = d.data.movies()) == null ? void 0 : P.length;
        },
        get fallback() {
          return me(uC, {});
        },
        get children() {
          return me(at, {
            forwardFocus: 6,
            ref(P) {
              var N = f;
              typeof N == "function" ? N(P) : (f = P);
            },
            get children() {
              return [
                me(at, {
                  ref(P) {
                    var N = c;
                    typeof N == "function" ? N(P) : (c = P);
                  },
                  width: 1920,
                  height: 697,
                  alpha: 0,
                  textureOptions: { resizeMode: { type: "contain" } },
                }),
                me(at, {
                  ref(P) {
                    var N = a;
                    typeof N == "function" ? N(P) : (a = P);
                  },
                  width: 1920,
                  height: 697,
                  alpha: 0,
                  textureOptions: { resizeMode: { type: "contain" } },
                }),
                me(at, {
                  width: 1920,
                  height: 1080,
                  colorTl: 353703423,
                  colorTr: "rgba(21,21,21,0.6)",
                  colorBl: 353703423,
                  colorBr: "rgba(21,21,21,0.6)",
                }),
                me(at, {
                  width: 1920,
                  height: 1080,
                  colorTl: 353703423,
                  colorTr: 353703423,
                  colorBl: "rgba(21,21,21,0)",
                  colorBr: "rgba(21,21,21,0)",
                }),
                me(kn, {
                  x: 69,
                  y: 258,
                  fontSize: 28,
                  fontWeight: 600,
                  color: 4294967295,
                  fontFamily: "Inter",
                  get children() {
                    return yO();
                  },
                }),
                me(kn, {
                  width: 698,
                  height: 124,
                  x: 69,
                  y: 316,
                  fontSize: 22,
                  fontWeight: 600,
                  contain: "width",
                  fontFamily: "Inter",
                  lineHeight: 31,
                  get children() {
                    return xO();
                  },
                }),
                me(yh, {
                  y: 697,
                  x: 64,
                  gap: 24,
                  width: 1241,
                  autofocus: !0,
                  scroll: "edge",
                  throttleInput: 200,
                  get children() {
                    return me(Ol, {
                      get each() {
                        var P;
                        return (P = d.data.movies()) != null ? P : [];
                      },
                      children: P =>
                        me(zB, {
                          item: P,
                          style: XB,
                          onEnter: () => {
                            T(P.id, "movies");
                          },
                          ref(N) {
                            var D = g;
                            typeof D == "function" ? D(N) : (g = N);
                          },
                        }),
                    });
                  },
                }),
              ];
            },
          });
        },
      })
    );
  };
async function KB(d) {
  return await Kl.get("/movie/" + d);
}
async function $B(d) {
  const c = await Kl.get("/tv/" + d),
    {
      name: a,
      genres: f,
      episode_run_time: g,
      origin_country: T,
      first_air_date: S,
      poster_path: h,
      overview: M,
      backdrop_path: P,
      id: N,
      vote_average: D,
    } = c;
  return {
    title: a,
    genres: f,
    runtime: g,
    origin_country: T,
    release_date: S,
    poster_path: h,
    overview: M,
    backdrop_path: P,
    id: N,
    vote_average: D,
  };
}
const YB =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAABQ0lEQVR4AczXgQ2CMBCFYWESR3EUnUSdRDfRUXQSfH9jyBmptEJzZ3qhtli+FFrOfrPgMwzDSbFfMMTsT/8GCnbT6EfFRfWdjk3KX0CBwFnUtolOg1YDJ3DXruuuGqtJqQJmcIcmsvegxUAPHMYioBeuCOiJmwV6434CI+CywCi4SaBwF3XYTZh9rulWoutly8cqfuPsu9UVh3oERsSNwAkcfU+1k614RbqTvRBUCFA2yFQ8I2VJ3OKHVUWr98pE7kKdFbaAps0zDtiYwY0qJ+nA6JBKyu9od4yUwiUgJCA6WuRRzydwNfuVEQghIvIDCFLB1IaZyS+gZpEFEgb5BdQMsmjCICeBkZBZYB2Ss9vETyCX9H4mZ4HeyCKgJ7IYOIO0GTinrhZVQK6aeSbTu5v+taMaCMAg+a9y1nc2drpWjxcAAAD//5aIUZAAAAAGSURBVAMA7GtAR3aIKhkAAAAASUVORK5CYII=",
  qB = {
    width: 112,
    height: 64,
    borderRadius: 300,
    display: "flex",
    justifyContent: "center",
    alignItems: "center",
    color: 791621631,
    $focus: { color: 3978044671 },
  },
  JB = d => (
    Xl(),
    me(at, {
      style: qB,
      onEnter: () => history.back(),
      get children() {
        return me(at, { src: YB, width: 48, height: 48 });
      },
    })
  ),
  QB =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAASCAYAAABSO15qAAAA7ElEQVR4AaSQCxHCQAxE2ypAAjgACTgABRQFrQOKAloHVAFIwAE4AAfg4Hh7c2Wm9P+ZbJPcZTfJBR6fMSYyxqRgTjrIAkghjBRE4El+ADPiXqYJ/rsmMO+I7PCdJoG6IomeEbkAxXU19qxJwF7y24DWtboE4FtrXKuvgFS0itbS+yjWmTdEwBL4LYHWOuFHCYgnxDxwPGYCkQu8pwhkvu/nYwRutF9BjvGD3uAFIYS4Bg9ia30nOFKtrjm+ZF0CGndBxwR8SkyXNAlo3C0kjavYlVedBH77uOti3KvLW11AFxXuqcpA67jcV+wLAAD//znRRWQAAAAGSURBVAMAUnpQLAZjcHYAAAAASUVORK5CYII=",
  ZB = {
    width: 286,
    height: 78,
    borderRadius: 300,
    gap: 10,
    color: 791621631,
    display: "flex",
    flexDirection: "row",
    justifyContent: "center",
    alignItems: "center",
    $focus: { color: 3978044671 },
  },
  ej = { fontFamily: "Inter", fontWeight: 600, fontSize: 20, lineHeight: 1, letterSpacing: 0.08 },
  tj = d =>
    me(at, {
      style: ZB,
      get children() {
        return [me(at, { src: QB, width: 24, height: 24 }), me(kn, { style: ej, children: "WATCH NOW" })];
      },
    }),
  Qy = { fontFamily: "Inter", fontWeight: 400, fontSize: 20, lineHeight: 29, letterSpacing: 0 },
  nj = () => {
    const { id: d, mediaType: c } = PN(),
      [a] = dh(() => d, c === "movies" ? KB : $B),
      f = Xl();
    (vh(1920), xh(1080), Ul(" "));
    const g = () => (f(-1), !0);
    return me(at, {
      onBack: g,
      onBackspace: g,
      get children() {
        return me(Vl, {
          get when() {
            return a();
          },
          get children() {
            return me(mh, {
              width: 1083,
              height: 700,
              x: 69,
              y: 65,
              gap: 44,
              display: "flex",
              flexDirection: "column",
              forwardFocus: 1,
              get children() {
                return [
                  me(JB, {}),
                  me(at, {
                    width: 1083,
                    height: 592,
                    gap: 25,
                    display: "flex",
                    flexDirection: "column",
                    id: "data",
                    forwardFocus: 1,
                    autofocus: !0,
                    get children() {
                      return [
                        me(at, {
                          id: "metaData",
                          width: 1083,
                          height: 82,
                          display: "flex",
                          flexDirection: "column",
                          get children() {
                            return [
                              me(kn, { style: Qy, children: "Drama" }),
                              me(kn, { style: Qy, children: "98 Minutes" }),
                              me(kn, { style: Qy, children: "US - 1987 - PG - IMDb: 7.7" }),
                            ];
                          },
                        }),
                        me(at, {
                          id: "generalData",
                          width: 1083,
                          height: 485,
                          display: "flex",
                          gap: 60,
                          forwardFocus: 1,
                          get children() {
                            return [
                              me(at, {
                                width: 325,
                                height: 485,
                                get src() {
                                  var T;
                                  return jv((T = a()) == null ? void 0 : T.poster_path, "w342");
                                },
                              }),
                              me(at, {
                                id: "baseInfo",
                                width: 698,
                                height: 435,
                                gap: 37,
                                display: "flex",
                                flexDirection: "column",
                                alignSelf: "center",
                                forwardFocus: 2,
                                get children() {
                                  return [
                                    me(at, {
                                      id: "titleAndDescription",
                                      width: 698,
                                      height: 182,
                                      gap: 40,
                                      display: "flex",
                                      flexDirection: "column",
                                      get children() {
                                        return [
                                          " ",
                                          me(kn, {
                                            fontFamily: "Inter",
                                            fontWeight: 600,
                                            fontSize: 28,
                                            letterSpacing: 0,
                                            contain: "width",
                                            get children() {
                                              var T;
                                              return (T = a()) == null ? void 0 : T.title;
                                            },
                                          }),
                                          me(kn, {
                                            fontFamily: "Inter",
                                            fontWeight: 600,
                                            fontSize: 22,
                                            lineHeight: 31,
                                            letterSpacing: 0,
                                            contain: "width",
                                            maxLines: 4,
                                            get children() {
                                              var T;
                                              return (T = a()) == null ? void 0 : T.overview;
                                            },
                                          }),
                                        ];
                                      },
                                    }),
                                    me(at, {
                                      id: "castAndCrew",
                                      width: 698,
                                      height: 101,
                                      gap: 8,
                                      display: "flex",
                                      flexDirection: "column",
                                      get children() {
                                        return [
                                          me(at, {
                                            display: "flex",
                                            width: 698,
                                            get children() {
                                              return me(kn, {
                                                fontFamily: "Inter",
                                                fontWeight: 400,
                                                fontSize: 22,
                                                contain: "width",
                                                maxLines: 2,
                                                children:
                                                  "Director: Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari",
                                              });
                                            },
                                          }),
                                          me(at, {
                                            display: "flex",
                                            width: 698,
                                            get children() {
                                              return me(kn, {
                                                fontFamily: "Inter",
                                                fontWeight: 400,
                                                fontSize: 22,
                                                contain: "width",
                                                maxLines: 2,
                                                children:
                                                  "Cast: Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari, Enzo G. Castellari",
                                              });
                                            },
                                          }),
                                        ];
                                      },
                                    }),
                                    me(tj, {}),
                                  ];
                                },
                              }),
                            ];
                          },
                        }),
                      ];
                    },
                  }),
                ];
              },
            });
          },
        });
      },
    });
  };
QF(nn, Sv.lightning);
const { render: rj } = vN();
b3(IO);
rj(
  () => (
    zN(Sv.keys, Sv.keyHoldOptions),
    me(hO, {
      get children() {
        return me(eO, {
          root: EO,
          get children() {
            return [
              me(Ky, {
                path: "",
                component: EB,
                get children() {
                  return [
                    me(Ky, {
                      id: "home",
                      path: "/",
                      component: jB,
                      preload: TB,
                      shouldDispose: () => M2() === "/movies",
                    }),
                    me(Ky, {
                      id: "movies",
                      path: "/movies",
                      component: WB,
                      preload: oC,
                      shouldDispose: () => M2() === "/",
                    }),
                  ];
                },
              }),
              me(_I, { path: "/:mediaType/details/:id", component: nj }),
            ];
          },
        });
      },
    })
  ),
);
export { sj as __vite_legacy_guard };
